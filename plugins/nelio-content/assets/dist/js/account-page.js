(()=>{var e={4184:(e,n)=>{var t;!function(){"use strict";var o={}.hasOwnProperty;function i(){for(var e=[],n=0;n<arguments.length;n++){var t=arguments[n];if(t){var r=typeof t;if("string"===r||"number"===r)e.push(t);else if(Array.isArray(t)){if(t.length){var c=i.apply(null,t);c&&e.push(c)}}else if("object"===r){if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]")){e.push(t.toString());continue}for(var a in t)o.call(t,a)&&t[a]&&e.push(a)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(t=function(){return i}.apply(n,[]))||(e.exports=t)}()},5779:(e,n)=>{"use strict";function t(e){return e}n.Sy=function(){return t}}},n={};function t(o){var i=n[o];if(void 0!==i)return i.exports;var r=n[o]={exports:{}};return e[o](r,r.exports,t),r.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";t.r(o),t.d(o,{initPage:()=>En});var e={};t.r(e),t.d(e,{getAccount:()=>g,getEditingLicense:()=>h,getInvoices:()=>b,getProducts:()=>y,getSiteId:()=>v,getSites:()=>x,isAgencySummary:()=>w,isDialogOpen:()=>_,isLocked:()=>E});var n={};t.r(n),t.d(n,{closeDialog:()=>I,enableAgencyFullView:()=>T,lock:()=>A,openDialog:()=>D,receiveAccount:()=>S,receiveInvoices:()=>O,receiveProducts:()=>k,receiveSites:()=>N,removeSite:()=>C,setEditingLicense:()=>P,unlock:()=>L});var i={};t.r(i),t.d(i,{applyLicense:()=>$,cancelSubscription:()=>K,createFreeSite:()=>Y,reactivateSubscription:()=>H,removeLicense:()=>W,upgradeSubscription:()=>q});var r={};t.r(r),t.d(r,{getAccount:()=>X,getInvoices:()=>Z,getProducts:()=>ne,getSites:()=>ee});const c=window.wp.element,a=window.wp.components,l=window.wp.data,s=window.lodash;var u=t(5779),m="nelio-content/account",p={info:{plan:"free",siteId:(0,u.Sy)()(""),limits:{maxAutomationGroups:0,maxProfiles:0,maxProfilesPerNetwork:0}},invoices:[],products:[],sites:[],meta:{dialog:void 0,editingLicense:"",lockReason:void 0,isAgencySummary:!1}},d=function(){return d=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},d.apply(this,arguments)};const f=window.NelioContent.utils;function v(e){return e.info.siteId}function _(e,n){return e.meta.dialog===n}function E(e,n){return(0,f.isEmpty)(n)?!(0,f.isEmpty)(e.meta.lockReason):n===e.meta.lockReason}function h(e){return e.meta.editingLicense}function g(e){return e.info}function b(e){return e.invoices}function y(e){return e.products}function x(e){return e.sites||[]}function w(e){return e.meta.isAgencySummary}function S(e){return{type:"RECEIVE_ACCOUNT",account:e}}function N(e){return{type:"RECEIVE_SITES",sites:(0,s.castArray)(e)}}function C(e){return{type:"REMOVE_SITE",siteId:e}}function O(e){return{type:"RECEIVE_INVOICES",invoices:(0,s.castArray)(e)}}function k(e){return{type:"RECEIVE_PRODUCTS",products:(0,s.castArray)(e)}}function D(e){return{type:"OPEN_DIALOG",dialogName:e}}function I(){return{type:"CLOSE_DIALOG"}}function A(e){return void 0===e&&(e="no-reason"),{type:"LOCK_PAGE",reason:e}}function L(){return{type:"UNLOCK_PAGE"}}function P(e){return{type:"SET_EDITING_LICENSE",license:e}}function T(){return{type:"ENABLE_AGENCY_FULL_VIEW"}}const R=window.wp.apiFetch;var F=t.n(R);const j=window.wp.i18n,B=window.wp.notices;var U,V=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function c(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((o=o.apply(e,n||[])).next())}))},G=function(e,n){var t,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(c=0)),c;)try{if(t=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,o=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=n.call(e,c)}catch(e){a=[6,e],o=0}finally{t=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},M=null!==(U=null===B.store||void 0===B.store?void 0:B.store.name)&&void 0!==U?U:"core/notices";function Y(){return V(this,void 0,void 0,(function(){return G(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,F()({path:"/nelio-content/v1/site/free",method:"POST"})];case 1:return e.sent(),[3,3];case 2:return z(e.sent()),[3,3];case 3:return[2]}}))}))}function $(e){return V(this,void 0,void 0,(function(){return G(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(0,l.dispatch)(m).lock("apply-license"),[4,F()({path:"/nelio-content/v1/site/use-license",method:"POST",data:{license:e}})];case 1:return n.sent(),window.location.reload(),[3,3];case 2:return z(n.sent()),(0,l.dispatch)(m).unlock(),(0,l.dispatch)(m).closeDialog(),[3,3];case 3:return[2]}}))}))}function W(e){return V(this,void 0,void 0,(function(){return G(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(0,l.dispatch)(m).lock("remove-license"),[4,F()({path:"/nelio-content/v1/site/remove-license",method:"POST",data:{siteId:e}})];case 1:return n.sent(),(0,l.select)(m).getSiteId()===e?(window.location.reload(),[2]):((0,l.dispatch)(m).removeSite(e),[3,3]);case 2:return z(n.sent()),(0,l.dispatch)(m).unlock(),(0,l.dispatch)(m).closeDialog(),[3,3];case 3:return[2]}}))}))}function K(){return V(this,void 0,void 0,(function(){return G(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),(0,l.dispatch)(m).lock("cancel-subscription"),[4,F()({path:"/nelio-content/v1/subscription",method:"DELETE"})];case 1:return e.sent(),window.location.reload(),[3,3];case 2:return z(e.sent()),(0,l.dispatch)(m).unlock(),(0,l.dispatch)(m).closeDialog(),[3,3];case 3:return[2]}}))}))}function H(){return V(this,void 0,void 0,(function(){return G(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),(0,l.dispatch)(m).lock("reactivate-subscription"),[4,F()({path:"/nelio-content/v1/subscription/uncancel",method:"POST"})];case 1:return e.sent(),window.location.reload(),[3,3];case 2:return z(e.sent()),(0,l.dispatch)(m).unlock(),(0,l.dispatch)(m).closeDialog(),[3,3];case 3:return[2]}}))}))}function q(e){return V(this,void 0,void 0,(function(){var n;return G(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),(0,l.dispatch)(m).lock("upgrade-subscription"),[4,F()({path:"/nelio-content/v1/subscription/upgrade",method:"PUT",data:{product:e}})];case 1:return t.sent(),window.location.reload(),[3,3];case 2:return n=t.sent(),(0,l.dispatch)(m).unlock(),z(n),[3,3];case 3:return[2]}}))}))}function z(e){(0,l.dispatch)(M).createErrorNotice(e.message||(0,j._x)("Something went wrong","text","nelio-content"))}var Q=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function c(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((o=o.apply(e,n||[])).next())}))},J=function(e,n){var t,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(c=0)),c;)try{if(t=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,o=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=n.call(e,c)}catch(e){a=[6,e],o=0}finally{t=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};function X(){return Q(this,void 0,void 0,(function(){var e;return J(this,(function(n){switch(n.label){case 0:return[4,F()({path:"/nelio-content/v1/site"})];case 1:return e=n.sent(),(0,l.dispatch)(m).receiveAccount(e),[2]}}))}))}function Z(){return Q(this,void 0,void 0,(function(){var e;return J(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,F()({path:"/nelio-content/v1/subscription/invoices"})];case 1:return e=n.sent(),(0,l.dispatch)(m).receiveInvoices(e),[3,3];case 2:return n.sent(),(0,l.dispatch)(m).receiveInvoices([]),[3,3];case 3:return[2]}}))}))}function ee(){return Q(this,void 0,void 0,(function(){var e;return J(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,F()({path:"/nelio-content/v1/subscription/sites"})];case 1:return e=n.sent(),(0,l.dispatch)(m).receiveSites(e),[3,3];case 2:return n.sent(),(0,l.dispatch)(m).receiveSites([]),[3,3];case 3:return[2]}}))}))}function ne(){return Q(this,void 0,void 0,(function(){var e;return J(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,F()({path:"/nelio-content/v1/products"})];case 1:return e=n.sent(),(0,l.dispatch)(m).receiveProducts(e),[3,3];case 2:return n.sent(),(0,l.dispatch)(m).receiveProducts([]),[3,3];case 3:return[2]}}))}))}var te=function(){return te=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},te.apply(this,arguments)},oe=te(te({},n),i);(0,l.registerStore)(m,{reducer:function(e,n){var t;return void 0===e&&(e=p),null!==(t=function(e,n){switch(n.type){case"RECEIVE_ACCOUNT":return d(d({},e),{info:n.account,meta:d(d({},e.meta),{isAgencySummary:"free"!==n.account.plan&&!!n.account.isAgency})});case"RECEIVE_PRODUCTS":return d(d({},e),{products:n.products});case"RECEIVE_SITES":return d(d({},e),{sites:n.sites});case"REMOVE_SITE":return d(d({},e),{sites:(0,s.reject)(e.sites,{id:n.siteId})});case"RECEIVE_INVOICES":return d(d({},e),{invoices:n.invoices});case"OPEN_DIALOG":return d(d({},e),{meta:d(d({},e.meta),{dialog:n.dialogName})});case"CLOSE_DIALOG":return d(d({},e),{meta:d(d({},e.meta),{dialog:void 0})});case"ENABLE_AGENCY_FULL_VIEW":return d(d({},e),{meta:d(d({},e.meta),{isAgencySummary:!1})});case"LOCK_PAGE":return d(d({},e),{meta:d(d({},e.meta),{lockReason:n.reason})});case"UNLOCK_PAGE":return d(d({},e),{meta:d(d({},e.meta),{lockReason:void 0})});case"SET_EDITING_LICENSE":return d(d({},e),{meta:d(d({},e.meta),{editingLicense:n.license})})}}(e,n))&&void 0!==t?t:e},controls:l.controls,actions:oe,selectors:e,resolvers:r});const ie=window.NelioContent.components;var re,ce=null!==(re=null===B.store||void 0===B.store?void 0:B.store.name)&&void 0!==re?re:"core/notices",ae=function(e){var n=e.children,t=le(),o=se(),i=o[0],r=o[1];return t?c.createElement(ie.LoadingAnimation,{text:(0,j._x)("Loading…","text","nelio-content")}):c.createElement(c.Fragment,null,c.createElement(a.NoticeList,{notices:i,className:"components-editor-notices__pinned",onRemove:r}),n)},le=function(){return(0,l.useSelect)((function(e){return e(m).getAccount(),!e(m).hasFinishedResolution("getAccount")}))},se=function(){return[(0,l.useSelect)((function(e){return e(ce).getNotices()})),(0,l.useDispatch)(ce).removeNotice]},ue=t(4184),me=t.n(ue),pe=function(e){var n=(0,l.useSelect)((function(n){return n(m).isDialogOpen(e)})),t=(0,l.useDispatch)(m),o=t.openDialog,i=t.closeDialog;return[n,function(n){return n?o(e):i()}]},de=function(e){return(0,l.useSelect)((function(n){return n(m).isLocked(e)}))},fe=function(){return(0,l.useSelect)((function(e){var n=(0,e(m).getAccount)();if("free"===n.plan)return[];var t=e(m).getProducts;return(0,s.filter)(t(),(function(e){return e.upgradeableFrom.includes(n.productId)}))}))},ve=function(e){var n=e.isOpen,t=e.onFocusOutside,o=e.position,i=_e(),r=i[0],s=i[1],u=de(),p=de("apply-license"),d=(0,l.useDispatch)(m).applyLicense;return n?c.createElement(a.Popover,{position:o,onFocusOutside:!u&&t?t:void 0},c.createElement("div",{className:"nelio-content-license-form"},c.createElement(a.TextControl,{value:r,placeholder:(0,j._x)("Type your license here","user","nelio-content"),maxLength:Math.max(21,26),className:"nelio-content-license-form__text-control",disabled:u,onChange:s}),c.createElement(a.Button,{variant:"primary",isBusy:p,className:"nelio-content-license-form__button",disabled:u||21!==r.length&&26!==r.length,onClick:function(){return d(r)}},p?(0,j._x)("Applying…","text","nelio-content"):(0,j._x)("Apply","command","nelio-content")))):null},_e=function(){return[(0,l.useSelect)((function(e){return e(m).getEditingLicense()})),(0,l.useDispatch)(m).setEditingLicense]},Ee=function(){return Ee=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Ee.apply(this,arguments)},he=function(e){var n=e.label,t=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)n.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(t[o[i]]=e[o[i]])}return t}(e,["label"]),o=pe("license-popover"),i=o[0],r=o[1],l=de();return c.createElement("span",null,c.createElement(a.Button,Ee({disabled:l,onClick:function(){return r(!0)}},t),n),c.createElement(ve,{position:"bottom center",onFocusOutside:function(){return r(!1)},isOpen:i}))};const ge=window.NelioContent.date;var be=(0,j._x)("Y-m-d","text (date)","nelio-content"),ye=function(){var e=pe("cancel-subscription"),n=e[0],t=e[1],o=de("cancel-subscription"),i=de(),r=(0,l.useSelect)((function(e){var n=e(m).getAccount();return"free"===n.plan?"":n.nextChargeDate})),s=(0,l.useDispatch)(m).cancelSubscription;return c.createElement(c.Fragment,null,c.createElement(a.Button,{variant:"tertiary",isDestructive:!0,onClick:function(){return t(!0)},disabled:i},(0,j._x)("Cancel Subscription","command","nelio-content")),c.createElement(ie.ConfirmationDialog,{title:(0,j._x)("Cancel Subscription?","text","nelio-content"),text:(0,j.sprintf)(/* translators: a date */
(0,j._x)("Canceling your subscription will cause it not to renew. If you cancel your subscrition, it will continue until %s. Then, the subscription will expire and will not be invoiced again. Do you want to cancel your subscription?","user","nelio-content"),(0,ge.dateI18n)(be,r)),confirmLabel:o?(0,j._x)("Canceling…","text","nelio-content"):(0,j._x)("Cancel Subscription","command","nelio-content"),cancelLabel:(0,j._x)("Back","command","nelio-content"),isDestructive:!0,onCancel:function(){return t(!1)},onConfirm:s,isConfirmEnabled:!i,isCancelEnabled:!i,isOpen:n,isConfirmBusy:o}))},xe=(0,j._x)("Y-m-d","text (date)","nelio-content"),we=function(){var e=(0,l.useSelect)((function(e){return e(m).isLocked()})),n=(0,l.useSelect)((function(e){return e(m).isDialogOpen("reactivate-subscription")})),t=(0,l.useSelect)((function(e){return e(m).isLocked("reactivate-subscription")})),o=(0,l.useSelect)((function(e){var n=e(m).getAccount();return"free"===n.plan?"":n.nextChargeDate})),i=(0,l.useDispatch)(m),r=i.reactivateSubscription,s=i.openDialog,u=i.closeDialog;return c.createElement(c.Fragment,null,c.createElement(a.Button,{variant:"primary",onClick:function(){return s("reactivate-subscription")},disabled:e},(0,j._x)("Reactivate Subscription","command","nelio-content")),c.createElement(ie.ConfirmationDialog,{title:(0,j._x)("Reactivate Subscription?","text","nelio-content"),text:(0,j.sprintf)(/* translators: a date */
(0,j._x)("Reactivating your subscription will cause it to renew on %s. Do you want to reactivate your subscription?","user","nelio-content"),(0,ge.dateI18n)(xe,o)),confirmLabel:t?(0,j._x)("Reactivating…","text","nelio-content"):(0,j._x)("Reactivate Subscription","command","nelio-content"),cancelLabel:(0,j._x)("Back","command","nelio-content"),onCancel:u,onConfirm:r,isConfirmEnabled:!e,isCancelEnabled:!e,isOpen:n,isConfirmBusy:t}))},Se=function(){return Se=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Se.apply(this,arguments)},Ne=function(e){var n=e.isOpen,t=e.position,o=e.onUpgrade,i=e.onFocusOutside,r=(0,c.useState)(),s=r[0],u=r[1],p=fe(),d=ke(),f=(0,l.useDispatch)(m).upgradeSubscription;return n?d?c.createElement(a.Popover,{className:"nelio-content-upgrade-form--loading",noArrow:!1,position:t,onFocusOutside:i},c.createElement(a.Spinner,null)):c.createElement(a.Popover,{className:"nelio-content-upgrade-form",noArrow:!1,position:t,onFocusOutside:i},c.createElement(a.RadioControl,{className:"nelio-content-upgrade-form__product-container",label:(0,j._x)("Subscription Plans","text","nelio-content"),selected:s,options:p.map((function(e){return{label:c.createElement(Ce,Se({},e)),value:e.id}})),onChange:u}),c.createElement("div",{className:"nelio-content-upgrade-form__button-container"},c.createElement(a.Button,{variant:"primary",className:"nelio-content-upgrade-form__button",disabled:!s,onClick:function(){s&&(o(),f(s))}},(0,j._x)("Upgrade","command","nelio-content")))):null},Ce=function(e){var n=e.displayName,t=e.price,o=e.description,i=Oe();return c.createElement("div",{className:"nelio-content-upgrade-form__product"},c.createElement("strong",{className:"nelio-content-upgrade-form__product-name"},Ie(n)),c.createElement("span",{className:"nelio-content-upgrade-form__product-price",title:i},De(t[i],i)),c.createElement("span",{className:"nelio-content-upgrade-form__product-description"},Ie(o)))},Oe=function(){return(0,l.useSelect)((function(e){var n=e(m).getAccount();return"free"===n.plan?"USD":n.currency||"USD"}))},ke=function(){return(0,l.useSelect)((function(e){return!e(m).hasFinishedResolution("getProducts")}))},De=function(e,n){return"EUR"===n?"".concat(null!=e?e:"—","€"):"$".concat(null!=e?e:"—")},Ie=function(e){return e[(0,f.getShortLocale)()]||e.en},Ae=function(){var e=(0,c.useState)(!1),n=e[0],t=e[1],o=de(),i=de("upgrade-subscription");return fe().length?c.createElement("div",null,c.createElement(a.Button,{variant:"primary",isBusy:i,onClick:function(){return t(!0)},disabled:o},i?(0,j._x)("Upgrading…","text","nelio-content"):(0,j._x)("Upgrade Subscription","command","nelio-content")),c.createElement(Ne,{isOpen:n,position:"bottom center",onFocusOutside:function(){return t(!1)},onUpgrade:function(){return t(!1)}})):null},Le=function(){return Le=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Le.apply(this,arguments)},Pe=function(e){var n=e.label,t=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)n.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(t[o[i]]=e[o[i]])}return t}(e,["label"]),o=pe("remove-license"),i=o[0],r=o[1],s=(0,l.useSelect)((function(e){return e(m).getSiteId()})),u=de("remove-license"),p=de(),d=(0,l.useDispatch)(m).removeLicense;return c.createElement(c.Fragment,null,c.createElement(a.Button,Le({onClick:function(){return r(!0)},disabled:p},t),n),c.createElement(ie.ConfirmationDialog,{title:(0,j._x)("Downgrade to Free Version?","text","nelio-content"),text:(0,j._x)("This action will remove the license from this site so that you can use it somewhere else. Nelio Content will remain active on this site, but you will be using the free version instead. This might result in some scheduled social messages being lost. Do you want to continue?","user","nelio-content"),confirmLabel:u?(0,j._x)("Downgrading…","text (remove license)","nelio-content"):(0,j._x)("Downgrade","command (remove license)","nelio-content"),cancelLabel:(0,j._x)("Back","command","nelio-content"),isDestructive:!0,onCancel:function(){return r(!1)},onConfirm:function(){d(s)},isConfirmEnabled:!p,isCancelEnabled:!p,isOpen:i,isConfirmBusy:u}))};const Te=window.NelioContent.data;var Re=function(){var e=(0,l.useSelect)((function(e){return e(Te.STORE_NAME).getToday()})),n=(0,f.getSubscribeLabel)(e),t=(0,f.getSubscribeLink)(e,"account-page");return c.createElement(a.ExternalLink,{className:"components-button is-primary",href:t},n)};const Fe=window.wp.url;var je=function(){return c.createElement(a.ExternalLink,{className:"components-button is-primary",href:(0,Fe.addQueryArgs)("https://twitter.com/intent/tweet",{text:(0,j._x)("Nelio Content is an awesome #EditorialCalendar for #WordPress by @NelioSoft!","text","nelio-content")})},(0,j._x)("Tweet About Nelio Content","command","nelio-content"))},Be=function(){return c.createElement("div",{className:"nelio-content-account-banner nelio-content-account-container__box"},c.createElement("div",{className:"nelio-content-account-banner__text"},c.createElement("h2",null,(0,j._x)("Social Marketing Made Easy","text","nelio-content")),c.createElement("p",null,(0,j._x)("Write new content and auto-fill its social media promotion queue with just one click. Give a second life to your best existing content.","user","nelio-content")),c.createElement("ul",null,c.createElement("li",null,c.createElement(a.Dashicon,{icon:"yes"}),(0,j._x)("Create and Use Social Templates","user","nelio-content")),c.createElement("li",null,c.createElement(a.Dashicon,{icon:"yes"}),(0,j._x)("Fill Your Social Timeline","user","nelio-content")),c.createElement("li",null,c.createElement(a.Dashicon,{icon:"yes"}),(0,j._x)("Extract and Share Relevant Sentences","user","nelio-content")),c.createElement("li",null,c.createElement(a.Dashicon,{icon:"yes"}),(0,j._x)("Reshare Good Old Content","user","nelio-content")))),c.createElement("div",{className:"nelio-content-account-banner__video"},c.createElement("video",{autoPlay:!0,loop:!0,muted:!0,poster:"https://neliosoftware.com/wp-content/uploads/videos/nelio-content-landing-v5.jpg"},c.createElement("source",{type:"video/mp4",src:"https://neliosoftware.com/wp-content/uploads/videos/nelio-content-landing-v5.mp4"}))),c.createElement("div",{className:"nelio-content-account-banner__actions"},c.createElement(he,{variant:"secondary",label:(0,j._x)("Use License","command","nelio-content")}),c.createElement(Re,null)))};const Ue=window.React;function Ve(e){return e.startsWith("{{/")?{type:"componentClose",value:e.replace(/\W/g,"")}:e.endsWith("/}}")?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.startsWith("{{")?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}function Ge(e,n){let t,o,i=[];for(let r=0;r<e.length;r++){const c=e[r];if("string"!==c.type){if(void 0===n[c.value])throw new Error(`Invalid interpolation, missing component node: \`${c.value}\``);if("object"!=typeof n[c.value])throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \`${c.value}\``);if("componentClose"===c.type)throw new Error(`Missing opening component token: \`${c.value}\``);if("componentOpen"===c.type){t=n[c.value],o=r;break}i.push(n[c.value])}else i.push(c.value)}if(t){const r=function(e,n){const t=n[e];let o=0;for(let i=e+1;i<n.length;i++){const e=n[i];if(e.value===t.value){if("componentOpen"===e.type){o++;continue}if("componentClose"===e.type){if(0===o)return i;o--}}}throw new Error("Missing closing component token `"+t.value+"`")}(o,e),c=Ge(e.slice(o+1,r),n),a=(0,Ue.cloneElement)(t,{},c);if(i.push(a),r<e.length-1){const t=Ge(e.slice(r+1),n);i=i.concat(t)}}return i=i.filter(Boolean),0===i.length?null:1===i.length?i[0]:(0,Ue.createElement)(Ue.Fragment,null,...i)}function Me(e){const{mixedString:n,components:t,throwErrors:o}=e;if(!t)return n;if("object"!=typeof t){if(o)throw new Error(`Interpolation Error: unable to process \`${n}\` because components is not an object`);return n}const i=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(Ve)}(n);try{return Ge(i,t)}catch(e){if(o)throw new Error(`Interpolation Error: unable to process \`${n}\` because of error \`${e.message}\``);return n}}var Ye=(0,j._x)("Y-m-d","text (date)","nelio-content"),$e=function(){var e=(0,l.useSelect)((function(e){return e(m).getAccount()}));if("free"===e.plan)return null;var n=e.mode,t=e.deactivationDate,o=e.nextChargeDate,i=e.nextChargeTotal,r=e.state;return"invitation"===n?c.createElement("div",{className:"nelio-content-plan__renewal"},(0,j._x)("You’re currently using a Free Pass to Nelio Content’s Premium Features. Enjoy the plugin and, please, help us improve it with your feedback!","text","nelio-content")):"canceled"===r?c.createElement("div",{className:"nelio-content-plan__renewal"},Me({mixedString:(0,j.sprintf)(/* translators: a date */
(0,j._x)("Your subscription will end on %s.","text","nelio-content"),"{{date}}".concat((0,ge.dateI18n)(Ye,t),"{{/date}}")),components:{date:c.createElement("span",{className:"nelio-content-plan__renewal-date"})}})):c.createElement("div",{className:"nelio-content-plan__renewal"},Me({mixedString:(0,j.sprintf)(/* translators: 1 -> price and currency; 2 -> date */
(0,j._x)("Next charge will be %1$s on %2$s.","text","nelio-content"),"{{money}}".concat(i,"{{/money}}"),"{{date}}".concat((0,ge.dateI18n)(Ye,o),"{{/date}}")),components:{date:c.createElement("span",{className:"nelio-content-plan__renewal-date"}),money:c.createElement("span",{className:"nelio-content-plan__renewal-amount"})}}))},We=function(e){var n,t=e.plan,o=e.period,i=e.isCanceled,r=e.isInvitation;return c.createElement("h3",{className:"nelio-content-plan__title"},null!==(n=Ke(t))&&void 0!==n?n:Ke("basic"),c.createElement("span",{className:"nelio-content-plan__period"},r&&(0,j._x)("Invitation","text","nelio-content"),!r&&"month"===o&&(0,j._x)("Monthly","text","nelio-content"),!r&&"year"===o&&(0,j._x)("Yearly","text","nelio-content")),i&&c.createElement("span",{className:"nelio-content-plan__state-canceled"},(0,j._x)("Canceled","text (account state)","nelio-content")))};function Ke(e){switch(e){case"free":return(0,j._x)("Nelio Content (Free)","text","nelio-content");case"plus":return(0,j._x)("Nelio Content Plus","text","nelio-content");case"standard":return(0,j._x)("Nelio Content Standard","text","nelio-content");case"basic":return(0,j._x)("Nelio Content Basic","text","nelio-content")}}var He=function(){var e=(0,l.useSelect)((function(e){return e(m).getAccount()}));if("free"===e.plan)return null;var n=e.mode,t=e.state,o=e.plan,i=e.period;return c.createElement("div",{className:"nelio-content-account-container__box nelio-content-plan"},c.createElement("div",{className:"nelio-content-plan__content"},c.createElement(We,{isCanceled:"canceled"===t,isInvitation:"invitation"===n,plan:o,period:i}),c.createElement($e,null)),c.createElement("div",{className:"nelio-content-plan__actions"},"invitation"===n&&c.createElement(je,null),"invitation"!==n&&"active"===t&&c.createElement(c.Fragment,null,c.createElement(ye,null),c.createElement(Ae,null)),"invitation"!==n&&"canceled"===t&&c.createElement(we,null)))},qe=function(){var e=(0,l.useSelect)((function(e){return e(m).getAccount()}));if("free"===e.plan)return null;var n=e.plan,t=e.period,o=e.state,i=e.mode;return c.createElement("div",{className:"nelio-content-account-container__box nelio-content-plan"},c.createElement("div",{className:"nelio-content-plan__content"},c.createElement(We,{isCanceled:"canceled"===o,isInvitation:"invitation"===i,plan:n,period:t}),c.createElement("div",{className:"nelio-content-plan__renewal"},(0,j._x)("You’re currently using an agency subscription plan.","user","nelio-content"))),c.createElement("div",{className:"nelio-content-plan__actions"},c.createElement(ze,null),c.createElement(Qe,null)))},ze=function(){var e=Je(),n=(0,c.useState)(!1),t=n[0],o=n[1],i=(0,l.useDispatch)(m).removeLicense,r=Xe(),s=function(){return o(!1)};return c.createElement(c.Fragment,null,c.createElement(a.Button,{isDestructive:!0,className:"nelio-content-plan__action",onClick:function(){return o(!0)},disabled:r},(0,j._x)("Downgrade to Free Version","command","nelio-content")),c.createElement(ie.ConfirmationDialog,{title:(0,j._x)("Downgrade to Free version?","text","nelio-content"),text:(0,j._x)("This will remove the subscription license from the site and you’ll be using Nelio Content’s free version.","text","nelio-content"),confirmLabel:(0,j._x)("Downgrade","command","nelio-content"),isOpen:t,onCancel:s,onConfirm:function(){s(),i(e)}}))},Qe=function(){var e=(0,l.useSelect)((function(e){return e(m).getAccount()})),n=Xe(),t=(0,c.useState)(!1),o=t[0],i=t[1],r=(0,c.useState)(""),s=r[0],u=r[1],p=(0,l.useDispatch)(m).enableAgencyFullView;if("free"===e.plan)return null;var d=function(){return i(!1)};return c.createElement("div",null,c.createElement(a.Button,{variant:"secondary",className:"nelio-content-plan__action",onClick:function(){return i(!0)},disabled:n},(0,j._x)("View Details","command","nelio-content")),o&&c.createElement(a.Popover,{noArrow:!1,position:"bottom left",onFocusOutside:d},c.createElement("div",{className:"nelio-content-license-form"},c.createElement(a.TextControl,{value:s,placeholder:(0,j._x)("Type your license here","user","nelio-content"),className:"nelio-content-license-form__text-control",onChange:u}),c.createElement(a.Button,{variant:"primary",className:"nelio-content-license-form__button",onClick:function(){e.license&&s===e.license?(p(),d()):u("")},disabled:s.length!==e.license.length},(0,j._x)("Validate","command","nelio-content")))))},Je=function(){return(0,l.useSelect)((function(e){return e(m).getSiteId()}))},Xe=function(){return(0,l.useSelect)((function(e){return e(m).isLocked()}))},Ze=(0,j._x)("Y-m-d","text (date)","nelio-content"),en=function(){var e=(0,l.useSelect)((function(e){return e(m).getAccount()}));if("free"===e.plan)return null;var n=e.creationDate,t=e.firstname,o=e.lastname,i=e.license,r=e.email,s=e.photo,u=(0,j.sprintf)(/* translators: 1 -> first name, 2 -> lastname */
(0,j._x)("%1$s %2$s","text (full name)","nelio-content"),t,o),p=(0,f.getFirstLatinizedLetter)(u)||"a";return c.createElement("div",{className:"nelio-content-account-container__box nelio-content-info"},c.createElement("h3",{className:"nelio-content-info__title"},(0,j._x)("Account Information","title (account)","nelio-content")),c.createElement("div",{className:"nelio-content-info__container"},c.createElement("div",{className:"nelio-content-info__profile"},c.createElement("div",{className:"nelio-content-info__picture nelio-content-first-letter-".concat(p)},c.createElement("div",{className:"nelio-content-info__actual-picture",style:{backgroundImage:"url(".concat(s,")")}}))),c.createElement("div",{className:"nelio-content-info__details"},c.createElement("p",{className:"nelio-content-info__name"},u),c.createElement("p",{className:"nelio-content-info__email"},c.createElement(a.Dashicon,{icon:"email",className:"nelio-content-info__icon"}),r),c.createElement("p",{className:"nelio-content-info__creation-date"},c.createElement(a.Dashicon,{icon:"calendar",className:"nelio-content-info__icon"}),Me({mixedString:(0,j.sprintf)(/* translators: a date */
(0,j._x)("Member since %s.","text","nelio-content"),"{{date}}".concat((0,ge.dateI18n)(Ze,n),"{{/date}}")),components:{date:c.createElement("strong",null)}})),c.createElement("div",{className:"nelio-content-info__license"},c.createElement(a.Dashicon,{icon:"admin-network",className:"nelio-content-info__icon"}),c.createElement("code",{title:(0,j._x)("License Key","text","nelio-content")},i),c.createElement("div",{className:"nelio-content-info__change-license"},c.createElement(he,{variant:"link",label:(0,j._x)("Change","command","nelio-content")})),c.createElement("div",{className:"nelio-content-info__remove-license"},c.createElement(Pe,{variant:"link",isDestructive:!0,label:(0,j._x)("Remove","command","nelio-content")}))))))},nn=function(e){var n=e.invoiceUrl,t=e.reference,o=e.chargeDate,i=e.isRefunded,r=e.subtotalDisplay;return c.createElement("tr",{className:"nelio-content-invoice"},c.createElement("td",{className:"nelio-content-invoice__reference"},c.createElement("a",{href:n,className:"nelio-content-invoice__link",target:"_blank",rel:"noopener noreferrer"},t)),c.createElement("td",{className:"nelio-content-invoice__date"},o),c.createElement("td",{className:"nelio-content-invoice__total"},i&&c.createElement("span",{className:"nelio-content-invoice__label"},(0,j._x)("(Refunded)","text (invoice)","nelio-content")),c.createElement("span",{className:me()({"nelio-content-invoice__total-value":!0,"nelio-content-invoice__total-value--refunded":i})},r)))},tn=function(){return tn=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},tn.apply(this,arguments)},on=function(){var e=rn(),n=cn(),t=an(),o=ln();return t?n?c.createElement("div",{className:"nelio-content-account-container__box nelio-content-billing"},c.createElement("h3",{className:"nelio-content-billing__title"},(0,j._x)("Billing History","text","nelio-content"),n&&c.createElement(a.Spinner,null))):c.createElement("div",{className:"nelio-content-account-container__box nelio-content-billing"},c.createElement("h3",{className:"nelio-content-billing__title"},(0,j._x)("Billing History","text","nelio-content")),!!o&&c.createElement(a.ExternalLink,{className:"nelio-content-billing__action",href:o},(0,j._x)("Manage Payments","command","nelio-content")),c.createElement("table",{className:"nelio-content-billing__container"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{className:"nelio-content-billing__reference"},(0,j._x)("Invoice Reference","text (account, billing table title)","nelio-content")),c.createElement("th",{className:"nelio-content-billing__date"},(0,j._x)("Date","text (account, billing table title)","nelio-content")),c.createElement("th",{className:"nelio-content-billing__total"},(0,j._x)("Total","text (account, billing table title)","nelio-content")))),c.createElement("tbody",{className:"invoice-list"},e.map((function(e){return c.createElement(nn,tn({key:e.reference},e))}))))):null},rn=function(){return(0,l.useSelect)((function(e){return e(m).getInvoices()||[]}))},cn=function(){return(0,l.useSelect)((function(e){return!e(m).hasFinishedResolution("getInvoices")}))},an=function(){return(0,l.useSelect)((function(e){var n=e(m).getAccount();return"free"!==n.plan&&"regular"===n.mode}))},ln=function(){return(0,l.useSelect)((function(e){var n=e(m).getAccount();return"free"===n.plan?"":n.urlToManagePayments}))},sn=function(e){var n=e.site,t=(0,c.useState)(!1),o=t[0],i=t[1],r=(0,l.useDispatch)(m).removeLicense,s=(0,l.useSelect)((function(e){return e(m).isLocked()})),u=n.isCurrentSite,p=n.url,d=n.actualUrl;return c.createElement("li",{className:"nelio-content-site"},u?c.createElement("span",{className:"nelio-content-site__url"},c.createElement("span",{className:"nelio-content-site__current-site"},d,!!d&&p!==d&&c.createElement(ie.HelpIcon,{className:"nelio-content-site__current-site-help",type:"info",text:(0,j.sprintf)(/* translators: site URL */
(0,j._x)("Activation URL is “%s”","text","nelio-content"),p)})),c.createElement("span",{className:"nelio-content-site__label"},(0,j._x)("This site","text","nelio-content"))):c.createElement(c.Fragment,null,c.createElement("span",{className:"nelio-content-site__url"},c.createElement("a",{href:p,className:me()("nelio-content-site__link",{"nelio-content-site__link--current":u}),target:"_blank",rel:"noopener noreferrer"},p)),c.createElement(a.Button,{isDestructive:!0,variant:"tertiary",className:"nelio-content-site__unlink-button",onClick:function(){return i(!0)},disabled:s},(0,j._x)("Unlink Site","command","nelio-content")),c.createElement(ie.ConfirmationDialog,{title:(0,j._x)("Unlink Site?","text","nelio-content"),text:(0,j._x)("This will remove the subscription license from the site.","text","nelio-content"),confirmLabel:(0,j._x)("Unlink","command","nelio-content"),isOpen:o,onCancel:function(){return i(!1)},onConfirm:function(){i(!1),r(n.id)}})))},un=function(){var e=mn(),n=dn(),t=pn(),o=t.length;return n<=1?null:c.createElement("div",{className:"nelio-content-account-container__box nelio-content-sites"},c.createElement("h3",{className:"nelio-content-sites__title"},(0,j._x)("Sites","text","nelio-content"),e&&c.createElement(a.Spinner,null),c.createElement("span",{className:"nelio-content-sites__availability"},!e&&"".concat(o," / ").concat(n))),c.createElement("ul",{className:"nelio-content-sites__list"},!e&&t.map((function(e){return c.createElement(sn,{key:e.id,site:e})}))))},mn=function(){return(0,l.useSelect)((function(e){return!e(m).hasFinishedResolution("getSites")}))},pn=function(){return(0,l.useSelect)((function(e){return e(m).getSites()||[]}))},dn=function(){return(0,l.useSelect)((function(e){var n=e(m).getAccount();return"free"===n.plan?1:n.sitesAllowed}))},fn=function(){var e=(0,l.useSelect)((function(e){return e(m).getAccount()}));if(!(0,l.useSelect)((function(e){return e(m).hasFinishedResolution("getAccount")})))return null;if("free"===e.plan)return c.createElement("div",{className:"nelio-content-account-container nelio-content-account-container--free-user"},c.createElement(Be,null));if(e.isAgency)return c.createElement("div",{className:"nelio-content-account-container nelio-content-account-container--is-agency-summary"},c.createElement(qe,null));var n="invitation"===e.mode,t=1<e.sitesAllowed;return c.createElement("div",{className:me()("nelio-content-account-container",{"nelio-content-account-container--is-invitation":n,"nelio-content-account-container--is-subscribed":!n,"nelio-content-account-container--is-multi-site":t})},c.createElement(He,null),c.createElement(en,null),c.createElement(un,null),c.createElement(on,null))},vn=function(e){var n,t=e.isSubscribed,o=e.siteId,i=(0,c.useState)(!1),r=i[0],l=i[1];return(0,c.useEffect)((function(){var e=setTimeout((function(){return l(!1)}),1500);return function(){return clearTimeout(e)}}),[r]),c.createElement("h1",{className:"wp-heading-inline nelio-content-page-title"},c.createElement("span",null,t?(0,j._x)("Account Details","text","nelio-content"):(0,j._x)("Upgrade to Premium","user","nelio-content")),c.createElement("span",{className:"nelio-content-page-title__support-key"},c.createElement("strong",null,(0,j._x)("Support Key:","text","nelio-content")),c.createElement("code",null,o),!!(null===(n=navigator.clipboard)||void 0===n?void 0:n.writeText)&&c.createElement(a.IconButton,{icon:"admin-page",onClick:function(){return!r&&void navigator.clipboard.writeText(o).then((function(){return l(!0)}))}})),r&&c.createElement(a.Snackbar,{className:"nelio-content-page-title__support-key-copied"},(0,j._x)("Copied!","text (support key)","nelio-content")))};function En(e,n){var t=n.siteId,o=n.isSubscribed,i=document.getElementById(e);(0,c.render)(c.createElement(a.SlotFillProvider,null,c.createElement(vn,{isSubscribed:o,siteId:t}),c.createElement(ae,null,c.createElement(fn,null)),c.createElement(a.Popover.Slot,null)),i)}})();var i=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var r in o)i[r]=o[r];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();