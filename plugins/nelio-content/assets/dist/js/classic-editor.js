(()=>{var e={5779:(e,t)=>{"use strict";function n(e){return e}t.Sy=function(){return n}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{initPage:()=>K});const e=window.wp.element,t=window.wp.components,o=window.wp.data,i=window.wp.url,a=window.wp.domReady;var u=n.n(a);const c=window.NelioContent.editPost,l=window.NelioContent.socialMessageEditor,s=window.NelioContent.taskEditor,d=window.wp.apiFetch;var f=n.n(d);const v=window.lodash,m=window.NelioContent.data,p=window.NelioContent.utils;var y=n(5779),g=(0,y.Sy)(),h=function(e){return!!e&&"function"==typeof e&&"ajaxPrefilter"in e},E=function(e){return!!e&&"object"==typeof e&&"data"in e},b=function(e){return!!e&&"object"==typeof e&&"action"in e};var w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)},S=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},A=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function M(e){return S(this,void 0,void 0,(function(){var t;return A(this,(function(n){switch(n.label){case 0:return[4,T(e.postId)];case 1:return t=n.sent(),[4,O(w(w({},t),{date:"none"!==t.date&&t.date,followers:e.attributes.followers,statistics:{engagement:{},pageviews:void 0}}))];case 2:return n.sent(),void 0===(i=e.settings.isClassicEditor)&&(i=!1),(0,(0,o.dispatch)(c.STORE_NAME).setEditorToClassic)(i),window.NelioContentTinyMCE={createMessage:I,getLinks:p.getLinks,isEmpty:p.isEmpty},r=e.settings.autoShareEndModes,(0,p.isEmpty)(r)||(0,(0,o.dispatch)(c.STORE_NAME).setAutoShareEndModes)(r),d=e.settings.shouldAuthorBeFollower,(0,(0,o.dispatch)(c.STORE_NAME).includeAuthorInFollowers)(d),function(e){var t=e.url,n=e.alt;t&&(0,(0,o.dispatch)(c.STORE_NAME).setExternalFeaturedImage)(t,n)}(e.attributes.externalFeatImage),function(e){var t=(0,o.dispatch)(c.STORE_NAME),n=t.receiveReferences,r=t.suggestReferences;n(e);var i=(0,v.filter)(e,{isSuggestion:!0});(0,p.isEmpty)(i)||r((0,v.map)(i,"url"))}(e.attributes.references),function(e){(0,(0,o.dispatch)(c.STORE_NAME).markQualityAnalysisAsFullyIntegrated)(!!e.isFullyIntegrated)}(s=e.settings.qualityAnalysis),function(e){if(!e.isYoastIntegrated){var t=(0,o.dispatch)(c.STORE_NAME).removeQualityCheckType;t("nelio-content/yoast-content"),t("nelio-content/yoast-seo")}}(s),function(e){var t=e.supportsFeatImage,n=e.canImageBeAutoSet;t?(0,(0,o.dispatch)(c.STORE_NAME).updateQualityCheckSettings)("nelio-content/featured-image",{canImageBeAutoSet:n}):(0,(0,o.dispatch)(c.STORE_NAME).removeQualityCheckType)("nelio-content/featured-image")}(s),(0,(0,o.select)(m.STORE_NAME).isMultiAuthor)()||(0,(0,o.dispatch)(c.STORE_NAME).removeQualityCheckType)("nelio-content/author"),function(e){var t=e.setCustomField,n=e.removeCustomField;u()((function(){var e=window.jQuery;h(e)&&e.ajaxPrefilter((function(e,r){if(E(e)&&"string"==typeof e.data&&E(r)&&b(r)){var o=new URLSearchParams(e.data);switch(r.action){case"add-meta":if(o.has("metavalue")){var i="#NONE#"===o.get("metakeyselect")?o.get("metakeyinput"):o.get("metakeyselect"),a=o.get("metavalue")||"";i&&t(g(i),a)}else{var u=Array.from(o.keys()).filter((function(e){return/meta\[\d+\]\[key\]/.test(e)})).map((function(e){return o.get(e)}))[0],c=Array.from(o.keys()).filter((function(e){return/meta\[\d+\]\[value\]/.test(e)})).map((function(e){return o.get(e)}))[0];u&&c&&t(g(u),c)}break;case"delete-meta":var l=o.get("id"),s=l?document.getElementById("meta-".concat(l,"-key")):null;(i=null==s?void 0:s.getAttribute("value"))&&n(g(i))}}}))}))}((0,o.dispatch)(c.STORE_NAME)),c.store.subscribe((function(){var e=(0,o.select)(c.STORE_NAME),t=e.getDate,n=e.getStatus,r=t(),i=n();r===a&&i===l||(a=r,l=i,(0,(0,o.dispatch)(c.STORE_NAME).updateDatesInPostRelatedItems)())})),[2]}var r,i,a,l,s,d}))}))}function N(t,n){var r=document.getElementById(t);if(r){var o=r.querySelector(".inside");o&&(0,e.render)(e.createElement(n,null),o)}}function I(e,t){if(e=(0,v.trim)(e),!(0,p.isEmpty)(e)){var n=function(e){if((0,p.isEmpty)(e))return!1;var t=(0,o.select)(m.STORE_NAME).getSocialProfilesByNetwork;if((0,p.isEmpty)(t("twitter")))return!1;for(var n=(0,o.select)(c.STORE_NAME).getReferenceByUrl,r=0,i=e;r<i.length;r++){var a=n(i[r]);if(a&&a.twitter)return a.twitter}return!1}(t);n&&(e="".concat(e," /cc ").concat(n)),e+=" {permalink}";var r=(0,o.select)(c.STORE_NAME).getPost;(0,(0,o.dispatch)(l.STORE_NAME).openNewSocialMessageEditor)({text:e},{context:"post",post:r(),disabledProfileIds:(0,c.getDisabledProfiles)()})}}function T(e){return S(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,f()({path:"/nelio-content/v1/post/".concat(e,"?aws")})];case 1:return[2,t.sent()]}}))}))}function O(e){return S(this,void 0,void 0,(function(){var t,n;return A(this,(function(r){switch(r.label){case 0:return t=(0,o.dispatch)(c.STORE_NAME),n=t.loadPostItems,(0,t.setPost)(e),[4,n()];case 1:return r.sent(),[2]}}))}))}var k=function(){return e.createElement(c.QualityAnalysis,{isMetabox:!0})};const _=window.NelioContent.date;const x=window.jQuery;var R=n.n(x);const C=window.wp.coreData;var P,B,j=null!==(P=null===C.store||void 0===C.store?void 0:C.store.name)&&void 0!==P?P:"core",F=(0,v.debounce)((function(e,t){var n=e.value;if(n){var r=(0,(0,o.select)(c.STORE_NAME).getPermalinkTemplate)();t((0,y.Sy)()(r.replace("%postname%",n)))}}),500),L=null!==(B=null===C.store||void 0===C.store?void 0:C.store.name)&&void 0!==B?B:"core",q=function(e){return Q(e)||D(e)||[]},Q=function(e){var t=document.getElementById("".concat(e,"checklist"));if(t){var n=Array.from(t.querySelectorAll('input[type="checkbox"]:checked')).map((function(e){return e.id})).map((function(t){return t.replace("in-".concat(e,"-"),"")})).map((function(e){return parseInt(e)})).filter(Boolean),r=(0,o.select)(L).getEntityRecord;return n.map((function(t){return r("taxonomy",e,t)})).filter(U).map((function(e){return{id:e.id,name:e.name,slug:e.slug}}))}},D=function(e){var t,n=document.getElementById(e);if(n)return Array.from((null===(t=n.querySelector(".tagchecklist"))||void 0===t?void 0:t.children)||[]).map((function(e){var t=(0,v.filter)(Array.from(e.childNodes),{nodeType:Node.TEXT_NODE}).map((function(e){return e.textContent}));return(0,v.startCase)((0,v.trim)(t.join("")))})).map((function(e,t){return{id:(0,y.Sy)()(t+1),name:e,slug:e.toLowerCase().replace(/\s+/g,"-")}}))},U=function(e){return!!e&&"object"==typeof e&&"id"in e&&"name"in e&&"slug"in e},G=function(e){var t=[],n=function(){var n=Array.from(document.querySelectorAll('.categorydiv input[type="checkbox"]'));(0,v.isEqual)(t,n)||(t.forEach((function(t){return t.removeEventListener("change",e)})),t=n,n.forEach((function(t){return t.addEventListener("change",e)})),e())};n();var r=(0,v.debounce)(n,2e3),o=new MutationObserver(r);document.querySelectorAll(".categorydiv").forEach((function(e){return o.observe(e,{childList:!0,subtree:!0})}))},J=function(e){var t=new MutationObserver(e);document.querySelectorAll(".tagsdiv").forEach((function(e){return t.observe(e,{childList:!0,subtree:!0})}))};function Y(){var e=(0,o.dispatch)(c.STORE_NAME);!function(e){var t,n,r,i,a=e.setFeaturedImage,u=(0,o.select)(j).getMedia,l=(0,o.select)(c.STORE_NAME).getExternalFeaturedImageUrl,s=(0,v.debounce)((function(){var e=l();if(e){if(0===t&&n===e)return;return n=e,void a(t=0,e)}var r=document.getElementById("_thumbnail_id"),o=Number.parseInt((null==r?void 0:r.value)||""),i=(0,p.seemsMediaId)(o)?o:0,c=i?u(i):void 0,s=(null==c?void 0:c.source_url)||!1;t===i&&n===s||(t=i,n=s,a(i,s))}),500);(r=document.getElementById("postimagediv"))&&(new MutationObserver(s).observe(r,{childList:!0,subtree:!0}),(0,o.subscribe)(s)),(0,o.subscribe)((function(){var e=l();e!==i&&(i=e,s())}))}(e),function(e){var t=e.setTitle,n=document.getElementById("title");n&&n.addEventListener("change",(0,v.debounce)((function(){var e=n.value||"";t(e)}),500))}(e),function(e){var t=e.setDate,n=document.querySelector("a.save-timestamp");if(n){var r={year:document.getElementById("aa"),month:document.getElementById("mm"),day:document.getElementById("jj"),hour:document.getElementById("hh"),minute:document.getElementById("mn")},o=(0,v.values)(r).filter((function(e){return!e}));(0,p.isEmpty)(o)&&n.addEventListener("click",(function(){return function(e,t){var n,r,o,i,a,u,c=null!==(r=null===(n=e.year)||void 0===n?void 0:n.value)&&void 0!==r?r:"",l=(0,v.padStart)(null===(o=e.month)||void 0===o?void 0:o.value,2,"0"),s=(0,v.padStart)(null===(i=e.day)||void 0===i?void 0:i.value,2,"0"),d=(0,v.padStart)(null===(a=e.hour)||void 0===a?void 0:a.value,2,"0"),f=(0,v.padStart)(null===(u=e.minute)||void 0===u?void 0:u.value,2,"0"),m="".concat(c,"-").concat(l,"-").concat(s),p="".concat(d,":").concat(f);t((0,_.wpifyDateTime)("c",m,p))}(r,t)}))}}(e),function(e){var t=e.setContent;R()(document).on("tinymce-editor-init",(function(e,n){n&&"content"===n.id&&function(e,t){e.on("nodechange keyup",(0,v.debounce)((function(){return t(e.getContent())}),2500))}(n,t)}))}(e),function(e){var t=e.setExcerpt,n=document.getElementById("excerpt");n&&n.addEventListener("change",(0,v.debounce)((function(){var e=n.value;e&&t(e)}),500))}(e),function(e){var t=e.setPermalink,n=document.getElementById("post_name");if(n){n.addEventListener("change",(function(){return F(n,t)}));var r=document.getElementById("edit-slug-box");r&&r.addEventListener("click",(function(e){var r=e.target;(null==r?void 0:r.closest("#edit-slug-buttons .save"))&&F(n,t)}))}}(e),function(e){var t=e.setAuthor,n=document.getElementById("post_author_override");n&&n.addEventListener("change",(function(){var e,r,o=Number.parseInt(n.value);if((0,p.seemsAuthorId)(o)){var i=null!==(r=null===(e=(n.options||[])[n.selectedIndex])||void 0===e?void 0:e.text)&&void 0!==r?r:"";t(o,i)}}))}(e),function(e){var t=e.setTerms,n=(0,o.select)(c.STORE_NAME).getPostType,r=(0,o.select)(L).getTaxonomies,i="",a=(0,v.debounce)((function(){var e=(0,v.filter)(r({per_page:-1}),(function(e){var t;return e.visibility.public&&e.types.includes(null!==(t=n())&&void 0!==t?t:"")})).map((function(e){return e.slug})),o=e.map(q),a=JSON.stringify(o);a!==i&&(i=a,e.forEach((function(e,n){var r;return t(e,null!==(r=o[n])&&void 0!==r?r:[])})))}),500);(0,o.subscribe)(a),G(a),J(a)}(e)}var H=function(){return H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},H.apply(this,arguments)},X=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},z=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function K(n){return X(this,void 0,void 0,(function(){return z(this,(function(r){switch(r.label){case 0:return function(e){var t=document.getElementById("post");if(t){var n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name","nelio-content-edit-post-nonce"),n.setAttribute("value",e),t.appendChild(n);var r,i,a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name","nelio-content-classic-values"),t.appendChild(a),r=function(e){a.setAttribute("value",JSON.stringify(e))},i={},c.store.subscribe((function(){var e=(0,o.select)(c.STORE_NAME),t=e.getPost,n=e.getSuggestedReferences,a=e.getExternalFeaturedImageUrl,u=e.getExternalFeaturedImageAlt,l=e.getAutomationSources,s=e.getAutoShareEndMode,d=e.isAutoShareEnabled,f=t(),m=(0,c.processHtml)(f.content).highlights,p={isAutoShareEnabled:d(),autoShareEndMode:s(),followers:f.followers,suggestedReferences:n(),efiUrl:a()||"",efiAlt:u(),automationSources:l(),highlights:m};(0,v.isEqual)(p,i)||r(p),i=p}))}}((n=H(H({},n),{settings:H(H({},n.settings),{isClassicEditor:!0})})).settings.nonce),[4,M(n)];case 1:return r.sent(),a="nc-auto-messages",d=document.location.href,(0,i.hasQueryArg)(d,a)&&(history.replaceState(null,"",(0,i.removeQueryArgs)(d,a)),(0,(0,o.dispatch)(c.STORE_NAME).generateTimeline)()),N("nelio-content-quality-analysis",k),N("nelio-content-editorial-comments",c.EditorialComments),N("nelio-content-editorial-tasks",c.EditorialTasks),N("nelio-content-featured-image",c.ExternalFeaturedImage),N("nelio-content-notifications",c.Notifications),N("nelio-content-links",c.References),N("nelio-content-social-media",c.SocialMediaMetabox),function(e){if(e.isFullyIntegrated&&e.isYoastIntegrated){var t=function(e){e&&(e.style.display="none")};u()((function(){t(document.getElementById("content-score")),t(document.getElementById("keyword-score"))}))}}(n.settings.qualityAnalysis),(f=document.createElement("div")).classList.add("nelio-content-editor-dialogs-wrapper"),document.body.appendChild(f),(0,e.render)(e.createElement(e.StrictMode,null,e.createElement(t.SlotFillProvider,null,e.createElement(c.ReferenceEditor,null),e.createElement(l.SocialMessageEditor,null),e.createElement(s.TaskEditor,null),e.createElement(t.Popover.Slot,null))),f),Y(),[2]}var a,d,f}))}))}})();var o=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var i in r)o[i]=r[i];r.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();