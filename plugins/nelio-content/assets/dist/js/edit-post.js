(()=>{var e={4184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var a=o.apply(null,n);a&&e.push(a)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},5779:(e,t)=>{"use strict";function n(e){return e}t.Sy=function(){return n}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{editPost:()=>a});var e={};n.r(e),n.d(e,{getAuthorId:()=>q,getAutoShareEndMode:()=>te,getAutoShareEndModeDuration:()=>be,getAutoShareEndModes:()=>Te,getAutomationSources:()=>ne,getContent:()=>V,getDate:()=>K,getEditingReference:()=>Ee,getEditorialCommentInputValue:()=>N,getExcerpt:()=>j,getExternalFeaturedImageAlt:()=>P,getExternalFeaturedImageAltField:()=>L,getExternalFeaturedImageUrl:()=>M,getExternalFeaturedImageUrlField:()=>D,getExternalFeaturedImageView:()=>C,getFeaturedImageId:()=>W,getFeaturedImageSrc:()=>z,getFollowers:()=>$,getImages:()=>J,getOverallPostQualityStatus:()=>ae,getPanelStatuses:()=>_e,getPermalink:()=>Y,getPermalinkTemplate:()=>H,getPost:()=>U,getPostId:()=>B,getPostQualitySettings:()=>oe,getPostType:()=>G,getQualityCheckRationale:()=>le,getQualityCheckStatus:()=>se,getQualityCheckType:()=>ue,getQualityCheckTypes:()=>ce,getReferenceByUrl:()=>de,getStatus:()=>X,getSuggestedReferenceUrl:()=>he,getSuggestedReferences:()=>me,getTaskPresetLoaderState:()=>Me,getTaskPresetSelection:()=>Ce,getTerms:()=>Z,getTitle:()=>Q,isAutoShareEnabled:()=>ee,isClassicEditor:()=>ve,isClearingTimeline:()=>ke,isDeletingEditorialComment:()=>I,isEditorialTaskBeingDeleted:()=>Ie,isEditorialTaskBeingSynched:()=>we,isGeneratingTimeline:()=>xe,isPanelOpen:()=>ye,isPostReady:()=>F,isQualityAnalysisFullyIntegrated:()=>ie,isReferenceEditorVisible:()=>ge,isReferenceLoading:()=>fe,isReferenceSaving:()=>pe,isRetrievingEditorialComments:()=>O,isRetrievingEditorialTasks:()=>Oe,isRetrievingSocialMessages:()=>Ne,isSocialMessageBeingDeleted:()=>Re,isSynchingEditorialComment:()=>w,isTimelineBusy:()=>Ae,shouldAuthorBeFollower:()=>Se});var t={};n.r(t),n.d(t,{addQualityCheckType:()=>dt,cancelEditionOfExternalFeaturedImage:()=>Ue,closeReferenceEditor:()=>yt,discardReference:()=>vt,doOpenReferenceEditor:()=>bt,editExternalFeaturedImage:()=>Fe,enableAutoShare:()=>ot,includeAuthorInFollowers:()=>Rt,markAsLoadingPostItems:()=>st,markEditorialCommentAsDeleting:()=>Le,markEditorialCommentAsSynching:()=>De,markEditorialTaskAsDeleting:()=>Mt,markEditorialTaskAsSynching:()=>Ct,markQualityAnalysisAsFullyIntegrated:()=>lt,markReferenceAsLoading:()=>St,markReferenceAsSaving:()=>Tt,markSocialMessageAsDeleting:()=>It,markTimelineAsClearing:()=>Ot,markTimelineAsGenerating:()=>wt,openTaskPresetLoader:()=>Pt,receiveReferences:()=>pt,removeCustomField:()=>Ke,removeExternalFeaturedImage:()=>Ge,removeFeaturedImage:()=>tt,removeQualityCheckType:()=>mt,selectTaskPresets:()=>Dt,setAuthor:()=>Xe,setAutoShareEndMode:()=>it,setAutoShareEndModes:()=>Nt,setAutomationSources:()=>at,setContent:()=>We,setCustomField:()=>Ve,setDate:()=>ze,setEditorToClassic:()=>kt,setEditorialCommentInputValue:()=>Pe,setExcerpt:()=>$e,setExternalFeaturedImage:()=>Be,setExternalFeaturedImageAltField:()=>je,setExternalFeaturedImageUrlField:()=>Qe,setFeaturedImage:()=>et,setFollowers:()=>Ze,setPanelSettings:()=>At,setPermalink:()=>Je,setPost:()=>qe,setPostId:()=>Ye,setPostQualitySettings:()=>ct,setStatus:()=>nt,setSuggestedReferenceUrl:()=>gt,setTaskPresetsState:()=>Lt,setTerms:()=>rt,setTitle:()=>He,suggestReference:()=>Et,suggestReferences:()=>ht,togglePanel:()=>xt,updateEditingReference:()=>_t,updateQualityCheckItem:()=>ut,updateQualityCheckSettings:()=>ft});var o={};n.r(o),n.d(o,{clearTimeline:()=>Tn,createEditorialComment:()=>jt,deleteEditorialComment:()=>Vt,deleteEditorialTask:()=>On,deleteSocialMessage:()=>bn,generateTimeline:()=>Sn,instantiatePresets:()=>wn,loadPostItems:()=>Ht,markTaskAsCompleted:()=>In,openReferenceEditor:()=>Xt,saveAndCloseEditingReference:()=>Jt,savePostAndGenerateTimeline:()=>yn,saveReference:()=>Zt,updateDatesInPostRelatedItems:()=>$t});var i={};n.r(i),n.d(i,{getReferenceByUrl:()=>Un});var a={};n.r(a),n.d(a,{EditorialComments:()=>ur,EditorialTasks:()=>Ir,ExternalFeaturedImage:()=>Lr,Notifications:()=>Br,QualityAnalysis:()=>go,QualityAnalysisSummary:()=>fo,ReferenceEditor:()=>Vr,References:()=>so,STORE_NAME:()=>d,SocialMediaMetabox:()=>ui,SocialMediaSidebar:()=>hi,SocialMediaSummary:()=>di,SocialMediaTools:()=>vi,deregisterQualityCheck:()=>Ti,getDisabledProfiles:()=>an,processHtml:()=>sn,registerQualityCheck:()=>Si,store:()=>jn,updatePostQualitySettings:()=>yi,updateQualityCheckSettings:()=>bi,useDisabledProfiles:()=>Ii,usePanelToggling:()=>Ni});const s=window.wp.data,l=window.NelioContent.utils,c=window.lodash;var u=n(5779),d="nelio-content/edit-post",m={comments:{synching:[],deleting:[],input:"",isRetrievingComments:!1},externalFeaturedImage:{view:"no-image",fields:{url:"",alt:""},imageUrl:void 0,imageAlt:""},post:{id:(0,u.Sy)()(0),author:(0,u.Sy)()(0),authorName:"",content:"",customFields:{},customPlaceholders:{},date:"",editLink:(0,u.Sy)()(""),excerpt:"",excludedFromReshare:!1,followers:[],imageId:0,imageSrc:!1,images:[],permalink:(0,u.Sy)()(""),permalinkTemplate:"",statistics:{engagement:{},pageviews:void 0},status:l.AUTO_DRAFT,taxonomies:{},thumbnailSrc:!1,title:"",type:l.POST,typeName:"",viewLink:(0,u.Sy)()(""),autoShareEndMode:"never",automationSources:{useCustomSentences:!1,customSentences:[]}},postQuality:{checks:{},isFullyIntegrated:!1,settings:{allowedBads:1,allowedImprovables:2,unacceptableImprovables:4}},qualityCheckTypes:{},references:{byUrl:{},byType:{suggested:[]},status:{loading:[],saving:[]},editor:{isActive:!1},suggestedUrl:""},settings:{isClassicEditor:!1,panels:{},shouldAuthorBeFollower:!1,autoShareEndModes:[]},social:{deleting:[],timelineStatus:"ready",isRetrievingSocialMessages:!1},tasks:{preset:void 0,synching:[],deleting:[],isRetrievingTasks:!1}},f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)},p=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g.apply(this,arguments)},E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},E.apply(this,arguments)};function h(e){void 0===e&&(e="");var t=e.match(/img[^>]*src="[^"]+"|img[^>]*src='[^']+'/gi)||[];return(0,c.uniq)(t.map((function(e){return e.replace(/.*src=.(.*)./,"$1")})).filter(l.isUrl))}var v=function(){return v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)},_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)},y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},y.apply(this,arguments)},S=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},T.apply(this,arguments)},b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},b.apply(this,arguments)},A=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},x=function(){return x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},x.apply(this,arguments)},k=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const R=(0,s.combineReducers)({comments:function(e,t){var n;return void 0===e&&(e=m.comments),null!==(n=function(e,t){switch(t.type){case"SET_EDITORIAL_COMMENT_INPUT_VALUE":return f(f({},e),{input:t.value});case"MARK_EDITORIAL_COMMENT_AS_SYNCHING":return f(f({},e),{synching:t.isSynching?p(p([],e.synching,!0),[t.commentId],!1):(0,c.without)(e.synching,t.commentId)});case"MARK_EDITORIAL_COMMENT_AS_DELETING":return f(f({},e),{deleting:t.isDeleting?p(p([],e.deleting,!0),[t.commentId],!1):(0,c.without)(e.deleting,t.commentId)});case"MARK_AS_LOADING_POST_ITEMS":return f(f({},e),{isRetrievingComments:t.isLoading})}}(e,t))&&void 0!==n?n:e},externalFeaturedImage:function(e,t){var n;return void 0===e&&(e=m.externalFeaturedImage),null!==(n=function(e,t){var n;switch(t.type){case"SET_EXTERNAL_FEATURED_IMAGE":return{view:"image",fields:{url:t.url,alt:t.altText},imageUrl:t.url,imageAlt:t.altText};case"REMOVE_EXTERNAL_FEATURED_IMAGE":return{view:"no-image",fields:{url:"",alt:""},imageUrl:void 0,imageAlt:""};case"SET_EXTERNAL_FEATURED_IMAGE_URL_FIELD":return g(g({},e),{fields:g(g({},e.fields),{url:t.url})});case"SET_EXTERNAL_FEATURED_IMAGE_ALT_FIELD":return g(g({},e),{fields:g(g({},e.fields),{alt:t.altText})});case"EDIT_EXTERNAL_FEATURED_IMAGE":return g(g({},e),{view:"edit-image"});case"CANCEL_EDITION_OF_EXTERNAL_FEATURED_IMAGE":return g(g({},e),{view:e.imageUrl?"image":"no-image",fields:{url:null!==(n=e.imageUrl)&&void 0!==n?n:"",alt:e.imageAlt}})}}(e,t))&&void 0!==n?n:e},post:function(e,t){var n;return void 0===e&&(e=m.post),null!==(n=function(e,t){var n,r,o,i;switch(t.type){case"SET_POST_ID":return e.id?e:E(E({},e),{id:e.id});case"SET_POST":var a=t.post,s=a.imageSrc,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(a,["imageSrc"]);return E(E(E({},m.post),l),{imageSrc:s||!1,images:h(null==l?void 0:l.content),automationSources:E(E({},m.post.automationSources),null==l?void 0:l.automationSources)});case"SET_CUSTOM_FIELD":return E(E({},e),{customFields:(0,c.has)(e.customFields,t.key)?E(E({},e.customFields),(n={},n[t.key]=E(E({},e.customFields[t.key]),{value:t.value}),n)):e.customFields});case"REMOVE_CUSTOM_FIELD":return E(E({},e),{customFields:(0,c.has)(e.customFields,t.key)?E(E({},e.customFields),(r={},r[t.key]=E(E({},e.customFields[t.key]),{value:""}),r)):e.customFields});case"SET_TITLE":return E(E({},e),{title:t.title});case"SET_EXCERPT":return E(E({},e),{excerpt:t.excerpt});case"SET_CONTENT":return E(E({},e),{content:t.content,images:h(t.content)});case"SET_DATE":return E(E({},e),{date:null!==(i=t.date)&&void 0!==i&&i});case"SET_AUTHOR":return E(E({},e),{author:t.authorId,authorName:t.authorName});case"SET_PERMALINK":return E(E({},e),{permalink:t.permalink});case"SET_FEATURED_IMAGE":return E(E({},e),{imageId:t.imageId,imageSrc:t.imageSrc,thumbnailSrc:t.thumbnailSrc});case"REMOVE_FEATURED_IMAGE":return E(E({},e),{imageId:0,imageSrc:!1,thumbnailSrc:!1});case"SET_FOLLOWERS":return E(E({},e),{followers:t.followers});case"SET_STATUS":return E(E({},e),{status:t.status});case"SET_TERMS":return E(E({},e),{taxonomies:E(E({},e.taxonomies),(o={},o[t.taxonomy]=t.terms,o))});case"ENABLE_AUTO_SHARE":return E(E({},e),{excludedFromReshare:!t.isAutoShareEnabled});case"SET_AUTO_SHARE_END_MODE":return E(E({},e),{autoShareEndMode:t.autoShareEndMode});case"SET_AUTOMATION_SOURCES":return E(E({},e),{automationSources:E(E({},e.automationSources),t.sources)});case"MARK_AS_LOADING_POST_ITEMS":return e}}(e,t))&&void 0!==n?n:e},postQuality:function(e,t){var n;return void 0===e&&(e=m.postQuality),null!==(n=function(e,t){var n;switch(t.type){case"ADD_QUALITY_CHECK_TYPE":case"UPDATE_QUALITY_CHECK_SETTINGS":return e;case"REMOVE_QUALITY_CHECK_TYPE":return v(v({},e),{checks:(0,c.omit)(e.checks,t.name)});case"MARK_QUALITY_ANALYSIS_AS_FULLY_INTEGRATED":return v(v({},e),{isFullyIntegrated:t.isFullyIntegrated});case"UPDATE_QUALITY_CHECK_ITEM":return v(v({},e),{checks:v(v({},e.checks),(n={},n[t.name]={status:t.status,text:t.text},n))});case"SET_POST_QUALITY_SETTINGS":var r=v({allowedBads:e.settings.allowedBads,allowedImprovables:e.settings.allowedImprovables,unacceptableImprovables:e.settings.unacceptableImprovables},t.settings);return v(v({},e),{settings:{allowedBads:r.allowedBads,allowedImprovables:r.allowedImprovables,unacceptableImprovables:r.unacceptableImprovables}})}}(e,t))&&void 0!==n?n:e},qualityCheckTypes:function(e,t){var n;return void 0===e&&(e=m.qualityCheckTypes),null!==(n=function(e,t){var n,r;switch(t.type){case"ADD_QUALITY_CHECK_TYPE":return _(_({},e),((n={})[t.definition.name]=t.definition,n));case"REMOVE_QUALITY_CHECK_TYPE":return e[t.name]?(0,c.omit)(e,t.name):e;case"UPDATE_QUALITY_CHECK_SETTINGS":var o=e[t.name];return o?_(_({},e),((r={})[t.name]=_(_({},o),{settings:_(_({},o.settings),t.settings)}),r)):e}}(e,t))&&void 0!==n?n:e},references:function(e,t){var n;return void 0===e&&(e=m.references),null!==(n=function(e,t){switch(t.type){case"RECEIVE_REFERENCES":return y(y({},e),{byUrl:t.references.reduce((function(e,t){var n;return y(y({},e),((n={})[t.url]=y(y({},e[t.url]),t),n))}),e.byUrl)});case"SET_SUGGESTED_REFERENCE_URL":return y(y({},e),{suggestedUrl:t.url});case"SUGGEST_REFERENCE":var n=e.byType.suggested;return y(y({},e),{byType:y(y({},e.byType),{suggested:n.includes(t.url)?n:S(S([],n,!0),[t.url],!1)})});case"SUGGEST_REFERENCES":return y(y({},e),{byType:y(y({},e.byType),{suggested:(0,c.uniq)(S(S([],e.byType.suggested,!0),t.urls,!0))})});case"DISCARD_REFERENCE":return y(y({},e),{byType:y(y({},e.byType),{suggested:(0,c.without)(e.byType.suggested,t.url)})});case"OPEN_REFERENCE_EDITOR":return y(y({},e),{editor:{isActive:!0,reference:t.reference}});case"UPDATE_EDITING_REFERENCE":return e.editor.isActive?y(y({},e),{editor:y(y({},e.editor),{reference:y(y({},e.editor.reference),t.attributes)})}):e;case"CLOSE_REFERENCE_EDITOR":return y(y({},e),{editor:{isActive:!1}});case"MARK_REFERENCE_AS_LOADING":return y(y({},e),{status:y(y({},e.status),{loading:t.isLoading?S(S([],e.status.loading,!0),[t.referenceUrl],!1):(0,c.without)(e.status.loading,t.referenceUrl)})});case"MARK_REFERENCE_AS_SAVING":return y(y({},e),{status:y(y({},e.status),{saving:t.isSaving?S(S([],e.status.saving,!0),[t.referenceUrl],!1):(0,c.without)(e.status.saving,t.referenceUrl)})})}}(e,t))&&void 0!==n?n:e},settings:function(e,t){var n;return void 0===e&&(e=m.settings),null!==(n=function(e,t){var n;switch(t.type){case"SET_EDITOR_TO_CLASSIC":return T(T({},e),{isClassicEditor:t.isClassicEditor});case"PANEL_SETTINGS":return T(T({},e),{panels:t.settings});case"TOGGLE_PANEL":return e.panels[t.panelName]===t.isOpen?e:T(T({},e),{panels:T(T({},e.panels),(n={},n[t.panelName]=t.isOpen,n))});case"INCLUDE_AUTHOR_IN_FOLLOWERS":return T(T({},e),{shouldAuthorBeFollower:t.shouldAuthorBeFollower});case"SET_AUTO_SHARE_END_MODES":return T(T({},e),{autoShareEndModes:t.autoShareEndModes})}}(e,t))&&void 0!==n?n:e},social:function(e,t){var n;return void 0===e&&(e=m.social),null!==(n=function(e,t){switch(t.type){case"MARK_SOCIAL_MESSAGE_AS_DELETING":return b(b({},e),{deleting:t.isDeleting?A(A([],e.deleting,!0),[t.messageId],!1):(0,c.without)(e.deleting,t.messageId)});case"MARK_TIMELINE_AS_GENERATING":return b(b({},e),{timelineStatus:t.isGenerating?"generating":"ready"});case"MARK_TIMELINE_AS_CLEARING":return b(b({},e),{timelineStatus:t.isClearing?"clearing":"ready"});case"MARK_AS_LOADING_POST_ITEMS":return b(b({},e),{isRetrievingSocialMessages:t.isLoading})}}(e,t))&&void 0!==n?n:e},tasks:function(e,t){var n;return void 0===e&&(e=m.tasks),null!==(n=function(e,t){switch(t.type){case"MARK_EDITORIAL_TASK_AS_SYNCHING":return x(x({},e),{synching:t.isSynching?k(k([],e.synching,!0),[t.taskId],!1):(0,c.without)(e.synching,t.taskId)});case"MARK_EDITORIAL_TASK_AS_DELETING":return x(x({},e),{deleting:t.isDeleting?k(k([],e.deleting,!0),[t.taskId],!1):(0,c.without)(e.deleting,t.taskId)});case"MARK_AS_LOADING_POST_ITEMS":return x(x({},e),{isRetrievingTasks:t.isLoading});case"OPEN_TASK_PRESET_LOADER":return x(x({},e),{preset:t.isOpen?{selection:[],state:"selection"}:void 0});case"SELECT_TASK_PRESETS":return x(x({},e),{preset:e.preset?x(x({},e.preset),{selection:t.selection}):void 0});case"SET_TASK_PRESETS_STATE":return x(x({},e),{preset:e.preset?x(x({},e.preset),{state:t.state}):void 0})}}(e,t))&&void 0!==n?n:e}});function N(e){return e.comments.input}function I(e,t){return e.comments.deleting.includes(t)}function w(e,t){return e.comments.synching.includes(t)}function O(e){return e.comments.isRetrievingComments}function C(e){return e.externalFeaturedImage.view}function M(e){return e.externalFeaturedImage.imageUrl}function P(e){return e.externalFeaturedImage.imageAlt}function D(e){return e.externalFeaturedImage.fields.url}function L(e){return e.externalFeaturedImage.fields.alt}function F(e){return"auto-draft"!==e.post.status&&!!e.post.id}function U(e){return e.post}function B(e){return e.post.id||void 0}function G(e){return e.post.type||void 0}function Q(e){return e.post.title||""}function j(e){return e.post.excerpt||""}function V(e){return e.post.content||""}function K(e){return e.post.date||void 0}function q(e){return e.post.author||void 0}function Y(e){return e.post.permalink||void 0}function H(e){return e.post.permalinkTemplate}function $(e){return e.post.followers||[]}function W(e){return e.post.imageId||void 0}function z(e){return e.post.imageSrc||void 0}function X(e){return e.post.status}function J(e){return e.post.images||[]}function Z(e,t){var n;return null!==(n=e.post.taxonomies[t])&&void 0!==n?n:[]}function ee(e){return!e.post.excludedFromReshare}function te(e){return e.post.autoShareEndMode}function ne(e){return e.post.automationSources}const re=window.wp.i18n;function oe(e){return e.postQuality.settings}function ie(e){return!!e.postQuality.isFullyIntegrated}function ae(e){var t=e.postQuality.checks,n=(0,c.size)((0,c.filter)(t,{status:"good"})),r=(0,c.size)((0,c.filter)(t,{status:"improvable"})),o=(0,c.size)((0,c.filter)(t,{status:"bad"}));if(!n&&!r&&!o)return"unknown";if(e.postQuality.settings.allowedBads<o)return"bad";var i=o+r;if(e.postQuality.settings.unacceptableImprovables<i)return"bad";var a=e.postQuality.settings.allowedImprovables;return o||a<i?"improvable":i?"good":"perfect"}function se(e,t){var n=e.postQuality.checks[t];return(null==n?void 0:n.status)||"unknown"}function le(e,t){var n=e.postQuality.checks[t];return(null==n?void 0:n.text)||(0,re._x)("Unknown status","text","nelio-content")}function ce(e){return(0,c.values)(e.qualityCheckTypes)}function ue(e,t){return e.qualityCheckTypes[t]}function de(e,t){return e.references.byUrl[t]}function me(e){return e.references.byType.suggested}function fe(e,t){return!e.references.byUrl[t]||e.references.status.loading.includes(t)}function pe(e,t){return e.references.status.saving.includes(t)}function ge(e){return e.references.editor.isActive}function Ee(e){var t=e.references.editor;return t.isActive?t.reference:void 0}function he(e){return e.references.suggestedUrl}function ve(e){return e.settings.isClassicEditor}function _e(e){return e.settings.panels}function ye(e,t){var n=e.settings.panels[t];return void 0===n||n}function Se(e){return e.settings.shouldAuthorBeFollower}function Te(e){return e.settings.autoShareEndModes}function be(e,t){var n=(0,c.find)(e.settings.autoShareEndModes,{value:t});return(null==n?void 0:n.months)||0}function Ae(e){return"ready"!==e.social.timelineStatus}function xe(e){return"generating"===e.social.timelineStatus}function ke(e){return"clearing"===e.social.timelineStatus}function Re(e,t){return e.social.deleting.includes(t)}function Ne(e){return!!e.social.isRetrievingSocialMessages}function Ie(e,t){return e.tasks.deleting.includes(t)}function we(e,t){return e.tasks.synching.includes(t)}function Oe(e){return!!e.tasks.isRetrievingTasks}function Ce(e){var t,n;return null!==(n=null===(t=e.tasks.preset)||void 0===t?void 0:t.selection)&&void 0!==n?n:[]}function Me(e){var t;return null===(t=e.tasks.preset)||void 0===t?void 0:t.state}function Pe(e){return{type:"SET_EDITORIAL_COMMENT_INPUT_VALUE",value:e}}function De(e,t){return{type:"MARK_EDITORIAL_COMMENT_AS_SYNCHING",commentId:e,isSynching:t}}function Le(e,t){return{type:"MARK_EDITORIAL_COMMENT_AS_DELETING",commentId:e,isDeleting:t}}function Fe(){return{type:"EDIT_EXTERNAL_FEATURED_IMAGE"}}function Ue(){return{type:"CANCEL_EDITION_OF_EXTERNAL_FEATURED_IMAGE"}}function Be(e,t){return{type:"SET_EXTERNAL_FEATURED_IMAGE",url:e,altText:t}}function Ge(){return{type:"REMOVE_EXTERNAL_FEATURED_IMAGE"}}function Qe(e){return{type:"SET_EXTERNAL_FEATURED_IMAGE_URL_FIELD",url:e}}function je(e){return{type:"SET_EXTERNAL_FEATURED_IMAGE_ALT_FIELD",altText:e}}function Ve(e,t){return{type:"SET_CUSTOM_FIELD",key:e,value:t}}function Ke(e){return{type:"REMOVE_CUSTOM_FIELD",key:e}}function qe(e){return{type:"SET_POST",post:e}}function Ye(e){return{type:"SET_POST_ID",id:e}}function He(e){return{type:"SET_TITLE",title:e}}function $e(e){return{type:"SET_EXCERPT",excerpt:e}}function We(e){return{type:"SET_CONTENT",content:e}}function ze(e){return{type:"SET_DATE",date:e}}function Xe(e,t){return{type:"SET_AUTHOR",authorId:e,authorName:t}}function Je(e){return{type:"SET_PERMALINK",permalink:e}}function Ze(e){return{type:"SET_FOLLOWERS",followers:e}}function et(e,t){return{type:"SET_FEATURED_IMAGE",imageId:e,imageSrc:t||!1,thumbnailSrc:t||!1}}function tt(){return{type:"REMOVE_FEATURED_IMAGE"}}function nt(e){return{type:"SET_STATUS",status:e}}function rt(e,t){return{type:"SET_TERMS",taxonomy:e,terms:t}}function ot(e){return{type:"ENABLE_AUTO_SHARE",isAutoShareEnabled:e}}function it(e){return{type:"SET_AUTO_SHARE_END_MODE",autoShareEndMode:e}}function at(e){return{type:"SET_AUTOMATION_SOURCES",sources:e}}function st(e){return{type:"MARK_AS_LOADING_POST_ITEMS",isLoading:e}}function lt(e){return{type:"MARK_QUALITY_ANALYSIS_AS_FULLY_INTEGRATED",isFullyIntegrated:e}}function ct(e){return{type:"SET_POST_QUALITY_SETTINGS",settings:e}}function ut(e,t,n){return{type:"UPDATE_QUALITY_CHECK_ITEM",name:e,status:t,text:n}}function dt(e){return{type:"ADD_QUALITY_CHECK_TYPE",definition:e}}function mt(e){return{type:"REMOVE_QUALITY_CHECK_TYPE",name:e}}function ft(e,t){return{type:"UPDATE_QUALITY_CHECK_SETTINGS",name:e,settings:t}}function pt(e){return{type:"RECEIVE_REFERENCES",references:(0,c.castArray)(e)}}function gt(e){return{type:"SET_SUGGESTED_REFERENCE_URL",url:e}}function Et(e){return{type:"SUGGEST_REFERENCE",url:e}}function ht(e){return{type:"SUGGEST_REFERENCES",urls:(0,c.castArray)(e)}}function vt(e){return{type:"DISCARD_REFERENCE",url:e}}function _t(e){return{type:"UPDATE_EDITING_REFERENCE",attributes:e}}function yt(){return{type:"CLOSE_REFERENCE_EDITOR"}}function St(e,t){return{type:"MARK_REFERENCE_AS_LOADING",referenceUrl:e,isLoading:t}}function Tt(e,t){return{type:"MARK_REFERENCE_AS_SAVING",referenceUrl:e,isSaving:t}}function bt(e){return{type:"OPEN_REFERENCE_EDITOR",reference:e}}function At(e){return{type:"PANEL_SETTINGS",settings:e}}function xt(e,t){return{type:"TOGGLE_PANEL",panelName:e,isOpen:t}}function kt(e){return{type:"SET_EDITOR_TO_CLASSIC",isClassicEditor:e}}function Rt(e){return{type:"INCLUDE_AUTHOR_IN_FOLLOWERS",shouldAuthorBeFollower:e}}function Nt(e){return{type:"SET_AUTO_SHARE_END_MODES",autoShareEndModes:e}}function It(e,t){return{type:"MARK_SOCIAL_MESSAGE_AS_DELETING",messageId:e,isDeleting:t}}function wt(e){return{type:"MARK_TIMELINE_AS_GENERATING",isGenerating:e}}function Ot(e){return{type:"MARK_TIMELINE_AS_CLEARING",isClearing:e}}function Ct(e,t){return{type:"MARK_EDITORIAL_TASK_AS_SYNCHING",taskId:e,isSynching:t}}function Mt(e,t){return{type:"MARK_EDITORIAL_TASK_AS_DELETING",taskId:e,isDeleting:t}}function Pt(e){return{type:"OPEN_TASK_PRESET_LOADER",isOpen:e}}function Dt(e){return{type:"SELECT_TASK_PRESETS",selection:e}}function Lt(e){return{type:"SET_TASK_PRESETS_STATE",state:e}}const Ft=window.wp.apiFetch;var Ut=n.n(Ft);const Bt=window.NelioContent.data;var Gt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Qt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function jt(e){return Gt(this,void 0,void 0,(function(){var t,n,r,o;return Qt(this,(function(i){switch(i.label){case 0:(0,s.dispatch)(Bt.STORE_NAME).receiveComments(e),(0,s.dispatch)(d).markEditorialCommentAsSynching(e.id,!0),i.label=1;case 1:return i.trys.push([1,7,,8]),t=(0,s.select)(Bt.STORE_NAME).getApiRoot(),n=(0,s.select)(Bt.STORE_NAME).getSiteId(),r=(0,s.select)(Bt.STORE_NAME).getAuthenticationToken(),[4,Ut()({url:"".concat(t,"/site/").concat(n,"/comment"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)},data:e})];case 2:o=i.sent(),(0,s.dispatch)(Bt.STORE_NAME).receiveComments(o),i.label=3;case 3:return i.trys.push([3,5,,6]),[4,Ut()({path:"/nelio-content/v1/notifications/comment",method:"POST",data:o})];case 4:case 5:return i.sent(),[3,6];case 6:return[3,8];case 7:return i.sent(),(0,s.dispatch)(Bt.STORE_NAME).deleteComment(e.id),[3,8];case 8:return(0,s.dispatch)(d).markEditorialCommentAsSynching(e.id,!1),[2]}}))}))}function Vt(e){return Gt(this,void 0,void 0,(function(){var t,n,r;return Qt(this,(function(o){switch(o.label){case 0:if(!(0,s.select)(Bt.STORE_NAME).getComment(e))return[2];(0,s.dispatch)(d).markEditorialCommentAsDeleting(e,!0),o.label=1;case 1:return o.trys.push([1,3,,4]),t=(0,s.select)(Bt.STORE_NAME).getSiteId(),n=(0,s.select)(Bt.STORE_NAME).getApiRoot(),r=(0,s.select)(Bt.STORE_NAME).getAuthenticationToken(),[4,Ut()({url:"".concat(n,"/site/").concat(t,"/comment/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 2:return o.sent(),(0,s.dispatch)(Bt.STORE_NAME).deleteComment(e),[3,4];case 3:return o.sent(),[3,4];case 4:return(0,s.dispatch)(d).markEditorialCommentAsDeleting(e,!1),[2]}}))}))}var Kt=function(){return Kt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kt.apply(this,arguments)},qt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Yt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function Ht(){return qt(this,void 0,void 0,(function(){var e;return Yt(this,(function(t){switch(t.label){case 0:return(0,s.select)(d).isPostReady()&&(e=(0,s.select)(d).getPostId())?((0,s.dispatch)(d).markAsLoadingPostItems(!0),[4,(0,s.dispatch)(Bt.STORE_NAME).loadPostRelatedItems(e)]):[2];case 1:return t.sent(),[4,(0,s.dispatch)(d).updateDatesInPostRelatedItems()];case 2:return t.sent(),(0,s.dispatch)(d).markAsLoadingPostItems(!1),[2]}}))}))}function $t(){return qt(this,void 0,void 0,(function(){var e,t,n,r,o,i,a,u;return Yt(this,(function(m){switch(m.label){case 0:return e=(0,s.select)(d).getPost(),t=e.status,n=e.date,r=e.id,"publish"!==t&&n?[4,(0,s.resolveSelect)(Bt.STORE_NAME).getSocialMessagesRelatedToPost(r)]:[2];case 1:return o=m.sent(),i=(0,c.map)(o,(function(e){return Kt(Kt({},e),{schedule:(0,l.getSocialMessageSchedule)({baseDatetime:n,dateValue:e.dateValue,timeType:e.timeType,timeValue:e.timeValue})})})),[4,(0,s.resolveSelect)(Bt.STORE_NAME).getTasksRelatedToPost(r)];case 2:return a=m.sent(),u=(0,c.map)(a,(function(e){return Kt(Kt({},e),{dateDue:(0,l.getTaskDateDue)({baseDatetime:n,dateType:e.dateType,dateValue:e.dateValue})})})),(0,l.isEmpty)(i)||(0,s.dispatch)(Bt.STORE_NAME).receiveSocialMessages(i),(0,l.isEmpty)(u)||(0,s.dispatch)(Bt.STORE_NAME).receiveTasks(u),[2]}}))}))}var Wt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},zt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function Xt(e){return Wt(this,void 0,void 0,(function(){var t;return zt(this,(function(n){switch(n.label){case 0:return[4,(0,s.resolveSelect)(d).getReferenceByUrl(e)];case 1:return(t=n.sent())?((0,s.dispatch)(d).doOpenReferenceEditor(t),[2]):[2]}}))}))}function Jt(){return Wt(this,void 0,void 0,(function(){var e;return zt(this,(function(t){switch(t.label){case 0:return(e=(0,s.select)(d).getEditingReference())?[4,(0,s.dispatch)(d).saveReference(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return(0,s.dispatch)(d).closeReferenceEditor(),[2]}}))}))}function Zt(e){return Wt(this,void 0,void 0,(function(){var t;return zt(this,(function(n){switch(n.label){case 0:(0,s.dispatch)(d).markReferenceAsSaving(e.url,!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Ut()({path:"/nelio-content/v1/reference/".concat(e.id),method:"PUT",data:(0,c.omitBy)(e,l.isEmpty)})];case 2:return t=n.sent(),(0,s.dispatch)(d).receiveReferences(t),[3,4];case 3:return n.sent(),[3,4];case 4:return(0,s.dispatch)(d).markReferenceAsSaving(e.url,!1),[2]}}))}))}const en=window.wp.richText;var tn=function(){return tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tn.apply(this,arguments)},nn=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},rn=["p","h1","h2","h3","h4","li"],on=rn.reduce((function(e,t){return nn(nn([],e,!0),rn.map((function(e){return"".concat(t," ").concat(e)})),!0)}),[]).join(", ");function an(){var e=(0,s.select)(Bt.STORE_NAME),t=e.isSubscribed,n=e.getProfilesWithMessagesRelatedToPost;return t()?[]:n((0,(0,s.select)(d).getPost)().id)}function sn(e){void 0===e&&(e="");var t,n,r=function(e){var t=document.createElement("div");t.innerHTML=e;var n,r="".concat(on,", ncshare ncshare");do{ln(n=t.querySelector(r))}while(n);return t}(e),o=Array.from(r.querySelectorAll(rn.join(",")));return{clean:(0,c.map)(o,cn).join("\n\n"),highlights:(t=o,n=c.union.apply(void 0,(0,c.map)(t,(function(e){var t,n,r,o=(0,en.create)({element:e});return(t=o,n=function(e,t){return mn(e)&&mn(t)||!mn(e)&&!mn(t)},r=(0,c.uniq)(un(t.formats.reduce((function(e,t,r,o){return n(o[r-1],t)||(e=un(e,r)),n(t,o[r+1])||(e=un(e,r+1)),e}),[0]),t.formats.length)),(0,c.zip)((0,c.dropRight)(r,1),(0,c.drop)(r,1)).map((function(e){var n=e[0],r=e[1];return(0,en.slice)(t,n,r)})).filter((function(e){return e.formats.some(mn)}))).map(dn)}))),(0,c.map)(n,(function(e){return{html:e,text:e.replace(/<[^>]*>/g,"")}}))),top:(0,c.union)((0,c.map)(r.getElementsByTagName("h1"),cn),(0,c.map)(r.getElementsByTagName("h2"),cn),(0,c.map)(r.getElementsByTagName("h3"),cn),(0,c.map)(r.getElementsByTagName("strong"),cn))}}function ln(e){var t,n;if(e){for(;e.firstChild;)null===(t=e.parentElement)||void 0===t||t.insertBefore(e.firstChild,e);null===(n=e.parentElement)||void 0===n||n.removeChild(e)}}function cn(e){var t;return(null===(t=null==e?void 0:e.textContent)||void 0===t?void 0:t.replace(/\s+/g," "))||""}function un(e,t){return e.push(t),e}function dn(e){var t=e.formats.reduce((function(e,t){var n=pn(t);return n&&(e[n]=[{type:"a",attributes:{href:n}}]),e}),{"":[]});return e=tn(tn({},e),{formats:e.formats.map((function(e){return t[pn(e)]}))}),(0,en.toHTMLString)({value:e})}var mn=function(e){return!!(null==e?void 0:e.some((function(e){var t=e.type;return"ncshare"===t||"nelio-content/highlight"===t})))},fn=function(e){var t,n;return"a"===e.type&&!!(null===(t=e.attributes)||void 0===t?void 0:t.href)||"core/link"===e.type&&!!(null===(n=e.attributes)||void 0===n?void 0:n.url)},pn=function(e){var t,n,r,o=null===(t=null==e?void 0:e.find(fn))||void 0===t?void 0:t.attributes;return null!==(r=null!==(n=null==o?void 0:o.href)&&void 0!==n?n:null==o?void 0:o.url)&&void 0!==r?r:""},gn=function(){return gn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gn.apply(this,arguments)},En=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},hn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},vn="core/editor";function yn(){return En(this,void 0,void 0,(function(){return hn(this,(function(e){switch(e.label){case 0:if((0,s.select)(d).isClassicEditor())return function(){if(!(0,s.select)(d).isGeneratingTimeline()){(0,s.dispatch)(d).markTimelineAsGenerating(!0);var e=document.getElementById("post");if(e){var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","_nc_auto_messages"),t.setAttribute("value","true"),e.appendChild(t),e.submit()}}}(),[2];if((0,s.select)(d).isGeneratingTimeline())return[2];(0,s.dispatch)(d).markTimelineAsGenerating(!0),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,(0,s.dispatch)(vn).savePost()];case 2:return e.sent(),[4,xn()];case 3:case 4:return e.sent(),[3,5];case 5:return(0,s.dispatch)(d).markTimelineAsGenerating(!1),[2]}}))}))}function Sn(){return En(this,void 0,void 0,(function(){return hn(this,(function(e){switch(e.label){case 0:return(0,s.select)(d).isGeneratingTimeline()?[2]:((0,s.dispatch)(d).markTimelineAsGenerating(!0),[4,xn()]);case 1:return e.sent(),(0,s.dispatch)(d).markTimelineAsGenerating(!1),[2]}}))}))}function Tn(){return En(this,void 0,void 0,(function(){var e,t,n;return hn(this,(function(r){switch(r.label){case 0:return(e=(0,s.select)(d).getPostId())?(0,s.select)(d).isClearingTimeline()?[2]:((0,s.dispatch)(d).markTimelineAsClearing(!0),[4,(0,s.resolveSelect)(Bt.STORE_NAME).getSocialMessagesRelatedToPost(e)]):[2];case 1:return t=r.sent(),n=t.filter((function(e){return"publish"!==e.status&&"error"!==e.status})).map((function(e){return e.id})),[4,Promise.all(n.map(An))];case 2:return r.sent(),n.forEach((function(e){return(0,s.dispatch)(Bt.STORE_NAME).deleteSocialMessage(e)})),(0,s.dispatch)(d).markTimelineAsClearing(!1),[2]}}))}))}function bn(e){return En(this,void 0,void 0,(function(){var t;return hn(this,(function(n){switch(n.label){case 0:return(0,s.select)(d).isSocialMessageBeingDeleted(e)?[2]:((0,s.dispatch)(d).markSocialMessageAsDeleting(e,!0),[4,An(e)]);case 1:return n.sent(),t=(0,s.select)(Bt.STORE_NAME).getSocialMessage(e),(0,s.dispatch)(Bt.STORE_NAME).deleteRecurringMessages(null==t?void 0:t.recurrenceGroup),(0,s.dispatch)(Bt.STORE_NAME).deleteSocialMessage(e),(0,s.dispatch)(d).markSocialMessageAsDeleting(e,!1),[2]}}))}))}function An(e){return En(this,void 0,void 0,(function(){var t,n,r;return hn(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=(0,s.select)(Bt.STORE_NAME).getSiteId(),n=(0,s.select)(Bt.STORE_NAME).getApiRoot(),r=(0,s.select)(Bt.STORE_NAME).getAuthenticationToken(),[4,Ut()({url:"".concat(n,"/site/").concat(t,"/social/").concat(e,"/following"),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 1:case 2:return o.sent(),[3,3];case 3:return[2]}}))}))}function xn(){return En(this,void 0,void 0,(function(){var e,t,n,r,o,i;return hn(this,(function(a){switch(a.label){case 0:if(!(e=(0,s.select)(d).getPostId()))return[2];a.label=1;case 1:return a.trys.push([1,5,,6]),[4,Ut()({path:"/nelio-content/v1/post/".concat(e,"?aws")})];case 2:return t=a.sent(),n=(0,s.select)(Bt.STORE_NAME).getSiteId(),r=(0,s.select)(Bt.STORE_NAME).getApiRoot(),o=(0,s.select)(Bt.STORE_NAME).getAuthenticationToken(),[4,Ut()({url:"".concat(r,"/site/").concat(n,"/post/").concat(e,"/social/auto"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(o)},data:gn(gn({},t),sn(t.content))})];case 3:return i=a.sent(),[4,(0,s.resolveSelect)(Bt.STORE_NAME).getSocialMessageIdsRelatedToPost(e)];case 4:return a.sent().forEach((function(e){return(0,s.dispatch)(Bt.STORE_NAME).deleteSocialMessage(e)})),(0,s.dispatch)(Bt.STORE_NAME).receiveSocialMessages(i),[3,6];case 5:return a.sent(),[3,6];case 6:return[4,(0,s.dispatch)(d).updateDatesInPostRelatedItems()];case 7:return a.sent(),[2]}}))}))}var kn=function(){return kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kn.apply(this,arguments)},Rn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Nn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function In(e,t){return Rn(this,void 0,void 0,(function(){var n,r,o,i,a,l;return Nn(this,(function(c){switch(c.label){case 0:if(!(n=(0,s.select)(Bt.STORE_NAME).getTask(e)))return[2];(0,s.dispatch)(d).markEditorialTaskAsSynching(e,!0),c.label=1;case 1:return c.trys.push([1,7,,8]),r=kn(kn({},n),{completed:t}),(0,s.dispatch)(Bt.STORE_NAME).receiveTasks(r),o=(0,s.select)(Bt.STORE_NAME).getSiteId(),i=(0,s.select)(Bt.STORE_NAME).getApiRoot(),a=(0,s.select)(Bt.STORE_NAME).getAuthenticationToken(),[4,Ut()({url:"".concat(i,"/site/").concat(o,"/task/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(a)},data:r})];case 2:if(l=c.sent(),(0,s.dispatch)(Bt.STORE_NAME).receiveTasks(l),!l.completed)return[3,6];c.label=3;case 3:return c.trys.push([3,5,,6]),[4,Ut()({path:"/nelio-content/v1/notifications/task",method:"POST",data:kn({isNewTask:!1},l)})];case 4:case 5:return c.sent(),[3,6];case 6:return[3,8];case 7:return c.sent(),(0,s.dispatch)(Bt.STORE_NAME).receiveTasks(n),[3,8];case 8:return(0,s.dispatch)(d).markEditorialTaskAsSynching(e,!1),[2]}}))}))}function wn(e,t){return Rn(this,void 0,void 0,(function(){var n,r,o,i,a,u,m,f,p,g,E,h;return Nn(this,(function(v){switch(v.label){case 0:return(n=(0,s.select)(d).getPost())?(r="replace"===e?"replacing":"merging",(0,s.dispatch)(d).setTaskPresetsState(r),o=(0,s.resolveSelect)(Bt.STORE_NAME).getTaskIdsRelatedToPost,i=(0,s.select)(Bt.STORE_NAME).getTask,[4,o(n.id)]):[2];case 1:if(a=v.sent(),u=a.map(i).filter(l.isDefined),m="replace"===e?[]:u,!(f=(0,c.orderBy)(t.map(Mn),"_sort").map(Cn(n,m)).filter(l.isDefined)).length)return[3,6];v.label=2;case 2:return v.trys.push([2,5,,6]),p=(0,s.select)(Bt.STORE_NAME).getSiteId(),g=(0,s.select)(Bt.STORE_NAME).getApiRoot(),E=(0,s.select)(Bt.STORE_NAME).getAuthenticationToken(),[4,new Promise((function(e){return setTimeout(e,1e3)}))];case 3:return v.sent(),[4,Ut()({url:"".concat(g,"/site/").concat(p,"/task"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(E)},data:{mode:e,postId:n.id,tasks:f}})];case 4:return h=v.sent(),"replace"===e&&a.forEach((0,s.dispatch)(Bt.STORE_NAME).deleteTask),(0,s.dispatch)(Bt.STORE_NAME).receiveTasks(h),[3,6];case 5:return v.sent(),[3,6];case 6:return(0,s.dispatch)(d).openTaskPresetLoader(!1),[2]}}))}))}function On(e){return Rn(this,void 0,void 0,(function(){var t,n,r;return Nn(this,(function(o){switch(o.label){case 0:if(!(0,s.select)(Bt.STORE_NAME).getTask(e))return[2];(0,s.dispatch)(d).markEditorialTaskAsDeleting(e,!0),o.label=1;case 1:return o.trys.push([1,3,,4]),t=(0,s.select)(Bt.STORE_NAME).getSiteId(),n=(0,s.select)(Bt.STORE_NAME).getApiRoot(),r=(0,s.select)(Bt.STORE_NAME).getAuthenticationToken(),[4,Ut()({url:"".concat(n,"/site/").concat(t,"/task/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 2:return o.sent(),(0,s.dispatch)(Bt.STORE_NAME).deleteTask(e),[3,4];case 3:return o.sent(),[3,4];case 4:return(0,s.dispatch)(d).markEditorialTaskAsDeleting(e,!1),[2]}}))}))}var Cn=function(e,t){return function(n){var r;if(n.assigneeId||e.author){var o=kn(kn({},(0,l.createTask)()),{assigneeId:null!==(r=n.assigneeId)&&void 0!==r?r:e.author,task:n.task,color:n.color,dateType:n.dateType,dateValue:n.dateValue,postId:e.id,postType:e.type,dateDue:(0,l.getTaskDateDue)({baseDatetime:e.date||"now",dateType:n.dateType,dateValue:n.dateValue}),postAuthor:e.author,baseDatetime:(0,l.getBaseDatetime)(e,n.dateType)}),i=(0,c.pick)(o,["assigneeId","task","dateType","dateValue"]);return(0,c.some)(t,(function(e){return(0,c.isEqual)(i,(0,c.pick)(e,(0,c.keys)(i)))}))?void 0:o}}},Mn=function(e){var t=Math.abs(Number.parseInt(e.dateValue)||0),n="";return n+="positive-days"===e.dateType||0===t?"1:"+(0,c.padStart)("".concat(t),5,"0"):"0:"+(0,c.padStart)("".concat(Math.abs(9999-t)),5,"0"),n+=":",n+=e.task,kn(kn({},e),{_sort:n})};const Pn=window.wp.url;var Dn=function(){return Dn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Dn.apply(this,arguments)},Ln=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Fn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function Un(e){return Ln(this,void 0,void 0,(function(){var t,n,r;return Fn(this,(function(o){switch(o.label){case 0:if(!e)return[2];(0,s.dispatch)(d).markReferenceAsLoading(e,!0),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,Ut()({path:(0,Pn.addQueryArgs)("/nelio-content/v1/reference/search",{url:e})})];case 2:return t=o.sent(),(0,s.dispatch)(d).receiveReferences(t),n=t.status,r=t.isExternal,"pending"===n&&r?[4,Bn(t)]:[3,4];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:return o.sent(),[3,6];case 6:return(0,s.dispatch)(d).markReferenceAsLoading(e,!1),[2]}}))}))}function Bn(e){return Ln(this,void 0,void 0,(function(){var t,n,r,o,i,a;return Fn(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,(0,s.dispatch)(Bt.STORE_NAME).loadLink(e.url)];case 1:return l.sent(),(t=(0,s.select)(Bt.STORE_NAME).getSharedLinkData(e.url))?(n=t.author,r=t.date,o=t.title,i=t.twitter,a=Dn(Dn({},e),{author:n,date:r,title:o,twitter:i}),[4,(0,s.dispatch)(d).saveReference(a)]):[2];case 2:case 3:return l.sent(),[3,4];case 4:return[2]}}))}))}var Gn=function(){return Gn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gn.apply(this,arguments)},Qn=Gn(Gn({},t),o),jn=(0,s.registerStore)(d,{reducer:R,controls:s.controls,actions:Qn,selectors:e,resolvers:i});!function(){(0,(0,s.dispatch)(d).setPanelSettings)((0,l.getValue)("panelSettings",{})||{});var e=jn.getState().settings.panels;jn.subscribe((function(){var t=jn.getState().settings.panels;e!==t&&(e=t,(0,l.setValue)("panelSettings",t))}))}();const Vn=window.wp.element,Kn=window.wp.compose,qn=window.wp.components;var Yn=function(){return Yn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yn.apply(this,arguments)},Hn=function(){var e=$n(),t=e[0],n=e[1],r=Wn();return Vn.createElement("div",{className:"nelio-content-editorial-comments-input"},Vn.createElement(qn.TextareaControl,{placeholder:(0,re._x)("Write a comment and press enter to send","user","nelio-content"),className:"nelio-content-editorial-comments-input__textarea",value:t,onChange:n,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),r())}}))},$n=function(){return[(0,s.useSelect)((function(e){return e(d).getEditorialCommentInputValue()})),(0,s.useDispatch)(d).setEditorialCommentInputValue]},Wn=function(){var e=$n(),t=e[0],n=e[1],r=(0,s.useDispatch)(d).createEditorialComment,o=(0,s.useSelect)((function(e){return e(d).getPostId()})),i=(0,s.useSelect)((function(e){return e(d).getPostType()}));return o&&i?function(){var e=(0,c.trim)(t);(0,l.isEmpty)(e)||(n(""),r(Yn(Yn({},(0,l.createComment)(o,i)),{comment:e})))}:function(){}},zn=n(4184),Xn=n.n(zn);const Jn=window.moment;var Zn=n.n(Jn);const er=window.NelioContent.components,tr=window.NelioContent.date;var nr=function(e){var t=e.commentId,n=rr(t),r=(0,Bt.useAuthorName)(null==n?void 0:n.authorId),o=(0,s.useSelect)((function(e){return e(d).isDeletingEditorialComment(t)})),i=(0,s.useSelect)((function(e){return e(d).isSynchingEditorialComment(t)})),a=or(t),l=ir(t),c=(0,s.useDispatch)(d).deleteEditorialComment;return Vn.createElement("div",{className:Xn()({"nelio-content-editorial-comments-comment":!0,"nelio-content-editorial-comments-comment--is-mine":a,"nelio-content-editorial-comments-comment--is-being-deleted":o})},!a&&Vn.createElement("div",{className:"nelio-content-editorial-comments-comment__author-icon"},Vn.createElement(er.AuthorIcon,{authorId:null==n?void 0:n.authorId})),Vn.createElement("div",null,Vn.createElement("div",{className:Xn()({"nelio-content-editorial-comments-comment__bubble":!0,"nelio-content-editorial-comments-comment__bubble--is-mine":a})},(null==n?void 0:n.comment)||""),Vn.createElement("div",{className:Xn()({"nelio-content-editorial-comments-comment__extra":!0,"nelio-content-editorial-comments-comment__extra--is-mine":a})},i&&(0,re._x)("Sending","text","nelio-content"),!i&&!a&&Vn.createElement("div",{className:"nelio-content-editorial-comments-comment__author"},r),!i&&Vn.createElement("div",{className:"nelio-content-editorial-comments-comment__date"},(0,tr.dateI18n)((0,tr.getSettings)().formats.datetime,null==n?void 0:n.date))),(o||l)&&!i&&Vn.createElement("div",{className:"nelio-content-editorial-comments-comment__actions"},Vn.createElement(er.DeleteButton,{isDeleting:o,onClick:function(){return c(t)}}))))},rr=function(e){return(0,s.useSelect)((function(t){return t(Bt.STORE_NAME).getComment(e)}))},or=function(e){var t=rr(e);return(0,s.useSelect)((function(e){return e(Bt.STORE_NAME).getCurrentUserId()===(null==t?void 0:t.authorId)}))},ir=function(e){var t,n=null===(t=rr(e))||void 0===t?void 0:t.date,r=or(e),o=n?Zn()().diff(n,"minutes"):0,i=Math.abs(o)<5,a=(0,Vn.useState)(0),s=a[0],l=a[1];return(0,Vn.useEffect)((function(){i&&setTimeout((function(){return l(s+1)}),3e4)}),[s,i]),r&&i},ar=function(){var e=(0,s.useSelect)((function(e){return e(Bt.STORE_NAME).getCommentIdsRelatedToPost(e(d).getPostId())}));return Vn.createElement("div",null,e.map((function(e){return Vn.createElement(nr,{key:e,commentId:e})})))},sr=function(){return sr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sr.apply(this,arguments)},lr=(0,Kn.createHigherOrderComponent)((function(e){return function(t){return(0,s.useSelect)((function(e){return e(d).isPostReady()}))?Vn.createElement(e,sr({},t)):Vn.createElement(Vn.Fragment,null,(0,re._x)("Please save post first to access this feature.","user","nelio-content"))}}),"withPostReadyCheck"),cr=function(e){return(0,Kn.createHigherOrderComponent)((function(t){return function(n){return(0,s.useSelect)((function(t){return!!t(d)[e]()}))?Vn.createElement(er.LoadingAnimation,{text:(0,re._x)("Loading","text","nelio-content"),isSmall:!0}):Vn.createElement(t,sr({},n))}}),"withLoadingCheck")},ur=(0,Kn.compose)(Bt.withSubscriptionCheck,lr,cr("isRetrievingEditorialComments"))((function(){return Vn.createElement(Vn.Fragment,null,Vn.createElement(ar,null),Vn.createElement(Hn,null))})),dr=function(){var e=mr(),t=e.completed,n=e.total;return n?Vn.createElement("div",{className:"nelio-content-tasks-progress"},Vn.createElement("div",{className:"nelio-content-tasks-progress__bar-background"},Vn.createElement("div",{className:Xn()({"nelio-content-tasks-progress__bar":!0,"nelio-content-tasks-progress__bar--is-completed":t===n}),style:{width:"".concat(Math.round(100*t/n),"%")}})),Vn.createElement("div",{className:"nelio-content-tasks-progress__percentage"},Math.round(100*t/n),"%")):null},mr=function(){return(0,s.useSelect)((function(e){var t=e(d).getPostId,n=(0,e(Bt.STORE_NAME).getTasksRelatedToPost)(t());return{completed:(0,c.filter)(n,{completed:!0}).length,total:n.length}}))};const fr=window.NelioContent.taskEditor;var pr=function(e){var t,n=e.taskId,r=gr(n),o=Er(n),i=o.canCompleteTask,a=o.canDeleteTask,c=o.canEditTask,u=hr(n),m=u.isDeleting,f=u.isSynching,p=u.isPastDateDue,g=r||{},E=g.completed,h=g.color,v=void 0===h?"":h,_=g.task,y=vr(r),S=_r(n),T=yr(n),b=(0,Bt.useAuthorName)(null==r?void 0:r.assigneeId,(0,re._x)("Unknown Assignee","text","nelio-content")),A=(0,s.useSelect)((function(e){return e(d).getPost()})),x=r?(0,l.getHumanDateDue)(A,r.dateType,r.dateValue):"";return Vn.createElement("div",{className:Xn()((t={"nelio-content-editorial-task":!0},t["nelio-content-editorial-task--is-".concat(v)]=!!v,t["nelio-content-editorial-task--is-task-".concat(n)]=!0,t["nelio-content-editorial-task--is-due"]=p,t))},Vn.createElement(qn.CheckboxControl,{className:Xn()({"nelio-content-editorial-task__control":!0,"nelio-content-editorial-task__control--is-completed":E}),label:_,onChange:T,checked:E,disabled:!i||m||f}),Vn.createElement("div",{className:Xn()({"nelio-content-editorial-task__extra":!0,"nelio-content-editorial-task__extra--is-completed":E,"nelio-content-editorial-task__extra--is-deleting":m,"nelio-content-editorial-task__extra--is-due":p,"nelio-content-editorial-task__extra--is-synching":f})},f&&(0,re._x)("Saving","text","nelio-content"),!f&&"".concat(b,"  ").concat(x),p&&Vn.createElement(qn.Dashicon,{icon:"warning"})),Vn.createElement("div",{className:Xn()({"nelio-content-editorial-task__actions":!0,"nelio-content-editorial-task__actions--is-deleting":m,"nelio-content-editorial-task__actions--is-synching":f})},Vn.createElement(qn.Button,{variant:"link",disabled:!c||m||f,onClick:y},(0,re._x)("Edit","command","nelio-content")),Vn.createElement(er.DeleteButton,{disabled:!a||f,isDeleting:m,onClick:S})))},gr=function(e){return(0,s.useSelect)((function(t){return t(Bt.STORE_NAME).getTask(e)}))},Er=function(e){var t=gr(e);return(0,s.useSelect)((function(e){var n=e(Bt.STORE_NAME).canCurrentUserEditTask(t),r=e(Bt.STORE_NAME).canCurrentUserDeleteTask(t);return{canCompleteTask:!!t&&n,canDeleteTask:!!t&&r,canEditTask:!!t&&n}}))},hr=function(e){var t=gr(e);return(0,s.useSelect)((function(n){if(!t)return{isDeleting:!1,isSynching:!1,isPastDateDue:!1};var r=n(d),o=r.isEditorialTaskBeingDeleted,i=r.isEditorialTaskBeingSynched,a=n(d).getPost(),s=n(Bt.STORE_NAME).getToday(),c=o(e),u=i(e);return{isDeleting:c,isSynching:u,isPastDateDue:!t.completed&&!u&&(0,l.getTaskDateDue)({baseDatetime:(null==a?void 0:a.date)||void 0,dateType:t.dateType,dateValue:t.dateValue})<s}}))},vr=function(e){var t=(0,s.useSelect)((function(e){return e(d).getPost()})),n=(0,s.useDispatch)(fr.STORE_NAME).openExistingTaskEditor;return function(){return!!t&&!!e&&n(e,{context:"post",post:t})}},_r=function(e){var t=(0,s.useDispatch)(d).deleteEditorialTask;return function(){return t(e)}},yr=function(e){var t=gr(e),n=(0,s.useDispatch)(d).markTaskAsCompleted;return function(){return n(e,!(null==t?void 0:t.completed))}},Sr=function(){var e=Tr();return(0,l.isEmpty)(e)?Vn.createElement("div",{className:"nelio-content-task-list nelio-content-task-list--is-empty"},(0,re._x)("Keep track of the things that need to get done with tasks.","user","nelio-content")):Vn.createElement("div",{className:"nelio-content-task-list"},e.map((function(e){return Vn.createElement(pr,{key:e,taskId:e})})))},Tr=function(){return(0,s.useSelect)((function(e){var t=e(d).getPostId;return(0,e(Bt.STORE_NAME).getTaskIdsRelatedToPost)(t())}))},br=function(){var e=kr(),t=xr(),n=(0,s.useDispatch)(d).openTaskPresetLoader,r=Rr();return Vn.createElement("div",{className:"nelio-content-task-actions"},e&&Vn.createElement(qn.Button,{variant:"secondary",disabled:!t,onClick:function(){return n(!0)}},(0,re._x)("Load Tasks","command","nelio-content")),Vn.createElement(qn.Button,{variant:"secondary",disabled:!t,onClick:r},(0,re._x)("Add Task","command","nelio-content")))},Ar=function(){return(0,s.useSelect)((function(e){return e(d).getPost()}))},xr=function(){var e=Ar();return(0,s.useSelect)((function(t){return t(Bt.STORE_NAME).canCurrentUserCreateTasksRelatedToPost(e)}))},kr=function(){return(0,s.useSelect)((function(e){return!!e(Bt.STORE_NAME).getTaskPresets().length}))},Rr=function(){var e=Ar(),t=(0,s.useDispatch)(fr.STORE_NAME).openNewTaskEditor;return function(){return t({dateType:"publish"!==e.status?"predefined-offset":void 0,dateValue:"publish"!==e.status?"0":void 0},{post:e,context:"post"})}},Nr=function(){var e=(0,s.useSelect)((function(e){return e(d).getPostId()})),t=(0,s.useSelect)((function(t){return!!t(Bt.STORE_NAME).getTaskIdsRelatedToPost(e).length})),n=(0,s.useSelect)((function(e){return e(d).getTaskPresetLoaderState()})),r=(0,s.useSelect)((function(e){return e(d).getTaskPresetSelection()})),o=(0,s.useDispatch)(d),i=o.instantiatePresets,a=o.openTaskPresetLoader,l=o.selectTaskPresets;return Vn.createElement(er.TaskPresetLoader,{state:n,actions:t?"replace-or-merge":"add",selection:r,onUpdate:l,onCancel:function(){return a(!1)},onMerge:function(e){return i("merge",e)},onReplace:function(e){return i("replace",e)}})},Ir=(0,Kn.compose)(Bt.withSubscriptionCheck,lr,cr("isRetrievingEditorialTasks"))((function(){return Vn.createElement(Vn.Fragment,null,Vn.createElement(dr,null),Vn.createElement(Sr,null),Vn.createElement(br,null),Vn.createElement(Nr,null))})),wr=function(){var e=(0,s.useDispatch)(d).editExternalFeaturedImage;return Vn.createElement("div",{className:"nelio-content-efi-no-image"},Vn.createElement(qn.Button,{variant:"link",onClick:e},(0,re._x)("Set external featured image","command","nelio-content")))},Or=function(){var e=Mr(),t=e[0],n=e[1],r=Cr(),o=r[0],i=r[1],a=Pr(),s=a.save,c=a.cancel,u=function(e){e&&"Enter"===e.key&&(e.preventDefault(),s())};return Vn.createElement("div",{className:"nelio-content-efi-edit-image"},Vn.createElement(qn.TextControl,{label:(0,re._x)("Image URL","text","nelio-content"),placeholder:"https://",value:t,onChange:n,onKeyDown:u}),Vn.createElement(qn.TextControl,{label:(0,re._x)("Alt Text","text","nelio-content"),value:o,onChange:i,onKeyDown:u}),Vn.createElement("div",{className:"nelio-content-efi-edit-image__action"},Vn.createElement(qn.Button,{variant:"secondary",onClick:c},(0,re._x)("Cancel","command","nelio-content"))," ",Vn.createElement(qn.Button,{variant:"secondary",onClick:s,disabled:!(0,l.isUrl)(t)},(0,re._x)("Set Image","command","nelio-content"))))},Cr=function(){return[(0,s.useSelect)((function(e){return e(d).getExternalFeaturedImageAltField()})),(0,s.useDispatch)(d).setExternalFeaturedImageAltField]},Mr=function(){return[(0,s.useSelect)((function(e){return e(d).getExternalFeaturedImageUrlField()})),(0,s.useDispatch)(d).setExternalFeaturedImageUrlField]},Pr=function(){var e=Cr()[0],t=Mr()[0],n=(0,s.useDispatch)(d),r=n.cancelEditionOfExternalFeaturedImage,o=n.setExternalFeaturedImage;return{save:function(){return(0,l.isUrl)(t)?o(t,e):void 0},cancel:function(){return r()}}},Dr=function(){var e=(0,s.useSelect)((function(e){return e(d).getExternalFeaturedImageAlt()})),t=(0,s.useSelect)((function(e){return e(d).getExternalFeaturedImageUrl()})),n=(0,s.useDispatch)(d).editExternalFeaturedImage,r=(0,s.useDispatch)(d).removeExternalFeaturedImage;return Vn.createElement("div",{className:"nelio-content-efi-image"},Vn.createElement(qn.Button,{className:"nelio-content-efi-image__image-button",onClick:n},Vn.createElement("img",{className:"nelio-content-efi-image__actual-image",src:t,alt:e})),Vn.createElement("div",{className:"nelio-content-efi-image__replace-button"},Vn.createElement(qn.Button,{variant:"secondary",onClick:n},(0,re._x)("Replace Image","command","nelio-content"))),Vn.createElement("div",null,Vn.createElement(qn.Button,{variant:"link",isDestructive:!0,onClick:r},(0,re._x)("Remove external featured image","command","nelio-content"))))},Lr=function(){switch((0,s.useSelect)((function(e){return e(d).getExternalFeaturedImageView()}))){case"no-image":return Vn.createElement(wr,null);case"edit-image":return Vn.createElement(Or,null);case"image":return Vn.createElement(Dr,null);default:return null}},Fr=function(e){var t=e.isAuthor,n=e.remove,r=e.userId,o=(0,Bt.useAuthorName)(r);return Vn.createElement("div",{className:"nelio-content-notification-user"},Vn.createElement("div",{className:"nelio-content-notification-user__icon"},Vn.createElement(er.AuthorIcon,{authorId:r})),Vn.createElement("div",{className:"nelio-content-notification-user__info"},Vn.createElement("div",{className:"nelio-content-notification-user__name"},o||(0,re._x)("Unknown User","text","nelio-content")),Vn.createElement("div",{className:"nelio-content-notification-user__extra"},t&&Vn.createElement("span",{className:n?"nelio-content-notification-user__author nelio-content-notification-user__author--has-pipe":"nelio-content-notification-user__author"},(0,re._x)("Author","text","nelio-content")),!!n&&Vn.createElement(qn.Button,{className:"nelio-content-notification-user__remove-action",isDestructive:!0,variant:"link",onClick:n},(0,re._x)("Remove","command","nelio-content")))))},Ur=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Br=function(){var e=jr(),t=e[0],n=e[1],r=Gr(),o=Qr();return Vn.createElement("div",{className:"nelio-content-notifications"},Vn.createElement("div",{className:"nelio-content-notifications__user-searcher"},Vn.createElement(er.AuthorSearcher,{placeholder:(0,re._x)("Select a user","user","nelio-content"),onChange:function(e){var r;e&&(r=e,n((0,c.uniq)(Ur(Ur([],t,!0),[r],!1))))}})),Vn.createElement("div",{className:"nelio-content-notifications__followers"},t.map((function(e){return Vn.createElement(Fr,{key:e,userId:e,isAuthor:e===r,remove:e===r&&o?void 0:function(){return r=e,n((0,c.without)(t,r));var r}})}))))},Gr=function(){return(0,s.useSelect)((function(e){return e(d).getAuthorId()}))},Qr=function(){return(0,s.useSelect)((function(e){return e(d).getAuthorId()}))},jr=function(){var e=Gr(),t=(0,s.useSelect)((function(e){return e(d).getFollowers()})),n=(0,s.useDispatch)(d).setFollowers;return[Qr()&&e?(0,c.uniq)(Ur([e],t,!0)):t,n]},Vr=function(){var e=Kr(),t=e[0],n=e[1],r=(0,s.useSelect)((function(e){return e(d).isReferenceEditorVisible()})),o=(0,s.useSelect)((function(e){var n=e(d).isReferenceSaving;return!(null==t?void 0:t.url)||n(t.url)})),i=qr(),a=i.close,l=i.saveAndClose;if(!r||!t)return null;var c=t.title,u=t.author,m=t.email,f=t.twitter,p=t.url,g=Yr(t);return Vn.createElement(qn.Modal,{className:"nelio-content-reference-editor",title:(0,re._x)("Edit Reference","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!o,shouldCloseOnClickOutside:!1,onRequestClose:a},Vn.createElement(qn.TextControl,{value:c,onChange:function(e){return n({title:e})},placeholder:(0,re._x)("Enter the title","user","nelio-content")}),Vn.createElement("div",{className:"nelio-content-reference-editor__url"},Vn.createElement("strong",null,"URL:")," ",Vn.createElement(qn.ExternalLink,{href:p})),Vn.createElement("h3",{className:"nelio-content-reference-editor__section-title"},(0,re._x)("Author Information","text","nelio-content")),Vn.createElement(qn.TextControl,{label:(0,re._x)("Name","text","nelio-content"),value:u,onChange:function(e){return n({author:e})},placeholder:(0,re._x)("First and Last Names","text","nelio-content")}),Vn.createElement(qn.TextControl,{label:(0,re._x)("Email","text","nelio-content"),value:m,onChange:function(e){return n({email:e})},placeholder:(0,re._x)("author@example.com","text","nelio-content")}),Vn.createElement(qn.TextControl,{label:(0,re._x)("X","text","nelio-content"),value:f,onChange:function(e){return n({twitter:e})},placeholder:(0,re._x)("@username","text","nelio-content")}),Vn.createElement("div",{className:"nelio-content-reference-editor__actions"},Vn.createElement(qn.Button,{variant:"secondary",disabled:o,onClick:a},(0,re._x)("Cancel","command","nelio-content")),Vn.createElement(er.SaveButton,{variant:"primary",error:g,isSaving:o,onClick:l})))},Kr=function(){return[(0,s.useSelect)((function(e){return e(d).getEditingReference()})),(0,s.useDispatch)(d).updateEditingReference]},qr=function(){var e=(0,s.useDispatch)(d);return{close:e.closeReferenceEditor,saveAndClose:e.saveAndCloseEditingReference}},Yr=function(e){var t=e.email,n=e.twitter;return(0,l.isEmpty)(t)||(0,Pn.isEmail)(t)?(0,l.isValidTwitterHandler)(n)?"":(0,re._x)("Please write a valid twitter handle","user","nelio-content"):(0,re._x)("Please write a valid email address","user","nelio-content")},Hr=function(e){var t=e.onClick;return Vn.createElement(er.DeleteButton,{labels:{delete:(0,re._x)("Discard","command","nelio-content"),deleting:(0,re._x)("Discarding","text","nelio-content")},confirmationLabels:{title:(0,re._x)("Discard Reference","text","nelio-content"),text:(0,re._x)("Are you sure you want to discard this reference? This operation cant be undone.","user","nelio-content")},onClick:t})},$r=function(){return $r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$r.apply(this,arguments)},Wr=function(e){var t=e.link;return Vn.createElement("div",{className:"nelio-content-link-reference"},Vn.createElement(zr,{link:t}),Vn.createElement(Xr,{link:t}),Vn.createElement(Jr,{link:t}),Vn.createElement(Zr,{link:t}))},zr=function(e){var t=e.link,n=eo(t),r=n.title,o=n.url;return r?Vn.createElement(Vn.Fragment,null,Vn.createElement("div",{className:"nelio-content-link-reference__title"},r),Vn.createElement("div",{className:"nelio-content-link-reference__link"},Vn.createElement(qn.ExternalLink,{href:o},o))):Vn.createElement("div",{className:"nelio-content-link-reference__title"},Vn.createElement(qn.ExternalLink,{href:o},o))},Xr=function(e){var t=e.link,n=to(t),r=eo(t),o=r.author,i=r.email,a=r.twitter;return n?Vn.createElement("div",{className:"nelio-content-link-reference__extra"},(0,re._x)("Loading","text","nelio-content")):a||i?Vn.createElement("div",{className:"nelio-content-link-reference__extra"},Vn.createElement("div",{className:"nelio-content-link-reference__author"},o||(0,re._x)("Unknown Author","text","nelio-content")),Vn.createElement("div",{className:"nelio-content-link-reference__contact"},!!a&&Vn.createElement(qn.ExternalLink,{href:"https://twitter.com/".concat(a)},Vn.createElement(qn.Dashicon,{className:"nelio-content-link-reference__contact-icon",icon:"twitter"}))," ",!!i&&Vn.createElement(qn.ExternalLink,{href:"mailto:".concat(i)},Vn.createElement(qn.Dashicon,{className:"nelio-content-link-reference__contact-icon",icon:"email"})))):Vn.createElement("div",{className:"nelio-content-link-reference__extra"},Vn.createElement("div",{className:"nelio-content-link-reference__author"},o||(0,re._x)("Unknown Author","text","nelio-content")))},Jr=function(e){var t=e.link,n=eo(t),r=(0,Bt.useIsUserYou)(null==n?void 0:n.suggestionAdvisorId),o=(0,Bt.useAuthorName)(null==n?void 0:n.suggestionAdvisorId);return n?!n.suggestionAdvisorId||r?Vn.createElement("div",{className:"nelio-content-link-reference__advisor"},(0,re._x)("Suggested by you","text","nelio-content")):Vn.createElement("div",{className:"nelio-content-link-reference__advisor"},o?(0,re.sprintf)(/* translators: author name */
(0,re._x)("Suggested by %s","text","nelio-content"),o):(0,re._x)("Suggested by someone","text","nelio-content")):Vn.createElement("div",{className:"nelio-content-link-reference__advisor"},(0,re._x)("Suggested by someone","text","nelio-content"))},Zr=function(e){var t=e.link,n=to(t),r=(0,s.useDispatch)(d).openReferenceEditor,o=(0,s.useDispatch)(d).discardReference;return n?Vn.createElement("div",{className:"nelio-content-link-reference__actions"},(0,re.sprintf)("%1$s | %2$s",(0,re._x)("Discard","command","nelio-content"),(0,re._x)("Edit","command","nelio-content"))):Vn.createElement("div",{className:"nelio-content-link-reference__actions"},Vn.createElement(Hr,{onClick:function(){return o(t)}})," | ",Vn.createElement(qn.Button,{variant:"link",onClick:function(){return r(t)}},(0,re._x)("Edit","command","nelio-content")))},eo=function(e){return(0,s.useSelect)((function(t){var n=$r($r({author:"",date:"",email:"",isExternal:!0,isSuggestion:!0,status:"pending",title:"",twitter:""},t(d).getReferenceByUrl(e)),{url:e}),r=n.twitter,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["twitter"]);return $r($r({},o),{twitter:/^@/.test(r)?r.substring(1):r})}))},to=function(e){return(0,s.useSelect)((function(t){return t(d).isReferenceLoading(e)}))},no=function(){var e=(0,s.useSelect)((function(e){return e(d).getSuggestedReferences()}));return(0,l.isEmpty)(e)?Vn.createElement("div",null,(0,re._x)("Do you have an interesting or helpful link for the author? Save it here!","user","nelio-content")):Vn.createElement("div",null,e.map((function(e){return Vn.createElement(Wr,{key:e,link:e})})))},ro=function(){var e=oo(),t=e[0],n=e[1],r=io(),o=ao(),i=!(0,l.isEmpty)(t)&&(0,Pn.isURL)(t);return Vn.createElement("div",{className:"nelio-content-reference-creator"},Vn.createElement(qn.TextControl,{autoComplete:"off",placeholder:(0,re._x)("Enter a URL","user","nelio-content"),value:t,onChange:n,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),i&&r())}}),Vn.createElement(qn.Button,{variant:"secondary",disabled:!i,onClick:r},o?(0,re._x)("Add","command","nelio-content"):(0,re._x)("Suggest","command","nelio-content")))},oo=function(){return[(0,s.useSelect)((function(e){return e(d).getSuggestedReferenceUrl()})),(0,s.useDispatch)(d).setSuggestedReferenceUrl]},io=function(){var e=oo(),t=e[0],n=e[1],r=(0,s.useDispatch)(d).suggestReference;return function(){(0,l.isUrl)(t)&&r(t),n("")}},ao=function(){return(0,s.useSelect)((function(e){return e(Bt.STORE_NAME).getCurrentUserId()===e(d).getAuthorId()}))},so=function(){return Vn.createElement(Vn.Fragment,null,Vn.createElement(no,null),Vn.createElement(ro,null))};const lo=window.React;function co(e){return e.startsWith("{{/")?{type:"componentClose",value:e.replace(/\W/g,"")}:e.endsWith("/}}")?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.startsWith("{{")?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}function uo(e,t){let n,r,o=[];for(let i=0;i<e.length;i++){const a=e[i];if("string"!==a.type){if(void 0===t[a.value])throw new Error(`Invalid interpolation, missing component node: \`${a.value}\``);if("object"!=typeof t[a.value])throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \`${a.value}\``);if("componentClose"===a.type)throw new Error(`Missing opening component token: \`${a.value}\``);if("componentOpen"===a.type){n=t[a.value],r=i;break}o.push(t[a.value])}else o.push(a.value)}if(n){const i=function(e,t){const n=t[e];let r=0;for(let o=e+1;o<t.length;o++){const e=t[o];if(e.value===n.value){if("componentOpen"===e.type){r++;continue}if("componentClose"===e.type){if(0===r)return o;r--}}}throw new Error("Missing closing component token `"+n.value+"`")}(r,e),a=uo(e.slice(r+1,i),t),s=(0,lo.cloneElement)(n,{},a);if(o.push(s),i<e.length-1){const n=uo(e.slice(i+1),t);o=o.concat(n)}}return o=o.filter(Boolean),0===o.length?null:1===o.length?o[0]:(0,lo.createElement)(lo.Fragment,null,...o)}function mo(e){const{mixedString:t,components:n,throwErrors:r}=e;if(!n)return t;if("object"!=typeof n){if(r)throw new Error(`Interpolation Error: unable to process \`${t}\` because components is not an object`);return t}const o=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(co)}(t);try{return uo(o,n)}catch(e){if(r)throw new Error(`Interpolation Error: unable to process \`${t}\` because of error \`${e.message}\``);return t}}var fo=function(e){var t=e.onClick,n=e.label,r=(0,s.useSelect)((function(e){return e(d).getOverallPostQualityStatus()})),o=n||function(e){switch(e){case"perfect":return mo({mixedString:(0,re.sprintf)(/* translators: 1 -> open strong tag, 2 -> close strong tag */
(0,re._x)("The post looks %1$sawesome%2$s!","text","nelio-content"),"{{strong}}","{{/strong}}"),components:{strong:Vn.createElement("strong",null)}});case"good":return mo({mixedString:(0,re.sprintf)(/* translators: 1 -> open strong tag, 2 -> close strong tag */
(0,re._x)("The post looks %1$sgood%2$s!","text","nelio-content"),"{{strong}}","{{/strong}}"),components:{strong:Vn.createElement("strong",null)}});case"improvable":return mo({mixedString:(0,re.sprintf)(/* translators: 1 -> open strong tag, 2 -> close strong tag */
(0,re._x)("The post is %1$simprovable%2$s","text","nelio-content"),"{{strong}}","{{/strong}}"),components:{strong:Vn.createElement("strong",null)}});case"bad":return mo({mixedString:(0,re.sprintf)(/* translators: 1 -> open strong tag, 2 -> close strong tag */
(0,re._x)("The post is %1$spoor%2$s","text","nelio-content"),"{{strong}}","{{/strong}}"),components:{strong:Vn.createElement("strong",null)}});default:return(0,re._x)("Post cant be evaluated","text","nelio-content")}}(r);return Vn.createElement("div",{className:"nelio-content-quality-analysis-summary"},Vn.createElement("div",{className:"nelio-content-quality-analysis-summary__icon-wrapper"},Vn.createElement("div",{className:"nelio-content-quality-analysis-summary__icon nelio-content-quality-analysis-summary__icon--is-".concat(r)},"perfect"===r&&Vn.createElement(qn.Dashicon,{icon:"awards"}),"good"===r&&Vn.createElement(qn.Dashicon,{icon:"thumbs-up"}),"improvable"===r&&Vn.createElement(qn.Dashicon,{icon:"admin-tools"}),"bad"===r&&Vn.createElement(qn.Dashicon,{icon:"thumbs-down"}))),Vn.createElement("div",{className:"nelio-content-quality-analysis-summary__explanation"},t?Vn.createElement(qn.Button,{variant:"link",onClick:t},Vn.createElement("span",null,o)):Vn.createElement("span",null,o)))},po=function(e){var t=e.icon,n=e.name,r=(0,s.useSelect)((function(e){return e(d).getQualityCheckStatus(n)})),o=(0,s.useSelect)((function(e){return e(d).getQualityCheckRationale(n)}));return"invisible"===r?null:Vn.createElement("div",{className:"nelio-content-quality-analysis__quality-check"},Vn.createElement("div",{className:"nelio-content-quality-analysis__quality-check-icon-wrapper"},Vn.createElement("div",{className:"nelio-content-quality-analysis__quality-check-icon nelio-content-quality-analysis__quality-check-icon--is-".concat(r)},Vn.createElement(qn.Dashicon,{icon:t}))),Vn.createElement("div",{className:"nelio-content-quality-analysis__quality-check-rationale nelio-content-quality-analysis__quality-check-rationale--is-".concat(r)},o))},go=function(e){var t=e.isMetabox,n=_o()[0],r=vo();return Vn.createElement("div",{className:"nelio-content-quality-analysis"},Vn.createElement(Eo,{enabled:!!t}),n&&Vn.createElement("div",{className:"nelio-content-quality-analysis__details"},r.map((function(e){var t=e.name,n=e.icon;return Vn.createElement(po,{key:t,name:t,icon:n})}))))},Eo=function(e){var t=e.enabled,n=ho(),r=_o(),o=r[0],i=r[1];return t?Vn.createElement("div",{className:"nelio-content-quality-analysis__summary"},Vn.createElement("div",{className:"nelio-content-quality-analysis__actual-summary"},Vn.createElement(fo,null)),n&&Vn.createElement(qn.Button,{className:"nelio-content-quality-analysis__details-toggler",isSmall:!0,onClick:function(){return i(!o)}},Vn.createElement(qn.Dashicon,{icon:o?"arrow-up":"arrow-down"}))):null},ho=function(){return(0,s.useSelect)((function(e){return e(d).isQualityAnalysisFullyIntegrated()}))},vo=function(){return(0,s.useSelect)((function(e){return e(d).getQualityCheckTypes()}))},_o=function(){var e="post-quality-analysis",t=ho(),n=(0,s.useSelect)((function(t){return t(d).isPanelOpen(e)})),r=!t||n,o=(0,s.useDispatch)(d).togglePanel;return[r,function(t){return o(e,t)}]},yo=function(e){var t=e.children,n=e.icon,r=e.title,o=e.titleActions,i=e.type;return Vn.createElement("div",{className:"nelio-content-social-media-metabox__section"},Vn.createElement("div",{className:"nelio-content-social-media-metabox__section-title"},Vn.createElement(qn.Dashicon,{icon:n}),r,!!o&&o),Vn.createElement("div",{className:"nelio-content-social-media-metabox__section-content nelio-content-social-media-metabox__section-content--is-".concat(i)},t))},So=function(){var e=(0,s.useSelect)((function(e){return e(Bt.STORE_NAME).isAnalyticsEnabled()})),t=(0,s.useSelect)((function(e){var t;return"publish"===(null===(t=e(d).getPost())||void 0===t?void 0:t.status)})),n=(0,s.useSelect)((function(e){return e(d).getPostId()}));return n&&t&&e?Vn.createElement(yo,{icon:"chart-bar",title:(0,re._x)("Analytics","text","nelio-content"),type:"analytics"},Vn.createElement(er.PostPageviewsAnalytics,{postId:n}),Vn.createElement(er.PostEngagementAnalytics,{postId:n})):null},To=function(){return(0,s.useSelect)((function(e){var t=e(d).getPost();return e(Bt.STORE_NAME).getPostAutomationGroups(t).some((function(e){return!!e.priority&&(0,c.values)(e.profileSettings).some((function(e){return e.enabled&&(e.publication.enabled||e.reshare.enabled)}))}))}))},bo=function(){return(0,s.useSelect)((function(e){var t=e(d),n=t.getPost,r=t.isTimelineBusy,o=e(Bt.STORE_NAME).canCurrentUserUseAutomationsInPost;return!r()&&o(n())}))},Ao=function(){return(0,s.useSelect)((function(e){var t=e(d).getPost(),n=e(d).isTimelineBusy,r=e(Bt.STORE_NAME).canCurrentUserCreateMessagesRelatedToPost;return!n()&&r(t)}))},xo=function(e){var t=e.isSmall,n=ko(),r=bo(),o=(0,s.useDispatch)(d).clearTimeline;return Vn.createElement(er.DeleteButton,{isSmall:t,disabled:!r,onClick:o,isDeleting:n,labels:{delete:(0,re._x)("Clear Timeline","command","nelio-content"),deleting:(0,re._x)("Clearing Timeline","text","nelio-content")},confirmationLabels:{title:(0,re._x)("Clear Timeline","text","nelio-content"),text:(0,re._x)("Are you sure you want to clear your timeline? This operation cant be undone and youll lose any manual messages you might have created.","user","nelio-content")}})},ko=function(){return(0,s.useSelect)((function(e){return e(d).isClearingTimeline()}))},Ro=function(e){var t=e.enabled,n=To(),r=bo(),o=(0,s.useSelect)((function(e){return e(d).isGeneratingTimeline()})),i=(0,s.useDispatch)(d).savePostAndGenerateTimeline;return t?Vn.createElement(Vn.Fragment,null,n&&Vn.createElement(qn.Button,{isSmall:!0,variant:"secondary",isBusy:o,disabled:!r,onClick:i},o?(0,re._x)("Generating Timeline","text","nelio-content"):(0,re._x)("Regenerate Timeline","command","nelio-content")),Vn.createElement(xo,{isSmall:!0})):null};const No=window.NelioContent.socialMessageEditor;var Io=(0,Bt.withProfileCheck)((function(){var e=wo(),t=Oo(),n=Ao(),r=To(),o=bo(),i=(0,s.useDispatch)(d).savePostAndGenerateTimeline,a=(0,s.useSelect)((function(e){return e(d).getPost()})),l=(0,s.useDispatch)(No.STORE_NAME).openNewSocialMessageEditor;return Vn.createElement("div",{className:"nelio-content-generate-timeline-button"},Vn.createElement(er.SubscribeWithCouponButton,{className:"nelio-content-generate-timeline-button__promo-button"}),r&&Vn.createElement("div",{className:"nelio-content-generate-timeline-button__timeline-button"},Vn.createElement(qn.Button,{variant:"primary",isBusy:e,disabled:!o,onClick:i},t)),Vn.createElement("div",{className:"nelio-content-generate-timeline-button__single-button"},Vn.createElement(qn.Button,{variant:r?"link":"primary",disabled:!n,onClick:function(){return l({},{context:"post",post:a,disabledProfileIds:an()})}},(0,re._x)("Add Social Message","command","nelio-content"))))})),wo=function(){return(0,s.useSelect)((function(e){return e(d).isGeneratingTimeline()}))},Oo=function(){return(0,s.useSelect)((function(e){e(Bt.STORE_NAME);var t=e(d).getPost();if(!t)return"";var n=t.status,r=t.id,o=e(Bt.STORE_NAME).getSocialMessagesRelatedToPost(r).filter((function(e){return"publish"!==e.status})),i=e(d).isGeneratingTimeline;return(0,l.isEmpty)(o)?"publish"===n?i()?(0,re._x)("Filling Timeline","text","nelio-content"):(0,re._x)("Fill Timeline","command","nelio-content"):(0,e(d).isAutoShareEnabled)()?i()?(0,re._x)("Loading Timeline","text","nelio-content"):(0,re._x)("Customize Timeline","command","nelio-content"):i()?(0,re._x)("Generating Timeline","text","nelio-content"):(0,re._x)("Generate Timeline","command","nelio-content"):i()?(0,re._x)("Generating Timeline","text","nelio-content"):(0,re._x)("Regenerate Timeline","command","nelio-content")}))},Co=function(e,t){switch(e){case"day":return t<1;case"week":return 1<=t&&t<=10;case"month":return 10<t&&t<=40;default:return 40<t}};const Mo=window.NelioContent.networks;var Po=function(e){var t,n=e.disabled,r=e.isBeingDeleted,o=e.message,i=function(e){return(0,s.useSelect)((function(t){return!t(d).isTimelineBusy()&&t(Bt.STORE_NAME).canCurrentUserDeleteSocialMessage(e)}))}(o),a=function(e){return(0,s.useSelect)((function(t){return!t(d).isTimelineBusy()&&t(Bt.STORE_NAME).canCurrentUserEditSocialMessage(e)}))}(o),c=Do(o),u=(0,s.useDispatch)(d).deleteSocialMessage,m=!["error","publish"].includes(null!==(t=null==o?void 0:o.status)&&void 0!==t?t:""),f=(0,re._x)("View","command","nelio-content"),p=(0,l.isRecurringMessage)(o)?(0,re._x)("Edit All","command (all recurring messages)","nelio-content"):(0,re._x)("Edit","command","nelio-content");return Vn.createElement("div",{className:Xn()({"nelio-content-social-message__actions":!0,"nelio-content-social-message__actions--is-deleting":r})},!r&&Vn.createElement(Vn.Fragment,null,Vn.createElement(qn.Button,{variant:"link",disabled:!a||!!n,onClick:c},m?p:f),Vn.createElement("span",null,"|")),Vn.createElement(er.DeleteButton,{isDeleting:r,onClick:function(){(null==o?void 0:o.id)&&u(o.id)},disabled:!i||!!n,labels:{delete:(0,l.isRecurringMessage)(o)?(0,re._x)("Delete All","command (all recurring messages)","nelio-content"):(0,re._x)("Delete","command","nelio-content"),deleting:(0,re._x)("Deleting","text","nelio-content")},confirmationLabels:{title:(0,l.isRecurringMessage)(o)?(0,re._x)("Delete Recurring Social Message","text","nelio-content"):(0,re._x)("Delete Social Message","text","nelio-content"),text:(0,l.isRecurringMessage)(o)?(0,re._x)("Are you sure you want to delete this recurring social message and all its following instances? This operation cant be undone.","user","nelio-content"):(0,re._x)("Are you sure you want to delete this social message? This operation cant be undone.","user","nelio-content")}}))},Do=function(e){var t=(0,s.useSelect)((function(e){return e(d).getPost()})),n=(0,s.useDispatch)(No.STORE_NAME).openSocialMessageEditor;return function(){e&&n(e,{context:"post",post:t})}},Lo=function(e){var t=e.network,n=e.text,r=e.isIndented,o=(0,s.useSelect)((function(e){return e(d).getPost()})),i=(0,l.computeSocialMessageText)((0,Mo.getCharLimitInNetwork)(t),o,n);return Vn.createElement("div",{className:Xn()({"nelio-content-social-message__content-wrapper":!0,"nelio-content-social-message__content-wrapper--is-indented":r})},Vn.createElement(er.SocialMessageTextPreview,{className:"nelio-content-social-message__actual-content",placeholder:"",linkBeautifier:function(e){if(-1===(e=e.replace(/^https?:\/\//i,"")).indexOf("/"))return e;var t=e.replace(/^[^/]*\//,"");if(t.length<=10)return e;var n=e.replace(/\/.*$/,"");return"".concat(n,"/").concat(t.substring(0,9),"")},value:i}))},Fo=function(e){var t=e.isBeingDeleted,n=e.isIndented,r=e.source,o=Uo(e);return Vn.createElement("div",{className:Xn()({"nelio-content-social-message__date":!0,"nelio-content-social-message__date--is-indented":n,"nelio-content-social-message__date--is-deleting":t})},"reshare-template"===r&&Vn.createElement(qn.Dashicon,{icon:"share-alt"}),"publication-template"===r&&Vn.createElement(qn.Dashicon,{icon:"megaphone"}),["user-highlight","custom-sentence"].includes(r)&&Vn.createElement(qn.Dashicon,{icon:"editor-quote"}),"auto-extracted-sentence"===r&&Vn.createElement(qn.Dashicon,{icon:"format-status"}),o)},Uo=function(e){return(0,s.useSelect)((function(t){var n=t(d).getStatus,r=e.dateType,o=e.schedule;if("publish"===n()||"exact"===r)return(0,tr.dateI18n)((0,tr.getSettings)().formats.datetime,o);var i=e.dateValue,a=e.timeType,s=e.timeValue;if("0"===i){if("exact"===a)return s;if("0"===s)return(0,re._x)("Same time as publication","text","nelio-content");var l=Math.abs(Number.parseInt(s))||0;return(0,re.sprintf)(/* translators: number of hours */
(0,re._nx)("%d hour after publication","%d hours after publication",l,"text","nelio-content"),l)}var c=Math.abs(Number.parseInt(i))||0;return(0,re.sprintf)(/* translators: 1 -> number of days, 2 -> time */
(0,re._nx)("%1$d day after publication at %2$s","%1$d days after publication at %2$s",c,"text","nelio-content"),c,s)}))},Bo=function(e){var t=e.messageId,n=e.isIndented,r=Qo(t);return r?Vn.createElement("div",{className:Xn()({"nelio-content-social-message__recurrence":!0,"nelio-content-social-message__recurrence--is-indented":n})},Vn.createElement(qn.Dashicon,{icon:"controls-repeat"}),r):null},Go={period:"day",occurrences:2,interval:1},Qo=function(e){var t,n=(0,s.useSelect)((function(t){return{message:t(Bt.STORE_NAME).getSocialMessage(e),today:t(Bt.STORE_NAME).getToday()}})),r=n.message,o=n.today,i=(0,Bt.useRecurrenceSummary)((0,l.createRecurrenceContext)((null==r?void 0:r.schedule)||o),null!==(t=null==r?void 0:r.recurrenceSettings)&&void 0!==t?t:Go);return(null==r?void 0:r.recurrenceSettings)?i:void 0},jo=function(e){var t=Vo(e);return Vn.createElement("div",{className:"nelio-content-social-message__location"},t)},Vo=function(e){return(0,s.useSelect)((function(t){var n,r=e.network,o=e.profileId,i=e.targetName,a=(0,t(Bt.STORE_NAME).getSocialProfile)(o),s=(null==a?void 0:a.displayName)||(0,re._x)("Unknown","text","nelio-content");if(!i||!(0,Mo.doesNetworkSupport)("multi-target",r))return Vn.createElement("strong",null,s);var c=(0,t(Bt.STORE_NAME).getProfileTarget)(o,i),u=null!==(n=null==c?void 0:c.displayName)&&void 0!==n?n:"";return(0,l.isEmpty)(u)?Vn.createElement("strong",null,s):mo({mixedString:(0,re.sprintf)(/* translators: 1 -> profile name, 2 -> target name */
(0,re._x)("%1$s on %2$s","text","nelio-content"),"{{strong}}".concat(s,"{{/strong}}"),"{{em}}".concat(u,"{{/em}}")),components:{strong:Vn.createElement("strong",null),em:Vn.createElement("em",null)}})}))},Ko=function(e){var t=e.messageId,n=e.isInMetabox,r=(0,s.useSelect)((function(e){return e(Bt.STORE_NAME).getSocialMessage(t)})),o=(0,s.useSelect)((function(e){return e(d).isClearingTimeline()})),i=(0,s.useSelect)((function(e){return e(d).isSocialMessageBeingDeleted(t)}));if(!r)return null;var a=r.auto,l=r.dateType,c=r.dateValue,u=r.id,m=r.isFreePreview,f=r.network,p=r.profileId,g=r.schedule,E=r.source,h=r.status,v=r.targetName,_=r.text,y=r.timeType,S=r.timeValue,T=r.type,b="error"===h,A="image"===T||"auto-image"===T,x="video"===T;return Vn.createElement("div",{className:Xn()({"nelio-content-social-message":!0,"nelio-content-social-message--is-auto":!!a,"nelio-content-social-message--is-error":b,"nelio-content-social-message--is-free-preview":m}),"data-social-message-id":u,"data-upgrade-to-unlock":m?(0,re._x)("Upgrade to Unlock","user","nelio-content"):void 0},A&&Vn.createElement(qn.Dashicon,{className:"nelio-content-social-message__image-type-icon",icon:"format-image"}),x&&Vn.createElement(qn.Dashicon,{className:"nelio-content-social-message__video-type-icon",icon:"video-alt2"}),Vn.createElement("div",{className:"nelio-content-social-message__profile-and-location"},Vn.createElement(er.SocialProfileIcon,{className:"nelio-content-social-message__profile-icon",profileId:p}),Vn.createElement(jo,{network:f,profileId:p,targetName:v})),Vn.createElement(Lo,{isIndented:n,network:f,text:(0,Mo.doesNetworkSupport)("text",f)?_:""}),Vn.createElement(Bo,{messageId:t,isIndented:!!n}),Vn.createElement(Fo,{isIndented:!!n,isBeingDeleted:i,dateType:l,dateValue:c,schedule:g,timeType:y,timeValue:S,source:E}),Vn.createElement(Po,{disabled:o,isBeingDeleted:i,message:r}))},qo=function(e){var t=e.isInMetabox,n=e.period,r=Yo(n),o=(0,Bt.useAdminUrl)("admin.php",{page:"nelio-content-account"}),i=Ao(),a=(0,Bt.useIsSubscribed)(),s=Ho(n);return Vn.createElement("div",{className:"nelio-content-social-media-timeline-period__period-content"},!(0,l.isEmpty)(r)&&Vn.createElement("div",{className:"nelio-content-social-media-timeline-period__messages"},r.map((function(e){return Vn.createElement(Ko,{key:e,messageId:e,isInMetabox:t})}))),Vn.createElement("div",{className:"nelio-content-social-media-timeline-period__add-button-wrapper"},a||"day"===n?Vn.createElement(qn.Button,{className:"nelio-content-social-media-timeline-period__add-button",variant:"secondary",isSmall:!0,onClick:s,disabled:!i},(0,re._x)("Add Social Message","command","nelio-content")):Vn.createElement(qn.ExternalLink,{href:o},(0,re._x)("Upgrade to Premium","command","nelio-content"))))},Yo=function(e){return(0,s.useSelect)((function(t){if(!(0,t(d).isPostReady)())return[];var n=(0,t(d).getPost)(),r=(0,t(Bt.STORE_NAME).getSocialMessagesRelatedToPost)(n.id).filter((function(e){return"publish"!==e.status})).filter((function(e,t,n){return!(0,l.isRecurringMessage)(e)||$o(n,e)})),o=t(Bt.STORE_NAME).getUtcNow,i="publish"===n.status?function(e,t){return function(n){var r=n.schedule,o=Math.abs(t.diff(r,"days"));return Co(e,o)}}(e,Zn()(o())):function(e){return function(t){var n=t.dateType,r=t.dateValue;if("exact"===n)return"other"===e;var o=Math.abs(Number.parseInt(r)||0);return Co(e,o)}}(e);return(0,c.map)((0,c.filter)(r,i),"id")}))},Ho=function(e){var t=function(e){switch(e){case"day":return{dateType:"predefined-offset",dateValue:"0"};case"week":return{dateType:"predefined-offset",dateValue:"7",timeType:"time-interval",timeValue:"morning"};case"month":return{dateType:"predefined-offset",dateValue:"28",timeType:"time-interval",timeValue:"morning"};default:return{dateType:"exact",timeType:"time-interval",timeValue:"morning"}}}(e),n=(0,s.useSelect)((function(e){return e(d).getPost()})),r=(0,s.useSelect)((function(e){return e(Bt.STORE_NAME).getProfilesWithMessagesRelatedToPost(null==n?void 0:n.id)})),o=(0,s.useDispatch)(No.STORE_NAME).openNewSocialMessageEditor;return function(){return o(t,{context:"post",post:n,disabledProfileIds:r})}},$o=function(e,t){var n=e.filter((function(e){return e.recurrenceGroup===t.recurrenceGroup}));return(0,c.sortBy)(n,"schedule")[0]===t},Wo=function(e){var t=e.isInMetabox,n=e.period,r=zo(n);return Vn.createElement("div",{className:"nelio-content-social-media-timeline-period"},Vn.createElement("div",{className:"nelio-content-social-media-timeline-period__title"},r),Vn.createElement(qo,{period:n,isInMetabox:t}))},zo=function(e){return(0,s.useSelect)((function(t){var n,r=null===(n=t(d).getPost())||void 0===n?void 0:n.status;switch(e){case"day":return"publish"===r?(0,re._x)("Today","text","nelio-content"):(0,re._x)("Publication Day","text","nelio-content");case"week":return(0,re._x)("Week","text","nelio-content");case"month":return(0,re._x)("Month","text","nelio-content");case"other":return(0,re._x)("Other","text","nelio-content")}}))},Xo=function(){var e=(0,s.useSelect)((function(e){return!!e(Bt.STORE_NAME).getSocialProfileCount()})),t=Jo();return Vn.createElement(yo,{icon:"share",title:(0,re._x)("Timeline","text","nelio-content"),titleActions:Vn.createElement(Ro,{enabled:e&&t}),type:"timeline"},t?Vn.createElement(Vn.Fragment,null,Vn.createElement(Wo,{isInMetabox:!0,period:"day"}),Vn.createElement(Wo,{isInMetabox:!0,period:"week"}),Vn.createElement(Wo,{isInMetabox:!0,period:"month"}),Vn.createElement(Wo,{isInMetabox:!0,period:"other"})):Vn.createElement(Io,null))},Jo=function(){return(0,s.useSelect)((function(e){var t=e(d).getPostId,n=(0,e(Bt.STORE_NAME).getSocialMessagesRelatedToPost)(t());return!!(0,c.find)(n,(function(e){return"publish"!==e.status}))}))},Zo=function(){var e=bo(),t=ni(),n=t[0],r=t[1],o=ai(),i=o[0],a=o[1],s=li();return Vn.createElement("div",{className:"nelio-content-automation-settings"},Vn.createElement(qn.CheckboxControl,{label:(0,re._x)("Auto share on social media","command","nelio-content"),disabled:!e,checked:n,onChange:r}),n&&Vn.createElement(Vn.Fragment,null,Vn.createElement(qn.SelectControl,{disabled:!e,value:i,onChange:a,options:s}),Vn.createElement(ti,null),Vn.createElement(ei,null)))},ei=function(){var e=bo(),t=ri(),n=t[0],r=t[1],o=oi(),i=o[0],a=o[1];return Vn.createElement("div",{className:"nelio-content-automation-settings__automation-sources"},Vn.createElement(qn.CheckboxControl,{label:(0,re._x)("Custom highlights","text","nelio-content"),disabled:!e,checked:n,onChange:function(e){return r(e)}}),n&&Vn.createElement(qn.TextareaControl,{help:(0,re._x)("Please write one highlight per line.","user","nelio-content"),disabled:!e,value:i.join("\n"),onChange:a}))},ti=function(){var e=To(),t=si(),n=(0,Bt.useAdminUrl)("admin.php",{page:"nelio-content-settings",tab:"automations"});return t?Vn.createElement("div",{className:"nelio-content-automation-settings__warning"},(0,re.sprintf)(/* translators: date */
(0,re._x)("Warning! Nelio Content will not share any more social messages automatically, because auto sharing was set to end on %s.","text","nelio-content"),t)):e?null:Vn.createElement("div",{className:"nelio-content-automation-settings__warning"},mo({mixedString:(0,re._x)("Warning! None of your automation groups can share this content. Nelio Content will not be able to automatically create any social messages until you <a>update your settings</a> and refresh.","user","nelio-content").replace("<a>","{{a}}").replace("</a>","{{/a}}"),components:{a:Vn.createElement(qn.ExternalLink,{href:n})}}))},ni=function(){return[(0,s.useSelect)((function(e){return e(d).isAutoShareEnabled()})),(0,s.useDispatch)(d).enableAutoShare]},ri=function(){return ii("useCustomSentences")},oi=function(){var e=(0,s.useSelect)((function(e){return e(d).getAutomationSources().customSentences})),t=(0,s.useDispatch)(d).setAutomationSources;return[e,function(e){return t({customSentences:e.split("\n")})}]},ii=function(e){var t=(0,s.useSelect)((function(t){return t(d).getAutomationSources()[e]})),n=(0,s.useDispatch)(d).setAutomationSources;return[t,function(t){var r;return n(((r={})[e]=t,r))}]},ai=function(){return[(0,s.useSelect)((function(e){return e(d).getAutoShareEndMode()})),(0,s.useDispatch)(d).setAutoShareEndMode]},si=function(){var e,t=ni()[0],n=ai()[0],r=(0,s.useSelect)((function(e){return e(Bt.STORE_NAME).getToday()})),o=(0,s.useSelect)((function(e){return e(d).getAutoShareEndModeDuration(n)})),i=(0,s.useSelect)((function(e){return e(d).getPost()}));if(!t)return!1;if(!o)return!1;if("publish"!==i.status)return!1;var a=Zn()((null==i?void 0:i.date)||void 0).add(o,"months");return(0,tr.dateI18n)("Y-m-d",a)<r&&(0,tr.dateI18n)((null===(e=(0,tr.getSettings)().formats)||void 0===e?void 0:e.date)||"Y-m-d",a)},li=function(){return(0,s.useSelect)((function(e){return e(d).getAutoShareEndModes()}))},ci=function(){return Vn.createElement(yo,{icon:"admin-settings",title:(0,re._x)("Automation Settings","text","nelio-content"),type:"settings"},Vn.createElement(Zo,null))},ui=(0,Kn.compose)(lr,cr("isRetrievingSocialMessages"))((function(){return Vn.createElement(qn.SlotFillProvider,null,Vn.createElement("div",{className:"nelio-content-social-media-metabox"},Vn.createElement(So,null),Vn.createElement(Xo,null),Vn.createElement(ci,null)),Vn.createElement(qn.Popover.Slot,null))})),di=function(){var e=mi(),t=(0,s.useDispatch)("core/edit-post").openGeneralSidebar;return Vn.createElement("div",{className:"nelio-content-social-media-publish-summary"},Vn.createElement("div",{className:"nelio-content-social-media-publish-summary__icon"},Vn.createElement(qn.Dashicon,{icon:"share"})),Vn.createElement("div",{className:"nelio-content-social-media-publish-summary__button"},Vn.createElement(qn.Button,{variant:"link",onClick:function(){return t("nelio-content/nelio-content-social-sidebar")}},e)))},mi=function(){return(0,s.useSelect)((function(e){var t=e(d).getPost,n=e(Bt.STORE_NAME).getSocialMessagesRelatedToPost,r=t()||{},o=r.status,i=n(r.id);if("publish"===o&&(0,l.isEmpty)(i))return(0,re._x)("Share on social media","command","nelio-content");if((0,l.isEmpty)(i))return(0,e(d).isAutoShareEnabled)()?(0,re._x)("Customize social messages","command","nelio-content"):(0,re._x)("Share on social media","command","nelio-content");var a=i.filter((function(e){return"publish"!==e.status})),s=a.length;return(0,re.sprintf)(/* translators: number of social messages */
(0,re._nx)("%d social message ready","%d social messages ready",s,"text","nelio-content"),s)}))},fi=function(){return Vn.createElement(qn.PanelBody,{className:"nelio-content-social-media-sidebar-main-panel"},Vn.createElement(qn.PanelRow,{className:"nelio-content-social-media-sidebar-main-panel__buttons"},Vn.createElement(Io,null)))},pi=function(){return gi()?Vn.createElement(qn.PanelBody,{className:"nelio-content-sidebar-periods",title:(0,re._x)("Social Timeline","text","nelio-content")},Vn.createElement(Wo,{period:"day"}),Vn.createElement(Wo,{period:"week"}),Vn.createElement(Wo,{period:"month"}),Vn.createElement(Wo,{period:"other"}),Vn.createElement("div",{className:"nelio-content-sidebar-periods__clear-button"},Vn.createElement(xo,null))):null},gi=function(){return(0,s.useSelect)((function(e){var t=e(d).getPostId,n=(0,e(Bt.STORE_NAME).getSocialMessagesRelatedToPost)(t());return!!(0,c.find)(n,(function(e){return"publish"!==e.status}))}))},Ei=function(){return Vn.createElement(qn.PanelBody,{title:(0,re._x)("Automation Settings","text","nelio-content")},Vn.createElement(Zo,null))},hi=function(){var e=(0,s.useSelect)((function(e){return e(d).isPostReady()})),t=(0,s.useSelect)((function(e){return e(d).isRetrievingSocialMessages()}));return e?t?Vn.createElement(qn.PanelBody,null,(0,re._x)("Loading","text","nelio-content")):Vn.createElement(Vn.Fragment,null,Vn.createElement(fi,null),Vn.createElement(pi,null),Vn.createElement(Ei,null)):Vn.createElement(qn.PanelBody,null,(0,re._x)("Please save post first to access this feature.","user","nelio-content"))},vi=(0,Kn.compose)(Bt.withProfileCheck,lr)((function(){var e=(0,s.useDispatch)("core/edit-post").openGeneralSidebar;return Vn.createElement("div",{className:"nelio-content-social-media-tools"},Vn.createElement("p",null,(0,re._x)("Nelio Content helps you share WordPress content on social media, so that you can reach a broader audience and engage with more people.","text","nelio-content")),Vn.createElement(qn.Button,{variant:"secondary",onClick:function(){return e("nelio-content/nelio-content-social-sidebar")}},(0,re._x)("View Social Timeline","command","nelio-content")))})),_i={};function yi(e){var t,n,r;void 0===e&&(e={});var o=(0,s.select)(d).getPostQualitySettings(),i={allowedBads:null!==(t=e.allowedBads)&&void 0!==t?t:o.allowedBads,allowedImprovables:null!==(n=e.allowedImprovables)&&void 0!==n?n:o.allowedImprovables,unacceptableImprovables:null!==(r=e.unacceptableImprovables)&&void 0!==r?r:o.unacceptableImprovables};(0,s.dispatch)(d).setPostQualitySettings(i)}function Si(e,t){var n=t.icon,r=t.interval,o=void 0===r?500:r,i=t.settings,a=void 0===i?{}:i,l=t.attributes,u=t.validate;if("string"==typeof e)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(e))if((0,s.select)(d).getQualityCheckType(e))console.error("Quality check ".concat(e," is already registered."));else if(n)if((0,c.isFunction)(l))if((0,c.isFunction)(u)){if(void 0!==o&&a){var m={name:e,icon:n,interval:o,settings:a,attributes:l,validate:u};return(0,s.dispatch)(d).addQualityCheckType(m),function(e,t){t=Math.max(t,500);var n=(0,c.throttle)((function(){var t=(0,(0,s.select)(d).getQualityCheckType)(e);if(t){var n=_i[e];if(n){var r,o=n.prevAttributes,i=n.prevSettings,a=t.settings;try{r=t.attributes(s.select)}catch(e){return void console.error(e)}if(n.prevAttributes=r,n.prevSettings=a,!(0,c.isEqual)(o,r)||i!==a)try{var l=t.validate(r,a)||{},u=l.status,m=void 0===u?"unknown":u,f=l.text,p=void 0===f?(0,re._x)("Unknown status","text","nelio-content"):f;(0,(0,s.dispatch)(d).updateQualityCheckItem)(e,m,p)}catch(e){console.error(e)}}}}),t);_i[e]={unsubscribe:(0,s.subscribe)(n),prevAttributes:{},prevSettings:{}},n()}(e,m.interval),m}}else console.error("The validate property must be a valid function.");else console.error("The attributes property must be a valid function.");else console.error("Quality check ".concat(e," must have an icon."));else console.error("Quality check names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-quality-check");else console.error("Quality check names must be strings.")}function Ti(e){!function(e){var t;null===(t=_i[e])||void 0===t||t.unsubscribe(),delete _i[e]}(e),(0,s.dispatch)(d).removeQualityCheckType(e)}function bi(e,t){(0,s.select)(d).getQualityCheckType(e)&&(0,s.dispatch)(d).updateQualityCheckSettings(e,t)}Si("nelio-content/yoast-seo",{icon:"book",attributes:function(e){var t;try{var n=e("yoast-seo/editor").getFocusKeyphrase;if(!(null==n?void 0:n()))return{status:"unknown",text:(0,re._x)("Yoast SEO score is not available","text","nelio-content")};var r=e("yoast-seo/editor").getResultsForFocusKeyword,o=null==r?void 0:r(),i=null!==(t=null==o?void 0:o.overallScore)&&void 0!==t?t:0;return i<40?{status:"bad",text:(0,re._x)("Address your Yoast SEO score","user","nelio-content")}:i<70?{status:"improvable",text:(0,re._x)("Improve Yoast SEO score","user","nelio-content")}:{status:"good",text:(0,re._x)("Yoast SEO looks good","user","nelio-content")}}catch(e){return{status:"unknown",text:(0,re._x)("Unable to retrieve Yoast SEO score","text","nelio-content")}}},validate:function(e){return e}}),Si("nelio-content/yoast-content",{icon:"chart-bar",attributes:function(e){var t;try{var n=e("yoast-seo/editor").getReadabilityResults,r=null==n?void 0:n(),o=null!==(t=null==r?void 0:r.overallScore)&&void 0!==t?t:0;return o<40?{status:"bad",text:(0,re._x)("According to Yoast, content needs improvement","text","nelio-content")}:o<70?{status:"improvable",text:(0,re._x)("According to Yoast, content is OK","text","nelio-content")}:{status:"good",text:(0,re._x)("According to Yoast, content is good","text","nelio-content")}}catch(e){return{status:"unknown",text:(0,re._x)("Unable to retrieve Yoast Content Analysis","text","nelio-content")}}},validate:function(e){return e}}),Si("nelio-content/social-messages",{icon:"share",settings:{isNoProfilesBad:!0,isAllProfilesEmptyBad:!0,isSomeProfilesEmptyBad:!1},attributes:function(e){var t=e(d),n=e(Bt.STORE_NAME),r=t.getAutomationSources(),o=t.isAutoShareEnabled(),i=t.getContent().includes("<ncshare>")||r.useCustomSentences;return{isPostAutoShareable:o&&i,isPublished:"publish"===t.getStatus(),hasImages:!!t.getImages().length||!!t.getFeaturedImageSrc(),messages:n.getSocialMessagesRelatedToPost(t.getPostId()),profiles:n.getSocialProfiles()}},validate:function(e,t){var n=e.isPostAutoShareable,r=e.isPublished,o=e.hasImages,i=e.messages,a=e.profiles,s=t.isNoProfilesBad,c=t.isAllProfilesEmptyBad,u=t.isSomeProfilesEmptyBad;return r?{status:"good",text:(0,re._x)("Social messages look good","text","nelio-content")}:(0,l.isEmpty)(a)?{status:s?"bad":"improvable",text:(0,re._x)("Connect some profiles to share this on social media","user","nelio-content")}:(a=a.filter(Ai),(0,l.isEmpty)(a)?{status:"improvable",text:(0,re._x)("Connect non-TikTok profiles to promote this on social media","user","nelio-content")}:(0,l.isEmpty)(i)?n&&a.every((function(e){return!!e.publicationFrequency}))?!o&&a.every((function(e){return(0,Mo.doesNetworkRequire)("image",e.network)}))?{status:c?"bad":"improvable",text:(0,re._x)("Social messages cant be auto-generated because all profiles require an image","text","nelio-content")}:!o&&a.some((function(e){return(0,Mo.doesNetworkRequire)("image",e.network)}))?{status:u?"bad":"improvable",text:(0,re._x)("Some profiles require an image and their social messages cant be auto-generated","text","nelio-content")}:{status:"good",text:(0,re._x)("Automatic social messages look good","text","nelio-content")}:{status:c?"bad":"improvable",text:(0,re._x)("Schedule social messages on all profiles","user","nelio-content")}:a.every((function(e){return i.some((function(t){return t.profileId===e.id}))}))?{status:"good",text:(0,re._x)("Social messages look good","text","nelio-content")}:{status:u?"bad":"improvable",text:(0,re._x)("Schedule social messages on all profiles","user","nelio-content")})}});var Ai=function(e){return"tiktok"!==e.network};Si("nelio-content/editorial-tasks",{icon:"flag",settings:{useBadStatus:!0},attributes:function(e){var t=e(d).getPostId;return{tasks:(0,e(Bt.STORE_NAME).getTasksRelatedToPost)(t())}},validate:function(e,t){var n=e.tasks,r=t.useBadStatus,o=n.filter((function(e){return!e.completed}));return(0,l.isEmpty)(o)?{status:"good",text:(0,re._x)("There are no pending tasks","text","nelio-content")}:{status:r?"bad":"improvable",text:(0,re._x)("Complete all tasks","user","nelio-content")}}}),Si("nelio-content/featured-image",{icon:"format-image",settings:{useBadStatus:!0,canImageBeAutoSet:!1},attributes:function(e){return{imageSrc:(0,e(d).getFeaturedImageSrc)()}},validate:function(e,t){var n=e.imageSrc,r=t.canImageBeAutoSet,o=t.useBadStatus,i=!(0,l.isEmpty)(n);return r||i?{status:"good",text:i?(0,re._x)("Theres a featured image","text","nelio-content"):(0,re._x)("Automatic featured image","text","nelio-content")}:{status:o?"bad":"improvable",text:(0,re._x)("Set a featured image","user","nelio-content")}}}),Si("nelio-content/content-length",{icon:"edit",interval:2e3,settings:{improvableThreshold:700,goodThreshold:1e3},attributes:function(e){return{content:(0,e(d).getContent)()}},validate:function(e,t){var n=e.content,r=t.improvableThreshold,o=t.goodThreshold,i=function(e){return void 0===e&&(e=""),(e=(e=e.replace(/<[^>]*>/g,"")).replace(/\s+/g," ")).split(" ").length}(n);return i<r?{status:"bad",text:(0,re._x)("Write a longer copy","user","nelio-content")}:i<o?{status:"improvable",text:(0,re._x)("Write a longer copy","user","nelio-content")}:{status:"good",text:(0,re._x)("Copy length looks good","text","nelio-content")}}}),Si("nelio-content/internal-links",{icon:"admin-links",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{content:(0,e(d).getContent)()}},validate:function(e,t){var n=e.content,r=(0,l.getLinks)(n).filter(l.isInternalUrl),o=t.improvableThreshold,i=t.goodThreshold,a=i-r.length;return(0,l.isEmpty)(r)?{status:r.length<o?"bad":"improvable",text:(0,re.sprintf)(/* translators: number of links */
(0,re._nx)("Add %d link to your own site","Add %d links to your own site",a,"user","nelio-content"),a)}:r.length<i?{status:r.length<o?"bad":"improvable",text:(0,re.sprintf)(/* translators: number of links */
(0,re._nx)("Add %d more link to your own site","Add %d more links to your own site",a,"user","nelio-content"),a)}:{status:"good",text:(0,re._x)("Links to your own site look good","text","nelio-content")}}}),Si("nelio-content/external-links",{icon:"external",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{content:(0,e(d).getContent)()}},validate:function(e,t){var n=e.content,r=(0,l.getLinks)(n).filter(l.isExternalUrl),o=t.improvableThreshold,i=t.goodThreshold,a=i-r.length;return(0,l.isEmpty)(r)?{status:r.length<o?"bad":"improvable",text:(0,re.sprintf)(/* translators: number of links */
(0,re._nx)("Add %d link to an external source","Add %d links to external sources",a,"user","nelio-content"),a)}:r.length<i?{status:r.length<o?"bad":"improvable",text:(0,re.sprintf)(/* translators: number of links */
(0,re._nx)("Add %d more link to an external source","Add %d more links to external sources",a,"user","nelio-content"),a)}:{status:"good",text:(0,re._x)("Links to external sources look good","text","nelio-content")}}}),Si("nelio-content/content-images",{icon:"images-alt",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{images:(0,e(d).getImages)()}},validate:function(e,t){var n=e.images,r=t.improvableThreshold,o=t.goodThreshold,i=o-n.length;return(0,l.isEmpty)(n)?{status:n.length<r?"bad":"improvable",text:(0,re.sprintf)(/* translators: number of images */
(0,re._nx)("Add %d image in your copy","Add %d images in your copy",i,"user","nelio-content"),i)}:n.length<o?{status:n.length<r?"bad":"improvable",text:(0,re.sprintf)(/* translators: number of images */
(0,re._nx)("Add %d more image in your copy","Add %d more images in your copy",i,"user","nelio-content"),i)}:{status:"good",text:(0,re._x)("Image count looks good","text","nelio-content")}}}),Si("nelio-content/author",{icon:"admin-users",settings:{useBadStatus:!1},attributes:function(e){var t=e(d).getAuthorId,n=(0,e(Bt.STORE_NAME).getAuthor)(t());return{isAdmin:!!(null==n?void 0:n.isAdmin)}},validate:function(e,t){var n=e.isAdmin,r=t.useBadStatus;return n?{status:r?"bad":"improvable",text:(0,re._x)("Select a non-admin author","user","nelio-content")}:{status:"good",text:(0,re._x)("Valid author","text","nelio-content")}}}),Si("nelio-content/excerpt",{icon:"text",settings:{useBadStatus:!1},attributes:function(e){return{excerpt:(0,e(d).getExcerpt)()}},validate:function(e,t){var n=e.excerpt,r=t.useBadStatus;return(0,l.isEmpty)((0,c.trim)(n))?{status:r?"bad":"improvable",text:(0,re._x)("Write an excerpt","user","nelio-content")}:{status:"good",text:(0,re._x)("Excerpt looks good","text","nelio-content")}}});const xi=window.wp.coreData;var ki,Ri=null!==(ki=null===xi.store||void 0===xi.store?void 0:xi.store.name)&&void 0!==ki?ki:"core";Si("nelio-content/tags",{icon:"tag",settings:{useBadStatus:!0},attributes:function(e){var t,n=e(d),r=n.getPostType,o=n.getTerms,i=e(Ri).getTaxonomies,a=r(),s=(0,c.filter)(i({per_page:-1}),(function(e){return e.visibility.public&&e.types.includes(null!=a?a:"")})).map((function(e){return e.slug}));return{tags:null!==(t=o(l.TAG))&&void 0!==t?t:o(l.PROD_TAG),isActive:s.includes(l.TAG)||s.includes(l.PROD_TAG)}},validate:function(e,t){var n=e.tags,r=t.useBadStatus;return(0,l.isEmpty)(n)?{status:r?"bad":"improvable",text:(0,re._x)("Add one or more tags","user","nelio-content")}:{status:"good",text:(0,re._x)("Content is properly tagged","text","nelio-content")}}});var Ni=function(e){var t=(0,s.useSelect)((function(t){return t(d).isPanelOpen(e)})),n=(0,s.useDispatch)(d).togglePanel;return[t,function(){return n(e,!t)}]},Ii=function(){return(0,s.useSelect)((function(e){var t=e(d).getPost,n=e(Bt.STORE_NAME),r=n.isSubscribed,o=n.getProfilesWithMessagesRelatedToPost,i=t();return r()||!(null==i?void 0:i.id)?[]:o(i.id)}))}})();var o=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var i in r)o[i]=r[i];r.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();