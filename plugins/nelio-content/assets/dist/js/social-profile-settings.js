(()=>{var e={4184:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var l=i.apply(null,n);l&&e.push(l)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)o.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n.d(o,{initPage:()=>Be});var e={};n.r(e),n.d(e,{areThereProfilesBeingDeleted:()=>T,getConnectionDialog:()=>I,getEditingEmail:()=>P,getKindDialog:()=>x,getProfileIdInEmailEditor:()=>R,isProfileBeingDeleted:()=>M,isProfileListRefreshing:()=>C,isSavingEmail:()=>D});var t={};n.r(t),n.d(t,{closeEmailEditor:()=>j,closeKindSelectorDialog:()=>B,markAsBeingDeleted:()=>q,markAsDeleted:()=>W,markAsRefreshtingProfiles:()=>H,markAsSavingEmail:()=>F,openEmailEditor:()=>K,openKindSelectorDialog:()=>L,setEmail:()=>G});var i={};n.r(i),n.d(i,{closeConnectionDialog:()=>J,closeConnectionDialogAndRefresh:()=>Y,deleteProfile:()=>fe,openConnectionDialog:()=>V,refreshProfile:()=>X,refreshSocialProfiles:()=>de,saveEditingEmail:()=>ce});const r=window.wp.element,l=window.wp.i18n,a=window.NelioContent.components;var c=[{title:(0,l._x)("Settings - Social Profiles","text","nelio-content"),intro:(0,l._x)("Welcome to the Social Profiles Settings Screen. Here you can manage the social accounts you connected to Nelio Content and customize its auto-publication limits.","user","nelio-content")},{title:(0,l._x)("Available Networks","text","nelio-content"),intro:(0,l._x)("To connect new profiles, click on its social network and follow the on-screen instructions.","user","nelio-content"),element:function(){return document.querySelector(".nelio-content-profile-connectors")}},{title:(0,l._x)("Social Profiles","text","nelio-content"),intro:(0,l._x)("Here you can find all your connected profiles. Hover on each profile to reveal additional actions like, for example, re-authenticating or deleting a profile.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-profile-list .nelio-content-profile")},element:function(){return document.querySelector(".nelio-content-profile-list")}},{title:(0,l._x)("Social Profiles","text","nelio-content"),intro:(0,l._x)("You can also add a fallback email address for each profile. Nelio Content will use it to let the recipient know when a social message couldn’t be automatically shared, thus offering them the opportunity to manually share it.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-profile-list .nelio-content-profile")},element:function(){return document.querySelector(".nelio-content-profile-list")}},{title:(0,l._x)("Social Automations","text","nelio-content"),intro:(0,l._x)("In the Automations tab you’ll find all the options you need to customize how Nelio Content should share your WordPress content on social media, including how many social messages should be generated to do so.","user","nelio-content"),active:function(){return!!document.querySelector("#nelio-content-automations")},element:function(){return document.querySelector("#nelio-content-automations")}}];const s=window.wp.components,u=window.wp.data,f=window.NelioContent.data;var d=function(){var e=p(),t=e.count,n=e.total;return t?r.createElement("div",{className:"nelio-content-profile-section-title"},r.createElement("h2",null,(0,l._x)("Connected Profiles","text","nelio-content")),!!n&&r.createElement("span",{className:"nelio-content-profile-section-title__profile-count"},t,"/",n)):r.createElement("div",{className:"nelio-content-profile-section-title"},r.createElement("h2",null,(0,l._x)("Add Profiles","text","nelio-content")))},p=function(){return(0,u.useSelect)((function(e){var t=e(f.STORE_NAME),n=t.getSocialProfileCount,o=((0,t.getPluginLimits)()||{}).maxProfiles;return{count:n(),total:o===Number.POSITIVE_INFINITY?0:o}}))};const m=window.lodash,h=window.NelioContent.utils;var E=n(4184),v=n.n(E),g=function(e){var t=e.disabled,n=e.isUserAllowed,o=e.onClick;return r.createElement("div",{className:"nelio-content-profile__reauthenticate-action"},n?r.createElement(s.Button,{variant:"secondary",disabled:t,onClick:o},(0,l._x)("Re-Authenticate","command","nelio-content")):r.createElement(s.Tooltip,{position:"bottom center",text:(0,l._x)("Only the user who added this profile can re-authenticate it","user","nelio-content"),delay:0},r.createElement("span",{style:{opacity:.8}},(0,l._x)("Re-Authenticate","command","nelio-content"))))},y="nelio-content/profile-settings",_={connectionDialog:void 0,kindDialog:void 0},b={email:"",isSaving:!1,profileId:void 0},w={deleting:[],refreshing:[],isRefreshing:!1},S=function(){return S=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},S.apply(this,arguments)},N=function(){return N=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},N.apply(this,arguments)},k=function(){return k=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},k.apply(this,arguments)},A=function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};const O=(0,u.combineReducers)({connection:function(e,t){var n;return void 0===e&&(e=_),null!==(n=function(e,t){switch(t.type){case"OPEN_KIND_DIALOG_FOR_NETWORK":return S(S({},e),{kindDialog:t.network});case"CLOSE_KIND_DIALOG":return S(S({},e),{kindDialog:void 0});case"OPEN_CONNECTION_DIALOG":return S(S({},e),{connectionDialog:t.dialog});case"CLOSE_CONNECTION_DIALOG":return S(S({},e),{connectionDialog:void 0})}}(e,t))&&void 0!==n?n:e},emailEditor:function(e,t){var n;return void 0===e&&(e=b),null!==(n=function(e,t){switch(t.type){case"OPEN_EMAIL_EDITOR":return{email:t.email,isSaving:!1,profileId:t.profileId};case"CLOSE_EMAIL_EDITOR":return N(N({},e),{profileId:void 0});case"MARK_AS_SAVING_EMAIL":return N(N({},e),{isSaving:t.saving});case"SET_EMAIL":return N(N({},e),{email:t.email})}}(e,t))&&void 0!==n?n:e},profileList:function(e,t){var n;return void 0===e&&(e=w),null!==(n=function(e,t){switch(t.type){case"MARK_AS_BEING_DELETED":return k(k({},e),{deleting:A(A([],e.deleting,!0),[t.profileId],!1)});case"MARK_AS_DELETED":return k(k({},e),{deleting:(0,m.without)(e.deleting,t.profileId)});case"MARK_AS_REFRESHING_PROFILES":return k(k({},e),{isRefreshing:t.isRefreshing})}}(e,t))&&void 0!==n?n:e}});function x(e){return e.connection.kindDialog}function I(e){return e.connection.connectionDialog}function P(e){return e.emailEditor.email}function D(e){return e.emailEditor.isSaving}function R(e){return e.emailEditor.profileId}function C(e){return!!e.profileList.isRefreshing}function T(e){return!(0,h.isEmpty)(e.profileList.deleting)}function M(e,t){return e.profileList.deleting.includes(t)}function L(e){return{type:"OPEN_KIND_DIALOG_FOR_NETWORK",network:e}}function B(){return{type:"CLOSE_KIND_DIALOG"}}function K(e,t){return{type:"OPEN_EMAIL_EDITOR",profileId:e,email:t}}function j(){return{type:"CLOSE_EMAIL_EDITOR"}}function G(e){return{type:"SET_EMAIL",email:e}}function F(e){return{type:"MARK_AS_SAVING_EMAIL",saving:e}}function q(e){return{type:"MARK_AS_BEING_DELETED",profileId:e}}function W(e){return{type:"MARK_AS_DELETED",profileId:e}}function H(e){return{type:"MARK_AS_REFRESHING_PROFILES",isRefreshing:e}}const U=window.wp.url,$=window.NelioContent.networks;var z=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function l(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,a)}c((o=o.apply(e,t||[])).next())}))},Q=function(e,t){var n,o,i,r,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(l=0)),l;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,o=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!((i=(i=l.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){l.label=a[1];break}if(6===a[0]&&l.label<i[1]){l.label=i[1],i=a;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(a);break}i[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function V(e,t){return z(this,void 0,void 0,(function(){var n,o;return Q(this,(function(i){switch(i.label){case 0:return[4,ne()];case 1:return i.sent(),(0,u.select)(y).getConnectionDialog()?[2]:(n=(0,$.getDefaultPublicationValue)("buffer"===e?t:e),o=Z(e,t),[2,te((0,U.addQueryArgs)(o,{publicationFreq:n}))])}}))}))}function X(e){return z(this,void 0,void 0,(function(){var t,n,o,i;return Q(this,(function(r){switch(r.label){case 0:return[4,ne()];case 1:return r.sent(),(0,u.select)(y).getConnectionDialog()?[2]:(t=(0,u.select)(f.STORE_NAME).getSocialProfile(e))?(n=t.network,o=t.kind,i=t.isBuffer?Z("buffer",n):Z(n,o),[2,te((0,U.addQueryArgs)(i,{socialProfileId:e}))]):[2]}}))}))}function Y(){return z(this,void 0,void 0,(function(){var e;return Q(this,(function(t){switch(t.label){case 0:return[4,ne()];case 1:return t.sent(),(e=(0,u.select)(y).getConnectionDialog())?[4,(0,u.dispatch)(y).closeConnectionDialog(e)]:[2];case 2:return t.sent(),[4,(0,u.dispatch)(y).refreshSocialProfiles()];case 3:return t.sent(),[2]}}))}))}function J(e){return z(this,void 0,void 0,(function(){return Q(this,(function(t){switch(t.label){case 0:return[4,ne()];case 1:return t.sent(),e.close||e.close(),[2,{type:"CLOSE_CONNECTION_DIALOG"}]}}))}))}function Z(e,t){var n=(0,u.select)(f.STORE_NAME).getSiteId(),o=(0,u.select)(f.STORE_NAME).getApiRoot(),i=(0,u.select)(f.STORE_NAME).getCurrentUserId(),r=(0,u.select)(f.STORE_NAME).getSiteLanguage();if("buffer"===e)return(0,U.addQueryArgs)("".concat(o,"/connect/buffer"),{network:t,siteId:n,creatorId:i,lang:r});var l=ee(e,t),a=l.network,c=l.kind,s=c&&"single"!==c?"".concat(a,"/").concat(c):a;return(0,U.addQueryArgs)("".concat(o,"/connect/").concat(s),{siteId:n,creatorId:i,lang:r})}var ee=function(e,t){return"instagram"===e?{network:"facebook",kind:"instagram"}:{network:e,kind:t}};function te(e){var t=e.includes("telegram")?750:520,n=window.open(e,"","width=".concat(640,",height=").concat(t));if(n){var o=setInterval((function(){n.closed&&(clearInterval(o),(0,u.dispatch)(y).closeConnectionDialogAndRefresh())}),500);return{type:"OPEN_CONNECTION_DIALOG",dialog:n}}}function ne(){return new Promise((function(e){return e()}))}const oe=window.wp.apiFetch;var ie=n.n(oe),re=function(){return re=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},re.apply(this,arguments)},le=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function l(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,a)}c((o=o.apply(e,t||[])).next())}))},ae=function(e,t){var n,o,i,r,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(l=0)),l;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,o=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!((i=(i=l.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){l.label=a[1];break}if(6===a[0]&&l.label<i[1]){l.label=i[1],i=a;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(a);break}i[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function ce(){return le(this,void 0,void 0,(function(){var e,t,n,o,i,r,l;return ae(this,(function(a){switch(a.label){case 0:if(!(e=(0,u.select)(y).getProfileIdInEmailEditor()))return[2];if(!(t=(0,u.select)(f.STORE_NAME).getSocialProfile(e)))return[2];if((0,u.select)(y).isSavingEmail())return[2];(n=(0,u.dispatch)(y).markAsSavingEmail)(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),o=(0,u.select)(y).getEditingEmail(),i=(0,u.select)(f.STORE_NAME).getSiteId(),r=(0,u.select)(f.STORE_NAME).getApiRoot(),l=(0,u.select)(f.STORE_NAME).getAuthenticationToken(),[4,ie()({url:"".concat(r,"/site/").concat(i,"/profile/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(l)},data:{email:o}})];case 2:return a.sent(),(0,u.dispatch)(f.STORE_NAME).receiveSocialProfiles(re(re({},t),{email:o})),[3,4];case 3:return a.sent(),[3,4];case 4:return n(!1),[2]}}))}))}var se=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function l(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,a)}c((o=o.apply(e,t||[])).next())}))},ue=function(e,t){var n,o,i,r,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(l=0)),l;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,o=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!((i=(i=l.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){l.label=a[1];break}if(6===a[0]&&l.label<i[1]){l.label=i[1],i=a;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(a);break}i[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function fe(e){return se(this,void 0,void 0,(function(){var t,n,o,i;return ue(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),(0,u.dispatch)(y).markAsBeingDeleted(e),t=(0,u.select)(f.STORE_NAME).getSiteId(),n=(0,u.select)(f.STORE_NAME).getApiRoot(),o=(0,u.select)(f.STORE_NAME).getAuthenticationToken(),[4,ie()({url:"".concat(n,"/site/").concat(t,"/profile/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(o)}})];case 1:return r.sent(),(0,u.dispatch)(f.STORE_NAME).removeSocialProfile(e),i=(0,u.select)(f.STORE_NAME).getSocialProfiles(),[4,ie()({path:"/nelio-content/v1/settings/update-profiles",method:"PUT",data:{profiles:!(0,h.isEmpty)(i)}})];case 2:return r.sent(),(0,u.dispatch)(y).markAsDeleted(e),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))}function de(){return se(this,void 0,void 0,(function(){return ue(this,(function(e){switch(e.label){case 0:return(0,u.dispatch)(y).markAsRefreshtingProfiles(!0),[4,pe()];case 1:return e.sent(),(0,u.dispatch)(y).markAsRefreshtingProfiles(!1),[2]}}))}))}function pe(){return se(this,void 0,void 0,(function(){var e,t,n,o;return ue(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e=(0,u.select)(f.STORE_NAME).getSiteId(),t=(0,u.select)(f.STORE_NAME).getApiRoot(),n=(0,u.select)(f.STORE_NAME).getAuthenticationToken(),[4,ie()({url:"".concat(t,"/site/").concat(e,"/profiles"),method:"GET",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(n)}})];case 1:return o=i.sent(),[4,ie()({path:"/nelio-content/v1/settings/update-profiles",method:"PUT",data:{profiles:!(0,h.isEmpty)(o)}})];case 2:return i.sent(),(0,u.dispatch)(f.STORE_NAME).receiveSocialProfiles(o),[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))}var me=function(){return me=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},me.apply(this,arguments)},he=me(me({},t),i);(0,u.registerStore)(y,{reducer:O,controls:u.controls,actions:he,selectors:e});var Ee=function(e){var t=e.profileId,n=ge(t),o=ye(t),i=_e(t),c=(0,f.useSocialProfile)(t),d=(0,u.useDispatch)(y),p=d.deleteProfile,m=d.refreshProfile,h=(0,u.useDispatch)(y).openEmailEditor,E=be(t),_=E.isPublicationEnabled,b=E.isReshareEnabled;if(!c)return null;var w=c.displayName,S=c.status;return r.createElement("div",{className:v()({"nelio-content-profile":!0,"nelio-content-profile--is-locked":i,"nelio-content-profile--is-invalid":"valid"!==S})},r.createElement("div",{className:"nelio-content-profile__name"},w,_&&r.createElement(s.Tooltip,{position:"bottom center",text:(0,l._x)("This profile can automatically share new content when it’s published","text","nelio-content"),delay:0},r.createElement(s.Dashicon,{className:"nelio-content-profile__automation-icon",icon:"megaphone"})),b&&r.createElement(s.Tooltip,{text:(0,l._x)("This profile might reshare old content daily","text","nelio-content"),position:"bottom center",delay:0},r.createElement(s.Dashicon,{className:"nelio-content-profile__automation-icon",icon:"share-alt"}))),r.createElement("div",{className:"nelio-content-profile__icon"},r.createElement(a.SocialProfileIcon,{profileId:t})),r.createElement("div",{className:"nelio-content-profile__details"},!!c.isBuffer&&r.createElement(r.Fragment,null,r.createElement("span",null,(0,l._x)("Buffer Profile","text","nelio-content")),r.createElement("span",null,"|")),r.createElement(a.ProfileCreator,{profileId:t}),!!c.email&&r.createElement(r.Fragment,null,r.createElement("span",null,"|"),r.createElement("span",null,we(c.email)))),"renew"===S&&r.createElement(g,{isUserAllowed:n,disabled:i,onClick:function(){return m(t)}}),i?r.createElement("div",{className:"nelio-content-profile__feedback"},o?r.createElement(a.DeleteButton,{isDeleting:o,onClick:function(){}}):r.createElement("br",null)):r.createElement("div",{className:"nelio-content-profile__actions"},"renew"!==S&&r.createElement(r.Fragment,null,r.createElement(ve,{profileId:t})," | ",r.createElement(s.Button,{variant:"link",onClick:function(){var e;return h(c.id,null!==(e=c.email)&&void 0!==e?e:"")}},(0,l._x)("Email","text","nelio-content"))," | "),r.createElement(a.DeleteButton,{onClick:function(){return p(t)},confirmationLabels:{title:(0,l._x)("Delete Social Profile and Templates","text","nelio-content"),text:(0,l._x)("Are you sure you want to delete this profile? If you do so, you’ll also delete any social templates you defined for this profile in the Automations tab. This operation cannot be undone.","user","nelio-content")}})))},ve=function(e){var t=e.profileId,n=ge(t),o=(0,u.useDispatch)(y).refreshProfile;return n?r.createElement(s.Button,{variant:"link",onClick:function(){return o(t)}},(0,l._x)("Refresh","command","nelio-content")):r.createElement(s.Tooltip,{position:"bottom center",text:(0,l._x)("Only the user who added this profile can refresh it","user","nelio-content"),delay:0},r.createElement("span",null,(0,l._x)("Refresh","command","nelio-content")))},ge=function(e){return(0,u.useSelect)((function(t){var n=t(f.STORE_NAME).getCurrentUserId(),o=t(f.STORE_NAME).getSocialProfile(e);return(null==o?void 0:o.creatorId)===n}))},ye=function(e){return(0,u.useSelect)((function(t){return t(y).isProfileBeingDeleted(e)}))},_e=function(e){return(0,u.useSelect)((function(t){return t(y).isProfileBeingDeleted(e)}))},be=function(e){return(0,u.useSelect)((function(t){var n=(0,m.map)(t(f.STORE_NAME).getAutomationGroups(),t(f.STORE_NAME).getAutomationGroup).filter(h.isDefined).filter((function(e){return!!e.priority})).filter((function(t){var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.enabled)}));return{isPublicationEnabled:n.some((function(t){var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.publication.enabled)})),isReshareEnabled:n.some((function(t){var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.reshare.enabled)}))}}))},we=function(e){var t=e.split("@"),n=t[0],o=void 0===n?"":n,i=t[1],r=void 0===i?"":i,l={length:10,omission:"…"};return"".concat((0,m.truncate)(o,l),"@").concat((0,m.truncate)(r,l))},Se=function(){var e=(0,m.reverse)((0,m.sortBy)((0,f.useSocialProfiles)(),"creationDate"));return(0,h.isEmpty)(e)?r.createElement("p",null,(0,l._x)("Connect your social media profiles to Nelio Content using the following buttons:","user","nelio-content")):r.createElement(r.Fragment,null,r.createElement("p",null,(0,l._x)("The following profiles can be managed by any author in your team:","user","nelio-content")),r.createElement("div",{className:"nelio-content-profile-list"},e.map((function(e){var t=e.id;return r.createElement(Ee,{key:"nelio-content-profile-".concat(t),profileId:t})}))))},Ne=function(e){var t=e.network,n=e.disabled,o=(0,u.useDispatch)(y).openKindSelectorDialog,i=ke(t),c=(0,$.getNetworkLabel)("add",t);return i?n?r.createElement("div",{className:"nelio-content-profile-connectors__connect-button"},r.createElement(a.SocialNetworkIcon,{network:t,disabled:!0})):r.createElement(s.Tooltip,{position:"bottom center",text:c},r.createElement(s.Button,{className:"nelio-content-profile-connectors__connect-button",variant:"link",onClick:function(){return o(t)}},r.createElement(a.SocialNetworkIcon,{network:t}))):r.createElement(s.Tooltip,{position:"bottom center",text:(0,l._x)("You’ve reached the maximum number of allowed profiles","user","nelio-content")},r.createElement("div",{className:"nelio-content-profile-connectors__connect-button"},r.createElement(a.SocialNetworkIcon,{network:t,disabled:!0})))},ke=function(e){return(0,u.useSelect)((function(t){var n=t(f.STORE_NAME),o=n.getPluginLimits,i=n.getSocialProfiles,r=o(),l=r.maxProfiles,a=r.maxProfilesPerNetwork,c=i();return!(c.length>=l)&&(0,m.filter)(c,{network:e}).length<a}))},Ae=function(e){var t=e.disabled;return r.createElement("div",{className:"nelio-content-profile-connectors"},(0,$.getSupportedNetworks)().map((function(e){return r.createElement(Ne,{key:e,network:e,disabled:t})})))};const Oe=window.React;function xe(e){return e.startsWith("{{/")?{type:"componentClose",value:e.replace(/\W/g,"")}:e.endsWith("/}}")?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.startsWith("{{")?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}function Ie(e,t){let n,o,i=[];for(let r=0;r<e.length;r++){const l=e[r];if("string"!==l.type){if(void 0===t[l.value])throw new Error(`Invalid interpolation, missing component node: \`${l.value}\``);if("object"!=typeof t[l.value])throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \`${l.value}\``);if("componentClose"===l.type)throw new Error(`Missing opening component token: \`${l.value}\``);if("componentOpen"===l.type){n=t[l.value],o=r;break}i.push(t[l.value])}else i.push(l.value)}if(n){const r=function(e,t){const n=t[e];let o=0;for(let i=e+1;i<t.length;i++){const e=t[i];if(e.value===n.value){if("componentOpen"===e.type){o++;continue}if("componentClose"===e.type){if(0===o)return i;o--}}}throw new Error("Missing closing component token `"+n.value+"`")}(o,e),l=Ie(e.slice(o+1,r),t),a=(0,Oe.cloneElement)(n,{},l);if(i.push(a),r<e.length-1){const n=Ie(e.slice(r+1),t);i=i.concat(n)}}return i=i.filter(Boolean),0===i.length?null:1===i.length?i[0]:(0,Oe.createElement)(Oe.Fragment,null,...i)}function Pe(e){const{mixedString:t,components:n,throwErrors:o}=e;if(!n)return t;if("object"!=typeof n){if(o)throw new Error(`Interpolation Error: unable to process \`${t}\` because components is not an object`);return t}const i=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(xe)}(t);try{return Ie(i,n)}catch(e){if(o)throw new Error(`Interpolation Error: unable to process \`${t}\` because of error \`${e.message}\``);return t}}var De=function(e){var t=e.network,n=(0,$.getNetworkKinds)(t).length?(0,$.getNetworkKinds)(t):[{id:"single",label:(0,$.getNetworkLabel)("name",t)}],o=(0,u.useSelect)((function(e){return e(f.STORE_NAME).isSubscribed()})),i=(0,u.useDispatch)(y),c=i.closeKindSelectorDialog,d=i.openConnectionDialog,p=c;return r.createElement(s.Modal,{className:"nelio-content-kind-selector-dialog",title:(0,l._x)("Connect Profile","text","nelio-content"),isDismissible:!0,shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!0,onRequestClose:p},r.createElement("div",{className:"nelio-content-kind-selector-dialog__list"},n.map((function(e){var n=e.id,i=e.label;return r.createElement(s.Button,{key:"nc-".concat(t,"-kind-").concat(n),className:"nelio-content-kind-selector-dialog__connect-button",variant:"link",onClick:function(){return e=n,c(),void d(t,e);var e},disabled:"twitter"===t&&!o},r.createElement(a.SocialNetworkIcon,{className:"nelio-content-kind-selector-dialog__profile-icon",network:t,kind:n}),r.createElement("span",null,i))}))),r.createElement("p",{className:"nelio-content-kind-selector-dialog__buffer"},Pe({mixedString:(0,l._x)("Or <a>connect via Buffer</a>","user","nelio-content").replace("<a>","{{a}}").replace("</a>","{{/a}}"),components:{a:r.createElement(s.Button,{variant:"link",onClick:function(){return c(),void d("buffer",t)}})}})),"twitter"===t&&r.createElement(Re,null))},Re=function(){var e=(0,u.useSelect)((function(e){return e(f.STORE_NAME).isSubscribed()}));return r.createElement("p",{className:"nelio-content-kind-selector-dialog__notice"},r.createElement("strong",null,(0,l._x)("Notice:","text","nelio-content"))," ",e?(0,l._x)("Due to recent changes in X’s API, messages posted through a native connection may be restricted, as Nelio Content has a maximum limit of requests allowed for a specific time frame.","text","nelio-content"):(0,l._x)("Due to recent changes in X’s API, native connections of X profiles are only available to Nelio Content subscribers. If you want to connect a X profile, please use Buffer instead.","text","nelio-content"))},Ce=function(){var e=(0,u.useSelect)((function(e){return!!e(y).getConnectionDialog()})),t=(0,u.useSelect)((function(e){return e(y).isProfileListRefreshing()})),n=(0,u.useSelect)((function(e){return e(y).getKindDialog()})),o=!!n;return(0,r.useEffect)((function(){document.body.style.overflow=t||e?"hidden":""}),[t,e]),r.createElement("div",{className:"nelio-content-connection-dialog"},e&&r.createElement("div",{className:"nelio-content-connection-dialog__overlay"},r.createElement("div",{className:"nelio-content-connection-dialog__overlay-content"},(0,l._x)("Please follow the instructions to authenticate the social profile…","user","nelio-content"))),o&&r.createElement(De,{network:n}),t&&r.createElement("div",{className:"nelio-content-connection-dialog__overlay"},r.createElement("div",{className:"nelio-content-connection-dialog__overlay-content"},(0,l._x)("Refreshing social profiles…","text","nelio-content"))))},Te=function(){var e=Me(),t=e.profileId,n=e.isSaving,o=e.email,i=e.error,c=(0,u.useDispatch)(y),f=c.setEmail,d=c.saveEditingEmail,p=c.closeEmailEditor;return t?r.createElement(s.Modal,{className:"nelio-content-email-editor",title:(0,l._x)("Fallback Email Editor","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!n,shouldCloseOnClickOutside:!1,onRequestClose:p},r.createElement(s.TextControl,{value:o,onChange:f,placeholder:(0,l._x)("Email","text","nelio-content"),help:(0,l._x)("This is a fallback email address. Nelio Content will use it to let the recipient know when a social message couldn’t be automatically shared, thus offering them the opportunity to manually share it.","text","nelio-content")}),r.createElement("div",{className:"nelio-content-email-editor__actions"},r.createElement(s.Button,{variant:"secondary",disabled:n,onClick:p},(0,l._x)("Cancel","command","nelio-content")),r.createElement(a.SaveButton,{error:i||void 0,variant:"primary",isSaving:n,onClick:function(){return d().then(p)}}))):null},Me=function(){return(0,u.useSelect)((function(e){var t=(0,m.trim)(e(y).getEditingEmail()).replace(/^mailto:/i,"");return{profileId:e(y).getProfileIdInEmailEditor(),email:t,isSaving:e(y).isSavingEmail(),error:!!t&&!(0,U.isEmail)(t)&&(0,l._x)("Please write a valid email address","user","nelio-content")}}))},Le=function(){var e=(0,u.useSelect)((function(e){return e(f.STORE_NAME).isLoadingSocialProfiles()})),t=(0,u.useSelect)((function(e){return e(y).areThereProfilesBeingDeleted()}));return e?r.createElement("div",{className:"nelio-content-social-profiles-layout"},r.createElement(a.LoadingAnimation,null)):r.createElement(r.StrictMode,null,r.createElement(s.SlotFillProvider,null,r.createElement("div",{className:"nelio-content-social-profiles-layout"},r.createElement("div",{className:"nelio-content-social-profiles-layout__title-wrapper"},r.createElement(d,null)),r.createElement(Se,null),r.createElement(Ae,{disabled:t}),r.createElement(Ce,null),r.createElement(Te,null),r.createElement(s.Popover.Slot,null))))};function Be(e){var t=document.getElementById(e);(0,r.render)(r.createElement(Le,null),t);var n=document.getElementById("nelio-content-settings-title");n&&(0,r.render)(r.createElement(a.ContextualHelp,{context:"social-profiles",walkthrough:c,autostart:!0,component:Ke}),n)}var Ke=function(e){var t=e.className,n=e.runWalkthrough;return r.createElement("button",{className:"".concat(t,"  page-title-action"),onClick:n},(0,l._x)("Help","text","nelio-content"))}})();var i=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var r in o)i[r]=o[r];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();