!function(a){"use strict";a(function(){function a(){var a=window.location.search.replace(/\?/i,"").split("&"),b=null;if(jQuery.each(a,function(a,c){var d=c.split("=");"theme"==d[0].toLowerCase()&&(b=d[1])}),void 0!==b&&null!=b&&""!=b){var c=void 0;if(jQuery(".theme-overlay.active").length>0?c=jQuery(".theme-overlay.active"):jQuery(".theme-overlay").children(".theme-overlay").length>0&&(c=jQuery(".theme-overlay").children(".theme-overlay").first()),void 0!==c&&null!=c&&!c.hasClass("lock-your-updates-themes")){c.addClass("lock-your-updates-themes");{var d=c.find(".theme-about .theme-info"),e=d.find(".theme-author"),f=d.find(".theme-name");d.find(".theme-description")}jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",async:!1,cache:!1,data:{action:"lock_your_updates_get_item_data",item_type:lock_your_updates.type,item_id:b,nonce_required:!1,get_update_message:!0},error:function(){},success:function(a){if(a&&void 0!==typeof a&&null!=a&&void 0!==typeof a.locked&&null!=a.locked&&0==c.find(".lock-your-updates-themes-header").length){var b=jQuery('<h4 class="lock-your-updates-themes-header"></h4>');a.locked?(b.addClass("locked"),b.append(lock_your_updates.type_locked)):(b.addClass("unlocked"),b.append(lock_your_updates.type_unlocked)),e.length>0?e.after(b):f.length>0?f.after(b):d.length>0&&d.prepend(b),void 0!==a.locked&&a.locked===!0&&void 0!==a.update_available&&a.update_available===!0&&void 0!==a.update_message&&""!=a.update_message&&0==d.find(".theme-update-message").length&&jQuery('<div class="theme-update-message lock-your-updates-theme-update-message"><h4 class="theme-update">'+lock_your_updates.update_available+"</h4><p><strong>"+a.update_message+"</strong></p></div>").insertAfter(b),void 0!==a.notes_preview_html&&""!=a.notes_preview_html&&jQuery(a.notes_preview_html).insertAfter(b)}},complete:function(){}});var g=c.find(".theme-actions"),h=g.find(".active-theme"),i=g.find(".inactive-theme");(0==h.find(".lock-updates-themes-actions").length||0==i.find(".lock-updates-themes-actions").length)&&jQuery.ajax({url:ajaxurl,type:"POST",dataType:"html",async:!1,cache:!1,data:{action:"lock_your_updates_get_theme_action_buttons",theme_id:b},error:function(){},success:function(a){if(void 0!=a&&null!=a&&""!=a){var b=jQuery('<div class="lock-updates-themes-actions"></div>').append(a);0==h.find(".lock-updates-themes-actions").length&&b.clone().appendTo(h),0==i.find(".lock-updates-themes-actions").length&&b.clone().appendTo(i)}}}),c.lock_your_updates_setup_edit_notes_action()}}}lock_your_updates.is_network_active&&!lock_your_updates.is_network_admin||!lock_your_updates.is_network_active&&lock_your_updates.is_network_admin||lock_your_updates["can_update_"+lock_your_updates.type]&&(jQuery(".theme-overlay").bind("DOMNodeInserted",function(){jQuery(".theme-overlay").children(".theme-overlay").length>0&&a()}),jQuery.fn.lock_your_updates_setup_edit_notes_action=function(){var a=jQuery(this);jQuery(".lock-your-updates-edit-notes").on("click",function(b){b.preventDefault(),a.lock_your_updates_edit_theme_note(jQuery(this).attr("href"))})},jQuery.fn.lock_your_updates_edit_theme_note=function(a){{var b={};a.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,c,d){b[c]=d})}if(!(jQuery(".lock-your-updates-themes-edit-notes-area").length>0)){if(!("action"in b&&"lock-your-updates-edit-notes-"+lock_your_updates.type==b.action&&lock_your_updates.type in b&&""!=b[lock_your_updates.type]&&"_wpnonce"in b&&""!=b._wpnonce))return void alert(lock_your_updates.errors.load_notes);var c=jQuery(this);jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",async:!1,cache:!1,data:{action:"lock_your_updates_get_item_data",item_type:lock_your_updates.type,item_id:b[lock_your_updates.type],nonce_required:!0,nonce:b._wpnonce},error:function(){alert(lock_your_updates.errors.load_notes)},success:function(a){if(!a||void 0===typeof a||null==a)return void alert(lock_your_updates.errors.load_notes);if(void 0===typeof a.passed_nonce||null==a.passed_nonce||!a.passed_nonce)return void alert(lock_your_updates.errors.load_notes);if(void 0===typeof a.name||null==a.name||void 0===typeof a.locked||null==a.locked)return void alert(lock_your_updates.errors.load_notes);var d=c.find(".lock-your-updates-themes-header"),e=jQuery('<div class="lock-your-updates-themes-edit-notes-area"></div>');e.addClass(a.locked?"locked":"unlocked"),e.append('<div class="icon"></div>'),e.append('<h3><span class="notes-for">'+lock_your_updates.notes_for+"</span> "+a.name+"</h3>"),e.append(a.locked?'<h4 class="locked">'+lock_your_updates.type_locked+"</h4>":'<h4 class="unlocked">'+lock_your_updates.type_unlocked+"</h4>");var f=jQuery("<textarea></textarea>");void 0!=a.notes&&null!=a.notes&&f.val(a.notes),e.append(f);var g=jQuery('<a class="button-primary save alignleft" href="" accesskey="s">Save</a>');g.on("click",function(a){a.preventDefault(),c.lock_your_updates_save_theme_note(b,f.val())}),e.append(g);var h=jQuery('<a class="button-secondary cancel alignleft" href="" accesskey="c">Cancel</a>');h.on("click",function(a){a.preventDefault(),c.lock_your_updates_close_edit_theme_note()}),e.append(h),d.hide(),jQuery(".lock-your-updates-themes-notes-preview-area").hide(),e.hide().insertAfter(d).fadeIn()},complete:function(){}})}},jQuery.fn.lock_your_updates_save_theme_note=function(a,b){if("action"in a&&"lock-your-updates-edit-notes-"+lock_your_updates.type==a.action&&lock_your_updates.type in a&&""!=a[lock_your_updates.type]&&"_wpnonce"in a&&""!=a._wpnonce){var c=jQuery(this),d=a[lock_your_updates.type];jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",async:!1,cache:!1,data:{action:"lock_your_updates_save_item_notes",item_type:lock_your_updates.type,item_id:d,nonce:a._wpnonce,item_notes:b},error:function(){alert(lock_your_updates.errors.save_notes)},success:function(a){if(!a||void 0===typeof a||null==a)return void alert(lock_your_updates.errors.save_notes);if(void 0===typeof a.passed_nonce||null==a.passed_nonce||!a.passed_nonce)return void alert(lock_your_updates.errors.save_notes);if(void 0==a.saved_note||null==a.saved_note||!a.saved_note)return void alert(lock_your_updates.errors.save_notes);var b="item_notes"in a?a.item_notes:null,e=jQuery(".lock-your-updates-themes-notes-preview-area");void 0===b||""==b?e.remove():jQuery.ajax({url:ajaxurl,type:"POST",dataType:"html",async:!1,cache:!1,data:{action:"lock_your_updates_get_themes_preview_notes_area",item_id:d,item_notes:b},error:function(){},success:function(a){if(void 0!==a&&""!=a){var b=jQuery(a);0==e.length?b.insertAfter(".lock-your-updates-themes-header"):e.replaceWith(b),c.lock_your_updates_setup_edit_notes_action()}},complete:function(){}});var f=c.find(".lock-your-updates-themes-edit-notes-area"),g=f.offset().left,h=f.offset().top;c.lock_your_updates_close_edit_theme_note();var i=jQuery('<div class="lock-your-updates-checkmark"></div>').css({left:g+"px",top:h+"px"}).hide();i.appendTo(jQuery("body")).show().animate({opacity:0},1e3,function(){i.remove()})},complete:function(){}})}},jQuery.fn.lock_your_updates_close_edit_theme_note=function(){var a=jQuery(this);a.find(".lock-your-updates-themes-edit-notes-area").remove(),a.find(".lock-your-updates-themes-header").fadeIn(),jQuery(".lock-your-updates-themes-notes-preview-area").fadeIn()})})}(jQuery);