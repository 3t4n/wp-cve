jQuery(function(a){window.scanListenerStartEvent=new CustomEvent("scanlistenerstart"),window.scanListenerStopEvent=new CustomEvent("scanlistenerstop"),window.scanScannerBeat=!1,window.addEventListener("scanlistenerstart",function(){window.scanScannerBeat=!0,function i(){window.scanScannerBeat&&(window.scanListener=setTimeout(function(){var n=a("#wp_weixin_hash").val(),e=0<n.length,t={action:WP_WeixinScanHeartBeat.action,hash:n};e&&a.post(WP_WeixinScanHeartBeat.ajax_url,t,function(n){if(n.success)n.data&&!n.data[WP_WeixinScanHeartBeat.dataIndex]?window.scanFailureTrigger(n.data):n.data?window.scanSuccessTrigger(n.data):(window.beatSuccessTrigger(n.data),i());else{var e={error:n.data};e[WP_WeixinScanHeartBeat.dataIndex]=!1,window.scanFailureTrigger(e)}}).fail(function(n,e){window.beatFailureTrigger(e),i()})},WP_WeixinScanHeartBeat.heartbeatFreq))}()}),window.addEventListener("scanlistenerstop",function(){window.scanScannerBeat=!1,clearTimeout(window.scanListener)}),window.scanListenerStart=function(){window.dispatchEvent(window.scanListenerStartEvent)},window.scanListenerStop=function(){window.dispatchEvent(window.scanListenerStopEvent)},window.scanSuccessTrigger=function(n){window.scanSuccess=new CustomEvent("scansuccess",{detail:n}),window.dispatchEvent(window.scanSuccess)},window.scanFailureTrigger=function(n){window.scanFailure=new CustomEvent("scanfailure",{detail:n}),window.dispatchEvent(window.scanFailure)},window.beatSuccessTrigger=function(n){window.beatSuccess=new CustomEvent("beatscansuccess",{detail:n}),window.dispatchEvent(window.beatSuccess)},window.beatFailureTrigger=function(n){window.beatFailure=new CustomEvent("beatscanfailure",{detail:n}),window.dispatchEvent(window.beatFailure)},window.registerScanSuccessListener=function(e){window.addEventListener("scansuccess",function(n){"function"==typeof e&&e(n.detail)})},window.registerScanFailureListener=function(e){window.addEventListener("scanfailure",function(n){"function"==typeof e&&e(n.detail)})},window.registerBeatSuccessListener=function(e){window.addEventListener("beatscansuccess",function(n){"function"==typeof e&&e(n.detail)})},window.registerBeatFailureListener=function(e){window.addEventListener("beatscanfailure",function(n){"function"==typeof e&&e(n.detail)})}});