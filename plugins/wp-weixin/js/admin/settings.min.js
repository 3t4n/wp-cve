jQuery(document).ready(function(o){o(".toplevel_page_wp-weixin .stuffbox form h2").each(function(e,n){var i=o(n),t=o(i).next(".section-class-holder").data("section_class");i.addClass(t)});var i={responder:{handle:o(".wp_weixin-responder-section.wp_weixin-responder-field input"),content:o(".wp_weixin-responder-section:not( .wp_weixin-responder-field )")},proxy:{handle:o(".wp_weixin-proxy-section.wp_weixin-proxy-field input"),content:o(".wp_weixin-proxy-section:not( .wp_weixin-proxy-field )")},auth:{handle:o(".wp_weixin-enable_auth-field input"),content:o(".requires-auth")}},e=[o(".wp_weixin-follow_welcome-field input")];function t(){o.each(e,function(e,n){n.prop("checked")&&(i.responder.handle.prop("checked",!0),i.responder.content.show())})}o.each(i,function(e,n){n.handle.prop("checked")?n.content.show():n.content.hide(),n.handle.on("change",function(){o(this).prop("checked")?n.content.show():n.content.hide()})}),o.each(e,function(e,n){n.prop("checked")&&!i.responder.handle.prop("checked")&&(i.responder.handle.prop("checked",!0),i.responder.handle.trigger("change")),n.on("change",t)}),i.responder.handle.on("change",t),o(".wp_weixin-force_auth-field input").prop("checked")&&o(".wp_weixin-enable_auth-field input").prop("checked",!0),o(".wp_weixin-enable_auth-field input, .wp_weixin-force_auth-field input").on("change",function(){o(".wp_weixin-force_auth-field input").prop("checked")&&o(".wp_weixin-enable_auth-field input").prop("checked",!0)}),o('input[type="password"].toggle').on("focus",function(){o(this).attr("type","text")}),o('input[type="password"].toggle').on("blur",function(){o(this).attr("type","password")}),o(".qr-custom-button").on("click",function(e){e.preventDefault();var n=o(this),i=o("#"+n.data("img")),t={url:o("#qr_url").val(),action:"wp_weixin_get_settings_qr"};o.ajax({url:WpWeixin.ajax_url,type:"POST",data:t}).done(function(e){e.success?(i.attr("src",i.data("base_url")+e.data),i.css("visibility","visible"),i.parent().children("span").hide()):(i.css("visibility","hidden"),i.parent().children("span").show())}).fail(function(e,n){WpWeixin.debug&&window.console.log(n)})})});