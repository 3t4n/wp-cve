function UpdraftCentral_Storage(){var a,r=this,d=jQuery;function l(){return!!(a=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB)}function c(){var e=d.Deferred(),t=(a||e.resolve(null),a.open("udc_local_database",1));return t.onupgradeneeded=function(t){t.target.result.createObjectStore("udc_store",{keyPath:"name"})},t.onsuccess=function(t){e.resolve(t.target.result)},t.onerror=function(t){e.reject(t.target.error)},e.promise()}function u(t,e,a,i){var n,o=d.Deferred(),e=e.transaction("udc_store","readwrite"),s=e.objectStore("udc_store");switch(t){case"set":n=s.put(i);break;case"get":n=s.get(a);break;case"delete":n=s.delete(a);break;case"count":n=s.count();break;case"clear":n=s.clear()}return n.onsuccess=function(t){o.resolve(t.target.result)},n.onerror=function(t){o.reject(t.target.error)},e.onerror=function(t){o.reject(t.target.error)},o.promise()}function p(t){return"updraftcentral_"+t}this.maximum_age=600,this.get_storage_type=function(){return l()?"indexedDB":"localStorage"},this.set_item=function(i,n,o){var s=d.Deferred();return l()?c().then(function(t){var e,a;t?(t.transaction("udc_store","readwrite").objectStore("udc_store"),a={name:e=p(i),value:JSON.stringify(n),epoch_time:null},void 0!==o&&o&&(a.epoch_time=Math.floor(Date.now()/1e3)),u("set",t,e,a).then(function(t){s.resolve(t)}).fail(function(t){1<UpdraftCentral.get_debug_level()&&(console.log("UpdraftCentral_Storage.set_item(key="+i+", can_expire="+o+"): error saving item. Response object and submitted value follows."),console.log(t),console.log(n)),s.reject(!1)})):(1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::set_item: no valid local database."),s.reject(!1))}).fail(function(t){1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::set_item: failed to open local database."),s.reject(t)}):(UpdraftCentral.storage_set(i,n,o),s.resolve()),s.promise()},this.get_item=function(n,o){var s=d.Deferred();return l()?c().then(function(t){t?u("get",t,p(n)).then(function(t){var e,a,i=t&&t.hasOwnProperty("value")?JSON.parse(t.value):t;t&&void 0!==o&&0<o?(r.maximum_age=o,null===(t=t.epoch_time)?s.resolve(t):(a=(e=Math.floor(Date.now()/1e3))-t,1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage.get_item(key="+n+", maximum_age="+o+"): stored_at="+t+", epoch_time="+e+", stored_ago="+a),o<a?s.resolve(null):s.resolve(i))):s.resolve(i)}).fail(function(t){1<UpdraftCentral.get_debug_level()&&(console.log("UpdraftCentral_Storage.get_item(key="+n+", maximum_age="+o+"): error retrieving item. Response object follows."),console.log(t)),s.reject(t)}):(1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::get_item: no valid local database."),s.reject(null))}).fail(function(t){1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::get_item: failed to open local database."),s.reject(t)}):s.resolve(UpdraftCentral.storage_get(n,o)),s.promise()},this.remove_item=function(e){var a=d.Deferred();return l()?c().then(function(t){t?u("delete",t,p(e)).then(function(t){a.resolve(t)}).fail(function(t){1<UpdraftCentral.get_debug_level()&&(console.log("UpdraftCentral_Storage.remove_item(key="+e+"): error removing item. Response object follows."),console.log(t)),a.reject(t)}):(1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::remove_item: no valid local database."),a.reject(!1))}).fail(function(t){1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::remove_item: failed to open local database."),a.reject(t)}):(UpdraftCentral.storage_remove(e),a.resolve()),a.promise()},this.count=function(){var e=d.Deferred();if(l())c().then(function(t){t?u("count",t).then(function(t){e.resolve(t)}).fail(function(t){1<UpdraftCentral.get_debug_level()&&(console.log("UpdraftCentral_Storage.count(): error retrieving local database record count. Response object follows."),console.log(t)),e.reject(t)}):(1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::count: no valid local database."),e.reject(0))}).fail(function(t){1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::count: failed to open local database."),e.reject(t)});else{var t=0;for(i=localStorage.length-1;0<=i;i--){var a=localStorage.key(i);null!==a&&"updraftcentral_"==a.substring(0,15)&&t++}e.resolve(t)}return e.promise()},this.purge=function(){var i=d.Deferred();return l()?c().then(function(t){var e,a;t?(e=(t=t.transaction("udc_store","readwrite")).objectStore("udc_store").openCursor(),a=0,e.onsuccess=function(t){var e,t=t.target.result;t?((e=t.value)&&void 0!==r.maximum_age&&0<r.maximum_age&&(null===(e=e.epoch_time)?t.continue():Math.floor(Date.now()/1e3)-e>r.maximum_age&&(t.delete().onsuccess=function(t){a++})),t.continue()):i.resolve(a)},e.onerror=function(t){1<UpdraftCentral.get_debug_level()&&(console.log("UpdraftCentral_Storage.purge(): error openning store cursor. Error object follows."),console.log(t.target.error)),i.reject(t.target.error)},t.onerror=function(t){1<UpdraftCentral.get_debug_level()&&(console.log("UpdraftCentral_Storage.purge(): error purging old records. Error object follows."),console.log(t.target.error)),i.reject(t.target.error)}):(1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::purge: no valid local database."),i.reject(0))}).fail(function(t){1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::purge: failed to open local database."),i.reject(t)}):i.resolve(UpdraftCentral.storage_purge()),i.promise()},this.clear=function(){var e=d.Deferred();if(l())c().then(function(t){t?u("clear",t).then(function(t){e.resolve(t)}).fail(function(t){1<UpdraftCentral.get_debug_level()&&(console.log("UpdraftCentral_Storage.clear(): error clearing local database records. Response object follows."),console.log(t)),e.reject(t)}):(1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::clear: no valid local database."),e.reject(!1))}).fail(function(t){1<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Storage::clear: failed to open local database."),e.reject(t)});else{for(i=localStorage.length-1;0<=i;i--){var t=localStorage.key(i);null!==t&&"updraftcentral_"==t.substring(0,15)&&UpdraftCentral.storage_remove(t)}e.resolve()}return e.promise()}}function UpdraftCentral_Post(v){var b=this,y=jQuery,l=(this.pagination,this.current_group,this.current_section,this.manage_data=new UpdraftCentral_Collection,this.uc_editor={edits:new UpdraftCentral_Collection,state:new UpdraftCentral_Collection},this.quick_edits=new UpdraftCentral_Collection,this.dirty_edits=new UpdraftCentral_Collection,this.editor_reload_required=!1,this.wp_versions=new UpdraftCentral_Collection,this.reset_info={data:null,previous_status:null,location:null},new UpdraftCentral_Collection,50);function h(t,e){for(var a,i=b.manage_data.item("response"),n=[],o=0;o<i[v.type+"s"].length;o++){var s=i[v.type+"s"][o];t.post.ID==s.post.ID?n.push({post:t.post,misc:t.misc}):n.push({post:s.post,misc:s.misc})}b.pagination.set_remote_data({info:i.info,items:n}),p(1,$site_row),e!=t.post.post_status&&(--(a=i[v.type+"s_count"])[e],a[t.post.post_status]+=1,i[v.type+"s_count"]=a,b.manage_data.update("response",i),_(a),y('ul#uc-navlinks a.uc-navlink-item[data-group="'+t.post.post_status+'"]').trigger("click"))}function w(t){if(void 0===t.data.post)console.log(udclion[v.type+"s"].unable_to_load_editor);else{try{var o=t.data.post,r=t.data.misc;"publish"==o.post_status&&y("#uc-editor-buttons > button#uc-switch-draft").show()}catch(t){console.log(t)}var e=setInterval(function(){y("div#wp-uc_classic_editor-wrap").length&&(y("#submitdiv div#publishing-action input#publish").attr("onsubmit","return false;"),y(".wp-editor-tabs button.wp-switch-editor").on("click",function(){(y(this).hasClass("switch-html")?(y("div.mce-tinymce.mce-container").hide(),y("textarea.wp-editor-area")):(y("textarea.wp-editor-area").hide(),y("div.mce-tinymce.mce-container"))).css("visibility","visible").show()}),clearInterval(e),y(window).scrollTop(0),"post"==v.type&&y("div#category-all.tabs-panel").scrollTop(0),"undefined"!=typeof tinymce&&tinymce&&b.init_tiny_mce("uc_classic_editor"),-1!==y.inArray(o.post_status,["publish","future"])&&y("div#submitpost input#publish").val(udclion[v.type+"s"].update),"future"!==o.post_status&&b.is_input_future_date()&&y("div#submitpost input#publish").val(udclion[v.type+"s"].schedule),r.hasOwnProperty("sticky")&&(y("div#post-visibility-select span#sticky-span input#sticky").prop("checked",r.sticky),"public"===y('div#post-visibility-select input[name="visibility"]:checked').val())&&y("div#post-visibility-select span#sticky-span input#sticky").is(":checked")&&y("div#misc-publishing-actions span#post-visibility-display").html(udclion.posts.public+", "+udclion.posts.sticky),o.hasOwnProperty("post_parent")&&o.post_parent&&y("#uc-page-attributes-container select#parent_id").val(o.post_parent),r.hasOwnProperty("template"))&&r.template&&y("#uc-page-attributes-container select#page_template").val(r.template),y("div#submitpost").find("input#save-post, input#publish").attr("class","btn btn-primary publishing-buttons"),void 0!==r.link&&r.link&&y("div#classic-editor-dashboard div.post-action-buttons a#uc_preview_changes").attr("href","#").removeAttr("target").attr("onclick",'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+r.link+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));");var t=y("div#postimagediv").find("a#set-post-thumbnail");void 0!==t&&t.length&&t.attr("href",""),y("div#submitpost div#save-action input#save-post").on("click",function(){switch(y(this).val().toLowerCase()){case udclion[v.type+"s"].save_as_pending.toLowerCase():b.uc_editor.edits.update("status","pending");break;case udclion[v.type+"s"].save_draft.toLowerCase():b.uc_editor.edits.update("status","draft")}b.uc_editor.state.update("save_draft_pending",!0),y("div#submitpost div#publishing-action input#publish").trigger("click")}),y("div#submitpost div#publishing-action input#publish").on("click",function(){var t,n,e=y(this).closest("div#classic_editor_container"),a=y(this).val();b.uc_editor.state.exists("editing")&&b.uc_editor.state.item("editing")?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].currently_editing+"</p>"):(y("button#uc_classic_editor-tmce").trigger("click"),t=tinyMCE.activeEditor.getContent(),t=b.adjust_local_reference(t),b.uc_editor.edits.bulk_update({id:o.ID,title:e.find("div.title-container input#title").val(),content:t,source:"classic"}),"publish"!=a.toLowerCase()||b.uc_editor.state.exists("save_draft_pending")||b.uc_editor.edits.update("status","publish"),b.is_input_future_date()&&b.uc_editor.edits.update("status","future"),b.uc_editor.edits.exists("featured_media")&&b.uc_editor.edits.update("featured_media",parseInt(y("input#_thumbnail_id").val())),e={name:"save",arguments:b.uc_editor.edits.get_collection_object()},(n=y(document.body)).append('<div class="modal-backdrop-container"><div class="modal-backdrop fade show"></div><div class="updraftcentral_spinner"></div></div>'),u(e,$site_row).then(function(t){var e,a,i;void 0!==t.post&&t.post?(e={post:JSON.parse(t.post),misc:t.misc},"post"==v.type&&void 0!==t.preloaded&&t.preloaded&&(i=JSON.parse(t.preloaded),void 0!==(a=b.manage_data.item("preloaded_data")))&&a&&((a=JSON.parse(a)).categories=i.categories,a.tags=i.tags,b.manage_data.update("preloaded_data",JSON.stringify(a))),"manage"===b.current_section&&h(e,o.post_status),b.load_updraftcentral_editor("classic",e,$site_row),t.hasOwnProperty("options")&&m(t.options)):(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].unkown_error+"</p>"),void 0!==(i=n.find("div.modal-backdrop-container"))&&i.length&&i.remove())}).always(function(){b.uc_editor.state.remove("save_draft_pending")}))}),y("#uc-editor-buttons > button#uc-editor-close").on("click",function(){var t,e=y(document.body).find("div#classic_editor_container");void 0!==e&&e&&(b.uc_editor.state.exists("editing")&&b.uc_editor.state.item("editing")?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].currently_editing+"</p>"):(e.remove(),y(".updraftcentral_spinner").is(":visible")&&y(".updraftcentral_spinner").remove(),"undefined"!=typeof tinymce&&tinymce&&(t=tinymce.activeEditor.id,tinymce.EditorManager.execCommand("mceRemoveEditor",!0,t),tinymce.EditorManager.execCommand("mceRemoveControl",!0,t)),y(document.body).trigger("updraftcentral_"+v.type+"_editor_closed",[e])))}),y("#uc-editor-buttons > button#uc-switch-draft").on("click",function(){b.uc_editor.edits.update("status","draft"),y("div#submitpost div#publishing-action input#publish").trigger("click")}),y("#edit-slug-box span#edit-slug-buttons > button.edit-slug").on("click",function(){var t,a=y("#edit-slug-box span#editable-post-name"),i=a.closest("a");i.attr("onclick","return false;"),i.attr("target","_blank"),void 0!==a&&a&&(b.uc_editor.state.update("editing",!0),t=y("<input/>",{type:"text",id:"uc-input-slug",class:"editable-slug",value:y("span#editable-post-name-full").html()}),a.html(t),y(this).hide(),(t=y("<button/>",{text:udclion[v.type+"s"].ok,id:"uc-btn-ok",class:"uc-slug-buttons"})).on("click",function(){var t,e=a.find("input#uc-input-slug");void 0!==e&&e&&(0==(t=e.val()).trim().length?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].slug_missing+"</p>"):(y("span#editable-post-name-full").html(t),e.remove(),a.html(t),i.attr("href",i.text()),i.removeAttr("onclick"),b.uc_editor.edits.update("slug",t),b.uc_editor.state.remove("editing"),y("#edit-slug-box span#edit-slug-buttons > button#uc-btn-ok").remove(),y("#edit-slug-box span#edit-slug-buttons > button#uc-btn-cancel").remove(),y("#edit-slug-box span#edit-slug-buttons > button.edit-slug").show()))}),y("#edit-slug-box span#edit-slug-buttons").append(t),(t=y("<button/>",{text:udclion[v.type+"s"].cancel,id:"uc-btn-cancel",class:"uc-slug-buttons"})).on("click",function(){var t=a.find("input#uc-input-slug");void 0!==t&&t&&(t.remove(),a.html(y("span#editable-post-name-full").html()),i.removeAttr("onclick"),b.uc_editor.state.remove("editing"),y("#edit-slug-box span#edit-slug-buttons > button#uc-btn-ok").remove(),y("#edit-slug-box span#edit-slug-buttons > button#uc-btn-cancel").remove(),y("#edit-slug-box span#edit-slug-buttons > button.edit-slug").show())}),y("#edit-slug-box span#edit-slug-buttons").append(t))}),y("#classic-editor-dashboard div#submitdiv").find("a.button, a.button-cancel").not("a#post-preview").addClass("btn btn-secondary"),y("div#classic_editor a.edit-post-status").attr("href","#misc-publishing-actions"),y("div#classic_editor a.edit-post-status").on("click",function(t){y(this).hide(),y("div#post-status-select").slideDown("fast")}),y("div#post-status-select a.save-post-status").on("click",function(t){var e=y(this).closest("div#post-status-select").find("select#post_status").val();switch(b.uc_editor.edits.update("status",e),y(this).siblings("a.cancel-post-status").trigger("click"),e){case"pending":y("div#submitpost input#save-post").val(udclion[v.type+"s"].save_as_pending).show(),status_text=udclion[v.type+"s"].pending_review;break;case"draft":y("div#submitpost input#save-post").val(udclion[v.type+"s"].save_draft).show(),status_text=udclion[v.type+"s"].draft;break;case"publish":y("div#submitpost input#save-post").hide(),status_text=udclion[v.type+"s"].published}y("div#misc-publishing-actions span#post-status-display").html(status_text),"future"!==o.post_status&&b.is_input_future_date()&&y("div#submitpost input#publish").val(udclion[v.type+"s"].schedule)}),y("div#post-status-select a.cancel-post-status").on("click",function(t){y("div#post-status-select").slideUp("fast","swing",function(){y("div#classic_editor a.edit-post-status").show()})}),y("div#classic_editor a.edit-visibility").on("click",function(t){y(this).hide(),"post"==v.type&&(y("div#post-visibility-select input#visibility-radio-public").is(":checked")?y("div#post-visibility-select span#sticky-span").show():y("div#post-visibility-select span#sticky-span").hide()),y("div#post-visibility-select input#visibility-radio-password").is(":checked")?y("div#post-visibility-select span#password-span").show():y("div#post-visibility-select span#password-span").hide(),y("div#post-visibility-select").slideDown("fast")}),y("div#post-visibility-select span#sticky-span input#sticky").on("click",function(t){b.uc_editor.edits.update("sticky",!!y(this).is(":checked"))}),y("div#post-visibility-select a.save-post-visibility").on("click",function(t){var e=y(this).closest("div#post-visibility-select"),a=e.find('input[name="visibility"]:checked').val();if(b.uc_editor.edits.update("visibility",a),"private"==a)y("div#submitpost input#publish").val(udclion[v.type+"s"].update),y("div#misc-publishing-actions span#post-status-display").html(udclion[v.type+"s"].privately_published),y("div#misc-publishing-actions a.edit-post-status").hide(),y("div#submitpost input#save-post").hide();else{if(-1===y.inArray(o.post_status,["publish","future"])?y("div#submitpost input#publish").val(udclion[v.type+"s"].publish):"future"!==o.post_status&&b.is_input_future_date()?y("div#submitpost input#publish").val(udclion[v.type+"s"].schedule):y("div#submitpost input#publish").val(udclion[v.type+"s"].update),"password"==a){e=e.find("input#post_password").val();if(0==e.trim().length)return void UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].password_missing+"</p>");b.uc_editor.edits.update("password",e)}switch(b.uc_editor.edits.exists("status")?b.uc_editor.edits.item("status"):o.post_status){case"pending":status_text=udclion[v.type+"s"].pending_review;break;case"draft":status_text=udclion[v.type+"s"].draft;break;case"publish":status_text=udclion[v.type+"s"].published;break;default:status_text=udclion[v.type+"s"].published,y('#post-status-select select#post_status option[value="publish"]').prop("selected",!0).html(status_text)}y("div#misc-publishing-actions a.edit-post-status").show(),y("div#misc-publishing-actions span#post-status-display").html(status_text),y("div#post-status-select a.save-post-status").trigger("click")}switch(a){case"public":visibility_text=udclion[v.type+"s"].public,y("div#post-visibility-select span#sticky-span input#sticky").is(":checked")&&(visibility_text+=", "+udclion[v.type+"s"].sticky);break;case"password":visibility_text=udclion[v.type+"s"].password_protected;break;case"private":visibility_text=udclion[v.type+"s"].private}y("div#misc-publishing-actions span#post-visibility-display").html(visibility_text),y(this).siblings("a.cancel-post-visibility").trigger("click")}),y("div#post-visibility-select a.cancel-post-visibility").on("click",function(t){y("div#post-visibility-select").slideUp("fast","swing",function(){y("div#classic_editor a.edit-visibility").show()})}),y("div#post-visibility-select input#visibility-radio-password").on("click",function(t){"post"==v.type&&y("div#post-visibility-select span#sticky-span").hide(),y("div#post-visibility-select span#password-span").show()}),y("div#post-visibility-select").on("click","input#visibility-radio-public, input#visibility-radio-private",function(t){"post"==v.type&&("visibility-radio-public"===y(this).attr("id")?y("div#post-visibility-select span#sticky-span").show():y("div#post-visibility-select span#sticky-span").hide()),y("div#post-visibility-select span#password-span").hide()}),y("div#classic_editor a.edit-timestamp").on("click",function(t){y(this).hide(),y("fieldset#timestampdiv").slideDown("fast");var e=b.uc_editor.edits.item("timestamp"),a=void 0!==e&&void 0!==e.month?e.month:r.published_date.mm,i=void 0!==e&&void 0!==e.day?e.day:r.published_date.jj,n=void 0!==e&&void 0!==e.year?e.year:r.published_date.aa,o=void 0!==e&&void 0!==e.hour?e.hour:r.published_date.hh,s=void 0!==e&&void 0!==e.minute?e.minute:r.published_date.mn,e=void 0!==e&&void 0!==e.second?e.second:r.published_date.ss;y("#timestampdiv select#mm").val(a),y("#timestampdiv input#jj").val(i),y("#timestampdiv input#aa").val(n),y("#timestampdiv input#hh").val(o),y("#timestampdiv input#mn").val(s),y("#timestampdiv input#ss").val(e)}),y("fieldset#timestampdiv a.save-timestamp").on("click",function(t){var e=y(this).closest("fieldset#timestampdiv"),a=e.find("div.timestamp-wrap"),a={month:a.find("select#mm").val(),day:a.find("input#jj").val(),year:a.find("input#aa").val(),hour:a.find("input#hh").val(),minute:a.find("input#mn").val(),second:e.find("input#ss").val()};b.validate_input_date(a)?(e=b.prepare_date(a),y("div#misc-publishing-actions span#timestamp > b").html(e.formatted),b.uc_editor.edits.update("date",e.date),b.uc_editor.edits.update("timestamp",e.timestamp),y(this).siblings("a.cancel-timestamp").trigger("click"),"future"!==o.post_status&&b.is_input_future_date()&&y("div#submitpost input#publish").val(udclion[v.type+"s"].schedule)):UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].invalid_date_input+"</p>")}),y("fieldset#timestampdiv a.cancel-timestamp").on("click",function(t){y("fieldset#timestampdiv").slideUp("fast","swing",function(){y("div#classic_editor a.edit-timestamp").show()})}),y("div#postimagediv").on("click","a#set-post-thumbnail",function(t){var e=y("#insert-media-button");(e=void 0!==e&&0!=e.length?e:y("button.insert-media")).trigger("click",["featured_image"])}),y(".wp-media-buttons").on("click","#insert-media-button, button.insert-media",function(t,e){var i,n;i=void 0!==e,n=setInterval(function(){var t,e,a=y("div[id^='__wp-uploader'].supports-drag-drop");void 0!==a&&a.length&&(clearInterval(n),t=a.find(".media-frame"),i?(void 0!==(e=0==(e=a.find(".media-menu-item:contains('"+udclion[v.type+"s"].featured_image+"')")).length?a.find("#menu-item-featured-image"):e)&&e.length&&(e.trigger("click"),(e=a.find(".media-menu-item:contains('"+udclion[v.type+"s"].media_library+"')")).length)&&!e.hasClass("active")&&e.trigger("click"),t.find("div.media-frame-menu").hide(),t.find(".media-frame-menu-heading").hide(),t.find("div[class^='media-frame-']").not(".media-frame-menu").css("left","0")):(void 0!==(e=0==(e=a.find(".media-menu-item:contains('"+udclion[v.type+"s"].add_media+"')")).length?a.find("#menu-item-insert"):e)&&e.length&&e.trigger("click"),t.find("div[class^='media-frame-']").not(".media-frame-menu").css("left","200px"),t.find(".media-frame-menu-heading").show(),t.find("div.media-frame-menu").show()))},100)}),y("div#postimagediv").on("click","a#remove-post-thumbnail",a),y(document).on("click","button.media-button-select",function(t){var a=setInterval(function(){var t=y("#postimagediv img.attachment-post-thumbnail"),e=y("div#postimagediv a#remove-post-thumbnail").attr("href");void 0!==t&&t.length&&"#"==e&&(clearInterval(a),y("div#postimagediv a#remove-post-thumbnail").attr("href","#set-post-thumbnail"),b.uc_editor.edits.update("featured_media",y("input#_thumbnail_id").val()))},100)}),"post"==v.type&&(y("#categorydiv a#category-add-toggle").on("click",function(t){y("div#category-adder p#category-add").show()}),y("a#link-post_tag").on("click",function(t){var e=y("div#mostused-post_tag").html().trim();0==e.length&&e!==udclion.posts.no_tags_found&&y("div#mostused-post_tag").html(udclion.posts.no_tags_found),y("div#mostused-post_tag").is(":visible")?y("div#mostused-post_tag").hide():y("div#mostused-post_tag").show()}),y("div.categorydiv").on("click",'ul#categorychecklist input[type="checkbox"], ul#categorychecklist-pop input[type="checkbox"]',function(){var t=y(this).val();switch(y(this).closest(".categorychecklist").attr("id")){case"categorychecklist":y('ul#categorychecklist-pop li input[value="'+t+'"]').prop("checked",y(this).is(":checked"));break;case"categorychecklist-pop":y('ul#categorychecklist li input[value="'+t+'"]').prop("checked",y(this).is(":checked"))}var e=[];y('#categorychecklist li > label.selectit > input[type="checkbox"]').each(function(){y(this).is(":checked")&&e.push(y(this).val())}),b.uc_editor.edits.update("categories",e)}),y("div.categorydiv input#category-add-submit").on("click",function(){var t,e,a=y("input#newcategory"),i=y("select#newcategory_parent");void 0!==a.val()&&a.val().length?(t=a.val().trim(),t=i.val().length?i.val()+":"+t:t,y("#categorychecklist").prepend('<li id="category-0" class="popular-category"><label class="selectit"><input value="'+t+'" type="checkbox" name="post_category[]" id="in-category-0" checked="checked"> '+a.val()+"</label></li>"),a.val(""),i.val(""),y(this).closest("p#category-add").hide(),e=[],y('#categorychecklist li > label.selectit > input[type="checkbox"]').each(function(){y(this).is(":checked")&&e.push(y(this).val())}),b.uc_editor.edits.update("categories",e)):UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion.posts.need_category_to_add+"</p>")}),y("#tagsdiv-post_tag input.tagadd").on("click",function(){var t=y("#tagsdiv-post_tag input#new-tag-post_tag");if(void 0!==t.val()&&t.val().length){for(var e=[t.val()],a=(-1!==t.val().indexOf(",")&&(e=t.val().split(",")),[]),i=(y("#tagsdiv-post_tag .tagchecklist > span").each(function(){a.push(y(this).text().trim())}),y("#tagsdiv-post_tag .tagchecklist")),n=i.find("> span").length,o=0;o<e.length;o++){var s=e[o].trim();b.is_ivalue_exists(s,a)||(i.append('<span><button type="button" id="post_tag-check-num-'+n+'" class="ntdelbutton"><span class="remove-tag-icon" aria-hidden="true"></span></button>&nbsp;'+s+"</span>"),i.find("#post_tag-check-num-"+n).on("click",function(){y(this).parent().remove();var t=[];y("#tagsdiv-post_tag .tagchecklist > span").each(function(){t.push(y(this).text().trim())}),b.uc_editor.edits.update("tags",t)}),a.push(s),n++)}t.val(""),b.uc_editor.edits.update("tags",a)}else UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion.posts.need_something_to_add+"</p>")}),y("#tagsdiv-post_tag .tagchecklist button.ntdelbutton").on("click",function(){y(this).parent().remove();var t=[];y("#tagsdiv-post_tag .tagchecklist > span").each(function(){t.push(y(this).text().trim())}),b.uc_editor.edits.update("tags",t)}),y("#tagsdiv-post_tag #mostused-post_tag a").each(function(){y(this).attr("href","javascript://")}),y("#tagsdiv-post_tag #mostused-post_tag a").on("click",function(){var t=[],e=(b.uc_editor.edits.exists("tags")?t=b.uc_editor.edits.item("tags"):y("#tagsdiv-post_tag .tagchecklist > span").each(function(){t.push(y(this).text().trim())}),y("#tagsdiv-post_tag .tagchecklist")),a=e.find("> span").length,i=y(this).text().replace(/\(\d\)/gi,"").trim();b.is_ivalue_exists(i,t)||(e.append('<span><button type="button" id="post_tag-check-num-'+a+'" class="ntdelbutton"><span class="remove-tag-icon" aria-hidden="true"></span></button>&nbsp;'+i+"</span>"),e.find("#post_tag-check-num-"+a).on("click",function(){y(this).parent().remove();var t=[];y("#tagsdiv-post_tag .tagchecklist > span").each(function(){t.push(y(this).text().trim())}),b.uc_editor.edits.update("tags",t)}),t.push(i),b.uc_editor.edits.update("tags",t))}),y("#categorydiv a#uc_tab_category_all").on("click",function(t){y("#categorydiv a#uc_tab_category_all").closest("li").toggleClass("tabs"),y("#categorydiv a#uc_tab_category_pop").closest("li").toggleClass("tabs"),y("div#category-pop").hide(),y("div#category-all").show()}),y("#categorydiv a#uc_tab_category_pop").on("click",function(t){y("div#category-all ul#categorychecklist li input:checked").each(function(){var t=y(this).val();y('div#category-pop ul#categorychecklist-pop li input[value="'+t+'"]').prop("checked",!0)}),y("#categorydiv a#uc_tab_category_all").closest("li").toggleClass("tabs"),y("#categorydiv a#uc_tab_category_pop").closest("li").toggleClass("tabs"),y("div#category-all").hide(),y("div#category-pop").show()})),y('#uc-page-attributes-container select[name="parent_id"]').on("change",function(t){b.uc_editor.edits.update("parent",y(this).val())}),y('#uc-page-attributes-container select[name="page_template"]').on("change",function(t){b.uc_editor.edits.update("template",y(this).val())}),y('#uc-page-attributes-container input[name="menu_order"]').on("change",function(t){d(0,y(this),"order",!0,!0)})},500)}}function m(t){var e;void 0!==t&&t&&(e={date_filter:t.date},"post"==v.type&&(e.category_filter=t.category),t=UpdraftCentral.template_replace(v.type+"s-manage-filters",e),e=y("<div/>",{class:"hidden"}).html(t).find("select.uc-"+v.type+"-date-filter"),y(".uc-"+v.type+"-buttons-filters select.uc-"+v.type+"-date-filter").replaceWith(e),"post"==v.type)&&(e=y("<div/>",{class:"hidden"}).html(t).find("select.uc-post-category-filter"),y(".uc-post-buttons-filters select.uc-post-category-filter").replaceWith(e))}function a(t){t.preventDefault();t=y(this).closest(".inside");t.find("#set-post-thumbnail-desc").remove(),t.find("#set-post-thumbnail").removeAttr("aria-describedby").html(udclion[v.type+"s"].set_featured_image),t.find("input#_thumbnail_id").val(0),y(this).parent().remove(),b.uc_editor.edits.update("featured_media",0)}function g(){var t,e=UpdraftCentral.$site_row.data("admin_url"),a=0,i=setInterval(function(){(t=void 0!==(t=y(".edit-post-fullscreen-mode-close__toolbar > a"))&&null!=t&&0!=t.length?t:y("a.edit-post-fullscreen-mode-close")).length?(clearInterval(i),"#"!==t.attr("href")&&(redirect_url=e+t.attr("href"),t.attr("href","#").removeAttr("target").attr("onclick",'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+redirect_url+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));"))):60<a&&clearInterval(i),a++},1e3)}function k(t){wp.blocks.setCategories(t.block_categories),wp.blocks.unstable__bootstrapServerSideBlockDefinitions(t.block_definitions);var e=wp.blocks.getBlockTypes();if(0<e.length)for(var a=0;a<e.length;a++){var i=e[a];wp.blocks.unregisterBlockType(i.name)}}function C(a,i,n){var o=y.Deferred(),e="/wp/v2/users/?who=authors&per_page=100";return wp.apiFetch({path:e,method:"GET"}).then(function(t){wp.data.dispatch("core").receiveUserQuery(e,t).then(function(e){wp.data.select("core").getUsers=function(t){return e.users},o.resolve({authors:e.users,data:a,post:i,settings:n})})}).catch(function(t){o.reject(t)}),o.promise()}function c(t,i,e){var a,n,o=i.find(".updraftcentral_row_extracontents");void 0!==t[v.type+"s"]&&t[v.type+"s"]&&((0===o.find(".uc-navlinks-container").length||void 0!==e&&e)&&(a={date_filter:t.options.date},"post"==v.type&&(a.category_filter=t.options.category),a=UpdraftCentral.template_replace(v.type+"s-manage-filters",a),n=UpdraftCentral.template_replace(v.type+"s-items",{}),o.html(a+n),o.find("input.uc-"+v.type+"-check-all").on("click",function(t){var e=y(this),a=i;a=a.find(".uc-"+v.type+"-items-container .uc-"+v.type+"-item"),e.is(":checked")&&a.length?a.find('input[name="post[]"]').prop("checked",!0):a.find('input[name="post[]"]').prop("checked",!1)})),void 0!==e&&e&&(b.current_group="all",r(b.current_group),y("ul#uc-navlinks a.uc-navlink-item").css("cssText","font-weight: normal;"),y('ul#uc-navlinks a.uc-navlink-item[data-group="'+b.current_group+'"]').css("cssText","font-weight: bold !important;")),b.pagination.set_remote_data({info:t.info,items:t[v.type+"s"]}),p(1,i),_(t[v.type+"s_count"]),UpdraftCentral_Library.enable_actions())}function s(i,t,n,e,a,o,s,r){t={name:"get",arguments:{numberposts:l,paged:void 0!==t&&t?t:1,status:void 0!==n&&n?n:"all",keyword:void 0!==e&&e?e:"",date:void 0!==a&&a?a:"",timeout:void 0!==udclion.user_defined_timeout&&udclion.user_defined_timeout?udclion.user_defined_timeout:30}};"post"==v.type&&(t.arguments.category=void 0!==o&&o?o:""),void 0!==r&&r&&(t.arguments.preload=1),UpdraftCentral_Library.disable_actions(),u(t,i).then(function(t){var e,a;void 0!==n&&n&&y('ul#uc-navlinks a.uc-navlink-item[data-group="'+n+'"]').css("cssText","font-weight: bold !important;"),t.hasOwnProperty(v.type+"s")&&t[v.type+"s"]&&(b.manage_data.update("response",t),t.hasOwnProperty("preloaded")&&t.preloaded&&(b.manage_data.update("preloaded_data",t.preloaded),e=JSON.parse(t.preloaded),a=i.data("site_id"),e.hasOwnProperty("wp_version"))&&e.wp_version&&(b.wp_versions.exists(a)||b.wp_versions.add(a,e.wp_version)),t.hasOwnProperty("options"))&&t.options&&("page"==v.type&&!b.manage_data.exists("parent_options")&&t.options.hasOwnProperty("page")&&b.manage_data.add("parent_options",t.options.page),!b.manage_data.exists("template_options"))&&t.options.hasOwnProperty("template")&&b.manage_data.add("template_options",t.options.template),c(t,i,s=void 0!==s&&s)})}function d(t,e,a,i,n){var o=!0,s=e.val();return void 0!==i&&i&&!UpdraftCentral_Library.is_numeric(s)&&(o=!1),0!=s.trim().length&&o?(b.dirty_edits.remove(a),(void 0!==n&&n?b.uc_editor.edits:b.quick_edits).update(a,s),!0):(b.dirty_edits.update(a,1),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+sprintf(udclion[v.type+"s"].invalid_missing_value,a)+"</p>",function(){setTimeout(function(){e.trigger("focus")},500)}),!1)}function r(t){var e=y(".uc-"+v.type+"-buttons-filters select.uc-"+v.type+"-action");switch(t){case"publish":e.find('option[value="publish"], option[value="restore"], option[value="delete"]').hide(),e.find('option[value="draft"], option[value="trash"]').show();break;case"private":case"draft":case"pending":e.find('option[value="draft"], option[value="restore"], option[value="delete"]').hide(),e.find('option[value="trash"], option[value="publish"]').show();break;case"trash":e.find('option[value="draft"], option[value="trash"], option[value="publish"]').hide(),e.find('option[value="restore"], option[value="delete"]').show();break;default:e.find('option[value="draft"], option[value="publish"], option[value="restore"], option[value="delete"]').hide(),e.find('option[value="trash"]').show()}}function u(t,e){var n=y.Deferred();return UpdraftCentral.send_site_rpc(v.type+"s."+t.name,t.arguments,e,function(t,e,a){var i;UpdraftCentral.ajax_request_processing=!1,"ok"!==e||void 0===t.data||null===t.data||t.data.error?(void 0!==t.data&&t.data&&void 0!==t.data.error&&(e="",void 0!==udclion.plugin[t.data.message]?(e=udclion.plugin[t.data.message],void 0!==t.data.values&&Array.isArray(t.data.values)&&(e=vsprintf(e,t.data.values))):void 0!==udclion[t.data.message]?(e=udclion[t.data.message],void 0!==t.data.values&&Array.isArray(t.data.values)&&(e=vsprintf(e,t.data.values))):(i=t.data.message,void 0!==t.data.messages&&t.data.messages.length&&(i=t.data.messages[0]),e=sprintf(udclion.plugin.general_error,i)),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+e+"</p>")),n.reject(t)):n.resolve(t.data)},e,90),n.promise()}function x(t,e,a,i){var n="";if(void 0!==t&&t)for(var o,s=0;s<t.length;s++)if(o=t[s],void 0!==e&&e&&(void 0===i||!Array.isArray(i)||!i.length||-1===y.inArray(o[e.value],i)))if(void 0!==a&&a)switch(a){case"categories":n+='<li id="category-'+o[e.value]+'"><label><input id="in-category-'+o[e.value]+'" type="checkbox" name="post_category[]" value="'+o[e.value]+'" /> '+o[e.label]+"</label></li>";break;case"tags":n+=0==s?o[e.label]:", "+o[e.label]}else n+='<option value="'+o[e.value]+'">'+o[e.label]+"</option>";return n}function p(t,e){var t=b.pagination.get_data(t),a=e.find(".updraftcentral_row_extracontents"),i=b.manage_data.item("response"),n={template:x(i.options.template,{value:"filename",label:"template"}),page:x(i.options.page,{value:"id",label:"title"}),author:x(i.options.author,{value:"id",label:"name"})},i=("post"==v.type&&(n.category=x(i.options.category,{value:"id",label:"name"},"categories"),n.tag=x(i.options.tag,{value:"id",label:"name"},"tags")),{options:n,posts:t.items}),n=UpdraftCentral.template_replace(v.type+"s-items",i),t=(a.find(".uc-"+v.type+"-items-container").html(n),e);if((t=t.find(".updraftcentral_row_extracontents")).find(".row.uc-"+v.type+"-item:even").addClass("uc-"+v.type+"-item-even"),t.find(".row.uc-"+v.type+"-item:odd").addClass("uc-"+v.type+"-item-odd"),"post"==v.type)for(var o=[".post-item-categories",".post-item-tags"],s=0;s<o.length;s++)y(".uc-post-item "+o[s]).each(function(){var t,e="",a=y(this).html().trim();if(a.length&&-1!==a.indexOf(",")){if(5<(t=a.split(",")).length){for(var i=0;i<5;i++)e+=0==i?t[i]:", "+t[i];e+="..."}e.length&&y(this).html(e)}});b.pagination.render(),a=(i=e).find(".updraftcentral_row_extracontents"),i=i.data("site_id"),(!b.wp_versions.exists(i)||(i=b.wp_versions.item(i),parseInt(i)<5))&&a.find("a."+v.type+'-action-item[data-action="edit-gutenberg"]').remove()}function _(t){var e;void 0!==t&&t&&((e=y("div.uc-navlinks-container ul#uc-navlinks")).find("li.all span.count").html("("+t.all+")"),e.find("li.publish span.count").html("("+t.publish+")"),e.find("li.private span.count").html("("+t.private+")"),e.find("li.draft span.count").html("("+t.draft+")"),e.find("li.pending span.count").html("("+t.pending+")"),e.find("li.future span.count").html("("+t.future+")"),e.find("li.trash span.count").html("("+t.trash+")"))}this.init=function(){y(document.body).on("click","div.media-modal li.attachment",function(){b.set_selected_image(y(this))}),y(document.body).on("mouseover",".components-notice-list",function(){y(this).find("a.components-notice__action.is-link").attr("target","_blank")}),y(document.body).on("click",'input[name="uc-dont-show-again"]',function(){"undefined"!=typeof localStorage&&localStorage&&(y(this).is(":checked")?localStorage.setItem("uc-gutenberg-dialog-no-show",1):localStorage.removeItem("uc-gutenberg-dialog-no-show"))}),y(document.body).on("click","label.uc-dont-show-again-label",function(){y(this).siblings('input[name="uc-dont-show-again"]').trigger("dblclick")}),y(document).on("keyup",function(t){27!==(t.keyCode||t.which)&&"Escape"!==t.key||y("#updraftcentral_dashboard").is(":visible")||y("#updraftcentral_dashboard").show()}),y("#updraftcentral_dashboard").on("updraftcentral_dialog_opened",function(){y.fullscreen.isFullScreen()&&y("#classic_editor_container").is(":visible")&&(y(".bootbox.modal").appendTo("#classic_editor_container"),y(".modal-backdrop-container").appendTo("#classic_editor_container"))}),y("#updraftcentral_dashboard").on("editor-has-recovered",function(){b.apply_subscriptions_observer(b.reset_info.data,b.reset_info.previous_status,b.reset_info.location),b.clear_notices()}),y(document.body).on("fullscreenchange",function(){var t,e;y.fullscreen.isFullScreen()||(t=y(document.body).find("div#classic_editor_container"),e=y(document.body).find("div#gutenberg_editor_container"),"undefined"!=typeof($container=t.is(":visible")?t:e)&&$container.length&&$container.is(":visible")&&void 0!==(e=y("#updraftcentral_dashboard").parent().find("#"+$container.attr("id")))&&e.length&&(y("#updraftcentral_dashboard").parent().removeAttr("style"),e.removeAttr("style"),e.appendTo(document.body),t.is(":visible")&&"undefined"!=typeof tinymce&&tinymce&&b.init_tiny_mce("uc_classic_editor"),b.unload_remote_editor_styles(),b.load_remote_editor_styles($container)))}),y(document.body).on("mouseover","div."+v.type+"-item-title",function(){y(this).find("div."+v.type+"-actions").show()}).on("mouseout",function(){y(this).find("div."+v.type+"-actions").hide()}),y(".updraftcentral-show-in-tab-"+v.type+"s button.updraftcentral_action_choose_another_site").on("click",function(){b.editor_reload_required=!0}),y(document.body).on("updraftcentral_"+v.type+"_editor_loaded",function(t,e){y(document.body).addClass("uc-editor-loaded"),b.load_remote_editor_styles(e),y.fullscreen.isFullScreen()&&void 0!==e&&e.length&&e.appendTo(y("#updraftcentral_dashboard").parent()),b.listen_for_fullscreen_resources(),y("#updraftcentral_dashboard").hide()}),y(document.body).on("updraftcentral_"+v.type+"_editor_closed",function(t,e){y(document.body).removeClass("uc-editor-loaded"),b.unload_remote_editor_styles(),y.fullscreen.isFullScreen()||void 0!==e&&e.length&&void 0!==(e=y("#updraftcentral_dashboard").parent().find("#"+e.attr("id")))&&e.length&&e.appendTo(document.body),UpdraftCentral.unsubscribe_to_node_changes("uc_body_resources"),y("#updraftcentral_dashboard").show(),UpdraftCentral.clear_editor_container(null)})},this.register_module_handlers=function(){UpdraftCentral.register_row_clicker("input.uc-"+v.type+"-search-"+v.type+"s",function(t,e,a){var i,n,o;13===a.which&&(a=y(this).val(),n=y("select.uc-"+v.type+"-date-filter").val(),i="post"==v.type?y("select.uc-"+v.type+"-category-filter").val():null,o=null,n&&(o=(n=new Date(n.replace(" "," 1, "))).getMonth()+1+":"+n.getFullYear()),s(t,null,b.current_group,a,o,i))},!0,"keyup"),UpdraftCentral.register_row_clicker("button#uc-apply-action",function(e){var t,a=y(".uc-"+v.type+"-buttons-filters select.uc-"+v.type+"-action").val(),i=[];e.find(".uc-"+v.type+"-items-container .uc-"+v.type+"-item").each(function(){var t=y(this),e=t.data("id");t.find('input[name="post[]"]').is(":checked")&&i.push(e)}),i.length&&((t={name:"set_state",arguments:{list:i,action:a,paged:1,status:"all"}}).arguments["number"+v.type+"s"]=l,u(t,e).then(function(t){void 0!==t[v.type+"s"]&&t[v.type+"s"]?(t.hasOwnProperty("get")&&t.get&&(b.manage_data.update("response",t.get),c(t.get,e,!0)),y(".uc-"+v.type+"-buttons-filters select.uc-"+v.type+'-action > option[value="'+a+'"]').text(),UpdraftCentral_Library.dialog.alert("<h2>"+udclion[v.type+"s"].post_update_heading+"</h2><p>"+udclion[v.type+"s"].action_messages[a]+"</p>")):UpdraftCentral_Library.dialog.alert("<h2>"+udclion[v.type+"s"].post_update_heading+"</h2><p>"+udclion[v.type+"s"].unkown_error+"</p>")}))}),UpdraftCentral.register_row_clicker("select.uc-post-category-filter",function(t){var e=y(this).val(),a=y("select.uc-post-date-filter").val(),i=null,a=(a&&(i=(a=new Date(a.replace(" "," 1, "))).getMonth()+1+":"+a.getFullYear()),y("input.uc-post-search-posts").val());s(t,null,b.current_group,a,i,e)},!0,"change"),UpdraftCentral.register_row_clicker("select.uc-"+v.type+"-date-filter",function(t){var e=y(this).val(),a="post"==v.type?y("select.uc-"+v.type+"-category-filter").val():null,i=null,e=(e&&(i=(e=new Date(e.replace(" "," 1, "))).getMonth()+1+":"+e.getFullYear()),y("input.uc-"+v.type+"-search-"+v.type+"s").val());s(t,null,b.current_group,e,i,a)},!0,"change"),UpdraftCentral.register_row_clicker("ul#uc-navlinks a.uc-navlink-item",function(t){var e=y(this).data("group");r(b.current_group=e),y("ul#uc-navlinks a.uc-navlink-item").css("cssText","font-weight: normal;"),y('ul#uc-navlinks a.uc-navlink-item[data-group="'+e+'"]').css("cssText","font-weight: bold !important;"),y("input.uc-"+v.type+"-search-"+v.type+"s").val(""),y("select.uc-"+v.type+"-date-filter").val(""),"post"==v.type&&y("select.uc-"+v.type+"-category-filter").val(""),s(t,null,e)}),UpdraftCentral.register_row_clicker(".uc-"+v.type+"-items-container a."+v.type+'-action-item[data-action="quick-edit"]',function(t){var e,a=y("div.uc_quick_edit:visible"),a=(a.length&&a.find("button.cancel").trigger("click"),y(this).data("id")),i=y("div#"+v.type+"-quick-edit-"+a),n=i.data("author"),o=i.data("parent"),s=i.data("template"),r=(y("div#"+v.type+"-item-"+a).hide(),i.show(),"post"==v.type&&i.find("div.category-checklist-wrapper").scrollTop(0),b.quick_edits.clear(),b.dirty_edits.clear(),i);void 0!==r&&r&&(e=r.data("id"),r.find(".uc-"+v.type+'-title input[name="post_title"]').off("change").on("change",function(){d(0,y(this),"title")}),r.find(".uc-"+v.type+'-slug input[name="post_name"]').off("change").on("change",function(){d(0,y(this),"slug")}),r.find(".uc-"+v.type+'-date select[name="mm"]').off("change").on("change",function(){b.quick_edits.update("mm",y(this).val())}),r.find(".uc-"+v.type+'-date input[name="jj"]').off("change").on("change",function(){d(0,y(this),"jj",!0)}),r.find(".uc-"+v.type+'-date input[name="aa"]').off("change").on("change",function(){d(0,y(this),"aa",!0)}),r.find(".uc-"+v.type+'-date input[name="hh"]').off("change").on("change",function(){d(0,y(this),"hh",!0)}),r.find(".uc-"+v.type+'-date input[name="mn"]').off("change").on("change",function(){d(0,y(this),"mn",!0)}),r.find(".uc-"+v.type+'-author select[name="post_author"]').off("change").on("change",function(){b.quick_edits.update("author",y(this).val())}),r.find(".uc-"+v.type+'-password input[name="post_password"]').off("change").on("change",function(){d(0,y(this),"password")?b.quick_edits.update("visibility","password"):y(".uc-"+v.type+'-password input[name="keep_private"]').is(":checked")||b.quick_edits.update("visibility","public")}),r.find(".uc-"+v.type+'-password input[name="keep_private"]').off("click").on("click",function(){y(this).is(":checked")?b.quick_edits.update("visibility","private"):0==y(".uc-"+v.type+'-password input[name="post_password"]').val().length&&b.quick_edits.update("visibility","public")}),r.find(".uc-"+v.type+'-parent select[name="post_parent"]').off("change").on("change",function(){b.quick_edits.update("parent",y(this).val())}),r.find(".uc-"+v.type+'-order input[name="post_order"]').off("change").on("change",function(){d(0,y(this),"order",!0)}),r.find(".uc-"+v.type+'-order input[name="menu_order"]').off("change").on("change",function(){d(0,y(this),"order",!0)}),r.find(".uc-"+v.type+'-template select[name="post_template"]').off("change").on("change",function(){b.quick_edits.update("template",y(this).val())}),r.find(".uc-"+v.type+'-comment-ping input[name="comment_status"]').off("click").on("click",function(){var t=y(this).is(":checked")?"open":"closed";b.quick_edits.update("comment_status",t)}),r.find(".uc-"+v.type+'-comment-ping input[name="ping_status"]').off("click").on("click",function(){var t=y(this).is(":checked")?"open":"closed";b.quick_edits.update("ping_status",t)}),r.find(".uc-"+v.type+'-status select[name="status"]').off("change").on("change",function(){b.quick_edits.update("status",y(this).val())}),r.find('.uc-post-sticky input[name="sticky"]').off("click").on("click",function(){var t=y(this).is(":checked")?1:0;b.quick_edits.update("sticky",t)}),r.find('ul#category-checklist input[type="checkbox"]').off("click").on("click",function(){var t=[];r.find('ul#category-checklist input[type="checkbox"]:checked').each(function(){t.push(y(this).val())}),b.quick_edits.update("categories",t)}),r.find("textarea#post_tag").off("change").on("change",function(){y(this).val().length&&b.quick_edits.update("tags",y(this).val().split(","))})),i.find(".uc-"+v.type+'-author select[name="post_author"] > option[value="'+n+'"]').prop("selected",!0),i.find(".uc-"+v.type+'-parent select[name="post_parent"] > option[value="'+a+'"]').hide(),i.find(".uc-"+v.type+'-parent select[name="post_parent"] > option[value="'+o+'"]').prop("selected",!0),i.find(".uc-"+v.type+'-template select[name="post_template"] > option[value="'+s+'"]').prop("selected",!0)}),UpdraftCentral.register_row_clicker(".uc_quick_edit button.cancel",function(t){var e=y(this).closest(".uc_quick_edit").data("id");y("div#"+v.type+"-quick-edit-"+e).hide(),y("div#"+v.type+"-item-"+e).show()}),UpdraftCentral.register_row_clicker(".uc_quick_edit button.save",function(t){var n=y(this).closest("div.uc_quick_edit"),e=n.data("id"),o=y(".uc-"+v.type+"-items-container div#"+v.type+"-item-"+e);if(b.dirty_edits.count())return UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].dirty_edits+"</p>"),!1;if(b.quick_edits.count()){if(b.quick_edits.update("id",e),b.has_quickedit_date_changed()){e=y("div#"+v.type+"-quick-edit-"+e),e={month:e.find(".uc-"+v.type+'-date select[name="mm"]').val(),day:e.find(".uc-"+v.type+'-date input[name="jj"]').val(),year:e.find(".uc-"+v.type+'-date input[name="aa"]').val(),hour:e.find(".uc-"+v.type+'-date input[name="hh"]').val(),minute:e.find(".uc-"+v.type+'-date input[name="mn"]').val(),second:e.find(".uc-"+v.type+'-date input[name="ss"]').val()};if(!b.validate_input_date(e))return UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].invalid_date_input+"</p>"),!1;var a=b.prepare_date(e);b.quick_edits.update("date",a.date),b.quick_edits.update("timestamp",a.timestamp),b.quick_edits.exists("status")&&"publish"==b.quick_edits.item("status")&&b.is_input_future_date(e)&&b.quick_edits.update("status","future")}u({name:"save",arguments:b.quick_edits.get_collection_object()},t).then(function(t){var e,a,i;void 0!==t.post&&t.post?(e={post:JSON.parse(t.post),misc:t.misc},void 0!==t.preloaded&&t.preloaded&&(a=JSON.parse(t.preloaded),void 0!==(i=b.manage_data.item("preloaded_data")))&&i&&((i=JSON.parse(i)).categories=a.categories,i.tags=a.tags,b.manage_data.update("preloaded_data",JSON.stringify(i))),h(e,o.data("status")),t.hasOwnProperty("options")&&m(t.options)):(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].unkown_error+"</p>"),n.find("button.cancel").trigger("click"))})}else UpdraftCentral_Library.dialog.alert("<h2>"+udclion[v.type+"s"].quick_edit_heading+"</h2><p>"+udclion[v.type+"s"].no_changes+"</p>"),n.find("button.cancel").trigger("click")}),UpdraftCentral.register_row_clicker("."+v.type+"-actions > a."+v.type+"-action-item",function(e){var t,a,i,n,o,s=y(this).data("action"),r=y(this).data("id"),d=y(this).closest("div#"+v.type+"-item-"+r).data("json");-1!==y.inArray(s,["edit-classic","edit-gutenberg"])?"gutenberg"!==(t=s.replace("edit-",""))||(a=!1,a=!("undefined"==typeof localStorage||!localStorage||void 0===(i=localStorage.getItem("uc-gutenberg-dialog-no-show"))||!i||1!==parseInt(i))||a)?b.load_updraftcentral_editor(t,d,e):UpdraftCentral_Library.dialog.custom("<h2>"+udclion[v.type+"s"].gutenberg_support+"</h2><p>"+udclion[v.type+"s"].gutenberg_notice+'</p><p><input type="checkbox" name="uc-dont-show-again" id="uc-dont-show-again" value="1"><label class="uc-dont-show-again-label" for="uc-dont-show-again">'+udclion[v.type+"s"].dont_show+"</label></p>",null,{classic:{label:"Use classic",className:"btn-secondary",callback:function(){b.load_updraftcentral_editor("classic",d,e)}},gutenberg:{label:"Continue",className:"btn-primary",callback:function(){b.load_updraftcentral_editor(t,d,e)}}}):-1!==y.inArray(s,["trash","restore","delete"])?(i=r,o=e,void 0!==(n=s)&&n&&((i={name:"set_state",arguments:{id:i,action:n,paged:1,status:"all"}}).arguments["number"+v.type+"s"]=l,u(i,o).then(function(t){void 0!==t[v.type]?(t.hasOwnProperty("get")&&t.get&&(b.manage_data.update("response",t.get),c(t.get,o,!0)),y(".uc-"+v.type+"-buttons-filters select.uc-"+v.type+'-action > option[value="'+n+'"]').text(),UpdraftCentral_Library.dialog.alert("<h2>"+udclion[v.type+"s"].post_update_heading+"</h2><p>"+udclion[v.type+"s"].action_messages[n]+"</p>")):UpdraftCentral_Library.dialog.alert("<h2>"+udclion[v.type+"s"].post_update_heading+"</h2><p>"+udclion[v.type+"s"].unkown_error+"</p>")}))):"take-over"===s&&u({name:"take_over",arguments:{post_id:r}},e).then(function(t){void 0!==t.lock_acquired&&t.lock_acquired&&e.find("button.updraftcentral_manage_"+v.type+"s").trigger("click")})}),UpdraftCentral.register_row_clicker(".updraftcentral_create_"+v.type,function(i){i.find(".updraftcentral_row_extracontents").empty(),b.current_section="create";var t=UpdraftCentral.template_replace(v.type+"s-create",{});UpdraftCentral_Library.dialog.confirm("<h2>"+udclion[v.type+"s"].new_post+"</h2><p>"+t+"</p>",function(t){var a;t&&(0==(t=y("input.uc-title-input").val()).trim().length?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].title_missing+"</p>"):(a=y("input.uc-editor-choice:checked").val(),u({name:"save",arguments:{title:t,content:"",new:1},timeout:void 0!==udclion.user_defined_timeout&&udclion.user_defined_timeout?udclion.user_defined_timeout:30},i).then(function(t){var e;void 0!==t.post&&t.post?(e={post:JSON.parse(t.post),misc:t.misc},t.hasOwnProperty("preloaded")&&t.preloaded&&b.manage_data.update("preloaded_data",t.preloaded),t.hasOwnProperty("options")&&t.options&&("page"==v.type&&!b.manage_data.exists("parent_options")&&t.options.hasOwnProperty("page")&&b.manage_data.add("parent_options",t.options.page),!b.manage_data.exists("template_options"))&&t.options.hasOwnProperty("template")&&b.manage_data.add("template_options",t.options.template),b.load_updraftcentral_editor(a,e,i)):(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[v.type+"s"].unkown_error+"</p>"),console.log(t))})))})},!0),UpdraftCentral.register_row_clicker(".updraftcentral_manage_"+v.type+"s",function(n){b.manage_data.clear(),b.current_section="manage",b.current_group="all",b.pagination=new UpdraftCentral_Pagination({container:".uc-"+v.type+"-pagination",items_per_page:50,type:"remote",callback:function(t){var e=y("input.uc-"+v.type+"-search-posts").val(),a=y("select.uc-"+v.type+"-date-filter").val(),i=null,a=(a&&(i=(a=new Date(a.replace(" "," 1, "))).getMonth()+1+":"+a.getFullYear()),"post"==v.type?y("select.uc-post-category-filter").val():null);s(n,t,b.current_group,e,i,a)}}),s(n,null,null,null,null,null,!0,!0)},!0)},this.listen_for_fullscreen_resources=function(){UpdraftCentral.subscribe_to_node_changes(document.body,function(t,e){var a;y.fullscreen.isFullScreen()?(void 0!==(a=y('div[id^="__wp-uploader-id"]').not(".media-frame"))&&a.length&&a.appendTo(y("#updraftcentral_dashboard").parent()),void 0!==(a=y(document.body).find("div.modal-backdrop-container"))&&a.length&&a.appendTo(y("#updraftcentral_dashboard").parent())):(y("#updraftcentral_dashboard").parent().find('div[id^="__wp-uploader-id"]').not(".media-frame").appendTo(document.body).hide(),y("#updraftcentral_dashboard").parent().find("div.modal-backdrop-container").appendTo(document.body))},"uc_body_resources")},this.has_quickedit_date_changed=function(){var t=!1;if(b.quick_edits.count())for(var e=["mm","jj","aa","hh","mn","ss"],a=0;a<e.length;a++)if(b.quick_edits.exists(e[a])){t=!0;break}return t},this.clear_notices=function(){var t=y("#gutenberg_editor_container .components-notice-list");if(t.length&&t.find(".components-notice.is-dismissible").each(function(){y(this).find("button.components-notice__dismiss").trigger("click")}),void 0!==(t=wp.data.select("core/notices").getNotices())&&t&&t.length)for(var e=0;e<t.length;e++)wp.data.dispatch("core/notices").removeNotice(t[e].id)},this.observe_editor_error_state=function(){var t=y(".uc-block-editor-container #editor");UpdraftCentral.subscribe_to_node_changes(t,function(t,e){for(var a=[],i=[],n=0;n<t.length;n++){var o=t[n];o.addedNodes.length&&a.push(o.addedNodes[0].className),o.removedNodes.length&&i.push(o.removedNodes[0].className)}-1!==a.indexOf("components-drop-zone__provider")&&-1!==i.indexOf("components-drop-zone__provider")&&y("#updraftcentral_dashboard").trigger("editor-has-recovered")},"uc_editor")},this.send_upload_permissions=function(t){var e=setInterval(function(){wp.data.select("core/edit-post").isEditorPanelOpened("featured-image")||wp.data.dispatch("core/edit-post").toggleEditorPanelOpened("featured-image"),y("div.edit-post-sidebar .editor-post-featured-image").length&&(clearInterval(e),wp.data.dispatch("core").receiveUploadPermissions(t.has_upload_permissions),wp.data.dispatch("core/edit-post").toggleEditorPanelOpened("featured-image"))},1e3)},this.disable_publish_button=function(t){y("button.editor-post-publish-button").attr("aria-disabled",t),y("button.editor-post-publish-button").prop("disabled",t),y("button.editor-post-publish-panel__toggle").attr("aria-disabled",t),y("button.editor-post-publish-panel__toggle").prop("disabled",t)},this.update_permalink_preview_handler=function(){y(document.body).on("click","textarea.editor-post-title__input",function(){var e,a=wp.data.select("core/editor").getCurrentPost(),t=y(".editor-post-title__block");void 0!==t&&t.length&&t.hasClass("is-selected")&&(e=setInterval(function(){var t=y(".editor-post-permalink__link");void 0!==t&&t.length&&(clearInterval(e),y(".editor-post-permalink__link").attr("href","#").removeAttr("target").attr("onclick",'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+a.link+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));"))},500))})},this.prepare_date=function(t){function e(t){return t<10?"0"+t:t}var t=new Date(t.year,parseInt(t.month)-1,t.day,t.hour,t.minute,t.second),a={month:e(t.getMonth()+1),day:e(t.getDate()),year:t.getFullYear(),hour:e(t.getHours()),minute:e(t.getMinutes()),second:e(t.getSeconds())},i=a.year+"-"+a.month+"-"+a.day+"T"+a.hour+":"+a.minute+":"+a.second,n=new Date;return{date:i,future:t.getTime()>n.getTime(),formatted:t.toLocaleString("default",{year:"numeric",month:"short",day:"numeric"})+" @ "+e(t.getHours())+":"+e(t.getMinutes()),timestamp:a}},this.adjust_local_reference=function(e){var t=document.createElement("div");return t.innerHTML=e,y(t).find('img[src^="wp-content/"]').each(function(){var t;udclion.hasOwnProperty("home_url")&&udclion.home_url&&(t=y(this).attr("src"),e=e.replace(t,udclion.home_url+"/"+t))}),e},this.is_ivalue_exists=function(a,t){return!!y.grep(t,function(t,e){return a.toLowerCase()==t.toLowerCase()}).length},this.cleanupHistory=function(){var t=window.location.pathname;-1!=t.indexOf("post.php")&&(t=t.substring(0,t.indexOf("post.php"))),history.pushState("",document.title,t)},this.load_updraftcentral_editor=function(e,t,a){t={editor:e,post_data:JSON.stringify(t),site_id:a.data("site_id"),preloaded_data:b.manage_data.item("preloaded_data"),template_options:b.manage_data.item("template_options")};b.uc_editor.edits.clear(),b.uc_editor.state.clear(),b.send_local_command("load_post_editor",t,a).then(function(t){b.process_load_editor_response(e,t,a)}).always(function(){var t=y(document.body).find("div.modal-backdrop-container");void 0!==t&&t.length&&t.remove()})},this.scroll_content_to_top=function(){var t;y(window).scrollTop(0),y("div.edit-post-sidebar").scrollTop(0),y("div.editor-post-taxonomies__hierarchical-terms-list").scrollTop(0),t=setInterval(function(){(skeleton_container=y("div.block-editor-editor-skeleton__content")).length&&(clearInterval(t),skeleton_container.scrollTop(0))},1e3)},this.unload_remote_editor_styles=function(){b.disable_current_themes(!1),b.disable_current_wp_theme(!1),y('style[id^="uc_remote_styles-"]').remove(),y('style[id^="uc_local_styles-"]').remove();var t=y('head > style[id="uc-remote-fonts-inline-css"]');t.length&&t.remove()},this.load_remote_editor_styles=function(i){if(b.manage_data.exists("preloaded_data")){var t=b.manage_data.item("preloaded_data"),e=y(i).data("editor");if(void 0!==t&&t&&(data=JSON.parse(t)).hasOwnProperty("editor_styles")&&data.editor_styles)switch(e){case"gutenberg":var n=setInterval(function(){var t=y(i).find(".edit-post-visual-editor");if(void 0!==t&&t.length){clearInterval(n);var e=data.editor_styles;if(e.length){b.disable_current_themes(!0),t.hasClass("editor-styles-wrapper")||t.addClass("editor-styles-wrapper"),e.push({css:'.editor-styles-wrapper, .editor-styles-wrapper textarea { background: inherit; color: inherit; }\n\n.editor-styles-wrapper p { white-space: pre-wrap !important; word-wrap: break-word; }\n\n.editor-styles-wrapper img { vertical-align: inherit; border-style: inherit; }\n\n.screen-reader-text, .screen-reader-text span, .ui-helper-hidden-accessible { border: 0; clip: rect(1px, 1px, 1px, 1px); -webkit-clip-path: inset(50%); clip-path: inset(50%); height: 1px; margin: -1px; overflow: hidden; padding: 0; position: absolute; width: 1px; word-wrap: normal !important; }\n\n.editor-styles-wrapper button, .editor-styles-wrapper input[type="button"], .editor-styles-wrapper input[type="reset"], .editor-styles-wrapper input[type="submit"] { text-transform: inherit !important; }'});t="page"==v.type?udcstyles_page:udcstyles;void 0!==t&&t.hasOwnProperty("edit_"+v.type+"_css")&&y("<style/>",{id:"uc_local_styles-inline-edit_post"}).html(t["edit_"+v.type+"_css"]).appendTo(document.body);for(var a=0;a<e.length;a++)void 0!==e[a].css&&e[a].css.trim().length&&(y("<style/>",{id:"uc_remote_styles-"+a}).html(e[a].css).appendTo(document.body),e[a].hasOwnProperty("inline"))&&e[a].inline.length&&y("<style/>",{id:"uc_remote_styles-inline-"+a}).html(e[a].inline).appendTo(document.body);void 0!==t&&t.hasOwnProperty(v.type+"s_inline_css")&&y("<style/>",{id:"uc_local_styles-inline-posts"}).html(t[v.type+"s_inline_css"]).appendTo(document.body)}}},500);break;case"classic":var o=setInterval(function(){if(void 0!==tinymce.activeEditor&&tinymce.activeEditor&&tinymce.activeEditor.hasOwnProperty("dom")&&tinymce.activeEditor.dom){clearInterval(o);var t,e=data.editor_styles;if(e.length){b.disable_current_wp_theme(!0),tinymce.activeEditor.dom.hasOwnProperty("select")&&(tinymce.activeEditor.dom.hasOwnProperty("remove")&&void 0!==(t=tinymce.activeEditor.dom.select("head > link"))&&t&&tinymce.activeEditor.dom.remove(t),tinymce.activeEditor.dom.hasOwnProperty("hasClass"))&&tinymce.activeEditor.dom.hasOwnProperty("addClass")&&(tinyMCE.activeEditor.dom.hasClass(tinyMCE.activeEditor.dom.select("body"),"editor-styles-wrapper")||tinyMCE.activeEditor.dom.addClass(tinyMCE.activeEditor.dom.select("body"),"editor-styles-wrapper"),tinyMCE.activeEditor.dom.hasClass(tinyMCE.activeEditor.dom.select("body"),"entry-content")||tinyMCE.activeEditor.dom.addClass(tinyMCE.activeEditor.dom.select("body"),"entry-content")),e.push({css:"body, editor-styles-wrapper { background: inherit !important; max-width: inherit; }\n\nbody#tinymce { padding: 0px 20px; }\n\nbody::before { position: relative; }"});for(var a=0;a<e.length;a++)void 0!==e[a].css&&e[a].css.trim().length&&tinymce.activeEditor.dom.hasOwnProperty("addStyle")&&tinymce.activeEditor.dom.addStyle(e[a].css)}}},500)}}},this.set_selected_image=function(t){var e,a,i=t.attr("aria-label"),n=t.data("id"),t=t.find(".thumbnail img");void 0!==t&&t.length&&(a=e="",void 0!==(t=t.attr("src"))&&t.length&&(e=t.substring(0,t.lastIndexOf("/")+1),-1!==t.indexOf("."))&&(a=t.substr(t.lastIndexOf("."))),-1==(i=e+i).indexOf(a)&&(i+=a),b.uc_editor.state.update("featured_img",{thumbnail_url:t,folder:e,image_url:i}),b.uc_editor.edits.update("featured_media_url",i),b.uc_editor.edits.update("featured_media",n))},this.validate_input_date=function(t){var e,a=!0;for(e in t){var i=t[e];if(void 0===i||0==i.length||!UpdraftCentral_Library.is_numeric(i)){a=!1;break}}return a=(a=a&&((!(a=(!(a=!(parseInt(t.day)<1||31<parseInt(t.day))&&a)||!(4!==t.year.length||parseInt(t.year)<1970))&&a)||!(parseInt(t.hour)<0||23<parseInt(t.hour)))&&a))&&(parseInt(t.minute)<0||59<parseInt(t.minute))?!1:a},this.is_input_future_date=function(t){var e;return e=void 0!==t&&t?t:{month:(e=(t=y("fieldset#timestampdiv")).find("div.timestamp-wrap")).find("select#mm").val(),day:e.find("input#jj").val(),year:e.find("input#aa").val(),hour:e.find("input#hh").val(),minute:e.find("input#mn").val(),second:t.find("input#ss").val()},b.validate_input_date(e)?(t=new Date(e.year,parseInt(e.month)-1,e.day,e.hour,e.minute,e.second),new Date<t):null},this.send_local_command=function(t,e,a){var i=y.Deferred(),a=void 0!==a&&a?a:y("#updraftcentral_dashboard_existingsites");return UpdraftCentral.send_ajax(t,e,null,"via_mothership_encrypting",a,function(t,e,a){"ok"===e&&(t.hasOwnProperty("message")?i.resolve(t.message):i.reject())}),i.promise()},this.init_tiny_mce=function(t){"object"==typeof tinymce&&"function"==typeof tinymce.execCommand&&(void 0!==tinymce.EditorManager&&(tinymce.EditorManager.editors=[]),tinymce.init({selector:t,height:800,branding:!1,menubar:!1,resize:!1,force_br_newlines:!0,force_p_newlines:!0,plugins:"textcolor hr lists fullscreen paste wordpress wpdialogs wplink tabfocus",toolbar1:"formatselect bold italic numlist bullist blockquote alignleft aligncenter alignright link unlink wp_more fullscreen wp_adv",toolbar2:"strikethrough hr forecolor backcolor pastetext pasteword removeformat indent outdent undo redo | sizeselect fontselect fontsizeselect",fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",paste_as_text:!0,color_picker_callback:function(t,e){t("#888")},setup:function(t){y(document).find(".wp-core-ui.wp-editor-wrap").hasClass("html-active")&&y(document).find(".wp-core-ui.wp-editor-wrap").removeClass("html-active").addClass("tmce-active")}}),tinymce.execCommand("mceRemoveEditor",!1,t),tinymce.execCommand("mceAddEditor",!1,t),"undefined"!=typeof quicktags)&&quicktags&&quicktags({id:t,buttons:"strong,em,link,block,del,ins,img,ul,ol,li,code,close"})},this.apply_subscriptions_observer=function(c,u,p){var _,f=is_saving=!1,t=(wp.data.select("core").canUser=function(t,e){if("create"===t&&"media"===e)return!!c.has_upload_permissions},b.observe_editor_error_state(),b.send_upload_permissions(c),["featured-image","discussion-panel","post-link","post-excerpt","page-attributes"]);"post"==v.type&&(t=["taxonomy-panel-category","taxonomy-panel-post_tag","featured-image","discussion-panel","post-link","post-excerpt","post-attributes"]);for(var e=0;e<t.length;e++)wp.data.select("core/edit-post").isEditorPanelOpened(t[e])&&wp.data.dispatch("core/edit-post").toggleEditorPanelOpened(t[e]);b.update_permalink_preview_handler(),window.wp_data_unsubscribe=wp.data.subscribe(function(t){_=wp.data.select("core/editor").getCurrentPost();var e,a,i,n,o,s,r=y("div.edit-post-header-toolbar"),d=y(document.body),l=d.find("div.modal-backdrop-container");y("a.components-notice__action.is-link").attr("target","_blank"),y(".components-snackbar-list__notice-container a.components-snackbar__action").attr("target","_blank"),y(".post-publish-panel__postpublish-buttons a").attr("target","_blank"),r.length&&!f?(r=c.logo,e=c.misc,(a=y("div.edit-post-header-toolbar")).length&&!a.find(".uc-logo-container").length&&((i=y("<div/>",{class:"uc-logo-container"})).html('<img class="logo-landscape" src="'+r+'" alt="UpdraftCentral" width="165" height="30">'),a.prepend(i)),(r=y("div.edit-post-header__settings")).length&&(r.find("#uc_close_editor").length||((a=y("<button/>",{text:udclion[v.type+"s"].close_editor,id:"uc_close_editor",type:"button",class:"components-button editor-post-close is-button is-default is-large",style:"padding: 0 12px 2px; margin: 2px; height: 33px; line-height: 32px;"})).on("click",function(){var t=y(document.body).find("div#gutenberg_editor_container");t.length&&t.hide(),y(".updraftcentral_spinner").is(":visible")&&y(".updraftcentral_spinner").remove(),y(document.body).trigger("updraftcentral_"+v.type+"_editor_closed",[t])}),r.prepend(a)),r.find("#uc_preview_lnk").length||void 0===e||(i=y("<a/>",{id:"uc_preview_lnk",href:"#",onclick:'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+e.link+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));"}),a=y("<button/>",{text:udclion[v.type+"s"].preview,id:"uc_preview_post",type:"button",class:"components-button editor-preview-post is-button is-default is-large"}),i.append(a),r.find("#uc_close_editor").after(i))),f=!0,y(".updraftcentral_spinner").is(":visible")&&y(".updraftcentral_spinner").remove(),b.scroll_content_to_top(),g(),"post"==v.type&&wp.data.select("core").getTaxonomies(),y(document.body).trigger("updraftcentral_"+v.type+"_editor_loaded",[p])):g(),wp.data.select("core/editor").isEditedPostDirty()?b.disable_publish_button(!1):b.disable_publish_button(!0),!wp.data.select("core/editor").isSavingPost()||void 0!==l&&0!=l.length||d.append('<div class="modal-backdrop-container"><div class="modal-backdrop fade show dynamic"></div><div class="updraftcentral_spinner"></div></div>'),wp.data.select("core/editor").didPostSaveRequestSucceed()&&!wp.data.select("core/editor").isSavingPost()&&_.hasOwnProperty("post_data")&&(y("#uc_preview_lnk").attr("href","#").removeAttr("target").attr("onclick",'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+_.link+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));"),"manage"===b.current_section&&(h(_.post_data,u),_.post_data.hasOwnProperty("options"))&&m(_.post_data.options),delete _.post_data,void 0!==l)&&l.length&&(l.remove(),b.cleanupHistory()),wp.data.select("core/editor").didPostSaveRequestFail()&&void 0!==l&&l.length&&(l.remove(),b.cleanupHistory()),wp.data.select("core/edit-post").isEditorPanelOpened("post-link")&&(n=setInterval(function(){var t=y(".edit-post-post-link__link");void 0!==t&&t.length&&(clearInterval(n),y(".edit-post-post-link__link").attr("href",_.link).removeAttr("target").attr("onclick",'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+_.link+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));return false;"))},500)),"post"==v.type&&(wp.data.select("core/edit-post").isEditorPanelOpened("taxonomy-panel-category")&&(o=setInterval(function(){var t,e=y(".editor-post-taxonomies__hierarchical-terms-list");void 0!==e&&e.length&&(t=e.parent().find(".uc_block_load_wait"),0==e.html().trim().length?t.length||e.parent().append('<div class="uc_block_load_wait"><img src="'+udclion.wpo.images+'spinner-2x.gif" class="uc-block-spinner" /></div>'):(clearInterval(o),t.remove()))},500)),wp.data.select("core/edit-post").isEditorPanelOpened("taxonomy-panel-post_tag"))&&(s=setInterval(function(){var t,e=y(".components-form-token-field__input-container"),a=wp.data.select("core/editor").getEditedPostAttribute("tags");void 0!==e&&e.length&&a.length&&(a=e.find(".components-form-token-field__token"),t=e.parent().find(".uc_block_load_wait"),0==a.length&&_.tags.length&&0!=_.tags[0]?t.length||e.parent().append('<div class="uc_block_load_wait"><img src="'+udclion.wpo.images+'spinner-2x.gif" class="uc-block-spinner" /></div>'):(clearInterval(s),t.remove()))},500))})},this.process_load_editor_response=function(t,e,a){var i,n,o,s=y(document.body),r=s.find("div#"+t+"_editor_container"),d=e.data,l=b.manage_data.item("preloaded_data"),s=(void 0!==l&&(l=l&&JSON.parse(l)),void 0!==r&&0!=r.length||((r=y("<div/>",{id:t+"_editor_container"})).data("editor",t),s.append(r)),"gutenberg"===t?'<div class="'+t+'-editor-post"></div>':'<div id="'+t+'_editor" class="'+t+'"><div id="editor" class="'+t+'__editor"></div></div>');switch(r.length&&r.is(":visible")&&(r.html(s),r.css("min-height",screen.height)),t){case"classic":var c,u=y.extend(!0,{},d.misc),p=(u.hasOwnProperty("sample_permalink")&&u.sample_permalink.length&&(-1!==u.sample_permalink[0].indexOf("%postname%")?(u.site_url=u.sample_permalink[0].replace("%postname%/",""),void 0!==u.sample_permalink[1]&&u.hasOwnProperty("slug")&&0==u.slug.trim().length&&(u.slug=u.sample_permalink[1])):-1!==u.sample_permalink[0].indexOf("?p=")&&y("#edit-slug-buttons button.edit-slug").hide()),!1),u=(u.hasOwnProperty("link")&&u.link&&(u.hasOwnProperty("slug")&&u.slug&&-1!==u.link.indexOf(u.slug)&&(u.site_url=u.link.replace(u.slug,"")),-1===u.link.indexOf("page_id")&&-1===u.link.indexOf("post_id")||(u.link=u.link.replace(u.slug,""),u.site_url=u.link,p=!(u.slug=""))),UpdraftCentral.template_replace("dashboard-classic_editor",{post:d.post,misc:u,editor:d.editor,metaboxes:(u=d.metaboxes,n=y("<div/>").html(u),o=["submitdiv","pageparentdiv","postimagediv"],"post"==v.type&&(o=["submitdiv","categorydiv","tagsdiv-post_tag","postimagediv"]),n.find("div.postbox").each(function(){i=y(this).attr("id"),Array.isArray(o)&&o.length&&-1==y.inArray(i,o)&&n.find("#"+i).remove()}),n.html()),logo:d.logo})),p=(r.find("#"+t+"_editor").html(u),p&&y("#edit-slug-buttons").hide(),{order:d.post.menu_order});b.manage_data.exists("template_options")&&(p.template=x(b.manage_data.item("template_options"),{value:"filename",label:"template"})),b.manage_data.exists("parent_options")&&(p.page=x(b.manage_data.item("parent_options"),{value:"id",label:"title"},null,[d.post.ID])),"post"==v.type?(c=UpdraftCentral.template_replace("posts-categories",d.categories_metabox_content),r.find("#categorydiv .inside").html(c),c=UpdraftCentral.template_replace("posts-tags",d.tags_metabox_content),r.find("#tagsdiv-post_tag .inside").html(c)):(c=UpdraftCentral.template_replace("pages-page-attributes",p),r.find("#pageparentdiv .inside").html(c)),w(e),y(document.body).trigger("updraftcentral_"+v.type+"_editor_loaded",[r]);break;case"gutenberg":window.qstring="site_id="+a.data("site_id")+"&uc_nonce="+d.info.uc_nonce+"&uc_refIds="+d.info.uc_refIds+"&post_type="+d.post.post_type;var _,f,h=d.post.post_status,u=(y.fullscreen.isFullScreen()?a.prepend('<div class="updraftcentral_spinner"></div>'):y(document.body).append('<div class="updraftcentral_spinner"></div>'),b.clear_notices(),UpdraftCentral.template_replace("dashboard-block_editor",{title:d.post.post_title,metaboxes:d.metaboxes})),m=(r.find("."+t+"-editor-post").html(u),d.settings),p=(m.autosave=null,m.autosaveInterval=86400,"page"==d.post.post_type&&l.hasOwnProperty("templates")&&l.templates&&(m.availableTemplates=l.templates),wp.data.dispatch("core/nux")),g=(void 0!==p&&p&&p.disableTips(),{fonts:"uc-remote-fonts-inline-css",theme_fonts:"uc-remote-theme-fonts-inline-css"});for(_ in g)m.hasOwnProperty(_)&&m[_]&&(0==(f=y('head > style[id="'+g[_]+'"]')).length?f=y("<style/>",{id:g[_]}).html(m[_].replace("CENTRAL_URL",udclion.home_url)).appendTo(y("head")):f.html(m[_].replace("CENTRAL_URL",udclion.home_url)));m.hasOwnProperty("editor_assets")&&m.editor_assets&&(window.__editorAssets=JSON.parse(m.editor_assets)),"string"==typeof m.defaultEditorStyles&&(m.defaultEditorStyles=[{css:m.defaultEditorStyles}]),window._wpLoadBlockEditor=new Promise(function(s,t){wp.domReady(function(){wp.apiFetch.use(function(t,e){return t.hasOwnProperty("path")&&t.path&&-1===t.path.indexOf("uc_nonce")&&(t.path+=-1!==t.path.indexOf("?")?"&":"?",t.path+=window.qstring),e(t)});var e,t,a=wp.data.select("core"),i=wp.data.dispatch("core"),n=a.getEntityRecord("postType","post",d.post.ID),o=!1;void 0!==n&&n&&("object"==typeof(t=n.guid)&&t.hasOwnProperty("raw")&&(t=t.raw),n.id==d.post.ID)&&void 0!==t&&t!=d.post.guid&&"function"==typeof i.deleteEntityRecord&&(i.deleteEntityRecord("postType","post",d.post.ID).then(function(){wp.apiFetch({path:"/wp/v2/posts/"+d.post.ID+"?context=edit",method:"GET"}).then(function(t){e=a.getEntityRecordEdits("postType","post",t.id),i.receiveEntityRecords("postType","post",t,null,!1,e).then(function(){C(d,t,m).then(function(t){k(t.data),s(wp.editPost.initializeEditor("editor",t.post.type,t.post.id,t.settings,{}))})})})}),o=!0),o||C(d,d.post,m).then(function(t){k(t.data),s(wp.editPost.initializeEditor("editor",t.post.post_type,t.post.ID,t.settings,{}))})})}).then(function(){b.reset_info.data=d,b.reset_info.previous_status=h,b.reset_info.location=r,b.apply_subscriptions_observer(d,h,r)})}},this.disable_current_themes=function(t){if("page"==v.type&&"undefined"!=typeof udcstyles_page&&udcstyles_page.hasOwnProperty("styles")||"post"==v.type&&"undefined"!=typeof udcstyles&&udcstyles.hasOwnProperty("styles")){for(var e=("post"==v.type?udcstyles:udcstyles_page).styles,a=0;a<e.length;a++)-1===y.inArray(e[a].id,["updraftcentral-dashboard-css","media-views","mediaelement","imgareaselect","buttons","editor-buttons"])&&(y('link[id="'+e[a].id+'-css"').length&&y('link[id="'+e[a].id+'-css"').prop("disabled",t),y('style[id="'+e[a].id+'-inline-css"').length)&&y('style[id="'+e[a].id+'-inline-css"').prop("disabled",t);for(var i=["common-css","forms-css","media-css"],a=0;a<i.length;a++)"undefined"!=typeof(admin_css_item=y('link[id="'+i[a]+'"]'))&&admin_css_item.length&&admin_css_item.prop("disabled",t);y('link[id="wp-editor-css"]').prop("disabled",t),y('link[id="wp-editor-inline-css"]').prop("disabled",t),y('link[id^="bootstrap"]').prop("disabled",t),y('style[id^="boostrap"]').prop("disabled",t),y('link[id="wp-reset-editor-styles-css"]').prop("disabled",t)}},this.disable_current_wp_theme=function(t){var e;y.fullscreen.isFullScreen()&&("post"==v.type?udcstyles.hasOwnProperty("current_theme_uri")&&udcstyles.current_theme_uri&&(e=y('link[href^="'+udcstyles.current_theme_uri+'"]')):udcstyles_page.hasOwnProperty("current_theme_uri")&&udcstyles_page.current_theme_uri&&(e=y('link[href^="'+udcstyles_page.current_theme_uri+'"]')),void 0!==e)&&e.length&&e.prop("disabled",t)}}function UpdraftCentral_Pagination(u){var e,a,i=this,n=jQuery,u=n.extend({},u),p=new UpdraftCentral_Collection,_=new UpdraftCentral_Collection,r=function(t){var e,a,i,n;return void 0===t.items_from&&(e=parseInt(t.page),a=parseInt(t.pages),i=parseInt(t.results),n=0<parseInt(i%a)?1:0,n=parseInt(i/a)+n,t.items_from=1+(e*n-n),t.items_to=e===a?i:e*n),t};this.preload_items=function(t){if(p.count()&&p.clear(),void 0!==t&&t)for(var e=0;e<t.length;e++){var a,i=t[e];i.hasOwnProperty("name")&&i.hasOwnProperty("website")&&(a=i.name+"_"+i.website,p.add(a,i))}},this.set_filtered_items=function(t){_=t},this.set_remote_data=function(t){e=t},this.get_data=function(t){return a=u.hasOwnProperty("type")&&"local"===u.type?function(t){var e={info:{},items:[]},a=_.count()?_:p,i=u.hasOwnProperty("items_per_page")?u.items_per_page:10;if(a.count()){t=void 0!==t?t:1;for(var n=a.count(),o=0<parseInt(n%i)?1:0,o=parseInt(n/i)+o,s=t*i-i,r=a.keys().splice(s,i),s=1+s,i=t===o?n:t*i,d=[],l=0;l<r.length;l++){var c=a.item(r[l]);d.push(c)}e={info:{page:t,pages:o,results:n,items_from:s,items_to:i},items:d}}return e}(t):e},this.render=function(t){void 0!==a&&a&&void 0===t||i.get_data(t),void 0!==a&&a&&(t=function(t){var e,a,i,n,o,s;if(void 0!==t)return t=r(t),e=parseInt(t.page),a=parseInt(t.pages),i=parseInt(t.results),n=parseInt(t.items_from),t=parseInt(t.items_to),o=!1,u.hasOwnProperty("type")&&"local"===u.type&&(o=!0),s="",1!==e&&(s=s+('<a href="#" data-page="1" data-preloaded="'+o+'" class="uc-pagination-first-button">'+udclion.first)+'</a> <span class="uc-pagination-separator">|</span> '),1<e&&(s+='<a href="#" data-page="'+(e-1)+'" data-preloaded="'+o+'" class="uc-pagination-previous-button">'+udclion.previous+"</a>"),1<e&&e<a&&(s+=' <span class="uc-pagination-separator">|</span> '),e<a&&(s+='<a href="#" data-page="'+(e+1)+'" data-preloaded="'+o+'" class="uc-pagination-next-button">'+udclion.next+"</a>"),(s=a!==e?(s+=' <span class="uc-pagination-separator">|</span> ')+'<a href="#" data-page="'+a+'" data-preloaded="'+o+'" class="uc-pagination-last-button">'+udclion.last+"</a>":s)+('<div class="uc-pagination-results-info">'+sprintf(udclion.page_of,e,a)+', <span class="uc-pagination-item-bounds">'+sprintf(udclion.total_items,n,t,i))+"</span></div>";console.log("Error: uc-library.js:UpdraftCentral_Pagination:build_interface - unable to construct pagination interface because the required info object is not defined. Possible cause, the module's handler in UpdraftPlus is outdated.")}(a.info),u.hasOwnProperty("container"))&&u.container&&(n(u.container).html(t),n(u.container).find("a.uc-pagination-first-button, a.uc-pagination-previous-button, a.uc-pagination-next-button, a.uc-pagination-last-button").off("click").on("click",function(){var t=n(this).data("page");u.hasOwnProperty("callback")&&u.callback&&u.callback.apply(null,[t])}))}}function UpdraftCentral_Site_Filter(r){var d=jQuery,o=new UpdraftCentral_Collection,s=(r=d.extend({},r)).hasOwnProperty("default_site")&&r.default_site?r.default_site:null,l="uc_site_filter_",n=new UpdraftCentral_Collection,e=function(i){return d(".updraftcentral_site_row:not(.suspended)").each(function(){var a=d(this).data("site_id"),t=d(this).find("li.udc_tag_item .udc_tag_text");void 0!==t&&t&&t.length&&t.each(function(){var t,e=d(this).data("tag_name");n.exists(e)?((t=n.item(e)).push(a),n.update(e,t)):(i.push({id:e,text:sprintf(udclion.add_all_sites_tagged,e)}),n.add(e,[a]))})}),i};this.render=function(){var a,i,t=function(){var t=r.hasOwnProperty("extra_classes")&&r.extra_classes?" "+r.extra_classes:"",t=d("<div></div>",{class:l+"container"+t}),e=(d("<div></div>",{class:l+"label"}).html(r.label).appendTo(t),d("<div></div>",{class:l+"sites_container"})),a=(d("<select></select>",{class:l+"sites",name:"sites[]",multiple:"multiple"}).appendTo(e),e.appendTo(t),d("<div></div>",{class:l+"buttons"}));if(r.hasOwnProperty("buttons")&&Array.isArray(r.buttons))for(var i=0;i<r.buttons.length;i++){var n=r.buttons[i],o=n.hasOwnProperty("text")?n.text:udclion.submit,s=i+1;d("<button></button>",{id:n.hasOwnProperty("id")?n.id:l+"button"+s,name:n.hasOwnProperty("name")?n.name:l+"button"+s,class:n.hasOwnProperty("class")?"btn btn-primary "+n.class:"btn btn-primary"}).text(o).on("click",function(){n.hasOwnProperty("callback")&&"function"==typeof n.callback&&n.callback.apply(null,[])}).appendTo(a)}return a.appendTo(t),t}();r.hasOwnProperty("container")&&r.container&&(d(r.container).append(t),d(r.container).find("select."+l+"sites").select2({data:(i=[],(a=[]).push({id:0,text:udclion.add_all_sites}),a=e(a),d(".updraftcentral_site_row:not(.suspended)").each(function(){var t=d(this).data("site_id"),e=d(this).data("site_description");a.push({id:t,text:e}),i.push(t)}),n.add(0,i),a),placeholder:r.hasOwnProperty("placeholder")?r.placeholder:udclion.press_to_select_website}),d(r.container).find("select."+l+"sites").off("select2:select").on("select2:select",function(t){var t=t.params.data;n.exists(t.id)&&(d(this).val(null).trigger("change"),t=n.item(t.id),d(this).val(t).trigger("change"))}),d(r.container).find("select."+l+"sites").off("select2:open").on("select2:open",function(){d.fullscreen.isFullScreen()&&d(document.body).children("span.select2-container--open").appendTo("#updraftcentral_dashboard")}),d(r.container).find("select."+l+"sites").off("select2:opening select2:closing").on("select2:opening select2:closing",function(t){d(this).parent().find(".select2-search__field").prop("disabled",!0)}),d(r.container).find("input.select2-search__field").hide(),void 0!==s)&&s&&d(r.container).find("select."+l+"sites").select2("trigger","select",{data:{id:s.data("site_id"),text:s.data("site_description")}})},this.get_selected_sites=function(){var t=d("select."+l+"sites").val(),e=!1;if(o.count()&&o.clear(),void 0!==t&&t&&t.length)for(var a="string"==typeof t?t.split(","):t,i=0;i<a.length;i++){var n=d('.updraftcentral_site_row[data-site_id="'+a[i]+'"');n.length&&o.add(n.data("site_id"),n)}return o.count()||(o.add(s.data("site_id"),s),e=!0),{sites:o,selection_empty:e}}}function UpdraftCentral_Recorder(){function t(){d=new UpdraftCentral_Collection,0}var d,l=this,c=jQuery;function u(){l.current_site="",UpdraftCentral.$site_row=null}function p(t,e){if(void 0!==e)for(var a=0;a<e.length;a++){var i=e[a].dropdown,n=e[a].selected,o=c(i).prop("class"),i=c(i).prop("id"),s="";void 0!==o&&o.length?s="select."+o.replace(/\s/,"."):void 0!==i&&i.length&&(s="select#"+i),s.length&&t.find(s).find('option[value="'+n+'"]').prop("selected","selected")}}function _(t,e){var a=t.no_sites[e].container,i=t.no_sites[e].post_load_callback,n=t.no_sites[e].mode,o=t.no_sites[e].options;c(".updraftcentral-search-area").hide(),c(a).parent().find(".ui-sortable-handle").hide(),c(a).html(t.no_sites[e].html),p(c(a),o),c("#updraftcentral_dashboard_existingsites").trigger("extra_contents_loaded_"+e,[null]),c("#updraftcentral_dashboard_existingsites").trigger("recorder_content_loaded",[e,c(a).html(),null]),n===e&&"function"==typeof i&&i.apply(null,[])}t(),this.reset_recorder=function(){t(),u()},this.get_current_site=function(){return void 0!==l.current_site&&l.current_site.length?l.current_site:null},this.invalidate_cached_content=function(i,t){!Array.isArray(t)&&"string"!=typeof t||c.each(t="string"==typeof t?[t]:t,function(t,e){var a;d.exists(e)&&void 0!==(a=d.item(e)).sites[i]&&(a.sites[i]={},d.update(e,a))})},this.load=function(){c("#updraftcentral_dashboard_existingsites").on("extra_contents_loaded_updates",function(t,e){null===e&&void 0!==(e=c("#updraftcentral_dashboard_existingsites").find("#updates_container"))&&e.length&&e.is(":visible")&&(u(),c("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.all_sites_selected),c("#updraft-central-content button.updraftcentral_action_choose_another_site").show())}),c("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_before",function(t,e){l.current_menu=e.new_mode,d.exists(e.new_mode)||d.add(e.new_mode,{sites:{},no_sites:{}}),d.exists(e.previous_mode)||d.add(e.previous_mode,{sites:{},no_sites:{}});var a,i,n,o=d.item(e.previous_mode),s=(void 0!==l.current_site&&l.current_site.length&&(n=e.extra_contents,a=l.current_site.data("site_id"),s=n.children().clone(!0,!0),void 0===o.sites[a]&&(o.sites[a]={}),o.sites[a].html=s,o.sites[a].force=e.force,o.sites[a].options=[],n.find("select").each(function(){o.sites[a].options.push({dropdown:c(this),selected:c(this).find("option").filter(":selected").val()})}),d.update(e.previous_mode,o),n.html("")),void 0!==o.no_sites[e.previous_mode]&&(i=o.no_sites[e.previous_mode].container,s=(n=c(i)).children().clone(!0,!0),o.no_sites[e.previous_mode].html=s,o.no_sites[e.previous_mode].options=[],n.find("select").each(function(){o.no_sites[e.previous_mode].options.push({dropdown:c(this),selected:c(this).find("option").filter(":selected").val()})}),d.update(e.previous_mode,o),c(i).html("")),!0===e.force&&e.new_mode===e.previous_mode&&(l.reset=!0),d.exists("search_tag")||d.add("search_tag",""),void 0!==l.current_site&&l.current_site.length&&("sites"===e.previous_mode?(d.update("search_tag",c(".updraftcentral-search-area input#udc_search_tag").val()),c(".updraftcentral-search-area input#udc_search_tag").val("")):"sites"!==e.new_mode?c(".updraftcentral-search-area").hide():c(".updraftcentral-search-area input#udc_search_tag").val(d.item("search_tag"))),c(".updraft_site_actions.open"));s.length?s.removeClass("open"):(s=c(".updraft_site_actions.show")).length&&s.removeClass("show"),void 0===l.current_site||l.current_site.length||c("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.no_site_selected)}),c("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set",function(t,e){var a,i,n,o,s,r;e.new_mode!==e.previous_mode?void 0!==l.current_site&&l.current_site.length?(o=l.current_site.data("site_id"),void 0!==(a=c('.updraftcentral_site_row[data-site_id="'+o+'"]'))&&a&&a.length&&(i=!1,"sites"!==e.new_mode?((r=a.closest("#updraftcentral_dashboard_existingsites")).find('.updraftcentral_site_row[data-site_id="'+o+'"]').parent().show(),r.find('.updraftcentral_site_row[data-site_id!="'+o+'"]').each(function(){c(this).parent().hide()}),c(".updraftcentral-search-area").hide(),c("#updraft-central-content button.updraftcentral_action_choose_another_site").show(),void 0!==(r=d.item(e.new_mode))&&(n=r.sites[o],void 0!==r.no_sites[e.new_mode]?_(r,e.new_mode):void 0!==n&&(n.force?i=!0:n.storeable||void 0===n.action_item?(o=a.find(".updraftcentral_row_extracontents"),s=n.options,o.html(n.html),p(o,s),c("#updraftcentral_dashboard_existingsites").trigger("extra_contents_loaded_"+e.new_mode,[a]),c("#updraftcentral_dashboard_existingsites").trigger("recorder_content_loaded",[e.new_mode,n.html,n])):c("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_after",function(t,e){c("#updraftcentral_dashboard_existingsites").off("updraftcentral_dashboard_mode_set_after"),c(n.action_item).trigger("click")})))):i=!0,i)&&(c(".updraftcentral-search-area").show(),a.closest("#updraftcentral_dashboard_existingsites").find(".updraftcentral_site_row").parent().show())):void 0!==(r=d.item(e.new_mode))&&(void 0!==r.no_sites[e.new_mode]?_(r,e.new_mode):(c(".updraftcentral-search-area").show(),c("#updraftcentral_dashboard_existingsites").find(".ui-sortable-handle").show())):l.reset&&(d=new UpdraftCentral_Collection,0,l.current_site="",UpdraftCentral.$site_row=null,c(".updraftcentral-search-area").show(),c("#updraftcentral_dashboard_existingsites").find(".ui-sortable-handle").show(),c("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.no_site_selected)),UpdraftCentral.register_event_handler("click",".updraftcentral_mode_actions button.updraftcentral_action_show_all_updates",function(){var t=d.item(l.current_menu);void 0!==t&&t&&(void 0===t.no_sites[l.current_menu]&&(t.no_sites[l.current_menu]={container:"#updates_container.updraftcentral_row_extracontents",html:"",mode:"updates",post_load_callback:function(){"function"==typeof UpdraftCentral_Updates.reload_interface&&UpdraftCentral_Updates.reload_interface()}}),d.update(l.current_menu,t)),void 0!==l.current_site&&l.current_site.length&&c("#updraft-central-content button.updraftcentral_action_choose_another_site").show(),u(),c("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.all_sites_selected),c("#updraft-central-content button.updraftcentral_action_choose_another_site").show()}),UpdraftCentral.register_row_clicker(".btn-group > button",function(t){var e,a,i;c(this).closest(".updraft_site_actions").hasClass("more-option-container")||(l.current_site=t,c("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.selected_site+": "+l.current_site.data("site_description")),"sites"!==l.current_menu&&(action_item=c(this),(e=c(".updraftcentral-search-area input#udc_search_tag").val()).length&&(d.update("search_tag",e),c(".updraftcentral-search-area input#udc_search_tag").val("")),c(".updraftcentral-search-area").hide(),e=!0,void 0!==action_item.data("storeable")&&!1===action_item.data("storeable")&&(e=!1),a=l.current_site.data("site_id"),void 0!==(i=d.item(l.current_menu))&&i&&(void 0===i.sites[a]&&(i.sites[a]={}),i.sites[a].action_item=action_item.get(0),i.sites[a].storeable=e,i.no_sites={},d.update(l.current_menu,i)),"sites"!==l.current_menu)&&t.closest("#updraftcentral_dashboard_existingsites").find('.updraftcentral_site_row:not([data-site_id="'+a+'"])').parent().slideUp())})}),c(".updraftcentral-search-area input#udc_search_tag").val(""),c("#updraft-central-navigation > div.updraftcentral_site_selected").length||c("#updraft-central-navigation").append('<div class="updraftcentral_site_selected">'+udclion.no_site_selected+"</div>")}}function UpdraftCentral_Keyboard_Shortcuts(){function a(){if(void 0!==window.navigator.userAgent){var t=window.navigator.userAgent.toLowerCase();if(-1!==t.indexOf("macintosh")||-1!==t.indexOf("mac_powerpc"))return!0}return!1}var c,p,u,_,f,h=this,m=jQuery,g="",v=!1,e=(this.is_macintosh=!1,this.init=function(t){u=new UpdraftCentral_Collection,f=new UpdraftCentral_Collection,c={},p=[],h.originals=udclion.keyboard_shortcuts,_=null,e().then(function(t){h.is_macintosh=t}),n(t),void 0===t&&(m("#updraftcentral_dashboard_existingsites").on("recorder_content_loaded",function(t,e,a,i){_={menu:e,content:a,site:i}}),m(document).on("keydown",o),m("#updraftcentral_dashboard").on("updraftcentral_bootbox_dialog_opened",function(t,e,a){i(a)}),i(m("#updraftcentral_modal_dialog")),r())},this.register_shortcut=function(t,e,a){var i=e,i={name:t.name,key:t.key,description:t.description,action:i="function"==typeof e?function(){UpdraftCentral.check_processing_state()||e.apply(null,[t.name,t.menu])}:i,menu:void 0!==t.menu?t.menu:"",site_required:void 0===t.site_required||t.site_required};b(i),u.exists(t.key)?void 0!==a&&a&&u.update(t.key,i):u.add(t.key,i)},this.save_shortcut=function(t,e,a){var i=m.Deferred();return UpdraftCentral.send_ajax("shortcuts",{name:t,key:e},null,"via_mothership_encrypting",a,function(t,e,a){"ok"===e&&t.hasOwnProperty("message")&&("success"===t.message?i.resolve():i.reject())}),i.promise()},this.clear_shortcuts=function(t){var i=m.Deferred();return UpdraftCentral.send_ajax("shortcuts",{clear:!0},null,"via_mothership_encrypting",t,function(t,e,a){"ok"===e&&t.hasOwnProperty("message")&&("success"===t.message?i.resolve(t):i.reject())}),i.promise()},function(){var e=m.Deferred();return void 0!==window.navigator.userAgentData&&window.navigator.userAgentData&&"function"==typeof window.navigator.userAgentData.getHighEntropyValues?window.navigator.userAgentData.getHighEntropyValues(["platform"]).then(function(t){void 0!==t&&void 0!==t.platform?-1!==t.platform.toLowerCase().indexOf("mac")?e.resolve(!0):e.resolve(!1):e.resolve(a())}):e.resolve(a()),e.promise()}),i=function(t){void 0!==t&&t&&t.on("click","a.keyboard_shortcuts",function(){var t=m(this).closest(".bootbox.modal.show");(t=t.length?t:m(this).closest("#updraftcentral_modal_dialog.show")).length&&t.removeClass("fade").scrollTop(0).hide(),s(null,t)})},b=function(t){void 0===t.site_required||t.site_required||(c[t.name]=!t.site_required)},n=function(t){y(),w();var e=udclion.user_defined_shortcuts;if("undefined"!=typeof udclion&&void 0!==udclion.keyboard_shortcuts)for(var a in udclion.keyboard_shortcuts){var i=(o=JSON.parse(JSON.stringify(udclion.keyboard_shortcuts[a]))).key,n=!1;(n=o.menu.length&&!m("#updraft-menu-item-"+o.menu).is(":visible")?!0:n)||(o.name=a,u.add(i,o),void 0!==o.popup&&o.popup&&f.add(i,!0),b(o))}for(var o,s,r,d=u.get_items(),l=0;l<d.length;l++)void 0!==e[(o=d[l]).name]&&(s=o.key,(r=e[o.name]).length)&&(o.key=r,u.add(o.key,o),u.remove(s));p=u.get_items().sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),"function"==typeof t&&t.apply(null,[])},o=function(t){if(!UpdraftCentral_Library.is_dialog_opened()&&"inactive"!==udclion.shortcut_status){var e=t||window.event,t=t?t.which:e.keyCode,e=String.fromCharCode(t),a="",i=m("div#updraft-central-content").find("input, textarea").is(":focus"),n=m("div#updraftcentral_modal_dialog").find("input, textarea").is(":focus"),o=m("div.bootbox.modal").find("input, textarea").is(":focus"),s=!1;if((m("#classic_editor_container").is(":visible")||m("#gutenberg_editor_container").is(":visible"))&&(s=!0),!(i||n||o||s)){i="SHIFT",n=(17===t&&(a+="CTRL"),18===t&&(a+=a.length?"+ALT":"ALT"),16===t&&(a+=a.length?"+"+i:i),a.length?g+=g.length?"+"+a:a:e.length&&(g+=g.length?"+"+e:e),g.split("+"));if((1!==n.length||-1===m.inArray(n[0],["CTRL","ALT",i]))&&g.length){o=g.toLowerCase(),s=g.toUpperCase();if(-1!==o.indexOf("+")&&(o=(t=o.split("+"))[0].toUpperCase()+"+"+t[1]),(u.exists(o)||u.exists(s))&&!v){var r=u.exists(o)?u.item(o):u.item(s);if(v=!0,"function"==typeof r.action)r.action.apply(null,[r.name,r.menu]);else if("string"==typeof r.action&&r.action.length){a=UpdraftCentral.$site_row;if(void 0!==c[r.name]&&c[r.name]?a=m("div#updraft-central-content"):void 0!==a&&a||(e=m("div#updraftcentral_dashboard_existingsites > div.ui-sortable-handle").find(".updraftcentral_site_row:not(.suspended)").first()).length&&(a=UpdraftCentral.$site_row=e),void 0!==a&&a&&a.length){if(r.menu.length&&!r.action.length)return void m("#updraft-menu-item-"+r.menu).trigger("click");var d=a.find("#"+r.action),l=(!(void 0===d||!d.length)||!(void 0===(d=a.find("."+r.action))||!d.length)||(d=a.find(r.action)),a.find(".updraftcentral_row_extracontents"));if(void 0!==d&&d&&d.length){r.menu&&r.menu.length||(r.menu="sites");n=m(".updraft-menu-item-links-active").prop("id").replace("updraft-menu-item-","");if(r.menu===n){if(_&&void 0!==_.menu&&r.menu===_.menu&&_.site&&_.site.action_item){i=m(_.site.action_item);if(d.prop("class")===i.prop("class")&&!f.exists(r.key)&&l.find("div").html())return v=!1,void(_=null)}f.exists(r.key)&&l.html(""),d.trigger("click")}else m("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_after",function(t,e){if(void 0!==d&&d&&d.length){if(m("#updraftcentral_dashboard_existingsites").off("updraftcentral_dashboard_mode_set_after"),_&&void 0!==_.menu&&r.menu===_.menu&&_.site&&_.site.action_item){var a=m(_.site.action_item);if(d.prop("class")===a.prop("class")&&!f.exists(r.key)&&l.find("div").html())return v=!1,void(_=null)}f.exists(r.key)&&l.html(""),d.trigger("click")}}),m("#updraft-menu-item-"+r.menu).trigger("click")}}}else r.menu.length&&m("#updraft-menu-item-"+r.menu).trigger("click");v=!1}g=""}}}},s=function(t,e){for(var i,n,a,o='<ul class="uc_shortcuts">',s=p,r=0;r<s.length;r++){var d,l=s[r],c=l.key,u='<span class="uc_current_shortcut">'+c+"</span>";h.is_macintosh&&(d=c.replace("CTRL","CONTROL").replace("ALT","OPTION"),u='<span class="uc_current_shortcut" style="display:none;">'+c+'</span><span class="uc_current_mac_shortcut">'+d+"</span>"),o+='<li data-name="'+l.name+'">'+l.description+" <span>("+udclion.shortcut_key+": "+u+')</span> <span class="uc_change_shortcut">'+udclion.keyboard_change_shortcut+'</span> <div class="uc_shortcut_elements"></div></li>'}o+="</ul>",void 0!==t&&t&&t.length?t.replaceWith(o):(i="shortcut_dialog_id",n=null,void 0!==e&&e&&(n=e.find("div.modal-dialog").offset(),a=!1),m("#updraftcentral_dashboard").on("updraftcentral_bootbox_dialog_opened",function(t,e,a){e===i&&n&&(a.find("div.modal-dialog").css({top:n.top}),a.scrollTop(0)),a.removeClass("fade")}),m("#updraftcentral_dashboard").on("updraftcentral_bootbox_dialog_closed",function(t,e,a){e!==i||m("body").hasClass("modal-open")||m("body").addClass("modal-open")}),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.keyboard_shortcuts_heading+' <a class="uc_clear_local_shortcuts">('+udclion.reset_shortcuts+")</a></h2><p>"+udclion.keyboard_shortcuts_message+'</p><div class="uc_shortcuts_spacer"><div class="uc_shortcuts_spinner"></div></div><p>'+o+"</p>",function(){void 0!==e&&e&&e.removeClass("fade").show().scrollTop()},!1,i,a))},r=function(){UpdraftCentral.register_event_handler("click",".modal-dialog span.uc_change_shortcut",function(){for(var t=m(this).closest("li").find("div.uc_shortcut_elements"),e=["CTRL","ALT","SHIFT"],a="",i="",n=0;n<e.length;n++)i=e[n],h.is_macintosh&&(i=i.replace("CTRL","CONTROL").replace("ALT","OPTION")),a+='<option value="'+e[n]+'">'+i+"</option>";a='<select><option value="">'+udclion.keyboard_choose_modifiers+"</option>"+a+"</select> ";t.html(a+'<input type="text" maxlength="1" value="" /> <button class="btn btn-primary uc_save_shortcut">'+udclion.keyboard_save_shortcut+'</button> <button class="btn btn-primary uc_cancel_shortcut">'+udclion.keyboard_cancel_shortcut+'</button> <span class="uc_new_shortcut"></span>'),m(this).hide()}),UpdraftCentral.register_event_handler("click",".modal-dialog button.uc_save_shortcut",function(){var t,a,e,i,n,o,s=m(this).closest("li").find("div.uc_shortcut_elements"),r=s.find("select").val(),d=s.find('input[type="text"]').val(),l=s.parent().data("name");d&&d.length&&d.match(/^[a-zA-Z]$/g)?(t="+",(a=(r=void 0!==r&&r.length?r:t="")+t+d).length&&(e=!1,s.closest("ul.uc_shortcuts").find('li[name!="'+l+'"] span.uc_current_shortcut').each(function(){var t=m(this).html();if(a.toUpperCase()===t.toUpperCase())return e=!0,UpdraftCentral_Library.dialog.alert("<h2>"+udclion.keyboard_shortcut_exist_heading+"</h2><p>"+udclion.keyboard_shortcut_exist+"</p>"),!1}),e||(i=s.parent().find("span.uc_current_shortcut"),n=i.html(),u.exists(n)&&((o=u.item(n)).key=a,h.save_shortcut(l,o.key,s.parent()).then(function(t){var e;u.add(o.key,o),u.remove(n),i.html(o.key),h.is_macintosh&&(e=o.key.replace("CTRL","CONTROL").replace("ALT","OPTION"),i.siblings(".uc_current_mac_shortcut").html(e)),f.exists(n)&&(f.remove(n),f.add(a,!0))}).always(function(){s.parent().find("span.uc_change_shortcut").show(),s.html("")}))))):UpdraftCentral_Library.dialog.alert("<h2>"+udclion.keyboard_shortcut_required_heading+"</h2><p>"+udclion.keyboard_shortcut_required+"</p>")}),UpdraftCentral.register_event_handler("click",".modal-dialog button.uc_cancel_shortcut",function(){var t=m(this).closest("li");t.find("span.uc_change_shortcut").show(),t.find("div.uc_shortcut_elements").html("")}),UpdraftCentral.register_event_handler("change",".modal-dialog div.uc_shortcut_elements select",function(t){m(".modal-dialog").trigger("keyboard_shortcut_changed",[this])}),UpdraftCentral.register_event_handler("keyup",".modal-dialog div.uc_shortcut_elements input",function(t){var e=m(this).closest("li").find("div.uc_shortcut_elements");e.find('input[type="text"]').val().match(/^[a-zA-Z]$/g)?e.find("button.uc_save_shortcut").prop("disabled",!1):e.find("button.uc_save_shortcut").prop("disabled",!0),m(".modal-dialog").trigger("keyboard_shortcut_changed",[this])}),UpdraftCentral.register_event_handler("keyboard_shortcut_changed",".modal-dialog",function(t,e){var e=m(e).closest("li").find("div.uc_shortcut_elements"),a=e.find("span.uc_new_shortcut"),i=e.find("select").val(),n=e.find('input[type="text"]').val(),o="+",i=(i=void 0!==i&&i.length?i:o="")+(o=n&&n.length?o:"")+n;n&&n.length?n.match(/^[a-zA-Z]$/g)?a.html('<div class="uc_tip_wrapper">'+udclion.keyboard_new_shortcut+": "+i+"</div>"):a.html('<div class="uc_tip_wrapper">'+udclion.keyboard_invalid_key+"</div>"):(a.html(""),e.find("button.uc_save_shortcut").prop("disabled",!1))}),UpdraftCentral.register_event_handler("click","a.uc_clear_local_shortcuts",function(){var e=m(".bootbox.modal ul.uc_shortcuts"),t=m(".bootbox.modal div.uc_shortcuts_spinner");h.clear_shortcuts(t).then(function(t){void 0!==t.shortcuts&&(udclion.user_defined_shortcuts=t.shortcuts),h.init(function(){s(e)})})})},y=function(){for(var t=[{name:"show_comments",key:"C",description:udclion.show_comments,menu:"comments",action:"updraftcentral_site_comments_manage"},{name:"show_users",key:"U",description:udclion.show_users,menu:"users",action:"updraftcentral_site_users_manage"},{name:"show_analytics",key:"A",description:udclion.show_analytics,menu:"analytics",action:"updraftcentral_site_analytics_show"}],e=0;e<t.length;e++){var a,i=t[e];void 0===udclion.keyboard_shortcuts[i.name]&&i.menu.length&&m("#updraft-menu-item-"+i.menu).is(":visible")&&(a={name:i.name,key:i.key,description:i.description,menu:i.menu},h.register_shortcut(a,i.action,!0))}},w=function(){var t={name:"z_keyboard_shortcuts_help",key:"K",description:udclion.keyboard_shortcuts_help,menu:"",site_required:!1},t=(h.register_shortcut(t,function(t){s()},!0),{name:"site_update",key:"D",description:udclion.site_update,menu:"updates"});h.register_shortcut(t,function(t,e){var a=UpdraftCentral.$site_row,i=(e.length&&!m("#updraft-menu-item-"+e+".updraft-menu-item-links-active").length&&m("#updraft-menu-item-"+e).trigger("click"),void 0!==a&&a||(a=m("div#updraftcentral_dashboard_existingsites > div.ui-sortable-handle:first-child").find(".updraftcentral_site_row")),"undefined"!=typeof($mass_updates_container=a.closest("#updraftcentral_dashboard_existingsites").find("#updates_container"))&&$mass_updates_container.length&&$mass_updates_container.remove(),a.find("button.updraftcentral_action_show_updates"));void 0!==i&&i.length&&(void 0!==e&&"updates"===e&&a.find(".updraftcentral_row_extracontents").html(""),i.trigger("click")),a.show(),a.closest(".ui-sortable-handle").show()},!0)}}function UpdraftCentral_Task_Progress(){function i(t){var e=a.progressbar("option","value")+"%";void 0!==o&&o.length&&(e=void 0!==t&&t?o+" "+e:o),n.find("#uc_task_progress_status").text(e)}var a,n,e,o,s=this,r=jQuery;this.total_items;void 0===n?0<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Task_Progress: A container element is required. This is where the progress bar is to be appended - exiting"):(s.total_items=0,e=0,o=""),this.current=function(t){0},this.set_custom_status=function(t,e){var a=n.find("#uc_task_progress_status");0!=a.length&&(void 0!==t&&t&&(o=t,a.text(t)),i(!(void 0===e||!e)))},this.set_complete=function(t){current_bar=100,a.progressbar("option","value",current_bar),t=void 0!==t?t:udclion.process_completed,s.set_custom_status(t)},this.update=function(){e++;var t=parseInt(s.total_items),t=parseInt(e/t*100);t<100&&a.progressbar("option","value",t)},this.set_container=function(t){0==(n=t).length?0<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Task_Progress: Progress bar container not defined - exiting"):void 0!==r.ui&&"function"==typeof r.ui.progressbar?(0===n.find("#uc_task_progress").length&&n.append('<div id="uc_task_progress"><div id="uc_task_progress_bar"><div id="uc_task_progress_status"></div></div></div>'),(a=n.find("#uc_task_progress > div#uc_task_progress_bar")).is(":ui-progressbar")?a.progressbar("option","value",0):a.progressbar({max:100,value:0,change:function(){n&&!r(".updraftcentral_spinner").is(":visible")&&r(n).prepend('<div class="updraftcentral_spinner"></div>'),i(!0)},complete:function(){}})):0<UpdraftCentral.get_debug_level()&&console.log("UpdraftCentral_Task_Progress: jQuery progressbar or one of its dependency is not installed - exiting")},this.abort=function(t){t=void 0!==t?t:udclion.process_aborted,s.set_custom_status(t)},this.reset=function(){var t=n.find("#uc_task_progress");0!=t.length&&(s.clear(),t.remove(),void 0!==(t=n.find(".updraftcentral_spinner")))&&t.length&&t.is(":visible")&&t.remove()},this.clear=function(){e=0,s.total_items=0,o="",0},this.hide=function(){var t=n.find("#uc_task_progress");0!=t.length&&t.hide()},this.show=function(){var t=n.find("#uc_task_progress");0!=t.length&&t.show()}}function UpdraftCentral_Collection(){var a=this,i=0,n={};this.add=function(t,e){return!a.exists(t)&&(n[t]=e,i++,!0)},this.update=function(t,e){return a.exists(t)?(n[t]=e,!0):a.add(t,e)},this.bulk_update=function(t){for(var e in t)a.update(e,t[e])},this.remove=function(t){return!!a.exists(t)&&(delete n[t],i--,!0)},this.item=function(t){return n[t]},this.keys=function(){var t,e=[];for(t in n)e.push(t);return e},this.exists=function(t){return void 0!==n[t]},this.clear=function(){i=0,n={}},this.count=function(){return i},this.get_items=function(){var t,e=[];for(t in n)e.push(n[t]);return e},this.get_collection_object=function(){return n}}function UpdraftCentral_Tasks_Runner(t){function s(t,e){r.progress.current(t),t.func.apply(null,t.args).then(function(t){e(null,t)}).fail(function(t){e(void 0===t?!0:t)}).always(function(t){r.progress.update()})}var r=this,d=(this.progress,new UpdraftCentral_Collection);r.progress=new UpdraftCentral_Task_Progress;this.tasks_count=function(){return d.count()},this.remove_task=function(t){return d.remove(t)},this.add_task=function(t,e){if("function"==typeof t){var a=(new Date).getTime(),i=Math.ceil(1e3*Math.random()),a=UpdraftCentral_Library.md5("_key_"+a+i),i={func:t,args:e};if(i.args.push(r),d.add(a,i))return a}return!1},this.clear_tasks=function(){r.progress.clear(),d.clear()},this.abort=function(){queue.abort(),r.clear_tasks()},this.process_tasks=function(){var a=jQuery.Deferred();if(0<d.count()){r.progress.total_items=d.count();for(var t=udclion.hasOwnProperty("max_http_connection")?parseInt(udclion.max_http_connection):6,e=d3.queue(t),i=d.keys(),n=0;n<i.length;n++){var o=d.item(i[n]);e.defer(s,o)}e.awaitAll(function(t,e){t?a.reject(t):a.resolve(e)})}else a.reject(udclion.tasks_queue_empty);return a.promise()}}function UpdraftCentral_Credentials(){var c=new UpdraftCentral_Collection,u=jQuery("#updraftcentral_modal_dialog"),p="hidden.bs.modal",s=(this.get_credentials=function(i){var n=jQuery.Deferred(),t=i.site_row,e=i.id;if(c.exists(e)){var o,a,s,r=c.item(e),d=r.request_filesystem_credentials||{},l=!1;for(a in d)d[a]&&(l=!0,o=a);void 0===r.site_credentials?l?(s=UpdraftCentral.storage_get("filesystem_credentials_"+i.site_hash),e=UpdraftCentral.get_site_heading(t),UpdraftCentral.open_modal(udclion.updates.connection_information,UpdraftCentral.template_replace("updates-request-credentials",{credentials_form:r.filesystem_form,site_heading:e}),function(){var e=jQuery("#updraftcentral_modal #filesystem-credentials-save-in-browser").is(":checked"),a=jQuery("#updraftcentral_modal .request-filesystem-credentials-dialog-content input").serialize();_(t,o,a).then(function(t){r.site_credentials=a,i.site_credentials=a,e&&(i.save_credentials_in_browser=!0),n.resolve(i)}).fail(function(t,e,a){0<UpdraftCentral.get_debug_level()&&(console.log("Failed result follows for 'validate_remote_credentials' method called within UpdraftCentral_Credentials.get_credentials:"),console.log(t)),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.failed_credentials_heading+"</h2><p>"+udclion.failed_credentials+"</p>"),n.reject(t,e,a)}).always(function(){u.off(p),UpdraftCentral.close_modal()})},udclion.updates.update,function(){jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[value=""]:first').trigger("focus"),s&&(saved_credentials=UpdraftCentral_Library.unserialize(s))&&(jQuery.each(saved_credentials,function(t,e){var a=jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+t+'"]').attr("type");"text"==a||"number"==a||"password"==a?jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+t+'"]').val(e):"checkbox"==a?e?jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+t+'"]').prop("checked",!0):jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+t+'"]').prop("false",!0):"radio"==a?jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+t+'"][value="'+e+'"]').prop("checked",!0):a&&console.log("UpdraftCentral: unrecognised field type in credential form: type="+a+", field index="+t)}),jQuery("#updraftcentral_modal #filesystem-credentials-save-in-browser").prop("checked",!0)),jQuery('#updraftcentral_modal div#request-filesystem-credentials-form fieldset > legend:contains("Connection Type"):gt(0)').hide(),u.on(p,function(){n.reject()})},!0,"",function(){n.reject()})):n.reject(i):(i.site_credentials=r.site_credentials,n.resolve(i))}else n.reject(i);return n.promise()},this.load_credentials=function(t){var i=jQuery.Deferred(),e=t.id,t=t.site_row;return void 0!==e?c.exists(e)?i.resolve(c.item(e)):s(t).then(function(t){c.add(e,t),i.resolve(t)}).fail(function(t,e,a){i.reject(t,e,a)}):i.reject(),i.promise()},this.load_all_credentials=function(t){var e=jQuery.Deferred(),a=[];if(void 0!==t&&0<t.length){for(var i=0;i<t.length;i++){var n=t[i],o=n.site_row;a.push(s(o).then(function(t){var e=n.id;void 0!==e&&c.add(e,t)}))}jQuery.when.apply(jQuery,a).then(function(){e.resolve()})}return e.promise()},function(t){var i=jQuery.Deferred(),e=function(t){t=UpdraftCentral.get_cached_response(t,"updates.get_updates");if(null!==t&&UpdraftCentral.is_data_good_to_use(t.created)){t=t.reply.data;if(t.hasOwnProperty("meta")&&t.meta)return t.meta}return!1}(t.data("site_id"));return!1!==e?i.resolve(e):UpdraftCentral.send_site_rpc("core.get_credentials",null,t,function(t,e,a){if("ok"!==e||!t)return i.reject(t,e,a),!0;i.resolve(t.data)}),i.promise()}),_=function(t,e,a){var i=jQuery.Deferred();return UpdraftCentral.send_site_rpc("core.validate_credentials",{entity:e,filesystem_credentials:a},t,function(t,e,a){"ok"!==e||t.data.error?i.reject(t,e,a):i.resolve(t.data)}),i.promise()}}function UpdraftCentral_Site(t){var a=this;this.id,this.site_description,this.site_url,this.site_hash,this.site_row=t,this.save_credentials_in_browser,this.site_credentials,this.credentials_required,this.automatic_backups,this.autobackup_options,this.autobackup_requested,this.autobackup_complete,this.updates,this.update_requests,this.update_processing,this.additional_options,this.mass_update,this.update_queue;a.id=a.site_row.data("site_id"),a.site_description=a.site_row.data("site_description"),a.site_url=a.site_row.data("site_url"),a.site_hash=UpdraftCentral_Library.md5(a.id+"_"+a.site_row.data("site_url")),a.save_credentials_in_browser=!1,a.site_credentials=!1,a.credentials_required=!1,a.automatic_backups=!1,a.autobackup_options={},a.autobackup_requested=!1,a.autobackup_complete=!1,a.backup_completed=!1,a.updates={plugin:new UpdraftCentral_Collection,theme:new UpdraftCentral_Collection,core:new UpdraftCentral_Collection,translation:new UpdraftCentral_Collection},a.update_requests=new UpdraftCentral_Queue,a.update_processing=!1,a.mass_update=!1,a.update_queue=new UpdraftCentral_Collection,this.get_update_info=function(t,e){return!!a.updates[t].exists(e)&&a.updates[t].item(e)}}function UpdraftCentral_Queueable_Modal(t){var a=!1,e=t||jQuery("#updraftcentral_modal_dialog"),i=function(){void 0!==e?e.on(o,function(){var t;n.is_empty()?(a=!0,e.off(o),n.unlock()):void 0!==(t=n.dequeue())&&s(t)}):console.log("UpdraftCentral_Queueable_Modal: Modal element does not exist.")},n=new UpdraftCentral_Queue,o="hidden.bs.modal",s=(i(),function(t){UpdraftCentral.open_modal(t.title,t.body,t.action_button_callback,t.action_button_text,t.pre_open_callback,t.sanitize_body,t.extra_classes)});this.load=function(){var t;!n.is_empty()&&n.get_lock()&&void 0!==(t=n.dequeue())&&s(t)},this.open=function(t,e){void 0!==e&&e?n.is_locked()||(n.enqueue(t),!n.is_empty()&&a&&(i(),a=!1)):s(t)},this.close=function(){UpdraftCentral.close_modal()},this.get_queue_item_count=function(){return n.get_length()}}function Fn_UpdraftCentral_Library(){this.dialog={};function n(t){var i=jQuery.Deferred();return UpdraftCentral.send_ajax("manage_site_meta",t,null,"via_mothership_encrypting",null,function(t,e,a){"ok"==e&&void 0!==t.data?i.resolve(t.data):i.reject(t.message)}),i.promise()}function o(t,e){l.fullscreen.isFullScreen()&&l(".bootbox.modal").appendTo("#updraftcentral_dashboard"),l(".bootbox.modal").on("click","a",function(t){var e=l(this).attr("href");"function"==typeof redirect_updraft_website_links&&redirect_updraft_website_links(e,t)}),l(".bootbox.modal .updraftcentral_site_editdescription").on("click",function(t){t.preventDefault(),l(this).closest(".modal").modal("hide"),open_site_configuration(UpdraftCentral.$site_row)}),l(".bootbox.modal .updraftcentral_test_other_connection_methods").on("click",function(t){t.preventDefault(),l(this).closest(".modal").modal("hide"),open_connection_test(UpdraftCentral.$site_row)}),l(".bootbox.modal").data("id",t),l(".bootbox.modal.bootbox-alert, .bootbox.modal.bootbox-confirm, .bootbox.modal.bootbox-prompt").find('button[data-bs-dismiss="modal"], button[data-bb-handler="ok"], button[data-bb-handler="cancel"], button[data-bb-handler="confirm"]').off("click").on("click",function(){s.exists(t)&&s.remove(t),l("#updraftcentral_dashboard").trigger("updraftcentral_dialog_closed")}),l(".bootbox.modal").on("hidden.bs.modal",function(){s.exists(t)&&s.remove(t),l("#updraftcentral_dashboard").trigger("updraftcentral_dialog_closed")}),void 0!==e&&e&&(e.on("shown.bs.modal",function(){l("#updraftcentral_dashboard").trigger("updraftcentral_bootbox_dialog_opened",[t,e])}),e.on("hidden.bs.modal",function(){l("#updraftcentral_dashboard").trigger("updraftcentral_bootbox_dialog_closed",[t,e])})),l("#updraftcentral_dashboard").trigger("updraftcentral_dialog_opened")}var l=jQuery,s=new UpdraftCentral_Collection;this.is_numeric=function(t){return"number"==typeof t||"string"==typeof t&&!isNaN(t)&&!isNaN(parseFloat(t))},this.parseBool=function(t){return t="boolean"!=typeof(t="number"==typeof(t="number"==typeof(t="string"!=typeof(t="string"!=typeof t||"true"!=t.toLowerCase()&&"1"!=t?t:!0)||"false"!=t.toLowerCase()&&"0"!=t?t:!1)&&1==t?!0:t)&&0==t?!1:t)?!1:t},this.sort=function(t,a,i){if(Array.isArray(t)&&"string"==typeof a)return void 0===i&&(i="asc"),t.sort(function(t,e){return"object"==typeof t&&t.hasOwnProperty(a)&&"object"==typeof e&&e.hasOwnProperty(a)?(t=t[a].toString().toLowerCase(),e=e[a].toString().toLowerCase(),"desc"===i?e<t?-1:t<e?1:0:t<e?-1:e<t?1:0):0}),t},this.filter=function(t,s,r,d){if(Array.isArray(t)&&Array.isArray(s)&&"string"==typeof r)return l.grep(t,function(t){for(var e=[],a=0;a<s.length;a++){var i=s[a];"object"==typeof t&&t.hasOwnProperty(i)&&e.push(t[i].toString())}if(e.length){if(void 0===d||!d){if(1===e.length&&-1==e[0].indexOf(",")&&r.length)return e[0].toLowerCase()===r.toLowerCase();for(var n=!1,a=0;a<e.length;a++){var o=e[a];if(o.toLowerCase()===r.toLowerCase()){n=!0;break}if(-1!==o.toLowerCase().indexOf(r.toLowerCase())){n=!0;break}}return n}if(e.length===s.length)return!0}return!1})},this.enable_actions=function(t){l(t=void 0!==t&&t?t:".updraftcentral_row_extracontents").find("input, button, select, a").prop("disabled",!1).removeClass("disabled_cursor")},this.disable_actions=function(t,e){t=void 0!==t&&t?t:".updraftcentral_row_extracontents";var a="";void 0!==e&&Array.isArray(e)&&e.length&&(a=e.join(",")),l(t).find("input, button, select, a").not(a).prop("disabled",!0).addClass("disabled_cursor")},this.is_dialog_opened=function(){return!(!l("div.bootbox.modal").is(":visible")&&!l("div#updraftcentral_modal_dialog").is(":visible"))},this.add_site_meta=function(t,e,a,i){return n({action:"add",site_id:t,meta_key:e,meta_value:a,unique:i=void 0===i?!1:i})},this.delete_site_meta=function(t,e,a){return n({action:"delete",site_id:t,meta_key:e,meta_value:a=void 0===a?"":a})},this.get_site_meta=function(t,e,a){return n({action:"get",site_id:t,key:e=void 0===e?"":e,single:a=void 0===a?!1:a})},this.update_site_meta=function(t,e,a,i){return n({action:"update",site_id:t,meta_key:e,meta_value:a,prev_value:i=void 0===i?"":i})};this.ucfirst=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},this.open_connection_test=function(e){var i,a=UpdraftCentral.get_contact_url(e),n=e.data("site_id"),o=e.data("connection_method");"via_mothership_encrypting"==o?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.test_connection_methods+"</h2><p>"+udclion.test_not_possible_in_current_mode+"</p>"):(i="direct_jquery_auth"==o||"direct_default_auth"==o?"direct":o,UpdraftCentral.open_modal(udclion.test_connection_methods,UpdraftCentral.template_replace("sites-connection-test",{site_url:a}),!0,!1,function(){var t=!0;(t="https:"==document.location.protocol&&"http:"==a.substring(0,5).toLowerCase()?!1:t)?(l("#updraftcentral_modal .connection-test-direct .connection-test-result").html(""),UpdraftCentral.send_ajax("ping",null,e,"direct_default_auth","#updraftcentral_modal .connection-test-direct .connection-test-result",function(t,e,a){0<UpdraftCentral.get_debug_level()&&(console.log("Result follows for 'direct_default_auth' method:"),console.log(t)),"ok"==e?(t='<span class="connection-test-succeeded">'+udclion.succeeded+"</span> ",t+="direct"==i?udclion.current_method+" "+udclion.best_method+" "+udclion.recommend_keep:udclion.best_method+" "+udclion.recommend_use+' <a href="#" class="connection-test-switch" data-site_id="'+n+'" data-connection_method="direct_default_auth">'+udclion.switch_to+"...</a>",l("#updraftcentral_modal .connection-test-direct .connection-test-result").html(t)):l("#updraftcentral_modal .connection-test-direct .connection-test-result").html('<span class="connection-test-failed">'+udclion.failed+" ("+a+")</span>")},30,!1)):l("#updraftcentral_modal .connection-test-direct .connection-test-result").html(udclion.not_possible_browser_restrictions),l("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html(""),UpdraftCentral.send_ajax("ping",null,e,"via_mothership","#updraftcentral_modal .connection-test-via_mothership .connection-test-result",function(t,e,a){l("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html(e),0<UpdraftCentral.get_debug_level()&&(console.log("Result follows for 'via_mothership' method:"),console.log(t)),"ok"==e?(e='<span class="connection-test-succeeded">'+udclion.succeeded+"</span> ",e+="via_mothership"!=o?'<a href="#" class="connection-test-switch" data-site_id="'+n+'" data-connection_method="via_mothership">'+udclion.switch_to+"...</a>":udclion.current_method,l("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html(e)):("unexpected_http_code"==(e=a)&&(null!=t&&t.hasOwnProperty("data")&&null!=t.data&&t.data.hasOwnProperty("response")&&t.data.response.hasOwnProperty("code")&&(e+=" - "+t.data.response.code),null!=t)&&t.hasOwnProperty("data")&&null!=t.data&&t.data.hasOwnProperty("response")&&t.data.response.hasOwnProperty("message")&&(e+=" - "+t.data.response.message),l("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html('<span class="connection-test-failed">'+udclion.failed+" ("+e+")</span>"))},30,!1),l("#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result").html(""),UpdraftCentral.send_ajax("ping",null,e,"via_mothership_encrypting","#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result",function(t,e,a){0<UpdraftCentral.get_debug_level()&&(console.log("Result follows for 'via_mothership_encrypting' method:"),console.log(t)),"ok"==e?(e='<span class="connection-test-succeeded">'+udclion.succeeded+"</span> ",e+="via_mothership_encrypting"!=o?'<a href="#" class="connection-test-switch" data-site_id="'+n+'" data-connection_method="via_mothership_encrypting">'+udclion.switch_to+"...</a>":udclion.current_method,l("#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result").html(e)):("unexpected_http_code"==(e=a)&&(null!=t&&t.hasOwnProperty("data")&&null!=t.data&&t.data.hasOwnProperty("response")&&t.data.response.hasOwnProperty("code")&&(e+=" - "+t.data.response.code),null!=t)&&t.hasOwnProperty("data")&&null!=t.data&&t.data.hasOwnProperty("response")&&t.data.response.hasOwnProperty("message")&&(e+=" - "+t.data.response.message),l("#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result").html('<span class="connection-test-failed">'+udclion.failed+" ("+e+")</span>"))},30,!1)},!0,"modal-lg"))},this.dialog.alert=function(t,e,a,i,n){(a="undefined"==a||a)&&(t=this.sanitize_html(t));a=void 0!==i?i:UpdraftCentral_Library.md5("_alert_"+t);s.exists(a)||(s.add(a,!0),i=bootbox.alert({message:t,callback:e,backdrop:n}),o(a,i))},this.dialog.confirm=function(t,e,a,i){a=void 0!==a&&a?a:UpdraftCentral_Library.md5("_confirm_"+t);s.exists(a)||(s.add(a,!0),t={message:t,callback:e},void 0!==i&&i&&(e={confirm:{label:udclion.ok},cancel:{label:udclion.cancel}},i.hasOwnProperty("confirm")&&i.confirm&&(e.confirm.label=i.confirm),i.hasOwnProperty("cancel")&&i.cancel&&(e.cancel.label=i.cancel),t.buttons=e),i=bootbox.confirm(t),o(a,i))},this.dialog.prompt=function(t,e,a,i){i=void 0!==i?i:UpdraftCentral_Library.md5("_prompt_"+t);s.exists(i)||(s.add(i,!0),t=bootbox.prompt({title:t,value:e,callback:a}),o(i,t))},this.dialog.custom=function(t,e,a){e=void 0!==e&&e?e:UpdraftCentral_Library.md5("_custom_"+t);s.exists(e)||(s.add(e,!0),t=bootbox.dialog({message:t,backdrop:"static",closeButton:!0,buttons:a}),o(e,t))},this.md5=function(t){var e=forge.md.md5.create();return e.update(t),e.digest().toHex()},this.sanitize_html=function(t){return html_sanitize.sanitize(t,function(t){if(/^https?:\/\//.test(t))return t},function(t){return t})},this.escape_attrib=function(t){return html_sanitize.escapeAttrib(t)},this.quote_attribute=function(t,e){return e=e?"&#13;":"\n",(""+t).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,e).replace(/[\r\n]/g,e)},this.open_browser_at=function(t,e,a){e=void 0!==e?e:null,a=void 0===a?t:a,UpdraftCentral.send_site_rpc("core.get_login_url",e,t,function(t,e,a){"ok"==e&&!1!==t&&t.hasOwnProperty("data")&&(e=t.data.login_url,t=window.open(e,"_blank"),UpdraftCentral_Library.focus_window_or_error(t))},a)},this.focus_window_or_error=function(t){null!=t?t instanceof jQuery?t.trigger("focus"):t.focus():this.dialog.alert("<h2>"+udclion.open_new_window+"</h2>"+udclion.window_may_be_blocked)},this.toggle_fullscreen=function(){l.fullscreen.isFullScreen()?(l("footer").show(),l.fullscreen.exit(),l("#updraftcentral_modal_dialog").appendTo(document.body)):(l("footer").hide(),l("#updraftcentral_dashboard").parent().fullscreen({toggleClass:"updraft-fullscreen"}),l("#updraftcentral_modal_dialog").appendTo("#updraftcentral_dashboard"))},this.unserialize=function(t){for(var e,a,i=decodeURI(t).split("&"),n={},o=0,s=i.length;o<s;o++)void 0===n[a=(e=i[o].split("="))[0]]?n[a]=unescape(e[1]):("string"==typeof n[a]&&(n[a]=[n[a]]),n[a].push(unescape(e[1])));return n},this.get_serialized_options=function(t){var a=l(t).serialize();return l.each(l(t+" input[type=checkbox]").filter(function(t){return 0==l(this).prop("checked")}),function(t,e){a+="&"+l(e).attr("name")+"=0"}),a},this.download_inner_html=function(t,e,a){a=a||"text/plain";var e=document.getElementById(e).innerHTML,i=document.body.appendChild(document.createElement("a"));i.setAttribute("download",t),i.setAttribute("style","display:none;"),i.setAttribute("href","data:"+a+";charset=utf-8,"+encodeURIComponent(e)),i.click()}}jQuery(function(t){window.UpdraftCentral_Library=new Fn_UpdraftCentral_Library,window.UpdraftCentral_Storage=new UpdraftCentral_Storage});