function UpdraftCentral_UpdraftPlus_Module(){var w=jQuery,t=".updraftcentral_row_extracontents .updraft_site_settings_output ",d="#updraftcentral_dashboard_existingsites "+t,u={},o=new UpdraftCentral_Collection,l=new UpdraftCentral_Collection,p="single";function s(t){var a=[],e=(t.find("tr.updraft_existing_backups_row").each(function(){var t=w(this).data("key"),e=w(this).find("button.updraft_download_button");e.length&&(e=e[0].closest("td"),-1===w.inArray(t,a))&&(a.push(t),w(e).prepend('<a class="show-backup-data" data-key="'+t+'"><span class="dashicons dashicons-arrow-right"></span> '+udclion.updraftplus.select_backup_data+"</a>"),w(e).find("button.updraft_download_button").wrapAll('<span class="backup-data-'+t+' hide-backup-data"></span>'))}),UpdraftCentral.register_event_handler("click","a.show-backup-data",function(){var t=w(this).data("key");w(this).find("span.dashicons").toggleClass("dashicons-arrow-right dashicons-arrow-down"),w(this).parent().find(".backup-label-container-"+t).toggleClass("hide-backup-data"),w(this).parent().find(".backup-data-"+t).toggleClass("hide-backup-data")}),t.find(".updraftcentral_row_extracontents div.backup_date_label"));e.length||(t.find(".updraftcentral_row_extracontents td.updraft_existingbackup_date").each(function(){w(this).wrapInner('<div class="backup_date_label"></div>')}),e=t.find(".updraftcentral_row_extracontents div.backup_date_label")),e.length&&(e.prepend('<div class="delete-backup-container"><input type="checkbox" class="delete_backup_item" name="delete_backup" value="1" /></div>'),t.find(".updraftcentral_row_extracontents div.updraft_existing_backups").append('<button id="btn-backup-bulk-delete" class="btn btn-secondary">'+udclion.updraftplus.delete_selected+"</button>")),($table=function(t,e,a){var t=t.find(".updraftcentral_row_extracontents table.existing-backups-table"),r=t.find("thead th.backup-date"),n=t.find("tbody td.updraft_existingbackup_date");void 0!==a&&a&&n.next("td").attr("class","updraft_existingbackup_data");return w('<th class="backup-'+e+'">'+udclion.updraftplus.backup+" "+e+"</th>").insertAfter(r),w('<td class="updraft_existingbackup_'+e+'"></td>').insertAfter(n),t}(t,"storage",!0)).find("tr.updraft_existing_backups_row").each(function(){var t=w(this);t.find(".backup_date_label img.stored_icon").each(function(){w(this).appendTo(t.find("td.updraft_existingbackup_storage"))})}),t.find(".updraftcentral_row_extracontents table.existing-backups-table").find("tr.updraft_existing_backups_row").each(function(){var t=w(this),e=t.find("td.updraft_existingbackup_data a.show-backup-data"),a="backup-label-container-"+e.data("key");w('<div class="'+a+' hide-backup-data"></div>').insertAfter(e),t.find(".backup_date_label br").wrap("<span></span>"),t.find(".backup_date_label .clear-right ~ span").appendTo(t.find("div."+a))})}UpdraftCentral.register_listener_processor("updraftplus_backup",function(t,e,a){return 0<w(t).find(".updraft_finished").length?(1<UpdraftCentral.get_debug_level()&&console.log("UDCentral: UpdraftPlus backup listener: job finished"),0):(t=w(t).data("job_id"),u.hasOwnProperty(t)||(u[t]=0),u[t]++,u[t]<30||0==u[t]%3?{call:"updraftplus.backup_progress",data:{job_id:t}}:null)}),UpdraftCentral.register_listener_processor("updraftplus.backup_progress",function(t,e,a,r){var n="";r.hasOwnProperty("l")&&(n+="<strong>"+udclion.updraftplus.lastlogline+":</strong> "+r.l+"<br>"),r.hasOwnProperty("j")&&(n+=r.j),w(t).find(".backup_state:first").html(UpdraftCentral_Library.sanitize_html(n)),r="<div class='text-center' id='info"+a+"'>"+("undefined"===jQuery.type(w(t).find(".updraft_percentage").data("info"))?udclion.updraftplus.missing_data_attributes:UpdraftCentral_Library.sanitize_html(w(t).find(".updraft_percentage").data("info")))+"</div>",r+="<progress class='progress progress-updraftcentral' value='"+("undefined"===jQuery.type(w(t).find(".updraft_percentage").data("progress"))?"0":UpdraftCentral_Library.quote_attribute(w(t).find(".updraft_percentage").data("progress")))+"' max='100' ></progress>",w(t).find(".curstage").html(r)}),UpdraftCentral.register_listener_processor("updraftplus_download",function(t,e,n){var s=[],d=null;return w(t).find(".updraftplus_downloader").each(function(t,e){w(e).data("updraft_finished")?null===d&&(d=!0):d=!1;var a=w(e).data("findex"),r=w(e).data("what"),e=w(e).data("backup_timestamp");s.push(n+","+e+","+r+","+a)}),d?(console.log("UDCentral: UpdraftPlus download listener: job finished - will not poll any more"),1):{call:"updraftplus.get_download_status",data:s}}),UpdraftCentral.register_listener_processor("updraftplus.get_download_status",function(t,e,a,r){w.each(r,function(t,e){var a,r,n,s,d,i,o;e.hasOwnProperty("base")&&(r=(e=e).base,e.f,n=e.findex,e.m,e.hasOwnProperty("p")&&e.p,e.s,e.t,s=e.timestamp,d=e.what,o="#updraftcentral_notice_container ."+(i=r+"_"+s+"_"+d+"_"+n),e.hasOwnProperty("failed")&&e.failed&&w(o).data("updraft_finished",!0),e.hasOwnProperty("e")&&e.e?(w(o+" .raw").html("<strong>"+udclion.error+":</strong> "+e.e),console.log("UDCentral: UpdraftPlus: downloader ("+i+"): an error was returned (follows)"),console.log(e)):null!==e.p?(w(o+"_st .dlfileprogress").width(e.p+"%"),null!=e.a&&0<e.a&&(a=(new Date).getTime()-w(o).data("last_time_began"),90<e.a)&&6e4<a&&(console.log("UDCentral: UpdraftPlus: "+i+": restarting download: file_age="+e.a+", since_last_restart_ms="+a),i={type:d,timestamp:s,findex:n},a=w('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+r+'"'),w(o).data("last_time_began",(new Date).getTime()),UpdraftCentral.send_site_rpc("updraftplus.downloader",i,a,function(t,e,a){"ok"!=e&&(w(o+" .raw").html(udclion.updraftplus.backup_start_failed),console.log("code="+e+", error_code="+a),console.log(t))})),e.hasOwnProperty("m")&&null!=e.m&&(e.p<100?w(o+" .raw").html(e.m):(msg=template_replace("updraftplus-downloaded",{file_ready:udclion.updraftplus.file_ready,download_to_computer:udclion.updraftplus.download_to_computer,and_then:udclion.updraftplus.and_then,you_should:udclion.updraftplus.you_should,backup_timestamp:s,site_id:r,what:d,findex:n,delete_from_server:udclion.updraftplus.delete_from_server}),w(o).data("updraft_finished",!0),w(o+" .raw").html(msg)))):null!=e.m?w(o+" .raw").html(e.m):w(o+" .raw").html(udclion.updraftplus.backup_start_failed))})}),this.backupnow_go=function(t,e,a,r,n,s,d,i){w("#updraftcentral_dashboard").trigger("updraftcentral_backup_started",{site_row:UpdraftCentral.$site_row}),n&&n.hasOwnProperty("_listener_title")&&(o=n._listener_title,delete n._listener_title);var o,t={backupnow_nodb:t,backupnow_nofiles:e,backupnow_nocloud:a,backupnow_label:s,extradata:n};""!=r&&(t.onlythisfileentity=r),""!=d&&(t.onlythesetableentities=d),""!=i&&(t.onlythesecloudservices=i),t.always_keep=void 0!==n.always_keep?n.always_keep:0,t.incremental=void 0!==n.incremental?n.incremental:0,UpdraftCentral.send_site_rpc("updraftplus.backupnow",t,UpdraftCentral.$site_row,function(t,e,a){var r;"ok"==e&&!1!==t&&t.hasOwnProperty("data")&&(t.data.hasOwnProperty("nonce")?(e='<div class="backup_state">'+udclion.updraftplus.backupstarted+"</div>",r=t.data.nonce,u[r]=0,UpdraftCentral.create_dashboard_listener("updraftplus_backup",UpdraftCentral.$site_row,e,{job_id:t.data.nonce},o)):UpdraftCentral.add_dashboard_notice("<h2>"+UpdraftCentral.$site_row.data("site_description")+"</h2>"+udclion.updraftplus.backup_start_failed,"error"))})};var k=0,v=0;function n(m){m.find(".updraftcentral_row_extracontents").css("opacity","0.3"),UpdraftCentral.send_site_rpc("updraftplus.get_settings",{include_database_decrypter:0,include_adverts:0,include_save_button:1},m,function(n,t,e){if(m.find(".updraftcentral_row_extracontents").css("opacity","1.0"),"ok"==t&&n){if(m.find(".updraftcentral_row_extracontents").html('<div class="updraft_site_settings_output"><button class="btn btn-refresh updraftcentral_site_backup_settings"><span class="dashicons dashicons-image-rotate "></span></button>'+UpdraftCentral_Library.sanitize_html(n.data.settings)+"</div>"),void 0!==(t=w("#updraft_include_more_options p.updraft-field-description"))&&t&&t.html(udclion.updraftplus.directory_field_desc),n.data.hasOwnProperty("remote_storage_templates")&&n.data.hasOwnProperty("remote_storage_options")){var a,r,s="",d=["default","template_properties"];for(r in n.data.remote_storage_templates)if(void 0===(a=n.data.remote_storage_options[r])||Array.isArray(a.default)||"object"!=typeof a.default)s+=n.data.remote_storage_templates[r];else{var o=Handlebars.compile(n.data.remote_storage_templates[r]);if(n.data.hasOwnProperty("remote_storage_partial_templates"))for(var u in n.data.remote_storage_partial_templates[r])Handlebars.registerPartial(u,Handlebars.compile(n.data.remote_storage_partial_templates[r][u]));var l,p,_=!0,c=n.data.remote_storage_options[r].template_properties||{};for(l in n.data.remote_storage_options[r])-1<d.indexOf(l)||(p={},Object.assign(p,c,n.data.remote_storage_options[r][l]),void 0===p.instance_conditional_logic&&(p.instance_conditional_logic={type:"",rules:[]}),p.instance_conditional_logic.day_of_the_week_options=udclion.updraftplus.conditional_logic.day_of_the_week_options,p.instance_conditional_logic.logic_options=udclion.updraftplus.conditional_logic.logic_options,p.instance_conditional_logic.operand_options=udclion.updraftplus.conditional_logic.operand_options,p.instance_conditional_logic.operator_options=udclion.updraftplus.conditional_logic.operator_options,p.first_instance=_,void 0===p.instance_enabled&&(p.instance_enabled=1),s+=o(p),_=!1)}w("#remote-storage-holder").append(s)}function f(t){var e=Handlebars.compile(n.data.remote_storage_templates[t]),a=n.data.remote_storage_options[t].template_properties||{},r={},a=(Object.assign(r,a,n.data.remote_storage_options[t].default),""!=(a=r.method_display_name||"")&&(a+=" "),r.instance_id="s-"+function(t){for(var e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)e+=a.charAt(Math.floor(Math.random()*a.length));return e}(32),r.instance_enabled=1,r.instance_label=a+"("+(jQuery(".updraftcentral_row_extracontents #remote-storage-holder ."+t+"_updraft_remote_storage_border").length+1)+")",r.instance_conditional_logic={type:"",rules:[],day_of_the_week_options:udclion.updraftplus.conditional_logic.day_of_the_week_options,logic_options:udclion.updraftplus.conditional_logic.logic_options,operand_options:udclion.updraftplus.conditional_logic.operand_options,operator_options:udclion.updraftplus.conditional_logic.operator_options},e(r));w(a).hide().insertAfter("."+t+"_add_instance_container:first").show("slow"),D(t,r.instance_id)}w(".updraftcentral_row_extracontents #remote-storage-holder").on("click",".updraftplusmethod a.updraft_add_instance",function(t){t.preventDefault(),f(w(this).data("method"))}),w(".updraftcentral_row_extracontents #remote-storage-holder").on("click",".updraftplusmethod a.updraft_delete_instance",function(t){t.preventDefault();var t=w(this).data("method"),e=w(this).data("instance_id");1===w("."+t+"_updraft_remote_storage_border").length&&f(t),w("."+t+"-"+e).hide("slow",function(){w(this).remove()})}),w(".updraftcentral_row_extracontents #remote-storage-holder").on("change","input[class='updraft_instance_toggle']",function(){w(this).is(":checked")?w(this).siblings("label").html(udclion.updraftplus.instance_enabled):w(this).siblings("label").html(udclion.updraftplus.instance_disabled)}),jQuery(".updraftcentral_row_extracontents #remote-storage-holder").on("change","select[class='logic_type']",function(){updraft_settings_form_changed=!0,""!==this.value?(jQuery("div.logic",jQuery(this).parents("tr.updraftplusmethod")).show(),jQuery(this).parents("tr.updraftplusmethod").find("div.logic ul.rules > li").each(function(){jQuery(this).find("select").each(function(){jQuery(this).prop("disabled",!1)})})):(jQuery(this).parents("tr.updraftplusmethod").find("div.logic ul.rules > li").each(function(){jQuery(this).find("select").each(function(){jQuery(this).prop("disabled",!0)})}),jQuery(this).parents("tr.updraftplusmethod").find("div.logic").hide())}),jQuery(".updraftcentral_row_extracontents #remote-storage-holder").on("change","select[class='conditional_logic_operand']",function(){if(updraft_settings_form_changed=!0,jQuery(this).parent().find("select:nth(2)").empty(),"day_of_the_week"===jQuery(this).val())for(i=0;i<udclion.updraftplus.conditional_logic.day_of_the_week_options.length;i++)jQuery(this).parent().find("select:nth(2)").append(jQuery('<option value="'+udclion.updraftplus.conditional_logic.day_of_the_week_options[i].index+'"></option>').text(udclion.updraftplus.conditional_logic.day_of_the_week_options[i].value));else if("day_of_the_month"===jQuery(this).val())for(i=1;i<=31;i++)jQuery(this).parent().find("select:nth(2)").append(jQuery('<option value="'+i+'"></option>').text(i))}),jQuery(".updraftcentral_row_extracontents #remote-storage-holder").on("click","div.conditional_remote_backup ul.rules li span",function(){updraft_settings_form_changed=!0;var t=jQuery(this).parents("ul.rules");jQuery(this).hasClass("remove-rule")&&jQuery(this).parent().slideUp(function(){jQuery(this).remove(),jQuery(t).find("> li").length<2&&jQuery("li:nth(0) span.remove-rule",t).remove()})}),jQuery(".updraftcentral_row_extracontents #remote-storage-holder").on("click",".updraftplusmethod .updraft_edit_label_instance",function(t){var e;"true"!==jQuery(this).data("is-editing")&&((e=jQuery('<input type="text" class="updraft_edit_label_instance">')).val(jQuery(this).text()),jQuery(this).text(""),e.data("instance_id",jQuery(this).data("instance_id")),e.data("method",jQuery(this).data("method")),e.appendTo(jQuery(this)),e.trigger("focus"),jQuery(this).data("is-editing","true"))}),w(".updraftcentral_row_extracontents #remote-storage-holder").on("keyup",".updraftplusmethod input.updraft_edit_label_instance",function(t){var e=jQuery(this).data("method"),a=jQuery(this).data("instance_id"),r=jQuery(this).val();w("#updraft_"+e+"_instance_label_"+a).val(r)}),jQuery(".updraftcentral_row_extracontents #remote-storage-holder").on("blur",".updraftplusmethod input.updraft_edit_label_instance",function(t){jQuery(this).parent().append(jQuery(this).val()+'<span class="dashicons dashicons-edit"></span>'),jQuery(this).parent().data("is-editing","false"),jQuery(this).remove()}),w(".updraftcentral_row_extracontents #remote-storage-holder").on("keypress",".updraftplusmethod input.updraft_edit_label_instance",function(t){13===t.which&&w(this).trigger("blur")}),jQuery(".updraftcentral_row_extracontents #remote-storage-holder").on("click","div.conditional_remote_backup input.add-new-rule",function(){var t=jQuery(this).parent().find("ul.rules");jQuery(t).find("> li").length<2&&jQuery(t).find("li:nth(0)").append('<span class="remove-rule"><svg viewbox="0 0 25 25"><line x1="6.5" y1="18.5" x2="18.5" y2="6.5" fill="none" stroke="#FF6347" stroke-width="3" vector-effect="non-scaling-stroke" ></line><line y1="6.5" x1="6.5" y2="18.5" x2="18.5" fill="none" stroke="#FF6347" stroke-width="3" vector-effect="non-scaling-stroke" ></line></svg></span>'),$cloned_item=jQuery(t).find("> li").last().clone(),jQuery($cloned_item).find("> select").each(function(){jQuery(this).prop("name",jQuery(this).prop("name").replace(/\[instance_conditional_logic\]\[rules\]\[[0-9]+\]/gi,"[instance_conditional_logic][rules]["+jQuery(t).data("rules")+"]"))}),jQuery(t).append($cloned_item),jQuery(t).data("rules",parseInt(jQuery(t).data("rules"))+1),jQuery($cloned_item).find('select[name*="[operand]"]').trigger("change")}),m.find('.updraftcentral_row_extracontents #remote-storage-container > input[type="checkbox"]').each(function(){var t=jQuery(this);t.attr("aria-label",udclion.updraftplus.backup_using+" "+t.val()+"?")}),U(),H=0,b=w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraft_servicecheckbox:checked"),w(b).each(function(t,e){var a=w(e).val();"updraft_servicecheckbox_none"!=w(e).attr("id")&&H++,w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab-"+a).show(),t==w(b).length-1&&L(a)}),0<H?w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod.none").hide():(w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod:not(.none)").hide(),w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod.none").show()),"function"==typeof(t=w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraft_servicecheckbox")).labelauty&&t.labelauty(),k=y=0,n.data.hasOwnProperty("meta")&&((t=n.data.meta).hasOwnProperty("retain_rules")&&t.retain_rules.hasOwnProperty("files")&&(h=t.retain_rules.files,g=t.retain_rules.db,j=C=0,w.each(h,function(t,e){Q("files",e.after_howmany,e.after_period,e.every_howmany,e.every_period)}),w.each(g,function(t,e){Q("db",e.after_howmany,e.after_period,e.every_howmany,e.every_period)})),t.hasOwnProperty("extra_dbs"))&&w.each(t.extra_dbs,function(t,e){e.hasOwnProperty("host")&&x(e.host,e.user,e.name,e.pass,e.prefix)}),n.data.hasOwnProperty("updraftplus_version")&&(v=n.data.updraftplus_version),P("uploads"),P("others"),P("wpcore"),O=w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_report_cell .updraft_reportbox").length+2,w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_paths input.updraft_include_more_path").each(function(t,e){e=w(e).data(void 0);k<e&&(k=e)}),w('#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output input[type="submit"]').removeClass().addClass("btn btn-primary-outline"),w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output").on("change keyup paste",".updraft_webdav_settings",function(){var t,r=[],n="",e=(w(".updraft_webdav_settings").each(function(t,e){var a,e=w(e).attr("id");e&&"updraft_webdav_settings_"==e.substring(0,24)?(a=e.substring(24),r[a]=this.value):e&&"updraft_webdav_"==e.substring(0,15)&&(a=e.substring(15),a=(id_split=a.split("_"))[0],n=id_split[1],void 0===r[n]&&(r[n]=[]),r[n][a]=this.value)}),"@"),a="/",s=":",d=":";for(n in r)(0<=r[n].host.indexOf("@")||""===r[n].host)&&(e=""),0<=r[n].host.indexOf("/")?w(".webdav-"+n+" .updraft_webdav_host_error").show():w(".webdav-"+n+" .updraft_webdav_host_error").hide(),0!=r[n].path.indexOf("/")&&""!==r[n].path||(a=""),""!==r[n].user&&""!==r[n].pass||(s=""),""!==r[n].host&&""!==r[n].port||(d=""),t=r[n].webdav+r[n].user+s+r[n].pass+e+encodeURIComponent(r[n].host)+d+r[n].port+a+r[n].path,masked_webdav_url=r[n].webdav+r[n].user+s+r[n].pass.replace(/./gi,"*")+e+encodeURIComponent(r[n].host)+d+r[n].port+a+r[n].path,""==n?w("#updraftcentral_dashboard .updraft_site_settings_output #updraft_webdav_settings_url").val(t):(w("#updraftcentral_dashboard .updraft_site_settings_output #updraft_webdav_url_"+n).val(t),w("#updraftcentral_dashboard .updraft_site_settings_output #updraft_webdav_masked_url_"+n).val(masked_webdav_url))})}var h,g,b})}var y=0;function x(t,e,a,r,n){y++,w(template_replace("updraftplus-settings-extra-db",{updraft_extra_dbs:y,remove:udclion.updraftplus.remove,backup_external_database:udclion.updraftplus.backup_external_database,host:udclion.updraftplus.host,database:udclion.updraftplus.database,username:udclion.updraftplus.username,password:udclion.updraftplus.password,table_prefix:udclion.updraftplus.table_prefix,backup_tables_with_prefixes:udclion.updraftplus.backup_tables_with_prefixes,test_connection:udclion.updraftplus.test_connection},{host_attr:t,user_attr:e,name_attr:a,pass_attr:r,prefix_attr:n})).appendTo(w("#updraft_backupextradbs")).fadeIn()}function a(){UpdraftCentral.register_row_clicker(".row_backupnow, .updraftcentral_site_backup_now",function(t){e(t,"new")},!0),UpdraftCentral.register_row_clicker(".row_backupnow, .updraftcentral_site_backup_now_increment",function(t){e(t,"incremental")},!0),UpdraftCentral.register_modal_listener("#backupnow_includefiles_showmoreoptions",function(t){t.preventDefault(),w("#updraftcentral_modal #backupnow_includefiles_moreoptions").slideToggle()}),UpdraftCentral.register_modal_listener("#backupnow_database_showmoreoptions",function(t){t.preventDefault(),w("#updraftcentral_modal #backupnow_database_moreoptions").slideToggle()}),UpdraftCentral.register_modal_listener("#backupnow_includecloud_showmoreoptions",function(t){t.preventDefault(),w("#updraftcentral_modal #backupnow_includecloud_moreoptions").slideToggle()}),UpdraftCentral.register_event_handler("click",".updraftcentral_notice_contents [id^=updraftplus_manual_authorisation_submit_]",function(){arguments[arguments.length-1].preventDefault();var r,t=w(this).data("method"),e=w("#updraftplus_manual_authentication_data_"+t).val();w("#updraftplus_manual_authentication_error_"+t).text(),w("#updraft-wrap #updraftplus_manual_authorisation_template_"+t+" .updraftplus_spinner.spinner").addClass("visible"),w("#updraftplus_manual_authorisation_submit_"+t).prop("disabled",!0),r=t,t=e,UpdraftCentral.send_site_rpc("updraftplus.manual_remote_storage_authentication",{method:r,auth_data:t},UpdraftCentral.$site_row,function(t,e,a){"rpcok"==t.response&&t.hasOwnProperty("data")&&(t=t.data,w("#updraft-wrap #updraftplus_manual_authorisation_template_"+r+" .updraftplus_spinner.spinner").removeClass("visible"),t.hasOwnProperty("result")&&"success"===t.result?(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.updraftplus.manual_auth_result+"</h2>"+t.data),w("#updraft-wrap #updraftplus_manual_authorisation_template_"+r).parent().remove(),w("#updraft-wrap .updraft_authenticate_"+r).remove()):t.hasOwnProperty("result")&&"error"===t.result&&(w("#updraftplus_manual_authentication_error_"+r).text(t.data),w("#updraftplus_manual_authorisation_submit_"+r).prop("disabled",!1)))})})}function _(n){n.find(".updraftcentral_row_extracontents").css("opacity","0.3");var t=navigator.userAgent.match(/Opera|OPR\//)?1:0;UpdraftCentral.send_site_rpc("updraftplus.get_fragment",{fragment:"panel_download_and_restore",data:{include_opera_warning:t,include_uploader:0,will_immediately_calculate_disk_space:0,include_header:1}},n,function(t,e,a){var r;n.find(".updraftcentral_row_extracontents").css("opacity","1.0"),"ok"==e&&t&&(n.find(".updraftcentral_row_extracontents").html('<div class="updraft_existing_backups_output"><button class="btn btn-refresh updraftcentral_site_backups_manage"><span class="dashicons dashicons-image-rotate" ></span></button>'+UpdraftCentral_Library.sanitize_html(t.data.output)+"</div>"),s(n),o.count())&&(r=setInterval(function(){if(w("table.existing-backups-table").length)switch(clearInterval(r),p){case"single":var t=o.get_items();o.clear(),t.length&&w('tr.updraft_existing_backups_row[data-nonce="'+t[0]+'"]').find("a.updraft-delete-link").trigger("click");break;case"multiple":t=l.get_items();if(l.clear(),o.clear(),t.length){for(var e=0;e<t.length;e++)w('tr.updraft_existing_backups_row[data-nonce="'+t[e]+'"]').find("input.delete_backup_item").prop("checked",!0);w("button#btn-backup-bulk-delete").trigger("click")}}},1e3))})}function e(t,l){UpdraftCentral.send_site_rpc("updraftplus.get_fragment","backupnow_modal_contents",t,function(t,e,a){var r,n;"ok"==e&&t&&(e=!(t.data.output.hasOwnProperty("error")&&t.data.output.error)&&udclion.updraftplus.backupnow,n=!1,t.data.output.hasOwnProperty("backupnow_file_entities")&&(r=t.data.output.backupnow_file_entities),t.data.output.hasOwnProperty("incremental_installed")&&(n=t.data.output.incremental_installed),UpdraftCentral.open_modal(udclion.updraftplus.backupnow,t.data.output.html,function(){var t=w("#updraftcentral_modal #backupnow_includedb").is(":checked")?0:1,e=w("#updraftcentral_modal #backupnow_includefiles").is(":checked")?0:1,a=w("#updraftcentral_modal #backupnow_includecloud").is(":checked")?0:1,r="incremental"==l?1:0,n="",s=(w('#updraftcentral_modal #backupnow_includefiles_moreoptions input[type="checkbox"]').each(function(t){var e;w(this).is(":checked")&&"updraft_include_"==(e=w(this).attr("name")).substring(0,16)&&(e=e.substring(16),""!=n&&(n+=","),n+=e)}),""),d=!1,i=(w('#backupnow_database_moreoptions input[type="checkbox"]').each(function(t){w(this).is(":checked")||(d=!0)}),s=!d||jQuery("input[name^='updraft_include_tables_']").serializeArray(),!1),o="",u=(jQuery('#backupnow_includecloud_moreoptions input[type="checkbox"]').each(function(t){jQuery(this).is(":checked")||(i=!0)}),o=!i||jQuery("input[name^='updraft_include_remote_service_']").serializeArray(),w("#always_keep").is(":checked")?1:0);""==n&&0==e?UpdraftCentral_Library.dialog.alert(udclion.updraftplus.nofileschosen):""==s&&0==t?UpdraftCentral_Library.dialog.alert(udclion.updraftplus.notableschosen):""==o&&0==a?(alert(udclion.updraftplus.nocloudserviceschosen),jQuery("#backupnow_includecloud_moreoptions").show()):(d||(s=null),i||(o=null),t&&e?UpdraftCentral_Library.dialog.alert(udclion.updraftplus.excludedeverything):(UpdraftCentral.close_modal(),UpdraftCentral_Module_UpdraftPlus.backupnow_go(t,e,a,n,{always_keep:u,incremental:r},w("#updraftcentral_modal #backupnow_label").val(),s,o)))},e,function(){n||"incremental"!=l?jQuery("#updraftcentral_modal .incremental-backups-only").hide():(jQuery("#updraftcentral_modal .incremental-free-only").show(),l="new"),w("#updraftcentral_modal #backupnow_label").val(""),"incremental"==l?(c(!0,r),w("#updraftcentral_modal #backupnow_includedb").prop("checked",!1),w("#updraftcentral_modal #backupnow_includefiles").prop("checked",!0),w("#updraftcentral_modal #backupnow_includefiles_label").text(udclion.updraftplus.files_incremental_backup),w("#updraftcentral_modal .new-backups-only").hide(),w("#updraftcentral_modal .incremental-backups-only").show()):(c(!1,r),w("#updraftcentral_modal #backupnow_includedb").prop("checked",!0),w("#updraftcentral_modal #backupnow_includefiles_label").text(udclion.updraftplus.files_new_backup),w("#updraftcentral_modal .new-backups-only").show(),w("#updraftcentral_modal .incremental-backups-only").hide()),w("#updraftcentral_modal #backupnow_includefiles_moreoptions").hide(),w("#updraftcentral_modal #updraft_backupnow_gotosettings").contents().unwrap()},!0,"backup-now"))})}function c(t,e){t?jQuery(e).each(function(t,e){jQuery("#updraftcentral_modal #backupnow_files_updraft_include_"+e).prop("checked",!1),jQuery("#updraftcentral_modal #backupnow_files_updraft_include_"+e).prop("disabled",!0)}):jQuery('#updraftcentral_modal #backupnow_includefiles_moreoptions input[type="checkbox"]').each(function(t){var e=jQuery(this).attr("name");"updraft_include_"==e.substring(0,16)&&(e=e.substring(16),jQuery("#updraftcentral_modal #backupnow_files_updraft_include_"+e).prop("disabled",!1),jQuery(this).is(":checked"))&&jQuery("#updraftcentral_modal #backupnow_files_updraft_include_"+e).prop("checked",!0)})}function f(t,e,a){var r=udclion.updraftplus.delete_areyousure_singular;-1<t.indexOf(",")&&(r=udclion.updraftplus.delete_areyousure_plural),UpdraftCentral.open_modal(udclion.updraftplus.deletebackupset,UpdraftCentral.template_replace("updraftplus-deletebackup",{nonce:e,timestamp:t,delete_question:r,also_delete_from_remote:udclion.updraftplus.also_delete_from_remote,deleting_please_allow_time:udclion.updraftplus.deleting_please_allow_time}),function(){var t=w("#updraft_delete_modal_contents").data("nonce").toString(),e=w("#updraft_delete_modal_contents").data("timestamp").toString(),a=0,r=(w("#updraft_delete_modal_contents #updraft_delete_remote").is(":checked")&&(a=1),w("#updraftcentral_modal #updraft-delete-waitwarning").slideDown(),!!navigator.userAgent.match(/Opera|OPR\//));UpdraftCentral.send_site_rpc("updraftplus.deleteset",{backup_nonce:t,backup_timestamp:e,delete_remote:a,get_history_opts:{include_opera_warning:r,include_uploader:!1,will_immediately_calculate_disk_space:!1,include_header:!0}},UpdraftCentral.$site_row,function(t,e,a){w("#updraftcentral_modal #updraft-delete-waitwarning").slideUp(),"ok"==e&&t&&null!=(e=t.data).result&&("error"==e.result?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2>"+e.message):"success"==e.result&&(_(UpdraftCentral.$site_row),UpdraftCentral.close_modal(),void 0===(t=e.message)&&(t=e.local_message+" "+e.backup_local,t=(t+=", "+e.remote_message+" "+e.backup_remote)+", "+e.set_message+" "+e.backup_sets),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.updraftplus.deleted+"</h2>"+t)))})},udclion.updraftplus.delete,function(){a?(w("#updraft-delete-remote-section, #updraft_delete_remote").prop("disabled",!1),w("#updraft-delete-remote-section, #updraft_delete_remote").show()):w("#updraft-delete-remote-section").remove()})}function U(){var t=0,e=w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_interval").val(),a=("manual"==e?w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_files_timings").hide():w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_files_timings").show(),"weekly"==e||"fortnightly"==e||"monthly"==e?(r("updraft_startday_files",e),w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output #updraft_startday_files").show()):(w("#updraftcentral_dashboard_existingsites .updraft_monthly_extra_words_updraft_startday_files").remove(),w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output #updraft_startday_files").hide()),w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_interval_database").val());"manual"==a&&(t=1,w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_db_timings").hide()),"weekly"==a||"fortnightly"==a||"monthly"==a?(r("updraft_startday_db",a),w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output #updraft_startday_db").show()):(w("#updraftcentral_dashboard_existingsites .updraft_monthly_extra_words_updraft_startday_db").remove(),w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output #updraft_startday_db").hide()),a==e?(w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_db_timings").hide(),0==t?w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_same_schedules_message").show():w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_same_schedules_message").hide()):(w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_same_schedules_message").hide(),0==t&&w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_db_timings").show())}"notices"!=UpdraftCentral.get_dashboard_mode()&&a(),w("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set",function(t,e){e&&e.hasOwnProperty("new_mode")&&"notices"==e.new_mode||a()}),w("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_backups",function(){UpdraftCentral.register_updraftplus_install_activate_handlers("button.updraftcentral_site_backups_manage"),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_backupextradb_another",function(){x("","","","","")}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_backupextradbs .updraft_backupextradbs_row_delete",function(){w(this).parents(".updraft_backupextradbs_row").fadeOut("medium",function(){w(this).remove()})}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_backupextradbs .updraft_backupextradbs_row_testconnection",function(){var r=w(this).closest(".updraft_backupextradbs_row"),t=(r.find(".updraft_backupextradbs_testresultarea").html("<p><em>"+udclion.updraftplus.testing+"</em></p>"),{row:r.attr("id"),host:r.find(".extradb_host").val(),user:r.find(".extradb_user").val(),pass:r.find(".extradb_pass").val(),name:r.find(".extradb_name").val(),prefix:r.find(".extradb_prefix").val()});UpdraftCentral.send_site_rpc("updraftplus.extradb_testconnection",t,UpdraftCentral.$site_row,function(t,e,a){"ok"==e&&t&&r.find(".updraft_backupextradbs_testresultarea").html(UpdraftCentral_Library.sanitize_html(t.data.m))},r)}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod button.updraft-test-button",function(){var t,e=w(this),n=jQuery(this).data("instance_id"),s=e.data("method"),r=e,d=function(t,e,a,r){return"sftp"==s&&(void 0!==r&&r.hasOwnProperty("scp")&&r.scp?UpdraftCentral_Library.dialog.alert("<h2>"+sprintf(udclion.updraftplus.settings_test_result,"SCP")+"</h2> "+t.data.output):UpdraftCentral_Library.dialog.alert("<h2>"+sprintf(udclion.updraftplus.settings_test_result,"SFTP")+"</h2> "+t.data.output),t.hasOwnProperty("data")&&t.data&&t.data.hasOwnProperty("data")&&t.data.data&&void 0!==t.data.data.valid_md5_fingerprint&&w("#updraft_sftp_fingerprint_"+n).val(t.data.data.valid_md5_fingerprint),!0)},e=r.closest(".updraftcentral_site_row"),a=r.data("method"),i=r.data("method_label"),o=r.data("instance_id"),u=(t=o?".updraftplusmethod."+a+"-"+o:".updraftplusmethod."+a,r.html(sprintf(udclion.updraftplus.testing_settings,i)),{method:a});w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output "+t+" input[data-updraft_settings_test], #updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .expertmode input[data-updraft_settings_test]").each(function(t,e){var a,r=w(e).data("updraft_settings_test"),n=w(e).attr("type");r&&(n||(console.log("UpdraftCentral: UpdraftPlus: settings test input item with no type found"),console.log(e),n="text"),a=null,"checkbox"==n?a=w(e).is(":checked")?1:0:"text"==n||"password"==n?a=w(e).val():(console.log("UpdraftCentral: UpdraftPlus: settings test input item with unrecognised type ("+n+") found"),console.log(e)),u[r]=a)}),w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output "+t+" textarea[data-updraft_settings_test], #updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output "+t+" select[data-updraft_settings_test]").each(function(t,e){var a=w(e).data("updraft_settings_test");u[a]=w(e).val()}),"webdav"!==a||u.hasOwnProperty("url")&&null!==u.url||void 0!==(t=w('.updraftplusmethod.webdav input[name="updraft_webdav[settings]['+o+'][url]"]').val())&&t.length&&(u.url=t),UpdraftCentral.send_site_rpc("updraftplus.test_storage_settings",u,e,function(t,e,a){"ok"==e&&t&&(r.html(sprintf(udclion.updraftplus.test_settings,i)),void 0!==(d=void 0!==d&&0!=d?d.call(this,t,e,a,u):d))&&!1===d&&UpdraftCentral_Library.dialog.alert("<h2>"+sprintf(udclion.updraftplus.settings_test_result,i)+"</h2> "+t.data.output)},r.closest("td"))}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraftplus-settings-save",function(n,s){var a=w(d+" input, "+d+" textarea, "+d+" select").serialize();w.each(w(d+" input[type=checkbox]").filter(function(t){return 0==w(this).prop("checked")}),function(t,e){a+="&"+w(e).attr("name")+"=0"}),spin_this=w(this).closest("td"),a+="&updraftplus_version="+v,UpdraftCentral.send_site_rpc("updraftplus.save_settings",a,n,function(t,e,a){var r;"ok"===e&&(e=t.data.backup_dir.writable,r=t.data.backup_dir.message,t.data.backup_dir.button_title,0==e?(w(d+"#updraft_writable_mess").html(r),w(d+".backupdirrow").show()):w(d+".backupdirrow").hide(),e=n.data("site_url"),w("#updraftcentral_notice_container .updraftplus_saved_settings").closest(".updraftcentral_notice").remove(),r=add_dashboard_notice("<h2>"+udclion.updraftplus.settings_saved+" - "+e+'</h2><div class="updraftplus_saved_settings" data-site_id="'+s+'">'+t.data.messages+"</div>","notice",!1),w("#updraft-central-content").animate({scrollTop:r.offset().top},1e3))},spin_this)}),UpdraftCentral.register_row_clicker(t+".backupdirrow a.updraft_backup_dir_reset",function(){w(d+"#updraft_dir").val("updraft")}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .enableexpertmode",function(){w(".updraftcentral_row_extracontents .updraft_site_settings_output .expertmode").fadeIn(),w(".updraftcentral_row_extracontents .updraft_site_settings_output .enableexpertmode").off("click")}),UpdraftCentral.register_row_clicker(t+" a.updraft_authlink",function(t){var e,a=w(this).attr("href");void 0!==a&&(e=w(this).closest("td"),UpdraftCentral_Library.open_browser_at(t,{module:"direct_url",url:a},e))}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .updraft_include_entity",function(){var t=w(this).data("toggle_exclude_field");t&&P(t,!1)},!1,"change"),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output .updraft_existingbackup_date",function(t){var e=w(this).data("nonce"),a=w(this).data("timestamp");UpdraftCentral.send_site_rpc("updraftplus.rawbackup_history",{nonce:e,timestamp:a},UpdraftCentral.$site_row,function(t,e,a){"ok"==e&&!1!==t&&t.hasOwnProperty("data")&&t.data.hasOwnProperty("rawbackup")&&(UpdraftCentral.close_modal(),UpdraftCentral.open_modal(udclion.updraftplus.raw,t.data.rawbackup,!0,!1,null,!1,"modal-lg"))})},!1,"dblclick"),register_modal_listener("#always_keep_this_backup",function(t){var e=w(this).data("backup_key");UpdraftCentral.send_site_rpc("updraftplus.always_keep_this_backup",{backup_key:e,always_keep:w(this).is(":checked")?1:0},UpdraftCentral.$site_row,function(t,e,a){"ok"==e&&!1!==t&&t.hasOwnProperty("data")&&t.data.hasOwnProperty("rawbackup")&&(UpdraftCentral.close_modal(),UpdraftCentral.open_modal(udclion.updraftplus.raw,t.data.rawbackup,!0,!1))})},"change"),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output .choose-components-button",function(e){var a=this,r=w(a).data("entities"),n=w(a).closest("td");r&&UpdraftCentral_Library.dialog.confirm("<h2>"+udclion.updraftplus.restore_backup+"</h2>"+udclion.updraftplus.pre_restore_message,function(t){t&&(UpdraftCentral_Library.open_browser_at(e,{module:"updraftplus",action:"initiate_restore",data:{entities:r,backup_timestamp:w(a).data("backup_timestamp"),showdata:w(a).data("showdata")}},n),o.add(w(a).data("backup_timestamp"),w(a).closest("tr.updraft_existing_backups_row").data("nonce")))})}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output .updraft_download_button",function(t){var t=t.data("site_id"),e=w(this).data("backup_timestamp"),a=w(this).data("what"),r=w(this).data("set_contents"),n=w(this).data("prettydate"),u=(w(this).closest("td"),t),s=e,d=a,i=r,l=n,p=(i=(i="string"!=typeof i?i.toString():i).split(","),w('#updraftcentral_notice_container .updraftcentral_listener_updraftplus_download[data-site_id="'+u+'"'));0==p.length&&(p=!1);for(var o=0;o<i.length;o++){var _=i[o],c=u+"_"+s+"_"+d+"_"+_;if(w("."+c).length)return void console.log("UDCentral: There already appears to be an active downloader for this entity (stid: "+c+")");UpdraftCentral.send_site_rpc("updraftplus.downloader",{type:d,timestamp:s,findex:_},UpdraftCentral.$site_row,function(t,e,a){var r,n,s,d,i,o;"ok"==e&&!1!==t&&t.hasOwnProperty("data")&&t.data.hasOwnProperty("result")?(e=t.data.result,r=(t=t.data.request).timestamp,n=t.type,t=parseInt(t.findex),d="."+(s=u+"_"+r+"_"+n+"_"+t),i="??",o=(new Date).getTime(),widgets_html=template_replace("updraftplus-downloader",{stid:s,download_verb:udclion.updraftplus.download_verb,what:n,itext:0==t?"":" ("+(t+1)+")",pretty_date:l||r,begun_looking:udclion.updraftplus.begun_looking,site_id:u,backup_timestamp:r,findex:t}),"downloaded"==e?i=template_replace("updraftplus-downloaded",{file_ready:udclion.updraftplus.file_ready,download_to_computer:udclion.updraftplus.download_to_computer,and_then:udclion.updraftplus.and_then,you_should:udclion.updraftplus.you_should,backup_timestamp:r,site_id:u,what:n,findex:t,delete_from_server:udclion.updraftplus.delete_from_server}):"needs_download"==e?i=udclion.updraftplus.needs_download:"download_failed"==e&&(i=udclion.updraftplus.download_failed),!1===p?p=UpdraftCentral.create_dashboard_listener("updraftplus_download",UpdraftCentral.$site_row,widgets_html):p.append(widgets_html),p.data("finished",!1),p.find(d).data("last_time_began",o),p.find(d+" .raw").html(i)):UpdraftCentral.add_dashboard_notice("<h2>"+UpdraftCentral.$site_row.data("site_description")+"</h2>"+udclion.updraftplus.download_start_failed,"error")})}}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output button.updraft-upload-link",function(t){w(this).hide();var e=w(this).data("nonce").toString(),a=w(this).data("key").toString();e?UpdraftCentral.send_site_rpc("updraftplus.upload_local_backup",{use_nonce:e,use_timestamp:a},UpdraftCentral.$site_row,function(t,e,a){"ok"==e&&!1!==t&&t.hasOwnProperty("data")&&(t.data.hasOwnProperty("nonce")?(e='<div class="backup_state">'+udclion.updraftplus.backupstarted+"</div>",UpdraftCentral.create_dashboard_listener("updraftplus_backup",UpdraftCentral.$site_row,e,{job_id:t.data.nonce},udclion.updraftplus.upload_backup)):UpdraftCentral.add_dashboard_notice("<h2>"+UpdraftCentral.$site_row.data("site_description")+"</h2>"+udclion.updraftplus.backup_start_failed,"error"))}):console.log("UDCentral: UpdraftPlus: A upload link was clicked, but the backup ID could not be found")}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output .updraft-delete-link",function(t){var e="0"!==w(this).data("hasremote").toString(),a=w(this).data("nonce").toString(),r=w(this).data("key").toString();p="single",a?o.exists(r)?_(t):f(r,a,e):console.log("UDCentral: UpdraftPlus: A delete link was clicked, but the backup ID could not be found")}),UpdraftCentral.register_event_handler("click",".delete-backup-container input.delete_backup_item",function(t){0<w(".delete-backup-container input.delete_backup_item:checked").length?w("button#btn-backup-bulk-delete").removeClass("btn-secondary").addClass("btn-primary"):w("button#btn-backup-bulk-delete").removeClass("btn-primary").addClass("btn-secondary")}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output button#btn-backup-bulk-delete",function(t){var a,r=[],n=!1,s=!1;l.clear(),w(".delete-backup-container input.delete_backup_item:checked").each(function(){var t=w(this).closest("tr.updraft_existing_backups_row").find("a.updraft-delete-link"),e=t.data("key");void 0!==e&&e&&(r.push(e.toString()),a=t.data("nonce"),n=n||void 0!==t.data("hasremote")&&"0"!=t.data("hasremote"),o.exists(e)&&(s=!0),l.add(e,w(this).closest("tr.updraft_existing_backups_row").data("nonce")))}),p="multiple",r.length?s?_(t):f(r.join(),a,n):console.log("UDCentral: UpdraftPlus: The bulk delete button was clicked, but none of the backup IDs could be found")}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output a.updraft_diskspaceused_update",function(r){var t=this.closest("ul");UpdraftCentral.send_site_rpc("updraftplus.get_fragment",{fragment:"disk_usage",data:"updraft"},r,function(t,e,a){"ok"==e&&t&&r.find(".updraft_diskspaceused").html(UpdraftCentral_Library.sanitize_html(t.data.output))},t)}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output a.updraft_rescan_local",function(r){var t=this.closest("ul");r.find(".updraft_existing_backups").html('<div class="rescanning">'+udclion.updraftplus.rescanning+"</div>"),UpdraftCentral.send_site_rpc("updraftplus.rescan","rescan",r,function(t,e,a){"ok"==e&&t&&(r.find(".updraft_existing_backups").html(t.data.t),r.find(".updraft_existing_backups_output h2").html(t.data.n),s(r))},t)}),UpdraftCentral.register_row_clicker(".updraft_existing_backups_output a.updraft_rescan_remote",function(r){var t=this.closest("ul");r.find(".updraft_existing_backups").html('<div class="rescanning">'+udclion.updraftplus.rescanningremote+"</div>"),UpdraftCentral.send_site_rpc("updraftplus.rescan","remotescan",r,function(t,e,a){"ok"==e&&t&&(r.find(".updraft_existing_backups").html(t.data.t),r.find(".updraft_existing_backups_output h2").html(t.data.n),s(r))},t,90)}),UpdraftCentral.register_row_clicker(".updraftcentral_site_backups_manage",function(t){_(t)},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_backup_settings",function(t){n(t)},!0),UpdraftCentral.register_row_clicker(".updraft_site_settings_output select.updraft_interval, .updraft_site_settings_output select.updraft_interval_database",function(){U()},!1,"change"),UpdraftCentral.register_row_clicker(".updraft_authlink",function(r){var t=this.closest("ul"),e={remote_method:w(this).data("remote_method"),instance_id:w(this).data("instance_id")};UpdraftCentral.send_site_rpc("updraftplus.auth_remote_method",e,r,function(t,e,a){"ok"==e&&!1!==t&&("error"==(e=t.data).result?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2>"+e.message):"success"==e.result&&n(r))},t)},!0),UpdraftCentral.register_row_clicker(".updraft_deauthlink",function(r){var t=this.closest("ul"),e={remote_method:w(this).data("remote_method"),instance_id:w(this).data("instance_id")};UpdraftCentral.send_site_rpc("updraftplus.deauth_remote_method",e,r,function(t,e,a){"ok"==e&&!1!==t&&("error"==(e=t.data).result?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2>"+e.message):"success"==e.result&&n(r))},t)},!0),UpdraftCentral.register_row_clicker(".updraft_site_settings_output #updraft_retain_db_addnew",function(){Q("db",12,604800,1,604800)}),UpdraftCentral.register_row_clicker(".updraft_site_settings_output #updraft_retain_files_addnew",function(){Q("files",12,604800,1,604800)}),UpdraftCentral.register_row_clicker(".updraft_site_settings_output .updraft_retain_rules_delete, .updraft_site_settings_output .updraft_retain_rules_delete",function(){w(this).parent(".updraft_retain_rules").slideUp(function(){w(this).remove()})}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_report_cell .updraft_reportbox .updraft_reportbox_delete",function(){w(this).closest(".updraft_reportbox").fadeOut("medium",function(){w(this).remove()})}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_report_cell .updraft_report_another",function(){w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_report_cell .updraft_report_another_p").before(template_replace("updraftplus-settings-report-email",{index:O,send_only_on_warnings:udclion.updraftplus.send_only_on_warnings,whole_backup:udclion.updraftplus.whole_backup,email_size_limits:udclion.updraftplus.email_size_limits,db_backup:udclion.updraftplus.db_backup})),w("#updraft_reportbox_"+O).fadeIn(),O++}),UpdraftCentral.register_event_handler("change",".updraft_report_wholebackup .updraft_report_checkbox",function(){var t=w(this).closest(".updraft_reportbox").find(".updraft_report_dbbackup");w(this).is(":checked")?t.removeClass("updraft_report_disabled").find(".updraft_report_checkbox").prop("disabled",!1):(t.find(".updraft_report_checkbox").prop("checked",!1),t.addClass("updraft_report_disabled").find(".updraft_report_checkbox").prop("disabled",!0))}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more",function(){w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more").is(":checked")?w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_options").slideDown():w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_options").slideUp()},!1,"change"),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_paths_another",function(){k++,w(template_replace("updraftplus-settings-more-paths",{index:k,enter_the_directory:udclion.updraftplus.enter_the_directory,remove:udclion.updraftplus.remove})).appendTo(w(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_paths")).slideDown()}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_more_options .updraftplus-morefiles-row-delete",function(){var t=w(this).closest(".updraftplus-morefiles-row");w(t).slideUp("medium",function(){w(this).remove()})}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .updraft_servicecheckbox",function(){var t=w(this).attr("id");"updraft_servicecheckbox_"==t.substring(0,24)&&null!=(t=t.substring(24))&&""!=t&&(w(this).is(":checked")?(H++,w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab-"+t).fadeIn(),L(t)):(H--,w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab-"+t).hide(),1==w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab-"+t).data("active")&&L(w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab:visible").last().attr("name")))),H<=0?w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod.none").fadeIn():w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod.none").hide()},!1,"change"),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .remote-tab",function(){L(w(this).attr("name"))}),UpdraftCentral.register_row_clicker(".updraftcentral_row_extracontents .updraft_site_settings_output .updraft_servicecheckbox:not(.multi)",function(){var t=w(this).attr("value");w(this).is(":not(:checked)")?(w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod."+t).hide(),w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod.none").fadeIn()):w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraft_servicecheckbox").not(this).prop("checked",!1)},!1,"change"),UpdraftCentral.register_row_clicker(t+"#updraftvault_settings_cell .updraftvault_backtostart",function(){w(d+"#updraftvault_settings_showoptions").slideUp(),w(d+"#updraftvault_settings_connect").slideUp(),w(d+"#updraftvault_settings_connected").slideUp(),w(d+"#updraftvault_settings_default").slideDown()}),UpdraftCentral.register_row_clicker(t+"#updraftvault_settings_connect input",function(t,e,a){13==a.which&&(w(d+"#updraftvault_connect_go").trigger("click"),a.preventDefault())},!1,"keypress"),UpdraftCentral.register_row_clicker(t+"#updraftvault_settings_cell #updraftvault_recountquota",function(){w(d+"#updraftvault_recountquota").html(udclion.updraftplus.counting),UpdraftCentral.send_site_rpc("updraftplus.vault_recountquota",{instance_id:w("#updraftvault_settings_connect").data("instance_id")},UpdraftCentral.$site_row,function(t,e,a){w(d+"#updraftvault_recountquota").html(udclion.updraftplus.update_quota_count),"ok"==e&&t&&t.hasOwnProperty("data")&&t.data.hasOwnProperty("html")&&(w(d+"#updraftvault_settings_connected").html(t.data.html),t.data.hasOwnProperty("connected"))&&(t.data.connected?(w(d+"#updraftvault_settings_default").hide(),w(d+"#updraftvault_settings_connected")):(w(d+"#updraftvault_settings_connected").hide(),w(d+"#updraftvault_settings_default"))).show()})}),UpdraftCentral.register_row_clicker(t+"#updraftvault_settings_cell #updraftvault_disconnect",function(){w(d+"#updraftvault_disconnect").html(udclion.updraftplus.disconnecting),UpdraftCentral.send_site_rpc("updraftplus.vault_disconnect",{instance_id:w("#updraftvault_settings_connect").data("instance_id")},UpdraftCentral.$site_row,function(t,e,a){w(d+"#updraftvault_disconnect").html(udclion.updraftplus.disconnect),"ok"==e&&t.hasOwnProperty("data")&&(w(d+"#updraftvault_disconnect").html(udclion.updraftplus.disconnect),t.data.hasOwnProperty("html"))&&(w(d+"#updraftvault_settings_connected").html(t.data.html).slideUp(),w(d+"#updraftvault_settings_default").slideDown())})}),UpdraftCentral.register_row_clicker(t+"#updraftvault_connect",function(){w(d+"#updraftvault_settings_default").slideUp(),w(d+"#updraftvault_settings_connect").slideDown()}),UpdraftCentral.register_row_clicker(t+"#updraftvault_showoptions",function(){w(d+"#updraftvault_settings_default").slideUp(),w(d+"#updraftvault_settings_showoptions").slideDown()}),UpdraftCentral.register_row_clicker(t+"#updraft_s3_newapiuser",function(r){var t=this.closest("td");UpdraftCentral.send_site_rpc("updraftplus.get_fragment",{fragment:"s3_new_api_user_form",data:null},r,function(t,e,a){"ok"==e&&t&&UpdraftCentral.open_modal(udclion.updraftplus.create_new_iam_user_and_bucket,t.data.output,function(){w("#updraftcentral_modal #updraft-s3newapiuser-results").empty();var t={adminaccesskey:w("#updraftcentral_modal #updraft_s3newapiuser_adminaccesskey").val(),adminsecret:w("#updraftcentral_modal #updraft_s3newapiuser_adminsecret").val(),newuser:w("#updraftcentral_modal #updraft_s3newapiuser_newuser").val(),bucket:w("#updraftcentral_modal #updraft_s3newapiuser_bucket").val(),region:w("#updraftcentral_modal #updraft_s3newapiuser_region").val(),useservercerts:w("#updraftcentral_modal #updraft_ssl_useservercerts").val(),disableverify:w("#updraftcentral_modal #updraft_ssl_disableverify").val(),nossl:w("#updraftcentral_modal #updraft_ssl_nossl").val(),allowdelete:w("#updraftcentral_modal #updraft_s3newapiuser_allowdelete").is(":checked")?1:0,allowdownload:w("#updraftcentral_modal #updraft_s3newapiuser_allowdownload").is(":checked")?1:0},e=w("#updraftcentral_modal");UpdraftCentral.send_site_rpc("updraftplus.s3_newuser",t,r,function(t,e,a){"ok"==e&&t&&(1==t.data.e?w("#updraftcentral_modal #updraft-s3newapiuser-results").html('<p style="color:red;">'+UpdraftCentral_Library.sanitize_html(t.data.m)+"</p>"):0==t.data.e&&(w("#updraftcentral_modal #updraft-s3newapiuser-results").html('<p style="color:green;">'+UpdraftCentral_Library.sanitize_html(t.data.m)+"</p>"),w(d+"#updraft_s3_apikey").val(t.data.k),w(d+"#updraft_s3_apisecret").val(t.data.s),w(d+"#updraft_s3_rrs").prop(":checked",t.data.r),w(d+"#updraft_s3_path").val(t.data.c),w(d+"#updraft_s3_newapiuser").html(udclion.updraftplus.now_using_iam),UpdraftCentral.close_modal()))},e)},udclion.updraftplus.create)},t)}),UpdraftCentral.register_row_clicker(t+"#updraft_cloudfiles_newapiuser",function(s){var t=this.closest("td");UpdraftCentral.send_site_rpc("updraftplus.get_fragment",{fragment:"cloudfiles_new_api_user_form",data:null},s,function(t,e,a){"ok"==e&&(e=UpdraftCentral.template_replace("updraftplus-cloudfiles_new_api_user",t.data.output),UpdraftCentral.open_modal(udclion.updraftplus.new_api_user,UpdraftCentral_Library.sanitize_html(e),function(){var t=w(this).closest(".modal-dialog").find(".form-table"),t={adminuser:t.find(".adminuser").val(),adminapikey:t.find(".adminapikey").val(),newuser:t.find(".newuser").val(),container:t.find(".container").val(),newemail:t.find(".newemail").val(),location:t.find(".location").val(),region:t.find(".region").val()},e=w(".modal-dialog");UpdraftCentral.send_site_rpc("updraftplus.cloudfiles_newuser",t,s,function(t,e,a){if("ok"==e){UpdraftCentral.close_modal();var e=t.data.u,r=t.data.k,n=t.data.c;s.find("#updraft_cloudfiles_user").val(e),s.find("#updraft_cloudfiles_apikey").val(r),s.find("#updraft_cloudfiles_path").val(n)}else if("error"===a)return UpdraftCentral_Library.dialog.alert("<h3>"+udclion.error+"</h3>"+t.m),!0},e)},udclion.updraftplus.create))},t)}),UpdraftCentral.register_row_clicker(t+"#updraftvault_connect_go",function(){w(d+"#updraftvault_connect_go").html(udclion.updraftplus.connecting);var t={email:w(d+"#updraftvault_email").val(),pass:w(d+"#updraftvault_pass").val(),instance_id:w(d+"#updraftvault_settings_connect").data("instance_id")};UpdraftCentral.send_site_rpc("updraftplus.vault_connect",t,UpdraftCentral.$site_row,function(t,e,a){w(d+"#updraftvault_connect_go").html(udclion.updraftplus.connect),"ok"==e&&t.hasOwnProperty("data")&&(t.data.hasOwnProperty("e")?(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+t.data.e+"</p>"),t.data.hasOwnProperty("code")&&"no_quota"==t.data.code&&(w(d+"#updraftvault_settings_connect").slideUp(),w(d+"#updraftvault_settings_default").slideDown())):t.data.hasOwnProperty("connected")&&t.data.connected&&t.data.hasOwnProperty("html")?(w(d+"#updraftvault_settings_connect").slideUp(),w(d+"#updraftvault_settings_connected").html(t.data.html).slideDown()):(console.log(t),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion.js_exception_occurred+"</p>")))})})}),w("#updraftcentral_notice_container").on("click",".updraftplus_saved_settings a.updraft_authlink",function(t){var e,a,r=w(this).attr("href");void 0!==r&&(a=w(this).closest(".updraftplus_saved_settings").data("site_id"),(e=w('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+a+'"')).length<1?console.log("UpdraftCentral: UpdraftPlus: site row not found for the link clicked (site_id="+a+")"):(t.preventDefault(),a=w(this).closest(".updraftplus_saved_settings"),UpdraftCentral_Library.open_browser_at(e,{module:"direct_url",url:r},a)))}),w("#updraftcentral_notice_container").on("click",".updraftcentral_listener .updraftplus_downloader_closebutton",function(t){t.preventDefault();t=w(this).closest(".updraftcentral_listener");w(this).closest(".updraftplus_downloader").fadeOut().remove(),t.find(".updraftplus_downloader").length<1&&(console.log(t),t.clearQueue().slideUp("slow",function(){w(this).remove()}))}),w("#updraftcentral_notice_container").on("click",".updraftcentral_listener .updraft_downloaded",function(t){var e,a,r,n=w(this).data("site_id"),n=w('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+n+'"');n.length<1||(e=w(this).data("backup_timestamp"),a=w(this).data("what"),r=w(this).data("findex"),UpdraftCentral_Library.open_browser_at(n,{module:"updraftplus",action:"download_file",data:{backup_timestamp:e,what:a,findex:r}},null))}),w("#updraftcentral_notice_container").on("click",".updraftcentral_listener .updraft_delete_downloaded_backup",function(t){t.preventDefault();var r=this,t=w(this).data("site_id"),e=w('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+t+'"'),a=w(this).data("findex"),n=w(this).data("what"),s=w(this).data("backup_timestamp");UpdraftCentral.send_site_rpc("updraftplus.delete_downloaded",{timestamp:s,site_id:t,type:n,findex:a},e,function(t,e,a){"ok"==e&&!1!==t&&t.hasOwnProperty("data")&&w(r).closest(".raw").html(udclion.updraftplus.entity_deleted)})}),w("#updraftcentral_notice_container, #updraftcentral_dashboard_existingsites").on("click",".updraftcentral_listener .updraft-log-link, .updraft_existing_backups_output .updraft-log-link",function(t){t.preventDefault();var e,r,t=w(this).data("jobid");t?(e=w(this).closest(".updraftcentral_listener, .updraftcentral_site_row").data("site_id"),e=w('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+e+'"'),r=t,UpdraftCentral.send_site_rpc("updraftplus.get_log",r,e,function(t,e,a){"ok"==e&&t&&UpdraftCentral.open_modal(udclion.updraftplus.logfile,'<pre id="updraft_poppedlog">'+UpdraftCentral_Library.sanitize_html(t.data.log)+"</pre>",function(){UpdraftCentral_Library.download_inner_html("log."+r+".txt","updraft_poppedlog")},udclion.updraftplus.downloadlog,function(){},null,!0,"modal-lg")})):(console.log(this),console.log("UpdraftPlus: A log link was clicked, but the Job ID could not be found"))}),w("#updraftcentral_notice_container").on("click",".updraftcentral_listener .updraft_jobinfo_delete",function(t){t.preventDefault();var e,a,r,t=w(this).data("jobid");t?(a=(e=w(this).closest(".updraftcentral_listener")).data("site_id"),a=w('#updraftcentral_dashboard_existingsites .updraftcentral_site_row[data-site_id="'+a+'"'),r=e,UpdraftCentral.send_site_rpc("updraftplus.activejobs_delete",t,a,function(t,e,a){"ok"==e&&t&&(e="",e=t.hasOwnProperty("data")&&t.data.hasOwnProperty("c")?"deleted"==t.data.c?udclion.updraftplus.delete_deleted:"not_found"==t.data.c?udclion.updraftplus.delete_not_found:(console.log("UDCentral: UpdraftPlus: abort job: unknown response"),console.log(t.data),UpdraftCentral_Library.sanitize_html(t.data.m)):(console.log("UDCentral: UpdraftPlus: abort job: unknown response"),console.log(t.data),udclion.js_exception_occurred),w(r).find(".backup_state:first").html(e))})):(console.log("UpdraftPlus: A stop job link was clicked, but the Job ID could not be found"),console.log(this))});var C,j,h=!1,g=!1;function r(t,e){var a="#updraftcentral_dashboard_existingsites .updraft_site_settings_output #"+t,r="monthly"==e,n=!1;10<w(a+" option").length&&(n=!0),(r||n)&&(r&&n?"monthly"==e&&(w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_monthly_extra_words_"+t).remove(),w(a).before('<span class="updraft_monthly_extra_words_'+t+'">'+udclion.updraftplus.day+" </span>").after('<span class="updraft_monthly_extra_words_'+t+'"> '+udclion.updraftplus.in_the_month+" </span>")):(w("#updraftcentral_dashboard_existingsites .updraft_site_settings_output .updraft_monthly_extra_words_"+t).remove(),(r?(h=w(a+" option:selected").val(),w(a).html(udclion.updraftplus.mday_selector).before('<span class="updraft_monthly_extra_words_'+t+'">'+udclion.updraftplus.day+" </span>").after('<span class="updraft_monthly_extra_words_'+t+'"> '+udclion.updraftplus.in_the_month+" </span>"),n=!1===g?1:g,w(a+" option:eq("+(n-=1)+")")):(g=w(a+" option:selected").val(),w(a).html(udclion.updraftplus.day_selector),w(a+" option:eq("+(!1===h?1:h)+")"))).prop("selected",!0)))}function Q(t,e,a,r,n){var s="updraft_retain_"+t+"_rules",d="db"==t?++C:++j;w("#"+s).append('<div style="float:left; clear:left;" class="updraft_retain_rules '+s+'_entry">'+udclion.updraftplus.for_backups_older_than+" "+b(t,d,"after",e,a)+" keep no more than 1 backup every "+b(t,d,"every",r,n)+' <span title="'+udclion.updraftplus.delete+'" class="updraft_retain_rules_delete"><span class="dashicons dashicons-no"></span></span></div>')}function b(t,e,a,r,n){t="updraft_retain_extrarules["+t+"]["+e+"]["+a+"-",e='<input type="number" min="1" step="1" class="additional-rule-width" name="'+t+'howmany]" value="'+r+'"> \t\t<select name="'+t+'period]">\t\t<option value="3600"';return 3600==n&&(e+=' selected="selected"'),e+=">"+udclion.updraftplus.hours+'</option>\t\t<option value="86400"',86400==n&&(e+=' selected="selected"'),e+=">"+udclion.updraftplus.days+'</option>\t\t<option value="604800"',604800==n&&(e+=' selected="selected"'),e+=">"+udclion.updraftplus.weeks+"</option>\t\t</select>"}function P(t,e){w(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_"+t).is(":checked")?e?w(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_"+t+"_exclude").show():w(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_"+t+"_exclude").slideDown():e?w(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_"+t+"_exclude").hide():w(".updraftcentral_row_extracontents .updraft_site_settings_output #updraft_include_"+t+"_exclude").slideUp()}var O=1;function D(t,e){var a=w('#remote-storage-container label[for="updraft_servicecheckbox_'+t+'"] > .labelauty-checked').text(),e=void 0!==e?'[data-instance_id="'+e+'"]':"",t=w("#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output .updraftplusmethod."+t).find("h3.updraft_edit_label_instance"+e);void 0===t||!t||"("!=(e=t.text().trim()).charAt(0)&&0!=e.length||t.prepend(a+" ")}function L(t){var e="#updraftcentral_dashboard_existingsites .updraftcentral_row_extracontents .updraft_site_settings_output";w(e+" .updraftplusmethod").hide(),w(e+" .remote-tab").data("active",!1),w(e+" .remote-tab").removeClass("nav-tab-active"),w(e+" .updraftplusmethod."+t).show(),w(e+" .remote-tab-"+t).data("active",!0),w(e+" .remote-tab-"+t).addClass("nav-tab-active"),D(t)}var H=0}jQuery(function(t){UpdraftCentral_Module_UpdraftPlus=new UpdraftCentral_UpdraftPlus_Module,jQuery(document).on("keyup",function(t){32!==t.keyCode&&13!==t.keyCode||jQuery(document.activeElement).is("input.labelauty + label")&&(t=jQuery(document.activeElement).attr("for"))&&jQuery("#"+t).trigger("change")}),Handlebars.registerHelper("maskPassword",function(t){return t.replace(/./gi,"*")}),Handlebars.registerHelper("encodeURIComponent",function(t){return encodeURIComponent(t)}),Handlebars.registerHelper("ifCond",function(t,e,a,r){switch(e){case"==":return t==a?r.fn(this):r.inverse(this);case"===":return t===a?r.fn(this):r.inverse(this);case"!=":return t!=a?r.fn(this):r.inverse(this);case"!==":return t!==a?r.fn(this):r.inverse(this);case"<":return t<a?r.fn(this):r.inverse(this);case"<=":return t<=a?r.fn(this):r.inverse(this);case">":return a<t?r.fn(this):r.inverse(this);case">=":return a<=t?r.fn(this):r.inverse(this);case"&&":return t&&a?r.fn(this):r.inverse(this);case"||":return t||a?r.fn(this):r.inverse(this);case"typeof":return t===typeof a?r.fn(this):r.inverse(this);case"not_typeof":return t!==typeof a?r.fn(this):r.inverse(this);default:return r.inverse(this)}}),Handlebars.registerHelper("for",function(t,e,a,r){for(var n="",s=t;s<e;s+=a)n+=r.fn(s);return n}),Handlebars.registerHelper("set_var",function(t,e,a){a.data.root||(a.data.root={}),a.data.root[t]=e}),Handlebars.registerHelper("get_length",function(t){return void 0!==t&&!1==t instanceof Array?Object.keys(t).length:!0==t instanceof Array?t.length:0}),Handlebars.registerHelper("get_template_css_classes",function(t,e){var a=e.data.root.css_class+" "+e.data.root.method_id;return t&&e.data.root.is_multi_options_feature_supported&&(e.data.root.is_config_templates_feature_supported?a+=" "+e.data.root.method_id+"-"+e.data.root.instance_id:a+=" "+e.data.root.method_id+"-"+e.data.root._instance_id),a}),Handlebars.registerHelper("get_template_input_attribute_value",function(t,e,a){var r=a.data.root.is_config_templates_feature_supported?a.data.root.instance_id:a.data.root._instance_id,n=ename="",a=a.data.root.method_id;try{e=JSON.parse(e)}catch(t){}if(void 0!==e&&Array===e.constructor)for(var s=0;s<e.length;s++)n+="_"+e[s],ename+="["+e[s]+"]";else n="_"+e,ename="["+e+"]";return"id"===t?"updraft_"+a+n+"_"+r:"name"===t?"updraft_"+a+"[settings]["+r+"]"+ename:""}),Handlebars.registerHelper("get_template_test_button_html",function(t,e){var a=e.data.root.is_config_templates_feature_supported?Handlebars.escapeExpression(e.data.root.instance_id):Handlebars.escapeExpression(e.data.root._instance_id),r=Handlebars.escapeExpression(Handlebars.helpers.get_template_css_classes.apply(this,[!0,e])),n=Handlebars.escapeExpression(e.data.root.input_test_label),e=Handlebars.escapeExpression(e.data.root.method_id);return'\t\t<tr class="'+r+'"> \t\t\t<th></th> \t\t\t<td> \t\t\t\t<p> \t\t\t\t\t<button id="updraft-'+e+"-test-"+a+'" type="button" class="button-primary updraft-test-button updraft-'+e+"-test-"+a+'" data-instance_id="'+a+'" data-method="'+e+'" data-method_label="'+t+'">'+n+"</button> \t\t\t\t</p> \t\t\t</td> \t\t</tr>"})});