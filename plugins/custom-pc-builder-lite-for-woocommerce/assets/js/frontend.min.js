Number.prototype.format=function(e,t){t="\\d(?=(\\d{"+(t||3)+"})+"+(0<e?"\\.":"$")+")";return this.toFixed(Math.max(0,~~e)).replace(new RegExp(t,"g"),"$&,")},PCBulderLite={echoPrice:function(e,t){var u='<span class="woocommerce-Price-currencySymbol">'+jQuery("#currencySymbol").val()+"</span>";switch(jQuery("#currencySymbolPos").val()){case"left":e.html(u+t.format());break;case"right":e.html(t.format()+u);break;case"left_space":e.html(u+" "+t.format());break;case"right_space":e.html(t.format()+" "+u);break;default:e.html(u+t.format())}},updateEstimatedCost:function(e){var u=0;jQuery(".nk_custom_pc_builder_page_body .list-item .item").each(function(){var e=jQuery(this).find(".p-total").data("price"),t=jQuery(this).find('.p-quantity input[type="number"]').val();u+=parseFloat(e||0)*parseFloat(Math.abs(t||0))}),PCBulderLite.echoPrice(jQuery(".estimated-costs .amount"),u)},block:function(){jQuery("#nk_custom_pc_builder_popup").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),jQuery(".nk_custom_pc_builder_page").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){jQuery("#nk_custom_pc_builder_popup").unblock(),jQuery(".nk_custom_pc_builder_page").unblock()},prepareFilter:function(e=""){var t=jQuery('.nk-popup .product-search-form input[name="search"]').val(),u=[];return u.push({name:"keyword",value:t},{name:"sort",value:jQuery(document).find("#sort-select").val()},{name:"page",value:e||1},{name:"form",value:jQuery(document).find(".nk-popup #pageid").val()},{name:"category",value:jQuery(document).find(".nk-popup #catid").val()}),u},processFilter:function(e,t,u){jQuery.ajax({type:"post",dataType:"html",url:e,data:{action:"nkcpcb_filter",data:JSON.stringify(u)},beforeSend:function(){PCBulderLite.block()},success:function(e){t.html(e)},complete:function(e){200==e.status&&PCBulderLite.unblock()}})},onInit:function(r){var a=new MobileDetect(window.navigator.userAgent);jQuery(document).on("click",'.nk_custom_pc_builder_page button[data-toggle="nk-popup"]',function(){jQuery("#nk-popup-body-result").html(""),PCBulderLite.block();var e=jQuery(this).data("id"),t=jQuery(this).data("page");jQuery.ajax({type:"get",dataType:"html",url:r,data:{action:"nkcpcb_get_product_by_cat",catid:e,pageid:t},beforeSend:function(){},success:function(e){jQuery("#nk-popup-body-result").html(e)},complete:function(e){200==e.status&&jQuery("#nk_custom_pc_builder_popup").addClass("show"),PCBulderLite.unblock()}})}),jQuery(document).on("click","#nk-popup-body-result .action button.addToPCBuilder",function(){var e=jQuery(this).data("product_id"),t=jQuery(this).data("cat_id"),u=jQuery(this).data("page");PCBulderLite.block(),jQuery.ajax({type:"post",dataType:"html",url:r,data:{action:"add_pc_builder_list",catid:t,id:e,pageid:u},beforeSend:function(){jQuery("#item-cat-"+t).html("")},success:function(e){jQuery("#item-cat-"+t).html(e),PCBulderLite.updateEstimatedCost(u),PCBulderLite.unblock()},complete:function(e){200==e.status&&jQuery("#nk_custom_pc_builder_popup").removeClass("show")}})}),jQuery(document).on("click",".nk_custom_pc_builder_page_body .action .remove",function(){var t=jQuery(this).data("cat_id"),u=jQuery(this).data("page");PCBulderLite.block(),jQuery.ajax({type:"post",dataType:"html",url:r,data:{action:"remove_pc_builder_list",catid:t,pageid:u},success:function(e){jQuery("#item-cat-"+t).html(e),PCBulderLite.updateEstimatedCost(u),PCBulderLite.unblock()},complete:function(e){200==e.status&&jQuery("#nk_custom_pc_builder_popup").removeClass("show")}})}),jQuery(document).on("change",'.nk_custom_pc_builder_page .p-quantity input[type="number"]',function(e){var t=jQuery(this).parent().prev(".p-price").data("price"),u=jQuery(this).parent().siblings(".p-total").find(".amount"),t=parseFloat(t)*parseFloat(Math.abs(jQuery(this).val()));u.parent().attr("data-total",t),PCBulderLite.echoPrice(u,t),PCBulderLite.updateEstimatedCost(jQuery(this).data("page")),jQuery.ajax({type:"post",dataType:"json",url:r,data:{action:"update_quantity_pc_builder_list",catid:jQuery(this).data("value"),pageid:jQuery(this).data("page"),quantity:jQuery(this).val()},success:function(e){e=JSON.parse(e);0!==e.error&&alert(e.message)}})}),jQuery(document).on("click",'#nk-popup-body-result .filter-list input[type="checkbox"]',function(e){a.mobile()&&jQuery(this).parents(".left-col").slideToggle(400);var t=jQuery("#nk-popup-body-result").find("#right-result"),u=PCBulderLite.prepareFilter();PCBulderLite.processFilter(r,t,u)}),jQuery(document).on("change","#nk-popup-body-result #sort-select",function(e){var t=jQuery("#nk-popup-body-result").find("#right-result"),u=PCBulderLite.prepareFilter();PCBulderLite.processFilter(r,t,u)}),jQuery(document).on("click","#right-result .paginator ul li a",function(e){e.preventDefault();var t=jQuery("#nk-popup-body-result").find("#right-result"),e=PCBulderLite.prepareFilter(jQuery(this).data("page"));PCBulderLite.processFilter(r,t,e)}),jQuery(document).on("change",".nk-popup .nk-popup-header .search-form input",function(e){var t=jQuery("#nk-popup-body-result").find("#right-result"),u=PCBulderLite.prepareFilter();PCBulderLite.processFilter(r,t,u)})},onRefresh:function(e,t){jQuery(document).on("click","#refresh-pc-builder",function(){PCBulderLite.block(),jQuery.ajax({type:"post",dataType:"json",url:e,data:{action:"destroy_pc_builder_list",pageid:jQuery(this).data("page")},success:function(e){},complete:function(e){200==e.status&&(window.location.href=t)}})})},onAddtoCart:function(e,t){jQuery(document).on("click",".nk_custom_pc_builder_page #addToCart",function(){PCBulderLite.block(),jQuery.ajax({type:"post",dataType:"json",url:e,data:{action:"add_to_cart_pc_builder_list",pageid:jQuery(this).data("page")},success:function(e){PCBulderLite.unblock(),0==e.err?window.location.href=t:alert(e.message)},complete:function(e){}})})}},jQuery(document).ready(function(){jQuery('button[data-toggle="nk-popup"]').click(function(){jQuery("#nk_custom_pc_builder_popup").addClass("show")}),jQuery(".nk-popup-header .filter-toggle").click(function(){jQuery("#nk-popup-body-result .left-col").slideToggle(400)}),jQuery("#copy_share_link").click(function(){jQuery("#share_link_input").select(),document.execCommand("copy"),jQuery("#share_link_popup .check-copied").addClass("active")})});