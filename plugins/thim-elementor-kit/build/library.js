(()=>{"use strict";var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var i in a)t.o(a,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.i18n,a=window.wp.apiFetch;var i=t.n(a);document.addEventListener("DOMContentLoaded",(function(){if(elementorCommon){const t=document.querySelector("#tmpl-elementor-add-section");if(t){const e=t.innerHTML;e&&(t.innerHTML=e.replace('<div class="elementor-add-section-drag-title',`<div class="elementor-add-section-area-button thim-ekits-library-btn" style="background: #fff; margin-left: 5px; position: relative; border: 1px solid #93003c;" title="Thim Elementor Kit"><img style="width: 12px" src="${ThimElementorLibrary.logo}" alt=""></div><div class="elementor-add-section-drag-title`))}elementor.on("preview:loaded",(function(){const t=elementor.$previewContents[0].body;t.addEventListener("click",(async function(a){if(t.querySelector(".thim-ekits-library-btn").contains(a.target)){const a=await elementorCommon.dialogsManager.createWidget("lightbox",{className:"thim-library-modal",closeButton:!1,draggable:!1,hide:{onOutsideClick:!1,onEscKeyPress:!1}}),n=a.getElements("widgetContent"),r=`\n\t\t\t\t\t<div class="elementor-templates-modal__header">\n\t\t\t\t\t\t<div class="elementor-templates-modal__header__logo-area">\n\t\t\t\t\t\t\t<div class="elementor-templates-modal__header__logo">\n\t\t\t\t\t\t\t\t<img class="thim-library-modal__header__logo" src="${ThimElementorLibrary.logo}" alt="Thim Library">\n\t\t\t\t\t\t\t\t<span class="elementor-templates-modal__header__logo__title">\n\t\t\t\t\t\t\t\t\tThim Library\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="elementor-templates-modal__header__menu-area">\n\t\t\t\t\t\t\t<div id="elementor-template-library-header-menu">\n\t\t\t\t\t\t\t\t<div class="elementor-component-tab elementor-template-library-menu-item elementor-active" data-tab="pages">Pages</div>\n\t\t\t\t\t\t\t\t<div class="elementor-component-tab elementor-template-library-menu-item" data-tab="blocks">Blocks</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="elementor-templates-modal__header__items-area">\n\t\t\t\t\t\t\t<div class="elementor-templates-modal__header__close elementor-templates-modal__header__close--normal elementor-templates-modal__header__item">\n\t\t\t\t\t\t\t\t<i class="eicon-close" aria-hidden="true" title="Close"></i>\n\t\t\t\t\t\t\t\t<span class="elementor-screen-only">Close</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`;await n.find(".dialog-header").html(r),await n.find(".dialog-message").html('<div class="thim-library-modal__content">\n\t\t\t\t\t\t\t<div class="thim-library-modal__content__templates">\n\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__container"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="dialog-loading dialog-lightbox-loading">\n\t\t\t\t\t\t\t<div id="elementor-template-library-loading">\n\t\t\t\t\t\t\t\t<div class="elementor-loader-wrapper">\n\t\t\t\t\t\t\t\t\t<div class="elementor-loader">\n\t\t\t\t\t\t\t\t\t\t<div class="elementor-loader-boxes">\n\t\t\t\t\t\t\t\t\t\t\t<div class="elementor-loader-box"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="elementor-loader-box"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="elementor-loader-box"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="elementor-loader-box"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="elementor-loading-title">Loading</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>'),await a.show();const l=n.find(".dialog-lightbox-loading"),o=await i()({path:"thim-ekit/get-templates"});await l.hide();const d=()=>{n.find(".elementor-templates-modal__header__close").on("click",(function(){a.hide()}))},m=()=>{n.find(".elementor-template-library-menu-item").on("click",(function(){n.find(".elementor-template-library-menu-item").removeClass("elementor-active"),jQuery(this).addClass("elementor-active"),c(jQuery(this).data("tab"))}))},s=()=>{n.find(".thim-library-modal__content__filter__item").on("click",(function(){const t=jQuery(this).data("tab"),e=jQuery(this).data("filter");n.find(".thim-library-modal__content__filter__item").removeClass("thim-library-modal__content__filter__item--active"),n.find(`.thim-library-modal__content__filter__item[data-tab="${e}"]`).addClass("thim-library-modal__content__filter__item--active"),c(t,e)}))};let _="";const c=function(c){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",p="",b={};n.find(".thim-library-modal__content__header").remove(),n.find(".thim-library-modal__content__templates").prepend('<div class="thim-library-modal__content__header">\n\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__search">\n\t\t\t\t\t\t\t\t\t<input type="text" placeholder="Search">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t'),"pages"===c?(b={free:o?.free?.page,pro:o?.theme?.page},n.find(".thim-library-modal__content__header").prepend(`<div class="thim-library-modal__content__filter">\n\t\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__filter__item ${"all"===h?"thim-library-modal__content__filter__item--active":""}" data-tab="${c}" data-filter="all">ALL</div>\n\t\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__filter__item ${"free"===h?"thim-library-modal__content__filter__item--active":""}" data-tab="${c}" data-filter="free">FREE</div>\n\t\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__filter__item ${"pro"===h?"thim-library-modal__content__filter__item--active":""}" data-tab="${c}" data-filter="pro">PRO</div>\n\t\t\t\t\t\t\t\t</div>`)):"blocks"===c&&(b={free:o?.free?.sections,pro:o?.theme?.sections});let y=[],v=[];b?.free&&(Object.entries(b.free).forEach((t=>{let[e,a]=t;y=[...y,{...a,id:e,src:`https://raw.githubusercontent.com/ThimPressWP/demo-data/master/${ThimElementorLibrary.theme}/thim-kit/${"pages"===c?"page":"templates"}/${e}.jpg`}]})),y.sort((function(t,e){return t.priority-e.priority}))),b?.pro&&(Object.entries(b.pro).forEach((t=>{let[e,a]=t;v=[...v,{...a,id:e,isPro:!0,src:`https://raw.githubusercontent.com/ThimPressWP/demo-data/master/${ThimElementorLibrary.theme}/thim-kit/${"pages"===c?"page":"templates"}/${e}.jpg`}]})),v.sort((function(t,e){return t.priority-e.priority})));let f="";f="pro"===h?v:"free"===h?y:[...y,...v],f.length>0?f.forEach((t=>{p+=`\n\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__item ">\n\t\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__body content-body-${c}">\n\t\t\t\t\t\t\t\t\t\t${t?.isPro?'<div class="thim-library-modal__content__pro">PRO</div>':""}\n\t\t\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__body__bg" style="background-image: url(${t?.src||`https://raw.githubusercontent.com/ThimPressWP/demo-data/master/thim-kit-free/${"pages"===c?"page":"templates"}/${t.id}.jpg`});"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__preview" data-pro="${t?.isPro?1:0}" data-template-type="${c}" data-id="${t.id}" data-url="${t?.url||""}" data-thumbnail="${t?.thumbnail||""}">\n\t\t\t\t\t\t\t\t\t\t\t<i class="eicon-zoom-in-bold" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__footer">\n\t\t\t\t\t\t\t\t\t\t<a class="thim-library-modal__content__insert" data-pro="${t?.isPro?1:0}" data-template-type="${c}" data-id="${t.id}">\n\t\t\t\t\t\t\t\t\t\t\t<i class="eicon-file-download"></i>\n\t\t\t\t\t\t\t\t\t\t\tINSERT\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<div class="thim-library-modal__content__name">${t?.title||""}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`})):p='<div class="thim-library-modal__content__empty">No data available</div>',n.find(".thim-library-modal__content__container").html(p);const g=()=>{n.find(".thim-library-modal__content__insert").on("click",(function(n){n.preventDefault();const r=jQuery(this).data("template-type"),o=jQuery(this).data("id"),d=jQuery(this).data("pro"),m=new Backbone.Model({getTitle:()=>data.title});let s=0;const _=jQuery(t).find(".thim-ekits-library-btn").closest(".elementor-add-section");s=_.hasClass("elementor-add-section-inline")?_.prevAll().length:_.prev().children().length,l.show(),i()({path:"thim-ekit/import",method:"POST",data:{type:r,id:o,postID:parseInt(ThimElementorLibrary?.postID)||0,theme:d?ThimElementorLibrary.theme:""}}).then((function(t){if(t?.success){const i=()=>{elementor.channels.data.trigger("template:before:insert",m),elementor.getPreviewView().addChildModel(t.data,{at:s}||{}),elementor.channels.data.trigger("template:after:insert",{}),null!=$e&&void 0!==$e.internal?$e.internal("document/save/set-is-modified",{status:!0}):elementor.saver.setFlagEditorChange(!0)};"pages"===r?elementorCommon.dialogsManager.createWidget("confirm",{id:"elementor-clear-page-dialog",headerMessage:(0,e.__)("Delete All Content","thim-elementor-kit"),message:(0,e.__)("Attention: We are going to DELETE ALL CONTENT from this page. Are you sure you want to do that?","thim-elementor-kit"),position:{my:"center center",at:"center center"},strings:{confirm:(0,e.__)("Delete","thim-elementor-kit"),cancel:(0,e.__)("Cancel","thim-elementor-kit")},onConfirm:()=>{$e.run("document/elements/empty",{force:!0}),i(),l.hide(),a.hide()},onCancel:()=>{i(),l.hide(),a.hide()}}).show():(i(),l.hide(),a.hide())}else elementorCommon.dialogsManager.createWidget("confirm",{id:"elementor-clear-page-dialog",headerMessage:(0,e.__)("Import Thim Library","thim-elementor-kit"),message:t?.message||(0,e.__)("Something went wrong. Please try again.","thim-elementor-kit"),position:{my:"center center",at:"center center"},strings:{confirm:(0,e.__)("OK","thim-elementor-kit"),cancel:(0,e.__)("Cancel","thim-elementor-kit")},onConfirm:()=>{l.hide()},onCancel:()=>{l.hide()}}).show()}))}))};g();let u="";const $=()=>{n.find(".thim-library-modal__content__search input").on("keyup",(function(){u=jQuery(this).val().toLowerCase(),n.find(".thim-library-modal__content__item").filter((function(){jQuery(this).toggle(jQuery(this).find(".thim-library-modal__content__name").text().toLowerCase().indexOf(u)>-1)}))}))},w=()=>{n.find(".thim-library-modal__back_library").on("click",(function(){n.find(".dialog-header").html(r),n.find(".thim-library-modal__content").html(_),n.find(".dialog-message").removeClass("thim-library-modal__is_iframe"),n.find(".elementor-template-library-menu-item").removeClass("elementor-active"),n.find(`.elementor-template-library-menu-item[data-tab="${c}"]`).addClass("elementor-active"),n.find(".thim-library-modal__content__search input").val(u),g(),d(),m(),k(),s(),$()}))},k=()=>{n.find(".thim-library-modal__content__preview").on("click",(function(){const t=jQuery(this).attr("data-url"),e=jQuery(this).attr("data-thumbnail"),a=jQuery(this).data("template-type"),i=jQuery(this).data("id"),r=jQuery(this).data("pro");_=n.find(".thim-library-modal__content").html(),(t||e)&&(n.find(".dialog-message").addClass("thim-library-modal__is_iframe"),n.find(".elementor-templates-modal__header__logo-area").html('<a class="thim-library-modal__back_library"><i class="eicon-chevron-left"></i>Back to Library</a>'),n.find("#elementor-template-library-header-menu").html(""),n.find(".elementor-templates-modal__header__items-area").append(`<a class="thim-library-modal__content__insert" data-pro="${r?1:0}" data-template-type="${a}" data-id="${i}" style="display: block; margin-right: 10px; font-size: 12px;"><i class="eicon-file-download"></i>INSERT</a>`)),t?n.find(".thim-library-modal__content").html(`<iframe src="${t}"></iframe>`):e&&n.find(".thim-library-modal__content").html(`<img src="${e}">`),g(),w(),d(),m()}))};k(),s(),$()};c("pages"),d(),m(),s()}}))}))}}))})();