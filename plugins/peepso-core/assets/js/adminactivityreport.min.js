var list={_wpnonce:null,init:function(){var n;psmessage.wrap_id="form-reporteditems",this._wpnonce=jQuery("#report-nonce").val();jQuery(".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a").on("click",function(e){e.preventDefault();var s=this.search.substring(1),n={paged:list.__query(s,"paged")||"1",order:list.__query(s,"order")||"asc",orderby:list.__query(s,"orderby")||"rep_id"};list.update(n)}),jQuery("input[name=paged]").on("keyup",function(e){13===e.which&&e.preventDefault();var s={paged:parseInt(jQuery("input[name=paged]").val())||"1",order:jQuery("input[name=order]").val()||"asc",orderby:jQuery("input[name=orderby]").val()||"rep_id"};window.clearTimeout(n),n=window.setTimeout(function(){list.update(s)},500)})},update:function(e){peepso.postJson("adminReport.sort",e,function(e){e.success&&(response=e.data,response.rows.length&&jQuery("#the-list").html(response.rows),response.column_headers.length&&jQuery("thead tr, tfoot tr").html(response.column_headers),response.pagination.bottom.length&&jQuery(".tablenav.top .tablenav-pages").html(jQuery(response.pagination.top).html()),response.pagination.top.length&&jQuery(".tablenav.bottom .tablenav-pages").html(jQuery(response.pagination.bottom).html()),list.init())})},unpublish:function(e){var s={rep_id:e,_wpnonce:this._wpnonce};peepso.postJson("adminReport.unpublish",s,function(e){e.success?(e.notices&&psmessage.show("",e.notices[0]).fade_out(pswindow.fade_time),list.update({})):e.has_errors&&psmessage.show("",e.errors).fade_out(pswindow.fade_time)})},republish:function(e){var s={rep_id:e,_wpnonce:this._wpnonce};peepso.postJson("adminReport.republish",s,function(e){e.success?(e.notices&&psmessage.show("",e.notices[0]).fade_out(pswindow.fade_time),list.update({})):e.has_errors&&psmessage.show("",e.errors).fade_out(pswindow.fade_time)})},dismiss:function(e){var s={rep_id:e,_wpnonce:this._wpnonce};peepso.postJson("adminReport.dismiss",s,function(e){e.success?(e.notices&&psmessage.show("",e.notices[0]).fade_out(pswindow.fade_time),list.update({})):e.has_errors&&psmessage.show("",e.errors).fade_out(pswindow.fade_time)})},ban:function(e){var s={rep_id:e,_wpnonce:this._wpnonce};peepso.postJson("adminReport.ban",s,function(e){e.success?(e.notices&&psmessage.show("",e.notices[0]).fade_out(pswindow.fade_time),list.update({})):e.has_errors&&psmessage.show("",e.errors).fade_out(pswindow.fade_time)})},__query:function(e,s){for(var n=e.split("&"),o=0;o<n.length;o++){var t=n[o].split("=");if(t[0]===s)return t[1]}return!1}};list.init();