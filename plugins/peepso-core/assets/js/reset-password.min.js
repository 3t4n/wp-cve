!function(n){function t(e){var s,r,o,t,a=n(e),e=a.find("input[type=password]");if(e.length)return s=e.eq(0).attr("name")||"",r=peepso.observer.applyFilters("profile_field_save",e.val(),e),"pass1"===s?s="password":"pass2"===s&&(s="password2"),0<=["password","password2"].indexOf(s)&&(o=peepsodata.ajaxurl_legacy+"profilefieldsajax.validate_register",(t={}).name=s,t[s]=r,"password2"===s)&&(e=e.closest("form").find("[name=pass1]"),t.password=e.val()),n.ajax({url:o,type:"post",dataType:"json",data:t,beforeSend:function(e){e.setRequestHeader("X-PeepSo-Nonce",peepsodata.peepso_nonce)}}).done(function(e){var s=a.find(".ps-form__error");e.errors&&e.errors.length?(s.empty(),e=e.errors,_.each(e,function(e){s.append('<div class="ps-form__error-item">'+e+"</div>")}),s.show()):s.hide()})}n("#recoverpasswordform").on("input","input[type=password]",_.debounce(function(e){t(n(e.target).closest(".ps-form__field"))},500)).on("submit.ps-resetpassword",function(e){var s,r,o;return e.preventDefault(),e.stopPropagation(),e=(s=n(e=this)).find(".ps-form__field"),r=s.find("button[type=submit]"),o=[],errors=[],s.data("ps-submitting")||(s.data("ps-submitting",!0),e.each(function(){var e=t(this);e&&o.push(e)}),r.find("img").show(),n.when.apply(n,o).done(function(){for(var e in r.find("img").hide(),arguments)if(arguments[e][0].errors)return void s.removeData("ps-submitting");s.off("submit.ps-resetpassword"),setTimeout(function(){r.click()},100)})),!1})}(jQuery);