!function o(i,a,d){function s(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,o,i,a,d)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<d.length;e++)s(d[e]);return s}({1:[function(e,t,d){!function(a){!function(){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var e,n=(e="undefined"!=typeof window?window.jQuery:void 0!==a?a.jQuery:null)&&e.__esModule?e:{default:e},o="undefined"!=typeof window?window.peepso:void 0!==a?a.peepso:null;function t(e){e=(0,n.default)(e);e.find(".ps-js-activity-content, .ps-js-comment-content").each(function(){var e=(0,n.default)(this);o.util.isRTL(e.text().trim())?e.addClass("ps-text-rtl"):e.removeClass("ps-text-rtl")}),e.on("input","textarea.ps-comments__input",function(){i(this)})}function i(e){var e=(0,n.default)(e),t=e.prev(".ps-postbox__input-beautifier");o.util.isRTL(e.val().trim())?e.add(t).addClass("ps-text-rtl"):e.add(t).removeClass("ps-text-rtl")}d.default={init:function(){o.observer.addFilter("peepso_activity",e=>e.map(function(){return 1===this.nodeType&&t(this),this}),10,1),o.hooks.addAction("post_updated","auto-rtl",t),o.observer.addFilter("peepso_postbox_input_changed",(e,t)=>(i(t.$textarea),e),10,2),o.observer.addAction("postbox_update",e=>{e.$text.off("input.auto-rtl").on("input.auto-rtl",()=>{i(e.$text)}),setTimeout(()=>e.$text.triggerHandler("input.auto-rtl"),100)})}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){!function(e){!function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;"undefined"==typeof window&&void 0!==e&&e.peepso;n.default=function(e,t){e instanceof Element&&!function(e,t){let n=1<arguments.length&&void 0!==t?t:{};e.addEventListener("dragover",e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"}),e.addEventListener("drop",e=>{e.preventDefault();e=e.dataTransfer.files;e&&e.length&&"function"==typeof n.dropped&&n.dropped(e)})}(e,t)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,f){!function(p){!function(){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var e,t="undefined"!=typeof window?window.peepso:void 0!==p?p.peepso:null;const o=((e="undefined"!=typeof window?window.peepsodata:void 0!==p?p.peepsodata:null)&&e.__esModule?e:{default:e}).default.hashtags||{},i=o.url,a=+o.everything||0,d=!a&&+o.min_length||0,s=!a&&+o.max_length||1e4,l=!a&&+o.must_start_with_letter||0,r=(()=>{let e,t;return t=a?"(^|>|\\s)(#([^#\\s<]+))":"(^|>|\\s)(#("+((e=l)?"[a-z]":"")+"[a-z0-9]{"+Math.max(0,d-(e?1:0))+","+Math.max(0,s-(e?1:0))+"}))",new RegExp(t,"ig")})(),n=["a","area","audio","base","br","button","code","col","embed","frame","hr","iframe","img","input","keygen","link","meta","param","script","select","source","style","textarea","track","video","wbr"];function u(e){var t=e.querySelectorAll("*");(t=[e,...t]).forEach(e=>{if(!(-1<n.indexOf(e.tagName.toLowerCase()))){let o=[...e.childNodes];o.forEach(e=>{var t,n;3===e.nodeType&&(n=e.textContent).trim()&&n.match(r)&&((t=document.createElement("div")).innerHTML=n=(n=n).match(r)?n.replace(r,function(e,t,n,o){return`${t}<a href="${i}${o}/"><span class="ps-stream-hashtag">${n}</span></a>`}):n,e.replaceWith.apply(e,t.childNodes),o=o.concat([...t.childNodes]))})}})}f.default={init:function(){if(o.url){t.observer.addFilter("peepso_activity",e=>e.map(function(){if(1===this.nodeType){let e=this.querySelectorAll([".ps-js-activity-content",".ps-js-activity-extras",".ps-js-activity-quote",".ps-js-activity-background-text",".ps-comment__content"].join(", "));(e=e.length?e:[this]).forEach(u)}return this}),11,1),t.hooks.addAction("post_updated","hashtag",function(e){e=e.querySelector(".ps-js-activity-background-text");e&&u(e)});const n=(()=>{var e="(?:\\u200D\\u200D)",t=`((?:^|\\s|&nbsp;)${e}?)`;let n;return n=a?t+`(#${e}?(?:[^#\\s\\u200D]${e}?)+)`:t+`(#${e}?(?:${(t=l)?`[a-z]${e}?`:""}(?:[a-z0-9]${e}?){${Math.max(0,d-(t?1:0))},${Math.max(0,s-(t?1:0))}})+)`,new RegExp(n,"ig")})();t.observer.addAction("postbox_content_transform",(e,t)=>{let i=n;[...e.querySelectorAll("[data-hashtag]")].forEach(e=>{var t=[...e.childNodes].find(e=>e.nodeType===Node.TEXT_NODE),n=e.previousSibling,o=e.nextSibling;n&&n.nodeType===Node.TEXT_NODE?(n.textContent+=t.textContent,e.remove(),o&&o.nodeType===Node.TEXT_NODE&&(n.textContent+=o.textContent,o.remove())):o&&o.nodeType===Node.TEXT_NODE?(o.textContent=t.textContent+o.textContent,e.remove()):e.replaceWith.apply(e,[t])}),function o(e){[...e.childNodes].forEach(e=>{var t,n;Node.TEXT_NODE===e.nodeType?(t=e.textContent).match(i)&&((n=document.createElement("div")).innerHTML=t.replace(i,(e,t,n)=>{return t+`<span data-highlight data-hashtag data-value="${n.replace(/\u200D/gi,"")}">${n}</span>`}),e.replaceWith.apply(e,n.childNodes)):Node.ELEMENT_NODE===e.nodeType&&o(e)})}(e)},10,2),jQuery(".peepso-wp-post-hashtags").each(function(){u(this)})}}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(p,e,t){!function(u){!function(){"use strict";var e=r("undefined"!=typeof window?window.jQuery:void 0!==u?u.jQuery:null),t=r("undefined"!=typeof window?window.peepso:void 0!==u?u.peepso:null),n="undefined"!=typeof window?window.peepsodata:void 0!==u?u.peepsodata:null,o=r(p("./droppable")),i=r(p("./post")),a=r(p("./hashtag")),d=r(p("./mention")),s=r(p("./permalink")),l=r(p("./auto-rtl"));function r(e){return e&&e.__esModule?e:{default:e}}t.default.elements={droppable:o.default},(0,e.default)(function(){i.default.init(),a.default.init(),d.default.init(),s.default.init(),+n.auto_rtl&&l.default.init()})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./auto-rtl":1,"./droppable":2,"./hashtag":3,"./mention":5,"./permalink":6,"./post":9}],5:[function(e,t,u){!function(o){!function(){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var e,h=(e="undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null)&&e.__esModule?e:{default:e},v="undefined"!=typeof window?window.peepso:void 0!==o?o.peepso:null;const i=new RegExp("@peepso_([a-z]+)_(\\d+)(?:\\(([^\\(\\)]+(?:\\([^\\(\\)]+\\)[^\\(\\)]*?)*?)\\))?","g"),n=["a","area","audio","base","br","button","code","col","embed","frame","hr","iframe","img","input","keygen","link","meta","param","script","select","source","style","textarea","track","video","wbr"];let a=0;function d(e){return e=e.match(i)?e.replace(i,function(e,t,n,o){var i="ps-tag__link ps-js-mention-"+ ++a,e=`<a class="${i}">${o||e}</a>`;return i=i,t=[t,n,o],l?r.push({elements:i,params:t}):s(i,t),e}):e}function t(e){var t=e.querySelectorAll("*");(t=[e,...t]).forEach(e=>{if(!(-1<n.indexOf(e.tagName.toLowerCase()))){let o=[...e.childNodes];o.forEach(e=>{var t,n;3===e.nodeType&&(t=e.textContent).trim()&&t.match(i)&&((n=document.createElement("div")).innerHTML=d(t),e.replaceWith.apply(e,n.childNodes),o=o.concat([...n.childNodes]))})}})}function s(e,t){var[t,n,o]=t;v.modules.mention.getHtml(t,n,o).then(n=>{(e=[...document.getElementsByClassName(e)]).forEach(t=>{var e=document.createElement("div");e.innerHTML=n,[...e.childNodes].forEach(e=>{t.parentNode.insertBefore(e,t)}),t.parentNode.removeChild(t)})})}let l=!0,r=[];let m;function w(){m&&m.hide()}v.observer.addAction("postbox_content_change",(e,t)=>{var n=window.getSelection();if(!n.rangeCount)return!1;var n=n.getRangeAt(0),o=n.startContainer;if(o.nodeType===Node.TEXT_NODE){var i=o.parentElement;if(i.hasAttribute("data-mention")){var l=i.getAttribute("data-name");let n=i.innerText;if(n!==l){let t=l.split(/\s+/),e=n.split(/\s+/);if((e=e.filter(e=>0<=t.indexOf(e))).length){var l=i.childNodes[0],a=(n=e.join(" "),l.textContent=n,i.setAttribute("data-value",`@peepso_user_${i.getAttribute("data-id")}(${n})`),window.getSelection()),d=document.createRange();d.setStart(l,l.textContent.length),d.collapse(!0),a.removeAllRanges(),a.addRange(d)}else{l=i.previousSibling,a=i.nextSibling;let e,t;l?(e=l,t=l.textContent.length,a&&(l.textContent+=a.textContent,a.remove())):a&&(e=a,t=0);d=i.parentElement;i.remove(),e&&(l=window.getSelection(),(a=document.createRange()).setStart(e,t),a.collapse(!0),l.removeAllRanges(),l.addRange(a)),d.innerText.trim().length||(d.innerHTML="",d.focus())}}}else{i=o.textContent.substr(0,n.startOffset).match(/@([a-z]+)$/i);if(i){var r=e,u=t,p=i.slice(1),l=(m||(m=(0,h.default)('<div class="ps-post__background-selector" />')).appendTo(document.body),window.getSelection());if(l.rangeCount){let e=l.getRangeAt(0),d=e.startContainer,s=e.startOffset,t=e.getClientRects()[0],n=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.scrollLeft||document.body.scrollLeft,i=t.top+n+25,a=t.left+o;function f(){if(m&&m.is(":visible")){var o=m.find(".active");if(o.length){let e=d.textContent,t=e.substr(0,s),n=e.substr(s);t=t.replace(/@[^@]*$/,""),n=n.replace(/^[^\s]+/,"");var i=document.createElement("div"),a=o.data("id"),o=o.data("name"),a=(i.innerHTML=t+`<span data-highlight data-mention data-id="${a}" data-name="${o}" data-value="${`@peepso_user_${a}(${o})`}">${o}</span> ‚Äç`+n,i.childNodes[t.length?2:1]),o=(d.replaceWith.apply(d,i.childNodes),window.getSelection()),i=document.createRange();i.setStart(a,1),i.collapse(!0),o.removeAllRanges(),o.addRange(i),w()}}}function c(t){t=0<arguments.length&&void 0!==t?t:"down";if(m){var n=m.find(".active");let e="up"===t?n.prev():n.next();(e=e.length?e:"up"===t?n.siblings().last():n.siblings().first()).length&&(n.removeClass("active"),e.addClass("active"))}}u.disableInput=!0,m.css({top:i,left:a}),m.show(),m.off("click.ps-mention"),m.on("click.ps-mention",function(e){var t=(0,h.default)(e.target).closest("[data-item]");t.length&&(e.preventDefault(),e.stopPropagation(),t.addClass("active").siblings("[data-item]").removeClass("active"),f(),setTimeout(()=>u.disableInput=!1,400))}),(0,h.default)(r).off("keydown.ps-mention"),(0,h.default)(r).on("keydown.ps-mention",function(e){var t=e.keyCode;13===t?(e.preventDefault(),e.stopPropagation(),f(),setTimeout(()=>u.disableInput=!1,400)):27===t?(w(),setTimeout(()=>u.disableInput=!1,400)):38===t?(e.preventDefault(),e.stopPropagation(),c("up")):40===t&&(e.preventDefault(),e.stopPropagation(),c("down"))}),v.modules.mention.getTargets().then(t=>{let n="",o=0,e=[...r.querySelectorAll("[data-mention]")];e=e.map(e=>+e.getAttribute("data-id"));for(const a in t.users)if(!(0<=e.indexOf(+a))&&Object.hasOwnProperty.call(t.users,a)){var i=t.users[a];let e=i.name;0<=(e=String.prototype.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e).toLowerCase().indexOf(p)&&(n+=`<a href="#" class="${o++?"":"active"}" data-item data-id="${i.id}" data-name="${i.name}" style="display: block; white-space: nowrap"><div class="ps-avatar"><img src="${i.avatar}"></div> <span>${i.name}</span></a>`)}n?m.html(n):m.hide()})}}else w()}}},10,2),v.observer.addAction("postbox_content_update",(e,t)=>{[...[...e.childNodes].filter(e=>e.nodeType===Node.TEXT_NODE)].forEach(e=>{var t,n=e.textContent.replace(/@peepso_user_(\d+)\(([\s\S]*?)\)/g,function(e,t,n){return`<span data-highlight data-mention data-id="${t}" data-name="${n}" data-value="${e}">${n}</span>`});n!==e.textContent&&((t=document.createElement("div")).innerHTML=n,e.replaceWith.apply(e,t.childNodes))})},10,2),u.default={init:function(){v.observer.addFilter("peepso_activity",e=>e.map(function(){return 1===this.nodeType&&t(this),this}),10,1),v.hooks.addAction("post_updated","mention",function(e){e=e.querySelector(".ps-js-activity-background-text");e&&t(e)}),(0,h.default)(()=>{t(document.body),setTimeout(()=>{for(l=!1;r.length;){var{elements:e,params:t}=r.shift();s(e,t)}},3e3)})}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,a){!function(i){!function(){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e,n=(e="undefined"!=typeof window?window.jQuery:void 0!==i?i.jQuery:null)&&e.__esModule?e:{default:e},t="undefined"!=typeof window?window.peepso:void 0!==i?i.peepso:null;function o(){(0,n.default)(".ps-js-permalink").each(function(){var e=(0,n.default)(this);e.removeClass("ps-js-permalink"),e.on("click",function(e){e.preventDefault(),e.stopPropagation();var e=(0,n.default)(this),t=e.closest("a[href]");t.length&&(peepso.util.copyToClipboard(t.attr("href")),e.attr("data-tooltip",e.data("tooltip-success")))}),e.on("mouseleave",function(){var e=(0,n.default)(this),t=e.data("tooltip-initial");t!==e.attr("data-tooltip")&&e.attr("data-tooltip",t)})})}a.default={init:function(){(0,n.default)(function(){setTimeout(o,1e3)}),t.observer.addFilter("peepso_activity",e=>(setTimeout(o,1e3),e),10,1)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,h){!function(t){!function(){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var i=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},a="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,e="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;e=e.elements&&e.elements.post||{};const d=e.text_subscribe,s=e.text_unsubscribe,l=e.html_subscribed_notice;let r=null;function u(e){var t=e.querySelector("span");e.removeEventListener("click",n),(0,i.default)(e).addClass("ps-loading-pulse").css("cursor","not-allowed"),t.style.display="none"}function p(e){var t=e.querySelector("span");e.addEventListener("click",n),(0,i.default)(e).removeClass("ps-loading-pulse").css("cursor",""),t.style.display=""}function f(e,t){var n=e.querySelector("i"),o=e.querySelector("span");t?(e.setAttribute("data-follow",1),n.className="gcis gci-square-check",o.innerHTML=s):(e.setAttribute("data-follow",0),n.className="gcir gci-square-check",o.innerHTML=d)}function n(e){let o=e.currentTarget,t=+o.getAttribute("data-follow"),n=+o.getAttribute("data-post-id");e.preventDefault(),e.stopPropagation(),u(o),f(o,!t),a.modules.post.follow(n,t?0:1).then(function(e){let t=!1;var n;p(o,e),(t=1==e.follow?a.observer.applyFilters("post_subscribe_notice",!0):t)?(e=(0,i.default)(o).offset(),n=(0,i.default)(o).height(),r||((r=(0,i.default)("<div/>").html(l)).css({position:"absolute"}),r.appendTo(document.body)),r.stop().show(),r.css({top:Math.round(e.top-r.height()/2+n/2),left:Math.round(e.left-r.width()-10)}),r.delay(2e3).fadeOut()):r&&r.stop().hide()})}function o(e){let t=e.querySelector(".ps-js-follow-toggle");t&&(u(t),e=+t.getAttribute("data-post-id"))&&a.modules.post.follow(e).then(function(e){p(t,e),f(t,!!e.follow)})}function c(e){var t,e=e.querySelector(".js-stream-actions");e&&(t=e.querySelector(".ps-js-follow-toggle"))&&(t.closest&&!t.closest(".ps-js-activity")?t.remove():o(e))}h.default={init:function(){function t(e){var t,e=document.querySelector(`.ps-js-follow-toggle[data-stream-id="${e}"]`);e&&(e=+(t=e).getAttribute("data-post-id"),u(t),a.modules.post.follow(e).then(function(e){p(t,e),f(t,!!e.follow)}))}a.observer.addFilter("peepso_activity",e=>e.map(function(){return 1===this.nodeType&&c(this),this}),10,1),a.observer.addAction("peepso_activity_actions",e=>{e.map(function(){return 1===this.nodeType&&o(this),this})},10,1),a.hooks.addAction("comment_added","post_follow",e=>{e=e.closest(".ps-js-activity");e&&c(e)}),a.hooks.addAction("post_saved","post_follow",t),a.hooks.addAction("reaction_added","post_follow",t),a.hooks.addAction("reaction_deleted","post_follow",t),a.hooks.addAction("comment_added","post_follow",e=>{e=e.closest(".ps-js-activity");e&&t(e.getAttribute("data-post-id"))})}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,o){!function(t){!function(){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e,a=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},d="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,i="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;function n(e,t){var n=(0,a.default)(e),o=(t||(o=n.find(".ps-js-post-body input[name=peepso_set_human_friendly]")).length&&(t=o.val(),o.remove()),+t&&(+i.is_admin||+n.data("author")==+i.currentuserid)&&d.modules.post.setHumanReadable(+t,function(e){var t=(0,a.default)(e);let n=t.find(".ps-js-post-body .ps-js-activity-background-text"),o=(n=n.length?n:t.find(".ps-js-post-body .ps-js-activity-content")).get(0).innerText.trim();return(e=d.observer.applyFilters("human_friendly_extras",[],o,e)).length&&(o&&e.unshift(o),o=e.join(". ")),o||(n=t.find(".ps-js-post-header .ps-stream-action-title")).length&&(o=n.get(0).innerText.trim()),o=o.replace(/\r?\n/g," ")}(e)),n.find(".ps-js-comment-item"));o.length&&o.each(function(){s(this)})}function s(e,t){var n,o=(0,a.default)(e);t||(n=o.find(".ps-js-comment-body").eq(0).find("input[name=peepso_set_human_friendly]")).length&&(t=n.val(),n.remove()),+t&&(+i.is_admin||+o.data("author")==+i.currentuserid)&&d.modules.post.setHumanReadable(+t,function(e){let t=(0,a.default)(e),n=t.find(".ps-js-comment-body .ps-js-comment-content"),o=n.get(0).innerText.trim(),i=d.observer.applyFilters("human_friendly_extras",[],o,e);return i.length&&(o&&i.unshift(o),o=i.join(". ")),o=o.replace(/\r?\n/g," ")}(e))}d.hooks.addAction("post_added","human_readable",n),d.hooks.addAction("post_updated","human_readable",function(e){var t=(0,a.default)(e).data("post-id");t&&n(e,t)}),d.hooks.addAction("comment_added","human_readable",s),d.hooks.addAction("comment_updated","human_readable",function(e){var t=(0,a.default)(e).data("comment-id");t&&s(e,t)}),o.default={init:function(){}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=p(e("./read-more")),i=p(e("./options")),a=p(e("./save")),d=p(e("./follow")),s=p(e("./track")),l=p(e("./human")),r=p(e("./link-target")),u=p(e("./nsfw"));function p(e){return e&&e.__esModule?e:{default:e}}n.default={init:function(){o.default.init(),i.default.init(),a.default.init(),d.default.init(),s.default.init(),l.default.init(),r.default.init(),u.default.init()}}},{"./follow":7,"./human":8,"./link-target":10,"./nsfw":11,"./options":12,"./read-more":13,"./save":14,"./track":15}],10:[function(e,t,a){!function(n){!function(){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e,o=(e="undefined"!=typeof window?window.jQuery:void 0!==n?n.jQuery:null)&&e.__esModule?e:{default:e},i="undefined"!=typeof window?window.peepso:void 0!==n?n.peepso:null;function t(e){let t=(0,o.default)("<div/>").append(e),n;return(n=t.find(".ps-js-post-body").length?t.find(".ps-js-post-body a[href]"):t.find(".ps-js-comment-body").length?t.find(".ps-js-comment-content a[href]").add(t.find(".ps-js-comment-attachment a[href]")):t.find("a[href]")).each(function(){var e=(0,o.default)(this),t=i.modules.url.getTarget(e.attr("href"),!1);t?e.attr("target",t):e.removeAttr("target")}),t.html()}a.default={init:function(){i.observer.addFilter("peepso_activity_content",e=>t(e),10,1)},setLinkTarget:t}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(e,t,a){!function(n){!function(){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e,o=(e="undefined"!=typeof window?window.jQuery:void 0!==n?n.jQuery:null)&&e.__esModule?e:{default:e},i="undefined"!=typeof window?window.peepso:void 0!==n?n.peepso:null;function t(e){(0,o.default)(e).off("click.nsfw").on("click.nsfw",".ps-js-post-nsfw span",function(){var e=(0,o.default)(this).closest(".ps-js-post-nsfw"),t=e.closest(".ps-js-post-body"),n=t.children(".ps-js-activity-content"),t=t.children(".ps-js-activity-attachments");n.removeClass("ps-post__content--nsfw"),t.removeClass("ps-post__attachments--nsfw"),e.remove(),i.hooks.doAction("nsfw_reveal",t.get(0))})}i.hooks.addAction("post_added","nsfw",t),i.hooks.addAction("post_updated","nsfw",t),i.hooks.addAction("post_reload","nsfw",e=>{(0,o.default)(`.ps-js-activity[data-post-id="${e}"]`).each(function(){t(this)})}),a.default={init:function(){}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,a){!function(o){!function(){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e,d=(e="undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null)&&e.__esModule?e:{default:e},i="undefined"!=typeof window?window.peepso:void 0!==o?o.peepso:null,s="undefined"!=typeof window?window.peepsodata:void 0!==o?o.peepsodata:null;function n(e,t){let a=(0,d.default)(e);a.on("click.ps-fetch-options",function(){var o;a.off("click.ps-fetch-options"),o=t,new Promise((t,e)=>{var n=s.rest_url+"post_options";i.ajax.get(n,{post_id:o},-1).done(e=>t(e)).fail(e)}).then(e=>{let t="";if(e&&e.options instanceof Object)for(var n in e.options){n=e.options[n];if(null===n)t+="__spacer__";else{var o=n["li-class"]?` class="${n["li-class"]}"`:"",i=n.extra?" "+n.extra:"";let e="";n.click&&(e=(e=n.click.replace(/\s*return\s+false\s*(;\s*)?$/,"").replace(/\s*;$/,"").replace(/"/g,"&quot;"))?` onclick="${e}; return false"`:""),t+=`<a href="#"${o}${i}${e}>
							<i class="${n.icon}"></i><span>${n.label}</span>
						</a>`}}(t=(t=t.replace(/^(__spacer__)+/,"").replace(/(__spacer__)+$/,"").replace(/(__spacer__){2,}/,"__spacer__")).replace(/__spacer__/g,'<span class="ps-post__options-sep"></span>'))&&(a.find(".ps-js-dropdown-menu").html(t),a.find("a.child").hide(),a.find("a.parent").on("click",function(e){e.preventDefault(),e.stopPropagation(),(0,d.default)(this).nextUntil(":not(.child)").toggle()}))})})}function t(e){var t,e=e.querySelector(".ps-js-post-options");e&&(t=+e.getAttribute("data-id"))&&(e.removeAttribute("data-id"),n(e,t))}a.default={init:function(){i.observer.addFilter("peepso_activity",e=>e.map(function(){return 1===this.nodeType&&t(this),this}),10,1),i.observer.addAction("peepso_activity_actions",e=>{e.map(function(){return 1===this.nodeType&&t(this),this})},10,1)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(f,e,c){!function(i){!function(){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=t("undefined"!=typeof window?window.jQuery:void 0!==i?i.jQuery:null),d="undefined"!=typeof window?window.peepso:void 0!==i?i.peepso:null,e="undefined"!=typeof window?window.peepsodata:void 0!==i?i.peepsodata:null,s=t(f("./link-target"));function t(e){return e&&e.__esModule?e:{default:e}}var n=e.activity&&+e.activity.is_permalink;const l=+e.readmore_min,r=+e.readmore_min_single,u=e.read_more_text;function o(t){var t=(0,a.default)(t),n=t.find(".ps-js-post-body .ps-js-activity-content"),o=n.text().trim().length;if(o>l){var i='<a href="#" class="ps-stream-post-more ps-js-content-excerpt-toggle"/>';let e=(0,a.default)('<a href="#" class="ps-stream-post-more ps-js-content-excerpt-toggle"/>').html(u);o>r&&(o=t.find(".ps-js-post-header .ps-js-timestamp").attr("href"),i=s.default.setLinkTarget(e.attr("href",o).prop("outerHTML")),e=(0,a.default)(i).attr("data-single-act",1));o=(0,a.default)('<div class="ps-js-content-excerpt"/>').html(d.util.trimHtml(n.html(),l)+" &hellip; ").append(e),i=(0,a.default)('<div class="ps-js-content-full"/>').html(n.html()).css("display","none");n.empty().append(o).append(i)}n=t.find(".ps-js-comment-item");n.length&&n.each(function(){p(this)})}function p(e){var t,n,e=(0,a.default)(e).find(".ps-js-comment-body .ps-js-comment-content");e.text().trim().length>l&&(t=(0,a.default)('<a class="ps-stream-post-more ps-js-content-excerpt-toggle"/>').attr("href","#").html(u),t=(0,a.default)('<div class="ps-js-content-excerpt"/>').html(d.util.trimHtml(e.html(),l)+" &hellip; ").append(t),n=(0,a.default)('<div class="ps-js-content-full"/>').html(e.html()).css("display","none"),e.empty().append(t).append(n))}n||(d.hooks.addAction("post_added","add_readmore",o),d.hooks.addAction("post_updated","add_readmore",function(e){var t=(0,a.default)(e).data("post-id");t&&o(e)}),d.hooks.addAction("comment_added","add_readmore",p),d.hooks.addAction("comment_updated","add_readmore",function(e){var t=(0,a.default)(e).data("comment-id");t&&p(e)})),c.default={init:function(){}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./link-target":10}],14:[function(e,t,c){!function(t){!function(){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},d="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,e="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;e=e.elements&&e.elements.post||{};const i=e.text_save,s=e.text_saved,l=e.html_saved_notice;let r=null;function o(e){var t=e.querySelector("span");e.removeEventListener("click",f),(0,a.default)(e).addClass("ps-loading-pulse").css("cursor","not-allowed"),t.style.display="none"}function u(e,t){var t=1<arguments.length&&void 0!==t?t:{},n=e.querySelector("span");e.addEventListener("click",f),(0,a.default)(e).removeClass("ps-loading-pulse").css("cursor",""),n.style.display="",+t.saved&&e.setAttribute("data-object-id",t.id)}function p(e,t){var n=e.querySelector("i"),o=e.querySelector("span");t?(e.setAttribute("data-saved","1"),n.className="gcis gci-bookmark",o.innerHTML=s):(e.removeAttribute("data-saved"),n.className="gcir gci-bookmark",o.innerHTML=i)}function f(e){let i=e.currentTarget,t=+i.getAttribute("data-saved"),n=+i.getAttribute(t?"data-object-id":"data-stream-id");e.preventDefault(),e.stopPropagation(),o(i),p(i,!t),d.modules.post.save(n,!t).then(function(e){let t=!1;var n,o;u(i,e),(t=e.saved?d.observer.applyFilters("post_saved_notice",!0):t)?(n=(0,a.default)(i).offset(),o=(0,a.default)(i).height(),r||((r=(0,a.default)("<div/>").html(l)).css({position:"absolute"}),r.appendTo(document.body)),r.stop().show(),r.css({top:Math.round(n.top-r.height()/2+o/2),left:Math.round(n.left-r.width()-10)}),r.delay(2e3).fadeOut()):r&&r.stop().hide(),d.hooks.doAction("post_saved",+i.getAttribute("data-stream-id"),!!e.saved)})}function n(e){let t=e.querySelector(".ps-js-save-toggle");t&&(o(t),e=+t.getAttribute("data-stream-id"))&&d.modules.post.save(e).then(function(e){u(t,e),p(t,!!e.saved)})}c.default={init:function(){d.observer.addFilter("peepso_activity",e=>e.map(function(){var e,t;return 1===this.nodeType&&(e=(e=this).querySelector(".js-stream-actions"))&&(t=e.querySelector(".ps-js-save-toggle"))&&(t.closest&&!t.closest(".ps-js-activity")?t.remove():n(e)),this}),10,1),d.observer.addAction("peepso_activity_actions",e=>{e.map(function(){return 1===this.nodeType&&n(this),this})},10,1)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,s){!function(d){!function(){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=(e="undefined"!=typeof window?window.jQuery:void 0!==d?d.jQuery:null)&&e.__esModule?e:{default:e},e="undefined"!=typeof window?window._:void 0!==d?d._:null,o="undefined"!=typeof window?window.peepso:void 0!==d?d.peepso:null,t="undefined"!=typeof window?window.peepsodata:void 0!==d?d.peepsodata:null;let i=[],a=(0,e.debounce)(function(){if(i.length)for(let e=i.length-1;0<=e;e--){var t=i[e];o.util.isElementPartlyInViewport(t)&&((t=(0,n.default)(t).closest(".ps-js-activity")).length&&(t=t.data("id"),o.modules.post.trackView(t)),i.splice(e,1))}},1e3);s.default={init:function(){+t.currentuserid&&((0,n.default)(window).on("scroll",a),o.observer.addFilter("peepso_activity",e=>e.map(function(){var e;return 1===this.nodeType&&(e=this,i.push(e),a()),this}),10,1))}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[4]);