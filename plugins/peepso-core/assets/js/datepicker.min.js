!function(u){var t,e,i={};window.peepsodatepickerdata&&peepsodatepickerdata.config&&(t=peepsodatepickerdata.config,e=_.map(t.daysShort,function(t){return t.replace(/^([a-z]{2}).+$/i,"$1")}),_.extend(i,{monthNames:t.months,monthNamesShort:t.monthsShort,dayNames:t.days,dayNamesShort:t.daysShort,dayNamesMin:e,currentText:t.today,dateFormat:t.format,isRTL:t.rtl,showButtonPanel:!0,currentText:t.today,closeText:t.apply,changeMonth:!0,changeYear:!0,yearRange:"-100:+0",firstDay:0})),_.extend(i,{beforeShow:function(t,a){var e,i=0;window.getComputedStyle&&(e=a.dpDiv.prev(),i=getComputedStyle(e[0]).getPropertyValue("z-index"),i=parseInt(i));i=['<div class="peepso-datepicker"',i?' style="z-index: '+(i+1)+'"':""," />"].join("");a.dpDiv.wrap(i),setTimeout(function(){var t=a.dpDiv.closest(".peepso-datepicker"),e=a.dpDiv.css("position");"fixed"===e&&t.css("position",e),t.on("click",function(t){t.stopPropagation()})},1)},beforeShowDay:function(){var t=u(this).data("datepicker");return a(t),[!0,""]},onClose:function(t,e){c(e),_.delay(function(){e.dpDiv.unwrap(".peepso-datepicker")},500)}}),u.jQueryDatepicker=u.datepicker,u.fn.jQueryDatepicker=u.fn.datepicker,window.peepso_datepicker_noconflict&&(u.fn.datepicker=window.peepso_datepicker_noconflict,window.peepso_datepicker_noconflict=void 0),u.fn.psDatepicker=function(e){return this.each(function(){var a=u(this),t="click.psDatepicker";return a.next("button").off(t).on(t,function(t){var e=a.data("datepicker").dpDiv;t.preventDefault(),t.stopPropagation(),e.is(":visible")?a.jQueryDatepicker("hide"):a.jQueryDatepicker("show")}),e=_.extend({},i,e||{}),a.jQueryDatepicker(e)})};var a=_.debounce(function(t){var e,a,i,n,r,d,o,p=t.dpDiv;a=(e=t).dpDiv,i=a.find(".ui-datepicker-prev"),n=a.find(".ui-datepicker-next"),r=a.find(".ui-datepicker-month"),d=a.find(".ui-datepicker-year"),o=a.find(".ui-datepicker-close"),c(e),a.on("keydown.ps-datepicker",{inst:e},s),i.on("click.ps-datepicker",{inst:e},f),n.on("click.ps-datepicker",{inst:e},f),r.on("change.ps-datepicker",{inst:e},f).on("click.ps-datepicker",{inst:e},function(t){t.stopPropagation()}),d.on("change.ps-datepicker",{inst:e},f).on("click.ps-datepicker",{inst:e},function(t){t.stopPropagation()}),o.on("click.ps-datepicker",{inst:e},D),v(t),(t=p.find(".ui-state-highlight")[0])||(t=p.find(".ui-state-active")[0]||p.find(".ui-datepicker-today a")[0]||p.find(".ui-state-default")[0],u(t).addClass("ui-state-highlight")),t.focus()},100);function c(t){var e=t.dpDiv,a=e.find(".ui-datepicker-prev"),i=e.find(".ui-datepicker-next"),n=e.find(".ui-datepicker-month"),r=e.find(".ui-datepicker-year"),t=e.find(".ui-datepicker-close");e.off("keydown.ps-datepicker"),a.off("click.ps-datepicker"),i.off("click.ps-datepicker"),n.off("change.ps-datepicker").off("click.ps-datepicker"),r.off("change.ps-datepicker").off("click.ps-datepicker"),t.off("click.ps-datepicker")}function s(t){var e,a,i,n,r,d,o,p=t.data.inst,c=t.target,s=t.which,f=t.altKey;37===s?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i,n=u(e).closest("td");n.length&&((a=n.prev("td")).length||(a=n.closest("tr").prev("tr").find("td").last()));a&&a.length&&(i=a.find(".ui-state-default"));i&&i.length?g(t,i):l(t,e,1)}(p,c)):36===s?(t.preventDefault(),t.stopPropagation(),function(t,e){e=u(e).closest("tr").find(".ui-state-default").first();e&&e.length&&g(t,e)}(p,c)):39===s?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i,n=u(e).closest("td");n.length&&((a=n.next("td")).length||(a=n.closest("tr").next("tr").find("td").first()));a&&a.length&&(i=a.find(".ui-state-default"));i&&i.length?g(t,i):h(t,e,1)}(p,c)):35===s?(t.preventDefault(),t.stopPropagation(),function(t,e){e=u(e).closest("tr").find(".ui-state-default").last();e&&e.length&&g(t,e)}(p,c)):38===s?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i=u(e).closest("td"),i=i.closest("tr").prev("tr").find("td").eq(i.prevAll().length);i&&i.length&&(a=i.find(".ui-state-default"));a&&a.length?g(t,a):l(t,e,7)}(p,c)):40===s?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i=u(e).closest("td"),i=i.closest("tr").next("tr").find("td").eq(i.prevAll().length);i&&i.length&&(a=i.find(".ui-state-default"));a&&a.length?g(t,a):h(t,e,7)}(p,c)):33===s?(t.preventDefault(),t.stopPropagation(),f?(r=c,d=(n=p).dpDiv,o=u(r).data("psDate"),r="#"+n.id.replace(/\\\\/g,"\\"),u.jQueryDatepicker._adjustDate(r,12,"M"),_.defer(function(){var t;v(n),t=(t=d.find("a.ui-state-default")).filter("[data-ps-date="+o+"]"),g(n,t)})):h(p,c)):34===s?(t.preventDefault(),t.stopPropagation(),f?(f=c,a=(e=p).dpDiv,i=u(f).data("psDate"),f="#"+e.id.replace(/\\\\/g,"\\"),u.jQueryDatepicker._adjustDate(f,-12,"M"),_.defer(function(){var t;v(e),t=(t=a.find("a.ui-state-default")).filter("[data-ps-date="+i+"]"),g(e,t)})):l(p,c)):13===s?k(0,c):27===s&&p.input.jQueryDatepicker("hide")}function l(e,t,a){var i=e.dpDiv,n=u(t).data("psDate"),t="#"+e.id.replace(/\\\\/g,"\\");void 0===a?n=new Date(e.drawYear,e.drawMonth,+n):"number"==typeof a&&(n=new Date(e.drawYear,e.drawMonth,+n-a)),u.jQueryDatepicker._adjustDate(t,-1,"M"),_.defer(function(){var t;v(e),t=(t=i.find("a.ui-state-default")).filter("[data-ps-date="+n.getDate()+"]"),g(e,t)})}function h(e,t,a){var i=e.dpDiv,n=u(t).data("psDate"),t="#"+e.id.replace(/\\\\/g,"\\");void 0===a?n=new Date(e.drawYear,e.drawMonth,+n):"number"==typeof a&&(n=new Date(e.drawYear,e.drawMonth,+n+a)),u.jQueryDatepicker._adjustDate(t,1,"M"),_.defer(function(){var t;v(e),t=(t=i.find("a.ui-state-default")).filter("[data-ps-date="+n.getDate()+"]"),g(e,t)})}function k(t,e){u(e).click()}function v(t){var e=t.dpDiv.find(".ui-datepicker-calendar"),a=t.settings,i=a.dayNames,n=a.monthNames[t.drawMonth],r=t.drawYear;e.attr("role","application"),e.find("tbody a.ui-state-default").attr("role","button").each(function(){var t=u(this),e=t.closest("td").prevAll().length,a=t.text().trim(),e=a+", "+i[e]+" "+n+" "+r;t.removeClass("ui-state-hover"),t.attr("aria-label",e),t.attr("data-ps-date",a)})}function n(t){return t.dpDiv.find(".ui-state-highlight")}function g(t,e){t.dpDiv;var a=n(t),i=u(e);_.defer(function(){a.removeClass("ui-state-highlight"),i.focus(),i.addClass("ui-state-highlight")})}function f(t){var e=t.data.inst,a=new Date(e.selectedYear,e.selectedMonth,e.selectedDay),i=e.input;t.stopPropagation(),_.delay(function(){i.jQueryDatepicker("setDate",a)},100)}function D(t){t=t.data.inst;k(0,n(t))}}(jQuery);