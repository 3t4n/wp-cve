!function(e,s){var a,r,t=(a=e,r=s,n.prototype.block_user=function(n,e){var s,o=this.block_user,i="block_"+n;o[i]||(e&&(e=r(e)).find("img").css("display","inline"),s={uid:peepsodata.currentuserid,user_id:n},o[i]=!0,peepso.postJson("activity.blockuser",s,r.proxy(function(e){var s=r(".ps-js-focus--"+n).find(".ps-js-focus-actions"),t=e.data;o[i]=!1,e.success?(t&&t.actions&&s.html(t.actions),peepso.observer.applyFilters("ps_member_user_blocked",n,t),t&&(t.header||t.message)&&psmessage.show(t.header,t.message,psmessage.fade_time),t.redirect&&setTimeout(function(){a.location=t.redirect},Math.min(1e3,psmessage.fade_time))):e.errors&&alert(e.errors[0])},this)))},n.prototype.unblock_user=function(n,o){var e,i=this.unblock_user,a="block_"+n;i[a]||(o&&(o=r(o)).find("img").css("display","inline"),e={uid:peepsodata.currentuserid,user_id:n},i[a]=!0,peepso.postJson("activity.unblockuser",e,r.proxy(function(e){var s=r(".ps-js-focus--"+n).find(".ps-js-focus-actions"),t=e.data;i[a]=!1,e.success&&(t&&t.actions&&s.html(t.actions),peepso.observer.applyFilters("ps_member_user_unblocked",n,t),t&&(t.header||t.message)&&psmessage.show(t.header,t.message,psmessage.fade_time),r(o).closest(".ps-js-member").fadeOut("fast",function(){r(this).remove()}))},this)))},n.prototype.ban_user=function(e,s){var t,n,o,i;this.banning_user||(s&&(s=r(s)).find("img").css("display","inline"),t=peepsomemberdata.ban_popup_title,n=peepsomemberdata.ban_popup_content,o=['<button type="button" class="ps-btn ps-btn-small ps-button-cancel" onclick="return pswindow.do_no_confirm();">',peepsomemberdata.ban_popup_cancel,"</button>",'<button type="button" class="ps-btn ps-btn-small ps-button-action" onclick="return ps_member.do_ban_user('+e+');">',peepsomemberdata.ban_popup_save,"</button>"].join(" "),(i=pswindow.show(t,n).set_actions(o).$container).find("#ban-forever").on("focus",function(){r("#ban-period-empty").hide()}),ps_datepicker.init(i.find("[name=ban_period_date]")))},n.prototype.do_ban_user=function(s){var e,t=r("#form_ban_user"),n=t.find("input[name=ban_type]:checked").val();if("ban_period"===n&&!(e=t.find("input[name=ban_period_date]").data("value")))return t.find("#ban-period-empty").show(),!1;var o={user_id:s,ban_status:1,ban_type:n,ban_period_date:e};this.banning_user=!0,peepso.postJson("activity.set_ban_status",o,r.proxy(function(e){this.banning_user=!1,e.success&&(peepso.observer.applyFilters("ps_member_user_banned",s,e.data),psmessage.show(e.data.header,e.data.message,psmessage.fade_time),setTimeout(function(){a.location.reload()},Math.min(1e3,psmessage.fade_time)))},this))},n.prototype.unban_user=function(s,e){this.unbanning_user||(e&&(e=r(e)).find("img").css("display","inline"),this.unbanning_user=!0,peepso.postJson("activity.set_ban_status",{user_id:s,ban_status:0},r.proxy(function(e){this.unbanning_user=!1,e.success&&(peepso.observer.applyFilters("ps_member_user_unbanned",s,e.data),psmessage.show(e.data.header,e.data.message,psmessage.fade_time),setTimeout(function(){a.location.reload()},Math.min(1e3,psmessage.fade_time)))},this)))},n.prototype.report_user=function(e){var s=r("#activity-report-title").html(),t=r("#activity-report-content").html(),n=r("#activity-report-actions").html();function o(){return"profile.report"}function i(e){var s=r.extend({},e);return s.user_id=s.act_id,s.act_id=void 0,s.uid=void 0,s}t=(t=t.replace("{post-content}","Profile")).replace("{post-id}",e+""),peepso.observer.addFilter("activity_report_action",o,10),peepso.observer.addFilter("activity_report_params",i,10,1),pswindow.show(s,t).set_actions(n).refresh(),r("#ps-window").one("pswindow.hidden",function(){peepso.observer.removeFilter("activity_report_action",o,10),peepso.observer.removeFilter("activity_report_params",i,10)}),r(a).one("report.submitted",function(e,s){pswindow.show("Profile Reported",s.notices[0])})},n);function n(){}ps_member=new t}(window,jQuery);