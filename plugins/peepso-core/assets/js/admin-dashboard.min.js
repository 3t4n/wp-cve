!function(s){s(document).ready(function(){var t=[];s.each(demographic_data,function(e,a){t.push({label:a.label,data:a.value,color:void 0!==a.color?a.color:null})}),s("#demographic-pie").css({width:"90%","min-height":"150px"});s.plot("#demographic-pie",t,demographic_options);var a=s("#peepso_dashboard_user_engagement .tab-pane.active .engagement_date_range");function e(){var t=[],n=[];s.each(s('#peepso_dashboard_user_engagement .tab-pane.active input[name="stats[]"]').serializeArray(),function(e,a){n.push(a.value)}),n=n.join(","),req={date_range:a.val(),module_id:s("#peepso_dashboard_user_engagement .nav-tabs .active").data("module-id"),stats:n},a.attr("disabled","disabled"),peepso.postJson("adminEngagementDashboard.get_graph_data",req,function(e){s.each(e.data.series,function(e,a){a.label=s('#peepso_dashboard_user_engagement .tab-pane.active input[value="'+a.type+'"]').siblings(".lbl").text(),t.push(a)});s.plot("#peepso_dashboard_user_engagement .tab-pane.active .graph-container",t,{yaxis:{min:0},xaxis:{tickDecimals:0,mode:"time",timeformat:"%m/%d",min:e.data.min,max:e.data.max},legend:{labelFormatter:function(e,a){return a.total+" "+e}},series:{lines:{show:!0},points:{show:!0}},grid:{hoverable:!0,clickable:!0}});a.removeAttr("disabled")})}a.on("change",e).trigger("change"),s('#peepso_dashboard_user_engagement .tab-pane.active input[name="stats[]"]').on("click",e),s('#peepso_dashboard_user_engagement a[data-toggle="tab"]').on("shown.bs.tab",e),req={user_id:peepsoadmindashboarddata.user_id},s(".btn-subscribe").on("click",function(){peepso.postJson("adminNewsletterDashboard.set_subscribed_user",req,function(e){})}),s(".btn-cancel").on("click",function(){peepso.postJson("adminNewsletterDashboard.set_subscribed_user",req,function(e){location.reload()})})})}(jQuery);