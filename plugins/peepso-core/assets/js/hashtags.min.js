!function s(a,l,r){function n(e,t){if(!l[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(o)return o(e,!0);throw(i=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",i}i=l[e]={exports:{}},a[e][0].call(i.exports,function(t){return n(a[e][1][t]||t)},i,i.exports,s,a,l,r)}return l[e].exports}for(var o="function"==typeof require&&require,t=0;t<r.length;t++)n(r[t]);return n}({1:[function(t,e,u){!function(d){!function(){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var t,a=(t="undefined"!=typeof window?window.jQuery:void 0!==d?d.jQuery:null)&&t.__esModule?t:{default:t},l="undefined"!=typeof window?window.peepso:void 0!==d?d.peepso:null,e="undefined"!=typeof window?window.peepsodata:void 0!==d?d.peepsodata:null;e.hashtags.url;const r=+e.hashtags.everything||0,n=!r&&+e.hashtags.min_length||0,o=!r&&+e.hashtags.max_length||1e4,i=!r&&+e.hashtags.must_start_with_letter||0,s=(()=>{let t,e;return e=r?"(^|>|\\s)(#([^#\\s<]+))":"(^|>|\\s)(#("+((t=i)?"[a-z]":"")+"[a-z0-9]{"+Math.max(0,n-(t?1:0))+","+Math.max(0,o-(t?1:0))+"}))",new RegExp(e,"ig")})();let h;class p{constructor(){return h||((h=this).hashtag=void 0,this.$filter=null,this.$toggle=null,this.$input=null,this.$apply=null,this.assignHooks(),(0,a.default)(()=>{this.initActivityFilter()})),h}filter(e){var i=this.hashtag;if(this.hashtag=e){var s=this.$toggle.data("keyword")+e+' <i class="ps-posts__filter-remove gcis gci-times-circle"></i>';this.$toggle.html(s),this.$toggle.one("click","i",()=>{this.filter("")});let t=(0,a.default)("#postbox-main textarea.ps-postbox-textarea").eq(0);t.length&&!t.val()&&t.val(`#${e} `).trigger("input")}else{s=this.$toggle.data("empty");this.$toggle.html(s);let t=(0,a.default)("#postbox-main textarea.ps-postbox-textarea").eq(0);t.length&&t.val()===`#${i} `&&t.val("").trigger("input")}this.$input.val(e),l.observer.doAction("peepso_stream_reset")}assignHooks(){l.observer.addFilter("peepso_postbox_beautifier",t=>t.replace(s,(t,e,i,s)=>e+'<ps_span class="ps-tag">'+i+"</ps_span>"),20,1),l.observer.addFilter("peepso_activity",t=>t=this.hashtag?t.map(function(){let t=(0,a.default)(this),e=t.html();return t.closest(".ps-js-activity").length&&"string"==typeof e&&!e.match(s)?null:this}):t,20,1),l.observer.addFilter("show_more_posts",t=>(this.hashtag&&(t.search_hashtag=this.hashtag),t),10,1)}initActivityFilter(){this.$filter=(0,a.default)(".ps-js-activitystream-filter").filter("[data-id=peepso_search_hashtag]"),this.$toggle=this.$filter.find(".ps-js-dropdown-toggle span"),this.$input=this.$filter.find("input[type=text]"),this.$apply=this.$filter.find(".ps-js-search-hashtag"),this.$input.on("input",t=>{let e=t.target,i=e.value,s;s=r?i.replace(l.browser.isIOS()?/[#<]/g:/[#\s<]/g,""):i.replace(/[^a-z0-9]/gi,""),i!==s&&(e.value=s);t=s.length;t<n||t>o?this.$apply.attr("disabled","disabled"):this.$apply.removeAttr("disabled")}).triggerHandler("input"),this.$input.on("keyup",t=>{13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),this.$apply.click())}),this.$apply.on("click",()=>{var t=this.$input.val().trim(),e=t.length;e>=n&&e<=o&&this.filter(t)});let t=decodeURIComponent(window.location.href),e=r?/\/\??hashtag\/([^#\s<\/]+)/:/\/\??hashtag\/([a-z0-9]+)/i,i=t.match(e);i&&this.filter(i[1])}}new(u.default=p)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);