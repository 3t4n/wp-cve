!function i(a,s,n){function d(t,e){if(!s[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(r)return r(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}o=s[t]={exports:{}},a[t][0].call(o.exports,function(e){return d(a[t][1][e]||e)},o,o.exports,i,a,s,n)}return s[t].exports}for(var r="function"==typeof require&&require,e=0;e<n.length;e++)d(n[e]);return d}({1:[function(e,t,o){!function(o){!function(){"use strict";var e,t=(e="undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null)&&e.__esModule?e:{default:e},n="undefined"!=typeof window?window.peepso:void 0!==o?o.peepso:null;const d=+("undefined"!=typeof window?window.peepsodata:void 0!==o?o.peepsodata:null).profile.id;(0,t.default)(function(){let s=(0,t.default)(".ps-js-profile-completeness");if(s.length){let o=s.find(".ps-js-status"),i=s.find(".ps-js-progressbar"),a=s.find(".ps-js-required");n.hooks.addAction("profile_completeness_updated","page_profile_about",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(+e==d){let e=0;void 0!==t.profile_completeness&&(100<=+t.profile_completeness?(e++,o.hide(),i.hide()):(o.html(t.profile_completeness_message).show(),i.show(),i.children("span").css({width:+t.profile_completeness+"%"}))),"undefined"!==t.missing_required&&(+t.missing_required<=0?(e++,a.hide()):a.html(t.missing_required_message).show()),2===e?s.hide():s.show()}})}})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,o){!function(t){!function(){"use strict";var e,n=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},d="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,o="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;(0,n.default)(function(){let i=(0,n.default)("input[name=verify_password]");if(i.length){let e=i.closest("form"),t=e.find("input[type=text], input[type=password]").not(i),o=e.find("[type=submit]");function a(){i.val().trim().length<5?(t.attr("readonly","readonly"),o.attr("disabled","disabled")):(t.removeAttr("readonly"),!function(){let e=!1;return t.each(function(){if(this.value!==(0,n.default)(this).data("ps-value"))return!(e=!0)}),e}()?o.attr("disabled","disabled"):o.removeAttr("disabled"))}t.each(function(){(0,n.default)(this).data("ps-value",this.value)}),t.filter("input[name=user_nicename]").on("input",function(){var e=this.value.replace(/[^a-z0-9-_\.@]/gi,"");this.value!==e&&(this.value=e)}),i.on("input",a),t.on("input",a),a()}}),(0,n.default)(function(){let s;(0,n.default)(".ps-js-profile-delete").on("click",e=>{e.preventDefault(),s||((s=(0,d.dialog)(o.profile.template_profile_deletion,{destroyOnClose:!1}).show()).$el.find("form").on("submit",e=>e.preventDefault()),s.$el.find(".ps-js-cancel").on("click",()=>s.hide()),s.$el.find(".ps-js-submit").on("click",a=>{{a=a.currentTarget;let e=(0,n.default)(a).attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),o=s.$el.find(".ps-js-error").hide(),i=s.$el.find("#ps-js-profile-deletion-pass").val();d.ajax.post("profile.delete_profile",{password:i}).then(e=>{e.success?e.data&&((0,d.dialog)(e.data.messages).show(),setTimeout(()=>window.location=e.data.url,3e3)):e.errors&&o.html(e.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}}),d.hooks.doAction("init_password_preview")),s.$el.find("#ps-js-profile-deletion-pass").val(""),s.$el.find(".ps-js-error").hide(),s.show()})}),(0,n.default)(function(){let a;function t(){let e=a.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),o=a.$el.find(".ps-js-error").hide(),i=a.$el.find("#ps-js-export-data-request-pass").val();d.ajax.post("profile.request_account_data",{password:i}).then(e=>{var t;e.success?e.data&&(t=a.title(),t=(0,d.dialog)(e.data.messages,{title:t}),a.hide(),t.show(),setTimeout(()=>{window.location=e.data.url},3e3)):e.errors&&o.html(e.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}(0,n.default)(".ps-js-export-data-request").on("click",e=>{e.preventDefault(),a||((a=(0,d.dialog)(o.profile.template_export_data_request,{destroyOnClose:!1}).show()).$el.find(".ps-js-cancel").on("click",()=>a.hide()),a.$el.find(".ps-js-submit").on("click",()=>t()),a.$el.find("form").on("submit",e=>{e.preventDefault(),t()}),d.hooks.doAction("init_password_preview")),a.$el.find("#ps-js-export-data-request-pass").val(""),a.$el.find(".ps-js-error").hide(),a.show()})}),(0,n.default)(function(){let a;function t(){let e=a.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),i=a.$el.find(".ps-js-error").hide(),o=a.$el.find("#ps-js-export-data-download-pass").val();d.ajax.post("profile.download_account_data",{password:o}).then(o=>{if(o.success){if(o.data){let e=a.title(),t=(0,d.dialog)(o.data.messages,{title:e});a.hide(),t.show(),setTimeout(()=>{t.hide(),window.location=o.data.url},1500)}}else o.errors&&i.html(o.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}(0,n.default)(".ps-js-export-data-download").on("click",e=>{e.preventDefault(),a||((a=(0,d.dialog)(o.profile.template_export_data_download,{destroyOnClose:!1}).show()).$el.find(".ps-js-cancel").on("click",()=>a.hide()),a.$el.find(".ps-js-submit").on("click",()=>t()),a.$el.find("form").on("submit",e=>{e.preventDefault(),t()}),d.hooks.doAction("init_password_preview")),a.$el.find("#ps-js-export-data-download-pass").val(""),a.$el.find(".ps-js-error").hide(),a.show()})}),(0,n.default)(function(){let a;function t(){let e=a.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),o=a.$el.find(".ps-js-error").hide(),i=a.$el.find("#ps-js-export-data-delete-pass").val();d.ajax.post("profile.delete_account_data_archive",{password:i}).then(e=>{var t;e.success?e.data&&(t=a.title(),t=(0,d.dialog)(e.data.messages,{title:t}),a.hide(),t.show(),setTimeout(()=>{window.location=e.data.url},3e3)):e.errors&&o.html(e.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}(0,n.default)(".ps-js-export-data-delete").on("click",e=>{e.preventDefault(),a||((a=(0,d.dialog)(o.profile.template_export_data_delete,{destroyOnClose:!1}).show()).$el.find(".ps-js-cancel").on("click",()=>a.hide()),a.$el.find(".ps-js-submit").on("click",()=>t()),a.$el.find("form").on("submit",e=>{e.preventDefault(),t()}),d.hooks.doAction("init_password_preview")),a.$el.find("#ps-js-export-data-delete-pass").val(""),a.$el.find(".ps-js-error").hide(),a.show()})})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,o){"use strict";e("./about"),e("./notifications"),e("./account")},{"./about":1,"./account":2,"./notifications":4}],4:[function(e,t,o){!function(t){!function(){"use strict";var e,s=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},n="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;let d=[],r=!1;function l(t,o){let i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return new Promise(e=>{e=[t,o,e,i];i?d.unshift(e):d.push(e),setTimeout(c,500)})}function p(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=(0,s.default)(".ps-js-preferences-header").find("span[data-type=email]"),o=(0,s.default)(".ps-js-preferences-button").filter("[data-type=email]"),i=(0,s.default)(".ps-js-notification-option").find("span[data-type=email]");e?(t.show(),o.show(),i.show()):(t.hide(),o.hide(),i.hide())}const c=()=>{if(d.length&&!r){var t=d.shift(),o=t[0],i=t[1];let e=[t[2]];var a=t[3],o={user_id:n.currentuserid,view_user_id:n.userid,fieldname:o,value:i};!a&&d.length&&(t=d.shift(),o.fieldname_extra=t[0],o.value_extra=t[1],e.push(t[2])),r=!0,peepso.postJson("profilepreferencesajax.save_notifications",o,t=>{r=!1,e.forEach(e=>e(t)),c()})}},i=e=>{let o=(0,s.default)(e),i=o.closest("span[data-type]").data("type");e=o.closest(".ps-preferences__checkbox").find("[type=checkbox]").not(o);e.length&&e.each(function(){var e=(0,s.default)(this),t=e.closest("span[data-type]").data("type");("onsite"===i&&!o[0].checked&&e[0].checked||"onsite"===t&&!e[0].checked&&o[0].checked)&&e.trigger("click")})};(0,s.default)(function(){(0,s.default)(".ps-js-profile-list").on("change","[type=checkbox]",function(){var e=(0,s.default)(this).closest(".ps-js-notification-option").find(".ps-js-loading");let t=e.find("img"),o=e.find("i");o.stop().hide(),t.show(),l((0,s.default)(this).attr("name"),this.checked?1:0).then(function(){t.hide(),o.show().delay(800).fadeOut()}),i(this)});let t=(0,s.default)("select[name=email_intensity]"),a=(t.off("change.savepref"),t.on("change",function(){let o=this.value;var e=t.next(".ps-js-loading");let i=e.find("img"),a=e.find("i");a.stop().hide(),i.show(),l("email_intensity",o,!0).then(e=>{var t;i.hide(),a.show().delay(800).fadeOut(),e.success&&((t=(e=(0,s.default)("#peepso_email_intensity_descriptions").children()).filter("#peepso_email_intensity_"+o)).length&&(e.not(t).hide(),t.show()),p(0==+o))})}),t.length&&p(0==+t.val()),(0,s.default)("input[name=web_push]"));a.off("change.savepref"),a.on("change",function(){var e=this.checked?1:0,t=a.closest(".ps-preferences__notification").find(".ps-js-loading");let o=t.find("img"),i=t.find("i");i.stop().hide(),o.show(),l("web_push",e,!0).then(e=>{o.hide(),i.show().delay(800).fadeOut(),e.success&&setTimeout(function(){window.location.reload()},500)})}),(0,s.default)(".ps-preferences__checkbox").children("[data-type=onsite]").find("[type=checkbox]").each(function(){i(this)})})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,U){!function(Y){!function(){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=function(){w||(w=(0,o.dialog)(i.profile.template_avatar,{wide:!0,destroyOnClose:!1}).show(),v=w.$el,W=v.find(".ps-js-upload").on("click",S),_=function(){var e=(0,r.default)('<input type="file" name="filedata" accept="image/*" data-name="profile-avatar-upload" />').css({position:"absolute",opacity:0,height:1,width:1});e.appendTo(document.body),e.psFileupload&&e.psFileupload({formData:{user_id:n,_wpnonce:l},dataType:"json",url:p,beforeSend:function(e){e.setRequestHeader("X-PeepSo-Nonce",s)},replaceFileInput:!1,dropZone:null,add(e,t){var o=t.files[0];o.type.match(/image\/(jpe?g|png|webp)$/i)?o.size>a?Q.html(F).show():(Q.hide(),C("loading"),t.submit()):Q.html(c).show()},done(e,t){var o,i,t=t.result;t.success?(o=t.data&&t.data.image_url,i=t.data&&t.data.orig_image_url,T=!0,P=!1,C(o,i),m.removeAttr("disabled")):t.errors&&Q.html(t.errors[0]).show()}});return e}(),g=v.find(".ps-js-remove").on("click",I),E=v.find(".ps-js-gravatar").on("click",N),m=v.find(".ps-js-submit").on("click",X),y=v.find(".ps-js-btn-crop").on("click",H),j=v.find(".ps-js-btn-crop-cancel").on("click",L),b=v.find(".ps-js-btn-crop-save").on("click",R),k=v.find(".ps-js-btn-rotate-l").on("click",{dir:"ccw"},z),x=v.find(".ps-js-btn-rotate-r").on("click",{dir:"cw"},z),Q=v.find(".ps-js-error").hide(),J=v.find(".ps-js-loading").hide(),$=v.find(".ps-js-has-avatar"),D=v.find(".ps-js-no-avatar"),A=v.find(".ps-js-original"),M=v.find(".ps-js-preview"),O=v.find(".ps-js-avatar-loading"),C.apply(null,u?[i.profile.img_avatar,i.profile.img_avatar_original]:[]),m.attr("disabled","disabled"));return w};var e,t,r=(e="undefined"!=typeof window?window.jQuery:void 0!==Y?Y.jQuery:null)&&e.__esModule?e:{default:e},o="undefined"!=typeof window?window.peepso:void 0!==Y?Y.peepso:null,i="undefined"!=typeof window?window.peepsodata:void 0!==Y?Y.peepsodata:null;const a=+peepsodata.upload_size,s=peepsodata.peepso_nonce,n=+i.profile.id,d=i.profile.img_avatar_default,l=i.profile.avatar_nonce,p=peepsodata.ajaxurl_legacy+"profile.upload_avatar?avatar",c=i.profile.text_error_filetype,F=i.profile.text_error_filesize;let u=+i.profile.has_avatar,f,h,w,v,W,_,g,E,m,y,j,b,k,x,Q,J,$,D,A,M,O,q,T=!1,P=-1<(i.profile.img_avatar||"").indexOf("gravatar.com");function C(e,t){var o;e?("loading"===e?(g.hide(),D.hide(),$.show(),A.hide(),O.show()):(g.show(),D.hide(),$.show(),o="?nocache-"+(new Date).getTime(),u=!0,f=e,M.attr("src",f+o),O.hide(),A.show(),t&&(h=t,A.attr("src",h+o),window.ps_crop.destroy(A))),P?y.hide():y.show(),j.hide(),b.hide(),P?k.hide():k.show(),P?x.hide():x.show()):(g.hide(),$.hide(),D.show(),u=!1,f=d,h=null,M.attr("src",f),A.removeAttr("src"),window.ps_crop.destroy(A))}function S(e){e.preventDefault(),_[0].value=null,_.trigger("click")}function I(e){e.preventDefault();e={user_id:n,_wpnonce:l};o.ajax.post("profile.remove_avatar",e).then(e=>{e.success&&(T=!1,C(null),window.ps_crop.destroy(A),w.hide(),m.attr("disabled","disable"),o.hooks.doAction("profile_avatar_updated",n,d))})}function N(e){e.preventDefault();e={user_id:n,_wpnonce:l};o.ajax.post("profile.use_gravatar",e).then(e=>{e.success&&(e=e.data&&e.data.image_url,T=!0,P=!0,C(e,e),m.removeAttr("disabled"))})}function X(e){e.preventDefault(),t||(T?(e={user_id:n,use_gravatar:P?1:0,_wpnonce:l},t=!0,o.ajax.post("profile.confirm_avatar",e).then(e=>{var t;e.success&&(e=e.data&&e.data.image_url,t=e,fetch(t,{cache:"reload",mode:"no-cors"}).then(()=>document.body.querySelectorAll(`img[src='${t}']`).forEach(function(e){e.src=t})),window.ps_crop.destroy(A),w.hide(),T=!1,m.attr("disabled","disabled"),o.hooks.doAction("profile_avatar_updated",n,e))}).always(function(){t=!1})):(window.ps_crop.destroy(A),w.hide()))}function H(e){e.preventDefault(),window.ps_crop.init({elem:A,change:e=>{q=function(e,t){let o=(0,r.default)(e),i=1,a=!1,s,n,d;e.naturalWidth&&(s=e.naturalWidth||o.width(),n=e.naturalHeight||o.height(),(800<s||800<n)&&(i=800/Math.max(s,n),s*=i,n*=i,a=!0),i=s/o.width());d={x1:Math.floor(i*t.x),y1:Math.floor(i*t.y),x2:Math.floor(i*(t.x+t.width)),y2:Math.floor(i*(t.y+t.height))},a&&(d.width=s,d.height=n);return d}(A[0],e)}}),y.hide(),j.show(),b.show(),k.hide(),x.hide()}function L(e){e.preventDefault(),window.ps_crop.detach(A),y.show(),j.hide(),b.hide(),k.show(),x.show()}function R(e){e.preventDefault(),window.ps_crop.detach(A),y.show(),j.hide(),b.hide(),k.show(),x.show();e={x:q.x1,y:q.y1,x2:q.x2,y2:q.y2,width:q.width,height:q.height},T&&(e.tmp=1),e=r.default.extend(e,{user_id:n,_wpnonce:l});o.ajax.post("profile.crop",e).then(e=>{e.success&&(C(e.data.image_url),T=!0,m.removeAttr("disabled"))})}function z(e){e.preventDefault();e=r.default.extend({direction:"ccw"===e.data.dir?"ccw":"cw"},{user_id:n,_wpnonce:l},{tmp:T?1:0});C("loading"),o.ajax.post("profile.rotate",e).then(e=>{e.success&&(C(e.data&&e.data.image_url,e.data&&e.data.orig_image_url),T=!0,m.removeAttr("disabled"))})}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(d,e,t){!function(i){!function(){"use strict";var t=o("undefined"!=typeof window?window.jQuery:void 0!==i?i.jQuery:null),a="undefined"!=typeof window?window.peepso:void 0!==i?i.peepso:null,e="undefined"!=typeof window?window.peepsodata:void 0!==i?i.peepsodata:null,s=o(d("./avatar-dialog"));function o(e){return e&&e.__esModule?e:{default:e}}const n=+e.profile.id;(0,t.default)(function(){var e=(0,t.default)(".ps-js-focus--profile .ps-js-avatar");if(e.length){let o=e.find(".ps-js-avatar-image"),i=e.find(".ps-js-avatar-button-wrapper");a.hooks.addAction("profile_avatar_updated","page_profile",(e,t)=>{+e==n&&o.attr("src",t),t.match(/\/users\/\d+\//)?(i.css("cursor",""),i.attr("onclick",`peepso.simple_lightbox('${t.replace("-full.","-orig.")}'); return false`)):(i.css("cursor","default"),i.removeAttr("onclick"))}),e.find(".ps-js-avatar-button").on("click",e=>{e.preventDefault(),e.stopPropagation(),(0,s.default)().show()})}})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./avatar-dialog":5}],7:[function(e,t,o){!function(t){!function(){"use strict";var e,h=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},w="undefined"!=typeof window?window._:void 0!==t?t._:null,v="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=n(t);if(t&&t.has(e))return t.get(e);var o,i={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in e){var s;"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&((s=a?Object.getOwnPropertyDescriptor(e,o):null)&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o])}return i.default=e,t&&t.set(e,i),i}("undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null);function n(e){var t,o;return"function"!=typeof WeakMap?null:(t=new WeakMap,o=new WeakMap,(n=function(e){return e?o:t})(e))}const g=window.Hammer,m=+_.default.upload_size,y=_.default.peepso_nonce,j=+_.profile.id,b=_.profile.img_cover_default,k=_.profile.cover_nonce,x=_.default.ajaxurl_legacy+"profile.upload_cover?cover",Q=_.profile.text_error_filetype,$=_.profile.text_error_filetype;let D=+_.profile.has_cover,A;(0,h.default)(function(){let t=(0,h.default)(".ps-js-focus--profile .ps-js-cover");if(!t.length)return;(0,h.default)(".ps-js-cover-upload").on("click",function(e){e.preventDefault(),o[0].value=null,o.trigger("click")});let o=function(){var e=(0,h.default)('<input type="file" name="filedata" accept="image/*" data-name="profile-cover-upload" />').css({position:"absolute",opacity:0,height:1,width:1});e.appendTo(document.body),e.psFileupload&&e.psFileupload({formData:{user_id:j,_wpnonce:k},dataType:"json",url:x,beforeSend:function(e){e.setRequestHeader("X-PeepSo-Nonce",y)},replaceFileInput:!1,dropZone:null,add(e,t){var o=t.files[0];o.type.match(/image\/(jpe?g|png|webp)$/i)?o.size>m?alert($):(l.css("opacity",.5),p.show(),t.submit()):alert(Q)},done(e,t){var o,t=t.result;p.hide(),t.success?(o=t.data.image_url,a.show(),n.show(),d.show(),i.show(),D=!0,l.attr("style","").attr("src",o+"?"+Math.random()).one("load",c),v.hooks.doAction("profile_cover_updated",j,o)):t.errors&&alert(t.errors)}});return e}(),i=(0,h.default)(".ps-js-cover-remove").on("click",function(e){e.preventDefault();let t=(0,v.dialog)(_.profile.template_cover_remove).show();t.$el.on("click",".ps-js-cancel",()=>t.hide()),t.$el.on("click",".ps-js-submit",()=>{t.hide(),l.css("opacity",.5);var e={uid:_.currentuserid,user_id:j,_wpnonce:k};v.ajax.post("profile.remove_cover_photo",e).then(e=>{e.success&&(a.hide(),n.hide(),d.hide(),i.hide(),D=!1,l.attr("style","").attr("src",b).one("load",c),v.hooks.doAction("profile_cover_updated",j,b))})})}),a=(0,h.default)(".ps-js-cover-reposition").on("click",function(e){e.preventDefault(),l.data("style",l.attr("style")),l.css("z-index",1),t.addClass("ps-focus-cover-edit"),s.show();let i=r.width()-l.width(),a=r.height()-l.height();l.off("mousedown").on("mousedown",function(e){e.preventDefault()}),void 0!==g&&((A=new g.Manager(l[0])).add(new g.Pan({direction:g.DIRECTION_ALL,treshhold:0})),A.on("pan panstart panend",e=>{e.srcEvent.stopPropagation(),e.srcEvent.preventDefault();var t,o=(0,h.default)(e.target);"panstart"===e.type?(o.data("position",o.position()),o.css("cursor","move")):"pan"===e.type?(t=o.data("position"),(e={top:e.deltaY,left:e.deltaX}).left=Math.max(e.left,i-t.left),e.left=Math.min(e.left,0-t.left),e.top=Math.max(e.top,a-t.top),e.top=Math.min(e.top,0-t.top),o.css("transform",`translate3d(${e.left}px, ${e.top}px, 0)`)):(e=100*(t=o.position()).left/r.width(),t=100*t.top/r.height(),e=Math.ceil(1e4*e)/1e4,t=Math.ceil(1e4*t)/1e4,o.css({top:t+"%",left:e+"%",transform:""}),o.removeData("position"),o.data({reposX:e,reposY:t}),o.css("cursor",""))}))}),s=(0,h.default)(".ps-js-cover-reposition-actions").hide(),n=((0,h.default)(".ps-js-cover-reposition-cancel").on("click",function(e){e.preventDefault(),A.destroy(),A=null,t.removeClass("ps-focus-cover-edit"),s.hide(),l.css("z-index",""),l.attr("style",l.data("style")).removeData("style")}),(0,h.default)(".ps-js-cover-reposition-confirm").on("click",function(e){e.preventDefault(),A.destroy(),A=null,t.removeClass("ps-focus-cover-edit"),s.hide(),l.css("z-index","");e={user_id:j,_wpnonce:k,y:l.data("reposX"),x:l.data("reposY")};v.ajax.post("profile.reposition_cover",e)}),(0,h.default)(".ps-js-cover-rotate-left").on("click",{dir:"ccw"},e)),d=(0,h.default)(".ps-js-cover-rotate-right").on("click",{dir:"cw"},e),r=t.find(".ps-js-cover-wrapper"),l=t.find(".ps-js-cover-image"),p=t.find(".ps-js-cover-loading");function e(e){e.preventDefault();e=h.default.extend({direction:"ccw"===e.data.dir?"ccw":"cw"},{user_id:j,_wpnonce:k});v.ajax.post("profile.rotate_cover",e).then(e=>{var t;e.success&&(e=e.data.image_url,t=e,fetch(t,{cache:"reload",mode:"no-cors"}).then(()=>document.body.querySelectorAll(`img[src='${t}']`).forEach(function(e){e.src=t})),l.attr("style","").attr("src",e+"?"+Math.random()).one("load",c),v.hooks.doAction("profile_cover_updated",j,e))})}D||(a.hide(),n.hide(),d.hide(),i.hide());let c=()=>{l.css({height:"auto",width:"100%",minWidth:"100%",maxWidth:"100%"});let e=r.height(),t=r.width(),o=l.height(),i=l.width();o<e&&(l.css({height:"100%",width:"auto",minWidth:"100%",maxWidth:"none"}),o=l.height(),i=l.width());var a=parseFloat(l[0].style.top)||0,a=(o>=e&&a<(a=(o-e)/e*-100)&&l.css("top",a+"%"),parseFloat(l[0].style.left)||0);i>=t&&a<(a=(i-t)/t*-100)&&l.css("left",a+"%"),l.css("opacity","")};c=(0,w.throttle)(c,500),l.each(function(){var e=new Image;e.onload=c,e.src=this.src});let u,f=(v.hooks.addAction("browser_resize","profile_cover",e=>{u&&u===e.width||(u=e.width,c())}),(0,h.default)(".ps-js-cover-button-popup"));f.on("click",function(e){e.currentTarget===e.target&&(e=(0,h.default)(this).data("cover-url"))&&peepso.simple_lightbox(e)}),v.hooks.addAction("profile_cover_updated","page_profile",(e,t)=>{+e==j&&(-1<t.indexOf(`/users/${e}/`)?(f.css("cursor","pointer"),f.data("cover-url",t)):(f.css("cursor",""),f.removeData("cover-url")))})})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,o){"use strict";e("./avatar"),e("./cover")},{"./avatar":6,"./cover":7}],9:[function(e,t,o){"use strict";e("./header"),e("./profile"),e("./about"),e("./profile-extended")},{"./about":3,"./header":8,"./profile":11,"./profile-extended":10}],10:[function(e,t,o){"use strict";jQuery(function(o){var i=".ps-js-profile-separator",e=o(".ps-js-profile-list");e.length&&e.find(i).closest(".ps-js-profile-item").each(function(){var e=o(this),t=e.next();return!t.length||t.find(i).length?(e.remove(),!0):void 0})})},{}],11:[function(e,t,o){!function(o){!function(){"use strict";"undefined"==typeof window&&void 0!==o&&o.peepso;function e(){this.cover={},this.cover.x_position_percent=0,this.cover.y_position_percent=0,this.$cover_ct=jQuery(".js-focus-cover"),this.$cover_image=jQuery("img#"+peepsodata.userid),this.initial_cover_position=this.$cover_image.attr("style"),this.avatar_use_gravatar=!1}var t=window.profile=new e;e.prototype.init=function(){var e=jQuery(".js-collapse-about-btn"),e=(0!==e.length&&e.on("click",function(e){e.preventDefault();e=jQuery(".js-collapse-about");"none"===e.css("display")?e.show():e.hide()}),jQuery(".js-focus-cover").hover(function(){!1===pswindow.is_visible&&jQuery(".js-focus-change-cover").show()},function(){jQuery(".js-focus-change-cover").hide()}),jQuery(".ps-tab__bar").unbind("click"),jQuery(".ps-js-page-about-preferences")),e=(e.length&&(e.find("input[type=checkbox]").on("click.savepref",t.save_preference),e.find("select").on("change.savepref",t.save_preference),e.find(".ps-js-dropdown input[type=hidden]").on("change",t.save_preference),e.find(".ps-preferences__checkbox").find("input[type=checkbox]").off("click.savepref")),jQuery(".ps-js-profile-item"));e.length&&e.each(function(){var e,t=jQuery(this);t.find(".peepso-markdown").length&&(e=peepso.observer.applyFilters("peepso_parse_content",t.html()),t.html(e))})},e.prototype.activate_tab=function(e,t,o){return e.preventDefault(),jQuery(e.target).addClass("active").siblings("[data-toggle=tab]").removeClass("active"),jQuery(o).hide(),jQuery(t).show(),!1},e.prototype.new_like=function(){return peepso.postJson("profile.like",{user_id:peepsodata.userid},function(e){var t,o;e.success?(t=(o=e.data||{}).html,o=o.like_count,jQuery(".ps-js-focus-interactions").html(t),void 0!==o&&peepso.observer.doAction("profile_update_like",peepsodata.userid,o)):psmessage.show("",e.errors[0]).fade_out(psmessage.fade_time)}),!1},e.prototype.unblock_user=function(t,e){this.unblocking_user||(e&&(e=jQuery(e)).find("img").css("display","inline"),e={uid:peepsodata.currentuserid,user_id:t},this.unblocking_user=!0,peepso.postJson("activity.unblockuser",e,jQuery.proxy(function(e){this.unblocking_user=!1,e.success&&(jQuery(".ps-js-focus--"+t).find(".ps-js-focus-actions").html(e.data.actions),psmessage.show(e.data.header,e.data.message,psmessage.fade_time))},this)))},e.prototype.delete_profile=function(){var e=jQuery("#profile-delete-title").html(),t=jQuery("#profile-delete-content").html();pswindow.show(e,t)},e.prototype.delete_profile_action=function(){$req={};var e={uid:peepsodata.currentuserid};peepso.postJson("profile.delete_profile",e,function(e){e.success?window.location=e.data.url:psmessage.show("",e.errors[0]).fade_out(psmessage.fade_time)})},e.prototype.field_changed=function(e,t){e=jQuery(e).data("id");return this.field_changed_list||(this.field_changed_list=[]),-1===this.field_changed_list.indexOf(e)&&this.field_changed_list.push(e),this.change_beforeunload(),!0},e.prototype.change_beforeunload=function(){var e;this.onbeforeunload_changed||((e=this).onbeforeunload_changed=window.onbeforeunload||function(){},window.onbeforeunload=function(){return e.save_field_saving?peepsodata.profile_saving_notice||"The system is currently saving your changes.":e.field_changed_list.length?peepsodata.profile_unsaved_notice||"There are unsaved changes on this page.":void 0})},e.prototype.change_privacy=function(e){var e=jQuery(e),t=e.closest(".ps-js-dropdown"),o=t.find(".ps-js-dropdown-toggle"),i=t.find("input[type=hidden]"),a="[class*=gci-]",s=".ps-privacy-title",t=i.data("id"),n=(i.val(),o.find(a).attr("class")),d=o.find(s).html(),r=e.data("optionValue"),l=e.find(a).attr("class"),p=e.find("span").html();e.parent().children("[data-option-value]").each(function(){var e=jQuery(this),t=e.data("optionValue"),e=e.find(a).attr("class");t,0}),o.find(a).attr("class",l),o.find(s).html(p),peepso.postJson("profilefieldsajax.save_acc",{user_id:peepsodata.currentuserid,view_user_id:peepsodata.userid,id:t,acc:r},function(e){e.success?i.val(r):(o.find(a).attr("class",n),o.find(s).html(d))})},e.prototype.use_gravatar=function(){var i=this;peepso.postJson("profile.use_gravatar",{},function(e){var t,o;e.success&&(t=jQuery("#dialog-upload-avatar-content",jQuery(e.data.html)),o=jQuery("#dialog-upload-avatar .dialog-action").html(),Math.random(),e=(e=e.data.image_url)+(0<=e.indexOf("?")?"&rand=":"?rand=")+Math.random(),jQuery(".js-focus-avatar img",t).attr("src",e),jQuery(".imagePreview img",t).attr("src",e),jQuery(".imagePreview",t).after('<input type="hidden" name="is_tmp" value="1"/>'),jQuery(".ps-js-has-avatar",t).show(),jQuery(".ps-js-no-avatar",t).hide(),jQuery(".ps-js-crop-avatar",t).hide(),pswindow.set_content(t),pswindow.set_actions(o),jQuery("#imagePreview img").one("load",function(){pswindow.refresh()}),i.init_avatar_fileupload(),jQuery("#ps-window button[name=rep_submit]").removeAttr("disabled").addClass("ps-btn-primary"),i.invalid_avatar_upload=!1,i.avatar_use_gravatar=!0)})},e.prototype.save_preference=function(e){var e=jQuery(e&&e.target?e.target:e),t=e.closest(".ps-js-profile-preferences-option").find(".ps-js-loading"),o={};o.user_id=peepsodata.currentuserid,o.view_user_id=peepsodata.userid,o.meta_key=e.attr("name"),o.value=e.is(":checkbox")?e[0].checked?1:0:e.val(),t.find("i").stop().hide(),t.find("img").show(),peepso.postJson("profilepreferencesajax.savepreference",o,function(e){t.find("img").hide(),t.find("i").show().delay(800).fadeOut()})},e.prototype.save_notification=function(e){var e=jQuery(e&&e.target?e.target:e),t=e.closest(".ps-js-notification-option").find(".ps-js-loading"),o={};o.user_id=peepsodata.currentuserid,o.view_user_id=peepsodata.userid,o.fieldname=e.attr("name"),o.value=e.is(":checkbox")?e[0].checked?1:0:e.val(),t.find("i").stop().hide(),t.find("img").show(),peepso.postJson("profilepreferencesajax.save_notifications",o,function(e){t.find("img").hide(),t.find("i").show().delay(800).fadeOut(),e.success})},jQuery(function(){t.init()})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[9]);