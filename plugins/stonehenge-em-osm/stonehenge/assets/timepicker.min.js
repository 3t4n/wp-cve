!function(e){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var i=86400,t={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},n={init:function(i){return this.each(function(){var r=e(this),o=[];for(var l in e.fn.timepicker.defaults)r.data(l)&&(o[l]=r.data(l));var c=e.extend({},e.fn.timepicker.defaults,i,o);if(c.lang&&(t=e.extend(t,c.lang)),c=a(c),r.data("timepicker-settings",c),r.addClass("ui-timepicker-input"),c.useSelect)s(r);else{if(r.prop("autocomplete","off"),c.showOn)for(var u in c.showOn)r.on(c.showOn[u]+".timepicker",n.show);r.on("change.timepicker",d),r.on("keydown.timepicker",k),r.on("keyup.timepicker",v),c.disableTextInput&&r.on("keydown.timepicker",g),r.on("cut.timepicker",v),r.on("paste.timepicker",v),d.call(r.get(0),null,"initial")}})},show:function(i){var t=e(this),a=t.data("timepicker-settings");if(i&&i.preventDefault(),a.useSelect)t.data("timepicker-list").focus();else{u(t)&&t.blur();var o=t.data("timepicker-list");if(!t.prop("readonly")&&(o&&0!==o.length&&"function"!=typeof a.durationTime||(s(t),o=t.data("timepicker-list")),!r(o))){t.data("ui-timepicker-value",t.val()),m(t,o),n.hide(),"number"==typeof a.listWidth&&(console.log(a.listWidth),o.width(t.outerWidth()*a.listWidth)),o.show();var l={};a.orientation.match(/r/)?l.left=t.offset().left+t.outerWidth()-o.outerWidth()+parseInt(o.css("marginLeft").replace("px",""),10):a.orientation.match(/l/)?l.left=t.offset().left+parseInt(o.css("marginLeft").replace("px",""),10):a.orientation.match(/c/)&&(l.left=t.offset().left+(t.outerWidth()-o.outerWidth())/2+parseInt(o.css("marginLeft").replace("px",""),10)),"t"==(a.orientation.match(/t/)?"t":a.orientation.match(/b/)?"b":t.offset().top+t.outerHeight(!0)+o.outerHeight()>e(window).height()+e(window).scrollTop()?"t":"b")?(o.addClass("ui-timepicker-positioned-top"),l.top=t.offset().top-o.outerHeight()+parseInt(o.css("marginTop").replace("px",""),10)):(o.removeClass("ui-timepicker-positioned-top"),l.top=t.offset().top+t.outerHeight()+parseInt(o.css("marginTop").replace("px",""),10)),o.offset(l);var d=o.find(".ui-timepicker-selected");if(!d.length){var h=y(f(t));null!==h?d=p(t,o,h):a.scrollDefault&&(d=p(t,o,a.scrollDefault()))}if(d.length&&!d.hasClass("ui-timepicker-disabled")||(d=o.find("li:not(.ui-timepicker-disabled):first")),d&&d.length){var g=o.scrollTop()+d.position().top-d.outerHeight();o.scrollTop(g)}else o.scrollTop(0);return a.stopScrollPropagation&&e(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(i){i.preventDefault();var t=e(this).scrollTop();e(this).scrollTop(t+i.originalEvent.deltaY)}),e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",c),e(window).on("resize.ui-timepicker",c),a.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",c),t.trigger("showTimepicker"),this}}},hide:function(i){var t=e(this),n=t.data("timepicker-settings");return n&&n.useSelect&&t.blur(),e(".ui-timepicker-wrapper").each(function(){var i=e(this);if(r(i)){var t=i.data("timepicker-input"),n=t.data("timepicker-settings");n&&n.selectOnBlur&&T(t),i.hide(),t.trigger("hideTimepicker")}}),this},option:function(i,t){return"string"==typeof i&&void 0===t?e(this).data("timepicker-settings")[i]:this.each(function(){var n=e(this),r=n.data("timepicker-settings"),o=n.data("timepicker-list");"object"==typeof i?r=e.extend(r,i):"string"==typeof i&&(r[i]=t),r=a(r),n.data("timepicker-settings",r),d.call(n.get(0),{type:"change"},"initial"),o&&(o.remove(),n.data("timepicker-list",!1)),r.useSelect&&s(n)})},getSecondsFromMidnight:function(){return y(f(this))},getTime:function(e){var i=f(this);if(!i)return null;var t=y(i);if(null===t)return null;e||(e=new Date);var n=new Date(e);return n.setHours(t/3600),n.setMinutes(t%3600/60),n.setSeconds(t%60),n.setMilliseconds(0),n},isVisible:function(){var e=this.data("timepicker-list");return!(!e||!r(e))},setTime:function(e){var i=this.data("timepicker-settings");if(i.forceRoundTime)var t=l(y(e),i);else t=w(y(e),i);return e&&null===t&&i.noneOption&&(t=e),h(this,t,"initial"),d.call(this.get(0),{type:"change"},"initial"),this.data("timepicker-list")&&m(this,this.data("timepicker-list")),this},remove:function(){if(this.hasClass("ui-timepicker-input")){var e=this.data("timepicker-settings");return this.removeAttr("autocomplete","off"),this.removeClass("ui-timepicker-input"),this.removeData("timepicker-settings"),this.off(".timepicker"),this.data("timepicker-list")&&this.data("timepicker-list").remove(),e.useSelect&&this.show(),this.removeData("timepicker-list"),this}}};function r(e){var i=e[0];return i.offsetWidth>0&&i.offsetHeight>0}function a(i){if(i.minTime&&(i.minTime=y(i.minTime)),i.maxTime&&(i.maxTime=y(i.maxTime)),i.durationTime&&"function"!=typeof i.durationTime&&(i.durationTime=y(i.durationTime)),"now"==i.scrollDefault)i.scrollDefault=function(){return i.roundingFunction(y(new Date),i)};else if(i.scrollDefault&&"function"!=typeof i.scrollDefault){var t=i.scrollDefault;i.scrollDefault=function(){return i.roundingFunction(y(t),i)}}else i.minTime&&(i.scrollDefault=function(){return i.roundingFunction(i.minTime,i)});if("string"===e.type(i.timeFormat)&&i.timeFormat.match(/[gh]/)&&(i._twelveHourTime=!0),!1===i.showOnFocus&&-1!=i.showOn.indexOf("focus")&&i.showOn.splice(i.showOn.indexOf("focus"),1),i.disableTimeRanges.length>0){for(var n in i.disableTimeRanges)i.disableTimeRanges[n]=[y(i.disableTimeRanges[n][0]),y(i.disableTimeRanges[n][1])];i.disableTimeRanges=i.disableTimeRanges.sort(function(e,i){return e[0]-i[0]});for(n=i.disableTimeRanges.length-1;n>0;n--)i.disableTimeRanges[n][0]<=i.disableTimeRanges[n-1][1]&&(i.disableTimeRanges[n-1]=[Math.min(i.disableTimeRanges[n][0],i.disableTimeRanges[n-1][0]),Math.max(i.disableTimeRanges[n][1],i.disableTimeRanges[n-1][1])],i.disableTimeRanges.splice(n,1))}return i}function s(t){var r=t.data("timepicker-settings"),a=t.data("timepicker-list");if(a&&a.length&&(a.remove(),t.data("timepicker-list",!1)),r.useSelect){a=e("<select />",{class:"ui-timepicker-select"}),t.attr("name")&&a.attr("name","ui-timepicker-"+t.attr("name"));var s=a}else{a=e("<ul />",{class:"ui-timepicker-list"}),(s=e("<div />",{class:"ui-timepicker-wrapper",tabindex:-1})).css({display:"none",position:"absolute"}).append(a)}if(r.noneOption)if(!0===r.noneOption&&(r.noneOption=r.useSelect?"Time...":"None"),e.isArray(r.noneOption)){for(var c in r.noneOption)if(parseInt(c,10)==c){var p=o(r.noneOption[c],r.useSelect);a.append(p)}}else{p=o(r.noneOption,r.useSelect);a.append(p)}if(r.className&&s.addClass(r.className),(null!==r.minTime||null!==r.durationTime)&&r.showDuration){"function"==typeof r.step||r.step;s.addClass("ui-timepicker-with-duration"),s.addClass("ui-timepicker-step-"+r.step)}var d=r.minTime;"function"==typeof r.durationTime?d=y(r.durationTime()):null!==r.durationTime&&(d=r.durationTime);var f=null!==r.minTime?r.minTime:0,g=null!==r.maxTime?r.maxTime:f+i-1;g<f&&(g+=i),g===i-1&&"string"===e.type(r.timeFormat)&&r.show2400&&(g=i);var k=r.disableTimeRanges,v=0,H=k.length,C=r.step;"function"!=typeof C&&(C=function(){return r.step});c=f;for(var O=0;c<=g;c+=60*C(++O)){var D,R=c,S=w(R,r);if(r.useSelect)(D=e("<option />",{value:S})).text(S);else(D=e("<li />")).addClass(R%i<i/2?"ui-timepicker-am":"ui-timepicker-pm"),D.data("time",x(R,r)),D.text(S);if((null!==r.minTime||null!==r.durationTime)&&r.showDuration){var F=b(c-d,r.step);if(r.useSelect)D.text(D.text()+" ("+F+")");else{var M=e("<span />",{class:"ui-timepicker-duration"});M.text(" ("+F+")"),D.append(M)}}v<H&&(R>=k[v][1]&&(v+=1),k[v]&&R>=k[v][0]&&R<k[v][1]&&(r.useSelect?D.prop("disabled",!0):D.addClass("ui-timepicker-disabled"))),a.append(D)}if(s.data("timepicker-input",t),t.data("timepicker-list",s),r.useSelect)t.val()&&a.val(l(y(t.val()),r)),a.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")}),a.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")}),a.on("change",function(){h(t,e(this).val(),"select")}),h(t,a.val(),"initial"),t.hide().after(a);else{var I=r.appendTo;"string"==typeof I?I=e(I):"function"==typeof I&&(I=I(t)),I.append(s),m(t,a),a.on("mousedown click","li",function(i){t.off("focus.timepicker"),t.on("focus.timepicker-ie-hack",function(){t.off("focus.timepicker-ie-hack"),t.on("focus.timepicker",n.show)}),u(t)||t[0].focus(),a.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),T(t)&&(t.trigger("hideTimepicker"),a.on("mouseup.timepicker click.timepicker","li",function(e){a.off("mouseup.timepicker click.timepicker"),s.hide()}))})}}function o(i,t){var n,r,a;return"object"==typeof i?(n=i.label,r=i.className,a=i.value):"string"==typeof i?(n=i,a=""):e.error("Invalid noneOption value"),t?e("<option />",{value:a,class:r,text:n}):e("<li />",{class:r,text:n}).data("time",String(a))}function l(e,i){if(null!==(e=i.roundingFunction(e,i)))return w(e,i)}function c(i){if(i.target!=window){var t=e(i.target);t.closest(".ui-timepicker-input").length||t.closest(".ui-timepicker-wrapper").length||(n.hide(),e(document).unbind(".ui-timepicker"),e(window).unbind(".ui-timepicker"))}}function u(e){var i=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&i.disableTouchKeyboard}function p(i,t,n){if(!n&&0!==n)return!1;var r=i.data("timepicker-settings"),a=!1;n=r.roundingFunction(n,r);return t.find("li").each(function(i,t){var r=e(t);if("number"==typeof r.data("time"))return r.data("time")==n?(a=r,!1):void 0}),a}function m(e,i){i.find("li").removeClass("ui-timepicker-selected");var t=e.data("timepicker-settings"),n=y(f(e),t);if(null!==n){var r=p(e,i,n);if(r){var a=r.offset().top-i.offset().top;(a+r.outerHeight()>i.outerHeight()||a<0)&&i.scrollTop(i.scrollTop()+r.position().top-r.outerHeight()),(t.forceRoundTime||r.data("time")===n)&&r.addClass("ui-timepicker-selected")}}}function d(i,t){if("timepicker"!=t){var n=e(this);if(""!==this.value){if(!n.is(":focus")||i&&"change"==i.type){var r=n.data("timepicker-settings"),a=y(this.value,r);if(null!==a){var s=!1;if(null!==r.minTime&&null!==r.maxTime&&(a<r.minTime||a>r.maxTime)&&(s=!0),e.each(r.disableTimeRanges,function(){if(a>=this[0]&&a<this[1])return s=!0,!1}),r.forceRoundTime){var o=r.roundingFunction(a,r);o!=a&&(a=o,t=null)}var l=w(a,r);s?(h(n,l,"error")||i&&"change"==i.type)&&n.trigger("timeRangeError"):h(n,l,t)}else n.trigger("timeFormatError")}}else h(n,null,t)}}function f(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function h(e,i,t){if(e.is("input")){null===i&&""==e.val()||e.val(i);var n=e.data("timepicker-settings");n.useSelect&&"select"!=t&&e.data("timepicker-list")&&e.data("timepicker-list").val(l(y(i),n))}return e.data("ui-timepicker-value")!=i?(e.data("ui-timepicker-value",i),"select"==t?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):-1==["error","initial"].indexOf(t)&&e.trigger("changeTime"),!0):(-1==["error","initial"].indexOf(t)&&e.trigger("selectTime"),!1)}function g(e){switch(e.keyCode){case 13:case 9:return;default:e.preventDefault()}}function k(i){var t=e(this),a=t.data("timepicker-list");if(!a||!r(a)){if(40!=i.keyCode)return!0;n.show.call(t.get(0)),a=t.data("timepicker-list"),u(t)||t.focus()}switch(i.keyCode){case 13:return T(t)&&(d.call(t.get(0),{type:"change"}),n.hide.apply(this)),i.preventDefault(),!1;case 38:var s=a.find(".ui-timepicker-selected");return s.length?s.is(":first-child")||(s.removeClass("ui-timepicker-selected"),s.prev().addClass("ui-timepicker-selected"),s.prev().position().top<s.outerHeight()&&a.scrollTop(a.scrollTop()-s.outerHeight())):(a.find("li").each(function(i,t){if(e(t).position().top>0)return s=e(t),!1}),s.addClass("ui-timepicker-selected")),!1;case 40:return 0===(s=a.find(".ui-timepicker-selected")).length?(a.find("li").each(function(i,t){if(e(t).position().top>0)return s=e(t),!1}),s.addClass("ui-timepicker-selected")):s.is(":last-child")||(s.removeClass("ui-timepicker-selected"),s.next().addClass("ui-timepicker-selected"),s.next().position().top+2*s.outerHeight()>a.outerHeight()&&a.scrollTop(a.scrollTop()+s.outerHeight())),!1;case 27:a.find("li").removeClass("ui-timepicker-selected"),n.hide();break;case 9:n.hide();break;default:return!0}}function v(i){var t=e(this),n=t.data("timepicker-list"),a=t.data("timepicker-settings");if(!n||!r(n)||a.disableTextInput)return!0;if("paste"!==i.type&&"cut"!==i.type)switch(i.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:a.typeaheadHighlight?m(t,n):n.hide()}else setTimeout(function(){a.typeaheadHighlight?m(t,n):n.hide()},0)}function T(e){var i=e.data("timepicker-settings"),t=null,n=e.data("timepicker-list").find(".ui-timepicker-selected");return!n.hasClass("ui-timepicker-disabled")&&(n.length&&(t=n.data("time")),null!==t&&("string"!=typeof t&&(t=w(t,i)),h(e,t,"select")),!0)}function b(e,i){e=Math.abs(e);var n,r,a=Math.round(e/60),s=[];return a<60?s=[a,t.mins]:(n=Math.floor(a/60),r=a%60,30==i&&30==r&&(n+=t.decimal+5),s.push(n),s.push(1==n?t.hr:t.hrs),30!=i&&r&&(s.push(r),s.push(t.mins))),s.join(" ")}function w(n,r){if("number"!=typeof n)return null;var a=parseInt(n%60),s=parseInt(n/60%60),o=parseInt(n/3600%24),l=new Date(1970,0,2,o,s,a,0);if(isNaN(l.getTime()))return null;if("function"===e.type(r.timeFormat))return r.timeFormat(l);for(var c,u,p="",m=0;m<r.timeFormat.length;m++)switch(u=r.timeFormat.charAt(m)){case"a":p+=l.getHours()>11?t.pm:t.am;break;case"A":p+=l.getHours()>11?t.PM:t.AM;break;case"g":p+=0===(c=l.getHours()%12)?"12":c;break;case"G":c=l.getHours(),n===i&&(c=r.show2400?24:0),p+=c;break;case"h":0!==(c=l.getHours()%12)&&c<10&&(c="0"+c),p+=0===c?"12":c;break;case"H":c=l.getHours(),n===i&&(c=r.show2400?24:0),p+=c>9?c:"0"+c;break;case"i":p+=(s=l.getMinutes())>9?s:"0"+s;break;case"s":p+=(a=l.getSeconds())>9?a:"0"+a;break;case"\\":m++,p+=r.timeFormat.charAt(m);break;default:p+=u}return p}function y(e,n){if(""===e||null===e)return null;if("object"==typeof e)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds();if("string"!=typeof e)return e;"a"!=(e=e.toLowerCase().replace(/[\s\.]/g,"")).slice(-1)&&"p"!=e.slice(-1)||(e+="m");var r=e.match(/^(([^0-9]*))?([0-9]?[0-9])(\W?([0-5][0-9]))?(\W+([0-5][0-9]))?(([^0-9]*))$/);if(!r)return null;var a=parseInt(1*r[3],10),s=r[2]||r[9],o=a,l=1*r[5]||0,c=1*r[7]||0;if(a<=12&&s){var u=(s=s.trim())==t.pm||s==t.PM;o=12==a?u?12:0:a+(u?12:0)}else if(n){if(3600*a+60*l+c>=i+(n.show2400?1:0)){if(!1===n.wrapHours)return null;o=a%24}}var p=3600*o+60*l+c;if(a<12&&!s&&n&&n._twelveHourTime&&n.scrollDefault){var m=p-n.scrollDefault();m<0&&m>=i/-2&&(p=(p+i/2)%i)}return p}function x(e,t){return e==i&&t.show2400?e:e%i}e.fn.timepicker=function(i){return this.length?n[i]?this.hasClass("ui-timepicker-input")?n[i].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.timepicker"):n.init.apply(this,arguments):this},e.fn.timepicker.defaults={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,durationTime:null,forceRoundTime:!1,listWidth:null,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(e,i){if(null===e)return null;if("number"!=typeof i.step)return e;var t=e%(60*i.step);return(t-=(i.minTime||0)%(60*i.step))>=30*i.step?e+=60*i.step-t:e-=t,x(e,i)},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1,wrapHours:!0}});