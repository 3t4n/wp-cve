!function(){"use strict";var e,t={2748:function(){var e=window.wp.blocks,t=JSON.parse('{"$schema":"https://json.schemastore.org/block.json","apiVersion":2,"name":"blockons/table-of-contents","title":"Blockons Table of Contents","textdomain":"blockons","icon":"heart","category":"blockons-category","keywords":["toc","contents","table","blockons"],"attributes":{"headings":{"type":"array","default":[]},"tocHeading":{"type":"string","default":"Table of Contents"},"tocBefore":{"type":"string","default":"Click the relevant heading to jump to that section."},"tocStyle":{"type":"string","default":"left"},"showNumbers":{"type":"boolean","default":true},"includeH1":{"type":"boolean","default":true},"includeH2":{"type":"boolean","default":true},"includeH3":{"type":"boolean","default":true},"includeH4":{"type":"boolean","default":true},"includeH5":{"type":"boolean","default":true},"includeH6":{"type":"boolean","default":true},"paddingIn":{"type":"number","default":15},"spacing":{"type":"number","default":10}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","viewScript":"file:./toc.js","style":["file:./style-index.css","blockons-fontawesome"]}'),o=window.wp.element,n=window.wp.i18n,l=window.wp.data,a=window.wp.blockEditor,c=window.wp.components;const{name:s}=t;(0,e.registerBlockType)(s,{edit:e=>{const{attributes:{headings:t,tocHeading:s,tocBefore:r,tocStyle:i,showNumbers:d,includeH1:u,includeH2:b,includeH3:m,includeH4:g,includeH5:h,includeH6:p,paddingIn:k,spacing:f},setAttributes:w}=e,y=(0,l.useSelect)((e=>e("core/editor").getEditedPostContent())),[v,C]=(0,o.useState)([]),E=(0,a.useBlockProps)({className:`style-${i}`}),_={h1:u,h2:b,h3:m,h4:g,h5:h,h6:p};let H=0;const N=Object.keys(_).reduce(((e,t)=>(_[t]&&(e[t]=++H),e)),{});return(0,o.useEffect)((()=>{C((()=>{const e=(new DOMParser).parseFromString(y,"text/html"),t=Object.entries(_).reduce(((e,t)=>{let[o,n]=t;return n&&e.push(o),e}),[]).join(", "),o=e.querySelectorAll(t);return Array.from(o).map(((e,t)=>({content:e.textContent,level:e.tagName.toLowerCase(),padding:(N[e.tagName.toLowerCase()]-1)*k})))})())}),[y,_]),(0,o.useEffect)((()=>{w({headings:v})}),[v]),console.log("headings",t),(0,o.createElement)("div",E,(0,o.createElement)(a.InspectorControls,null,(0,o.createElement)(c.PanelBody,{title:(0,n.__)("Table of Contents Settings","blockons")},(0,o.createElement)(c.ToggleControl,{label:(0,n.__)("Show Title","blockons"),checked:s,onChange:e=>{w({tocHeading:e})}}),(0,o.createElement)(c.ToggleControl,{label:(0,n.__)("Show Description","blockons"),checked:r,onChange:e=>{w({tocBefore:e})}}),(0,o.createElement)("div",{className:"blockons-divider"}),(0,o.createElement)(c.ToggleControl,{label:(0,n.__)("Show Numbers","blockons"),checked:d,onChange:e=>{w({showNumbers:e})}}),(0,o.createElement)("div",{className:"blockons-divider"}),(0,o.createElement)(c.ToggleControl,{label:(0,n.__)("Show H1 Headings","blockons"),checked:u,onChange:e=>{w({includeH1:e})}}),(0,o.createElement)(c.ToggleControl,{label:(0,n.__)("Show H2 Headings","blockons"),checked:b,onChange:e=>{w({includeH2:e})}}),(0,o.createElement)(c.ToggleControl,{label:(0,n.__)("Show H3 Headings","blockons"),checked:m,onChange:e=>{w({includeH3:e})}}),(0,o.createElement)(c.ToggleControl,{label:(0,n.__)("Show H4 Headings","blockons"),checked:g,onChange:e=>{w({includeH4:e})}}),(0,o.createElement)(c.ToggleControl,{label:(0,n.__)("Show H5 Headings","blockons"),checked:h,onChange:e=>{w({includeH5:e})}}),(0,o.createElement)(c.ToggleControl,{label:(0,n.__)("Show H6 Headings","blockons"),checked:p,onChange:e=>{w({includeH6:e})}})),(0,o.createElement)(c.PanelBody,{title:(0,n.__)("Table of Contents Design","blockons")},(0,o.createElement)(c.SelectControl,{label:(0,n.__)("Style","blockons"),value:i,options:[{label:(0,n.__)("Style One","blockons"),value:"one"},{label:(0,n.__)("Style Two","blockons"),value:"two"},{label:(0,n.__)("Style Three","blockons"),value:"three"}],onChange:e=>{w({tocStyle:e})}}),(0,o.createElement)(c.RangeControl,{label:(0,n.__)("Item Inwards Padding","blockons"),value:k,onChange:e=>{w({paddingIn:void 0===e?0:e})},min:0,max:50,step:1}),(0,o.createElement)(c.RangeControl,{label:(0,n.__)("Spacing","blockons"),value:f,onChange:e=>{w({spacing:void 0===e?10:e})},min:0,max:50,step:1}))),(0,o.createElement)("div",{className:"blockons-toc"},s&&(0,o.createElement)(a.RichText,{tagName:"p",value:s,className:"blockons-toc-title",onChange:e=>w({tocHeading:e}),allowedFormats:["core/bold","core/italic"],placeholder:(0,n.__)("Table of Contents","blockons"),disableLineBreaks:!0}),r&&(0,o.createElement)(a.RichText,{tagName:"p",value:r,className:"blockons-toc-desc",onChange:e=>w({tocBefore:e}),allowedFormats:["core/bold","core/italic"],placeholder:(0,n.__)("Click the relevant heading to jump to that section.","blockons"),disableLineBreaks:!0}),(0,o.createElement)("ul",{className:"blockons-toc-ul"},t.map(((e,t)=>(0,o.createElement)("li",{key:t,className:"blockons-toc-li",style:{paddingLeft:`${e.padding}px`,marginBottom:`${f}px`}},d&&(0,o.createElement)("span",{className:"blockons-toc-number"},t<10?`0${t+1}`:t+1),(0,o.createElement)("a",{href:`#${e.anchor}`,className:"blockons-toc-link"},e.content)))))))},save:e=>{let{attributes:t}=e;const n=a.useBlockProps.save({className:`style-${t.tocStyle}`});return(0,o.createElement)("div",n,(0,o.createElement)("div",{className:"blockons-toc"},t.tocHeading&&(0,o.createElement)(a.RichText.Content,{tagName:"p",value:t.tocHeading,className:"blockons-toc-title"}),t.tocBefore&&(0,o.createElement)(a.RichText.Content,{tagName:"p",value:t.tocBefore,className:"blockons-toc-desc"}),(0,o.createElement)("ul",{className:"blockons-toc-ul"},t.headings.map(((e,n)=>(0,o.createElement)("li",{key:n,className:"blockons-toc-li",style:{paddingLeft:`${e.padding}px`,marginBottom:`${t.spacing}px`}},t.showNumbers&&(0,o.createElement)("span",{className:"blockons-toc-number"},n<10?`0${n+1}`:n+1),(0,o.createElement)("a",{href:`#${e.anchor}`,className:"blockons-toc-link"},e.content)))))))}})}},o={};function n(e){var l=o[e];if(void 0!==l)return l.exports;var a=o[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=function(t,o,l,a){if(!o){var c=1/0;for(d=0;d<e.length;d++){o=e[d][0],l=e[d][1],a=e[d][2];for(var s=!0,r=0;r<o.length;r++)(!1&a||c>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[r])}))?o.splice(r--,1):(s=!1,a<c&&(c=a));if(s){e.splice(d--,1);var i=l();void 0!==i&&(t=i)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,l,a]},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={35:0,678:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,a,c=o[0],s=o[1],r=o[2],i=0;if(c.some((function(t){return 0!==e[t]}))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(r)var d=r(n)}for(t&&t(o);i<c.length;i++)a=c[i],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},o=self.webpackChunkblockons=self.webpackChunkblockons||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var l=n.O(void 0,[678],(function(){return n(2748)}));l=n.O(l)}();