jQuery(document).ready(function($){"use strict";for(let a in window.viWecInforIcons=[],viWecParams.infor_icons)for(let c in viWecParams.infor_icons[a])viWecInforIcons.push({icon:viWecParams.infor_icons[a][c].slug,text:viWecParams.infor_icons[a][c].text,value:`<img style="vertical-align: sub" src='${viWecParams.infor_icons[a][c].id}'>`});for(let b in window.viWecSocialIcons=[],viWecParams.social_icons)for(let d in viWecParams.social_icons[b])viWecSocialIcons.push({icon:viWecParams.social_icons[b][d].slug,text:viWecParams.social_icons[b][d].text,value:`<img style="vertical-align: sub" src='${viWecParams.social_icons[b][d].id}'>`});window.viWecRgb2hex=b=>{if(b){let a=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);if(!a||4!==a.length)return b;if(3!==a.input.split(",").length)return"";{let c="#";return c+=("0"+parseInt(a[1],10).toString(16)).slice(-2),c+=("0"+parseInt(a[2],10).toString(16)).slice(-2),c+=("0"+parseInt(a[3],10).toString(16)).slice(-2)}}},window.Input={init(a){},onChange(a,b){a.data&&a.data.element&&a.data.element.trigger("propertyChange",[$(this).val(),this])},renderTemplate:(a,b)=>viWecTmpl("emtmpl-input-"+a,b),setValue(a){$("input",this.element).val(a)},render(d,b,c){if(this.element=$(this.renderTemplate(d,b)),this.events)for(let a in this.events){let e=this.events[a][0],f=this[this.events[a][1]],g=this.events[a][2];this.element.on(e,g,{element:this.element,input:this},f)}return"function"==typeof c&&c(b,this.element),this.element}},window.TextInput=$.extend({},Input,{events:[["keyup","onChange","input"],],init(b){let a=this.render("textinput",b),c,d=$(a).find(".emtmpl-quick-shortcode-list");return a.on("focusout","input",function(){c=this.selectionStart}),a.one("click",".emtmpl-quick-shortcode",()=>{d.append(viWecShortcodeListValue)}),a.on("click",".emtmpl-quick-shortcode",function(){$(".emtmpl-quick-shortcode-list").not(d).hide(),d.toggle()}),a.on("click","li",function(){let e=$(this).text(),b=a.find("input").val(),d;if(""!==c){let f=b.substr(0,c),g=b.substr(c);d=f+e+g}else d=b+e;a.find("input").val(d).keyup()}),a}}),window.TextareaInput=$.extend({},Input,{events:[["keyup","onChange","textarea"],],setValue(a){$("textarea",this.element).val(a)},init(a){return this.render("textareainput",a)}}),window.CheckboxInput=$.extend({},Input,{onChange(a,b){a.data&&a.data.element&&a.data.element.trigger("propertyChange",[this.checked,this])},setValue(a){"true"===a&&$("input",this.element).prop("checked",!0)},events:[["change","onChange","input"],],init(a){return this.render("checkboxinput",a)}}),window.SelectInput=$.extend({},Input,{events:[["change","onChange","select"],],setValue(a){$("select",this.element).val(a)},init(a){return this.render("select",a)}}),window.SelectGroupInput=$.extend({},Input,{events:[["change","onChange","select"],],setValue(a){$("select",this.element).val(a)},init(a){return this.render("select-group",a)}}),window.Select2Input=$.extend({},Input,{events:[["change","onChange","select"],],setValue(a){a=a.split(","),$("select",this.element).val(a)},init(a){return this.render("select2",a)}}),window.LinkInput=$.extend({},TextInput,{events:[["change","onChange","input"],],init(a){return this.render("textinput",a)}}),window.RangeInput=$.extend({},Input,{events:[["change","onChange","input"],],init(a){return this.render("rangeinput",a)},setValue(a){$("input",this.element).val(parseInt(a))}}),window.NumberInput=$.extend({},Input,{events:[["change keyup","onChange","input"],],init(a){return this.render("numberinput",a)},setValue(a){$("input",this.element).val(parseInt(a))},onChange(a){let b=a.target.max&&parseInt(this.value)>=parseInt(a.target.max)?parseInt(a.target.max):this.value;$(a.target).val(b),a.data&&a.data.element&&a.data.element.trigger("propertyChange",[b,this])}}),window.DateInput=$.extend({},Input,{events:[["change keyup","onChange","input"],],init(a){return this.render("dateinput",a)}}),window.CssUnitInput=$.extend({},Input,{number:0,unit:"px",events:[["change","onChange","select"],["change keyup mouseup","onChange","input"],],onChange(b){if(b.data&&b.data.element){let a=b.data.input;""!=this.value&&(a[this.name]=this.value),""==a.unit&&(a.unit="px");let c="";"auto"==a.unit?($(b.data.element).addClass("auto"),c=a.unit):($(b.data.element).removeClass("auto"),c=a.number+a.unit),b.data.element.trigger("propertyChange",[c,this])}},setValue(a){this.number=parseInt(a),this.unit=a.replace(this.number,""),"auto"==this.unit&&$(this.element).addClass("auto"),$("input",this.element).val(this.number),$("select",this.element).val(this.unit)},init(a){return this.render("cssunitinput",a)}}),window.ColorInput=$.extend({},Input,{events:[["change","onChange","input"],],setValue(a){$("input",this.element).val(viWecRgb2hex(a)),$(".emtmpl-color-picker",this.element).css("background-color",viWecRgb2hex(a))},init(b){let a=this.render("colorinput",b,function(b,a){$(".emtmpl-clear",a).on("click",function(){$(".emtmpl-color-picker",a).css("background-color","transparent").val("").change()})});return $(".emtmpl-color-picker",a).iris({change(b,a){$(this).val(a.color.toString()).trigger("change"),$(this).css("background-color",a.color.toString())}}).on("click",function(e){let b=$("#emtmpl-control-panel"),c=a.offset().left-b.offset().left>100?0:"",d=(a.offset().top-b.offset().top)/window.innerHeight>.6?"32px":"";$(".iris-picker").hide(),a.find(".iris-picker").css({right:c,bottom:d}).show()}),$("body").on("click",function(a){$(a.target).is(".emtmpl-color-picker, .iris-picker, .iris-picker-inner, .iris-square")||$(".iris-picker").hide()}),a},onChange(a,c){if(a.data&&a.data.element){let b=this.value?this.value:"transparent";a.data.element.trigger("propertyChange",[b,this])}}}),window.TextEditor=$.extend({},Input,{events:[["change","onChange","textarea"],],setValue(a){$("textarea",this.element).val(a)},onChange(a,b){a.data&&a.data.element&&a.data.element.trigger("propertyChange",[$(this).val(),this])},init(a){return $(tinyMCE.editors).each(function(){tinyMCE.remove(this)}),this.render("texteditorinput",a)},subInit(a){wp.editor.initialize("emtmpl-text-editor",{tinymce:{mode:"exact",selector:"#emtmpl-text-editor",content_style:"body {background:#eeeeee; font-family: helvetica, arial, sans-serif;} #tinymce a{text-decoration: none;}",theme:"modern",height:"auto",menubar:!1,statusbar:!1,relative_urls:!1,remove_script_host:!1,convert_urls:!1,plugins:["link textcolor colorpicker image"],toolbar:["bold italic underline | alignleft aligncenter alignright alignjustify| link image","fontsizeselect forecolor backcolor","viWecInforIcons viWecSocialIcons shortcode fontselect"],fontsize_formats:"10px 11px 12px 13px 14px 15px 16px 17px 18px 19px 20px 22px 24px 26px 28px 30px 35px 40px 50px 60px",setup:function(a){a.addButton("shortcode",{type:"listbox",text:"Shortcode",icon:!1,onselect:function(b){a.insertContent(this.value())},values:viWecShortcodeList}),a.addButton("viWecInforIcons",{type:"listbox",text:"Information icons",icon:!1,onselect:function(b){a.insertContent(this.value())},values:viWecInforIcons}),a.addButton("viWecSocialIcons",{type:"listbox",text:"Social icons",icon:!1,onselect:function(b){a.insertContent(this.value())},values:viWecSocialIcons}),a.on("keyup mouseup change",function(b){$("#emtmpl-text-editor").val(a.getContent()).change()})}},quicktags:!0}),a.on("keyup",function(){$("iframe").contents().find('#tinymce[data-id="emtmpl-text-editor"]').html($(this).html())})}}),window.BgImgInput=$.extend({},Input,{events:[["click","onChange","button"],["click","clear",".emtmpl-clear"]],init(a){return this.render("bgimginput",a)},onChange(a,b){if(a.data&&a.data.element){let c=wp.media({title:"Select Image",multiple:!1}).open().on("select",function(d){let b=c.state().get("selection").first().toJSON();a.data.element.trigger("propertyChange",[`url(${b.url})`,this])})}},clear(a,b){a.data.element.trigger("propertyChange",["url()",this])}}),window.ImgInput=$.extend({},Input,{events:[["click","onChange","button"],["click","clear",".emtmpl-clear"]],init(a){return this.render("bgimginput",a)},onChange(a,b){if(a.data&&a.data.element){let c=wp.media({title:"Select Image",multiple:!1}).open().on("select",function(d){let b=c.state().get("selection").first().toJSON();a.data.element.trigger("propertyChange",[b.url,this])})}},clear(a,b){a.data.element.trigger("propertyChange",["",this])}}),window.FileUploadInput=$.extend({},TextInput,{events:[["blur","onChange","input"],],init(a){return this.render("textinput",a)}}),window.RadioInput=$.extend({},Input,{onChange(a,b){a.data&&a.data.element&&a.data.element.trigger("propertyChange",[this.value,this])},events:[["change","onChange","input"],],setValue(a){$("input",this.element).removeAttr("checked"),a&&$("input[value="+a+"]",this.element).attr("checked","true").prop("checked",!0)},init(a){return this.render("radioinput",a)}}),window.RadioButtonInput=$.extend({},RadioInput,{events:[["change","onChange","input"],],init(a){return this.render("radiobuttoninput",a)}}),window.ToggleInput=$.extend({},TextInput,{onChange(a,b){a.data&&a.data.element&&a.data.element.trigger("propertyChange",[this.checked?this.getAttribute("data-value-on"):this.getAttribute("data-value-off"),this])},events:[["change","onChange","input"],],init(a){return this.render("toggle",a)}}),window.ValueTextInput=$.extend({},TextInput,{events:[["blur","onChange","input"],],init(a){return this.render("textinput",a)}}),window.GridLayoutInput=$.extend({},TextInput,{events:[["blur","onChange","input"],],init(a){return this.render("textinput",a)}}),window.ProductsInput=$.extend({},TextInput,{events:[["blur","onChange","input"],],init(a){return this.render("textinput",a)}}),window.GridInput=$.extend({},Input,{events:[["change","onChange","select"],["click","onChange","button"],],setValue(a){$("select",this.element).val(a)},init(a){return this.render("grid",a)}}),window.TextValueInput=$.extend({},Input,{events:[["blur","onChange","input"],["click","onChange","button"],],init(a){return this.render("textvalue",a)}}),window.ButtonInput=$.extend({},Input,{events:[["click","onChange","button"],],setValue(a){$("button",this.element).val(a)},init(a){return this.render("button",a)}}),window.SectionInput=$.extend({},Input,{events:[["click","onChange","button"],],setValue:a=>!1,init(a){return this.render("sectioninput",a)}}),window.ListInput=$.extend({},Input,{events:[["change","onChange","select"],],setValue(a){$("select",this.element).val(a)},init(a){return this.render("listinput",a)}}),window.AutocompleteInput=$.extend({},Input,{events:[["autocomplete.change","onAutocompleteChange","input"],],onAutocompleteChange(a,b,c){a.data&&a.data.element&&a.data.element.trigger("propertyChange",[b,this])},init(a){return this.element=this.render("textinput",a),$("input",this.element).autocomplete(a.url),this.element}}),window.AutocompleteList=$.extend({},Input,{events:[["autocompletelist.change","onAutocompleteChange","input"],],onAutocompleteChange(a,b,c){a.data&&a.data.element&&a.data.element.trigger("propertyChange",[b,this])},setValue(a){$("input",this.element).data("autocompleteList").setValue(a)},init(a){return this.element=this.render("textinput",a),$("input",this.element).autocompleteList(a),this.element}})})