!function(r){var o=r(".aos-reindex-button"),t=1,i=0,e=!1;function s(e){o.text("Processing, please be patient ... "+e+"%")}function a(){alert("Successfully indexed "+i+" orders!"),d()}function d(){i=0,e=!(t=1),o.text("Re-index orders"),o.removeAttr("disabled")}o.on("click",function(){o.attr("disabled","disabled"),e=!0,s(0),function o(n){var e={action:"wc_osa_reindex",page:t,_wpnonce:n};r.post(ajaxurl,e,function(e){return void 0!==e.success&&!1===e.success?(alert("An error occurred: "+e.data.message),void d()):void 0===e.recordsPushedCount?(alert("You should first configure your Algolia account settings."),void d()):(i+=e.recordsPushedCount,progress=Math.round(t/e.totalPagesCount*100),s(progress),void(!0!==e.finished?(t++,o(n)):a()))}).fail(function(e){alert("An error occurred. Please try again.")})}(o.data("nonce"))}),r(window).on("beforeunload",function(){if(!0===e)return"If you leave now, re-indexing will be aborted."})}(jQuery);