{"version":3,"file":"public/dist/main.min.js","mappings":"mBAEA,MAAMA,EAAIC,OAEVD,EAAGE,UAAWC,OAAO,WACpBH,EAAG,qBAAsBI,GAAI,QAAS,KAAK,SAAUC,GACpDA,EAAEC,iBAEF,MACMC,EADQP,EAAGQ,MACCC,KAAM,QAExB,IAAIC,EAAUC,EAGdN,EAAEO,eAAeC,UAAUC,SAAWC,IAChCA,EAASC,WAAY,qBACzBN,EAAWK,EAASE,MAAO,IAC3BN,EAAoB,iBAAiBD,IACtC,IAIDV,EAAEkB,IAAKX,GAAOY,IACb,MAAMC,EAAQpB,EAAGmB,GAGXE,EAAaD,EAAME,KAAMX,GAAmBY,WAC5CC,EAAgBJ,EAAME,KAAO,mBAAmBZ,KAAca,WAGpEvB,EAAGW,GAAmBc,QAAQC,OAAQL,GAGtCrB,EAAGK,EAAEO,gBAAiBa,QAAQC,OAAQF,EAAe,GAEvD,IAE2BxB,EAAG,mBACX2B,MAAM,WACxB,MAAMC,EAAa5B,EAAGQ,MAChBqB,EAAYD,EAAWN,KAAM,iBAC7BQ,EAAW9B,EAAG,8CACd+B,EAAWH,EAAWN,KAAM,kBAGlCd,KAAKK,UAAUC,SAAWC,IACpBA,EAASC,WAAY,oBACzBc,EAASE,SAAUjB,EACpB,IAIDc,EAAUI,WAAY,SAEtBH,EAASJ,OAAQG,GACjBC,EAASJ,OAAQK,GAEjBH,EAAWM,YAAaJ,EACzB,IAEA9B,EAAG,2BAA4BI,GAAI,QAAS,iBAAiB,SAAUC,GACtEA,EAAEC,iBACF,MAAM6B,EAAQnC,EAAGQ,MAGjB,IAAK,IAAS2B,EAAMhB,KAAM,iBACzB,OAIDgB,EAAMhB,KAAM,iBAAiB,GAE7B,MAAMZ,EAAM4B,EAAM1B,KAAM,QAClBsB,EAAW/B,EAAGK,EAAEO,gBAAiBU,KAAM,kBAE7C,IAAIZ,EAAUC,EAGdoB,EAASK,IAAK,UAAW,UAGzB/B,EAAEO,eAAeC,UAAUC,SAAWC,IAChCA,EAASC,WAAY,qBACzBN,EAAWK,EAASE,MAAO,IAC3BN,EAAoB,iBAAiBD,IACtC,IAIDV,EAAEkB,IAAKX,GAAOY,IACb,MAAMC,EAAQpB,EAAGmB,GAGXE,EAAaD,EAAME,KAAMX,GAAmBY,WAGlDvB,EAAGW,GAAmBe,OAAQL,GAG9B,MAAMgB,EAAcjB,EAAME,KAAO,mBAAmBZ,mBAA4BD,KAAM,QACjF4B,EACJF,EAAM1B,KAAM,OAAQ4B,GAGpBF,EAAMG,SAIPP,EAASK,IAAK,UAAW,IAEzBD,EAAMhB,KAAM,iBAAiB,EAAO,GAEtC,GACD,G","sources":["webpack://lcp-ajax/./public/js/main.js"],"sourcesContent":["import '../sass/main.scss';\n\nconst $ = jQuery;\n\n$( document ).ready( function() {\n\t$( '.lcpax-pagination' ).on( 'click', 'a', function( e ) {\n\t\te.preventDefault();\n\n\t\tconst $this = $( this );\n\t\tconst url = $this.attr( 'href' );\n\n\t\tlet instance, instanceSelector;\n\n\t\t// Get LCP instance info from the class that was added in PHP.\n\t\te.delegateTarget.classList.forEach( ( cssClass ) => {\n\t\t\tif ( cssClass.startsWith( 'lcpax-instance-' ) ) {\n\t\t\t\tinstance = cssClass.slice( 15 );\n\t\t\t\tinstanceSelector = `#lcp_instance_${ instance }`;\n\t\t\t}\n\t\t} );\n\n\t\t// TODO: failure handler.\n\t\t$.get( url, ( data ) => {\n\t\t\tconst $data = $( data );\n\n\t\t\t// Extract new entries and pagination links from fetched HTML.\n\t\t\tconst newEntries = $data.find( instanceSelector ).children();\n\t\t\tconst newPagination = $data.find( `.lcpax-instance-${ instance }` ).children();\n\n\t\t\t// Replace old entries with fetched ones.\n\t\t\t$( instanceSelector ).empty().append( newEntries );\n\n\t\t\t// Replace pagination.\n\t\t\t$( e.delegateTarget ).empty().append( newPagination );\n\t\t} );\n\t} );\n\n\tconst loadmorePaginators = $( '.lcpax-loadmore' );\n\tloadmorePaginators.each( function() {\n\t\tconst $paginator = $( this );\n\t\tconst $nextlink = $paginator.find( '.lcp_nextlink' );\n\t\tconst $wrapper = $( '<div class=\"lcpax-nextlink-wrapper\"></div>' );\n\t\tconst $spinner = $paginator.find( '.lcpax-spinner' );\n\n\t\t// Add the instance class to the wrapper.\n\t\tthis.classList.forEach( ( cssClass ) => {\n\t\t\tif ( cssClass.startsWith( 'lcpax-instance-' ) ) {\n\t\t\t\t$wrapper.addClass( cssClass );\n\t\t\t}\n\t\t} );\n\n\t\t// Remove the title attr, should be removed from LCP anyway.\n\t\t$nextlink.removeAttr( 'title' );\n\n\t\t$wrapper.append( $nextlink );\n\t\t$wrapper.append( $spinner );\n\n\t\t$paginator.replaceWith( $wrapper );\n\t} );\n\n\t$( '.lcpax-nextlink-wrapper' ).on( 'click', '.lcp_nextlink', function( e ) {\n\t\te.preventDefault();\n\t\tconst $this = $( this );\n\n\t\t// Check if nothing is already being loaded.\n\t\tif ( true === $this.data( 'lcpax-loading' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Flag the link so that it remains inactive until loading is finished.\n\t\t$this.data( 'lcpax-loading', true );\n\n\t\tconst url = $this.attr( 'href' );\n\t\tconst $spinner = $( e.delegateTarget ).find( '.lcpax-spinner' );\n\n\t\tlet instance, instanceSelector;\n\n\t\t// Show the spinner.\n\t\t$spinner.css( 'display', 'inline' );\n\n\t\t// Get LCP instance info from the class that was added in PHP.\n\t\te.delegateTarget.classList.forEach( ( cssClass ) => {\n\t\t\tif ( cssClass.startsWith( 'lcpax-instance-' ) ) {\n\t\t\t\tinstance = cssClass.slice( 15 );\n\t\t\t\tinstanceSelector = `#lcp_instance_${ instance }`;\n\t\t\t}\n\t\t} );\n\n\t\t// TODO: failure handler.\n\t\t$.get( url, ( data ) => {\n\t\t\tconst $data = $( data );\n\n\t\t\t// Extract new entries from fetched HTML.\n\t\t\tconst newEntries = $data.find( instanceSelector ).children();\n\n\t\t\t// Append new entries.\n\t\t\t$( instanceSelector ).append( newEntries );\n\n\t\t\t// Update the link.\n\t\t\tconst nextlinkUrl = $data.find( `.lcpax-instance-${ instance } .lcp_nextlink` ).attr( 'href' );\n\t\t\tif ( nextlinkUrl ) {\n\t\t\t\t$this.attr( 'href', nextlinkUrl );\n\t\t\t} else {\n\t\t\t\t// We have hit the last page and there is no next link.\n\t\t\t\t$this.remove();\n\t\t\t}\n\n\t\t\t// Hide the spinner.\n\t\t\t$spinner.css( 'display', '' );\n\t\t\t// Unflag the link.\n\t\t\t$this.data( 'lcpax-loading', false );\n\t\t} );\n\t} );\n} );\n"],"names":["$","jQuery","document","ready","on","e","preventDefault","url","this","attr","instance","instanceSelector","delegateTarget","classList","forEach","cssClass","startsWith","slice","get","data","$data","newEntries","find","children","newPagination","empty","append","each","$paginator","$nextlink","$wrapper","$spinner","addClass","removeAttr","replaceWith","$this","css","nextlinkUrl","remove"],"sourceRoot":""}