function viwpvs_frontend_init(){jQuery(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),jQuery(".variations_form:not(.vi_wpvs_variation_form),.variations_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),vi_wpvs_frontend_param.wjecf_wc_discounts&&vi_wpvs_frontend_param.is_checkout&&jQuery(".variations").each(function(){jQuery(this).addClass("vi_wpvs_variation_form vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()})}jQuery(document).ready(function(i){"use strict";jQuery(document).on("click",".vi-wpvs-variation-style",function(i){jQuery(".vi-wpvs-variation-wrap-option-available").remove(),jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show"),i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()}),jQuery(document).on("click","body",function(i){jQuery(".vi-wpvs-variation-wrap-option-available").remove(),jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show")}),jQuery(document).on("click",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(i){if(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),jQuery(this).hasClass("vi-wpvs-option-wrap-disable"))return!1;let t=jQuery(".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap").index(jQuery(this));jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show").find(".vi-wpvs-option-wrap").eq(t).trigger("click"),jQuery(".vi-wpvs-variation-wrap-option-available").remove()}),jQuery(document).on("mouseenter",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(i){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).hasClass("vi-wpvs-product-link")||jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-hover")}),jQuery(document).on("mouseleave",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(i){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default")}),jQuery(document.body).on("vi_wpvs_variation_form",function(){jQuery(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()})}),viwpvs_frontend_init(),jQuery(document).on("woodmart-quick-view-displayed",function(i,t,a){viwpvs_frontend_init()});let t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.addEventListener("load",function(){this.responseURL.includes("/wp-admin/admin-ajax.php")&&viwpvs_frontend_init()}),t.apply(this,arguments)},jQuery(document).on("ajaxComplete",function(i,t,a){return viwpvs_frontend_init(),!1})}),jQuery(window).on("load",function(){"use strict";viwpvs_frontend_init()});let vi_wpvs_frontend=function(i){this.form=i,this.variationData=i.data("product_variations"),this.init()};function viwpvs_to_string(i){return i?i.toString():""}vi_wpvs_frontend.prototype.init=function(){let i=this,t=this.form;this.variationData&&t.find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").length&&t.find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").length===t.find(".vi-wpvs-select-attribute select").length&&(t.addClass("vi_wpvs_variation_form_has_selected"),t.on("reset_data",function(){t.hasClass("vi_wpvs_variation_form_has_selected")&&(t.removeClass("vi_wpvs_variation_form_has_selected"),i.hide_variation())})),t.on("woocommerce_update_variation_values",function(){i.select_variation_item()}),i.design_variation_item(),t.find(".vi-wpvs-variation-wrap-select-wrap").length&&t.find(".vi-wpvs-variation-wrap-select-wrap").each(function(i,t){jQuery(t).parent().parent().parent().css({width:"100%"});let a,s;(a=jQuery(t).find(".vi-wpvs-variation-wrap-option")).attr("data-offset_height")||a.attr("data-offset_height",a.outerHeight()).removeClass("vi-wpvs-select-hidden").addClass("vi-wpvs-hidden"),s=jQuery(t).find(".vi-wpvs-variation-button-select"),a.find(".vi-wpvs-option-wrap-selected").length&&s.find("span").html(a.find(".vi-wpvs-option-wrap-selected .vi-wpvs-option-select").html()),s.on("click",function(i){if(i.preventDefault(),i.stopPropagation(),a.hasClass("vi-wpvs-variation-wrap-option-show"))jQuery(".vi-wpvs-variation-wrap-option-available").remove(),a.removeClass("vi-wpvs-variation-wrap-option-show");else{let s,o,v,e;s=parseFloat(a.attr("data-offset_height")),o=jQuery(window).scrollTop(),v=jQuery(window).outerHeight(),e=jQuery(this).offset().top-o,jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show"),a.addClass("vi-wpvs-variation-wrap-option-show"),jQuery(".vi-wpvs-variation-wrap-option-available").remove();let n=jQuery(t).closest(".vi-wpvs-variation-wrap").clone();n.find(".vi-wpvs-variation-button-select").remove(),n.find(".vi-wpvs-variation-wrap-option").removeClass("vi-wpvs-hidden vi-wpvs-variation-wrap-option-show"),n.addClass("vi-wpvs-variation-wrap-option-available").css({width:jQuery(this).outerWidth(),left:jQuery(this).offset().left}),o>e||o<s||v>e+s+40?(n.toggleClass("vi-wpvs-variation-wrap-select-bottom"),n.css({top:jQuery(this).offset().top+jQuery(this).outerHeight()})):(n.toggleClass("vi-wpvs-variation-wrap-select-top"),n.css({top:jQuery(this).offset().top-a.outerHeight()})),jQuery("body").append(n)}})}),t.find(".vi-wpvs-option-wrap").each(function(i,a){let s,o,v,e;0===(o=(s=jQuery(a).closest(".vi-wpvs-variation-wrap-wrap")).find("select.vi-wpvs-select-attribute")).length&&(o=s.find(".vi-wpvs-select-attribute select").eq(0)),o.find("option").removeClass("vi-wpvs-option-disabled"),jQuery(a).on("mouseenter",function(){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-hover")}).on("mouseleave",function(){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default")}).on("click",function(i){if(i.stopPropagation(),jQuery(this).hasClass("vi-wpvs-option-wrap-disable"))return i.preventDefault(),i.stopPropagation(),!1;jQuery(this).parent().hasClass("vi-wpvs-variation-wrap-radio")||(i.preventDefault(),i.stopPropagation()),jQuery(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),t.find(".reset_variations").removeClass("vi-wpvs-hidden"),s.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default"),s.find(".vi-wpvs-variation-wrap").hasClass("vi-wpvs-variation-wrap-select")&&s.find(".vi-wpvs-variation-button-select >span ").html(jQuery(this).find(".vi-wpvs-option-select").html()),jQuery(this).find(".vi-wpvs-option-radio").length>0&&(s.find(".vi-wpvs-option-radio").prop("checked",!1),jQuery(this).find(".vi-wpvs-option-radio").prop("checked",!0),jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),v=viwpvs_to_string(o.val()),(e=viwpvs_to_string(jQuery(this).data("attribute_value")))!==v?(jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"),o.val(e).trigger("change")):jQuery(this).parent().hasClass("vi-wpvs-variation-wrap-radio")||(t.hasClass("vi_wpvs_loop_variation_form")?t.data("wpvs_double_click")?o.val("").trigger("change"):jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"):s.data("wpvs_double_click")?o.val("").trigger("change"):jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),i.stopPropagation()})}),t.find("select:not(.vi-wpvs-select-attribute):not(.vi-wpvs-variation-style-select)").on("change",function(){setTimeout(function(){i.select_variation_item()},500)}),t.find(".reset_variations").on("click",function(){i.select_variation_item(),i.hide_variation()})},vi_wpvs_frontend.prototype.design_variation_item=function(){let i=this.form;i.find(".vi-wpvs-variation-wrap-wrap").each(function(){let i=jQuery(this),t=i.parent().parent();i.parent().addClass("vi-wpvs-variation-style-content"),i.find(`div.vi-wpvs-select-attribute select[data-attribute_name="${i.data("wpvs_attribute_name")}"]`).addClass("vi-wpvs-select-attribute"),vi_wpvs_frontend_param.wjecf_wc_discounts&&vi_wpvs_frontend_param.is_checkout||t.addClass(i.data("display_type")),i.data("wpvs_attr_title")||t.find(".label").addClass("vi-wpvs-hidden")}),i.find(".vi-wpvs-option.vi-wpvs-option-color").each(function(i,t){let a=jQuery(t).data("option_color");jQuery(t).css({background:a})}),i.find(".vi-wpvs-variation-wrap-wrap").removeClass("vi-wpvs-hidden")},vi_wpvs_frontend.prototype.select_variation_item=function(){let i=this.form,t=this.variationData;i.find(".vi-wpvs-label-selected").addClass("vi-wpvs-hidden"),i.find(".vi-wpvs-option-wrap-out-of-stock").removeClass("vi-wpvs-option-wrap-out-of-stock"),i.find(".vi-wpvs-variation-wrap-wrap").each(function(a,s){let o=jQuery(this);if(o.data("hide_outofstock")){let v=jQuery(s).find("select option:not(.vi-wpvs-option-disabled)").map(function(){return jQuery(this).val()});jQuery(s).find(".vi-wpvs-option-wrap:not(.vi-wpvs-product-link)").each(function(i,t){let a=viwpvs_to_string(jQuery(t).data("attribute_value"));jQuery.inArray(a,v)>-1?jQuery(t).removeClass("vi-wpvs-option-wrap-disable"):jQuery(t).removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default vi-wpvs-option-wrap-disable")})}else{let e=jQuery(s).find("select option:not(.vi-wpvs-option-disabled)").map(function(){return jQuery(this).val()});if(jQuery(s).find(".vi-wpvs-option-wrap:not(.vi-wpvs-product-link)").each(function(i,t){let a=viwpvs_to_string(jQuery(t).data("attribute_value"));jQuery.inArray(a,e)>-1?jQuery(t).removeClass("vi-wpvs-hidden"):jQuery(t).removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default vi-wpvs-hidden")}),t){let n="viwpvs_default"===o.data("swatch_type")?o.find(`select[name="${o.data("wpvs_attribute_name")}"]`):o.find("select.vi-wpvs-select-attribute"),p=viwpvs_to_string(n.data("attribute_name")),r=n.val();if(!o.hasClass("vi-wpvs-option-wrap-out-of-stock-attribute-checked")&&(o.find(".vi-wpvs-variation-wrap").find(".vi-wpvs-option-wrap").each(function(){let i=jQuery(this),a=viwpvs_to_string(i.data("attribute_value"));if(a){let s=0,o=0;for(let v in t)if(t.hasOwnProperty(v)){let e=t[v];null!==e.attributes&&void 0!==e.attributes&&(""===e.attributes[p]?(s++,(e.hasOwnProperty("is_purchasable")&&!e.is_purchasable||e.hasOwnProperty("is_in_stock")&&!e.is_in_stock||e.hasOwnProperty("viwpvs_not_available"))&&o++):viwpvs_to_string(e.attributes[p])===a&&(s++,e.hasOwnProperty("viwpvs_not_available")&&o++))}s===o&&i.addClass("vi-wpvs-option-wrap-out-of-stock-attribute")}}),o.addClass("vi-wpvs-option-wrap-out-of-stock-attribute-checked")),r){for(let w in t)if(t.hasOwnProperty(w)){let l=t[w];if(l.attributes[p]===r&&l.hasOwnProperty("viwpvs_not_available"))for(let d in l.attributes){let c=l.attributes[d];d!==p&&i.find(`.vi-wpvs-variation-wrap[data-attribute="${d}"]`).find(".vi-wpvs-option-wrap").each(function(){let i=jQuery(this);if(!i.hasClass("vi-wpvs-option-wrap-out-of-stock-attribute")&&!i.hasClass("vi-wpvs-option-wrap-out-of-stock")&&viwpvs_to_string(i.data("attribute_value"))===c){let a=!0;for(let s in t)if(t.hasOwnProperty(s)){let o=t[s];if(o.attributes[p]===r&&o.attributes[d]===viwpvs_to_string(i.data("attribute_value"))&&!o.hasOwnProperty("viwpvs_not_available")){a=!1;break}}return a&&i.addClass("vi-wpvs-option-wrap-out-of-stock"),!1}})}}}}}if(jQuery(s).data("show_selected_item")&&jQuery(s).find(".vi-wpvs-option-wrap-selected").length){if(jQuery(s).parent().parent().find(".vi-wpvs-label-selected").length)jQuery(s).parent().parent().find(".vi-wpvs-label-selected").html(jQuery(s).find(".vi-wpvs-option-wrap-selected").data("attribute_label")).removeClass("vi-wpvs-hidden");else{let f=jQuery(s).parent().parent().find(".label");f.length||(f=jQuery(s).parent().parent().find("label")),f.css({display:"inline-flex",flexWrap:"wrap",alignItems:"center"}).append('<span class="vi-wpvs-label-selected">'+jQuery(s).find(".vi-wpvs-option-wrap-selected").data("attribute_label")+"</span>")}}})},vi_wpvs_frontend.prototype.hide_variation=function(){let i=this.form;i.find(".reset_variations").addClass("vi-wpvs-hidden"),i.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected vi-wpvs-option-wrap-out-of-stock").addClass("vi-wpvs-option-wrap-default"),i.find(".vi-wpvs-option-radio").prop("checked",!1),i.find(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),i.find(".vi-wpvs-variation-button-select >span ").html(i.find(".vi-wpvs-option-select:first-child").html()),i.find(".vi-wpvs-variation-style .vi-wpvs-label-selected").addClass("vi-wpvs-hidden")},jQuery.fn.viwpvs_woo_product_variation_swatches=function(){return new vi_wpvs_frontend(this),this};