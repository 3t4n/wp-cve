google.load("visualization","1",{packages:["corechart"]});(function(){var a=jQuery;var b=false;var c=function(h,e,k,l,f){var h=h,e=e,k=k,d=l,n=0,j=0,m=Date.parse(f)-Date.parse(new Date());function g(o){if(b){return true}if(typeof(o.error)!="undefined"&&o.error!=""){b=true;a("#contentstetic").html('<br><h3 style="color: red;">'+(o.error)+"</h3><p>Please check your project settings.</p>");return true}return false}addCommas=function(p){p+="";x=p.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var o=/(\d+)(\d{3})/;while(o.test(x1)){x1=x1.replace(o,"$1,$2")}return x1+x2};getBrowserIconClass=function(o){if(typeof(o)=="undefined"||o===null||(typeof(o)!="object"&&typeof(o)!="string")){return""}return"browser-logo browser-"+o.toLowerCase().replace(/\s[0-9\.]+$/,"").replace(/\s/g,"-")};getOsIconClass=function(p){if(typeof(p)=="undefined"||p===null||(typeof(p)!="object"&&typeof(p)!="string")){return""}if(p.search(/^windows/i)!=-1){var o="windows"}else{if(p.search(/^macintosh/i)!=-1||p.search(/^mac os/i)!=-1){var o="macintosh"
}else{if(p.search(/^ios/i)!=-1){var o="ios"}else{if(p.search(/^linux/i)!=-1){var o="linux"}else{if(p.search(/^android/i)!=-1){var o="android"}else{var o=""}}}}}return"os-logo os-"+o.toLowerCase().replace(/\s[0-9\.]+$/,"").replace(/\s/g,"-")};parseUri=function(o){var p=document.createElement("a");p.href=(o.match(/^https?:\/\//i)!==null)?o:("http://"+o);return p};showFSDayPerfGraph=function(){var p=new Date();p.setTime(Date.parse(new Date())+m);var o=p.getDate();var r=p.getMonth()+1;var q=p.getFullYear();a.getJSON("https://www.stetic.com/api/numbers?pid="+h+"&token="+e+"&apikey="+k+"&mon="+r+"-"+q+"&day="+o+"&jsoncallback=?",function(u){if(g(u.results)){return}chart_data=new Array(["Hour","Page views","Visits"]);for(i=0;i<u.results.items.length;i++){stat=u.results.items[i];chart_data.push([i,parseInt(stat.h),parseInt(stat.v)])}var v=google.visualization.arrayToDataTable(chart_data);var s={title:"Day Performance",hAxis:{title:"Hour",titleTextStyle:{color:"red"},textStyle:{color:"#3399CC",fontSize:10}},legend:"none",pointSize:4,lineWidth:3,gridlineColor:"#ececec",colors:["#86e302","#4caeff"],reverseCategories:false,backgroundColor:"#ffffff",vAxis:{baselineColor:"transparent",textPosition:"in",textStyle:{color:"#8F8F8F",fontSize:10}},chartArea:{width:"100%",height:"100%"}};
var t=new google.visualization.AreaChart(document.getElementById("chart_visitor_div"));t.draw(v,s)})};showFSWPDashboard=function(){showFSDayPerfGraph();a.getJSON("https://www.stetic.com/api/dashboard?pid="+h+"&token="+e+"&apikey="+k+"&jsoncallback=?",function(o){if(g(o.results)){return}items_data={Visitors:o.results.visits_today,"Page views":o.results.hits_today,"Ø Pages/Visit":o.results.hits_per_visit_today,"Ø Time on Site (Min.)":o.results.avg_time_today};a.each(items_data,function(q,r){var p='<div class="fs-number"><span>'+r+"</span>"+q+"</div>";a("#fs_dashboard_stats").append(p)})})};showFSDashboard=function(){a.getJSON("https://www.stetic.com/api/dashboard?pid="+h+"&token="+e+"&apikey="+k+"&jsoncallback=?",function(r){if(g(r.results)){return}var s=["Visits","Returning Visitors","New Visits","Page views","Ø Pages/Visit","Ø Time on Site (Min.)"];var q={Today:"today",Yesterday:"yesterday","This month":"thismonth","Last month":"lastmonth","This year":"thisyear",Total:"total"};var p={};
a.each(q,function(t,u){p[t]=[r.results["visits_"+u],r.results["ret_visits_"+u],r.results["visits_"+u]-r.results["ret_visits_"+u],r.results["hits_"+u],r.results["hits_per_visit_"+u],r.results["avg_time_"+u]]});a("#fs_overview_stats thead tr").append("<th></th>");a.each(s,function(t,u){a("#fs_overview_stats thead tr").append("<th>"+u+"</th>")});a.each(p,function(v,u){var t='<tr><td class="row-title">'+v+"</td>";a.each(u,function(w,y){if(!isNaN(y)){y=addCommas(y)}t+='<td class="fsnum">'+y+"</td>"});t+="</tr>";a("#fs_overview_stats tbody").append(t)});if(r.results.visits_yth<r.results.visits_today){var o="good"}else{if(r.results.visits_yth>r.results.visits_today){var o="bad"}else{var o="noc"}}a("#fs_overview_stats tbody tr").first().children("td").eq(1).prepend('<small class="fs_'+o+'">'+r.results.visits_yth_percent+"%</small>");if(r.results.hits_yth<r.results.hits_today){var o="good"}else{if(r.results.hits_yth>r.results.hits_today){var o="bad"}else{var o="noc"}}a("#fs_overview_stats tbody tr").first().children("td").eq(4).prepend('<small class="fs_'+o+'">'+r.results.hits_yth_percent+"%</small>");
a("#fs_overview_stats thead tr").first().children("th").first().html("<span>"+r.results.user_online+"</span> Online")})};showFSGraphs=function(){showFSDayPerfGraph();var q=new Date();q.setTime(Date.parse(new Date())+m);q.setMonth(q.getMonth()-1);var o=q.getDate();var r=q.getMonth()+1;var v=q.getFullYear();var q=new Date();q.setTime(Date.parse(new Date())+m);var p=q.getDate();var u=q.getMonth()+1;var t=q.getFullYear();a.getJSON("https://www.stetic.com/api/numbers?pid="+h+"&token="+e+"&apikey="+k+"&from="+v+"-"+r+"-"+o+"&to="+t+"-"+u+"-"+p+"&jsoncallback=?",function(z){if(g(z.results)){return}chart_data=new Array(["Hour","Page views","Visits"]);for(i=0;i<z.results.items.length;i++){stat=z.results.items[i];chart_data.push([stat.name,parseInt(stat.h),parseInt(stat.v)])}var A=google.visualization.arrayToDataTable(chart_data);var w={title:"Last 31 days Performance",hAxis:{title:"Hour",titleTextStyle:{color:"red"},textStyle:{color:"#3399CC",fontSize:10}},legend:"none",pointSize:4,lineWidth:3,gridlineColor:"#ececec",colors:["#86e302","#4caeff"],reverseCategories:false,backgroundColor:"#ffffff",vAxis:{baselineColor:"transparent",textPosition:"in",textStyle:{color:"#8F8F8F",fontSize:10}},chartArea:{width:"100%",height:"100%"}};
var y=new google.visualization.AreaChart(document.getElementById("chart_visitor_div_last31"));y.draw(A,w)});var q=new Date();q.setTime(Date.parse(new Date())+m);var s=q.getFullYear();a.getJSON("https://www.stetic.com/api/numbers?pid="+h+"&token="+e+"&apikey="+k+"&year="+s+"&jsoncallback=?",function(z){if(g(z.results)){return}chart_data=new Array(["Hour","Page views","Visits"]);for(i=0;i<z.results.items.length;i++){stat=z.results.items[i];chart_data.push([stat.name,parseInt(stat.h),parseInt(stat.v)])}var A=google.visualization.arrayToDataTable(chart_data);var w={title:"Year Performance",hAxis:{title:"Hour",titleTextStyle:{color:"red"},textStyle:{color:"#3399CC",fontSize:10}},legend:"none",pointSize:4,lineWidth:3,gridlineColor:"#ececec",colors:["#86e302","#4caeff"],reverseCategories:false,backgroundColor:"#ffffff",vAxis:{baselineColor:"transparent",textPosition:"in",textStyle:{color:"#8F8F8F",fontSize:10}},chartArea:{width:"100%",height:"100%"}};var y=new google.visualization.AreaChart(document.getElementById("chart_visitor_div_year"));
y.draw(A,w)})};showFSBoxStats=function(o,q,p){a.getJSON("https://www.stetic.com/api/"+o+"?pid="+h+"&token="+e+"&apikey="+k+"&jsoncallback=?",function(r){if(g(r.results)){return}html='<div><table class="widefat"><thead><tr><th>'+p+"</th><th>"+q+"</th></tr></thead><tbody>";if("items" in r.results&&r.results.items.length){for(i=0;i<r.results.items.length;i++){stat=r.results.items[i];html+='<tr><td class="row-title">'+stat.count+"</td><td>"+stat.name+"</td></tr>";if(i>=9){break}}}else{html+='<tr><td class="row-title"></td><td>No data.</td></tr>'}html+="</tbody></table></div>";a("#fs-box-row").append(html).fadeIn(300)})};showFSVisitorLog=function(){a.getJSON("https://www.stetic.com/api/visitor_log?pid="+h+"&token="+e+"&apikey="+k+"&jsoncallback=?",function(q){if(g(q.results)){return}for(i=0;i<q.results.items.length;i++){stat=q.results.items[i];var o="<tr>";o+="<td>"+stat.time+"<br>"+stat.hits+" Page"+((stat.hits>1)?"s":"")+"</td>";o+="<td>"+stat.ip+"("+stat.host+")<br>";o+='<span class="'+getOsIconClass(stat.os)+'"></span> '+stat.os+' <span class="'+getBrowserIconClass(stat.browser)+'"></span> '+stat.browser+"<br>";
o+="Screen: "+stat.screen+" - GEO: "+stat.geo+"</td>";o+="<td>";if(stat.referrer!=""){var p=parseUri(stat.referrer);o+='<a href="http://'+stat.referrer+'" target="_blank">'+p.hostname+"</a>"}o+="<br>"+stat.entry+"<br>";if(stat.kw!=""){o+="Keyword: "+stat.kw+"</td>"}o+="</tr>";a("#fs-visitor-log tbody").append(o).fadeIn(300);if(i>=25){break}}})};return{statsPage:function(){showFSGraphs();showFSDashboard();showFSBoxStats("sites","Site","Views");window.setTimeout("showFSBoxStats('referrer', 'Referrer', 'Visits')",1000);window.setTimeout("showFSBoxStats('browser', 'Browser', 'Visits')",1500);window.setTimeout("showFSBoxStats('os', 'OS', 'Visits')",2000);window.setTimeout("showFSBoxStats('screen', 'Screen', 'Visits')",2500);window.setTimeout("showFSBoxStats('keywords', 'Keywords', 'Visits')",500);showFSVisitorLog()},dashBoard:function(){showFSWPDashboard()},}};window.fourStats=c})();