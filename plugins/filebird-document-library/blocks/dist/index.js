!function(){var e={184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var l=typeof r;if("string"===l||"number"===l)e.push(r);else if(Array.isArray(r)){if(r.length){var i=a.apply(null,r);i&&e.push(i)}}else if("object"===l){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var o in r)n.call(r,o)&&r[o]&&e.push(o)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},296:function(e,t,r){var n=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")(),d=Object.prototype.toString,f=Math.max,m=Math.min,p=function(){return u.Date.now()};function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=l.test(e);return r||i.test(e)?o(e.slice(2),r?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,r){var n,a,l,i,o,s,c=0,u=!1,d=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var r=n,l=a;return n=a=void 0,c=t,i=e.apply(l,r)}function h(e){var r=e-s;return void 0===s||r>=t||r<0||d&&e-c>=l}function v(){var e=p();if(h(e))return E(e);o=setTimeout(v,function(e){var r=t-(e-s);return d?m(r,l-(e-c)):r}(e))}function E(e){return o=void 0,y&&n?g(e):(n=a=void 0,i)}function w(){var e=p(),r=h(e);if(n=arguments,a=this,s=e,r){if(void 0===o)return function(e){return c=e,o=setTimeout(v,t),u?g(e):i}(s);if(d)return o=setTimeout(v,t),g(s)}return void 0===o&&(o=setTimeout(v,t)),i}return t=_(t)||0,b(r)&&(u=!!r.leading,l=(d="maxWait"in r)?f(_(r.maxWait)||0,t):l,y="trailing"in r?!!r.trailing:y),w.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=s=a=o=void 0},w.flush=function(){return void 0===o?i:E(p())},w}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,r),l.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.React,t=r.n(e),n=r(184),a=r.n(n),l=Symbol.for("immer-nothing"),i=Symbol.for("immer-draftable"),o=Symbol.for("immer-state");function s(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var c=Object.getPrototypeOf;function u(e){return!!e&&!!e[o]}function d(e){return!!e&&(m(e)||Array.isArray(e)||!!e[i]||!!e.constructor?.[i]||g(e)||h(e))}var f=Object.prototype.constructor.toString();function m(e){if(!e||"object"!=typeof e)return!1;const t=c(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===f}function p(e,t){0===b(e)?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function b(e){const t=e[o];return t?t.type_:Array.isArray(e)?1:g(e)?2:h(e)?3:0}function _(e,t){return 2===b(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function y(e,t,r){const n=b(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function g(e){return e instanceof Map}function h(e){return e instanceof Set}function v(e){return e.copy_||e.base_}function E(e,t){if(g(e))return new Map(e);if(h(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&m(e)){if(!c(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const r=Object.getOwnPropertyDescriptors(e);delete r[o];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){const a=n[t],l=r[a];!1===l.writable&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[a]})}return Object.create(c(e),r)}function w(e,t=!1){return C(e)||u(e)||!d(e)||(b(e)>1&&(e.set=e.add=e.clear=e.delete=N),Object.freeze(e),t&&p(e,((e,t)=>w(t,!0)))),e}function N(){s(2)}function C(e){return Object.isFrozen(e)}var S,P={};function q(e){const t=P[e];return t||s(0),t}function x(){return S}function O(e,t){t&&(q("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function j(e){T(e),e.drafts_.forEach(M),e.drafts_=null}function T(e){e===S&&(S=e.parent_)}function z(e){return S={drafts_:[],parent_:S,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function M(e){const t=e[o];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function R(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[o].modified_&&(j(t),s(4)),d(e)&&(e=F(t,e),t.parent_||A(t,e)),t.patches_&&q("Patches").generateReplacementPatches_(r[o].base_,e,t.patches_,t.inversePatches_)):e=F(t,r,[]),j(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==l?e:void 0}function F(e,t,r){if(C(t))return t;const n=t[o];if(!n)return p(t,((a,l)=>k(e,n,t,a,l,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return A(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,l=!1;3===n.type_&&(a=new Set(t),t.clear(),l=!0),p(a,((a,i)=>k(e,n,t,a,i,r,l))),A(e,t,!1),r&&e.patches_&&q("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function k(e,t,r,n,a,l,i){if(u(a)){const i=F(e,a,l&&t&&3!==t.type_&&!_(t.assigned_,n)?l.concat(n):void 0);if(y(r,n,i),!u(i))return;e.canAutoFreeze_=!1}else i&&r.add(a);if(d(a)&&!C(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;F(e,a),t&&t.scope_.parent_||A(e,a)}}function A(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&w(t,r)}var D={get(e,t){if(t===o)return e;const r=v(e);if(!_(r,t))return function(e,t,r){const n=B(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!d(n)?n:n===H(e.base_,t)?($(e),e.copy_[t]=I(n,e)):n},has(e,t){return t in v(e)},ownKeys(e){return Reflect.ownKeys(v(e))},set(e,t,r){const n=B(v(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=H(v(e),t),i=n?.[o];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(l=n)?0!==a||1/a==1/l:a!=a&&l!=l)&&(void 0!==r||_(e.base_,t)))return!0;$(e),V(e)}var a,l;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return void 0!==H(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,$(e),V(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=v(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){s(11)},getPrototypeOf(e){return c(e.base_)},setPrototypeOf(){s(12)}},L={};function H(e,t){const r=e[o];return(r?v(r):e)[t]}function B(e,t){if(!(t in e))return;let r=c(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=c(r)}}function V(e){e.modified_||(e.modified_=!0,e.parent_&&V(e.parent_))}function $(e){e.copy_||(e.copy_=E(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function I(e,t){const r=g(e)?q("MapSet").proxyMap_(e,t):h(e)?q("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:x(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,l=D;r&&(a=[n],l=L);const{revoke:i,proxy:o}=Proxy.revocable(a,l);return n.draft_=o,n.revoke_=i,o}(e,t);return(t?t.scope_:x()).drafts_.push(r),r}function Z(e){if(!d(e)||C(e))return e;const t=e[o];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=E(e,t.scope_.immer_.useStrictShallowCopy_)}else r=E(e,!0);return p(r,((e,t)=>{y(r,e,Z(t))})),t&&(t.finalized_=!1),r}p(D,((e,t)=>{L[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),L.deleteProperty=function(e,t){return L.set.call(this,e,t,void 0)},L.set=function(e,t,r){return D.set.call(this,e[0],t,r,e[0])};var W=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...a){return n.produce(e,(e=>t.call(this,e,...a)))}}let n;if("function"!=typeof t&&s(6),void 0!==r&&"function"!=typeof r&&s(7),d(e)){const a=z(this),l=I(e,void 0);let i=!0;try{n=t(l),i=!1}finally{i?j(a):T(a)}return O(a,r),R(n,a)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===l&&(n=void 0),this.autoFreeze_&&w(n,!0),r){const t=[],a=[];q("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}s(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;d(e)||s(8),u(e)&&(u(t=e)||s(10),e=Z(t));const r=z(this),n=I(e,void 0);return n[o].isManual_=!0,T(r),n}finishDraft(e,t){const r=e&&e[o];r&&r.isManual_||s(9);const{scope_:n}=r;return O(n,t),R(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=q("Patches").applyPatches_;return u(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},U=W.produce;W.produceWithPatches.bind(W),W.setAutoFreeze.bind(W),W.setUseStrictShallowCopy.bind(W),W.applyPatches.bind(W),W.createDraft.bind(W),W.finishDraft.bind(W);var G=window.wp.i18n,K=({attributes:t,foundPosts:r,request:n,setRequest:l,layout:i,setLayout:o})=>{const s=e=>{o(e)};return(0,e.createElement)("div",{className:"fbdl-layout-control"},(0,e.createElement)("div",{className:"fbdl-layout-control-wrapper"},(0,e.createElement)("div",{className:"fbdl-layout-control-limit"},(0,G.__)("Show","filebird-dl")," ",(0,e.createElement)("input",{type:"number",min:"1",max:200,value:n.pagination.limit,onChange:e=>{const t=e.target.value,r=t.toString().match(/[.,\s]/g);t<=0||r?.length?e.target.value=n.pagination.limit:l(U(n,(e=>{e.pagination.limit=t,e.pagination.current=1})))},disabled:t.isPreview})," ",(0,G.__)("files","filebird-dl")),(0,e.createElement)("div",{className:"fbdl-layout-control-display"},(0,e.createElement)("span",{onClick:()=>s("grid")},(0,e.createElement)("svg",{className:a()({"fbdl-layout-control-display-selected":"grid"===i}),width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25 1.875H2.5C2.15482 1.875 1.875 2.15482 1.875 2.5V6.25C1.875 6.59518 2.15482 6.875 2.5 6.875H6.25C6.59518 6.875 6.875 6.59518 6.875 6.25V2.5C6.875 2.15482 6.59518 1.875 6.25 1.875ZM2.5 0C1.11929 0 0 1.11929 0 2.5V6.25C0 7.63071 1.11929 8.75 2.5 8.75H6.25C7.63071 8.75 8.75 7.63071 8.75 6.25V2.5C8.75 1.11929 7.63071 0 6.25 0H2.5Z",fill:"currentColor"}),(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 1.875H13.75C13.4048 1.875 13.125 2.15482 13.125 2.5V6.25C13.125 6.59518 13.4048 6.875 13.75 6.875H17.5C17.8452 6.875 18.125 6.59518 18.125 6.25V2.5C18.125 2.15482 17.8452 1.875 17.5 1.875ZM13.75 0C12.3693 0 11.25 1.11929 11.25 2.5V6.25C11.25 7.63071 12.3693 8.75 13.75 8.75H17.5C18.8807 8.75 20 7.63071 20 6.25V2.5C20 1.11929 18.8807 0 17.5 0H13.75Z",fill:"currentColor"}),(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 13.125H13.75C13.4048 13.125 13.125 13.4048 13.125 13.75V17.5C13.125 17.8452 13.4048 18.125 13.75 18.125H17.5C17.8452 18.125 18.125 17.8452 18.125 17.5V13.75C18.125 13.4048 17.8452 13.125 17.5 13.125ZM13.75 11.25C12.3693 11.25 11.25 12.3693 11.25 13.75V17.5C11.25 18.8807 12.3693 20 13.75 20H17.5C18.8807 20 20 18.8807 20 17.5V13.75C20 12.3693 18.8807 11.25 17.5 11.25H13.75Z",fill:"currentColor"}),(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25 13.125H2.5C2.15482 13.125 1.875 13.4048 1.875 13.75V17.5C1.875 17.8452 2.15482 18.125 2.5 18.125H6.25C6.59518 18.125 6.875 17.8452 6.875 17.5V13.75C6.875 13.4048 6.59518 13.125 6.25 13.125ZM2.5 11.25C1.11929 11.25 0 12.3693 0 13.75V17.5C0 18.8807 1.11929 20 2.5 20H6.25C7.63071 20 8.75 18.8807 8.75 17.5V13.75C8.75 12.3693 7.63071 11.25 6.25 11.25H2.5Z",fill:"currentColor"}))),(0,e.createElement)("span",{onClick:()=>s("list")},(0,e.createElement)("svg",{className:a()({"fbdl-layout-control-display-selected":"list"===i}),width:"23",height:"16",viewBox:"0 0 23 16",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M10.2222 2.90918H22.9999M10.2222 13.091H22.9999",stroke:"currentColor",strokeWidth:"1.5"}),(0,e.createElement)("ellipse",{cx:"2.875",cy:"13.0909",rx:"2.875",ry:"2.90909",fill:"currentColor"}),(0,e.createElement)("ellipse",{cx:"2.875",cy:"2.90909",rx:"2.875",ry:"2.90909",fill:"currentColor"}))))))};const X=(e,t)=>{let r=t-e+1;return Array.from({length:r},((t,r)=>r+e))},J="...";var Y=({foundPosts:t,maxNumPages:r,request:n,setRequest:l})=>{const{pagination:i}=n,o=(({totalCount:t,pageSize:r,maxNumPages:n,siblingCount:a=1,currentPage:l})=>(0,e.useMemo)((()=>{const e=n;if(a+5>=e)return X(1,e);const t=Math.max(l-a,1),r=Math.min(l+a,e),i=t>2,o=r<e-2,s=e;if(!i&&o)return[...X(1,5+a),J,e];if(i&&!o){let t=X(e-(5+a)+1,e);return[1,J,...t]}if(i&&o){let e=X(t,r);return[1,J,...e,J,s]}}),[n,t,r,a,l]))({maxNumPages:r,totalCount:t,currentPage:i.current,pageSize:i.limit});if(0===i.current||o.length<2)return null;const s=e=>i.current==e?"fbdl-selected":"fbdl-unselected";let c=o[o.length-1];const u=i.current*i.limit,d=u-i.limit+1;return(0,e.createElement)("div",{className:"fbdl-pagination"},(0,e.createElement)("div",{className:"fbdl-pagination-wrapper"},(0,e.createElement)("div",{className:"fbdl-pagination-info"},(0,e.createElement)("p",null,(0,G.__)("Showing","filebird-dl")," ",(0,e.createElement)("span",null,d)," ",(0,G.__)("to","filebird-dl")," ",(0,e.createElement)("span",null,u>t?t:u)," ",(0,G.__)("of","filebird-dl")," ",(0,e.createElement)("span",null,t)," ",(0,G.__)("files","filebird-dl"))),(0,e.createElement)("div",{className:"fbdl-pagination-page-number"},(0,e.createElement)("a",{href:!0,className:a()("fbdl-page-previous",{"fbdl-hidden":1==i.current}),disabled:1==i.current,onClick:()=>{l(U(n,(e=>{e.pagination.current=e.pagination.current-1})))}},(0,e.createElement)("span",null,(0,G.__)("Previous","filebird-dl")),(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"}))),o.map((t=>t===J?(0,e.createElement)("a",{className:"fbdl-page-dots"},"…"):(0,e.createElement)("a",{href:!0,"aria-current":"page",className:`fbdl-page-number ${s(t)}`,onClick:()=>(e=>{l(U(n,(t=>{t.pagination.current=e})))})(t)},t))),(0,e.createElement)("a",{className:a()("fbdl-page-next",{"fbdl-hidden":i.current==c}),disabled:i.current==c,onClick:()=>{l(U(n,(e=>{e.pagination.current=e.pagination.current+1})))}},(0,e.createElement)("span",null,(0,G.__)("Next","filebird-dl")),(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}))))))},Q=r(296),ee=r.n(Q),te=({request:t,setRequest:r,attributes:n})=>{(0,e.useCallback)(ee()((e=>a(e)),500),[t]);const a=async e=>{r(U(t,(t=>{t.search=e,t.pagination.current=1})))};return(0,e.createElement)("div",{className:"fbdl-search-control"},(0,e.createElement)("div",{className:"fbdl-search-control-wrapper"},(0,e.createElement)("div",{className:"fbdl-title"},(0,e.createElement)("svg",{width:"40",height:"32",viewBox:"0 0 48 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M43.178 5.44153H19.1795C18.5049 5.44153 17.8302 5.15513 17.3483 4.6778L14.1678 1.43198C13.3004 0.477327 12.1438 0 10.8909 0H4.81897C2.12035 0 0 2.10024 0 4.77327V35.2267C0 37.8998 2.12035 40 4.81897 40H43.178C45.8766 40 47.997 37.8998 47.997 35.2267V10.2148C48.0933 7.54177 45.8766 5.44153 43.178 5.44153Z",fill:"#007CBA"})),(0,e.createElement)("h2",null,n.title))))};const{assets_icon_url:re,type_icons:ne}=fbdl;var ae=({files:t,column:r})=>(0,e.createElement)("div",{className:"fbdl-gridview"},(0,e.createElement)("div",{className:"fbdl-gridview-wrapper"},(0,e.createElement)("div",{className:"fbdl-gridview-container"},(0,e.createElement)("div",{className:`fbdl-grid fb-col-${r}`},t.map(((t,r)=>(0,e.createElement)("div",{className:"fbdl-grid-item",key:r},(0,e.createElement)("div",{className:"fbdl-grid-item-info"},(0,e.createElement)("div",{className:"fbdl-grid-icon"},(0,e.createElement)("img",{src:`${re}${ne[t.type]?ne[t.type]:ne.no_ext}`,alt:t.alt})),(0,e.createElement)("a",{rel:"noopener noreferrer",target:"_blank",href:t.link,className:"fbdl-title"},t.title),(0,e.createElement)("span",{className:"fbdl-file-size"},t.size)),(0,e.createElement)("a",{href:t.url,target:"_blank",download:!0,rel:"noopener noreferrer",className:"fbdl-download-button"},(0,G.__)("Download","filebird-dl")))))))));const{assets_icon_url:le,type_icons:ie}=fbdl;var oe=({request:t,setRequest:r,files:n})=>{const a=({type:t})=>(0,e.createElement)(e.Fragment,null);return(0,e.createElement)("div",{className:"fbdl-listview"},(0,e.createElement)("div",{className:"fbdl-listview-wrapper"},(0,e.createElement)("div",{className:"fbdl-listview-container"},(0,e.createElement)("div",{className:"fbdl-list"},(0,e.createElement)("table",{className:"fbdl-table"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{className:"fbdl-table-first-header"},(0,e.createElement)("div",null,(0,G.__)("File","filebird-dl"),(0,e.createElement)(a,{type:"post_title"}))),(0,e.createElement)("th",{className:"fbdl-table-header"},(0,e.createElement)("div",{className:"fbdl-table-header-wrapper"},(0,G.__)("Size","filebird-dl"),(0,e.createElement)(a,{type:"size"}))),(0,e.createElement)("th",{className:"fbdl-table-header"},(0,e.createElement)("div",{className:"fbdl-table-header-wrapper"},(0,G.__)("Type","filebird-dl"))),(0,e.createElement)("th",{className:"fbdl-table-header"},(0,e.createElement)("div",{className:"fbdl-table-header-wrapper"},(0,G.__)("Last Modified","filebird-dl"),(0,e.createElement)(a,{type:"post_modified"}))),(0,e.createElement)("th",{className:"fbdl-table-last-header"},(0,G.__)("Download","filebird-dl")))),(0,e.createElement)("tbody",null,n.map((t=>(0,e.createElement)("tr",null,(0,e.createElement)("td",{className:"fbdl-list-first-item"},(0,e.createElement)("div",{className:"fbdl-list-item-icon"},(0,e.createElement)("div",{className:"fbdl-list-item-icon-wrapper"},(0,e.createElement)("img",{src:`${le}${ie[t.type]?ie[t.type]:ie.no_ext}`,alt:t.alt})),(0,e.createElement)("div",{className:"fbdl-list-item-title"},(0,e.createElement)("div",null,(0,e.createElement)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},t.title))))),(0,e.createElement)("td",{className:"fbdl-list-item"},(0,e.createElement)("div",null,t.size)),(0,e.createElement)("td",{className:"fbdl-list-item"},(0,e.createElement)("div",null,t.type?`.${t.type}`:"")),(0,e.createElement)("td",{className:"fbdl-list-item"},(0,e.createElement)("div",null,t.modified)),(0,e.createElement)("td",{className:"fbdl-list-last-item"},(0,e.createElement)("a",{href:t.url,target:"_blank",download:!0,rel:"noopener noreferrer"},(0,G.__)("Download","filebird-dl"))))))))))))};const{assets_icon_url:se,type_icons:ce}=fbdl;var ue=()=>(0,e.createElement)("div",{className:"fbdl-empty"},(0,e.createElement)("div",{className:"fbdl-empty-wrapper"},(0,e.createElement)("img",{src:`${se}empty.svg`}),(0,e.createElement)("div",{className:"fbdl-not-found"},(0,G.__)("No attachments found.","filebird-dl"))));const de=fbdl.json_url;var fe=t=>{const r=t.loading?"fbdl-opacity-50":"";return(0,e.createElement)("div",{className:"fbdl-spinner"},t.loading&&(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"fbdl-spinner-wrapper"},(0,e.createElement)("div",{className:"spin"},(0,e.createElement)("div",{className:"spinner-grow"})),(0,e.createElement)("div",{className:"fbdl-spinner-text"},"Loading..."))),(0,e.createElement)("div",{className:r},t.children))},me=({loading:t,setLoading:r,setMaxNumPages:n,setFoundPosts:a,attributes:l,request:i,setRequest:o,layout:s,setLayout:c,column:u,setColumn:d})=>{const[f,m]=(0,e.useState)([]),[p,b]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{!async function(){r(!0);const e=await(async e=>{const t=await fetch(`${de}/get-attachments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(e.ok)return e;throw new Error((0,G.__)("Network response was not ok.","filebird-dl"))}));return await t.json()})(i);r(!1),n(e.maxNumPages),a(e.foundPosts),m(e.files)}()}),[i]),(0,e.useEffect)((()=>{c(l.layout)}),[l.layout]),(0,e.useEffect)((()=>{d(l.column)}),[l.column]),(0,e.useEffect)((()=>{b(!0)}),[]),(0,e.useEffect)((()=>{o(U(i,(e=>{e.selectedFolder=l.request.selectedFolder})))}),[l.request.selectedFolder]),(0,e.useEffect)((()=>{o(U(i,(e=>{e.pagination.limit=l.request.pagination.limit})))}),[l.request.pagination.limit]),(0,e.useEffect)((()=>{o(U(i,(e=>{e.orderBy=l.request.orderBy})))}),[l.request.orderBy]),(0,e.useEffect)((()=>{o(U(i,(e=>{e.orderType=l.request.orderType})))}),[l.request.orderType]),(0,e.createElement)(fe,{loading:t},f.length||t||!p?"grid"===s?(0,e.createElement)(ae,{files:f,column:u}):(0,e.createElement)(oe,{request:i,setRequest:o,files:f}):(0,e.createElement)(ue,null))};const pe={pagination:{current:1,limit:10},search:"",orderBy:"",orderType:"",selectedFolder:[]};var be=r=>{const[n,a]=(0,e.useState)((e=>{const t={...e.request.pagination},r={...e.request,pagination:t};return{...pe,...r}})(r)),[l,i]=(0,e.useState)(!1),[o,s]=(0,e.useState)(0),[c,u]=(0,e.useState)(0),[d,f]=(0,e.useState)(r.layout),[m,p]=(0,e.useState)(r.column);return(0,e.createElement)(t().StrictMode,null,(0,e.createElement)(te,{request:n,setRequest:a,attributes:r}),(0,e.createElement)(K,{request:n,setRequest:a,layout:d,setLayout:f,foundPosts:c,attributes:r}),(0,e.createElement)(me,{attributes:r,column:m,setColumn:p,layout:d,setLayout:f,request:n,setRequest:a,loading:l,setLoading:i,setMaxNumPages:s,setFoundPosts:u}),(0,e.createElement)(Y,{maxNumPages:o,foundPosts:c,request:n,setRequest:a}))},_e=({attributes:t})=>(0,e.createElement)("div",{id:"filebird-document-library",style:{pointerEvents:"none"}},(0,e.createElement)(be,{...t,isPreview:!0}));const ye=(0,e.createContext)(),{Consumer:ge,Provider:he}=ye,ve={pagination:{current:1,limit:10},search:"",orderBy:"",orderType:"",selectedFolder:[]},Ee=(e,t)=>{switch(t.type){case"SET_LOADING":return{...e,loading:t.payload};case"SET_LIMIT":return{...e,request:{...e.request,pagination:{...e.request.pagination,limit:t.payload,current:1}}};case"SET_SEARCH_TEXT":return{...e,request:{...e.request,search:t.payload,pagination:{...e.request.pagination,current:1}}};case"SET_FILES":return{...e,files:[...t.payload]};case"SET_PAGINATION":return{...e,foundPosts:t.payload.foundPosts,maxNumPages:t.payload.maxNumPages};case"SET_CURRENT_PAGE":return{...e,request:{...e.request,pagination:{...e.request.pagination,current:t.payload}}};case"SET_LAYOUT":return{...e,layout:t.payload};case"SET_COLUMN":return{...e,column:t.payload};case"SET_ORDER":return{...e,request:{...e.request,pagination:{...e.request.pagination,current:1},orderBy:t.payload.orderBy,orderType:t.payload.orderType}};default:throw new Error}};function we(t){const[r,n]=(0,e.useReducer)(Ee,(a=t,{loading:!1,request:Object.assign(ve,{...a.request}),maxNumPages:0,foundPosts:0,layout:a.layout,title:a.title,column:a.column}));var a;return(0,e.createElement)(he,{value:[r,n]},t.children)}const{Placeholder:Ne,Icon:Ce,SelectControl:Se,PanelBody:Pe,__experimentalNumberControl:qe,__experimentalInputControl:xe}=wp.components,{InspectorControls:Oe}=wp.blockEditor,{useState:je,useEffect:Te}=wp.element,ze=[{value:"grid",label:(0,G.__)("Grid","filebird-dl")},{value:"list",label:(0,G.__)("List","filebird-dl")}],Me=[{value:"post_title",label:(0,G.__)("Name","filebird-dl")},{value:"post_modified",label:(0,G.__)("Modified date","filebird-dl")},{value:"size",label:(0,G.__)("Size","filebird-dl")}],Re=[{value:"ASC",label:(0,G.__)("Ascending","filebird-dl")},{value:"DESC",label:(0,G.__)("Descending","filebird-dl")}];const{registerBlockType:Fe}=wp.blocks;Fe("filebird/document-library",{title:(0,G.__)("FileBird Document Library","filebird-dl"),description:(0,G.__)("Display folder item in a document library.","filebird-dl"),icon:"images-alt2",category:"common",keywords:["filebird-document-library","document","library"],supports:{align:!0},attributes:{request:{type:"object",default:{pagination:{current:1,limit:10},search:"",orderBy:"post_title",orderType:"DESC",selectedFolder:[]}},layout:{type:"string",default:"grid"},title:{type:"string",default:""},column:{type:"number",default:4}},edit:({attributes:t,setAttributes:r})=>{const[n,a]=je([]),{selectedFolder:l}=t.request,{limit:i}=t.request.pagination;Te((()=>{(async()=>{const e=await fetch(`${fbv_data.json_url}/gutenberg-get-folders`,{method:"GET",headers:{"X-WP-Nonce":fbv_data.rest_nonce}}).then((e=>{if(e.ok)return e;throw new Error((0,G.__)("Network response was not ok.","filebird-dl"))})),t=await e.json();a(t.data),o(l)})()}),[]);const o=e=>{const n={...t.request};n.selectedFolder=e,r({request:n})};return(0,e.createElement)(we,{...t},l.length?(0,e.createElement)(_e,{attributes:t}):(0,e.createElement)(Ne,{icon:(0,e.createElement)(Ce,{icon:"media-document"}),label:(0,G.__)("Document Library","filebird-dl"),instructions:(0,G.__)("Select an image to remove this placeholder","filebird-dl")},(0,e.createElement)("div",{style:{backgroundColor:"#e7e7e7",width:"100%",padding:"30px",display:"flex",justifyContent:"center"}},(0,e.createElement)("div",null,(0,G.__)("Please select a folder","filebird-dl")))),(0,e.createElement)(Oe,null,(0,e.createElement)(Pe,{title:(0,G.__)("Document Library Settings","filebird-dl")},(0,e.createElement)(Se,{className:"filebird-select-wrapper",label:(0,G.__)("Folder","filebird-dl"),value:l,options:n,onChange:o,multiple:!0,style:{height:100,overflow:"auto"}}),(0,e.createElement)(xe,{className:"components-base-control",label:(0,G.__)("Library title","filebird-dl"),value:t.title,type:"text",onChange:(e,t)=>{if(100-e.length<0){const n=e.slice(0,100);t.event.target.value=n,r({title:n})}else r({title:e})}}),"grid"===t.layout&&(0,e.createElement)(qe,{className:"components-base-control",label:(0,G.__)("Column","filebird-dl"),onChange:e=>{r({column:parseInt(e)})},step:1,min:1,max:6,value:t.column}),(0,e.createElement)(qe,{className:"components-base-control",label:(0,G.__)("Limit items","filebird-dl"),onChange:e=>{let n={...t.request};n.pagination.limit=parseInt(e),r({request:n})},min:1,max:200,shiftStep:5,step:1,value:i}),(0,e.createElement)(Se,{className:"components-base-control",label:(0,G.__)("Layout display","filebird-dl"),value:t.layout,options:ze,onChange:e=>{r({layout:e})}}),(0,e.createElement)(Se,{label:(0,G.__)("Sort By","filebird-dl"),value:t.request.orderBy,onChange:e=>{const n={...t.request};n.orderBy=e,r({request:n})},options:Me}),(0,e.createElement)(Se,{label:(0,G.__)("Sort Type","filebird-dl"),value:t.request.orderType,onChange:e=>{const n={...t.request};n.orderType=e,r({request:n})},options:Re}))))},save:({attributes:e,className:t})=>null})}()}();