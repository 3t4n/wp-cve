!function(){var e={184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var i=l.apply(null,r);i&&e.push(i)}}else if("object"===a){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var o in r)n.call(r,o)&&r[o]&&e.push(o)}}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):void 0===(r=function(){return l}.apply(t,[]))||(e.exports=r)}()},296:function(e,t,r){var n=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")(),d=Object.prototype.toString,f=Math.max,m=Math.min,p=function(){return u.Date.now()};function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=a.test(e);return r||i.test(e)?o(e.slice(2),r?2:8):l.test(e)?NaN:+e}e.exports=function(e,t,r){var n,l,a,i,o,s,c=0,u=!1,d=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var r=n,a=l;return n=l=void 0,c=t,i=e.apply(a,r)}function v(e){var r=e-s;return void 0===s||r>=t||r<0||d&&e-c>=a}function g(){var e=p();if(v(e))return E(e);o=setTimeout(g,function(e){var r=t-(e-s);return d?m(r,a-(e-c)):r}(e))}function E(e){return o=void 0,y&&n?h(e):(n=l=void 0,i)}function w(){var e=p(),r=v(e);if(n=arguments,l=this,s=e,r){if(void 0===o)return function(e){return c=e,o=setTimeout(g,t),u?h(e):i}(s);if(d)return o=setTimeout(g,t),h(s)}return void 0===o&&(o=setTimeout(g,t)),i}return t=_(t)||0,b(r)&&(u=!!r.leading,a=(d="maxWait"in r)?f(_(r.maxWait)||0,t):a,y="trailing"in r?!!r.trailing:y),w.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=s=l=o=void 0},w.flush=function(){return void 0===o?i:E(p())},w}}},t={};function r(n){var l=t[n];if(void 0!==l)return l.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.React,t=r.n(e),n=Symbol.for("immer-nothing"),l=Symbol.for("immer-draftable"),a=Symbol.for("immer-state");function i(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var o=Object.getPrototypeOf;function s(e){return!!e&&!!e[a]}function c(e){return!!e&&(d(e)||Array.isArray(e)||!!e[l]||!!e.constructor?.[l]||_(e)||y(e))}var u=Object.prototype.constructor.toString();function d(e){if(!e||"object"!=typeof e)return!1;const t=o(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===u}function f(e,t){0===m(e)?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function m(e){const t=e[a];return t?t.type_:Array.isArray(e)?1:_(e)?2:y(e)?3:0}function p(e,t){return 2===m(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function b(e,t,r){const n=m(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function _(e){return e instanceof Map}function y(e){return e instanceof Set}function h(e){return e.copy_||e.base_}function v(e,t){if(_(e))return new Map(e);if(y(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&d(e)){if(!o(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const r=Object.getOwnPropertyDescriptors(e);delete r[a];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){const l=n[t],a=r[l];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[l]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[l]})}return Object.create(o(e),r)}function g(e,t=!1){return w(e)||s(e)||!c(e)||(m(e)>1&&(e.set=e.add=e.clear=e.delete=E),Object.freeze(e),t&&f(e,((e,t)=>g(t,!0)))),e}function E(){i(2)}function w(e){return Object.isFrozen(e)}var C,N={};function S(e){const t=N[e];return t||i(0),t}function x(){return C}function P(e,t){t&&(S("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function q(e){O(e),e.drafts_.forEach(F),e.drafts_=null}function O(e){e===C&&(C=e.parent_)}function j(e){return C={drafts_:[],parent_:C,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function F(e){const t=e[a];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function z(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[a].modified_&&(q(t),i(4)),c(e)&&(e=M(t,e),t.parent_||R(t,e)),t.patches_&&S("Patches").generateReplacementPatches_(r[a].base_,e,t.patches_,t.inversePatches_)):e=M(t,r,[]),q(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==n?e:void 0}function M(e,t,r){if(w(t))return t;const n=t[a];if(!n)return f(t,((l,a)=>k(e,n,t,l,a,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return R(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let l=t,a=!1;3===n.type_&&(l=new Set(t),t.clear(),a=!0),f(l,((l,i)=>k(e,n,t,l,i,r,a))),R(e,t,!1),r&&e.patches_&&S("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function k(e,t,r,n,l,a,i){if(s(l)){const i=M(e,l,a&&t&&3!==t.type_&&!p(t.assigned_,n)?a.concat(n):void 0);if(b(r,n,i),!s(i))return;e.canAutoFreeze_=!1}else i&&r.add(l);if(c(l)&&!w(l)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;M(e,l),t&&t.scope_.parent_||R(e,l)}}function R(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&g(t,r)}var A={get(e,t){if(t===a)return e;const r=h(e);if(!p(r,t))return function(e,t,r){const n=H(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!c(n)?n:n===L(e.base_,t)?(B(e),e.copy_[t]=V(n,e)):n},has(e,t){return t in h(e)},ownKeys(e){return Reflect.ownKeys(h(e))},set(e,t,r){const n=H(h(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=L(h(e),t),o=n?.[a];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((l=r)===(i=n)?0!==l||1/l==1/i:l!=l&&i!=i)&&(void 0!==r||p(e.base_,t)))return!0;B(e),T(e)}var l,i;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return void 0!==L(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,B(e),T(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=h(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){i(11)},getPrototypeOf(e){return o(e.base_)},setPrototypeOf(){i(12)}},D={};function L(e,t){const r=e[a];return(r?h(r):e)[t]}function H(e,t){if(!(t in e))return;let r=o(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=o(r)}}function T(e){e.modified_||(e.modified_=!0,e.parent_&&T(e.parent_))}function B(e){e.copy_||(e.copy_=v(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function V(e,t){const r=_(e)?S("MapSet").proxyMap_(e,t):y(e)?S("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:x(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=n,a=A;r&&(l=[n],a=D);const{revoke:i,proxy:o}=Proxy.revocable(l,a);return n.draft_=o,n.revoke_=i,o}(e,t);return(t?t.scope_:x()).drafts_.push(r),r}function $(e){if(!c(e)||w(e))return e;const t=e[a];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=v(e,t.scope_.immer_.useStrictShallowCopy_)}else r=v(e,!0);return f(r,((e,t)=>{b(r,e,$(t))})),t&&(t.finalized_=!1),r}f(A,((e,t)=>{D[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),D.deleteProperty=function(e,t){return D.set.call(this,e,t,void 0)},D.set=function(e,t,r){return A.set.call(this,e[0],t,r,e[0])};var Z=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...l){return n.produce(e,(e=>t.call(this,e,...l)))}}let l;if("function"!=typeof t&&i(6),void 0!==r&&"function"!=typeof r&&i(7),c(e)){const n=j(this),a=V(e,void 0);let i=!0;try{l=t(a),i=!1}finally{i?q(n):O(n)}return P(n,r),z(l,n)}if(!e||"object"!=typeof e){if(l=t(e),void 0===l&&(l=e),l===n&&(l=void 0),this.autoFreeze_&&g(l,!0),r){const t=[],n=[];S("Patches").generateReplacementPatches_(e,l,t,n),r(t,n)}return l}i(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;c(e)||i(8),s(e)&&(s(t=e)||i(10),e=$(t));const r=j(this),n=V(e,void 0);return n[a].isManual_=!0,O(r),n}finishDraft(e,t){const r=e&&e[a];r&&r.isManual_||i(9);const{scope_:n}=r;return P(n,t),z(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=S("Patches").applyPatches_;return s(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},W=Z.produce;Z.produceWithPatches.bind(Z),Z.setAutoFreeze.bind(Z),Z.setUseStrictShallowCopy.bind(Z),Z.applyPatches.bind(Z),Z.createDraft.bind(Z),Z.finishDraft.bind(Z);var I=window.wp.i18n;const{__experimentalInputControl:G,__experimentalNumberControl:K,SelectControl:U}=wp.components,{useState:J,useEffect:X}=wp.element,Q=[{value:"grid",label:(0,I.__)("Grid","filebird-dl")},{value:"list",label:(0,I.__)("List","filebird-dl")}],Y=[{value:"post_title",label:(0,I.__)("Name","filebird-dl")},{value:"post_modified",label:(0,I.__)("Modified date","filebird-dl")},{value:"size",label:(0,I.__)("Size","filebird-dl")}],ee=[{value:"ASC",label:(0,I.__)("Ascending","filebird-dl")},{value:"DESC",label:(0,I.__)("Descending","filebird-dl")}];var te=({attributes:t,setAttributes:r})=>{const[n,l]=J([]),{selectedFolder:a}=t.request,{limit:i}=t.request.pagination;return X((()=>{(async()=>{const e=await fetch(`${fbv_data.json_url}/gutenberg-get-folders`,{method:"GET",headers:{"X-WP-Nonce":fbv_data.rest_nonce}}).then((e=>{if(e.ok)return e;throw new Error((0,I.__)("Network response was not ok.","filebird-dl"))})),t=await e.json();l(t.data)})()}),[]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(U,{label:(0,I.__)("Folder","filebird-dl"),value:a,options:n,onChange:e=>{r(W(t,(t=>{t.request.selectedFolder=e})))},multiple:!0,style:{height:100,overflow:"auto"}}),(0,e.createElement)("div",{className:"setting-container"},(0,e.createElement)(G,{className:"components-base-control",label:(0,I.__)("Library title","filebird"),value:t.title,type:"text",onChange:(e,n)=>{const l={...t};if(100-e.length<0){const t=e.slice(0,100);n.event.target.value=t,l.title=t}else l.title=e;r(l)}}),(0,e.createElement)(K,{className:"components-base-control",label:(0,I.__)("Column","filebird-dl"),onChange:e=>{r(W(t,(t=>{t.column=parseInt(e)})))},step:1,min:1,max:6,value:t.column}),(0,e.createElement)(K,{className:"components-base-control",label:(0,I.__)("Limit items","filebird-dl"),onChange:e=>{r(W(t,(t=>{t.request.pagination.limit=parseInt(e)})))},min:1,max:200,shiftStep:5,step:1,value:i}),(0,e.createElement)(U,{className:"components-base-control",label:(0,I.__)("Layout display","filebird-dl"),value:t.layout,options:Q,onChange:e=>{r(W(t,(t=>{t.layout=e})))}}),(0,e.createElement)(U,{label:(0,I.__)("Sort By","filebird-dl"),value:t.request.orderBy,onChange:e=>{r(W(t,(t=>{t.request.orderBy=e})))},options:Y}),(0,e.createElement)(U,{label:(0,I.__)("Sort Type","filebird-dl"),value:t.request.orderType,onChange:e=>{r(W(t,(t=>{t.request.orderType=e})))},options:ee})))},re=r(184),ne=r.n(re),le=({attributes:t,foundPosts:r,request:n,setRequest:l,layout:a,setLayout:i})=>{const o=e=>{i(e)};return(0,e.createElement)("div",{className:"fbdl-layout-control"},(0,e.createElement)("div",{className:"fbdl-layout-control-wrapper"},(0,e.createElement)("div",{className:"fbdl-layout-control-limit"},(0,I.__)("Show","filebird-dl")," ",(0,e.createElement)("input",{type:"number",min:"1",max:200,value:n.pagination.limit,onChange:e=>{const t=e.target.value,r=t.toString().match(/[.,\s]/g);t<=0||r?.length?e.target.value=n.pagination.limit:l(W(n,(e=>{e.pagination.limit=t,e.pagination.current=1})))},disabled:t.isPreview})," ",(0,I.__)("files","filebird-dl")),(0,e.createElement)("div",{className:"fbdl-layout-control-display"},(0,e.createElement)("span",{onClick:()=>o("grid")},(0,e.createElement)("svg",{className:ne()({"fbdl-layout-control-display-selected":"grid"===a}),width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25 1.875H2.5C2.15482 1.875 1.875 2.15482 1.875 2.5V6.25C1.875 6.59518 2.15482 6.875 2.5 6.875H6.25C6.59518 6.875 6.875 6.59518 6.875 6.25V2.5C6.875 2.15482 6.59518 1.875 6.25 1.875ZM2.5 0C1.11929 0 0 1.11929 0 2.5V6.25C0 7.63071 1.11929 8.75 2.5 8.75H6.25C7.63071 8.75 8.75 7.63071 8.75 6.25V2.5C8.75 1.11929 7.63071 0 6.25 0H2.5Z",fill:"currentColor"}),(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 1.875H13.75C13.4048 1.875 13.125 2.15482 13.125 2.5V6.25C13.125 6.59518 13.4048 6.875 13.75 6.875H17.5C17.8452 6.875 18.125 6.59518 18.125 6.25V2.5C18.125 2.15482 17.8452 1.875 17.5 1.875ZM13.75 0C12.3693 0 11.25 1.11929 11.25 2.5V6.25C11.25 7.63071 12.3693 8.75 13.75 8.75H17.5C18.8807 8.75 20 7.63071 20 6.25V2.5C20 1.11929 18.8807 0 17.5 0H13.75Z",fill:"currentColor"}),(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 13.125H13.75C13.4048 13.125 13.125 13.4048 13.125 13.75V17.5C13.125 17.8452 13.4048 18.125 13.75 18.125H17.5C17.8452 18.125 18.125 17.8452 18.125 17.5V13.75C18.125 13.4048 17.8452 13.125 17.5 13.125ZM13.75 11.25C12.3693 11.25 11.25 12.3693 11.25 13.75V17.5C11.25 18.8807 12.3693 20 13.75 20H17.5C18.8807 20 20 18.8807 20 17.5V13.75C20 12.3693 18.8807 11.25 17.5 11.25H13.75Z",fill:"currentColor"}),(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25 13.125H2.5C2.15482 13.125 1.875 13.4048 1.875 13.75V17.5C1.875 17.8452 2.15482 18.125 2.5 18.125H6.25C6.59518 18.125 6.875 17.8452 6.875 17.5V13.75C6.875 13.4048 6.59518 13.125 6.25 13.125ZM2.5 11.25C1.11929 11.25 0 12.3693 0 13.75V17.5C0 18.8807 1.11929 20 2.5 20H6.25C7.63071 20 8.75 18.8807 8.75 17.5V13.75C8.75 12.3693 7.63071 11.25 6.25 11.25H2.5Z",fill:"currentColor"}))),(0,e.createElement)("span",{onClick:()=>o("list")},(0,e.createElement)("svg",{className:ne()({"fbdl-layout-control-display-selected":"list"===a}),width:"23",height:"16",viewBox:"0 0 23 16",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M10.2222 2.90918H22.9999M10.2222 13.091H22.9999",stroke:"currentColor",strokeWidth:"1.5"}),(0,e.createElement)("ellipse",{cx:"2.875",cy:"13.0909",rx:"2.875",ry:"2.90909",fill:"currentColor"}),(0,e.createElement)("ellipse",{cx:"2.875",cy:"2.90909",rx:"2.875",ry:"2.90909",fill:"currentColor"}))))))};const ae=(e,t)=>{let r=t-e+1;return Array.from({length:r},((t,r)=>r+e))},ie="...";var oe=({foundPosts:t,maxNumPages:r,request:n,setRequest:l})=>{const{pagination:a}=n,i=(({totalCount:t,pageSize:r,maxNumPages:n,siblingCount:l=1,currentPage:a})=>(0,e.useMemo)((()=>{const e=n;if(l+5>=e)return ae(1,e);const t=Math.max(a-l,1),r=Math.min(a+l,e),i=t>2,o=r<e-2,s=e;if(!i&&o)return[...ae(1,5+l),ie,e];if(i&&!o){let t=ae(e-(5+l)+1,e);return[1,ie,...t]}if(i&&o){let e=ae(t,r);return[1,ie,...e,ie,s]}}),[n,t,r,l,a]))({maxNumPages:r,totalCount:t,currentPage:a.current,pageSize:a.limit});if(0===a.current||i.length<2)return null;const o=e=>a.current==e?"fbdl-selected":"fbdl-unselected";let s=i[i.length-1];const c=a.current*a.limit,u=c-a.limit+1;return(0,e.createElement)("div",{className:"fbdl-pagination"},(0,e.createElement)("div",{className:"fbdl-pagination-wrapper"},(0,e.createElement)("div",{className:"fbdl-pagination-info"},(0,e.createElement)("p",null,(0,I.__)("Showing","filebird-dl")," ",(0,e.createElement)("span",null,u)," ",(0,I.__)("to","filebird-dl")," ",(0,e.createElement)("span",null,c>t?t:c)," ",(0,I.__)("of","filebird-dl")," ",(0,e.createElement)("span",null,t)," ",(0,I.__)("files","filebird-dl"))),(0,e.createElement)("div",{className:"fbdl-pagination-page-number"},(0,e.createElement)("a",{href:!0,className:ne()("fbdl-page-previous",{"fbdl-hidden":1==a.current}),disabled:1==a.current,onClick:()=>{l(W(n,(e=>{e.pagination.current=e.pagination.current-1})))}},(0,e.createElement)("span",null,(0,I.__)("Previous","filebird-dl")),(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"}))),i.map((t=>t===ie?(0,e.createElement)("a",{className:"fbdl-page-dots"},"…"):(0,e.createElement)("a",{href:!0,"aria-current":"page",className:`fbdl-page-number ${o(t)}`,onClick:()=>(e=>{l(W(n,(t=>{t.pagination.current=e})))})(t)},t))),(0,e.createElement)("a",{className:ne()("fbdl-page-next",{"fbdl-hidden":a.current==s}),disabled:a.current==s,onClick:()=>{l(W(n,(e=>{e.pagination.current=e.pagination.current+1})))}},(0,e.createElement)("span",null,(0,I.__)("Next","filebird-dl")),(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}))))))},se=r(296),ce=r.n(se),ue=({request:t,setRequest:r,attributes:n})=>{(0,e.useCallback)(ce()((e=>l(e)),500),[t]);const l=async e=>{r(W(t,(t=>{t.search=e,t.pagination.current=1})))};return(0,e.createElement)("div",{className:"fbdl-search-control"},(0,e.createElement)("div",{className:"fbdl-search-control-wrapper"},(0,e.createElement)("div",{className:"fbdl-title"},(0,e.createElement)("svg",{width:"40",height:"32",viewBox:"0 0 48 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M43.178 5.44153H19.1795C18.5049 5.44153 17.8302 5.15513 17.3483 4.6778L14.1678 1.43198C13.3004 0.477327 12.1438 0 10.8909 0H4.81897C2.12035 0 0 2.10024 0 4.77327V35.2267C0 37.8998 2.12035 40 4.81897 40H43.178C45.8766 40 47.997 37.8998 47.997 35.2267V10.2148C48.0933 7.54177 45.8766 5.44153 43.178 5.44153Z",fill:"#007CBA"})),(0,e.createElement)("h2",null,n.title))))};const{assets_icon_url:de,type_icons:fe}=fbdl;var me=({files:t,column:r})=>(0,e.createElement)("div",{className:"fbdl-gridview"},(0,e.createElement)("div",{className:"fbdl-gridview-wrapper"},(0,e.createElement)("div",{className:"fbdl-gridview-container"},(0,e.createElement)("div",{className:`fbdl-grid fb-col-${r}`},t.map(((t,r)=>(0,e.createElement)("div",{className:"fbdl-grid-item",key:r},(0,e.createElement)("div",{className:"fbdl-grid-item-info"},(0,e.createElement)("div",{className:"fbdl-grid-icon"},(0,e.createElement)("img",{src:`${de}${fe[t.type]?fe[t.type]:fe.no_ext}`,alt:t.alt})),(0,e.createElement)("a",{rel:"noopener noreferrer",target:"_blank",href:t.link,className:"fbdl-title"},t.title),(0,e.createElement)("span",{className:"fbdl-file-size"},t.size)),(0,e.createElement)("a",{href:t.url,target:"_blank",download:!0,rel:"noopener noreferrer",className:"fbdl-download-button"},(0,I.__)("Download","filebird-dl")))))))));const{assets_icon_url:pe,type_icons:be}=fbdl;var _e=({request:t,setRequest:r,files:n})=>{const l=({type:t})=>(0,e.createElement)(e.Fragment,null);return(0,e.createElement)("div",{className:"fbdl-listview"},(0,e.createElement)("div",{className:"fbdl-listview-wrapper"},(0,e.createElement)("div",{className:"fbdl-listview-container"},(0,e.createElement)("div",{className:"fbdl-list"},(0,e.createElement)("table",{className:"fbdl-table"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{className:"fbdl-table-first-header"},(0,e.createElement)("div",null,(0,I.__)("File","filebird-dl"),(0,e.createElement)(l,{type:"post_title"}))),(0,e.createElement)("th",{className:"fbdl-table-header"},(0,e.createElement)("div",{className:"fbdl-table-header-wrapper"},(0,I.__)("Size","filebird-dl"),(0,e.createElement)(l,{type:"size"}))),(0,e.createElement)("th",{className:"fbdl-table-header"},(0,e.createElement)("div",{className:"fbdl-table-header-wrapper"},(0,I.__)("Type","filebird-dl"))),(0,e.createElement)("th",{className:"fbdl-table-header"},(0,e.createElement)("div",{className:"fbdl-table-header-wrapper"},(0,I.__)("Last Modified","filebird-dl"),(0,e.createElement)(l,{type:"post_modified"}))),(0,e.createElement)("th",{className:"fbdl-table-last-header"},(0,I.__)("Download","filebird-dl")))),(0,e.createElement)("tbody",null,n.map((t=>(0,e.createElement)("tr",null,(0,e.createElement)("td",{className:"fbdl-list-first-item"},(0,e.createElement)("div",{className:"fbdl-list-item-icon"},(0,e.createElement)("div",{className:"fbdl-list-item-icon-wrapper"},(0,e.createElement)("img",{src:`${pe}${be[t.type]?be[t.type]:be.no_ext}`,alt:t.alt})),(0,e.createElement)("div",{className:"fbdl-list-item-title"},(0,e.createElement)("div",null,(0,e.createElement)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},t.title))))),(0,e.createElement)("td",{className:"fbdl-list-item"},(0,e.createElement)("div",null,t.size)),(0,e.createElement)("td",{className:"fbdl-list-item"},(0,e.createElement)("div",null,t.type?`.${t.type}`:"")),(0,e.createElement)("td",{className:"fbdl-list-item"},(0,e.createElement)("div",null,t.modified)),(0,e.createElement)("td",{className:"fbdl-list-last-item"},(0,e.createElement)("a",{href:t.url,target:"_blank",download:!0,rel:"noopener noreferrer"},(0,I.__)("Download","filebird-dl"))))))))))))};const{assets_icon_url:ye,type_icons:he}=fbdl;var ve=()=>(0,e.createElement)("div",{className:"fbdl-empty"},(0,e.createElement)("div",{className:"fbdl-empty-wrapper"},(0,e.createElement)("img",{src:`${ye}empty.svg`}),(0,e.createElement)("div",{className:"fbdl-not-found"},(0,I.__)("No attachments found.","filebird-dl"))));const ge=fbdl.json_url;var Ee=t=>{const r=t.loading?"fbdl-opacity-50":"";return(0,e.createElement)("div",{className:"fbdl-spinner"},t.loading&&(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"fbdl-spinner-wrapper"},(0,e.createElement)("div",{className:"spin"},(0,e.createElement)("div",{className:"spinner-grow"})),(0,e.createElement)("div",{className:"fbdl-spinner-text"},"Loading..."))),(0,e.createElement)("div",{className:r},t.children))},we=({loading:t,setLoading:r,setMaxNumPages:n,setFoundPosts:l,attributes:a,request:i,setRequest:o,layout:s,setLayout:c,column:u,setColumn:d})=>{const[f,m]=(0,e.useState)([]),[p,b]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{!async function(){r(!0);const e=await(async e=>{const t=await fetch(`${ge}/get-attachments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(e.ok)return e;throw new Error((0,I.__)("Network response was not ok.","filebird-dl"))}));return await t.json()})(i);r(!1),n(e.maxNumPages),l(e.foundPosts),m(e.files)}()}),[i]),(0,e.useEffect)((()=>{c(a.layout)}),[a.layout]),(0,e.useEffect)((()=>{d(a.column)}),[a.column]),(0,e.useEffect)((()=>{b(!0)}),[]),(0,e.useEffect)((()=>{o(W(i,(e=>{e.selectedFolder=a.request.selectedFolder})))}),[a.request.selectedFolder]),(0,e.useEffect)((()=>{o(W(i,(e=>{e.pagination.limit=a.request.pagination.limit})))}),[a.request.pagination.limit]),(0,e.useEffect)((()=>{o(W(i,(e=>{e.orderBy=a.request.orderBy})))}),[a.request.orderBy]),(0,e.useEffect)((()=>{o(W(i,(e=>{e.orderType=a.request.orderType})))}),[a.request.orderType]),(0,e.createElement)(Ee,{loading:t},f.length||t||!p?"grid"===s?(0,e.createElement)(me,{files:f,column:u}):(0,e.createElement)(_e,{request:i,setRequest:o,files:f}):(0,e.createElement)(ve,null))};const Ce={pagination:{current:1,limit:10},search:"",orderBy:"",orderType:"",selectedFolder:[]};var Ne=r=>{const[n,l]=(0,e.useState)((e=>{const t={...e.request.pagination},r={...e.request,pagination:t};return{...Ce,...r}})(r)),[a,i]=(0,e.useState)(!1),[o,s]=(0,e.useState)(0),[c,u]=(0,e.useState)(0),[d,f]=(0,e.useState)(r.layout),[m,p]=(0,e.useState)(r.column);return(0,e.createElement)(t().StrictMode,null,(0,e.createElement)(ue,{request:n,setRequest:l,attributes:r}),(0,e.createElement)(le,{request:n,setRequest:l,layout:d,setLayout:f,foundPosts:c,attributes:r}),(0,e.createElement)(we,{attributes:r,column:m,setColumn:p,layout:d,setLayout:f,request:n,setRequest:l,loading:a,setLoading:i,setMaxNumPages:s,setFoundPosts:u}),(0,e.createElement)(oe,{maxNumPages:o,foundPosts:c,request:n,setRequest:l}))};const{Card:Se,CardHeader:xe,CardBody:Pe,CardFooter:qe,Button:Oe,Modal:je,TextareaControl:Fe}=wp.components,ze=({attributes:t,isOpenShortcode:r,setOpenShortcode:n})=>{const[l,a]=(0,e.useState)(!1),i=(e=>{const t=W(e,(e=>{e.request.selectedFolder=e.request.selectedFolder.toString()}));return`[fbdl setting='${JSON.stringify(t)}']`})(t);return(0,e.createElement)(e.Fragment,null,r&&(0,e.createElement)(je,{isFullScreen:!1,title:"Shortcode",onRequestClose:()=>{n(!1),a(!1)}},(0,e.createElement)(Fe,{type:"text",rows:5,value:i,readonly:!0,id:"fbdl-shortcode-textbox"}),(0,e.createElement)("div",{style:{textAlign:"right"}},(0,e.createElement)(Oe,{variant:"secondary",onClick:()=>{const e=document.getElementById("fbdl-shortcode-textbox");e&&(e.focus(),e.select(),document.execCommand("copy")),a(!0)}},l?(0,I.__)("Copied!","filebird-dl"):(0,I.__)("Copy","filebird-dl")))))};var Me=function(){const[t,r]=(0,e.useState)({request:{pagination:{current:1,limit:5},search:"",orderBy:"post_title",orderType:"DESC",selectedFolder:[]},title:"Title",column:3,layout:"grid"}),[n,l]=(0,e.useState)(!1);return(0,e.createElement)("div",{id:"fbdl-shortcode-generator"},(0,e.createElement)(ze,{attributes:t,isOpenShortcode:n,setOpenShortcode:l}),(0,e.createElement)(Se,null,(0,e.createElement)(xe,null,(0,I.__)("FileBird Document Library Shortcode Generator","filebird-dl")),(0,e.createElement)(Pe,null,(0,e.createElement)("div",{className:"generator-container"},(0,e.createElement)("div",{id:"filebird-document-library",style:{pointerEvents:"none"},className:"preview"},(0,e.createElement)(Ne,{...t,isPreview:!0})),(0,e.createElement)("div",{className:"setting"},(0,e.createElement)("h2",null,(0,I.__)("Document Library Settings","filebird-dl")),(0,e.createElement)(te,{attributes:t,setAttributes:r}),(0,e.createElement)(Oe,{style:{width:"100%",justifyContent:"center"},isPrimary:!0,onClick:()=>l(!0)},(0,I.__)("Generate","filebird-dl"))))),(0,e.createElement)(qe,null,(0,e.createElement)("span",null,(0,I.__)("Love FileBird Document Library","filebird-dl"),"? ",(0,e.createElement)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://codecanyon.net/item/filebird-document-library-pro/reviews/39157912"},(0,I.__)("Please write us a glowing review here.","filebird-dl")),(0,e.createElement)("span",{style:{color:"red"}},"♥")))))};const{render:ke}=wp.element;document.addEventListener("DOMContentLoaded",(function(){ke((0,e.createElement)(React.StrictMode,null,(0,e.createElement)(Me,null)),document.getElementById("fbdl-shortcode"))}))}()}();