(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1111:function(e,t,r){},1192:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(5),c=r(134),o=r(15),i=r(10),l=r.n(i),s=r(835),u=r(3);function b(e,t,r,a,n,c,o){try{var i=e[c](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(a,n)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var c=e.apply(t,r);function o(e){b(c,a,n,o,i,"next",e)}function i(e){b(c,a,n,o,i,"throw",e)}o(void 0)}))}}var p=function(e,t){var r,a,c,o,i=Object(s.a)().setTemplateData;return{sendTestEmail:(o=m(regeneratorRuntime.mark((function e(t,r,a,c,o,i){var s,u,b,m,p,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>6&&void 0!==d[6]&&d[6],u=d.length>7&&void 0!==d[7]?d[7]:{},b=d.length>8&&void 0!==d[8]&&d[8],m=d.length>9&&void 0!==d[9]?d[9]:{},e.prev=4,p={email:t,content:JSON.stringify({subject:r,body:a,type:c,mail_data:o,preheader:i,utmEnabled:s,utmDetails:u,overRideSenderInfo:b,overRideInfo:m})},e.next=8,l()({method:"POST",path:Object(n.m)("/send-test-email"),data:p});case 8:return e.abrupt("return",2);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",3);case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),function(e,t,r,a,n,c){return o.apply(this,arguments)}),saveEditorContent:(c=m(regeneratorRuntime.mark((function r(a){var c,o,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(""!=a[0].editor.body){r.next=2;break}return r.abrupt("return",2);case 2:return c=t,"editor"===(o=Object(u.isEmpty)(a)?{}:a[0]).type?o.hasOwnProperty("editor")&&(o.editor.hasOwnProperty("body")&&(c.template=o.editor.body),o.editor.hasOwnProperty("design")&&(c.data.design=o.editor.design)):c.template=o.body,s={content:JSON.stringify({template:c.template,data:c.data})},r.prev=6,r.next=9,l()({method:"POST",path:Object(n.m)("/template/".concat(e,"/save-email-content")),data:s}).then((function(e){200==e.code&&i(e.result)}));case 9:return r.abrupt("return",2);case 12:return r.prev=12,r.t0=r.catch(6),r.abrupt("return",3);case 15:case"end":return r.stop()}}),r,null,[[6,12]])}))),function(e){return c.apply(this,arguments)}),uploadImage:(a=m(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("image",t),e.prev=2,e.next=5,l()({method:"POST",path:Object(n.m)("/upload-image"),body:r});case 5:return a=e.sent,e.abrupt("return",a&&a.result?a.result:"");case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e){return a.apply(this,arguments)}),fetchCurrentMailEditorContent:(r=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","");case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}},d=r(154),f=r(4),O=r(136);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},c=Object.keys(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var v={1:"rich",2:"wc",3:"html",4:"editor"},g=function(){var e=Object(O.a)("singleTemplateData"),t=e.getStateProp;return j(j({},h(e,["getStateProp"])),{},{getTemplateData:function(){return t("data")},getListData:function(){return t("listData")},getFormattedTemplateData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.isEmpty)(e))return{};var t={body:"",editor:{body:Object(n.db)(),design:Object(n.cb)()},preheader:"",subject:"",type:"rich",utm:{source:"Newsletter",medium:"email",name:"",content:"",term:""},utmEnabled:!1};return e.hasOwnProperty("template")&&(e.hasOwnProperty("mode")&&4===parseInt(e.mode)?t.editor.body=e.template:t.body=e.template),e.hasOwnProperty("subject")&&(t.subject=e.subject),e.hasOwnProperty("mode")&&(t.type=v[e.mode]),e.hasOwnProperty("subject")&&(t.subject=e.subject),e.hasOwnProperty("data")&&!Object(u.isEmpty)(e.data)&&(t.subject=e.subject,e.data.hasOwnProperty("preheader")&&(t.preheader=e.data.preheader),e.data.hasOwnProperty("utmEnabled")&&e.data.utmEnabled&&(t.utmEnabled=e.data.utmEnabled),e.data.hasOwnProperty("utm")&&(t.utm=e.data.utm),e.data.hasOwnProperty("design")&&4===parseInt(e.mode)&&(t.editor.design=e.data.design)),t}})},E=r(2),P=r(67);function N(e,t,r,a,n,c,o){try{var i=e[c](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(a,n)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,c=e}finally{try{a||null==i.return||i.return()}finally{if(n)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var x=function(e){var t=e.templateId,r=Object(a.useContext)(n.d),o=Object(s.a)(),i=o.fetch,b=o.setTemplateData,m=o.setTemplateListData,O=g(),w=O.getLoading,j=O.getTemplateData,y=O.getFormattedTemplateData,h=(0,O.getListData)(),v={rich:1,wc:2,html:3,editor:4},_=Object(c.a)().setL2Title,S=T(Object(a.useState)({loading:!1,status:!1}),2),k=S[0],x=S[1],C=T(Object(a.useState)([]),2),I=C[0],L=C[1];Object(a.useEffect)((function(){return parseInt(t)>0&&i(t),function(){b({}),m("")}}),[]);var R=w(),A=j();Object(a.useEffect)((function(){_(A.hasOwnProperty("title")?A.title:""!=h?h:Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[R,A]);var F=function(){var e,a=(e=regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B()){e.next=13;break}return x({status:!0,loading:!0}),a={content:JSON.stringify(A)},e.prev=3,e.next=6,l()({path:Object(n.m)("/template/".concat(t)),method:"POST",data:a}).then((function(e){200==e.code&&(r(e.message),Object(n.gb)(r,2e3),x({}))}));case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(3),r(e.t0.message),Object(n.gb)(r,2e3),x({});case 13:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,r=arguments;return new Promise((function(a,n){var c=e.apply(t,r);function o(e){N(c,a,n,o,i,"next",e)}function i(e){N(c,a,n,o,i,"throw",e)}o(void 0)}))});return function(){return a.apply(this,arguments)}}(),B=function(){var e=!1,t=[];return A.hasOwnProperty("title")&&!Object(u.isEmpty)(A.title)||(e=!0,t.push(Object(E.__)("Name is required.","wp-marketing-automations"))),A.hasOwnProperty("subject")&&!Object(u.isEmpty)(A.subject)||(e=!0,t.push(Object(E.__)("Subject is required.","wp-marketing-automations"))),A.hasOwnProperty("template")&&!Object(u.isEmpty)(A.template)||(e=!0,t.push(Object(E.__)("Email content cannot be empty.","wp-marketing-automations"))),L(t),e},M=Object(a.createElement)(a.Fragment,null,Object(a.createElement)(f.Card,{className:"bwf-template-card bwf-template-placeholder"},Object(a.createElement)("div",{className:"bwf-template-card-header bwf-h4"},"Template"),Object(a.createElement)("div",{className:"bwf-p-15"},[1,2,3].map((function(e){return Object(a.createElement)("div",{key:e,className:"bwf-placeholder-temp"})})),Object(a.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(a.createElement)("div",{className:"bwf-btn-section"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-btn "}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-btn "}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-btn"})),Object(a.createElement)("div",{className:"bwf-btn-section"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-btn btn-small"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-btn btn-small"}))),Object(a.createElement)("div",{key:4,className:"bwf-editor-placeholder"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-small"}),Object(a.createElement)("div",{className:"bwf-btn-section"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-btn"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-btn"})),Object(a.createElement)("div",{className:"bwf_clear_30"}),Object(a.createElement)("div",{key:5,className:"bwf-placeholder-temp bwf-medium"}),Object(a.createElement)("div",{className:"bwf_clear_30"}))),Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(a.createElement)("div",{className:"bwf-h-0"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30"}))),J=p(t,A);return Object(a.createElement)("div",{className:"bwfcrm-overview-wrap bwf-crm-single-template-section"},R||Object(u.isEmpty)(A)?M:Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-template-card"},Object(a.createElement)("div",{className:"bwf-template-card-header bwf-h4"},Object(E.__)("Template","wp-marketing-automations")),Object(a.createElement)(f.Card,{className:"bwf-name-card bwf-p-25"},!Object(u.isEmpty)(I)&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)(P.a,null),Object(a.createElement)(f.Notice,{status:"error",isDismissible:!1,className:"bwf-mtb-10"},I.map((function(e,t){return Object(a.createElement)(a.Fragment,{key:"bwf-template-card-error-".concat(t)},e,Object(a.createElement)("br",null))})))),Object(a.createElement)(f.TextControl,{label:Object(E.__)("Name","wp-marketing-automations"),placeholder:Object(E.__)("Enter Template Name","wp-marketing-automations"),value:A.hasOwnProperty("title")?A.title:"",autoComplete:"off",onChange:function(e){b(D(D({},A),{},{title:e}))},disabled:k.loading})),Object(a.createElement)(d.a,{disableDefaultButtons:!0,initData:{content:[y(A)]},validateEmailContent:!1,apiMethods:J,showSenderInfo:!1,showSaveTemplate:!1,showTemplateTypeSelector:!0,returnData:!0,setMailData:function(e){var t=A;(e=e[1]).hasOwnProperty("subject")&&(t.subject=e.subject),e.hasOwnProperty("preheader")&&(t.data=D(D({},t.data),{},{preheader:e.preheader})),e.hasOwnProperty("type")&&v.hasOwnProperty(e.type)&&(t.mode=v[e.type]),e.hasOwnProperty("utmEnabled")&&(t.data=D(D({},t.data),{},{utmEnabled:e.utmEnabled})),e.hasOwnProperty("utm")&&(t.data=D(D({},t.data),{},{utm:e.utm})),"editor"===e.type?e.hasOwnProperty("editor")&&(e.editor.hasOwnProperty("body")&&(t.template=e.editor.body),e.editor.hasOwnProperty("design")&&(t.data.design=e.editor.design)):t.template=e.body,b(D(D({},A),t))},showTab:!1,disabled:k.loading,showTemplateButton:!1})),Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)("div",{className:"bwf-crm-stepper-navigation bwf_text_right"},Object(a.createElement)(f.Button,{isPrimary:!0,className:"bwf-crm-navigation-next",isBusy:k.loading,disabled:k.loading,onClick:function(){F()}},Object(E.__)("Save","wp-marketing-automations")))))},C=r(875);r(1111),t.default=function(e){var t=e.match.params.id,r=Object(o.i)(),i=Object(c.a)(),l=i.setBackLink,s=i.setBackLinkLabel,u=i.setL2Nav;return Object(C.a)(Object(E.__)("Templates","wp-marketing-automations")),Object(a.useEffect)((function(){Object(n.g)("Template #"+t),u(""),l(Object(o.f)({},"/templates",r)),s("All Templates")})),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(P.a,null),Object(a.createElement)(x,{templateId:t,query:r}))}},835:function(e,t,r){"use strict";var a=r(137),n=r(5);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},c=Object.keys(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}t.a=function(){var e=Object(a.a)("singleTemplateData"),t=e.fetch,r=e.setStateProp;return o(o({},l(e,["fetch","setStateProp"])),{},{fetch:function(e){t("GET",Object(n.m)("/template/".concat(e)))},setTemplateData:function(e){r("data",e)},setTemplateListData:function(e){r("listData",e)}})}},875:function(e,t,r){"use strict";var a=r(134),n=r(0);t.a=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},c=Object(a.a)(),o=c.setActiveMultiple,i=c.setL2NavType,l=c.setL2Nav,s=c.resetHeaderMenu,u=c.setPageHeader,b=c.setPageCountData,m=c.setL2Content;return Object(n.useEffect)((function(){s(),o({leftNav:"templates",rightNav:"templates"}),i("menu"),l(r.templates_nav),u("Templates"),b({templates:t}),e&&m(e)}),[t]),!0}}}]);