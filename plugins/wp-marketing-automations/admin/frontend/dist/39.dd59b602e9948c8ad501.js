(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1187:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(2),c=a(262),i=a(260),o=a(259),l=a(799),s=a(68),b=a(5),u=a(8),m=function(e){var t=Object(s.a)(Object(b.Y)()).formatAmount,a=e.query,m=l.a.getCartAnalyticsLoading,f=l.a.getCartAnalytics,p=(a.chart&&a.chart,m()),O=f(),v=function(e){if(!O||!O.hasOwnProperty("totals"))return 0;var t=O.totals;return t.hasOwnProperty(e)?t[e]:void 0};return Object(r.createElement)("div",{className:"bwf-crm-cart-report-tiles"},Object(r.createElement)(c.a,null,(function(){var e=[];return e.push(Object(r.createElement)(i.a,{key:1,value:v("recoverable_carts"),label:Object(n.__)("Recoverable Carts","wp-marketing-automations"),tileIcon:Object(r.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(r.createElement)(u.a,{icon:"cart-recoverable",size:30}))}),Object(r.createElement)(i.a,{key:2,value:t(v("potential_revenue")),label:Object(n.__)("Potential Revenue","wp-marketing-automations"),tileIcon:Object(r.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(r.createElement)(u.a,{icon:"revenue-potential",size:30}))}),Object(r.createElement)(i.a,{key:3,value:v("recovered_cart"),label:Object(n.__)("Recovered Carts","wp-marketing-automations"),tileIcon:Object(r.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(r.createElement)(u.a,{icon:"cart-recovered",size:30}))}),Object(r.createElement)(i.a,{key:4,value:t(v("recovered_revenue")),label:Object(n.__)("Recovered Revenue","wp-marketing-automations"),tileIcon:Object(r.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(r.createElement)(u.a,{icon:"revenue-recovered",size:30}))}),Object(r.createElement)(i.a,{key:5,value:v("recovery_rate")+"%",label:Object(n.__)("Recovery Rate","wp-marketing-automations"),tileIcon:Object(r.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(r.createElement)(u.a,{icon:"recovery-rate",size:30}))}),Object(r.createElement)(i.a,{key:6,value:v("lost_cart"),label:Object(n.__)("Lost Carts","wp-marketing-automations"),tileIcon:Object(r.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(r.createElement)(u.a,{icon:"cart-lost",size:30}))})),p?Object(r.createElement)(o.a,{numberOfItems:6,hideDelta:!0}):e})))},f=a(261),p=a(29),O=function(e){var t=e.query,a=l.a.getCartAnalytics,c=l.a.getCartAnalyticsLoading,i=(t.chart&&t.chart,c()),o=a(),s=t.chartType?t.chartType:"line",b=Object(p.f)(t),u=Object(p.b)(function(e){return e.period&&null!=e.period&&""!=e.period||(e.period="month"),e.compare&&null!=e.compare&&""!=e.compare||(e.compare="previous_year"),e}(t));u.includes(b)||(b=u[u.length-1]);var m=function(e){var t=[];o&&o.hasOwnProperty("intervals")&&o.intervals.map((function(a){"cart"==e&&t.push({date:a.start_date,recoverable_carts:{label:Object(n.__)("Recoverable Carts","wp-marketing-automations"),value:parseFloat(a.subtotals.recoverable_carts)},recovered_cart:{label:Object(n.__)("Recovered Carts","wp-marketing-automations"),value:parseFloat(a.subtotals.recovered_cart)},lost_cart:{label:Object(n.__)("Lost Carts","wp-marketing-automations"),value:parseFloat(a.subtotals.lost_cart)}}),"revenue"===e&&t.push({date:a.start_date,potantial_revenue:{label:Object(n.__)("Potential Revenue","wp-marketing-automations"),value:parseFloat(a.subtotals.potential_revenue)},recovered_revenue:{label:Object(n.__)("Recovered Revenue","wp-marketing-automations"),value:parseFloat(a.subtotals.recovered_revenue)}})}));return t};return Object(r.createElement)("div",{className:"bwf-crm-cart-report-table-wrapper"},Object(r.createElement)("div",{className:"bwf-crm-cart-report-table-block"},Object(r.createElement)(f.a,{isRequesting:i,data:m("cart"),title:Object(n.__)("Carts","wp-marketing-automations"),interval:b,layout:"item-comparison",chartType:s,hideTypeSelect:!0,legendPosition:"bottom",interactiveLegend:!0})),Object(r.createElement)("div",{className:"bwf-crm-cart-report-table-block"},Object(r.createElement)(f.a,{isRequesting:i,data:m("revenue"),title:Object(n.__)("Revenue","wp-marketing-automations"),interval:b,layout:"item-comparison",chartType:s,hideTypeSelect:!0,legendPosition:"bottom",interactiveLegend:!0})))},v=a(145),d=a(35),g=(a(412),a(15));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h=function(e){var t=e.query;return Object(r.createElement)("div",{className:"bwf-crm-cart-report-filter"},Object(r.createElement)(d.b,{component:"div",className:"bwf-filters"},Object(r.createElement)("div",{className:"bwfcrm-filters-basic-filters"},Object(r.createElement)(v.a,{key:JSON.stringify(t),onRangeSelect:function(e){var a=y(y({},t),e);delete a.compare,Object(g.k)(a,"/",{})},dateQuery:function(e){e.compare="previous_year";var t=Object(p.e)(e),a=t.period,r=t.compare,n=t.before,c=t.after,i=Object(p.c)(e);return{period:a,compare:r,before:n,after:c,primaryDate:i.primary,secondaryDate:i.secondary}}(t),isoDateFormat:p.g,hideCompare:!0}))))},_=a(811),E=a(3),k=(a(954),a(6)),T=a.n(k),P=a(4),C=a(268),N=a(955),L=a.n(N),A=a(956),D=a.n(A),S=a(812),z=a(67),R=a(252);t.default=function(){var e=Object(_.a)().fetchCartAnalytics;Object(S.a)("carts",!1,"");var t=Object(g.i)(),a=t.chartType?t.chartType:"line",c=function(t,a){var r=function(e){return e.compare="previous_year",Object(p.c)(e).primary}(t),n="",c="";r&&(Object(E.isEmpty)(r.after)||(n=r.after.format("YYYY-MM-DD HH:mm:ss")),Object(E.isEmpty)(r.before)||(c=r.before.format("YYYY-MM-DD 23:59:59")),Object(E.isEmpty)(n)||Object(E.isEmpty)(c)||e(n,c,a))};t.hasOwnProperty("period")||(t.period="month");var i=t.period,o=t.compare,l=t.interval,s=t.after,f=t.before;Object(r.useEffect)((function(){Object(b.g)("Cart Analytics");var e=t.hasOwnProperty("interval")?t.interval:"day";c(t,e)}),[i,o,l,s,f]);var v=function(e){delete t.compare,Object(g.k)({chartType:e},"/",t)},d=function(e){delete t.compare,Object(g.k)({interval:e},"/",t)},j=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(u.a,{icon:"cart-icon",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(n.__)("Cart Tracking is disabled","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(n.__)("Click on the button below to go to Settings > Carts to enable cart tracking. Once activated, you will be able to capture emails as soon buyer enters it.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(n.__)("Enable Tracking","wp-marketing-automations"),onClick:function(){Object(g.k)({page:"autonami",path:"/settings"},"/",{})}}]}}];return Object(r.createElement)(r.Fragment,null,Object(b.jb)()?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.a,null),Object(r.createElement)("div",{className:"bwf-crm-analytics-wrap bwf-crm-cart-report-wrap"},Object(r.createElement)(h,{query:t}),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(C.a,{className:"bwf-cart-report-header-chart",title:Object(n.__)("Performance","wp-marketing-automations")}),Object(r.createElement)(m,{query:t}),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)(C.a,{className:"bwf-cart-report-header-chart has-interval-select",title:Object(n.__)("Charts","wp-marketing-automations")},function(e){var t=e.chartInterval,a=e.query,c=Object(p.b)(a);if(!c||c.length<1)return null;var i={hour:Object(n.__)("By hour","wp-marketing-automations"),day:Object(n.__)("By day","wp-marketing-automations"),week:Object(n.__)("By week","wp-marketing-automations"),month:Object(n.__)("By month","wp-marketing-automations"),quarter:Object(n.__)("By quarter","wp-marketing-automations"),year:Object(n.__)("By year","wp-marketing-automations")};return Object(r.createElement)(P.SelectControl,{className:"bwf-chart__interval-select",value:t,options:c.map((function(e){return{value:e,label:i[e]}})),onChange:d})}({interval:l,query:t}),Object(r.createElement)(P.NavigableMenu,{className:"bwf-chart__types",orientation:"horizontal",role:"menubar"},Object(r.createElement)(P.Button,{className:T()("bwf-chart__type-button",{"bwf-chart__type-button-selected":!a||"line"===a}),title:Object(n.__)("Line chart","wp-marketing-automations"),"aria-checked":"line"===a,role:"menuitemradio",tabIndex:"line"===a?0:-1,onClick:function(){return v("line")}},Object(r.createElement)(L.a,null)),Object(r.createElement)(P.Button,{className:T()("bwf-chart__type-button",{"bwf-chart__type-button-selected":"bar"===a}),title:Object(n.__)("Bar chart","wp-marketing-automations"),"aria-checked":"bar"===a,role:"menuitemradio",tabIndex:"bar"===a?0:-1,onClick:function(){return v("bar")}},Object(r.createElement)(D.a,null)))),Object(r.createElement)(O,{query:t}))):Object(r.createElement)(R.a,{data:j}))}},799:function(e,t,a){"use strict";var r=a(136),n=a(257),c=Object(r.a)(n.b.cartAnalytics).getStateProp,i=Object(r.a)(n.b.contactAnalytics).getStateProp,o=Object(r.a)(n.b.emailAnalytics).getStateProp,l=Object(r.a)(n.b.emailTable).getStateProp,s=Object(r.a)(n.b.engagementAnalytics).getStateProp,b=Object(r.a)(n.b.directEmailTable).getStateProp,u={getCartAnalytics:function(){return c("data")},getCartAnalyticsLoading:function(){return c("isLoading")},getContactAnalytics:function(){return i("data")},getContactAnalyticsLoading:function(){return i("isLoading")},getEmailAnalytics:function(){return o("data")},getEmailAnalyticsLoading:function(){return o("isLoading")},getEmailTableList:function(){return l("data")},getEmailTableTotal:function(){return l("total")},getEmailTableOffset:function(){return l("offset")},getEmailTableLimit:function(){return l("limit")},getEmailTableLoading:function(){return l("isLoading")},getEmailTablePage:function(){return parseInt(l("offset"))/parseInt(l("limit"))+1},getEngagementAnalytics:function(){return s("data")},getEngagementAnalyticsLoading:function(){return s("isLoading")},getDirectEmailTableList:function(){return b("data")},getDirectEmailTableTotal:function(){return b("total")},getDirectEmailTableOffset:function(){return b("offset")},getDirectEmailTableLimit:function(){return b("limit")},getDirectEmailTableLoading:function(){return b("isLoading")},getDirectEmailTablePage:function(){return parseInt(b("offset"))/parseInt(b("limit"))+1}};t.a=u},811:function(e,t,a){"use strict";var r=a(137),n=a(5),c=a(257),i=a(17),o=function(e){var t=0;return"automation"===e?t=1:"broadcast"===e&&(t=2),t};t.a=function(){var e=Object(r.a)(c.b.cartAnalytics).fetch,t=Object(r.a)(c.b.contactAnalytics),a=t.fetch,l=t.setStateProp,s=Object(r.a)(c.b.emailAnalytics),b=s.fetch,u=s.setStateProp,m=Object(r.a)(c.b.emailTable),f=m.fetch,p=m.setStateProp,O=Object(r.a)(c.b.engagementAnalytics),v=O.fetch,d=O.setStateProp,g=Object(r.a)(c.b.directEmailTable),j=g.fetch,y=g.setStateProp;return{fetchCartAnalytics:function(t,a,r){e("GET",Object(n.m)("/analytics/carts/")+"?"+Object(i.stringify)({after:t,before:a,interval:r}))},fetchContactAnalytics:function(e,t,r){a("GET",Object(n.m)("/analytics/contacts/")+"?"+Object(i.stringify)({after:e,before:t,interval:r}))},fetchEmailAnalytics:function(e,t,a,r,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;b("GET",Object(n.m)("/analytics/emails/chart/")+"?"+Object(i.stringify)({after:e,before:t,interval:a,oid:r,type:o(c),mode:l}))},fetchEmailTable:function(e,t,a,r,c,l,s){var b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;f("GET",Object(n.m)("/analytics/emails/tabular/")+"?"+Object(i.stringify)({after:a,before:r,interval:c,oid:l,type:o(s),limit:e,offset:t,mode:b}))},setEmailTableData:function(e,t){p(e,t)},fetchEngagementData:function(e,t){v("GET",Object(n.m)("/analytics/engagement")+"?"+Object(i.stringify)({after:e,before:t}))},setContactAnalyticsData:function(e,t){l(e,t)},setEmailAnalyticsData:function(e,t){u(e,t)},setEngagementData:function(e,t){d(e,t)},fetchDirectEmailTable:function(e,t,a,r,c){j("GET",Object(n.m)("/analytics/direct-emails/tabular/")+"?"+Object(i.stringify)({after:a,before:r,interval:c,limit:e,offset:t}))},setDirectEmailTableData:function(e,t){y(e,t)}}}},812:function(e,t,a){"use strict";var r=a(134),n=a(0);t.a=function(e,t,a){var c=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},i=Object(r.a)(),o=i.setActiveMultiple,l=i.resetHeaderMenu,s=i.setL2NavType,b=i.setL2Nav,u=i.setBackLink,m=i.setL2Title,f=i.setPageHeader;return Object(n.useEffect)((function(){l(),!t&&s("menu"),!t&&b(c.reports_nav),o({leftNav:"analytics-"+e,rightNav:e+"-analytics"}),t&&u(t),a&&m(a),f("Analytics")}),[e,a]),!0}},954:function(e,t,a){},955:function(e,t,a){"use strict";var r=Object.assign||function(e){for(var t,a=1;a<arguments.length;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.size,a=void 0===t?24:t,n=e.onClick,c=(e.icon,e.className),o=function(e,t){var a={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["size","onClick","icon","className"]),l=["gridicon","gridicons-line-graph",c,!1,!1,!1].filter(Boolean).join(" ");return i.default.createElement("svg",r({className:l,height:a,width:a,onClick:n},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),i.default.createElement("g",null,i.default.createElement("path",{d:"M3 19h18v2H3zm3-3c1.1 0 2-.9 2-2 0-.5-.2-1-.5-1.3L8.8 10H9c.5 0 1-.2 1.3-.5l2.7 1.4v.1c0 1.1.9 2 2 2s2-.9 2-2c0-.5-.2-.9-.5-1.3L17.8 7h.2c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2c0 .5.2 1 .5 1.3L15.2 9H15c-.5 0-1 .2-1.3.5L11 8.2V8c0-1.1-.9-2-2-2s-2 .9-2 2c0 .5.2 1 .5 1.3L6.2 12H6c-1.1 0-2 .9-2 2s.9 2 2 2z"})))};var n,c=a(7),i=(n=c)&&n.__esModule?n:{default:n};e.exports=t.default},956:function(e,t,a){"use strict";var r=Object.assign||function(e){for(var t,a=1;a<arguments.length;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=e.size,n=void 0===a?24:a,c=e.onClick,o=(e.icon,e.className),l=function(e,t){var a={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["size","onClick","icon","className"]),s=["gridicon","gridicons-stats-alt",o,!1,!1,(t=n,!(0!=t%18)&&"needs-offset-y")].filter(Boolean).join(" ");return i.default.createElement("svg",r({className:s,height:n,width:n,onClick:c},l,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),i.default.createElement("g",null,i.default.createElement("path",{d:"M21 21H3v-2h18v2zM8 10H4v7h4v-7zm6-7h-4v14h4V3zm6 3h-4v11h4V6z"})))};var n,c=a(7),i=(n=c)&&n.__esModule?n:{default:n};e.exports=t.default}}]);