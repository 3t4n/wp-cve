(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1110:function(e,t,n){},1174:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(3),r=n(6),o=n.n(r),i=n(2),s=n(4),l=n(8),m=n(5),b=n(795),u=function(e){var t=e.data,n=void 0===t?{}:t,r=n.nice_name,o=void 0===r?"":r,i=n.source,s=void 0===i?"":i;return Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick is-start-node-selected"},Object(a.createElement)("div",{className:"bwf-node-icon icon-start"},Object(a.createElement)(l.a,{size:22,icon:"rocket"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(c.isEmpty)(s)?"":s),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(c.isEmpty)(o)?"":o)))),Object(a.createElement)(b.d,{type:"source",position:"bottom",isConnectable:!1}))},d=function(e){var t=e.data,n=void 0===t?{}:t,r=n.subject,o=void 0===r?"":r,i=n.nice_name,s=void 0===i?"":i,m=n.integration,u=void 0===m?"":m;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(b.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-action"},Object(a.createElement)(l.a,{size:22,icon:"charge"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},"Step"),Object(a.createElement)("div",{className:"bwf-node-content-label"},"Action")),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(c.isEmpty)(u)?"":u),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(c.isEmpty)(s)?"":s),!Object(c.isEmpty)(o)&&Object(a.createElement)("div",{className:"bwf-node-inner-label bwf-two-line-ellipse-text"},o)))))))),Object(a.createElement)(b.d,{type:"source",isConnectable:!1,position:"bottom"}))},p=function(e){var t=e.data,n=(void 0===t?{}:t).values,r=void 0===n?[]:n;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(b.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon"},Object(a.createElement)(l.a,{size:26,icon:"condition"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},"Step"),Object(a.createElement)("div",{className:"bwf-node-content-label"},"Conditional")),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(c.isEmpty)(r)?"No Condition Found":Object(a.createElement)(a.Fragment,null,r.map((function(e,t){return Object(a.createElement)(a.Fragment,null,0!==t&&Object(a.createElement)("div",{className:"bwf-step-divider divider-line bwf-or"},Object(a.createElement)("span",{className:"bwf-divider"},"OR")),e.map((function(e,t){return Object(a.createElement)(a.Fragment,null,0!==t&&Object(a.createElement)("div",{className:"bwf-step-divider"},Object(a.createElement)("span",{className:"bwf-divider"},"AND")),Object(a.createElement)("div",{className:"bwf-step-content-content"},e))})))}))))))),Object(a.createElement)(b.d,{type:"source",position:"bottom",isConnectable:!1}))},f=function(){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(b.d,{type:"source",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-node-content bwf-end"},Object(a.createElement)("div",{className:"bwf-node-content-item"},"End Automation"))))},O=function(e){var t=e.data,n=void 0===t?{}:t,r=n.nice_name,o=void 0===r?"":r,s=n.source_name;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(b.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-goal"},Object(a.createElement)(l.a,{size:26,icon:"goal"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Goal","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(c.isEmpty)(s)?"":s),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(c.isEmpty)(o)?"":o))))))),Object(a.createElement)(b.d,{type:"source",position:"bottom",isConnectable:!1}))},w={1:Object(i.__)("Delay for a specific period","wp-marketing-automations-crm"),2:Object(i.__)("Delay until a specific date and time","wp-marketing-automations-crm"),3:Object(i.__)("Delay until a custom field date","wp-marketing-automations-crm")},j=function(e){var t=e.data,n=e.id,c=t.type,r=void 0===c?1:c,o=t.value,i=void 0===o?"":o;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper","node-id":n},Object(a.createElement)(b.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(a.createElement)(l.a,{size:28,icon:"time-left"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},"Step"),Object(a.createElement)("div",{className:"bwf-node-content-label"},"Delay")),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},w.hasOwnProperty(parseInt(r))?w[parseInt(r)]:""),Object(a.createElement)("div",{className:"bwf-node-content-label"},i))))))),Object(a.createElement)(b.d,{type:"source",position:"bottom",isConnectable:!1}))},v=function(e){return Object(a.createElement)("div",{className:e&&e.data&&e.data.direction&&"no"===e.data.direction?"bwf-yes-no-node  bwf-no-node":"bwf-yes-no-node bwf-yes-node"},Object(a.createElement)(b.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(a.createElement)("span",{className:"bwf-yes-no-wrap"},e&&e.data&&e.data.direction&&"no"===e.data.direction?"No":"Yes"),Object(a.createElement)(b.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))},E=function(e){var t=e.data,n=void 0===t?{}:t;return Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick is-start-node-selected"},Object(a.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(a.createElement)(l.a,{size:26,icon:"exit"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Exit Automation","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"},n.hasOwnProperty("step_status")&&3===parseInt(n.step_status)&&Object(a.createElement)("div",{className:"bwf-node-stat deleted"},"Deleted")))),Object(a.createElement)(b.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}))},y=(n(848),n(874),n(849),n(889)),g=n.n(y),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.type)return 200+t;var a=0;switch(e.type){case"start":a=n?90:60;break;case"end":a=30;break;case"exit":a=65;break;case"wait":a=n&&e.data&&e.data.sidebarValues?160:105;break;case"yesNoNode":a=n?50:20;break;case"benchmark":a=n&&e.data&&e.data.benchmark?165:120;break;case"action":var r=e.data&&e.data.selected?e.data.selected:"";a=""!==r?n?165:120:105;break;case"conditional":var o=Object(c.flatten)(e.data.values).length,i=o-1;a=o?32*o+29*i+75:150,n||(a-=30);break;default:a=200}return a+t},N=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=new g.a.graphlib.Graph;return a.setDefaultEdgeLabel((function(){return{}})),a.setGraph({rankdir:"TB",ranksep:90,nodesep:100}),e.forEach((function(e){Object(b.k)(e)?a.setNode(e.id,{width:280,height:h(e,3,t)+n}):a.setEdge(e.source,e.target,{weight:"conditional"===e.type?2:5})})),g.a.layout(a),e.map((function(e){if(Object(b.k)(e)){var n=a.node(e.id);e.targetPosition="top",e.sourcePosition="bottom";var c=h(e,"conditional"===e.type?70:50,t);e.position={x:n.x-140+Math.random()/1e3,y:n.y-c/2}}return e}))};function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,c=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(c)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var S=function(e){var t=e.recipeID,n=e.previewData,r={start:u,action:d,conditional:p,end:f,benchmark:O,wait:j,yesNoNode:v,exit:E},o=_(Object(a.useState)([]),2),i=o[0],s=o[1],l=Object(b.l)(),m=Object(b.n)().setCenter,w=Object(a.useRef)();return Object(a.useEffect)((function(){Object(c.isNull)(document.querySelector("#bwf-single-automation-wrap"))||(w.current=document.querySelector("#bwf-single-automation-wrap").getBoundingClientRect(),s(n))}),[]),Object(a.useEffect)((function(){var e=0,t=0,n=l.getState().nodes;if(n.length&&w.current){var a=n[0];a.hasOwnProperty("__rf")?(e=a.__rf.position.x+140,t=a.__rf.position.y):(e=a.position.x+140,t=a.position.y),t=parseFloat(t)+.45*parseFloat(w.current.height),m(e,t,1)}}),[i]),Object(a.createElement)("div",{id:"bwf-single-automation-wrap",className:"bwf-automation-wrap",key:t},Object(a.createElement)(b.f,{defaultZoom:1,minZoom:.5,maxZoom:4,nodeTypes:r,nodesConnectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,elements:N(i,!1)},Object(a.createElement)(b.c,{showInteractive:!1}),Object(a.createElement)(b.a,null)))},C=n(10),x=n.n(C),P=n(44);function A(e,t,n,a,c,r,o){try{var i=e[r](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,c)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,c=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(c)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var I=function(e){var t=e.recipeData,n=e.onRequestClose,r=e.isImporting,o=e.importRecipe,b=R(Object(a.useState)(!0),2),u=b[0],d=b[1],p=R(Object(a.useState)({}),2),f=p[0],O=p[1],w=function(){var e,n=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,x()({path:Object(m.m)("/automation/recipe/?recipe_slug=".concat(t.slug)),method:"GET"}).then((function(e){d(!1),200===e.code&&(Object(c.isEmpty)(e.result)||O(e.result))}));case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),d(!1),O(e.t0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var t=this,n=arguments;return new Promise((function(a,c){var r=e.apply(t,n);function o(e){A(r,a,c,o,i,"next",e)}function i(e){A(r,a,c,o,i,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){O({}),d(!0),Object(c.isEmpty)(t)||w()}),[t]),Object(a.createElement)(a.Fragment,null,!Object(c.isEmpty)(t)&&Object(a.createElement)(s.Modal,{title:"",onRequestClose:n,className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen bwf-recipe-preview-modal",shouldCloseOnClickOutside:!1},Object(a.createElement)("div",{className:"bwf-recipe-preview-content-wrap"},Object(a.createElement)("div",{className:"bwf-stretch-header-customer-journey"},Object(a.createElement)("div",{className:"bwf-wrapper"},Object(a.createElement)("div",{className:"bwf-left-section"},Object(a.createElement)("div",{className:"bwf-back-button bwf-display-flex bwf-cursor-pointer",onClick:n},Object(a.createElement)(l.a,{icon:"arrow-left",size:20})),Object(a.createElement)("div",{className:"bwf-title bwf-h3"},t.hasOwnProperty("name")?t.name:""),t.hasPRO&&Object(a.createElement)("div",{className:"bwf-recipe-paid"},Object(a.createElement)("span",null,Object(i.__)("PRO")))),Object(a.createElement)("div",{className:"bwf-right-section"},Object(a.createElement)(s.Button,{isPrimary:!0,onClick:function(){return o(t.slug,t.name,!!t.hasOwnProperty("hasPRO")&&t.hasPRO)},isBusy:r&&r.loading,disabled:r&&r.loading||u||Object(c.isEmpty)(f)||f.hasOwnProperty("code")&&400===f.code},Object(i.__)("Import"))))),Object(a.createElement)("div",{className:"bwf-recipe-preview-sidebar"},Object(a.createElement)("div",{className:"bwf-about-recipe"},Object(a.createElement)("div",{className:"bwf-recipe-title"},Object(i.__)("Description")),Object(a.createElement)("div",{className:"bwf-recipe-description"},t.description)),Object(a.createElement)("div",{className:"bwf-recipe-tags"},!Object(c.isEmpty)(t.tag)&&Object.values(t.tag).map((function(e,t){return Object(a.createElement)("span",{className:"bwf-recipe-tag",key:t},e)}))),f.hasOwnProperty("video")&&!Object(c.isEmpty)(f.video)&&Object(a.createElement)("div",{className:"bwf-recipe-video"},Object(a.createElement)("iframe",{src:f.video}))),u?Object(a.createElement)("div",{className:"bwf-preview-reactflow-loader"},Object(a.createElement)(P.a,{size:"xxl"})):Object(a.createElement)(a.Fragment,null,f.hasOwnProperty("preview")&&!Object(c.isEmpty)(f.preview)?Object(a.createElement)(S,{recipeID:f.id,previewData:f.preview}):Object(a.createElement)("div",{className:"bwf-preview-reactflow-loader bwf-h2"},f.hasOwnProperty("message")?f.message:Object(i.__)("No Preview Data Found","wp-marketing-automations"))))))},F=(n(1110),n(92)),T=n(249);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,c=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(c)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var U=function(e){var t=z(Object(a.useState)(""),2),n=t[0],c=t[1],r=z(Object(a.useState)(""),2),o=r[0],m=r[1],b=(Object(T.a)().setAutomationData,e.onCloseModal),u=e.isLoading,d=void 0!==u&&u,p=e.onTitleAdded,f=e.recipeSlug;Object(a.useEffect)((function(){m("")}),[]);var O=function(){o?(c(""),p(f,o)):c("Automation name is required field")};return Object(a.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header",onRequestClose:function(){return b()}},Object(a.createElement)("div",{className:"bwf-modal-header"},Object(a.createElement)("div",{className:"bwf-modal-heading"},Object(i.__)("Add Automation","wp-marketing-automations")),Object(a.createElement)("span",{onClick:b,className:"bwf-modal-close"},Object(a.createElement)(l.a,{icon:"close",color:"#353030"}))),n&&Object(a.createElement)(s.Notice,{status:"error",onRemove:function(){return c("")}},n),Object(a.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&O()}},Object(a.createElement)(s.TextControl,{placeholder:Object(i.__)("Enter automation name","wp-marketing-automations"),autoFocus:!0,label:Object(i.__)("Name","wp-marketing-automations"),value:o,onChange:function(e){return m(e)},disabled:d}),Object(a.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(a.createElement)(s.Button,{onClick:function(){return b()},className:"bwf-cancel-btn"},Object(i.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(s.Button,{isPrimary:!0,disabled:d,onClick:O,isBusy:d},Object(i.__)("Create","wp-marketing-automations")))))},q=n(15);function B(e,t,n,a,c,r,o){try{var i=e[r](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,c)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(a,c){var r=e.apply(t,n);function o(e){B(r,a,c,o,i,"next",e)}function i(e){B(r,a,c,o,i,"throw",e)}o(void 0)}))}}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,c=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(c)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(){var e=Object(q.i)(),t=e.group,n=void 0===t?"All":t,r=e.subgroup,u=void 0===r?"":r,d=e.redirect,p=J(Object(a.useState)(!1),2),f=p[0],O=p[1],w=J(Object(a.useState)([]),2),j=w[0],v=w[1],E=J(Object(a.useState)([]),2),y=E[0],g=E[1],h=J(Object(a.useState)([]),2),N=h[0],_=h[1],k=J(Object(a.useState)({}),2),S=k[0],C=k[1],P=J(Object(a.useState)(!0),2),A=P[0],R=P[1],D=J(Object(a.useState)({}),2),z=D[0],M=D[1],B=J(Object(a.useState)({show:!1,recipeSlug:""}),2),G=B[0],Z=B[1],H=J(Object(a.useState)(!1),2),K=H[0],V=H[1],Y=Object(T.a)().setAutomationData,Q=N.groups,W=void 0===Q?[]:Q,X=N.subGroups,ee=void 0===X?[]:X,te=function(t){""===t&&delete e.subgroup,Object(q.k)($({path:"/automations/create"},ee.hasOwnProperty(n)&&ee[n].includes(t)&&{subgroup:t}),"/",e)},ne=J(Object(a.useState)({loading:!0,success:"",error:"",status:!1}),2),ae=(ne[0],ne[1]),ce=J(Object(a.useState)(""),2),re=ce[0],oe=ce[1],ie=Object(a.useContext)(m.d),se=function(){var e=L(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,x()({path:Object(m.m)("/recipes/?sync=".concat(K)),signal:t}).then((function(e){var t,n,a,c;200===e.code&&null!=e&&null!==(t=e.result)&&void 0!==t&&t.data&&(v(me("",null==e||null===(n=e.result)||void 0===n?void 0:n.data)),g(null==e||null===(a=e.result)||void 0===a?void 0:a.data),_(null==e||null===(c=e.result)||void 0===c?void 0:c.filters));V(!1),R(!1)}));case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),V(!1),R(!1);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=new AbortController;return se(null==e?void 0:e.signal),function(){null==e||e.abort()}}),[K]);var le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.includes(t)};function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=new RegExp(e.toLowerCase().trim(),"g"),r=t||y;return r.filter((function(e){return!(Object(c.isNull)(e.name.toLowerCase().match(a))||!(Object(c.isEmpty)(n)||"All"===n||e.hasOwnProperty("group")&&e.group.includes(n))||!(Object(c.isEmpty)(u)||e.hasOwnProperty("subgroup")&&le(e.subgroup,u)))}))}Object(a.useEffect)((function(){A||v(me(re))}),[re,n,u]);var be=function(){var e=L(regeneratorRuntime.mark((function e(t,n){var a,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c.length>2&&void 0!==c[2]&&c[2],Object(m.nb)()||!a){e.next=4;break}return O(!0),e.abrupt("return");case 4:Z({show:!0,slug:t});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var t=L(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C({loading:!0,id:"",message:Object(i.__)("Creating…")}),ie(Object(i.__)("Creating…")),Z($($({},G),{},{loading:!0})),t.prev=3,t.next=6,x()({path:Object(m.m)("/automations/create/"),method:"POST",data:{title:n,version:2}});case 6:(a=t.sent)&&a.result&&a.result.automation_id&&(C({success:a.message,message:a.message}),bwfcrm_contacts_data.first_automation_id=a.result.automation_id,ie(a.message),Y("listData",n),Z({}),setTimeout((function(){return Object(q.k)({path:"/automation/"+a.result.automation_id},"/",e)}),500)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),C({error:t.t0.message}),ae({status:!0,loading:!1,error:t.t0.message});case 14:Object(m.gb)(ie,3e3);case 15:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),de=function(){var t=L(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=n){t.next=3;break}return ue(a),t.abrupt("return");case 3:return C({loading:!0,id:n,message:Object(i.__)("Importing…")}),ie(Object(i.__)("Importing…")),Z($($({},G),{},{loading:!0})),t.prev=6,t.next=9,x()({path:Object(m.m)("/automation/recipe/import?recipe_slug=".concat(n,"&title=").concat(a))}).then((function(t){200===t.code&&t.result.hasOwnProperty("automation_id")?(C({success:t.message,message:t.message}),bwfcrm_contacts_data.first_automation_id=t.result.automation_id,ie(t.message),setTimeout((function(){return Object(q.k)({path:"/automation/"+t.result.automation_id},"/",e)}),500),Object(m.gb)(ie,1e3)):(C({error:t.message}),ae({status:!0,loading:!1,error:t.message}),ie(t.hasOwnProperty("message")?"Unable to import Recipe. "+t.message:"Unable to import Recipe"),Object(m.gb)(ie,1e3))})).catch((function(e){C({error:e.message}),ae({status:!0,loading:!1,error:e.message}),ie(e.hasOwnProperty("message")&&e.message?"Unable to import Recipe. "+e.message:"Unable to import Recipe"),Object(m.gb)(ie,2e3)})).finally((function(){Z({})}));case 9:t.next=17;break;case 11:t.prev=11,t.t0=t.catch(6),console.log(t.t0),ae({status:!0,loading:!1,error:"Unable to import recipe"}),ie(t.t0.hasOwnProperty("message")?t.t0.message:"Unable to import Recipe"),Object(m.gb)(ie,1e3);case 17:case"end":return t.stop()}}),t,null,[[6,11]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(a.createElement)(b.e,null,Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>.components-modal__screen-overlay{ animation : none ! important }</style>"}}),Object(a.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-recipe-wrapper-modal",shouldCloseOnEsc:!1},Object(a.createElement)("div",{className:"bwf-recipe-modal-header"},Object(a.createElement)("div",{onClick:function(){d?window.location.href="admin.php?page=".concat(d,"&path=/automation&status=true"):(delete e.group,delete e.subgroup,Object(q.k)({path:"/automations"},"/",e))},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(a.createElement)(l.a,{icon:"close"})),Object(a.createElement)("div",{className:"bwf-recipe-modal-title"},Object(i.__)("Add Automation")),Object(a.createElement)("div",{className:"bwf-recipe-search-field"},Object(a.createElement)("span",{className:"bwf-search-bar-icon"},Object(a.createElement)(l.a,{icon:"search",size:15})),Object(a.createElement)(s.TextControl,{value:re,type:"search",placeholder:Object(i.__)("Search Templates"),autoComplete:"off",onChange:oe,disabled:A})),A?Object(a.createElement)("div",{className:" bwf-recipe-sync bwf-placeholder-temp bwf-h-36 bwf-w-90"}):Object(a.createElement)(s.Button,{variant:"secondary",className:"bwf-recipe-sync",onClick:function(){V(!0)},isBusy:K,disabled:A},Object(i.__)("Sync Library"))),Object(a.createElement)("div",{className:"bwf-recipe-wrapper"},A?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-recipe-sidebar"},Object(a.createElement)("ul",null,[1,2,3,4,5,6].map((function(e,t){return Object(a.createElement)("li",{className:"bwf-recipe-filter-item bwf-active-filter placeholder-temp",key:t})})))),Object(a.createElement)("div",{className:"bwf-recipe-item-wrapper"},Object(a.createElement)("div",{className:"bwf-recipe-group-wrap"}),Object(a.createElement)("div",{className:"bwf-recipe-items"},Object(a.createElement)("div",{className:"bwf-recipe-item scratch-recipe",style:{border:"2px dashed #DEDFEA"},key:"scratch"},Object(a.createElement)(l.a,{icon:"plus",width:"30",height:"30",color:"#DEDFEA"}),Object(a.createElement)("h2",null,Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"})),Object(a.createElement)("div",{className:"bwf_clear_10"}),Object(a.createElement)("div",{className:"bwf-mt-5"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(a.createElement)("div",{className:"bwf_clear_5"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-210"}))),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19].map((function(e,t){return Object(a.createElement)("div",{className:"bwf-recipe-item",key:t},Object(a.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(a.createElement)("div",{className:"bwf-recipe-title"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))),Object(a.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-120"})),Object(a.createElement)("div",{className:"bwf-recipe-tags"},Object(a.createElement)("span",{className:"bwf-recipe-tag placeholder-temp"},Object(a.createElement)("div",{className:"bwf-h-15 bwf-w-20"}))))}))))):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-recipe-sidebar"},Object(a.createElement)("ul",null,W.map((function(t,c){return Object(a.createElement)("li",{className:o()("bwf-recipe-filter-item",{"bwf-active-filter":n===t}),onClick:function(){n!==t&&function(t){delete e.subgroup,Object(q.k)($({path:"/automations/create"},W.includes(t)&&{group:t}),"/",e)}(t)},key:c},t)})))),Object(a.createElement)("div",{className:"bwf-recipe-item-wrapper"},Object(a.createElement)("div",{className:"bwf-recipe-group-wrap"},ee.hasOwnProperty(n)&&!Object(c.isEmpty)(ee[n])&&ee[n].map((function(e,t){return Object(a.createElement)("div",{className:o()("bwf-recipe-group",{"bwf-active-group":u===e}),onClick:function(){te(e===u?"":e)},key:t},e)}))),Object(a.createElement)("div",{className:o()("bwf-recipe-items")},Object(a.createElement)("div",{className:"bwf-recipe-item scratch-recipe",onClick:function(){be("","",!1)},key:"scratch"},Object(a.createElement)(l.a,{icon:"plus",width:"30",height:"30",color:"#000"}),Object(a.createElement)("h2",null,Object(i.__)("Start from Scratch"))),j.map((function(e,t){return Object(a.createElement)("div",{className:"bwf-recipe-item",onClick:function(){return M(e)},key:t},Object(a.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(a.createElement)("div",{className:"bwf-recipe-title"},e.name),e.hasPRO&&Object(a.createElement)("div",{className:"bwf-recipe-paid"},Object(a.createElement)("span",null,Object(i.__)("PRO")))),Object(a.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},e.description),Object(a.createElement)("div",{className:"bwf-recipe-tags"},!Object(c.isEmpty)(e.tag)&&Object.values(e.tag).map((function(e,t){return Object(a.createElement)("span",{className:o()("bwf-recipe-tag"),key:t},e)}))))}))))),Object(a.createElement)(I,{onRequestClose:function(){M({})},recipeData:z,isImporting:S,setIsImporting:C,importRecipe:be}),Object(a.createElement)(F.a,{isOpen:f,onRequestClose:function(){return O(!1)}}),(null==G?void 0:G.show)&&Object(a.createElement)(U,{onCloseModal:function(){return Z()},recipeSlug:null==G?void 0:G.slug,onTitleAdded:de,isLoading:null==G?void 0:G.loading}))))}},848:function(e,t,n){},849:function(e,t,n){},874:function(e,t,n){}}]);