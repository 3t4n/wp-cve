(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(802),o=a(5),c=a(134),i=a(273),s=a(29),l=a(15);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var b=function(e){var t=e.query;return Object(n.createElement)("div",{className:"bwf-crm-emails-report-filter"},Object(n.createElement)(i.a,{siteLocale:"en-US",path:"/",query:t,onDateSelect:function(e){var a=m(m({},t),e);delete a.compare,Object(l.k)(a,"/",{})},showDatePicker:!0,isoDateFormat:s.g,hideCompare:!0,dateQuery:function(e){e.compare="previous_year";var t=Object(s.e)(e),a=t.period,n=t.compare,r=t.before,o=t.after,c=Object(s.c)(e);return{period:a,compare:n,before:r,after:o,primaryDate:c.primary,secondaryDate:c.secondary}}(t),currency:Object(o.Y)()}))},f=a(67),O=a(2),d=a(262),v=a(260),j=a(259),_=a(806),y=a(68),g=a(8),h=a(3),k=function(e){var t=e.query,a=e.type,r=e.automationId,c=Object(y.a)(Object(o.Y)()).formatAmount,i=Object(_.a)(),s=i.getAnalyticsTileData,u=i.getAnalyticsLoading,m=t.chart?t.chart:function(){switch(a){case"contact":return"active_contacts";default:return"email_sents"}}(),p=u(),b=s(),f=function(e){return Object(h.isEmpty)(b)||!b.hasOwnProperty(e)||Object(h.isNull)(b[e])?0:b[e]};return Object(n.createElement)("div",{className:"bwf-crm-emails-report-tiles"},p?function(){switch(a){case"email":return Object(n.createElement)(j.a,{numberOfItems:Object(o.yb)()?5:3,hideDelta:!0});case"sms":return Object(n.createElement)(j.a,{numberOfItems:Object(o.yb)()?4:2,hideDelta:!0});case"contact":return Object(n.createElement)(j.a,{numberOfItems:Object(o.yb)()?6:3,hideDelta:!0})}}():function(){switch(a){case"email":return Object(n.createElement)(d.a,null,(function(){var e=[];return e=[Object(n.createElement)(v.a,{key:1,value:parseInt(f("email_sents")),label:Object(O.__)("Sent","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=email_sents"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"email_sents"},"/",t)},selected:"email_sents"===m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"sent",size:30}))}),Object(n.createElement)(v.a,{key:2,value:parseFloat(f("open_rate"))+" %",label:Object(O.__)("Open Rate","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=open_rate"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"open_rate"},"/",t)},selected:"open_rate"===m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"open-in-popup",size:30}))}),Object(n.createElement)(v.a,{key:3,value:parseFloat(f("click_rate"))+" %",label:Object(O.__)("Click Rate","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=click_rate"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"click_rate"},"/",t)},selected:"click_rate"===m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"cursor",size:30}))})],Object(o.yb)()&&e.push(Object(n.createElement)(v.a,{key:4,value:parseInt(f("total_orders")),label:Object(O.__)("Orders","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=total_orders"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"total_orders"},"/",t)},selected:"total_orders"===m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"order",size:30}))}),Object(n.createElement)(v.a,{key:5,value:c(f("total_revenue")),label:Object(O.__)("Revenue","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=total_revenue"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"total_revenue"},"/",t)},selected:"total_revenue"===m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"revenue",size:30}))})),e}));case"sms":return Object(n.createElement)(d.a,null,(function(){var e=[];return e=[Object(n.createElement)(v.a,{key:1,value:parseInt(f("email_sents")),label:Object(O.__)("Sent","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=email_sents"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"email_sents"},"/",t)},selected:"email_sents"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"sent",size:30}))}),Object(n.createElement)(v.a,{key:2,value:parseInt(f("email_click")),label:Object(O.__)("Clicks","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=email_click"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"email_click"},"/",t)},selected:"email_click"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"cursor",size:30}))})],Object(o.yb)()&&e.push(Object(n.createElement)(v.a,{key:3,value:parseInt(f("total_orders")),label:Object(O.__)("Orders","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=total_orders"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"total_orders"},"/",t)},selected:"total_orders"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"order",size:30}))}),Object(n.createElement)(v.a,{key:4,value:c(f("total_revenue")),label:Object(O.__)("Revenue","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=total_revenue"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"total_revenue"},"/",t)},selected:"total_revenue"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"revenue",size:30}))})),e}));case"contact":return Object(n.createElement)(d.a,null,(function(){var e=[];return e=[Object(n.createElement)(v.a,{key:1,value:parseInt(f("active_contacts")),label:Object(O.__)("Active Contacts","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=active_contacts"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"active_contacts"},"/",t)},selected:"active_contacts"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"contact-tile",size:30,color:"#0073aa"}))}),Object(n.createElement)(v.a,{key:2,value:parseInt(f("complete_contacts")),label:Object(O.__)("Completed Contacts","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=complete_contacts"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"complete_contacts"},"/",t)},selected:"complete_contacts"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"total-customer",size:30,color:"#0073aa"}))})],Object(o.yb)()&&e.push(Object(n.createElement)(v.a,{key:3,value:f("conversions"),label:Object(O.__)("Orders","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=conversions"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"conversions"},"/",t)},selected:"conversions"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"order",size:30}))}),Object(n.createElement)(v.a,{key:4,value:c(f("revenue")),label:Object(O.__)("Revenue","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=revenue"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"revenue"},"/",t)},selected:"revenue"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"revenue",size:30}))}),Object(n.createElement)(v.a,{key:5,value:c(parseFloat(f("aov")).toFixed(2)),label:Object(O.__)("AOV","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=aov"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"aov"},"/",t)},selected:"aov"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"recovery-rate",size:30}))})),e.push(Object(n.createElement)(v.a,{key:6,value:parseInt(f("unsubscribers")),label:Object(O.__)("Unsubscribes","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=unsubscribers"),onLinkClickCallback:function(e){e.preventDefault(),delete t.compare,Object(l.k)({chart:"unsubscribers"},"/",t)},selected:"unsubscribers"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(g.a,{icon:"unsubscribe",size:30,color:"#0073aa"}))})),e}))}}())},w=a(819),E=a(138),I=a(261),C=function(e){var t,a=e.query,r=e.type,o=a.chart?a.chart:function(){switch(r){case"contact":return"active_contacts";default:return"email_sents"}}(),c=Object(_.a)(),i=c.getAnalyticsData,l=c.getAnalyticsLoading,u=c.getAnalyticsTileData,m=l(),p=i(),b=u(),f=a.chartType?a.chartType:"line",d=Object(s.f)(a),v=Object(s.b)(((t=a).period&&""!==t.period||(t.period="month"),t.compare&&""!==t.compare||(t.compare="previous_year"),a));v.includes(d)||(d=v[v.length-1]);var j={email_sents:Object(O.__)("Sent","wp-marketing-automations"),email_open:Object(O.__)("Open","wp-marketing-automations"),email_click:Object(O.__)("Clicks","wp-marketing-automations"),total_orders:Object(O.__)("Orders","wp-marketing-automations"),total_revenue:Object(O.__)("Revenue","wp-marketing-automations")},y={email_sents:Object(O.__)("Sent","wp-marketing-automations"),email_click:Object(O.__)("Clicks","wp-marketing-automations"),total_orders:Object(O.__)("Orders","wp-marketing-automations"),total_revenue:Object(O.__)("Revenue","wp-marketing-automations")},g={active_contacts:Object(O.__)("Active Contacts","wp-marketing-automations"),complete_contacts:Object(O.__)("Complete Contacts","wp-marketing-automations"),unsubscribers:Object(O.__)("Unsubscribe","wp-marketing-automations"),revenue:Object(O.__)("Revenue","wp-marketing-automations"),conversions:Object(O.__)("Orders","wp-marketing-automations"),aov:Object(O.__)("AOV","wp-marketing-automations")},k=function(){switch(r){case"email":return j;case"sms":return y;case"contact":return g}}();return Object(n.createElement)(I.a,{isRequesting:m,data:function(e){switch(r){case"email":return function(e){var t=[];if(!Object(h.isEmpty)(p)){p.map((function(a){switch(e){case"email_sents":t.push({date:a.start_date,email_sents:{label:Object(O.__)("Email Sent","wp-marketing-automations"),value:parseInt(a.subtotals.email_sents)}});break;case"open_rate":t.push({date:a.start_date,email_open:{label:Object(O.__)("Opens","wp-marketing-automations"),value:parseInt(a.subtotals.email_open)}});break;case"click_rate":t.push({date:a.start_date,email_click:{label:Object(O.__)("Clicks","wp-marketing-automations"),value:parseInt(a.subtotals.email_click)}});break;case"total_orders":t.push({date:a.start_date,total_orders:{label:Object(O.__)("Total Orders","wp-marketing-automations"),value:parseInt(a.subtotals.total_orders)}});break;case"total_revenue":t.push({date:a.start_date,total_revenue:{label:Object(O.__)("Total Revenue","wp-marketing-automations"),value:parseInt(a.subtotals.total_revenue)}})}}))}return t}(e);case"sms":return function(e){var t=[];if(!Object(h.isEmpty)(p)){p.map((function(a){switch(e){case"email_sents":t.push({date:a.start_date,email_sents:{label:Object(O.__)("SMS Sent","wp-marketing-automations"),value:parseInt(a.subtotals.email_sents)}});break;case"email_click":t.push({date:a.start_date,email_click:{label:Object(O.__)("SMS Clicks","wp-marketing-automations"),value:parseInt(a.subtotals.email_click)}});break;case"total_orders":t.push({date:a.start_date,total_orders:{label:Object(O.__)("Total Orders","wp-marketing-automations"),value:parseInt(a.subtotals.total_orders)}});break;case"total_revenue":t.push({date:a.start_date,total_revenue:{label:Object(O.__)("Total Revenue","wp-marketing-automations"),value:parseInt(a.subtotals.total_revenue)}})}}))}return t}(e);case"contact":return function(e){var t=[];if(!Object(h.isEmpty)(p)){p.map((function(a){switch(e){case"active_contacts":t.push({date:a.start_date,active_contacts:{label:Object(O.__)("Active Contacts","wp-marketing-automations"),value:parseInt(a.subtotals.active_contacts)}});break;case"complete_contacts":t.push({date:a.start_date,complete_contacts:{label:Object(O.__)("Complete Contacts","wp-marketing-automations"),value:parseInt(a.subtotals.complete_contacts)}});break;case"unsubscribers":t.push({date:a.start_date,unsubscribers:{label:Object(O.__)("Unsubscribes","wp-marketing-automations"),value:parseInt(a.subtotals.unsubscribers)}});break;case"revenue":t.push({date:a.start_date,revenue:{label:Object(O.__)("Revenue","wp-marketing-automations"),value:parseInt(a.subtotals.revenue)}});break;case"conversions":t.push({date:a.start_date,conversions:{label:Object(O.__)("Orders","wp-marketing-automations"),value:parseInt(a.subtotals.conversions)}});break;case"aov":t.push({date:a.start_date,conversions:{label:Object(O.__)("AOV","wp-marketing-automations"),value:parseInt(a.subtotals.aov)}})}}))}return t}(e)}}(o),title:k[o],interval:d,layout:"item-comparison",chartType:f,legendTotals:"aov"==o?{conversions:b.hasOwnProperty("aov")?b.aov:0}:null,interactiveLegend:!0})},A=a(4),S=a(248),D=a(10),P=a.n(D),L=a(17);function M(e,t,a,n,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var N=function(e){var t=e.query,a=e.automationId,r=t.period,c=t.interval,i=void 0===c?"day":c,l=t.after,u=t.before,m=Object(y.a)(Object(o.Y)()).formatAmount,p=Y(Object(n.useState)([]),2),b=p[0],f=p[1],d=Y(Object(n.useState)(!0),2),v=d[0],j=d[1],g=Y(Object(n.useState)(25),2),k=g[0],w=g[1],E=Y(Object(n.useState)(0),2),I=E[0],C=E[1],A=Y(Object(n.useState)(0),2),D=A[0],F=A[1],N=parseInt(I)/parseInt(k)+1,x=Object(_.a)(),T=x.getAnalyticsTileData,R=x.getAnalyticsLoading,q=T(),z=R();Object(n.useEffect)((function(){if(!Object(o.nb)()&&z){var e=q.email_click,t=void 0===e?0:e,a=q.email_open,n=void 0===a?0:a,r=q.email_sents,c=void 0===r?0:r,i=q.total_orders,s=void 0===i?0:i,l=q.revenue,u=void 0===l?0:l;f([{click_count:t,click_rate:(t/c*100).toFixed(2),conversions:s,oid:"5",open_count:n,open_rate:(n/c*100).toFixed(2),revenue:u,sent:c,subject:"Dummy Subject",template:"",tid:"52",title:"Dummy Mail",type:"1"}]),j(!1)}}),[z]);var H=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),Object(o.nb)()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,P()({method:"GET",path:Object(o.m)("/analytics/emails/tabular/")+"?"+Object(L.stringify)({after:t,before:n,oid:a,type:1,interval:"day",limit:k,offset:I,mode:1})}).then((function(e){e.hasOwnProperty("result")&&f(e.result),e.hasOwnProperty("total_count")&&F(e.total_count),j(!1)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),j(!1);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function c(e){M(o,n,r,c,i,"next",e)}function i(e){M(o,n,r,c,i,"throw",e)}c(void 0)}))});return function(e,a){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){var e,a=((e=t).compare="previous_year",Object(s.c)(e).primary),n="",r="";a&&(Object(h.isEmpty)(a.after)||(n=a.after.format("YYYY-MM-DD HH:mm:ss")),Object(h.isEmpty)(a.before)||(r=a.before.format("YYYY-MM-DD 23:59:59")),Object(h.isEmpty)(n)||Object(h.isEmpty)(r)||H(n,r))}),[r,i,l,u]);var V,G=[{key:"subject",label:Object(O.__)("Subject","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(O.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(O.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"open",label:Object(O.__)("Open Rate","wp-marketing-automations"),isLeftAligned:!0},{key:"click",label:Object(O.__)("Click Rate","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.yb)()?{key:"orders",label:Object(O.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.yb)()?{key:"revenue",label:Object(O.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],B=function(e){e!==k&&w(e)};return Object(n.createElement)(S.a,{title:Object(O.__)("Email","wp-marketing-automations"),rows:(V=[],Object(h.isEmpty)(b)||b.map((function(e){V.push([{display:e.subject?e.subject:"-",value:e.subject},{display:e.title?e.title:"-",value:e.title},{display:parseInt(e.sent)?parseInt(e.sent):"-",value:e.sent},{display:parseInt(e.open_rate)?parseFloat(e.open_rate).toFixed(1)+"%":"-",value:e.open_count},{display:parseInt(e.click_rate)?parseFloat(e.click_rate).toFixed(1)+"%":"-",value:e.click_count},Object(o.yb)()?{display:parseInt(e.conversions)?parseInt(e.conversions):"-",value:e.conversions}:{},Object(o.yb)()?{display:parseFloat(e.revenue)>0?m(e.revenue):"-",value:e.revenue}:{}])})),V),headers:G,query:{paged:N},rowsPerPage:k,totalRows:D,isLoading:v,onPageChange:function(e,t){C((e-1)*k)},onQueryChange:function(e){return"per_page"!==e?function(){}:B},showMenu:!1,rowHeader:!0,emptyMessage:Object(O.__)("No emails found","wp-marketing-automations")})};function x(e,t,a,n,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var q=function(e){var t=e.query,a=e.automationId,r=t.period,c=t.interval,i=void 0===c?"day":c,l=t.after,u=t.before,m=Object(y.a)(Object(o.Y)()).formatAmount,p=T(Object(n.useState)([]),2),b=p[0],f=p[1],d=T(Object(n.useState)(!0),2),v=d[0],j=d[1],g=T(Object(n.useState)(25),2),k=g[0],w=g[1],E=T(Object(n.useState)(0),2),I=E[0],C=E[1],A=T(Object(n.useState)(0),2),D=A[0],M=A[1],Y=parseInt(I)/parseInt(k)+1,F=Object(_.a)(),N=F.getAnalyticsTileData,R=F.getAnalyticsLoading,q=N(),z=R();Object(n.useEffect)((function(){if(!Object(o.nb)()){var e=q.email_click,t=void 0===e?0:e,a=q.email_open,n=void 0===a?0:a,r=q.email_sents,c=void 0===r?0:r,i=q.total_orders,s=void 0===i?0:i,l=q.revenue,u=void 0===l?0:l;f([{click_count:t,click_rate:(t/c*100).toFixed(2),conversions:s,oid:"5",open_count:n,open_rate:(n/c*100).toFixed(2),revenue:u,sent:c,subject:"Dummy Message",template:"",tid:"52",title:"Dummy SMS",type:"1"}]),j(!1)}}),[z]);var H=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),Object(o.nb)()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,P()({method:"GET",path:Object(o.m)("/analytics/emails/tabular/")+"?"+Object(L.stringify)({after:t,before:n,oid:a,type:1,interval:"day",limit:k,offset:I,mode:2})}).then((function(e){e.hasOwnProperty("result")&&f(e.result),e.hasOwnProperty("total_count")&&M(e.total_count),j(!1)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),j(!1);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function c(e){x(o,n,r,c,i,"next",e)}function i(e){x(o,n,r,c,i,"throw",e)}c(void 0)}))});return function(e,a){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){var e,a=((e=t).compare="previous_year",Object(s.c)(e).primary),n="",r="";a&&(Object(h.isEmpty)(a.after)||(n=a.after.format("YYYY-MM-DD HH:mm:ss")),Object(h.isEmpty)(a.before)||(r=a.before.format("YYYY-MM-DD 23:59:59")),Object(h.isEmpty)(n)||Object(h.isEmpty)(r)||H(n,r))}),[r,i,l,u]);var V,G=[{key:"message",label:Object(O.__)("Message","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(O.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(O.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"click",label:Object(O.__)("Click","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.yb)()?{key:"orders",label:Object(O.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.yb)()?{key:"revenue",label:Object(O.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],B=function(e){e!==k&&w(e)};return Object(n.createElement)(S.a,{title:Object(O.__)("SMS","wp-marketing-automations"),rows:(V=[],Object(h.isEmpty)(b)||b.map((function(e){var t=parseFloat(e.click_rate)?" ( "+parseFloat(e.click_rate).toFixed(2)+"% ) ":"";V.push([{display:e.template?Object(n.createElement)("div",{className:"bwf-pre-line"},e.template):"-",value:""},{display:e.title?e.title:"-",value:e.title},{display:parseInt(e.sent)?parseInt(e.sent):"-",value:e.sent},{display:parseInt(e.click_count)?e.click_count+t:"-",value:e.click_count},Object(o.yb)()?{display:parseInt(e.conversions)?parseInt(e.conversions):"-",value:e.conversions}:{},Object(o.yb)()?{display:m(e.revenue),value:e.revenue}:{}])})),V),headers:G,query:{paged:Y},rowsPerPage:k,totalRows:D,isLoading:v,onPageChange:function(e,t){C((e-1)*k)},onQueryChange:function(e){return"per_page"!==e?function(){}:B},showMenu:!1,rowHeader:!0,emptyMessage:Object(O.__)("No SMS found","wp-marketing-automations")})},z=a(92);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(e){var t=e.match.params,a=t.automationId,i=t.type,u=void 0===i?"contact":i,m=e.isV2,p=void 0===m||m,d=Object(l.i)(),v=d.period,j=d.compare,y=d.interval,g=d.after,I=d.before,S=Object(c.a)(),D=S.setL2NavAlign,P=S.setL2Title,L=Object(w.a)(),M=L.fetchAnalytics,Y=L.setAnalyticsValues,F=(0,Object(_.a)().getAnalyticsAutomationData)().title,x=void 0===F?"":F,T=H(Object(n.useState)(!0),2),R=T[0],V=T[1],G=Object(E.a)(),B=G.getAutomationData,U=G.getAutomationId,Q=B().title,$=void 0===Q?"":Q,J=U();Object(r.a)("analytics","",!0,!1,null,a,!1,p),Object(n.useEffect)((function(){D("left"),Object(o.g)("Automation #"+a),Y("automationId",a)}),[]),Object(n.useEffect)((function(){P(parseInt(a)===parseInt(J)&&""!==$&&""===x?$:""!==x?x:Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[$,x,a]);var W=function(e){return e.compare="previous_year",Object(s.c)(e).primary},K=function(e,t){if(Y("analytics",[]),Y("tiles",[]),Object(o.nb)()){var n=W(e),r="",c="",i="";if(n){switch(Object(h.isEmpty)(n.after)||(r=n.after.format("YYYY-MM-DD HH:mm:ss")),Object(h.isEmpty)(n.before)||(c=n.before.format("YYYY-MM-DD 23:59:59")),u){case"email":i=1;break;case"sms":i=2;break;case"whatsapp":i=3;break;case"contact":i=4;break;default:i=1}Object(h.isEmpty)(r)||Object(h.isEmpty)(c)||M(a,r,c,t,1,i)}}else setTimeout((function(){!function(){for(var e=W(d),t=0,a=0,n=0,r=0,o=0,c=0,i=0,s=0,l=[],u=e.after;u.isBefore(e.before);u.add(1,"days")){var m=Math.floor(11*Math.random()),p=Math.floor(Math.random()*parseInt(m)),b=Math.floor(Math.random()*parseInt(m)),f=Math.floor(Math.random()*parseInt(b)),O=Math.floor(100*Math.random()).toFixed(2),v=Math.floor(10*Math.random()),j=Math.floor(10*Math.random()),_=Math.floor(10*Math.random()),y=parseFloat(O)>0&&parseInt(f)>0?parseFloat(parseFloat(O)/parseInt(f)).toFixed(2):0;l.push({date_end_gmt:u.format("YYYY-MM-DD")+" 23:59:59",date_start_gmt:u.format("YYYY-MM-DD")+" 00:00:00",end_date:u.format("YYYY-MM-DD")+" 23:59:59",interval:u.format("YYYY-MM-DD"),start_date:u.format("YYYY-MM-DD")+" 00:00:00",subtotals:{click_rate:(p/m*100).toFixed(2),email_click:p,email_open:b,email_sents:m,open_rate:(b/m*100).toFixed(2),total_orders:f,total_revenue:parseFloat(O).toFixed(2),active_contacts:v,complete_contacts:j,unsubscribers:_,revenue:parseFloat(O).toFixed(2),conversions:f,aov:parseFloat(y).toFixed(2)}}),t+=b,a+=m,n+=p,r+=f,o=parseFloat(o)+parseFloat(O),c+=v,i+=j,s+=_}Y("tiles",{click_rate:(n/a*100).toFixed(2),email_click:n,email_open:t,email_sents:a,open_rate:(t/a*100).toFixed(2),total_orders:r,total_revenue:o,active_contacts:c,complete_contacts:i,unsubscribers:s,revenue:o,conversions:r,aov:(parseFloat(o)/parseInt(r)).toFixed(2)}),Y("analytics",l),Y("isLoading",!1)}()}),1e3)};Object(n.useEffect)((function(){var e=d.hasOwnProperty("interval")?d.interval:"day";K(d,e)}),[v,j,y,g,I,u]);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(n.createElement)(f.a,null),Object(n.createElement)(A.ButtonGroup,{className:"bwf-btn-group-tabs"},Object(n.createElement)(A.Button,{isPrimary:u&&"contact"===u,isSecondary:u&&"contact"!==u,onClick:function(){return Object(l.k)({page:"autonami",path:"/automation/".concat(a,"/analytics/contact")},"/",{})}},Object(O.__)("Contacts","wp-marketing-automations")),Object(n.createElement)(A.Button,{isPrimary:u&&"email"===u,isSecondary:u&&"email"!==u,onClick:function(){return Object(l.k)({page:"autonami",path:"/automation/".concat(a,"/analytics/email")},"/",{})}},Object(O.__)("Emails","wp-marketing-automations")),!Object(h.isEmpty)(Object(o.k)())&&Object(n.createElement)(A.Button,{isPrimary:u&&"sms"===u,isSecondary:u&&"sms"!==u,onClick:function(){return Object(l.k)({page:"autonami",path:"/automation/".concat(a,"/analytics/sms")},"/",{})}},Object(O.__)("SMS","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-crm-analytics-wrap bwf-crm-emails-report-wrap"},Object(n.createElement)(b,{query:d}),Object(n.createElement)("div",{className:"bwf_clear_40"}),Object(n.createElement)(k,{query:d,type:u,automationId:a}),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(C,{query:d,type:u}),function(){switch(u){case"email":return Object(n.createElement)(N,{query:d,automationId:a});case"sms":return Object(n.createElement)(q,{query:d,automationId:a});default:return Object(n.createElement)(n.Fragment,null)}}()),!Object(o.nb)()&&Object(n.createElement)(z.a,{isOpen:R,onRequestClose:function(){return V(!1)},closeOnClickOut:!1,modalContent:{demoLabel:Object(O.__)("Try Demo","wp-marketing-automations")}}))}},802:function(e,t,a){"use strict";var n=a(0),r=a(134),o=a(2),c=a(5),i=a(51),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e):"admin.php?page=autonami-automations&edit=".concat(e)}};return t&&(a.analytics={name:Object(o.__)("Analytics","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/analytics"),isProFeature:!0,showOnClick:!0},a.contacts={name:Object(o.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(e,"/contacts"),isProFeature:!0,showOnClick:!0}),a.engagement={name:Object(o.__)("Engagements","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/engagements"),isProFeature:!0,showOnClick:!0},Object(c.yb)()&&(a.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/orders"),isProFeature:!0,showOnClick:!0}),a};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},O=f.automation_nav,d=f.automationv2_nav,v=Object(r.a)(),j=v.setActiveMultiple,_=v.resetHeaderMenu,y=v.setL2NavType,g=v.setL2Nav,h=v.setBackLink,k=v.setL2Title,w=v.setL2Content,E=v.setBackLinkLabel,I=v.setL2NavAlign,C=v.setPageHeader;return Object(n.useEffect)((function(){_(),!c&&y("menu"),b||g(u?s(u,p):p?d:O),j({leftNav:p?"automations-v2":"automations-v1",rightNav:e}),a&&h(a),u&&h(a&&!p?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),c||p&&u&&E(Object(o.__)("All Automations","wp-marketing-automations-crm")),!p&&u&&E(Object(o.__)("All Automations","wp-marketing-automations")),u&&I("left"),t&&k(t),!a&&l&&w(l),C(p?"Automations":Object(n.createElement)(n.Fragment,null,"Automations",Object(n.createElement)(i.a,{label:"Legacy"}))),m&&g({})}),[e,p,b]),!0}},806:function(e,t,a){"use strict";var n=a(136),r=a(94);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}t.a=function(){var e=Object(n.a)("automationList"),t=e.getStateProp,a=s(e,["getStateProp"]),o=Object(n.a)(r.a.recipient).getStateProp,i=Object(n.a)(r.a.conversion).getStateProp,l=Object(n.a)(r.a.contacts).getStateProp,u=Object(n.a)(r.a.analytics).getStateProp;return c(c({},a),{},{getAutomations:function(){return t("automations")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getRecipientData:function(){return o("data")},getRecipientLoading:function(){return o("isLoading")},getRecipientOffset:function(){return o("offset")},getRecipientAutomationId:function(){return o("automationId")},getRecipientTotal:function(){return o("total")},getRecipientAutomation:function(){return o("automation")},getRecipientPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getRecipientLimit:function(){return o("limit")},getConversionData:function(){return i("data")},getConversionLoading:function(){return i("isLoading")},getConversionOffset:function(){return i("offset")},getConversionAutomationId:function(){return i("automationId")},getConversionTotal:function(){return i("total")},getConversionAutomation:function(){return i("automation")},getConversionPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getConversionLimit:function(){return i("limit")},getCountData:function(){return t("countData")},getContactData:function(){return l("data")},getContactLoading:function(){return l("isLoading")},getContactOffset:function(){return l("offset")},getContactAutomationId:function(){return l("automationId")},getContactTotal:function(){return l("total")},getContactAutomation:function(){return l("automation")},getContactPage:function(){return parseInt(l("offset"))/parseInt(l("limit"))+1},getContactLimit:function(){return l("limit")},getContactCountData:function(){return l("contactCount")},getAnalyticsData:function(){return u("analytics")},getAnalyticsTileData:function(){return u("tiles")},getAnalyticsTableData:function(){return u("tableData")},getAnalyticsLoading:function(){return u("isLoading")},getAnalyticsType:function(){return u("type")},getAnalyticsAutomationData:function(){return u("automation")}})}},819:function(e,t,a){"use strict";var n=a(137),r=a(5),o=a(94),c=a(17);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}t.a=function(){var e=Object(n.a)("automationList"),t=e.fetch,a=e.setStateProp,i=u(e,["fetch","setStateProp"]),l=Object(n.a)(o.a.recipient),m=l.fetch,p=l.setStateProp,b=Object(n.a)(o.a.conversion),f=b.fetch,O=b.setStateProp,d=Object(n.a)(o.a.contacts),v=d.fetch,j=d.setStateProp,_=Object(n.a)(o.a.analytics),y=_.fetch,g=_.setStateProp;return s(s({},i),{},{fetch:function(e,n,o,c){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a("automation",{});var s=n.s,l=(n.page,n.filter,n.path,u(n,["s","page","filter","path"])),m={offset:o,limit:c,status:e,search:s,filters:l,version:i?2:1};t("GET",Object(r.m)("/automations"),m)},setAutomationListValues:function(e,t){a(e,t)},fetchRecipient:function(e,t,a){m("GET",Object(r.m)("/automation/".concat(e,"/recipients?limit=").concat(t,"&offset=").concat(a)))},setRecipientsValues:function(e,t){p(e,t)},fetchConversion:function(e,t,a){O("automation",{}),f("GET",Object(r.m)("/automation/".concat(e,"/conversions?limit=").concat(t,"&offset=").concat(a)))},setConversionValues:function(e,t){O(e,t)},fetchContacts:function(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";j("automation",{}),v("GET",Object(r.m)("/automation/".concat(e,"/contacts?limit=").concat(t,"&offset=").concat(a,"&type=").concat(n,"&search=").concat(o)))},setContactValues:function(e,t){j(e,t)},fetchAnalytics:function(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=0;4===parseInt(i)&&(s=1),y("GET",Object(r.m)("/analytics/emails/chart/")+"?"+Object(c.stringify)({after:t,before:a,interval:n,oid:e,type:o,mode:i,contact:s}))},setAnalyticsValues:function(e,t){g(e,t)}})}}}]);