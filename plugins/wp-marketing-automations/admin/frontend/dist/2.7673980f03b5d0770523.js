(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{803:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(12),a=n(7),c=n.n(a),o=n(25),i=n(13),u=n(26),s=n(253),l=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.setOptions(n),r.bindMethods(),r.updateResult(),r}Object(u.a)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,Object(r.a)({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:Object(s.b)();this.currentResult=Object(r.a)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},n.notify=function(e){var t=this;o.a.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(n(52).a),b=n(251);function f(e,t,n){var a=c.a.useRef(!1),u=c.a.useState(0)[1],s=Object(i.k)(e,t,n),f=Object(b.b)(),m=c.a.useRef();m.current?m.current.setOptions(s):m.current=new l(f,s);var p=m.current.getCurrentResult();c.a.useEffect((function(){a.current=!0;var e=m.current.subscribe(o.a.batchCalls((function(){a.current&&u((function(e){return e+1}))})));return function(){a.current=!1,e()}}),[]);var d=c.a.useCallback((function(e,t){m.current.mutate(e,t).catch(i.i)}),[]);if(p.error&&m.current.options.useErrorBoundary)throw p.error;return Object(r.a)({},p,{mutate:d,mutateAsync:p.mutate})}},822:function(e,t,n){"use strict";var r=n(10),a=n.n(r),c=n(5),o=n(883),i=n(832),u=(n(940),n(794));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){f(c,r,a,o,i,"next",e)}function i(e){f(c,r,a,o,i,"throw",e)}o(void 0)}))}}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Object(c.nb)())return[];var t=Object(u.a)(["get-bwf-fields"],m(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a()({method:"GET",path:Object(c.m)("/fields")});case 3:if(!(t=e.sent)||!t.result){e.next=6;break}return e.abrupt("return",t.result);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),{staleTime:18e5}),n=t.isLoading,r=t.data,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};if(e)for(var n in e){var r=e[n],a=Object(o.b)(r.type),c=r&&r.hasOwnProperty("meta")&&r.meta.hasOwnProperty("options")?r.meta.options:[],i=r.name;t["bwf_cf".concat(r.ID)]=Object(o.a)(i,"Custom Field","contact_custom_fields",12,a,c)}return t},b=n?[]:l(l({},i.a),s(r));return e?{isLoading:n,filters:b}:!!n||b}},829:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return Re}));var r=n(0),a=n(4),c=n(2),o=n(3),i=n(10),u=n.n(i),s=n(5),l=(n(254),n(256),n(44),n(15));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){var t=e.filter,n=e.config,i=Object(l.i)(),b=p(Object(r.useState)({loading:!1,success:!1,error:!1,message:""}),2),m=b[0],d=b[1],O=Object(r.useContext)(s.d),j=p(Object(r.useState)(""),2),g=j[0],y=j[1],w=p(Object(r.useState)(!1),2),h=w[0],v=w[1],E=p(Object(r.useState)(""),2),_=E[0],k=E[1],P=p(Object(r.useState)(!1),2),S=P[0],C=P[1],D=function(){d(f(f({},m),{},{loading:!0}));var e=Object(l.j)(t,i,n.filters);if(Object(o.isEmpty)(e))d({loading:!0,error:!0,message:Object(c.__)("Please fill the filter","wp-marketing-automations")}),setTimeout((function(){d({loading:!1,success:!1,error:!1,message:""})}),2e3);else try{u()({path:Object(s.m)("/audience"),method:"POST",data:{name:g,data:{desc:_,filters:e}}}).then((function(e){200===e.code?(O(e.message),Object(s.gb)(O,2e3),d({loading:!1,success:!1,error:!1,message:""}),C(!1)):(d({loading:!0,error:!0,message:e.message}),O(e.message),setTimeout((function(){d({loading:!1,success:!1,error:!1,message:""})}),2e3))}))}catch(e){d({loading:!0,error:!0,message:e.message}),O(e.message),setTimeout((function(){d({loading:!1,success:!1,error:!1,message:""})}),2e3)}};return Object(r.createElement)("div",{className:"bwf-adv-filter-action-btn"},!Object(o.isEmpty)(t)&&Object(r.createElement)(a.Button,{isTertiary:!0,onClick:function(){y(""),v(!1),k(""),C(!0)}},Object(c.__)("Save as Audience","wp-marketing-automations")),S&&Object(r.createElement)(a.Modal,{title:"Add Audience",onRequestClose:function(){return C(!1)},shouldCloseOnClickOutside:!1,className:"bwf-admin-modal bwf-admin-modal-squeezy"},Object(r.createElement)("div",{onKeyPress:function(e){"Enter"===e.key&&(Object(o.isEmpty)(g)?v(!0):D())}},h&&Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return v("")}},Object(c.__)("Name is required","wp-marketing-automations")),Object(r.createElement)(a.TextControl,{type:"text",value:g,autoFocus:!0,style:{lineHeight:"22px"},placeholder:Object(c.__)("Enter audience name","wp-marketing-automations"),label:Object(c.__)("Name","wp-marketing-automations"),onChange:function(e){y(e),Object(o.isEmpty)(e)?v(!0):v(!1)},disabled:m.loading}),Object(r.createElement)(a.TextareaControl,{placeholder:Object(c.__)("Enter audience description","wp-marketing-automations"),label:Object(c.__)("Description","wp-marketing-automations"),value:_,onChange:function(e){return k(e)},disabled:m.loading}),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(a.Button,{className:"bwf-cancel-btn",onClick:function(){return C(!1)},disabled:m.loading},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(a.Button,{isPrimary:!0,disabled:m.loading,isBusy:m.loading,onClick:function(){Object(o.isEmpty)(g)?v(!0):D()}},Object(c.__)("Add","wp-marketing-automations"))))))},j=(n(941),n(8));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=e.addAdvance,n=void 0===t||t,i=e.restrictedFilters,b=void 0===i?[]:i,f=Object(l.i)(),m=h(Object(r.useState)(!1),2),p=m[0],d=m[1],O=h(Object(r.useState)(""),2),g=O[0],w=O[1],v=h(Object(r.useState)([]),2),E=v[0],_=v[1],k=h(Object(r.useState)(!0),2),P=k[0],S=k[1],C=function(){var e=[];return Object(o.isEmpty)(g)?E:(E.map((function(t){-1!==t.name.toLowerCase().indexOf(g.toLowerCase())&&e.push(t)})),e)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-list-audience-wrap"},Object(r.createElement)(a.Button,{isTertiary:!0,className:"bwf-display-flex bwf-add-audience-btn",onClick:function(){!function(){try{u()({method:"GET",path:Object(s.m)("/audiences?limit=0&offset=0")}).then((function(e){200===e.code&&(_(e.result),S(!1))}))}catch(e){S(!1)}}(),w(""),d(!p)}},"Apply Audiences")),p&&Object(r.createElement)(a.Modal,{onRequestClose:function(){return d(!1)},className:"bwf-admin-modal bwf-admin-modal-large bwf-audience-modal bwf-admin-modal-no-header"},P?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-audience-header bwf-display-flex bwf-space-between"},Object(r.createElement)("div",{className:"bwf-audience-label bwf-h4"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-120"})),Object(r.createElement)("div",{className:"bwf-display-flex gap-20"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-210"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-30"}))),Object(r.createElement)("div",{className:"bwf-audience-table-wrapper"},Object(r.createElement)("table",{className:"bwf-audience-list-table"},Object(r.createElement)("tbody",null,[1,2,3,4,5].map((function(e){return Object(r.createElement)("tr",{key:e},Object(r.createElement)("td",{className:"bwf-display-flex-column bwf-p-15 "},Object(r.createElement)("span",{className:"bwf-audience-title"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-120"})),Object(r.createElement)("span",{className:"bwf-audience-create-detail"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-10 bwf-w-210"}))),Object(r.createElement)("td",{className:"bwf-w-120"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-90"})))})))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-audience-header"},Object(r.createElement)("div",{className:"bwf-audience-label bwf-h4"},Object(c.__)("My Audiences","wp-marketing-automations")),Object(r.createElement)(a.TextControl,{className:"bwf-audience-search",value:g,onChange:function(e){return w(e)},autoComplete:"off",placeholder:Object(c.__)("Search by title","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf-flex bwf-cursor-pointer",onClick:function(){return d(!1)}},Object(r.createElement)(j.a,{icon:"close",size:16}))),Object(r.createElement)("div",{className:"bwf-audience-table-wrapper"},Object(r.createElement)("table",{className:"bwf-audience-list-table"},Object(r.createElement)("tbody",null,C().length>0?C().map((function(e,t){return Object(r.createElement)("tr",{key:t},Object(r.createElement)("td",null,Object(r.createElement)("span",{className:"bwf-audience-title"},e.name),Object(r.createElement)("span",{className:"bwf-audience-create-detail"},e.created_at?Object(r.createElement)(r.Fragment,null,Object(c.__)("Created at ","wp-marketing-automations"),Object(s.O)(e.created_at)):"")),Object(r.createElement)("td",null,Object(r.createElement)("span",{className:"bwf-audience-item-apply",onClick:function(){var t={};n&&(t={filter:"advanced"});var r,a,c=y({},e.data.filters);r=c,a={},Object.keys(r).map((function(e){var t=r[e];Object(o.isString)(t)&&(t=encodeURIComponent(t)),a[e]=t})),c=a,!Object(o.isEmpty)(b)&&Object(o.isArray)(b)&&b.map((function(e){c.hasOwnProperty(e)&&delete c[e]})),Object(l.k)(y(y({},c),t),"/",f),d(!1)}},Object(c.__)("Apply","wp-marketing-automations"))))})):Object(r.createElement)("tr",null,Object(r.createElement)("td",{colSpan:2},Object(r.createElement)("span",{className:"bwf-display-flex bwf-p-15"},Object(c.__)("No Audiences Found","wp-marketing-automations"))))))))))},_=n(248),k=n(6),P=n.n(k),S=n(59),C=n(91),D=n(16),x=n(822),A=n(137);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var M=function(){var e=Object(A.a)("audience"),t=e.fetch,n=e.setStateProp;return I(I({},T(e,["fetch","setStateProp"])),{},{fetch:function(e,r,a){n("contactCountData",{}),t("GET",Object(s.m)("/audiences?limit=".concat(e,"&offset=").concat(r,"&search=").concat(a)))},setStateAudienceValues:function(e,t){n(e,t)}})},L=n(136);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var G=function(){var e=Object(L.a)("audience"),t=e.getStateProp;return q(q({},U(e,["getStateProp"])),{},{getAudiences:function(){return t("audience")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getCountData:function(){return t("countData")},getContactCountData:function(){return t("contactCountData")}})},$=n(144),z=n(135);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}var Q=function(e){var t=Object(l.i)(),n=e.filter,i=e.config,b=e.audienceDetail,f=e.modalData,m=e.setModal,p=e.setOpen,d=e.reloadList,O=e.title,j=void 0===O?"":O,g=e.desc,y=(e.error,e.setError),w=Object(r.useContext)(s.d),h=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!1),""!==j){e.next=4;break}return y(Object(c.__)("Name is required","wp-marketing-automations")),e.abrupt("return");case 4:if(r=Object(l.j)(n,t,i.filters),!Object(o.isEmpty)(r)){e.next=9;break}y(Object(c.__)("Please fill the filter","wp-marketing-automations")),e.next=20;break;case 9:return m({loading:!0}),a=b?Object(s.m)("/audience/".concat(b.ID)):Object(s.m)("/audience"),e.prev=11,e.next=14,u()({path:a,method:"POST",data:{name:j,data:{desc:g||"",filters:r}}}).then((function(e){if(200!==e.code)throw Error(Object(s.j)(null==e?void 0:e.message));w(e.message),Object(s.gb)(w,2e3),d(),m({loading:!1,success:!1,error:!1,message:""}),p(!1)})).catch((function(e){throw Error(Object(s.j)(null==e?void 0:e.message))}));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(11),y(e.t0.message),m(H(H({},f),{},{loading:!1}));case 20:case"end":return e.stop()}}),e,null,[[11,16]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){K(c,r,a,o,i,"next",e)}function i(e){K(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(a.Button,{isPrimary:!0,onClick:function(){return h()},disabled:f.loading,isBusy:f.loading},b?Object(c.__)("Save","wp-marketing-automations"):Object(c.__)("Add","wp-marketing-automations"))},Y=(n(942),n(27)),W=n(32),X=n.n(W),Z=n(115),ee=n.n(Z),te=n(31),ne=n.n(te),re=n(14),ae=n.n(re),ce=n(17);function oe(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw c}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ue(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}var se={name:"audience",className:"bwf-search-bwf-tags-result",options:function(e){return(t=regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:t,limit:10,offset:0},e.next=3,u()({path:Object(s.m)("/audiences?"+Object(ce.stringify)(n)),method:"GET"});case 3:return r=e.sent,a=ne()(r,"result")?r.result:[],X()(a)||(a=a.map((function(e){return{key:String(e.ID),label:e.name}}))),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function o(e){ue(c,r,a,o,i,"next",e)}function i(e){ue(c,r,a,o,i,"throw",e)}o(void 0)}))},function(e){return n.apply(this,arguments)})(e);var t,n},isDebounced:!0,getOptionIdentifier:function(e){return e.key},getOptionKeywords:function(e){return[e.label]},getFreeTextOptions:function(e,t){var n,a=oe(t);try{for(a.s();!(n=a.n()).done;){if(n.value.value.label.toLowerCase()===e.toLowerCase())return[]}}catch(e){a.e(e)}finally{a.f()}return[{key:"name",label:Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name"},ae()({mixedString:Object(c.__)("Search all audience with name {{query /}}","wp-marketing-automations"),components:{query:Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{key:"0",label:e}}]},getOptionLabel:function(e,t){var n=Object(s.i)(e.label,t)||{};return Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":e.label},Object.keys(n).length>0?Object(r.createElement)(r.Fragment,null,n.suggestionBeforeMatch,Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch):e.label)},getOptionCompletion:function(e){return e}};function le(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}var be=function(e){var t=e.query,n=t.hasOwnProperty("s")?t.s:"",a=X()(n)?[]:[{key:n,label:Object(c.__)("Search Audience: ","wp-marketing-automations")+n,bwfLabelSource:"bwfcrm_lists",isSearchTerm:!0}],i=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,a,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee()(n)){e.next=2;break}return e.abrupt("return");case 2:if(X()(n)||(r=n[n.length-1],(n=[])[0]=r),a=n.find((function(e){return ne()(e,"label")})),!(Object(o.isUndefined)(a)&&n.length>0&&n[0].hasOwnProperty("name"))){e.next=7;break}return Object(l.k)({s:n[0].name},"/manage/audience",t),e.abrupt("return");case 7:if(c=Object(o.isUndefined)(a)?void 0:a.label,i=ne()(t,"s")&&!X()(t.s)?t.s:"",c!==i){e.next=11;break}return e.abrupt("return");case 11:Object(l.k)({s:c},"/manage/audiences",t);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){le(c,r,a,o,i,"next",e)}function i(e){le(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return Object(r.createElement)(Y.a,{autocompleter:Object(s.nb)()?se:{},multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:a,onChange:i,placeholder:Object(c.__)("Search by name","wp-marketing-automations"),showClearButton:!0,disabled:!1})},fe=n(800),me=n(139),pe=n(134),de=n(204),Oe=n(803);function je(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){je(c,r,a,o,i,"next",e)}function i(e){je(c,r,a,o,i,"throw",e)}o(void 0)}))}}var ye=function(e){var t=e.isOpen,n=e.tasks,a=e.onSuccess,o=e.onError,i=e.onRequestClose,l=e.actionType,b=n?n.length:0,f=Object(Oe.a)(function(){var e=ge(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u()({path:Object(s.m)("/bulk-action/audience"),method:"DELETE",data:{ids:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return f.reset()}),2500),a&&a()},onError:function(){o&&o()}}),m=function(){var e=ge(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.mutate(n.map((function(e){return e.ID})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p={delete:{title:Object(c._n)("Delete Audience","Delete Audiences",b,"wp-marketing-automations"),description:Object(r.createElement)(r.Fragment,null,Object(c.__)("You are about to delete ","wp-marketing-automations"),Object(c._n)("audience","audiences",b,"wp-marketing-automations"),Object(c.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(c.__)("Delete","wp-marketing-automations"),cancelBtn:Object(c.__)("Cancel","wp-marketing-automations"),successMsg:Object(c.__)("Bulk action executed successfully","wp-marketing-automations"),errorMsg:Object(c.__)("Unable to delete audience","wp-marketing-automations"),confirmDescription:Object(c.__)("This action is irreversible","wp-marketing-automations")}};return Object(r.createElement)(z.a,{modalTitle:p.hasOwnProperty(l)&&p[l].hasOwnProperty("title")?p[l].title:Object(c._n)("Perform Actions","Perform Actions",b,"wp-marketing-automations"),deleteDescriptionText:p.hasOwnProperty(l)&&p[l].hasOwnProperty("description")?p[l].description:"",confirmButtonText:p.hasOwnProperty(l)&&p[l].hasOwnProperty("confirmBtn")?p[l].confirmBtn:Object(c.__)("Confirm","wp-marketing-automations"),cancelButtonText:p.hasOwnProperty(l)&&p[l].hasOwnProperty("cancelBtn")?p[l].cancelBtn:Object(c.__)("Cancel","wp-marketing-automations"),onConfirm:m,isLoading:f.isLoading,successMessage:f.isSuccess&&(p.hasOwnProperty(l)&&p[l].hasOwnProperty("successMsg")?p[l].successMsg:Object(c.__)("Actions Done!","wp-marketing-automations")),errorMessage:f.isError&&(f.error&&f.error.message?f.error.message:p.hasOwnProperty(l)&&p[l].hasOwnProperty("errorMsg")?p[l].errorMsg:Object(c.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!i&&i()},isOpen:t,confirmDescription:p.hasOwnProperty(l)&&p[l].hasOwnProperty("confirmDescription")?p[l].confirmDescription:"",isDelete:!0})};function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ee=function(e){var t=e.floatingBarProps,n=void 0===t?{}:t,a=e.resetSelection,o=e.onSuccess,i=e.screenType,u=e.screenTypeId,s=e.automationId,l=he(Object(r.useState)([]),2),b=l[0],f=l[1],m=he(Object(r.useState)(!1),2),p=m[0],d=m[1],O=he(Object(r.useState)(""),2),j=O[0],g=O[1],y=function(){a&&a(),f([])};Object(r.useEffect)((function(){y()}),[i]);var w=Object(r.useCallback)((function(e,t){f(t),g(e),d(!0)}),[]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(de.a,we({actions:[{id:"delete",icon:"trash",hint:Object(c.__)("Delete","wp-marketing-automations")}],onAction:w},n)),Object(r.createElement)(ye,{tasks:b,isOpen:p,onSuccess:function(){o&&o(j,b),y()},onError:y,onRequestClose:function(){return d(!1)},screenType:i,screenTypeId:u,actionType:j,automationId:s}))},_e=n(92),ke=n(9),Pe=n.n(ke);function Se(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||Ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){if(e){if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(e,t):void 0}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Re=function(){var e=Object(r.useContext)(s.d),t=Object(l.i)(),n=Object(x.a)(),i=Ae(Object(r.useState)(!1),2),b=i[0],f=i[1],m=Ae(Object(r.useState)(!1),2),p=m[0],d=m[1],O=Ae(Object(r.useState)(!1),2),g=O[0],y=O[1],w=Ae(Object(r.useState)(""),2),h=w[0],v=w[1],E=Ae(Object(r.useState)(!1),2),k=E[0],A=E[1],N=Ae(Object(r.useState)(""),2),I=N[0],R=N[1],T=Ae(Object(r.useState)({loading:!1,status:!1}),2),L=T[0],B=T[1],q=Ae(Object(r.useState)({loading:!1,error:!1,success:!1,message:""}),2),F=q[0],U=q[1],V=P()("bwf-audience-lists",{"has-search":!0}),H=[{ID:"1",name:"Dummy Audience",type:"3",created_at:Pe()().format(),data:{filters:[],desc:"This is a dummy audience"},updated_at:Pe()().format()}],J=G(),K=J.getAudiences,Y=J.getLoading,W=J.getOffset,X=J.getPageNumber,Z=J.getPerPageCount,ee=J.getTotalCount,te=J.getCountData,ne=J.getContactCountData,re=Z(),ae=W(),oe=t.s,ie=Object(s.nb)()?K():H,ue=X(),se=!!Object(s.nb)()&&Y(),le=ee(),Oe=te(),je=ne(),ge=Ae(Object(r.useState)(!0),2),ye=ge[0],we=ge[1],he=Ae(Object(r.useState)({}),2),ve=he[0],ke=he[1],Ce=M(),xe=Ce.fetch,Ie=Ce.setStateAudienceValues,Re=Object(r.useRef)(new AbortController);Object(r.useEffect)((function(){ke(je)}),[je]),Object(r.useEffect)((function(){return function(){Ie("countData",{}),Re.current.abort()}}),[]),Object(r.useEffect)((function(){Object(s.nb)()?(xe(re,ae,oe||""),d(!1)):d(!0)}),[re,ae,oe]);var Te=Object(r.createElement)(a.Button,{isPrimary:!0,key:"add",className:"bwf-display-flex",onClick:function(){Object(s.nb)()?(f(!0),v(""),y(!1),R("")):we(!0)}},!Object(s.nb)()&&Object(r.createElement)(j.a,{icon:"lock",size:"15"}),Object(c.__)("Add New Audience","wp-marketing-automations")),Me=Object(me.a)().getPageCountData,Le=Object(pe.a)().setPageCountData,Be=Me();Object(r.useEffect)((function(){Le(De(De({},Be),Oe))}),[Oe]),Object(fe.a)("manage_audiences","",Object(c.__)("ALL AUDIENCE","wp-marketing-automations"),Te),Object(r.useEffect)((function(){if(!p&&!Object(o.isEmpty)(ie)&&!se&&Object(s.nb)())try{var e={audience_ids:[]};ie.map((function(t){e.audience_ids.push(t.ID)})),u()({method:"GET",path:Object(s.m)("/audiences/contacts?"+Object(ce.stringify)(e)),signal:Re.current.signal}).then((function(e){200==e.code&&(Ie("contactCountData",De(De({},e.result),je)),d(!0))})).catch((function(e){console.log(e)}))}catch(e){console.log(e)}}),[ie]);var qe=Object(r.useMemo)((function(){var e={};if(Array.isArray(ie)){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Ne(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw c}}}}(ie);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.ID]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[ie]),Fe=Object(s.nb)()?Object(de.b)(qe):{},Ue=Fe.singleSelectProps,Ge=Fe.selectAllProps,$e=Fe.floatingBarProps,ze=Fe.resetSelection,Ve=[{key:"select_audience",label:Object(s.nb)()?Object(r.createElement)(a.CheckboxControl,Ge):Object(r.createElement)(r.Fragment,null),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-45"},{key:"name",label:Object(c.__)("Name","wp-marketing-automations"),isLeftAligned:!0},{key:"createdon",label:Object(c.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"},{key:"description",label:Object(c.__)("Description","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-40p"},{key:"contacts",label:Object(c.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"}],He=function(){Object(s.nb)()&&(xe(re,ae,oe||""),d(!1))},Je=function(){var t,n=(t=regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return B(De(De({},r),{},{status:!0})),t.prev=1,t.next=4,u()({path:Object(s.m)("/audience/".concat(n)),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(s.j)(null==t?void 0:t.message));B({status:!1}),e(t.message),xe(re,ae,oe||""),d(!1)})).catch((function(e){throw Error(Object(s.j)(null==e?void 0:e.message))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),B({status:!0,error:t.t0.message?t.t0.message:Object(c.__)("Error in deleting audience","wp-marketing-automations")});case 9:Object(s.gb)(e,2e3);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function o(e){Se(c,r,a,o,i,"next",e)}function i(e){Se(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e,t){return n.apply(this,arguments)}}(),Ke=function(e){return p?ve.hasOwnProperty(parseInt(e.ID))&&ve[parseInt(e.ID)].contact_count>0?Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("a",{onClick:function(){var t,n;Object(l.k)(De(De({},(t=e.data.filters,n={},Object.keys(t).map((function(e){var r=t[e];Object(o.isString)(r)&&(r=encodeURIComponent(r)),n[e]=r})),n)),{},{filter:"advanced",path:"/contacts",page:"autonami"}),"/",{})},className:"bwf-a-no-underline"},parseInt(ve[parseInt(e.ID)].subscribers_count)+" of "+ve[parseInt(e.ID)].contact_count),Object(r.createElement)("span",null,Object(c.__)("Subscribed","wp-marketing-automations"))):"-":Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-w-150",title:"Loading"},"Loading")},Qe=ie.map((function(e){return[{display:Object(s.nb)()&&Ue.hasOwnProperty(e.ID)?Object(r.createElement)(a.CheckboxControl,Ue[e.ID]):Object(r.createElement)(r.Fragment,null),value:null},{display:(i=e,Object(r.createElement)(S.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var n=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(C.a,{isClickable:!0,onInvoke:function(){Object(s.nb)()?Object(l.k)(De(De({},i.data.filters),{},{filter:"advanced",path:"/contacts"}),"/",t):we(!0),n()}},Object(r.createElement)(D.a,{justify:"flex-start"},Object(r.createElement)(D.c,null,Object(r.createElement)(j.a,{icon:"view"})),Object(r.createElement)(D.c,null,Object(c.__)("View Contacts","wp-marketing-automations")))),Object(r.createElement)(C.a,{isClickable:!0,onInvoke:function(){Object(s.nb)()?(y(i),v(i.name),R(i.data.desc?i.data.desc:""),f(!0)):we(!0),n()}},Object(r.createElement)(D.a,{justify:"flex-start"},Object(r.createElement)(D.c,null,Object(r.createElement)(j.a,{icon:"edit"})),Object(r.createElement)(D.c,null,Object(c.__)("Edit","wp-marketing-automations")))),Object(r.createElement)(C.a,{isClickable:!0,onInvoke:function(){if(Object(s.nb)()){var e={status:!0,deleteEntityName:null==i?void 0:i.name,modalTitle:Object(c.__)("Delete Audience"),buttonConfirm:Object(c.__)("Delete","wp-marketing-automations"),buttonCancel:Object(c.__)("Cancel","wp-marketing-automations")};B(De(De({},e),{},{onConfirm:function(){return Je([i.ID],e)}}))}else we(!0);n()}},Object(r.createElement)(D.a,{justify:"flex-start"},Object(r.createElement)(D.c,null,Object(r.createElement)(j.a,{icon:"trash"})),Object(r.createElement)(D.c,null,Object(c.__)("Delete","wp-marketing-automations")))))}})),value:"action"},{display:e.name,value:""},{display:(n=e.created_at,Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("span",null,Object(s.O)(n)))),value:""},{display:e.data.hasOwnProperty("desc")&&!Object(o.isEmpty)(e.data.desc)?e.data.desc:"-",value:""},{display:Ke(e),value:""}];var n,i})),Ye=function(e){e!==re&&Ie("limit",e)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.a,{className:V,rows:Qe,headers:Ve,query:{paged:ue},rowsPerPage:re,totalRows:le,isLoading:se,onPageChange:function(e,t){Ie("offset",(e-1)*re)},onQueryChange:function(e){return"per_page"!==e?function(){}:Ye},showMenu:!1,rowHeader:!0,actions:[Object(r.createElement)(be,{key:"search",query:t})],emptyMessage:Object(c.__)("No audiences found","wp-marketing-automations")}),b&&Object(s.nb)()&&Object(r.createElement)(a.Modal,{onRequestClose:function(){return f(!1)},shouldCloseOnClickOutside:!1,className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-audience-modal-update"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-display-flex gap-20"},Object(r.createElement)("span",{onClick:function(){return f(!1)},className:"bwf-modal-close bwf-cursor-pointer"},Object(r.createElement)(j.a,{icon:"close",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-modal-heading"},g?"Edit Audience":"Add Audience"))),Object(r.createElement)("div",{className:"bwf-audience-modal-content"},Object(r.createElement)("div",{className:"bwf-audience-content-wrap"},Object(r.createElement)("div",{className:"bwf_clear_30"}),k&&Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return A(!1)}},k),Object(r.createElement)(a.TextControl,{type:"text",value:h,autoFocus:!0,placeholder:Object(c.__)("Enter Name","wp-marketing-automations"),label:Object(c.__)("Name","wp-marketing-automations"),onChange:function(e){v(e),Object(o.isEmpty)(e)?A(Object(c.__)("Name is required","wp-marketing-automations")):A(!1)},disabled:F&&F.loading}),Object(r.createElement)(a.TextareaControl,{placeholder:Object(c.__)("Enter description","wp-marketing-automations"),label:Object(c.__)("Description","wp-marketing-automations"),value:I,onChange:function(e){return R(e)},disabled:F&&F.loading}),Object(r.createElement)("span",null,Object(c.__)("Filters","wp-marketing-automations")),Object(r.createElement)($.a,{siteLocale:"en-US",currency:Object(s.yb)()?bwfcrm_contacts_data.currency:{},config:{title:Object(c.__)("Select Rules","wp-marketing-automations"),filters:n,enableGrouping:!0,hideAdvanceControl:!0,footerComponent:function(e){return Object(r.createElement)("div",{style:{marginBottom:"-24px"}},Object(r.createElement)(a.Button,{className:"bwf-cancel-btn",onClick:function(){return f(!1)}},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(Q,{filter:e.data,config:e.config,audienceDetail:g,setModal:U,modalData:F,setOpen:f,title:h,desc:I,error:k,setError:A,reloadList:He}))}},disabled:F&&F.loading,path:"/manage/audience",query:g?g.data.filters:{}})))),Object(r.createElement)(z.a,{deleteEntityName:L.deleteEntityName,confirmButtonText:L.buttonConfirm,cancelButtonText:L.buttonCancel,onConfirm:L.onConfirm,isLoading:L.loading,successMessage:L.success,errorMessage:L.error,onRequestClose:function(){return B({status:!1})},isOpen:L.status,modalTitle:Object(c.__)("Delete Audience"),isDelete:!0}),Object(s.nb)()&&Object(r.createElement)(Ee,{floatingBarProps:$e,resetSelection:ze,onSuccess:function(){return xe(re,ae,oe||"")}}),!Object(s.nb)()&&Object(r.createElement)(_e.a,{isOpen:ye,onRequestClose:function(){return we(!1)},closeOnClickOut:!1,modalContent:{demoLabel:Object(c.__)("Try Demo","wp-marketing-automations")}}))}},940:function(e,t,n){},941:function(e,t,n){},942:function(e,t,n){}}]);