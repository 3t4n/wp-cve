(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1119:function(e,t,n){},1120:function(e,t,n){},1137:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(17),o=(n(1119),n(2)),c=n(6),i=n.n(c),s=n(3),u=n(10),l=n.n(u),b=n(4),m=n(16),f=n(248),p=n(59),O=n(91),d=n(5),j=n(27),g=n(32),h=n.n(g),y=n(115),w=n.n(y),v=n(31),_=n.n(v),E=n(15),k=n(14),P=n.n(k);function C(e,t,n,r,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}var S=function(e){return e.name},D={name:"lists",className:"bwf-search-bwf-lists-result",options:function(e){return(t=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h()(t)){e.next=2;break}return e.abrupt("return",[]);case 2:return n={search:t,limit:5,offset:0},e.next=5,l()({path:Object(d.m)("/lists?"+Object(a.stringify)(n)),method:"GET"});case 5:return r=e.sent,e.abrupt("return",_()(r,"result")?r.result:[]);case 7:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function c(e){C(o,r,a,c,i,"next",e)}function i(e){C(o,r,a,c,i,"throw",e)}c(void 0)}))},function(e){return n.apply(this,arguments)})(e);var t,n},isDebounced:!0,getOptionIdentifier:function(e){return e.ID},getOptionKeywords:function(e){return[e.name]},getFreeTextOptions:function(e,t){return[{key:"name",label:Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name"},P()({mixedString:Object(o.__)("All list with names that include {{query /}}","wp-marketing-automations"),components:{query:Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{id:e,name:e,lists:t.map((function(e){return _()(e,"value")?e.value:e})),searchTerm:e}}]},getOptionLabel:function(e,t){var n=Object(d.i)(S(e),t)||{};return Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":S(e)},n.suggestionBeforeMatch,Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch)},getOptionCompletion:function(e){return e}};function x(e,t,n,r,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}var I=function(e){var t=e.query,n=t.hasOwnProperty("s")?t.s:"",a=h()(n)?[]:[{key:n,label:Object(o.__)("Search List: ","wp-marketing-automations")+n,bwfLabelSource:"bwfcrm_lists",isSearchTerm:!0}],c=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w()(n)){e.next=2;break}return e.abrupt("return");case 2:if(h()(n)||(r=n[n.length-1],(n=[])[0]=r),a=n.find((function(e){return _()(e,"searchTerm")})),!(Object(s.isUndefined)(a)&&n.length>0&&n[0].hasOwnProperty("name"))){e.next=7;break}return Object(E.k)({s:n[0].name},"/manage/lists",t),e.abrupt("return");case 7:if(o=Object(s.isUndefined)(a)?void 0:a.searchTerm,c=_()(t,"s")&&!h()(t.s)?t.s:"",o!==c){e.next=11;break}return e.abrupt("return");case 11:Object(E.k)({s:o},"/manage/lists",t);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){x(o,r,a,c,i,"next",e)}function i(e){x(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return n.apply(this,arguments)}}();return Object(r.createElement)(j.a,{autocompleter:Object(d.nb)()?D:"",multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:a,onChange:c,placeholder:Object(o.__)("Search by name","wp-marketing-automations"),showClearButton:!0,disabled:!1})},N=n(136);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var M=function(){var e=Object(N.a)("listdata"),t=e.getStateProp;return R(R({},A(e,["getStateProp"])),{},{getLists:function(){return t("lists")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getTotalCount:function(){return parseInt(t("total"))},getCountData:function(){return t("countData")},getContactCountData:function(){return t("contactCountData")}})},B=n(137);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var V=function(){var e=Object(B.a)("listdata"),t=e.fetch,n=e.setStateProp;return F(F({},K(e,["fetch","setStateProp"])),{},{fetch:function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.s,c=(e.page,e.filter,e.path,K(e,["s","page","filter","path"])),i={offset:n,limit:r,search:o,filters:c,get_wc:Object(d.yb)(),grab_totals:a};t("GET",Object(d.m)("/lists"),i)},setStateListValues:function(e){n("lists",e)},setStateListValuesByKey:function(e,t){n(e,t)}})},z=(n(1120),n(254),n(256),n(44),n(8)),G=n(800),H=n(139),J=n(134),Q=n(204),Y=n(803),$=n(135);function W(e,t,n,r,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function X(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){W(o,r,a,c,i,"next",e)}function i(e){W(o,r,a,c,i,"throw",e)}c(void 0)}))}}var Z=function(e){var t=e.isOpen,n=e.tasks,a=e.onSuccess,c=e.onError,i=e.onRequestClose,s=e.actionType,u=n?n.length:0,b=Object(Y.a)(function(){var e=X(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({path:Object(d.m)("/bulk-action/list"),method:"DELETE",data:{ids:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return b.reset()}),2500),a&&a()},onError:function(){c&&c()}}),m=function(){var e=X(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.mutate(n.map((function(e){return e.ID})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f={delete:{title:Object(o._n)("Delete List","Delete Lists",u,"wp-marketing-automations"),description:Object(r.createElement)(r.Fragment,null,Object(o.__)("You are about to delete ","wp-marketing-automations"),Object(o._n)("list","lists",u,"wp-marketing-automations"),Object(o.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(o.__)("Delete","wp-marketing-automations"),cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),successMsg:Object(o.__)("Bulk action executed successfully","wp-marketing-automations"),errorMsg:Object(o.__)("Unable to delete list","wp-marketing-automations"),confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations")}};return Object(r.createElement)($.a,{modalTitle:f.hasOwnProperty(s)&&f[s].hasOwnProperty("title")?f[s].title:Object(o._n)("Perform Actions","Perform Actions",u,"wp-marketing-automations"),deleteDescriptionText:f.hasOwnProperty(s)&&f[s].hasOwnProperty("description")?f[s].description:"",confirmButtonText:f.hasOwnProperty(s)&&f[s].hasOwnProperty("confirmBtn")?f[s].confirmBtn:Object(o.__)("Confirm","wp-marketing-automations"),cancelButtonText:f.hasOwnProperty(s)&&f[s].hasOwnProperty("cancelBtn")?f[s].cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:m,isLoading:b.isLoading,successMessage:b.isSuccess&&(f.hasOwnProperty(s)&&f[s].hasOwnProperty("successMsg")?f[s].successMsg:Object(o.__)("Actions Done!","wp-marketing-automations")),errorMessage:b.isError&&(b.error&&b.error.message?b.error.message:f.hasOwnProperty(s)&&f[s].hasOwnProperty("errorMsg")?f[s].errorMsg:Object(o.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!i&&i()},isOpen:t,confirmDescription:f.hasOwnProperty(s)&&f[s].hasOwnProperty("confirmDescription")?f[s].confirmDescription:"",isDelete:!0})};function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=function(e){var t=e.floatingBarProps,n=void 0===t?{}:t,a=e.resetSelection,c=e.onSuccess,i=e.screenType,s=e.screenTypeId,u=e.automationId,l=te(Object(r.useState)([]),2),b=l[0],m=l[1],f=te(Object(r.useState)(!1),2),p=f[0],O=f[1],d=te(Object(r.useState)(""),2),j=d[0],g=d[1],h=function(){a&&a(),m([])};Object(r.useEffect)((function(){h()}),[i]);var y=Object(r.useCallback)((function(e,t){m(t),g(e),O(!0)}),[]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Q.a,ee({actions:[{id:"delete",icon:"trash",hint:Object(o.__)("Delete","wp-marketing-automations")}],onAction:y},n)),Object(r.createElement)(Z,{tasks:b,isOpen:p,onSuccess:function(){c&&c(j,b),h()},onError:h,onRequestClose:function(){return O(!1)},screenType:i,screenTypeId:s,actionType:j,automationId:u}))},ae=n(92),oe=n(9);function ce(e,t,n,r,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ce(o,r,a,c,i,"next",e)}function i(e){ce(o,r,a,c,i,"throw",e)}c(void 0)}))}}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pe=[{ID:25,name:"Dummy List",type:"2",created_at:n.n(oe)()().format(),updated_at:null,data:null}],Oe=function(e){var t=e.query,n=M(),c=V(),u=be(Object(r.useState)(!1),2),j=u[0],g=u[1],h=be(Object(r.useState)(!1),2),y=h[0],w=h[1],v=be(Object(r.useState)({}),2),_=v[0],k=v[1],P=be(Object(r.useState)({}),2),C=P[0],S=P[1],D=c.fetch,x=c.setStateListValues,N=c.setStateListValuesByKey,L=be(Object(r.useState)(!1),2),R=L[0],T=L[1],A=n.getLists,B=n.getPageNumber,q=n.getPerPageCount,F=n.getLoading,U=n.getTotalCount,K=n.getCountData,Y=n.getContactCountData,$=Object(r.useContext)(d.d),W=Object(d.nb)()?A():pe,X=B(),Z=q(),ee=U(),te=F(),ne=K(),oe=Y(),ce=be(Object(r.useState)(!1),2),se=ce[0],le=ce[1],fe=be(Object(r.useState)({}),2),Oe=fe[0],de=fe[1],je=Object(r.useRef)(new AbortController);Object(r.useEffect)((function(){de(oe)}),[oe]),Object(r.useEffect)((function(){Object(d.nb)()?(D(t,0,25,!0),g(!1)):g(!0)}),[t.s]);var ge=Object(r.createElement)(b.Button,{isPrimary:!0,key:"add",className:"bwf-display-flex",onClick:function(){Object(d.nb)()?(k({}),w(!0),T(!1)):S(!0)}},!Object(d.nb)()&&Object(r.createElement)(z.a,{icon:"lock",size:"15"}),Object(o.__)("Add New List","wp-marketing-automations")),he=Object(H.a)().getPageCountData,ye=Object(J.a)().setPageCountData,we=he();Object(r.useEffect)((function(){ye(ue(ue({},we),ne))}),[ne]),Object(r.useEffect)((function(){return function(){N("countData",{}),je.current.abort()}}),[]),Object(G.a)("manage_lists","",Object(o.__)("ALL LISTS","wp-marketing-automations"),ge),Object(r.useEffect)((function(){if(!j&&!Object(s.isEmpty)(W)&&!te&&Object(d.nb)())try{var e={list_ids:[]};W.map((function(t){e.list_ids.push(t.ID)})),l()({method:"GET",path:Object(d.m)("/lists/contacts?"+Object(a.stringify)(e)),signal:je.current.signal}).then((function(e){200==e.code&&(N("contactCountData",ue(ue({},e.result),oe)),g(!0))})).catch((function(e){console.log(e)}))}catch(e){console.log(e)}}),[W]);var ve=i()("bwfcrm-contacts-lists",{"has-search":!0}),_e=Object(r.useMemo)((function(){var e={};if(Array.isArray(W)){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=me(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}(W);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.ID]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[W]),Ee=Object(Q.b)(_e),ke=Ee.singleSelectProps,Pe=Ee.selectAllProps,Ce=Ee.floatingBarProps,Se=Ee.resetSelection,De=[{key:"select_list",label:Object(r.createElement)(b.CheckboxControl,Pe),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-45"},{key:"lists",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0},{key:"createdon",label:Object(o.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"contacts",label:Object(o.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"}],xe=function(e){e!==Z&&(D(t,0,e),g(!1))},Ie=function(e){return Object(r.createElement)(p.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.a,{isClickable:!0,onInvoke:function(){Object(d.nb)()?Object(E.k)({filter:"advanced",path:"/contacts","lists_any[]":e.ID},"/",{}):S(!0),n()}},Object(r.createElement)(m.a,{justify:"flex-start"},Object(r.createElement)(m.c,null,Object(r.createElement)(z.a,{icon:"view"})),Object(r.createElement)(m.c,null,Object(o.__)("View Contacts","wp-marketing-automations")))),Object(r.createElement)(O.a,{isClickable:!0,onInvoke:function(){Object(d.nb)()?(k(e),w(!0),T(!1)):S(!0),n()}},Object(r.createElement)(m.a,{justify:"flex-start"},Object(r.createElement)(m.c,null,Object(r.createElement)(z.a,{icon:"edit"})),Object(r.createElement)(m.c,null,Object(o.__)("Edit","wp-marketing-automations")))),Object(r.createElement)(O.a,{isClickable:!0,onInvoke:function(){Object(d.nb)()?(k(ue(ue({},_),{},{delete:!0,deleteid:e.ID,entityName:e.name})),w(!0)):S(!0),n()}},Object(r.createElement)(m.a,{justify:"flex-start"},Object(r.createElement)(m.c,null,Object(r.createElement)(z.a,{icon:"trash"})),Object(r.createElement)(m.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})},Ne=W.map((function(e){var t,n;return[{display:ke.hasOwnProperty(e.ID)?Object(r.createElement)(b.CheckboxControl,ke[e.ID]):Object(r.createElement)(r.Fragment,null),value:null},{display:Ie(e),value:"action"},{display:e.name,value:e.ID},{display:(n=e.created_at,Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("span",null,Object(d.O)(n)))),value:e.created_at},{display:(t=e,j?Oe.hasOwnProperty(parseInt(t.ID))&&Oe[parseInt(t.ID)].contact_count>0?Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("a",{onClick:function(){Object(E.k)({filter:"advanced",path:"/contacts","lists_any[]":t.ID},"/",{})},className:"bwf-a-no-underline"},parseInt(Oe[parseInt(t.ID)].subscribers_count)+" of "+Oe[parseInt(t.ID)].contact_count),Object(r.createElement)("span",null,Object(o.__)("Subscribed","wp-marketing-automations"))):"-":Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-w-150",title:"Loading"},"Loading")),value:""}]})),Le=function(){var e=ie(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.ID){e.next=13;break}return r=W.map((function(e){return parseInt(e.ID)===parseInt(n.ID)?n:e})),e.prev=2,e.next=5,l()({path:Object(d.m)("/lists/".concat(n.ID,"/")),method:"POST",data:{list_name:n.name,description:n.description},headers:{"Content-Type":"application/json"}}).then((function(e){if(200!=e.code)throw Error(Object(d.j)(null==e?void 0:e.message));w(!1),x(r),k({}),$(e.result),Object(d.gb)($,2e3)})).catch((function(e){throw Error(Object(d.j)(null==e?void 0:e.message))}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),T(e.t0.message),k(ue(ue({},_),{},{loading:!1}));case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,l()({path:Object(d.m)("/list/"),method:"POST",data:{name:n.name,description:n.description},headers:{"Content-Type":"application/json"}}).then((function(e){if(200!=e.code)throw Error(Object(d.j)(null==e?void 0:e.message));w(!1),D(t,(X-1)*Z,Z),k({}),g(!1),$(e.message),Object(d.gb)($,2e3)})).catch((function(e){throw Error(Object(d.j)(null==e?void 0:e.message))}));case 16:e.next=22;break;case 18:e.prev=18,e.t1=e.catch(13),T(e.t1.message),k(ue(ue({},_),{},{loading:!1}));case 22:case"end":return e.stop()}}),e,null,[[2,7],[13,18]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=ie(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=12;break}return le(!0),e.prev=2,e.next=5,l()({path:Object(d.m)("/lists/".concat(n,"/")),method:"DELETE",data:{list_id:parseInt(n)}}).then((function(e){if(200!=e.code)throw Error(Object(d.j)(null==e?void 0:e.message));setTimeout((function(){$(e.message),w(!1),D(t,(X-1)*Z,Z),k({}),g(!1),le(!1)}),1e3)})).catch((function(e){throw Error(Object(d.j)(null==e?void 0:e.message))}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),le(!1),k(ue(ue({},_),{},{error:e.t0.message}));case 11:Object(d.gb)($,2e3);case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.createElement)("div",{className:"bwf-c-list-section bwf_w_full"},Object(r.createElement)(f.a,{className:ve,rows:Ne,headers:De,query:{paged:X},rowsPerPage:Z,totalRows:ee?parseInt(ee):0,isLoading:te,onPageChange:function(e,n){D(t,(e-1)*Z,Z),g(!1)},onQueryChange:function(e){return"per_page"!==e?function(){}:xe},showMenu:!1,actions:[Object(r.createElement)(I,{key:"search",query:t})],rowHeader:!0,emptyMessage:Object(o.__)("No lists found","wp-marketing-automations")}),Object(d.nb)()&&y&&Object(r.createElement)(b.Modal,{title:!_.delete&&(_.ID?Object(o.__)("Edit List","wp-marketing-automations"):Object(o.__)("Add List","wp-marketing-automations")),onRequestClose:function(){return w(!1)},className:"bwf-admin-modal bwf-h--core-header "+(_.loading?"bwf-admin-modal-no-header ":" ")+(_.delete?" bwf-admin-modal-squeezy ":"bwf-admin-modal-squeezy")},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},!_.delete&&(_.ID?Object(o.__)("Edit List","wp-marketing-automations"):Object(o.__)("Add List","wp-marketing-automations")),_.delete&&Object(o.__)("Delete List")),Object(r.createElement)("span",{onClick:function(){return w(!1)},className:"bwf-modal-close"},Object(r.createElement)(z.a,{icon:"close",color:"#353030"}))),_.success||_.error||_.delete?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey",style:{margin:0}},_.error?_.error:Object(r.createElement)(r.Fragment,null,Object(o.__)("You are about to delete ","wp-marketing-automations"),Object(r.createElement)("strong",null,_.entityName),Object(o.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_24"}),_.error?Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(b.Button,{isPrimary:!0,onClick:function(){k({}),w(!1)}},Object(o.__)("OK","wp-marketing-automations"))):Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(b.Button,{className:"bwf-cancel-btn",onClick:function(){k({}),w(!1)},disabled:se},Object(o.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(b.Button,{isPrimary:!0,className:"bwf-delete-btn",onClick:function(){Re(_.deleteid)},isBusy:se},Object(o.__)("Delete","wp-marketing-automations"))))):Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"===e.key&&(Object(s.isEmpty)(_.name)||(k(ue(ue({},_),{},{loading:!0})),Le(_)))}},R&&Object(r.createElement)(b.Notice,{status:"error",onRemove:function(){return T(!1)}},R),Object(r.createElement)(b.TextControl,{label:Object(o.__)("Name","wp-marketing-automations"),autoFocus:!0,type:"text",value:_.name?_.name:"",placeholder:Object(o.__)("Enter List Name","wp-marketing-automations"),onChange:function(e){k(ue(ue({},_),{},{name:e}))},disabled:_.loading}),Object(r.createElement)(b.TextareaControl,{label:Object(o.__)("Description","wp-marketing-automations"),type:"text",value:_.description?_.description:"",placeholder:Object(o.__)("Enter List Description","wp-marketing-automations"),onChange:function(e){k(ue(ue({},_),{},{description:e}))},disabled:_.loading}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(b.Button,{className:"bwf-cancel-btn",onClick:function(){return w(!1)}},Object(o.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(b.Button,{isPrimary:!0,onClick:function(){Object(s.isEmpty)(_.name)?T(Object(o.__)("Name is required","wp-marketing-automations")):(k(ue(ue({},_),{},{loading:!0})),Le(_))},className:"bwf-ml-0",isBusy:_.loading,disabled:_.loading},_.ID?Object(o.__)("Save","wp-marketing-automations"):Object(o.__)("Add","wp-marketing-automations"))))),Object(d.nb)()&&Object(r.createElement)(re,{floatingBarProps:Ce,resetSelection:Se,onSuccess:function(){return D(t,0,25,!0)}}),!Object(d.nb)()&&Object(r.createElement)(ae.a,{isOpen:C,onRequestClose:function(){return S(!1)},closeOnClickOut:!1,modalContent:{demoLabel:Object(o.__)("Try Demo","wp-marketing-automations")}}))},de=n(67);t.default=function(){var e=location&&location.search?Object(a.parse)(location.search.substring(1)):{};return Object(d.g)("Lists"),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(de.a,null),Object(r.createElement)(Oe,{query:e}))}},800:function(e,t,n){"use strict";var r=n(134),a=n(0),o=n(2);t.a=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},s=Object(r.a)(),u=s.setActiveMultiple,l=s.resetHeaderMenu,b=s.setL2NavType,m=s.setL2Nav,f=s.setBackLink,p=s.setL2Title,O=s.setL2Content,d=s.setBackLinkLabel,j=s.setPageHeader;return Object(a.useEffect)((function(){l(),!t&&b("menu"),!t&&m(i.contacts_nav),u({leftNav:"contacts",rightNav:e}),t&&f(t),t&&d("All Contacts"),n&&p(n),n&&"Export"===n&&(c&&O(c),b("menu"),m({export:{name:Object(o.__)("All","wp-marketing-automations"),link:"admin.php?page=autonami&path=/export"}})),!t&&c&&O(c),j("Contacts")}),[e,n]),!0}},803:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(12),a=n(7),o=n.n(a),c=n(25),i=n(13),s=n(26),u=n(253),l=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.setOptions(n),r.bindMethods(),r.updateResult(),r}Object(s.a)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,Object(r.a)({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:Object(u.b)();this.currentResult=Object(r.a)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},n.notify=function(e){var t=this;c.a.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(n(52).a),b=n(251);function m(e,t,n){var a=o.a.useRef(!1),s=o.a.useState(0)[1],u=Object(i.k)(e,t,n),m=Object(b.b)(),f=o.a.useRef();f.current?f.current.setOptions(u):f.current=new l(m,u);var p=f.current.getCurrentResult();o.a.useEffect((function(){a.current=!0;var e=f.current.subscribe(c.a.batchCalls((function(){a.current&&s((function(e){return e+1}))})));return function(){a.current=!1,e()}}),[]);var O=o.a.useCallback((function(e,t){f.current.mutate(e,t).catch(i.i)}),[]);if(p.error&&f.current.options.useErrorBoundary)throw p.error;return Object(r.a)({},p,{mutate:O,mutateAsync:p.mutate})}}}]);