(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1170:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(2),c=n(17),o=n(6),l=n.n(o),i=n(5),s=n(248),u=n(3),m=n(27),b=n(32),f=n.n(b),p=n(115),d=n.n(p),O=n(31),j=n.n(O),w=n(15),g=n(10),v=n.n(g),y=n(14),h=n.n(y);function E(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}var _={name:"contacts",className:"bwf-search-bwf-contacts-result",options:function(e){return(t=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f()(t)){e.next=2;break}return e.abrupt("return",[]);case 2:return n={search:t,limit:10,offset:0},e.next=5,v()({path:Object(i.m)("/contacts?"+Object(c.stringify)(n)),method:"GET"});case 5:return r=e.sent,e.abrupt("return",j()(r,"result")?r.result:[]);case 7:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function o(e){E(c,r,a,o,l,"next",e)}function l(e){E(c,r,a,o,l,"throw",e)}o(void 0)}))},function(e){return n.apply(this,arguments)})(e);var t,n},isDebounced:!0,getOptionIdentifier:function(e){return e.id},getOptionKeywords:function(e){return[e.f_name,e.l_name,e.email,e.f_name+" "+e.l_name]},getFreeTextOptions:function(e,t){return[{key:"name",label:Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name"},h()({mixedString:Object(a.__)("All contacts with names that include {{query /}}","wp-marketing-automations"),components:{query:Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{id:e,name:e,contacts:t.map((function(e){return j()(e,"value")?e.value:e})),searchTerm:e}}]},getOptionLabel:function(e,t){var n=Object(i.i)(Object(i.u)(e),t)||{};return Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":Object(i.u)(e)},n.suggestionBeforeMatch,Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch)},getOptionCompletion:function(e){return e}};function k(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}var N=function(e){var t=e.query,n=t.hasOwnProperty("s")?t.s:"",c=f()(n)?[]:[{key:n,label:Object(a.__)("Search Term: ","wp-marketing-automations")+n,bwfLabelSource:"bwfcrm_contacts",isSearchTerm:!0}],o=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d()(n)){e.next=2;break}return e.abrupt("return");case 2:if(r=n.find((function(e){return j()(e,"searchTerm")})),!(Object(u.isUndefined)(r)&&n.length>0&&n[0].hasOwnProperty("id"))){e.next=6;break}return Object(w.k)({},"/contact/".concat(n[0].id),t),e.abrupt("return");case 6:if(a=Object(u.isUndefined)(r)?void 0:r.searchTerm,c=j()(t,"s")&&!f()(t.s)?t.s:"",a!==c){e.next=10;break}return e.abrupt("return");case 10:Object(w.k)({s:a},"/contacts",t);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){k(c,r,a,o,l,"next",e)}function l(e){k(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return Object(r.createElement)(m.a,{autocompleter:_,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:c,onChange:o,placeholder:Object(a.__)("Search by contact","wp-marketing-automations"),showClearButton:!0,disabled:!1})},S=n(785),C=n(59),x=n(91),P=n(4),I=n(16),A=n(250),T=n(816),D=n(807),L=n(855),F=n(8),B=n(150);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V=function(e){var t=e.contact,n=Object(r.useContext)(i.d),c=q(Object(r.useState)(!1),2),o=c[0],l=c[1],s=q(Object(r.useState)({type:"email",title:"",body:"",id:0,send:!1}),2),m=s[0],b=s[1],f=q(Object(r.useState)({status:!1,message:""}),2),p=f[0],d=f[1],O=[{value:"",label:Object(a.__)("Select Type","wp-marketing-automations")}].concat(Object(i.v)()),j=function(){var r,a=(r=regeneratorRuntime.mark((function r(a){var c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(c={title:a.title,body:a.body,type:a.type,private:a.send,modified_by:Object(i.x)()}).created_by=Object(i.x)(),l(!0),r.prev=3,r.next=6,v()({path:Object(i.m)("/contacts/".concat(t.id,"/notes/")),method:"POST",data:{notes:c},headers:{"Content-Type":"application/json"}}).then((function(t){if(200!=t.code)throw Error(Object(i.j)(null==t?void 0:t.message));n(t.message),e.setModelStatus({status:!1,contactInfo:{}})})).catch((function(e){throw Error(Object(i.j)(null==e?void 0:e.message))}));case 6:r.next=12;break;case 8:r.prev=8,r.t0=r.catch(3),d({status:!0,message:r.t0.message}),l(!1);case 12:Object(i.gb)(n,2e3);case 13:case"end":return r.stop()}}),r,null,[[3,8]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var c=r.apply(e,t);function o(e){z(c,n,a,o,l,"next",e)}function l(e){z(c,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return a.apply(this,arguments)}}();return Object(r.createElement)(P.Modal,{onRequestClose:function(){return e.setModelStatus(!1)},className:"bwf-admin-modal bwf-admin-modal-large bwf-message-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Add Note","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return e.setModelStatus(!1)},className:"bwf-modal-close"},Object(r.createElement)(F.a,{icon:"close",color:"#353030"}))),Object(r.createElement)("div",{className:"bwf-form-fields"},p.status&&Object(r.createElement)(P.Notice,{status:"error",onRemove:function(){return d(!1)},className:"bwf-send-note-notice"},p.message?p.message:Object(a.__)("Title, type and body are mandatory field. Kindly fill them","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-message-wrap"},Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-pmb-16 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Contact","wp-marketing-automations")),Object(r.createElement)("div",null,Object(r.createElement)("span",{className:"bwf-highlight-content"},Object(r.createElement)("b",null,t.f_name+" "+t.l_name)," ( "+t.email+" ) "))),Object(r.createElement)("div",{className:"bwf-pmb-16 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Type","wp-marketing-automations")),Object(r.createElement)(P.SelectControl,{value:m.type,className:"bwf-w-150",options:O,onChange:function(e){return b(M(M({},m),{},{type:e}))},disabled:o})),Object(r.createElement)("div",{className:"bwf-pmb-16 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Title","wp-marketing-automations")),Object(r.createElement)(P.TextControl,{type:"text",value:m.title,placeholder:Object(a.__)("Title comes here …","wp-marketing-automations"),disabled:o,onChange:function(e){return b(M(M({},m),{},{title:e}))}})),Object(r.createElement)("div",{className:"bwf-message-textarea"},Object(r.createElement)(B.a,{keyid:"bwf-note-editor",content:m.body,setContent:function(e){return b(M(M({},m),{},{body:e}))},height:200})),Object(r.createElement)("div",{className:"bwf-message-footer"},0==parseInt(m.id)&&Object(r.createElement)("div",{className:"bwf-note-send"},Object(r.createElement)(P.ToggleControl,{label:Object(a.__)("Send Note to Contact","wp-marketing-automations"),checked:Boolean(parseInt(m.send)),onChange:function(e){return b(M(M({},m),{},{send:e?"1":"0"}))},className:"bwf-tooglecontrol-advance"})),Object(r.createElement)("div",{className:"bwf-button-col"},Object(r.createElement)(P.Button,{className:"bwf-cancel-btn",onClick:function(){return e.setModelStatus(!1)},disabled:o},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(P.Button,{isPrimary:!0,isBusy:o,disabled:o,onClick:function(){Object(u.isEmpty)(m.title)||Object(u.isEmpty)(m.body)||Object(u.isEmpty)(m.type)?d({status:!0,message:""}):(d({status:!1,message:""}),b(M(M({},m),{},{loading:!0})),j(m))}},Object(a.__)("Add Note","wp-marketing-automations")))))))},G=n(44),W=n(93),H=n(255),K=n(204),Y=n(135),Q=n(803);function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function J(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var te=[{id:"delete",icon:"trash",hint:Object(a.__)("Delete Contacts","wp-marketing-automations")}],ne=function(e){var t=e.floatingBarProps,n=void 0===t?{}:t,c=e.resetSelection,o=e.onSuccess,l=X(Object(r.useState)([]),2),s=l[0],u=l[1],m=X(Object(r.useState)(!1),2),b=m[0],f=m[1],p=Object(Q.a)(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({path:Object(i.m)("/contacts/"),method:"DELETE",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){J(c,r,a,o,l,"next",e)}function l(e){J(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){c&&c(),u([]),setTimeout((function(){p.reset()}),2500),o&&o()},onError:function(){}}),d=Object(r.useCallback)((function(e,t){switch(e){case"delete":u(t),f(!0)}}),[]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,Z({actions:te,onAction:d},n)),Object(r.createElement)(Y.a,{modalTitle:Object(a._n)("Delete Contact","Delete Contacts",s.length),deleteEntityName:1===s.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact")," "),s[0].f_name," ",s[0].l_name):Object(r.createElement)(r.Fragment,null,s.length," ",Object(r.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact"))),confirmButtonText:Object(a.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(a.__)("Cancel","wp-marketing-automations"),onConfirm:function(){var e={contacts:s.map((function(e){return e.id}))};p.mutate(e)},isLoading:p.isLoading,successMessage:p.isSuccess&&Object(a.__)("Contacts Deleted!","wp-marketing-automations"),errorMessage:p.isError&&(p.error&&p.error.message?p.error.message:Object(a.__)("Unable to delete contacts","wp-marketing-automations")),onRequestClose:function(){return f(!1)},isOpen:b,confirmDescription:Object(a.__)("This action is irreversible","wp-marketing-automations"),isDelete:!0}))},re=n(856),ae=n(829);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me=function(e){var t=e.refreshTable,n=e.onToggle,c=se(Object(r.useState)(!1),2),o=c[0],l=c[1],s=Object(i.ab)("table_sort_data"),m=s.hasOwnProperty("contact_sort_data")?s.contact_sort_data:{},b=Object(u.isObject)(m)&&!Object(u.isEmpty)(m)?m:{},f=b.orderby,p=void 0===f?"last_modified":f,d=b.order,O=void 0===d?"desc":d,j=Object(r.useContext)(i.d),w=[{value:"f_name",label:Object(a.__)("Contact Name","wp-marketing-automations")},{value:"creation_date",label:Object(a.__)("Creation Date","wp-marketing-automations")},{value:"last_modified",label:Object(a.__)("Last Updated","wp-marketing-automations")},{value:"country",label:Object(a.__)("Country","wp-marketing-automations")},{value:"state",label:Object(a.__)("State","wp-marketing-automations")}];Object(i.yb)()&&w.push({value:"total_order_count",label:Object(a.__)("Orders","wp-marketing-automations")},{value:"total_order_value",label:Object(a.__)("Total Spend","wp-marketing-automations")},{value:"l_order_date",label:Object(a.__)("Last Order Date","wp-marketing-automations")});var g=se(Object(r.useState)(p),2),y=g[0],h=g[1],E=se(Object(r.useState)(O),2),_=E[0],k=E[1],N=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,r={orderby:y,order:_},(c=oe({},s)).contact_sort_data=r,e.next=7,v()({path:Object(i.m)("/user-preference/".concat(Object(i.x)(),"/")),method:"POST",data:{data:{table_sort_data:c}}}).then((function(e){if(200!==e.code)throw Error(Object(i.j)(null==e?void 0:e.message));bwfcrm_contacts_data.table_column_data.table_sort_data.contact_sort_data=r,j(e.message),t(),n(),l(!1)})).catch((function(e){throw Error(Object(i.j)(null==e?void 0:e.message))}));case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l(!1),j(e.t0.message?e.t0.message:Object(a.__)("Error in saving sort data","wp-marketing-automations"));case 13:Object(i.gb)(j,2e3);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ie(c,r,a,o,l,"next",e)}function l(e){ie(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(x.a,null,Object(r.createElement)("div",{className:"bwf-contact-sort-popover"},Object(r.createElement)("div",{className:"bwf-sort-column-list"},Object(r.createElement)(P.RadioControl,{className:"bwfcrm-inline-option",selected:y,label:"",options:w,onChange:function(e){return h(e)}})),Object(r.createElement)("div",{className:"bwf-sort-order-btn"},Object(r.createElement)(P.ButtonGroup,null,Object(r.createElement)(P.Button,{isPrimary:!_||"desc"===_,isSecondary:_&&"desc"!==_,onClick:function(){return k("desc")}},Object(a.__)("DESC","wp-marketing-automations")),Object(r.createElement)(P.Button,{isPrimary:_&&"asc"===_,isSecondary:_&&"asc"!==_,onClick:function(){return k("asc")}},Object(a.__)("ASC","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf-contact-sort-action"},Object(r.createElement)(P.Button,{isPrimary:!0,className:"bwf-update-button",onClick:function(){return N(n)},disabled:p===y&&O===_||o},o?Object(r.createElement)(G.a,{size:"s",white:!0}):Object(a.__)("Update","wp-marketing-automations"))))))},be=function(e){var t=e.refreshTable;return Object(r.createElement)("div",{className:"bwf-custom-ellipsis",style:{width:"70px"}},Object(r.createElement)(C.a,{label:"",classes:"bwf-mr-10 bwf-ml-10",buttonIcon:Object(r.createElement)("div",{className:"bwf-sort-button components-button is-secondary bwf-btn-small bwf-btn-gray",key:"import"},Object(r.createElement)(F.a,{icon:"import",size:16}),Object(a.__)("Sort","wp-marketing-automations")),renderContent:function(e){var n=e.onToggle;return Object(r.createElement)(me,{refreshTable:t,onToggle:n})}}))},fe=n(804),pe=n(280),de=n(822);function Oe(e){return function(e){if(Array.isArray(e))return _e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function ye(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ve(c,r,a,o,l,"next",e)}function l(e){ve(c,r,a,o,l,"throw",e)}o(void 0)}))}}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||Ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){if(e){if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ke=Object(pe.c)((function(){return Object(r.createElement)(F.a,{icon:"menu-2",size:20})})),Ne=Object(pe.b)((function(e){var t=e.item,n=e.onRemove;return Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-contact-preferences__item"},Object(r.createElement)("div",{className:"bwf-contact-preferences__item-title"},Object(r.createElement)(ke,null),t.label),Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("div",{className:"bwf-contact-preferences__item-type"},Object(r.createElement)("span",null,t.groupLabel)),Object(r.createElement)("div",null,Object(r.createElement)(P.Button,{isSecondary:!0,className:"bwf-contact-preferences__item-remove",onClick:function(){n(Object.keys(t)[0],t.groupKey)}},"Remove")))))})),Se=Object(pe.a)((function(e){var t=e.items,n=e.onRemove;return Object(r.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(u.isEmpty)(t)?Object(r.createElement)("div",{className:"bwf-h4 bwf_text_center bwf-m-20"},"No Additional Columns Selected. Click the Add New Columns button."):t.map((function(e,t){return Object(r.createElement)(Ne,{item:e,key:"bwf-contact-preferences__item-".concat(t),index:t,onRemove:n})})))})),Ce=["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"],xe=function(e){var t=e.onRequestClose,n=e.refreshTable,c=e.setModelData,o=Object(r.useContext)(i.d),l=he(Object(r.useState)(!1),2),s=l[0],m=l[1],b=he(Object(r.useState)(!1),2),f=b[0],p=b[1],d=he(Object(r.useState)(!1),2),O=d[0],j=d[1],w=he(Object(r.useState)(0),2),g=w[0],y=w[1],h=Object(r.useRef)(null),E=he(Object(r.useState)([]),2),_=E[0],k=E[1],N=he(Object(r.useState)([]),2),S=N[0],C=N[1],x=he(Object(r.useState)({}),2),I=x[0],A=x[1],T=he(Object(r.useState)(!1),2),D=T[0],L=T[1],B=Object(r.useRef)(new AbortController),$=Object(de.a)(),M=function(){var e=ye(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({path:Object(i.m)("/contact/export/custom-selections"),signal:B.current.signal}).then((function(e){if(200===e.code&&e.result){var t=Object.create({});Object.keys(e.result).forEach((function(n){"wishlist-member"!==n&&(t[n]={label:e.result[n].name},t[n].fields=Object.keys(e.result[n].selections).map((function(t){return{key:e.result[n].selections[t].slug,label:e.result[n].selections[t].name}})))})),A(t),p(!0)}})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=Object(r.useMemo)((function(){var e=[],t=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries($).forEach((function(n){var r=he(n,2),a=r[0],c=r[1];if(t.includes(a))return!1;var o;o={key:a,label:c.labels.add},e.hasOwnProperty(c.group)?e[c.group].fields.push(o):e[c.group]={label:c.groupLabel,fields:[o]}})),we(we({},e),I)}),[$,I]);Object(r.useEffect)((function(){return M(),function(){B.current.abort()}}),[]),Object(r.useEffect)((function(){if(Object(u.isEmpty)(_)&&f&&!D){if(R.hasOwnProperty("contact_details")){var e=[],t=[];if(!Object(u.isEmpty)(bwfcrm_contacts_data.table_column_data.contactv2))bwfcrm_contacts_data.table_column_data.contactv2.map((function(t){Object(u.isObject)(t)&&e.push(t)})),Object.keys(R).forEach((function(n){R[n].fields.map((function(e){return e.key})).every((function(t){return e.some((function(e){return e.hasOwnProperty(t)}))}))&&t.push(ge({},n,R[n].label))}));k(e),C(t)}L(!0)}}),[R]);var z=function(e,t){var n=R[e].fields.map((function(e){return e.key}));if(S.some((function(t){return t.hasOwnProperty(e)})))k((function(e){return e.filter((function(e){return!n.some((function(t){return e.hasOwnProperty(t)}))}))})),C((function(t){return t.filter((function(t){return!t.hasOwnProperty(e)}))}));else{var r=R[e].fields.map((function(n){var r;return ge(r={},n.key,n.label),ge(r,"label",n.label),ge(r,"groupKey",e),ge(r,"groupLabel",t),r}));k((function(e){return Object(u.uniqBy)([].concat(Oe(e),Oe(r)),(function(e){return Object.keys(e)[0]}))})),C((function(n){return[].concat(Oe(n),[ge({},e,t)])}))}},q=function(){var e=ye(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,v()({path:Object(i.m)("/user-preference/".concat(Object(i.x)(),"/")),method:"POST",data:{data:{contact_columnv2:_}}}).then((function(e){if(200!==e.code)throw Error(Object(i.j)(null==e?void 0:e.message));bwfcrm_contacts_data.table_column_data.contactv2=_,o(e.message),Object(i.gb)(o,2e3),n(),t(),m(!1)})).catch((function(e){throw Error(Object(i.j)(null==e?void 0:e.message))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),m(!1),c({status:!0,modalTitle:Object(a.__)("Save Columns"),error:e.t0.message?e.t0.message:Object(a.__)("Error in saving preferences","wp-marketing-automations")});case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(P.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(a.__)("Table Columns","wp-marketing-automations"),Object(r.createElement)("span",null,"Add new columns or arrange existing columns in contact table")),ref:h,onRequestClose:function(){return t()},className:"bwf-admin-modal bwf-contact-preferences-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-contact-preferences-modal__content"},O?Object(r.createElement)("div",{className:"bwf-contact-preferences"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header"},Object(r.createElement)("div",{className:"bwf-contact-preferences__back-btn",onClick:function(){return j(!1)}},Object(r.createElement)(F.a,{icon:"arrow-left-long",width:20,height:14}),Object(r.createElement)("span",null,"Back"))),Object(r.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(u.isEmpty)(Object.keys(R))||!0===$?Object(r.createElement)(Pe,null):[].concat(Ce,Oe(Object.keys(I))).map((function(e,t){return R.hasOwnProperty(e)&&Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group",key:"bwf-contact-preferences__add-col-group-".concat(t)},Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return y((function(e){return e!==t&&t}))}},Object(r.createElement)("label",{className:"bwf-contact-preferences__add-col-group-header"},Object(r.createElement)(P.CheckboxControl,{checked:S.some((function(t){return t.hasOwnProperty(e)})),onChange:function(){return z(e,R[e].label)},onClick:function(t){t.stopPropagation(),z(e,R[e].label)}}),Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group-title"},R[e].label,function(e){var t=R[e].fields.map((function(e){return e.key})),n=0;return t.forEach((function(e){_.forEach((function(t){t.hasOwnProperty(e)&&n++}))})),n>0?Object(r.createElement)("span",null," (",n," Selected )"):""}(e))),Object(r.createElement)(P.Button,{className:"bwf-contact-preferences__accordian-icon",onClick:function(e){e.stopPropagation(),y((function(e){return e!==t&&t}))}},Object(r.createElement)(F.a,{icon:g===t?"tailless-arrow-up":"tailless-arrow-down",size:24}))),g===t&&Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group-content"},R[e].fields.map((function(t,n){return Object(r.createElement)("label",{className:"bwf-contact-preferences__add-col-group-item",key:"bwf-contact-preferences__add-col-group-item-".concat(n)},Object(r.createElement)(P.CheckboxControl,{checked:_.some((function(e){return e.hasOwnProperty(t.key)})),onChange:function(){return function(e,t,n,r){var a=R[n].fields.map((function(e){return e.key}));_.some((function(t){return t.hasOwnProperty(e)}))?k((function(t){var r=t.filter((function(t){return!t.hasOwnProperty(e)}));return a.every((function(e){return r.hasOwnProperty(e)}))||C((function(e){return e.filter((function(e){return!e.hasOwnProperty(n)}))})),r})):k((function(c){var o,l=[].concat(Oe(c),[(o={},ge(o,e,t),ge(o,"label",t),ge(o,"groupKey",n),ge(o,"groupLabel",r),o)]);return a.every((function(e){return l.some((function(t){return t.hasOwnProperty(e)}))}))&&C((function(e){return[].concat(Oe(e),[ge({},n,r)])})),l}))}(t.key,t.label,e,R[e].label)}}),Object(r.createElement)("div",null,t.label))}))))})))):Object(r.createElement)("div",{className:"bwf-contact-preferences"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header-heading"},Object(a.__)("Columns")),Object(r.createElement)(P.Button,{isSecondary:!0,onClick:function(){return j(!0)}},Object(a.__)("Add New Columns"))),f&&D?Object(r.createElement)(Se,{helperContainer:h.current,helperClass:"bwf-contacts-preferences-item__helper",useDragHandle:!0,axis:"y",items:_,onRemove:function(e,t){var n=R[t].fields.map((function(e){return e.key}));k((function(r){var a=r.filter((function(t){return!t.hasOwnProperty(e)}));return n.every((function(e){return a.hasOwnProperty(e)}))||C((function(e){return e.filter((function(e){return!e.hasOwnProperty(t)}))})),a}))},onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;t!==n&&k((function(e){return Object(pe.d)(e,t,n)}))}}):Object(r.createElement)(Pe,{type:"fields"}))),Object(r.createElement)("div",{className:"bwf-contact-preferences__actions"},Object(r.createElement)(P.Button,{onClick:function(){return t()},disabled:s},"Cancel"),Object(r.createElement)(P.Button,{isPrimary:!0,onClick:q,disabled:s,isBusy:s},"Save")))},Pe=function(e){var t=e.type,n=void 0===t?"add-col":t;return Oe(Array(5)).map((function(e,t){return Object(r.createElement)("div",{key:"bwf-preferences-placeholder-".concat(t),className:"bwf-contact-preferences__add-col-group"},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 bwf-ml-16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-ml-10 ".concat("fields"===n?"bwf-w-90":"bwf-w-120")})),"fields"===n&&Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-20 bwf-mr-15"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-mr-15 ".concat("fields"===n?"bwf-w-80 bwf-h-30 bwf-rounded-4":"bwf-w-20 bwf-h-20")})))}))},Ie=function(e){var t=e.refreshTable,n=e.setModelData,c=he(Object(r.useState)(!1),2),o=c[0],l=c[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-sort-button components-button is-secondary bwf-btn-small bwf-btn-gray",onClick:function(){return l(!0)}},Object(r.createElement)(F.a,{icon:"filters",size:16}),Object(a.__)("Columns","wp-marketing-automations")),o&&Object(r.createElement)(xe,{onRequestClose:function(){return l(!1)},refreshTable:t,setModelData:n}))},Ae=n(267);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function Be(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||Me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){if(e){if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ze=function(e){var t=Object(r.useContext)(i.d),n=$e(Object(r.useState)(!1),2),c=n[0],o=n[1],m=$e(Object(r.useState)(!1),2),b=m[0],f=m[1],p=Object(T.a)(),d=Object(D.a)(),O=e.query,j=e.isExport,g=e.setExport,y=e.isImport,h=e.setImport,E=O.path,_=O.page,k=(O.filter,Be(O,["path","page","filter"])),B=Object(r.useRef)(k),$=$e(Object(r.useState)({status:!1}),2),M=$[0],R=$[1],z=$e(Object(r.useState)({status:!1,contactInfo:{}}),2),q=z[0],U=z[1],Q=$e(Object(r.useState)({loading:!1,status:!1}),2),Z=Q[0],J=Q[1],X=$e(Object(r.useState)({status:!1,contactInfo:{}}),2),ee=X[0],te=X[1],ce=d.fetchListing,oe=Object(fe.a)().setSingleContactListData;Object(r.useEffect)((function(){ce(O,0,25,!0),f(!0)}),[]),Object(r.useEffect)((function(){Object(i.Cb)(k,B.current)||ce(O,0,25,!0),B.current=k}),[O]),Object(r.useEffect)((function(){!j&&b&&ce(O,0,25,!0)}),[j]),Object(r.useEffect)((function(){!y&&b&&ce(O,0,25,!0)}),[y]);var le=function(e){return Object(r.createElement)(S.a,{to:"wp-admin/admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),oe(Object(i.zb)([e.f_name,e.l_name]," ")),Object(w.k)({},"/contact/"+parseInt(e.id))}},Object(r.createElement)(A.a,{contact:e}))},ie=function(e){return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(r.createElement)(I.a,{justify:"justify",align:"top"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"mail"})),Object(r.createElement)(I.c,null,e.email)),e.contact_no&&Object(r.createElement)(I.a,{justify:"justify",align:"top"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"phone"})),Object(r.createElement)(I.c,null,e.contact_no)),!e.contact_no&&!e.email&&Object(r.createElement)("span",null,"-"))},se=function(e){return Object(r.createElement)(C.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(x.a,{isClickable:!0,onInvoke:function(){}},Object(r.createElement)(S.a,{to:"admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),oe(Object(i.zb)([e.f_name,e.l_name]," ")),Object(w.k)({path:"/contact/"+parseInt(e.id)},"/",{})}},Object(r.createElement)(I.a,{justify:"flex-start"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"profile"})),Object(r.createElement)(I.c,null,Object(a.__)("View","wp-marketing-automations"))))),Object(r.createElement)(x.a,{isClickable:!0,onInvoke:function(){U({status:!0,contactInfo:e}),n()}},Object(r.createElement)(I.a,{justify:"flex-start"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"mail"})),Object(r.createElement)(I.c,null,Object(a.__)("Send Message","wp-marketing-automations")))),Object(r.createElement)(x.a,{isClickable:!0,onInvoke:function(){te({status:!0,contactInfo:e}),n()}},Object(r.createElement)(I.a,{justify:"flex-start"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"notes"})),Object(r.createElement)(I.c,null,Object(a.__)("Add Note","wp-marketing-automations")))),Object(r.createElement)(x.a,{isClickable:!0,onInvoke:function(){R({status:!0,contactID:e.id,data:e}),n()}},Object(r.createElement)(I.a,{justify:"flex-start"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"trash"})),Object(r.createElement)(I.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},ue=p.getPageNumber,me=p.getPerPageCount,pe=p.getTotalCount,de=p.getLoading,Oe=(0,p.getContacts)(),je=ue(),we=me(),ge=pe(),ve=de(),ye=Object(r.useMemo)((function(){var e={};if(Array.isArray(Oe)){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Me(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw c}}}}(Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[Oe]),he=Object(K.b)(ye),Ee=he.singleSelectProps,_e=he.selectAllProps,ke=he.floatingBarProps,Ne=he.resetSelection,Se=[{key:"select_contact",label:Object(r.createElement)(P.CheckboxControl,_e),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"f_name",label:Object(a.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-300"},{key:"contact_details",label:Object(a.__)("Details","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-270"},{key:"last_modified",label:Object(a.__)("Last Updated","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210"},{key:"country",label:Object(a.__)("Country","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"state",label:Object(a.__)("State","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"tags",label:Object(a.__)("Tags","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-180"},{key:"lists",label:Object(a.__)("Lists","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-180"},{key:"time",label:Object(a.__)("Current Time","wp-marketing-automations"),isLeftAligned:!1,visible:!1,cellClassName:"bwf-w-120"},{key:"source",label:Object(a.__)("Source","wp-marketing-automations"),isLeftAligned:!1,visible:!1,cellClassName:"bwf-w-120 bwf-col-center"}],Ce=bwfcrm_contacts_data.table_column_data.contactv2;Object(i.yb)()&&(Se.push({key:"total_order_count",label:Object(a.__)("Orders","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"}),Se.push({key:"total_order_value",label:Object(a.__)("Total Spend","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"}),Se.push({key:"l_order_date",label:Object(a.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"}));var xe,Pe=function(e){e!==we&&ce(O,0,e)},Te=function(){ce(O,0,we,!0)},Le=l()("bwfcrm-contacts-list",{"has-search":!0}),Re=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,v()({path:Object(i.m)("/contacts/".concat(n,"/")),method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(i.j)(null==e?void 0:e.message));t(e.message),o(!1),R({}),ce(O,0,we,!0)})).catch((function(e){throw Error(Object(i.j)(null==e?void 0:e.message))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),R(De(De({},M),{},{content:e.t0.message})),o(!1);case 10:Object(i.gb)(t,2e3);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Fe(c,r,a,o,l,"next",e)}function l(e){Fe(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}(),ze={0:{label:"Unverified",statusclass:"bwf-tags bwf-tag-gray"},1:{label:"Subscribed",statusclass:"bwf-tags bwf-tag-blue"},2:{label:"Bounced",statusclass:"bwf-tags bwf-tag-red"},3:{label:"Unsubscribed",statusclass:"bwf-tags bwf-tag-orange"}},qe=function(e,t){if(""===t||Object(u.isUndefined)(t)||Object(u.isNull)(t)||!e.hasOwnProperty(t)||Object(u.isNull)(e[t])||Object(u.isUndefined)(e[t])||""===e[t])return"-";if("status"===t){var n=ze.hasOwnProperty(parseInt(e[t]))?ze[parseInt(e[t])]:ze[0];return Object(r.createElement)("span",{className:n.statusclass},n.label)}if("country"===t){var a=e.country?H[e.country]:"";return Object(r.createElement)(I.a,{justify:"start"},Object(r.createElement)(Ae.a,{code:e[t],size:15}),a&&Object(r.createElement)("span",{style:{textAlign:"left"}},a))}return Object(u.isArray)(e[t])?(c=e[t],o="",l=[],Object(u.isEmpty)(c)?"-":(c.map((function(e){Object(u.isEmpty)(o)&&(o=e.name),l.push(Object(r.createElement)("span",{key:e.id},e.name))})),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},Object(r.createElement)("span",null,!Object(u.isEmpty)(o)&&o),!Object(u.isEmpty)(l)&&l.length>1&&Object(r.createElement)(W.a,{items:l}))))):Object(u.isBoolean)(e[t])?e[t]?"Yes":"No":Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e[t]}});var c,o,l},Ue=Object(r.createElement)("div",{className:"bwf-display-flex gap-12"},Object(r.createElement)(P.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",key:"export",onClick:function(){g(!0)}},Object(r.createElement)(F.a,{icon:"export",size:16}),Object(a.__)("Export","wp-marketing-automations")),Object(r.createElement)(P.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",key:"import",onClick:function(){h(!0)}},Object(r.createElement)(F.a,{icon:"import",size:16}),Object(a.__)("Import","wp-marketing-automations")),Object(r.createElement)(be,{refreshTable:Te}),Object(r.createElement)(Ie,{refreshTable:Te,setModelData:J}));return Object(r.createElement)(r.Fragment,null,M&&M.status&&Object(r.createElement)(P.Modal,{onRequestClose:function(){return R({})},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header"},M.confirm?Object(r.createElement)(G.a,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Delete Contact","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return R({})},className:"bwf-modal-close"},Object(r.createElement)(F.a,{icon:"close",color:"#353030"}))),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},M.content?M.content:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to delete contact ","wp-marketing-automations"),Object(r.createElement)("strong",null,"".concat(M.data&&M.data.f_name," ").concat(M.data&&M.data.l_name,". ")),Object(a.__)("This action cannot be undone. Cancel to stop, Delete to proceed.")))),Object(r.createElement)("div",{className:"bwf_text_right"},M.content?Object(r.createElement)(P.Button,{isPrimary:!0,onClick:function(){R({status:!1})}},Object(a.__)("OK","wp-marketing-automations")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(P.Button,{className:"bwf-cancel-btn",onClick:function(){R({status:!1})},disabled:c},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(P.Button,{isPrimary:!0,className:"bwf-delete-btn",isBusy:c,onClick:function(){Re(M.contactID)}},Object(a.__)("Delete","wp-marketing-automations"))))))),Object(r.createElement)(s.a,{className:Le,rows:Object(u.isEmpty)(Oe)?[]:Oe.map((function(e){var t=[{display:Ee[e.id]&&Object(r.createElement)(P.CheckboxControl,Ee[e.id]),value:null},{display:se(e),value:null},{display:le(e),value:Object(i.zb)([e.f_name,e.l_name]," ")},{display:ie(e),value:Object(a.__)("Email: "+e.email+", Phone: "+e.contact_no,"wp-marketing-automations")}];return Ce.map((function(n){var r=De({},n);delete r.label,delete r.groupKey,delete r.groupLabel;var a=Object.keys(r)[0];t.push({display:qe(e,a),value:"-"})})),t})),headers:(xe=[{key:"select_contact",label:Object(r.createElement)(P.CheckboxControl,_e),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"f_name",label:Object(a.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210"},{key:"contact_details",label:Object(a.__)("Details","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"}],Ce.map((function(e){Object(u.isObject)(e)&&xe.push({key:Object.keys(e).find((function(t){return e[t]==(null==e?void 0:e.label)})),label:null==e?void 0:e.label,isLeftAligned:!0,cellClassName:"bwf-w-150"})})),xe),query:{paged:je,order:O.order,orderby:O.orderby},rowsPerPage:we,totalRows:ge,summary:parseInt(ge)>0?[{label:Object(r.createElement)(r.Fragment,null," contacts"),value:Object(r.createElement)("b",null,ge+" ")}]:[],isLoading:ve,onPageChange:function(e,t){ce(O,(e-1)*we,we)},onQueryChange:function(e){return"per_page"!==e?function(){}:Pe},actions:[Object(r.createElement)(N,{key:"search",query:O}),Object(r.createElement)(P.SelectControl,{onChange:function(e){"all"===e&&Object(w.k)({page:_},E,{}),"filters"===e&&Object(w.k)({filter:"advanced"},E,O)},options:[{value:"all",label:Object(a.__)("All Contacts","wp-marketing-automations")},{value:"filters",label:Object(a.__)("Advanced Filters","wp-marketing-automations")}],value:O.hasOwnProperty("filter")&&"advanced"===O.filter?"filters":"all",key:"select-contact"}),Object(r.createElement)(ae.c,{key:"list-audience"})],rowHeader:!0,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations"),extraSectionBeforefilterCol:Ue,showMenu:!1,beforeTable:Object(r.createElement)(re.a,{query:O,isOpen:O.hasOwnProperty("filter")&&"advanced"===O.filter})}),q.status&&Object(r.createElement)(L.a,{contact:q.contactInfo,setSendMessageModel:U}),ee.status&&Object(r.createElement)(V,{contact:ee.contactInfo,setModelStatus:te}),Object(r.createElement)(ne,{floatingBarProps:ke,resetSelection:Ne,onSuccess:function(){return ce(O,0,we,!0)}}),Object(r.createElement)(Y.a,{modalTitle:Z.modalTitle,deleteEntityName:Z.deleteEntityName,confirmText:Z.confirmText,confirmButtonText:Z.buttonConfirm,cancelButtonText:Z.buttonCancel,onConfirm:Z.onConfirm,isLoading:Z.loading,successMessage:Z.success,errorMessage:Z.error,content:Z.content,onRequestClose:function(){return J({status:!1})},isOpen:Z.status,isDelete:!Z.hasOwnProperty("isDelete")||Z.isDelete}))};ze.defaultProps={contacts:[]};var qe=ze,Ue=n(53),Ve=n.n(Ue),Ge=n(68),We=n(28);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function Ze(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||Xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){if(e){if("string"==typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tt=Object(Ge.a)(Object(i.Y)()).formatAmount,nt=function(e){var t=Object(r.useContext)(i.d),n=Je(Object(r.useState)(!1),2),c=n[0],o=n[1],m=Object(T.a)(),b=Object(D.a)(),f=Object(i.w)(),p=e.query,d=e.isExport,O=e.setExport,j=e.isImport,g=e.setImport,y=Je(Object(r.useState)({loading:!1,status:!1}),2),h=y[0],E=y[1],_=p.path,k=p.page,B=(p.filter,Ze(p,["path","page","filter"])),$=Object(r.useRef)(B),M=Object(i.ab)("contact"),R=Je(Object(r.useState)({status:!1}),2),z=R[0],q=R[1],U=Je(Object(r.useState)(!1),2),Q=U[0],Z=U[1],J=Je(Object(r.useState)({status:!1,contactInfo:{}}),2),X=J[0],ee=J[1],te=Je(Object(r.useState)({status:!1,contactInfo:{}}),2),ce=te[0],oe=te[1],le=Object(i.bb)(),ie=b.fetch,se=Object(fe.a)().setSingleContactListData;Object(r.useEffect)((function(){ie(p,0,25,!0),Z(!0)}),[]),Object(r.useEffect)((function(){Object(i.Cb)(B,$.current)||d||ie(p,0,25,!0),$.current=B}),[p]),Object(r.useEffect)((function(){!d&&Q&&ie(p,0,25,!0)}),[d]),Object(r.useEffect)((function(){!j&&Q&&ie(p,0,25,!0)}),[j]);var ue=function(e){var t=(e||{}).state;return t||Object(r.createElement)("span",null,"-")},me=function(e){var t=(e||{}).country,n=void 0===t?"":t;return n&&(n=e.country?H[e.country]:"")?Object(r.createElement)(I.a,{justify:"start"},Object(r.createElement)(Ae.a,{code:e.country,size:15}),n&&Object(r.createElement)("span",{style:{textAlign:"left"}},n)):Object(r.createElement)("span",null,"-")},be=function(e){return Object(r.createElement)(S.a,{to:"wp-admin/admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),se(Object(i.zb)([e.f_name,e.l_name]," ")),Object(w.k)({},"/contact/"+parseInt(e.id))}},Object(r.createElement)(A.a,{contact:e}))},pe=function(e){return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(r.createElement)(I.a,{justify:"justify",align:"top"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"mail"})),Object(r.createElement)(I.c,null,e.email)),e.contact_no&&Object(r.createElement)(I.a,{justify:"justify",align:"top"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"phone"})),Object(r.createElement)(I.c,null,e.contact_no)),!e.contact_no&&!e.email&&Object(r.createElement)("span",null,"-"))},de=function(e){var t=e.wc.total_order_value;return Object(r.createElement)("div",{className:"bwf-c-listing-total-spent"},t?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},tt(t)):"-")},Oe=function(e){var t=e.wc.total_order_count;return Object(r.createElement)("div",{className:"bwf-c-listing-total-spent"},!!t&&Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},t),!t&&"-")},je=function(e){var t=e.wc,n=t.l_order_date,a=t.total_order_count,c=t.total_order_value,o=t.total_purchased_items;return Object(r.createElement)("div",{className:"bwf-c-listing-last_order"},!!n&&"0000-00-00"!=n&&Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(i.N)(n)),!c&&!a&&!o&&(!n||"0000-00-00"==n)&&"-")},we=function(e){return Object(r.createElement)(C.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(x.a,{isClickable:!0,onInvoke:function(){}},Object(r.createElement)(S.a,{to:"admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),se(Object(i.zb)([e.f_name,e.l_name]," ")),Object(w.k)({path:"/contact/"+parseInt(e.id)},"/",{})}},Object(r.createElement)(I.a,{justify:"flex-start"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"profile"})),Object(r.createElement)(I.c,null,Object(a.__)("View","wp-marketing-automations"))))),Object(r.createElement)(x.a,{isClickable:!0,onInvoke:function(){ee({status:!0,contactInfo:e}),n()}},Object(r.createElement)(I.a,{justify:"flex-start"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"mail"})),Object(r.createElement)(I.c,null,Object(a.__)("Send Message","wp-marketing-automations")))),Object(r.createElement)(x.a,{isClickable:!0,onInvoke:function(){oe({status:!0,contactInfo:e}),n()}},Object(r.createElement)(I.a,{justify:"flex-start"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"notes"})),Object(r.createElement)(I.c,null,Object(a.__)("Add Note","wp-marketing-automations")))),Object(r.createElement)(x.a,{isClickable:!0,onInvoke:function(){q({status:!0,contactID:e.id,data:e}),n()}},Object(r.createElement)(I.a,{justify:"flex-start"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"trash"})),Object(r.createElement)(I.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},ge=m.getPageNumber,ve=m.getPerPageCount,ye=m.getTotalCount,he=m.getLoading,Ee=(0,m.getContacts)(),_e=ge(),ke=ve(),Ne=ye(),Se=he(),Ce=Object(r.useMemo)((function(){var e={};if(Array.isArray(Ee)){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Xe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw c}}}}(Ee);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[Ee]),xe=Object(K.b)(Ce),Pe=xe.singleSelectProps,Ie=xe.selectAllProps,Te=xe.floatingBarProps,De=xe.resetSelection,Le=[{key:"select_contact",label:Object(r.createElement)(P.CheckboxControl,Ie),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"f_name",label:Object(a.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-300"},{key:"contact_details",label:Object(a.__)("Details","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-270"},{key:"last_modified",label:Object(a.__)("Last Updated","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210"},{key:"country",label:Object(a.__)("Country","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"state",label:Object(a.__)("State","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"tags",label:Object(a.__)("Tags","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-180"},{key:"lists",label:Object(a.__)("Lists","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-180"},{key:"time",label:Object(a.__)("Current Time","wp-marketing-automations"),isLeftAligned:!1,visible:!1,cellClassName:"bwf-w-120"},{key:"source",label:Object(a.__)("Source","wp-marketing-automations"),isLeftAligned:!1,visible:!1,cellClassName:"bwf-w-120 bwf-col-center"}];Object(i.yb)()&&(Le.push({key:"total_order_count",label:Object(a.__)("Orders","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"}),Le.push({key:"total_order_value",label:Object(a.__)("Total Spend","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"}),Le.push({key:"l_order_date",label:Object(a.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"}));var Fe=function(e,t){var n,a,c,o=[];return o=1==t?e.tags:e.lists,n=o,a="",c=[],Object(u.isEmpty)(n)?"-":(n.map((function(e){Object(u.isEmpty)(a)&&(a=e.name),c.push(Object(r.createElement)("span",{key:e.id},e.name))})),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},Object(r.createElement)("span",null,!Object(u.isEmpty)(a)&&a),!Object(u.isEmpty)(c)&&c.length>1&&Object(r.createElement)(W.a,{items:c}))))},Be=function(e){try{if(e&&e.hasOwnProperty("timezone")&&!Object(u.isEmpty)(e.timezone)&&le.hasOwnProperty(e.timezone))return Object(i.P)(Ve()().tz(e.timezone))}catch(e){}return"-"},$e=Ee.map((function(e){var t=function(e){return Object(u.merge)({id:0,email:"-",f_name:"",l_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",contact_no:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},e)}(e),n=[{display:Pe[t.id]&&Object(r.createElement)(P.CheckboxControl,Pe[t.id]),value:null},{display:we(t),value:null},{display:be(t),value:Object(i.zb)([t.f_name,t.l_name]," ")},{display:pe(t),value:Object(a.__)("Email: "+t.email+", Phone: "+t.contact_no,"wp-marketing-automations")},{display:Object(i.O)(t.last_modified,!1,!1),value:t.last_modified},{display:me(t),value:t.country},{display:ue(t),value:t.state},{display:Fe(t,1),value:t.tags.length},{display:Fe(t,2),value:t.lists.length},{display:Be(t),value:""},{display:t&&t.hasOwnProperty("source")?f[t.source]:"-",value:""}];return Object(i.yb)()&&(n.push({display:Oe(t),value:""}),n.push({display:de(t),value:""}),n.push({display:je(t),value:""})),n})),Me=function(e){e!==ke&&ie(p,0,e)},Re=l()("bwfcrm-contacts-list",{"has-search":!0}),ze=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,v()({path:Object(i.m)("/contacts/".concat(n,"/")),method:"DELETE"}).then((function(e){if(200!=e.code)throw Error(Object(i.j)(null==e?void 0:e.message));t(e.message),o(!1),q({}),ie(p,0,ke,!0)})).catch((function(e){throw Error(Object(i.j)(null==e?void 0:e.message))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),q(Ke(Ke({},z),{},{content:e.t0.message})),o(!1);case 10:Object(i.gb)(t,2e3);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Qe(c,r,a,o,l,"next",e)}function l(e){Qe(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}(),qe=Object(r.createElement)("div",{className:"bwf-display-flex gap-12"},Object(r.createElement)(P.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",key:"export",onClick:function(){O(!0)}},Object(r.createElement)(F.a,{icon:"export",size:16}),Object(a.__)("Export","wp-marketing-automations")),Object(r.createElement)(P.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",key:"import",onClick:function(){g(!0)}},Object(r.createElement)(F.a,{icon:"import",size:16}),Object(a.__)("Import","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-sort-button components-button is-secondary bwf-btn-small bwf-btn-gray",onClick:function(){E({status:!0,error:Object(r.createElement)(r.Fragment,null,Object(a.__)("This feature requires","wp-marketing-automations")," ",Object(r.createElement)("b",null,Object(a.__)("FunnelKit Automations PRO","wp-marketing-automations"))," ",Object(a.__)("version 2.1.4 or greater","wp-marketing-automations")),modalTitle:Object(a.__)("Update Required","wp-marketing-automations")})}},Object(r.createElement)(F.a,{icon:"import",size:16}),Object(a.__)("Sort","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-sort-button components-button is-secondary bwf-btn-small bwf-btn-gray",onClick:function(){E({status:!0,error:Object(r.createElement)(r.Fragment,null,Object(a.__)("This feature requires","wp-marketing-automations")," ",Object(r.createElement)("b",null,Object(a.__)("FunnelKit Automations PRO","wp-marketing-automations"))," ",Object(a.__)("version 2.1.4 or greater","wp-marketing-automations")),modalTitle:Object(a.__)("Update Required","wp-marketing-automations")})}},Object(r.createElement)(F.a,{icon:"filters",size:16}),Object(a.__)("Columns","wp-marketing-automations")));return Object(r.createElement)(r.Fragment,null,z&&z.status&&Object(r.createElement)(P.Modal,{onRequestClose:function(){return q({})},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header"},z.confirm?Object(r.createElement)(G.a,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Delete Contact","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return q({})},className:"bwf-modal-close"},Object(r.createElement)(F.a,{icon:"close",color:"#353030"}))),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},z.content?z.content:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to delete contact ","wp-marketing-automations"),Object(r.createElement)("strong",null,"".concat(z.data&&z.data.f_name," ").concat(z.data&&z.data.l_name,". ")),Object(a.__)("This action cannot be undone. Cancel to stop, Delete to proceed.")))),Object(r.createElement)("div",{className:"bwf_text_right"},z.content?Object(r.createElement)(P.Button,{isPrimary:!0,onClick:function(){q({status:!1})}},Object(a.__)("OK","wp-marketing-automations")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(P.Button,{className:"bwf-cancel-btn",onClick:function(){q({status:!1})},disabled:c},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(P.Button,{isPrimary:!0,className:"bwf-delete-btn",isBusy:c,onClick:function(){ze(z.contactID)}},Object(a.__)("Delete","wp-marketing-automations"))))))),Object(r.createElement)(s.a,{className:Re,rows:$e,headers:function(e){if(Object(u.isEmpty)(M))return e;var t=[];return e.map((function(e){["select_contact","actions","contact"].includes(e.key)||M.includes(e.key)?e.visible=!0:e.visible=!1,e.hasOwnProperty("required")&&e.required&&(e.visible=!0),t.push(e)})),t}(Le),query:{paged:_e,order:p.order,orderby:p.orderby},rowsPerPage:ke,totalRows:Ne,summary:parseInt(Ne)>0?[{label:Object(r.createElement)(r.Fragment,null," contacts"),value:Object(r.createElement)("b",null,Ne+" ")}]:[],isLoading:Se,onPageChange:function(e,t){ie(p,(e-1)*ke,ke)},onQueryChange:function(e){return"per_page"!==e?function(){}:Me},onColumnsChange:function(e,t){v()({path:Object(i.m)("/user-preference/".concat(Object(i.x)(),"/")),method:"POST",data:{data:{contact_column:e}}}).then((function(t){200===t.code&&(bwfcrm_contacts_data.table_column_data.contact=e)}))},actions:[Object(r.createElement)(N,{key:"search",query:p}),Object(r.createElement)(P.SelectControl,{onChange:function(e){"all"===e&&Object(w.k)({page:k},_,{}),"filters"===e&&Object(w.k)({filter:"advanced"},_,p)},options:[{value:"all",label:Object(a.__)("All Contacts","wp-marketing-automations")},{value:"filters",label:Object(a.__)("Advanced Filters","wp-marketing-automations")}],value:p.hasOwnProperty("filter")&&"advanced"===p.filter?"filters":"all",key:"select-contact"}),Object(r.createElement)(ae.c,{key:"list-audience"})],rowHeader:!0,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations"),showMenu:!1,extraSectionBeforefilterCol:qe,filterColumnIcon:Object(r.createElement)("span",{className:"bwf-cursor-pointer"},Object(r.createElement)(We.a,{icon:"filters",iconSize:20,size:20,toolTipText:Object(r.createElement)("span",{className:"bwfan_tooltip_text bwf-w-60","data-position":"top"},Object(a.__)("Filter","wp-marketing-automations"))})),beforeTable:Object(r.createElement)(re.a,{query:p,isOpen:p.hasOwnProperty("filter")&&"advanced"===p.filter})}),X.status&&Object(r.createElement)(L.a,{contact:X.contactInfo,setSendMessageModel:ee}),ce.status&&Object(r.createElement)(V,{contact:ce.contactInfo,setModelStatus:oe}),Object(r.createElement)(ne,{floatingBarProps:Te,resetSelection:De,onSuccess:function(){return ie(p,0,ke,!0)}}),Object(r.createElement)(Y.a,{modalTitle:h.modalTitle,deleteEntityName:h.deleteEntityName,confirmText:h.confirmText,confirmButtonText:h.buttonConfirm,cancelButtonText:h.buttonCancel,onConfirm:h.onConfirm,isLoading:h.loading,successMessage:h.success,errorMessage:h.error,content:h.content,onRequestClose:function(){return E({status:!1})},isOpen:h.status,isDelete:!h.hasOwnProperty("isDelete")||h.isDelete}))};nt.defaultProps={contacts:[]};var rt=nt,at=(n(882),n(71)),ct=n(86),ot=n(857),lt=n(254),it=n(256),st=n(814),ut=n(823);function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dt(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wt={email:"",f_name:"",l_name:"",marketing_status:!0,contact_no:""},gt=function(e){var t=Object(r.useContext)(i.d),n=Ot(Object(r.useState)({}),2),c=n[0],o=(n[1],e.hasOwnProperty("errors")?e.error:{}),l=Ot(Object(r.useState)([]),2),s=l[0],m=l[1],b=Ot(Object(r.useState)([]),2),f=b[0],p=b[1],d=Ot(Object(r.useState)(null),2),O=d[0],j=d[1],g=Ot(Object(r.useState)(null),2),y=g[0],h=g[1],E=Ot(Object(r.useState)(wt),2),_=E[0],k=E[1],N=Ot(Object(r.useState)(!1),2),S=N[0],C=N[1],x=Ot(Object(r.useState)({}),2),I=x[0],A=x[1],T=Object(fe.a)().setSingleContactListData,L=function(){var n,r=(n=regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return C(!0),n.prev=1,n.next=4,v()({path:Object(i.m)("/contacts"),method:"POST",data:r}).then((function(n){if(200!=n.code)throw Error(Object(i.j)(null==n?void 0:n.message));Object(i.G)()||(bwfcrm_contacts_data.first_contact_id=1),t(n.message),A({}),C(!1),T(Object(i.zb)([r.f_name,r.l_name]," ")),Object(w.k)({page:"autonami",path:"/contact/"+parseInt(n.result.id)},"/",{}),e.onCloseModal()})).catch((function(e){throw Error(Object(i.j)(null==e?void 0:e.message))}));case 4:n.next=10;break;case 6:n.prev=6,n.t0=n.catch(1),C(!1),j(n.t0);case 10:Object(i.gb)(t,2e3);case 11:case"end":return n.stop()}}),n,null,[[1,6]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var c=n.apply(e,t);function o(e){dt(c,r,a,o,l,"next",e)}function l(e){dt(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}(),B=Object(D.a)().fetch,$=e.query,M=function(){y&&(h(null),B($,0,25)),e.onCloseModal()},R=function(e){var t={};return!Object(u.isEmpty)(e.email)&&Object(ct.a)(e.email?e.email:"")||(t=Object(a.__)(Object(u.isEmpty)(e.email)?"Email is required":"Email is not valid","wp-marketing-automations")),!Object(u.isEmpty)(t)||Object(u.isEmpty)(e.phone)||Object(ot.a)(e.phone?e.phone:"")||(t=Object(a.__)("Phone is not valid","wp-marketing-automations")),Object(u.isEmpty)(t)?(j(null),!0):(j({message:t}),!1)};return Object(r.createElement)(P.Modal,{onRequestClose:M,className:"bwf-admin-modal bwf-admin-modal-large bwf-add-new-contact-modal "},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Add Contact","wp-marketing-automations")),Object(r.createElement)("span",{onClick:M,className:"bwf-modal-close"},Object(r.createElement)(F.a,{icon:"close",color:"#353030"}))),O&&Object(r.createElement)(P.Notice,{status:"error",onRemove:function(){return j(null)}},O.hasOwnProperty("message")?O.message:Object(a.__)("Unknown Error while creating contact","wp-marketing-automations")),y&&y.hasOwnProperty("id")&&Object(r.createElement)(P.Notice,{status:"success",onRemove:M},Object(a.__)("Contact created successfully","wp-marketing-automations")),I.error||I.success?I&&I.success&&I.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(lt.a,null),Object(r.createElement)("div",{className:"bwf-h1"},I.message)):I&&I.error&&I.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(it.a,null),Object(r.createElement)("div",{className:"bwf-h1"},I.message)):Object(r.createElement)(G.a,null):Object(r.createElement)(at.a,{errors:ft(ft({},c),o),validate:function(e){var t={};return!Object(u.isEmpty)(e.email)&&Object(ct.a)(e.email?e.email:"")||(t.email=Object(a.__)(Object(u.isEmpty)(e.email)?"Email is required":"Email is not valid","wp-marketing-automations")),Object(u.isEmpty)(e.phone)||Object(ot.a)(e.phone?e.phone:"")||(t.phone=Object(a.__)("Phone is not valid","wp-marketing-automations")),{}},onSubmit:function(e){var t=e.email,n=e.f_name,r=e.l_name,a=e.marketing_status,c=e.phone,o=[];Object(u.isEmpty)(s)||s.map((function(e){o.push({id:e.key,value:e.label})}));var l=[];Object(u.isEmpty)(f)||f.map((function(e){l.push({id:e.key,value:e.label})})),k({email:t,f_name:n,l_name:r,contact_no:c,status:a,tags:o,lists:l}),L({email:t,f_name:n,l_name:r,contact_no:c,status:a,tags:o,lists:l})},initialValues:_},(function(e){var t=e.getInputProps,n=e.values,c=(e.errors,e.handleSubmit);return Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&R(n)&&c()}},Object(r.createElement)("div",{className:"bwf-half-fields"},Object(r.createElement)(P.TextControl,mt({disabled:S,type:"email",autoFocus:!0,label:Object(a.__)("Email","wp-marketing-automations"),help:Object(a.__)("Required","wp-marketing-automations")},t("email"))),Object(r.createElement)(P.TextControl,mt({disabled:S,label:Object(a.__)("Phone","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("phone"))),Object(r.createElement)(P.TextControl,mt({disabled:S,label:Object(a.__)("First Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("f_name"))),Object(r.createElement)(P.TextControl,mt({disabled:S,label:Object(a.__)("Last Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("l_name"))),Object(r.createElement)(st.a,{onTagsChange:m,selected:s}),Object(r.createElement)(ut.a,{onListsChange:p,selected:f})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)(P.CheckboxControl,mt({disabled:S,label:"Mark Contact as Subscribed",help:Object(a.__)("Optional","wp-marketing-automations")},t("marketing_status")))),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(P.Button,{className:"bwf-cancel-btn",onClick:M},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(P.Button,{isPrimary:!0,onClick:function(){R(n)&&c()},isBusy:S,disabled:S},Object(a.__)("Add","wp-marketing-automations"))))})))};gt.defaultProps={onCloseModal:function(){}};var vt=gt,yt=n(289),ht=n(800),Et=n(67),_t=n(134),kt=n(139),Nt=n(252),St=(n(943),n(136));function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){Pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function It(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var At=function(){var e=Object(St.a)("exporter"),t=e.getStateProp;return xt(xt({},It(e,["getStateProp"])),{},{getExporter:function(){return t("export")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getExistingExport:function(){return t("existingExport")}})},Tt=n(137);function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $t=function(){var e=Object(Tt.a)("exporter"),t=e.fetch,n=e.setStateProp;return Lt(Lt({},Bt(e,["fetch","setStateProp"])),{},{fetch:function(e,n,r){t("GET",Object(i.m)("/contact/export?limit=".concat(e,"&offset=").concat(n,"&search=").concat(r)))},setStateExportValues:function(e,t){n(e,t)}})},Mt=n(832);function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function Vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wt=function(e){var t=e.isAdd,n=Object(w.i)(),c=Object(de.a)(),o=Vt(Object(r.useState)({loading:!1,status:!1}),2),l=o[0],m=o[1],b=Vt(Object(r.useState)(!1),2),f=b[0],p=b[1],d=Vt(Object(r.useState)({}),2),O=d[0],j=d[1],g=n.s,y=void 0===g?"":g,h=$t(),E=h.fetch,_=h.setStateExportValues,k=At(),N=k.getExporter,S=k.getOffset,A=k.getLoading,T=k.getTotalCount,D=k.getPageNumber,L=k.getPerPageCount,B=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-45"},{key:"name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"createdon",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-40p"},{key:"contactcount",label:Object(a.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120 bwf-col-center"},{key:"status",label:"Status",isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"file",label:"",isLeftAligned:!1,cellClassName:"bwf-w-150"}],$=N(),M=D(),R=L(),z=T(),q=S(),U=A(),V=Object(_t.a)().setPageCountData;Object(r.useEffect)((function(){V({contacts_export:z})}),[z]),Object(r.useEffect)((function(){t||E(R,q,y)}),[R,q,y,t]);var G,W=function(e){e!==R&&_("limit",e)},H=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},m(zt(zt({},n),{},{status:!0})),e.prev=2,e.next=5,v()({path:Object(i.m)("/contact/export/delete/".concat(t)),method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(i.j)(null==e?void 0:e.message));m({}),E(R,q,y)})).catch((function(e){throw Error(Object(i.j)(null==e?void 0:e.message))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),m({status:!0,error:e.t0.message?e.t0.message:Object(a.__)("Error in deleting export","wp-marketing-automations")});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Ut(c,r,a,o,l,"next",e)}function l(e){Ut(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),K=function(e){return Object(r.createElement)(C.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(x.a,{isClickable:!0,onInvoke:function(){j(e),p(!0),n()}},Object(r.createElement)(I.a,{justify:"flex-start"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"view"})),Object(r.createElement)(I.c,null,Object(a.__)("View","wp-marketing-automations")))),Object(r.createElement)(x.a,{isClickable:!0,onInvoke:function(){var t={status:!0,deleteEntityName:Object(r.createElement)(r.Fragment,null,Object(a.__)("item ")," ",e.title),buttonConfirm:Object(a.__)("Delete","wp-marketing-automations"),buttonCancel:Object(a.__)("Cancel","wp-marketing-automations")};m(zt(zt({},t),{},{onConfirm:function(){return H(e.id,t)}})),n()}},Object(r.createElement)(I.a,{justify:"flex-start"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"trash"})),Object(r.createElement)(I.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},Q={1:"In Progress",2:"Failed",3:"Completed"},Z=function(e){return 3===parseInt(e.status)&&e.file?Object(r.createElement)("a",{target:"_blank",href:Object(i.V)()+"/wp-json"+Object(i.m)("/contact/export/download/".concat(e.id,"?bwf-nonce=").concat(Object(i.q)())),title:"Download",className:"bwf-a-no-underline",rel:"noreferrer"},Object(r.createElement)("div",{className:"bwf-download-btn"},Object(r.createElement)("span",null,Object(r.createElement)(F.a,{icon:"download"})),Object(r.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-download-btn disable"},Object(r.createElement)("span",null,Object(r.createElement)(F.a,{icon:"download",color:"#353030"})),Object(r.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations")))},J=Object(u.isEmpty)($)?[]:$.map((function(e){return[{display:K(e),value:"action"},{display:e.title?e.title:"-",value:e.title},{display:(n=e.created_date,Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("span",null,Object(i.O)(n)))),value:""},{display:e.count,value:e.count},{display:(t=e,Object(r.createElement)("span",{className:"bwf-export-status-tag bwf-status-"+parseInt(t.status)},Q[parseInt(t.status)])),value:e.status},{display:Z(e),value:""}];var t,n}));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)(s.a,{title:"",className:"bwf-export-contact-table",rows:J,headers:B,query:{paged:M},rowsPerPage:R,totalRows:z,isLoading:U,onPageChange:function(e,t){_("offset",(e-1)*R)},onQueryChange:function(e){return"per_page"!==e?function(){}:W},showMenu:!1,rowHeader:!0,actions:[],emptyMessage:Object(a.__)("No export available","wp-marketing-automations")}),Object(r.createElement)(Y.a,{modalTitle:Object(a.__)("Delete"),confirmText:l.confirmText,deleteEntityName:l.deleteEntityName,confirmButtonText:l.buttonConfirm,cancelButtonText:l.buttonCancel,onConfirm:l.onConfirm,isLoading:l.loading,successMessage:l.success,errorMessage:l.error,onRequestClose:function(){return m({status:!1})},isOpen:l.status,isDelete:!0}),f&&!Object(u.isEmpty)(O)&&Object(r.createElement)(P.Modal,{onRequestClose:function(){return p(!1)},className:"bwf-admin-modal bwf-admin-modal-large bwf-export-list-modal bwf-show-close"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},"Export Details"),Object(r.createElement)("span",{onClick:function(){return p(!1)},className:"bwf-modal-close"},Object(r.createElement)(F.a,{icon:"close",color:"#353030"}))),(G=[],Object(u.isEmpty)(O.fields)||O.fields.map((function(e){var t=Vt(Object.entries(e)[0],2),n=t[0];t[1],c.hasOwnProperty(n)&&G.push(c[n].labels.add)})),Object(r.createElement)(r.Fragment,null,O.hasOwnProperty("filters")&&Object(r.createElement)("div",{className:"bwf-export-modal-row"},Object(r.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Filters","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-export-modal-row-value"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(u.isEmpty)(e)?"-":Object(r.createElement)(r.Fragment,null,Object(Mt.b)(e))}(O.filters))),!Object(u.isEmpty)(G)&&Object(r.createElement)("div",{className:"bwf-export-modal-row"},Object(r.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Fields","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-export-modal-row-value"},G.join(" | ")))))))},Ht=function(e){var t=e.setAdd,n=e.isAdd;return Object(r.useEffect)((function(){Object(i.g)("Export List")}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Wt,{setAdd:t,isAdd:n}))},Kt=n(266),Yt=(n(128),n(794));function Qt(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}var Zt=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({path:Object(i.m)("/contact/export/custom-selections")});case 2:if((t=e.sent)&&t.result){e.next=5;break}throw new Error(Object(a.__)("Unable to get Custom Export Selections","wp-marketing-automations"));case 5:return e.abrupt("return",t.result);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Qt(c,r,a,o,l,"next",e)}function l(e){Qt(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),Jt=function(){return Object(Yt.a)(["bwfcrm-get-export-selections"],Zt)};function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e){return function(e){if(Array.isArray(e))return tn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nn=function(e){var t=e.checked,n=void 0!==t&&t,a=e.onChange,c=void 0===a?function(){}:a,o=e.title,l=void 0===o?"":o,i=e.count,s=void 0===i?0:i,u=e.groupKey,m=void 0===u?"":u,b=e.selectedGroup,f=void 0===b?"":b,p=e.setSelectedGroup,d=void 0===p?function(){}:p;return Object(r.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(e){e.target.classList.contains("components-checkbox-control__label")||e.target.classList.contains("components-checkbox-control__input")||d(f==m?"":m)}},Object(r.createElement)("div",null,Object(r.createElement)(P.CheckboxControl,{className:"bwf-export-toggler",checked:n,onChange:c,label:Object(r.createElement)(r.Fragment,null,l,s>0&&Object(r.createElement)("span",{className:"bwf-light"}," ","( ",s," selected )"))})),Object(r.createElement)("span",null,Object(r.createElement)(F.a,{icon:"tailless-arrow-down-new",size:15})))},rn=function(e){var t=e.selected,n=e.onChange,a=e.selectedGroup,c=e.setSelectedGroup,o=Jt(),l=o.isLoading,i=o.data,s=Array.isArray(t)?t.map((function(e){return Object.keys(e)[0]})):[],u=function(e,r){if(e)n([].concat(en(t),[r]));else{var a=t.filter((function(e){return Object.keys(e)[0]!==Object.keys(r)[0]}));n(a)}},m=function(e,r){var a=i[r].selections,c=Object.keys(a);if(e){var o=c.map((function(e){return!s.includes(e)&&Xt({},e,a[e].name)})).filter(Boolean);n([].concat(en(t),en(o)))}else{var l=t.filter((function(e){return!c.includes(Object.keys(e)[0])}));n(l)}};return l?Object(r.createElement)(r.Fragment,null):Object.keys(i).map((function(e,n){var o,l=i[e],b=l.name,f=l.selections,p=Object.keys(i[e].selections).filter((function(e){return s.includes(e)}));return Object(r.createElement)("div",{className:"bwf-export-field-section",key:n},Object(r.createElement)(nn,{title:b,checked:(o=e,Object.keys(i[o].selections).filter((function(e){return s.includes(e)})).length===Object.keys(i[o].selections).length),groupKey:e,onChange:function(t){return m(t,e)},count:Array.isArray(p)?p.length:0,selectedGroup:a,setSelectedGroup:c}),a==e&&Object(r.createElement)("div",{className:"bwf-p-20 bwf-export-field-list"},Object.keys(f).map((function(e,n){var a=Array.isArray(t)&&t.find((function(t){return!!t[e]}));return Object(r.createElement)("div",{key:n},Object(r.createElement)(P.CheckboxControl,{label:f[e].name,className:"bwf-export-field",checked:a,onChange:function(t){return u(t,Xt({},e,f[e].name))}}))}))))}))};function an(e){return function(e){if(Array.isArray(e))return ln(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||on(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||on(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function on(e,t){if(e){if("string"==typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sn=function(e){var t=e.title,n=e.setTitle,c=e.selected,o=e.setSelected,l=e.setStep,i=e.expfilter,s=cn(Object(r.useState)("contact_details"),2),m=s[0],b=s[1],f=cn(Object(r.useState)(""),2),p=f[0],d=f[1],O=Object(w.i)(),j=Object(de.a)(),g=Object(r.useMemo)((function(){var e=[],t=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(j).map((function(n){var r=cn(n,2),a=r[0],c=r[1];if(t.includes(a))return!1;var o;o={key:a,label:c.labels.add},e.hasOwnProperty(c.group)?e[c.group].fields.push(o):e[c.group]={label:c.groupLabel,fields:[o]}})),e}),[j]);Object(r.useEffect)((function(){if(Object(u.isEmpty)(c)&&g.hasOwnProperty("contact_details")){var e=[];g.contact_details.fields.map((function(t){var n={};n[t.key]=t.label,e.push(n)})),o(e)}}),[]);var v=function(e){var t=!1;return c.find((function(n){var r=cn(Object.entries(n)[0],2),a=r[0];r[1];e==a&&(t=!0)})),t},y=function(e,t){var n=0,a=!1;return g[e].fields.map((function(e){v(e.key)&&n++})),parseInt(g[e].fields.length)===parseInt(n)&&(a=!0),Object(r.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(t){t.target.classList.contains("components-checkbox-control__label")||t.target.classList.contains("components-checkbox-control__input")||b(m==e?"":e)}},Object(r.createElement)("div",null,Object(r.createElement)(P.CheckboxControl,{checked:a,className:"bwf-export-toggler",onChange:function(t){!function(e,t){var n=an(c);e?g[t].fields.map((function(e){if(!v(e.key)){var t={};t[e.key]=e.label,n.push(t)}})):g[t].fields.map((function(e){v(e.key)&&(n=n.filter((function(t){var n=cn(Object.entries(t)[0],2),r=n[0];n[1];return r!==e.key})))})),o(n)}(t,e)},label:Object(r.createElement)(r.Fragment,null,t,n>0&&Object(r.createElement)("span",{className:"bwf-light"}," ","( ",n," selected )"))})),Object(r.createElement)("span",null,Object(r.createElement)(F.a,{icon:"tailless-arrow-down-new",size:15})))},h=Object(r.createElement)(r.Fragment,null,["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"].map((function(e,t){return g.hasOwnProperty(e)?Object(r.createElement)("div",{className:"bwf-export-field-section",key:"bwf-export-field-section-".concat(t)},y(e,g[e].label),m==e&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(r.createElement)("div",{className:"bwf-export-field-list"},e.map((function(e,t){return Object(r.createElement)(P.CheckboxControl,{label:e.label,className:"bwf-export-field",checked:v(e.key),onChange:function(t){if(t){var n=an(c),r={};r[e.key]=e.label,n.push(r),o(n)}else o(c.filter((function(t){var n=cn(Object.entries(t)[0],2),r=n[0];n[1];return r!==e.key})))},key:"bwf-export-field-".concat(t)})})))}(g[e].fields)):["woocommerce","contact_custom_fields"].includes(e)?"":function(e){return Object(r.createElement)("div",{className:"bwf-export-field-section",key:"'bwf-export-field-section'-".concat(e)},Object(r.createElement)("div",{className:"bwf-export-field-header-wrap"},Object(r.createElement)("div",{className:"bwf-w-120 bwf-placeholder-temp"}),Object(r.createElement)("div",{className:"bwf-w-30 bwf-placeholder-temp"})),0===parseInt(e)&&Object(r.createElement)("div",{className:"bwf-export-field-list"},Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:1}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:2}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:3}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:4}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:5}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:6})))}(t)})),Object(r.createElement)(rn,{selected:c,onChange:function(e){o(e)},selectedGroup:m,setSelectedGroup:b}));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwfcrm-overview-wrap bwf-contact-export-step-one"},p&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)(P.Notice,{status:"error",onRemove:function(){return d("")}},p),Object(r.createElement)("div",{className:"bwf_clear_20"})),Object(r.createElement)(P.TextControl,{type:"text",value:t,placeholder:Object(a.__)("Enter Name","wp-marketing-automations"),label:Object(r.createElement)("span",{className:"bwf-h4"},Object(a.__)("Name","wp-marketing-automations")),onChange:function(e){n(e)}}),Object(r.createElement)("div",{className:"bwf-field-wrapper"},h)),Object(r.createElement)("div",{className:"bwfcrm-export-buttons bwf-display-flex"},Object(r.createElement)("div",null),Object(r.createElement)(P.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,onClick:function(){Object(u.isEmpty)(t)?d(Object(a.__)("Name is required.","wp-marketing-automations")):Object(u.isEmpty)(c)?d(Object(a.__)("Please select field to export.","wp-marketing-automations")):(Object(u.isEmpty)(i)||Object(w.k)(i,"/",O),l(2))}},Object(r.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))},un=n(144),mn=n(38);function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pn=Object(Ge.a)(Object(i.Y)()).formatAmount,dn=function(e){var t=e.setContactCount,n=function(e){var t=Object(u.isEmpty)(e.country)?"":H[e.country],n=Object(i.zb)([e.city,e.state,t],", ");return Object(u.isEmpty)(Object(u.trim)(n))?"":n},c=function(e){var t=n(e);return e.country||t?Object(r.createElement)(I.a,{justify:"start"},!Object(u.isEmpty)(e.country)&&Object(r.createElement)(I.c,null,Object(r.createElement)(Ae.a,{code:e.country,size:18})),Object(r.createElement)(I.c,null,t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",null,n(e)),Object(r.createElement)("br",null)))):"-"},o=function(e){return Object(r.createElement)(mn.a,{href:"admin.php?page=autonami&path=/contact/"+e.id,className:"bwf-a-no-underline"},Object(r.createElement)(A.a,{contact:e,hideJoiningDate:!0}))},m=function(e){return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(r.createElement)(I.a,{justify:"start",align:"top"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"mail"})),Object(r.createElement)(I.c,null,Object(r.createElement)(mn.a,{href:"mailto:"+e.email,className:"bwf-a-no-underline",type:"external"},e.email))),e.phone&&Object(r.createElement)(I.a,{justify:"start",align:"top"},Object(r.createElement)(I.c,null,Object(r.createElement)(F.a,{icon:"phone"})),Object(r.createElement)(I.c,null,Object(r.createElement)(mn.a,{href:"tel:"+e.phone,className:"bwf-a-no-underline",type:"external"},e.phone))))},b=Object(T.a)(),f=b.getPageNumber,p=b.getPerPageCount,d=b.getTotalCount,O=b.getLoading,j=b.getContacts,w=Object(D.a)(),g=w.fetch,v=w.setStateProp,y=e.query;Object(r.useEffect)((function(){return v("limit",10),function(){return v("limit",25)}}),[]);var h=j(),E=f(),_=p(),k=d(),N=O(),S=bn(Object(r.useState)(!0),2),C=S[0],x=S[1];Object(r.useEffect)((function(){C&&k>0&&x(!1),t(k)}),[k]);var P=[{key:"contact",label:Object(a.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"contact_details",label:Object(a.__)("Details","wp-marketing-automations"),isLeftAligned:!0}];Object(i.yb)()?(P.push({key:"total_spent",label:Object(a.__)("Total Spent","wp-marketing-automations"),isLeftAligned:!0}),P.push({key:"last_order",label:Object(a.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0})):P.push({key:"column_location",label:Object(a.__)("Location","wp-marketing-automations"),isLeftAligned:!0});var L=function(e){var t=e.wc,n=t.total_order_count,c=t.total_order_value;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-c-listing-total-spent"},c&&n?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},pn(c)," |"," ",n," ",Object(a.__)(parseInt(n)>1?"orders":"order","wp-marketing-automations")):"-"))},B=function(e){var t=e.wc.l_order_date;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,t&&"0000-00-00"!=t?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(i.N)(t)):"-"))},$=h.map((function(e){var t=function(e){return Object(u.merge)({id:0,email:"-",first_name:"",last_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",phone:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},e)}(e),r=[{display:o(t),value:Object(i.zb)([t.first_name,t.last_name]," ")},{display:m(t),value:Object(a.__)("Email: "+t.email+", Phone: "+t.phone,"wp-marketing-automations")}];return Object(i.yb)()?(r.push({display:L(t),value:""}),r.push({display:B(t),value:""})):r.push({display:c(t),value:n(t)}),r})),M=function(e){e!==_&&g(y,0,e,!0,!1,"",!1)},R=l()("bwfcrm-contacts-list",{"has-search":!0}),z=parseInt(k)>0?" ("+parseInt(k)+")":"";return Object(r.createElement)(s.a,{className:R,title:Object(a.__)("Contacts ","wp-marketing-automations")+z,rows:$,headers:P,query:{paged:E},rowsPerPage:_,totalRows:k,isLoading:N,onPageChange:function(e,t){g(y,(e-1)*_,_,!0,!1,"",!1)},onQueryChange:function(e){return"per_page"!==e?function(){}:M},showMenu:!1,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations")})};dn.defaultProps={contacts:[]};var On=dn,jn=n(149);function wn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var gn=function(e){var t=e.setStep,n=e.setExportFilter,c=e.contactCount,o=e.setContactCount,l=Object(de.a)(),s=Object(w.i)(),m=s.page,b=s.path,f=(s.filter,wn(s,["page","path","filter"])),p=Object(D.a)(),d=Object(r.useRef)(f),O=p.fetch;Object(r.useEffect)((function(){O(f,0,10,!0,!1,"",!1)}),[]),Object(r.useEffect)((function(){Object(i.Cb)(f,d.current)||O(f,0,10,!0,!1,"",!1),d.current=f}),[f]);var j=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-contact-export-step-two"},Object(r.createElement)("div",{className:"bwf-bulk-action-step-loading bwf-p-20"},Object(r.createElement)("div",{className:"bwf-bulk-action-step-loading"},Object(r.createElement)("div",{className:"bwf-filter-placeholder"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",{className:"bwf-w-150"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-36"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(r.createElement)("br",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-400"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-36 bwf-w-90"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-w-150"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(jn.a,{numberOfRows:5,headers:[{key:"2",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"3",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"4",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))}]})))),Object(r.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"})));return!0===l?Object(r.createElement)(r.Fragment,null,j):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-contact-export-step-two"},Object(r.createElement)("div",{className:"bwf-export-filter-wrapper"},Object(r.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"space-between"}},Object(r.createElement)("div",{className:"bwf-h3 bwf-w-300"},Object(a.__)("Segment Contacts","wp-marketing-automations")),Object(r.createElement)(ae.c,{addAdvance:!1})),Object(r.createElement)("div",{className:"bwf-p-0"},Object(r.createElement)(un.a,{siteLocale:"en-US",currency:Object(i.yb)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:l,footerComponent:function(e){return Object(r.createElement)(ae.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:s}))),Object(r.createElement)("div",{className:"bwf-export-table-wrapper"},Object(r.createElement)(On,{setContactCount:o}))),Object(r.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(r.createElement)(P.Button,{className:"bwfcrm-export-prev bwf-display-flex",isSecondary:!0,onClick:function(){Object(u.isEmpty)(f)||Object(w.k)({page:m,path:b},"/",{}),n(f),t(1)}},Object(r.createElement)("span",null,Object(a.__)("Previous","wp-marketing-automations"))),Object(r.createElement)(P.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,disabled:!(c>0),onClick:function(){Object(u.isEmpty)(f)||Object(w.k)({page:m,path:b},"/",{}),n(f),c>0&&t(3)}},Object(r.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))},vn=n(264),yn=n(821);function hn(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function En(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kn=function(e){var t=e.exportId,n=void 0===t?"":t,c=e.setLoading,o=e.setComplete,l=En(Object(r.useState)(!1),2),s=l[0],m=l[1],b=En(Object(r.useState)({}),2),f=b[0],p=b[1],d=En(Object(r.useState)(0),2),O=d[0],j=d[1],w=En(Object(r.useState)(!1),2),g=w[0],y=w[1];Object(r.useEffect)((function(){100===parseInt(O)&&setTimeout((function(){y(!0)}),2e3)}),[O]);var h=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()({method:"GET",path:Object(i.m)("/contact/export/".concat(n))}).then((function(e){200==e.code&&p(e.result)}));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){hn(c,r,a,o,l,"next",e)}function l(e){hn(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(!Object(u.isEmpty)(f))if(3==f.status)c(!1),m(!0),j(100),o(!0);else{var e=parseInt(f.offset)/parseInt(f.count)*100;j(e<100?parseInt(e):100)}}),[f]),Object(yn.a)((function(){s||h()}),5e3),Object(r.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},n&&s&&g?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("h2",null,Object(a.__)("Export Completed","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Your file is ready for download. Now you can download the exported contact list.","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"})):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Export Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("The file is being created in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(vn.a,{noStriped:!0,size:"sm",progress:parseInt(O),text:"".concat(parseInt(O),"% Completed")}),Object(r.createElement)("div",{className:"bwf_clear_20"})))};function Nn(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xn=function(e){var t=e.title,n=e.fields,c=e.expfilter,o=e.setPending,l=e.setAdd,s=e.contactCount,u=Sn(Object(r.useState)(!1),2),m=u[0],b=u[1],f=Sn(Object(r.useState)(""),2),p=f[0],d=f[1],O=Sn(Object(r.useState)(!1),2),j=O[0],w=O[1],g=Sn(Object(r.useState)(!1),2),y=g[0],h=g[1],E=Sn(Object(r.useState)(Object(a.__)("Unable to create export.","wp-marketing-automations")),2),_=E[0],k=E[1];Object(r.useEffect)((function(){o(!0),N()}),[]);var N=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={title:t,fields:n,filters:c,count:s},e.next=4,v()({method:"POST",data:r,path:Object(i.m)("/contact/export/add")}).then((function(e){200==e.code&&(Object(i.H)()||(bwfcrm_contacts_data.first_export_id=2),b(!0),e.result.hasOwnProperty("id")&&d(e.result.id))}));case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),b(!0),w(!0),e.t0.hasOwnProperty("message")&&k(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Nn(c,r,a,o,l,"next",e)}function l(e){Nn(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return y&&setTimeout((function(){document.querySelectorAll(".bwf-export-add-modal .bwf-crm-export-init .bwf-stepper .bwf-stepper__steps")[0].remove()}),2e3),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(P.Card,{className:"bwfcrm-overview-wrap bwf-contact-export-step-three"},Object(r.createElement)("div",{className:"bwf-p-20",style:{alignItems:"center"}},m?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),p?Object(r.createElement)(kn,{exportId:p,setLoading:o,setComplete:h}):Object(r.createElement)("div",{className:"bwf-h4"},j&&Object(r.createElement)(P.Notice,{status:"error",isDismissible:!1},_))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-100p"}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-150"}),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf-display-flex"},m?Object(r.createElement)(r.Fragment,null,y?Object(r.createElement)(P.Button,{isPrimary:!0,onClick:function(){window.open(Object(i.V)()+"/wp-json"+Object(i.m)("/contact/export/download/".concat(p,"?bwf-nonce=").concat(Object(i.q)())),"_blank")}},Object(a.__)("Download File","wp-marketing-automations")):Object(r.createElement)(P.Button,{isPrimary:!0,onClick:function(){l(!1)}},Object(r.createElement)("span",{className:"bwf-mr-5"},Object(a.__)("Go to Export List","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-90"}))),Object(r.createElement)("div",{className:"bwf_clear_30"}))};function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return In(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var An=function(e){var t=e.setAdd,n=Pn(Object(r.useState)(!1),2),c=n[0],o=(n[1],Pn(Object(r.useState)(1),2)),l=o[0],i=o[1],s=Pn(Object(r.useState)(!1),2),u=s[0],m=s[1],b=Pn(Object(r.useState)(""),2),f=b[0],p=b[1],d=Pn(Object(r.useState)([]),2),O=d[0],j=d[1],w=Pn(Object(r.useState)([]),2),g=w[0],v=w[1],y=Pn(Object(r.useState)(0),2),h=y[0],E=y[1],_=function(e){switch(e){case 1:return Object(r.createElement)(sn,{title:f,setTitle:p,selected:O,expfilter:g,setSelected:j,setStep:i});case 2:return Object(r.createElement)(gn,{setStep:i,setExportFilter:v,contactCount:h,setContactCount:E});case 3:return Object(r.createElement)(xn,{title:f,fields:O,expfilter:g,contactCount:h,setPending:m,setAdd:t})}},k=[{key:1,label:Object(a.__)("Fields","wp-marketing-automations"),content:_(1)},{key:2,label:Object(a.__)("Contacts","wp-marketing-automations"),content:_(2)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:_(3)}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(P.Modal,{onRequestClose:function(){return t(!1)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:"Add New Export",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-crm-export-init"},c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(G.a,null)):Object(r.createElement)(Kt.a,{steps:k,currentStep:l,isPending:u}))))};function Tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ln=function(e){var t=e.setExport,n=Tn(Object(r.useState)(!1),2),c=n[0],o=n[1];Object(r.useEffect)((function(){Object(i.g)(Object(a.__)("Export Contacts","wp-marketing-automations"))}),[]);var l=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(F.a,{icon:"export",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(a.__)("Export your contacts to CSV file.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(a.__)("Start Exporting","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(i.nb)()&&o(!0)}}]}}];return Object(r.createElement)(P.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-export-contact-modal",shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-export-modal-header"},Object(r.createElement)("div",{onClick:function(){Object(i.g)(Object(a.__)("Contacts","wp-marketing-automations")),Object(w.k)({page:"autonami",path:"/contacts/"},"/",{}),t(!1)},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(r.createElement)(F.a,{icon:"close"})),Object(r.createElement)("div",{className:"bwf-export-modal-title"},Object(a.__)("Export Contacts","wp-marketing-automations")),!c&&Object(i.H)()&&Object(r.createElement)(P.Button,{variant:"primary",className:"bwf-add-contact-export-btn",onClick:function(){return o(!0)},isBusy:!1,disabled:!1},Object(a.__)("Add New Export","wp-marketing-automations"))),c&&Object(r.createElement)(An,{setAdd:o}),Object(i.H)()?Object(r.createElement)(Ht,{setAdd:o,isAdd:c}):Object(r.createElement)(Nt.a,{data:l}))};n(858);function Fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(n),!0).forEach((function(t){$n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Rn=function(){var e=Object(St.a)("importerReducer"),t=e.getStateProp;return Bn(Bn({},Mn(e,["getStateProp"])),{},{showBackButton:function(){return t("showBackButton")},getExistingImports:function(){return t("existingImports")}})};function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){Un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Gn,Wn,Hn,Kn,Yn=function(){var e=Object(Tt.a)("importerReducer"),t=e.fetch,n=e.setStateProp;return qn(qn({},Vn(e,["fetch","setStateProp"])),{},{showBackButton:function(e){return n("showBackButton",e)},fetch:function(){return t("GET",Object(i.m)("/import/processes"))}})},Qn=n(7);function Zn(){return(Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Jn,Xn,er=function(e){return Qn.createElement("svg",Zn({id:"wlm_svg__WishList_Member","data-name":"WishList Member",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 532.46 217.17"},e),Gn||(Gn=Qn.createElement("defs",null,Qn.createElement("style",null,".wlm_svg__cls-1{fill:#1e7fc0}.wlm_svg__cls-2{fill:#333}"))),Wn||(Wn=Qn.createElement("g",{id:"wlm_svg__member"},Qn.createElement("path",{className:"wlm_svg__cls-1",d:"M238.05 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.69-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.4 10.19l-.46 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.78 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.34-8.82l2.6-8.16h7.27l1.31 24.55h-5.39zM270.09 218.81h-9v5.84h10.1v4.55H255.5v-24.55h15.13v4.55h-9.57v5.11h9zM303.08 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.65-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.41 10.19l-.45 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.77 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.33-8.82l2.61-8.16h7.26l1.32 24.55h-5.39zM320.53 205a45.06 45.06 0 017.16-.52c3.39 0 5.47.33 7.27 1.37a5.35 5.35 0 012.92 4.84c0 2.16-1.26 4.2-4 5.23v.08a6.11 6.11 0 014.89 6 6.5 6.5 0 01-2.56 5.21c-1.8 1.45-4.76 2.24-9.65 2.24a41.31 41.31 0 01-6-.37zm5.5 9.4h1.8c2.94 0 4.48-1.22 4.48-3s-1.42-2.85-3.93-2.85a12.1 12.1 0 00-2.35.17zm0 10.87a13.63 13.63 0 002.13.1c2.52 0 4.74-1 4.74-3.56s-2.2-3.44-5-3.44H326zM364.49 218.81h-9v5.84h10.1v4.55h-15.68v-24.55H365v4.55h-9.57v5.11h9zM376.73 205a47.35 47.35 0 017.38-.52c3.65 0 6.2.55 7.95 1.94a6.22 6.22 0 012.27 5.15 6.5 6.5 0 01-4.33 6v.12c1.7.69 2.66 2.31 3.28 4.57a71.49 71.49 0 002 6.93h-5.68a30.77 30.77 0 01-1.69-5.72c-.69-3.07-1.72-3.89-4-3.92h-1.65v9.64h-5.51zm5.51 10.56h2.17c2.76 0 4.4-1.4 4.4-3.54s-1.54-3.39-4.07-3.41a11.35 11.35 0 00-2.5.19z",transform:"translate(-39.77 -12.28)"}))),Hn||(Hn=Qn.createElement("g",{id:"wlm_svg__WishList"},Qn.createElement("path",{className:"wlm_svg__cls-2",d:"M64.62 180L39.77 75h25.41l8 43.21c2.24 12.5 4.42 26.12 6.1 36.71h.32c1.69-11.4 4.2-24 6.85-37L95.4 75h25.21l8.39 44.3c2.24 12.24 4 23.45 5.54 35.07h.32c1.64-11.7 3.85-23.87 6.17-36.46L149.51 75h24.12l-27.06 105h-25.63L112 134.77c-2.1-10.5-3.74-20.4-5.06-32.29h-.31c-1.78 11.81-3.47 21.77-6 32.36l-10 45.16zM180.94 180v-76.26h23.73V180zM218.57 159.31a46.05 46.05 0 0020.31 5.69c7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.07-25.06 31-25.06 8.92 0 16.8 2.1 21.46 4.44l-4.12 16.32a38.83 38.83 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.51 12.34 20.61 23.45 0 14.22-11.1 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM279.32 69.41h23.73v43.51h.31a26.93 26.93 0 019.28-7.87A26.39 26.39 0 01325 102c15.12 0 26.7 10.48 26.7 33.46V180h-23.76v-41.91c0-10-3.45-16.89-12.24-16.89a12.46 12.46 0 00-11.88 8.37 14.45 14.45 0 00-.77 5.18V180h-23.73zM359.57 75h23.72v85.05H425V180h-65.43zM432.35 180v-76.26h23.72V180zM468 159.31c4.31 2.65 13.42 5.66 20.31 5.66 7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.08-25.06 31-25.06 8.92 0 16.81 2.1 21.47 4.44l-4.13 16.32a38.79 38.79 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.52 12.34 20.61 23.45 0 14.22-11.09 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM555.18 82v21.73h17.05v17.48h-17.05v27.61c0 9.19 2.28 13.43 9.35 13.43a30.89 30.89 0 007-.71l.19 18c-3.06 1.1-8.72 2-15.35 2-7.66 0-14-2.67-17.86-6.62-4.4-4.51-6.55-11.76-6.55-22.58v-31.12h-10.08v-17.48H532V87.37z",transform:"translate(-39.77 -12.28)"}))),Kn||(Kn=Qn.createElement("path",{id:"wlm_svg__bounce",className:"wlm_svg__cls-1",d:"M456.86 82a13.41 13.41 0 01-13.4 13.5c-7.93 0-13.59-7-13.53-13.13.08-8 6.8-14.15 13.72-13.64 6.8-.56 13.24 5.85 13.21 13.27zm-33.32-7S302.47-38.88 195.48 88.11c0 0-36.78-75.63-119.47-74.84 0 0 71.11-13.4 120.07 58.58 0 0 106.11-125.65 242.11-10.49 0 0-13.52-.85-14.65 13.64z",transform:"translate(-39.77 -12.28)"})))};function tr(){return(tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var nr=function(e){return Qn.createElement("svg",tr({xmlns:"http://www.w3.org/2000/svg",width:400,height:90,viewBox:"20 20 700 155",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.414},e),Jn||(Jn=Qn.createElement("path",{d:"M135.1 105.3c-1 0-2 .1-3 .2l-14.4-25.9c3.2-3.8 5.1-8.7 5.1-14 0-12.1-9.8-21.9-21.9-21.9-12.1 0-21.9 9.9-21.9 21.9 0 5.2 1.8 10 4.9 13.8l-15 26.2c-1.1-.2-2.2-.3-3.3-.3-12.1 0-21.9 9.8-21.9 21.9 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-5.2-1.8-10-4.9-13.8l15-26.2c1.1.2 2.2.3 3.3.3 1 0 2-.1 3-.2l14.4 25.9c-3.2 3.8-5.1 8.7-5.1 14 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-12.1-9.8-21.9-21.9-21.9zm-34.2-47.2c4.1 0 7.5 3.4 7.5 7.5s-3.4 7.5-7.5 7.5-7.5-3.4-7.5-7.5 3.4-7.5 7.5-7.5zm-35.3 76.6c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.4 7.5-7.5 7.5zm69.5 0c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.3 7.5-7.5 7.5z",fill:"#e34f43",fillRule:"nonzero"})),Xn||(Xn=Qn.createElement("g",{fill:"#2d2d2d",fillRule:"nonzero"},Qn.createElement("path",{d:"M205.5 64h25.2l21.6 68h-20.6l-3.6-12.7h-22.5L202 132h-18.2l21.7-68zm3.8 42h14.9l-7.4-26.2-7.5 26.2zM258.1 93.9h-6.3V82.3h6.3v-3.8c0-12.4 7.6-18.2 19.4-18.2 3.1 0 5.4.4 7.6 1v12.5c-1.2-.4-2.7-.7-4.6-.7-3.8 0-5.5 2.3-5.5 5.4v3.8h14.5v-4.4c0-12.4 7.7-18.3 19.5-18.3 3.1 0 5.3.4 7.5 1v12.5c-1.2-.4-2.5-.6-4.5-.6-3.9 0-5.5 2.2-5.5 5.4v4.4h10v11.6h-10V132h-17V93.9H275V132h-16.9V93.9zM320.5 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM347.5 60.4h16.9V132h-16.9zM372.7 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM396.7 118.2c0-11.7 9.9-16.3 26.4-16.3h4.8v-1.1c0-4.8-1.1-7.9-6.6-7.9-4.7 0-6.4 2.8-6.8 5.9h-16c.8-12 10.2-17.9 23.8-17.9 13.7 0 22.4 5.6 22.4 18.8V132h-16.6v-5.8c-2.4 3.6-6.8 6.9-14.7 6.9-8.8.1-16.7-4.3-16.7-14.9zm31.2-3.6v-3h-4.5c-6.8 0-9.9 1.3-9.9 5.4 0 2.9 1.9 4.7 5.9 4.7 4.9 0 8.5-2.8 8.5-7.1zM455 116.1V93.9h-6V82.3h6V71.9h17v10.4h9.8v11.6H472v20.5c0 3.6 1.8 5.2 5 5.2 1.9 0 3.3-.3 4.9-.9v12.9c-2.2.6-5.4 1.4-9.4 1.4-11.3.2-17.5-5.2-17.5-16.9zM484.8 107.8v-.8c0-16 11.9-26.1 26.9-26.1 13.6 0 25.3 7.8 25.3 25.7v4.5h-35c.5 6.6 4.3 10.4 10.4 10.4 5.6 0 8-2.6 8.7-5.9h16c-1.5 11.2-10.2 17.6-25.2 17.6-15.7 0-27.1-9.2-27.1-25.4zm35.6-6.3c-.3-6-3.2-9.3-8.8-9.3-5.1 0-8.7 3.3-9.5 9.3h18.3zM536.8 64h19.7l8.8 42.4 9.1-42.4h17.3l9.9 42.8 9.2-42.8h18.1L613 132h-20.4l-10.5-43.2-10.4 43.2h-19l-15.9-68zM634.6 64h25.9c18.6 0 27.3 8.3 27.3 22.7v.4c0 14.3-9.6 22-26.4 22H654V132h-19.4V64zm25 31.8c6.3 0 9.6-2.9 9.6-8.6v-.4c0-5.8-3.4-8.2-9.5-8.2H654v17.1h5.6v.1z"}))))},rr=n(83),ar=n(881),cr=n(292);n(944);function or(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sr=function(e){var t=e.requestData,n=e.headersData,o=e.setImport,l=n.import_id,s=lr(Object(r.useState)(null),2),u=s[0],m=s[1],b=lr(Object(r.useState)(!0),2),f=b[0],p=b[1],d=u&&"log"in u?u.log:{},O=d.skipped,j=void 0===O?[]:O,w=d.failed,g=void 0===w?[]:w,y=d.succeed,h=void 0===y?[]:y,E=lr(Object(r.useState)(null),2),_=E[0],k=E[1],N=Yn().showBackButton,S=lr(Object(r.useState)(!1),2),C=S[0],x=S[1],I=Object(r.useRef)(null),A=(location&&location.search&&Object(c.parse)(location.search.substring(1)),function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,r,a,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]&&c[0],e.prev=1,r=t&&"useExisting"in t&&t.useExisting?{}:t,!t.useExisting&&(r.start_import=n),e.next=6,v()({method:"POST",data:r,path:Object(i.m)("/import/csv/status/".concat(l))});case 6:a=e.sent,m(a.result),a.result&&"status"in a.result&&"success"===a.result.status&&(Object(i.G)()||(bwfcrm_contacts_data.first_contact_id=1),clearInterval(I.current),N(!0),x(!0)),p(!1),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),clearInterval(I.current),N(!0),k(e.t0),p(!1);case 18:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){or(c,r,a,o,l,"next",e)}function l(e){or(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}());return Object(r.useEffect)((function(){return N(!1),window.scrollTo(0,0),A(!0),I.current=setInterval((function(){return A()}),5e3),function(){clearInterval(I.current),N(!0),p(!1)}}),[]),f?Object(r.createElement)(G.a,null):_||u&&!1 in u?Object(r.createElement)(P.Notice,{status:"error"},_&&"message"in _?_.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):u&&"percent"in u?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(vn.a,{noStriped:!0,size:"sm",progress:parseInt(u.percent),text:"".concat(u.percent,"% Completed")}),Object(r.createElement)("p",null,"Skipped: ",parseInt(j)>0?j:0,", Failed:"," ",parseInt(g)>0?g:0,", Success:"," ",parseInt(h)>0?h:0)),C&&Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!u&&!!u.has_log_file&&Object(r.createElement)("a",{target:"_blank",href:Object(i.V)()+"/wp-json"+Object(i.m)("/importer-log/download/".concat(l,"?bwf-nonce=").concat(Object(i.q)())),title:"Download",className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(r.createElement)(P.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))))):null};function ur(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fr=function(e){Object(i.g)("CSV Importer");var t=mr(Object(r.useState)(null),2),n=t[0],c=t[1],o=mr(Object(r.useState)(null),2),l=o[0],s=o[1],u=mr(Object(r.useState)(null),2),m=u[0],b=u[1],f=mr(Object(r.useState)(!1),2),p=f[0],d=f[1],O=Object(r.useContext)(i.d),j=(0,Rn().getExistingImports)().csv,w=e.step,g=e.setImport,y=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,(t=new FormData).append("csv",n),e.next=6,v()({method:"POST",body:t,path:Object(i.m)("/import/csv/upload")});case 6:r=e.sent,s(r.result),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),c(null),O(e.t0&&"message"in e.t0?e.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 14:Object(i.gb)(O,2e3),d(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ur(c,r,a,o,l,"next",e)}function l(e){ur(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){n&&y()}),[n]),Object(r.useEffect)((function(){j&&(s({import_id:j}),b({useExisting:!0}))}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==w&&!j&&!n&&!p&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)(cr.a,{onFileSelected:function(e){return c(e)},filetypeArray:["text/csv","text/plain","application/csv","text/comma-separated-values","application/excel","application/vnd.ms-excel","application/vnd.msexcel","text/anytext","application/octet-stream","application/txt"],btnLabel:Object(a.__)("Drop your CSV file here OR","wp-marketing-automations")})),p&&Object(r.createElement)(G.a,null),2==w&&l&&"import_id"in l&&!m&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)(ar.a,{buttonAlignClass:"bwf-crm-btn-right-alignment",headersData:l,onRequestImport:function(t){b(t),e.setStep(3)},contactHeaderText:Object(a.__)("Contact Fields","wp-marketing-automations"),updateExistingText:Object(a.__)("Update existing contact status","wp-marketing-automations")})),2==w&&!p&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations")))),3==w&&m&&l&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(sr,{requestData:m,setStep:e.setStep,setImporter:e.setImporter,headersData:l,setImport:g}))))};n(945);function pr(e){return function(e){if(Array.isArray(e))return jr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Or(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||Or(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(e,t){if(e){if("string"==typeof e)return jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(e,t):void 0}}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wr=function(e){var t=e.roles,n=void 0===t?{}:t,c=e.onRolesSelected,o=dr(Object(r.useState)(Object.keys(n)),2),l=o[0],i=o[1],s=dr(Object(r.useState)(!0),2),m=s[0],b=(s[1],dr(Object(r.useState)(!1),2)),f=b[0],p=b[1],d=dr(Object(r.useState)(!1),2),O=d[0],j=d[1],w=dr(Object(r.useState)([]),2),g=w[0],v=w[1],y=dr(Object(r.useState)([]),2),h=y[0],E=y[1],_=dr(Object(r.useState)(1),2),k=_[0],N=_[1],S={0:Object(a.__)("Unverified","wp-marketing-automations"),1:Object(a.__)("Subscribed","wp-marketing-automations"),2:Object(a.__)("Bounced","wp-marketing-automations"),3:Object(a.__)("Unsubscribed","wp-marketing-automations")};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(P.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("User Roles","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-crm-import-checkbox-3col"},n&&Object.keys(n).map((function(e){return Object(r.createElement)(P.CheckboxControl,{checked:l.includes(e),key:e,label:n[e],onChange:function(t){return function(e,t){i(e?[].concat(pr(l),[t]):l.filter((function(e){return e!==t})))}(t,e)}})})))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(st.a,{onTagsChange:v,selected:g}),Object(r.createElement)(ut.a,{onListsChange:E,selected:h})),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(e){N(e.target.value)},value:Object(u.isEmpty)(k)?"":k},Object.keys(S).map((function(e){return Object(r.createElement)("option",{key:e,value:e},S[e])}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(P.ToggleControl,{checked:f,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return p(e)}}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(P.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:O,onChange:j})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-52px"}},Object(r.createElement)(P.Button,{disabled:0===l.length,isPrimary:!0,onClick:function(){return c({roles:l,tags:g.map((function(e){return{id:e.key,value:e.label}})),lists:h.map((function(e){return{id:e.key,value:e.label}})),marketing_status:m,update_existing:f,disable_events:O,imported_contact_status:k})}},Object(a.__)("Import","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function gr(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hr=function(e){var t=e.requestData,n=e.setImport,o=vr(Object(r.useState)(!1),2),l=o[0],s=o[1],m=vr(Object(r.useState)(null),2),b=m[0],f=m[1],p=vr(Object(r.useState)(t&&"importId"in t?parseInt(t.importId):0),2),d=p[0],O=p[1],j=b&&"log"in b?b.log:{},w=j.skipped,g=void 0===w?0:w,y=j.failed,h=void 0===y?0:y,E=j.succeed,_=void 0===E?0:E,k=vr(Object(r.useState)(null),2),N=k[0],S=k[1],C=Yn().showBackButton,x=(location&&location.search&&Object(c.parse)(location.search.substring(1)),0),I=vr(Object(r.useState)(5e3),2),A=I[0],T=I[1],D=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x++,e.prev=1,n=parseInt(d)>0?{import_id:d}:t,parseInt(d)>0?n.start_import=!1:n.start_import=!0,e.next=6,v()({method:"POST",data:n,path:Object(i.m)("/import/wp/status")});case 6:r=e.sent,f(r.result),O(parseInt(r.result.import_id)),r.result&&"status"in r.result&&"success"===r.result.status&&(Object(i.G)()||(bwfcrm_contacts_data.first_contact_id=1),T(null),C(!1),s(!0)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),T(null),C(!1),S(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){gr(c,r,a,o,l,"next",e)}function l(e){gr(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(yn.a)((function(){Object(u.isEmpty)(d)&&0!=x||D()}),A),Object(r.useEffect)((function(){return C(!0),window.scrollTo(0,0),function(){C(!1)}}),[]),N||b&&!1 in b?Object(r.createElement)(P.Notice,{status:"error"},N&&"message"in N?N.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):b?b&&"percent"in b?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(vn.a,{progress:parseInt(b.percent),noStriped:!0,size:"sm",text:"".concat(b.percent,"% Completed")}),Object(r.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(g)>0?g:0,", Failed: ",parseInt(h)>0?h:0,", Success: ",parseInt(_)>0?_:0),Object(r.createElement)("div",{className:"bwf_clear_10"})),l&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){n(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!b&&!!b.has_log_file&&Object(r.createElement)("a",{target:"_blank",href:Object(i.V)()+"/wp-json"+Object(i.m)("/importer-log/download/".concat(d,"?bwf-nonce=").concat(Object(i.q)())),title:"Download",className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(r.createElement)(P.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations")))))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(vn.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(g)>0?g:0,", Failed: ",parseInt(h)>0?h:0,", Success: ",parseInt(_)>0?_:0)),Object(r.createElement)("div",{className:"bwf_clear_20"}))};function Er(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function _r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nr=function(e){Object(i.g)("WP Importer");var t=e.step,n=e.setImport,c=_r(Object(r.useState)({}),2),o=c[0],l=c[1],s=_r(Object(r.useState)(null),2),m=s[0],b=s[1],f=_r(Object(r.useState)(!1),2),p=f[0],d=f[1],O=(0,Rn().getExistingImports)().wp,j=Object(r.useContext)(i.d),w=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,v()({method:"GET",path:Object(i.m)("/import/wp/roles")});case 4:t=e.sent,l(t.result),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),l(null),j(e.t0&&"message"in e.t0?e.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 12:Object(i.gb)(j,2e3),d(!1);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Er(c,r,a,o,l,"next",e)}function l(e){Er(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){O?b({importId:O}):w()}),[]),Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},p&&Object(r.createElement)(G.a,null),2==t&&!m&&o&&Object(u.size)(o)>0&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)(wr,{roles:o,setStep:e.setStep,setImporter:e.setImporter,onRolesSelected:function(t){b(t),e.setStep(3)}})),3==t&&m&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(hr,{setStep:e.setStep,requestData:m,setImporter:e.setImporter,setImport:n})))};n(946);function Sr(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pr=function(e){var t=e.importData,n=e.setImport,o=t.importId,l=Cr(Object(r.useState)(null),2),s=l[0],u=l[1],m=s&&"log"in s?s.log:{},b=m.skipped,f=void 0===b?0:b,p=m.failed,d=void 0===p?0:p,O=m.succeed,j=void 0===O?0:O,w=(location&&location.search&&Object(c.parse)(location.search.substring(1)),Cr(Object(r.useState)(!1),2)),g=w[0],y=w[1],h=Cr(Object(r.useState)(!1),2),E=h[0],_=h[1],k=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={start_import:!1,import_id:o},e.next=4,v()({method:"GET",path:Object(i.m)("/import/wc/status?"+Object(c.stringify)(t))});case 4:n=e.sent,u(n.result),n.result&&"status"in n.result&&"success"===n.result.status&&n.result.percent>=100&&(Object(i.G)()||(bwfcrm_contacts_data.first_contact_id=1),y(!0),_(!0)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),setError(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Sr(c,r,a,o,l,"next",e)}function l(e){Sr(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(yn.a)((function(){E||k()}),5e3),s?s&&"percent"in s?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(vn.a,{noStriped:!0,size:"sm",progress:parseInt(s.percent),text:"".concat(s.percent,"% Completed")}),Object(r.createElement)("p",null,"Skipped: ",parseInt(f)>0?f:0,", Failed:"," ",parseInt(d)>0?d:0,", Success:"," ",parseInt(j)>0?j:0)),g&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){n(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!s&&!!s.has_log_file&&Object(r.createElement)("a",{target:"_blank",href:Object(i.V)()+"/wp-json"+Object(i.m)("/importer-log/download/".concat(o,"?bwf-nonce=").concat(Object(i.q)())),title:"Download",className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(r.createElement)(P.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations")))))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(vn.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(f)>0?f:0,", Failed: ",parseInt(d)>0?d:0,", Success: ",parseInt(j)>0?j:0)),Object(r.createElement)("div",{className:"bwf_clear_20"}))};function Ir(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function Ar(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Ir(c,r,a,o,l,"next",e)}function l(e){Ir(c,r,a,o,l,"throw",e)}o(void 0)}))}}function Tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lr=function(e){Object(i.g)("WC Importer");var t=e.step,n=e.setImport,o=Tr(Object(r.useState)({}),2),l=o[0],s=o[1],m=Tr(Object(r.useState)(!0),2),b=m[0],f=m[1],p=Tr(Object(r.useState)(null),2),d=p[0],O=p[1],j=Tr(Object(r.useState)(!1),2),w=j[0],g=j[1],y=Tr(Object(r.useState)(!0),2),h=y[0],E=(y[1],Tr(Object(r.useState)(!1),2)),_=E[0],k=E[1],N=Tr(Object(r.useState)([]),2),S=N[0],C=N[1],x=Tr(Object(r.useState)([]),2),I=x[0],A=x[1],T=Object(r.useContext)(i.d),D=Tr(Object(r.useState)(1),2),L=D[0],F=D[1],B=(0,Rn().getExistingImports)().wc,$={0:Object(a.__)("Unverified","wp-marketing-automations"),1:Object(a.__)("Subscribed","wp-marketing-automations"),2:Object(a.__)("Bounced","wp-marketing-automations"),3:Object(a.__)("Unsubscribed","wp-marketing-automations")},M=function(){var t=Ar(regeneratorRuntime.mark((function t(){var n,r,o,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]&&l[0],t.prev=1,r={start_import:n,tags:S.map((function(e){return{id:e.key,value:e.label}})),lists:I.map((function(e){return{id:e.key,value:e.label}})),marketing_status:h,update_existing:_,disable_events:w,imported_contact_status:L},t.next=5,v()({method:"GET",path:Object(i.m)("/import/wc/status?"+Object(c.stringify)(r))});case 5:o=t.sent,s({importId:o.result.import_id}),e.setStep(3),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),s(null),T(t.t0&&"message"in t.t0?t.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 14:Object(i.gb)(T,2e3),f(!1);case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}(),R=function(){var e=Ar(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"GET",path:Object(i.m)("/import/wc/get-orders")}).then((function(e){O(parseInt(e.result)),f(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){parseInt(B)>0?(s({importId:B}),f(!1)):R()}),[]);return Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==t&&b&&(Object(u.isEmpty)(l)||1===l.status)&&Object(r.createElement)(G.a,null),2==t&&!b&&!Object(u.isNull)(d)&&(d>0?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("WooCommerce Customers","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},d+" "+Object(a.__)("paid orders are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(st.a,{onTagsChange:C,selected:S}),Object(r.createElement)(ut.a,{onListsChange:A,selected:I})),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wc-status-select",onChange:function(e){F(e.target.value)},value:Object(u.isEmpty)(L)?"":L},Object.keys($).map((function(e){return Object(r.createElement)("option",{key:e,value:e},$[e])}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(P.ToggleControl,{checked:_,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return k(e)}}),Object(r.createElement)(P.ToggleControl,{label:Object(a.__)("Trigger Automations (for Tag & List related Events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:w,onChange:g})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){e.setStep(3),f(!0),M(!0)}},Object(a.__)("Import","wp-marketing-automations"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("WooCommerce Customers","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("No Orders are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_20"})))),2==t&&!b&&Object(r.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations"))),3==t&&b&&Object(r.createElement)(G.a,null),3==t&&!b&&l&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)(Pr,{importData:l,setStep:e.setStep,setImporter:e.setImporter,setImport:n})))};n(947);function Fr(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function Br(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Fr(c,r,a,o,l,"next",e)}function l(e){Fr(c,r,a,o,l,"throw",e)}o(void 0)}))}}var $r=function(){return Object(Yt.a)(["get-wlm-members-count"],Br(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({path:Object(i.m)("/import/wlm/get-members-count")});case 2:if((t=e.sent).code&&200===t.code){e.next=5;break}throw new Error(Object(a.__)("Unable to load members count","wp-marketing-automations"));case 5:return e.abrupt("return",parseInt(t.result));case 6:case"end":return e.stop()}}),e)}))))};function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zr={0:Object(a.__)("Unverified","wp-marketing-automations"),1:Object(a.__)("Subscribed","wp-marketing-automations"),2:Object(a.__)("Bounced","wp-marketing-automations"),3:Object(a.__)("Unsubscribed","wp-marketing-automations")},qr=function(e){var t=e.onStartImport,n=e.setStep,c=e.setImporter,o=$r(),l=o.isLoading,s=o.data,m=void 0===s?0:s,b=o.isError,f=o.error,p=Mr(Object(r.useState)(!1),2),d=p[0],O=p[1],j=Mr(Object(r.useState)(!1),2),w=j[0],g=j[1],v=Mr(Object(r.useState)([]),2),y=v[0],h=v[1],E=Mr(Object(r.useState)([]),2),_=E[0],k=E[1],N=Mr(Object(r.useState)(1),2),S=N[0],C=N[1],x=Object(r.useContext)(i.d),I=Object(r.useCallback)((function(){return t({tags:y.map((function(e){return{id:e.key,value:e.label}})),lists:_.map((function(e){return{id:e.key,value:e.label}})),update_existing:d,disable_events:w,imported_contact_status:S})}),[y,_,d,w,S,t]);return Object(r.useEffect)((function(){b&&(x("string"==typeof f?f:f&&f.message?f.message:Object(a.__)("Unknown API Error","wp-marketing-automations")),Object(i.gb)(x,2e3))}),[b,f]),l?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)(G.a,null)):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(P.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("WishList Members","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},m+" "+Object(a.__)("members are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(st.a,{onTagsChange:h,selected:y}),Object(r.createElement)(ut.a,{onListsChange:k,selected:_})),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(e){C(e.target.value)},value:Object(u.isEmpty)(S)?"":S},Object.keys(zr).map((function(e){return Object(r.createElement)("option",{key:e,value:e},zr[e])}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(P.ToggleControl,{checked:d,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return O(e)}}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(P.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:w,onChange:g})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(r.createElement)(P.Button,{disabled:0===parseInt(m),isPrimary:!0,onClick:I},Object(a.__)("Import","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){n(1),c(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function Ur(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function Vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wr=function(e){var t=e.requestData,n=e.existingImport,o=(e.setStep,e.setImport),l=Vr(Object(r.useState)(!1),2),s=l[0],m=l[1],b=Vr(Object(r.useState)(null),2),f=b[0],p=b[1],d=Vr(Object(r.useState)(t&&"importId"in t?parseInt(t.importId):0),2),O=d[0],j=d[1],w=f&&"log"in f?f.log:{},g=w.skipped,y=void 0===g?0:g,h=w.failed,E=void 0===h?0:h,_=w.succeed,k=void 0===_?0:_,N=Vr(Object(r.useState)(null),2),S=N[0],C=N[1],x=Yn().showBackButton,I=(location&&location.search&&Object(c.parse)(location.search.substring(1)),0),A=Vr(Object(r.useState)(5e3),2),T=A[0],D=A[1],L=Vr(Object(r.useState)(!0),2),F=L[0],B=L[1],$=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I++,e.prev=1,r=parseInt(O)>0?{import_id:O}:t,F&&!n?(B(!1),r.start_import=!0):r.start_import=!1,e.next=6,v()({method:"POST",data:r,path:Object(i.m)("/import/wlm/status")});case 6:a=e.sent,p(a.result),j(parseInt(a.result.import_id)),a.result&&"status"in a.result&&"success"===a.result.status&&(bwfcrm_contacts_data.is_wlm_active="1",D(null),x(!1),m(!0)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),D(null),x(!1),C(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Ur(c,r,a,o,l,"next",e)}function l(e){Ur(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(yn.a)((function(){Object(u.isEmpty)(O)&&0!=I||$()}),T),Object(r.useEffect)((function(){return x(!0),window.scrollTo(0,0),function(){x(!1)}}),[]),S||f&&!1 in f?Object(r.createElement)(P.Notice,{status:"error"},S&&"message"in S?S.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):f?f&&"percent"in f?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(vn.a,{noStriped:!0,size:"sm",progress:parseInt(f.percent),text:"".concat(f.percent,"% Completed")}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("p",{className:"bwf-t-center"},"Skipped: ",parseInt(y)>0?y:0,", Failed:"," ",parseInt(E)>0?E:0,", Success:"," ",parseInt(k)>0?k:0)),s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(vn.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p bwf-t-center"},"Skipped: ",parseInt(y)>0?y:0,", Failed: ",parseInt(E)>0?E:0,", Success: ",parseInt(k)>0?k:0)),Object(r.createElement)("div",{className:"bwf_clear_20"}))};function Hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yr=function(e){var t=e.step,n=e.setStep,c=e.setImporter,o=e.setImport;Object(i.g)("WLM Importer");var l=Hr(Object(r.useState)(null),2),s=l[0],u=l[1],m=(0,Rn().getExistingImports)().wlm;return Object(r.useEffect)((function(){parseInt(m)>0&&(u({importId:m}),n(3))}),[]),Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(qr,{setStep:n,setImporter:c,onStartImport:function(e){u(e),n(3)}})),3==t&&s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(Wr,{setStep:n,requestData:s,setImporter:c,existingImport:parseInt(m)>0,setImport:o})))};n(948);function Qr(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function Zr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Qr(c,r,a,o,l,"next",e)}function l(e){Qr(c,r,a,o,l,"throw",e)}o(void 0)}))}}var Jr=function(){return Object(Yt.a)(["get-affwp-affiliate-count"],Zr(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({path:Object(i.m)("/import/affwp/get-affiliate-count")});case 2:if((t=e.sent).code&&200===t.code){e.next=5;break}throw new Error(Object(a.__)("Unable to load affiliate count","wp-marketing-automations"));case 5:return e.abrupt("return",parseInt(t.result));case 6:case"end":return e.stop()}}),e)}))))};function Xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ea(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ta={0:Object(a.__)("Unverified","wp-marketing-automations"),1:Object(a.__)("Subscribed","wp-marketing-automations"),2:Object(a.__)("Bounced","wp-marketing-automations"),3:Object(a.__)("Unsubscribed","wp-marketing-automations")},na=function(e){var t=e.onStartImport,n=e.setStep,c=e.setImporter,o=Jr(),l=o.isLoading,s=o.data,u=void 0===s?0:s,m=o.isError,b=o.error,f=Xr(Object(r.useState)(!1),2),p=f[0],d=f[1],O=Xr(Object(r.useState)(!1),2),j=O[0],w=O[1],g=Xr(Object(r.useState)([]),2),v=g[0],y=g[1],h=Xr(Object(r.useState)([]),2),E=h[0],_=h[1],k=Xr(Object(r.useState)(1),2),N=k[0],S=k[1],C=Object(r.useContext)(i.d),x=Object(r.useCallback)((function(){return t({tags:v.map((function(e){return{id:e.key,value:e.label}})),lists:E.map((function(e){return{id:e.key,value:e.label}})),update_existing:p,disable_events:j,imported_contact_status:N})}),[v,E,p,j,N,t]);return Object(r.useEffect)((function(){m&&(C("string"==typeof b?b:b&&b.message?b.message:Object(a.__)("Unknown API Error","wp-marketing-automations")),Object(i.gb)(C,2e3))}),[m,b]),l?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)(G.a,null)):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(P.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("AffiliateWP Affiliates","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},u+" "+Object(a.__)("affiliates are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(st.a,{onTagsChange:y,selected:v}),Object(r.createElement)(ut.a,{onListsChange:_,selected:E})),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(e){S(e.target.value)}},Object.keys(ta).map((function(e){return Object(r.createElement)("option",{key:e,value:e,selected:N==e},ta[e])}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(P.ToggleControl,{checked:p,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return d(e)}}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(P.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:j,onChange:w})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-52px"}},Object(r.createElement)(P.Button,{disabled:0===parseInt(u),isPrimary:!0,onClick:x},Object(a.__)("Import","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){n(1),c(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function ra(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function aa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oa=function(e){var t=e.requestData,n=e.existingImport,o=(e.setStep,e.setImport),l=aa(Object(r.useState)(!1),2),s=l[0],m=l[1],b=aa(Object(r.useState)(null),2),f=b[0],p=b[1],d=aa(Object(r.useState)(t&&"importId"in t?parseInt(t.importId):0),2),O=d[0],j=d[1],w=f&&"log"in f?f.log:{},g=w.skipped,y=void 0===g?0:g,h=w.failed,E=void 0===h?0:h,_=w.succeed,k=void 0===_?0:_,N=aa(Object(r.useState)(null),2),S=N[0],C=N[1],x=Yn().showBackButton,I=(location&&location.search&&Object(c.parse)(location.search.substring(1)),0),A=aa(Object(r.useState)(5e3),2),T=A[0],D=A[1],L=aa(Object(r.useState)(!0),2),F=L[0],B=L[1],$=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I++,e.prev=1,r=parseInt(O)>0?{import_id:O}:t,F&&!n?(B(!1),r.start_import=!0):r.start_import=!1,e.next=6,v()({method:"POST",data:r,path:Object(i.m)("/import/affwp/status")});case 6:a=e.sent,p(a.result),j(parseInt(a.result.import_id)),a.result&&"status"in a.result&&"success"===a.result.status&&(D(null),x(!1),m(!0)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),D(null),x(!1),C(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ra(c,r,a,o,l,"next",e)}function l(e){ra(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(yn.a)((function(){Object(u.isEmpty)(O)&&0!=I||$()}),T),Object(r.useEffect)((function(){return x(!0),window.scrollTo(0,0),function(){x(!1)}}),[]),S||f&&!1 in f?Object(r.createElement)(P.Notice,{status:"error"},S&&"message"in S?S.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):f?f&&"percent"in f?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(vn.a,{noStriped:!0,size:"sm",progress:parseInt(f.percent),text:"".concat(f.percent,"% Completed")}),Object(r.createElement)("p",null,"Skipped: ",parseInt(y)>0?y:0,", Failed:"," ",parseInt(E)>0?E:0,", Success:"," ",parseInt(k)>0?k:0)),s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(P.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(vn.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(y)>0?y:0,", Failed: ",parseInt(E)>0?E:0,", Success: ",parseInt(k)>0?k:0)),Object(r.createElement)("div",{className:"bwf_clear_20"}))};function la(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ia(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sa=function(e){var t=e.step,n=e.setStep,c=e.setImporter,o=e.setImport;Object(i.g)("AFFWP Importer");var l=la(Object(r.useState)(null),2),s=l[0],u=l[1],m=(0,Rn().getExistingImports)().affwp;return Object(r.useEffect)((function(){parseInt(m)>0&&(u({importId:m}),n(3))}),[]),Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(na,{setStep:n,setImporter:c,onStartImport:function(e){u(e),n(3)}})),3==t&&s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(oa,{setStep:n,requestData:s,setImporter:c,existingImport:parseInt(m)>0,setImport:o})))};function ua(){return(ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ma(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ba(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fa=function(e){var t=e.setImport,n=Object(r.useContext)(i.d),c=ma(Object(r.useState)(null),2),o=c[0],l=c[1],s=ma(Object(r.useState)(!0),2),m=(s[0],s[1]),b=Rn(),f=(b.showBackButton,b.getLoading),p=b.getExistingImports,d=Yn().fetch,O=f(),j=p(),g=ma(Object(r.useState)(1),2),v=g[0],y=g[1],h=ma(Object(r.useState)(!1),2),E=h[0];h[1];Object(r.useEffect)((function(){d(),m(!1),Object(i.g)("Import Contacts")}),[]),Object(r.useEffect)((function(){j&&Object(u.size)(j)>0&&(l(Object.keys(j)[0]),y(3))}),[j]);var _=function(){var e=[{key:"csv",label:Object(a.__)("CSV","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-csv"}];return Object(i.tb)()||e.push({key:"wp",label:Object(a.__)("WordPress","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wp"}),Object(i.yb)()&&e.push({key:"wc",label:Object(a.__)("WooCommerce","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wc"}),Object(i.sb)()&&e.push({key:"wlm",label:Object(r.createElement)(r.Fragment,null,er()," ",Object(a.__)("WishList Member","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-wlm"}),Object(i.hb)()&&e.push({key:"affwp",label:Object(r.createElement)(r.Fragment,null,nr()," ",Object(a.__)("AffiliateWP","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-affwp"}),Object(rr.applyFilters)("bwfAddContactImporter",e)}(),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(w.g)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(u.isEmpty)(e)||Object(w.k)(e,t,n)},N=function(e){return Object(r.createElement)(r.Fragment,null,function(e,a){switch(a){case"csv":return Object(r.createElement)(fr,{step:e,setStep:y,setImporter:l,setImport:t});case"wp":return Object(r.createElement)(Nr,{step:e,setStep:y,setImporter:l,setImport:t});case"wc":return Object(r.createElement)(Lr,{step:e,setStep:y,setImporter:l,setImport:t});case"wlm":return Object(r.createElement)(Yr,{step:e,setStep:y,setImporter:l,setImport:t});case"affwp":return Object(r.createElement)(sa,{step:e,setStep:y,setImporter:l,setImport:t});default:return Object(rr.applyFilters)("bwfImporterSelectedContent",Object(r.createElement)(r.Fragment,null),a,e,y,l,j,n,i.gb,k,t)}}(e,o))},S=[{key:1,label:Object(a.__)("Source","wp-marketing-automations"),content:O?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(r.createElement)("div",{className:"bwf-placeholder-temp dark bwf-h-15 bwf-w-150"}))),Object(r.createElement)(P.Card,{className:"bwf-crm-importer-wrapper"},Object(r.createElement)("div",{className:"bwf-crm-importer"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}),Object(r.createElement)("div",{className:"bwf_clear_10"}),[1,2,3].map((function(e){return Object(r.createElement)(P.Button,{key:e,isTertiary:!0,className:"bwf-crm-importer-button"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-60 bwf-w-60"}))})),Object(r.createElement)("div",{className:"bwf_clear_20"})))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Source","wp-marketing-automations"))),Object(r.createElement)(P.Card,{className:"bwf-crm-importer-wrapper"},Object(r.createElement)("div",{className:"bwf-crm-importer"},Object(r.createElement)("div",{className:"bwf-h2"},Object(a.__)("Import Contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p"},Object(a.__)("Choose the source for importing contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_10"}),_.map((function(e,t){var n=e.key===o?{isPrimary:!0}:{};return Object(r.createElement)(P.Button,ua({key:t,onClick:function(){l(e.key),y(2)}},n,{className:e.className}),e.label)})),Object(r.createElement)("div",{className:"bwf_clear_20"}))))},{key:2,label:Object(a.__)("Configuration","wp-marketing-automations"),content:N(2)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:N(3)}];return Object(r.createElement)(P.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-import-contact-modal",shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-import-modal-header"},Object(r.createElement)("div",{onClick:function(){Object(i.g)(Object(a.__)("Contacts","wp-marketing-automations")),Object(w.k)({page:"autonami",path:"/contacts/"},"/",{}),t(!1)},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(r.createElement)(F.a,{icon:"close"})),Object(r.createElement)("div",{className:"bwf-import-modal-title"},Object(a.__)("Import Contacts","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-crm-import-init"},Object(r.createElement)(Kt.a,{steps:S,currentStep:v,isPending:E})))};function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){Oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ja(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(){var e=Object(T.a)(),t=Object(D.a)(),n=e.getError,o=e.getContacts,l=e.getCountData,s=t.clearError,u=t.startIndexing,m=t.setStateProp,b=ja(Object(r.useState)(!1),2),f=b[0],p=b[1],d=ja(Object(r.useState)(!1),2),O=d[0],j=d[1],w=ja(Object(r.useState)(!1),2),g=w[0],v=w[1],y=location&&location.search?Object(c.parse)(location.search.substring(1)):{},h=n(),E=Object(r.useRef)();Object(r.useEffect)((function(){E.current?s():E.current=h})),Object(r.useEffect)((function(){return Object(i.g)("Contacts"),function(){m("countData",{})}}),[]);var _=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(P.Button,{isPrimary:!0,className:"bwf-display-flex",label:"Add New Contact",onClick:function(){return p(!0)}},Object(a.__)("Add New Contact","wp-marketing-automations"))),k=l(),N=Object(kt.a)().getPageCountData,S=Object(_t.a)().setPageCountData,C=N();Object(r.useEffect)((function(){S(da(da({},C),k))}),[k]),Object(ht.a)("contacts","",Object(a.__)("ALL CONTACTS","wp-marketing-automations"),_);var x=o();if("indexing_status"in x){var I="indexing_status"in x&&2===parseInt(x.indexing_status)?Object(a.__)("Contacts indexing is in progress. Kindly, check back after some time.","wp-marketing-automations"):Object(a.__)("Contacts Indexing required, before you can view the contacts.","wp-marketing-automations"),A="indexing_status"in x&&2===parseInt(x.indexing_status)?null:Object(a.__)("Start Indexing","wp-marketing-automations");return Object(r.createElement)(yt.a,{text:I,buttonText:A,onButtonClick:function(){return u()}})}var L=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(F.a,{icon:"zero-contacts",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(a.__)("No Contacts","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(a.__)("Add contacts and get actionable insights about every contact to revv up your campaigns.","wp-marketing-automations")}},{type:"actions",data:{count:"2",actions:[{icon:Object(r.createElement)(F.a,{icon:"add-contact",width:"36",height:"36"}),heading:Object(a.__)("Add a Contact","wp-marketing-automations"),sub_heading:Object(a.__)("Create a new contact manually","wp-marketing-automations"),onClick:function(){p(!0)}},{icon:Object(r.createElement)(F.a,{icon:"import-contact",width:"36",height:"36"}),heading:Object(a.__)("Import Contacts","wp-marketing-automations"),sub_heading:Object(a.__)("Bulk upload contacts from various sources","wp-marketing-automations"),onClick:function(){v(!0)}}]}}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Et.a,null),Object(r.createElement)("div",{className:"bwfcrm-contacts-list__scroll-point"}),h&&!f&&Object(r.createElement)(P.Notice,{status:"error"},h.message),Object(i.G)()?Object(r.createElement)(r.Fragment,null,-1===Object(i.h)(bwfcrm_contacts_data.bwf_pro_version,"2.1.4")?Object(r.createElement)(rt,{query:y,isExport:O,setExport:j,isImport:g,setImport:v}):Object(r.createElement)(qe,{query:y,isExport:O,setExport:j,isImport:g,setImport:v})):Object(r.createElement)(Nt.a,{data:L}),f&&Object(r.createElement)(vt,{query:y,onCloseModal:function(){return p(!1)}}),O&&Object(r.createElement)(Ln,{setExport:j}),g&&Object(r.createElement)(fa,{setImport:v}))}},1193:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(67),c=n(4),o=n(2),l=n(15),i=(n(856),n(5)),s=n(27),u=n(32),m=n.n(u),b=n(115),f=n.n(b),p=n(31),d=n.n(p),O=n(3),j=n(14),w=n.n(j);function g(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}var v={name:"contacts",className:"bwf-search-bwf-contacts-result",options:function(e){return(t=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m()(t)){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",[{id:1,email:"johndoe@gmail.com",f_name:"John",l_name:"Doe",contact_no:"12345567890"}]);case 3:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function o(e){g(c,r,a,o,l,"next",e)}function l(e){g(c,r,a,o,l,"throw",e)}o(void 0)}))},function(e){return n.apply(this,arguments)})(e);var t,n},isDebounced:!0,getOptionIdentifier:function(e){return e.id},getOptionKeywords:function(e){return[e.f_name,e.l_name,e.email]},getFreeTextOptions:function(e,t){return[{key:"name",label:Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name"},w()({mixedString:Object(o.__)("All contacts with names that include {{query /}}","wp-marketing-automations"),components:{query:Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{id:e,name:e,contacts:t.map((function(e){return d()(e,"value")?e.value:e})),searchTerm:e}}]},getOptionLabel:function(e,t){var n=Object(i.i)(Object(i.u)(e),t)||{};return Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":Object(i.u)(e)},n.suggestionBeforeMatch,Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch)},getOptionCompletion:function(e){return e}};function y(e,t,n,r,a,c,o){try{var l=e[c](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}var h=function(e){var t=e.query,n=t.hasOwnProperty("s")?t.s:"",a=m()(n)?[]:[{key:n,label:Object(o.__)("Search Term: ","wp-marketing-automations")+n,bwfLabelSource:"bwfcrm_contacts",isSearchTerm:!0}],c=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f()(n)){e.next=2;break}return e.abrupt("return");case 2:if(r=n.find((function(e){return d()(e,"searchTerm")})),!(Object(O.isUndefined)(r)&&n.length>0&&n[0].hasOwnProperty("id"))){e.next=6;break}return Object(l.k)({},"/contact/".concat(n[0].id),t),e.abrupt("return");case 6:if(a=Object(O.isUndefined)(r)?void 0:r.searchTerm,c=d()(t,"s")&&!m()(t.s)?t.s:"",a!==c){e.next=10;break}return e.abrupt("return");case 10:Object(l.k)({s:a},"/contacts",t);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){y(c,r,a,o,l,"next",e)}function l(e){y(c,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return Object(r.createElement)(s.a,{autocompleter:v,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:a,onChange:c,placeholder:Object(o.__)("Search by contact","wp-marketing-automations"),showClearButton:!0,disabled:!1})},E=n(248),_=n(255),k=n(16),N=n(267),S=n(38),C=n(250),x=n(59),P=n(91),I=n(93),A=n(6),T=n.n(A),D=n(68),L=n(800),F=n(53),B=n.n(F),$=n(92),M=n(8),R=n(252),z=n(28);function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V=Object(D.a)(Object(i.Y)()).formatAmount;t.default=function(){Object(i.g)("Contacts");var e=Object(l.i)(),t=e.path,n=q(Object(r.useState)(!1),2),s=n[0],u=n[1],m=q(Object(r.useState)(!1),2),b=m[0],f=m[1],p=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.Button,{isPrimary:!0,className:"bwf-display-flex",label:"Add New Contact",onClick:function(){u(!0)}},Object(r.createElement)(M.a,{icon:"lock",size:16,color:"#fff"}),Object(o.__)("Add New Contact","wp-marketing-automations")));Object(L.a)("contacts","",Object(o.__)("ALL CONTACTS","wp-marketing-automations"),p);var d=T()("bwfcrm-contacts-list",{"has-search":!0}),j=function(e){var t=e.country?"":e.country,n=Object(i.zb)([t],", ");return Object(O.isEmpty)(Object(O.trim)(n))?"":n},w=function(e){var t=j(e),n=e.country?_[e.country]:"";return e.country||t?Object(r.createElement)(k.a,{justify:"start"},!Object(O.isEmpty)(e.country)&&Object(r.createElement)(k.c,null,Object(r.createElement)(N.a,{code:e.country,size:15})),Object(r.createElement)(k.c,null,t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",null,j(e))),n&&Object(r.createElement)("span",null,t&&Object(r.createElement)(r.Fragment,null,",")," ",n))):Object(r.createElement)("span",null,"-")},g=function(e){return Object(r.createElement)(S.a,{href:"admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-a-no-underline"},Object(r.createElement)(C.a,{contact:e}))},v=function(e){return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(r.createElement)(k.a,{justify:"justify",align:"top"},Object(r.createElement)(k.c,null,Object(r.createElement)(M.a,{icon:"mail"})),Object(r.createElement)(k.c,null,e.email)),e.contact_no&&Object(r.createElement)(k.a,{justify:"justify",align:"top"},Object(r.createElement)(k.c,null,Object(r.createElement)(M.a,{icon:"phone"})),Object(r.createElement)(k.c,null,e.contact_no)),!e.contact_no&&!e.email&&Object(r.createElement)("span",null,"-"))},y=function(e){var t=e.wc,n=(t.l_order_date,t.total_order_count),a=t.total_order_value,c=t.total_purchased_items;return Object(r.createElement)("div",{className:"bwf-c-listing-total-spent"},!(!a||!n)&&Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},V(a)," |"," ",n," ",Object(o.__)(parseInt(n)>1?"orders":"order","wp-marketing-automations")),!!c&&Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},c," ",c>1?Object(o.__)("items","wp-marketing-automations"):Object(o.__)("item","wp-marketing-automations")),!a&&!n&&!c&&"-")},A=function(e){var t=e.wc,n=t.l_order_date,a=t.total_order_count,c=t.total_order_value,o=t.total_purchased_items;return Object(r.createElement)("div",{className:"bwf-c-listing-last_order"},!!n&&"0000-00-00"!=n&&Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(i.N)(n)),!c&&!a&&!o&&(!n||"0000-00-00"==n)&&"-")},D=function(e){return Object(r.createElement)(x.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(P.a,{isClickable:!0,onInvoke:function(){}},Object(r.createElement)(S.a,{href:"admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-a-no-underline"},Object(r.createElement)(k.a,{justify:"flex-start"},Object(r.createElement)(k.c,null,Object(r.createElement)(M.a,{icon:"profile"})),Object(r.createElement)(k.c,null,Object(o.__)("View","wp-marketing-automations"))))),Object(r.createElement)(P.a,{isClickable:!0,onInvoke:function(){u(!0),n()}},Object(r.createElement)(k.a,{justify:"flex-start"},Object(r.createElement)(k.c,null,Object(r.createElement)(M.a,{icon:"mail"})),Object(r.createElement)(k.c,null,Object(o.__)("Send Message","wp-marketing-automations")))),Object(r.createElement)(P.a,{isClickable:!0,onInvoke:function(){u(!0),n()}},Object(r.createElement)(k.a,{justify:"flex-start"},Object(r.createElement)(k.c,null,Object(r.createElement)(M.a,{icon:"notes"})),Object(r.createElement)(k.c,null,Object(o.__)("Add Note","wp-marketing-automations")))),Object(r.createElement)(P.a,{isClickable:!0,onInvoke:function(){u(!0),n()}},Object(r.createElement)(k.a,{justify:"flex-start"},Object(r.createElement)(k.c,null,Object(r.createElement)(M.a,{icon:"trash"})),Object(r.createElement)(k.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})},F=function(e){var t="",n=[];return Object(O.isEmpty)(e)?"-":(e.map((function(e){Object(O.isEmpty)(t)&&(t=e.name),n.push(Object(r.createElement)("span",{key:e.id},e.name))})),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},!Object(O.isEmpty)(t)&&t,!Object(O.isEmpty)(n)&&n.length>1&&Object(r.createElement)(I.a,{items:n}))))},U=[{id:1,email:"johndoe@gmail.com",f_name:"John",l_name:"Doe",creation_date:B()().format(),lists:[{id:"1",name:"List1"},{id:"2",name:"List2"}],tags:[{id:"1",name:"Tag1"},{id:"2",name:"Tag2"}],country:"US",state:"Washington DC",contact_no:"1234567890",fields:{marketing_status:"1"},wc:{id:1,l_order_date:B()().format(),total_order_count:5,total_order_value:100,total_purchased_items:10}}].map((function(e){return[{display:Object(r.createElement)(c.CheckboxControl,{checked:!1,onChange:function(){return u(!0)}}),value:null},{display:D(e),value:null},{display:g(e),value:Object(i.zb)([e.f_name,e.l_name]," ")},{display:v(e),value:Object(o.__)("Email: "+e.email+", Phone: "+e.contact_no,"wp-marketing-automations")},{display:w(e),value:j(e)},{display:F(e.tags),value:e.tags},{display:F(e.lists),value:e.lists},{display:y(e),value:""},{display:A(e),value:""}]})),G=[{key:"select_contact",label:Object(r.createElement)(c.CheckboxControl,{checked:!1,onChange:function(){return u(!0)}}),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"contact",label:Object(o.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-300"},{key:"contact_details",label:Object(o.__)("Details","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"},{key:"column_location",label:Object(o.__)("Country","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"tags",label:Object(o.__)("Tags","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"lists",label:Object(o.__)("Lists","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"total_spent",label:Object(o.__)("Total Spent","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"last_order",label:Object(o.__)("Last Order Date","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"}],W=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(M.a,{icon:"zero-contacts",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(o.__)("No Contacts","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(o.__)("Add contacts and get actionable insights about every contact to revv up your campaigns.","wp-marketing-automations")}},{type:"actions",data:{count:"2",actions:[{icon:Object(r.createElement)(M.a,{icon:"add-contact",width:"36",height:"36"}),heading:Object(o.__)("Add a Contact","wp-marketing-automations"),sub_heading:Object(o.__)("Create a new contact manually","wp-marketing-automations"),onClick:function(){u(!0)}},{icon:Object(r.createElement)(M.a,{icon:"contacts",width:"36",height:"36"}),heading:Object(o.__)("View Sample Contact","wp-marketing-automations"),sub_heading:Object(o.__)("Experience contact list and single contact page with dummy data.","wp-marketing-automations"),onClick:function(){return f(!0)},isDummy:!0}]}}],H=Object(r.createElement)("div",{className:"bwf-display-flex gap-12"},Object(r.createElement)(c.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",title:Object(o.__)("Export","wp-marketing-automations"),onClick:function(){u(!0)}},Object(r.createElement)(M.a,{icon:"export",size:16}),Object(o.__)("Export")),Object(r.createElement)(c.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",title:Object(o.__)("Import","wp-marketing-automations"),onClick:function(){u(!0)}},Object(r.createElement)(M.a,{icon:"import",size:16}),Object(o.__)("Import")));return Object(r.createElement)(r.Fragment,null,b?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.a,null),Object(r.createElement)(E.a,{className:d,rows:U,headers:G,query:{paged:1},rowsPerPage:1,totalRows:1,isLoading:!1,rowHeader:!0,summary:[{label:Object(r.createElement)(r.Fragment,null," contact"),value:Object(r.createElement)("b",null,"1 ")}],actions:[Object(r.createElement)(h,{key:"search",query:e}),Object(r.createElement)(c.SelectControl,{onChange:function(e){"all"===e&&Object(l.k)({page:page},t,{}),setFiltersOpen("filters"===e)},options:[{value:"all",label:Object(o.__)("All Contacts","wp-marketing-automations")}],value:"all"}),Object(r.createElement)(c.Button,{isTertiary:!0,className:"bwf-display-flex",onClick:function(){return u(!0)}},Object(r.createElement)(M.a,{icon:"lock",size:16,color:"#0073aa"}),"Select Audience")],filterColumnIcon:Object(r.createElement)("span",{className:"bwf-cursor-pointer"},Object(r.createElement)(z.a,{icon:"filters",iconSize:20,size:20,toolTipText:Object(r.createElement)("span",{className:"bwfan_tooltip_text bwf-w-60","data-position":"top"},Object(o.__)("Filter","wp-marketing-automations"))})),extraSectionBeforefilterCol:H,emptyMessage:Object(o.__)("No contacts found","wp-marketing-automations")})):Object(r.createElement)(R.a,{data:W}),Object(r.createElement)($.a,{isOpen:s,onRequestClose:function(){return u(!1)}}))}},807:function(e,t,n){"use strict";var r=n(137),a=n(5),c=n(3);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("contacts"),t=e.fetch;return l(l({},s(e,["fetch"])),{},{fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=e.s,p=void 0===f?"":f,d=(e.page,e.filter,e.path,s(e,["s","page","filter","path"])),O={offset:n,limit:r,search:p,filters:d,get_wc:Object(a.yb)(),grab_totals:o,only_count:l,fetch_base:i,grab_custom_fields:!1,exclude_unsubs:u,exclude_unsubs_lists:m},j=Object(a.ab)("table_sort_data"),w=j.hasOwnProperty("contact_sort_data")?j.contact_sort_data:{},g=Object(c.isObject)(w)&&!Object(c.isEmpty)(w)?w:{},v=g.orderby,y=void 0===v?"last_modified":v,h=g.order,E=void 0===h?"desc":h;E&&y&&(O.order=E,O.order_by=y),b&&(O.unopen_broadcast=parseInt(b)),t("GET",Object(a.m)("/contacts"),O)},fetchListing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=e.s,p=void 0===f?"":f,d=(e.page,e.filter,e.path,s(e,["s","page","filter","path"])),O={offset:n,limit:r,search:p,filters:d,get_wc:Object(a.yb)(),grab_totals:o,only_count:l,fetch_base:i,grab_custom_fields:!1,exclude_unsubs:u,exclude_unsubs_lists:m},j=Object(a.ab)("table_sort_data"),w=j.hasOwnProperty("contact_sort_data")?j.contact_sort_data:{},g=Object(c.isObject)(w)&&!Object(c.isEmpty)(w)?w:{},v=g.orderby,y=void 0===v?"last_modified":v,h=g.order,E=void 0===h?"desc":h;E&&y&&(O.order=E,O.order_by=y),b&&(O.unopen_broadcast=parseInt(b)),t("GET",Object(a.m)("/contacts/listing"),O)},startIndexing:function(){return t("GET",Object(a.m)("/contacts"),{start_indexing:!0})}})}},814:function(e,t,n){"use strict";var r=n(0),a=n(27),c=n(2),o=n(140);t.a=function(e){var t=e.selected,n=e.onTagsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add Tags","wp-marketing-automations")),Object(r.createElement)(a.a,{autocompleter:o.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e,r){var a=t.filter((function(t){return!(t.key==e&&t.label==r)}));n(a)},placeholder:Object(c.__)("Search by tag name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},816:function(e,t,n){"use strict";var r=n(136);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("contacts"),t=e.getStateProp;return c(c({},l(e,["getStateProp"])),{},{getContacts:function(){return t("contacts_list")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getTotalCount:function(){return parseInt(t("total"))},getCountData:function(){return t("countData")}})}},821:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);var a=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}},823:function(e,t,n){"use strict";var r=n(0),a=n(27),c=n(2),o=n(140);t.a=function(e){var t=e.selected,n=e.onListsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add to Lists","wp-marketing-automations")),Object(r.createElement)(a.a,{autocompleter:o.a,multiple:!1,allowFreeTextSearch:!0,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e){var r=t.filter((function(t){return t.key!=e}));n(r)},placeholder:Object(c.__)("Search by list name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},856:function(e,t,n){"use strict";var r=n(0),a=(n(882),n(5)),c=n(822),o=n(829),l=n(144),i=n(2),s=n(4);t.a=function(e){var t=e.isOpen,n=void 0!==t&&t,u=e.query,m=Object(c.a)();return n&&!0===m?Object(r.createElement)(s.Spinner,null):n&&!!m&&Object(r.createElement)(l.a,{siteLocale:"en-US",currency:Object(a.yb)()?bwfcrm_contacts_data.currency:{},config:{title:Object(i.__)("Select Rules","wp-marketing-automations"),filters:m,footerComponent:function(e){return Object(r.createElement)(o.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:u})}},857:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(54),a={"am-AM":/^(\+?374|0)((10|[9|7][0-9])\d{6}$|[2-4]\d{7}$)/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)[569]\d{7}$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^(\+49)?0?[1|3]([0|5][0-45-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)(7[5-9])\d{1,7}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"el-GR":/^(\+?30|0)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28)\d{7}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PK":/^((\+92)|(0092))-{0,1}\d{3}-{0,1}\d{7}$|^\d{11}$|^\d{4}-\d{7}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[689]\d{7}$/,"en-SL":/^(?:0|94|\+94)?(7(0|1|2|5|6|7|8)( |-)?\d)\d{6}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?([1-8]{1}|3[0-9]{2})?[2-9]{1}\d{6}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5|6)?|50)\s?(\d\s?){4,8}\d$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36)(20|30|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(5|79)\d{7}$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"ms-MY":/^(\+?6?01){1}(([0145]{1}(\-|\s)?\d{7,8})|([236789]{1}(\s|\-)?\d{7}))$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4?\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[2-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ro-RO":/^(\+?4?0)\s?7\d{2}(\/|\s|\.|\-)?\d{3}(\s|\.|\-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^(\+?84|0)((3([2-9]))|(5([2689]))|(7([0|6-9]))|(8([1-6|89]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?1([3568][0-9]|4[579]|6[67]|7[01235678]|9[012356789])[0-9]{8}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/};function c(e,t,n){if(Object(r.a)(e),n&&n.strictMode&&!e.startsWith("+"))return!1;if(Array.isArray(t))return t.some((function(t){if(a.hasOwnProperty(t)&&a[t].test(e))return!0;return!1}));if(t in a)return a[t].test(e);if(!t||"any"===t){for(var c in a){if(a.hasOwnProperty(c))if(a[c].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))}a["en-CA"]=a["en-US"],a["fr-CA"]=a["en-CA"],a["fr-BE"]=a["nl-BE"],a["zh-HK"]=a["en-HK"],a["zh-MO"]=a["en-MO"],a["ga-IE"]=a["en-IE"];Object.keys(a)},858:function(e,t,n){},881:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(0),a=n(4),c=n(2),o=n(3),l=n(814),i=n(823),s=n(16),u=n(67),m=n(8);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e){var t=e.headersData,n=e.onRequestImport,b=e.submitButtonText,O=e.secondaryButtonText,j=e.onSecondaryButtonClick,w=e.savedData,g=e.buttonAlignClass,v=e.backButtonText,y=e.backButtonClick,h=e.extra,E=e.isSubmitButtonBusy,_=e.sourceHeaderText,k=void 0===_?Object(c.__)("Columns To Import","wp-marketing-automations"):_,N=e.contactHeaderText,S=void 0===N?Object(c.__)("Map Into Field","wp-marketing-automations"):N,C=e.updateExistingText,x=void 0===C?Object(c.__)("Update Existing Contacts","wp-marketing-automations"):C,P=e.secondaryClass,I=void 0===P?"":P,A=t.headers,T=t.fields,D=d(Object(r.useState)(w&&w.mapped_fields?function(e,t){if(!e)return{};var n={},r=function(r){t.find((function(e){return e.index.toString()===r}))&&(n[r]=e[r])};for(var a in e)r(a);return n}(w.mapped_fields,A):{}),2),L=D[0],F=D[1],B=d(Object(r.useState)(0),2),$=B[0],M=B[1],R=w&&w.tags?w.tags.map((function(e){return{key:e.id,label:e.value}})):[],z=w&&w.lists?w.lists.map((function(e){return{key:e.id,label:e.value}})):[],q=d(Object(r.useState)(R),2),U=q[0],V=q[1],G=d(Object(r.useState)(z),2),W=G[0],H=G[1],K=d(Object(r.useState)(!(!w||!("update_existing"in w))&&w.update_existing),2),Y=K[0],Q=K[1],Z=d(Object(r.useState)(!w||!("update_blank"in w)||w.update_blank),2),J=Z[0],X=Z[1],ee=d(Object(r.useState)(!w||!("marketing_status"in w)||w.marketing_status),2),te=ee[0],ne=(ee[1],d(Object(r.useState)(!(!w||!("trigger_events"in w))&&w.trigger_events),2)),re=ne[0],ae=ne[1],ce=d(Object(r.useState)(null),2),oe=ce[0],le=ce[1],ie=(h||{}).disableMarketingStatusCheck,se=void 0!==ie&&ie,ue=function(){return le(null),0===Object(o.size)(L)?(setTimeout((function(){return le(Object(c.__)("Select the contact fields.","wp-marketing-automations"))}),500),!1):!!Object.values(L).includes("email")||(setTimeout((function(){return le(Object(c.__)("Map contact email with a form field.","wp-marketing-automations"))}),500),!1)},me=function(){if(ue()){var e={};A.map((function(t){t.index in L&&(e[t.index]=L[t.index])}));var t={map:e,tags:U.map((function(e){return{id:e.key,value:e.label}})),lists:W.map((function(e){return{id:e.key,value:e.label}})),update_existing:Y,trigger_events:re,imported_contact_status:$,dont_update_blank:J};!se&&(t.marketing_status=te),n(t)}},be=function(){if(ue()){var e={};A.map((function(t){t.index in L&&(e[t.index]=L[t.index])}));var t={map:e,tags:U.map((function(e){return{id:e.key,value:e.label}})),lists:W.map((function(e){return{id:e.key,value:e.label}})),update_existing:Y,trigger_events:re};!se&&(t.marketing_status=te),j(t)}};if(!Object(o.isArray)(T)||!T.length>0)return Object(r.createElement)(a.Notice,{status:"error"},Object(c.__)("No contact fields found","wp-marketing-automations"));if(!Object(o.isArray)(A)||!A.length>0)return Object(r.createElement)(a.Notice,{status:"error"},Object(c.__)("No mapping fields found"));var fe={0:Object(c.__)("Unverified","wp-marketing-automations"),1:Object(c.__)("Subscribed","wp-marketing-automations"),2:Object(c.__)("Bounced","wp-marketing-automations"),3:Object(c.__)("Unsubscribed","wp-marketing-automations")};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-c-import-mapper-fields bwf-card-wrap bwf-form-fields bwf-crm-importer-csv-wrap"},Object(r.createElement)("div",{className:"bwf-card-header"},Object(r.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Mapping","wp-marketing-automations"))),oe&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.a,null),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return le(null)}},oe)),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field",key:"mapper-sel-wrap"},Object(r.createElement)("strong",null,k),Object(r.createElement)("span",null),Object(r.createElement)("strong",null,S)),A.map((function(e,t){return Object(r.createElement)("div",{key:t,className:"bwf-c-import-field"},Object(r.createElement)(a.TextControl,{disabled:!0,value:e.header}),Object(r.createElement)("span",{className:"bwf-display-flex"},Object(r.createElement)(m.a,{icon:"mapper"})),Object(r.createElement)("select",{value:e.index in L?L[e.index]:"",onChange:function(t){return function(e,t){var n=t.target.value,r="index"in e?e.index:"";""===n&&r in L?F(Object(o.omit)(L,r)):""!==n&&""!==r&&F(f(f({},L),{},p({},r,n)))}(e,t)},key:"bwf-select-field"},Object(r.createElement)("option",{value:"",key:"default-key"+t},Object(c.__)("Do Not Import This Field","wp-marketing-automations")),T.map((function(e,n){return"fields"in e&&e.fields.length>0&&Object(r.createElement)("optgroup",{key:e.id+"-"+n+"-"+t,label:e.name},e.fields.map((function(e){return Object(r.createElement)("option",{key:e.id,value:e.id},e.name)})))}))))}))),Object(r.createElement)("div",{className:"bwf-crm-import-section",style:{border:0}},Object(r.createElement)("div",{className:"bwf-h4"},Object(c.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-import-field",key:"select-tag-list"},Object(r.createElement)(l.a,{onTagsChange:V,selected:U}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(i.a,{onListsChange:H,selected:W})),Object(r.createElement)("div",{className:"bwf_clear_10"}),!se&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-p"},Object(c.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-csv-status-select",onChange:function(e){M(e.target.value)},key:"bwf-select-status",value:$},Object.keys(fe).map((function(e){return Object(r.createElement)("option",{key:e,value:e},fe[e])})))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:x,checked:Y,className:"bwf-tooglecontrol-advance",onChange:Q})),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:Object(c.__)("Don't Update Blank Values","wp-marketing-automations"),checked:J,className:"bwf-tooglecontrol-advance",onChange:X})),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:Object(c.__)("Trigger Automations (For Tag & List Related Events)","wp-marketing-automations"),checked:re,className:"bwf-tooglecontrol-advance",onChange:ae}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-pt-0"},g?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.a,null,!!v&&Object(r.createElement)(s.b,null,Object(r.createElement)(a.Button,{isSecondary:!0,onClick:y,className:I},v)),Object(r.createElement)(s.b,{className:g},Object(r.createElement)(a.Button,{onClick:me,isBusy:!!E,disabled:!!E,isPrimary:!0},Object(r.createElement)("span",null,b||Object(c.__)("Import","wp-marketing-automations"))),O&&Object(r.createElement)(a.Button,{onClick:be,className:"bwf-ml-10",isSecondary:!0},O)))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Button,{onClick:me,isPrimary:!0,isBusy:!!E,disabled:!!E,className:"bwf-display-flex"},Object(r.createElement)("span",null,b||Object(c.__)("Import","wp-marketing-automations"))),O&&Object(r.createElement)(a.Button,{onClick:be,className:"bwf-ml-10",isSecondary:!0},O)))))}},882:function(e,t,n){},943:function(e,t,n){},944:function(e,t,n){},945:function(e,t,n){},946:function(e,t,n){},947:function(e,t,n){},948:function(e,t,n){}}]);