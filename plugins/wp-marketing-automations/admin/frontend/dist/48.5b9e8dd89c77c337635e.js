(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1128:function(e,t,a){},1129:function(e,t,a){},1139:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(2),r=a(248),s=a(279),l=function(){return Object(c.createElement)(c.Fragment,null,Object(c.createElement)("section",{className:"bwf-crm-card",key:"1"},Object(c.createElement)("div",{className:"bwf-crm-card-l"},Object(c.createElement)("div",{className:"bwf-crm-card-title"},Object(c.createElement)("span",{className:"bwf-crm-status is-preview"})," ",Object(c.createElement)("span",{className:"is-placeholder"})),Object(c.createElement)("div",{className:"bwf-crm-card-subtitle"},Object(c.createElement)("span",{className:"is-placeholder long"})))),Object(c.createElement)("section",{className:"bwf-crm-card",key:"2"},Object(c.createElement)("div",{className:"bwf-crm-card-l"},Object(c.createElement)("div",{className:"bwf-crm-card-title"},Object(c.createElement)("span",{className:"bwf-crm-status is-preview"})," ",Object(c.createElement)("span",{className:"is-placeholder"})),Object(c.createElement)("div",{className:"bwf-crm-card-subtitle"},Object(c.createElement)("span",{className:"is-placeholder long"})))))},m=a(5),i=a(4),b=a(68),o=a(10),u=a.n(o),f=a(3);function d(e,t,a,c,n,r,s){try{var l=e[r](s),m=l.value}catch(e){return void a(e)}l.done?t(m):Promise.resolve(m).then(c,n)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],c=!0,n=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(c=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);c=!0);}catch(e){n=!0,r=e}finally{try{c||null==l.return||l.return()}finally{if(n)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,c=new Array(t);a<t;a++)c[a]=e[a];return c}var p=Object(b.a)(Object(m.Y)()).formatAmount,w=function(e){var t=e.contact,a=e.campaignId,r=O(Object(c.useState)(!0),2),s=r[0],i=r[1],b=O(Object(c.useState)([]),2),o=b[0],j=b[1],w=function(){var e,c=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u()({method:"GET",path:Object(m.m)("/broadcasts/".concat(a,"/recipients/").concat(t.conversation_id,"/timeline"))}).then((function(e){200==e.code&&e.hasOwnProperty("result")&&!Object(f.isEmpty)(e.result)?j(e.result):j([]),i(!1)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i(!1);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,a=arguments;return new Promise((function(c,n){var r=e.apply(t,a);function s(e){d(r,c,n,s,l,"next",e)}function l(e){d(r,c,n,s,l,"throw",e)}s(void 0)}))});return function(){return c.apply(this,arguments)}}();Object(c.useEffect)((function(){i(!0),Object(f.isEmpty)(t.conversation_id)||w()}),[t]);return s?Object(c.createElement)(l,null):Object(c.createElement)(c.Fragment,null,Object(f.isEmpty)(o)?Object(c.createElement)("p",null,Object(n.__)("No timeline found","wp-marketing-automations")):o.map((function(e){switch(e.type){case"conversion":return function(e){return Object(c.createElement)("section",{className:"bwf-crm-card",key:"orderConversion"},Object(c.createElement)("div",{className:"bwf-crm-card-l",key:"1"},Object(c.createElement)("div",{className:"bwf-crm-card-title"},Object(c.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(c.createElement)("span",null,Object(n.__)("Converted","wp-marketing-automations"),Object(c.createElement)("a",{href:"post.php?post="+e.order_id+"&action=edit"},Object(n.__)("Order","wp-marketing-automations")+" #"+e.order_id))),Object(c.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(m.N)(e.date,!0)},Object(m.Q)(e.date).fromNow())),Object(c.createElement)("div",{className:"bwf-crm-card-r",key:"2"},Object(c.createElement)("div",{className:"bwf-crm-card-date"},p(parseFloat(e.revenue)))))}(e);case"open":return function(e){return Object(c.createElement)("section",{className:"bwf-crm-card",key:"openConversion"},Object(c.createElement)("div",{className:"bwf-crm-card-l"},Object(c.createElement)("div",{className:"bwf-crm-card-title"},Object(c.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(c.createElement)("span",null,Object(n.__)("Opened","wp-marketing-automations"))),Object(c.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(m.N)(e.date,!0)},Object(m.Q)(e.date).fromNow())))}(e);case"click":return function(e){return Object(c.createElement)("section",{className:"bwf-crm-card",key:"clickConversion"},Object(c.createElement)("div",{className:"bwf-crm-card-l"},Object(c.createElement)("div",{className:"bwf-crm-card-title"},Object(c.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(c.createElement)("span",null,Object(n.__)("Clicked","wp-marketing-automations"))),Object(c.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(m.N)(e.date,!0)},Object(m.Q)(e.date).fromNow())))}(e);case"failed":return function(e){return Object(c.createElement)("section",{className:"bwf-crm-card",key:"failedConversion"},Object(c.createElement)("div",{className:"bwf-crm-card-l"},Object(c.createElement)("div",{className:"bwf-crm-card-title"},Object(c.createElement)("span",{className:"bwf-crm-status bwf-crm-status-failed"}),Object(c.createElement)("span",null,Object(n.__)("Failed","wp-marketing-automations"))),e.hasOwnProperty("err_message")&&!Object(f.isEmpty)(e.err_message)&&Object(c.createElement)("div",{className:"bwf-crm-card-title bwf-ml-20"},e.err_message),Object(c.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(m.N)(e.date,!0)},Object(m.Q)(e.date).fromNow())))}(e);case"sent":return function(e){return Object(c.createElement)("section",{className:"bwf-crm-card",key:"sentConversion"},Object(c.createElement)("div",{className:"bwf-crm-card-l"},Object(c.createElement)("div",{className:"bwf-crm-card-title"},Object(c.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(c.createElement)("span",null,Object(n.__)("Sent","wp-marketing-automations"))),Object(c.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(m.N)(e.date,!0)},Object(m.Q)(e.date).fromNow())))}(e)}})))},v=(a(1128),a(146)),E=a(169),N=a.n(E),y=a(15),_=Object(b.a)(Object(m.Y)()).formatAmount,g=function(e){var t=e.isOpen,a=e.campaignId,r=e.onRequestClose,l=e.contact;return Object(c.createElement)(s.a,{size:400,isOpen:t,onRequestClose:r},Object(c.createElement)("div",{className:"bwf-crm-body"},Object(c.createElement)("div",{className:"bwf-crm-details"},Object(c.createElement)("div",{className:"bwf-crm-d-head bwf-crm-gap-border"},Object(c.createElement)("div",{className:"bwf-gravatar-wrapper"},l.send_to&&Object(c.createElement)(v.a,{user:l.send_to,size:60}),Object(c.createElement)("div",{className:"bwf-crm-gravatar"},Object(c.createElement)("span",null,Object(f.isEmpty)(N()(l.f_name+" "+l.l_name))?"-":Object(m.R)(l.f_name,l.l_name)))),Object(c.createElement)("div",{className:"bwf-crm-name"},l&&l.f_name&&l.l_name&&l.f_name.charAt(0).toUpperCase()+l.f_name.slice(1)+" "+(l.l_name.charAt(0).toUpperCase()+l.l_name.slice(1))),Object(c.createElement)("div",{className:"bwf-crm-email"},l.send_to),Object(c.createElement)("div",{className:"bwf-t-center bwf-pt-15"},Object(c.createElement)(i.Button,{isSecondary:!0,className:"bwf-btn-small",onClick:function(){Object(y.k)({page:"autonami",path:"/contact/".concat(l.cid)},"/",{})}},Object(n.__)("View Contact","wp-marketing-automations")))),Object(c.createElement)("div",{className:"bwf-crm-d-data bwf-crm-gap-border"},Object(c.createElement)("div",{className:"bwf-crm-head"},Object(n.__)("Details","wp-marketing-automations")),Object(c.createElement)("div",{className:"bwf-crm-col2",key:1},Object(c.createElement)("div",{className:"bwf-crm-list",key:1},Object(c.createElement)("div",{className:"bwf-crm-label"},Object(n.__)("Sent","wp-marketing-automations")),Object(c.createElement)("div",{className:"bwf-crm-value"},Object(m.N)(l.sent_time))),l.is_unsubscribe&&!Object(f.isEmpty)(l.unsubscribe)&&Object(c.createElement)("div",{className:"bwf-crm-list",key:2},Object(c.createElement)("div",{className:"bwf-crm-label"},Object(n.__)("Unsubscribe","wp-marketing-automations")),Object(c.createElement)("div",{className:"bwf-crm-value"},Object(m.N)(l.unsubscribe)))),Object(c.createElement)("div",{className:"bwf-crm-col2",key:3},Object(c.createElement)("div",{className:"bwf-crm-list",key:2},Object(c.createElement)("div",{className:"bwf-crm-label"},Object(n.__)("Total Click","wp-marketing-automations")),Object(c.createElement)("div",{className:"bwf-crm-value"},l.click&&parseInt(l.click))),Object(c.createElement)("div",{className:"bwf-crm-list",key:1},Object(c.createElement)("div",{className:"bwf-crm-label"},Object(n.__)("Total Open","wp-marketing-automations")),Object(c.createElement)("div",{className:"bwf-crm-value"},l.open&&parseInt(l.open)))),Object(c.createElement)("div",{className:"bwf-crm-col2",key:4},Object(c.createElement)("div",{className:"bwf-crm-list",key:1},Object(c.createElement)("div",{className:"bwf-crm-label"},Object(n.__)("Is Converted","wp-marketing-automations")),Object(c.createElement)("div",{className:"bwf-crm-value"},parseInt(l.conversions)>0?Object(n.__)("Yes","wp-marketing-automations"):Object(n.__)("No","wp-marketing-automations"))),Object(c.createElement)("div",{className:"bwf-crm-list",key:2},Object(c.createElement)("div",{className:"bwf-crm-label"},Object(n.__)("Total Revenue","wp-marketing-automations")),Object(c.createElement)("div",{className:"bwf-crm-value"},_(parseInt(l.revenue))))))),Object(c.createElement)("div",{className:"bwf-crm-timeline"},Object(c.createElement)("div",{className:"bwf-crm-head"},Object(n.__)("Timeline","wp-marketing-automations")),Object(c.createElement)(w,{contact:l,campaignId:a}))))},k=a(250),h=a(16),C=a(38),I=a(805),S=a(796),A=(a(1129),a(824)),R=a(67),T=a(8);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],c=!0,n=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(c=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);c=!0);}catch(e){n=!0,r=e}finally{try{c||null==l.return||l.return()}finally{if(n)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,c=new Array(t);a<t;a++)c[a]=e[a];return c}t.default=function(e){var t=e.campaignId,a=e.campaignType,s=S.a.getCampaignData(),l=(s||{}).type,i=x(Object(c.useState)(!1),2),o=i[0],u=i[1],f=x(Object(c.useState)({}),2),d=f[0],O=f[1],j=S.a.getRecipientData(),p=S.a.getRecipientLoading(),w=S.a.getRecipientLimit(),v=S.a.getRecipientOffset(),E=S.a.getRecipientTotal(),N=Object(I.a)(),y=N.fetchRecipient,_=N.setRecipientsValues,P=Object(b.a)(Object(m.Y)()).formatAmount;Object(A.a)("recipient","",!0,!0,!1,a),Object(c.useEffect)((function(){y(t,w,v)}),[w,v]);var F=[{key:"contact",label:Object(n.__)("Contact","wp-marketing-automations"),required:!0,cellClassName:"bwf-crm-col-contact"},{key:"contact_details",label:Object(n.__)("Details","wp-marketing-automations"),cellClassName:"bwf-crm-col-contact-details"},{key:"sent",label:Object(n.__)("Sent","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center"},1===parseInt(l)?{key:"open",label:Object(n.__)("Open","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center"}:{},{key:"click",label:Object(n.__)("Click","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center"},{key:"unsubscribe",label:Object(n.__)("Unsubscribe","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center"},Object(m.yb)()?{key:"converted",label:Object(n.__)("Converted","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center"}:{},Object(m.yb)()?{key:"revenue",label:Object(n.__)("Revenue","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m"}:{}],Q=S.a.getRecipientPage(),U=function(e){e!==w&&(_("limit",e),_("offset",0))},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="";switch(e){case"null":case null:a="";break;case!0:case"yes":a=t?" bwf-crm-status-failed":" bwf-crm-status-success";break;case!1:case"no":a=t?" bwf-crm-status-success":""}return Object(c.createElement)("div",{className:"bwf-crm-status bwf-crm-status-s"+a})},D=function(e){var t=e;return t.email=e.send_to,Object(c.createElement)("div",{onClick:function(){return function(e){O(e),u(!0)}(e)}},Object(c.createElement)(k.a,{contact:t,dateText:Object(n.__)("Sent","wp-marketing-automations"),date:e.sent_time}))},M=function(e){return Object(c.createElement)("div",{className:"bwf-crm-contact-details-cell"},e.send_to?Object(c.createElement)(h.a,{justify:"start"},Object(c.createElement)(h.c,null,Object(c.createElement)(T.a,{icon:"mail"})),Object(c.createElement)(h.c,null,0!=e.cid?Object(c.createElement)(C.a,{className:"bwf-a-no-underline",href:"mailto:"+e.send_to,type:"external"},e.send_to):e.send_to)):"-")},Y=j.map((function(e){return[{display:D(e),value:e.f_name+" "+e.l_name},{display:M(e),value:e.email},{display:q(!parseInt(e.sent)>0,!0),value:e.sent},1===parseInt(l)?{display:q(parseInt(e.open)>0),value:e.open}:{},{display:q(parseInt(e.click)>0),value:e.click},{display:q(0!=parseInt(e.unsubscribed)||null,!0),value:e.unsubscribe},Object(m.yb)()?{display:q(parseInt(e.conversions)>0),value:e.is_converted}:{},Object(m.yb)()?{display:P(parseFloat(e.revenue)),value:e.revenue}:{}]}));return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(R.a,null),Object(c.createElement)(r.a,{className:"bwf-crm-campaign-report-recipients",rows:Y,headers:F,query:{paged:Q},rowsPerPage:w,totalRows:E,isLoading:p,onPageChange:function(e,t){_("offset",(e-1)*w)},onQueryChange:function(e){return"per_page"!==e?function(){}:U},emptyMessage:Object(n.__)("No engagements found","wp-marketing-automations"),rowHeader:!0,showMenu:!1,hideHeader:"yes"}),Object(c.createElement)(g,{funnelId:1,contact:d,size:400,campaignId:parseInt(t),isOpen:o,onRequestClose:function(){return u(!1)}}))}}}]);