!function(){var e={184:function(e,t){var l;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var l=arguments[t];if(l){var n=typeof l;if("string"===n||"number"===n)e.push(l);else if(Array.isArray(l)){if(l.length){var s=a.apply(null,l);s&&e.push(s)}}else if("object"===n){if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]")){e.push(l.toString());continue}for(var i in l)r.call(l,i)&&l[i]&&e.push(i)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(l=function(){return a}.apply(t,[]))||(e.exports=l)}()}},t={};function l(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,l),n.exports}l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.d=function(e,t){for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.blocks,t=window.wp.element,r=l(184),a=l.n(r),n=window.wp.i18n,s=window.wp.blockEditor,i=window.wp.coreData,o=window.wp.data,c=window.wp.components,u=window.wp.primitives,m=(0,t.createElement)(u.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(u.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})),d=(0,t.createElement)(u.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(u.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));function p(e){const{meta:l,setMeta:r,attributes:a={},setAttributes:s}=e,{userschoice:i,lists:u}=l,{showLabel:p=!1,label:h=""}=a,b=(0,o.useSelect)((e=>e("mailster/form").getLists()));function f(e,t){var l=[...u];t?l.push(e):l=l.filter((t=>t!=e)),r({lists:l})}function w(e,t){var l=[...u],a=l[e];l.splice(e,1),l.splice(e+t,0,a),r({lists:l})}const k=b?b.filter((e=>!u.includes(e.ID))):[];return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.CheckboxControl,{label:(0,n.__)("Users Choice","mailster"),checked:!!l.userschoice,onChange:()=>r({userschoice:!l.userschoice}),help:(0,n.__)("Users decide which list they subscribe to","mailster")})),!b&&(0,t.createElement)(c.Spinner,null),b&&u.length>0&&(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.BaseControl,{id:"mailster-values",className:"widefat",label:i?(0,n.__)("Users can subscribe to","mailster"):(0,n.__)("Subscribe new users to","mailster")},(0,t.createElement)(c.Flex,{className:"mailster-value-options",justify:"flex-end",id:"mailster-values",style:{flexWrap:"wrap"}},u.map(((e,l)=>{const r=(e=>{const t=b.filter((t=>t.ID==e));return t.length?t[0]:null})(e);return r&&((e,l)=>(0,t.createElement)(c.Flex,{key:l,style:{flexShrink:0}},(0,t.createElement)(c.FlexItem,null,(0,t.createElement)(c.CheckboxControl,{checked:!0,value:e.ID,onChange:t=>{f(e.ID,t)},label:e.name})),u.length>1&&(0,t.createElement)(c.FlexItem,null,(0,t.createElement)(c.Button,{disabled:!l,icon:m,isSmall:!0,label:(0,n.__)("move up","mailster"),onClick:()=>{w(l,-1)}}),(0,t.createElement)(c.Button,{disabled:l+1==u.length,icon:d,isSmall:!0,label:(0,n.__)("move down","mailster"),onClick:()=>{w(l,1)}}))))(r,l)}))))),k.length>0&&(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.BaseControl,{id:"mailster-values",className:"widefat",label:(0,n.__)("Available Lists","mailster")},(0,t.createElement)(c.Flex,{className:"mailster-value-options",justify:"flex-end",id:"mailster-values",style:{flexWrap:"wrap"}},k.map(((e,l)=>(0,t.createElement)(c.Flex,{key:l,style:{flexShrink:0}},(0,t.createElement)(c.FlexItem,null,(0,t.createElement)(c.CheckboxControl,{checked:u.includes(e.ID),value:e.ID,onChange:t=>{f(e.ID,t)},label:e.name})))))))),l.userschoice&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.CheckboxControl,{label:(0,n.__)("Show Label","mailster"),checked:p,onChange:()=>s({showLabel:!p})})),(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.TextControl,{className:"widefat",value:h,onChange:e=>s({label:e}),help:(0,n.__)("If the label is hidden it will be used for screen readers.","mailster")}))),l.userschoice&&u.length>0&&(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.Tip,null,(0,n.__)("You can update the list names and the precheck status in the editor.","mailster"))))}function h(e){return(0,t.createElement)(s.InspectorControls,null,(0,t.createElement)(c.Panel,null,(0,t.createElement)(c.PanelBody,{title:(0,n.__)("List Settings","mailster")},(0,t.createElement)(p,e))))}var b=(0,t.createElement)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(u.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"})),f=(0,t.createElement)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(u.Path,{d:"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z"}));function w(e){const{attributes:l,setAttributes:r}=e,{vertical:a}=l;return(0,t.createElement)(s.BlockControls,{group:"block"},(0,t.createElement)(c.ToolbarButton,{icon:a?b:f,onClick:()=>r({vertical:!a}),label:(0,n.__)("Orientation","mailster")}))}var k=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"mailster/lists","version":"0.4.0","title":"Lists Field","category":"mailster-form-fields","keywords":["container","wrapper","row","section"],"parent":["mailster/form-wrapper","core/column","core/group"],"description":"Adds a List block to your Mailster Block Form","example":{},"supports":{"html":false,"reusable":false,"multiple":false,"inserter":false,"spacing":{"margin":true,"padding":true},"color":true},"attributes":{"lock":{"type":"object","default":{"remove":true}},"vertical":{"type":"boolean","default":false},"id":{"type":"string","source":"attribute","selector":"input","attribute":"id"},"showLabel":{"type":"boolean","default":false},"label":{"type":"string","source":"html","selector":"legend"},"lists":{"type":"array","source":"query","selector":"input","default":[],"query":{"id":{"type":"integer","source":"attribute","attribute":"value"},"name":{"type":"string","source":"attribute","attribute":"aria-label"},"checked":{"type":"boolean","source":"attribute","attribute":"checked"}}}},"textdomain":"mailster","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),v=(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)("path",{d:"M0,0H24V24H0Z",fill:"none"}),(0,t.createElement)("path",{d:"M12,12h8",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("path",{d:"M12,19h8",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("path",{d:"M12,5h8",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("line",{x1:"4.5",y1:"3.5",x2:"7.5",y2:"6.5",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("line",{x1:"7.5",y1:"3.5",x2:"4.5",y2:"6.5",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("path",{d:"M6.5,12.00063A.5.5,0,1,1,5.99937,11.5.5.5,0,0,1,6.5,12.00063",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("path",{d:"M6.5,19.00063A.5.5,0,1,1,5.99937,18.5.5.5,0,0,1,6.5,19.00063",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}));const{name:E,...g}=k;(0,e.registerBlockType)(E,{...g,icon:v,edit:function(e){const{attributes:l,setAttributes:r,isSelected:c,clientId:u}=e,{lists:m,vertical:d,showLabel:p,label:b}=l,f=["mailster-wrapper mailster-wrapper-_lists"],[k,v]=(0,i.useEntityProp)("postType","mailster-form","meta");d&&f.push("mailster-wrapper-is-vertical"),p&&f.push("mailster-show-label");const E=(0,s.useBlockProps)({className:a()({},f)}),g=(0,o.useSelect)((e=>e("mailster/form").getLists()),[]),x=(e,t)=>{(t||JSON.stringify(m)!==JSON.stringify(e))&&r({lists:e})};(0,t.useEffect)((()=>{if(k.lists&&g){var e=k.lists.map((e=>({id:e.toString(),name:y(e).name,checked:!!y(e).checked})));x(e)}}),[k.lists]),(0,t.useEffect)((()=>{l.id||r({id:"mailster-id-"+u.substring(30)})}));const y=e=>{const t=m.find((t=>t.id==e));return t||g.find((t=>t.ID==e))};return(0,t.createElement)("div",E,(0,t.createElement)("fieldset",null,(0,t.createElement)(s.RichText,{tagName:"legend",value:b||(0,n.__)("Lists","mailster"),onChange:e=>r({label:e}),placeholder:(0,n.__)("Enter Label","mailster")}),m.map(((e,l)=>(0,t.createElement)("div",{key:l,className:"mailster-group mailster-group-checkbox"},(0,t.createElement)("input",{type:"checkbox",value:e.id,checked:e.checked||!1,"aria-label":e.name,onChange:()=>((e,t)=>{var l=[...m];l[t].checked=e,x(l,!0)})(!e.checked,l)}),(0,t.createElement)(s.RichText,{tagName:"label",value:e.name,onChange:e=>((e,t)=>{var l=[...m];l[t].name=e,x(l,!0)})(e,l),allowedFormats:[],className:"mailster-label",placeholder:(0,n.__)("Enter Label","mailster")})))),!m.length&&(0,t.createElement)("i",null,(0,n.__)("Please select at least one list or disable user choice.","mailster"))),(0,t.createElement)(w,e),(0,t.createElement)(h,{meta:k,setMeta:v,attributes:l,setAttributes:r}))},save:function(e){const{attributes:l,setAttributes:r,isSelected:i}=e,{lists:o,vertical:c,showLabel:u,label:m}=l,d=["mailster-wrapper mailster-wrapper-_lists"];c&&d.push("mailster-wrapper-is-vertical"),u&&d.push("mailster-show-label");const p=s.useBlockProps.save({className:a()({},d)});return(0,t.createElement)("div",p,(0,t.createElement)("fieldset",null,(0,t.createElement)(s.RichText.Content,{tagName:"legend",value:m||(0,n.__)("Lists","mailster")}),o.map(((e,r)=>{const a=l.id+(r?"-"+r:"");return(0,t.createElement)("div",{key:r,className:"mailster-group mailster-group-checkbox"},(0,t.createElement)("input",{type:"checkbox",name:"_lists[]",id:a,value:e.id,checked:e.checked,"aria-label":e.name}),(0,t.createElement)(s.RichText.Content,{tagName:"label",htmlFor:a,value:e.name,className:"mailster-label"}))}))))}})}()}();