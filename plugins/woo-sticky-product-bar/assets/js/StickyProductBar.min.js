var WCStickyProductBar=function(){function t(t){this.settings=t,this.isMobile=!1,this.location="bottom","yes"==this.settings.isMobile&&(this.isMobile=!0)}return t.prototype.isEnabled=function(){var t=!1;return this.isMobile||/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?"yes"==this.settings.enableMobile&&(t=!0,this.isMobile=!0,this.location=this.settings.locationMobile):"yes"==this.settings.enableDesktop&&(t=!0,this.location=this.settings.locationDesktop),t},t.prototype.activateRating=function(){jQuery("."+this.settings.id+" .rateyo").rateYo();var t=jQuery("."+this.settings.id+" .rateyo.jq-ry-container");t.css("width","auto"),t.css("width",t.width())},t.prototype.show=function(){var t=jQuery("."+this.settings.id);if(!jQuery("body").hasClass(this.settings.id+"-displayed")){this.isMobile?t.addClass("mobile"):t.addClass("desktop"),jQuery("body").addClass(this.settings.id+"-displayed");var e=t.outerHeight();if("top"==this.location){var o=0;jQuery("#wpadminbar").length>0&&(o=jQuery("#wpadminbar").position().top+jQuery("#wpadminbar").outerHeight()),t.css({top:-e,bottom:"auto"}).animate({top:o})}else t.css({top:"auto",bottom:-e}).animate({bottom:0});this.activateRating(),t.trigger("show")}},t.prototype.hide=function(){jQuery("body").removeClass(this.settings.id+"-displayed"),jQuery("."+this.settings.id).trigger("hide")},t.prototype.onUpdateCheckout=function(t,e){0!=jQuery("."+this.settings.id+".checkout-page").length&&jQuery("."+this.settings.id+" .action-button").html(jQuery("#place_order").html())},t.prototype.onCheckoutClick=function(t){if(jQuery("form.checkout [name=terms]").length>0&&!jQuery("form.checkout [name=terms]").prop("checked")){if(!confirm(this.settings.termsQuestions))return;jQuery("."+this.settings.id+" [name=terms]").prop("checked",!0),jQuery("form.checkout [name=terms]").prop("checked",!0)}jQuery("#place_order").click()},t.prototype.onTermsChange=function(t){jQuery("form.checkout [name=terms]").prop("checked",jQuery(t.target).prop("checked"))},t.prototype.onUpdateCartTotal=function(){var t=jQuery(".cart_totals .order-total .woocommerce-Price-amount");t.length>0?jQuery("."+this.settings.id+" .total .woocommerce-Price-amount").html(t.html()):jQuery(".cart-empty").length>0&&jQuery("."+this.settings.id).hide()},t.prototype.getBarPriceElement=function(){return jQuery("."+this.settings.id+" .price")},t.prototype.getProductPriceElement=function(){var t=this.settings.productPriceFilter?this.settings.productPriceFilter:":last",e=jQuery();return this.settings.productPriceSelector&&this.settings.productPriceSelector.length>0&&(e=jQuery(this.settings.productPriceSelector).filter(t)),0==e.length&&(e=jQuery(".summary.entry-summary .price > .amount, .summary.entry-summary .price ins .amount").filter(t)),e},t.prototype.getBarQuantityElement=function(){return jQuery("."+this.settings.id+".product-page input[name=quantity]")},t.prototype.getProductQuantityElement=function(){var t=this.getBarQuantityElement(),e=jQuery();return this.settings.productQuantitySelector&&this.settings.productQuantitySelector.length>0&&(e=jQuery(this.settings.productQuantitySelector).not(t)),0==e.length&&(e=jQuery(".cart input[name=quantity]").not(t)),e},t.prototype.setFromProductPrice=function(){var t=this.getProductPriceElement(),e=this.getBarPriceElement();t.length>0&&t.html()!=e.html()&&e.html(t.html())},t.prototype.setFromProductQuantity=function(){var t=this.getProductQuantityElement(),e=this.getBarQuantityElement();t.length>0&&t.val()!=e.val()&&e.val(t.val())},t.prototype.onProductOptionChange=function(){this.setFromProductPrice(),this.setFromProductQuantity()},t.prototype.onQuantityChange=function(){var t=this.getBarQuantityElement(),e=this.getProductQuantityElement();e.length>0&&e.val()!=t.val()&&e.val(t.val()).change()},t.prototype.onAddToCartClick=function(t){var e=this.getAddToCartButton();return e.filter(".disabled.wc-variation-selection-needed").length>0?this.scrollTo(e):e.click(),!1},t.prototype.onComponentTotalChanged=function(){setTimeout(function(){var t=jQuery(".composite_price ins .woocommerce-Price-amount");t.length>0&&jQuery("."+this.settings.id+".product-page .woocommerce-Price-amount").html(t.html())},100)},t.prototype.showChooseAnOptionButtonText=function(){var t=jQuery("."+this.settings.id+".product-page .action-button");this.settings.textChooseAnOption&&this.settings.textChooseAnOption.length>0&&(t.data("originalText")||t.data("originalText",t.text()),t.text(this.settings.textChooseAnOption))},t.prototype.restoreButtonText=function(){var t=jQuery("."+this.settings.id+".product-page .action-button");t.data("originalText")&&t.text()!=t.data("originalText")&&t.text(t.data("originalText"))},t.prototype.onInit=function(){if("yes"!=this.settings.alwaysVisible){this.toggleVisibility();var t=null,e=this;jQuery(window).on("scroll",function(){clearTimeout(t),t=setTimeout(function(){e.toggleVisibility()},20)})}else this.show()},t.prototype.scrollTo=function(t){var e=t.offset().top;e-=window.innerHeight/2,jQuery("html, body").animate({scrollTop:e},parseInt(this.settings.scrollAnimationDuration)),t.focus()},t.prototype.getAddToCartButton=function(){return jQuery("[name=add-to-cart]:visible, .single_add_to_cart_button:visible").not(".wc-sticky-product-bar button[type=submit]")},t.prototype.toggleVisibility=function(){var t=jQuery("[name=add-to-cart], .single_add_to_cart_button, .checkout-button, .woocommerce-review-order-payment button[type=submit]");0==t.length||this.isElementVisible(t)?this.hide():this.show()},t.prototype.isElementVisible=function(t){t=jQuery(t);var e=jQuery(window).scrollTop(),o=e+window.innerHeight,n=jQuery(t).offset().top,i=n+jQuery(t).height();return e<n&&o>i},t.prototype.getClickEventName=function(){var t="click";return"ontouchend"in document.documentElement&&(t="touchend"),t},t.prototype.register=function(){if(this.isEnabled()){var t=this,e=this.getClickEventName();jQuery(window).on("load",function(){t.onInit()}),jQuery(document).on(e,"."+this.settings.id+".checkout-page .action-button",function(e){return t.onCheckoutClick(e)}),jQuery(document).on(e,"."+this.settings.id+".product-page .action-button",function(e){return t.onAddToCartClick(e)}),jQuery(document).on("change","."+this.settings.id+".checkout-page [name=terms]",function(e){return t.onTermsChange(e)}),jQuery(document).on("change","."+this.settings.id+".product-page input[name=quantity]",function(){return t.onQuantityChange()}),jQuery(document).on("change",".product form.cart :input",function(e){return t.onProductOptionChange(e)}),jQuery(document).on("wc_fragments_refreshed",function(){return t.onUpdateCartTotal()}),jQuery(document).on("updated_shipping_method",function(){return t.onUpdateCartTotal()}),jQuery(document).on("change",'input[name="payment_method"]',function(e){return t.onUpdateCheckout(e)}),jQuery(document).on("updated_checkout",function(e,o){return t.onUpdateCheckout(e,o)}),jQuery(".composite_data").on("wc-composite-initializing",function(e,o){o.actions.add_action("composite_totals_changed",function(){return t.onComponentTotalChanged()},1e3)}),jQuery(document).on("hide_variation",".product form.cart",function(e){return t.showChooseAnOptionButtonText()}),jQuery(document).on("show_variation",".product form.cart",function(e){return t.restoreButtonText()})}},t}();new WCStickyProductBar(WCStickyProductBarSettings).register();