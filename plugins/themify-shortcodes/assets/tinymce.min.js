tinymce.PluginManager.add('themifyMenu',function(a,e){'use strict';function i(o){return{text:o.label,body:{type:o.id},onclick:function(){var e,t,i;jQuery.isEmptyObject(o.fields)?((e={}).selectedContent=a.selection.getContent(),t=wp.template('themify-shortcode-'+o.id),a.insertContent(t(e))):(i=[],jQuery.each(o.fields,function(e,n){if('colorbox'==n.type)n.onaction=function(){var e=a.settings.color_picker_callback;if(e)return function(){var t=this;e.call(a,function(e){t.value(e).fire('change')},t.value())}}();else if('image'==n.type)n={type:'container',label:n.label,layout:'flex',direction:'row',items:[{type:'textbox',name:n.name},{type:'button',text:n.text,onclick:function(){var t=jQuery(this.$el),n=wp.media.frames.file_frame=wp.media({multiple:!1});n.on('select',function(){var e=n.state().get('selection').first().toJSON();t.prev().val(e.url)}),n.open()}}]};else if('iconpicker'==n.type){let e={type:'container',label:n.label,layout:'flex',direction:'row',items:[{type:'textbox',name:n.name}]},t=window.Themify_Icons;(t=document.getElementById("tb_iframe")&&!t?document.getElementById("tb_iframe").contentWindow.Themify_Icons:t)&&e.items.push({type:'button',text:n.text,onclick:function(){var e=jQuery(this.$el);e.hasClass('themify_fa_toggle')||e.addClass('themify_fa_toggle'),t.target=e.prev(),t.showLightbox(t.target.val())}}),n=e}i.push(n)}),a.windowManager.open({title:o.label,body:i,onSubmit:function(e){var t=this.toJSON(),n=(t.selectedContent=a.selection.getContent(),wp.template('themify-shortcode-'+o.id));a.insertContent(n(t))}}))}}}var o=[];jQuery.each(themifyEditor.shortcodes,function(e,t){var n;t.id=e,'object'==typeof t.menu?(n=[],jQuery.each(t.menu,function(e,t){t.id=e,n.push(i(t))}),o.push({text:t.label,menu:n})):o.push(i(t))}),a.addButton('btnthemifyMenu',{type:'menubutton',text:'',image:themifyEditor.editor.icon,tooltip:themifyEditor.editor.menuTooltip,menu:o})});