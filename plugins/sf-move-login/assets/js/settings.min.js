!function(a,b,c,d){"use strict";a.extend(sfml,{ajaxAction:"sfml_sanitize_slug",cache:{},lastCacheKey:"",timeout:{},timeoutDuration:500,dynSlugClass:"dynamic-login-url-slug",dynErrorClass:"dynamic-login-url-slug-error",fields:a(".slug-field"),getElem:function(a){return b.getElementById(a)},getElems:function(a){return b.getElementsByClassName(a)},sanitizeClass:function(a,b){return void 0===b&&(b=" "),a.replace(/^\s+|\s+$/g,"").replace(/\s+/,b)},hasClass:function(a,b){return!!a&&(a instanceof jQuery?a.hasClass(b):a.classList?a.classList.contains(b):(b=sfml.sanitizeClass(b),new RegExp("(^| )"+b+"( |$)","gi").test(a.className)))},addClass:function(b,c){return b instanceof jQuery?(b.addClass(c),b):b?(b instanceof Element&&(b=[b]),a.each(b,function(a,d){d.classList?b[a].classList.add(c):sfml.hasClass(d,c)||(b[a].className=sfml.sanitizeClass(d.className+" "+c))}),b):b},removeClass:function(b,c){return b instanceof jQuery?(b.removeClass(c),b):b?(b instanceof Element&&(b=[b]),a.each(b,function(a,d){d.classList?b[a].classList.remove(c):(c=sfml.sanitizeClass(c,"|"),b[a].className=sfml.sanitizeClass(d.className.replace(new RegExp("(^|\\b)"+c+"(\\b|$)","gi")," ")))}),b):b},text:function(a,b){return a?(a instanceof jQuery?a.text(b):void 0!==a.textContent?a.textContent=b:a.innerText=b,a):a},html:function(a,b){return a?(a instanceof jQuery?a.html(b):a.innerHTML=b,a):a},getActionFromInput:function(a){return a instanceof jQuery?a.attr("id").replace("slugs-",""):a?a.id.replace("slugs-",""):""},updateSlug:function(a,b){var c=sfml.getElem(sfml.dynSlugClass+"-"+a);return sfml.text(c,b)},addError:function(a,b){var c=sfml.getElem(sfml.dynErrorClass+"-"+a);return sfml.lastCacheKey="",sfml.html(c,b)},displayResult:function(b,c){sfml.updateSlug(b,c.slugs["slugs."+b]),a.each(sfml.getElems(sfml.dynErrorClass),function(a,b){var d=b.id.replace(sfml.dynErrorClass+"-","");void 0!==c.errors.forbidden[d]?(sfml.updateSlug(d,c.slugs["slugs."+d]),sfml.html(b,sfml.forbidden.replace("%s","<code>"+c.errors.forbidden[d]+"</code>"))):void 0!==c.errors.duplicates[d]?(sfml.updateSlug(d,c.slugs["slugs."+d]),sfml.text(b,sfml.duplicate)):sfml.text(b,"")})},delay:function(a,b){sfml.resetDelay(b),sfml.timeout[b]=c.setTimeout(a,sfml.timeoutDuration)},resetDelay:function(a){void 0!==sfml.timeout[a]&&(c.clearTimeout(sfml.timeout[a]),sfml.timeout[a]=void 0)},isForbiddenKey:function(b){var c=[13,18,27,37,38,39,40];return"keyup"===b.type&&-1!==a.inArray(b.which,c)},sanitizeSlugs:function(b){var c,d=this,e={},f="";return!sfml.isForbiddenKey(b)&&(sfml.resetDelay(d.id),c=sfml.getActionFromInput(d),a.each(sfml.fields.serializeArray(),function(a,b){var c=b.name.replace(/^sfml\[(.+)\]$/,"$1");f+=c+":"+b.value+"|",e[c]=b.value}),sfml.lastCacheKey=f,void 0!==sfml.cache[f]?(sfml.displayResult(c,sfml.cache[f]),!0):void sfml.delay(function(){var g={action:sfml.ajaxAction,_wpnonce:sfml.nonce,slugs:e};"keyup"===b.type&&sfml.addClass(d,"ui-autocomplete-loading"),a.ajax({type:"POST",dataType:"json",url:ajaxurl,data:g}).done(function(b){return a.isPlainObject(b)?b.success?(void 0===sfml.cache[f]&&(sfml.cache[f]=b.data),void(sfml.lastCacheKey===f&&sfml.displayResult(c,b.data))):void("nonce"===b.data?sfml.addError(c,sfml.errorReload):sfml.addError(c,sfml.error)):void sfml.addError(c,sfml.error)}).fail(function(){sfml.addError(c,sfml.error)}).always(function(){sfml.removeClass(d,"ui-autocomplete-loading")})},d.id))},init:function(){sfml.fields.on("keyup.sfml init.sfml",sfml.sanitizeSlugs).first().trigger("init.sfml")}}),sfml.init()}(jQuery,document,window);