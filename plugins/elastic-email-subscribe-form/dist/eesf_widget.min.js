"use strict";var sendRequestContactAdd=function(e,s,a,i,t){return i?$.post("https://api.elasticemail.com/v2/contact/add?",{publicAccountID:eesf_php_data.publicAccountID,email:s.trim(),activationTemplate:t.trim(),listName:a.replace(/,\s*$/,"")},function(e){e.error?($("#eesf_subscribewidget").fadeOut("slow",function(){$("#ee-error").removeClass("hide")}),console.error(e.error)):!0===JSON.parse(e).success&&$("#eesf_subscribewidget").fadeOut("slow",function(){$("#ee-success").removeClass("hide"),$("#success").fadeIn("slow")})}):i||$.post("https://api.elasticemail.com/v2/contact/add?",{publicAccountID:eesf_php_data.publicAccountID,email:s.trim(),activationTemplate:t.trim(),listName:a.replace(/,\s*$/,""),firstName:e.trim()},function(e){e.error?($("#eesf_subscribewidget").fadeOut("slow",function(){$("#ee-error").removeClass("hide")}),console.error(e.error)):!0===JSON.parse(e).success&&$("#eesf_subscribewidget").fadeOut("slow",function(){$("#ee-success").removeClass("hide"),$("#success").fadeIn("slow")})}),!1},checkRequest=function(e,s,a,i,t){switch(eesf_php_data.reCptcha){case"no":sendRequestContactAdd(e,s,a,i,t);break;case"yes":grecaptcha.execute();break;default:console.error("Security status is not set.")}},IsEmail=function(e){return!!/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)&&($("#empty_email").addClass("hide").css("display","none"),$("#invalid_email").addClass("hide").css("display","none"),!0)},checkValues=function(e,s,a,i,t,c,n){return a?($("#invalid_list").addClass("hide").css("display","none"),e||i?($("#invalid_name").addClass("hide").css("display","none"),s?($("#empty_email").addClass("hide").css("display","none"),0==IsEmail(s)?($("#invalid_email").removeClass("hide").css("display","inline"),!1):(n||console.error("Invalid template name (activationTemplate)"),c||t?($("#uncheck_agree").addClass("hide").css("display","none"),checkRequest(e,s,a,i,n),!0):($("#uncheck_agree").removeClass("hide").css("display","inline"),!1))):($("#empty_email").removeClass("hide").css("display","inline"),!1)):($("#invalid_name").removeClass("hide").css("display","inline"),!1)):($("#invalid_list").removeClass("hide").css("display","inline"),!1)},getValue=function(e,s){var a=e?"":$("#eesw-name").val(),i=$("#eesw-email").val(),t=$("#eesf-legal").is(":checked"),c=$("#activationTemplate").attr("activationTemplate"),n="";$(".eesw-single-list").each(function(){$(this).is(":checked")&&($(".eesw-lists-merged-elements").val(),n+="".concat($(this).val(),","))}),checkValues(a,i,n,e,t,s,c)},sendAjaxRequest=function(e){var s;s="true"==$("#isNameActive").attr("isNameActive");var a=$("#activationTemplate").attr("activationTemplate"),i=$("#eesw-name").val(),t=$("#eesw-email").val(),c="";$(".eesw-single-list").each(function(){$(this).attr("checked")&&($(".eesw-lists-merged-elements").val(),c+="".concat($(this).val(),","))});var n="".concat(document.location.origin,"/wp-admin/admin-ajax.php?action=elasticEmailContactAdd");s?$.post(n,{token:e,email:t,isNameDisabled:s,teactivationTempla:a.trim(),lists:c.replace(/,\s*$/,"")},function(e){e.success?$("#eesf_subscribewidget").fadeOut("slow",function(){$("#ee-success").removeClass("hide"),$("#success").fadeIn("slow")}):($("#eesf_subscribewidget").fadeOut("slow",function(){$("#ee-error").removeClass("hide")}),console.error(e.error)),grecaptcha.reset()}):s||$.post(n,{name:i,token:e,email:t,isNameDisabled:s,activationTemplate:a.trim(),lists:c.replace(/,\s*$/,"")},function(e){e.success?$("#eesf_subscribewidget").fadeOut("slow",function(){$("#ee-success").removeClass("hide"),$("#success").fadeIn("slow")}):($("#eesf_subscribewidget").fadeOut("slow",function(){$("#ee-error").removeClass("hide")}),console.error(e.error)),grecaptcha.reset()})},onSubmit=function(e){sendAjaxRequest(e)};$(function(){$("#submit_from_widget").on("click",function(e){var s=$("#isNameActive").attr("isnameactive"),a=$("#isTermsActive").attr("istermsactive");getValue("true"==s,"false"==a),e.preventDefault()})});