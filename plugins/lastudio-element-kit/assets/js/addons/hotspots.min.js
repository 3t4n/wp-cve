class LaStudioKit_Hotspots extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{hotspot:".lakit-hotspot",tooltip:".lakit-hotspot__tooltip"}}}getDefaultElements(){let t=this.getSettings("selectors");return{$hotspot:this.$element.find(t.hotspot),$hotspotsExcludesLinks:this.$element.find(t.hotspot).filter(":not(.lakit-hotspot--no-tooltip)"),$tooltip:this.$element.find(t.tooltip),$templateRoot:this.$element.closest(".elementor[data-elementor-id]"),$parentSwiper:this.$element.closest(".swiper-container")}}bindEvents(){let t=this.getCurrentDeviceSetting("tooltip_trigger"),e="mouseenter"===t?"mouseleave mouseenter":t;"none"!==e&&this.elements.$hotspotsExcludesLinks.on(e,t=>this.onHotspotTriggerEvent(t)),this.$element.on("touchend",t=>{0===jQuery(t.target).closest(".lakit-hotspot").length&&jQuery(".elementor-element-"+this.getID()+" .lakit-hotspot").removeClass("lakit-hotspot--active")})}onDeviceModeChange(){this.elements.$hotspotsExcludesLinks.off(),this.bindEvents()}onHotspotTriggerEvent(t){if("mouseleave"===t.type&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))return!1;let e=t.currentTarget.getAttribute("data-id"),o=jQuery(t.target),i=o.closest(".lakit-hotspot__button").length,s="mouseleave"===t.type&&(o.is(".lakit-hotspot--tooltip-position")||o.parents(".lakit-hotspot--tooltip-position").length),n="mobile"===elementorFrontend.getCurrentDeviceMode(),l=o.closest(".lakit-hotspot--link").length,a=!(l&&n&&("mouseleave"===t.type||"mouseenter"===t.type)),h=jQuery(".elementor-element-fake-"+this.getID()+" .lakit-hotspot");if(a&&(i||s)){let r=this.elements.$hotspot.filter("[data-id="+e+"]"),p=h.filter("[data-id="+e+"]");this.elements.$hotspot.not(r).removeClass("lakit-hotspot--active"),h.not(p).removeClass("lakit-hotspot--active"),r.hasClass("lakit-hotspot--active")?(r.removeClass("lakit-hotspot--active"),p.removeClass("lakit-hotspot--active")):(this.setupPositionForRelativeToolTip(r.find(".lakit-hotspot__tooltip"),p.find(".lakit-hotspot__tooltip")),r.addClass("lakit-hotspot--active"),p.addClass("lakit-hotspot--active"))}}editorAddSequencedAnimation(){this.elements.$hotspot.toggleClass("lakit-hotspot--sequenced","yes"===this.getElementSettings("hotspot_sequenced_animation"))}hotspotSequencedAnimation(){let t=this.getElementSettings(),e=t.hotspot_sequenced_animation;if("no"===e)return;let o=elementorModules.utils.Scroll.scrollObserver({callback:e=>{e.isInViewport&&(o.unobserve(this.$element[0]),this.elements.$hotspot.each((e,o)=>{if(0===e)return;let i=t.hotspot_sequenced_animation_duration,s=i?i.size:1e3,n=e*(s/this.elements.$hotspot.length);o.style.animationDelay=n+"ms"}))}});o.observe(this.$element[0])}setTooltipPositionControl(t){var e=this;let o=this.getElementSettings(),i=void 0!==o.tooltip_animation&&o.tooltip_animation.match(/^lakit-hotspot--(slide|fade)-direction/);i&&(this.elements.$tooltip.removeClass("lakit-hotspot--tooltip-animation-from-left lakit-hotspot--tooltip-animation-from-top lakit-hotspot--tooltip-animation-from-right lakit-hotspot--tooltip-animation-from-bottom"),this.elements.$tooltip.addClass("lakit-hotspot--tooltip-animation-from-"+o.tooltip_position));let s=this.elements.$templateRoot.data("elementor-id");0===jQuery(".elementor-fake-"+s).length&&jQuery("body").append('<div class="elementor elementor-'+s+" elementor-root-fake elementor-fake-"+s+'"></div>');let n=jQuery(".elementor-fake-"+s);0===jQuery(".elementor-element-fake-"+this.getID()).length&&n.append('<div class="elementor-element-fake elementor-element elementor-element-'+this.getID()+" elementor-element-fake-"+this.getID()+'"></div>');let l=jQuery(".elementor-element-fake-"+this.getID());l.empty(),this.elements.$hotspot.each((t,e)=>{let o=jQuery(e).clone();o.find(".lakit-hotspot__button").remove(),o.addClass("lakit-hotspot--fake"),o.appendTo(l)});let a=()=>{this.elements.$tooltip.each(function(t,o){let i=jQuery(".elementor-element-fake.elementor-element-"+e.getID()+" .lakit-hotspot__tooltip[data-id="+o.getAttribute("data-id")+"]");LaStudioKits.isInViewport(o)?e.setupPositionForRelativeToolTip(jQuery(o),i):i.css({visibility:"hidden"})})};if("mouseenter"===this.getCurrentDeviceSetting("tooltip_trigger")){let h=jQuery(".elementor-element-fake-"+this.getID()+" .lakit-hotspot");h.on("mouseleave",t=>this.onHotspotTriggerEvent(t))}t?a():document.addEventListener("DOMContentLoaded",a),window.addEventListener("resize",a),window.addEventListener("scroll",a)}onInit(){super.onInit(...arguments),this.hotspotSequencedAnimation(),this.setTooltipPositionControl(!1),window.elementor&&elementor.listenTo(elementor.channels.deviceMode,"change",()=>this.onDeviceModeChange())}onElementChange(t){t.startsWith("tooltip_position")&&this.setTooltipPositionControl(!0),t.startsWith("hotspot_sequenced_animation")&&this.editorAddSequencedAnimation()}setupPositionForRelativeToolTip(t,e){let o=t.get(0).getBoundingClientRect(),i={left:o.left,top:o.top,width:o.width,right:"initial",bottom:"initial",display:"flex",visibility:"inherit"};o.left<=10?i.left=10:o.left+o.width>window.innerWidth&&(i.left=window.innerWidth-o.width-10),e.css(i)}}jQuery(window).on("elementor/frontend/init",()=>{let t=t=>{elementorFrontend.elementsHandler.addHandler(LaStudioKit_Hotspots,{$element:t})};elementorFrontend.hooks.addAction("frontend/element_ready/lakit-hotspots.default",t),jQuery(document).on("lastudio-kit/carousel/init_success",function(t,{swiperContainer:e,SwiperInstance:o}){e.find(".elementor-widget-lakit-hotspots").length&&(jQuery(".swiper-slide-duplicate .elementor-widget-lakit-hotspots",e).each(function(){window.elementorFrontend.hooks.doAction("frontend/element_ready/lakit-hotspots.default",jQuery(this),jQuery)}),o.on("slideChangeTransitionStart",function(){jQuery(".lakit-hotspot").removeClass("lakit-hotspot--active")}))})});