!function(e){"use strict";var a={noticeCreate:function(a,s,t){var i,n,r,o=0;if(!s||"true"===(t||!1))return!1;i=e('<div class="lakit-handler-notice '+a+'"><span class="dashicons"></span><div class="inner">'+s+"</div></div>"),e("body").prepend(i),r=100,e(".lakit-handler-notice").each((function(){e(this).css({top:r}),r+=e(this).outerHeight(!0)})),o=-1*(i.outerWidth(!0)+10),i.css({right:o}),n=setTimeout((function(){i.css({right:10}).addClass("show-state")}),100),n=setTimeout((function(){o=-1*(i.outerWidth(!0)+10),i.css({right:o}).removeClass("show-state")}),4e3),n=setTimeout((function(){i.remove(),clearTimeout(n)}),4500)},serializeObject:function(a){var s=this,t={},i={},n={validate:/^[a-zA-Z][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_-]+)\])*$/,key:/[a-zA-Z0-9_-]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_-]+$/};return this.build=function(e,a,s){return e[a]=s,e},this.push_counter=function(e){return void 0===i[e]&&(i[e]=0),i[e]++},e.each(a.serializeArray(),(function(){var a,i,r,o;if(n.validate.test(this.name)){for(i=this.name.match(n.key),r=this.value,o=this.name;void 0!==(a=i.pop());)o=o.replace(new RegExp("\\["+a+"\\]$"),""),a.match(n.push)?r=s.build([],s.push_counter(o),r):a.match(n.fixed)?r=s.build([],a,r):a.match(n.named)&&(r=s.build({},a,r));t=e.extend(!0,t,r)}})),t}},s=function(s){var t=this,i={handlerId:"",cache:!1,processData:!0,url:"",async:!1,beforeSendCallback:function(){},errorCallback:function(){},successCallback:function(){},completeCallback:function(){}};s&&e.extend(i,s),t.handlerSettings=window.lakitSubscribeConfig||{},t.ajaxRequest=null,t.ajaxProcessing=!1,t.data={action:t.handlerSettings.action,nonce:t.handlerSettings.nonce},""===i.url&&(i.url=t.handlerSettings.ajax_url),t.send=function(){t.ajaxProcessing&&a.noticeCreate("error-notice",t.handlerSettings.sys_messages.wait_processing,t.handlerSettings.is_public),t.ajaxProcessing=!0,t.ajaxRequest=e.ajax({type:t.handlerSettings.type,url:i.url,data:t.data,cache:i.cache,dataType:t.handlerSettings.data_type,processData:i.processData,beforeSend:function(e,a){null===t.ajaxRequest||i.async||t.ajaxRequest.abort(),i.beforeSendCallback&&"function"==typeof i.beforeSendCallback&&i.beforeSendCallback(e,a)},error:function(a,s,t){e(document).trigger({type:"lakit-ajax-handler-error",jqXHR:a,textStatus:s,errorThrown:t}),i.errorCallback&&"function"==typeof i.errorCallback&&i.errorCallback(a,s,t)},success:function(a,s,n){t.ajaxProcessing=!1,e(document).trigger({type:"lakit-ajax-handler-success",response:a,jqXHR:n,textStatus:s}),i.successCallback&&"function"==typeof i.successCallback&&i.successCallback(a,s,n)},complete:function(a,s){e(document).trigger({type:"lakit-ajax-handler-complete",jqXHR:a,textStatus:s}),i.completeCallback&&"function"==typeof i.completeCallback&&i.completeCallback(a,s)}})},t.sendData=function(e){var a=e||{};t.data={action:"lakit_ajax",_nonce:t.handlerSettings.nonce,actions:JSON.stringify({newsletter_subscribe:{action:"newsletter_subscribe",data:a}})},t.send()},t.sendFormData=function(s){var i,n=e(s);i=a.serializeObject(n),t.sendData(i)}};e(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/lakit-subscribe-form.default",(function(a){!function(a){var t=a.find(".lakit-subscribe-form"),i=a.data("id"),n=t.data("settings"),r=e(".lakit-subscribe-form__form",t),o=(e(".lakit-subscribe-form__fields",t),e(".lakit-subscribe-form__mail-field",t)),c=o.data("instance-data"),l=e(".lakit-subscribe-form__submit",t),d=e(".lakit-subscribe-form__message",t),u=window.lakitSubscribeConfig.sys_messages.invalid_mail,b=new s({handlerId:"lakit_elementor_subscribe_form_ajax",errorCallback:function(a,s,i){var n=window.lakitSubscribeConfig.sys_messages.invalid_nonce,r="lakit-subscribe-form--response-error";l.removeClass("loading"),t.addClass(r),e("span",d).html(n),d.css({visibility:"visible"}),setTimeout((function(){d.css({visibility:"hidden"}),t.removeClass(r)}),2e4)},successCallback:function(a){var s,r,o;a.success?a.data.responses.newsletter_subscribe.success?(r=a.data.responses.newsletter_subscribe.data.message,s=a.data.responses.newsletter_subscribe.data.type):(r=a.data.responses.newsletter_subscribe.data,s="error"):(s="error",r=a.responses.error.data),o="lakit-subscribe-form--response-"+s,l.removeClass("loading"),t.removeClass("lakit-subscribe-form--response-error"),t.addClass(o),e("span",d).html(r),d.css({visibility:"visible"}),setTimeout((function(){d.css({visibility:"hidden"}),t.removeClass(o)}),2e4),n.redirect&&(window.location.href=n.redirect_url),e(window).trigger({type:"lastudio-kit/subscribe",elementId:i,successType:s,inputData:c})}});function f(){var a=o.val(),s={email:a,use_target_list_id:n.use_target_list_id||!1,target_list_id:n.target_list_id||"",data:c},i=r.serializeArray(),f={};/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)?(e.each(i,(function(e,a){"email"===a.name?s[a.name]=a.value:f[a.name]=a.value})),s.additional=f,b.sendData(s),l.addClass("loading")):(o.addClass("mail-invalid"),t.addClass("lakit-subscribe-form--response-error"),e("span",d).html(u),d.css({visibility:"visible"}),setTimeout((function(){t.removeClass("lakit-subscribe-form--response-error"),d.css({visibility:"hidden"}),o.removeClass("mail-invalid")}),2e4))}o.on("focus",(function(){o.removeClass("mail-invalid")})),e(document).keydown((function(e){if(13===e.keyCode&&o.is(":focus"))return f(),!1})),l.on("click",(function(){return f(),!1}))}(a)}))}))}(jQuery);