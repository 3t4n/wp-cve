function turitop_bs_round_trip(){this.round_trip_key="NtGhGI4fvh9uNuoxlK6v6DpvoFwxn9z1",this.wrap_parent="",this.old_text_align="",this.old_width=""}jQuery(document).ready(function(t){turitop_bs_round_trip.prototype.init=function(_){var r=this;t(".turitop_booking_system_round_trip_select").length&&t(".turitop_booking_system_round_trip_select").select2(),this.wrap_parent=_;var e=t(this.wrap_parent).find("input[name=turitop_booking_system_round_trip_type]:checked").val();this.trip_type_selected(e),this.events(),this.old_text_align=t(this.wrap_parent).css("text-align"),this.responsive(),t(window).resize(function(){r.responsive()})},turitop_bs_round_trip.prototype.responsive=function(){var _=t(this.wrap_parent).parent().width(),r=t(this.wrap_parent).outerWidth(!0);_<=r&&t(this.wrap_parent).css("width","auto"),(r=t(this.wrap_parent).outerWidth(!0))<=485?(t(this.wrap_parent).find(".fa-exchange").hide(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_select_spacer").show(),t(this.wrap_parent).css("text-align","center")):(t(this.wrap_parent).find(".fa-exchange").show(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_select_spacer").hide(),t(this.wrap_parent).css("text-align",this.old_text_align))},turitop_bs_round_trip.prototype.trip_type_selected=function(_){"round_trip"==_?(t(this.wrap_parent).find(".turitop_booking_system_round_trip_ways label:nth-of-type(1)").css("font-weight","bold"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_ways label:nth-of-type(2)").css("font-weight","normal")):(t(this.wrap_parent).find(".turitop_booking_system_round_trip_ways label:nth-of-type(2)").css("font-weight","bold"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_ways label:nth-of-type(1)").css("font-weight","normal"))},turitop_bs_round_trip.prototype.hide_services=function(){t(this.wrap_parent).find(".turitop_booking_system_round_trip_services_no_selected").show(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_services_wrap").hide()},turitop_bs_round_trip.prototype.show_services=function(){t(this.wrap_parent).find(".turitop_booking_system_round_trip_services_no_selected").hide(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_services_wrap").show()},turitop_bs_round_trip.prototype.events=function(){var _=this;t(".turitop_booking_system_round_trip_wrap input[name=turitop_booking_system_round_trip_type]").on("change",function(r){r.preventDefault();var e=t(this).val();"one_way"==e?(t(_.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_return").hide(),_.change_tab("outbound")):(t(_.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_return").show(),_.change_tab("outbound"));var i=t(_.wrap_parent).find("select[name=turitop_booking_system_round_trip_from]").val(),o=t(_.wrap_parent).find("select[name=turitop_booking_system_round_trip_to]").val();_.trip_type_selected(e),0!=i&&0!=o?(args={type:e,from:i,to:o},_.display_services(args)):_.hide_services()}),t(".turitop_booking_system_round_trip_wrap select[name=turitop_booking_system_round_trip_from]").on("change",function(r){r.preventDefault(),_.hide_services(),t(_.wrap_parent).find("select[name=turitop_booking_system_round_trip_to]").next(".select2-container").hide(),t(_.wrap_parent).find(".turitop_booking_system_round_trip_select_to_loading").show();var e={action:"turitop_booking_system_round_trip_select_to",args:{from:t(this).val()},security:tbs_round_trip.round_trip_nonce};t.ajax({data:e,url:tbs_round_trip.ajax_url,type:"post",error:function(t){console.log(t)},success:function(r){t(_.wrap_parent).find("select[name=turitop_booking_system_round_trip_to]").html(r.data.to_options),t(_.wrap_parent).find("select[name=turitop_booking_system_round_trip_to]").next(".select2-container").show(),t(_.wrap_parent).find(".turitop_booking_system_round_trip_select_to_loading").hide()}})}),t(".turitop_booking_system_round_trip_wrap select[name=turitop_booking_system_round_trip_to]").on("change",function(r){r.preventDefault();var e=t(_.wrap_parent).find("input[name=turitop_booking_system_round_trip_type]:checked").val(),i=t(_.wrap_parent).find("select[name=turitop_booking_system_round_trip_from]").val(),o=t(this).val();0!=i&&0!=o?(args={type:e,from:i,to:o},_.display_services(args)):_.hide_services()}),t(".turitop_booking_system_round_trip_wrap .turitop_booking_system_round_trip_service_menu_outbound").on("click",function(t){t.preventDefault(),_.change_tab("outbound")}),t(".turitop_booking_system_round_trip_wrap .turitop_booking_system_round_trip_service_menu_return").on("click",function(t){t.preventDefault(),_.change_tab("return")}),window.addEventListener?window.addEventListener("message",function(t){var r={round_trip_key:_.round_trip_key,wrap_parent:_.wrap_parent};_.handleMessage(t,r)}):window.attachEvent("onmessage",function(t){var r={round_trip_key:_.round_trip_key,wrap_parent:_.wrap_parent};_.handleMessage(t,r)})},turitop_bs_round_trip.prototype.display_services=function(_){var r=this;this.show_services(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_services_img_loading").show(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_outbound").hide(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_return").hide();var e=t(window).width();e<650?t(r.wrap_parent).find(".turitop_booking_system_round_trip_services_display").width(e-30):t(r.wrap_parent).find(".turitop_booking_system_round_trip_services_display").width("600");var i={action:"turitop_booking_system_round_trip",args:{type:_.type,from:_.from,to:_.to},security:tbs_round_trip.round_trip_nonce};t.ajax({data:i,url:tbs_round_trip.ajax_url,type:"post",error:function(t){console.log(t)},success:function(_){t(r.wrap_parent).find(".turitop_booking_system_round_trip_service_outbound").html(_.data.outbound_box),t(r.wrap_parent).find("input[name=turitop_booking_system_outbound_service]").val(_.data.outbound_service),t(r.wrap_parent).find(".turitop_booking_system_round_trip_service_return").html(_.data.return_box),t(r.wrap_parent).find("input[name=turitop_booking_system_return_service]").val(_.data.return_service),r.change_tab("outbound"),"function"==typeof turitopBuild&&(turitopBuild(),t(r.wrap_parent).find(".turitop_booking_system_round_trip_services_img_loading").hide(),setTimeout(function(){t(r.wrap_parent).find(".turitop_booking_system_round_trip_service_outbound").find("iframe").load(function(){t(r.wrap_parent).find(".turitop_booking_system_round_trip_services_img_loading").hide(),e<650?t(r.wrap_parent).find(".turitop_booking_system_round_trip_service_outbound").find("iframe").css("height","800px"):t(r.wrap_parent).find(".turitop_booking_system_round_trip_service_outbound").find("iframe").css("height","400px")})},4e3))}})},turitop_bs_round_trip.prototype.change_tab=function(_){switch(_){case"outbound":t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_outbound").show(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_outbound").css("font-weight","bold"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_outbound").removeClass("turitop_booking_system_round_trip_service_menu_no_selected"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_outbound").addClass("turitop_booking_system_round_trip_service_menu_selected"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_return").hide(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_return").css("font-weight","normal"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_return").removeClass("turitop_booking_system_round_trip_service_menu_selected"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_return").addClass("turitop_booking_system_round_trip_service_menu_no_selected");break;case"return":t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_outbound").hide(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_outbound").css("font-weight","normal"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_outbound").addClass("turitop_booking_system_round_trip_service_menu_no_selected"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_outbound").removeClass("turitop_booking_system_round_trip_service_menu_selected"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_return").show(),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_return").css("font-weight","bold"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_return").removeClass("turitop_booking_system_round_trip_service_menu_no_selected"),t(this.wrap_parent).find(".turitop_booking_system_round_trip_service_menu_return").addClass("turitop_booking_system_round_trip_service_menu_selected")}},turitop_bs_round_trip.prototype.handleMessage=function(_,r){var e=r.round_trip_key,i=r.wrap_parent;if("https://app.turitop.com"==_.origin){var o=_.data;if(o.key&&0!==o.key.length&&void 0!==o.key&&o.key==e){if("return"==o.step)return t(i).find(".turitop_booking_system_round_trip_service_outbound").hide(),t(i).find(".turitop_booking_system_round_trip_service_menu_outbound").css("font-weight","normal"),t(i).find(".turitop_booking_system_round_trip_service_menu_outbound").addClass("turitop_booking_system_round_trip_service_menu_no_selected"),t(i).find(".turitop_booking_system_round_trip_service_menu_outbound").removeClass("turitop_booking_system_round_trip_service_menu_selected"),t(i).find(".turitop_booking_system_round_trip_service_return").show(),t(i).find(".turitop_booking_system_round_trip_service_menu_return").css("font-weight","bold"),t(i).find(".turitop_booking_system_round_trip_service_menu_return").removeClass("turitop_booking_system_round_trip_service_menu_no_selected"),void t(i).find(".turitop_booking_system_round_trip_service_menu_return").addClass("turitop_booking_system_round_trip_service_menu_selected");if("one_way"==t(i).find("input[name=turitop_booking_system_round_trip_type]:checked").val()){var n=t(i).find(".turitop_booking_system_round_trip_service_outbound").find("iframe");return t(n).height(parseInt(o.height)+50),void t(n).get(0).contentWindow.postMessage({key:e,type:"one_way"},"https://app.turitop.com")}if(t(i).find("input[name=turitop_booking_system_outbound_service]").val()==o.product){n=t(i).find(".turitop_booking_system_round_trip_service_outbound").find("iframe");return t(n).height(parseInt(o.height)+50),void t(n).get(0).contentWindow.postMessage({key:e,type:"outbound"},"https://app.turitop.com")}if(t(i).find("input[name=turitop_booking_system_return_service]").val()==o.product){n=t(i).find(".turitop_booking_system_round_trip_service_return").find("iframe");return t(n).height(parseInt(o.height)+50),void t(n).get(0).contentWindow.postMessage({key:e,type:"return"},"https://app.turitop.com")}}}else console.log("The message came from some site we don't know. We're not processing it.")},t(".turitop_booking_system_round_trip_wrap").each(function(){(new turitop_bs_round_trip).init(this)})});
