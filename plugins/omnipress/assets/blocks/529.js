"use strict";(self.webpackChunkomnipress=self.webpackChunkomnipress||[]).push([[529],{8529:function(e,t,o){o.r(t);var n=o(9307),a=o(1144),i=o(1410),r=o(353);t.default=(0,n.memo)((function({attributes:e,setAttributes:t}){const{countdownType:o,countdownEndDate:c,isSeparator:s,separatorType:l,actionOnExpiration:u,messageAfterExpiration:d,timezone:m}=e,[p,b]=(0,n.useState)([]);return(0,n.useEffect)((()=>{}),[]),(0,n.useEffect)((()=>{let o,n=(0,a.ok)(c,m);return b((0,a.ER)(n)),e.isPreview&&n>0?(o=setInterval((()=>{n-=1e3,n>0?(b((0,a.ER)(n)),t({isCountdownStart:!0})):(t({isPreview:!1}),t({isCountdownStart:!1}),clearInterval(o))}),1e3),setTimeout((()=>{clearInterval(o),t({isPreview:!1})}),5e3)):(t({isPreview:!1}),t({isCountdownStart:!1}),clearInterval(o)),()=>{clearInterval(o)}}),[e.isPreview,e.countdownType,e.countdownEndDate,m]),React.createElement(React.Fragment,null,p.length>0&&p.map(((o,n)=>React.createElement(React.Fragment,null,React.createElement(i.Z,{digit:o.digit,digitType:o.digitType,attributes:e,setAttributes:t,key:o.digitType}),n<p.length-1&&s?React.createElement(r.Z,{key:`${n}separator`,separatorType:l}):""))))}))},1410:function(e,t,o){var n=o(2175),a=o(9307);t.Z=(0,a.memo)((function({attributes:e,setAttributes:t,digit:o=0,digitType:a="Hours"}){return React.createElement("div",{className:"op-block-countdown__content-container op-block__content-container op-container op-4b1810a-container op-hover-parent"},e.contentContainer.backgroundImage&&React.createElement("div",{className:"op-content-container--has-overlay op-block--has-overlay",style:{opacity:Number.isNaN(e.contentContainer.bgOverlayOpacity)?.5:e.contentContainer.bgOverlayOpacity/10,backgroundColor:e.contentContainer.backgroundColor??"#0005"}}),e.contentContainer.backgroundImage&&e.contentContainer.backgroundImage.includes(".mp4")?React.createElement("video",{className:"op-content-container--has-video-overlay op-block--has-video-overlay",style:{objectFit:e.contentContainer.backgroundSize||"contain"},muted:!0,loop:!0,autoPlay:!0},React.createElement("source",{src:e.contentContainer.backgroundImage,type:"video/mp4"})):"",React.createElement("div",{className:"op-block-countdown__content-wrapper"},React.createElement("div",{className:`op-block-countdown__digit op-block__countdown-digits op-block-countdown__digit-${a.toLowerCase()} has-text-color`},o),e.isLabel&&React.createElement(n.RichText,{className:"op-block-countdown__label-minute op-block-countdown__label op-block__countdown-label",onChange:o=>(o=>{if(o?.toLowerCase()===a.toLowerCase()){const o={...e.digitType};delete o[a.toLowerCase()],t({digitType:{...o}})}else t({digitType:{...e.digitType,[a.toLowerCase()]:o}})})(o),value:e.digitType[a.toLowerCase()]??a,tagName:"p"})))}))},353:function(e,t,o){var n=o(9307);t.Z=(0,n.memo)((function({separatorType:e="colon"}){return React.createElement("div",{className:"op-block-countdown__divider-wrapper"},"colon"===e?React.createElement("div",{className:"op-block-countdown__divider-colon op-block__divider"}," : "):React.createElement("div",{className:"op-block-countdown__divider-line op-block__divider"}))}))},1144:function(e,t,o){o.d(t,{ER:function(){return r},bE:function(){return a},ok:function(){return i}});var n=o(1370);const a=(e,t,o="UTC")=>{!Object.values(t).every((e=>0===e))&&Object.keys(t).length||(t={days:1,hours:23,minutes:59,seconds:59});const a=n.ou.now();e||(e=a.toISO()),o&&(e=n.ou.fromISO(e).setZone(o,{keepLocalTime:!0}).toString());const i=n.ou.fromISO(e).toMillis(),r=n.ou.fromISO(a).toMillis();let c,s=!1;const l=n.nL.fromObject(t).as("milliseconds");let u,d;return i>r?(s=!1,d=n.ou.fromISO(e).toFormat("x")-r):(c=a.diff(n.ou.fromISO(e)).toObject(),s=!0,u=c.milliseconds%l),u=n.nL.fromMillis(u).toObject(),u=n.nL.fromObject(u).shiftTo("days","hours","minutes","seconds").toObject(),u=n.nL.fromObject(t).minus(n.nL.fromObject(u)).shiftTo("milliseconds").toObject(),{remainingTime:u,isStarted:s,startsIn:d}};function i(e,t=""){const o=n.ou.now().toFormat("x");t&&(e=n.ou.fromISO(e).setZone(t,{keepLocalTime:!0}).toString());const a=n.ou.fromISO(e).toFormat("x")-o;return a<0?0:a}const r=e=>{const t=Math.floor(e/1e3),o=Math.floor(t/60),n=Math.floor(o/60);return[{digit:Math.floor(n/24),digitType:"Days"},{digit:n%24,digitType:"Hours"},{digit:o%60,digitType:"Minutes"},{digit:t%60,digitType:"Seconds"}]}}}]);