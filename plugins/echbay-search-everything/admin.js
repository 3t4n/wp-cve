function ESE_set_default_value_and_submit ( set_value ) { jQuery('#list_search_for_taxonomy input[type="checkbox"], #list_search_for_post_type input[type="checkbox"]').prop({ checked: false }); document.getElementById(set_value).value = jQuery('#' + set_value).attr('placeholder') || ''; ESE_check_to_chexkbox_in_custom_value(); } function ESE_check_to_chexkbox_in_custom_value () { var b = jQuery('#search_for_taxonomy').val() || '', c = jQuery('#search_for_post_type').val() || ''; if ( b == '' && c == '' ) { b = jQuery('#search_for_taxonomy').attr('placeholder') || ''; c = jQuery('#search_for_post_type').attr('placeholder') || ''; } if ( b == '' ) { if ( c == '' ) { return false; } else { b = c; } } else { if ( c != '' ) { b = b + ',' + c; } } b = b.replace(/\,/g, ','); b = b.split(","); for ( var i = 0; i < b.length; i++ ) { var d = document.getElementById( 'ese_id_checkbox' + b[i] ); if ( d != null ) { d.checked = true; } } } function ESE_create_checkbox_for_custom_seacrh ( jd, arr_name ) { var a = jQuery('#' + jd).html() || ''; if ( a == '' ) { return false; } a = a.split(","); var str = ''; for ( var i = 0; i < a.length; i++ ) { str += '<label for="ese_id_checkbox' + a[i] + '"><input type="checkbox" value="' + a[i] + '" name="ese_name_checkbox' + a[i] + '" id="ese_id_checkbox' + a[i] + '" /> ' + a[i] + ' (' + arr_name[ a[i] ] + ')</label>'; } jQuery('#' + jd).html( str ); } function ESE_get_list_value_before_submit (set_value) { var a = []; $('#' + set_value + ' input[type="checkbox"]').each(function() { var jd = $(this).attr('id') || ''; if ( jd != '' && document.getElementById(jd).checked == true ) { a.push( $(this).val() ); } }); console.log(a); if ( a.length == 0 ) { a = ''; } else { a = a.join(','); } console.log(a); return a; } function ESE_check_form_before_submit () { var f = document.echbay_config_for_efm; $('#search_for_taxonomy').val( ESE_get_list_value_before_submit('list_search_for_taxonomy') ); $('#search_for_post_type').val( ESE_get_list_value_before_submit('list_search_for_post_type') ); return true; } ESE_create_checkbox_for_custom_seacrh( 'list_search_for_taxonomy', js_all_taxonomy ); ESE_create_checkbox_for_custom_seacrh( 'list_search_for_post_type', js_all_post_type ); ESE_check_to_chexkbox_in_custom_value(); 