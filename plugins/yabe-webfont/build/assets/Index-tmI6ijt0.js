import{ae as fe,V as _e,e as R,n as pe,f as re,r as me,g as ge,o as j,c as q,b as t,h as oe,j as ve,d as B,k as X,F as ne,t as ye,u as g,a as le,s as ce}from"./app-BKc7mk60.js";import{a as be,c as se}from"./cloneDeep-BXyhDMfG.js";import{c as $e,t as ke,g as F}from"./get-CSpXgK6E.js";import{i as ue,o as Me}from"./_Uint8Array-Dz8rZXn2.js";import{a as Se,u as De,b as we}from"./notifier-BZ1LGfDv.js";var de={exports:{}};(function(C,y){(function(c,p){C.exports=p()})(fe,function(){var c=1e3,p=6e4,x=36e5,O="millisecond",u="second",v="minute",k="hour",w="day",A="week",Y="month",a="quarter",_="year",h="date",P="Invalid Date",I=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(r){var s=["th","st","nd","rd"],e=r%100;return"["+r+(s[(e-20)%10]||s[e]||s[0])+"]"}},ee=function(r,s,e){var i=String(r);return!i||i.length>=s?r:""+Array(s+1-i.length).join(e)+r},he={s:ee,z:function(r){var s=-r.utcOffset(),e=Math.abs(s),i=Math.floor(e/60),n=e%60;return(s<=0?"+":"-")+ee(i,2,"0")+":"+ee(n,2,"0")},m:function r(s,e){if(s.date()<e.date())return-r(e,s);var i=12*(e.year()-s.year())+(e.month()-s.month()),n=s.clone().add(i,Y),o=e-n<0,l=s.clone().add(i+(o?-1:1),Y);return+(-(i+(e-n)/(o?n-l:l-n))||0)},a:function(r){return r<0?Math.ceil(r)||0:Math.floor(r)},p:function(r){return{M:Y,y:_,w:A,d:w,D:h,h:k,m:v,s:u,ms:O,Q:a}[r]||String(r||"").toLowerCase().replace(/s$/,"")},u:function(r){return r===void 0}},U="en",N={};N[U]=S;var ae="$isDayjsObject",te=function(r){return r instanceof K||!(!r||!r[ae])},Z=function r(s,e,i){var n;if(!s)return U;if(typeof s=="string"){var o=s.toLowerCase();N[o]&&(n=o),e&&(N[o]=e,n=o);var l=s.split("-");if(!n&&l.length>1)return r(l[0])}else{var f=s.name;N[f]=s,n=f}return!i&&n&&(U=n),n||!i&&U},b=function(r,s){if(te(r))return r.clone();var e=typeof s=="object"?s:{};return e.date=r,e.args=arguments,new K(e)},d=he;d.l=Z,d.i=te,d.w=function(r,s){return b(r,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var K=function(){function r(e){this.$L=Z(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[ae]=!0}var s=r.prototype;return s.parse=function(e){this.$d=function(i){var n=i.date,o=i.utc;if(n===null)return new Date(NaN);if(d.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var l=n.match(I);if(l){var f=l[2]-1||0,m=(l[7]||"0").substring(0,3);return o?new Date(Date.UTC(l[1],f,l[3]||1,l[4]||0,l[5]||0,l[6]||0,m)):new Date(l[1],f,l[3]||1,l[4]||0,l[5]||0,l[6]||0,m)}}return new Date(n)}(e),this.init()},s.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},s.$utils=function(){return d},s.isValid=function(){return this.$d.toString()!==P},s.isSame=function(e,i){var n=b(e);return this.startOf(i)<=n&&n<=this.endOf(i)},s.isAfter=function(e,i){return b(e)<this.startOf(i)},s.isBefore=function(e,i){return this.endOf(i)<b(e)},s.$g=function(e,i,n){return d.u(e)?this[i]:this.set(n,e)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(e,i){var n=this,o=!!d.u(i)||i,l=d.p(e),f=function(G,T){var H=d.w(n.$u?Date.UTC(n.$y,T,G):new Date(n.$y,T,G),n);return o?H:H.endOf(w)},m=function(G,T){return d.w(n.toDate()[G].apply(n.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(T)),n)},$=this.$W,D=this.$M,L=this.$D,E="set"+(this.$u?"UTC":"");switch(l){case _:return o?f(1,0):f(31,11);case Y:return o?f(1,D):f(0,D+1);case A:var W=this.$locale().weekStart||0,z=($<W?$+7:$)-W;return f(o?L-z:L+(6-z),D);case w:case h:return m(E+"Hours",0);case k:return m(E+"Minutes",1);case v:return m(E+"Seconds",2);case u:return m(E+"Milliseconds",3);default:return this.clone()}},s.endOf=function(e){return this.startOf(e,!1)},s.$set=function(e,i){var n,o=d.p(e),l="set"+(this.$u?"UTC":""),f=(n={},n[w]=l+"Date",n[h]=l+"Date",n[Y]=l+"Month",n[_]=l+"FullYear",n[k]=l+"Hours",n[v]=l+"Minutes",n[u]=l+"Seconds",n[O]=l+"Milliseconds",n)[o],m=o===w?this.$D+(i-this.$W):i;if(o===Y||o===_){var $=this.clone().set(h,1);$.$d[f](m),$.init(),this.$d=$.set(h,Math.min(this.$D,$.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},s.set=function(e,i){return this.clone().$set(e,i)},s.get=function(e){return this[d.p(e)]()},s.add=function(e,i){var n,o=this;e=Number(e);var l=d.p(i),f=function(D){var L=b(o);return d.w(L.date(L.date()+Math.round(D*e)),o)};if(l===Y)return this.set(Y,this.$M+e);if(l===_)return this.set(_,this.$y+e);if(l===w)return f(1);if(l===A)return f(7);var m=(n={},n[v]=p,n[k]=x,n[u]=c,n)[l]||1,$=this.$d.getTime()+e*m;return d.w($,this)},s.subtract=function(e,i){return this.add(-1*e,i)},s.format=function(e){var i=this,n=this.$locale();if(!this.isValid())return n.invalidDate||P;var o=e||"YYYY-MM-DDTHH:mm:ssZ",l=d.z(this),f=this.$H,m=this.$m,$=this.$M,D=n.weekdays,L=n.months,E=n.meridiem,W=function(T,H,V,Q){return T&&(T[H]||T(i,o))||V[H].slice(0,Q)},z=function(T){return d.s(f%12||12,T,"0")},G=E||function(T,H,V){var Q=T<12?"AM":"PM";return V?Q.toLowerCase():Q};return o.replace(M,function(T,H){return H||function(V){switch(V){case"YY":return String(i.$y).slice(-2);case"YYYY":return d.s(i.$y,4,"0");case"M":return $+1;case"MM":return d.s($+1,2,"0");case"MMM":return W(n.monthsShort,$,L,3);case"MMMM":return W(L,$);case"D":return i.$D;case"DD":return d.s(i.$D,2,"0");case"d":return String(i.$W);case"dd":return W(n.weekdaysMin,i.$W,D,2);case"ddd":return W(n.weekdaysShort,i.$W,D,3);case"dddd":return D[i.$W];case"H":return String(f);case"HH":return d.s(f,2,"0");case"h":return z(1);case"hh":return z(2);case"a":return G(f,m,!0);case"A":return G(f,m,!1);case"m":return String(m);case"mm":return d.s(m,2,"0");case"s":return String(i.$s);case"ss":return d.s(i.$s,2,"0");case"SSS":return d.s(i.$ms,3,"0");case"Z":return l}return null}(T)||l.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(e,i,n){var o,l=this,f=d.p(i),m=b(e),$=(m.utcOffset()-this.utcOffset())*p,D=this-m,L=function(){return d.m(l,m)};switch(f){case _:o=L()/12;break;case Y:o=L();break;case a:o=L()/3;break;case A:o=(D-$)/6048e5;break;case w:o=(D-$)/864e5;break;case k:o=D/x;break;case v:o=D/p;break;case u:o=D/c;break;default:o=D}return n?o:d.a(o)},s.daysInMonth=function(){return this.endOf(Y).$D},s.$locale=function(){return N[this.$L]},s.locale=function(e,i){if(!e)return this.$L;var n=this.clone(),o=Z(e,i,!0);return o&&(n.$L=o),n},s.clone=function(){return d.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},r}(),ie=K.prototype;return b.prototype=ie,[["$ms",O],["$s",u],["$m",v],["$H",k],["$W",w],["$M",Y],["$y",_],["$D",h]].forEach(function(r){ie[r[1]]=function(s){return this.$g(s,r[0],r[1])}}),b.extend=function(r,s){return r.$i||(r(s,K,b),r.$i=!0),b},b.locale=Z,b.isDayjs=te,b.unix=function(r){return b(1e3*r)},b.en=N[U],b.Ls=N,b.p={},b})})(de);var xe=de.exports;const Oe=_e(xe);function Te(C,y,c,p){if(!ue(C))return C;y=$e(y,C);for(var x=-1,O=y.length,u=O-1,v=C;v!=null&&++x<O;){var k=ke(y[x]),w=c;if(k==="__proto__"||k==="constructor"||k==="prototype")return C;if(x!=u){var A=v[k];w=p?p(A,k,v):void 0,w===void 0&&(w=ue(A)?A:Me(y[x+1])?[]:{})}be(v,k,w),v=v[k]}return C}function J(C,y,c){return C==null?C:Te(C,y,c)}const Ce={key:0,class:"mb:24"},Ye={class:"form-table",role:"presentation"},Ie=t("th",{scope:"row"},[t("label",null,"License Key")],-1),Le={key:0,class:"flex my:10 align-items:center font:medium"},Ae=t("span",{class:"bg:green-80 fg:white font:regular ml:10 px:6 py:4 r:4 user-select:none"}," active ",-1),Fe={key:1,class:"description"},He=t("a",{href:"https://webfont.yabe.land/#pricing-plans",target:"_blank"},"license key",-1),je={class:"mb:24"},qe=t("h2",{class:"title"},"Performance",-1),Be={class:"form-table",role:"presentation"},Pe=t("th",{scope:"row"}," Cached CSS ",-1),Ne={class:"flex gap-x:4"},We=t("span",{class:"font:medium"}," Last generated: ",-1),Ge=["href"],Ee=t("p",{class:"description"}," Serve the CSS file from the cache instead of generating it on the fly. ",-1),Ue={class:"flex align-items:center my:8"},ze=t("span",{class:"fg:gray-50 pl:4"}," There is a scheduled task to generate the cache. ",-1),Ve=t("th",{scope:"row"},[t("label",null,"Cache loading method")],-1),Je=["checked","value"],Ze=t("label",{for:"inline-print"}," Inline style",-1),Ke=t("p",{class:"description"},"Load font style via inline styles instead of external file.",-1),Qe={class:"mb:24"},Re=t("h2",{class:"title"},"Misc.",-1),Xe={class:"form-table",role:"presentation"},et=t("th",{scope:"row"},[t("label",null,"Media Library")],-1),tt=["checked","value"],nt=t("label",{for:"media-library"}," Hide font files from Media Library ",-1),st=t("p",{class:"description"}," Only show items in the Media Library that satisfy the following conditions: original allowed mime types. ",-1),at=t("th",{scope:"row"},[t("label",null,"Bundled export")],-1),it=["checked","value"],rt=t("label",{for:"export-bundle-binary"}," Bundle file on the exported file ",-1),ot=t("p",{class:"description"}," Include font binary file on the exported file. This will increase the file size. ",-1),lt=t("th",{scope:"row"},[t("label",null,"Disable user's Google Fonts")],-1),ct=["checked","value"],ut=t("label",{for:"disable-user-google-fonts"}," Disable Google Fonts API that loaded manually ",-1),dt=t("p",{class:"description"},[B(" Scan and disable Google Fonts API that loaded manually by the theme or plugin through "),t("code",null,"wp_enqueue_style"),B(" function. ")],-1),ht={class:"mb:24"},ft=t("h2",{class:"title"},"Adobe Fonts",-1),_t={class:"form-table",role:"presentation"},pt=t("th",{scope:"row"},[t("label",null,"Project ID")],-1),mt={class:"flex align-items:center"},gt=["value"],vt=t("p",{class:"description"},[B(" Get your Project ID from "),t("a",{href:"https://fonts.adobe.com/my_fonts#web_projects-section",target:"_blank"},"https://fonts.adobe.com/my_fonts#web_projects-section")],-1),St={__name:"Index",setup(C){const y=Se(),c=De(),p=we(),x=R({key:null,is_activated:!1,opt_in_pre_release:!1}),O=R({last_generated:"",pending_task:!1,file_url:""}),u=R({}),v=R(null);pe(()=>{c.add("settings:fetch-license"),y.request({method:"GET",url:"/setting/license/index"}).then(a=>a.data).then(a=>{x.value=a.license}).catch(function(a){p.alert(a.message)}).finally(()=>{c.remove("settings:fetch-license")}),c.add("settings:fetch-cache"),y.request({method:"GET",url:"/setting/cache/index"}).then(a=>a.data).then(a=>{O.value=a.cache}).catch(function(a){p.alert(a.message)}).finally(()=>{c.remove("settings:fetch-cache")}),c.add("settings:fetch-options"),y.request({method:"GET",url:"/setting/option/index"}).then(a=>a.data).then(a=>{u.value=se(a.options)}).then(()=>{var a;v.value=(a=u.value.adobe_fonts)==null?void 0:a.kit}).catch(function(a){p.alert(a.message)}).finally(()=>{c.remove("settings:fetch-options")})}),re(()=>x.value.key,async(a,_)=>{c.isBusy||a!==_&&(c.add("settings:store-license"),y.request({method:"POST",url:"/setting/license/store",data:{license:a}}).then(h=>h.data).then(h=>{var P,I,M,S;x.value=se(h.license),Object.keys(h.notice).length>0?(P=h.notice)!=null&&P.success?p.success((I=h.notice)==null?void 0:I.success):(M=h.notice)!=null&&M.error&&p.alert((S=h.notice)==null?void 0:S.error):p.success("License setting saved.")}).catch(function(h){p.alert(h.message)}).finally(()=>{c.remove("settings:store-license")}))}),re(()=>{var a;return(a=u.value.adobe_fonts)==null?void 0:a.project_id},async(a,_)=>{if(!c.isBusy&&a!==_){if(v.value=null,a===null){Y();return}c.add("settings:fetch-adobe-fonts-kits"),y.request({method:"POST",url:"/setting/adobe-fonts/get-kits",data:{project_id:a}}).then(h=>h.data).then(h=>{v.value=h.data.kit,k(),A()}).catch(function(h){p.alert(h.response.data.message)}).finally(()=>{c.remove("settings:fetch-adobe-fonts-kits")})}});function k(){c.add("settings:store-options"),y.request({method:"POST",url:"/setting/option/store",data:{options:u.value}}).then(a=>a.data).then(a=>{u.value=se(a.options),p.success("Settings saved.")}).catch(function(a){p.alert(a.message)}).finally(()=>{c.remove("settings:store-options")})}function w(){c.add("settings:generate-cache"),y.request({method:"POST",url:"/setting/cache/generate"}).then(a=>a.data).then(a=>{O.value=a.cache}).catch(function(a){p.alert(a.message)}).finally(()=>{c.remove("settings:generate-cache")})}function A(){c.add("settings:sync-adobe-fonts"),y.request({method:"POST",url:"/setting/adobe-fonts/sync",data:{project_id:u.value.adobe_fonts.project_id,kit:v.value}}).then(a=>a.data).then(a=>{p.success("Adobe Fonts synced.")}).catch(function(a){p.alert(a.message)}).finally(()=>{c.remove("settings:sync-adobe-fonts")})}function Y(){c.add("settings:destroy-adobe-fonts"),y.request({method:"POST",url:"/setting/adobe-fonts/destroy"}).then(a=>a.data).then(a=>{p.success("Adobe Fonts cleared.")}).catch(function(a){p.alert(a.message)}).finally(()=>{c.remove("settings:destroy-adobe-fonts")})}return(a,_)=>{const h=me("font-awesome-icon"),P=ge("ripple");return j(),q(ne,null,[a.yabeWebfont.lite_edition?X("",!0):(j(),q("div",Ce,[t("table",Ye,[t("tbody",null,[t("tr",null,[Ie,t("td",null,[oe(t("input",{name:"license_key",type:"password","onUpdate:modelValue":_[0]||(_[0]=I=>x.value.key=I),class:"min-w:25rem"},null,512),[[ve,x.value.key,void 0,{lazy:!0}]]),x.value.is_activated?(j(),q("div",Le,[B(" Status: "),Ae])):(j(),q("p",Fe,[B("Enter your "),He,B(" receive the update of the latest version.")]))])])])])])),t("div",je,[qe,t("table",Be,[t("tbody",null,[t("tr",null,[Pe,t("td",null,[t("p",Ne,[We,O.value.last_generated?(j(),q(ne,{key:0},[B(ye(new(g(Oe))(O.value.last_generated*1e3).format("YYYY-MM-DD HH:mm:ss"))+" ",1),t("a",{href:`${O.value.file_url}?ver=${O.value.last_generated}`,target:"_blank"},[le(h,{icon:["far","arrow-up-right-from-square"],class:"font:13 translateY(-6)"})],8,Ge)],64)):X("",!0),t("span",{class:ce([g(c).isBusy&&(g(c).hasTask("settings:generate-cache")||g(c).hasTask("settings:fetch-cache"))?"visible":"hidden","spinner"])},null,2)]),Ee,t("div",Ue,[t("button",{type:"button",onClick:w,class:"button button-secondary"}," Re-generate cache "),O.value.pending_task?(j(),q(ne,{key:0},[le(h,{icon:["fas","hourglass-clock"],class:"ml:12 fg:gray-50"}),ze],64)):X("",!0)])])]),t("tr",null,[Ve,t("td",null,[t("input",{id:"inline-print",name:"inline_print",type:"checkbox",checked:g(F)(u.value,"cache.inline_print",!1),value:g(F)(u.value,"cache.inline_print",!1),onInput:_[1]||(_[1]=I=>{var M,S;return g(J)(u.value,"cache.inline_print",!((S=(M=u.value)==null?void 0:M.cache)!=null&&S.inline_print))})},null,40,Je),Ze,Ke])])])])]),t("div",Qe,[Re,t("table",Xe,[t("tbody",null,[t("tr",null,[et,t("td",null,[t("input",{id:"media-library",name:"hide_media_library",type:"checkbox",checked:g(F)(u.value,"misc.hide_media_library",!1),value:g(F)(u.value,"misc.hide_media_library",!1),onInput:_[2]||(_[2]=I=>{var M,S;return g(J)(u.value,"misc.hide_media_library",!((S=(M=u.value)==null?void 0:M.misc)!=null&&S.hide_media_library))})},null,40,tt),nt,st])]),t("tr",null,[at,t("td",null,[t("input",{id:"export-bundle-binary",name:"export_bundle_binary",type:"checkbox",checked:g(F)(u.value,"misc.export_bundle_binary",!1),value:g(F)(u.value,"misc.export_bundle_binary",!1),onInput:_[3]||(_[3]=I=>{var M,S;return g(J)(u.value,"misc.export_bundle_binary",!((S=(M=u.value)==null?void 0:M.misc)!=null&&S.export_bundle_binary))})},null,40,it),rt,ot])]),t("tr",null,[lt,t("td",null,[t("input",{id:"disable-user-google-fonts",name:"disable_user_google_fonts",type:"checkbox",checked:g(F)(u.value,"misc.disable_user_google_fonts",!1),value:g(F)(u.value,"misc.disable_user_google_fonts",!1),onInput:_[4]||(_[4]=I=>{var M,S;return g(J)(u.value,"misc.disable_user_google_fonts",!((S=(M=u.value)==null?void 0:M.misc)!=null&&S.disable_user_google_fonts))})},null,40,ct),ut,dt])])])])]),t("div",ht,[ft,t("table",_t,[t("tbody",null,[t("tr",null,[pt,t("td",null,[t("div",mt,[t("input",{type:"text",id:"adobe-font-project-id",name:"adobe_font_project_id",value:g(F)(u.value,"adobe_fonts.project_id",null),onChange:_[5]||(_[5]=I=>g(J)(u.value,"adobe_fonts.project_id",I.target.value===""?null:I.target.value)),class:""},null,40,gt),v.value?(j(),q("button",{key:0,type:"button",onClick:A,class:"button button-secondary"}," Sync fonts ")):X("",!0),t("span",{class:ce([g(c).isBusy&&(g(c).hasTask("settings:fetch-adobe-fonts-kits")||g(c).hasTask("settings:sync-adobe-fonts-kits"))?"visible":"hidden","spinner"])},null,2)]),vt])])])])]),oe((j(),q("button",{type:"button",onClick:k,class:"button button-primary"},[B("Save Changes")])),[[P]])],64)}}};export{St as default};
