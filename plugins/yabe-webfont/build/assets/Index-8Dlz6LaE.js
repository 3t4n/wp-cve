import{e as I,f as V,g as ee,o as n,c as l,h as B,v as ge,b as e,t as i,F as D,i as Z,u as o,d as m,j as G,k as C,_ as he,l as ye,m as Q,n as be,p as ve,r as H,q as N,w as T,s as q,x as _e,y as Y,a as S,z as we,T as ke,A as xe,B as $e,C as Be,D as Pe,E as qe,G as X,H as Se,I as Ae,J as Ce,K as De,L as b}from"./app-BKc7mk60.js";import{c as Re}from"./cloneDeep-BXyhDMfG.js";import{u as W,a as Ee,b as Te}from"./notifier-BZ1LGfDv.js";import{a as Ie}from"./index-DUN6yPFg.js";import{u as de,_ as Ne}from"./vue-contenteditable.es-C4MG-L77.js";import"./_Uint8Array-Dz8rZXn2.js";const Ue={class:"alignleft actions bulkactions"},je=["disabled"],ze={value:"-1"},Me=["value"],Ve=["disabled"],le={__name:"TheBulkAction",props:{actions:{type:Array,default:()=>[]}},emits:["bulkActions"],setup(s,{emit:w}){const $=s,g=W(),h=I("-1");return V(()=>$.actions,()=>{h.value="-1"}),(P,v)=>{const u=ee("ripple");return n(),l("div",Ue,[B(e("select",{id:"bulk-action-selector-top","onUpdate:modelValue":v[0]||(v[0]=k=>h.value=k),name:"action",disabled:o(g).isBusy},[e("option",ze,i(P.__("Bulk actions","yabe-webfont")),1),(n(!0),l(D,null,Z(s.actions,k=>(n(),l("option",{key:k.key,value:k.key},i(k.label),9,Me))),128))],8,je),[[ge,h.value]]),B((n(),l("button",{type:"submit",class:"button action",disabled:o(g).isBusy,onClick:v[1]||(v[1]=k=>P.$emit("bulkActions",h.value))},[m(i(P.__("Apply","yabe-webfont")),1)],8,Ve)),[[u]])])}}},Fe={class:"pagination-links"},Oe=["disabled"],Le=["disabled"],Ge={class:"paging-input mx:0.5"},He=["disabled","max"],We={class:"tablenav-paging-text mx:0.5"},Je={class:"total-pages"},Ke=["disabled"],Xe=["disabled"],re={__name:"ThePagination",props:{isEnableGoto:{type:Boolean,default:!1,required:!1},firstPage:{type:Boolean,default:!1,required:!1},previousPage:{type:Boolean,default:!1,required:!1},nextPage:{type:Boolean,default:!1,required:!1},lastPage:{type:Boolean,default:!1,required:!1},totalPage:{type:Number,default:0,required:!1},currentPage:{type:Number,default:0,required:!1}},emits:["changePage"],setup(s,{emit:w}){const $=s,g=W(),h=w,P=I($.currentPage);return V(P,(v,u)=>{v>0&&v<=$.totalPage&&v!==u&&v!==$.currentPage&&h("changePage",v)}),V(()=>$.currentPage,(v,u)=>{v!==u&&(P.value=$.currentPage)}),(v,u)=>{const k=ee("ripple");return n(),l("span",Fe,[B((n(),l("button",{type:"button",disabled:o(g).isBusy||!s.firstPage,class:"tablenav-pages-navspan button mx:0.5",onClick:u[0]||(u[0]=A=>v.$emit("changePage",1))},[m(" Â« ")],8,Oe)),[[k]]),B((n(),l("button",{type:"button",disabled:o(g).isBusy||!s.previousPage,class:"tablenav-pages-navspan button mx:0.5",onClick:u[1]||(u[1]=A=>v.$emit("changePage",s.currentPage-1))},[m(" â€¹ ")],8,Le)),[[k]]),e("span",Ge,[s.isEnableGoto?B((n(),l("input",{key:0,"onUpdate:modelValue":u[2]||(u[2]=A=>P.value=A),class:"current-page w-14",type:"number",disabled:o(g).isBusy,min:"1",max:s.totalPage},null,8,He)),[[G,P.value,void 0,{number:!0}]]):C("",!0),e("span",We,[m(i(s.isEnableGoto===!1?s.currentPage:"")+" of ",1),e("span",Je,i(s.totalPage),1)])]),B((n(),l("button",{type:"button",disabled:o(g).isBusy||!s.nextPage,class:"next-page button mx:0.5",onClick:u[3]||(u[3]=A=>v.$emit("changePage",s.currentPage+1))},[m(" â€º ")],8,Ke)),[[k]]),B((n(),l("button",{type:"button",disabled:o(g).isBusy||!s.lastPage,class:"tablenav-pages-navspan button mx:0.5",onClick:u[4]||(u[4]=A=>v.$emit("changePage",s.totalPage))},[m(" Â» ")],8,Xe)),[[k]])])}}},te=s=>(xe("data-v-f4ccce0c"),s=s(),$e(),s),Ze={key:0,class:"plugin-deleted-tr inactive deleted"},Qe={colspan:"7",class:"plugin-update colspanchange"},Ye={key:1,class:"plugin-deleted-tr inactive deleted"},et={colspan:"7",class:"plugin-update colspanchange"},tt=["value","disabled"],st={key:0,width:"1%",class:"manage-column vertical:middle"},at={width:"20%",class:"vertical:middle rel"},nt={class:"flex align-items:center"},ot={key:0,title:"Google Fonts",class:"flex align-items:center mr:6"},it=te(()=>e("svg",{class:"w:20 h:20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},[e("path",{fill:"none",d:"M0 0h16v16H0z"}),e("path",{fill:"#F29900",d:"M13.5 2H8L1 13h5.5z"}),e("path",{fill:"#1A73E8",d:"M8 2h5v11H8z"}),e("circle",{fill:"#EA4335",cx:"3.25",cy:"4.25",r:"2.25"}),e("path",{fill:"#0D652D",d:"M13.33 10L13 13c-1.66 0-3-1.34-3-3s1.34-3 3-3l.33 3z"}),e("path",{fill:"#174EA6",d:"M10.5 4.5A2.5 2.5 0 0113 2l.45 2.5L13 7a2.5 2.5 0 01-2.5-2.5z"}),e("path",{fill:"#1A73E8",d:"M13 2a2.5 2.5 0 010 5"}),e("path",{fill:"#34A853",d:"M13 7c1.66 0 3 1.34 3 3s-1.34 3-3 3"})],-1)),lt=[it],rt={key:1,title:"Adobe Fonts",class:"flex align-items:center mr:6"},dt=te(()=>e("svg",{class:"w:20 h:20","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},[e("g",null,[e("rect",{class:"cls-1",fill:"#000b1d",y:"0.5",width:"32",height:"31",rx:"5.64848"}),e("path",{class:"cls-2",fill:"#fff",d:"M17.63921,13.46488c-.74711,2.504-1.37579,4.91772-2.12289,7.28029a12.90012,12.90012,0,0,1-1.47406,3.41265,4.1921,4.1921,0,0,1-3.31166,1.777c-1.02992,0-2.03957-.48468-2.03957-1.5549A1.40176,1.40176,0,0,1,9.92281,23.0876a.61424.61424,0,0,1,.56539.32311c.50483.90867.98951,1.43364,1.21164,1.43364s.40383-.30284.76725-1.61534l2.65045-9.76247-1.90691-.00211a.91358.91358,0,0,1,.30208-1.03289h1.89816a17.53964,17.53964,0,0,1,1.3978-3.43866,5.04817,5.04817,0,0,1,4.36161-2.928c1.51448,0,2.14044.72695,2.14044,1.65589A1.52543,1.52543,0,0,1,22.01837,9.215c-.323,0-.48456-.24228-.58555-.58555-.34326-1.29235-.78752-1.676-1.05007-1.676s-.66638.48456-1.11052,1.49421a25.74394,25.74394,0,0,0-1.343,3.99058l2.30933-.003a.86867.86867,0,0,1-.31678,1.02946Z"})])],-1)),ct=[dt],ut=["href"],ft={class:"invisible .group:hover_{visible} fg:gray-40 font-normal pl:4"},pt={class:"row-actions visible"},mt={width:"20%",class:"vertical:middle"},gt={class:"group flex align-items:center"},ht={class:"group-hover:hidden"},yt={class:"hidden group-hover:block font:semibold"},bt=te(()=>e("span",{class:"text-[#0050ff]"},"var",-1)),vt={class:"text-[#1fa87a]"},_t={width:"10%",class:"vertical:middle"},wt={class:"flex align-items:center {ml:12}>*+*"},kt=["title"],xt={class:"vertical:middle"},$t={__name:"TheFontIndexRow",props:{item:{type:Object,required:!0},preview:{type:Object,required:!0}},emits:["delete","restore","updateStatus"],setup(s,{emit:w}){const $=W(),g=s,h=w,P=ye("selectedItems");function v(){switch(g.item.type){case"google-fonts":return"fonts.edit.google-fonts";case"custom":default:return"fonts.edit.custom"}}function u(d){switch(d){case"woff2":case"font/woff2":return"woff2";case"woff":case"font/woff":return"woff";case"ttf":case"font/ttf":return"truetype";case"otf":case"font/otf":return"opentype";case"eot":case"font/eot":return"embedded-opentype";default:return"woff2"}}const k=Q(()=>{let d="";return g.item.family&&g.item.font_faces.forEach(r=>{if(r.comment&&(d+=`/* ${r.comment} */
`),d+=`@font-face {
`,d+=`	font-family: '${g.item.family}';
`,d+=`	font-style: ${r.style};
`,r.weight!==""&&(d+=`	font-weight: ${r.weight};
`),d+=`	font-display: ${r.display||g.item.metadata.display};
`,r.files.length>0){d+="	src: ";let x=r.files.map(U=>`url('${U.attachment_url}') format("${u(U.extension)}")`);d+=x.join(`,
		`),d+=`;
`}r.unicodeRange&&(d+=`	unicode-range: ${r.unicodeRange};
`),d+=`}

`}),d}),A=Q(()=>{let d="";return g.item.family&&(d+=k.value,d=d.replace(/\t/g,"  "),d=d.replace(/<family>/g,g.item.family)),d});function j(){return{fontFamily:g.item.family,fontSize:`${g.preview.fontSize}px`,fontWeight:g.preview.fontWeight,fontStyle:"normal"}}let f=null;be(()=>{f=document.querySelector(`#yabe-webfont-preview-${g.item.id}`),f||(f=document.createElement("style"),f.setAttribute("id",`yabe-webfont-preview-${g.item.id}`),document.head.appendChild(f),f.innerHTML=A.value)}),ve(()=>{f&&document.head.removeChild(f)});function c(d){d.code==="Space"&&(d.preventDefault(),h("updateStatus"))}return(d,r)=>{const x=H("font-awesome-icon"),U=H("router-link");return n(),N(ke,{mode:"out-in"},{default:T(()=>[s.item.isDeleted?(n(),l("tr",Ze,[e("td",Qe,[e("strong",null,i(s.item.title),1),m(" was successfully "+i(s.item.deleted_at==null?"moved to the Trash":"permanently deleted")+". ",1)])])):s.item.isRestored?(n(),l("tr",Ye,[e("td",et,[e("strong",null,i(s.item.title),1),m(" was successfully restored. ")])])):(n(),l("tr",{key:2,class:q([{active:s.item.status&&s.item.deleted_at==null,inactive:!s.item.status||s.item.deleted_at!=null},"group"])},[e("th",{scope:"row",class:q([{"pl:6":!s.item.status,"pl:8":s.item.deleted_at!==null},"vertical:middle py:8 ywf-check-column"])},[B(e("input",{"onUpdate:modelValue":r[0]||(r[0]=R=>_e(P)?P.value=R:null),type:"checkbox",value:s.item.id,disabled:o($).isBusy},null,8,tt),[[Y,o(P)]])],2),s.item.deleted_at==null?(n(),l("td",st,[S(o(de),{"aria-disabled":o($).isBusy,checked:s.item.status,onClick:r[1]||(r[1]=R=>d.$emit("updateStatus")),onKeyup:c,class:q([[s.item.status?"bg:sky-60":"opacity:.5 bg:gray-85"],"rel inline-flex p:0 h:24 w:44 flex-shrink:0 cursor:pointer rounded b:2 b:transparent transition-property:color,background-color,border-color,text-decoration-color,fill,stroke transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|2,rgb(14,165,233)|0|0|0|4,rgba(0,0,0,0)|0|0|0|0:focus outline:2|solid|transparent:focus"])},{default:T(()=>[e("span",{class:q([[s.item.status?"translateX(20)":"translateX(0)"],"pointer-events:none rel inline-block font:12 h:20 w:20 rounded bg:white transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|0,rgba(59,130,246,0.5)|0|0|0|0,rgba(0,0,0,0.1)|0|1|3|0,rgba(0,0,0,0.1)|0|1|2|-1"])},[e("span",{"aria-hidden":"true",class:q([[s.item.status?"opacity:0 transition-timing-function:ease-out transition-duration:100":"opacity:1 transition-timing-function:ease-in transition-duration:200"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[s.item.isUpdatingStatus?(n(),N(x,{key:1,icon:["fas","spinner"],class:"animation:rotate|linear|1s|infinite fg:gray-60"})):(n(),N(x,{key:0,icon:["fas","xmark"],class:"fg:gray-60"}))],2),e("span",{"aria-hidden":"true",class:q([[s.item.status?"opacity:1 transition-timing-function:ease-in transition-duration:200":"opacity:0 transition-timing-function:ease-out transition-duration:100"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[s.item.isUpdatingStatus?(n(),N(x,{key:1,icon:["fas","spinner"],class:"animation:rotate|linear|1s|infinite fg:sky-60"})):(n(),N(x,{key:0,icon:["fas","check"],class:"fg:sky-60"}))],2)],2)]),_:1},8,["aria-disabled","checked","class"])])):C("",!0),e("td",at,[e("div",nt,[s.item.type==="google-fonts"?(n(),l("div",ot,lt)):s.item.type==="adobe-fonts"?(n(),l("div",rt,ct)):C("",!0),s.item.type==="adobe-fonts"?(n(),l("a",{key:2,href:`https://fonts.adobe.com/fonts/${s.item.slug}`,target:"_blank",class:"font:semibold"},i(s.item.title),9,ut)):s.item.deleted_at==null?(n(),N(U,{key:3,to:{name:v(),params:{id:s.item.id}},class:q({"font:semibold":s.item.status})},{default:T(()=>[m(i(s.item.title),1)]),_:1},8,["to","class"])):(n(),l(D,{key:4},[m(i(s.item.title),1)],64)),e("span",ft,"ID: "+i(s.item.id),1)]),e("div",pt,[s.item.type!=="adobe-fonts"?(n(),l(D,{key:0},[s.item.deleted_at==null?(n(),l(D,{key:0},[S(U,{to:{name:v(),params:{id:s.item.id}}},{default:T(()=>[m(i(d.__("Edit","yabe-webfont")),1)]),_:1},8,["to"]),m(" | "),e("a",{class:q([{"cursor:wait":o($).isBusy},"fg:red-80 cursor:pointer fg:red-90:hover"]),onClick:r[2]||(r[2]=R=>d.$emit("delete"))},i(s.item.isDeleting?"Deleting...":"Trash"),3)],64)):(n(),l(D,{key:1},[e("a",{class:q([{"cursor:wait":o($).isBusy},"cursor:pointer"]),onClick:r[3]||(r[3]=R=>d.$emit("restore"))},i(s.item.isRestoring?"Restoring...":"Restore"),3),m(" | "),e("a",{class:q([{"cursor:wait":o($).isBusy},"fg:red-80 cursor:pointer fg:red-90:hover"]),onClick:r[4]||(r[4]=R=>d.$emit("delete"))},i(s.item.isDeleting?"Deleting...":"Delete Permanently"),3)],64))],64)):C("",!0)])]),e("td",mt,[e("div",gt,[e("span",ht,i(s.item.family),1),e("div",yt,[bt,m("("),e("span",vt,"--ywf--family-"+i(s.item.family.replace(/[^a-zA-Z0-9\-_]+/g,"-").toLowerCase()),1),m(") ")])])]),e("td",_t,[e("div",wt,[e("span",{title:new Date(s.item.updated_at*1e3),class:"text:underline decoration-dotted text-gray-700"},i(o(Ie)(new Date(s.item.updated_at*1e3))),9,kt)])]),e("td",xt,[S(o(Ne),{tag:"div",modelValue:s.preview.text,"onUpdate:modelValue":r[5]||(r[5]=R=>s.preview.text=R),style:we(j()),class:"preview-text lh:1.25"},null,8,["modelValue","style"])])],2))]),_:1})}}},Bt=he($t,[["__scopeId","data-v-f4ccce0c"]]),Pt={key:0,class:"subtitle"},qt=["disabled"],St=e("hr",{class:"invisible m:0 mt:-2"},null,-1),At={class:"upload-plugin-wrap"},Ct=e("p",{class:"install-help"},[m("Import "),e("code",null,"ywf-exported-{timestamp}.json"),m(' file by locating the file and clicking "Import json" button.')],-1),Dt={class:"wp-upload-form"},Rt={class:"subsubsub"},Et={class:"all"},Tt={class:"count"},It={class:"trash pl:4"},Nt={class:"count"},Ut={class:"search-box rel"},jt=["disabled"],zt=["disabled"],Mt={class:"tablenav top"},Vt={class:"tablenav-pages pb:12"},Ft={class:"displaying-num"},Ot=e("br",{class:"clear"},null,-1),Lt={class:"wp-list-table widefat table-auto min-w:full plugins"},Gt={class:"manage-column column-cb ywf-check-column px:2 vertical:middle"},Ht={key:0,class:"manage-column"},Wt={scope:"col"},Jt={scope:"col"},Kt={scope:"col"},Xt={scope:"col",class:"flex align-items:center"},Zt={class:"px:16 h:fit flex r:6 shadow-sm"},Qt=e("span",{class:"inline-flex align-items:center rl:6 b:1|solid|gray-30/.5 br:0 bg:gray-5 px:12 fg:gray-40 font:12 lh:16px"},"size",-1),Yt=e("span",{class:"inline-flex align-items:center rr:6 b:1|solid|gray-30/.5 bl:0 bg:gray-5 px:12 fg:gray-40 font:12 lh:16px"},"px",-1),es={class:"h:fit flex r:6 shadow-sm"},ts=e("span",{class:"inline-flex align-items:center rl:6 b:1|solid|gray-30/.5 br:0 bg:gray-5 px:12 fg:gray-40 font:12 lh:16px"},"weight",-1),ss={key:0},as={key:1},ns={class:"inactive animation:skeleton|2s|infinite"},os=e("th",{scope:"row",class:"vertical:middle py:8 ywf-check-column"},[e("input",{type:"checkbox",value:"0",disabled:""})],-1),is={key:0,width:"1%",class:"manage-column vertical:middle"},ls={class:"translateX(0) pointer-events:none rel inline-block h:20 w:20 rounded bg:white box-shadow:0|0"},rs={"aria-hidden":"true",class:"abs inset:0 flex h:full w:full align-items:center justify-content:center opacity:1"},ds={width:"20%"},cs=e("div",{class:"h:12 bg:slate-30 r:4 w:1/2"},null,-1),us={class:"row-actions visible mt-1 align-items:center flex"},fs=e("a",{class:"px:4 cursor:pointer"}," Edit ",-1),ps=e("a",{class:"px:4 fg:red-80 cursor:wait fg:red-90:hover"}," Trash ",-1),ms=e("a",{class:"px:4 cursor:pointer"}," Restore ",-1),gs=e("a",{class:"px:4 fg:red-80 cursor:wait fg:red-90:hover"}," Delete Permanently ",-1),hs=e("td",{width:"20%",class:"align-items:center vertical:middle"},[e("div",{class:"h:12 bg:slate-30 r:4 w:1/2"})],-1),ys=e("td",{width:"10%",class:"align-items:center vertical:middle"},[e("div",{class:"h:12 bg:slate-30 r:4 w:full"})],-1),bs=e("td",{class:"vertical:middle"},[e("div",{class:"h:12 bg:slate-30 r:4 w:11/12"})],-1),vs={key:2},_s={colspan:"5"},ws={class:"manage-column column-cb ywf-check-column px:2 vertical:middle"},ks={key:0,class:"manage-column"},xs={scope:"col"},$s={scope:"col"},Bs={scope:"col"},Ps={scope:"col"},qs={class:"tablenav bottom"},Ss={class:"tablenav-pages"},As={class:"displaying-num"},Cs=e("br",{class:"clear"},null,-1),Us={__name:"Index",setup(s){const w=Be(),$=Pe(),g=Ee(),h=W(),P=qe(),v=I(null),u=Te(),k=I(null),A=I(!1),j=X({text:"The quick brown fox jumps over a lazy dog",fontSize:18,fontWeight:400,lineHeight:1.5}),f=X({page:w.query.page?Number(w.query.page):1,search:w.query.search||"",per_page:w.query.per_page?Number(w.query.per_page):20,soft_deleted:w.query.soft_deleted?Number(w.query.soft_deleted):0}),c=X({current_page:0,from:0,last_page:0,to:0,total_filtered:0,total_exists:0,total_deleted:0,skeleton:5}),d=I({}),r=I([]),x=I([]);Se("selectedItems",x);const U=h.hasTask;function R(){$.push({name:"fonts.index",query:{...w.query,...f}})}Ae(()=>{h.reset(),F()}),V(()=>f.search,(t,a)=>{t===""&&w.query.search.trim()!==t&&ae(!0)});function se(t){f.page=t,R()}Ce((t,a)=>{t.query.page!==a.query.page&&(f.page=t.query.page?Number(t.query.page):1),t.query.per_page!==a.query.per_page&&(f.per_page=t.query.per_page?Number(t.query.per_page):20),t.query.soft_deleted!==a.query.soft_deleted&&(f.soft_deleted=t.query.soft_deleted?Number(t.query.soft_deleted):0),F()});function ae(t=!1){f.page=1,t&&(f.search=""),R()}function F(){h.add("fonts.index:fetch-items"),g.request({method:"GET",url:"/fonts/index",params:{page:f.page,search:f.search,per_page:f.per_page,soft_deleted:f.soft_deleted}}).then(t=>t.data).then(t=>{r.value=t.data.map(a=>(a.isDeleted=!1,a.isDeleting=!1,a.isUpdatingStatus=!1,a.isRestored=!1,a.isRestoring=!1,a)),c.total_exists=t.meta.total_exists,c.total_deleted=t.meta.total_deleted,c.total_filtered=t.meta.total_filtered,c.current_page=t.meta.page,c.from=t.meta.from,c.to=t.meta.to,c.last_page=t.meta.total_pages,c.skeleton=t.data.length>0?t.data.length:5,z(),fe()}).catch(function(t){u.alert(t.message)}).finally(()=>{h.remove("fonts.index:fetch-items"),z()})}function J(t,a=null){a!==t.status&&(h.add("fonts.index:update-status"),t.isUpdatingStatus=!0,g.request({method:"PATCH",url:`/fonts/update-status/${t.id}`,data:{status:a!==null?a:!t.status}}).then(p=>p.data).then(p=>{t.status=p.status}).catch(function(p){u.alert(p.message)}).finally(()=>{t.isUpdatingStatus=!1,h.remove("fonts.index:update-status")}))}function ne(t){t.isDeleting=!0,h.add("fonts.index:delete"),g.request({method:"POST",url:`/fonts/delete/${t.id}`}).then(a=>{t.isDeleted=!0}).catch(function(a){u.alert(a.message)}).finally(()=>{t.isDeleting=!1,h.remove("fonts.index:delete")})}function oe(t){h.add("fonts.index:restore"),t.isRestoring=!0,g.request({method:"POST",url:`/fonts/restore/${t.id}`}).then(a=>{t.isRestored=!0}).catch(function(a){u.alert(a.message)}).finally(()=>{t.isRestoring=!1,h.remove("fonts.index:restore")})}function ce(t){h.add("fonts.index:export"),g.request({method:"POST",url:"/fonts/export",data:{items:t}}).then(a=>a.data.data).then(a=>{const p=new Blob([JSON.stringify(a)],{type:"application/json"}),y=document.createElement("a");y.href=window.URL.createObjectURL(p),y.download=`ywf-exported-${a.export_time}.json`,y.click()}).catch(function(a){u.alert(a.message)}).finally(()=>{h.remove("fonts.index:export")})}function ue(){if(k.value.files.length===0){u.alert("Please select a file to import.");return}const t=k.value.files[0];if(t.type!=="application/json"){u.alert("Please select a valid JSON file.");return}const a=new FileReader;a.onload=function(p){const y=JSON.parse(p.target.result);if(y==null){u.alert("Please select a valid JSON file.");return}if(!y.hasOwnProperty("module_id")||y.module_id!==yabeWebfont.option_namespace){u.alert("Please select a valid JSON file.");return}let M=0;const _=()=>{if(M<y.items.length){const E=y.items[M];h.add("fonts.index:import");const pe=g.request({method:"POST",url:"/fonts/import",data:{site_url:y.site_url,is_bundled:y.is_bundled,version:y.version,item:E}}).then(K=>{const me=$.resolve({name:`fonts.edit.${E.type}`,params:{id:K.data.id}}).href;P.add({type:"success",message:`<p>Font "${E.title}" imported successfully. <a href="${me}">Edit Font</a></p>`})}).catch(function(K){throw P.add({type:"error",message:`<p>Failed to import font "${E.title}".`}),K}).finally(()=>{h.remove("fonts.index:import"),M++,_()});u.async(pe,`Successfully imported font: ${E.title}.`,`Failed to import font: ${E.title}.`,`Importing font: ${E.title}...`)}else F()};_()},a.readAsText(t),k.value.value=""}const O=Q({get(){if(r.value.length>0){let t=!0;for(const[a,p]of r.value.entries())if(x.value.includes(p.id)||(t=!1),!t)break;return t}return!1},set(t){const a=[];t&&r.value.forEach(p=>{a.push(p.id)}),x.value=a}});function z(){x.value=[]}const L=I([]);V(()=>f.soft_deleted,()=>{f.soft_deleted?L.value=[{key:"restore",label:"Restore"},{key:"delete",label:"Delete permanently"}]:L.value=[{key:"activate",label:"Activate"},{key:"deactivate",label:"Deactivate"},{key:"export",label:"Export"},{key:"delete",label:"Delete"}]},{immediate:!0});function ie(t){if(t!=="-1")switch(t){case"delete":confirm(b("Are you sure you want to delete the selected font(s)?","yabe-webfont"))&&(x.value.forEach(async a=>{const p=r.value.find(y=>y.id===a);p.type!=="adobe-fonts"&&ne(p)}),z());break;case"deactivate":confirm(b("Are you sure you want to deactivate the selected font(s)?","yabe-webfont"))&&(x.value.forEach(async a=>{const p=r.value.find(y=>y.id===a);J(p,!1)}),z());break;case"activate":confirm(b("Are you sure you want to activate the selected font(s)?","yabe-webfont"))&&(x.value.forEach(async a=>{const p=r.value.find(y=>y.id===a);J(p,!0)}),z());break;case"restore":confirm(b("Are you sure you want to restore the selected font(s)?","yabe-webfont"))&&(x.value.forEach(async a=>{const p=r.value.find(y=>y.id===a);oe(p)}),z());break;case"export":if(x.value.length===0){u.alert(b("Please select at least one font to export.","yabe-webfont"));return}ce(x.value),z();break}}function fe(){let t=document.getElementById("typekit-css");t||(t=document.createElement("link"),t.setAttribute("id","typekit-css"),t.setAttribute("rel","stylesheet"),document.head.appendChild(t)),h.add("settings:fetch-options"),g.request({method:"GET",url:"/setting/option/index"}).then(a=>a.data).then(a=>{var y;d.value=Re(a.options);const p=(y=d.value.adobe_fonts)==null?void 0:y.project_id;p&&t.setAttribute("href",`https://use.typekit.net/${p}.css`)}).catch(function(a){u.alert(a.message)}).finally(()=>{h.remove("settings:fetch-options")})}return(t,a)=>{const p=H("router-link"),y=H("font-awesome-icon"),M=ee("ripple");return n(),l(D,null,[S(p,{to:{name:"fonts.create.custom"},class:"page-title-action"},{default:T(()=>[m(i(o(b)("Add New","yabe-webfont")),1)]),_:1},8,["to"]),B((n(),l("button",{onClick:a[0]||(a[0]=_=>A.value=!A.value),class:"page-title-action"},[m("Import")])),[[M]]),S(p,{to:{name:"fonts.create.google-fonts"},class:"page-title-action"},{default:T(()=>[m(i(o(b)("Import Google Fonts","yabe-webfont")),1)]),_:1},8,["to"]),o(w).query.search?(n(),l("span",Pt,[m(i(o(b)("Search results for","yabe-webfont"))+": ",1),e("strong",null,i(o(w).query.search),1)])):C("",!0),B((n(),l("button",{type:"button",disabled:o(h).isBusy,onClick:F,class:"button float:right"},[m(" refresh ðŸ”„ï¸")],8,qt)),[[M]]),St,e("div",At,[e("div",{class:q([{block:A.value},"upload-plugin"])},[Ct,e("div",Dt,[e("input",{type:"file",ref_key:"importfile",ref:k,id:"importfile",name:"importfile",accept:".json"},null,512),e("div",{onClick:ue,class:"button"},"Import json")])],2)]),e("ul",Rt,[e("li",Et,[S(p,{to:{name:"fonts.index",query:{...o(w).query,soft_deleted:0,page:1}},class:q({current:!f.soft_deleted})},{default:T(()=>[m(i(o(b)("All","yabe-webfont"))+" ",1),e("span",Tt," ("+i(c.total_exists)+") ",1)]),_:1},8,["to","class"]),m(" | ")]),e("li",It,[S(p,{to:{name:"fonts.index",query:{...o(w).query,soft_deleted:1,page:1}},class:q({current:!!f.soft_deleted})},{default:T(()=>[m(i(o(b)("Trash","yabe-webfont"))+" ",1),e("span",Nt," ("+i(c.total_deleted)+") ",1)]),_:1},8,["to","class"])])]),e("p",Ut,[B(e("input",{type:"search",id:"searchInput",name:"s","onUpdate:modelValue":a[1]||(a[1]=_=>f.search=_),onKeyup:a[2]||(a[2]=De(_=>t.$refs.searchBtn.click(),["enter"])),disabled:o(h).isBusy},null,40,jt),[[G,f.search,void 0,{trim:!0,lazy:!0}]]),B((n(),l("button",{type:"button",class:"button",disabled:o(h).isBusy,ref_key:"searchBtn",ref:v,onClick:a[3]||(a[3]=_=>ae())},[m(i(o(b)("Search","yabe-webfont"))+" ðŸ”",1)],8,zt)),[[M]])]),e("div",Mt,[S(le,{actions:L.value,onBulkActions:ie},null,8,["actions"]),e("div",Vt,[e("span",Ft,i(`${c.total_filtered} ${o(b)("items","yabe-webfont")}`),1),c.last_page>1?(n(),N(re,{key:0,"is-enable-goto":!0,"current-page":c.current_page,"first-page":c.current_page-1>1,"previous-page":c.current_page>1,"next-page":c.current_page<c.last_page,"last-page":c.current_page+1<c.last_page,"total-page":c.last_page,onChangePage:se},null,8,["current-page","first-page","previous-page","next-page","last-page","total-page"])):C("",!0)]),Ot]),e("table",Lt,[e("thead",null,[e("tr",null,[e("td",Gt,[B(e("input",{"onUpdate:modelValue":a[4]||(a[4]=_=>O.value=_),class:"ml:12",type:"checkbox"},null,512),[[Y,O.value]])]),f.soft_deleted?C("",!0):(n(),l("td",Ht)),e("th",Wt,i(o(b)("Title","yabe-webfont")),1),e("th",Jt,i(o(b)("Font Family","yabe-webfont")),1),e("th",Kt,i(o(b)("Modified","yabe-webfont")),1),e("th",Xt,[m(i(o(b)("Preview","yabe-webfont"))+" ",1),r.value.length>0?(n(),l(D,{key:0},[e("div",Zt,[Qt,B(e("input",{type:"number","onUpdate:modelValue":a[5]||(a[5]=_=>j.fontSize=_),class:"block min-w:0 w:64 min-h:0 h:24 mx:0 py:0 px:8 b:1|solid|gray-30/.5 r:0 font:12 lh:16px"},null,512),[[G,j.fontSize]]),Yt]),e("div",es,[ts,B(e("input",{type:"number",min:"1",max:"1000","onUpdate:modelValue":a[6]||(a[6]=_=>j.fontWeight=_),class:"block min-w:0 w:64 min-h:0 h:24 mx:0 py:0 px:8 r:0 rr:6 b:1|solid|gray-30/.5 font:12 lh:16px"},null,512),[[G,j.fontWeight]])])],64)):C("",!0)])])]),r.value.length>0&&!o(U)("fonts.index:fetch-items")?(n(),l("tbody",ss,[(n(!0),l(D,null,Z(r.value,_=>(n(),N(Bt,{key:_.id,item:_,preview:j,onDelete:E=>ne(_),onRestore:E=>oe(_),onUpdateStatus:E=>J(_,null)},null,8,["item","preview","onDelete","onRestore","onUpdateStatus"]))),128))])):o(U)("fonts.index:fetch-items")?(n(),l("tbody",as,[(n(!0),l(D,null,Z(c.skeleton,_=>(n(),l("tr",ns,[os,f.soft_deleted?C("",!0):(n(),l("td",is,[S(o(de),{checked:!1,class:"opacity:.5 bg:gray-85 rel inline-flex p:0 h:24 w:44 flex-shrink:0 cursor:pointer rounded b:2 b:transparent"},{default:T(()=>[e("span",ls,[e("span",rs,[S(y,{icon:["fas","spinner"],class:"animation:rotate|linear|1s|infinite font:12 fg:gray-60"})])])]),_:1})])),e("td",ds,[cs,e("div",us,[f.soft_deleted?(n(),l(D,{key:1},[ms,m(" | "),gs],64)):(n(),l(D,{key:0},[fs,m(" | "),ps],64))])]),hs,ys,bs]))),256))])):(n(),l("tbody",vs,[e("tr",null,[e("td",_s,[m(i(o(b)("It looks like you don't have any fonts.","yabe-webfont"))+" ",1),S(p,{to:{name:"fonts.create.custom"}},{default:T(()=>[m(i(o(b)("Perhaps you would like to add a new one?","yabe-webfont")),1)]),_:1},8,["to"])])])])),e("tfoot",null,[e("tr",null,[e("td",ws,[B(e("input",{"onUpdate:modelValue":a[7]||(a[7]=_=>O.value=_),class:"ml:12",type:"checkbox"},null,512),[[Y,O.value]])]),f.soft_deleted?C("",!0):(n(),l("td",ks)),e("th",xs,i(o(b)("Title","yabe-webfont")),1),e("th",$s,i(o(b)("Font Family","yabe-webfont")),1),e("th",Bs,i(o(b)("Modified","yabe-webfont")),1),e("th",Ps,i(o(b)("Preview","yabe-webfont")),1)])])]),e("div",qs,[S(le,{actions:L.value,onBulkActions:ie},null,8,["actions"]),e("div",Ss,[e("span",As,i(`${c.total_filtered} ${o(b)("items","yabe-webfont")}`),1),c.last_page>1?(n(),N(re,{key:0,"current-page":c.current_page,"first-page":c.current_page-1>1,"previous-page":c.current_page>1,"next-page":c.current_page<c.last_page,"last-page":c.current_page+1<c.last_page,"total-page":c.last_page,onChangePage:se},null,8,["current-page","first-page","previous-page","next-page","last-page","total-page"])):C("",!0)]),Cs])],64)}}};export{Us as default};
