import{C as K,D as Q,E as ee,M as te,e as v,f as B,G as oe,H as se,m as E,n as ae,P as ne,L as $,p as ie,r as q,g as le,o as F,c as A,b as e,t as U,u as m,h as c,j as g,v as re,y as de,d as k,a as f,w as C,x as ce,q as Y,s as V,T as ue,F as fe,k as pe,N as me}from"./app-BKc7mk60.js";import{d as he}from"./sortBy-BqMZ_GtY.js";import{i as ve}from"./isEqual-BQkVrltG.js";import{c as ge}from"./cloneDeep-BXyhDMfG.js";import{a as _e}from"./index-DUN6yPFg.js";import{a as ye,u as be,b as we}from"./notifier-BZ1LGfDv.js";import{u as xe,_ as ke,T as Ve}from"./TheBulkUpload-BhJQqJqz.js";import{u as Se,a as $e,o as Fe}from"./vue-contenteditable.es-C4MG-L77.js";import"./_Uint8Array-Dz8rZXn2.js";import"./get-CSpXgK6E.js";const Ue={class:"mr:8 font:24 lh:32px"},Ce={id:"poststuff"},De={id:"post-body-content"},ze={id:"titlediv"},Te={id:"titlewrap"},Ne=e("label",{class:"screen-reader-text",for:"title"},"Add title",-1),Pe=["placeholder"],Be=e("div",{class:"inside"},null,-1),Ee={class:"postarea wp-editor-expand"},qe={id:"wp-content-wrap",class:"wp-core-ui mt:32"},Ae=e("h3",null,"Meta",-1),Re={class:"grid grid-cols:12 gap:16"},je={class:"grid-col-span:4 flex flex:col gap:6"},Me=e("label",{for:"family",class:"font:14 lh:20px font:semibold"},"Font Family",-1),Le={class:"grid-col-span:2 flex flex:col gap:6"},He=e("label",{for:"display",class:"font:14 lh:20px font:semibold"},"Font Display",-1),Ie=me('<option value="auto">auto</option><option value="block">block</option><option value="swap">swap</option><option value="fallback">fallback</option><option value="optional">optional</option>',5),Ye=[Ie],Ge={class:"grid-col-span:4 flex flex:col gap:6"},Oe=e("label",{for:"selector",class:"font:14 lh:20px font:semibold"},"CSS Selector | Fallback Font",-1),Xe={class:"grid-col-span:2 flex flex:col gap:6"},We=e("span",{class:"font:14 lh:20px font:semibold"},"Preload",-1),Ze={class:"flex:1|1|0% flex align-items:center"},Je={for:"preload",class:"font:14 lh:20px"},Ke={class:"flex align-items:center {ml:8}>*+* mt:32 mb:12"},Qe={class:"flex:1|1|0%"},et={class:"font-files"},tt={class:"grid gap:16"},ot={id:"postbox-container-1",class:"postbox-container"},st={id:"submitdiv",class:"postbox"},at=e("div",{class:"postbox-header"},[e("h2",{class:""},"Publish")],-1),nt={class:"inside"},it={class:"submitbox",id:"submitpost"},lt={id:"minor-publishing"},rt={id:"misc-publishing-actions"},dt={class:"misc-pub-section"},ct={class:"py:6 flex align-items:center"},ut=e("span",{class:"pl:10 pr:8"},"Status:",-1),ft=e("div",{class:"clear"},null,-1),pt={id:"major-publishing-actions"},mt={id:"delete-action"},ht={id:"publishing-action"},vt=["disabled"],gt=e("div",{class:"clear"},null,-1),_t={class:"flex flex:col {mt:8}>*+* py:8 px:8 b:1|solid|gray-30/.5"},yt=e("div",{class:"font:semibold font:16 lh:24px"},"Preview :",-1),bt={class:"h:fit flex r:6 shadow-sm"},wt=e("span",{class:"inline-flex align-items:center rl:6 b:1|solid|gray-30/.5 br:0 bg:gray-5 px:12 fg:gray-60 font:12 lh:16px"},"width",-1),xt=["min","max"],kt=["min","max"],Vt={class:"h:fit flex r:6 shadow-sm"},St=e("span",{class:"inline-flex align-items:center rl:6 b:1|solid|gray-30/.5 br:0 bg:gray-5 px:12 fg:gray-60 font:12 lh:16px"},"weight",-1),$t=["min","max"],Ft=["min","max"],Ut={class:"h:fit flex r:6 shadow-sm"},Ct=e("span",{class:"inline-flex align-items:center rl:6 b:1|solid|gray-30/.5 br:0 bg:gray-5 px:12 fg:gray-60 font:12 lh:16px"},"size",-1),Dt={class:"h:fit flex align-items:stretch rel r:6 shadow-sm"},zt=e("div",{class:"abs top:0 bottom:0 right:0 flex py:4 pr:6"},[e("kbd",{class:"inline-flex align-items:center r:4 b:1|solid|gray-20 px:4 fg:gray-60"},"px")],-1),Tt={id:"postbox-container-2",class:"postbox-container mt:12"},Nt={key:0,class:"mt:16"},Pt=e("h3",{class:"mt:20"},"CSS Preview",-1),Bt={id:"post-status-info",class:"b:1|solid|#c3c4c7"},Et={class:"pl:8"},qt=["title"],At={class:"autosave-info"},Rt=["title"],Jt={__name:"Edit",setup(jt){const G=K(),R=Q(),T=ye(),_=be(),D=we(),z=ee(),j=xe(),{fontFaces:p}=te(j),y=v(""),n=v(""),w=v("auto"),b=v(""),S=v(!1),d=v(!0),i=v({}),N=v(!1);B(n,(t,o)=>{(y.value===""||y.value===o)&&(y.value=t)});const O=()=>{j.add()},a=oe({text:"The quick brown fox jumps over a lazy dog",fontSize:18,lineHeight:1.5,fontFamily:n,weight:{current:400,min:1,max:1e3},width:{current:100,min:25,max:200}});se("fontFamily",n);function X(t){switch(t){case"woff2":case"font/woff2":return"woff2";case"woff":case"font/woff":return"woff";case"ttf":case"font/ttf":return"truetype";case"otf":case"font/otf":return"opentype";case"eot":case"font/eot":return"embedded-opentype";default:return"woff2"}}function W(){p.value.sort((t,o)=>t.weight===o.weight?t.style==="normal"?-1:1:t.weight-o.weight)}const M=E(()=>{let t="";return n.value&&p.value.forEach(o=>{if(o.comment&&(t+=`/* ${o.comment} */
`),t+=`@font-face {
`,t+=`	font-family: '${n.value}';
`,t+=`	font-style: ${o.style};
`,o.weight!==""&&(t+=`	font-weight: ${o.weight};
`),o.width&&o.width!==""?t+=`	font-stretch: ${o.width};
`:t+=`	font-stretch: 100%;
`,t+=`	font-display: ${o.display||w.value};
`,o.files.length>0){t+="	src: ";let l=o.files.map(r=>{let u=r.attachment_url;try{u=new URL(r.attachment_url).pathname}catch{}return`url('${u}') format("${X(r.extension)}")`});t+=l.join(`,
		`),t+=`;
`}o.unicodeRange&&(t+=`	unicode-range: ${o.unicodeRange};
`),t+=`}

`}),t}),L=E(()=>{let t="";if(!n.value)return t;t+=`
`,t+=M.value;const o=n.value.replace(/[^a-zA-Z0-9\-_]+/g,"-").toLowerCase();let l="",r=[];return b.value&&(r=b.value.split("|").map(u=>u.trim())),r.length>1&&r[1]&&(l=`, ${r[1]}`),t+=`:root {
`,t+=`	--ywf--family-${o}: '${n.value}'${l};
`,t+=`}

`,r.length>0&&r[0]&&(t+=`${r[0]} {
	font-family: var(--ywf--family-${o});
}

`),p.value.forEach(u=>{u.selector&&(t+=`${u.selector} {
`,t+=`	font-family: var(--ywf--family-${o});
`,t+=`	font-style: ${u.style};
`,t+=`	font-weight: ${u.weight};
`,t+=`}

`)}),t=t.replace(/\t/g,"  "),t=t.replace(/<family>/g,n.value),t});let h;B(M,he((t,o)=>{h&&(h.innerHTML=t.replace(/\t/g,"  "))},1e3));function Z(){confirm($("Are you sure you want to delete the font?","yabe-webfont"))&&(N.value=!0,_.add("fonts.edit.custom:delete"),T.request({method:"POST",url:`/fonts/delete/${i.value.id}`}).then(t=>{R.push({name:"fonts.index"})}).catch(function(t){D.alert(t.message)}).finally(()=>{N.value=!1,_.remove("fonts.edit.custom:delete")}))}async function H(){return _.add("fonts.edit.custom:fetch-item"),T.request({method:"GET",url:`/fonts/detail/${G.params.id}`}).then(t=>t.data).then(t=>{n.value=t.family,y.value=t.title,w.value=t.metadata.display,b.value=t.metadata.selector,S.value=t.metadata.preload,d.value=t.status,p.value=ge(t.font_faces),i.value=t}).finally(()=>{_.remove("fonts.edit.custom:fetch-item")})}function J(t){t.preventDefault(),_.add("fonts.edit.custom:send-form");let o=T.request({method:"POST",url:`/fonts/custom/update/${i.value.id}`,data:{title:y.value,family:n.value,status:d.value,font_faces:p.value,metadata:{preload:S.value,selector:b.value,display:w.value}}}).then(l=>{z.add({type:"success",message:"<p>Font updated successfully.</p>"}),H()}).finally(()=>{_.remove("fonts.edit.custom:send-form")});D.async(o,"Font updated successfully.",void 0,"Updating the font...")}ae(async()=>{let t=H();D.async(t,"Font details loaded.",o=>{D.alert(o.response&&o.response.status===404?"Font not found.":"Failed to load font details."),R.go(-1)},"Fetching font details..."),h=document.querySelector("#yabe-webfont-preview"),h||(h=document.createElement("style"),h.setAttribute("id","yabe-webfont-preview"),document.head.appendChild(h))});const P=E(()=>i.value?y.value!==i.value.title||n.value!==i.value.family||d.value!==i.value.status||w.value!==i.value.metadata.display||b.value!==i.value.metadata.selector||S.value!==i.value.metadata.preload||!ve(p.value,i.value.font_faces):!1),x=v(null);return B(P,(t,o)=>{t&&!x.value?x.value=z.add({type:"warning",message:"<p>You have unsaved changes.</p>"}):(z.remove(x.value),x.value=null)}),ne((t,o,l)=>{P.value&&!confirm($("You have unsaved changes. Are you sure you want to leave?","yabe-webfont"))||l()}),window.onbeforeunload=function(t){if(P.value)return $("You have unsaved changes. Are you sure you want to leave?","yabe-webfont")},ie(()=>{window.onbeforeunload=null,x.value&&z.remove(x.value),h&&document.head.removeChild(h)}),(t,o)=>{const l=q("font-awesome-icon"),r=q("Draggable"),u=q("highlightjs"),I=le("ripple");return F(),A(fe,null,[e("span",Ue,"Â» "+U(m($)("Edit","yabe-webfont")),1),e("div",Ce,[e("form",{id:"post-body",onSubmit:J,class:"metabox-holder columns-2 cols:auto"},[e("div",De,[e("div",ze,[e("div",Te,[Ne,c(e("input",{type:"text",name:"title",id:"title",size:"30",required:"","onUpdate:modelValue":o[0]||(o[0]=s=>y.value=s),placeholder:m($)("Title","yabe-webfont"),autocomplete:"off"},null,8,Pe),[[g,y.value]])]),Be]),e("div",Ee,[e("div",qe,[Ae,e("div",Re,[e("div",je,[Me,c(e("input",{type:"text",name:"family",id:"family","onUpdate:modelValue":o[1]||(o[1]=s=>n.value=s),required:"",placeholder:"Font Family",autocomplete:"off"},null,512),[[g,n.value]])]),e("div",Le,[He,c(e("select",{name:"display",id:"display","onUpdate:modelValue":o[2]||(o[2]=s=>w.value=s),class:"capitalize {capitalize}_option"},Ye,512),[[re,w.value]])]),e("div",Ge,[Oe,c(e("input",{type:"text",name:"selector",id:"selector","onUpdate:modelValue":o[3]||(o[3]=s=>b.value=s),placeholder:"h1, .title, #lyric | Arial, Helvetica, sans-serif",autocomplete:"off"},null,512),[[g,b.value]])]),e("div",Xe,[We,e("div",Ze,[e("label",Je,[c(e("input",{type:"checkbox",name:"preload",id:"preload","onUpdate:modelValue":o[4]||(o[4]=s=>S.value=s)},null,512),[[de,S.value]]),k(" Preload files ")])])])]),e("div",Ke,[e("h3",Qe,[k(" Variants "),f(l,{icon:["fas","arrow-up-1-9"],onClick:W,title:"Sort variants",class:"w:16 h:16 ml:4 cursor:pointer"})]),f(ke,{"font-faces":m(p),family:n.value},null,8,["font-faces","family"]),c((F(),A("button",{type:"button",onClick:O,class:"button my:16"},[k("Add variant")])),[[I]])]),e("div",et,[e("div",tt,[f(r,{modelValue:m(p),"onUpdate:modelValue":o[5]||(o[5]=s=>ce(p)?p.value=s:null),tag:"transition-group","item-key":"id","component-data":{name:"font-face"},"ghost-class":"dragged-placeholder",animation:"200"},{item:C(({element:s})=>[e("div",null,[f(Ve,{item:s,preview:a,"font-family":n.value},null,8,["item","preview","font-family"])])]),_:1},8,["modelValue"])])])])])]),e("div",ot,[e("div",null,[e("div",st,[at,e("div",nt,[e("div",it,[e("div",lt,[e("div",rt,[e("div",dt,[e("div",ct,[d.value?(F(),Y(l,{key:0,icon:["fas","rocket-launch"],class:"h:16 w:16 flex-shrink:0 fg:#8c8f94"})):(F(),Y(l,{key:1,icon:["fas","rocket"],class:"h:16 w:16 flex-shrink:0 fg:#8c8f94"})),ut,f(m(Fe),{as:"div",class:"flex align-items:center"},{default:C(()=>[f(m(Se),{modelValue:d.value,"onUpdate:modelValue":o[6]||(o[6]=s=>d.value=s),class:V([[d.value?"bg:sky-60":"opacity:.5 bg:gray-85"],"rel inline-flex p:0 h:24 w:44 flex-shrink:0 cursor:pointer rounded b:2 b:transparent transition-property:color,background-color,border-color,text-decoration-color,fill,stroke transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|2,rgb(14,165,233)|0|0|0|4,rgba(0,0,0,0)|0|0|0|0:focus outline:2|solid|transparent:focus"])},{default:C(()=>[e("span",{class:V([[d.value?"translateX(20)":"translateX(0)"],"pointer-events:none rel inline-block font:12 h:20 w:20 rounded bg:white transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|0,rgba(59,130,246,0.5)|0|0|0|0,rgba(0,0,0,0.1)|0|1|3|0,rgba(0,0,0,0.1)|0|1|2|-1"])},[e("span",{"aria-hidden":"true",class:V([[d.value?"opacity:0 transition-timing-function:ease-out transition-duration:100":"opacity:1 transition-timing-function:ease-in transition-duration:200"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[f(l,{icon:["fas","xmark"],class:"fg:gray-60"})],2),e("span",{"aria-hidden":"true",class:V([[d.value?"opacity:1 transition-timing-function:ease-in transition-duration:200":"opacity:0 transition-timing-function:ease-out transition-duration:100"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[f(l,{icon:["fas","check"],class:"fg:sky-60"})],2)],2)]),_:1},8,["modelValue","class"]),f(m($e),{as:"span",class:V([[d.value?"fg:black":"fg:gray-60"],"ml:8 font:medium tw-cursor-pointer"])},{default:C(()=>[k(U(d.value?"published":"draft"),1)]),_:1},8,["class"])]),_:1})])])]),ft]),e("div",pt,[e("div",mt,[e("a",{class:V([{"cursor:wait":m(_).isBusy},"fg:red-80 text:underline cursor:pointer fg:red-90:hover"]),onClick:Z},U(N.value?"Deleting...":"Trash"),3)]),e("div",ht,[e("button",{type:"submit",name:"save",id:"save",disabled:m(_).isBusy,class:"button button-primary button-large",value:"save"},"Save",8,vt)]),gt])])])])]),e("div",null,[e("div",_t,[yt,e("div",bt,[wt,c(e("input",{type:"number","onUpdate:modelValue":o[7]||(o[7]=s=>a.width.current=s),min:a.width.min,max:a.width.max,class:"block min-w:0 w:64 min-h:0 h:24 mx:0 py:0 px:8 r:0 rr:6 b:1|solid|gray-30/.5 font:12 lh:16px"},null,8,xt),[[g,a.width.current]]),c(e("input",{type:"range","onUpdate:modelValue":o[8]||(o[8]=s=>a.width.current=s),min:a.width.min,max:a.width.max,class:"flex:1|1|0% appearance:none accent:#0050FF h:4 align-self:center"},null,8,kt),[[g,a.width.current]])]),e("div",Vt,[St,c(e("input",{type:"number","onUpdate:modelValue":o[9]||(o[9]=s=>a.weight.current=s),min:a.weight.min,max:a.weight.max,class:"block min-w:0 w:64 min-h:0 h:24 mx:0 py:0 px:8 r:0 rr:6 b:1|solid|gray-30/.5 font:12 lh:16px"},null,8,$t),[[g,a.weight.current]]),c(e("input",{type:"range","onUpdate:modelValue":o[10]||(o[10]=s=>a.weight.current=s),min:a.weight.min,max:a.weight.max,class:"flex:1|1|0% appearance:none accent:#0050FF h:4 align-self:center"},null,8,Ft),[[g,a.weight.current]])]),e("div",Ut,[Ct,e("div",Dt,[c(e("input",{type:"number","onUpdate:modelValue":o[11]||(o[11]=s=>a.fontSize=s),class:"block min-w:0 w:64 min-h:0 h:24 mx:0 py:0 px:8 r:0 rr:6 b:1|solid|gray-30/.5 font:12 lh:16px"},null,512),[[g,a.fontSize]]),zt]),c(e("input",{type:"range","onUpdate:modelValue":o[12]||(o[12]=s=>a.fontSize=s),max:"200",class:"flex:1|1|0% appearance:none accent:#0050FF h:4 align-self:center"},null,512),[[g,a.fontSize]])])])])]),e("div",Tt,[f(ue,{name:"css-preview"},{default:C(()=>[L.value?(F(),A("div",Nt,[Pt,f(u,{language:"css",code:L.value},null,8,["code"])])):pe("",!0)]),_:1}),e("div",null,[e("table",Bt,[e("tbody",null,[e("tr",null,[e("td",Et,[k(" ID: "),e("span",{title:i.value.slug},U(i.value.id),9,qt)]),e("td",At,[k(" Last edited on "),e("span",{title:new Date(i.value.updated_at*1e3),class:"text:underline decoration-dotted text-gray-700"},U(m(_e)(new Date(i.value.updated_at*1e3))),9,Rt)])])])])])])],32)])],64)}}};export{Jt as default};
