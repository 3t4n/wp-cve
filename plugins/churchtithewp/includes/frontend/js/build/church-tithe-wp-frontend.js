!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=15)}([function(t,e){t.exports=React},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IdealBankElement=e.IbanElement=e.PaymentRequestButtonElement=e.CardCVCElement=e.CardCvcElement=e.CardExpiryElement=e.CardNumberElement=e.CardElement=e.Elements=e.injectStripe=e.StripeProvider=void 0;var i=c(n(5)),r=c(n(9)),a=c(n(4)),s=c(n(10)),o=c(n(12));function c(t){return t&&t.__esModule?t:{default:t}}var _=(0,s.default)("card",{impliedTokenType:"card",impliedSourceType:"card",impliedPaymentMethodType:"card"}),u=(0,s.default)("cardNumber",{impliedTokenType:"card",impliedSourceType:"card",impliedPaymentMethodType:"card"}),l=(0,s.default)("cardExpiry"),p=(0,s.default)("cardCvc"),h=p,m=(0,s.default)("iban",{impliedTokenType:"bank_account",impliedSourceType:"sepa_debit"}),d=(0,s.default)("idealBank",{impliedSourceType:"ideal"});e.StripeProvider=i.default,e.injectStripe=r.default,e.Elements=a.default,e.CardElement=_,e.CardNumberElement=u,e.CardExpiryElement=l,e.CardCvcElement=p,e.CardCVCElement=h,e.PaymentRequestButtonElement=o.default,e.IbanElement=m,e.IdealBankElement=d},function(module,__webpack_exports__,__webpack_require__){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var church_tithe_wp_vars=church_tithe_wp_js_vars.tithe_form_vars,Church_Tithe_WP_List_View=function(_React$Component){function Church_Tithe_WP_List_View(t){var e;return _classCallCheck(this,Church_Tithe_WP_List_View),(e=_possibleConstructorReturn(this,_getPrototypeOf(Church_Tithe_WP_List_View).call(this,t))).state={current_page:1,items_per_page:10,search_term:""},e.render_rows=e.render_rows.bind(_assertThisInitialized(_assertThisInitialized(e))),e}return _inherits(Church_Tithe_WP_List_View,_React$Component),_createClass(Church_Tithe_WP_List_View,[{key:"get_total_pages",value:function(){return this.props.total_items?Math.ceil(this.props.total_items/this.state.items_per_page):0}},{key:"handle_page_number_change",value:function(t){this.setState({current_page:t.target.value,rows:null,columns:null},(function(){this.props.get_rows_and_columns(this.state.current_page,this.state.items_per_page,this.state.search_term)}))}},{key:"handle_items_per_page_change",value:function(t){this.setState({current_page:1,items_per_page:t.target.value},(function(){this.props.get_rows_and_columns(this.state.current_page,this.state.items_per_page,this.state.search_term)}))}},{key:"handle_search_change",value:function(t){var e=this;this.setState({search_term:t.target.value},(function(){e.input_delay&&(clearTimeout(e.input_delay),e.input_delay=null);e.input_delay=setTimeout((function(){clearTimeout(e.input_delay),e.setState({current_page:1,rows:null,columns:null},(function(){this.props.get_rows_and_columns(this.state.current_page,this.state.items_per_page,this.state.search_term)}))}),50)}))}},{key:"render_columns",value:function(t){if(!t)return!1;var e=[];for(var n in t)e.push(React.createElement("div",{key:n,scope:"col",className:"church-tithe-wp-list-view-column"},React.createElement("span",null,t[n])));return e}},{key:"render_rows",value:function render_rows(rows,columns){var _this3=this,mapper=[],td_mapper=[],value;if(!rows||0==this.props.total_items){var first=!0;for(var key in columns)td_mapper.push(first?(first=!1,React.createElement("div",{key:key,className:"church-tithe-wp-list-view-cell"},"None Found")):(first=!1,React.createElement("div",{key:key,className:"church-tithe-wp-list-view-cell"},"")));return mapper.push(React.createElement("div",{key:"none_found",className:"church-tithe-wp-list-view-row"},td_mapper)),mapper}for(var row in rows){for(var key in columns)td_mapper.push(function(){if(rows[row][key].show_in_list_view)return value=rows[row][key].value_format_function?eval(rows[row][key].value_format_function)(rows[row][key]):rows[row][key].value,React.createElement("div",{key:key,className:"church-tithe-wp-list-view-cell"},React.createElement("button",{className:"church-tithe-wp-text-button",onClick:_this3.props.on_row_click.bind(_this3,rows[row])},value))}());mapper.push(React.createElement("div",{key:row,className:"church-tithe-wp-list-view-row"},td_mapper)),td_mapper=[]}return mapper}},{key:"render_search",value:function(){return React.createElement("div",{className:"church-tithe-wp-list-view-search"},React.createElement("span",null,this.props.main_component.state.unique_settings.strings.uppercase_search),React.createElement("input",{type:"text",value:this.state.search_term,onChange:this.handle_search_change.bind(this)}))}},{key:"render_pagination",value:function(){return React.createElement("div",{className:"church-tithe-wp-list-view-pagination-controls"},React.createElement("div",{className:"church-tithe-wp-list-view-items-per-page"},React.createElement("span",null,this.props.main_component.state.unique_settings.strings.uppercase_items+" "+this.props.main_component.state.unique_settings.strings.lowercase_per+" "+this.props.main_component.state.unique_settings.strings.lowercase_page),React.createElement("input",{type:"number",min:1,onChange:this.handle_items_per_page_change.bind(this),value:this.state.items_per_page})),React.createElement("div",{className:"church-tithe-wp-list-view-pagination"},React.createElement("span",null,this.props.main_component.state.unique_settings.strings.uppercase_page),React.createElement("input",{type:"number",min:1,max:this.get_total_pages(),onChange:this.handle_page_number_change.bind(this),value:this.state.current_page}),React.createElement("span",null," "+this.props.main_component.state.unique_settings.strings.lowercase_of+" "+this.get_total_pages())))}},{key:"render_list_table",value:function(){var t=this;return React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-list-view-table"},React.createElement("div",{className:"church-tithe-wp-list-view-table-header"},React.createElement("div",{className:"church-tithe-wp-list-view-header-row"},this.render_columns(this.props.columns))),React.createElement("div",{className:"church-tithe-wp-list-view-body"},this.render_rows(this.props.rows,this.props.columns))),void t.props.current_visual_state)}},{key:"render_list_view",value:function(){return React.createElement("div",{className:"church-tithe-wp-list-view"},React.createElement("div",{className:"church-tithe-wp-list-view-before-controls"},this.render_search()),this.render_list_table(),React.createElement("div",{className:"church-tithe-wp-list-view-after-controls"},this.render_pagination()))}},{key:"render",value:function(){return React.createElement("div",{className:"church-tithe-wp-list-view"},React.createElement("div",{className:"church-tithe-wp-list-view-content-area"},this.render_list_view()))}}]),Church_Tithe_WP_List_View}(React.Component);__webpack_exports__.a=Church_Tithe_WP_List_View},function(t,e,n){t.exports=n(7)()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.elementContextTypes=e.injectContextTypes=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=o(n(0)),a=o(n(3)),s=n(5);function o(t){return t&&t.__esModule?t:{default:t}}function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var _=e.injectContextTypes={getRegisteredElements:a.default.func.isRequired},u=e.elementContextTypes={addElementsLoadListener:a.default.func.isRequired,registerElement:a.default.func.isRequired,unregisterElement:a.default.func.isRequired},l=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r));return a.handleRegisterElement=function(t,e,n,r){a.setState((function(a){return{registeredElements:[].concat(c(a.registeredElements),[i({element:t},e?{impliedTokenType:e}:{},n?{impliedSourceType:n}:{},r?{impliedPaymentMethodType:r}:{})])}}))},a.handleUnregisterElement=function(t){a.setState((function(e){return{registeredElements:e.registeredElements.filter((function(e){return e.element!==t}))}}))},a.state={registeredElements:[]},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getChildContext=function(){var t=this;return{addElementsLoadListener:function(e){if(t._elements)e(t._elements);else{var n=t.props,i=(n.children,function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(n,["children"]));"sync"===t.context.tag?(t._elements=t.context.stripe.elements(i),e(t._elements)):t.context.addStripeLoadListener((function(n){t._elements||(t._elements=n.elements(i)),e(t._elements)}))}},registerElement:this.handleRegisterElement,unregisterElement:this.handleUnregisterElement,getRegisteredElements:function(){return t.state.registeredElements}}},e.prototype.render=function(){return r.default.Children.only(this.props.children)},e}(r.default.Component);l.childContextTypes=i({},_,u),l.contextTypes=s.providerContextTypes,l.defaultProps={children:null},e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.providerContextTypes=void 0;var i=a(n(0)),r=a(n(3));function a(t){return t&&t.__esModule?t:{default:t}}var s=e.providerContextTypes={tag:r.default.string.isRequired,stripe:r.default.object,addStripeLoadListener:r.default.func},o=function(t,e){window.Stripe.__cachedInstances=window.Stripe.__cachedInstances||{};var n="key="+t+" options="+JSON.stringify(e),i=window.Stripe.__cachedInstances[n]||window.Stripe(t,e);return window.Stripe.__cachedInstances[n]=i,i},c=function(t){if(t&&t.elements&&t.createSource&&t.createToken&&t.createPaymentMethod&&t.handleCardPayment)return t;throw new Error("Please pass a valid Stripe object to StripeProvider. You can obtain a Stripe object by calling 'Stripe(...)' with your publishable key.")},_=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));if(i.props.apiKey&&i.props.stripe)throw new Error("Please pass either 'apiKey' or 'stripe' to StripeProvider, not both.");if(i.props.apiKey){if(!window.Stripe)throw new Error("Please load Stripe.js (https://js.stripe.com/v3/) on this page to use react-stripe-elements. If Stripe.js isn't available yet (it's loading asynchronously, or you're using server-side rendering), see https://github.com/stripe/react-stripe-elements#advanced-integrations");var r=i.props,a=r.apiKey,s=(r.children,r.stripe,function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(r,["apiKey","children","stripe"]));i._meta={tag:"sync",stripe:o(a,s)}}else if(i.props.stripe)i._meta={tag:"sync",stripe:c(i.props.stripe)};else{if(null!==i.props.stripe)throw new Error("Please pass either 'apiKey' or 'stripe' to StripeProvider. If you're using 'stripe' but don't have a Stripe instance yet, pass 'null' explicitly.");i._meta={tag:"async",stripe:null}}return i._didWarn=!1,i._didWakeUpListeners=!1,i._listeners=[],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getChildContext=function(){var t=this;return"sync"===this._meta.tag?{tag:"sync",stripe:this._meta.stripe}:{tag:"async",addStripeLoadListener:function(e){t._meta.stripe?e(t._meta.stripe):t._listeners.push(e)}}},e.prototype.componentWillReceiveProps=function(t){var e=this.props.apiKey&&t.apiKey&&this.props.apiKey!==t.apiKey,n=this.props.stripe&&t.stripe&&this.props.stripe!==t.stripe;if(!this._didWarn&&(e||n)&&window.console&&window.console.error)return this._didWarn=!0,void console.error("StripeProvider does not support changing the apiKey parameter.");if(!this._didWakeUpListeners&&t.stripe){this._didWakeUpListeners=!0;var i=c(t.stripe);this._meta.stripe=i,this._listeners.forEach((function(t){t(i)}))}},e.prototype.render=function(){return i.default.Children.only(this.props.children)},e}(i.default.Component);_.propTypes={apiKey:r.default.string,stripe:r.default.object,children:r.default.node},_.childContextTypes=s,_.defaultProps={apiKey:void 0,stripe:void 0,children:null},e.default=_},function(t,e){function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.church_tithe_wp_format_date=function(t,e){var n=new Date(t.replace(/\s/,"T")+"Z");return"Invalid Date"==n?t:n.toLocaleDateString()},window.church_tithe_wp_format_time=function(t){var e=new Date(t.replace(/\s/,"T")+"Z");return"Invalid Date"==e?t:e.toLocaleTimeString()+NaN+e.toLocaleTimeString(navigator.language,{timeZoneName:"short"}).split(" ")[2]+")"},window.church_tithe_wp_format_date_and_time=function(t){var e=new Date(t.replace(/\s/,"T")+"Z");return"Invalid Date"==e?t:e.toLocaleString()+" ("+e.toLocaleTimeString(navigator.language,{timeZoneName:"short"}).split(" ")[2]+")"},window.church_tithe_wp_list_view_format_date=function(t){return church_tithe_wp_format_date(t.value)},window.church_tithe_wp_format_money=function(t,e,n,i,r){if(i=navigator&&navigator.language?navigator.language:i.replace("_","-"),n)var a=Number(t);else a=Number(t)/100;return(a=new Intl.NumberFormat(i,{style:"currency",currency:e}).format(a))+r},window.church_tithe_wp_list_view_format_money=function(t){return church_tithe_wp_format_money(t.cents,t.currency,t.is_zero_decimal_currency,t.locale,t.string_after)},window.church_tithe_wp_get_current_view_class=function(t,e){for(var n=!1,i=0;i<e.length;i++)if(t.state.current_visual_state==e[i])n=!0;return n?" church-tithe-wp-current-view":" church-tithe-wp-hidden-view"},window.church_tithe_wp_string_to_bool=function(t){return"true"==t},window.church_tithe_wp_validate_email=function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())},window.church_tithe_wp_get_decimal_character_for_locale=function(t){var e=new Intl.NumberFormat(t,{style:"currency",currency:"USD"}).format(0);return e.includes(",")&&(decimal_character=","),e.includes(".")&&(decimal_character="."),decimal_character},window.church_tithe_wp_set_visual_state_of_component=function(t){return new Promise((function(e,r){if(!t.component)throw new Error('The function "church_tithe_wp_set_visual_state_of_component" is missing required variables');if(!t.component.props.main_component.state.all_current_visual_states)throw new Error("A visual states object is required.");if(!t.component.state.map_of_visual_states)throw new Error('The component must have a map of the view states stored in the state with the key "map_of_visual_states"');var a=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var s in e){if(void 0!==e[s]&&"object"===i(e[s])&&0!==Object.keys(e[s]).length){if(a){var o={};o[s]={},r[a]=t(e[s],n,o,s)}else r[s]={},r=t(e[s],n,r,s);return r}return"variable"===s||0===Object.keys(e[s]).length?(r[a][n]={},r):(r[a][s]={},r)}}(t.component.state.map_of_visual_states,t.default_visual_state);for(var s in t.component.props.main_component.state.all_current_visual_states){if(!a[s]){parent_component_is_in_view=!1;break}parent_component_is_in_view=!0}if(parent_component_is_in_view)o=function t(e,n,r,a){for(var s in n)r=e[s]?void 0!==n[s]&&"object"===i(n[s])&&0!==Object.keys(n[s]).length?t(e[s],n[s],r,a):s:"variable"===s&&Object.keys(e)[0]?Object.keys(e)[0]:a;return r}(t.component.props.main_component.state.all_current_visual_states,t.component.state.map_of_visual_states,!1,t.default_visual_states.parent_in_view);else var o=t.default_visual_states.parent_not_in_view;t.component.state[t.name_of_visual_state_variable]!=o?o?t.component.setState(n({},t.name_of_visual_state_variable,o),(function(){e(o)})):t.component.setState(n({},t.name_of_visual_state_variable,t.default_visual_states.parent_not_in_view),(function(){e(t.default_visual_states.parent_not_in_view)})):e(o)}))}},function(t,e,n){"use strict";var i=n(8);function r(){}function a(){}a.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,a,s){if(s!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(0),o=(i=s)&&i.__esModule?i:{default:i},c=n(4),_=n(5);function u(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.default=function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.withRef,m=void 0!==s&&s;return n=e=function(e){function n(t,i){if(l(this,n),!i||!i.getRegisteredElements)throw new Error("It looks like you are trying to inject Stripe context outside of an Elements context.\nPlease be sure the component that calls createSource or createToken is within an <Elements> component.");var r=p(this,e.call(this,t,i));return r.parseElementOrData=function(t){return t&&"object"===(void 0===t?"undefined":a(t))&&t._frame&&"object"===a(t._frame)&&t._frame.id&&"string"==typeof t._frame.id&&"string"==typeof t._componentName?{type:"element",element:t}:{type:"data",data:t}},r.findElement=function(t,e){var n=r.context.getRegisteredElements().filter((function(e){return e[t]})),i="auto"===e?n:n.filter((function(n){return n[t]===e}));if(1===i.length)return i[0].element;if(i.length>1)throw new Error("You did not specify the type of Source, Token, or PaymentMethod to create.\n        We could not infer which Element you want to use for this operation.");return null},r.requireElement=function(t,e){var n=r.findElement(t,e);if(n)return n;throw new Error("You did not specify the type of Source, Token, or PaymentMethod to create.\n        We could not infer which Element you want to use for this operation.")},r.wrappedCreateToken=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"object"===(void 0===e?"undefined":a(e))){var i=e,s=i.type,o=u(i,["type"]),c="string"==typeof s?s:"auto",_=r.requireElement("impliedTokenType",c);return t.createToken(_,o)}if("string"==typeof e){var l=e;return t.createToken(l,n)}throw new Error("Invalid options passed to createToken. Expected an object, got "+(void 0===e?"undefined":a(e))+".")}},r.wrappedCreateSource=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&"object"===(void 0===e?"undefined":a(e))){if("string"!=typeof e.type)throw new Error("Invalid Source type passed to createSource. Expected string, got "+a(e.type)+".");var n=r.findElement("impliedSourceType",e.type);return n?t.createSource(n,e):t.createSource(e)}throw new Error("Invalid options passed to createSource. Expected an object, got "+(void 0===e?"undefined":a(e))+".")}},r.wrappedCreatePaymentMethod=function(t){return function(e,n,i){if(!e||"string"!=typeof e)throw new Error("Invalid PaymentMethod type passed to createPaymentMethod. Expected a string, got "+(void 0===e?"undefined":a(e))+".");if(!["card"].includes(e))throw new Error("Invalid PaymentMethod type passed to createPaymentMethod. "+e+" is not yet supported.");var s=r.parseElementOrData(n);if("element"===s.type){var o=s.element;return i?t.createPaymentMethod(e,o,i):t.createPaymentMethod(e,o)}var c=s.data,_=r.findElement("impliedPaymentMethodType",e);if(_)return c?t.createPaymentMethod(e,_,c):t.createPaymentMethod(e,_);if(c&&"object"===(void 0===c?"undefined":a(c)))return t.createPaymentMethod(e,c);throw c?new Error("Invalid data passed to createPaymentMethod. Expected an object, got "+(void 0===c?"undefined":a(c))+"."):new Error("Could not find an Element that can be used to create a PaymentMethod of type: "+e+".")}},r.wrappedHandleCardX=function(t,e){return function(n,i,s){if(!n||"string"!=typeof n)throw new Error("Invalid PaymentIntent client secret passed to handleCardPayment. Expected string, got "+(void 0===n?"undefined":a(n))+".");var o=r.parseElementOrData(i);if("element"===o.type){var c=o.element;return s?t[e](n,c,s):t[e](n,c)}var _=o.data,u=r.findElement("impliedPaymentMethodType","card");if(u)return _?t[e](n,u,_):t[e](n,u);if(!_)throw new Error("Could not find a CardElement or CardNumberElement which which to perform handleCardPayment.");if("object"!==(void 0===_?"undefined":a(_)))throw new Error("Invalid data passed to handleCardPayment. Expected an object, got "+(void 0===_?"undefined":a(_))+".");return t[e](n,_)}},"sync"===r.context.tag?r.state={stripe:r.stripeProps(r.context.stripe)}:r.state={stripe:null},r}return h(n,e),n.prototype.componentDidMount=function(){var t=this;"async"===this.context.tag&&this.context.addStripeLoadListener((function(e){t.setState({stripe:t.stripeProps(e)})}))},n.prototype.getWrappedInstance=function(){if(!m)throw new Error("To access the wrapped instance, the `{withRef: true}` option must be set when calling `injectStripe()`");return this.wrappedInstance},n.prototype.stripeProps=function(t){return r({},t,{createToken:this.wrappedCreateToken(t),createSource:this.wrappedCreateSource(t),createPaymentMethod:this.wrappedCreatePaymentMethod(t),handleCardPayment:this.wrappedHandleCardX(t,"handleCardPayment"),handleCardSetup:this.wrappedHandleCardX(t,"handleCardSetup")})},n.prototype.render=function(){var e=this;return o.default.createElement(t,r({},this.props,{stripe:this.state.stripe,ref:m?function(t){e.wrappedInstance=t}:null}))},n}(o.default.Component),e.contextTypes=r({},_.providerContextTypes,c.injectContextTypes),e.displayName="InjectStripe("+(t.displayName||t.name||"Component")+")",n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(0)),r=o(n(3)),a=o(n(11)),s=n(4);function o(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=function(){},p=function(t){t.id,t.className,t.onChange,t.onFocus,t.onBlur,t.onReady;return function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["id","className","onChange","onFocus","onBlur","onReady"])},h=function(t){return t.charAt(0).toUpperCase()+t.slice(1)};e.default=function(t){var e,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=e=function(e){function n(t,i){c(this,n);var r=_(this,e.call(this,t,i));r.handleRef=function(t){r._ref=t},r._element=null;var a=p(r.props);return r._options=a,r}return u(n,e),n.prototype.componentDidMount=function(){var e=this;this.context.addElementsLoadListener((function(n){var i=n.create(t,e._options);e._element=i,e._setupEventListeners(i),i.mount(e._ref),(o.impliedTokenType||o.impliedSourceType||o.impliedPaymentMethodType)&&e.context.registerElement(i,o.impliedTokenType,o.impliedSourceType,o.impliedPaymentMethodType)}))},n.prototype.componentWillReceiveProps=function(t){var e=p(t);0===Object.keys(e).length||(0,a.default)(e,this._options)||(this._options=e,this._element&&this._element.update(e))},n.prototype.componentWillUnmount=function(){if(this._element){var t=this._element;t.destroy(),this.context.unregisterElement(t)}},n.prototype._setupEventListeners=function(t){var e=this;t.on("ready",(function(){e.props.onReady(e._element)})),t.on("change",(function(t){e.props.onChange(t)})),t.on("blur",(function(){var t;return(t=e.props).onBlur.apply(t,arguments)})),t.on("focus",(function(){var t;return(t=e.props).onFocus.apply(t,arguments)}))},n.prototype.render=function(){return i.default.createElement("div",{id:this.props.id,className:this.props.className,ref:this.handleRef})},n}(i.default.Component),e.propTypes={id:r.default.string,className:r.default.string,onChange:r.default.func,onBlur:r.default.func,onFocus:r.default.func,onReady:r.default.func},e.defaultProps={id:void 0,className:void 0,onChange:l,onBlur:l,onFocus:l,onReady:l},e.contextTypes=s.elementContextTypes,e.displayName=h(t)+"Element",n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function t(e,n){if("object"!==(void 0===e?"undefined":i(e))||"object"!==(void 0===n?"undefined":i(n)))return e===n;if(null===e||null===n)return e===n;var r=Array.isArray(e);if(r!==Array.isArray(n))return!1;var a="[object Object]"===Object.prototype.toString.call(e);if(a!==("[object Object]"===Object.prototype.toString.call(n)))return!1;if(!a&&!r)return!1;var s=Object.keys(e),o=Object.keys(n);if(s.length!==o.length)return!1;for(var c={},_=0;_<s.length;_+=1)c[s[_]]=!0;for(var u=0;u<o.length;u+=1)c[o[u]]=!0;var l=Object.keys(c);if(l.length!==s.length)return!1;var p=e,h=n;return l.every((function(e){return t(p[e],h[e])}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=c(n(0)),a=c(n(3)),s=c(n(13)),o=n(4);function c(t){return t&&t.__esModule?t:{default:t}}var _=function(){},u=function(t){t.id,t.className,t.onBlur,t.onClick,t.onFocus,t.onReady,t.paymentRequest;return function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["id","className","onBlur","onClick","onFocus","onReady","paymentRequest"])},l=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));r.handleRef=function(t){r._ref=t};var a=u(n);return r._options=a,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){var t=this;this.context.addElementsLoadListener((function(e){t._element=e.create("paymentRequestButton",i({paymentRequest:t.props.paymentRequest},t._options)),t._element.on("ready",(function(){t.props.onReady(t._element)})),t._element.on("focus",(function(){var e;return(e=t.props).onFocus.apply(e,arguments)})),t._element.on("click",(function(){var e;return(e=t.props).onClick.apply(e,arguments)})),t._element.on("blur",(function(){var e;return(e=t.props).onBlur.apply(e,arguments)})),t._element.mount(t._ref)}))},e.prototype.componentWillReceiveProps=function(t){this.props.paymentRequest!==t.paymentRequest&&console.warn("Unsupported prop change: paymentRequest is not a customizable property.");var e=u(t);0===Object.keys(e).length||(0,s.default)(e,this._options)||(this._options=e,this._element.update(e))},e.prototype.componentWillUnmount=function(){this._element.destroy()},e.prototype.render=function(){return r.default.createElement("div",{id:this.props.id,className:this.props.className,ref:this.handleRef})},e}(r.default.Component);l.propTypes={id:a.default.string,className:a.default.string,onBlur:a.default.func,onClick:a.default.func,onFocus:a.default.func,onReady:a.default.func,paymentRequest:a.default.shape({canMakePayment:a.default.func.isRequired,on:a.default.func.isRequired,show:a.default.func.isRequired}).isRequired},l.defaultProps={id:void 0,className:void 0,onBlur:_,onClick:_,onFocus:_,onReady:_},l.contextTypes=o.elementContextTypes,e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every((function(n){return e.hasOwnProperty(n)&&e[n]===t[n]}))}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}window.Church_Tithe_WP_Form=function(t){function e(t){var i,r,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(i=!(s=a(e).call(this,t))||"object"!==n(s)&&"function"!=typeof s?o(r):s).state={editing_mode:!1,editing_lightbox_active:!1,all_initial_visual_states:{payment:{}},all_current_visual_states:i.props.all_current_visual_states,modal_visual_state:i.props.dynamic_settings.modal_visual_state,single_page_app_base_url:i.props.dynamic_settings.wordpress_permalink_only,dom_node:null,user_id:null,frontend_nonces:i.props.frontend_nonces},i.get_current_view_class=i.get_current_view_class.bind(o(o(i))),i.set_all_current_visual_states=i.set_all_current_visual_states.bind(o(o(i))),i.handle_visual_state_change_click_event=i.handle_visual_state_change_click_event.bind(o(o(i))),i}var i,c,_;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,React.Component),i=e,(c=[{key:"componentDidMount",value:function(){var t=this;this.setState({editing_mode:!!this.props.editing_mode,unique_settings:this.props.unique_settings,dynamic_settings:this.props.dynamic_settings,frontend_nonces:this.props.frontend_nonces,all_initial_visual_states:this.props.all_current_visual_states,all_current_visual_states:this.props.all_current_visual_states,modal_visual_state:this.props.dynamic_settings.modal_visual_state,initial_modal_visual_state:this.props.dynamic_settings.modal_visual_state},(function(){})),"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.addEventListener("popstate",(function(e){t.on_web_history_change(e,t)}))}},{key:"componentDidUpdate",value:function(){var t=this;this.maybe_refresh_parent_dom_node(),this.props.unique_settings===this.state.unique_settings&&this.props.dynamic_settings===this.state.dynamic_settings||this.setState({unique_settings:this.props.unique_settings,dynamic_settings:this.props.dynamic_settings,all_current_visual_states:this.props.all_current_visual_states,modal_visual_state:this.props.dynamic_settings.modal_visual_state},(function(){t.set_all_current_visual_states(t.state.all_current_visual_states,t.state.modal_visual_state)}))}},{key:"maybe_refresh_parent_dom_node",value:function(){}},{key:"on_web_history_change",value:function(t,e){var n=t.state;null==n?e.setState({all_current_visual_states:e.state.all_initial_visual_states,modal_visual_state:e.state.initial_modal_visual_state}):e.setState({all_current_visual_states:n.church_tithe_wp_visual_state,modal_visual_state:n.ctwpmodal_visual_state})}},{key:"get_current_view_class",value:function(t){return Object.keys(this.state.all_current_visual_states)[0]==t?" church-tithe-wp-current-view":" church-tithe-wp-hidden-view"}},{key:"get_featured_image_class",value:function(){return this.state.unique_settings.has_featured_image?" church-tithe-wp-has-featured-image":""}},{key:"render_featured_image",value:function(){if(this.state.unique_settings.has_featured_image)return React.createElement("div",{className:"church-tithe-wp-logo"},React.createElement("div",{className:"church-tithe-wp-header-logo-container"},React.createElement("div",{className:"church-tithe-wp-header-logo-inner-bevel"}),React.createElement("div",{className:"church-tithe-wp-header-logo-img",style:{backgroundImage:"url("+this.state.unique_settings.featured_image_url+")"}})))}},{key:"build_new_url_path",value:function(t,e,n){var i=1==(n+=1)?"ctwp":"&ctwp";for(var r in t)e=this.build_new_url_path(t[r],e+i+n+"="+r,n);return e}},{key:"handle_visual_state_change_click_event",value:function(t,e,n){this.set_all_current_visual_states(t,e)}},{key:"set_all_current_visual_states",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!1;return new Promise((function(r,a){0===Object.entries(e).length&&e.constructor===Object&&(e=t.state.all_initial_visual_states,i=!0),e||(e=t.state.all_current_visual_states),n||(n=t.state.modal_visual_state),t.setState({all_current_visual_states:e,modal_visual_state:n},(function(){if(t.state.dynamic_settings.wordpress_permalink_only.includes("?"))var n=t.state.dynamic_settings.wordpress_permalink_only+"&";else n=t.state.dynamic_settings.wordpress_permalink_only+"?";var a=n+t.build_new_url_path(t.state.all_current_visual_states,"",0);Object.keys(t.state.modal_visual_state)[0]&&(a=a+"&ctwpmodal="+Object.keys(t.state.modal_visual_state)[0]),i?history.pushState({church_tithe_wp_visual_state:t.state.all_current_visual_states,ctwpmodal_visual_state:t.state.modal_visual_state},e,t.state.dynamic_settings.wordpress_permalink_only):history.pushState({church_tithe_wp_visual_state:t.state.all_current_visual_states,ctwpmodal_visual_state:t.state.modal_visual_state},e,a),r(e)}))}))}},{key:"render",value:function(){if("https:"!=window.location.protocol)return React.createElement("div",{className:"church-tithe-wp-container"},"You must have an SSL certificate in order to accept payments on your website. Contact your webhost to have them install an SSL certificate on your website.");if(this.state.all_current_visual_states&&this.state.unique_settings){if(this.state.dynamic_settings.stripe_api_key&&this.state.unique_settings.currency_code){var t,e=!1,n=!1;return n="in_modal"===this.state.unique_settings.open_style&&{ctwp:{}},"text_link"===this.state.unique_settings.mode&&(e=React.createElement("a",{className:"church-tithe-wp-a-tag",onClick:this.handle_visual_state_change_click_event.bind(null,{payment:{form:{}}},n)},this.state.unique_settings.strings.link_text)),"button"===this.state.unique_settings.mode&&(e=React.createElement("button",{className:"button church-tithe-wp-button",onClick:this.handle_visual_state_change_click_event.bind(null,{payment:{form:{}}},n)},this.state.unique_settings.strings.link_text)),t=React.createElement("div",{className:"church-tithe-wp-container church-tithe-wp-current-view-is-"+Object.keys(this.state.all_current_visual_states)[0]},React.createElement("div",{className:"church-tithe-wp-fancy-container church-tithe-wp-payment-view"+this.get_current_view_class("payment")+this.get_featured_image_class()},this.render_featured_image(),React.createElement(Church_Tithe_WP_Payment_Box,{main_component:this,show_close_button:"button"===Object.keys(this.state.all_initial_visual_states)[0]||"text_link"===Object.keys(this.state.all_initial_visual_states)[0]||"in_modal"===this.state.unique_settings.open_style})),React.createElement("div",{className:"church-tithe-wp-fancy-container church-tithe-wp-manage-payments-view"+this.get_current_view_class("manage_payments")+this.get_featured_image_class()},this.render_featured_image(),React.createElement(Church_Tithe_WP_Manage_Payments,{main_component:this,show_close_button:"button"===Object.keys(this.state.all_initial_visual_states)[0]||"text_link"===Object.keys(this.state.all_initial_visual_states)[0]||"in_modal"===this.state.unique_settings.open_style}))),"in_modal"===this.state.unique_settings.open_style?React.createElement(React.Fragment,null,React.createElement(Church_Tithe_WP_Modal,{main_component:this,slug:this.props.form_number,modal_contents:t})):"in_place"!==this.state.unique_settings.open_style||"button"!==Object.keys(this.state.all_current_visual_states)[0]&&"text_link"!==Object.keys(this.state.all_current_visual_states)[0]?t:e}return React.createElement("div",{className:"church-tithe-wp-container"},React.createElement("div",{className:"church-tithe-wp-fancy-container church-tithe-wp-payment-view"},React.createElement("div",{className:"church-tithe-wp-component-box"},React.createElement("header",{className:"church-tithe-wp-header",role:"banner"},React.createElement("h1",{className:"church-tithe-wp-header-title"},"Complete Set Up"),React.createElement("h2",{className:"church-tithe-wp-header-subtitle"},"You are almost ready to start accepting payments right here, using Church Tithe WP and Stripe. Click the link below to complete the set-up.")),React.createElement("div",{className:"church-tithe-wp-payment-form-container"},React.createElement("div",{className:"church-tithe-wp-payment-box-view"},React.createElement("a",{href:this.state.dynamic_settings.setup_link.replace(/&amp;/g,"&")},"Complete Church Tithe WP Setup"))))))}return React.createElement(Church_Tithe_WP_Spinner,null)}}])&&r(i.prototype,c),_&&r(i,_),e}(),window.church_tithe_wp_refresh_a_tithing_element=function(t){var e=t.getAttribute("church-tithe-wp-form-number"),n=JSON.parse(document.getElementById("church-tithe-wp-element-unique-vars-json-"+e).textContent),r=JSON.parse(document.getElementById("church-tithe-wp-element-dynamic-vars-json-"+e).textContent),a={};a="inherit"!==r.all_default_visual_states?r.all_default_visual_states:"form"==n.mode?{payment:{}}:i({},n.mode,{}),ReactDOM.render(React.createElement(Church_Tithe_WP_Form,{key:"church_tithe_wp_button_element_"+e,id:"church_tithe_wp_button_element_"+e,form_number:e,all_current_visual_states:a,frontend_nonces:church_tithe_wp_js_vars.frontend_nonces,unique_settings:n,dynamic_settings:r}),t)},window.church_tithe_wp_refresh_all_tithing_elements=function(){if(document.querySelector(".church-tithe-wp-element")){document.querySelectorAll(".church-tithe-wp-element").forEach((function(t){t.getAttribute("church-tithe-wp-form-number");church_tithe_wp_refresh_a_tithing_element(t)}))}},church_tithe_wp_refresh_all_tithing_elements(),window.church_tithe_wp_set_modal_to_open=function(t){if(document.querySelector(".church-tithe-wp-element")){document.querySelectorAll(".church-tithe-wp-element").forEach((function(t){var e=t.getAttribute("church-tithe-wp-form-number"),n=document.getElementById("church-tithe-wp-element-dynamic-vars-json-"+e),i=JSON.parse(n.textContent);i.modal_visual_state={},n.textContent=JSON.stringify(i)})),church_tithe_wp_refresh_all_tithing_elements()}var e=document.getElementById("church-tithe-wp-element-dynamic-vars-json-"+t),n=JSON.parse(e.innerHTML);n.all_default_visual_states={payment:{form:{}}},n.modal_visual_state=i({},t,{}),e.textContent=JSON.stringify(n);var r=document.getElementById("church-tithe-wp-element-"+t);church_tithe_wp_refresh_a_tithing_element(r)}},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e),window.Church_Tithe_WP_Card_Icon=function(t){function e(){return r(this,e),s(this,o(e).apply(this,arguments))}var n,i,_;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,React.Component),n=e,(i=[{key:"render_visa",value:function(){return React.createElement("div",{className:"church-tithe-wp-card-icon"},React.createElement("svg",{className:"SVGInline-svg SVGInline--cleaned-svg SVG-svg BrandIcon-svg BrandIcon--size--20-svg",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("path",{d:"M0 0h32v32H0z",fill:"#00579f"}),React.createElement("g",{fill:"#fff",fillRule:"nonzero"},React.createElement("path",{d:"M13.823 19.876H11.8l1.265-7.736h2.023zm7.334-7.546a5.036 5.036 0 0 0-1.814-.33c-1.998 0-3.405 1.053-3.414 2.56-.016 1.11 1.007 1.728 1.773 2.098.783.379 1.05.626 1.05.963-.009.518-.633.757-1.216.757-.808 0-1.24-.123-1.898-.411l-.267-.124-.283 1.737c.475.213 1.349.403 2.257.411 2.123 0 3.505-1.037 3.521-2.641.008-.881-.532-1.556-1.698-2.107-.708-.354-1.141-.593-1.141-.955.008-.33.366-.667 1.165-.667a3.471 3.471 0 0 1 1.507.297l.183.082zm2.69 4.806l.807-2.165c-.008.017.167-.452.266-.74l.142.666s.383 1.852.466 2.239h-1.682zm2.497-4.996h-1.565c-.483 0-.85.14-1.058.642l-3.005 7.094h2.123l.425-1.16h2.597c.059.271.242 1.16.242 1.16h1.873zm-16.234 0l-1.982 5.275-.216-1.07c-.366-1.234-1.515-2.575-2.797-3.242l1.815 6.765h2.14l3.18-7.728z"}),React.createElement("path",{d:"M6.289 12.14H3.033L3 12.297c2.54.641 4.221 2.189 4.912 4.049l-.708-3.556c-.116-.494-.474-.633-.915-.65z"})))))}},{key:"render_mastercard",value:function(){return React.createElement("div",{className:"church-tithe-wp-card-icon"},React.createElement("svg",{className:"SVGInline-svg SVGInline--cleaned-svg SVG-svg BrandIcon-svg BrandIcon--size--20-svg",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("path",{d:"M0 0h32v32H0z",fill:"#000"}),React.createElement("g",{fillRule:"nonzero"},React.createElement("path",{d:"M13.02 10.505h5.923v10.857H13.02z",fill:"#ff5f00"}),React.createElement("path",{d:"M13.396 15.935a6.944 6.944 0 0 1 2.585-5.43c-2.775-2.224-6.76-1.9-9.156.745s-2.395 6.723 0 9.368 6.38 2.969 9.156.744a6.944 6.944 0 0 1-2.585-5.427z",fill:"#eb001b"}),React.createElement("path",{d:"M26.934 15.935c0 2.643-1.48 5.054-3.81 6.21s-5.105.851-7.143-.783a6.955 6.955 0 0 0 2.587-5.428c0-2.118-.954-4.12-2.587-5.429 2.038-1.633 4.81-1.937 7.142-.782s3.811 3.566 3.811 6.21z",fill:"#f79e1b"})))))}},{key:"render_amex",value:function(){return React.createElement("div",{className:"church-tithe-wp-card-icon"},React.createElement("svg",{className:"SVGInline-svg SVGInline--cleaned-svg SVG-svg BrandIcon-svg BrandIcon--size--20-svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("path",{fill:"#0193CE",d:"M0 0h32v32H0z"}),React.createElement("path",{d:"M17.79 18.183h4.29l1.31-1.51 1.44 1.51h1.52l-2.2-2.1 2.21-2.27h-1.52l-1.44 1.51-1.26-1.5H17.8v-.85h4.68l.92 1.18 1.09-1.18h4.05l-3.04 3.11 3.04 2.94h-4.05l-1.1-1.17-.92 1.17h-4.68v-.84zm3.67-.84h-2.53v-.84h2.36v-.83h-2.36v-.84h2.7l1.01 1.26-1.18 1.25zm-14.5 1.68h-3.5l2.97-6.05h2.8l.35.67v-.67h3.5l.7 1.68.7-1.68h3.31v6.05h-2.63v-.84l-.34.84h-2.1l-.35-.84v.84H8.53l-.35-1h-.87l-.35 1zm9.96-.84v-4.37h-1.74l-1.4 3.03-1.41-3.03h-1.74v4.04l-2.1-4.04h-1.4l-2.1 4.37h1.23l.35-1h2.27l.35 1h2.43v-3.36l1.6 3.36h1.05l1.57-3.36v3.36h1.04zm-8.39-1.85l-.7-1.85-.87 1.85h1.57z",fill:"#FFF"}))))}},{key:"render",value:function(){return"visa"===this.props.brand?this.render_visa():"mastercard"===this.props.brand?this.render_mastercard():"amex"===this.props.brand?this.render_amex():this.props.brand}}])&&a(n.prototype,i),_&&a(n,_),e}();Church_Tithe_WP_Card_Icon,n(6);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}window.Church_Tithe_WP_Email_Field=function(t){function e(t){var n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=l(e).call(this,t))||"object"!==_(r)&&"function"!=typeof r?h(i):r).state={input_value:""},n.get_input_field_class=n.get_input_field_class.bind(h(h(n))),n.get_input_instruction_class=n.get_input_instruction_class.bind(h(h(n))),n.get_input_instruction_message=n.get_input_instruction_message.bind(h(h(n))),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,React.Component),n=e,(i=[{key:"componentDidMount",value:function(){var t=this;this.props.initial_value&&this.setState({initial_input_value:this.props.initial_value,input_value:this.props.initial_value},(function(){if(church_tithe_wp_validate_email(t.state.input_value))e=!0;else var e=!1;t.props.set_validation_and_value_of_field(t.props.state_validation_variable_name,e,t.props.state_value_variable_name,t.state.input_value)}))}},{key:"componentDidUpdate",value:function(){var t=this;this.props.initial_value&&this.props.initial_value!==this.state.initial_input_value&&this.setState({initial_input_value:this.props.initial_value,input_value:this.props.initial_value},(function(){if(church_tithe_wp_validate_email(t.state.input_value))e=!0;else var e=!1;t.props.set_validation_and_value_of_field(t.props.state_validation_variable_name,e,t.props.state_value_variable_name,t.state.input_value)}))}},{key:"get_current_instruction_key",value:function(){return this.props.form_validation_attempted?this.state.input_value?church_tithe_wp_validate_email(this.state.input_value)?"success":"not_an_email_address":"blank":this.state.input_value&&church_tithe_wp_validate_email(this.state.input_value)?"success":"initial"}},{key:"get_input_instruction_class",value:function(){var t=this.get_current_instruction_key();return this.props.instruction_codes[t]&&"error"==this.props.instruction_codes[t].instruction_type?" church-tithe-wp-instruction-error":""}},{key:"get_input_field_class",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t]){if("success"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-success";if("error"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-error";if("initial"==this.props.instruction_codes[t].instruction_type)return""}return""}},{key:"get_input_instruction_message",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t])return this.props.instruction_codes[t].instruction_message}},{key:"handle_input_change",value:function(t){if(church_tithe_wp_validate_email(t.target.value))e=!0;else var e=!1;if(this.props.set_validation_and_value_of_field(this.props.state_validation_variable_name,e,this.props.state_value_variable_name,t.target.value),this.props.form_validation_attempted){var n=this;setTimeout((function(){n.props.validate_form(!0)}),10)}this.setState({input_value:t.target.value})}},{key:"render",value:function(){var t={};return this.props.type&&(t.type=this.props.type),this.props.class_name?t.className=this.props.class_name+this.get_input_field_class():t.className=this.get_input_field_class(),this.props.name&&(t.name=this.props.name),t.onChange=this.handle_input_change.bind(this),t.onBlur=this.handle_input_change.bind(this),this.props.placeholder&&(t.placeholder=this.props.placeholder),t.value=this.state.input_value,this.props.step&&(t.step=this.props.step),this.props.disabled&&(t.disabled=this.props.disabled),React.createElement("div",null,React.createElement("label",null,React.createElement("div",{className:"church-tithe-wp-input-instruction"+this.get_input_instruction_class()},this.get_input_instruction_message()),React.createElement("input",t)))}}])&&u(n.prototype,i),r&&u(n,r),e}();Church_Tithe_WP_Email_Field;function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function v(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?E(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}window.Church_Tithe_WP_Input_Field=function(t){function e(t){var n;return d(this,e),(n=v(this,g(e).call(this,t))).state={input_value:""},n.get_input_field_class=n.get_input_field_class.bind(E(E(n))),n.get_input_instruction_class=n.get_input_instruction_class.bind(E(E(n))),n.get_input_instruction_message=n.get_input_instruction_message.bind(E(E(n))),n}return b(e,React.Component),y(e,[{key:"componentDidMount",value:function(){var t=this;this.props.initial_value&&this.setState({initial_input_value:this.props.initial_value,input_value:this.props.initial_value},(function(){if(t.state.input_value)e=!0;else var e=!1;t.props.set_validation_and_value_of_field(t.props.state_validation_variable_name,e,t.props.state_value_variable_name,t.state.input_value)}))}},{key:"componentDidUpdate",value:function(){var t=this;this.props.initial_value&&this.props.initial_value!==this.state.initial_input_value&&this.setState({initial_input_value:this.props.initial_value,input_value:this.props.initial_value},(function(){if(t.state.input_value)e=!0;else var e=!1;t.props.set_validation_and_value_of_field(t.props.state_validation_variable_name,e,t.props.state_value_variable_name,t.state.input_value)}))}},{key:"get_current_instruction_key",value:function(){if(this.props.form_validation_attempted){if(!this.state.input_value)return"empty";if(this.state.input_value)return"success"}else{if(!this.state.input_value)return"initial";if(this.state.input_value)return"success"}}},{key:"get_input_instruction_class",value:function(){var t=this.get_current_instruction_key();return this.props.instruction_codes[t]&&"error"==this.props.instruction_codes[t].instruction_type?" church-tithe-wp-instruction-error":""}},{key:"get_input_field_class",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t]){if("success"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-success";if("error"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-error";if("initial"==this.props.instruction_codes[t].instruction_type)return""}return""}},{key:"get_input_instruction_message",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t])return this.props.instruction_codes[t].instruction_message}},{key:"handle_input_change",value:function(t){if(t.target.value)e=!0;else var e=!1;if(this.props.set_validation_and_value_of_field(this.props.state_validation_variable_name,e,this.props.state_value_variable_name,t.target.value),this.props.form_validation_attempted){var n=this;setTimeout((function(){n.props.validate_form(!0)}),10)}this.setState({input_value:t.target.value})}},{key:"render",value:function(){var t={};return this.props.type&&(t.type=this.props.type),this.props.class_name?t.className=this.props.class_name+this.get_input_field_class():t.className=this.get_input_field_class(),this.props.name&&(t.name=this.props.name),t.onChange=this.handle_input_change.bind(this),this.props.placeholder&&(t.placeholder=this.props.placeholder),t.value=this.state.input_value,this.props.step&&(t.step=this.props.step),this.props.disabled&&(t.disabled=this.props.disabled),React.createElement("div",null,React.createElement("label",null,React.createElement("div",{className:"church-tithe-wp-input-instruction"+this.get_input_instruction_class()},this.get_input_instruction_message()),this.props.output_before_field,React.createElement("input",t),this.props.after_before_field))}}]),e}(),window.Church_Tithe_WP_Input_Field_Instruction=function(t){function e(t){var n;return d(this,e),(n=v(this,g(e).call(this,t))).get_input_field_class=n.get_input_field_class.bind(E(E(n))),n.set_current_input_field_instruction=n.set_current_input_field_instruction.bind(E(E(n))),n.get_input_instruction_class=n.get_input_instruction_class.bind(E(E(n))),n.get_input_instruction_message=n.get_input_instruction_message.bind(E(E(n))),n}return b(e,React.Component),y(e,[{key:"set_current_input_field_instruction",value:function(t,e){this.state.input_fields[t].current_instruction=value,this.setState({input_fields:this.state.input_fields})}},{key:"get_input_instruction_class",value:function(){var t=this.props.current_instruction;return this.props.instruction_codes[t]&&"error"==this.props.instruction_codes[t].instruction_type?" church-tithe-wp-instruction-error":""}},{key:"get_input_field_class",value:function(){var t=this.props.current_instruction;return this.props.instruction_codes[t]&&"error"==this.props.instruction_codes[t].instruction_type?" church-tithe-wp-input-error":""}},{key:"get_input_instruction_message",value:function(){var t=this.props.current_instruction;if(this.props.instruction_codes[t])return this.props.instruction_codes[t].instruction_message}},{key:"render",value:function(){return React.createElement("div",{className:"church-tithe-wp-input-instruction"+this.get_input_instruction_class()},this.get_input_instruction_message())}}]),e}();Church_Tithe_WP_Input_Field;function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(){return(S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function R(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}window.Church_Tithe_WP_Radio_Field=function(t){function e(t){var n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=C(e).call(this,t))||"object"!==k(r)&&"function"!=typeof r?P(i):r).state={input_value:""},n.get_input_field_class=n.get_input_field_class.bind(P(P(n))),n.get_input_instruction_class=n.get_input_instruction_class.bind(P(P(n))),n.get_input_instruction_message=n.get_input_instruction_message.bind(P(P(n))),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,React.Component),n=e,(i=[{key:"componentDidMount",value:function(){for(var t in this.props.radio_buttons)this.props.radio_buttons[t].selected&&this.setState({input_value:t},(function(){this.props.set_validation_and_value_of_field(this.props.state_validation_variable_name,!0,this.props.state_value_variable_name,this.state.input_value)}))}},{key:"get_current_instruction_key",value:function(){if(this.props.form_validation_attempted){if(!this.state.input_value)return"empty";if(this.state.input_value)return"success"}else{if(!this.state.input_value)return"initial";if(this.state.input_value)return"success"}}},{key:"get_input_instruction_class",value:function(){var t=this.get_current_instruction_key();return this.props.instruction_codes[t]&&"error"==this.props.instruction_codes[t].instruction_type?" church-tithe-wp-instruction-error":""}},{key:"get_input_field_class",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t]){if("success"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-success";if("error"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-error";if("initial"==this.props.instruction_codes[t].instruction_type)return""}return""}},{key:"get_input_instruction_message",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t])return this.props.instruction_codes[t].instruction_message}},{key:"handle_input_change",value:function(t){if(t.target.value)e=!0;else var e=!1;if(this.props.set_validation_and_value_of_field(this.props.state_validation_variable_name,e,this.props.state_value_variable_name,t.target.value),this.props.form_validation_attempted){var n=this;setTimeout((function(){n.props.validate_form(!0)}),10)}this.setState({input_value:t.target.value})}},{key:"render",value:function(){var t={};this.props.type&&(t.type=this.props.type),this.props.class_name?t.className=this.props.class_name+this.get_input_field_class():t.className=this.get_input_field_class(),this.props.name&&(t.name=this.props.name),t.onChange=this.handle_input_change.bind(this),t.value=this.state.input_value,this.props.disabled&&(t.disabled=this.props.disabled);var e=[];for(var n in this.props.radio_buttons)e.push(React.createElement("div",{key:n,className:"church-tithe-wp-radio-button-container"+(n==this.state.input_value?" church-tithe-wp-radio-current":"")},React.createElement("label",null,React.createElement("div",{className:"church-tithe-wp-radio-button-outer"},React.createElement("div",{className:"church-tithe-wp-radio-button-inner"},React.createElement("input",S({},t,{value:n,checked:n==this.state.input_value})),React.createElement("div",{className:"church-tithe-wp-radio-button-after"},this.props.radio_buttons[n].after_output))))));return React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-input-instruction"+this.get_input_instruction_class()},this.get_input_instruction_message()),React.createElement("div",{className:"church-tithe-wp-radio-buttons-container"},e.map((function(t,e){return t}))))}}])&&R(n.prototype,i),r&&R(n,r),e}();Church_Tithe_WP_Radio_Field;var j=n(0),N=n.n(j),T=n(1);function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(){return(x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function L(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}window.Church_Tithe_WP_Stripe_All_In_One_Field=function(t){function e(t){var n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=M(e).call(this,t))||"object"!==q(r)&&"function"!=typeof r?W(i):r).state={stripe_card_error_code:null},n.get_input_field_class=n.get_input_field_class.bind(W(W(n))),n.get_input_instruction_class=n.get_input_instruction_class.bind(W(W(n))),n.get_input_instruction_message=n.get_input_instruction_message.bind(W(W(n))),n.handle_cc_validation=n.handle_cc_validation.bind(W(W(n))),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(e,t),n=e,(i=[{key:"componentDidUpdate",value:function(){this.props.stripe_card_error_code!==this.state.stripe_card_error_code&&this.setState({stripe_card_error_code:this.props.stripe_card_error_code})}},{key:"get_current_instruction_key",value:function(){if(this.props.form_validation_attempted){if(!this.state.stripe_card_error_code||"none"==this.state.stripe_card_error_code)return"success";if(this.state.stripe_card_error_code)return this.state.stripe_card_error_code}else{if(!this.state.stripe_card_error_code||"none"==this.state.stripe_card_error_code)return"success";if(this.state.stripe_card_error_code)return"initial"}}},{key:"get_input_instruction_class",value:function(){var t=this.get_current_instruction_key();return this.props.instruction_codes[t]&&"error"==this.props.instruction_codes[t].instruction_type?" church-tithe-wp-instruction-error":""}},{key:"get_input_field_class",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t]){if("success"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-success";if("error"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-error";if("initial"==this.props.instruction_codes[t].instruction_type)return""}return""}},{key:"get_input_instruction_message",value:function(){var t=this.get_current_instruction_key();return this.props.instruction_codes[t]?this.props.instruction_codes[t].instruction_message:"Please check the credit card fields"}},{key:"handle_cc_validation",value:function(){var t=this;this.props.card_form.setState({postal_code:this.state.card_zip_code,stripe_elements_fields_complete:!!this.state.stripe_element&&this.state.stripe_element.complete},(function(){t.props.form_validation_attempted&&t.props.create_stripe_source().then((function(){t.setState({stripe_card_error_code:"success"})})).catch((function(e){t.setState({stripe_card_error_code:e})}))}))}},{key:"handle_postal_code_change",value:function(t){var e=this;this.setState({card_zip_code:t.target.value},(function(){e.handle_cc_validation()}))}},{key:"handle_input_change",value:function(t,e){var n=this;this.setState({stripe_element:t},(function(){e?n.setState({card_zip_code:t.value.postalCode},(function(){n.handle_cc_validation()})):n.handle_cc_validation()}))}},{key:"maybe_render_all_in_one_field",value:function(){var t=this;return this.props.disabled?"":N.a.createElement(T.CardElement,x({},{style:{base:{fontSize:this.props.fontSize,color:"#424770",letterSpacing:"0.025em",fontFamily:"Source Code Pro, Menlo, monospace","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},{onChange:function(e){return t.handle_input_change(e,!0)}}))}},{key:"maybe_render_all_in_one_field_mobile",value:function(){var t=this;return this.props.disabled?"":N.a.createElement(T.CardElement,{style:{base:{fontSize:"19px"}},onChange:function(e){return t.handle_input_change(e,!0)}})}},{key:"maybe_render_multi_field_cc_form",value:function(){var t=this;return this.props.disabled?"":N.a.createElement("div",{className:"church-tithe-wp-cc-multi-field"},N.a.createElement("div",null,N.a.createElement("div",{className:"church-tithe-wp-cc-multi-field-input-area"},N.a.createElement("label",null,N.a.createElement("div",{className:"church-tithe-wp-cc-form-icon church-tithe-wp-credit-card-icon"},N.a.createElement("svg",{role:"img",className:"Icon",fill:"#2b2b2b",focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},N.a.createElement("title",null,"Credit Card"),N.a.createElement("path",{fillRule:"evenodd",transform:"translate(8, 10)",d:"M2.00585866,0 C0.898053512,0 0,0.900176167 0,1.99201702 L0,9.00798298 C0,10.1081436 0.897060126,11 2.00585866,11 L11.9941413,11 C13.1019465,11 14,10.0998238 14,9.00798298 L14,1.99201702 C14,0.891856397 13.1029399,0 11.9941413,0 L2.00585866,0 Z M2.00247329,1 C1.44882258,1 1,1.4463114 1,1.99754465 L1,9.00245535 C1,9.55338405 1.45576096,10 2.00247329,10 L11.9975267,10 C12.5511774,10 13,9.5536886 13,9.00245535 L13,1.99754465 C13,1.44661595 12.544239,1 11.9975267,1 L2.00247329,1 Z M1,3 L1,5 L13,5 L13,3 L1,3 Z M11,8 L11,9 L12,9 L12,8 L11,8 Z M9,8 L9,9 L10,9 L10,8 L9,8 Z M9,8"}))),N.a.createElement(T.CardNumberElement,{style:{base:{fontSize:"19px"}},onChange:function(e){return t.handle_input_change(e,!1)}}))),N.a.createElement("div",{className:"church-tithe-wp-cc-multi-field-input-area"},N.a.createElement("label",null,N.a.createElement("div",{className:"church-tithe-wp-cc-form-icon church-tithe-wp-calendar-icon"},N.a.createElement("svg",{role:"img",className:"Icon",fill:"#2b2b2b",focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},N.a.createElement("title",null,"Calendar"),N.a.createElement("path",{fillRule:"evenodd",transform:"translate(8, 9)",d:"M2.0085302,1 C0.899249601,1 0,1.90017617 0,2.99201702 L0,10.007983 C0,11.1081436 0.901950359,12 2.0085302,12 L9.9914698,12 C11.1007504,12 12,11.0998238 12,10.007983 L12,2.99201702 C12,1.8918564 11.0980496,1 9.9914698,1 L2.0085302,1 Z M1.99539757,4 C1.44565467,4 1,4.43788135 1,5.00292933 L1,9.99707067 C1,10.5509732 1.4556644,11 1.99539757,11 L10.0046024,11 C10.5543453,11 11,10.5621186 11,9.99707067 L11,5.00292933 C11,4.44902676 10.5443356,4 10.0046024,4 L1.99539757,4 Z M3,1 L3,2 L4,2 L4,1 L3,1 Z M8,1 L8,2 L9,2 L9,1 L8,1 Z M3,0 L3,1 L4,1 L4,0 L3,0 Z M8,0 L8,1 L9,1 L9,0 L8,0 Z M8,0"}))),N.a.createElement(T.CardExpiryElement,{style:{base:{fontSize:"19px"}},onChange:function(e){return t.handle_input_change(e,!1)}}))),N.a.createElement("div",{className:"church-tithe-wp-cc-multi-field-input-area"},N.a.createElement("label",null,N.a.createElement("div",{className:"church-tithe-wp-cc-form-icon church-tithe-wp-lock-icon"},N.a.createElement("svg",{role:"img",className:"Icon",fill:"#2b2b2b",focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},N.a.createElement("title",null,"Lock"),N.a.createElement("path",{fillRule:"evenodd",transform:"translate(9, 9)",d:"M8.8,4 C8.8,1.79086089 7.76640339,4.18628304e-07 5.5,0 C3.23359661,-4.1480896e-07 2.2,1.79086089 2.2,4 L3.2,4 C3.2,2.34314567 3.81102123,0.999999681 5.5,1 C7.18897877,1.00000032 7.80000001,2.34314567 7.80000001,4 L8.8,4 Z M1.99201702,4 C0.891856397,4 0,4.88670635 0,5.99810135 L0,10.0018986 C0,11.1054196 0.900176167,12 1.99201702,12 L9.00798298,12 C10.1081436,12 11,11.1132936 11,10.0018986 L11,5.99810135 C11,4.89458045 10.0998238,4 9.00798298,4 L1.99201702,4 Z M1.99754465,5 C1.44661595,5 1,5.45097518 1,5.99077797 L1,10.009222 C1,10.5564136 1.4463114,11 1.99754465,11 L9.00245535,11 C9.55338405,11 10,10.5490248 10,10.009222 L10,5.99077797 C10,5.44358641 9.5536886,5 9.00245535,5 L1.99754465,5 Z M1.99754465,5"}))),N.a.createElement(T.CardCvcElement,{style:{base:{fontSize:"19px"}},onChange:function(e){return t.handle_input_change(e,!1)}}))),N.a.createElement("div",{className:"church-tithe-wp-cc-multi-field-input-area"},N.a.createElement("label",null,N.a.createElement("div",{className:"church-tithe-wp-cc-form-icon church-tithe-wp-zipcode-icon"},N.a.createElement("svg",{role:"img",className:"Icon",fill:"#2b2b2b",focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},N.a.createElement("title",null,"Push-pin"),N.a.createElement("path",{fillRule:"evenodd",transform:"translate(8, 7)",d:"M6.96835335,14.4141594 C7.14378184,14.2130951 7.33880908,13.9850182 7.54859821,13.7339676 C8.14789969,13.0167952 8.74728299,12.2571079 9.30845088,11.4862878 C10.9985122,9.16482011 12,7.25762947 12,5.80510753 C12,2.58994421 9.3050091,0 6,0 C2.6949909,0 0,2.58994421 0,5.80510753 C0,7.25762947 1.00148783,9.16482011 2.69154912,11.4862878 C3.25271701,12.2571079 3.85210031,13.0167952 4.45140179,13.7339676 C4.66119092,13.9850182 4.85621816,14.2130951 5.03164665,14.4141594 C5.13795558,14.5360035 5.2148819,14.6226158 5.25757295,14.6699269 L6,15.4927001 L6.74242705,14.6699269 C6.7851181,14.6226158 6.86204442,14.5360035 6.96835335,14.4141594 Z M5.25757295,13.3300731 C5.27604949,13.309597 5.30380421,13.278504 5.34014057,13.2373842 C3.98193439,11.6258984 1,7.854524 1,5.80510753 C1,3.15131979 3.23857611,1 6,1 C8.76142389,1 11,3.15131979 11,5.80510753 C11,7.854524 8.01806561,11.6258984 6.65985943,13.2373842 C6.69619579,13.278504 6.72395051,13.309597 6.74242705,13.3300731 L6.58151981,13.3300731 C6.22583758,13.7497221 6,14 6,14 C6,14 5.77416242,13.7497221 5.41848019,13.3300731 L5.25757295,13.3300731 Z M6,8 C7.10456955,8 8,7.10456955 8,6 C8,4.89543045 7.10456955,4 6,4 C4.89543045,4 4,4.89543045 4,6 C4,7.10456955 4.89543045,8 6,8 Z M6,7 C6.55228478,7 7,6.55228478 7,6 C7,5.44771522 6.55228478,5 6,5 C5.44771522,5 5,5.44771522 5,6 C5,6.55228478 5.44771522,7 6,7 Z M6,7"}))),N.a.createElement("input",{className:"church-tithe-wp-cc-multi-field-input-zip-code "+this.get_postal_code_success_class(),type:"text",onChange:this.handle_postal_code_change.bind(this),placeholder:this.props.zip_code_placeholder})))))}},{key:"get_postal_code_success_class",value:function(){return this.state.card_zip_code?" church-tithe-wp-input-success":this.props.form_validation_attempted?" church-tithe-wp-input-error":""}},{key:"render",value:function(){return this.props.mobile_mode?N.a.createElement("div",{className:"church-tithe-wp-cc-form church-tithe-wp-mobile"},N.a.createElement("div",{className:"church-tithe-wp-input-instruction"+this.get_input_instruction_class()},this.get_input_instruction_message()),this.maybe_render_multi_field_cc_form()):N.a.createElement("div",{className:"church-tithe-wp-cc-form church-tithe-wp-non-mobile"},N.a.createElement("label",null,N.a.createElement("div",{className:"church-tithe-wp-input-instruction"+this.get_input_instruction_class()},this.get_input_instruction_message()),this.maybe_render_all_in_one_field()))}}])&&L(n.prototype,i),r&&L(n,r),e}(N.a.Component);Church_Tithe_WP_Stripe_All_In_One_Field;function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(){return(z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}window.Church_Tithe_WP_Terms_Field=function(t){function e(t){var n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=B(e).call(this,t))||"object"!==I(r)&&"function"!=typeof r?U(i):r).state={terms_checked:null,terms_are_visible:!1},n.get_input_field_class=n.get_input_field_class.bind(U(U(n))),n.get_input_instruction_class=n.get_input_instruction_class.bind(U(U(n))),n.get_input_instruction_message=n.get_input_instruction_message.bind(U(U(n))),n.get_terms_visibility=n.get_terms_visibility.bind(U(U(n))),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(e,React.Component),n=e,(i=[{key:"componentDidMount",value:function(){this.props.is_validated&&this.props.form_validation_attempted&&this.setState({terms_checked:!0})}},{key:"dangerously_set_terms_body",value:function(){return{__html:this.props.terms_body}}},{key:"get_current_instruction_key",value:function(){return this.props.form_validation_attempted?this.props.is_validated?"checked":"unchecked":null==this.state.terms_checked?"initial":this.state.terms_checked?"checked":this.state.terms_checked&&this.props.is_validated?void 0:"unchecked"}},{key:"get_input_instruction_class",value:function(){var t=this.get_current_instruction_key();return this.props.instruction_codes[t]&&"error"==this.props.instruction_codes[t].instruction_type?" church-tithe-wp-instruction-error":""}},{key:"get_input_field_class",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t]){if("success"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-success";if("error"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-error";if("initial"==this.props.instruction_codes[t].instruction_type)return""}return""}},{key:"get_input_instruction_message",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t])return this.props.instruction_codes[t].instruction_message}},{key:"get_terms_visibility",value:function(){return this.state.terms_are_visible?"":"hidden"}},{key:"toggle_full_terms",value:function(){this.state.terms_are_visible?this.setState({terms_are_visible:!1}):this.setState({terms_are_visible:!0})}},{key:"handle_terms_change",value:function(t){var e;if(e=!this.state.terms_checked,this.props.set_validation_and_value_of_field(this.props.state_validation_variable_name,e),this.props.form_validation_attempted){var n=this;setTimeout((function(){n.props.validate_form(!0)}),10)}this.setState({terms_checked:e})}},{key:"render",value:function(){var t={};return null==this.state.terms_checked&&this.props.is_validated&&this.props.form_validation_attempted&&(t.defaultChecked="checked"),t.onChange=this.handle_terms_change.bind(this),this.props.class_name?t.className=this.props.class_name+this.get_input_field_class():t.className=this.get_input_field_class(),this.props.name&&(t.name=this.props.name),this.props.placeholder&&(t.placeholder=this.props.placeholder),this.props.defaultValue&&(t.defaultValue=this.props.defaultValue),this.props.disabled&&(t.disabled=this.props.disabled),React.createElement("div",null,React.createElement("div",{hidden:this.get_terms_visibility(),className:"church-tithe-wp-expandable-terms"},React.createElement("div",{className:"church-tithe-wp-terms-title"},this.props.terms_title),React.createElement("div",{className:"church-tithe-wp-terms-body",dangerouslySetInnerHTML:this.dangerously_set_terms_body()})),React.createElement("label",null,React.createElement("span",{className:"church-tithe-wp-input-instruction "+this.get_input_instruction_class()},React.createElement("input",z({type:"checkbox"},t)),this.get_input_instruction_message()+" ")),React.createElement("a",{className:"church-tithe-wp-view-terms-button",onClick:this.toggle_full_terms.bind(this)},"("+this.props.terms_show_text+")"))}}])&&D(n.prototype,i),r&&D(n,r),e}();Church_Tithe_WP_Terms_Field;function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}window.Church_Tithe_WP_TextArea_Field=function(t){function e(t){var n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=H(e).call(this,t))||"object"!==V(r)&&"function"!=typeof r?G(i):r).state={input_value:""},n.get_input_field_class=n.get_input_field_class.bind(G(G(n))),n.get_input_instruction_class=n.get_input_instruction_class.bind(G(G(n))),n.get_input_instruction_message=n.get_input_instruction_message.bind(G(G(n))),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(e,React.Component),n=e,(i=[{key:"componentDidMount",value:function(){this.setState({input_value:this.props.value})}},{key:"get_current_instruction_key",value:function(){return!this.state.input_value&&this.props.is_validated?"initial":this.props.value!=this.state.input_value||this.props.is_validated?this.state.input_value&&"typing"==this.props.is_validated?"initial":this.state.input_value&&"saving"==this.props.is_validated?"saving":this.state.input_value&&this.props.is_validated?"success":this.state.input_value&&!this.props.is_validated?"error":"initial":"initial"}},{key:"get_input_instruction_class",value:function(){var t=this.get_current_instruction_key();return this.props.instruction_codes[t]&&"error"==this.props.instruction_codes[t].instruction_type?" church-tithe-wp-instruction-error":""}},{key:"get_input_field_class",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t]){if("success"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-success";if("error"==this.props.instruction_codes[t].instruction_type)return" church-tithe-wp-input-error";if("initial"==this.props.instruction_codes[t].instruction_type)return""}return""}},{key:"get_input_instruction_message",value:function(){var t=this.get_current_instruction_key();if(this.props.instruction_codes[t])return this.props.instruction_codes[t].instruction_message}},{key:"handle_input_change",value:function(t){if(t.target.value)e=!0;else var e=!1;if(this.props.set_validation_and_value_of_field(this.props.state_validation_variable_name,e,this.props.state_value_variable_name,t.target.value),this.props.form_validation_attempted){var n=this;setTimeout((function(){n.props.validate_form(!0)}),10)}this.setState({input_value:t.target.value})}},{key:"render",value:function(){var t={};return this.props.type&&(t.type=this.props.type),this.props.class_name?t.className=this.props.class_name+this.get_input_field_class():t.className=this.get_input_field_class(),this.props.name&&(t.name=this.props.name),t.onChange=this.handle_input_change.bind(this),this.props.placeholder&&(t.placeholder=this.props.placeholder),t.value=this.state.input_value,this.props.step&&(t.step=this.props.step),this.props.disabled&&(t.disabled=this.props.disabled),React.createElement("div",null,React.createElement("label",null,React.createElement("div",{className:"church-tithe-wp-input-instruction"+this.get_input_instruction_class()},this.get_input_instruction_message()),React.createElement("textarea",t)))}}])&&Z(n.prototype,i),r&&Z(n,r),e}();Church_Tithe_WP_TextArea_Field;function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}church_tithe_wp_js_vars.tithe_form_vars;window.Church_Tithe_WP_Payment_Confirmation=function(t){function e(t){var n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=$(e).call(this,t))||"object"!==J(r)&&"function"!=typeof r?tt(i):r).state={note_with_tithe_value:null,note_with_tithe_validated:!1,form_validation_attempted:!1,time_since_last_keypress:0,after_payment_actions_completed:!1,print_html:null,sending_email_receipt:!1,email_receipt_success:null},n.note_with_tithe_keypress_delay,n.render_refunded_output=n.render_refunded_output.bind(tt(tt(n))),n.email_transaction_receipt=n.email_transaction_receipt.bind(tt(tt(n))),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(e,React.Component),n=e,(i=[{key:"componentDidMount",value:function(){this.props.main_component.state.dom_node&&this.setState({print_html:this.props.main_component.state.dom_node.outerHTML}),this.props.do_after_payment_actions&&this.do_after_payment_actions()}},{key:"componentDidUpdate",value:function(){this.props.main_component.state.dom_node&&this.state.print_html!=this.props.main_component.state.dom_node.outerHTML&&this.setState({print_html:this.props.main_component.state.dom_node.outerHTML})}},{key:"do_after_payment_actions",value:function(){this.email_transaction_receipt(!0,!1)}},{key:"get_transaction_visual_amount",value:function(){var t=this.props.main_component.state.current_transaction_info.transaction_charged_amount,e=this.props.main_component.state.current_transaction_info.transaction_charged_currency,n=this.props.main_component.state.current_transaction_info.transaction_currency_is_zero_decimal,i=this.props.main_component.state.unique_settings.locale,r=" ("+e.toUpperCase()+")";return church_tithe_wp_format_money(t,e,n,i,r)}},{key:"get_arrangement_visual_amount",value:function(){var t=this.props.main_component.state.current_transaction_info.arrangement_info.amount,e=this.props.main_component.state.current_transaction_info.arrangement_info.currency,n=this.props.main_component.state.current_transaction_info.arrangement_info.is_zero_decimal_currency,i=this.props.main_component.state.unique_settings.locale,r=this.props.main_component.state.current_transaction_info.arrangement_info.string_after+" ("+e.toUpperCase()+")";return church_tithe_wp_format_money(t,e,n,i,r)}},{key:"maybe_render_the_period_this_transaction_covers",value:function(){var t,e=this.props.main_component.state.current_transaction_info.transaction_period_start_date,n=this.props.main_component.state.current_transaction_info.transaction_period_end_date;return e&&n?"0000-00-00 00:00:00"==e||"0000-00-00 00:00:00"==n?"":(t=church_tithe_wp_format_date(e)+" - "+church_tithe_wp_format_date(n),React.createElement("div",null,React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title"},this.props.main_component.state.unique_settings.strings.transaction_period+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value"},t))):""}},{key:"validate_form",value:function(t){var e=!0;return this.state.note_with_tithe_validated||(e=!1),e}},{key:"email_transaction_receipt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState({sending_email_receipt:!0,email_receipt_success:null});var n=new FormData;n.append("action","church_tithe_wp_email_transaction_receipt"),n.append("church_tithe_wp_transaction_id",this.props.main_component.state.current_transaction_info.transaction_id),n.append("church_tithe_wp_session_id",this.props.main_component.state.session_id),n.append("church_tithe_wp_user_id",this.props.main_component.state.user_id),n.append("church_tithe_wp_notify_admin_too",t),n.append("church_tithe_wp_send_regardless_of_initial_emails_sent",e),n.append("church_tithe_wp_email_transaction_receipt_nonce",this.props.main_component.state.frontend_nonces.church_tithe_wp_email_transaction_receipt_nonce);var i=this;fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_email_transaction_receipt",{method:"POST",mode:"same-origin",credentials:"same-origin",body:n}).then((function(t){if(200!==t.status)return i.setState({sending_email_receipt:!1,email_receipt_success:!1}),void console.log("Looks like there was a problem. Status Code: "+t.status);t.json().then((function(t){t.success?i.setState({sending_email_receipt:!1,email_receipt_success:!0}):(console.log(t),i.setState({sending_email_receipt:!1,email_receipt_success:!1}))})).catch((function(){i.setState({sending_email_receipt:!1,email_receipt_success:!1}),console.log(t)}))})).catch((function(t){i.setState({sending_email_receipt:!1,email_receipt_success:!1}),console.log("Fetch Error :-S",t)}))}},{key:"set_validation_and_value_of_field",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if("note_with_tithe_value"!=n){var r;null==n?this.setState(Y({},t,e)):this.setState((Y(r={},t,e),Y(r,n,i),r))}else{var a=this.state.note_with_tithe,s=this;if(this.setState({note_with_tithe_validated:"typing",note_with_tithe_value:i}),i==a)return!1;this.note_with_tithe_keypress_delay&&(clearTimeout(this.note_with_tithe_keypress_delay),this.note_with_tithe_keypress_delay=null),this.note_with_tithe_keypress_delay=setTimeout((function(){clearTimeout(this.note_with_tithe_keypress_delay),s.save_note_with_tithe(i)}),500)}}},{key:"save_note_with_tithe",value:function(t){this.setState({note_with_tithe_validated:"saving"});var e=new FormData;e.append("action","church_tithe_wp_save_note_with_tithe"),e.append("church_tithe_wp_transaction_id",this.props.main_component.state.current_transaction_info.transaction_id),e.append("church_tithe_wp_note_with_tithe",this.state.note_with_tithe_value),e.append("church_tithe_wp_session_id",this.props.main_component.state.session_id),e.append("church_tithe_wp_user_id",this.props.main_component.state.user_id),e.append("church_tithe_wp_note_with_tithe_nonce",this.props.main_component.state.frontend_nonces.note_with_tithe_nonce);var n=this;fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_save_note_with_tithe",{method:"POST",mode:"same-origin",credentials:"same-origin",body:e}).then((function(t){200===t.status?t.json().then((function(t){t.success?n.setState({note_with_tithe_validated:!0}):(console.log(t),n.setState({note_with_tithe_validated:!1}))})):console.log("Looks like there was a problem. Status Code: "+t.status)})).catch((function(t){console.log("Fetch Error :-S",t)}))}},{key:"render_email_button",value:function(){var t="";return this.state.email_receipt_success&&(t=React.createElement("div",{className:"church-tithe-wp-email-receipt-message"},this.props.main_component.state.unique_settings.strings.email_receipt_success)),null===this.state.email_receipt_success||this.state.email_receipt_success||(t=React.createElement("div",{className:"church-tithe-wp-email-receipt-message"},this.props.main_component.state.unique_settings.strings.email_receipt_failed)),this.state.sending_email_receipt?React.createElement("div",{className:"church-tithe-wp-email-receipt"},this.props.main_component.state.unique_settings.strings.email_receipt_sending,React.createElement("button",{className:"church-tithe-wp-pay-button"},this.props.main_component.state.unique_settings.strings.email_receipt_sending)):this.state.sending_email_receipt?void 0:React.createElement("div",{className:"church-tithe-wp-email-receipt"},t,React.createElement("button",{className:"church-tithe-wp-pay-button",onClick:this.email_transaction_receipt.bind(this,!0,!0)},this.props.main_component.state.unique_settings.strings.email_receipt))}},{key:"render_print_button",value:function(){if(this.state.print_html&&"function"==typeof window.print)return React.createElement("div",{className:"church-tithe-wp-print-receipt"},React.createElement("button",{className:"church-tithe-wp-pay-button",onClick:et.bind(null,this.state.print_html,this.props.main_component.state.unique_settings.strings.receipt_title,"church_tithe_wp_default_skin-css")},this.props.main_component.state.unique_settings.strings.print_receipt))}},{key:"render_manage_payments_button",value:function(){return this.props.show_manage_payments?React.createElement("button",{type:"button",className:"church-tithe-wp-manage-payments-button church-tithe-wp-input-instruction church-tithe-wp-text-button",onClick:this.props.main_component.set_all_current_visual_states.bind(null,{manage_payments:{}},!1)},this.props.main_component.state.unique_settings.strings.manage_payments_button_text):""}},{key:"render_refunded_output",value:function(){return"refund"==this.props.main_component.state.current_transaction_info.transaction_type?"This is a refund for transaction "+this.props.main_component.state.current_transaction_info.refund_id:!this.props.main_component.state.current_transaction_info.refund_id||"initial"!=this.props.main_component.state.current_transaction_info.transaction_type&&"renewal"!=this.props.main_component.state.current_transaction_info.transaction_type?"":"This transaction has been refunded. See transaction "+this.props.main_component.state.current_transaction_info.refund_id}},{key:"render_things_before_receipt",value:function(){return"refund"==this.props.main_component.state.current_transaction_info.transaction_type?"":React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-confirmation-message"},this.props.main_component.state.unique_settings.strings.thank_you_message),React.createElement("div",{className:"church-tithe-wp-confirmation-note"},React.createElement(Church_Tithe_WP_TextArea_Field,{state_validation_variable_name:"note_with_tithe_validated",state_value_variable_name:"note_with_tithe_value",set_validation_and_value_of_field:this.set_validation_and_value_of_field.bind(this),form_validation_attempted:this.state.form_validation_attempted,is_validated:this.state.note_with_tithe_validated,validate_form:this.validate_form.bind(this),instruction_codes:this.props.main_component.state.unique_settings.strings.input_field_instructions.note_with_tithe,value:this.props.main_component.state.current_transaction_info?this.props.main_component.state.current_transaction_info.transaction_note_with_tithe:"",type:"text",class_name:"church-tithe-wp-note-with-tithe",placeholder:this.props.main_component.state.unique_settings.strings.input_field_instructions.note_with_tithe.placeholder_text,name:"tithe-amount"})))}},{key:"maybe_render_plan_details",value:function(){if("off"!==this.props.main_component.state.current_transaction_info.arrangement_info.recurring_status)return React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title"},this.props.main_component.state.unique_settings.strings.arrangement_id_title+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value"},this.props.main_component.state.current_transaction_info.arrangement_info.id)),React.createElement("div",null,React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title"},this.props.main_component.state.unique_settings.strings.arrangement_amount_title+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value"},this.get_arrangement_visual_amount())),this.maybe_render_the_period_this_transaction_covers())}},{key:"render",value:function(){return this.props.main_component.state.current_transaction_info?React.createElement("div",{className:"church-tithe-wp-payment-confirmation"},this.render_things_before_receipt(),React.createElement("div",{className:"church-tithe-wp-receipt"},React.createElement("div",{className:"church-tithe-wp-receipt-title"},this.props.main_component.state.unique_settings.strings.receipt_title),React.createElement("div",{className:"church-tithe-wp-receipt-field-space-below"},this.props.main_component.state.current_transaction_info.email),React.createElement("div",{className:"church-tithe-wp-receipt-field-space-below"},this.render_refunded_output()),React.createElement("div",{className:"church-tithe-wp-receipt-payee"},React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title church-tithe-wp-receipt-payee-title"},("refund"==this.props.main_component.state.current_transaction_info.transaction_type?this.props.main_component.state.unique_settings.strings.refund_payer:this.props.main_component.state.unique_settings.strings.receipt_payee)+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value church-tithe-wp-receipt-payee-value"},this.props.main_component.state.current_transaction_info.payee_name)),React.createElement("div",{className:"church-tithe-wp-receipt-transaction-id"},React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title church-tithe-wp-receipt-transaction-id-title"},this.props.main_component.state.unique_settings.strings.receipt_transaction_id+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value church-tithe-wp-receipt-transaction-id-value"},this.props.main_component.state.current_transaction_info.transaction_id)),React.createElement("div",{className:"church-tithe-wp-receipt-transaction-date"},React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title church-tithe-wp-receipt-date-title"},this.props.main_component.state.unique_settings.strings.receipt_date+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value church-tithe-wp-receipt-date-value"},church_tithe_wp_format_date_and_time(this.props.main_component.state.current_transaction_info.transaction_date_created))),React.createElement("div",{className:"church-tithe-wp-receipt-amount"},React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title church-tithe-wp-receipt-transaction-amount-title"},this.props.main_component.state.unique_settings.strings.receipt_transaction_amount+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value church-tithe-wp-receipt-transaction-amount-value"},this.get_transaction_visual_amount())),React.createElement("div",{className:"church-tithe-wp-receipt-statement-descriptor"},React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title church-tithe-wp-receipt-transaction-amount-title"},this.props.main_component.state.unique_settings.strings.receipt_statement_descriptor+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value church-tithe-wp-receipt-transaction-amount-value"},this.props.main_component.state.current_transaction_info.statement_descriptor)),this.maybe_render_plan_details()),this.render_email_button(),this.render_print_button(),this.render_manage_payments_button()):React.createElement(Church_Tithe_WP_Spinner,null)}}])&&X(n.prototype,i),r&&X(n,r),e}();Church_Tithe_WP_Payment_Confirmation;function et(t,e,n){var i=document.querySelector("head"),r=window.open("",e,"height=6000,width=8000");return r.document.write(i.outerHTML),r.document.write('<body class="church-tithe-wp-print-page">'),r.document.write(t),r.document.write("</body></html>"),setTimeout((function(){r.focus(),r.print()}),2e3),!0}function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function st(t,e,n){return e&&at(t.prototype,e),n&&at(t,n),t}function ot(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?ct(t):e}function ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ut(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}church_tithe_wp_js_vars.tithe_form_vars;window.Church_Tithe_WP_Payment_Box=function(t){function e(t){var n;return rt(this,e),(n=ot(this,_t(e).call(this,t))).state={map_of_visual_states:{payment:{variable:{}}},current_visual_state:"form",has_been_in_view:!1,stripe:null,current_title_string:n.props.main_component.state.unique_settings.strings.form_title},n}return ut(e,React.Component),st(e,[{key:"componentDidMount",value:function(){church_tithe_wp_set_visual_state_of_component({component:this,default_visual_states:{parent_in_view:"form",parent_not_in_view:"none"},name_of_visual_state_variable:"current_visual_state"})}},{key:"componentDidUpdate",value:function(){church_tithe_wp_set_visual_state_of_component({component:this,default_visual_states:{parent_in_view:"form",parent_not_in_view:"none"},name_of_visual_state_variable:"current_visual_state"})}},{key:"get_current_title",value:function(){return"loading"==this.state.current_visual_state?React.createElement("h1",{className:"church-tithe-wp-header-title"},this.props.main_component.state.unique_settings.strings.loading):"form"==this.state.current_visual_state?React.createElement("h1",{className:"church-tithe-wp-header-title"},this.props.main_component.state.unique_settings.strings.form_title):"confirmation"==this.state.current_visual_state?React.createElement("h1",{className:"church-tithe-wp-header-title"},this.props.main_component.state.unique_settings.strings.payment_confirmation_title):void 0}},{key:"get_current_subtitle",value:function(){return"loading"==this.state.current_visual_state?"":"form"==this.state.current_visual_state&&this.props.main_component.state.unique_settings.strings.form_subtitle?React.createElement("h2",{className:"church-tithe-wp-header-subtitle"},this.props.main_component.state.unique_settings.strings.form_subtitle):"confirmation"==this.state.current_visual_state?"":void 0}},{key:"maybe_render_close_button",value:function(){return this.props.show_close_button?React.createElement("div",{className:"church-tithe-wp-close-btn","aria-label":"Close",onClick:this.props.main_component.handle_visual_state_change_click_event.bind(this,{},{})},React.createElement("img",{src:this.props.main_component.state.dynamic_settings.close_button_url})):""}},{key:"render",value:function(){var t=this;return"none"==this.state.current_visual_state?"":React.createElement(T.StripeProvider,{apiKey:this.props.main_component.state.dynamic_settings.stripe_api_key},React.createElement("div",{className:"church-tithe-wp-component-box"},React.createElement("header",{className:"church-tithe-wp-header",role:"banner"},this.get_current_title(),this.get_current_subtitle(),this.maybe_render_close_button()),function(){if("loading"==t.state.current_visual_state)return React.createElement("div",{className:"church-tithe-wp-payment-box-view church-tithe-wp-payment-loading-view"},React.createElement(Church_Tithe_WP_Spinner,null))}(),function(){if("form"==t.state.current_visual_state)return React.createElement("div",{className:"church-tithe-wp-payment-form-container"},React.createElement("div",{className:"church-tithe-wp-payment-box-view"},React.createElement(T.Elements,null,React.createElement(ht,{main_component:t.props.main_component}))))}(),function(){if("confirmation"==t.state.current_visual_state)return t.props.main_component.state.current_transaction_info?React.createElement("div",{className:"church-tithe-wp-payment-box-view church-tithe-wp-payment-confirmation-view"},React.createElement(Church_Tithe_WP_Payment_Confirmation,{main_component:t.props.main_component,do_after_payment_actions:!0,show_manage_payments:!0})):React.createElement("div",{className:"church-tithe-wp-payment-box-view church-tithe-wp-payment-confirmation-view"},React.createElement("div",null,"No transaction found."),React.createElement("button",{onClick:t.props.main_component.set_all_current_visual_states.bind(null,{manage_payments:{}},!1)},"Manage your payments"))}()))}}]),e}();Church_Tithe_WP_Payment_Box;var pt=function(t){function e(t){var n;return rt(this,e),(n=ot(this,_t(e).call(this,t))).state={map_of_visual_states:{payment:{form:{variable:{}}}},stripe_is_set:!1,canDoPaymentRequest:!1,paymentRequest:null,default_payment_mode:null,payment_mode:null,payment_method_name:null,payment_request_button_name:null,form_has_any_error:!1,form_validation_attempted:!1,current_payment_state:"initial",currency_search_visible:!1,user_typed_currency:n.props.main_component.state.unique_settings.currency_code,verified_currency:n.props.main_component.state.unique_settings.currency_code,verified_currency_symbol:n.props.main_component.state.unique_settings.currency_symbol,verified_currency_type:n.props.main_component.state.unique_settings.currency_type,stripe_error_message:null,stripe_payment_method:null,tithe_amount:n.props.main_component.state.unique_settings.default_amount,privacy_policy_validated:!1,email_value:null,email_validated:!1,name_value:null,name_validated:!1,recurring_value:null,recurring_validated:!1,input_fields_tithe_amount_current_instruction:"initial",input_fields_stripe_all_in_one_current_instruction:"initial"},n.currency_text_input=React.createRef(),n.check_for_payment_request_availability=n.check_for_payment_request_availability.bind(ct(ct(n))),n.validate_tithe_amount=n.validate_tithe_amount.bind(ct(ct(n))),n.handleCreditCardSubmit=n.handleCreditCardSubmit.bind(ct(ct(n))),n.set_payment_mode=n.set_payment_mode.bind(ct(ct(n))),n.get_currency_flag_class=n.get_currency_flag_class.bind(ct(ct(n))),n.create_stripe_payment_method=n.create_stripe_payment_method.bind(ct(ct(n))),n}return ut(e,React.Component),st(e,[{key:"componentDidMount",value:function(){this.props.main_component.setState({current_transaction_info:null,current_arrangement_info:null})}},{key:"componentDidUpdate",value:function(){church_tithe_wp_set_visual_state_of_component({component:this,default_visual_states:{parent_in_view:this.state.default_payment_mode,parent_not_in_view:"none"},name_of_visual_state_variable:"payment_mode"}),this.check_for_payment_request_availability(),this.props.main_component.state.form_email_value!==this.state.email_value&&this.props.main_component.setState({form_email_value:this.state.email_value})}},{key:"country_supports_payment_request_button",value:function(){var t=this.props.main_component.state.dynamic_settings.stripe_account_country_code;return!!["AT","AU","BE","BR","CA","CH","DE","DK","EE","ES","FI","FR","GB","GR","HK","IE","IN","IT","JP","LT","LU","LV","MX","MY","NL","NO","NX","PH","PL","PT","RO","SE","SG","SK","US"].indexOf(t)}},{key:"check_for_payment_request_availability",value:function(){var t=this;if(this.props.stripe&&!this.state.stripe_is_set){var e=this.props.stripe.paymentRequest({country:this.props.main_component.state.dynamic_settings.stripe_account_country_code,currency:this.state.verified_currency?this.state.verified_currency.toLowerCase():"USD",total:{label:this.props.main_component.state.unique_settings.strings.payment_request_label,amount:this.state.tithe_amount},requestPayerEmail:!0});this.setState({stripe_is_set:!0}),e.canMakePayment().then((function(n){n&&t.country_supports_payment_request_button()?(t.setState({canDoPaymentRequest:!!n,paymentRequest:e,default_payment_mode:"payment_request"},(function(){t.state.payment_mode?"payment_request"!==t.state.payment_mode&&"credit_card"!==t.state.payment_mode?t.set_payment_mode("payment_request"):"credit_card"===t.state.payment_mode&&t.set_payment_mode("credit_card"):t.setState({payment_mode:"payment_request"})})),e.on("paymentmethod",(function(e){e.source,e.error;var n=e.complete;e.error&&e.error.message,t.setState({stripe_payment_method:e.paymentMethod,email_validated:!0,email_value:e.payerEmail,name_value:e.paymentMethod.billing_details.name,name_validated:!0,payment_method_name:"apple-pay"!=e.methodName?"payment-request":e.methodName,payment_request_button_name:"apple-pay"!=e.methodName?"payment-request":e.methodName}),t.do_ajax_stripe_transaction(),n("success")}))):t.setState({canDoPaymentRequest:!!n,default_payment_mode:"credit_card",payment_method_name:"basic-card"},(function(){t.state.payment_mode?t.set_payment_mode("credit_card"):t.setState({payment_mode:"credit_card"})}))}))}}},{key:"get_visual_amount_for_input_field",value:function(){if(0===this.state.tithe_amount);else if(!this.state.tithe_amount)return"";if("zero_decimal"!==this.state.verified_currency_type)var t=this.state.tithe_amount/100;else t=this.state.tithe_amount;return t}},{key:"get_visual_amount",value:function(){if(0===this.state.tithe_amount);else if(!this.state.tithe_amount)return"";if("zero_decimal"!==this.state.verified_currency_type)var t=this.state.tithe_amount/100;else t=this.state.tithe_amount;var e=this.props.main_component.state.dynamic_settings.locale.replace("_","-");return t=t.toLocaleString(e),this.state.verified_currency_symbol+t}},{key:"get_amount_field_step_format",value:function(){if("zero_decimal"!==this.state.verified_currency_type)var t="0.01";else t="1";return t}},{key:"get_view_class",value:function(t){return-1!=t.indexOf(this.state.payment_mode)?" church-tithe-wp-current-view":" church-tithe-wp-hidden-view"}},{key:"get_disabled_status",value:function(t){return-1!=t.indexOf(this.state.payment_mode)?"":"disabled"}},{key:"validate_tithe_amount",value:function(t,e){return this.state.tithe_amount?e&&this.setState({input_fields_tithe_amount_current_instruction:"initial"}):(t=!1,e&&this.setState({input_fields_tithe_amount_current_instruction:"empty"})),t}},{key:"validate_currency",value:function(t,e){return this.state.verified_currency?e&&this.setState({input_fields_tithe_amount_current_instruction:"initial"}):(t=!1,e&&this.setState({input_fields_tithe_amount_current_instruction:"invalid_currency"})),t}},{key:"create_stripe_payment_method",value:function(){var t=this;return new Promise((function(e,n){var i=t,r={billing_details:{address:{postal_code:t.state.postal_code},email:t.state.email_value,name:t.props.name_value}};t.state.stripe_elements_fields_complete&&!r.billing_details.address.postal_code?t.setState({stripe_card_error_code:"incomplete_zip"},(function(){n("incomplete_zip")})):t.props.stripe.createPaymentMethod("card",r).then((function(t){t.error?i.setState({stripe_payment_method:null,stripe_card_error_code:t.error.code},(function(){return n(t.error.code),t.error})):i.setState({stripe_payment_method:t.paymentMethod,stripe_card_error_code:"success"},(function(){return e(t.paymentMethod),t.paymentMethod}))}))}))}},{key:"validate_form",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!0;return"credit_card"==this.state.payment_mode&&(this.state.name_validated||(e=!1),this.state.email_validated||(e=!1),this.state.stripe_payment_method||(e=!1)),e=this.validate_tithe_amount(e,t),e=this.validate_currency(e,t),this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body&&(this.state.privacy_policy_validated||(e=!1)),t&&(this.setState({form_validation_attempted:!0}),e?this.setState({form_has_any_error:!1,current_payment_state:"initial"}):this.setState({form_has_any_error:!0,current_payment_state:"payment_attempt_failed"})),e}},{key:"handleCreditCardSubmit",value:function(t){var e=this;t.preventDefault(),this.setState({current_payment_state:"attempting_payment"}),this.create_stripe_payment_method().then((function(){e.validate_form(!0)?e.do_ajax_stripe_transaction():e.setState({current_payment_state:"payment_attempt_failed"},(function(){return!1}))})).catch((function(t){e.setState({stripe_card_error_code:t,current_payment_state:"payment_attempt_failed"},(function(){console.log(t)}));e.validate_form(!0);return!1}))}},{key:"do_ajax_stripe_transaction",value:function(){this.setState({current_payment_state:"attempting_payment"});var t=this,e=new FormData;e.append("action","church_tithe_wp_get_payment_intent"),e.append("church_tithe_wp_stripe_payment_method_id",t.state.stripe_payment_method.id),e.append("church_tithe_wp_amount",t.state.tithe_amount),e.append("church_tithe_wp_name",t.state.name_value),e.append("church_tithe_wp_email",t.state.email_value),e.append("church_tithe_wp_currency",t.state.verified_currency.toLowerCase()),e.append("church_tithe_wp_method",t.state.payment_method_name),e.append("church_tithe_wp_page_url",t.props.main_component.state.single_page_app_base_url),e.append("church_tithe_wp_recurring_value",t.state.recurring_value),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_get_payment_intent",{method:"POST",mode:"same-origin",credentials:"same-origin",body:e}).then((function(e){if(200!==e.status)return t.setState({current_payment_state:"payment_attempt_failed",stripe_error_message:"Looks like there was a problem. Status Code: "+e.status}),void console.log("Looks like there was a problem. Status Code: "+e.status);e.json().then((function(e){e.success?t.props.stripe.confirmPaymentIntent(e.client_secret,{save_payment_method:!0}).then((function(n){n.error?t.setState({current_payment_state:"payment_attempt_failed",stripe_error_message:n.error.message}):"succeeded"===n.paymentIntent.status?(t.setState({current_payment_state:"success"}),t.props.main_component.setState({session_id:e.session_id,user_id:e.user_id,current_transaction_info:e.transaction_info}),setTimeout((function(){t.props.main_component.set_all_current_visual_states({payment:{confirmation:{}}})}),1e3)):t.props.stripe.handleCardPayment(e.client_secret,{}).then((function(n){n.error?(console.log(n.error),t.setState({current_payment_state:"payment_attempt_failed",stripe_error_message:n.error.message})):(t.setState({current_payment_state:"success"}),t.props.main_component.setState({session_id:e.session_id,user_id:e.user_id,current_transaction_info:e.transaction_info}),setTimeout((function(){t.props.main_component.set_all_current_visual_states({payment:{confirmation:{}}})}),1e3))}))})):t.setState({current_payment_state:"payment_attempt_failed",stripe_error_message:e.details})})).catch((function(e){t.setState({current_payment_state:"payment_attempt_failed",stripe_error_message:"Unable to make payment at this time. Please try again."}),console.log("Fetch Error: ",e)}))})).catch((function(e){t.setState({current_payment_state:"payment_attempt_failed",stripe_error_message:t.strings.general_server_error}),console.log("Fetch Error: ",e)}))}},{key:"handleAmountChange",value:function(t){var e=t.target.value;if("zero_decimal"!==this.state.verified_currency_type)var n=100*Number(e);else n=Number(e);1<=(n=Number(n.toFixed(0)))?(this.state.paymentRequest&&this.state.paymentRequest.update({currency:this.state.verified_currency.toLowerCase(),total:{label:this.props.main_component.state.unique_settings.strings.payment_request_label,amount:n}}),this.setState({tithe_amount:n,paymentRequest:this.state.paymentRequest})):(n="",this.setState({tithe_amount:null})),this.state.form_has_any_error&&this.validate_form(!0)}},{key:"handlePaymentRequestValidateButton",value:function(t){this.validate_form(!0)}},{key:"set_payment_mode",value:function(t){var e=this;if("toggle"==t)"payment_request"==this.state.payment_mode?this.setState({payment_mode:"credit_card",payment_method_name:"basic-card",stripe_error_message:null,form_has_any_error:!1,form_validation_attempted:!1},(function(){e.props.main_component.set_all_current_visual_states({payment:{form:it({},e.state.payment_mode,{})}})})):"credit_card"==this.state.payment_mode&&this.setState({payment_mode:"payment_request",payment_method_name:this.state.payment_request_button_name,stripe_error_message:null,form_has_any_error:!1,form_validation_attempted:!1},(function(){e.props.main_component.set_all_current_visual_states({payment:{form:it({},e.state.payment_mode,{})}})}));else{var n="credit_card"===t?"basic-card":this.state.payment_request_button_name;this.setState({payment_mode:t,payment_method_name:n,stripe_error_message:null,form_has_any_error:!1,form_validation_attempted:!1},(function(){e.props.main_component.set_all_current_visual_states({payment:{form:it({},e.state.payment_mode,{})}})}))}}},{key:"set_validation_and_value_of_field",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(a,s){var o;null==i?n.setState(it({},t,e),(function(){a(n.state)})):n.setState((it(o={},t,e),it(o,i,r),o),(function(){a(n.state)}))}))}},{key:"render_payment_field",value:function(t,e){if("function"==typeof this["render_"+t+"_field"])return this["render_"+t+"_field"]()?React.createElement("div",{className:"church-tithe-wp-payment-field-container church-tithe-wp-payment-field-"+t},React.createElement("div",{className:"church-tithe-wp-payment-field "+this.get_view_class(e)},this["render_"+t+"_field"]())):"";console.log("Not found: "+t)}},{key:"get_currency_flag_class",value:function(){return this.state.verified_currency?" flag flag-"+this.state.verified_currency.substring(0,2).toLowerCase():" flag"}},{key:"toggle_currency_search",value:function(){var t=this;this.state.currency_search_visible?this.setState({currency_search_visible:!1}):this.setState({currency_search_visible:!0,user_typed_currency:"",currency_typing_frozen:!1},(function(){t.currency_text_input.focus()}))}},{key:"confirm_currency_exists",value:function(t){var e=this,n=new FormData;n.append("action","church_tithe_wp_confirm_currency"),n.append("church_tithe_wp_currency_to_confirm",t),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_confirm_currency",{method:"POST",mode:"same-origin",credentials:"same-origin",body:n}).then((function(t){if(200!==t.status)return e.setState({verified_currency:!1,verified_currency_symbol:e.unique_settings.currency_symbol,verified_currency_type:e.unique_settings.currency_type}),void console.log("Looks like there was a problem. Status Code: "+t.status);t.json().then((function(t){t.success?(t.success_type,t.success_type,"one_currency_matched"==t.success_type&&(e.setState({user_typed_currency:t.validated_currency,verified_currency:t.validated_currency,verified_currency_symbol:t.validated_currency_symbol,verified_currency_type:t.validated_currency_type,currency_search_visible:!1,currency_typing_frozen:!0},(function(){1<=e.state.tithe_amount&&(e.state.paymentRequest&&e.state.paymentRequest.update({currency:e.state.verified_currency.toLowerCase(),total:{label:"Pay",amount:e.state.tithe_amount}}),e.setState({paymentRequest:e.state.paymentRequest},(function(){e.validate_currency(!0,!0)})))})),setTimeout((function(){e.setState({currency_typing_frozen:!1})}),3e3))):e.setState({verified_currency:!1,verified_currency_symbol:e.unique_settings.currency_symbol,verified_currency_type:e.unique_settings.currency_type},(function(){e.validate_currency(!0,!0)}))})).catch((function(t){e.setState({verified_currency:!1,verified_currency_symbol:e.unique_settings.currency_symbol,verified_currency_type:e.unique_settings.currency_type}),console.log("Fetch Error: ",t)}))})).catch((function(t){e.setState({verified_currency:!1,verified_currency_symbol:e.unique_settings.currency_symbol,verified_currency_type:e.unique_settings.currency_type}),console.log("Fetch Error: ",t)}))}},{key:"handle_currency_typing",value:function(t){var e=this;if(this.state.currency_typing_frozen){if(t.target.value.length>this.state.user_typed_currency.length)return;this.setState({currency_typing_frozen:!1})}t.target.value||this.setState({user_typed_currency:t.target.value.toUpperCase(),verified_currency:this.props.main_component.state.unique_settings.currency_code,verified_currency_symbol:this.props.main_component.state.unique_settings.currency_symbol}),this.setState({user_typed_currency:t.target.value.toUpperCase()},(function(){e.confirm_currency_exists(e.state.user_typed_currency)}))}},{key:"handle_currency_enter",value:function(t){this.setState({user_typed_currency:""})}},{key:"handle_currency_leave",value:function(t){var e=this;t.target.value||this.setState({user_typed_currency:this.props.main_component.state.unique_settings.currency_code,verified_currency:this.props.main_component.state.unique_settings.currency_code,verified_currency_symbol:this.props.main_component.state.unique_settings.currency_symbol,currency_search_visible:!1},(function(){e.validate_form()}))}},{key:"render_currency_switcher",value:function(){var t=this;return this.state.currency_search_visible?React.createElement("div",{className:"church-tithe-wp-tithe-currency-code"},React.createElement("span",{className:"church-tithe-wp-tithe-currency-flag-container"},t.state.verified_currency?React.createElement("img",{src:t.props.main_component.state.unique_settings.blank_flag_url,style:{backgroundImage:"url("+t.props.main_component.state.unique_settings.flag_sprite_url+")"},className:"church-tithe-wp-tithe-currency-flag"+t.get_currency_flag_class()}):React.createElement(Church_Tithe_WP_Spinner,{color_mode:"church-tithe-wp-spinner-dark"})),React.createElement("span",{className:"church-tithe-wp-tithe-currency-text-container"},React.createElement("input",{ref:function(e){return t.currency_text_input=e},type:"text",value:this.state.user_typed_currency,onChange:this.handle_currency_typing.bind(this),onFocus:this.handle_currency_enter.bind(this),onBlur:this.handle_currency_leave.bind(this),placeholder:this.props.main_component.state.unique_settings.strings.currency_search_text,autoComplete:"off"}))):React.createElement("button",{className:"church-tithe-wp-tithe-currency-code-toggle-btn",onClick:this.toggle_currency_search.bind(this)},React.createElement("div",{className:"church-tithe-wp-tithe-currency-code"},React.createElement("span",{className:"church-tithe-wp-tithe-currency-flag-container"},React.createElement("img",{src:this.props.main_component.state.unique_settings.blank_flag_url,style:{backgroundImage:"url("+this.props.main_component.state.unique_settings.flag_sprite_url+")"},className:"church-tithe-wp-tithe-currency-flag"+this.get_currency_flag_class()})),React.createElement("span",{className:"church-tithe-wp-tithe-currency-text-container"},this.state.verified_currency)))}},{key:"render_amount_field",value:function(){var t=this;return React.createElement("div",null,React.createElement(Church_Tithe_WP_Input_Field_Instruction,{current_instruction:this.state.input_fields_tithe_amount_current_instruction,instruction_codes:this.props.main_component.state.unique_settings.strings.input_field_instructions.tithe_amount}),React.createElement("div",{className:"church-tithe-wp-amount-container"+(t.state.currency_search_visible?" currency-search-visible":"")},React.createElement("div",{className:"church-tithe-wp-tithe-currency-symbol"},this.state.verified_currency_symbol),React.createElement("div",{className:"church-tithe-wp-tithe-amount-input-container"},React.createElement("label",null,React.createElement("input",{disabled:this.get_disabled_status(["credit_card","payment_request"]),type:"number",min:1,step:this.get_amount_field_step_format(),className:"church-tithe-wp-tithe-amount-input",placeholder:this.props.main_component.state.unique_settings.strings.input_field_instructions.tithe_amount.placeholder_text,name:"tithe-amount",onChange:this.handleAmountChange.bind(this),value:this.get_visual_amount_for_input_field(),lang:this.props.main_component.state.dynamic_settings.locale.replace("_","-")}))),React.createElement("div",{className:"church-tithe-wp-currency-switcher"},this.render_currency_switcher())))}},{key:"render_recurring_field",value:function(){return React.createElement(Church_Tithe_WP_Radio_Field,{state_validation_variable_name:"recurring_validated",state_value_variable_name:"recurring_value",set_validation_and_value_of_field:this.set_validation_and_value_of_field.bind(this),form_validation_attempted:this.state.form_validation_attempted,is_validated:this.state.recurring_validated,validate_form:this.validate_form.bind(this),instruction_codes:this.props.main_component.state.unique_settings.strings.input_field_instructions.recurring,type:"radio",radio_buttons:this.props.main_component.state.unique_settings.recurring_options,class_name:"church-tithe-wp-recurring",placeholder:this.props.main_component.state.unique_settings.strings.input_field_instructions.recurring.placeholder_text,name:"recurring"})}},{key:"render_privacy_policy_field",value:function(){if(this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body)return React.createElement(Church_Tithe_WP_Terms_Field,{state_validation_variable_name:"privacy_policy_validated",set_validation_and_value_of_field:this.set_validation_and_value_of_field.bind(this),form_validation_attempted:this.state.form_validation_attempted,is_validated:this.state.privacy_policy_validated,validate_form:this.validate_form.bind(this),instruction_codes:this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy,terms_title:this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_title,terms_body:this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body,terms_show_text:this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_show_text,terms_hide_text:this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_hide_text,disabled:this.get_disabled_status(["credit_card","payment_request"])})}},{key:"render_email_field",value:function(){return React.createElement(Church_Tithe_WP_Email_Field,{state_validation_variable_name:"email_validated",state_value_variable_name:"email_value",set_validation_and_value_of_field:this.set_validation_and_value_of_field.bind(this),form_validation_attempted:this.state.form_validation_attempted,is_validated:this.state.email_validated,validate_form:this.validate_form.bind(this),instruction_codes:this.props.main_component.state.unique_settings.strings.input_field_instructions.email,initial_value:this.props.main_component.state.unique_settings.strings.current_user_email,type:"email",class_name:"church-tithe-wp-email",placeholder:this.props.main_component.state.unique_settings.strings.input_field_instructions.email.placeholder_text,name:"email",disabled:this.get_disabled_status(["credit_card"])})}},{key:"render_name_field",value:function(){return React.createElement(Church_Tithe_WP_Input_Field,{state_validation_variable_name:"name_validated",state_value_variable_name:"name_value",set_validation_and_value_of_field:this.set_validation_and_value_of_field.bind(this),form_validation_attempted:this.state.form_validation_attempted,is_validated:this.state.name_validated,validate_form:this.validate_form.bind(this),instruction_codes:this.props.main_component.state.unique_settings.strings.input_field_instructions.name,initial_value:this.props.main_component.state.unique_settings.strings.current_user_name,type:"text",class_name:"church-tithe-wp-name",placeholder:this.props.main_component.state.unique_settings.strings.input_field_instructions.name.placeholder_text,name:"tithe-amount",disabled:this.get_disabled_status(["credit_card"])})}},{key:"render_all_in_one_credit_card_field",value:function(){return React.createElement(Church_Tithe_WP_Stripe_All_In_One_Field,{card_form:this,form_validation_attempted:this.state.form_validation_attempted,validate_form:this.validate_form.bind(this),stripe_card_error_code:this.state.stripe_card_error_code,instruction_codes:this.props.main_component.state.unique_settings.strings.input_field_instructions.stripe_all_in_one,stripe:this.props.stripe,disabled:this.get_disabled_status(["credit_card"]),mobile_mode:!(window.innerWidth>600),zip_code_placeholder:this.props.main_component.state.unique_settings.strings.zip_code_placeholder,create_stripe_source:this.create_stripe_payment_method})}},{key:"render_payment_error_field",value:function(){return this.state.form_has_any_error?React.createElement("div",{className:"church-tithe-wp-payment-error-message"},this.props.main_component.state.unique_settings.strings.form_has_an_error):"payment_attempt_failed"==this.state.current_payment_state&&this.state.stripe_error_message?React.createElement("div",{className:"church-tithe-wp-payment-error-message"},this.state.stripe_error_message):""}},{key:"render_recurring_text_on_payment_button",value:function(){return this.state.recurring_value&&"never"!=this.state.recurring_value?" "+this.props.main_component.state.unique_settings.recurring_options[this.state.recurring_value].after_output.toLowerCase():""}},{key:"render_payment_request_button_field",value:function(){if("initial"==this.state.current_payment_state||"payment_attempt_failed"==this.state.current_payment_state){if(this.validate_form(!1))return React.createElement("div",null,React.createElement(T.PaymentRequestButtonElement,{paymentRequest:this.state.paymentRequest,className:"PaymentRequestButton",style:{paymentRequestButton:{theme:"dark",height:"50px"}}}));var t=this.state.verified_currency?" ("+this.state.verified_currency+")":"",e=this.props.main_component.state.unique_settings.strings.payment_verb+" "+this.get_visual_amount()+this.render_recurring_text_on_payment_button()+t;return React.createElement("button",{className:"church-tithe-wp-pay-button",type:"button",onClick:this.handlePaymentRequestValidateButton.bind(this),disabled:this.get_disabled_status(["payment_request"])},e)}if("attempting_payment"==this.state.current_payment_state||"success"==this.state.current_payment_state)return this.render_complete_payment_button_field()}},{key:"render_complete_payment_button_field",value:function(){var t,e,n=this.state.verified_currency?" ("+this.state.verified_currency+")":"";return"initial"==this.state.current_payment_state&&(t="",e=this.props.main_component.state.unique_settings.strings.payment_verb+" "+this.get_visual_amount()+this.render_recurring_text_on_payment_button()+n),"attempting_payment"==this.state.current_payment_state&&(t=" church-tithe-wp-btn-attempting-payment",e=React.createElement(Church_Tithe_WP_Spinner,null)),"success"==this.state.current_payment_state&&(t=" church-tithe-wp-btn-success",e=React.createElement("span",null,React.createElement(Church_Tithe_WP_Checkmark,null))),"payment_attempt_failed"==this.state.current_payment_state&&(t=" church-tithe-wp-btn-error",e=this.props.main_component.state.unique_settings.strings.complete_payment_button_error_text),React.createElement("div",null,React.createElement("button",{type:"button",onClick:this.handleCreditCardSubmit.bind(this),disabled:this.get_disabled_status(["credit_card"]),className:"church-tithe-wp-pay-button"+t},e))}},{key:"render_payment_mode_toggler_field",value:function(){return React.createElement("button",{type:"button",className:"church-tithe-wp-other-payment-option church-tithe-wp-input-instruction church-tithe-wp-text-button",onClick:this.set_payment_mode.bind(null,"toggle")},this.props.main_component.state.unique_settings.strings.other_payment_option)}},{key:"render_manage_payments_button",value:function(){return React.createElement("button",{type:"button",className:"church-tithe-wp-manage-payments-button church-tithe-wp-input-instruction church-tithe-wp-text-button",onClick:this.props.main_component.set_all_current_visual_states.bind(null,{manage_payments:{}},!1)},this.props.main_component.state.unique_settings.strings.manage_payments_button_text)}},{key:"render_card_form",value:function(){return this.state.canDoPaymentRequest?React.createElement("form",{onSubmit:this.handleCreditCardSubmit},this.render_payment_field("amount",["credit_card","payment_request"]),this.render_payment_field("recurring",["credit_card","payment_request"]),this.render_payment_field("email",["credit_card"]),this.render_payment_field("name",["credit_card"]),this.render_payment_field("all_in_one_credit_card",["credit_card"]),this.render_payment_field("privacy_policy",["credit_card","payment_request"]),this.render_payment_field("payment_error",["credit_card","payment_request"]),this.render_payment_field("payment_request_button",["payment_request"]),this.render_payment_field("complete_payment_button",["credit_card"]),React.createElement("div",{className:"church-tithe-wp-payment-field-container top-jar-wp-alternate-actions"},this.render_payment_mode_toggler_field(),React.createElement("span",{className:"top-jar-wp-alternate-actions-separator"},"|"),this.render_manage_payments_button())):React.createElement("form",{onSubmit:this.handleCreditCardSubmit},this.render_payment_field("amount",["credit_card","payment_request"]),this.render_payment_field("recurring",["credit_card","payment_request"]),this.render_payment_field("email",["credit_card"]),this.render_payment_field("name",["credit_card"]),this.render_payment_field("all_in_one_credit_card",["credit_card"]),this.render_payment_field("privacy_policy",["credit_card","payment_request"]),this.render_payment_field("complete_payment_button",["credit_card"]),React.createElement("div",{className:"church-tithe-wp-payment-field-container top-jar-wp-alternate-actions"},this.render_manage_payments_button()))}},{key:"render",value:function(){return this.state.payment_mode?this.render_card_form():React.createElement(Church_Tithe_WP_Spinner,{color_mode:"church-tithe-wp-spinner-dark"})}}]),e}(),ht=Object(T.injectStripe)(pt);function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}church_tithe_wp_js_vars.tithe_form_vars;window.Church_Tithe_WP_Manage_Payments=function(t){function e(t){var n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=ft(e).call(this,t))||"object"!==mt(r)&&"function"!=typeof r?vt(i):r).state={map_of_visual_states:{manage_payments:{variable:{}}},current_visual_state:"none"},n.check_if_user_is_logged_in=n.check_if_user_is_logged_in.bind(vt(vt(n))),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(e,React.Component),n=e,(i=[{key:"componentDidMount",value:function(){this.check_if_user_is_logged_in(),church_tithe_wp_set_visual_state_of_component({component:this,default_visual_states:{parent_in_view:"arrangements",parent_not_in_view:"none"},name_of_visual_state_variable:"current_visual_state"})}},{key:"componentDidUpdate",value:function(){church_tithe_wp_set_visual_state_of_component({component:this,default_visual_states:{parent_in_view:"arrangements",parent_not_in_view:"none"},name_of_visual_state_variable:"current_visual_state"})}},{key:"check_if_user_is_logged_in",value:function(){var t=this,e=new FormData;e.append("action","church_tithe_wp_check_if_user_logged_in"),e.append("church_tithe_wp_check_if_user_logged_in",!0),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_check_if_user_logged_in",{method:"POST",mode:"same-origin",credentials:"same-origin",body:e}).then((function(e){if(200!==e.status)return t.props.main_component.setState({user_logged_in:null}),void console.log("Looks like there was a problem. Status Code: "+e.status);e.json().then((function(e){e.success?t.props.main_component.setState({user_logged_in:e.user_logged_in,frontend_nonces:e.frontend_nonces?e.frontend_nonces:t.props.main_component.state.frontend_nonces}):t.props.main_component.setState({user_logged_in:null,frontend_nonces:e.frontend_nonces?e.frontend_nonces:t.props.main_component.state.frontend_nonces})})).catch((function(e){t.props.main_component.setState({user_logged_in:null}),console.log("Fetch Error: ",e)}))})).catch((function(e){t.props.main_component.setState({user_logged_in:null}),console.log("Fetch Error :-S",e)}))}},{key:"get_current_title_string",value:function(){return this.props.main_component.state.user_logged_in?"transactions"==this.state.current_visual_state?this.props.main_component.state.unique_settings.strings.transactions_title:"transaction"==this.state.current_visual_state?this.props.main_component.state.unique_settings.strings.transaction_title:"arrangements"==this.state.current_visual_state?this.props.main_component.state.unique_settings.strings.arrangements_title:"arrangement"==this.state.current_visual_state?this.props.main_component.state.unique_settings.strings.arrangement_title:void 0:this.props.main_component.state.unique_settings.strings.login}},{key:"maybe_render_close_button",value:function(){return this.props.show_close_button?React.createElement("div",{className:"church-tithe-wp-close-btn","aria-label":"Close",onClick:this.props.main_component.handle_visual_state_change_click_event.bind(this,{},{})},React.createElement("img",{src:this.props.main_component.state.dynamic_settings.close_button_url})):""}},{key:"render",value:function(){var t=this;return this.props.main_component.state.user_logged_in?React.createElement("div",{className:"church-tithe-wp-manage-payments"},React.createElement("div",{className:"church-tithe-wp-component-box"},React.createElement("header",{className:"church-tithe-wp-header",role:"banner"},React.createElement("h1",{className:"church-tithe-wp-header-title"},this.get_current_title_string()),this.maybe_render_close_button()),React.createElement("div",{className:"church-tithe-wp-payment-box-view church-tithe-wp-manage-payments-view"},"none"==t.state.current_visual_state?"":React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-manage-payments-view "+church_tithe_wp_get_current_view_class(t,["transactions","arrangements"])},React.createElement(Church_Tithe_WP_Manage_Payments_Nav,{main_component:t.props.main_component,current_visual_state:t.state.current_visual_state})),React.createElement("div",{className:"church-tithe-wp-manage-payments-view "+church_tithe_wp_get_current_view_class(t,["transactions"])},React.createElement(Church_Tithe_WP_Transactions,{main_component:t.props.main_component,check_if_user_is_logged_in:t.check_if_user_is_logged_in.bind(t)})),React.createElement("div",{className:"church-tithe-wp-manage-payments-view "+church_tithe_wp_get_current_view_class(t,["transaction"])},function(){if("transaction"==t.state.current_visual_state)return React.createElement(Church_Tithe_WP_Payment_Confirmation,{main_component:t.props.main_component,do_after_payment_actions:!1})}()),React.createElement("div",{className:"church-tithe-wp-manage-payments-view "+church_tithe_wp_get_current_view_class(t,["arrangements"])},React.createElement(Church_Tithe_WP_Arrangements,{main_component:t.props.main_component,check_if_user_is_logged_in:t.check_if_user_is_logged_in.bind(t)})),React.createElement("div",{className:"church-tithe-wp-manage-payments-view "+church_tithe_wp_get_current_view_class(t,["arrangement"])},React.createElement(Church_Tithe_WP_Arrangement,{main_component:t.props.main_component,check_if_user_is_logged_in:t.check_if_user_is_logged_in.bind(t)})))))):React.createElement("div",{className:"church-tithe-wp-manage-payments"},React.createElement("div",{className:"church-tithe-wp-component-box"},React.createElement("header",{className:"church-tithe-wp-header",role:"banner"},React.createElement("h1",{className:"church-tithe-wp-header-title"},this.get_current_title_string()),this.maybe_render_close_button()),React.createElement("div",{className:"church-tithe-wp-payment-box-view church-tithe-wp-manage-payments-view"},React.createElement("div",{className:"church-tithe-wp-login-view"},React.createElement(Church_Tithe_WP_Login,{main_component:this.props.main_component,check_if_user_is_logged_in:this.props.check_if_user_is_logged_in})))))}}])&&dt(n.prototype,i),r&&dt(n,r),e}();Church_Tithe_WP_Manage_Payments;function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wt(t,e){return!e||"object"!==gt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}church_tithe_wp_js_vars.tithe_form_vars;window.Church_Tithe_WP_Manage_Payments_Nav=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wt(this,Et(e).call(this,t))).state={},n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(e,React.Component),n=e,(i=[{key:"set_view_to_transactions",value:function(){this.props.main_component.set_all_current_visual_states({manage_payments:{transactions:{}}})}},{key:"set_view_to_arrangements",value:function(){this.props.main_component.set_all_current_visual_states({manage_payments:{arrangements:{}}})}},{key:"get_current_button_class",value:function(t){return this.props.current_visual_state==t?" church-tithe-wp-manage-nav-current-btn":""}},{key:"render",value:function(){return this.props.main_component.state.user_logged_in?React.createElement("div",{className:"church-tithe-wp-manage-payments-nav-container-full"},React.createElement("div",{className:"church-tithe-wp-manage-payments-nav-container-center"},React.createElement("div",{className:"church-tithe-wp-manage-payments-nav"},React.createElement("div",{className:"church-tithe-wp-arrangements-btn"+this.get_current_button_class("arrangements")},React.createElement("button",{className:"church-tithe-wp-text-button",onClick:this.set_view_to_arrangements.bind(this)},this.props.main_component.state.unique_settings.strings.arrangements_title)),React.createElement("div",{className:"church-tithe-wp-transactions-btn"+this.get_current_button_class("transactions")},React.createElement("button",{className:"church-tithe-wp-text-button",onClick:this.set_view_to_transactions.bind(this)},this.props.main_component.state.unique_settings.strings.transactions_title))))):""}}])&&bt(n.prototype,i),r&&bt(n,r),e}();Church_Tithe_WP_Manage_Payments_Nav;function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ct(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}church_tithe_wp_js_vars.tithe_form_vars;window.Church_Tithe_WP_Login=function(t){function e(t){var n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=Ot(e).call(this,t))||"object"!==St(r)&&"function"!=typeof r?jt(i):r).state={current_visual_state:"login_form",login_error_message:null,email_value:null,email_validated:!1,login_code_digit_1:"",login_code_digit_2:"",login_code_digit_3:"",login_code_digit_4:"",login_code_digit_5:"",login_code_digit_6:""},n.handle_login_form_submit=n.handle_login_form_submit.bind(jt(jt(n))),n.login_code_digit_1=React.createRef(),n.login_code_digit_2=React.createRef(),n.login_code_digit_3=React.createRef(),n.login_code_digit_4=React.createRef(),n.login_code_digit_5=React.createRef(),n.login_code_digit_6=React.createRef(),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pt(t,e)}(e,React.Component),n=e,(i=[{key:"componentDidMount",value:function(){this.setState({prior_all_current_visual_states:this.props.main_component.state.all_current_visual_states})}},{key:"request_login_email",value:function(){this.setState({current_visual_state:"loading",login_error_message:null});var t=this,e=new FormData;e.append("action","church_tithe_wp_email_login"),e.append("church_tithe_wp_email",t.state.email_value),e.append("church_tithe_wp_email_login_nonce",this.props.main_component.state.frontend_nonces.email_login_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_email_login",{method:"POST",mode:"same-origin",credentials:"same-origin",body:e}).then((function(e){if(200!==e.status)return t.setState({current_visual_state:"login_form",login_error_message:"Looks like there was a problem. Status Code: "+e.status}),void console.log("Looks like there was a problem. Status Code: "+e.status);e.json().then((function(e){e.success?t.setState({current_visual_state:"login_code_input",login_error_message:null}):t.setState({current_visual_state:"login_form",login_error_message:e.details},(function(){t.login_code_digit_1.focus()}))})).catch((function(e){t.setState({current_visual_state:"login_form",login_error_message:t.props.main_component.strings.general_server_error}),console.log("Fetch Error: ",e)}))})).catch((function(e){t.setState({current_visual_state:"login_form",login_error_message:t.props.main_component.strings.general_server_error}),console.log("Fetch Error :-S",e)}))}},{key:"attempt_to_login",value:function(){this.setState({current_visual_state:"loading",login_error_message:null});var t=this,e=new FormData;e.append("action","church_tithe_wp_attempt_user_login"),e.append("church_tithe_wp_email",t.state.email_value),e.append("church_tithe_wp_login_code",t.state.login_code),e.append("church_tithe_wp_login_nonce",this.props.main_component.state.frontend_nonces.login_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_attempt_user_login",{method:"POST",mode:"same-origin",credentials:"same-origin",body:e}).then((function(e){if(200!==e.status)return t.setState({current_visual_state:"login_code_input",login_error_message:"Looks like there was a problem. Status Code: "+e.status}),void console.log("Looks like there was a problem. Status Code: "+e.status);e.json().then((function(e){e.success?(t.setState({current_visual_state:"login_attempt_succeeded",login_error_message:null}),setTimeout((function(){location.reload()}),300)):t.setState({current_visual_state:"login_code_input",login_error_message:e.details},(function(){t.login_code_digit_6.focus()}))})).catch((function(e){t.setState({current_visual_state:"login_code_input",login_error_message:t.props.main_component.strings.general_server_error}),console.log("Fetch Error: ",e)}))})).catch((function(e){t.setState({current_visual_state:"login_code_input",login_error_message:t.props.main_component.strings.general_server_error}),console.log("Fetch Error :-S",e)}))}},{key:"set_validation_and_value_of_field",value:function(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null==i?this.setState(Rt({},t,e)):this.setState((Rt(n={},t,e),Rt(n,i,r),n))}},{key:"validate_form",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!0;return this.state.email_validated||(e=!1),t&&(this.setState({form_validation_attempted:!0}),e?this.setState({form_has_any_error:!1}):this.setState({form_has_any_error:!0})),e}},{key:"handle_login_form_submit",value:function(t){if(t.preventDefault(),!this.validate_form(!0))return!1;this.request_login_email()}},{key:"render_login_field",value:function(t){if("function"==typeof this["render_"+t+"_field"])return this["render_"+t+"_field"]()?React.createElement("div",{className:"church-tithe-wp-payment-field-container church-tithe-wp-payment-field-"+t},React.createElement("div",{className:"church-tithe-wp-payment-field"},this["render_"+t+"_field"]())):"";console.log("Not found: "+t)}},{key:"render_login_code_field",value:function(t){var e=this;return React.createElement("input",{type:"text",value:this.state["login_code_digit_"+t],ref:function(n){e["login_code_digit_"+t]=n},onChange:this.handle_login_form_digit_change.bind(this,t),onKeyUp:this.handle_login_form_digit_backspace.bind(this,t),onFocus:this.handle_login_form_digit_focus.bind(this,t)})}},{key:"render_login_code_fields",value:function(){return React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-input-instruction"},this.props.main_component.state.unique_settings.strings.input_field_instructions.login_code.initial.instruction_message),React.createElement("div",{className:"church-tithe-wp-login-code-fields"},this.render_login_code_field(1),this.render_login_code_field(2),this.render_login_code_field(3),React.createElement("div",null," - "),this.render_login_code_field(4),this.render_login_code_field(5),this.render_login_code_field(6)))}},{key:"handle_login_form_digit_change",value:function(t,e){var n,i,r=this;!Number.isInteger(parseInt(e.target.value))&&e.target.value||(e.target.value.length>1?(i=e.target.value,console.log(i),n=i.split(""),this.setState({login_code_digit_1:n[0]?n[0]:"",login_code_digit_2:n[1]?n[1]:"",login_code_digit_3:n[2]?n[2]:"",login_code_digit_4:n[3]?n[3]:"",login_code_digit_5:n[4]?n[4]:"",login_code_digit_6:n[5]?n[5]:""},(function(){r.after_login_code_digit_set(t,!0)}))):this.setState(Rt({},"login_code_digit_"+t,e.target.value),(function(){r.after_login_code_digit_set(t,!1)})))}},{key:"after_login_code_digit_set",value:function(t,e){var n,i=this,r=t+1;!e&&this.state["login_code_digit_"+t]&&this["login_code_digit_"+r]?this["login_code_digit_"+r].focus():(n=this.state.login_code_digit_1+this.state.login_code_digit_2+this.state.login_code_digit_3+this.state.login_code_digit_4+this.state.login_code_digit_5+this.state.login_code_digit_6,this.setState({login_code:n},(function(){6===n.length&&i.attempt_to_login()})))}},{key:"handle_login_form_digit_backspace",value:function(t,e){if(8===e.keyCode&&!this.state["login_code_digit_"+t]){var n=t-1;this["login_code_digit_"+n]&&this["login_code_digit_"+n].focus()}}},{key:"handle_login_form_digit_focus",value:function(t,e){this.state.login_error_message&&document.activeElement===this.login_code_digit_6||(this.setState({login_error_message:null}),this.setState(Rt({},"login_code_digit_"+t,"")))}},{key:"render_email_field",value:function(){return React.createElement(Church_Tithe_WP_Email_Field,{main_component:this.props.main_component,state_validation_variable_name:"email_validated",state_value_variable_name:"email_value",set_validation_and_value_of_field:this.set_validation_and_value_of_field.bind(this),form_validation_attempted:this.state.form_validation_attempted,is_validated:this.state.email_validated,validate_form:this.validate_form.bind(this),instruction_codes:this.props.main_component.state.unique_settings.strings.input_field_instructions.email_for_login_code,initial_value:this.props.main_component.state.current_transaction_info?this.props.main_component.state.current_transaction_info.email:"",type:"email",class_name:"church-tithe-wp-email",placeholder:this.props.main_component.state.unique_settings.strings.input_field_instructions.email_for_login_code.placeholder_text,name:"email",editing_key:"strings/input_field_instructions/email/[current_key_here]/instruction_message"})}},{key:"render_login_error_field",value:function(){return this.state.form_has_any_error?React.createElement("div",{className:"church-tithe-wp-payment-error-message"},this.props.main_component.state.unique_settings.strings.login_form_has_an_error):this.state.login_error_message?React.createElement("div",{className:"church-tithe-wp-payment-error-message"},this.state.login_error_message):""}},{key:"render_login_submit_button_field",value:function(){var t,e;return"login_form"==this.state.current_visual_state&&(t="",e=this.props.main_component.state.unique_settings.strings.login_button_text),"loading"==this.state.current_visual_state&&(t=" church-tithe-wp-btn-attempting-payment",e=React.createElement(Church_Tithe_WP_Spinner,null)),"login_attempt_succeeded"==this.state.current_visual_state&&(t=" church-tithe-wp-btn-success",e=React.createElement("span",null,React.createElement(Church_Tithe_WP_Checkmark,null))),React.createElement("div",null,React.createElement("button",{type:"submit",className:"church-tithe-wp-pay-button"+t},e))}},{key:"get_current_view_class",value:function(t){var e=this.state.current_visual_state;return-1!=t.indexOf(e)?" church-tithe-wp-current-view":" church-tithe-wp-hidden-view"}},{key:"render",value:function(){return React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-login-form-loading"+this.get_current_view_class(["loading"])},React.createElement(Church_Tithe_WP_Spinner,{color_mode:"church-tithe-wp-spinner-dark"})),React.createElement("div",{className:"church-tithe-wp-login-form"+this.get_current_view_class(["login_form"])},React.createElement("form",{onSubmit:this.handle_login_form_submit},this.render_login_field("email"),this.render_login_field("login_error"),this.render_login_field("login_submit_button"))),React.createElement("div",{className:"church-tithe-wp-login-code-input"+this.get_current_view_class(["login_code_input"])},this.render_login_code_fields(),this.render_login_field("login_error")),React.createElement("div",{className:"church-tithe-wp-login-success"+this.get_current_view_class(["login_attempt_succeeded"])},React.createElement(Church_Tithe_WP_Checkmark,null)))}}])&&Ct(n.prototype,i),r&&Ct(n,r),e}();Church_Tithe_WP_Manage_Payments;var Nt=n(2);function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Lt(t,e){return!e||"object"!==Tt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}church_tithe_wp_js_vars.tithe_form_vars;window.Church_Tithe_WP_Transactions=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Lt(this,Mt(e).call(this,t))).state={current_visual_state:"none",total_items:0,current_transaction_info:null},n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(e,React.Component),n=e,(i=[{key:"componentDidUpdate",value:function(){if(this.props.main_component.state.user_logged_in?("transactions"!=this.state.current_visual_state&&"fetching_data"!=this.state.current_visual_state&&this.setState({current_visual_state:"transactions"}),"transactions"!=this.state.current_visual_state||this.state.rows||this.get_transactions(1,10,"")):"login"!=this.state.current_visual_state&&this.setState({current_visual_state:"login"}),Object.keys(this.props.main_component.state.all_current_visual_states)[0]&&this.props.main_component.state.all_current_visual_states.manage_payments&&Object.keys(this.props.main_component.state.all_current_visual_states.manage_payments)[0]){var t=Object.keys(this.props.main_component.state.all_current_visual_states.manage_payments)[0];if("transaction"==t&&Object.keys(this.props.main_component.state.all_current_visual_states.manage_payments[t])[0]){var e=Object.keys(this.props.main_component.state.all_current_visual_states.manage_payments[t])[0];this.props.main_component.state.current_transaction_info||this.get_transaction(e),this.props.main_component.state.current_transaction_info&&e!==this.props.main_component.state.current_transaction_info.transaction_id&&this.get_transaction(e)}}}},{key:"get_transactions",value:function(t,e,n){var i=this;this.setState({current_visual_state:"fetching_data"});var r=new FormData;r.append("action","church_tithe_wp_get_transactions"),r.append("church_tithe_wp_current_page",t),r.append("church_tithe_wp_items_per_page",e),r.append("church_tithe_wp_search_term",n),r.append("church_tithe_wp_get_transactions_nonce",this.props.main_component.state.frontend_nonces.get_transactions_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_get_transactions",{method:"POST",mode:"same-origin",credentials:"same-origin",body:r}).then((function(t){if(200!==t.status)return i.setState({columns:null,rows:null,total_items:0}),void console.log("Looks like there was a problem. Status Code: "+t.status);t.json().then((function(t){t.success?i.props.main_component.setState({user_logged_in:t.user_logged_in,frontend_nonces:t.frontend_nonces?t.frontend_nonces:i.props.main_component.state.frontend_nonces},(function(){i.setState({current_visual_state:"transactions",columns:t.columns,rows:t.rows,total_items:t.total_items})})):(i.setState({columns:null,rows:null,total_items:0}),i.props.main_component.setState({user_logged_in:null,frontend_nonces:t.frontend_nonces?t.frontend_nonces:i.props.main_component.state.frontend_nonces}))})).catch((function(t){console.log("Fetch Error: ",t)}))})).catch((function(t){console.log("Fetch Error :-S",t)}))}},{key:"get_transaction",value:function(t){var e=this;return new Promise((function(n,i){var r=e,a=new FormData;a.append("action","church_tithe_wp_get_transaction"),a.append("church_tithe_wp_transaction_id",t),a.append("church_tithe_wp_get_transaction_nonce",e.props.main_component.state.frontend_nonces.get_transaction_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_get_transaction",{method:"POST",mode:"same-origin",credentials:"same-origin",body:a}).then((function(t){if(200!==t.status)return r.props.main_component.setState({user_logged_in:null,current_transaction_info:null}),console.log("Looks like there was a problem. Status Code: "+t.status),void i();t.json().then((function(t){t.success?r.props.main_component.setState({user_logged_in:t.user_logged_in,current_transaction_info:t.transaction_info,frontend_nonces:t.frontend_nonces?t.frontend_nonces:r.props.main_component.state.frontend_nonces},(function(){n()})):r.props.main_component.setState({user_logged_in:null,current_transaction_info:null,frontend_nonces:t.frontend_nonces?t.frontend_nonces:r.props.main_component.state.frontend_nonces},(function(){i()}))})).catch((function(t){console.log("Fetch Error: ",t),i()}))})).catch((function(t){console.log("Fetch Error :-S",t),i()}))}))}},{key:"on_row_click",value:function(t,e){var n=this;this.get_transaction(t.id.value).then((function(){n.props.main_component.set_all_current_visual_states({manage_payments:{transaction:qt({},t.id.value,{})}})}))}},{key:"render",value:function(){return"none"==this.state.current_visual_state?"":React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-login-view "+church_tithe_wp_get_current_view_class(this,["login"])},React.createElement(Church_Tithe_WP_Login,{main_component:this.props.main_component,check_if_user_is_logged_in:this.props.check_if_user_is_logged_in})),React.createElement("div",{className:"church-tithe-wp-manage-transactions-view "+church_tithe_wp_get_current_view_class(this,["transactions","fetching_data"])},React.createElement(Nt.a,(qt(t={main_component:this.props.main_component,current_visual_state:this.state.current_visual_state,rows:this.state.rows,columns:this.state.columns,total_items:this.state.total_items,get_rows_and_columns:this.get_transactions.bind(this)},"current_visual_state",this.state.current_visual_state),qt(t,"on_row_click",this.on_row_click.bind(this)),t))));var t}}])&&xt(n.prototype,i),r&&xt(n,r),e}();Church_Tithe_WP_Transactions;function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Dt(t,e){return!e||"object"!==Wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}church_tithe_wp_js_vars.tithe_form_vars;window.Church_Tithe_WP_Arrangements=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Dt(this,Bt(e).call(this,t))).state={current_visual_state:"none",total_items:0,current_arrangement_info:null,current_arrangement_payment_method:null,fetching_arrangements:!1,fetching_arrangement:!1},n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(e,React.Component),n=e,(i=[{key:"componentDidMount",value:function(){this.props.check_if_user_is_logged_in()}},{key:"componentDidUpdate",value:function(){var t=this;if(this.props.main_component.state.user_logged_in?("arrangements"!==this.state.current_visual_state&&"fetching_data"!=this.state.current_visual_state&&this.setState({current_visual_state:"arrangements"}),"arrangements"!=this.state.current_visual_state||this.state.rows||this.get_arrangements(1,10,"")):"login"!=this.state.current_visual_state&&this.setState({current_visual_state:"login"}),this.props.main_component.state.reload_arrangements&&this.props.main_component.setState({reload_arrangements:!1},(function(){t.get_arrangements(1,10,"")})),Object.keys(this.props.main_component.state.all_current_visual_states)[0]&&this.props.main_component.state.all_current_visual_states.manage_payments&&Object.keys(this.props.main_component.state.all_current_visual_states.manage_payments)[0]){var e=Object.keys(this.props.main_component.state.all_current_visual_states.manage_payments)[0];if("arrangement"==e&&Object.keys(this.props.main_component.state.all_current_visual_states.manage_payments[e])[0]){var n=Object.keys(this.props.main_component.state.all_current_visual_states.manage_payments[e])[0];this.props.main_component.state.current_arrangement_info?this.props.main_component.state.current_arrangement_info&&this.props.main_component.state.current_arrangement_info.id:this.get_arrangement(n)}}}},{key:"get_arrangements",value:function(t,e,n){if(this.state.fetching_arrangements)return!1;var i=this;this.setState({current_visual_state:"fetching_data",fetching_arrangements:!0});var r=new FormData;r.append("action","church_tithe_wp_get_arrangements"),r.append("church_tithe_wp_current_page",t),r.append("church_tithe_wp_items_per_page",e),r.append("church_tithe_wp_search_term",n),r.append("church_tithe_wp_get_arrangements_nonce",this.props.main_component.state.frontend_nonces.get_arrangements_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_get_arrangements",{method:"POST",mode:"same-origin",credentials:"same-origin",body:r}).then((function(t){if(200!==t.status)return i.setState({columns:null,rows:null,total_items:0,fetching_arrangements:!1}),void console.log("Looks like there was a problem. Status Code: "+t.status);t.json().then((function(t){t.success?i.props.main_component.setState({user_logged_in:t.user_logged_in,frontend_nonces:t.frontend_nonces?t.frontend_nonces:i.props.main_component.state.frontend_nonces},(function(){i.setState({fetching_arrangements:!1,current_visual_state:"arrangements",columns:t.columns,rows:t.rows,total_items:t.total_items})})):(i.setState({fetching_arrangements:!1,columns:null,rows:null,total_items:0}),i.props.main_component.setState({user_logged_in:null,frontend_nonces:t.frontend_nonces?t.frontend_nonces:i.props.main_component.state.frontend_nonces}))})).catch((function(t){console.log("Fetch Error: ",t)}))})).catch((function(t){console.log("Fetch Error :-S",t)}))}},{key:"get_arrangement",value:function(t){var e=this;return!this.state.fetching_arrangement&&new Promise((function(n,i){e.setState({fetching_arrangement:!0});var r=e,a=new FormData;a.append("action","church_tithe_wp_get_arrangement"),a.append("church_tithe_wp_arrangement_id",t),a.append("church_tithe_wp_get_arrangement_nonce",e.props.main_component.state.frontend_nonces.get_arrangement_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_get_arrangement",{method:"POST",mode:"same-origin",credentials:"same-origin",body:a}).then((function(a){if(200!==a.status)return r.props.main_component.setState({current_arrangement_info:null,current_arrangement_payment_method:null},(function(){e.setState({fetching_arrangement:!1})})),console.log("Looks like there was a problem. Status Code: "+a.status),void i();a.json().then((function(a){a.success?r.props.main_component.setState({user_logged_in:a.user_logged_in,current_arrangement_info:a.arrangement_info,current_arrangement_payment_method:null,frontend_nonces:a.frontend_nonces?a.frontend_nonces:r.props.main_component.state.frontend_nonces},(function(){e.setState({fetching_arrangement:!1},(function(){e.get_arrangement_payment_method(t),n()}))})):r.props.main_component.setState({user_logged_in:null,current_arrangement_info:null,current_arrangement_payment_method:null,frontend_nonces:a.frontend_nonces?a.frontend_nonces:r.props.main_component.state.frontend_nonces},(function(){e.setState({fetching_arrangement:!1}),i()}))})).catch((function(t){e.setState({fetching_arrangement:!1}),console.log("Fetch Error: ",t),i()}))})).catch((function(t){e.setState({fetching_arrangement:!1}),console.log("Fetch Error :-S",t),i()}))}))}},{key:"get_arrangement_payment_method",value:function(t){var e=this;return new Promise((function(n,i){var r=e,a=new FormData;a.append("action","church_tithe_wp_get_arrangement_payment_method_endpoint"),a.append("church_tithe_wp_arrangement_id",t),a.append("church_tithe_wp_get_arrangement_payment_method_nonce",e.props.main_component.state.frontend_nonces.get_arrangement_payment_method_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_get_arrangement_payment_method_endpoint",{method:"POST",mode:"same-origin",credentials:"same-origin",body:a}).then((function(t){if(200!==t.status)return r.props.main_component.setState({current_arrangement_payment_method:null}),console.log("Looks like there was a problem. Status Code: "+t.status),void i();t.json().then((function(t){t.success?r.props.main_component.setState({current_arrangement_payment_method:t.payment_method_data},(function(){n()})):r.props.main_component.setState({current_arrangement_payment_method:null},(function(){i()}))})).catch((function(t){console.log("Fetch Error: ",t),i()}))})).catch((function(t){console.log("Fetch Error :-S",t),i()}))}))}},{key:"on_row_click",value:function(t,e){var n=this;this.get_arrangement(t.id.value).then((function(){n.props.main_component.set_all_current_visual_states({manage_payments:{arrangement:It({},t.id.value,{})}})}))}},{key:"render",value:function(){return"none"==this.state.current_visual_state?"":React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-login-view "+church_tithe_wp_get_current_view_class(this,["login"])},React.createElement(Church_Tithe_WP_Login,{main_component:this.props.main_component,check_if_user_is_logged_in:this.props.check_if_user_is_logged_in})),React.createElement("div",{className:"church-tithe-wp-manage-arrangements-view "+church_tithe_wp_get_current_view_class(this,["arrangements","fetching_data"])},React.createElement(Nt.a,(It(t={main_component:this.props.main_component,current_visual_state:this.state.current_visual_state,rows:this.state.rows,columns:this.state.columns,total_items:this.state.total_items,get_rows_and_columns:this.get_arrangements.bind(this)},"current_visual_state",this.state.current_visual_state),It(t,"on_row_click",this.on_row_click.bind(this)),t))));var t}}])&&zt(n.prototype,i),r&&zt(n,r),e}();Church_Tithe_WP_Arrangements;function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Kt(t,e,n){return e&&Ht(t.prototype,e),n&&Ht(t,n),t}function Gt(t,e){return!e||"object"!==Ut(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}church_tithe_wp_js_vars.tithe_form_vars;window.Church_Tithe_WP_Arrangement=function(t){function e(t){var n;return Zt(this,e),(n=Gt(this,Jt(e).call(this,t))).state={arrangement_cancel_intention_count:0,card_form_visible:!1,sca_authentication_status:"initial"},n}return Yt(e,React.Component),Kt(e,[{key:"componentDidUpdate",value:function(){!this.props.main_component.state.current_arrangement_payment_method&&this.state.card_form_visible&&this.setState({card_form_visible:!1})}},{key:"handle_back_to_plans_click",value:function(t){this.props.main_component.set_all_current_visual_states({manage_payments:{arrangements:{}}},!1)}},{key:"toggle_card_form_visibility",value:function(t){this.state.card_form_visible?this.setState({card_form_visible:!1}):this.setState({card_form_visible:!0})}},{key:"get_arrangement_payment_method",value:function(t){var e=this;return new Promise((function(n,i){var r=e,a=new FormData;a.append("action","church_tithe_wp_get_arrangement_payment_method_endpoint"),a.append("church_tithe_wp_arrangement_id",t),a.append("church_tithe_wp_get_arrangement_payment_method_nonce",e.props.main_component.state.frontend_nonces.get_arrangement_payment_method_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_get_arrangement_payment_method_endpoint",{method:"POST",mode:"same-origin",credentials:"same-origin",body:a}).then((function(t){if(200!==t.status)return r.props.main_component.setState({current_arrangement_payment_method:null}),console.log("Looks like there was a problem. Status Code: "+t.status),void i();t.json().then((function(t){t.success?r.props.main_component.setState({current_arrangement_payment_method:t.payment_method_data},(function(){n()})):r.props.main_component.setState({current_arrangement_payment_method:null},(function(){i()}))})).catch((function(t){console.log("Fetch Error: ",t),i()}))})).catch((function(t){console.log("Fetch Error :-S",t),i()}))}))}},{key:"get_arrangement",value:function(t){var e=this;return!this.state.fetching_arrangement&&new Promise((function(n,i){e.setState({fetching_arrangement:!0});var r=new FormData;r.append("action","church_tithe_wp_get_arrangement"),r.append("church_tithe_wp_arrangement_id",t),r.append("church_tithe_wp_get_arrangement_nonce",e.props.main_component.state.frontend_nonces.get_arrangement_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_get_arrangement",{method:"POST",mode:"same-origin",credentials:"same-origin",body:r}).then((function(r){if(200!==r.status)return e.props.main_component.setState({current_arrangement_info:null,current_arrangement_payment_method:null},(function(){e.setState({fetching_arrangement:!1})})),console.log("Looks like there was a problem. Status Code: "+r.status),void i();r.json().then((function(r){r.success?e.props.main_component.setState({user_logged_in:r.user_logged_in,current_arrangement_info:r.arrangement_info,current_arrangement_payment_method:null,frontend_nonces:r.frontend_nonces?r.frontend_nonces:e.props.main_component.state.frontend_nonces},(function(){e.setState({fetching_arrangement:!1},(function(){e.get_arrangement_payment_method(t),n()}))})):e.props.main_component.setState({user_logged_in:null,current_arrangement_info:null,current_arrangement_payment_method:null,frontend_nonces:r.frontend_nonces?r.frontend_nonces:e.props.main_component.state.frontend_nonces},(function(){e.setState({fetching_arrangement:!1}),i()}))})).catch((function(t){e.setState({fetching_arrangement:!1}),console.log("Fetch Error: ",t),i()}))})).catch((function(t){e.setState({fetching_arrangement:!1}),console.log("Fetch Error :-S",t),i()}))}))}},{key:"cancel_arrangement",value:function(){var t=this;if(0!=this.state.arrangement_cancel_intention_count){var e=this.props.main_component.state.current_arrangement_info;e.recurring_status="cancelling",this.props.main_component.setState({current_arrangement_info:e});var n=new FormData;n.append("action","church_tithe_wp_cancel_arrangement"),n.append("church_tithe_wp_arrangement_id",this.props.main_component.state.current_arrangement_info.id),n.append("church_tithe_wp_cancel_arrangement_nonce",this.props.main_component.state.frontend_nonces.cancel_arrangement_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_cancel_arrangement",{method:"POST",mode:"same-origin",credentials:"same-origin",body:n}).then((function(n){if(200!==n.status)return(e=t.props.main_component.state.current_arrangement_info).recurring_status="failed_to_cancel",t.props.main_component.setState({current_arrangement_info:data.current_arrangement_info}),void console.log("Looks like there was a problem. Status Code: "+n.status);n.json().then((function(n){n.success?t.props.main_component.setState({user_logged_in:n.user_logged_in,frontend_nonces:n.frontend_nonces?n.frontend_nonces:t.props.main_component.state.frontend_nonces},(function(){t.props.main_component.setState({current_arrangement_info:n.arrangement_info,arrangement_cancel_intention_count:0}),t.props.main_component.setState({reload_arrangements:!0})})):((e=t.props.main_component.state.current_arrangement_info).recurring_status="failed_to_cancel",t.props.main_component.setState({current_arrangement_info:e}),"not_logged_in"==n.error_code&&t.props.main_component.setState({user_logged_in:null,frontend_nonces:n.frontend_nonces?n.frontend_nonces:t.props.main_component.state.frontend_nonces}))})).catch((function(n){(e=t.props.main_component.state.current_arrangement_info).recurring_status="failed_to_cancel",t.props.main_component.setState({current_arrangement_info:e}),console.log("Fetch Error: ",n)}))})).catch((function(n){(e=t.props.main_component.state.current_arrangement_info).recurring_status="failed_to_cancel",t.props.main_component.setState({current_arrangement_info:e}),console.log("Fetch Error :-S",n)}))}else this.setState({arrangement_cancel_intention_count:1})}},{key:"render_authenticate_sca_button",value:function(){return this.state.card_form_visible?"":React.createElement(T.StripeProvider,{apiKey:this.props.main_component.state.dynamic_settings.stripe_api_key},React.createElement(T.Elements,null,React.createElement(ee,{main_component:this.props.main_component,Church_Tithe_WP_Arrangement:this,get_arrangement:this.get_arrangement.bind(this)})))}},{key:"render_cancel_button",value:function(){return this.state.card_form_visible?"":this.props.main_component.state.current_arrangement_info.webhook_succeeded?(0==this.state.arrangement_cancel_intention_count&&(t=this.props.main_component.state.unique_settings.strings.arrangement_action_cancel),1==this.state.arrangement_cancel_intention_count&&(t=this.props.main_component.state.unique_settings.strings.arrangement_action_cancel_double),"failed_to_cancel"==this.props.main_component.state.current_arrangement_info.recurring_status?React.createElement("div",{className:"church-tithe-wp-receipt-action-button"},React.createElement("a",{className:"church-tithe-wp-arrangement-action-cancel"},this.props.main_component.state.unique_settings.strings.arrangement_failed_to_cancel)):"cancelling"==this.props.main_component.state.current_arrangement_info.recurring_status?React.createElement("div",{className:"church-tithe-wp-receipt-action-button"},React.createElement("a",{className:"church-tithe-wp-arrangement-action-cancel"},this.props.main_component.state.unique_settings.strings.arrangement_cancelling)):"cancelled"==this.props.main_component.state.current_arrangement_info.recurring_status?React.createElement("div",{className:"church-tithe-wp-receipt-action-button"},React.createElement("a",{className:"church-tithe-wp-arrangement-action-cancel"},this.props.main_component.state.unique_settings.strings.arrangement_cancelled)):React.createElement("div",{className:"church-tithe-wp-receipt-action-button"},React.createElement("a",{className:"church-tithe-wp-arrangement-action-cancel",onClick:this.cancel_arrangement.bind(this)},t))):React.createElement("button",{className:"church-tithe-wp-arrangement-action-cancel"},this.props.main_component.state.unique_settings.strings.arrangement_action_cant_cancel);var t}},{key:"render_renewal_date",value:function(){return"cancelled"==this.props.main_component.state.current_arrangement_info.recurring_status?"":React.createElement("div",{className:"church-tithe-wp-arrangement-renewal-date"},React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title church-tithe-wp-arrangement-renewal-date-title"},this.props.main_component.state.unique_settings.strings.arrangement_renewal_title+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value church-tithe-wp-arrangement-renewal-date-value"},church_tithe_wp_format_date(this.props.main_component.state.current_arrangement_info.renewal_date)))}},{key:"format_amount",value:function(){var t=this.props.main_component.state.current_arrangement_info.amount,e=this.props.main_component.state.current_arrangement_info.currency,n=this.props.main_component.state.current_arrangement_info.is_zero_decimal_currency,i=this.props.main_component.state.unique_settings.locale,r=this.props.main_component.state.current_arrangement_info.string_after+" ("+e.toUpperCase()+")";return church_tithe_wp_format_money(t,e,n,i,r)}},{key:"render_payment_method",value:function(){return this.props.main_component.state.current_arrangement_payment_method?"none"==this.props.main_component.state.current_arrangement_payment_method?"None found":React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-payment-method"},React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title church-tithe-wp-arrangement-id-title"},this.props.main_component.state.unique_settings.strings.arrangement_payment_method_title+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value church-tithe-wp-arrangement-id-value"},React.createElement("span",{className:"church-tithe-wp-inline-card"},React.createElement(Church_Tithe_WP_Card_Icon,{brand:this.props.main_component.state.current_arrangement_payment_method.card.brand}),React.createElement("div",{className:"church-tithe-wp-inline-card-number"},"•••• "+this.props.main_component.state.current_arrangement_payment_method.card.last4),React.createElement("div",{className:"church-tithe-wp-inline-update-button"},React.createElement("button",{className:"church-tithe-wp-text-button",onClick:this.toggle_card_form_visibility.bind(this)},this.props.main_component.state.unique_settings.strings.update_payment_method_verb)))))):React.createElement(Church_Tithe_WP_Spinner,{color_mode:"church-tithe-wp-spinner-dark"})}},{key:"render_payment_method_update_form",value:function(){if(this.state.card_form_visible)return React.createElement(T.StripeProvider,{apiKey:this.props.main_component.state.dynamic_settings.stripe_api_key},React.createElement(T.Elements,null,React.createElement(te,{main_component:this.props.main_component,Church_Tithe_WP_Arrangement:this,get_arrangement:this.get_arrangement.bind(this)})))}},{key:"render",value:function(){return this.props.main_component.state.current_arrangement_info?React.createElement("div",{className:"church-tithe-wp-arrangement"},React.createElement("div",{className:"church-tithe-wp-back-button-container"},React.createElement("a",{onClick:this.handle_back_to_plans_click.bind(this)},this.props.main_component.state.unique_settings.strings.back_to_plans)),React.createElement("div",{className:"church-tithe-wp-receipt-title"},this.props.main_component.state.unique_settings.strings.arrangement_details),React.createElement("div",{className:"church-tithe-wp-arrangement-id"},React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title church-tithe-wp-arrangement-id-title"},this.props.main_component.state.unique_settings.strings.arrangement_id_title+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value church-tithe-wp-arrangement-id-value"},this.props.main_component.state.current_arrangement_info.id)),React.createElement("div",{className:"church-tithe-wp-arrangement-status"},React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title church-tithe-wp-arrangement-plan-title"},this.props.main_component.state.unique_settings.strings.arrangement_amount_title+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value church-tithe-wp-arrangement-plan-value"},this.props.main_component.state.current_arrangement_info.recurring_status_visible)),React.createElement("div",{className:"church-tithe-wp-arrangement-interval"},React.createElement("span",{className:"church-tithe-wp-receipt-line-item-title church-tithe-wp-arrangement-plan-title"},this.props.main_component.state.unique_settings.strings.arrangement_amount_title+": "),React.createElement("span",{className:"church-tithe-wp-receipt-line-item-value church-tithe-wp-arrangement-plan-value"},this.format_amount())),this.render_renewal_date(),this.render_payment_method(),React.createElement("div",{className:"church-tithe-wp-arrangement-actions"},this.render_payment_method_update_form(),this.render_authenticate_sca_button(),this.render_cancel_button())):React.createElement(Church_Tithe_WP_Spinner,null)}}]),e}();Church_Tithe_WP_Arrangement;var $t=function(t){function e(t){var n;return Zt(this,e),(n=Gt(this,Jt(e).call(this,t))).state={sca_authentication_status:"initial"},n}return Yt(e,React.Component),Kt(e,[{key:"attempt_payment_intent_confirmation",value:function(){var t=this;this.setState({sca_authentication_status:"authorizing"}),this.props.stripe.confirmPaymentIntent(this.props.main_component.state.current_arrangement_info.pending_invoice.payment_intent.client_secret,{payment_method:this.props.main_component.state.current_arrangement_info.pending_invoice.payment_intent.payment_method}).then((function(e){e.error?(console.log(e.error),t.setState({sca_authentication_status:"failed_to_authorize"})):"succeeded"===e.paymentIntent.status?t.setState({sca_authentication_status:"success"},(function(){t.props.get_arrangement(t.props.main_component.state.current_arrangement_info.id)})):t.props.stripe.handleCardPayment(t.props.main_component.state.current_arrangement_info.pending_invoice.payment_intent.client_secret,{}).then((function(e){e.error?t.setState({sca_authentication_status:"failed_to_authorize"}):t.setState({sca_authentication_status:"success"},(function(){t.props.get_arrangement(t.props.main_component.state.current_arrangement_info.id)}))}))}))}},{key:"render",value:function(){if(!this.props.main_component.state.current_arrangement_info.pending_invoice)return"";if("failed_to_authorize"==this.state.sca_authentication_status)return React.createElement("div",{className:"church-tithe-wp-receipt-action-button"},React.createElement("div",null,this.props.main_component.state.unique_settings.strings.sca_auth_description),React.createElement("button",{className:"church-tithe-wp-receipt-line-item-action church-tithe-wp-arrangement-action-authenticate",onClick:this.attempt_payment_intent_confirmation.bind(this)},this.props.main_component.state.unique_settings.strings.sca_auth_failed));if("authorizing"==this.state.sca_authentication_status)return React.createElement("div",{className:"church-tithe-wp-receipt-action-button"},React.createElement("div",null,this.props.main_component.state.unique_settings.strings.sca_auth_description),React.createElement("button",{className:"church-tithe-wp-receipt-line-item-action church-tithe-wp-arrangement-action-authenticate"},this.props.main_component.state.unique_settings.strings.sca_authing_verb));if("initial"==this.state.sca_authentication_status){var t=this.props.main_component.state.current_arrangement_info.pending_invoice.invoice,e=church_tithe_wp_format_money(t.total,t.currency,this.props.main_component.state.current_arrangement_info.is_zero_decimal_currency,this.props.main_component.state.unique_settings.locale,"");return React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-receipt-action-button"},React.createElement("div",null,this.props.main_component.state.unique_settings.strings.sca_auth_description),React.createElement("button",{className:"church-tithe-wp-receipt-line-item-action church-tithe-wp-arrangement-action-authenticate",onClick:this.attempt_payment_intent_confirmation.bind(this)},this.props.main_component.state.unique_settings.strings.sca_auth_verb+" - "+e)))}return"success"==this.state.sca_authentication_status?React.createElement("div",{className:"church-tithe-wp-receipt-action-button"},React.createElement("div",null,this.props.main_component.state.unique_settings.strings.sca_authed_verb)):void 0}}]),e}(),Qt=function(t){function e(t){var n;return Zt(this,e),(n=Gt(this,Jt(e).call(this,t))).state={status_of_payment_method_updating:"initial",form_validation_attempted:!1,stripe_elements_fields_complete:!1,stripe_card_error_code:""},n}return Yt(e,React.Component),Kt(e,[{key:"update_payment_method_for_arrangement",value:function(){var t=this,e=new FormData;e.append("action","church_tithe_wp_update_arrangement"),e.append("church_tithe_wp_arrangement_id",this.props.main_component.state.current_arrangement_info.id),e.append("church_tithe_wp_stripe_payment_method_id",this.state.stripe_payment_method.id),e.append("church_tithe_wp_update_arrangement_nonce",this.props.main_component.state.frontend_nonces.update_arrangement_nonce),fetch(church_tithe_wp_js_vars.ajaxurl+"?church_tithe_wp_update_arrangement",{method:"POST",mode:"same-origin",credentials:"same-origin",body:e}).then((function(e){if(200!==e.status)return t.setState({status_of_payment_method_updating:"unable_to_update"}),void console.log("Looks like there was a problem. Status Code: "+e.status);e.json().then((function(e){e.success?t.setState({status_of_payment_method_updating:"success"},(function(){t.props.main_component.setState({current_arrangement_payment_method:e.payment_method},(function(){setTimeout((function(){t.props.Church_Tithe_WP_Arrangement.setState({card_form_visible:!1,status_of_payment_method_updating:"initial"})}),1e3)}))})):t.setState({status_of_payment_method_updating:"unable_to_update"})})).catch((function(e){t.setState({status_of_payment_method_updating:"unable_to_update"}),console.log("Fetch Error: ",e)}))})).catch((function(e){t.setState({status_of_payment_method_updating:"unable_to_update"}),console.log("Fetch Error :-S",e)}))}},{key:"handleCreditCardSubmit",value:function(t){var e=this;t.preventDefault(),this.setState({status_of_payment_method_updating:"updating"}),this.create_stripe_payment_method().then((function(){e.validate_form(!0)?e.update_payment_method_for_arrangement():e.setState({status_of_payment_method_updating:"unable_to_update"},(function(){return!1}))})).catch((function(t){e.setState({stripe_card_error_code:t,status_of_payment_method_updating:"unable_to_update"},(function(){console.log(t)}));e.validate_form(!0);return!1}))}},{key:"validate_form",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!0;return"credit_card"==this.state.payment_mode&&(this.state.name_validated||(e=!1),this.state.email_validated||(e=!1),this.state.stripe_payment_method||(e=!1)),t&&(this.setState({form_validation_attempted:!0}),e?this.setState({form_has_any_error:!1}):this.setState({form_has_any_error:!0})),e}},{key:"create_stripe_payment_method",value:function(){var t=this;return new Promise((function(e,n){var i={billing_details:{address:{postal_code:t.state.postal_code},email:t.state.email_value,name:t.state.name_value}};t.state.stripe_elements_fields_complete&&!i.billing_details.address.postal_code?t.setState({stripe_card_error_code:"incomplete_zip"},(function(){n("incomplete_zip")})):t.props.stripe.createPaymentMethod("card",i).then((function(i){i.error?t.setState({stripe_payment_method:null,stripe_card_error_code:i.error.code},(function(){return n(i.error.code),i.error})):t.setState({stripe_payment_method:i.paymentMethod,stripe_card_error_code:"success"},(function(){return e(i.paymentMethod),i.paymentMethod}))}))}))}},{key:"render_complete_payment_button_field",value:function(){var t,e;return"initial"==this.state.status_of_payment_method_updating&&(t="",e=this.props.main_component.state.unique_settings.strings.update_payment_method_verb),"updating"==this.state.status_of_payment_method_updating&&(t=" church-tithe-wp-btn-attempting-payment",e=React.createElement(Church_Tithe_WP_Spinner,null)),"success"==this.state.status_of_payment_method_updating&&(t=" church-tithe-wp-btn-success",e=React.createElement("span",null,React.createElement(Church_Tithe_WP_Checkmark,null))),"unable_to_update"==this.state.status_of_payment_method_updating&&(t=" church-tithe-wp-btn-error",e=this.props.main_component.state.unique_settings.strings.complete_payment_button_error_text),React.createElement("div",null,React.createElement("button",{type:"button",onClick:this.handleCreditCardSubmit.bind(this),className:"church-tithe-wp-pay-button"+t},e))}},{key:"set_validation_and_value_of_field",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(a,s){var o;null==i?n.setState(Vt({},t,e),(function(){a(n.state)})):n.setState((Vt(o={},t,e),Vt(o,i,r),o),(function(){a(n.state)}))}))}},{key:"render",value:function(){return React.createElement(React.Fragment,null,React.createElement("div",{className:"church-tithe-wp-payment-field-container"},React.createElement("div",{className:"church-tithe-wp-payment-field"},React.createElement(Church_Tithe_WP_Input_Field,{main_component:this.props.main_component,state_validation_variable_name:"name_validated",state_value_variable_name:"name_value",set_validation_and_value_of_field:this.set_validation_and_value_of_field.bind(this),form_validation_attempted:this.state.form_validation_attempted,is_validated:this.state.name_validated,validate_form:this.validate_form.bind(this),instruction_codes:this.props.main_component.state.unique_settings.strings.input_field_instructions.name,initial_value:this.props.main_component.state.unique_settings.strings.current_user_name,type:"text",class_name:"church-tithe-wp-name",placeholder:this.props.main_component.state.unique_settings.strings.input_field_instructions.name.placeholder_text,name:"tithe-amount",disabled:!1,editing_key:"strings/input_field_instructions/name/[current_key_here]/instruction_message"}))),React.createElement("div",{className:"church-tithe-wp-payment-field-container"},React.createElement("div",{className:"church-tithe-wp-payment-field"},React.createElement(Church_Tithe_WP_Stripe_All_In_One_Field,{main_component:this.props.main_component,card_form:this,form_validation_attempted:this.state.form_validation_attempted,validate_form:null,stripe_card_error_code:this.state.stripe_card_error_code,instruction_codes:this.props.main_component.state.unique_settings.strings.input_field_instructions.stripe_all_in_one,stripe:this.props.stripe,disabled:!1,mobile_mode:!(window.innerWidth>600),zip_code_placeholder:this.props.main_component.state.unique_settings.strings.zip_code_placeholder,create_stripe_source:this.create_stripe_payment_method,editing_key:"strings/input_field_instructions/stripe_all_in_one/[current_key_here]/instruction_message"}))),React.createElement("div",{className:"church-tithe-wp-payment-field-container"},React.createElement("div",{className:"church-tithe-wp-payment-field"},this.render_complete_payment_button_field())))}}]),e}(),te=Object(T.injectStripe)(Qt),ee=Object(T.injectStripe)($t);function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function re(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ae(t,e){return!e||"object"!==ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oe(t,e){return(oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}window.Church_Tithe_WP_Spinner=function(t){function e(){return ie(this,e),ae(this,se(e).apply(this,arguments))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oe(t,e)}(e,React.Component),n=e,(i=[{key:"get_color_mode_class",value:function(){return this.props.color_mode?" "+this.props.color_mode:""}},{key:"render",value:function(){return React.createElement("div",{className:"church-tithe-wp-spinner-container"},React.createElement("div",{className:"church-tithe-wp-spinner"+this.get_color_mode_class()},React.createElement("div",{className:"church-tithe-wp-double-bounce1"}),React.createElement("div",{className:"church-tithe-wp-double-bounce2"})))}}])&&re(n.prototype,i),r&&re(n,r),e}();Church_Tithe_WP_Spinner;function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ue(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function le(t,e){return!e||"object"!==ce(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}window.Church_Tithe_WP_Checkmark=function(t){function e(){return _e(this,e),le(this,pe(e).apply(this,arguments))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}(e,React.Component),n=e,(i=[{key:"render",value:function(){return React.createElement("svg",{className:"church-tithe-wp-checkmark-svg",xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",viewBox:"0 0 200 200"},React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("circle",{className:"church-tithe-wp-checkmark--circle",cx:"100",cy:"100",r:"84.615",fill:"#4BB543"}),React.createElement("polyline",{className:"church-tithe-wp-checkmark--check",stroke:"#FFF",points:"76.923 130.769 123.077 130.769 123.077 38.462",transform:"rotate(42 100 84.615)"})))}}])&&ue(n.prototype,i),r&&ue(n,r),e}();Church_Tithe_WP_Checkmark;function me(t){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ye(t,e){return(ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}window.Church_Tithe_WP_Modal=function(t){function e(t){var n,i,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(r=fe(e).call(this,t))||"object"!==me(r)&&"function"!=typeof r?ve(i):r).state={has_mounted:!1,modal_open:!1},n.handle_key_press=n.handle_key_press.bind(ve(ve(n))),n.toggle_modal=n.toggle_modal.bind(ve(ve(n))),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ye(t,e)}(e,React.Component),n=e,(i=[{key:"componentDidMount",value:function(){this.handle_open_status_based_on_url()}},{key:"componentDidUpdate",value:function(){this.state.modal_open?(this.state.has_mounted||this.setState({has_mounted:!0}),document.addEventListener("keydown",this.handle_key_press,!1)):document.removeEventListener("keydown",this.handle_key_press,!1),this.handle_open_status_based_on_url()}},{key:"handle_open_status_based_on_url",value:function(){this.props.main_component&&this.props.main_component.state.modal_visual_state&&(this.props.slug==Object.keys(this.props.main_component.state.modal_visual_state)[0]?this.state.modal_open||this.setState({modal_open:!0}):this.state.modal_open&&this.setState({modal_open:!1}))}},{key:"get_modal_visible_class",value:function(){return this.state.modal_open?" church-tithe-wp-modal-open":" church-tithe-wp-modal-closed"}},{key:"handle_key_press",value:function(t){27===t.keyCode&&this.toggle_modal(this.state)}},{key:"toggle_modal",value:function(t){t.modal_open?this.props.main_component.set_all_current_visual_states(!1,{}):this.props.main_component.set_all_current_visual_states(!1,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},this.props.slug,{}))}},{key:"render",value:function(){return React.createElement("div",{className:"church-tithe-wp-modal-background church-tithe-wp-modal"+this.get_modal_visible_class()},React.createElement("div",{className:"church-tithe-wp-modal-outside-click-to-close",onClick:this.toggle_modal.bind(null,this.state)}),React.createElement("div",{className:"church-tithe-wp-modal-relative"},React.createElement("div",{className:"church-tithe-wp-modal-absolute"},React.createElement("div",{className:"church-tithe-wp-modal-inner"},this.props.modal_contents))))}}])&&de(n.prototype,i),r&&de(n,r),e}();Church_Tithe_WP_Modal,n(14)}]);
//# sourceMappingURL=church-tithe-wp-frontend.js.map