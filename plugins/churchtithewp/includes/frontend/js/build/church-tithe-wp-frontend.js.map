{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///./node_modules/react-stripe-elements/es/index.js","webpack:///./includes/frontend/js/src/church-tithe-wp-list-view.js","webpack:///./node_modules/prop-types/index.js","webpack:///./node_modules/react-stripe-elements/es/components/Elements.js","webpack:///./node_modules/react-stripe-elements/es/components/Provider.js","webpack:///./includes/frontend/js/src/church-tithe-wp-functions.js","webpack:///./node_modules/prop-types/factoryWithThrowingShims.js","webpack:///./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///./node_modules/react-stripe-elements/es/components/inject.js","webpack:///./node_modules/react-stripe-elements/es/components/Element.js","webpack:///./node_modules/react-stripe-elements/es/utils/isEqual.js","webpack:///./node_modules/react-stripe-elements/es/components/PaymentRequestButtonElement.js","webpack:///./node_modules/react-stripe-elements/es/utils/shallowEqual.js","webpack:///./includes/frontend/js/src/church-tithe-wp-react.js","webpack:///./includes/frontend/js/src/church-tithe-wp-card-icons.js","webpack:///./includes/frontend/js/src/church-tithe-wp-react-email-field.js","webpack:///./includes/frontend/js/src/church-tithe-wp-react-input-field.js","webpack:///./includes/frontend/js/src/church-tithe-wp-react-radio-field.js","webpack:///./includes/frontend/js/src/church-tithe-wp-react-stripe-all-in-one.js","webpack:///./includes/frontend/js/src/church-tithe-wp-react-terms-field.js","webpack:///./includes/frontend/js/src/church-tithe-wp-react-textarea-field.js","webpack:///./includes/frontend/js/src/church-tithe-wp-confirmation.js","webpack:///./includes/frontend/js/src/church-tithe-wp-payment-box.js","webpack:///./includes/frontend/js/src/church-tithe-wp-manage-payments.js","webpack:///./includes/frontend/js/src/church-tithe-wp-manage-payments-nav.js","webpack:///./includes/frontend/js/src/church-tithe-wp-login.js","webpack:///./includes/frontend/js/src/church-tithe-wp-transactions.js","webpack:///./includes/frontend/js/src/church-tithe-wp-arrangements.js","webpack:///./includes/frontend/js/src/church-tithe-wp-arrangement.js","webpack:///./includes/frontend/js/src/church-tithe-wp-spinner.js","webpack:///./includes/frontend/js/src/church-tithe-wp-checkmark.js","webpack:///./includes/frontend/js/src/church-tithe-wp-lightbox.js"],"names":["enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","exports","React","defineProperty","IdealBankElement","IbanElement","PaymentRequestButtonElement","CardCVCElement","CardCvcElement","CardExpiryElement","CardNumberElement","CardElement","Elements","injectStripe","StripeProvider","undefined","_Provider2","_interopRequireDefault","_inject2","_Elements2","_Element2","_PaymentRequestButtonElement2","obj","__esModule","default","impliedTokenType","impliedSourceType","impliedPaymentMethodType","church_tithe_wp_vars","church_tithe_wp_js_vars","tithe_form_vars","Church_Tithe_WP_List_View","props","state","current_page","items_per_page","search_term","render_rows","this","total_items","Math","ceil","event","setState","target","rows","columns","get_rows_and_columns","input_delay","clearTimeout","setTimeout","mapper","push","scope","className","td_mapper","first","row","eval","onClick","on_row_click","main_component","unique_settings","strings","uppercase_search","type","onChange","handle_search_change","uppercase_items","lowercase_per","lowercase_page","min","handle_items_per_page_change","uppercase_page","max","get_total_pages","handle_page_number_change","lowercase_of","Fragment","render_columns","current_visual_state","render_search","render_list_table","render_pagination","render_list_view","Component","elementContextTypes","injectContextTypes","_extends","assign","i","arguments","length","source","_react2","_propTypes2","_Provider","_toConsumableArray","arr","Array","isArray","arr2","from","getRegisteredElements","func","isRequired","addElementsLoadListener","registerElement","unregisterElement","_React$Component","context","instance","Constructor","TypeError","_classCallCheck","_this","self","ReferenceError","_possibleConstructorReturn","handleRegisterElement","element","prevState","registeredElements","concat","handleUnregisterElement","el","filter","_ref","subClass","superClass","create","constructor","writable","configurable","setPrototypeOf","__proto__","_inherits","getChildContext","_this2","fn","_elements","_props","options","children","keys","indexOf","_objectWithoutProperties","tag","stripe","elements","addStripeLoadListener","render","Children","only","childContextTypes","contextTypes","providerContextTypes","defaultProps","string","getOrCreateStripe","apiKey","window","Stripe","__cachedInstances","cacheKey","JSON","stringify","ensureStripeShape","createSource","createToken","createPaymentMethod","handleCardPayment","Error","Provider","_this$props","_apiKey","_meta","_didWarn","_didWakeUpListeners","_listeners","componentWillReceiveProps","nextProps","apiKeyChanged","stripeInstanceChanged","console","error","_stripe2","forEach","propTypes","node","church_tithe_wp_format_date","date_string","locale","date","Date","replace","toLocaleDateString","church_tithe_wp_format_time","toLocaleTimeString","navigator","language","timeZoneName","split","church_tithe_wp_format_date_and_time","toLocaleString","church_tithe_wp_list_view_format_date","data","church_tithe_wp_format_money","cents","currency","is_zero_decimal_currency","string_after","formatted_amount","Number","Intl","NumberFormat","style","format","church_tithe_wp_list_view_format_money","church_tithe_wp_get_current_view_class","component","views_in_question","at_least_one_in_view","church_tithe_wp_string_to_bool","the_string","church_tithe_wp_validate_email","email","test","String","toLowerCase","church_tithe_wp_get_decimal_character_for_locale","mock_price","includes","decimal_character","church_tithe_wp_set_visual_state_of_component","settings","Promise","resolve","reject","all_current_visual_states","map_of_visual_states","new_map_of_visual_states","church_tithe_wp_get_default_map_of_visual_states","default_visual_state","previous_level","level","temp","parent_component_is_in_view","visual_state_should_become","church_tithe_wp_visual_state_should_become","default_visual_states","parent_in_view","parent_not_in_view","name_of_visual_state_variable","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","location","propFullName","secret","err","name","getShim","ReactPropTypes","array","bool","number","symbol","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","_typeof","Symbol","iterator","_react","_Elements","WrappedComponent","_class","_temp","componentOptions","_componentOptions$wit","withRef","parseElementOrData","elementOrOptions","_frame","id","_componentName","findElement","filterBy","specifiedType","filteredElements","e","matchingElements","requireElement","wrappedCreateToken","tokenTypeOrOptions","opts","tokenType","rest","_tokenType","wrappedCreateSource","wrappedCreatePaymentMethod","paymentMethodType","elementOrData","maybeData","elementOrDataResult","_element","wrappedHandleCardX","method","clientSecret","_element2","stripeProps","componentDidMount","getWrappedInstance","wrappedInstance","handleCardSetup","_this3","createElement","ref","c","displayName","_isEqual2","noop","_extractOptions","onFocus","onBlur","onReady","capitalized","str","charAt","toUpperCase","slice","hocOptions","handleRef","_options","_setupEventListeners","mount","update","componentWillUnmount","destroy","on","change","apply","_props2","isEqual","left","right","leftArray","leftPlainObject","toString","leftKeys","rightKeys","keySet","_i","allKeys","l","r","every","_shallowEqual2","paymentRequest","_props3","warn","canMakePayment","show","a","b","keysA","keysB","Church_Tithe_WP_Form","editing_mode","editing_lightbox_active","all_initial_visual_states","payment","modal_visual_state","dynamic_settings","single_page_app_base_url","wordpress_permalink_only","dom_node","user_id","frontend_nonces","get_current_view_class","set_all_current_visual_states","handle_visual_state_change_click_event","initial_modal_visual_state","history","scrollRestoration","addEventListener","on_web_history_change","maybe_refresh_parent_dom_node","this_component","history_state","church_tithe_wp_visual_state","ctwpmodal_visual_state","view_in_question","has_featured_image","backgroundImage","featured_image_url","new_url_path","depth","prefix","component_visual_state","build_new_url_path","new_state","new_modal_state","in_initial_state","entries","new_url_prefix","new_url","pushState","protocol","stripe_api_key","currency_code","church_tithe_wp_form","church_tithe_wp_open_link","modal_array","open_style","ctwp","mode","form","link_text","get_featured_image_class","render_featured_image","Church_Tithe_WP_Payment_Box","show_close_button","Church_Tithe_WP_Manage_Payments","Church_Tithe_WP_Modal","slug","form_number","modal_contents","role","href","setup_link","Church_Tithe_WP_Spinner","church_tithe_wp_refresh_a_tithing_element","church_tithe_wp_element","getAttribute","unique_shortcode_settings","parse","document","getElementById","textContent","dynamic_shortcode_settings","all_default_visual_states","ReactDOM","church_tithe_wp_refresh_all_tithing_elements","querySelector","querySelectorAll","church_tithe_wp_set_modal_to_open","dynamic_shortcode_settings_container","element_holding_settings","innerHTML","Church_Tithe_WP_Card_Icon","viewBox","xmlns","fill","fillRule","d","brand","render_visa","render_mastercard","render_amex","Church_Tithe_WP_Email_Field","input_value","get_input_field_class","get_input_instruction_class","get_input_instruction_message","initial_value","initial_input_value","is_validated","set_validation_and_value_of_field","state_validation_variable_name","state_value_variable_name","form_validation_attempted","current_instruction","get_current_instruction_key","instruction_codes","instruction_type","instruction_message","validate_form","inputProps","class_name","handle_input_change","placeholder","step","disabled","Church_Tithe_WP_Input_Field","output_before_field","after_before_field","Church_Tithe_WP_Input_Field_Instruction","set_current_input_field_instruction","field_name","instruction_name","input_fields","Church_Tithe_WP_Radio_Field","radio_buttons","selected","checked","after_output","map","index","Church_Tithe_WP_Stripe_All_In_One_Field","stripe_card_error_code","handle_cc_validation","card_form","postal_code","card_zip_code","stripe_elements_fields_complete","stripe_element","complete","create_stripe_source","then","catch","all_in_one_mode","postalCode","base","fontSize","color","letterSpacing","fontFamily","invalid","focusable","transform","get_postal_code_success_class","handle_postal_code_change","zip_code_placeholder","mobile_mode","maybe_render_multi_field_cc_form","maybe_render_all_in_one_field","Church_Tithe_WP_Terms_Field","terms_checked","terms_are_visible","get_terms_visibility","__html","terms_body","handle_terms_change","defaultValue","hidden","terms_title","dangerouslySetInnerHTML","dangerously_set_terms_body","toggle_full_terms","terms_show_text","Church_Tithe_WP_TextArea_Field","Church_Tithe_WP_Payment_Confirmation","note_with_tithe_value","note_with_tithe_validated","time_since_last_keypress","after_payment_actions_completed","print_html","sending_email_receipt","email_receipt_success","note_with_tithe_keypress_delay","render_refunded_output","email_transaction_receipt","outerHTML","do_after_payment_actions","current_transaction_info","transaction_charged_amount","transaction_charged_currency","transaction_currency_is_zero_decimal","arrangement_info","amount","period_string","start_date","transaction_period_start_date","end_date","transaction_period_end_date","transaction_period","modify_state","all_fields_validate","notify_admin_too","send_regardless_of_initial_emails_sent","postData","FormData","append","transaction_id","session_id","church_tithe_wp_email_transaction_receipt_nonce","fetch","ajaxurl","credentials","body","response","status","log","json","success","state_validation_variable","state_value_variable","state_value","old_note_with_tithe","note_with_tithe","save_note_with_tithe","note_with_tithe_nonce","email_message","email_receipt_failed","email_receipt_sending","email_receipt","print","church_tithe_wp_print_div","receipt_title","print_receipt","show_manage_payments","manage_payments","manage_payments_button_text","transaction_type","refund_id","thank_you_message","input_field_instructions","transaction_note_with_tithe","placeholder_text","recurring_status","arrangement_id_title","arrangement_amount_title","get_arrangement_visual_amount","maybe_render_the_period_this_transaction_covers","render_things_before_receipt","refund_payer","receipt_payee","payee_name","receipt_transaction_id","receipt_date","transaction_date_created","receipt_transaction_amount","get_transaction_visual_amount","receipt_statement_descriptor","statement_descriptor","maybe_render_plan_details","render_email_button","render_print_button","render_manage_payments_button","html_to_print","page_title_to_use","css_stylesheet_id","head_tag","mywindow","open","write","focus","variable","has_been_in_view","current_title_string","form_title","loading","payment_confirmation_title","form_subtitle","aria-label","src","close_button_url","get_current_title","get_current_subtitle","maybe_render_close_button","CardForm","Church_Tithe_WP_Card_Form","stripe_is_set","canDoPaymentRequest","default_payment_mode","payment_mode","payment_method_name","payment_request_button_name","form_has_any_error","current_payment_state","currency_search_visible","user_typed_currency","verified_currency","verified_currency_symbol","currency_symbol","verified_currency_type","currency_type","stripe_error_message","stripe_payment_method","tithe_amount","default_amount","privacy_policy_validated","email_value","email_validated","name_value","name_validated","recurring_value","recurring_validated","input_fields_tithe_amount_current_instruction","input_fields_stripe_all_in_one_current_instruction","currency_text_input","createRef","check_for_payment_request_availability","validate_tithe_amount","handleCreditCardSubmit","set_payment_mode","get_currency_flag_class","create_stripe_payment_method","current_arrangement_info","form_email_value","country_code","stripe_account_country_code","country","total","label","payment_request_label","requestPayerEmail","result","country_supports_payment_request_button","message","paymentMethod","payerEmail","billing_details","methodName","do_ajax_stripe_transaction","visual_tithe_amount","step_format","payment_modes","address","code","validate_currency","privacy_policy","preventDefault","confirmPaymentIntent","client_secret","save_payment_method","payment_intent_result","paymentIntent","transaction_info","confirmation","details","general_server_error","stripe_tithe_amount","toFixed","payment_field_to_render","array_of_visible_states","get_view_class","substring","currency_typing_frozen","currency_to_confirm","success_type","validated_currency","validated_currency_symbol","validated_currency_type","confirm_currency_exists","blank_flag_url","flag_sprite_url","color_mode","input","handle_currency_typing","handle_currency_enter","handle_currency_leave","currency_search_text","autoComplete","toggle_currency_search","get_disabled_status","get_amount_field_step_format","handleAmountChange","get_visual_amount_for_input_field","lang","render_currency_switcher","recurring","recurring_options","terms_hide_text","current_user_email","current_user_name","stripe_all_in_one","innerWidth","form_has_an_error","paymentRequestButton","theme","height","currency_for_button","button_text","payment_verb","get_visual_amount","render_recurring_text_on_payment_button","handlePaymentRequestValidateButton","render_complete_payment_button_field","button_class","Church_Tithe_WP_Checkmark","complete_payment_button_error_text","other_payment_option","onSubmit","render_payment_field","render_payment_mode_toggler_field","render_card_form","check_if_user_is_logged_in","user_logged_in","transactions_title","transaction_title","arrangements_title","arrangement_title","login","get_current_title_string","Church_Tithe_WP_Manage_Payments_Nav","Church_Tithe_WP_Transactions","Church_Tithe_WP_Arrangements","Church_Tithe_WP_Arrangement","Church_Tithe_WP_Login","transactions","arrangements","button_in_question","get_current_button_class","set_view_to_arrangements","set_view_to_transactions","login_error_message","login_code_digit_1","login_code_digit_2","login_code_digit_3","login_code_digit_4","login_code_digit_5","login_code_digit_6","handle_login_form_submit","prior_all_current_visual_states","email_login_nonce","login_code","login_nonce","reload","request_login_email","digit","handle_login_form_digit_change","onKeyUp","handle_login_form_digit_backspace","handle_login_form_digit_focus","initial","render_login_code_field","all_characters","isInteger","parseInt","after_login_code_digit_set","multithele_characters_entered","next_digit","attempt_to_login","keyCode","previous_digit","activeElement","email_for_login_code","editing_key","login_form_has_an_error","login_button_text","render_login_field","render_login_code_fields","get_transactions","second_slug","third_slug","get_transaction","get_transactions_nonce","get_transaction_nonce","transaction","current_arrangement_payment_method","fetching_arrangements","fetching_arrangement","get_arrangements","reload_arrangements","get_arrangement","get_arrangements_nonce","arrangement_id","get_arrangement_nonce","get_arrangement_payment_method","get_arrangement_payment_method_nonce","payment_method_data","arrangement","arrangement_cancel_intention_count","card_form_visible","sca_authentication_status","cancel_arrangement_nonce","error_code","ChurchTitheWPAuthenticatePaymentButton","webhook_succeeded","arrangement_action_cancel","arrangement_action_cancel_double","arrangement_failed_to_cancel","arrangement_cancelling","arrangement_cancelled","cancel_arrangement","arrangement_action_cant_cancel","arrangement_renewal_title","renewal_date","arrangement_payment_method_title","card","last4","toggle_card_form_visibility","update_payment_method_verb","ChurchTitheWPUpdateCardForm","handle_back_to_plans_click","back_to_plans","arrangement_details","recurring_status_visible","format_amount","render_renewal_date","render_payment_method","render_payment_method_update_form","render_authenticate_sca_button","render_cancel_button","Church_Tithe_WP_Authenticate_Payment_Button","pending_invoice","payment_intent","payment_method","sca_auth_description","attempt_payment_intent_confirmation","sca_auth_failed","sca_authing_verb","invoice","sca_auth_verb","sca_authed_verb","Church_Tithe_WP_Update_Card_Form","status_of_payment_method_updating","update_arrangement_nonce","update_payment_method_for_arrangement","get_color_mode_class","width","cx","cy","stroke","points","has_mounted","modal_open","handle_key_press","toggle_modal","handle_open_status_based_on_url","removeEventListener","get_modal_visible_class"],"mappings":"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","file":"includes/frontend/js/build/church-tithe-wp-frontend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","module.exports = React;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IdealBankElement = exports.IbanElement = exports.PaymentRequestButtonElement = exports.CardCVCElement = exports.CardCvcElement = exports.CardExpiryElement = exports.CardNumberElement = exports.CardElement = exports.Elements = exports.injectStripe = exports.StripeProvider = undefined;\n\nvar _Provider = require('./components/Provider');\n\nvar _Provider2 = _interopRequireDefault(_Provider);\n\nvar _inject = require('./components/inject');\n\nvar _inject2 = _interopRequireDefault(_inject);\n\nvar _Elements = require('./components/Elements');\n\nvar _Elements2 = _interopRequireDefault(_Elements);\n\nvar _Element = require('./components/Element');\n\nvar _Element2 = _interopRequireDefault(_Element);\n\nvar _PaymentRequestButtonElement = require('./components/PaymentRequestButtonElement');\n\nvar _PaymentRequestButtonElement2 = _interopRequireDefault(_PaymentRequestButtonElement);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Define Elements, and register their implied token / source types for\n// automatic token / source creation.\n\n// Card\nvar CardElement = (0, _Element2.default)('card', {\n  impliedTokenType: 'card',\n  impliedSourceType: 'card',\n  impliedPaymentMethodType: 'card'\n});\n\n// Split Fields\n// Note: we only register the CardNumberElement for split fields so that we have\n// a unique Element to infer when calling `wrappedCreateToken` or `wrappedCreateSource`.\n\nvar CardNumberElement = (0, _Element2.default)('cardNumber', {\n  impliedTokenType: 'card',\n  impliedSourceType: 'card',\n  impliedPaymentMethodType: 'card'\n});\nvar CardExpiryElement = (0, _Element2.default)('cardExpiry');\nvar CardCvcElement = (0, _Element2.default)('cardCvc');\nvar CardCVCElement = CardCvcElement; // deprecated in favor of CardCvcElement which better matches Elements API\n\n// IBAN\nvar IbanElement = (0, _Element2.default)('iban', {\n  impliedTokenType: 'bank_account',\n  impliedSourceType: 'sepa_debit'\n});\n\n// iDEAL Bank\nvar IdealBankElement = (0, _Element2.default)('idealBank', { impliedSourceType: 'ideal' });\n\nexports.StripeProvider = _Provider2.default;\nexports.injectStripe = _inject2.default;\nexports.Elements = _Elements2.default;\nexports.CardElement = CardElement;\nexports.CardNumberElement = CardNumberElement;\nexports.CardExpiryElement = CardExpiryElement;\nexports.CardCvcElement = CardCvcElement;\nexports.CardCVCElement = CardCVCElement;\nexports.PaymentRequestButtonElement = _PaymentRequestButtonElement2.default;\nexports.IbanElement = IbanElement;\nexports.IdealBankElement = IdealBankElement;","var church_tithe_wp_vars = church_tithe_wp_js_vars.tithe_form_vars;\n\nclass Church_Tithe_WP_List_View extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrent_page: 1,\n\t\t\titems_per_page: 10,\n\t\t\tsearch_term: '',\n\t\t};\n\n\t\tthis.render_rows = this.render_rows.bind( this );\n\n\t}\n\n\tget_total_pages() {\n\t\tif ( ! this.props.total_items ) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn Math.ceil( this.props.total_items / this.state.items_per_page );\n\t\t}\n\t}\n\n\thandle_page_number_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tcurrent_page: event.target.value,\n\t\t\trows: null,\n\t\t\tcolumns: null,\n\t\t}, function() {\n\t\t\tthis.props.get_rows_and_columns( this.state.current_page, this.state.items_per_page, this.state.search_term )\n\t\t} );\n\n\t}\n\n\thandle_items_per_page_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tcurrent_page: 1,\n\t\t\titems_per_page: event.target.value,\n\t\t}, function() {\n\t\t\tthis.props.get_rows_and_columns( this.state.current_page, this.state.items_per_page, this.state.search_term )\n\t\t} );\n\n\t}\n\n\thandle_search_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tsearch_term: event.target.value,\n\t\t}, () => {\n\n\t\t\t// Set up a delay which waits to save the tithe until .5 seconds after they stop typing.\n\t\t\tif( this.input_delay ) {\n\t\t\t\t\t// Clear the keypress delay if the user just typed\n\t\t\t\t\tclearTimeout( this.input_delay );\n\t\t\t\t\tthis.input_delay = null;\n\t\t\t}\n\n\t\t\tvar this_component = this;\n\n\t\t\t// (Re)-Set up the save to fire in 500ms\n\t\t\tthis.input_delay = setTimeout( () => {\n\t\t\t\t\tclearTimeout( this.input_delay );\n\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tcurrent_page: 1,\n\t\t\t\t\t\trows: null,\n\t\t\t\t\t\tcolumns: null,\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tthis.props.get_rows_and_columns( this.state.current_page, this.state.items_per_page, this.state.search_term )\n\t\t\t\t\t} );\n\n\t\t\t}, 50);\n\n\t\t} );\n\n\t}\n\n\trender_columns( columns ) {\n\n\t\tif ( ! columns ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar mapper = [];\n\n\t\t// Loop through each column\n\t\tfor (var key in columns) {\n\t\t\tmapper.push(\n\t\t\t\t<div key={ key } scope=\"col\" className=\"church-tithe-wp-list-view-column\">\n\t\t\t\t\t<span>{ columns[key] }</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn mapper;\n\t}\n\n\trender_rows( rows, columns ) {\n\n\t\tvar mapper = [];\n\t\tvar td_mapper = [];\n\t\tvar value;\n\n\t\tif ( ! rows || 0 == this.props.total_items ) {\n\n\t\t\tvar first = true;\n\n\t\t\tfor (var key in columns) {\n\t\t\t\ttd_mapper.push(\n\n\t\t\t\t\t// Render the contents of this table cell\n\t\t\t\t\t(() => {\n\n\t\t\t\t\t\t// If this is the first item in the row.\n\t\t\t\t\t\tif ( first ) {\n\n\t\t\t\t\t\t\tfirst = false;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={ key } className=\"church-tithe-wp-list-view-cell\">\n\t\t\t\t\t\t\t\t\t{ 'None Found' }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfirst = false;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={ key } className=\"church-tithe-wp-list-view-cell\">\n\t\t\t\t\t\t\t\t\t{ '' }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t})()\n\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Add all of that combined data to the main mapper array\n\t\t\tmapper.push(\n\t\t\t\t<div key={ 'none_found' } className=\"church-tithe-wp-list-view-row\">\n\t\t\t\t{ td_mapper }\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\treturn mapper;\n\t\t}\n\n\t\t// Loop through each row\n\t\tfor (var row in rows) {\n\n\t\t\t// Combine all of the table data (cells in this row)\n\t\t\tfor (var key in columns) {\n\t\t\t//for (var key in rows[row]) {\n\t\t\t\ttd_mapper.push(\n\n\t\t\t\t\t// Render the contents of this table cell\n\t\t\t\t\t(() => {\n\n\t\t\t\t\t\t// If we should show this peice of data in the list view\n\t\t\t\t\t\tif ( rows[row][key]['show_in_list_view'] ) {\n\n\t\t\t\t\t\t\t// Format the value according to it's format function (if one was included)\n\t\t\t\t\t\t\tif ( rows[row][key]['value_format_function'] ) {\n\t\t\t\t\t\t\t\tvalue = eval( rows[row][key]['value_format_function'] )( rows[row][key] )\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalue = rows[row][key]['value']\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={ key } className=\"church-tithe-wp-list-view-cell\">\n\t\t\t\t\t\t\t\t\t<button className=\"church-tithe-wp-text-button\" onClick={ this.props.on_row_click.bind( this, rows[row] ) }>{ value }</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t})()\n\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Add all of that combined data to the main mapper array\n\t\t\tmapper.push(\n\t\t\t\t<div key={ row } className=\"church-tithe-wp-list-view-row\">\n\t\t\t\t{ td_mapper }\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\t// Get the row data array ready for a new row\n\t\t\ttd_mapper = [];\n\t\t}\n\n\t\treturn mapper;\n\n\t}\n\n\trender_search() {\n\n\t\treturn (\n\t\t\t<div className=\"church-tithe-wp-list-view-search\">\n\t\t\t\t<span>{ this.props.main_component.state.unique_settings.strings.uppercase_search }</span>\n\t\t\t\t<input type=\"text\" value={ this.state.search_term } onChange={ this.handle_search_change.bind( this ) } />\n\t\t\t</div>\n\t\t)\n\n\t}\n\n\trender_pagination() {\n\n\t\treturn (\n\t\t\t<div className=\"church-tithe-wp-list-view-pagination-controls\">\n\t\t\t\t<div className=\"church-tithe-wp-list-view-items-per-page\">\n\t\t\t\t\t<span>{ this.props.main_component.state.unique_settings.strings.uppercase_items  + ' ' + this.props.main_component.state.unique_settings.strings.lowercase_per + ' ' + this.props.main_component.state.unique_settings.strings.lowercase_page }</span>\n\t\t\t\t\t<input type=\"number\" min={ 1 } onChange={ this.handle_items_per_page_change.bind( this ) } value={ this.state.items_per_page } />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"church-tithe-wp-list-view-pagination\">\n\t\t\t\t\t<span>{ this.props.main_component.state.unique_settings.strings.uppercase_page }</span>\n\t\t\t\t\t<input type=\"number\" min={ 1 } max={ this.get_total_pages() } onChange={ this.handle_page_number_change.bind( this ) } value={ this.state.current_page } />\n\t\t\t\t\t<span>{ ' ' + this.props.main_component.state.unique_settings.strings.lowercase_of + ' ' + this.get_total_pages() }</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\n\t}\n\n\trender_list_table() {\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"church-tithe-wp-list-view-table\">\n\t\t\t\t\t<div className=\"church-tithe-wp-list-view-table-header\">\n\t\t\t\t\t\t<div className=\"church-tithe-wp-list-view-header-row\">\n\t\t\t\t\t\t\t{ this.render_columns( this.props.columns ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"church-tithe-wp-list-view-body\">\n\t\t\t\t\t\t{ this.render_rows( this.props.rows, this.props.columns ) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\t( () => {\n\t\t\t\t\t\tif ( 'fetching_data' === this.props.current_visual_state ) {\n\t\t\t\t\t\t\t// return ( <Church_Tithe_WP_Spinner /> );\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t}\n\t\t\t</React.Fragment>\n\t\t);\n\n\t}\n\n\trender_list_view() {\n\n\t\treturn(\n\t\t\t<div className=\"church-tithe-wp-list-view\">\n\t\t\t\t<div className=\"church-tithe-wp-list-view-before-controls\">\n\t\t\t\t\t{ this.render_search() }\n\t\t\t\t</div>\n\t\t\t\t{ this.render_list_table() }\n\t\t\t\t<div className=\"church-tithe-wp-list-view-after-controls\">\n\t\t\t\t\t{ this.render_pagination() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\n\t}\n\n\trender() {\n\n\t\treturn (\n\t\t\t<div className={ 'church-tithe-wp-list-view' }>\n\t\t\t<div className=\"church-tithe-wp-list-view-content-area\">\n\n\t\t\t{ this.render_list_view() }\n\n\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\nexport default Church_Tithe_WP_List_View;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.elementContextTypes = exports.injectContextTypes = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Provider = require('./Provider');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar injectContextTypes = exports.injectContextTypes = {\n  getRegisteredElements: _propTypes2.default.func.isRequired\n};\n\nvar elementContextTypes = exports.elementContextTypes = {\n  addElementsLoadListener: _propTypes2.default.func.isRequired,\n  registerElement: _propTypes2.default.func.isRequired,\n  unregisterElement: _propTypes2.default.func.isRequired\n};\n\nvar Elements = function (_React$Component) {\n  _inherits(Elements, _React$Component);\n\n  function Elements(props, context) {\n    _classCallCheck(this, Elements);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props, context));\n\n    _this.handleRegisterElement = function (element, impliedTokenType, impliedSourceType, impliedPaymentMethodType) {\n      _this.setState(function (prevState) {\n        return {\n          registeredElements: [].concat(_toConsumableArray(prevState.registeredElements), [_extends({\n            element: element\n          }, impliedTokenType ? { impliedTokenType: impliedTokenType } : {}, impliedSourceType ? { impliedSourceType: impliedSourceType } : {}, impliedPaymentMethodType ? { impliedPaymentMethodType: impliedPaymentMethodType } : {})])\n        };\n      });\n    };\n\n    _this.handleUnregisterElement = function (el) {\n      _this.setState(function (prevState) {\n        return {\n          registeredElements: prevState.registeredElements.filter(function (_ref) {\n            var element = _ref.element;\n            return element !== el;\n          })\n        };\n      });\n    };\n\n    _this.state = {\n      registeredElements: []\n    };\n    return _this;\n  }\n\n  Elements.prototype.getChildContext = function getChildContext() {\n    var _this2 = this;\n\n    return {\n      addElementsLoadListener: function addElementsLoadListener(fn) {\n        // Return the existing elements instance if we already have one.\n        if (_this2._elements) {\n          fn(_this2._elements);\n          return;\n        }\n\n        var _props = _this2.props,\n            children = _props.children,\n            options = _objectWithoutProperties(_props, ['children']);\n\n        if (_this2.context.tag === 'sync') {\n          _this2._elements = _this2.context.stripe.elements(options);\n          fn(_this2._elements);\n        } else {\n          _this2.context.addStripeLoadListener(function (stripe) {\n            if (_this2._elements) {\n              fn(_this2._elements);\n            } else {\n              _this2._elements = stripe.elements(options);\n              fn(_this2._elements);\n            }\n          });\n        }\n      },\n      registerElement: this.handleRegisterElement,\n      unregisterElement: this.handleUnregisterElement,\n      getRegisteredElements: function getRegisteredElements() {\n        return _this2.state.registeredElements;\n      }\n    };\n  };\n\n  Elements.prototype.render = function render() {\n    return _react2.default.Children.only(this.props.children);\n  };\n\n  return Elements;\n}(_react2.default.Component);\n\nElements.childContextTypes = _extends({}, injectContextTypes, elementContextTypes);\nElements.contextTypes = _Provider.providerContextTypes;\nElements.defaultProps = {\n  children: null\n};\nexports.default = Elements;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.providerContextTypes = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// TODO(jez) 'sync' and 'async' are bad tag names.\n// TODO(jez) What if redux also uses this.context.tag?\nvar providerContextTypes = exports.providerContextTypes = {\n  tag: _propTypes2.default.string.isRequired,\n  stripe: _propTypes2.default.object,\n  addStripeLoadListener: _propTypes2.default.func\n};\n\nvar getOrCreateStripe = function getOrCreateStripe(apiKey, options) {\n  /**\n   * Note that this is not meant to be a generic memoization solution.\n   * This is specifically a solution for `StripeProvider`s being initialized\n   * and destroyed regularly (with the same set of props) when users only\n   * use `StripeProvider` for the subtree that contains their checkout form.\n   */\n  window.Stripe.__cachedInstances = window.Stripe.__cachedInstances || {};\n  var cacheKey = 'key=' + apiKey + ' options=' + JSON.stringify(options);\n\n  var stripe = window.Stripe.__cachedInstances[cacheKey] || window.Stripe(apiKey, options);\n  window.Stripe.__cachedInstances[cacheKey] = stripe;\n\n  return stripe;\n};\n\nvar ensureStripeShape = function ensureStripeShape(stripe) {\n  if (stripe && stripe.elements && stripe.createSource && stripe.createToken && stripe.createPaymentMethod && stripe.handleCardPayment) {\n    return stripe;\n  } else {\n    throw new Error(\"Please pass a valid Stripe object to StripeProvider. You can obtain a Stripe object by calling 'Stripe(...)' with your publishable key.\");\n  }\n};\n\nvar Provider = function (_React$Component) {\n  _inherits(Provider, _React$Component);\n\n  // on the other hand: childContextTypes is *required* to use context.\n  function Provider(props) {\n    _classCallCheck(this, Provider);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    if (_this.props.apiKey && _this.props.stripe) {\n      throw new Error(\"Please pass either 'apiKey' or 'stripe' to StripeProvider, not both.\");\n    } else if (_this.props.apiKey) {\n      if (!window.Stripe) {\n        throw new Error(\"Please load Stripe.js (https://js.stripe.com/v3/) on this page to use react-stripe-elements. If Stripe.js isn't available yet (it's loading asynchronously, or you're using server-side rendering), see https://github.com/stripe/react-stripe-elements#advanced-integrations\");\n      } else {\n        var _this$props = _this.props,\n            _apiKey = _this$props.apiKey,\n            _children = _this$props.children,\n            _stripe = _this$props.stripe,\n            options = _objectWithoutProperties(_this$props, ['apiKey', 'children', 'stripe']);\n\n        _this._meta = {\n          tag: 'sync',\n          stripe: getOrCreateStripe(_apiKey, options)\n        };\n      }\n    } else if (_this.props.stripe) {\n      // If we already have a stripe instance (in the constructor), we can behave synchronously.\n      _this._meta = {\n        tag: 'sync',\n        stripe: ensureStripeShape(_this.props.stripe)\n      };\n    } else if (_this.props.stripe === null) {\n      _this._meta = {\n        tag: 'async',\n        stripe: null\n      };\n    } else {\n      throw new Error(\"Please pass either 'apiKey' or 'stripe' to StripeProvider. If you're using 'stripe' but don't have a Stripe instance yet, pass 'null' explicitly.\");\n    }\n\n    _this._didWarn = false;\n    _this._didWakeUpListeners = false;\n    _this._listeners = [];\n    return _this;\n  }\n  // Even though we're using flow, also use PropTypes so we can take advantage of developer warnings.\n\n\n  Provider.prototype.getChildContext = function getChildContext() {\n    var _this2 = this;\n\n    // getChildContext is run after the constructor, so we WILL have access to\n    // the initial state.\n    //\n    // However, context doesn't update in respnse to state changes like you\n    // might expect: context is pulled by the child, not pushed by the parent.\n    if (this._meta.tag === 'sync') {\n      return {\n        tag: 'sync',\n        stripe: this._meta.stripe\n      };\n    } else {\n      return {\n        tag: 'async',\n        addStripeLoadListener: function addStripeLoadListener(fn) {\n          if (_this2._meta.stripe) {\n            fn(_this2._meta.stripe);\n          } else {\n            _this2._listeners.push(fn);\n          }\n        }\n      };\n    }\n  };\n\n  Provider.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var apiKeyChanged = this.props.apiKey && nextProps.apiKey && this.props.apiKey !== nextProps.apiKey;\n\n    var stripeInstanceChanged = this.props.stripe && nextProps.stripe && this.props.stripe !== nextProps.stripe;\n    if (!this._didWarn && (apiKeyChanged || stripeInstanceChanged) && window.console && window.console.error) {\n      this._didWarn = true;\n      // eslint-disable-next-line no-console\n      console.error('StripeProvider does not support changing the apiKey parameter.');\n      return;\n    }\n\n    if (!this._didWakeUpListeners && nextProps.stripe) {\n      // Wake up the listeners if we've finally been given a StripeShape\n      this._didWakeUpListeners = true;\n      var _stripe2 = ensureStripeShape(nextProps.stripe);\n      this._meta.stripe = _stripe2;\n      this._listeners.forEach(function (fn) {\n        fn(_stripe2);\n      });\n    }\n  };\n\n  Provider.prototype.render = function render() {\n    return _react2.default.Children.only(this.props.children);\n  };\n\n  return Provider;\n}(_react2.default.Component);\n\nProvider.propTypes = {\n  apiKey: _propTypes2.default.string,\n  // PropTypes.object is the only way we can accept a Stripe instance\n  // eslint-disable-next-line react/forbid-prop-types\n  stripe: _propTypes2.default.object,\n  children: _propTypes2.default.node\n};\nProvider.childContextTypes = providerContextTypes;\nProvider.defaultProps = {\n  apiKey: undefined,\n  stripe: undefined,\n  children: null\n};\nexports.default = Provider;","/**\n * Format a unix timestamp (UTC) into a date (Jan 1, 1970) in the user's local timezone and locale.\n *\n * @since    1.0.0\n * @param    string date_string\n * @return   string\n */\nwindow.church_tithe_wp_format_date = function church_tithe_wp_format_date( date_string, locale ) {\n\tvar date = new Date( date_string.replace(/\\s/, 'T') + 'Z' );\n\n\tif ( 'Invalid Date' == date ) {\n\t\treturn date_string;\n\t}\n\n\treturn date.toLocaleDateString();\n}\n\n/**\n * Format a unix timestamp (UTC) into a time (00:00:00) in the user's local timezone and locale.\n *\n * @since    1.0.0\n * @param    string date_string\n * @return   string\n */\nwindow.church_tithe_wp_format_time = function church_tithe_wp_format_time( date_string ) {\n\tvar date = new Date( date_string.replace(/\\s/, 'T') + 'Z' );\n\n\tif ( 'Invalid Date' == date ) {\n\t\treturn date_string;\n\t}\n\n\treturn date.toLocaleTimeString() + + ' (' + date.toLocaleTimeString( navigator.language,{timeZoneName:'short'}).split(' ')[2] + ')';\n}\n\n/**\n * Format a unix timestamp (UTC) into a date and time (Jan 1, 1970, 00:00:00) in the user's local timezone and locale.\n *\n * @since    1.0.0\n * @param    string date_string\n * @return   string\n */\nwindow.church_tithe_wp_format_date_and_time = function church_tithe_wp_format_date_and_time( date_string ) {\n\tvar date = new Date( date_string.replace(/\\s/, 'T') + 'Z' );\n\n\tif ( 'Invalid Date' == date ) {\n\t\treturn date_string;\n\t}\n\t\n\treturn date.toLocaleString() + ' (' + date.toLocaleTimeString( navigator.language,{timeZoneName:'short'}).split(' ')[2] + ')';\n}\n\n/**\n * Takes a date value array from a Church Tithe WP list view component, passes it to church_tithe_wp_format_date, and returns it.\n *\n * @since    1.0.0\n * @param    array data\n * @return   string\n */\nwindow.church_tithe_wp_list_view_format_date = function church_tithe_wp_list_view_format_date( data ) {\n\treturn church_tithe_wp_format_date( data['value'] );\n}\n\n/**\n * Format a money amount properly for the user's locale.\n *\n * @since    1.0.0\n * @param    int cents\n * @param    string currency\n * @param    bool is_zero_decimal_currency\n * @param    string locale\n * @param    string string_after\n * @return   string\n */\nwindow.church_tithe_wp_format_money = function church_tithe_wp_format_money( cents, currency, is_zero_decimal_currency, locale, string_after ) {\n\n\t\t// If this browser supports the navigator.language\n\t\tif ( navigator && navigator.language ) {\n\t\t\tlocale = navigator.language;\n\n\t\t\t// Otherwise, default to the server's locale settings.\n\t\t} else {\n\t\t\t// Make sure the locale uses a dash and not an underscore\n\t\t\tlocale = locale.replace( '_', '-' );\n\t\t}\n\n\t\t// If this is a zero-decimal currency\n\t\tif ( is_zero_decimal_currency ) {\n\t\t\tvar formatted_amount = Number( cents );\n\t\t}\n\t\t// If this is not a zero decimal currency\n\t\telse {\n\t\t\tvar formatted_amount = Number( cents ) / 100;\n\t\t}\n\n\t\t// Format the currency based on the site's locale. This allows commas to be used as the decimal seperator, which is technically a translation.\n\t\t// Multi currency sites can allow people to set their locale, so we'll just use the site's current locale.\n\t\tformatted_amount = new Intl.NumberFormat(locale, { style: 'currency', currency: currency }).format(formatted_amount);\n\n\t\treturn formatted_amount + string_after;\n}\n\n/**\n * Takes a value array from a Church Tithe WP list view component, passes it to church_tithe_wp_format_visual_amount, and returns it.\n *\n * @since    1.0.0\n * @param    array data\n * @return   string\n */\nwindow.church_tithe_wp_list_view_format_money = function church_tithe_wp_list_view_format_money( data ) {\n\treturn church_tithe_wp_format_money( data['cents'], data['currency'], data['is_zero_decimal_currency'], data['locale'], data['string_after'] );\n}\n\nwindow.church_tithe_wp_get_current_view_class = function church_tithe_wp_get_current_view_class( component, views_in_question ) {\n\n\tvar currently_in_view_class_name = 'church-tithe-wp-current-view';\n\tvar hidden_class_name = 'church-tithe-wp-hidden-view';\n\tvar at_least_one_in_view = false;\n\n\tfor (var i = 0; i < views_in_question.length; i++) {\n\t\t// If the current visual state matches the view we are getting the class for\n\t\tif( component.state.current_visual_state == views_in_question[i] ) {\n\n\t\t\tvar at_least_one_in_view = true;\n\n\t\t}\n\t}\n\n\tif ( at_least_one_in_view ) {\n\t\treturn ' ' + currently_in_view_class_name;\n\t} else {\n\t\treturn ' ' + hidden_class_name;\n\t}\n\n}\n\n// Convert a string to a bool\nwindow.church_tithe_wp_string_to_bool = function church_tithe_wp_string_to_bool( the_string ) {\n\n\t// Convert the local storage from string to bool so we can compare them\n\tif ( the_string == 'true' ){\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\n// Validate an email address is the expected format for an email address\nwindow.church_tithe_wp_validate_email = function church_tithe_wp_validate_email( email ) {\n\tvar re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\treturn re.test(String(email).toLowerCase());\n}\n\n// Accepts a locale string and returns the character to use as a decimal separator when displaying money\nwindow.church_tithe_wp_get_decimal_character_for_locale = function church_tithe_wp_get_decimal_character_for_locale( locale ) {\n\tvar mock_price = new Intl.NumberFormat(locale, { style: 'currency', currency: 'USD' }).format(0);\n\n\tif ( mock_price.includes(\",\") ) {\n\t\tdecimal_character = ',';\n\t}\n\n\tif ( mock_price.includes(\".\") ) {\n\t\tdecimal_character = '.';\n\t}\n\n\treturn decimal_character;\n}\n\n// Accepts an all visual states object, a visual tree object acting as a map for the location of the component in question, and a boolean\n// It then recursively goes throguh the component tree object, checking if\nfunction church_tithe_wp_visual_state_should_become( all_current_visual_states, map_of_visual_states, visual_state_should_become, default_visual_state ) {\n\n\t// The component tree is a \"map\" that tells use where this component lives within the parent\n\tfor ( var level in map_of_visual_states ) {\n\t\t// If the current component's top-level parent is set in the current visual states object, great! Keep going.\n\t\tif ( all_current_visual_states[level] ) {\n\n\t\t\t// If there are other components ahead of this component in the tree\n\t\t\tif ( typeof map_of_visual_states[level] !== 'undefined' && typeof map_of_visual_states[level] === 'object' && Object.keys(map_of_visual_states[level]).length !== 0){\n\t\t\t\t// Recursively nest down into the next parent component to see if it is set in the current visual states object.\n\t\t\t\tvisual_state_should_become = church_tithe_wp_visual_state_should_become( all_current_visual_states[level], map_of_visual_states[level], visual_state_should_become, default_visual_state );\n\t\t\t} else {\n\n\t\t\t\t// If we are at the end of the component tree, and the component level is in the current visual states object, it's in view!\n\t\t\t\tvisual_state_should_become = level;\n\n\t\t\t}\n\t\t} else if ( 'variable' === level ) {\n\n\t\t\t// If we are at the end of the component tree, and the component level is variable, grab the value from the master view object at this level\n\t\t\tif ( Object.keys(all_current_visual_states)[0] ) {\n\t\t\t\tvisual_state_should_become = Object.keys(all_current_visual_states)[0];\n\t\t\t} else {\n\t\t\t\tvisual_state_should_become = default_visual_state;\n\t\t\t}\n\n\t\t} else {\n\t\t\tvisual_state_should_become = default_visual_state;\n\t\t}\n\n\t}\n\n\treturn visual_state_should_become;\n}\n\nwindow.church_tithe_wp_set_visual_state_of_component = function church_tithe_wp_set_visual_state_of_component( settings ) {\n\n\treturn new Promise( (resolve, reject) => {\n\n\t\t// If we don't have the variables we require, fail.\n\t\tif ( ! settings.component ) {\n\t\t\tthrow new Error( 'The function \"church_tithe_wp_set_visual_state_of_component\" is missing required variables' );\n\t\t}\n\n\t\tif ( ! settings.component.props.main_component.state.all_current_visual_states ) {\n\t\t\tthrow new Error( 'A visual states object is required.' );\n\t\t}\n\n\t\tif ( ! settings.component.state.map_of_visual_states ) {\n\t\t\tthrow new Error( 'The component must have a map of the view states stored in the state with the key \"map_of_visual_states\"' );\n\t\t}\n\n\t\tvar new_map_of_visual_states = church_tithe_wp_get_default_map_of_visual_states( settings.component.state.map_of_visual_states, settings.default_visual_state );\n\n\t\t// Figure out if the parent component is in view\n\t\tfor ( var level in settings.component.props.main_component.state.all_current_visual_states ) {\n\t\t\tif ( ! new_map_of_visual_states[level] ) {\n\t\t\t\tparent_component_is_in_view = false;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tparent_component_is_in_view = true;\n\t\t\t}\n\t\t}\n\n\t\t// If the parent component is in view, just set it to a default and do nothing else\n\t\tif ( ! parent_component_is_in_view ) {\n\t\t\tvar visual_state_should_become = settings.default_visual_states.parent_not_in_view;\n\t\t} else {\n\t\t\tvar visual_state_should_become = church_tithe_wp_visual_state_should_become( settings.component.props.main_component.state.all_current_visual_states, settings.component.state.map_of_visual_states, false, settings.default_visual_states.parent_in_view );\n\t\t}\n\n\t\t// If the state of the component is already the current state in the master visual states object, do nothing.\n\t\tif ( settings.component.state[settings.name_of_visual_state_variable] == visual_state_should_become ) {\n\n\t\t\tresolve( visual_state_should_become );\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\tif ( ! visual_state_should_become ) {\n\n\t\t\t\tsettings.component.setState( {\n\t\t\t\t\t[settings.name_of_visual_state_variable]: settings.default_visual_states.parent_not_in_view\n\t\t\t\t}, function() {\n\t\t\t\t\t//console.log( 'setting default state to: ' + settings.default_visual_states.parent_not_in_view + ' where default was ' + settings.default_visual_states.parent_in_view );\n\t\t\t\t\tresolve( settings.default_visual_states.parent_not_in_view );\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\tsettings.component.setState( {\n\t\t\t\t\t[settings.name_of_visual_state_variable]: visual_state_should_become\n\t\t\t\t}, function() {\n\t\t\t\t\t//console.log( 'setting visual state to: ' + visual_state_should_become + ' where default was ' + settings.default_visual_states.parent_in_view );\n\t\t\t\t\tresolve( visual_state_should_become );\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t});\n\n}\n\nfunction church_tithe_wp_get_default_map_of_visual_states( map_of_visual_states, default_visual_state, new_map_of_visual_states = {}, previous_level = false ) {\n\n\tfor ( var level in map_of_visual_states ) {\n\n\t\t// If there's another level, keep going\n\t\tif ( typeof map_of_visual_states[level] !== 'undefined' && typeof map_of_visual_states[level] === 'object' && Object.keys(map_of_visual_states[level]).length !== 0) {\n\n\t\t\t// If we at a level great than 1\n\t\t\tif ( previous_level ) {\n\t\t\t\tvar temp = {};\n\t\t\t\ttemp[level] = {};\n\t\t\t\tnew_map_of_visual_states[previous_level] = church_tithe_wp_get_default_map_of_visual_states( map_of_visual_states[level], default_visual_state, temp, level );\n\t\t\t}\n\t\t\t// If we are at the top level\n\t\t\telse {\n\t\t\t\tnew_map_of_visual_states[level] = {};\n\t\t\t\tnew_map_of_visual_states = church_tithe_wp_get_default_map_of_visual_states( map_of_visual_states[level], default_visual_state, new_map_of_visual_states, level );\n\t\t\t}\n\n\t\t\treturn new_map_of_visual_states;\n\t\t}\n\t\t// If the last level is reached and it's variable, or empty, set it to the default state and be done. No more nesting and looping.\n\t\telse if ( 'variable' === level || 0 === Object.keys(map_of_visual_states[level]).length) {\n\t\t\tnew_map_of_visual_states[previous_level][default_visual_state] = {};\n\t\t\treturn new_map_of_visual_states;\n\t\t}\n\t\t// If there's no more levels, and the last level isn't \"variable\", set it to the current level and be done. No more nesting and looping.\n\t\telse {\n\t\t\tnew_map_of_visual_states[previous_level][level] = {};\n\t\t\treturn new_map_of_visual_states;\n\t\t}\n\t}\n\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Elements = require('./Elements');\n\nvar _Provider = require('./Provider');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// react-redux does a bunch of stuff with pure components / checking if it needs to re-render.\n// not sure if we need to do the same.\nvar inject = function inject(WrappedComponent) {\n  var _class, _temp;\n\n  var componentOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _componentOptions$wit = componentOptions.withRef,\n      withRef = _componentOptions$wit === undefined ? false : _componentOptions$wit;\n\n\n  return _temp = _class = function (_React$Component) {\n    _inherits(_class, _React$Component);\n\n    function _class(props, context) {\n      _classCallCheck(this, _class);\n\n      if (!context || !context.getRegisteredElements) {\n        throw new Error('It looks like you are trying to inject Stripe context outside of an Elements context.\\nPlease be sure the component that calls createSource or createToken is within an <Elements> component.');\n      }\n\n      var _this = _possibleConstructorReturn(this, _React$Component.call(this, props, context));\n\n      _this.parseElementOrData = function (elementOrOptions) {\n        return elementOrOptions && (typeof elementOrOptions === 'undefined' ? 'undefined' : _typeof(elementOrOptions)) === 'object' && elementOrOptions._frame && _typeof(elementOrOptions._frame) === 'object' && elementOrOptions._frame.id && typeof elementOrOptions._frame.id === 'string' && typeof elementOrOptions._componentName === 'string' ? { type: 'element', element: elementOrOptions } : { type: 'data', data: elementOrOptions };\n      };\n\n      _this.findElement = function (filterBy, specifiedType) {\n        var allElements = _this.context.getRegisteredElements();\n        var filteredElements = allElements.filter(function (e) {\n          return e[filterBy];\n        });\n        var matchingElements = specifiedType === 'auto' ? filteredElements : filteredElements.filter(function (e) {\n          return e[filterBy] === specifiedType;\n        });\n\n        if (matchingElements.length === 1) {\n          return matchingElements[0].element;\n        } else if (matchingElements.length > 1) {\n          throw new Error('You did not specify the type of Source, Token, or PaymentMethod to create.\\n        We could not infer which Element you want to use for this operation.');\n        } else {\n          return null;\n        }\n      };\n\n      _this.requireElement = function (filterBy, specifiedType) {\n        var element = _this.findElement(filterBy, specifiedType);\n        if (element) {\n          return element;\n        } else {\n          throw new Error('You did not specify the type of Source, Token, or PaymentMethod to create.\\n        We could not infer which Element you want to use for this operation.');\n        }\n      };\n\n      _this.wrappedCreateToken = function (stripe) {\n        return function () {\n          var tokenTypeOrOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          if (tokenTypeOrOptions && (typeof tokenTypeOrOptions === 'undefined' ? 'undefined' : _typeof(tokenTypeOrOptions)) === 'object') {\n            // First argument is options; infer the Element and tokenize\n            var opts = tokenTypeOrOptions;\n\n            var tokenType = opts.type,\n                rest = _objectWithoutProperties(opts, ['type']);\n\n            var specifiedType = typeof tokenType === 'string' ? tokenType : 'auto';\n            // Since only options were passed in, a corresponding Element must exist\n            // for the tokenization to succeed -- thus we call requireElement.\n            var element = _this.requireElement('impliedTokenType', specifiedType);\n            return stripe.createToken(element, rest);\n          } else if (typeof tokenTypeOrOptions === 'string') {\n            // First argument is token type; tokenize with token type and options\n            var _tokenType = tokenTypeOrOptions;\n            return stripe.createToken(_tokenType, options);\n          } else {\n            // If a bad value was passed in for options, throw an error.\n            throw new Error('Invalid options passed to createToken. Expected an object, got ' + (typeof tokenTypeOrOptions === 'undefined' ? 'undefined' : _typeof(tokenTypeOrOptions)) + '.');\n          }\n        };\n      };\n\n      _this.wrappedCreateSource = function (stripe) {\n        return function () {\n          var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n          if (options && (typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n            if (typeof options.type !== 'string') {\n              throw new Error('Invalid Source type passed to createSource. Expected string, got ' + _typeof(options.type) + '.');\n            }\n\n            var element = _this.findElement('impliedSourceType', options.type);\n            if (element) {\n              // If an Element exists for the source type, use that to create the\n              // corresponding source.\n              //\n              // NOTE: this prevents users from independently creating sources of\n              // type `foo` if an Element that can create `foo` sources exists in\n              // the current <Elements /> context.\n              return stripe.createSource(element, options);\n            } else {\n              // If no Element exists for the source type, directly create a source.\n              return stripe.createSource(options);\n            }\n          } else {\n            // If a bad value was passed in for options, throw an error.\n            throw new Error('Invalid options passed to createSource. Expected an object, got ' + (typeof options === 'undefined' ? 'undefined' : _typeof(options)) + '.');\n          }\n        };\n      };\n\n      _this.wrappedCreatePaymentMethod = function (stripe) {\n        return function (paymentMethodType, elementOrData, maybeData) {\n          if (!paymentMethodType || typeof paymentMethodType !== 'string') {\n            throw new Error('Invalid PaymentMethod type passed to createPaymentMethod. Expected a string, got ' + (typeof paymentMethodType === 'undefined' ? 'undefined' : _typeof(paymentMethodType)) + '.');\n          }\n\n          if (!['card'].includes(paymentMethodType)) {\n            throw new Error('Invalid PaymentMethod type passed to createPaymentMethod. ' + paymentMethodType + ' is not yet supported.');\n          }\n\n          var elementOrDataResult = _this.parseElementOrData(elementOrData);\n\n          // Second argument is Element; use passed in Element\n          if (elementOrDataResult.type === 'element') {\n            var _element = elementOrDataResult.element;\n\n            if (maybeData) {\n              return stripe.createPaymentMethod(paymentMethodType, _element, maybeData);\n            } else {\n              return stripe.createPaymentMethod(paymentMethodType, _element);\n            }\n          }\n\n          // Second argument is data or undefined; infer the Element\n          var data = elementOrDataResult.data;\n\n          var element = _this.findElement('impliedPaymentMethodType', paymentMethodType);\n\n          if (element) {\n            return data ? stripe.createPaymentMethod(paymentMethodType, element, data) : stripe.createPaymentMethod(paymentMethodType, element);\n          }\n\n          if (data && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object') {\n            return stripe.createPaymentMethod(paymentMethodType, data);\n          } else if (!data) {\n            throw new Error('Could not find an Element that can be used to create a PaymentMethod of type: ' + paymentMethodType + '.');\n          } else {\n            // If a bad value was passed in for data, throw an error.\n            throw new Error('Invalid data passed to createPaymentMethod. Expected an object, got ' + (typeof data === 'undefined' ? 'undefined' : _typeof(data)) + '.');\n          }\n        };\n      };\n\n      _this.wrappedHandleCardX = function (stripe, method) {\n        return function (clientSecret, elementOrData, maybeData) {\n          if (!clientSecret || typeof clientSecret !== 'string') {\n            // If a bad value was passed in for clientSecret, throw an error.\n            throw new Error('Invalid PaymentIntent client secret passed to handleCardPayment. Expected string, got ' + (typeof clientSecret === 'undefined' ? 'undefined' : _typeof(clientSecret)) + '.');\n          }\n\n          var elementOrDataResult = _this.parseElementOrData(elementOrData);\n\n          // Second argument is Element; handle with element\n          if (elementOrDataResult.type === 'element') {\n            var _element2 = elementOrDataResult.element;\n\n            if (maybeData) {\n              return stripe[method](clientSecret, _element2, maybeData);\n            } else {\n              return stripe[method](clientSecret, _element2);\n            }\n          }\n\n          // Second argument is data or undefined; see if we can find a mounted Element\n          // that can create card PaymentMethods\n          var data = elementOrDataResult.data;\n\n          var element = _this.findElement('impliedPaymentMethodType', 'card');\n\n          if (element) {\n            // If an Element exists that can create card PaymentMethods use it. Otherwise\n            // assume that we must be calling with data only.\n            //\n            // NOTE: this prevents users from using handleCard* with an existing\n            // Source or PaymentMethod if an Element that can create card PaymentMethods\n            // exists in the current <Elements /> context.\n            if (data) {\n              return stripe[method](clientSecret, element, data);\n            } else {\n              return stripe[method](clientSecret, element);\n            }\n          } else {\n            if (!data) {\n              throw new Error('Could not find a CardElement or CardNumberElement which which to perform handleCardPayment.');\n            } else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) !== 'object') {\n              throw new Error('Invalid data passed to handleCardPayment. Expected an object, got ' + (typeof data === 'undefined' ? 'undefined' : _typeof(data)) + '.');\n            }\n\n            // If no Element exists that can create a card PaymentMethod,\n            // directly call handleCard*.\n            return stripe[method](clientSecret, data);\n          }\n        };\n      };\n\n      if (_this.context.tag === 'sync') {\n        _this.state = {\n          stripe: _this.stripeProps(_this.context.stripe)\n        };\n      } else {\n        _this.state = {\n          stripe: null\n        };\n      }\n      return _this;\n    }\n\n    _class.prototype.componentDidMount = function componentDidMount() {\n      var _this2 = this;\n\n      if (this.context.tag === 'async') {\n        this.context.addStripeLoadListener(function (stripe) {\n          _this2.setState({\n            stripe: _this2.stripeProps(stripe)\n          });\n        });\n      } else {\n        // when 'sync', it's already set in the constructor.\n      }\n    };\n\n    _class.prototype.getWrappedInstance = function getWrappedInstance() {\n      if (!withRef) {\n        throw new Error('To access the wrapped instance, the `{withRef: true}` option must be set when calling `injectStripe()`');\n      }\n      return this.wrappedInstance;\n    };\n\n    _class.prototype.stripeProps = function stripeProps(stripe) {\n      return _extends({}, stripe, {\n        // These are the only functions that take elements.\n        createToken: this.wrappedCreateToken(stripe),\n        createSource: this.wrappedCreateSource(stripe),\n        createPaymentMethod: this.wrappedCreatePaymentMethod(stripe),\n        handleCardPayment: this.wrappedHandleCardX(stripe, 'handleCardPayment'),\n        handleCardSetup: this.wrappedHandleCardX(stripe, 'handleCardSetup')\n      });\n    };\n\n    // Finds an Element by the specified type, if one exists.\n    // Throws if multiple Elements match.\n\n\n    // Require that exactly one Element is found for the specified type.\n    // Throws if no Element is found.\n\n\n    // Wraps createToken in order to infer the Element that is being tokenized.\n\n\n    // Wraps createSource in order to infer the Element that is being used for\n    // source creation.\n\n\n    // Wraps createPaymentMethod in order to infer the Element that is being\n    // used for PaymentMethod creation.\n\n\n    _class.prototype.render = function render() {\n      var _this3 = this;\n\n      return _react2.default.createElement(WrappedComponent, _extends({}, this.props, {\n        stripe: this.state.stripe,\n        ref: withRef ? function (c) {\n          _this3.wrappedInstance = c;\n        } : null\n      }));\n    };\n\n    return _class;\n  }(_react2.default.Component), _class.contextTypes = _extends({}, _Provider.providerContextTypes, _Elements.injectContextTypes), _class.displayName = 'InjectStripe(' + (WrappedComponent.displayName || WrappedComponent.name || 'Component') + ')', _temp;\n};\n\nexports.default = inject;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _isEqual = require('../utils/isEqual');\n\nvar _isEqual2 = _interopRequireDefault(_isEqual);\n\nvar _Elements = require('./Elements');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar noop = function noop() {};\n\nvar _extractOptions = function _extractOptions(props) {\n  var id = props.id,\n      className = props.className,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      onReady = props.onReady,\n      options = _objectWithoutProperties(props, ['id', 'className', 'onChange', 'onFocus', 'onBlur', 'onReady']);\n\n  return options;\n};\n\nvar capitalized = function capitalized(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nvar Element = function Element(type) {\n  var _class, _temp;\n\n  var hocOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return _temp = _class = function (_React$Component) {\n    _inherits(_class, _React$Component);\n\n    function _class(props, context) {\n      _classCallCheck(this, _class);\n\n      var _this = _possibleConstructorReturn(this, _React$Component.call(this, props, context));\n\n      _this.handleRef = function (ref) {\n        _this._ref = ref;\n      };\n\n      _this._element = null;\n\n      var options = _extractOptions(_this.props);\n      // We keep track of the extracted options on this._options to avoid re-rendering.\n      // (We would unnecessarily re-render if we were tracking them with state.)\n      _this._options = options;\n      return _this;\n    }\n\n    _class.prototype.componentDidMount = function componentDidMount() {\n      var _this2 = this;\n\n      this.context.addElementsLoadListener(function (elements) {\n        var element = elements.create(type, _this2._options);\n        _this2._element = element;\n\n        _this2._setupEventListeners(element);\n\n        element.mount(_this2._ref);\n\n        // Register Element for automatic token / source / paymentMethod creation\n        if (hocOptions.impliedTokenType || hocOptions.impliedSourceType || hocOptions.impliedPaymentMethodType) {\n          _this2.context.registerElement(element, hocOptions.impliedTokenType, hocOptions.impliedSourceType, hocOptions.impliedPaymentMethodType);\n        }\n      });\n    };\n\n    _class.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n      var options = _extractOptions(nextProps);\n      if (Object.keys(options).length !== 0 && !(0, _isEqual2.default)(options, this._options)) {\n        this._options = options;\n        if (this._element) {\n          this._element.update(options);\n        }\n      }\n    };\n\n    _class.prototype.componentWillUnmount = function componentWillUnmount() {\n      if (this._element) {\n        var element = this._element;\n        element.destroy();\n        this.context.unregisterElement(element);\n      }\n    };\n\n    _class.prototype._setupEventListeners = function _setupEventListeners(element) {\n      var _this3 = this;\n\n      element.on('ready', function () {\n        _this3.props.onReady(_this3._element);\n      });\n\n      element.on('change', function (change) {\n        _this3.props.onChange(change);\n      });\n\n      element.on('blur', function () {\n        var _props;\n\n        return (_props = _this3.props).onBlur.apply(_props, arguments);\n      });\n      element.on('focus', function () {\n        var _props2;\n\n        return (_props2 = _this3.props).onFocus.apply(_props2, arguments);\n      });\n    };\n\n    _class.prototype.render = function render() {\n      return _react2.default.createElement('div', {\n        id: this.props.id,\n        className: this.props.className,\n        ref: this.handleRef\n      });\n    };\n\n    return _class;\n  }(_react2.default.Component), _class.propTypes = {\n    id: _propTypes2.default.string,\n    className: _propTypes2.default.string,\n    onChange: _propTypes2.default.func,\n    onBlur: _propTypes2.default.func,\n    onFocus: _propTypes2.default.func,\n    onReady: _propTypes2.default.func\n  }, _class.defaultProps = {\n    id: undefined,\n    className: undefined,\n    onChange: noop,\n    onBlur: noop,\n    onFocus: noop,\n    onReady: noop\n  }, _class.contextTypes = _Elements.elementContextTypes, _class.displayName = capitalized(type) + 'Element', _temp;\n};\n\nexports.default = Element;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar PLAIN_OBJECT_STR = '[object Object]';\n\nvar isEqual = function isEqual(left, right) {\n  if ((typeof left === 'undefined' ? 'undefined' : _typeof(left)) !== 'object' || (typeof right === 'undefined' ? 'undefined' : _typeof(right)) !== 'object') {\n    return left === right;\n  }\n\n  if (left === null || right === null) return left === right;\n\n  var leftArray = Array.isArray(left);\n  var rightArray = Array.isArray(right);\n\n  if (leftArray !== rightArray) return false;\n\n  var leftPlainObject = Object.prototype.toString.call(left) === PLAIN_OBJECT_STR;\n  var rightPlainObject = Object.prototype.toString.call(right) === PLAIN_OBJECT_STR;\n\n  if (leftPlainObject !== rightPlainObject) return false;\n\n  if (!leftPlainObject && !leftArray) return false;\n\n  var leftKeys = Object.keys(left);\n  var rightKeys = Object.keys(right);\n\n  if (leftKeys.length !== rightKeys.length) return false;\n\n  var keySet = {};\n  for (var i = 0; i < leftKeys.length; i += 1) {\n    keySet[leftKeys[i]] = true;\n  }\n  for (var _i = 0; _i < rightKeys.length; _i += 1) {\n    keySet[rightKeys[_i]] = true;\n  }\n  var allKeys = Object.keys(keySet);\n  if (allKeys.length !== leftKeys.length) {\n    return false;\n  }\n\n  var l = left;\n  var r = right;\n  var pred = function pred(key) {\n    return isEqual(l[key], r[key]);\n  };\n\n  return allKeys.every(pred);\n};\n\nexports.default = isEqual;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _shallowEqual = require('../utils/shallowEqual');\n\nvar _shallowEqual2 = _interopRequireDefault(_shallowEqual);\n\nvar _Elements = require('./Elements');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar noop = function noop() {};\n\nvar _extractOptions = function _extractOptions(props) {\n  var id = props.id,\n      className = props.className,\n      onBlur = props.onBlur,\n      onClick = props.onClick,\n      onFocus = props.onFocus,\n      onReady = props.onReady,\n      paymentRequest = props.paymentRequest,\n      options = _objectWithoutProperties(props, ['id', 'className', 'onBlur', 'onClick', 'onFocus', 'onReady', 'paymentRequest']);\n\n  return options;\n};\n\nvar PaymentRequestButtonElement = function (_React$Component) {\n  _inherits(PaymentRequestButtonElement, _React$Component);\n\n  function PaymentRequestButtonElement(props, context) {\n    _classCallCheck(this, PaymentRequestButtonElement);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props, context));\n\n    _this.handleRef = function (ref) {\n      _this._ref = ref;\n    };\n\n    var options = _extractOptions(props);\n    // We keep track of the extracted options on this._options to avoid re-rendering.\n    // (We would unnecessarily re-render if we were tracking them with state.)\n    _this._options = options;\n    return _this;\n  }\n\n  PaymentRequestButtonElement.prototype.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this.context.addElementsLoadListener(function (elements) {\n      _this2._element = elements.create('paymentRequestButton', _extends({\n        paymentRequest: _this2.props.paymentRequest\n      }, _this2._options));\n      _this2._element.on('ready', function () {\n        _this2.props.onReady(_this2._element);\n      });\n      _this2._element.on('focus', function () {\n        var _props;\n\n        return (_props = _this2.props).onFocus.apply(_props, arguments);\n      });\n      _this2._element.on('click', function () {\n        var _props2;\n\n        return (_props2 = _this2.props).onClick.apply(_props2, arguments);\n      });\n      _this2._element.on('blur', function () {\n        var _props3;\n\n        return (_props3 = _this2.props).onBlur.apply(_props3, arguments);\n      });\n      _this2._element.mount(_this2._ref);\n    });\n  };\n\n  PaymentRequestButtonElement.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (this.props.paymentRequest !== nextProps.paymentRequest) {\n      console.warn('Unsupported prop change: paymentRequest is not a customizable property.');\n    }\n    var options = _extractOptions(nextProps);\n    if (Object.keys(options).length !== 0 && !(0, _shallowEqual2.default)(options, this._options)) {\n      this._options = options;\n      this._element.update(options);\n    }\n  };\n\n  PaymentRequestButtonElement.prototype.componentWillUnmount = function componentWillUnmount() {\n    this._element.destroy();\n  };\n\n  PaymentRequestButtonElement.prototype.render = function render() {\n    return _react2.default.createElement('div', {\n      id: this.props.id,\n      className: this.props.className,\n      ref: this.handleRef\n    });\n  };\n\n  return PaymentRequestButtonElement;\n}(_react2.default.Component);\n\nPaymentRequestButtonElement.propTypes = {\n  id: _propTypes2.default.string,\n  className: _propTypes2.default.string,\n  onBlur: _propTypes2.default.func,\n  onClick: _propTypes2.default.func,\n  onFocus: _propTypes2.default.func,\n  onReady: _propTypes2.default.func,\n  paymentRequest: _propTypes2.default.shape({\n    canMakePayment: _propTypes2.default.func.isRequired,\n    on: _propTypes2.default.func.isRequired,\n    show: _propTypes2.default.func.isRequired\n  }).isRequired\n};\nPaymentRequestButtonElement.defaultProps = {\n  id: undefined,\n  className: undefined,\n  onBlur: noop,\n  onClick: noop,\n  onFocus: noop,\n  onReady: noop\n};\nPaymentRequestButtonElement.contextTypes = _Elements.elementContextTypes;\nexports.default = PaymentRequestButtonElement;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar shallowEqual = function shallowEqual(a, b) {\n  var keysA = Object.keys(a);\n  var keysB = Object.keys(b);\n\n  return keysA.length === keysB.length && keysA.every(function (key) {\n    return b.hasOwnProperty(key) && b[key] === a[key];\n  });\n};\n\nexports.default = shallowEqual;","/*\n * Church Tithe WP\n * https://www.churchtithewp.com\n *\n * Licensed under the GPL license.\n *\n * Author: Church Tithe WP\n * Version: 1.0\n * Date: April 18, 2018\n */\n\nwindow.Church_Tithe_WP_Form = class Church_Tithe_WP_Form extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tediting_mode: false,\n\t\t\tediting_lightbox_active: false,\n\t\t\tall_initial_visual_states: {\n\t\t\t\tpayment: {}\n\t\t\t},\n\t\t\tall_current_visual_states: this.props.all_current_visual_states, // This is an object containing the entire visual state for the Single Page App\n\t\t\tmodal_visual_state: this.props.dynamic_settings.modal_visual_state,\n\t\t\tsingle_page_app_base_url: this.props.dynamic_settings.wordpress_permalink_only,\n\t\t\tdom_node: null,\n\n\t\t\tuser_id: null,\n\t\t\tfrontend_nonces: this.props.frontend_nonces\n\t\t};\n\n\t\tthis.get_current_view_class = this.get_current_view_class.bind( this );\n\t\tthis.set_all_current_visual_states = this.set_all_current_visual_states.bind( this );\n\t\tthis.handle_visual_state_change_click_event = this.handle_visual_state_change_click_event.bind( this );\n\n\t}\n\n\tcomponentDidMount() {\n\n\t\t// Set the initial view state based on the initialization props\n\t\tthis.setState( {\n\t\t\tediting_mode: this.props.editing_mode ? true : false,\n\t\t\tunique_settings: this.props.unique_settings,\n\t\t\tdynamic_settings: this.props.dynamic_settings,\n\t\t\tfrontend_nonces: this.props.frontend_nonces,\n\t\t\tall_initial_visual_states: this.props.all_current_visual_states,\n\t\t\tall_current_visual_states: this.props.all_current_visual_states,\n\t\t\tmodal_visual_state: this.props.dynamic_settings.modal_visual_state,\n\t\t\tinitial_modal_visual_state: this.props.dynamic_settings.modal_visual_state\n\t\t}, function() {\n\n\t\t\t// If the URL in the browser's address bar doesn't match what the initial state is for some reason, adjust the browser's history so it's right\n\t\t\t//this.set_all_current_visual_states( this.state.all_initial_visual_states );\n\n\t\t} );\n\n\t\t// Prevent scroll jumps upon back button clicks\n\t\tif ('scrollRestoration' in history) {\n\t\t\thistory.scrollRestoration = 'manual';\n\t\t}\n\n\t\t// Create an event listener to respond to back button clicks\n\t\twindow.addEventListener('popstate', (e) => {\n\t\t\tthis.on_web_history_change( e, this );\n\t\t});\n\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.maybe_refresh_parent_dom_node();\n\n\t\tif ( this.props.unique_settings !== this.state.unique_settings || this.props.dynamic_settings !== this.state.dynamic_settings ) {\n\t\t\tthis.setState( {\n\t\t\t\tunique_settings: this.props.unique_settings,\n\t\t\t\tdynamic_settings: this.props.dynamic_settings,\n\t\t\t\tall_current_visual_states: this.props.all_current_visual_states,\n\t\t\t\tmodal_visual_state: this.props.dynamic_settings.modal_visual_state,\n\t\t\t}, () => {\n\t\t\t\tthis.set_all_current_visual_states( this.state.all_current_visual_states, this.state.modal_visual_state );\n\t\t\t} );\n\t\t}\n\t}\n\n\tmaybe_refresh_parent_dom_node() {\n\n\t\t/*\n\t\tif ( this.state.dom_node !== ReactDOM.findDOMNode(this).parentNode ) {\n\t\t\tthis.setState( {\n\t\t\t\tdom_node: ReactDOM.findDOMNode(this).parentNode\n\t\t\t} );\n\t\t}\n\t\t*/\n\n\t}\n\n\ton_web_history_change( e, this_component ) {\n\n\t\tvar history_state = e.state;\n\n\t\t// If there's no state in the back button, we're in the initial state.\n\t\tif (history_state == null) {\n\t\t\tthis_component.setState( {\n\t\t\t\t'all_current_visual_states': this_component.state.all_initial_visual_states,\n\t\t\t\t'modal_visual_state': this_component.state.initial_modal_visual_state\n\t\t\t} );\n\t\t}\n\t\t// If there is a state in the history, set the current state to that\n\t\telse {\n\t\t\tthis_component.setState( {\n\t\t\t\t'all_current_visual_states': history_state.church_tithe_wp_visual_state,\n\t\t\t\t'modal_visual_state': history_state.ctwpmodal_visual_state\n\t\t\t} );\n\t\t}\n\n\t}\n\n\tget_current_view_class( view_in_question ) {\n\n\t\tvar currently_in_view_class_name = 'church-tithe-wp-current-view';\n\t\tvar hidden_class_name = 'church-tithe-wp-hidden-view';\n\t\tvar current_visual_state = Object.keys(this.state.all_current_visual_states)[0]; // This grabs the name of the the first key, which is the visual state of this component\n\n\t\t// If the current visual state matches the view we are getting the class for\n\t\tif( current_visual_state == view_in_question ) {\n\n\t\t\treturn ' ' + currently_in_view_class_name;\n\n\t\t} else {\n\n\t\t\treturn ' ' + hidden_class_name;\n\n\t\t}\n\n\t}\n\n\tget_featured_image_class() {\n\n\t\tif ( this.state.unique_settings.has_featured_image ) {\n\n\t\t\treturn ' church-tithe-wp-has-featured-image';\n\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\n\t}\n\n\trender_featured_image() {\n\n\t\tif ( this.state.unique_settings.has_featured_image ) {\n\t\t\treturn (\n\t\t\t\t<div className=\"church-tithe-wp-logo\">\n\t\t\t\t\t<div className=\"church-tithe-wp-header-logo-container\">\n\t\t\t\t\t\t<div className=\"church-tithe-wp-header-logo-inner-bevel\"></div>\n\t\t\t\t\t\t<div className=\"church-tithe-wp-header-logo-img\" style={ {\n\t\t\t\t\t\t\tbackgroundImage: 'url(' + this.state.unique_settings.featured_image_url + ')',\n\t\t\t\t\t\t} }></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t}\n\n\tbuild_new_url_path( obj, new_url_path, depth ) {\n\t\tdepth = depth + 1;\n\t\tvar prefix = 1 == depth ? 'ctwp' : '&ctwp';\n\t\tfor (var component_visual_state in obj) {\n\t\t\t\tnew_url_path = this.build_new_url_path(obj[component_visual_state], new_url_path + prefix + depth + '=' + component_visual_state, depth );\n\t\t}\n\t\treturn new_url_path;\n\t}\n\n\thandle_visual_state_change_click_event( new_state, new_modal_state, event ) {\n\t\tthis.set_all_current_visual_states( new_state, new_modal_state );\n\t}\n\n\tset_all_current_visual_states( new_state = false, new_modal_state = false ) {\n\n\t\tvar in_initial_state = false;\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\t// If the URL is an empty object, set it to the initial state\n\t\t\tif ( Object.entries(new_state).length === 0 && new_state.constructor === Object ) {\n\t\t\t\tnew_state = this.state.all_initial_visual_states;\n\t\t\t\tin_initial_state = true;\n\t\t\t}\n\n\t\t\t// If no new state was passed, we're probably just updating the modal state.\n\t\t\tif ( ! new_state ) {\n\t\t\t\tnew_state = this.state.all_current_visual_states;\n\t\t\t}\n\n\t\t\t// If no modal state was passed, we probably are just updating the main state.\n\t\t\tif ( ! new_modal_state ) {\n\t\t\t\tnew_modal_state = this.state.modal_visual_state;\n\t\t\t}\n\n\t\t\tthis.setState( {\n\t\t\t\tall_current_visual_states: new_state,\n\t\t\t\tmodal_visual_state: new_modal_state\n\t\t\t}, () => {\n\n\t\t\t\t// New URL, make sure it handles URLs with and without a trailing slash\n\t\t\t\tif ( this.state.dynamic_settings.wordpress_permalink_only.includes(\"?\") ) {\n\t\t\t\t\tvar new_url_prefix = this.state.dynamic_settings.wordpress_permalink_only + '&';\n\t\t\t\t} else {\n\t\t\t\t\tvar new_url_prefix = this.state.dynamic_settings.wordpress_permalink_only + '?';\n\t\t\t\t}\n\n\t\t\t\tvar new_url = new_url_prefix + this.build_new_url_path( this.state.all_current_visual_states, '', 0 );\n\n\t\t\t\t// If there is a modal open, add it to the end of the URL\n\t\t\t\tif ( Object.keys(this.state.modal_visual_state)[0] ) {\n\t\t\t\t\tnew_url = new_url + '&ctwpmodal=' + Object.keys(this.state.modal_visual_state)[0];\n\t\t\t\t}\n\n\t\t\t\t// Take a snapshot of the current visual state and add it to the web history\n\t\t\t\tif ( in_initial_state ) {\n\t\t\t\t\thistory.pushState({\n\t\t\t\t\t\tchurch_tithe_wp_visual_state: this.state.all_current_visual_states,\n\t\t\t\t\t\tctwpmodal_visual_state: this.state.modal_visual_state\n\t\t\t\t\t}, new_state, this.state.dynamic_settings.wordpress_permalink_only);\n\t\t\t\t} else {\n\t\t\t\t\thistory.pushState({\n\t\t\t\t\t\tchurch_tithe_wp_visual_state: this.state.all_current_visual_states,\n\t\t\t\t\t\tctwpmodal_visual_state: this.state.modal_visual_state\n\t\t\t\t\t}, new_state, new_url);\n\t\t\t\t}\n\n\t\t\t\tresolve( new_state );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\trender() {\n\n\t\t// Checks for HTTPS from the browser\n\t\tif ( window.location.protocol != \"https:\" ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'church-tithe-wp-container' }>\n\t\t\t\t\tYou must have an SSL certificate in order to accept payments on your website. Contact your webhost to have them install an SSL certificate on your website.\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\telse if ( ! this.state.all_current_visual_states || ! this.state.unique_settings ) {\n\t\t\treturn( <Church_Tithe_WP_Spinner /> );\n\t\t}\n\t\telse if (\n\t\t\t! this.state.dynamic_settings.stripe_api_key ||\n\t\t\t! this.state.unique_settings.currency_code\n\t\t) {\n\n\t\t\treturn (\n\t\t\t\t<div className={ 'church-tithe-wp-container' }>\n\t\t\t\t\t<div className={ 'church-tithe-wp-fancy-container church-tithe-wp-payment-view'}>\n\t\t\t\t\t\t<div className=\"church-tithe-wp-component-box\">\n\n\t\t\t\t\t\t\t<header className=\"church-tithe-wp-header\" role=\"banner\">\n\t\t\t\t\t\t\t\t<h1 className=\"church-tithe-wp-header-title\">Complete Set Up</h1>\n\t\t\t\t\t\t\t\t<h2 className={ 'church-tithe-wp-header-subtitle' }>You are almost ready to start accepting payments right here, using Church Tithe WP and Stripe. Click the link below to complete the set-up.</h2>\n\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t<div className=\"church-tithe-wp-payment-form-container\">\n\t\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-payment-box-view' }>\n\t\t\t\t\t\t\t\t\t<a href={ this.state.dynamic_settings.setup_link.replace(/&amp;/g, '&') }>Complete Church Tithe WP Setup</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tvar church_tithe_wp_open_link = false;\n\t\t\tvar modal_array = false;\n\t\t\tvar church_tithe_wp_form = false;\n\n\t\t\tif ( 'in_modal' === this.state.unique_settings.open_style ) {\n\t\t\t\tmodal_array = {\n\t\t\t\t\tctwp: {}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmodal_array = false;\n\t\t\t}\n\n\t\t\tif ( 'text_link' === this.state.unique_settings.mode ) {\n\t\t\t\tchurch_tithe_wp_open_link = (\n\t\t\t\t\t<a className={ 'church-tithe-wp-a-tag' } onClick={ this.handle_visual_state_change_click_event.bind( null, {\n\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\tform: {}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, modal_array ) }>{ this.state.unique_settings.strings.link_text }</a>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( 'button' === this.state.unique_settings.mode ) {\n\t\t\t\tchurch_tithe_wp_open_link = (\n\t\t\t\t\t<button className={ 'button church-tithe-wp-button' } onClick={ this.handle_visual_state_change_click_event.bind( null, {\n\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\tform: {}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, modal_array ) }>{ this.state.unique_settings.strings.link_text }</button>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tchurch_tithe_wp_form = (\n\t\t\t\t<div className={ 'church-tithe-wp-container church-tithe-wp-current-view-is-' + Object.keys(this.state.all_current_visual_states)[0] }>\n\n\t\t\t\t\t<div className={ 'church-tithe-wp-fancy-container church-tithe-wp-payment-view' + this.get_current_view_class( 'payment' ) + this.get_featured_image_class() }>\n\n\t\t\t\t\t\t{ this.render_featured_image() }\n\n\t\t\t\t\t\t<Church_Tithe_WP_Payment_Box\n\t\t\t\t\t\t\tmain_component={ this }\n\t\t\t\t\t\t\tshow_close_button={\n\t\t\t\t\t\t\t\t'button' === Object.keys(this.state.all_initial_visual_states)[0] ||\n\t\t\t\t\t\t\t\t'text_link' === Object.keys(this.state.all_initial_visual_states)[0] ||\n\t\t\t\t\t\t\t\t'in_modal' === this.state.unique_settings.open_style\n\t\t\t\t\t\t\t\t? true : false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={ 'church-tithe-wp-fancy-container church-tithe-wp-manage-payments-view' + this.get_current_view_class( 'manage_payments' ) + this.get_featured_image_class() }>\n\n\t\t\t\t\t\t{ this.render_featured_image() }\n\n\t\t\t\t\t\t<Church_Tithe_WP_Manage_Payments\n\t\t\t\t\t\t\tmain_component={ this }\n\t\t\t\t\t\t\tshow_close_button={\n\t\t\t\t\t\t\t\t'button' === Object.keys(this.state.all_initial_visual_states)[0] ||\n\t\t\t\t\t\t\t\t'text_link' === Object.keys(this.state.all_initial_visual_states)[0] ||\n\t\t\t\t\t\t\t\t'in_modal' === this.state.unique_settings.open_style\n\t\t\t\t\t\t\t\t? true : false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t)\n\n\t\t\tif ( 'in_modal' === this.state.unique_settings.open_style ) {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// The modal used to open inside this component.\n\t\t\t\t\t\t\t// But now this component sits silently in the footer until triggered by an outside event.\n\t\t\t\t\t\t\t//church_tithe_wp_open_link\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Church_Tithe_WP_Modal\n\t\t\t\t\t\t\tmain_component={ this }\n\t\t\t\t\t\t\tslug={ this.props.form_number }\n\t\t\t\t\t\t\tmodal_contents={ church_tithe_wp_form }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ( 'in_place' === this.state.unique_settings.open_style ) {\n\n\t\t\t\tif (\n\t\t\t\t\t'button' === Object.keys(this.state.all_current_visual_states)[0] ||\n\t\t\t\t\t'text_link' === Object.keys(this.state.all_current_visual_states)[0]\n\t\t \t\t) {\n\t\t\t\t\treturn church_tithe_wp_open_link;\n\t\t\t\t}\n\n\t\t\t\treturn church_tithe_wp_form;\n\n\t\t\t}\n\n\t\t\t// Handle the form showing by default\n\t\t\treturn church_tithe_wp_form;\n\t\t}\n\t}\n}\n\nwindow.church_tithe_wp_refresh_a_tithing_element = function church_tithe_wp_refresh_a_tithing_element( church_tithe_wp_element ){\n\n\t// Get the form number for this form\n\tvar form_number = church_tithe_wp_element.getAttribute( 'church-tithe-wp-form-number' );\n\n\t// Get the unique settings to this shortcode\n\tvar unique_shortcode_settings = JSON.parse( document.getElementById( 'church-tithe-wp-element-unique-vars-json-' + form_number ).textContent );\n\tvar dynamic_shortcode_settings = JSON.parse( document.getElementById( 'church-tithe-wp-element-dynamic-vars-json-' + form_number ).textContent );\n\n\tvar top_level_visual_state = 'payment';\n\n\tvar all_default_visual_states = {}\n\n\t//If a default visual state is in the URL, it wins\n\tif ( 'inherit' !== dynamic_shortcode_settings.all_default_visual_states ) {\n\n\t\t// Use the default visual state from the URL\n\t\tall_default_visual_states = dynamic_shortcode_settings.all_default_visual_states;\n\n\t} else {\n\n\t\t// If the shortcode has a mode attached, use it\n\t\tif ( 'form' == unique_shortcode_settings.mode ) {\n\t\t\tall_default_visual_states = {\n\t\t\t\tpayment: {},\n\t\t\t};\n\t\t} else {\n\t\t\tall_default_visual_states = {\n\t\t\t\t[unique_shortcode_settings.mode]: {},\n\t\t\t};\n\t\t}\n\n\t}\n\n\tReactDOM.render( <Church_Tithe_WP_Form\n\t\tkey={ 'church_tithe_wp_button_element_' + form_number }\n\t\tid={ 'church_tithe_wp_button_element_' + form_number }\n\t\tform_number={ form_number }\n\t\tall_current_visual_states={ all_default_visual_states }\n\t\tfrontend_nonces={ church_tithe_wp_js_vars.frontend_nonces }\n\t\tunique_settings={ unique_shortcode_settings }\n\t\tdynamic_settings={ dynamic_shortcode_settings }\n\t/>, church_tithe_wp_element );\n\n}\n\nwindow.church_tithe_wp_refresh_all_tithing_elements = function church_tithe_wp_refresh_all_tithing_elements(){\n\n\tvar church_tithe_wp_element_exists = document.querySelector( '.church-tithe-wp-element' );\n\n\tif ( church_tithe_wp_element_exists ) {\n\n\t\tvar church_tithe_wp_elements = document.querySelectorAll( '.church-tithe-wp-element' );\n\n\t\tvar counter = 0;\n\n\t\t// Loop through each Church Tithe WP element on the page\n\t\tchurch_tithe_wp_elements.forEach(function( church_tithe_wp_element ) {\n\n\t\t\t// Get the form number for this form\n\t\t\tvar form_number = church_tithe_wp_element.getAttribute( 'church-tithe-wp-form-number' );\n\n\t\t\tchurch_tithe_wp_refresh_a_tithing_element( church_tithe_wp_element );\n\t\t});\n\t}\n}\nchurch_tithe_wp_refresh_all_tithing_elements();\n\nwindow.church_tithe_wp_set_modal_to_open = function church_tithe_wp_set_modal_to_open( form_number ) {\n\n\tvar church_tithe_wp_element_exists = document.querySelector( '.church-tithe-wp-element' );\n\n\t// Set all tithe jar forms on the page to have their modals closed, then we'll open this one.\n\tif ( church_tithe_wp_element_exists ) {\n\n\t\tvar church_tithe_wp_elements = document.querySelectorAll( '.church-tithe-wp-element' );\n\n\t\tvar counter = 0;\n\n\t\t// Loop through each Church Tithe WP element on the page\n\t\tchurch_tithe_wp_elements.forEach(function( church_tithe_wp_element ) {\n\n\t\t\t// Get the form number for this form\n\t\t\tvar form_number = church_tithe_wp_element.getAttribute( 'church-tithe-wp-form-number' );\n\n\t\t\t// Get the unique settings to this shortcode\n\t\t\tvar dynamic_shortcode_settings_container = document.getElementById( 'church-tithe-wp-element-dynamic-vars-json-' + form_number );\n\t\t\tvar dynamic_shortcode_settings = JSON.parse( dynamic_shortcode_settings_container.textContent );\n\n\t\t\t// Set the status of the modal to be closed\n\t\t\tdynamic_shortcode_settings.modal_visual_state = {};\n\n\t\t\t// Rewrite the JSON to the DOM\n\t\t\tdynamic_shortcode_settings_container.textContent = JSON.stringify( dynamic_shortcode_settings );\n\t\t} );\n\n\t\t// Refresh all React payment form components on the page\n\t\tchurch_tithe_wp_refresh_all_tithing_elements();\n\n\t}\n\n\tvar element_holding_settings = document.getElementById( 'church-tithe-wp-element-dynamic-vars-json-' + form_number );\n\n\t// Get the unique settings to this shortcode\n\tvar dynamic_shortcode_settings = JSON.parse( element_holding_settings.innerHTML );\n\n\t// Set the state of the form to be \"payment/form\"\n\tdynamic_shortcode_settings.all_default_visual_states = {\n\t\tpayment: {\n\t\t\tform: {}\n\t\t}\n\t};\n\n\t// Set the status of the modal to be open\n\tdynamic_shortcode_settings.modal_visual_state = {\n\t\t[form_number]: {}\n\t};\n\n\t// Rewrite the JSON to the DOM\n\telement_holding_settings.textContent = JSON.stringify( dynamic_shortcode_settings );\n\n\tvar church_tithe_wp_element = document.getElementById( 'church-tithe-wp-element-' + form_number );\n\n\t// Refresh all React payment form components on the page\n\tchurch_tithe_wp_refresh_a_tithing_element( church_tithe_wp_element );\n}\n","window.Church_Tithe_WP_Card_Icon = class Church_Tithe_WP_Card_Icon extends React.Component{\n\n\trender_visa(){\n\t\treturn(\n\t\t\t<div className={ \"church-tithe-wp-card-icon\" }>\n\t\t\t\t<svg className=\"SVGInline-svg SVGInline--cleaned-svg SVG-svg BrandIcon-svg BrandIcon--size--20-svg\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fillRule=\"evenodd\"><path d=\"M0 0h32v32H0z\" fill=\"#00579f\"></path><g fill=\"#fff\" fillRule=\"nonzero\"><path d=\"M13.823 19.876H11.8l1.265-7.736h2.023zm7.334-7.546a5.036 5.036 0 0 0-1.814-.33c-1.998 0-3.405 1.053-3.414 2.56-.016 1.11 1.007 1.728 1.773 2.098.783.379 1.05.626 1.05.963-.009.518-.633.757-1.216.757-.808 0-1.24-.123-1.898-.411l-.267-.124-.283 1.737c.475.213 1.349.403 2.257.411 2.123 0 3.505-1.037 3.521-2.641.008-.881-.532-1.556-1.698-2.107-.708-.354-1.141-.593-1.141-.955.008-.33.366-.667 1.165-.667a3.471 3.471 0 0 1 1.507.297l.183.082zm2.69 4.806l.807-2.165c-.008.017.167-.452.266-.74l.142.666s.383 1.852.466 2.239h-1.682zm2.497-4.996h-1.565c-.483 0-.85.14-1.058.642l-3.005 7.094h2.123l.425-1.16h2.597c.059.271.242 1.16.242 1.16h1.873zm-16.234 0l-1.982 5.275-.216-1.07c-.366-1.234-1.515-2.575-2.797-3.242l1.815 6.765h2.14l3.18-7.728z\"></path><path d=\"M6.289 12.14H3.033L3 12.297c2.54.641 4.221 2.189 4.912 4.049l-.708-3.556c-.116-.494-.474-.633-.915-.65z\"></path></g></g></svg>\n\t\t\t</div>\n\t\t)\n\t}\n\n\trender_mastercard() {\n\t\treturn(\n\t\t\t<div className={ \"church-tithe-wp-card-icon\" }>\n\t\t\t\t<svg className=\"SVGInline-svg SVGInline--cleaned-svg SVG-svg BrandIcon-svg BrandIcon--size--20-svg\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fillRule=\"evenodd\"><path d=\"M0 0h32v32H0z\" fill=\"#000\"></path><g fillRule=\"nonzero\"><path d=\"M13.02 10.505h5.923v10.857H13.02z\" fill=\"#ff5f00\"></path><path d=\"M13.396 15.935a6.944 6.944 0 0 1 2.585-5.43c-2.775-2.224-6.76-1.9-9.156.745s-2.395 6.723 0 9.368 6.38 2.969 9.156.744a6.944 6.944 0 0 1-2.585-5.427z\" fill=\"#eb001b\"></path><path d=\"M26.934 15.935c0 2.643-1.48 5.054-3.81 6.21s-5.105.851-7.143-.783a6.955 6.955 0 0 0 2.587-5.428c0-2.118-.954-4.12-2.587-5.429 2.038-1.633 4.81-1.937 7.142-.782s3.811 3.566 3.811 6.21z\" fill=\"#f79e1b\"></path></g></g></svg>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_amex(){\n\t\treturn(\n\t\t\t<div className={ \"church-tithe-wp-card-icon\" }>\n\t\t\t\t<svg className=\"SVGInline-svg SVGInline--cleaned-svg SVG-svg BrandIcon-svg BrandIcon--size--20-svg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\"><g fill=\"none\" fillRule=\"evenodd\"><path fill=\"#0193CE\" d=\"M0 0h32v32H0z\"></path><path d=\"M17.79 18.183h4.29l1.31-1.51 1.44 1.51h1.52l-2.2-2.1 2.21-2.27h-1.52l-1.44 1.51-1.26-1.5H17.8v-.85h4.68l.92 1.18 1.09-1.18h4.05l-3.04 3.11 3.04 2.94h-4.05l-1.1-1.17-.92 1.17h-4.68v-.84zm3.67-.84h-2.53v-.84h2.36v-.83h-2.36v-.84h2.7l1.01 1.26-1.18 1.25zm-14.5 1.68h-3.5l2.97-6.05h2.8l.35.67v-.67h3.5l.7 1.68.7-1.68h3.31v6.05h-2.63v-.84l-.34.84h-2.1l-.35-.84v.84H8.53l-.35-1h-.87l-.35 1zm9.96-.84v-4.37h-1.74l-1.4 3.03-1.41-3.03h-1.74v4.04l-2.1-4.04h-1.4l-2.1 4.37h1.23l.35-1h2.27l.35 1h2.43v-3.36l1.6 3.36h1.05l1.57-3.36v3.36h1.04zm-8.39-1.85l-.7-1.85-.87 1.85h1.57z\" fill=\"#FFF\"></path></g></svg>\n\t\t\t</div>\n\t\t)\n\t}\n\n\trender() {\n\n\t\tif ( 'visa' === this.props.brand ) {\n\t\t\treturn(\n\t\t\t\tthis.render_visa()\n\t\t\t);\n\t\t}\n\n\t\tif ( 'mastercard' === this.props.brand ) {\n\t\t\treturn(\n\t\t\t\tthis.render_mastercard()\n\t\t\t);\n\t\t}\n\n\t\tif ( 'amex' === this.props.brand ) {\n\t\t\treturn(\n\t\t\t\tthis.render_amex()\n\t\t\t);\n\t\t}\n\n\t\treturn(\n\t\t\tthis.props.brand\n\t\t);\n\n\n\t}\n}\nexport default Church_Tithe_WP_Card_Icon;\n","window.Church_Tithe_WP_Email_Field = class Church_Tithe_WP_Email_Field extends React.Component {\n\n\tconstructor( props ) {\n\t\tsuper(props);\n\n\t\tthis.state= {\n\t\t\tinput_value: '',\n\t\t};\n\n\t\tthis.get_input_field_class = this.get_input_field_class.bind( this );\n\t\tthis.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n\t\tthis.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n\t};\n\n\tcomponentDidMount() {\n\n\t\tif ( this.props.initial_value ) {\n\t\t\tthis.setState( {\n\t\t\t\tinitial_input_value: this.props.initial_value,\n\t\t\t\tinput_value: this.props.initial_value\n\t\t\t}, () => {\n\t\t\t\t// Validate an email field\n\t\t\t\tif ( ! church_tithe_wp_validate_email( this.state.input_value ) ) {\n\t\t\t\t\tvar is_validated = false;\n\t\t\t\t} else {\n\t\t\t\t\tvar is_validated = true;\n\t\t\t\t}\n\n\t\t\t\t// Pass the validation status back to the parent.\n\t\t\t\tthis.props.set_validation_and_value_of_field(\n\t\t\t\t\tthis.props.state_validation_variable_name,\n\t\t\t\t\tis_validated,\n\t\t\t\t\tthis.props.state_value_variable_name,\n\t\t\t\t\tthis.state.input_value\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\t// If the initial input value has changed\n\t\tif ( this.props.initial_value && this.props.initial_value !== this.state.initial_input_value ) {\n\t\t\tthis.setState( {\n\t\t\t\tinitial_input_value: this.props.initial_value,\n\t\t\t\tinput_value: this.props.initial_value\n\t\t\t}, () => {\n\t\t\t\t// Validate an email field\n\t\t\t\tif ( ! church_tithe_wp_validate_email( this.state.input_value ) ) {\n\t\t\t\t\tvar is_validated = false;\n\t\t\t\t} else {\n\t\t\t\t\tvar is_validated = true;\n\t\t\t\t}\n\n\t\t\t\t// Pass the validation status back to the parent.\n\t\t\t\tthis.props.set_validation_and_value_of_field(\n\t\t\t\t\tthis.props.state_validation_variable_name,\n\t\t\t\t\tis_validated,\n\t\t\t\t\tthis.props.state_value_variable_name,\n\t\t\t\t\tthis.state.input_value\n\t\t\t\t);\n\n\t\t\t} );\n\t\t}\n\t}\n\n\tget_current_instruction_key() {\n\n\t\t// Handle the instruction only if the form containing this field has been submitted\n\t\tif ( this.props.form_validation_attempted ) {\n\n\t\t\t// If the form containing this field has not yet been submitted\n\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\treturn 'blank';\n\t\t\t}\n\n\t\t\tif ( ! church_tithe_wp_validate_email( this.state.input_value ) ) {\n\t\t\t\treturn 'not_an_email_address';\n\t\t\t} else {\n\t\t\t\treturn 'success';\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\treturn 'initial';\n\t\t\t}\n\t\t\tif ( ! church_tithe_wp_validate_email( this.state.input_value ) ) {\n\t\t\t\treturn 'initial';\n\t\t\t} else {\n\t\t\t\treturn 'success';\n\t\t\t}\n\n\t\t}\n\t}\n\n\tget_input_instruction_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' church-tithe-wp-instruction-error';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_field_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' church-tithe-wp-input-success';\n\t\t\t}\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' church-tithe-wp-input-error';\n\t\t\t}\n\t\t\tif ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_instruction_message() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\treturn this.props.instruction_codes[current_instruction].instruction_message;\n\t\t}\n\t};\n\n\thandle_input_change( event ) {\n\n\t\t// Validate an email field\n\t\tif ( ! church_tithe_wp_validate_email( event.target.value ) ) {\n\t\t\tvar is_validated = false;\n\t\t} else {\n\t\t\tvar is_validated = true;\n\t\t}\n\n\t\t// Pass the validation status back to the parent.\n\t\tthis.props.set_validation_and_value_of_field(\n\t\t\tthis.props.state_validation_variable_name,\n\t\t\tis_validated,\n\t\t\tthis.props.state_value_variable_name,\n\t\t\tevent.target.value\n\t\t);\n\n\t\tif ( this.props.form_validation_attempted ) {\n\t\t\tvar this_component = this;\n\t\t\t// Wait for the state to be set in the parent\n\t\t\tsetTimeout( function() {\n\t\t\t\tthis_component.props.validate_form( true );\n\t\t\t}, 10 );\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tinput_value: event.target.value\n\t\t} );\n\n\t};\n\n\trender(){\n\n\t\tvar inputProps = {};\n\n\t\tif ( this.props.type ) {\n\t\t\tinputProps['type'] = this.props.type;\n\t\t}\n\n\t\tif ( this.props.class_name ) {\n\t\t\tinputProps['className'] = this.props.class_name + this.get_input_field_class();\n\t\t} else {\n\t\t\tinputProps['className'] = this.get_input_field_class();\n\t\t}\n\n\t\tif ( this.props.name ) {\n\t\t\tinputProps['name'] = this.props.name;\n\t\t}\n\n\t\tinputProps['onChange'] = this.handle_input_change.bind( this );\n\t\tinputProps['onBlur'] = this.handle_input_change.bind( this );\n\n\t\tif ( this.props.placeholder ) {\n\t\t\tinputProps['placeholder'] = this.props.placeholder;\n\t\t}\n\n\t\tinputProps['value'] = this.state.input_value;\n\n\t\tif ( this.props.step ) {\n\t\t\tinputProps['step'] = this.props.step;\n\t\t}\n\n\t\tif ( this.props.disabled ) {\n\t\t\tinputProps['disabled'] = this.props.disabled;\n\t\t}\n\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<label>\n\t\t\t\t\t<div className={ 'church-tithe-wp-input-instruction' + this.get_input_instruction_class() }>{ this.get_input_instruction_message() }</div>\n\t\t\t\t\t<input { ...inputProps } />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t)\n\t}\n\n};\nexport default Church_Tithe_WP_Email_Field;\n","window.Church_Tithe_WP_Input_Field = class Church_Tithe_WP_Input_Field extends React.Component {\n\n    constructor( props ) {\n        super(props);\n\n        this.state= {\n            input_value: '',\n        };\n\n        this.get_input_field_class = this.get_input_field_class.bind( this );\n        this.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n        this.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n    };\n\n\t\tcomponentDidMount() {\n\n\t\t\tif ( this.props.initial_value ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tinitial_input_value: this.props.initial_value,\n\t\t\t\t\tinput_value: this.props.initial_value\n\t\t\t\t}, () => {\n\t\t\t\t\t// Validate that the field has a value\n\t\t\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\t\t\tvar is_validated = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar is_validated = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Pass the validation status back to the parent.\n\t\t\t\t\tthis.props.set_validation_and_value_of_field(\n\t\t\t\t\t\tthis.props.state_validation_variable_name,\n\t\t\t\t\t\tis_validated,\n\t\t\t\t\t\tthis.props.state_value_variable_name,\n\t\t\t\t\t\tthis.state.input_value\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tcomponentDidUpdate() {\n\n\t\t\t// If the initial input value has changed\n\t\t\tif ( this.props.initial_value && this.props.initial_value !== this.state.initial_input_value ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tinitial_input_value: this.props.initial_value,\n\t\t\t\t\tinput_value: this.props.initial_value\n\t\t\t\t}, () => {\n\t\t\t\t\t// Validate that the field has a value\n\t\t\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\t\t\tvar is_validated = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar is_validated = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Pass the validation status back to the parent.\n\t\t\t\t\tthis.props.set_validation_and_value_of_field(\n\t\t\t\t\t\tthis.props.state_validation_variable_name,\n\t\t\t\t\t\tis_validated,\n\t\t\t\t\t\tthis.props.state_value_variable_name,\n\t\t\t\t\t\tthis.state.input_value\n\t\t\t\t\t);\n\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n    get_current_instruction_key() {\n\n        // Handle the instruction only if the form containing this field has been submitted\n        if ( this.props.form_validation_attempted ) {\n\n            // If the form containing this field has been submitted\n            if ( ! this.state.input_value ) {\n                return 'empty';\n            }\n            if ( this.state.input_value ) {\n                return 'success';\n            }\n\n        } else {\n            // If the form containing this field has not yet been submitted\n            if ( ! this.state.input_value ) {\n                return 'initial';\n            }\n            if ( this.state.input_value ) {\n                return 'success';\n            }\n        }\n    }\n\n    get_input_instruction_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-instruction-error';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_field_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-input-success';\n            }\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-input-error';\n            }\n            if ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return '';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_instruction_message() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            return this.props.instruction_codes[current_instruction].instruction_message;\n        }\n    };\n\n    handle_input_change( event ) {\n\n        // Set the validation of this field\n        if ( ! event.target.value ) {\n            var is_validated = false;\n        } else {\n            var is_validated = true;\n        }\n\n        // Pass the validation status back to the parent.\n        this.props.set_validation_and_value_of_field(\n            this.props.state_validation_variable_name,\n            is_validated,\n            this.props.state_value_variable_name,\n            event.target.value\n        );\n\n        if ( this.props.form_validation_attempted ) {\n            var this_component = this;\n            // Wait for the state to be set in the parent\n            setTimeout( function() {\n                this_component.props.validate_form( true );\n            }, 10 );\n        }\n\n        this.setState( {\n            input_value: event.target.value\n        } );\n\n    };\n\n    render(){\n\n        var inputProps = {};\n\n        if ( this.props.type ) {\n            inputProps['type'] = this.props.type;\n        }\n\n        if ( this.props.class_name ) {\n            inputProps['className'] = this.props.class_name + this.get_input_field_class();\n        } else {\n            inputProps['className'] = this.get_input_field_class();\n        }\n\n        if ( this.props.name ) {\n            inputProps['name'] = this.props.name;\n        }\n\n        inputProps['onChange'] = this.handle_input_change.bind( this );\n\n        if ( this.props.placeholder ) {\n            inputProps['placeholder'] = this.props.placeholder;\n        }\n\n        inputProps['value'] = this.state.input_value;\n\n        if ( this.props.step ) {\n            inputProps['step'] = this.props.step;\n        }\n\n        if ( this.props.disabled ) {\n            inputProps['disabled'] = this.props.disabled;\n        }\n\n        return(\n            <div>\n                <label>\n                    <div className={ 'church-tithe-wp-input-instruction' + this.get_input_instruction_class() }>{ this.get_input_instruction_message() }</div>\n                    { this.props.output_before_field }<input { ...inputProps } />{ this.props.after_before_field }\n                </label>\n\n            </div>\n        )\n    }\n\n};\n\nwindow.Church_Tithe_WP_Input_Field_Instruction = class Church_Tithe_WP_Input_Field_Instruction extends React.Component {\n\n    constructor( props ) {\n        super(props);\n\n        this.get_input_field_class = this.get_input_field_class.bind( this );\n        this.set_current_input_field_instruction = this.set_current_input_field_instruction.bind( this );\n        this.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n        this.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n    };\n\n    set_current_input_field_instruction( field_name, instruction_name ) {\n\n        this.state.input_fields[field_name].current_instruction = value;\n\n        this.setState( {\n            input_fields: this.state.input_fields\n        } );\n    };\n\n    get_input_instruction_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.props.current_instruction;\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-instruction-error';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_field_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.props.current_instruction;\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-input-error';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_instruction_message() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.props.current_instruction;\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            return this.props.instruction_codes[current_instruction].instruction_message;\n        }\n    };\n\n    render(){\n        return(\n            <div className={ 'church-tithe-wp-input-instruction' + this.get_input_instruction_class() }>{ this.get_input_instruction_message() }</div>\n        )\n    }\n\n};\nexport default Church_Tithe_WP_Input_Field;\n","window.Church_Tithe_WP_Radio_Field = class Church_Tithe_WP_Radio_Field extends React.Component {\n\n\tconstructor( props ) {\n\t\tsuper(props);\n\n\t\tthis.state= {\n\t\t\tinput_value: '',\n\t\t};\n\n\t\tthis.get_input_field_class = this.get_input_field_class.bind( this );\n\t\tthis.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n\t\tthis.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n\t};\n\n\tcomponentDidMount() {\n\n\t\tfor (var key in this.props.radio_buttons) {\n\t\t\tif ( this.props.radio_buttons[key].selected ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tinput_value: key\n\t\t\t\t}, function() {\n\t\t\t\t\t// Pass the default value back to the parent\n\t\t\t\t\tthis.props.set_validation_and_value_of_field(\n\t\t\t\t\t\tthis.props.state_validation_variable_name,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tthis.props.state_value_variable_name,\n\t\t\t\t\t\tthis.state.input_value\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tget_current_instruction_key() {\n\n\t\t// Handle the instruction only if the form containing this field has been submitted\n\t\tif ( this.props.form_validation_attempted ) {\n\n\t\t\t// If the form containing this field has been submitted\n\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\treturn 'empty';\n\t\t\t}\n\t\t\tif ( this.state.input_value ) {\n\t\t\t\treturn 'success';\n\t\t\t}\n\n\t\t} else {\n\t\t\t// If the form containing this field has not yet been submitted\n\t\t\tif ( ! this.state.input_value ) {\n\t\t\t\treturn 'initial';\n\t\t\t}\n\t\t\tif ( this.state.input_value ) {\n\t\t\t\treturn 'success';\n\t\t\t}\n\t\t}\n\t}\n\n\tget_input_instruction_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' church-tithe-wp-instruction-error';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_field_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' church-tithe-wp-input-success';\n\t\t\t}\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' church-tithe-wp-input-error';\n\t\t\t}\n\t\t\tif ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_instruction_message() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\treturn this.props.instruction_codes[current_instruction].instruction_message;\n\t\t}\n\t};\n\n\thandle_input_change( event ) {\n\n\t\t// Set the validation of this field\n\t\tif ( ! event.target.value ) {\n\t\t\tvar is_validated = false;\n\t\t} else {\n\t\t\tvar is_validated = true;\n\t\t}\n\n\t\t// Pass the validation status back to the parent.\n\t\tthis.props.set_validation_and_value_of_field(\n\t\t\tthis.props.state_validation_variable_name,\n\t\t\tis_validated,\n\t\t\tthis.props.state_value_variable_name,\n\t\t\tevent.target.value\n\t\t);\n\n\t\tif ( this.props.form_validation_attempted ) {\n\t\t\tvar this_component = this;\n\t\t\t// Wait for the state to be set in the parent\n\t\t\tsetTimeout( function() {\n\t\t\t\tthis_component.props.validate_form( true );\n\t\t\t}, 10 );\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tinput_value: event.target.value\n\t\t} );\n\n\t};\n\n\trender(){\n\n\t\tvar inputProps = {};\n\n\t\tif ( this.props.type ) {\n\t\t\tinputProps['type'] = this.props.type;\n\t\t}\n\n\t\tif ( this.props.class_name ) {\n\t\t\tinputProps['className'] = this.props.class_name + this.get_input_field_class();\n\t\t} else {\n\t\t\tinputProps['className'] = this.get_input_field_class();\n\t\t}\n\n\t\tif ( this.props.name ) {\n\t\t\tinputProps['name'] = this.props.name;\n\t\t}\n\n\t\tinputProps['onChange'] = this.handle_input_change.bind( this );\n\n\t\tinputProps['value'] = this.state.input_value;\n\n\t\tif ( this.props.disabled ) {\n\t\t\tinputProps['disabled'] = this.props.disabled;\n\t\t}\n\n\t\tvar mapper = [];\n\n\t\t// This lets us loop through the object\n\t\tfor (var key in this.props.radio_buttons) {\n\n\t\t\tmapper.push(\n\t\t\t\t<div key={ key } className={ \"church-tithe-wp-radio-button-container\" + ( key == this.state.input_value ? ' church-tithe-wp-radio-current' : '' ) }>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<div className=\"church-tithe-wp-radio-button-outer\">\n\t\t\t\t\t\t\t<div className=\"church-tithe-wp-radio-button-inner\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t{ ...inputProps }\n\t\t\t\t\t\t\t\t\tvalue={ key }\n\t\t\t\t\t\t\t\t\tchecked={ key == this.state.input_value ? true : false }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"church-tithe-wp-radio-button-after\">\n\t\t\t\t\t\t\t\t\t{ this.props.radio_buttons[key].after_output }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t)\n\n\t\t}\n\n\t\t// This lets us output the buttons one by one\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t<div className={ 'church-tithe-wp-input-instruction' + this.get_input_instruction_class() }>{ this.get_input_instruction_message() }</div>\n\t\t\t<div className=\"church-tithe-wp-radio-buttons-container\">\n\t\t\t{\n\t\t\t\tmapper.map((radio_buttons, index) => {\n\t\t\t\t\treturn radio_buttons;\n\t\t\t\t})\n\t\t\t}\n\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t)\n\n\t}\n\n};\nexport default Church_Tithe_WP_Radio_Field;\n","import React from 'react';\nimport {CardElement} from 'react-stripe-elements';\nimport {CardNumberElement} from 'react-stripe-elements';\nimport {CardExpiryElement} from 'react-stripe-elements';\nimport {CardCvcElement} from 'react-stripe-elements';\nimport {PostalCodeElement} from 'react-stripe-elements';\n\nwindow.Church_Tithe_WP_Stripe_All_In_One_Field = class Church_Tithe_WP_Stripe_All_In_One_Field extends React.Component {\n\n\tconstructor( props ) {\n\t\tsuper(props);\n\n\t\tthis.state= {\n\t\t\tstripe_card_error_code: null\n\t\t};\n\n\t\tthis.get_input_field_class = this.get_input_field_class.bind( this );\n\t\tthis.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n\t\tthis.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n\t\tthis.handle_cc_validation = this.handle_cc_validation.bind( this );\n\t};\n\n\tcomponentDidUpdate(){\n\t\tif ( this.props.stripe_card_error_code !== this.state.stripe_card_error_code ) {\n\t\t\tthis.setState( {\n\t\t\t\tstripe_card_error_code: this.props.stripe_card_error_code\n\t\t\t} );\n\t\t}\n\t}\n\n\tget_current_instruction_key() {\n\n\t\t// Handle the instruction only if the form containing this field has been submitted\n\t\tif ( this.props.form_validation_attempted ) {\n\n\t\t\tif ( ! this.state.stripe_card_error_code || 'none' == this.state.stripe_card_error_code ) {\n\t\t\t\treturn 'success';\n\t\t\t}\n\t\t\tif ( this.state.stripe_card_error_code ) {\n\t\t\t\treturn this.state.stripe_card_error_code;\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( ! this.state.stripe_card_error_code || 'none' == this.state.stripe_card_error_code ) {\n\t\t\t\treturn 'success';\n\t\t\t}\n\t\t\tif ( this.state.stripe_card_error_code ) {\n\t\t\t\treturn 'initial';\n\t\t\t}\n\t\t}\n\t}\n\n\tget_input_instruction_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' church-tithe-wp-instruction-error';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_field_class() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\tif ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' church-tithe-wp-input-success';\n\t\t\t}\n\t\t\tif ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn ' church-tithe-wp-input-error';\n\t\t\t}\n\t\t\tif ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\n\t};\n\n\tget_input_instruction_message() {\n\n\t\t// Get the current instruction for this field\n\t\tvar current_instruction = this.get_current_instruction_key();\n\n\t\tif ( this.props.instruction_codes[current_instruction] ) {\n\t\t\treturn this.props.instruction_codes[current_instruction].instruction_message;\n\t\t} else {\n\t\t\treturn 'Please check the credit card fields';\n\t\t}\n\t};\n\n\thandle_cc_validation() {\n\n\t\t// Pass the postal code up to the parent component.\n\t\tthis.props.card_form.setState( {\n\t\t\tpostal_code: this.state.card_zip_code,\n\t\t\tstripe_elements_fields_complete:  this.state.stripe_element ? this.state.stripe_element.complete : false\n\t\t}, () => {\n\n\t\t\t// If the card form has been submitted, that means errors are probably showing. So we should try updating those errors on every keystroke now.\n\t\t\tif ( this.props.form_validation_attempted ) {\n\n\t\t\t\t// Check with Stripe to see if the data entered is a valid credit card.\n\t\t\t\tthis.props.create_stripe_source().then( () => {\n\n\t\t\t\t\t// If it is a valid credit card, set the instructions above the field to be in their original state.\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tstripe_card_error_code: 'success'\n\t\t\t\t\t} );\n\t\t\t\t} ).catch( ( error ) => {\n\n\t\t\t\t\t// But if it is not a valid credit card, set the instructions to be the error code which we were given by the create_stripe_source function.\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tstripe_card_error_code: error\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\t\t\t}\n\n\t\t});\n\t}\n\n\thandle_postal_code_change( event ) {\n\n\t\tthis.setState( {\n\t\t\tcard_zip_code: event.target.value\n\t\t}, () => {\n\t\t\tthis.handle_cc_validation();\n\t\t} );\n\n\t}\n\n\thandle_input_change( element, all_in_one_mode ) {\n\n\t\tvar credit_card_was_fully_filled_out = false;\n\n\t\tthis.setState( {\n\t\t\tstripe_element: element,\n\t\t}, () => {\n\t\t\t// If we are pulling the zip code from the all-in-one field\n\t\t\tif ( all_in_one_mode ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcard_zip_code: element.value.postalCode\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.handle_cc_validation();\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.handle_cc_validation();\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\tmaybe_render_all_in_one_field() {\n\n\t\tconst createOptions = (fontSize) => {\n\t\t\treturn {\n\t\t\t\tstyle: {\n\t\t\t\t\tbase: {\n\t\t\t\t\t\tfontSize,\n\t\t\t\t\t\tcolor: '#424770',\n\t\t\t\t\t\tletterSpacing: '0.025em',\n\t\t\t\t\t\tfontFamily: 'Source Code Pro, Menlo, monospace',\n\t\t\t\t\t\t'::placeholder': {\n\t\t\t\t\t\t\tcolor: '#aab7c4',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tinvalid: {\n\t\t\t\t\t\tcolor: '#9e2146',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t};\n\n\t\tif ( ! this.props.disabled ) {\n\t\t\treturn(\n\t\t\t\t<CardElement\n\t\t\t\t{...createOptions(this.props.fontSize) }\n\t\t\t\tonChange={ (element) => this.handle_input_change(element, true) }\n\t\t\t\t/>\n\t\t\t)\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tmaybe_render_all_in_one_field_mobile() {\n\n\t\tif ( ! this.props.disabled ) {\n\t\t\treturn(\n\t\t\t\t<CardElement\n\t\t\t\tstyle={{base: {fontSize: '19px'}}}\n\t\t\t\tonChange={ (element) => this.handle_input_change(element, true) }\n\t\t\t\t/>\n\t\t\t)\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tmaybe_render_multi_field_cc_form() {\n\n\t\tif ( ! this.props.disabled ) {\n\t\t\treturn(\n\t\t\t\t<div className='church-tithe-wp-cc-multi-field'>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"church-tithe-wp-cc-multi-field-input-area\">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<div className=\"church-tithe-wp-cc-form-icon church-tithe-wp-credit-card-icon\">\n\t\t\t\t\t\t\t\t\t<svg role=\"img\" className=\"Icon\" fill=\"#2b2b2b\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t\t\t\t\t\t<title>Credit Card</title>\n\t\t\t\t\t\t\t\t\t\t<path fillRule=\"evenodd\" transform=\"translate(8, 10)\" d=\"M2.00585866,0 C0.898053512,0 0,0.900176167 0,1.99201702 L0,9.00798298 C0,10.1081436 0.897060126,11 2.00585866,11 L11.9941413,11 C13.1019465,11 14,10.0998238 14,9.00798298 L14,1.99201702 C14,0.891856397 13.1029399,0 11.9941413,0 L2.00585866,0 Z M2.00247329,1 C1.44882258,1 1,1.4463114 1,1.99754465 L1,9.00245535 C1,9.55338405 1.45576096,10 2.00247329,10 L11.9975267,10 C12.5511774,10 13,9.5536886 13,9.00245535 L13,1.99754465 C13,1.44661595 12.544239,1 11.9975267,1 L2.00247329,1 Z M1,3 L1,5 L13,5 L13,3 L1,3 Z M11,8 L11,9 L12,9 L12,8 L11,8 Z M9,8 L9,9 L10,9 L10,8 L9,8 Z M9,8\"></path>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<CardNumberElement\n\t\t\t\t\t\t\t\t\tstyle={{base: {fontSize: '19px'}}}\n\t\t\t\t\t\t\t\t\tonChange={ (element) => this.handle_input_change(element, false) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"church-tithe-wp-cc-multi-field-input-area\">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<div className=\"church-tithe-wp-cc-form-icon church-tithe-wp-calendar-icon\">\n\t\t\t\t\t\t\t\t\t<svg role=\"img\" className=\"Icon\" fill=\"#2b2b2b\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t\t\t\t\t\t<title>Calendar</title>\n\t\t\t\t\t\t\t\t\t\t<path fillRule=\"evenodd\" transform=\"translate(8, 9)\" d=\"M2.0085302,1 C0.899249601,1 0,1.90017617 0,2.99201702 L0,10.007983 C0,11.1081436 0.901950359,12 2.0085302,12 L9.9914698,12 C11.1007504,12 12,11.0998238 12,10.007983 L12,2.99201702 C12,1.8918564 11.0980496,1 9.9914698,1 L2.0085302,1 Z M1.99539757,4 C1.44565467,4 1,4.43788135 1,5.00292933 L1,9.99707067 C1,10.5509732 1.4556644,11 1.99539757,11 L10.0046024,11 C10.5543453,11 11,10.5621186 11,9.99707067 L11,5.00292933 C11,4.44902676 10.5443356,4 10.0046024,4 L1.99539757,4 Z M3,1 L3,2 L4,2 L4,1 L3,1 Z M8,1 L8,2 L9,2 L9,1 L8,1 Z M3,0 L3,1 L4,1 L4,0 L3,0 Z M8,0 L8,1 L9,1 L9,0 L8,0 Z M8,0\"></path>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<CardExpiryElement\n\t\t\t\t\t\t\t\tstyle={{base: {fontSize: '19px'}}}\n\t\t\t\t\t\t\t\tonChange={ (element) => this.handle_input_change(element, false) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"church-tithe-wp-cc-multi-field-input-area\">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<div className=\"church-tithe-wp-cc-form-icon church-tithe-wp-lock-icon\">\n\t\t\t\t\t\t\t\t\t<svg role=\"img\" className=\"Icon\" fill=\"#2b2b2b\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t\t\t\t\t\t<title>Lock</title>\n\t\t\t\t\t\t\t\t\t\t<path fillRule=\"evenodd\" transform=\"translate(9, 9)\" d=\"M8.8,4 C8.8,1.79086089 7.76640339,4.18628304e-07 5.5,0 C3.23359661,-4.1480896e-07 2.2,1.79086089 2.2,4 L3.2,4 C3.2,2.34314567 3.81102123,0.999999681 5.5,1 C7.18897877,1.00000032 7.80000001,2.34314567 7.80000001,4 L8.8,4 Z M1.99201702,4 C0.891856397,4 0,4.88670635 0,5.99810135 L0,10.0018986 C0,11.1054196 0.900176167,12 1.99201702,12 L9.00798298,12 C10.1081436,12 11,11.1132936 11,10.0018986 L11,5.99810135 C11,4.89458045 10.0998238,4 9.00798298,4 L1.99201702,4 Z M1.99754465,5 C1.44661595,5 1,5.45097518 1,5.99077797 L1,10.009222 C1,10.5564136 1.4463114,11 1.99754465,11 L9.00245535,11 C9.55338405,11 10,10.5490248 10,10.009222 L10,5.99077797 C10,5.44358641 9.5536886,5 9.00245535,5 L1.99754465,5 Z M1.99754465,5\"></path>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<CardCvcElement\n\t\t\t\t\t\t\t\t\tstyle={{base: {fontSize: '19px'}}}\n\t\t\t\t\t\t\t\t\tonChange={ (element) => this.handle_input_change(element, false) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className={ 'church-tithe-wp-cc-multi-field-input-area' }>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<div className=\"church-tithe-wp-cc-form-icon church-tithe-wp-zipcode-icon\">\n\t\t\t\t\t\t\t\t\t<svg role=\"img\" className=\"Icon\" fill=\"#2b2b2b\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t\t\t\t\t\t<title>Push-pin</title>\n\t\t\t\t\t\t\t\t\t\t<path fillRule=\"evenodd\" transform=\"translate(8, 7)\" d=\"M6.96835335,14.4141594 C7.14378184,14.2130951 7.33880908,13.9850182 7.54859821,13.7339676 C8.14789969,13.0167952 8.74728299,12.2571079 9.30845088,11.4862878 C10.9985122,9.16482011 12,7.25762947 12,5.80510753 C12,2.58994421 9.3050091,0 6,0 C2.6949909,0 0,2.58994421 0,5.80510753 C0,7.25762947 1.00148783,9.16482011 2.69154912,11.4862878 C3.25271701,12.2571079 3.85210031,13.0167952 4.45140179,13.7339676 C4.66119092,13.9850182 4.85621816,14.2130951 5.03164665,14.4141594 C5.13795558,14.5360035 5.2148819,14.6226158 5.25757295,14.6699269 L6,15.4927001 L6.74242705,14.6699269 C6.7851181,14.6226158 6.86204442,14.5360035 6.96835335,14.4141594 Z M5.25757295,13.3300731 C5.27604949,13.309597 5.30380421,13.278504 5.34014057,13.2373842 C3.98193439,11.6258984 1,7.854524 1,5.80510753 C1,3.15131979 3.23857611,1 6,1 C8.76142389,1 11,3.15131979 11,5.80510753 C11,7.854524 8.01806561,11.6258984 6.65985943,13.2373842 C6.69619579,13.278504 6.72395051,13.309597 6.74242705,13.3300731 L6.58151981,13.3300731 C6.22583758,13.7497221 6,14 6,14 C6,14 5.77416242,13.7497221 5.41848019,13.3300731 L5.25757295,13.3300731 Z M6,8 C7.10456955,8 8,7.10456955 8,6 C8,4.89543045 7.10456955,4 6,4 C4.89543045,4 4,4.89543045 4,6 C4,7.10456955 4.89543045,8 6,8 Z M6,7 C6.55228478,7 7,6.55228478 7,6 C7,5.44771522 6.55228478,5 6,5 C5.44771522,5 5,5.44771522 5,6 C5,6.55228478 5.44771522,7 6,7 Z M6,7\"></path>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName={ 'church-tithe-wp-cc-multi-field-input-zip-code ' + this.get_postal_code_success_class() }\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tonChange={ this.handle_postal_code_change.bind(this) }\n\t\t\t\t\t\t\t\t\tplaceholder={ this.props.zip_code_placeholder }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tget_postal_code_success_class() {\n\n\t\tif ( this.state.card_zip_code ) {\n\t\t\treturn ' church-tithe-wp-input-success';\n\t\t} else if( this.props.form_validation_attempted ) {\n\t\t\treturn ' church-tithe-wp-input-error';\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\trender(){\n\n\t\tif ( ! this.props.mobile_mode ) {\n\n\t\t\treturn(\n\t\t\t\t<div className={ 'church-tithe-wp-cc-form church-tithe-wp-non-mobile' }>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<div className={ 'church-tithe-wp-input-instruction' + this.get_input_instruction_class() }>{ this.get_input_instruction_message() }</div>\n\t\t\t\t\t\t{ this.maybe_render_all_in_one_field() }\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t)\n\n\t\t} else {\n\n\t\t\treturn(\n\t\t\t\t<div className={ 'church-tithe-wp-cc-form church-tithe-wp-mobile' }>\n\t\t\t\t\t<div className={ 'church-tithe-wp-input-instruction' + this.get_input_instruction_class() }>{ this.get_input_instruction_message() }</div>\n\t\t\t\t\t{ this.maybe_render_multi_field_cc_form() }\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t}\n\n};\n\nexport default Church_Tithe_WP_Stripe_All_In_One_Field;\n","window.Church_Tithe_WP_Terms_Field = class Church_Tithe_WP_Terms_Field extends React.Component {\n\n    constructor( props ) {\n        super(props);\n\n        this.state= {\n            terms_checked: null,\n            terms_are_visible: false,\n        };\n\n        this.get_input_field_class = this.get_input_field_class.bind( this );\n        this.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n        this.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n        this.get_terms_visibility = this.get_terms_visibility.bind( this );\n    };\n\n    componentDidMount() {\n\n        // If this checkbox was previously set as validated in the containing form, set the default to be checked\n        if ( this.props.is_validated && this.props.form_validation_attempted ) {\n            this.setState( {\n                terms_checked: true\n            } );\n        }\n    }\n\n    dangerously_set_terms_body() {\n        // The terms are not user input, and thus they do not pose a security risk. They do contain HTML from WordPress though, which is why we do this\n        return { __html: this.props.terms_body };\n    }\n\n    get_current_instruction_key() {\n\n        // Handle the instruction differently when the form containing this field has been submitted\n        if ( this.props.form_validation_attempted ) {\n\n            if ( this.props.is_validated ) {\n                return 'checked';\n            } else {\n                return 'unchecked';\n            }\n\n        } else {\n\n            // If the form containing this field has not yet been submitted\n            if ( null == this.state.terms_checked ) {\n                return 'initial';\n            }\n            if ( this.state.terms_checked ) {\n                return 'checked';\n            }\n            if ( ! this.state.terms_checked || ! this.props.is_validated) {\n                return 'unchecked';\n            }\n\n        }\n    }\n\n    get_input_instruction_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-instruction-error';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_field_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-input-success';\n            }\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-input-error';\n            }\n            if ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return '';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_instruction_message() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            return this.props.instruction_codes[current_instruction].instruction_message;\n        }\n    };\n\n    get_terms_visibility() {\n\n        if( this.state.terms_are_visible ) {\n            return '';\n        } else {\n            return 'hidden';\n        }\n    }\n\n    toggle_full_terms() {\n\n        if ( ! this.state.terms_are_visible ) {\n            this.setState( {\n                terms_are_visible: true\n            } );\n        } else {\n            this.setState( {\n                terms_are_visible: false\n            } );\n        }\n    }\n\n    handle_terms_change( event ) {\n\n        var terms_checked;\n\n        // This will toggle the privacy policy state\n        if ( this.state.terms_checked ) {\n            terms_checked = false;\n        } else {\n            terms_checked = true;\n        }\n\n        // Pass the validation status back to the parent.\n        this.props.set_validation_and_value_of_field(\n            this.props.state_validation_variable_name,\n            terms_checked,\n        );\n\n        if ( this.props.form_validation_attempted ) {\n            var this_component = this;\n            // Wait for the state to be set in the parent\n            setTimeout( function() {\n                this_component.props.validate_form( true );\n            }, 10 );\n        }\n\n        this.setState( {\n            terms_checked: terms_checked\n        } );\n\n    };\n\n    render(){\n\n        var inputProps = {};\n\n        // Set the initial checked state of this checkbox\n        if ( null == this.state.terms_checked ) {\n            // If this checkbox was previously set as validated in the containing form, set the default to be checked\n            if ( this.props.is_validated && this.props.form_validation_attempted ) {\n                inputProps['defaultChecked'] = 'checked';\n            }\n        }\n\n        inputProps['onChange'] = this.handle_terms_change.bind( this );\n\n        if ( this.props.class_name ) {\n            inputProps['className'] = this.props.class_name + this.get_input_field_class();\n        } else {\n            inputProps['className'] = this.get_input_field_class();\n        }\n\n        if ( this.props.name ) {\n            inputProps['name'] = this.props.name;\n        }\n\n        if ( this.props.placeholder ) {\n            inputProps['placeholder'] = this.props.placeholder;\n        }\n\n        if ( this.props.defaultValue ) {\n            inputProps['defaultValue'] = this.props.defaultValue;\n        }\n\n        if ( this.props.disabled ) {\n            inputProps['disabled'] = this.props.disabled;\n        }\n\n        return(\n            <div>\n\n                <div hidden={ this.get_terms_visibility() } className={ 'church-tithe-wp-expandable-terms' }>\n                    <div className={ 'church-tithe-wp-terms-title' }>{ this.props.terms_title }</div>\n                    <div className={ 'church-tithe-wp-terms-body' } dangerouslySetInnerHTML={ this.dangerously_set_terms_body() } />\n                </div>\n\n                <label>\n                    <span className={ 'church-tithe-wp-input-instruction ' + this.get_input_instruction_class() }>\n                        <input type=\"checkbox\" { ...inputProps } />{ this.get_input_instruction_message() + ' '  }\n                    </span>\n                </label>\n\n                <a className=\"church-tithe-wp-view-terms-button\" onClick={ this.toggle_full_terms.bind( this ) }>{ '(' + this.props.terms_show_text + ')' }</a>\n\n            </div>\n        )\n    }\n\n};\nexport default Church_Tithe_WP_Terms_Field;\n","window.Church_Tithe_WP_TextArea_Field = class Church_Tithe_WP_TextArea_Field extends React.Component {\n\n    constructor( props ) {\n        super(props);\n\n        this.state= {\n            input_value: '',\n        };\n\n        this.get_input_field_class = this.get_input_field_class.bind( this );\n        this.get_input_instruction_class = this.get_input_instruction_class.bind( this );\n        this.get_input_instruction_message = this.get_input_instruction_message.bind( this );\n    };\n\n\t\tcomponentDidMount() {\n\t\t\tthis.setState( {\n\t\t\t\tinput_value: this.props.value\n\t\t\t} );\n\t\t}\n\n    get_current_instruction_key() {\n\n        // If the form containing this field has not yet been submitted\n        if ( ! this.state.input_value && this.props.is_validated ) {\n            return 'initial';\n        }\n\t\t\t\tif ( this.props.value == this.state.input_value && ! this.props.is_validated ) {\n\t\t\t\t\t\treturn 'initial';\n\t\t\t\t}\n        if ( this.state.input_value  && 'typing' == this.props.is_validated ) {\n            return 'initial';\n        }\n        if ( this.state.input_value  && 'saving' == this.props.is_validated ) {\n            return 'saving';\n        }\n        if ( this.state.input_value  && this.props.is_validated ) {\n            return 'success';\n        }\n        if ( this.state.input_value  && ! this.props.is_validated ) {\n            return 'error';\n        }\n\n        return 'initial';\n    }\n\n    get_input_instruction_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-instruction-error';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_field_class() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            if ( 'success' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-input-success';\n            }\n            if ( 'error' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return ' church-tithe-wp-input-error';\n            }\n            if ( 'initial' == this.props.instruction_codes[current_instruction].instruction_type ) {\n                return '';\n            }\n        }\n\n        return '';\n\n    };\n\n    get_input_instruction_message() {\n\n        // Get the current instruction for this field\n        var current_instruction = this.get_current_instruction_key();\n\n        if ( this.props.instruction_codes[current_instruction] ) {\n            return this.props.instruction_codes[current_instruction].instruction_message;\n        }\n    };\n\n    handle_input_change( event ) {\n\n        // Set the validation of this field\n        if ( ! event.target.value ) {\n            var is_validated = false;\n        } else {\n            var is_validated = true;\n        }\n\n        // Pass the validation status back to the parent.\n        this.props.set_validation_and_value_of_field(\n            this.props.state_validation_variable_name,\n            is_validated,\n            this.props.state_value_variable_name,\n            event.target.value\n        );\n\n        if ( this.props.form_validation_attempted ) {\n            var this_component = this;\n            // Wait for the state to be set in the parent\n            setTimeout( function() {\n                this_component.props.validate_form( true );\n            }, 10 );\n        }\n\n        this.setState( {\n            input_value: event.target.value\n        } );\n\n    };\n\n    render(){\n\n        var inputProps = {};\n\n        if ( this.props.type ) {\n            inputProps['type'] = this.props.type;\n        }\n\n        if ( this.props.class_name ) {\n            inputProps['className'] = this.props.class_name + this.get_input_field_class();\n        } else {\n            inputProps['className'] = this.get_input_field_class();\n        }\n\n        if ( this.props.name ) {\n            inputProps['name'] = this.props.name;\n        }\n\n        inputProps['onChange'] = this.handle_input_change.bind( this );\n\n        if ( this.props.placeholder ) {\n            inputProps['placeholder'] = this.props.placeholder;\n        }\n\n        inputProps['value'] = this.state.input_value;\n\n        if ( this.props.step ) {\n            inputProps['step'] = this.props.step;\n        }\n\n        if ( this.props.disabled ) {\n            inputProps['disabled'] = this.props.disabled;\n        }\n\n        return(\n            <div>\n                <label>\n                    <div className={ 'church-tithe-wp-input-instruction' + this.get_input_instruction_class() }>{ this.get_input_instruction_message() }</div>\n                    <textarea { ...inputProps } />\n                </label>\n\n            </div>\n        )\n    }\n\n};\nexport default Church_Tithe_WP_TextArea_Field;\n","var church_tithe_wp_vars = church_tithe_wp_js_vars.tithe_form_vars;\n\nwindow.Church_Tithe_WP_Payment_Confirmation = class Church_Tithe_WP_Payment_Confirmation extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tnote_with_tithe_value: null,\n\t\t\tnote_with_tithe_validated: false,\n\n\t\t\tform_validation_attempted: false,\n\t\t\ttime_since_last_keypress: 0,\n\t\t\tafter_payment_actions_completed: false,\n\t\t\tprint_html: null,\n\t\t\tsending_email_receipt: false,\n\t\t\temail_receipt_success: null\n\t\t};\n\n\t\tthis.note_with_tithe_keypress_delay;\n\t\tthis.render_refunded_output = this.render_refunded_output.bind( this );\n\t\tthis.email_transaction_receipt = this.email_transaction_receipt.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\t// Set up our print HTML upon mount\n\t\tif ( this.props.main_component.state.dom_node ) {\n\t\t\tthis.setState( {\n\t\t\t\tprint_html: this.props.main_component.state.dom_node.outerHTML\n\t\t\t} );\n\t\t}\n\n\t\t// If we should fire the actions that take place after a payment upon component mounting...\n\t\tif ( this.props.do_after_payment_actions ) {\n\t\t\tthis.do_after_payment_actions();\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\t// Update our print HTML upon mount\n\t\tif ( this.props.main_component.state.dom_node ) {\n\t\t\tif ( this.state.print_html != this.props.main_component.state.dom_node.outerHTML ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tprint_html: this.props.main_component.state.dom_node.outerHTML\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t}\n\n\tdo_after_payment_actions() {\n\t\tthis.email_transaction_receipt( true, false );\n\t}\n\n\tget_transaction_visual_amount() {\n\n\t\tvar cents = this.props.main_component.state.current_transaction_info.transaction_charged_amount;\n\t\tvar currency = this.props.main_component.state.current_transaction_info.transaction_charged_currency;\n\t\tvar is_zero_decimal_currency = this.props.main_component.state.current_transaction_info.transaction_currency_is_zero_decimal;\n\t\tvar locale = this.props.main_component.state.unique_settings.locale;\n\t\tvar string_after = ' (' + currency.toUpperCase() + ')';\n\n\t\treturn church_tithe_wp_format_money( cents, currency, is_zero_decimal_currency, locale, string_after );\n\n\t}\n\n\tget_arrangement_visual_amount() {\n\n\t\tvar cents = this.props.main_component.state.current_transaction_info.arrangement_info.amount;\n\t\tvar currency = this.props.main_component.state.current_transaction_info.arrangement_info.currency;\n\t\tvar is_zero_decimal_currency = this.props.main_component.state.current_transaction_info.arrangement_info.is_zero_decimal_currency;\n\t\tvar locale = this.props.main_component.state.unique_settings.locale;\n\t\tvar string_after = this.props.main_component.state.current_transaction_info.arrangement_info.string_after + ' (' + currency.toUpperCase() + ')';\n\n\t\treturn church_tithe_wp_format_money( cents, currency, is_zero_decimal_currency, locale, string_after );\n\n\t}\n\n\tmaybe_render_the_period_this_transaction_covers() {\n\n\t\tvar start_date = this.props.main_component.state.current_transaction_info.transaction_period_start_date;\n\t\tvar end_date = this.props.main_component.state.current_transaction_info.transaction_period_end_date;\n\t\tvar period_string;\n\n\t\tif ( ! start_date || ! end_date ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif ( '0000-00-00 00:00:00' == start_date || '0000-00-00 00:00:00' == end_date ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tperiod_string = church_tithe_wp_format_date( start_date ) + ' - ' + church_tithe_wp_format_date( end_date );\n\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title\">{ this.props.main_component.state.unique_settings.strings.transaction_period + ': ' }</span>\n\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value\">{ period_string }</span>\n\t\t\t</div>\n\t\t);\n\n\t}\n\n\tvalidate_form( modify_state ) {\n\n\t\tvar all_fields_validate = true;\n\n\t\t// Note with tithe field\n\t\tif ( ! this.state.note_with_tithe_validated ) {\n\t\t\tall_fields_validate = false;\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\temail_transaction_receipt( notify_admin_too = false, send_regardless_of_initial_emails_sent = false ) {\n\n\t\tthis.setState( {\n\t\t\tsending_email_receipt: true,\n\t\t\temail_receipt_success: null\n\t\t} );\n\n\t\t// Do any after-payment actions that need to take place via ajax\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'church_tithe_wp_email_transaction_receipt' );\n\t\tpostData.append('church_tithe_wp_transaction_id', this.props.main_component.state.current_transaction_info.transaction_id);\n\t\tpostData.append('church_tithe_wp_session_id', this.props.main_component.state.session_id);\n\t\tpostData.append('church_tithe_wp_user_id', this.props.main_component.state.user_id);\n\t\tpostData.append('church_tithe_wp_notify_admin_too', notify_admin_too);\n\t\tpostData.append('church_tithe_wp_send_regardless_of_initial_emails_sent', send_regardless_of_initial_emails_sent);\n\t\tpostData.append('church_tithe_wp_email_transaction_receipt_nonce', this.props.main_component.state.frontend_nonces.church_tithe_wp_email_transaction_receipt_nonce);\n\n\t\tvar this_component = this;\n\n\t\t// Here we will handle anything that needs to be done after the payment was completed.\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_email_transaction_receipt', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tsending_email_receipt: false,\n\t\t\t\t\t\temail_receipt_success: false\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tsending_email_receipt: false,\n\t\t\t\t\t\t\t\temail_receipt_success: true\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.log( data );\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tsending_email_receipt: false,\n\t\t\t\t\t\t\t\temail_receipt_success: false\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch( () => {\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tsending_email_receipt: false,\n\t\t\t\t\t\temail_receipt_success: false\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log( response );\n\t\t\t\t} );\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tsending_email_receipt: false,\n\t\t\t\t\temail_receipt_success: false\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\t}\n\n\tset_validation_and_value_of_field( state_validation_variable, is_validated, state_value_variable = null, state_value = null ) {\n\n\t\tif ( 'note_with_tithe_value' != state_value_variable ) {\n\n\t\t\tif ( null == state_value_variable ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t\t[state_value_variable]: state_value,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If we are saving the note with tithe\n\t\t\tvar old_note_with_tithe = this.state.note_with_tithe;\n\t\t\tvar this_component = this;\n\n\t\t\t// We won't set the validation to true until the ajax response comes back\n\t\t\tthis.setState( {\n\t\t\t\tnote_with_tithe_validated: 'typing',\n\t\t\t\tnote_with_tithe_value: state_value,\n\t\t\t} );\n\n\t\t\t// If nothing has changed since the state was last set\n\t\t\tif ( state_value == old_note_with_tithe ) {\n\n\t\t\t\t// Do nothing\n\t\t\t\treturn false;\n\n\t\t\t} else {\n\n\t\t\t\t// Set up a delay which waits to save the tithe until .5 seconds after they stop typing.\n\t\t\t\tif( this.note_with_tithe_keypress_delay ) {\n\t\t\t\t\t// Clear the keypress delay if the user just typed\n\t\t\t\t\tclearTimeout( this.note_with_tithe_keypress_delay );\n\t\t\t\t\tthis.note_with_tithe_keypress_delay = null;\n\t\t\t\t}\n\n\t\t\t\t// (Re)-Set up the save_note_with_tithe to fire in 500ms\n\t\t\t\tthis.note_with_tithe_keypress_delay = setTimeout( function() {\n\t\t\t\t\tclearTimeout( this.note_with_tithe_keypress_delay );\n\t\t\t\t\tthis_component.save_note_with_tithe( state_value );\n\t\t\t\t}, 500);\n\n\t\t\t}\n\t\t}\n\t}\n\n\tsave_note_with_tithe( note_with_tithe ) {\n\n\t\tthis.setState( {\n\t\t\tnote_with_tithe_validated: 'saving',\n\t\t} );\n\n\t\t// We'll auto save the entered tithe note into the database's transaction field via ajax every time the person stops typing for 1 second.\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'church_tithe_wp_save_note_with_tithe');\n\t\tpostData.append('church_tithe_wp_transaction_id', this.props.main_component.state.current_transaction_info.transaction_id);\n\t\tpostData.append('church_tithe_wp_note_with_tithe', this.state.note_with_tithe_value);\n\t\tpostData.append('church_tithe_wp_session_id', this.props.main_component.state.session_id);\n\t\tpostData.append('church_tithe_wp_user_id', this.props.main_component.state.user_id);\n\t\tpostData.append('church_tithe_wp_note_with_tithe_nonce', this.props.main_component.state.frontend_nonces.note_with_tithe_nonce);\n\n\t\tvar this_component = this;\n\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_save_note_with_tithe', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' +\n\t\t\t\t\tresponse.status);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// The note was successfully saved. Adjust the validation to true\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tnote_with_tithe_validated: true,\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log( data );\n\n\t\t\t\t\t\t\t// The note was not successfully saved. Adjust the validation to false\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tnote_with_tithe_validated: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\t}\n\n\trender_email_button() {\n\n\t\tvar email_message = '';\n\n\t\t// If the receipt was just successfully sent, or just failed to send\n\t\tif ( this.state.email_receipt_success ) {\n\t\t\temail_message = <div className=\"church-tithe-wp-email-receipt-message\">{ this.props.main_component.state.unique_settings.strings.email_receipt_success }</div>\n\t\t}\n\n\t\tif ( null !== this.state.email_receipt_success && ! this.state.email_receipt_success ) {\n\t\t\temail_message = <div className=\"church-tithe-wp-email-receipt-message\">{ this.props.main_component.state.unique_settings.strings.email_receipt_failed }</div>\n\t\t}\n\n\t\tif ( this.state.sending_email_receipt ) {\n\t\t\treturn (\n\t\t\t\t<div className=\"church-tithe-wp-email-receipt\">\n\t\t\t\t\t{ this.props.main_component.state.unique_settings.strings.email_receipt_sending }\n\t\t\t\t\t<button className={ 'church-tithe-wp-pay-button' }>{ this.props.main_component.state.unique_settings.strings.email_receipt_sending }</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( ! this.state.sending_email_receipt ) {\n\t\t\treturn (\n\t\t\t\t<div className=\"church-tithe-wp-email-receipt\">\n\t\t\t\t\t{ email_message }\n\t\t\t\t\t<button className={ 'church-tithe-wp-pay-button' } onClick={ this.email_transaction_receipt.bind( this, true, true ) }>{ this.props.main_component.state.unique_settings.strings.email_receipt }</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t}\n\n\trender_print_button() {\n\n\t\tif ( this.state.print_html ) {\n\n\t\t\tif( typeof window.print == 'function' ) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"church-tithe-wp-print-receipt\">\n\t\t\t\t\t<button className={ 'church-tithe-wp-pay-button' } onClick={ church_tithe_wp_print_div.bind( null, this.state.print_html, this.props.main_component.state.unique_settings.strings.receipt_title, 'church_tithe_wp_default_skin-css' ) }>{ this.props.main_component.state.unique_settings.strings.print_receipt }</button>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\n\t\t}\n\t}\n\n\trender_manage_payments_button() {\n\n\t\tif ( ! this.props.show_manage_payments ) {\n\t\t\treturn( '' );\n\t\t}\n\n\t\treturn(\n\t\t\t<button type=\"button\" className={ 'church-tithe-wp-manage-payments-button church-tithe-wp-input-instruction church-tithe-wp-text-button' } onClick={ this.props.main_component.set_all_current_visual_states.bind( null, {\n\t\t\t\tmanage_payments: {}\n\t\t\t}, false ) }>{ this.props.main_component.state.unique_settings.strings.manage_payments_button_text }</button>\n\t\t);\n\n\t}\n\n\trender_refunded_output() {\n\n\t\t// If this is a refund transaction\n\t\tif ( 'refund' == this.props.main_component.state.current_transaction_info.transaction_type ) {\n\t\t\treturn( 'This is a refund for transaction' + ' ' + this.props.main_component.state.current_transaction_info.refund_id );\n\t\t}\n\n\t\t// If this is an initial transaction that has been refunded\n\t\tif ( this.props.main_component.state.current_transaction_info.refund_id ) {\n\t\t\tif (\n\t\t\t\t'initial' == this.props.main_component.state.current_transaction_info.transaction_type ||\n\t\t\t\t'renewal' == this.props.main_component.state.current_transaction_info.transaction_type\n\t\t\t) {\n\t\t\t\treturn( 'This transaction has been refunded. See transaction ' + this.props.main_component.state.current_transaction_info.refund_id );\n\t\t\t}\n\t\t}\n\n\t\treturn( '' );\n\n\t}\n\n\trender_things_before_receipt() {\n\n\t\t// Don't show extra things on refund receipts, like note with tithe\n\t\tif ( 'refund' == this.props.main_component.state.current_transaction_info.transaction_type ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"church-tithe-wp-confirmation-message\">\n\t\t\t\t{ this.props.main_component.state.unique_settings.strings.thank_you_message }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"church-tithe-wp-confirmation-note\">\n\t\t\t\t{\n\t\t\t\t\t<Church_Tithe_WP_TextArea_Field\n\t\t\t\t\t\tstate_validation_variable_name={ 'note_with_tithe_validated' }\n\t\t\t\t\t\tstate_value_variable_name={ 'note_with_tithe_value' }\n\t\t\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\t\t\tis_validated={ this.state.note_with_tithe_validated }\n\t\t\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.note_with_tithe }\n\t\t\t\t\t\tvalue={ this.props.main_component.state.current_transaction_info ? this.props.main_component.state.current_transaction_info.transaction_note_with_tithe : '' }\n\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclass_name={ 'church-tithe-wp-note-with-tithe' }\n\t\t\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.note_with_tithe.placeholder_text }\n\t\t\t\t\t\tname=\"tithe-amount\"\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\n\n\t}\n\n\tmaybe_render_plan_details() {\n\n\t\tif ( 'off' !== this.props.main_component.state.current_transaction_info.arrangement_info.recurring_status ) {\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_id_title + ': ' }</span>\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value\">{ this.props.main_component.state.current_transaction_info.arrangement_info.id }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_amount_title + ': ' }</span>\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value\">{ this.get_arrangement_visual_amount() }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ this.maybe_render_the_period_this_transaction_covers() }\n\t\t\t\t</React.Fragment>\n\t\t\t)\n\t\t}\n\n\t}\n\n\trender() {\n\n\t\tif ( ! this.props.main_component.state.current_transaction_info ) {\n\t\t\treturn ( <Church_Tithe_WP_Spinner /> );\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"church-tithe-wp-payment-confirmation\">\n\t\t\t\t{ this.render_things_before_receipt() }\n\t\t\t\t<div className=\"church-tithe-wp-receipt\">\n\t\t\t\t\t<div className=\"church-tithe-wp-receipt-title\">\n\t\t\t\t\t{ this.props.main_component.state.unique_settings.strings.receipt_title }\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"church-tithe-wp-receipt-field-space-below\">\n\t\t\t\t\t\t{ this.props.main_component.state.current_transaction_info.email }\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"church-tithe-wp-receipt-field-space-below\">\n\t\t\t\t\t\t{ this.render_refunded_output() }\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"church-tithe-wp-receipt-payee\">\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title church-tithe-wp-receipt-payee-title\">{ ( 'refund' == this.props.main_component.state.current_transaction_info.transaction_type ? this.props.main_component.state.unique_settings.strings.refund_payer : this.props.main_component.state.unique_settings.strings.receipt_payee ) + ': ' }</span>\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value church-tithe-wp-receipt-payee-value\">{ this.props.main_component.state.current_transaction_info.payee_name }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"church-tithe-wp-receipt-transaction-id\">\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title church-tithe-wp-receipt-transaction-id-title\">{ this.props.main_component.state.unique_settings.strings.receipt_transaction_id + ': ' }</span>\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value church-tithe-wp-receipt-transaction-id-value\">{ this.props.main_component.state.current_transaction_info.transaction_id }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"church-tithe-wp-receipt-transaction-date\">\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title church-tithe-wp-receipt-date-title\">{ this.props.main_component.state.unique_settings.strings.receipt_date + ': ' }</span>\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value church-tithe-wp-receipt-date-value\">{ church_tithe_wp_format_date_and_time( this.props.main_component.state.current_transaction_info.transaction_date_created ) }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"church-tithe-wp-receipt-amount\">\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title church-tithe-wp-receipt-transaction-amount-title\">{ this.props.main_component.state.unique_settings.strings.receipt_transaction_amount + ': ' }</span>\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value church-tithe-wp-receipt-transaction-amount-value\">{ this.get_transaction_visual_amount() }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"church-tithe-wp-receipt-statement-descriptor\">\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title church-tithe-wp-receipt-transaction-amount-title\">{ this.props.main_component.state.unique_settings.strings.receipt_statement_descriptor + ': ' }</span>\n\t\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value church-tithe-wp-receipt-transaction-amount-value\">{ this.props.main_component.state.current_transaction_info.statement_descriptor }</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ this.maybe_render_plan_details() }\n\t\t\t\t</div>\n\t\t\t\t{ this.render_email_button() }\n\t\t\t\t{ this.render_print_button() }\n\t\t\t\t{ this.render_manage_payments_button() }\n\t\t\t</div>\n\t\t)\n\t}\n\n}\nexport default Church_Tithe_WP_Payment_Confirmation;\n\n// This function takes html, puts it on a single page, and then sets that page to print.\nfunction church_tithe_wp_print_div( html_to_print, page_title_to_use, css_stylesheet_id ) {\n\n\t// Copy the <head> tag\n\tvar head_tag = document.querySelector( 'head' );\n\n\tvar mywindow = window.open( '', page_title_to_use, 'height=6000,width=8000' );\n\tmywindow.document.write( head_tag.outerHTML );\n\tmywindow.document.write( '<body class=\"church-tithe-wp-print-page\">' );\n\tmywindow.document.write( html_to_print );\n\tmywindow.document.write( '</body></html>' );\n\n\t// Wait for 1 second before attempting to print it so it can write everything and load the CSS\n\tsetTimeout( function() {\n\n\t\tmywindow.focus()\n\t\tmywindow.print();\n\n\t}, 2000 );\n\n\treturn true;\n}\n","import {StripeProvider} from 'react-stripe-elements';\nimport {Elements} from 'react-stripe-elements';\nimport {PaymentRequestButtonElement} from 'react-stripe-elements';\nimport {injectStripe} from 'react-stripe-elements';\n\nvar church_tithe_wp_vars = church_tithe_wp_js_vars.tithe_form_vars;\n\nwindow.Church_Tithe_WP_Payment_Box = class Church_Tithe_WP_Payment_Box extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tmap_of_visual_states: {\n\t\t\t\tpayment: {\n\t\t\t\t\tvariable: {}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcurrent_visual_state: 'form', //loading, form, confirmation, success\n\t\t\thas_been_in_view: false,\n\t\t\tstripe: null,\n\t\t\tcurrent_title_string: this.props.main_component.state.unique_settings.strings.form_title,\n\t\t};\n\n\t}\n\n\tcomponentDidMount() {\n\n\t\tchurch_tithe_wp_set_visual_state_of_component( {\n\t\t\t\tcomponent: this,\n\t\t\t\tdefault_visual_states: {\n\t\t\t\t\tparent_in_view: 'form',\n\t\t\t\t\tparent_not_in_view: 'none'\n\t\t\t\t},\n\t\t\t\tname_of_visual_state_variable: 'current_visual_state'\n\t\t} );\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\tchurch_tithe_wp_set_visual_state_of_component( {\n\t\t\t\tcomponent: this,\n\t\t\t\tdefault_visual_states: {\n\t\t\t\t\tparent_in_view: 'form',\n\t\t\t\t\tparent_not_in_view: 'none'\n\t\t\t\t},\n\t\t\t\tname_of_visual_state_variable: 'current_visual_state'\n\t\t} );\n\n\t}\n\n\tget_current_title() {\n\n\t\t// If the current visual state is loading\n\t\tif( 'loading' == this.state.current_visual_state ) {\n\n\t\t\treturn <h1 className=\"church-tithe-wp-header-title\">{ this.props.main_component.state.unique_settings.strings.loading }</h1>\n\n\t\t}\n\n\t\t// If the current visual state is form\n\t\tif( 'form' == this.state.current_visual_state ) {\n\n\t\t\treturn <h1 className=\"church-tithe-wp-header-title\">{ this.props.main_component.state.unique_settings.strings.form_title }</h1>\n\n\t\t}\n\n\t\t// If the current visual state is confirmation\n\t\tif( 'confirmation' == this.state.current_visual_state ) {\n\n\t\t\treturn <h1 className=\"church-tithe-wp-header-title\">{ this.props.main_component.state.unique_settings.strings.payment_confirmation_title }</h1>\n\n\t\t}\n\t}\n\n\tget_current_subtitle() {\n\n\t\t// If the current visual state is loading\n\t\tif( 'loading' == this.state.current_visual_state ) {\n\n\t\t\treturn '';\n\n\t\t}\n\n\t\t// If the current visual state is form\n\t\tif( 'form' == this.state.current_visual_state && this.props.main_component.state.unique_settings.strings.form_subtitle ) {\n\n\t\t\treturn <h2 className={ 'church-tithe-wp-header-subtitle' }>{ this.props.main_component.state.unique_settings.strings.form_subtitle }</h2>\n\n\t\t}\n\n\t\t// If the current visual state is confirmation\n\t\tif( 'confirmation' == this.state.current_visual_state ) {\n\n\t\t\treturn '';\n\n\t\t}\n\t}\n\n\tmaybe_render_close_button() {\n\n\t\tif ( ! this.props.show_close_button ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"church-tithe-wp-close-btn\" aria-label=\"Close\" onClick={ this.props.main_component.handle_visual_state_change_click_event.bind( this, {}, {} ) }><img src={ this.props.main_component.state.dynamic_settings.close_button_url } /></div>\n\t\t);\n\t}\n\n\trender() {\n\n\t\tif ( 'none' == this.state.current_visual_state ) {\n\t\t\treturn (\n\t\t\t\t''\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<StripeProvider apiKey={this.props.main_component.state.dynamic_settings.stripe_api_key}>\n\t\t\t\t\t<div className=\"church-tithe-wp-component-box\">\n\n\t\t\t\t\t\t<header className=\"church-tithe-wp-header\" role=\"banner\">\n\t\t\t\t\t\t\t{ this.get_current_title() }\n\t\t\t\t\t\t\t{ this.get_current_subtitle() }\n\t\t\t\t\t\t\t{ this.maybe_render_close_button() }\n\t\t\t\t\t\t</header>\n\n\t\t\t\t\t\t{ (() => {\n\t\t\t\t\t\t\tif ( 'loading' == this.state.current_visual_state ) {\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-payment-box-view church-tithe-wp-payment-loading-view' }>\n\t\t\t\t\t\t\t\t\t\t<Church_Tithe_WP_Spinner />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})() }\n\n\t\t\t\t\t\t{ ( () => {\n\t\t\t\t\t\t\tif ( 'form' == this.state.current_visual_state ) {\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<div className=\"church-tithe-wp-payment-form-container\">\n\t\t\t\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-payment-box-view' }>\n\t\t\t\t\t\t\t\t\t\t\t<Elements>\n\t\t\t\t\t\t\t\t\t\t\t\t<CardForm\n\t\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Elements>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} )() }\n\n\t\t\t\t\t\t{ ( () => {\n\t\t\t\t\t\t\tif ( 'confirmation' == this.state.current_visual_state ) {\n\n\t\t\t\t\t\t\t\tif ( ! this.props.main_component.state.current_transaction_info ) {\n\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-payment-box-view church-tithe-wp-payment-confirmation-view' }>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\tNo transaction found.\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ this.props.main_component.set_all_current_visual_states.bind( null, {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmanage_payments: {}\n\t\t\t\t\t\t\t\t\t\t\t\t}, false ) }\n\t\t\t\t\t\t\t\t\t\t\t>Manage your payments</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-payment-box-view church-tithe-wp-payment-confirmation-view' }>\n\t\t\t\t\t\t\t\t\t\t<Church_Tithe_WP_Payment_Confirmation\n\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\tdo_after_payment_actions={ true }\n\t\t\t\t\t\t\t\t\t\t\tshow_manage_payments={ true }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} )() }\n\n\t\t\t\t\t</div>\n\t\t\t\t</StripeProvider>\n\t\t\t);\n\t\t}\n\t}\n}\nexport default Church_Tithe_WP_Payment_Box;\n\nclass Church_Tithe_WP_Card_Form extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state= {\n\t\t\tmap_of_visual_states: {\n\t\t\t\tpayment: {\n\t\t\t\t\tform: {\n\t\t\t\t\t\tvariable: {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tstripe_is_set: false,\n\t\t\tcanDoPaymentRequest: false,\n\t\t\tpaymentRequest : null,\n\t\t\tdefault_payment_mode: null,\n\t\t\tpayment_mode: null, //credit_card or payment_request\n\t\t\tpayment_method_name: null, // basic-card, apple-pay, payment-request\n\t\t\tpayment_request_button_name: null,\n\t\t\tform_has_any_error: false,\n\t\t\tform_validation_attempted: false,\n\t\t\tcurrent_payment_state: 'initial',\n\n\t\t\t// Currency states\n\t\t\tcurrency_search_visible: false,\n\t\t\tuser_typed_currency: this.props.main_component.state.unique_settings.currency_code,\n\t\t\tverified_currency: this.props.main_component.state.unique_settings.currency_code,\n\t\t\tverified_currency_symbol: this.props.main_component.state.unique_settings.currency_symbol,\n\t\t\tverified_currency_type: this.props.main_component.state.unique_settings.currency_type,\n\n\t\t\tstripe_error_message: null,\n\t\t\tstripe_payment_method: null,\n\n\t\t\ttithe_amount: this.props.main_component.state.unique_settings.default_amount,\n\n\t\t\tprivacy_policy_validated: false,\n\n\t\t\temail_value: null,\n\t\t\temail_validated: false,\n\n\t\t\tname_value: null,\n\t\t\tname_validated: false,\n\n\t\t\trecurring_value: null,\n\t\t\trecurring_validated: false,\n\n\t\t\tinput_fields_tithe_amount_current_instruction: 'initial',\n\t\t\tinput_fields_stripe_all_in_one_current_instruction: 'initial',\n\t\t};\n\n\t\tthis.currency_text_input = React.createRef();\n\t\tthis.check_for_payment_request_availability = this.check_for_payment_request_availability.bind( this );\n\t\tthis.validate_tithe_amount = this.validate_tithe_amount.bind( this );\n\t\tthis.handleCreditCardSubmit = this.handleCreditCardSubmit.bind( this );\n\t\tthis.set_payment_mode = this.set_payment_mode.bind( this );\n\t\tthis.get_currency_flag_class = this.get_currency_flag_class.bind( this );\n\t\tthis.create_stripe_payment_method = this.create_stripe_payment_method.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\n\t\t// Upon mount, clear the current transaction and arrangement.\n\t\t// This handles back-clicks from the manage payments state, and prevents double \"after-payment completed\" actions.\n\t\tthis.props.main_component.setState( {\n\t\t\tcurrent_transaction_info: null,\n\t\t\tcurrent_arrangement_info: null,\n\t\t} );\n\n\t\t//this.check_for_payment_request_availability();\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\tchurch_tithe_wp_set_visual_state_of_component( {\n\t\t\t\tcomponent: this,\n\t\t\t\tdefault_visual_states: {\n\t\t\t\t\tparent_in_view: this.state.default_payment_mode,\n\t\t\t\t\tparent_not_in_view: 'none'\n\t\t\t\t},\n\t\t\t\tname_of_visual_state_variable: 'payment_mode'\n\t\t} );\n\n\t\tthis.check_for_payment_request_availability();\n\n\t\t// Pass the email value up to the main component.\n\t\tif ( this.props.main_component.state.form_email_value !== this.state.email_value ) {\n\t\t\tthis.props.main_component.setState( {\n\t\t\t\tform_email_value: this.state.email_value\n\t\t\t} );\n\t\t}\n\n\t}\n\n\tcountry_supports_payment_request_button() {\n\t\tvar country_code = this.props.main_component.state.dynamic_settings.stripe_account_country_code;\n\n\t\t// Has to be a supported country for Stripe: https://stripe.com/global\n\t\tvar payment_request_countries = ['AT', 'AU', 'BE', 'BR', 'CA', 'CH', 'DE', 'DK', 'EE', 'ES', 'FI', 'FR', 'GB', 'GR', 'HK', 'IE', 'IN', 'IT', 'JP', 'LT', 'LU', 'LV', 'MX', 'MY', 'NL', 'NO', 'NX', 'PH', 'PL', 'PT', 'RO', 'SE', 'SG', 'SK', 'US'];\n\n\t\tif ( payment_request_countries.indexOf( country_code ) ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tcheck_for_payment_request_availability() {\n\n\t\t// If stripe has now loaded and we haven't checked for Payment Request capabilities yet (Apple Pay, Google Pay, etc)\n\t\tif ( this.props.stripe && ! this.state.stripe_is_set ) {\n\n\t\t\t// Set up a placeholder payment request just to see if we can do it\n\t\t\tvar paymentRequest = this.props.stripe.paymentRequest({\n\t\t\t\tcountry: this.props.main_component.state.dynamic_settings.stripe_account_country_code,\n\t\t\t\tcurrency: this.state.verified_currency ? this.state.verified_currency.toLowerCase() : 'USD',\n\t\t\t\ttotal: {\n\t\t\t\t\tlabel: this.props.main_component.state.unique_settings.strings.payment_request_label,\n\t\t\t\t\tamount: this.state.tithe_amount,\n\t\t\t\t},\n\t\t\t\trequestPayerEmail: true,\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tstripe_is_set: true,\n\t\t\t});\n\n\t\t\t// If we can make a Payment Request (Apple Pay, Google Pay, etc)\n\t\t\tpaymentRequest.canMakePayment().then(result => {\n\n\t\t\t\t// If we can do a PaymentRequest in this browser\n\t\t\t\tif ( !!result && this.country_supports_payment_request_button() ) {\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcanDoPaymentRequest: !!result,\n\t\t\t\t\t\tpaymentRequest: paymentRequest,\n\t\t\t\t\t\tdefault_payment_mode: 'payment_request'\n\t\t\t\t\t}, () => {\n\n\t\t\t\t\t\t// If no payment mode has been set in the URL, set the default one to Payment Request.\n\t\t\t\t\t\t// But if a payment mode was set through the URL, we want to keep it.\n\t\t\t\t\t\tif ( ! this.state.payment_mode\t) {\n\t\t\t\t\t\t\t// We are not using this.set_payment_method here because we don't want to affect the URL, since this is a fresh page load.\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tpayment_mode: 'payment_request',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If a payment mode was set in the URL, but it isn't one of the available ones, set the URL and payment mode to the default here.\n\t\t\t\t\t\telse if (\n\t\t\t\t\t\t\t'payment_request' !== this.state.payment_mode &&\n\t\t\t\t\t\t\t'credit_card' !== this.state.payment_mode\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.set_payment_mode( 'payment_request' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse if ( 'credit_card' === this.state.payment_mode ) {\n\t\t\t\t\t\t\tthis.set_payment_mode( 'credit_card' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\t// This fires once a paymentRequest has been completed by the user.\n\t\t\t\t\tpaymentRequest.on('paymentmethod', (result) => {\n\n\t\t\t\t\t\tconst { source, error, complete } = result;\n\n\t\t\t\t\t\tif ( result.error ) {\n\t\t\t\t\t\t\t// Handle error...\n\t\t\t\t\t\t\tstripe_error_message: result.error.message\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tstripe_payment_method: result.paymentMethod,\n\t\t\t\t\t\t\temail_validated: true,\n\t\t\t\t\t\t\temail_value: result.payerEmail,\n\t\t\t\t\t\t\tname_value: result.paymentMethod.billing_details.name,\n\t\t\t\t\t\t\tname_validated: true,\n\t\t\t\t\t\t\tpayment_method_name: 'apple-pay' != result.methodName ? 'payment-request' : result.methodName,\n\t\t\t\t\t\t\tpayment_request_button_name: 'apple-pay' != result.methodName ? 'payment-request' : result.methodName,\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Send the token to the server for processing\n\t\t\t\t\t\tthis.do_ajax_stripe_transaction();\n\n\t\t\t\t\t\t// Close the browser modal\n\t\t\t\t\t\tcomplete('success');\n\t\t\t\t\t});\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Payment request is not available in this browser.\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcanDoPaymentRequest: !!result,\n\t\t\t\t\t\tdefault_payment_mode: 'credit_card',\n\t\t\t\t\t\tpayment_method_name: 'basic-card'\n\t\t\t\t\t}, () => {\n\n\t\t\t\t\t\t// If no payment mode has been set in the URL, set the default one to Credit Card\n\t\t\t\t\t\t// But if a payment mode was set through the URL, we want to keep it.\n\t\t\t\t\t\tif ( ! this.state.payment_mode\t) {\n\t\t\t\t\t\t\t// We are not using this.set_payment_method here because we don't want to affect the URL, since this is a fresh page load.\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tpayment_mode: 'credit_card',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.set_payment_mode( 'credit_card' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t}\n\n\t// This is for displaying the amount in an input field.\n\tget_visual_amount_for_input_field() {\n\n\t\tif ( 0 === this.state.tithe_amount ) {\n\t\t\t//Do nothing...\n\t\t} else if( ! this.state.tithe_amount ) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// If this is not a zero-decimal currency, divide the amount by 100\n\t\tif ( 'zero_decimal' !== this.state.verified_currency_type ) {\n\t\t\tvar visual_tithe_amount = this.state.tithe_amount / 100;\n\t\t} else {\n\t\t\tvar visual_tithe_amount = this.state.tithe_amount;\n\t\t}\n\n\t\treturn visual_tithe_amount;\n\t}\n\n\t// This is for displaying the amount, but not for inside an input field.\n\tget_visual_amount() {\n\n\t\tif ( 0 === this.state.tithe_amount ) {\n\t\t\t//Do nothing...\n\t\t} else if( ! this.state.tithe_amount ) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// If this is not a zero-decimal currency, divide the amount by 100\n\t\tif ( 'zero_decimal' !== this.state.verified_currency_type ) {\n\t\t\tvar visual_tithe_amount = this.state.tithe_amount / 100;\n\t\t} else {\n\t\t\tvar visual_tithe_amount = this.state.tithe_amount;\n\t\t}\n\n\t\tvar locale = this.props.main_component.state.dynamic_settings.locale.replace(\"_\", \"-\");\n\n\t\t// Localize the amount (commas as decimal places, etc)\n\t\tvisual_tithe_amount = visual_tithe_amount.toLocaleString(locale);//new Intl.NumberFormat(locale, { style: 'currency', currency: this.state.verified_currency }).format(visual_tithe_amount);\n\n\t\t// Replace the currency symbol from the Intl.NumberFormat with our own prettier one (US$ and CA$ are ugly, and adding \"CAD\" after is nicer to look at)\n\t\t//visual_tithe_amount = visual_tithe_amount.split(/(?<=^\\S+)\\s/)[1];\n\n\t\treturn  this.state.verified_currency_symbol + visual_tithe_amount;\n\t}\n\n\tget_amount_field_step_format() {\n\t\t// If this is not a zero-decimal currency, handle all the decimal requirements\n\t\tif ( 'zero_decimal' !== this.state.verified_currency_type ) {\n\t\t\tvar step_format = \"0.01\";\n\t\t} else {\n\t\t\tvar step_format = \"1\";\n\t\t}\n\n\t\t// At this point HTML5 number forms don't seem to support translated decimals. But if they do, use church_tithe_wp_get_decimal_character_for_locale to get it\n\t\treturn step_format;\n\t}\n\n\t// This function will return a class that either transitions an element in or out, based on the view state of this component\n\tget_view_class( payment_modes ) {\n\n\t\tvar currently_in_view_class_name = 'church-tithe-wp-current-view';\n\t\tvar hidden_class_name = 'church-tithe-wp-hidden-view';\n\n\t\t// If the item in question should be shown based on the current payment mode of this component\n\t\tif( payment_modes.indexOf( this.state.payment_mode ) != -1 ) {\n\n\t\t\treturn ' ' + currently_in_view_class_name;\n\n\t\t} else {\n\n\t\t\treturn ' ' + hidden_class_name;\n\n\t\t}\n\n\t}\n\n\tget_disabled_status( payment_modes ) {\n\n\t\t// If the item in question should be shown based on the current view of this component\n\t\tif( payment_modes.indexOf( this.state.payment_mode ) != -1 ) {\n\n\t\t\treturn '';\n\n\t\t} else {\n\n\t\t\treturn 'disabled';\n\n\t\t}\n\t}\n\n\tvalidate_tithe_amount( all_fields_validate, modify_state ) {\n\n\t\t// Validate the Tithe Amount field\n\t\tif ( ! this.state.tithe_amount ) {\n\n\t\t\tall_fields_validate = false;\n\n\t\t\tif ( modify_state ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tinput_fields_tithe_amount_current_instruction: 'empty'\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( modify_state ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tinput_fields_tithe_amount_current_instruction: 'initial'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\tvalidate_currency( all_fields_validate, modify_state ) {\n\n\t\t// Validate the currency field\n\t\tif ( ! this.state.verified_currency ) {\n\n\t\t\tall_fields_validate = false;\n\n\t\t\tif ( modify_state ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tinput_fields_tithe_amount_current_instruction: 'invalid_currency'\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( modify_state ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tinput_fields_tithe_amount_current_instruction: 'initial'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\tcreate_stripe_payment_method() {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar this_component = this;\n\n\t\t\tvar billing_details = {\n\t\t\t\tbilling_details: {\n\t\t\t\t\taddress: {\n\t\t\t\t\t\tpostal_code: this.state.postal_code\n\t\t\t\t\t},\n\t\t\t\t\temail: this.state.email_value,\n\t\t\t\t\tname: this.props.name_value,\n\t\t\t\t},\n\t\t\t}\n\n\t\t\t// If no zip code was found\n\t\t\tif ( this.state.stripe_elements_fields_complete && ! billing_details.billing_details.address.postal_code ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tstripe_card_error_code: 'incomplete_zip'\n\t\t\t\t}, () => {\n\t\t\t\t\treject('incomplete_zip');\n\t\t\t\t\treturn;\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\t// Set the validation of this field\n\t\t\t\tthis.props.stripe.createPaymentMethod(\n\t\t\t\t\t'card',\n\t\t\t\t\tbilling_details\n\t\t\t\t).then(function(result) {\n\t\t\t\t\tif (result.error) {\n\n\t\t\t\t\t\t// Show error in payment form\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tstripe_payment_method: null,\n\t\t\t\t\t\t\tstripe_card_error_code: result.error.code\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\treject(result.error.code);\n\t\t\t\t\t\t\treturn result.error;\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tstripe_payment_method: result.paymentMethod,\n\t\t\t\t\t\t\tstripe_card_error_code: 'success'\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\tresolve( result.paymentMethod );\n\t\t\t\t\t\t\treturn result.paymentMethod;\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t});\n\n\t};\n\n\tvalidate_form( modify_state = true ) {\n\n\t\tvar all_fields_validate = true;\n\n\t\t// Credit Card form specific fields\n\t\tif ( 'credit_card' == this.state.payment_mode ) {\n\n\t\t\t// Name field\n\t\t\tif ( ! this.state.name_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t\t// Email field\n\t\t\tif ( ! this.state.email_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t\t// Stripe all in one field\n\t\t\tif ( ! this.state.stripe_payment_method ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t}\n\n\t\t// Fields present no matter the payment mode\n\t\tall_fields_validate = this.validate_tithe_amount( all_fields_validate, modify_state );\n\t\tall_fields_validate = this.validate_currency( all_fields_validate, modify_state );\n\n\t\t// Privacy Policy\n\t\tif ( this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body ) {\n\t\t\tif ( ! this.state.privacy_policy_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( modify_state ) {\n\n\t\t\tthis.setState( {\n\t\t\t\tform_validation_attempted: true\n\t\t\t} );\n\n\t\t\tif ( ! all_fields_validate ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: true,\n\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: false,\n\t\t\t\t\tcurrent_payment_state: 'initial',\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\thandleCreditCardSubmit( event ){\n\n\t\tevent.preventDefault();\n\n\t\tthis.setState( {\n\t\t\tcurrent_payment_state: 'attempting_payment'\n\t\t});\n\n\t\t// Create a stripe source using the submitted info\n\t\tthis.create_stripe_payment_method().then( () => {\n\n\t\t\t// Validate the fields\n\t\t\tvar allow_form_to_be_submitted = this.validate_form( true );\n\n\t\t\t// Prevent the form submission if a field didn't validate\n\t\t\tif ( ! allow_form_to_be_submitted ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t}, () => {\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tthis.do_ajax_stripe_transaction();\n\t\t\t}\n\n\t\t} ).catch((err) => {\n\n\t\t\tthis.setState( {\n\t\t\t\tstripe_card_error_code: err,\n\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t}, () => {\n\t\t\t\tconsole.log( err );\n\t\t\t});\n\n\t\t\t// Validate the fields\n\t\t\tvar allow_form_to_be_submitted = this.validate_form( true );\n\n\t\t\t// Prevent the form submission if a field didn't validate\n\t\t\treturn false;\n\n\t\t} );\n\n\t}\n\n\tdo_ajax_stripe_transaction() {\n\n\t\tthis.setState( {\n\t\t\tcurrent_payment_state: 'attempting_payment'\n\t\t});\n\n\t\tvar this_component = this;\n\n\t\t// Send the request to the server so that we can create a PaymentIntent\n\n\t\t// Use ajax to do the stripe transaction on the server using this data.\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'church_tithe_wp_get_payment_intent' );\n\t\tpostData.append('church_tithe_wp_stripe_payment_method_id', this_component.state.stripe_payment_method.id);\n\t\tpostData.append('church_tithe_wp_amount', this_component.state.tithe_amount);\n\t\tpostData.append('church_tithe_wp_name', this_component.state.name_value);\n\t\tpostData.append('church_tithe_wp_email', this_component.state.email_value);\n\t\tpostData.append('church_tithe_wp_currency', this_component.state.verified_currency.toLowerCase());\n\t\tpostData.append('church_tithe_wp_method', this_component.state.payment_method_name);\n\t\tpostData.append('church_tithe_wp_page_url', this_component.props.main_component.state.single_page_app_base_url);\n\t\tpostData.append('church_tithe_wp_recurring_value', this_component.state.recurring_value);\n\n\t\t// First off, generate and get a PaymentIntent on the server\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_get_payment_intent', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\t\tstripe_error_message: 'Looks like there was a problem. Status Code: ' + response.status\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Pass the PaymentIntent's client secret off to Stripe\n\t\t\t\t\t\t\tthis_component.props.stripe.confirmPaymentIntent(\n\t\t\t\t\t\t\t\tdata.client_secret,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsave_payment_method: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t).then( function( payment_intent_result ){\n\n\t\t\t\t\t\t\t\t// If the Payment Intent was unable to be confirmed\n\t\t\t\t\t\t\t\tif ( payment_intent_result.error ) {\n\n\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\t\t\t\t\t\tstripe_error_message: payment_intent_result.error.message\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// Success with no 3DS\n\t\t\t\t\t\t\t\t\tif ('succeeded' === payment_intent_result.paymentIntent.status) {\n\n\t\t\t\t\t\t\t\t\t\t// Send us to the purchase confirmation, where we'll send it to the server to be stored\n\t\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\tcurrent_payment_state: 'success'\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\tsession_id: data.session_id,\n\t\t\t\t\t\t\t\t\t\t\tuser_id: data.user_id,\n\t\t\t\t\t\t\t\t\t\t\tcurrent_transaction_info: data.transaction_info\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t// Wait for a moment and then show the purchase confirmation view\n\t\t\t\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\t\t\t\tthis_component.props.main_component.set_all_current_visual_states( {\n\t\t\t\t\t\t\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmation: {}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\t}, 1000 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// It didn't go through without 3DS so try it as a card payment so we can use Stripe simpified 3DS\n\t\t\t\t\t\t\t\t\t\t// We got a payment intent from Stripe, so process it now\n\t\t\t\t\t\t\t\t\t\tthis_component.props.stripe.handleCardPayment(\n\t\t\t\t\t\t\t\t\t\t\tdata.client_secret,\n\t\t\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t\t\t).then(function(payment_intent_result) {\n\t\t\t\t\t\t\t\t\t\t\t// If the response from handleCardPayment was no good\n\t\t\t\t\t\t\t\t\t\t\tif (payment_intent_result.error) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log( payment_intent_result.error );\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Display error.message in the UI.\n\t\t\t\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\t\t\t\t\t\t\t\t\tstripe_error_message: payment_intent_result.error.message\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// The PaymentIntent was successful\n\t\t\t\t\t\t\t\t\t\t\t\t// Send us to the purchase confirmation, where we'll send it to the server to be stored\n\t\t\t\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent_payment_state: 'success'\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsession_id: data.session_id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser_id: data.user_id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent_transaction_info: data.transaction_info\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Wait for a moment and then show the purchase confirmation view\n\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis_component.props.main_component.set_all_current_visual_states( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmation: {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\t\t\t}, 1000 );\n\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\t\t\t\tstripe_error_message: data.details\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\t\t\tstripe_error_message: 'Unable to make payment at this time. Please try again.'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tcurrent_payment_state: 'payment_attempt_failed',\n\t\t\t\t\tstripe_error_message: this_component.strings.general_server_error\n\t\t\t\t});\n\n\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\thandleAmountChange( event ) {\n\n\t\tvar tithe_amount = event.target.value;\n\n\t\t// If this is not a zero-decimal currency, multithely the amount by 100\n\t\tif ( 'zero_decimal' !== this.state.verified_currency_type ) {\n\t\t\tvar stripe_tithe_amount = Number( tithe_amount ) * 100;\n\t\t} else {\n\t\t\tvar stripe_tithe_amount = Number( tithe_amount );\n\t\t}\n\n\t\t// Make sure the math is all done correctly since javascript is strange at multithelication\n\t\tstripe_tithe_amount = Number( stripe_tithe_amount.toFixed(0) );\n\n\t\tif ( 1 <= stripe_tithe_amount ) {\n\n\t\t\t// Update the payment request button to match the amount\n\t\t\tif ( this.state.paymentRequest ) {\n\t\t\t\tthis.state.paymentRequest.update({\n\t\t\t\t\tcurrency: this.state.verified_currency.toLowerCase(),\n\t\t\t\t\ttotal: {\n\t\t\t\t\t\tlabel: this.props.main_component.state.unique_settings.strings.payment_request_label,\n\t\t\t\t\t\tamount: stripe_tithe_amount,\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tthis.setState( {\n\t\t\t\ttithe_amount: stripe_tithe_amount,\n\t\t\t\tpaymentRequest: this.state.paymentRequest\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\tstripe_tithe_amount = '';\n\n\t\t\tthis.setState( {\n\t\t\t\ttithe_amount: null,\n\t\t\t} );\n\t\t}\n\n\t\tif ( this.state.form_has_any_error ) {\n\t\t\tthis.validate_form( true );\n\t\t}\n\n\t};\n\n\thandlePaymentRequestValidateButton( event ) {\n\n\t\tthis.validate_form( true );\n\n\t};\n\n\tset_payment_mode( mode ) {\n\n\t\tif ( 'toggle' == mode ) {\n\t\t\tif ( 'payment_request' == this.state.payment_mode ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tpayment_mode: 'credit_card',\n\t\t\t\t\tpayment_method_name: 'basic-card',\n\t\t\t\t\tstripe_error_message: null,\n\t\t\t\t\tform_has_any_error: false,\n\t\t\t\t\tform_validation_attempted: false,\n\t\t\t\t}, () => {\n\n\t\t\t\t\t// Update the visual state of the entire Single Page Application so that the URL is updated as well\n\t\t\t\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\tform: {\n\t\t\t\t\t\t\t\t[this.state.payment_mode]: {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t//this.validate_form( true );\n\t\t\t\t} );\n\t\t\t} else if ( 'credit_card' == this.state.payment_mode ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tpayment_mode: 'payment_request',\n\t\t\t\t\tpayment_method_name: this.state.payment_request_button_name,\n\t\t\t\t\tstripe_error_message: null,\n\t\t\t\t\tform_has_any_error: false,\n\t\t\t\t\tform_validation_attempted: false,\n\t\t\t\t}, () => {\n\n\t\t\t\t\t// Update the visual state of the entire Single Page Application so that the URL is updated as well\n\t\t\t\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\t\t\t\tpayment: {\n\t\t\t\t\t\t\tform: {\n\t\t\t\t\t\t\t\t[this.state.payment_mode]: {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t//this.validate_form( true );\n\t\t\t\t} );\n\t\t\t}\n\t\t} else {\n\n\t\t\tvar payment_method_name = 'credit_card' === mode ? 'basic-card' : this.state.payment_request_button_name;\n\n\t\t\tthis.setState( {\n\t\t\t\tpayment_mode: mode,\n\t\t\t\tpayment_method_name: payment_method_name,\n\t\t\t\tstripe_error_message: null,\n\t\t\t\tform_has_any_error: false,\n\t\t\t\tform_validation_attempted: false,\n\t\t\t}, () => {\n\n\t\t\t\t// Update the visual state of the entire Single Page Application so that the URL is updated as well\n\t\t\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\t\t\tpayment: {\n\t\t\t\t\t\tform: {\n\t\t\t\t\t\t\t[this.state.payment_mode]: {}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t//this.validate_form( true );\n\t\t\t} );\n\t\t}\n\n\t}\n\n\tset_validation_and_value_of_field( state_validation_variable, is_validated, state_value_variable = null, state_value = null ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tif ( null == state_value_variable ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t},  () => {\n\t\t\t\t\tresolve( this.state );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t\t[state_value_variable]: state_value,\n\t\t\t\t}, () => {\n\t\t\t\t\tresolve( this.state );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t} );\n\t}\n\n\trender_payment_field( payment_field_to_render, array_of_visible_states ) {\n\n\t\tif ( typeof this['render_' + payment_field_to_render + '_field' ] === \"function\" ) {\n\n\t\t\tvar field_content = this['render_' + payment_field_to_render + '_field' ]();\n\n\t\t\t// If there's something to show\n\t\t\tif ( field_content ) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className={ 'church-tithe-wp-payment-field-container church-tithe-wp-payment-field-' + payment_field_to_render }>\n\t\t\t\t\t<div className={ 'church-tithe-wp-payment-field ' + this.get_view_class( array_of_visible_states ) }>\n\t\t\t\t\t{ this['render_' + payment_field_to_render + '_field' ]() }\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn( '' )\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log( 'Not found: ' + payment_field_to_render );\n\t\t}\n\n\t}\n\n\tget_currency_flag_class() {\n\n\t\tif ( ! this.state.verified_currency ) {\n\t\t\treturn ' flag';\n\t\t}\n\n\t\treturn ' flag flag-' + this.state.verified_currency.substring(0, 2).toLowerCase();\n\t}\n\n\ttoggle_currency_search() {\n\n\t\tif ( this.state.currency_search_visible ) {\n\t\t\tthis.setState( {\n\t\t\t\tcurrency_search_visible: false\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.setState( {\n\t\t\t\tcurrency_search_visible: true,\n\t\t\t\tuser_typed_currency: '',\n\t\t\t\tcurrency_typing_frozen: false\n\t\t\t}, () => {\n\t\t\t\tthis.currency_text_input.focus();\n\t\t\t} );\n\t\t}\n\t}\n\n\tconfirm_currency_exists( currency_to_confirm ) {\n\n\t\tvar this_component = this;\n\n\t\t// Use ajax to do the stripe transaction on the server using this data.\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'church_tithe_wp_confirm_currency');\n\t\tpostData.append('church_tithe_wp_currency_to_confirm', currency_to_confirm);\n\n\t\t// Confirm whether this currency is one supported or not, or if it even is a currency\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_confirm_currency', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tverified_currency: false,\n\t\t\t\t\t\tverified_currency_symbol: this_component.unique_settings.currency_symbol,\n\t\t\t\t\t\tverified_currency_type: this_component.unique_settings.currency_type\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\tif ( 'search_not_long_enough' == data.success_type ) {\n\t\t\t\t\t\t\t\t// Make no changes yet\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( 'more_than_one_currency_matched' == data.success_type ) {\n\t\t\t\t\t\t\t\t// Make no changes yet\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( 'one_currency_matched' == data.success_type ) {\n\t\t\t\t\t\t\t\t// Make changes now that only one currency matches\n\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_typed_currency: data.validated_currency,\n\t\t\t\t\t\t\t\t\tverified_currency: data.validated_currency,\n\t\t\t\t\t\t\t\t\tverified_currency_symbol: data.validated_currency_symbol,\n\t\t\t\t\t\t\t\t\tverified_currency_type: data.validated_currency_type,\n\t\t\t\t\t\t\t\t\tcurrency_search_visible: false,\n\t\t\t\t\t\t\t\t\t// Freeze typing for 3 seconds since we just forced a 3 letter currency into the field\n\t\t\t\t\t\t\t\t\tcurrency_typing_frozen: true\n\t\t\t\t\t\t\t\t}, () => {\n\n\t\t\t\t\t\t\t\t\t// Update the payment request button to match this new currency\n\t\t\t\t\t\t\t\t\tif ( 1 <= this_component.state.tithe_amount ) {\n\t\t\t\t\t\t\t\t\t\tif ( this_component.state.paymentRequest ) {\n\t\t\t\t\t\t\t\t\t\t\tthis_component.state.paymentRequest.update({\n\t\t\t\t\t\t\t\t\t\t\t\tcurrency: this_component.state.verified_currency.toLowerCase(),\n\t\t\t\t\t\t\t\t\t\t\t\ttotal: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'Pay',\n\t\t\t\t\t\t\t\t\t\t\t\t\tamount: this_component.state.tithe_amount,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\t\tpaymentRequest: this_component.state.paymentRequest\n\t\t\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\t\t\tthis_component.validate_currency( true, true );\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t// Wait 3 seconds, then unfreeze the currency typing\n\t\t\t\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\t\tcurrency_typing_frozen: false\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}, 3000 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// No valid currency was found, so reset it to the default currency.\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tverified_currency: false,\n\t\t\t\t\t\t\t\tverified_currency_symbol: this_component.unique_settings.currency_symbol,\n\t\t\t\t\t\t\t\tverified_currency_type: this_component.unique_settings.currency_type\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis_component.validate_currency( true, true );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tverified_currency: false,\n\t\t\t\t\t\t\tverified_currency_symbol: this_component.unique_settings.currency_symbol,\n\t\t\t\t\t\t\tverified_currency_type: this_component.unique_settings.currency_type\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tverified_currency: false,\n\t\t\t\t\tverified_currency_symbol: this_component.unique_settings.currency_symbol,\n\t\t\t\t\tverified_currency_type: this_component.unique_settings.currency_type\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\thandle_currency_typing( event ) {\n\n\t\tif ( this.state.currency_typing_frozen ) {\n\t\t\t// Allow the string to get shorter, but not longer for 3 seconds\n\t\t\tif ( event.target.value.length > this.state.user_typed_currency.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// If the string had gotten shorter, these are backspaces, so we can unfreeze the typing\n\t\t\telse {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrency_typing_frozen: false\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tif ( ! event.target.value ) {\n\t\t\tthis.setState( {\n\t\t\t\tuser_typed_currency: event.target.value.toUpperCase(),\n\t\t\t\tverified_currency: this.props.main_component.state.unique_settings.currency_code,\n\t\t\t\tverified_currency_symbol: this.props.main_component.state.unique_settings.currency_symbol\n\t\t\t} );\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tuser_typed_currency: event.target.value.toUpperCase()\n\t\t}, () => {\n\t\t\tthis.confirm_currency_exists( this.state.user_typed_currency );\n\t\t} );\n\t}\n\n\thandle_currency_enter( event ) {\n\t\t// Set the currency search field to be blank and focused\n\t\tthis.setState( {\n\t\t\tuser_typed_currency: '',\n\t\t} );\n\t}\n\n\thandle_currency_leave( event ) {\n\t\t// If the currency search field is blank and they leave the field, default it back to the original default currency\n\t\tif ( ! event.target.value ) {\n\t\t\tthis.setState( {\n\t\t\t\tuser_typed_currency: this.props.main_component.state.unique_settings.currency_code,\n\t\t\t\tverified_currency: this.props.main_component.state.unique_settings.currency_code,\n\t\t\t\tverified_currency_symbol: this.props.main_component.state.unique_settings.currency_symbol,\n\t\t\t\tcurrency_search_visible: false,\n\t\t\t}, () => {\n\t\t\t\tthis.validate_form();\n\t\t\t} );\n\t\t}\n\t}\n\n\trender_currency_switcher() {\n\n\t\tif ( this.state.currency_search_visible ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'church-tithe-wp-tithe-currency-code' }>\n\t\t\t\t\t<span className={ 'church-tithe-wp-tithe-currency-flag-container' }>\n\t\t\t\t\t\t{ ( () => {\n\t\t\t\t\t\t\t// If no flag is currenly found, show a spinner\n\t\t\t\t\t\t\tif( ! this.state.verified_currency ) {\n\t\t\t\t\t\t\t\treturn( <Church_Tithe_WP_Spinner color_mode=\"church-tithe-wp-spinner-dark\" /> );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// If a valid currency has been chosen, show the flag\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={ this.props.main_component.state.unique_settings.blank_flag_url }\n\t\t\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\t\t\tbackgroundImage: 'url(' + this.props.main_component.state.unique_settings.flag_sprite_url + ')',\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\tclassName={ 'church-tithe-wp-tithe-currency-flag' +  this.get_currency_flag_class() }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})()}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className={ 'church-tithe-wp-tithe-currency-text-container' }>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref={(input) => this.currency_text_input = input}\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={ this.state.user_typed_currency }\n\t\t\t\t\t\t\tonChange={ this.handle_currency_typing.bind( this ) }\n\t\t\t\t\t\t\tonFocus={ this.handle_currency_enter.bind( this ) }\n\t\t\t\t\t\t\tonBlur={ this.handle_currency_leave.bind( this ) }\n\t\t\t\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.currency_search_text }\n\t\t\t\t\t\t\tautoComplete={ 'off' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn(\n\t\t\t\t<button className={ 'church-tithe-wp-tithe-currency-code-toggle-btn' } onClick={ this.toggle_currency_search.bind( this ) }>\n\t\t\t\t\t<div className={ 'church-tithe-wp-tithe-currency-code' } >\n\t\t\t\t\t\t<span className={ 'church-tithe-wp-tithe-currency-flag-container' }>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={ this.props.main_component.state.unique_settings.blank_flag_url }\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\tbackgroundImage: 'url(' + this.props.main_component.state.unique_settings.flag_sprite_url + ')',\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tclassName={ 'church-tithe-wp-tithe-currency-flag' +  this.get_currency_flag_class() }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className={ 'church-tithe-wp-tithe-currency-text-container' }>\n\t\t\t\t\t\t\t{ this.state.verified_currency }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\t}\n\n\trender_amount_field() {\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Church_Tithe_WP_Input_Field_Instruction current_instruction={ this.state.input_fields_tithe_amount_current_instruction } instruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.tithe_amount } />\n\t\t\t\t<div className={ 'church-tithe-wp-amount-container' +  ( () => {\n\t\t\t\t\tif ( this.state.currency_search_visible ) {\n\t\t\t\t\t\treturn ' currency-search-visible';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t})()}>\n\t\t\t\t\t<div className={ 'church-tithe-wp-tithe-currency-symbol' }>{ this.state.verified_currency_symbol }</div>\n\t\t\t\t\t<div className={ 'church-tithe-wp-tithe-amount-input-container' }>\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tdisabled={ this.get_disabled_status( [ 'credit_card', 'payment_request' ] ) }\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\t\tstep={ this.get_amount_field_step_format() }\n\t\t\t\t\t\t\t\tclassName={ 'church-tithe-wp-tithe-amount-input' }\n\t\t\t\t\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.tithe_amount.placeholder_text }\n\t\t\t\t\t\t\t\tname=\"tithe-amount\"\n\t\t\t\t\t\t\t\tonChange={ this.handleAmountChange.bind( this ) }\n\t\t\t\t\t\t\t\tvalue={ this.get_visual_amount_for_input_field() }\n\t\t\t\t\t\t\t\tlang={ this.props.main_component.state.dynamic_settings.locale.replace(\"_\", \"-\") }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ 'church-tithe-wp-currency-switcher' }>\n\t\t\t\t\t\t{ this.render_currency_switcher() }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender_recurring_field() {\n\n\t\treturn(\n\t\t\t<Church_Tithe_WP_Radio_Field\n\t\t\t\tstate_validation_variable_name={ 'recurring_validated' }\n\t\t\t\tstate_value_variable_name={ 'recurring_value' }\n\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\tis_validated={ this.state.recurring_validated }\n\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.recurring }\n\n\t\t\t\ttype=\"radio\"\n\t\t\t\tradio_buttons={ this.props.main_component.state.unique_settings.recurring_options }\n\t\t\t\tclass_name={ 'church-tithe-wp-recurring' }\n\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.recurring.placeholder_text }\n\t\t\t\tname=\"recurring\"\n\t\t\t/>\n\t\t);\n\n\t}\n\n\trender_privacy_policy_field() {\n\n\t\tif ( this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body ) {\n\t\t\treturn (\n\t\t\t\t<Church_Tithe_WP_Terms_Field\n\t\t\t\tstate_validation_variable_name={ 'privacy_policy_validated' }\n\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\tis_validated={ this.state.privacy_policy_validated }\n\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy }\n\t\t\t\tterms_title={ this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_title }\n\t\t\t\tterms_body={ this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_body }\n\t\t\t\tterms_show_text={ this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_show_text }\n\t\t\t\tterms_hide_text={ this.props.main_component.state.unique_settings.strings.input_field_instructions.privacy_policy.terms_hide_text }\n\t\t\t\tdisabled={ this.get_disabled_status( [ 'credit_card', 'payment_request' ] ) }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\trender_email_field() {\n\n\t\treturn(\n\t\t\t<Church_Tithe_WP_Email_Field\n\t\t\tstate_validation_variable_name={ 'email_validated' }\n\t\t\tstate_value_variable_name={ 'email_value' }\n\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\tis_validated={ this.state.email_validated }\n\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.email }\n\t\t\tinitial_value={ this.props.main_component.state.unique_settings.strings.current_user_email }\n\n\t\t\ttype=\"email\"\n\t\t\tclass_name={ 'church-tithe-wp-email' }\n\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.email.placeholder_text }\n\t\t\tname=\"email\"\n\t\t\tdisabled={ this.get_disabled_status( [ 'credit_card' ] ) }\n\t\t\t/>\n\t\t)\n\t}\n\n\trender_name_field() {\n\t\treturn(\n\t\t\t<Church_Tithe_WP_Input_Field\n\t\t\tstate_validation_variable_name={ 'name_validated' }\n\t\t\tstate_value_variable_name={ 'name_value' }\n\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\tis_validated={ this.state.name_validated }\n\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.name }\n\t\t\tinitial_value={ this.props.main_component.state.unique_settings.strings.current_user_name }\n\n\t\t\ttype=\"text\"\n\t\t\tclass_name={ 'church-tithe-wp-name' }\n\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.name.placeholder_text }\n\t\t\tname=\"tithe-amount\"\n\t\t\tdisabled={ this.get_disabled_status( [ 'credit_card' ]) }\n\t\t\t/>\n\t\t)\n\t}\n\n\trender_all_in_one_credit_card_field() {\n\t\treturn(\n\t\t\t<Church_Tithe_WP_Stripe_All_In_One_Field\n\t\t\tcard_form={ this }\n\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\tstripe_card_error_code={ this.state.stripe_card_error_code }\n\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.stripe_all_in_one }\n\t\t\tstripe={ this.props.stripe }\n\t\t\tdisabled={ this.get_disabled_status( [ 'credit_card' ] ) }\n\t\t\tmobile_mode={ window.innerWidth > 600 ? false : true}\n\t\t\tzip_code_placeholder={ this.props.main_component.state.unique_settings.strings.zip_code_placeholder }\n\t\t\tcreate_stripe_source={ this.create_stripe_payment_method }\n\t\t\t/>\n\t\t)\n\n\t}\n\n\trender_payment_error_field() {\n\n\t\t// Handle form errors\n\t\tif ( this.state.form_has_any_error ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'church-tithe-wp-payment-error-message'}>{ this.props.main_component.state.unique_settings.strings.form_has_an_error }</div>\n\t\t\t)\n\t\t}\n\n\t\t// Handle errors after form was submitted\n\t\tif ( 'payment_attempt_failed' == this.state.current_payment_state && this.state.stripe_error_message ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'church-tithe-wp-payment-error-message'}>{ this.state.stripe_error_message }</div>\n\t\t\t)\n\t\t} else {\n\t\t\treturn( '' )\n\t\t}\n\t}\n\n\trender_recurring_text_on_payment_button() {\n\n\t\tif ( ! this.state.recurring_value || 'never' == this.state.recurring_value ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn ' ' + this.props.main_component.state.unique_settings.recurring_options[this.state.recurring_value].after_output.toLowerCase();\n\n\t}\n\n\trender_payment_request_button_field() {\n\n\t\tif ( 'initial' == this.state.current_payment_state || 'payment_attempt_failed' == this.state.current_payment_state ) {\n\n\t\t\t// We need to decide if we show the payment request button, or a \"Next\" button, which validates the form\n\t\t\tif ( this.validate_form( false ) ) {\n\n\t\t\t\treturn(\n\t\t\t\t\t<div>\n\t\t\t\t\t<PaymentRequestButtonElement\n\t\t\t\t\t\tpaymentRequest={ this.state.paymentRequest }\n\t\t\t\t\t\tclassName=\"PaymentRequestButton\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t// For more details on how to style the Payment Request Button, see:\n\t\t\t\t\t\t\t// https://stripe.com/docs/elements/payment-request-button#styling-the-element\n\t\t\t\t\t\t\tpaymentRequestButton: {\n\t\t\t\t\t\t\t\ttheme: 'dark',\n\t\t\t\t\t\t\t\theight: '50px',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t} else {\n\n\t\t\t\tvar currency_for_button = this.state.verified_currency ? ' (' + this.state.verified_currency + ')' : '';\n\t\t\t\tvar button_text = this.props.main_component.state.unique_settings.strings.payment_verb + ' ' + this.get_visual_amount() + this.render_recurring_text_on_payment_button() + currency_for_button;\n\n\t\t\t\treturn (\n\t\t\t\t\t<button className={ 'church-tithe-wp-pay-button' } type=\"button\" onClick={ this.handlePaymentRequestValidateButton.bind( this ) } disabled={ this.get_disabled_status( [ 'payment_request' ] ) }>{ button_text }</button>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tif ( 'attempting_payment' == this.state.current_payment_state || 'success' == this.state.current_payment_state ) {\n\t\t\treturn this.render_complete_payment_button_field();\n\t\t}\n\n\t}\n\n\trender_complete_payment_button_field() {\n\n\t\tvar button_class;\n\t\tvar button_text;\n\t\tvar currency_for_button = this.state.verified_currency ? ' (' + this.state.verified_currency + ')' : '';\n\n\t\tif ( 'initial' == this.state.current_payment_state ) {\n\t\t\tbutton_class = '';\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.payment_verb + ' ' + this.get_visual_amount() + this.render_recurring_text_on_payment_button() + currency_for_button;\n\t\t}\n\t\tif ( 'attempting_payment' == this.state.current_payment_state ) {\n\t\t\tbutton_class = ' church-tithe-wp-btn-attempting-payment';\n\t\t\tbutton_text = <Church_Tithe_WP_Spinner />;\n\t\t}\n\t\tif ( 'success' == this.state.current_payment_state ) {\n\t\t\tbutton_class = ' church-tithe-wp-btn-success';\n\t\t\tbutton_text = <span><Church_Tithe_WP_Checkmark /></span>;\n\t\t}\n\t\tif ( 'payment_attempt_failed' == this.state.current_payment_state ) {\n\t\t\tbutton_class = ' church-tithe-wp-btn-error';\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.complete_payment_button_error_text;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<button type=\"button\" onClick={this.handleCreditCardSubmit.bind( this )} disabled={ this.get_disabled_status( [ 'credit_card' ] ) } className={ 'church-tithe-wp-pay-button' + button_class }>{ button_text }</button>\n\t\t\t</div>\n\t\t)\n\t}\n\n\trender_payment_mode_toggler_field() {\n\n\n\t\t\treturn(\n\t\t\t\t<button type=\"button\" className={ 'church-tithe-wp-other-payment-option church-tithe-wp-input-instruction church-tithe-wp-text-button' } onClick={ this.set_payment_mode.bind( null, 'toggle' ) }>{ this.props.main_component.state.unique_settings.strings.other_payment_option }</button>\n\t\t\t)\n\n\t}\n\n\trender_manage_payments_button() {\n\n\n\t\t\treturn(\n\t\t\t\t<button type=\"button\" className={ 'church-tithe-wp-manage-payments-button church-tithe-wp-input-instruction church-tithe-wp-text-button' } onClick={ this.props.main_component.set_all_current_visual_states.bind( null, {\n\t\t\t\t\tmanage_payments: {}\n\t\t\t\t}, false ) }>{ this.props.main_component.state.unique_settings.strings.manage_payments_button_text }</button>\n\t\t\t)\n\n\t}\n\n\trender_card_form() {\n\n\t\tif( this.state.canDoPaymentRequest ) {\n\t\t\treturn(\n\t\t\t\t<form onSubmit={this.handleCreditCardSubmit}>\n\n\t\t\t\t{ this.render_payment_field( 'amount', [ 'credit_card', 'payment_request' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'recurring', [ 'credit_card', 'payment_request' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'email', [ 'credit_card' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'name', [ 'credit_card' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'all_in_one_credit_card', [ 'credit_card' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'privacy_policy', [ 'credit_card', 'payment_request' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'payment_error', [ 'credit_card', 'payment_request' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'payment_request_button', [ 'payment_request' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'complete_payment_button', [ 'credit_card' ] ) }\n\n\t\t\t\t<div className=\"church-tithe-wp-payment-field-container top-jar-wp-alternate-actions\">\n\t\t\t\t\t{ this.render_payment_mode_toggler_field() }\n\t\t\t\t\t<span className=\"top-jar-wp-alternate-actions-separator\">|</span>\n\t\t\t\t\t{ this.render_manage_payments_button() }\n\t\t\t\t</div>\n\n\t\t\t\t</form>\n\t\t\t)\n\t\t} else {\n\n\t\t\treturn(\n\t\t\t\t<form onSubmit={this.handleCreditCardSubmit}>\n\n\t\t\t\t{ this.render_payment_field( 'amount', [ 'credit_card', 'payment_request' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'recurring', [ 'credit_card', 'payment_request' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'email', [ 'credit_card' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'name', [ 'credit_card' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'all_in_one_credit_card', [ 'credit_card' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'privacy_policy', [ 'credit_card', 'payment_request' ] ) }\n\n\t\t\t\t{ this.render_payment_field( 'complete_payment_button', [ 'credit_card' ] ) }\n\n\t\t\t\t<div className=\"church-tithe-wp-payment-field-container top-jar-wp-alternate-actions\">\n\t\t\t\t\t{ this.render_manage_payments_button() }\n\t\t\t\t</div>\n\n\t\t\t\t</form>\n\t\t\t)\n\t\t}\n\t}\n\n\trender() {\n\n\t\tif ( ! this.state.payment_mode ) {\n\t\t\treturn(\n\t\t\t\t<Church_Tithe_WP_Spinner color_mode=\"church-tithe-wp-spinner-dark\" />\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\tthis.render_card_form()\n\t\t\t);\n\t\t}\n\t}\n}\nconst CardForm = injectStripe(Church_Tithe_WP_Card_Form);\n","var church_tithe_wp_vars = church_tithe_wp_js_vars.tithe_form_vars;\n\nwindow.Church_Tithe_WP_Manage_Payments = class Church_Tithe_WP_Manage_Payments extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tmap_of_visual_states: {\n\t\t\t\tmanage_payments: {\n\t\t\t\t\tvariable: {}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcurrent_visual_state: 'none',\n\t\t};\n\n\t\tthis.check_if_user_is_logged_in = this.check_if_user_is_logged_in.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\n\t\tthis.check_if_user_is_logged_in();\n\n\t\tchurch_tithe_wp_set_visual_state_of_component( {\n\t\t\tcomponent: this,\n\t\t\tdefault_visual_states: {\n\t\t\t\tparent_in_view: 'arrangements',\n\t\t\t\tparent_not_in_view: 'none'\n\t\t\t},\n\t\t\tname_of_visual_state_variable: 'current_visual_state'\n\t\t} );\n\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\tchurch_tithe_wp_set_visual_state_of_component( {\n\t\t\tcomponent: this,\n\t\t\tdefault_visual_states: {\n\t\t\t\tparent_in_view: 'arrangements',\n\t\t\t\tparent_not_in_view: 'none'\n\t\t\t},\n\t\t\tname_of_visual_state_variable: 'current_visual_state'\n\t\t} );\n\n\t}\n\n\tcheck_if_user_is_logged_in() {\n\n\t\tvar this_component = this;\n\n\t\tvar postData = new FormData();\n\t\tpostData.append( 'action', 'church_tithe_wp_check_if_user_logged_in' );\n\t\tpostData.append( 'church_tithe_wp_check_if_user_logged_in', true );\n\n\t\t// Check if this user is logged in, and set the state of \"Manage Payments\" accordingly\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_check_if_user_logged_in', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\tuser_logged_in: null\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\n\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\tuser_logged_in: null\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\tuser_logged_in: null\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\tget_current_title_string() {\n\n\t\t// If the current visual state is login\n\t\tif( ! this.props.main_component.state.user_logged_in ) {\n\n\t\t\treturn this.props.main_component.state.unique_settings.strings.login;\n\n\t\t}\n\n\t\t// If the current visual state is transactions\n\t\tif( 'transactions' == this.state.current_visual_state ) {\n\n\t\t\treturn this.props.main_component.state.unique_settings.strings.transactions_title;\n\n\t\t}\n\n\t\t// If the current visual state is transactions\n\t\tif( 'transaction' == this.state.current_visual_state ) {\n\n\t\t\treturn this.props.main_component.state.unique_settings.strings.transaction_title;\n\n\t\t}\n\n\t\t// If the current visual state is arrangements\n\t\tif( 'arrangements' == this.state.current_visual_state ) {\n\n\t\t\treturn this.props.main_component.state.unique_settings.strings.arrangements_title;\n\n\t\t}\n\n\t\t// If the current visual state is arrangement\n\t\tif( 'arrangement' == this.state.current_visual_state ) {\n\n\t\t\treturn this.props.main_component.state.unique_settings.strings.arrangement_title;\n\n\t\t}\n\t}\n\n\tmaybe_render_close_button() {\n\n\t\tif ( ! this.props.show_close_button ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"church-tithe-wp-close-btn\" aria-label=\"Close\" onClick={ this.props.main_component.handle_visual_state_change_click_event.bind( this, {}, {} ) }><img src={ this.props.main_component.state.dynamic_settings.close_button_url } /></div>\n\t\t);\n\t}\n\n\trender() {\n\n\t\t// If the user is not logged in, show the login form\n\t\tif ( ! this.props.main_component.state.user_logged_in ) {\n\n\t\t\treturn(\n\t\t\t\t<div className=\"church-tithe-wp-manage-payments\">\n\n\t\t\t\t\t<div className=\"church-tithe-wp-component-box\">\n\n\t\t\t\t\t\t<header className=\"church-tithe-wp-header\" role=\"banner\">\n\t\t\t\t\t\t\t<h1 className=\"church-tithe-wp-header-title\">{ this.get_current_title_string() }</h1>\n\t\t\t\t\t\t\t{ this.maybe_render_close_button() }\n\t\t\t\t\t\t</header>\n\n\t\t\t\t\t\t<div className={ 'church-tithe-wp-payment-box-view church-tithe-wp-manage-payments-view' }>\n\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-login-view' }>\n\t\t\t\t\t\t\t\t<Church_Tithe_WP_Login\n\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.props.check_if_user_is_logged_in }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"church-tithe-wp-manage-payments\">\n\n\t\t\t\t<div className=\"church-tithe-wp-component-box\">\n\n\t\t\t\t\t<header className=\"church-tithe-wp-header\" role=\"banner\">\n\t\t\t\t\t\t<h1 className=\"church-tithe-wp-header-title\">{ this.get_current_title_string() }</h1>\n\t\t\t\t\t\t{ this.maybe_render_close_button() }\n\t\t\t\t\t</header>\n\n\t\t\t\t\t<div className={ 'church-tithe-wp-payment-box-view church-tithe-wp-manage-payments-view' }>\n\n\t\t\t\t\t\t{ ( () => {\n\n\t\t\t\t\t\t\t// If the current visual state is \"none\"\n\t\t\t\t\t\t\tif( 'none' == this.state.current_visual_state ) {\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-manage-payments-view ' + church_tithe_wp_get_current_view_class( this, ['transactions', 'arrangements'] ) }>\n\t\t\t\t\t\t\t\t\t\t\t<Church_Tithe_WP_Manage_Payments_Nav\n\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent_visual_state={ this.state.current_visual_state }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-manage-payments-view ' + church_tithe_wp_get_current_view_class( this, ['transactions'] ) }>\n\t\t\t\t\t\t\t\t\t\t\t<Church_Tithe_WP_Transactions\n\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.check_if_user_is_logged_in.bind( this ) }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-manage-payments-view ' + church_tithe_wp_get_current_view_class( this, ['transaction'] ) }>\n\t\t\t\t\t\t\t\t\t\t\t{ ( () => {\n\t\t\t\t\t\t\t\t\t\t\t\t// Re-render this component from scratch so that no data is left-over from old loads\n\t\t\t\t\t\t\t\t\t\t\t\tif ( 'transaction' == this.state.current_visual_state ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Church_Tithe_WP_Payment_Confirmation\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdo_after_payment_actions={ false }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} )() }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-manage-payments-view ' + church_tithe_wp_get_current_view_class( this, ['arrangements'] ) }>\n\t\t\t\t\t\t\t\t\t\t\t<Church_Tithe_WP_Arrangements\n\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.check_if_user_is_logged_in.bind( this ) }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={ 'church-tithe-wp-manage-payments-view ' + church_tithe_wp_get_current_view_class( this, ['arrangement'] ) }>\n\t\t\t\t\t\t\t\t\t\t\t<Church_Tithe_WP_Arrangement\n\t\t\t\t\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.check_if_user_is_logged_in.bind( this ) }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} )() }\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default Church_Tithe_WP_Manage_Payments;\n","var church_tithe_wp_vars = church_tithe_wp_js_vars.tithe_form_vars;\n\nwindow.Church_Tithe_WP_Manage_Payments_Nav = class Church_Tithe_WP_Manage_Payments_Nav extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\n\t}\n\n\tset_view_to_transactions() {\n\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\tmanage_payments: {\n\t\t\t\ttransactions: {}\n\t\t\t}\n\t\t} )\n\t}\n\n\tset_view_to_arrangements() {\n\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\tmanage_payments: {\n\t\t\t\tarrangements: {}\n\t\t\t}\n\t\t} )\n\t}\n\n\tget_current_button_class( button_in_question ) {\n\t\tif ( this.props.current_visual_state == button_in_question ) {\n\t\t\treturn ' church-tithe-wp-manage-nav-current-btn';\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\trender() {\n\n\t\tif ( this.props.main_component.state.user_logged_in ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"church-tithe-wp-manage-payments-nav-container-full\">\n\t\t\t\t\t<div className=\"church-tithe-wp-manage-payments-nav-container-center\">\n\t\t\t\t\t\t<div className=\"church-tithe-wp-manage-payments-nav\">\n\t\t\t\t\t\t\t<div className={ \"church-tithe-wp-arrangements-btn\" + this.get_current_button_class( 'arrangements' ) }>\n\t\t\t\t\t\t\t\t<button className=\"church-tithe-wp-text-button\" onClick={ this.set_view_to_arrangements.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.arrangements_title }</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={ \"church-tithe-wp-transactions-btn\"  + this.get_current_button_class( 'transactions' ) }>\n\t\t\t\t\t\t\t\t<button className=\"church-tithe-wp-text-button\" onClick={ this.set_view_to_transactions.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.transactions_title }</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn( '' );\n\t\t}\n\t}\n}\nexport default Church_Tithe_WP_Manage_Payments_Nav;\n","var church_tithe_wp_vars = church_tithe_wp_js_vars.tithe_form_vars;\n\nwindow.Church_Tithe_WP_Login = class Church_Tithe_WP_Login extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrent_visual_state: 'login_form',\n\t\t\tlogin_error_message: null,\n\n\t\t\temail_value: null,\n\t\t\temail_validated:false,\n\n\t\t\tlogin_code_digit_1: '',\n\t\t\tlogin_code_digit_2: '',\n\t\t\tlogin_code_digit_3: '',\n\t\t\tlogin_code_digit_4: '',\n\t\t\tlogin_code_digit_5: '',\n\t\t\tlogin_code_digit_6: '',\n\n\t\t};\n\n\t\tthis.handle_login_form_submit = this.handle_login_form_submit.bind( this );\n\n\t\t// Set up refs for the input fields\n\t\tthis.login_code_digit_1 = React.createRef();\n\t\tthis.login_code_digit_2 = React.createRef();\n\t\tthis.login_code_digit_3 = React.createRef();\n\t\tthis.login_code_digit_4 = React.createRef();\n\t\tthis.login_code_digit_5 = React.createRef();\n\t\tthis.login_code_digit_6 = React.createRef();\n\t}\n\n\tcomponentDidMount( ) {\n\t\tthis.setState( {\n\t\t\tprior_all_current_visual_states: this.props.main_component.state.all_current_visual_states\n\t\t} );\n \t}\n\n\trequest_login_email() {\n\n\t\tthis.setState( {\n\t\t\tcurrent_visual_state: 'loading',\n\t\t\tlogin_error_message: null\n\t\t});\n\n\t\tvar this_component = this;\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'church_tithe_wp_email_login' );\n\t\tpostData.append('church_tithe_wp_email', this_component.state.email_value);\n\t\tpostData.append('church_tithe_wp_email_login_nonce', this.props.main_component.state.frontend_nonces.email_login_nonce);\n\n\t\t// Request a login email\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_email_login', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tcurrent_visual_state: 'login_form',\n\t\t\t\t\t\tlogin_error_message: 'Looks like there was a problem. Status Code: ' + response.status\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Change the view to accept an code, with a 6 digit input\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_visual_state: 'login_code_input',\n\t\t\t\t\t\t\t\tlogin_error_message: null,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_visual_state: 'login_form',\n\t\t\t\t\t\t\t\tlogin_error_message: data.details,\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis_component.login_code_digit_1.focus();\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tcurrent_visual_state: 'login_form',\n\t\t\t\t\t\t\tlogin_error_message: this_component.props.main_component.strings.general_server_error\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tcurrent_visual_state: 'login_form',\n\t\t\t\t\tlogin_error_message: this_component.props.main_component.strings.general_server_error\n\t\t\t\t});\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\t}\n\n\tattempt_to_login() {\n\n\t\tthis.setState( {\n\t\t\tcurrent_visual_state: 'loading',\n\t\t\tlogin_error_message: null\n\t\t});\n\n\t\tvar this_component = this;\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'church_tithe_wp_attempt_user_login' );\n\t\tpostData.append('church_tithe_wp_email', this_component.state.email_value);\n\t\tpostData.append('church_tithe_wp_login_code', this_component.state.login_code);\n\t\tpostData.append('church_tithe_wp_login_nonce', this.props.main_component.state.frontend_nonces.login_nonce);\n\n\t\t// Handle a login over email\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_attempt_user_login', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tcurrent_visual_state: 'login_code_input',\n\t\t\t\t\t\tlogin_error_message: 'Looks like there was a problem. Status Code: ' + response.status\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Show the checkmark that the login was successful\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_visual_state: 'login_attempt_succeeded',\n\t\t\t\t\t\t\t\tlogin_error_message: null,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// After .3 seconds of showing the checkmark, refresh the page\n\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t}, 300 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_visual_state: 'login_code_input',\n\t\t\t\t\t\t\t\tlogin_error_message: data.details,\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis_component.login_code_digit_6.focus();\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\n\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\tcurrent_visual_state: 'login_code_input',\n\t\t\t\t\t\t\tlogin_error_message: this_component.props.main_component.strings.general_server_error\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\n\t\t\t\tthis_component.setState( {\n\t\t\t\t\tcurrent_visual_state: 'login_code_input',\n\t\t\t\t\tlogin_error_message: this_component.props.main_component.strings.general_server_error\n\t\t\t\t});\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\t}\n\n\tset_validation_and_value_of_field( state_validation_variable, is_validated, state_value_variable = null, state_value = null ) {\n\n\t\tif ( null == state_value_variable ) {\n\t\t\tthis.setState( {\n\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.setState( {\n\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t[state_value_variable]: state_value,\n\t\t\t} );\n\t\t}\n\t}\n\n\tvalidate_form( modify_state = true ) {\n\n\t\tvar all_fields_validate = true;\n\n\t\t// Email field\n\t\tif ( ! this.state.email_validated ) {\n\t\t\tall_fields_validate = false;\n\t\t}\n\n\t\tif ( modify_state ) {\n\n\t\t\tthis.setState( {\n\t\t\t\tform_validation_attempted: true\n\t\t\t} );\n\n\t\t\tif ( ! all_fields_validate ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: true\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\thandle_login_form_submit( event ){\n\n\t\tevent.preventDefault();\n\n\t\t// Validate the fields\n\t\tvar allow_form_to_be_submitted = this.validate_form( true );\n\n\t\t// Prevent the form submission if a field didn't validate\n\t\tif ( ! allow_form_to_be_submitted ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.request_login_email();\n\n\t}\n\n\trender_login_field( payment_field_to_render ) {\n\n\t\tif ( typeof this['render_' + payment_field_to_render + '_field' ] === \"function\" ) {\n\n\t\t\tvar field_content = this['render_' + payment_field_to_render + '_field' ]();\n\n\t\t\t// If there's something to show\n\t\t\tif ( field_content ) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className={ 'church-tithe-wp-payment-field-container church-tithe-wp-payment-field-' + payment_field_to_render }>\n\t\t\t\t\t<div className={ 'church-tithe-wp-payment-field' }>\n\t\t\t\t\t{ this['render_' + payment_field_to_render + '_field' ]() }\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn( '' )\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log( 'Not found: ' + payment_field_to_render );\n\t\t}\n\n\t}\n\n\trender_login_code_field( digit ) {\n\t\treturn(\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalue={ this.state['login_code_digit_' + digit] }\n\t\t\t\tref={ (input) => { this['login_code_digit_' + digit] = input; } }\n\t\t\t\tonChange={ this.handle_login_form_digit_change.bind( this, digit ) }\n\t\t\t\tonKeyUp={ this.handle_login_form_digit_backspace.bind( this, digit ) }\n\t\t\t\tonFocus={ this.handle_login_form_digit_focus.bind( this, digit ) }\n\t\t\t/>\n\t\t)\n\t}\n\n\trender_login_code_fields() {\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"church-tithe-wp-input-instruction\">{ this.props.main_component.state.unique_settings.strings.input_field_instructions.login_code.initial.instruction_message }</div>\n\t\t\t\t<div className=\"church-tithe-wp-login-code-fields\">\n\t\t\t\t\t{ this.render_login_code_field( 1 ) }\n\t\t\t\t\t{ this.render_login_code_field( 2 ) }\n\t\t\t\t\t{ this.render_login_code_field( 3 ) }\n\t\t\t\t\t<div> - </div>\n\t\t\t\t\t{ this.render_login_code_field( 4 ) }\n\t\t\t\t\t{ this.render_login_code_field( 5 ) }\n\t\t\t\t\t{ this.render_login_code_field( 6 ) }\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\thandle_login_form_digit_change( digit, event ) {\n\n\t\tvar all_characters;\n\t\tvar value;\n\n\t\t// Only allow numbers (not using the HTML5 \"number\" field because of the \"step\" arrows.\n\t\tif ( ! Number.isInteger( parseInt( event.target.value ) ) ) {\n\t\t\t// Only return if there is a value. Blank values (which are \"not numbers\") are allowed.\n\t\t\tif ( event.target.value ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// If more than 1 digit was entered\n\t\tif ( event.target.value.length > 1 ) {\n\n\t\t\tvalue = event.target.value;\n\n\t\t\tconsole.log( value );\n\n\t\t\t// Spread the numbers out over all input fields. This allows for pasting of the whole number.\n\t\t\tall_characters = value.split(\"\");\n\n\t\t\tthis.setState( {\n\t\t\t\tlogin_code_digit_1: all_characters[0] ? all_characters[0] : '',\n\t\t\t\tlogin_code_digit_2: all_characters[1] ? all_characters[1] : '',\n\t\t\t\tlogin_code_digit_3: all_characters[2] ? all_characters[2] : '',\n\t\t\t\tlogin_code_digit_4: all_characters[3] ? all_characters[3] : '',\n\t\t\t\tlogin_code_digit_5: all_characters[4] ? all_characters[4] : '',\n\t\t\t\tlogin_code_digit_6: all_characters[5] ? all_characters[5] : '',\n\t\t\t}, () => {\n\t\t\t\tthis.after_login_code_digit_set( digit, true );\n\t\t\t} );\n\t\t} else {\n\n\t\t\tthis.setState( {\n\t\t\t\t['login_code_digit_' + digit]: event.target.value\n\t\t\t}, () => {\n\t\t\t\tthis.after_login_code_digit_set( digit, false );\n\t\t\t} );\n\t\t}\n\n\t}\n\n\tafter_login_code_digit_set( digit, multithele_characters_entered ){\n\n\t\tvar login_code;\n\t\tvar next_digit = digit + 1;\n\n\t\t// If there is another field to switch to, switch to it.\n\t\tif ( ! multithele_characters_entered && this.state['login_code_digit_' + digit] && this['login_code_digit_' + next_digit] ) {\n\t\t\tthis['login_code_digit_' + next_digit].focus();\n\n\t\t\t// If there's not another field to switch to, we're at the end, and we can check the server if the code matches.\n\t\t} else {\n\n\t\t\t// Combine all of the digit values into one\n\t\t\tlogin_code = (\n\t\t\t\tthis.state.login_code_digit_1 +\n\t\t\t\tthis.state.login_code_digit_2 +\n\t\t\t\tthis.state.login_code_digit_3 +\n\t\t\t\tthis.state.login_code_digit_4 +\n\t\t\t\tthis.state.login_code_digit_5 +\n\t\t\t\tthis.state.login_code_digit_6\n\t\t\t);\n\n\t\t\tthis.setState( {\n\t\t\t\tlogin_code: login_code\n\t\t\t}, () => {\n\n\t\t\t\tif ( 6 === login_code.length ) {\n\t\t\t\t\tthis.attempt_to_login();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t}\n\n\thandle_login_form_digit_backspace( digit, event ) {\n\n\t\tvar select_all_pressed = false;\n\n\t\tif ( event.keyCode !== 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If cntrl+a has been pushed, select and remove all\n\t\tif ( select_all_pressed ) {\n\t\t\t// Clear all entered values in the login code inputs\n\t\t\tthis.setState( {\n\t\t\t\tlogin_code: '',\n\t\t\t\tlogin_code_digit_1: '',\n\t\t\t\tlogin_code_digit_2: '',\n\t\t\t\tlogin_code_digit_3: '',\n\t\t\t\tlogin_code_digit_4: '',\n\t\t\t\tlogin_code_digit_5: '',\n\t\t\t\tlogin_code_digit_6: '',\n\t\t\t}, () => {\n\n\t\t\t\t// Refocus on the first digit\n\t\t\t\tthis.login_code_digit_1.focus();\n\n\t\t\t} );\n\t\t} else {\n\n\t\t\t// If there's still a value in this field, don't switch fields.\n\t\t\tif ( this.state['login_code_digit_' + digit] ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar previous_digit = digit - 1;\n\n\t\t\t// If there's a previous digit, focus on it\n\t\t\tif ( this['login_code_digit_' + previous_digit] ) {\n\t\t\t\tthis['login_code_digit_' + previous_digit].focus();\n\t\t\t}\n\t\t}\n\t}\n\n\thandle_login_form_digit_focus( digit, event ) {\n\n\t\t// If the form is in a state of error, don't do anything upon focus.\n\t\tif ( this.state.login_error_message && document.activeElement === this.login_code_digit_6 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tlogin_error_message: null\n\t\t} );\n\n\t\tthis.setState( {\n\t\t\t['login_code_digit_' + digit]: ''\n\t\t} );\n\n\t}\n\n\trender_email_field() {\n\n\t\treturn(\n\t\t\t<Church_Tithe_WP_Email_Field\n\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\tstate_validation_variable_name={ 'email_validated' }\n\t\t\t\tstate_value_variable_name={ 'email_value' }\n\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\tis_validated={ this.state.email_validated }\n\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.email_for_login_code }\n\t\t\t\tinitial_value={ this.props.main_component.state.current_transaction_info ? this.props.main_component.state.current_transaction_info.email : ''  }\n\n\t\t\t\ttype=\"email\"\n\t\t\t\tclass_name={ 'church-tithe-wp-email' }\n\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.email_for_login_code.placeholder_text }\n\t\t\t\tname=\"email\"\n\t\t\t\tediting_key={ 'strings/input_field_instructions/email/[current_key_here]/instruction_message' }\n\t\t\t/>\n\t\t)\n\t}\n\n\trender_login_error_field() {\n\n\t\t// Handle pre-attempt form errors\n\t\tif ( this.state.form_has_any_error ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'church-tithe-wp-payment-error-message'}>{ this.props.main_component.state.unique_settings.strings.login_form_has_an_error }</div>\n\t\t\t)\n\t\t} else if ( this.state.login_error_message ) {\n\t\t\treturn(\n\t\t\t\t<div className={ 'church-tithe-wp-payment-error-message'}>{ this.state.login_error_message }</div>\n\t\t\t)\n\t\t} else {\n\t\t\treturn( '' )\n\t\t}\n\t}\n\n\trender_login_submit_button_field() {\n\n\t\tvar button_class;\n\t\tvar button_text;\n\n\t\tif ( 'login_form' == this.state.current_visual_state ) {\n\t\t\tbutton_class = '';\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.login_button_text;\n\t\t}\n\t\tif ( 'loading' == this.state.current_visual_state ) {\n\t\t\tbutton_class = ' church-tithe-wp-btn-attempting-payment';\n\t\t\tbutton_text = <Church_Tithe_WP_Spinner />;\n\t\t}\n\t\tif ( 'login_attempt_succeeded' == this.state.current_visual_state ) {\n\t\t\tbutton_class = ' church-tithe-wp-btn-success';\n\t\t\tbutton_text = <span><Church_Tithe_WP_Checkmark /></span>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t<button type=\"submit\" className={ 'church-tithe-wp-pay-button' + button_class }>{ button_text }</button>\n\t\t\t</div>\n\t\t)\n\t}\n\n\tget_current_view_class( views_in_question ) {\n\n\t\tvar currently_in_view_class_name = 'church-tithe-wp-current-view';\n\t\tvar hidden_class_name = 'church-tithe-wp-hidden-view';\n\t\tvar current_visual_state = this.state.current_visual_state;\n\n\t\t// If the current visual state matches one of the view states we are getting the class for\n\t\tif( views_in_question.indexOf( current_visual_state ) != -1 ) {\n\n\t\t\treturn ' ' + currently_in_view_class_name;\n\n\t\t} else {\n\n\t\t\treturn ' ' + hidden_class_name;\n\n\t\t}\n\n\t}\n\n\trender() {\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={ 'church-tithe-wp-login-form-loading' + this.get_current_view_class( [ 'loading' ] ) }>\n\t\t\t\t\t<Church_Tithe_WP_Spinner color_mode=\"church-tithe-wp-spinner-dark\" />\n\t\t\t\t</div>\n\t\t\t\t<div className={ 'church-tithe-wp-login-form' + this.get_current_view_class( [ 'login_form' ] ) }>\n\t\t\t\t\t<form onSubmit={this.handle_login_form_submit}>\n\t\t\t\t\t\t{ this.render_login_field( 'email' ) }\n\t\t\t\t\t\t{ this.render_login_field( 'login_error' ) }\n\t\t\t\t\t\t{ this.render_login_field( 'login_submit_button') }\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t\t<div className={ 'church-tithe-wp-login-code-input' + this.get_current_view_class( [ 'login_code_input' ] ) }>\n\t\t\t\t\t\t{ this.render_login_code_fields() }\n\t\t\t\t\t\t{ this.render_login_field( 'login_error' ) }\n\t\t\t\t</div>\n\t\t\t\t<div className={ 'church-tithe-wp-login-success' + this.get_current_view_class( [ 'login_attempt_succeeded' ] ) }>\n\t\t\t\t\t<Church_Tithe_WP_Checkmark />\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\nexport default Church_Tithe_WP_Manage_Payments;\n","import Church_Tithe_WP_List_View from './church-tithe-wp-list-view.js'\nvar church_tithe_wp_vars = church_tithe_wp_js_vars.tithe_form_vars;\n\nwindow.Church_Tithe_WP_Transactions = class Church_Tithe_WP_Transactions extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrent_visual_state: 'none',\n\t\t\ttotal_items: 0,\n\t\t\tcurrent_transaction_info: null\n\t\t};\n\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\t// If the user is not logged in, show the login form\n\t\tif ( ! this.props.main_component.state.user_logged_in ) {\n\n\t\t\tif ( 'login' != this.state.current_visual_state ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrent_visual_state: 'login'\n\t\t\t\t} );\n\t\t\t}\n\n\t\t}\n\n\t\t// If the user is logged in, show the transactions screen\n\t\telse {\n\n\t\t\t// Prevent an infinite loop\n\t\t\tif ( 'transactions' != this.state.current_visual_state && 'fetching_data' != this.state.current_visual_state ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrent_visual_state: 'transactions'\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// If no transactions have been loaded from the server, load some\n\t\t\tif ( 'transactions' == this.state.current_visual_state && ! this.state.rows ) {\n\t\t\t\tthis.get_transactions( 1, 10, '' );\n\t\t\t}\n\n\t\t}\n\n\t\t// If the 3rd level in the URL exists, (this could likely be more robust) set the current item to that\n\t\tif (\n\t\t\tObject.keys(this.props.main_component.state.all_current_visual_states)[0] &&\n\t\t\tthis.props.main_component.state.all_current_visual_states['manage_payments'] &&\n\t\t\tObject.keys(this.props.main_component.state.all_current_visual_states['manage_payments'])[0]\n\t\t) {\n\t\t\tvar second_slug = Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'])[0];\n\n\t\t\tif ( 'transaction' == second_slug ) {\n\t\t\t\tif( Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'][second_slug])[0] ) {\n\t\t\t\t\tvar third_slug = Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'][second_slug])[0];\n\n\t\t\t\t\t// If the current single item ID does not match the item ID in the URL\n\t\t\t\t\tif ( ! this.props.main_component.state.current_transaction_info ) {\n\t\t\t\t\t\tthis.get_transaction( third_slug );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.props.main_component.state.current_transaction_info && third_slug !== this.props.main_component.state.current_transaction_info.transaction_id ) {\n\t\t\t\t\t\tthis.get_transaction( third_slug );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\tget_transactions( current_page, items_per_page, search_term ) {\n\n\t\tvar this_component = this;\n\n\t\tthis.setState( {\n\t\t\tcurrent_visual_state: 'fetching_data'\n\t\t});\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'church_tithe_wp_get_transactions' );\n\t\tpostData.append('church_tithe_wp_current_page', current_page);\n\t\tpostData.append('church_tithe_wp_items_per_page', items_per_page);\n\t\tpostData.append('church_tithe_wp_search_term', search_term);\n\t\tpostData.append('church_tithe_wp_get_transactions_nonce', this.props.main_component.state.frontend_nonces.get_transactions_nonce);\n\n\t\t// Get the transactions defined by the paramaters in the state\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_get_transactions', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t// Remove transactions since none were found\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tcolumns: null,\n\t\t\t\t\t\trows: null,\n\t\t\t\t\t\ttotal_items: 0\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Reset the check user nonce\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_visual_state: 'transactions',\n\t\t\t\t\t\t\t\t\tcolumns: data.columns,\n\t\t\t\t\t\t\t\t\trows: data.rows,\n\t\t\t\t\t\t\t\t\ttotal_items: data.total_items\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Remove transactions since none were found\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tcolumns: null,\n\t\t\t\t\t\t\t\trows: null,\n\t\t\t\t\t\t\t\ttotal_items: 0\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\tget_transaction( transaction_id ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar this_component = this;\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'church_tithe_wp_get_transaction' );\n\t\t\tpostData.append('church_tithe_wp_transaction_id', transaction_id);\n\t\t\tpostData.append('church_tithe_wp_get_transaction_nonce', this.props.main_component.state.frontend_nonces.get_transaction_nonce);\n\n\t\t\t// Get the transactions defined by the paramaters in the state\n\t\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_get_transaction', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\tcurrent_transaction_info: null\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\t\tcurrent_transaction_info: data.transaction_info,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\t\tcurrent_transaction_info: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\tfunction( err ) {\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\ton_row_click( row, event ) {\n\n\t\tthis.get_transaction( row.id.value ).then( () => {\n\t\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\t\tmanage_payments: {\n\t\t\t\t\ttransaction: {\n\t\t\t\t\t\t[row.id.value]: {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t}\n\n\trender() {\n\n\t\tif ( 'none' == this.state.current_visual_state ) {\n\t\t\treturn ( '' );\n\t\t} else {\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className={ 'church-tithe-wp-login-view ' + church_tithe_wp_get_current_view_class( this, ['login'] ) }>\n\t\t\t\t\t\t<Church_Tithe_WP_Login\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.props.check_if_user_is_logged_in }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ 'church-tithe-wp-manage-transactions-view ' + church_tithe_wp_get_current_view_class( this, ['transactions','fetching_data'] ) }>\n\t\t\t\t\t\t\t<Church_Tithe_WP_List_View\n\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\tcurrent_visual_state={ this.state.current_visual_state }\n\t\t\t\t\t\t\t\trows={ this.state.rows }\n\t\t\t\t\t\t\t\tcolumns={ this.state.columns }\n\t\t\t\t\t\t\t\ttotal_items={ this.state.total_items }\n\t\t\t\t\t\t\t\tget_rows_and_columns={ this.get_transactions.bind( this ) }\n\t\t\t\t\t\t\t\tcurrent_visual_state={ this.state.current_visual_state }\n\t\t\t\t\t\t\t\ton_row_click={ this.on_row_click.bind( this ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t}\n}\nexport default Church_Tithe_WP_Transactions;\n","import Church_Tithe_WP_List_View from './church-tithe-wp-list-view.js'\nvar church_tithe_wp_vars = church_tithe_wp_js_vars.tithe_form_vars;\n\nwindow.Church_Tithe_WP_Arrangements = class Church_Tithe_WP_Arrangements extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcurrent_visual_state: 'none',\n\t\t\ttotal_items: 0,\n\t\t\tcurrent_arrangement_info: null,\n\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\tfetching_arrangements: false,\n\t\t\tfetching_arrangement: false,\n\t\t};\n\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.check_if_user_is_logged_in();\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\t// If the user is not logged in, show the login form\n\t\tif ( ! this.props.main_component.state.user_logged_in ) {\n\n\t\t\tif ( 'login' != this.state.current_visual_state ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrent_visual_state: 'login'\n\t\t\t\t} );\n\t\t\t}\n\n\t\t}\n\n\t\t// If the user is logged in, show the arrangements screen\n\t\telse {\n\n\t\t\t// Prevent an infinite loop\n\t\t\tif ( 'arrangements' !== this.state.current_visual_state && 'fetching_data' != this.state.current_visual_state ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tcurrent_visual_state: 'arrangements'\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// If no arrangements have been loaded from the server, load some\n\t\t\tif ( 'arrangements' == this.state.current_visual_state && ! this.state.rows ) {\n\t\t\t\tthis.get_arrangements( 1, 10, '' );\n\t\t\t}\n\n\t\t}\n\n\t\t// If the main component is telling us to reload the arrangements\n\t\tif ( this.props.main_component.state.reload_arrangements ) {\n\t\t\tthis.props.main_component.setState( {\n\t\t\t\treload_arrangements: false\n\t\t\t}, () => {\n\t\t\t\tthis.get_arrangements( 1, 10, '' );\n\t\t\t} );\n\t\t}\n\n\t\t// If the 3rd level in the URL exists, (this could likely be more robust) set the current item to that\n\t\tif (\n\t\t\tObject.keys(this.props.main_component.state.all_current_visual_states)[0] &&\n\t\t\tthis.props.main_component.state.all_current_visual_states['manage_payments'] &&\n\t\t\tObject.keys(this.props.main_component.state.all_current_visual_states['manage_payments'])[0]\n\t\t) {\n\t\t\tvar second_slug = Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'])[0];\n\n\t\t\tif ( 'arrangement' == second_slug ) {\n\t\t\t\tif( Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'][second_slug])[0] ) {\n\t\t\t\t\tvar third_slug = Object.keys(this.props.main_component.state.all_current_visual_states['manage_payments'][second_slug])[0];\n\n\t\t\t\t\t// If the current single item ID does not match the item ID in the URL\n\t\t\t\t\tif ( ! this.props.main_component.state.current_arrangement_info ) {\n\t\t\t\t\t\tthis.get_arrangement( third_slug );\n\t\t\t\t\t}\n\n\t\t\t\t\telse if ( this.props.main_component.state.current_arrangement_info && third_slug !== this.props.main_component.state.current_arrangement_info.id ) {\n\t\t\t\t\t\t//this.get_arrangement( third_slug );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\tget_arrangements( current_page, items_per_page, search_term ) {\n\n\t\t// If we are already fetching arrangements, don't fetch more again.\n\t\tif ( this.state.fetching_arrangements ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar this_component = this;\n\n\t\tthis.setState( {\n\t\t\tcurrent_visual_state: 'fetching_data',\n\t\t\tfetching_arrangements: true,\n\t\t});\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'church_tithe_wp_get_arrangements' );\n\t\tpostData.append('church_tithe_wp_current_page', current_page);\n\t\tpostData.append('church_tithe_wp_items_per_page', items_per_page);\n\t\tpostData.append('church_tithe_wp_search_term', search_term);\n\t\tpostData.append('church_tithe_wp_get_arrangements_nonce', this.props.main_component.state.frontend_nonces.get_arrangements_nonce);\n\n\t\t// Get the arrangements defined by the paramaters in the state\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_get_arrangements', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\tfunction( response ) {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t// Remove arrangements since none were found\n\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\tcolumns: null,\n\t\t\t\t\t\trows: null,\n\t\t\t\t\t\ttotal_items: 0,\n\t\t\t\t\t\tfetching_arrangements: false,\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Reset the check user nonce\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\t\tfetching_arrangements: false,\n\t\t\t\t\t\t\t\t\tcurrent_visual_state: 'arrangements',\n\t\t\t\t\t\t\t\t\tcolumns: data.columns,\n\t\t\t\t\t\t\t\t\trows: data.rows,\n\t\t\t\t\t\t\t\t\ttotal_items: data.total_items\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Remove arrangements since none were found\n\t\t\t\t\t\t\tthis_component.setState( {\n\t\t\t\t\t\t\t\tfetching_arrangements: false,\n\t\t\t\t\t\t\t\tcolumns: null,\n\t\t\t\t\t\t\t\trows: null,\n\t\t\t\t\t\t\t\ttotal_items: 0\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\tfunction( err ) {\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\tget_arrangement( arrangement_id ) {\n\n\t\t// If we are already fetching arrangements, don't fetch more again.\n\t\tif ( this.state.fetching_arrangement ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tthis.setState( {\n\t\t\t\tfetching_arrangement: true,\n\t\t\t} );\n\n\t\t\tvar this_component = this;\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'church_tithe_wp_get_arrangement' );\n\t\t\tpostData.append('church_tithe_wp_arrangement_id', arrangement_id);\n\t\t\tpostData.append('church_tithe_wp_get_arrangement_nonce', this.props.main_component.state.frontend_nonces.get_arrangement_nonce);\n\n\t\t\t// Get the arrangements defined by the paramaters in the state\n\t\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_get_arrangement', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\tcurrent_arrangement_info: null,\n\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\t( data ) => {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_info: data.arrangement_info,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\t\tthis.get_arrangement_payment_method( arrangement_id )\n\t\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_info: null,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this_component.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\t( err ) => {\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\t( err ) => {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t} );\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\tget_arrangement_payment_method( arrangement_id ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar this_component = this;\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'church_tithe_wp_get_arrangement_payment_method_endpoint' );\n\t\t\tpostData.append('church_tithe_wp_arrangement_id', arrangement_id);\n\t\t\tpostData.append('church_tithe_wp_get_arrangement_payment_method_nonce', this.props.main_component.state.frontend_nonces.get_arrangement_payment_method_nonce);\n\n\t\t\t// Get the arrangements defined by the paramaters in the state\n\t\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_get_arrangement_payment_method_endpoint', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: data.payment_method_data\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\tfunction( err ) {\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\ton_row_click( row, event ) {\n\n\t\tthis.get_arrangement( row.id.value ).then( () => {\n\t\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\t\tmanage_payments: {\n\t\t\t\t\tarrangement: {\n\t\t\t\t\t\t[row.id.value]: {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t}\n\n\trender() {\n\n\t\tif ( 'none' == this.state.current_visual_state ) {\n\t\t\treturn ( '' );\n\t\t} else {\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className={ 'church-tithe-wp-login-view ' + church_tithe_wp_get_current_view_class( this, ['login'] ) }>\n\t\t\t\t\t\t<Church_Tithe_WP_Login\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\tcheck_if_user_is_logged_in={ this.props.check_if_user_is_logged_in }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ 'church-tithe-wp-manage-arrangements-view ' + church_tithe_wp_get_current_view_class( this, ['arrangements','fetching_data'] ) }>\n\t\t\t\t\t\t\t<Church_Tithe_WP_List_View\n\t\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\t\tcurrent_visual_state={ this.state.current_visual_state }\n\t\t\t\t\t\t\t\trows={ this.state.rows }\n\t\t\t\t\t\t\t\tcolumns={ this.state.columns }\n\t\t\t\t\t\t\t\ttotal_items={ this.state.total_items }\n\t\t\t\t\t\t\t\tget_rows_and_columns={ this.get_arrangements.bind( this ) }\n\t\t\t\t\t\t\t\tcurrent_visual_state={ this.state.current_visual_state }\n\t\t\t\t\t\t\t\ton_row_click={ this.on_row_click.bind( this ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t}\n}\nexport default Church_Tithe_WP_Arrangements;\n","import {StripeProvider} from 'react-stripe-elements';\nimport {Elements} from 'react-stripe-elements';\nimport {PaymentRequestButtonElement} from 'react-stripe-elements';\nimport {injectStripe} from 'react-stripe-elements';\nvar church_tithe_wp_vars = church_tithe_wp_js_vars.tithe_form_vars;\n\nwindow.Church_Tithe_WP_Arrangement = class Church_Tithe_WP_Arrangement extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tarrangement_cancel_intention_count: 0,\n\t\t\tcard_form_visible: false,\n\t\t\tsca_authentication_status: 'initial',\n\t\t};\n\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\tif ( ! this.props.main_component.state.current_arrangement_payment_method && this.state.card_form_visible ) {\n\t\t\tthis.setState( {\n\t\t\t\tcard_form_visible: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\thandle_back_to_plans_click( event ) {\n\t\tthis.props.main_component.set_all_current_visual_states( {\n\t\t\tmanage_payments: {\n\t\t\t\tarrangements: {}\n\t\t\t}\n\t\t}, false );\n\t}\n\n\ttoggle_card_form_visibility( event ) {\n\t\tif ( this.state.card_form_visible ) {\n\t\t\tthis.setState( {\n\t\t\t\tcard_form_visible: false,\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.setState( {\n\t\t\t\tcard_form_visible: true,\n\t\t\t} );\n\t\t}\n\t}\n\n\tget_arrangement_payment_method( arrangement_id ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar this_component = this;\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'church_tithe_wp_get_arrangement_payment_method_endpoint' );\n\t\t\tpostData.append('church_tithe_wp_arrangement_id', arrangement_id);\n\t\t\tpostData.append('church_tithe_wp_get_arrangement_payment_method_nonce', this.props.main_component.state.frontend_nonces.get_arrangement_payment_method_nonce);\n\n\t\t\t// Get the arrangements defined by the paramaters in the state\n\t\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_get_arrangement_payment_method_endpoint', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\tfunction( data ) {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: data.payment_method_data\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis_component.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\tfunction( err ) {\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\tfunction( err ) {\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\tget_arrangement( arrangement_id ) {\n\n\t\t// If we are already fetching arrangements, don't fetch more again.\n\t\tif ( this.state.fetching_arrangement ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tthis.setState( {\n\t\t\t\tfetching_arrangement: true,\n\t\t\t} );\n\n\t\t\tvar postData = new FormData();\n\t\t\tpostData.append('action', 'church_tithe_wp_get_arrangement' );\n\t\t\tpostData.append('church_tithe_wp_arrangement_id', arrangement_id);\n\t\t\tpostData.append('church_tithe_wp_get_arrangement_nonce', this.props.main_component.state.frontend_nonces.get_arrangement_nonce);\n\n\t\t\t// Get the arrangements defined by the paramaters in the state\n\t\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_get_arrangement', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode: \"same-origin\",\n\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\tbody: postData\n\t\t\t} ).then(\n\t\t\t\t( response ) => {\n\t\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\tcurrent_arrangement_info: null,\n\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Examine the text in the response\n\t\t\t\t\tresponse.json().then(\n\t\t\t\t\t\t( data ) => {\n\t\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_info: data.arrangement_info,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\t\tthis.get_arrangement_payment_method( arrangement_id )\n\t\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_info: null,\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t).catch(\n\t\t\t\t\t\t( err ) => {\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t).catch(\n\t\t\t\t( err ) => {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tfetching_arrangement: false,\n\t\t\t\t\t} );\n\t\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t\t\treject();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t);\n\n\t\t});\n\n\t}\n\n\tcancel_arrangement() {\n\n\t\t// Double check with the user to make sure they meant to cancel\n\t\tif ( 0 == this.state.arrangement_cancel_intention_count ) {\n\n\t\t\tthis.setState( {\n\t\t\t\tarrangement_cancel_intention_count: 1\n\t\t\t} );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Get the current arrangement\n\t\tvar current_arrangement_info = this.props.main_component.state.current_arrangement_info;\n\n\t\t// Update the recurring status of that arrangement to \"cancelling\"\n\t\tcurrent_arrangement_info.recurring_status = 'cancelling';\n\n\t\t// Set the state to be cancelling\n\t\tthis.props.main_component.setState( {\n\t\t\tcurrent_arrangement_info: current_arrangement_info\n\t\t} );\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'church_tithe_wp_cancel_arrangement' );\n\t\tpostData.append('church_tithe_wp_arrangement_id', this.props.main_component.state.current_arrangement_info.id );\n\t\tpostData.append('church_tithe_wp_cancel_arrangement_nonce', this.props.main_component.state.frontend_nonces.cancel_arrangement_nonce );\n\n\t\t// Cancel the arrangement in question\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_cancel_arrangement', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\t( response ) => {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\t// We were unable to cancel the arrangement\n\n\t\t\t\t\t// Get the current arrangement\n\t\t\t\t\tcurrent_arrangement_info = this.props.main_component.state.current_arrangement_info;\n\n\t\t\t\t\t// Update the recurring status of that arrangement to \"cancelling\"\n\t\t\t\t\tcurrent_arrangement_info.recurring_status = 'failed_to_cancel';\n\n\t\t\t\t\t// Update the arrangement from the fetched data\n\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\tcurrent_arrangement_info: data.current_arrangement_info\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\t( data ) => {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\t// Reset the check user nonce\n\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\tuser_logged_in: data.user_logged_in,\n\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t// Set the current arrangement info based on the updated data\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_info: data.arrangement_info,\n\t\t\t\t\t\t\t\t\tarrangement_cancel_intention_count: 0\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t// Reload the arrangements so that \"cancelled\" shows up in the column for this arrangement\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\treload_arrangements: true\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// We were unable to cancel the arrangement\n\n\t\t\t\t\t\t\t// Get the current arrangement\n\t\t\t\t\t\t\tcurrent_arrangement_info = this.props.main_component.state.current_arrangement_info;\n\n\t\t\t\t\t\t\t// Update the recurring status of that arrangement to \"cancelling\"\n\t\t\t\t\t\t\tcurrent_arrangement_info.recurring_status = 'failed_to_cancel';\n\n\t\t\t\t\t\t\t// Set the state to be cancelling\n\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\tcurrent_arrangement_info: current_arrangement_info\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\tif ( 'not_logged_in' == data.error_code ) {\n\n\t\t\t\t\t\t\t\t// Remove the user ID from the main state and set the state to be login\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tuser_logged_in: null,\n\t\t\t\t\t\t\t\t\tfrontend_nonces: data.frontend_nonces ? data.frontend_nonces : this.props.main_component.state.frontend_nonces\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\t( err ) => {\n\n\t\t\t\t\t\t// We were unable to cancel the arrangement\n\n\t\t\t\t\t\t// Get the current arrangement\n\t\t\t\t\t\tcurrent_arrangement_info = this.props.main_component.state.current_arrangement_info;\n\n\t\t\t\t\t\t// Update the recurring status of that arrangement to \"cancelling\"\n\t\t\t\t\t\tcurrent_arrangement_info.recurring_status = 'failed_to_cancel';\n\n\t\t\t\t\t\t// Set the state to be cancelling\n\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\tcurrent_arrangement_info: current_arrangement_info\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\t( err ) => {\n\n\t\t\t\t// We were unable to cancel the arrangement\n\n\t\t\t\t// Get the current arrangement\n\t\t\t\tcurrent_arrangement_info = this.props.main_component.state.current_arrangement_info;\n\n\t\t\t\t// Update the recurring status of that arrangement to \"cancelling\"\n\t\t\t\tcurrent_arrangement_info.recurring_status = 'failed_to_cancel';\n\n\t\t\t\t// Set the state to be cancelling\n\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\tcurrent_arrangement_info: current_arrangement_info\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\t}\n\n\trender_authenticate_sca_button() {\n\n\t\tif ( this.state.card_form_visible ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn(\n\t\t\t<StripeProvider apiKey={this.props.main_component.state.dynamic_settings.stripe_api_key}>\n\t\t\t\t<Elements>\n\t\t\t\t\t<ChurchTitheWPAuthenticatePaymentButton\n\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\tChurch_Tithe_WP_Arrangement={ this }\n\t\t\t\t\t\tget_arrangement={ this.get_arrangement.bind( this ) }\n\t\t\t\t\t/>\n\t\t\t\t</Elements>\n\t\t\t</StripeProvider>\n\t\t);\n\t}\n\n\trender_cancel_button() {\n\n\t\t// Don't show this if we are updating the card attached to the plan.\n\t\tif ( this.state.card_form_visible ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tvar button_text;\n\n\t\t// If the webhook has not arrived, show \"Unable to cancel, webhook failed\" on the button.\n\t\tif ( ! this.props.main_component.state.current_arrangement_info.webhook_succeeded ) {\n\t\t\treturn ( <button className=\"church-tithe-wp-arrangement-action-cancel\">{ this.props.main_component.state.unique_settings.strings.arrangement_action_cant_cancel }</button> );\n\t\t}\n\n\t\tif ( 0 == this.state.arrangement_cancel_intention_count ) {\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.arrangement_action_cancel;\n\t\t}\n\n\t\tif ( 1 == this.state.arrangement_cancel_intention_count ) {\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.arrangement_action_cancel_double;\n\t\t}\n\n\t\tif ( 'failed_to_cancel' == this.props.main_component.state.current_arrangement_info.recurring_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"church-tithe-wp-receipt-action-button\">\n\t\t\t\t\t<a className=\"church-tithe-wp-arrangement-action-cancel\">{ this.props.main_component.state.unique_settings.strings.arrangement_failed_to_cancel }</a>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( 'cancelling' == this.props.main_component.state.current_arrangement_info.recurring_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"church-tithe-wp-receipt-action-button\">\n\t\t\t\t\t<a className=\"church-tithe-wp-arrangement-action-cancel\">{ this.props.main_component.state.unique_settings.strings.arrangement_cancelling }</a>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( 'cancelled' == this.props.main_component.state.current_arrangement_info.recurring_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"church-tithe-wp-receipt-action-button\">\n\t\t\t\t\t<a className=\"church-tithe-wp-arrangement-action-cancel\">{ this.props.main_component.state.unique_settings.strings.arrangement_cancelled }</a>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn(\n\t\t\t\t<div className=\"church-tithe-wp-receipt-action-button\">\n\t\t\t\t\t<a className=\"church-tithe-wp-arrangement-action-cancel\" onClick={ this.cancel_arrangement.bind( this ) }>{ button_text }</a>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n\n\trender_renewal_date() {\n\n\t\tif ( 'cancelled' == this.props.main_component.state.current_arrangement_info.recurring_status ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"church-tithe-wp-arrangement-renewal-date\">\n\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title church-tithe-wp-arrangement-renewal-date-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_renewal_title + ': ' }</span>\n\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value church-tithe-wp-arrangement-renewal-date-value\">{ church_tithe_wp_format_date( this.props.main_component.state.current_arrangement_info.renewal_date ) }</span>\n\t\t\t</div>\n\t\t);\n\n\t}\n\n\tformat_amount() {\n\n\t\tvar cents = this.props.main_component.state.current_arrangement_info.amount;\n\t\tvar currency = this.props.main_component.state.current_arrangement_info.currency;\n\t\tvar is_zero_decimal_currency = this.props.main_component.state.current_arrangement_info.is_zero_decimal_currency;\n\t\tvar locale = this.props.main_component.state.unique_settings.locale;\n\t\tvar string_after = this.props.main_component.state.current_arrangement_info.string_after + ' (' + currency.toUpperCase() + ')';\n\n\t\treturn church_tithe_wp_format_money( cents, currency, is_zero_decimal_currency, locale, string_after );\n\n\t}\n\n\trender_payment_method() {\n\n\t\tif ( ! this.props.main_component.state.current_arrangement_payment_method ) {\n\t\t\treturn <Church_Tithe_WP_Spinner color_mode=\"church-tithe-wp-spinner-dark\" />;\n\t\t}\n\n\t\tif ( 'none' == this.props.main_component.state.current_arrangement_payment_method ) {\n\t\t\treturn 'None found';\n\t\t}\n\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"church-tithe-wp-payment-method\">\n\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title church-tithe-wp-arrangement-id-title\">\n\t\t\t\t\t\t{ this.props.main_component.state.unique_settings.strings.arrangement_payment_method_title + ': ' }\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value church-tithe-wp-arrangement-id-value\">\n\t\t\t\t\t\t<span className=\"church-tithe-wp-inline-card\">\n\t\t\t\t\t\t\t{ <Church_Tithe_WP_Card_Icon brand={ this.props.main_component.state.current_arrangement_payment_method.card.brand } /> }\n\t\t\t\t\t\t\t<div className=\"church-tithe-wp-inline-card-number\">{ ' ' + this.props.main_component.state.current_arrangement_payment_method.card.last4 }</div>\n\t\t\t\t\t\t\t<div className=\"church-tithe-wp-inline-update-button\">\n\t\t\t\t\t\t\t\t<button className=\"church-tithe-wp-text-button\" onClick={ this.toggle_card_form_visibility.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.update_payment_method_verb }</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\trender_payment_method_update_form() {\n\n\t\tif ( this.state.card_form_visible ) {\n\t\t\treturn(\n\t\t\t\t<StripeProvider apiKey={this.props.main_component.state.dynamic_settings.stripe_api_key}>\n\t\t\t\t\t<Elements>\n\t\t\t\t\t\t<ChurchTitheWPUpdateCardForm\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\tChurch_Tithe_WP_Arrangement={ this }\n\t\t\t\t\t\t\tget_arrangement={ this.get_arrangement.bind( this ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Elements>\n\t\t\t\t</StripeProvider>\n\t\t\t);\n\t\t}\n\n\t}\n\n\trender() {\n\n\t\tif ( ! this.props.main_component.state.current_arrangement_info ) {\n\t\t\treturn ( <Church_Tithe_WP_Spinner /> );\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"church-tithe-wp-arrangement\">\n\t\t\t\t<div className={ 'church-tithe-wp-back-button-container' }>\n\t\t\t\t\t<a onClick={ this.handle_back_to_plans_click.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.back_to_plans }</a>\n\t\t\t\t</div>\n\t\t\t\t<div className={ 'church-tithe-wp-receipt-title' }>{ this.props.main_component.state.unique_settings.strings.arrangement_details }</div>\n\t\t\t\t<div className=\"church-tithe-wp-arrangement-id\">\n\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title church-tithe-wp-arrangement-id-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_id_title + ': ' }</span>\n\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value church-tithe-wp-arrangement-id-value\">{ this.props.main_component.state.current_arrangement_info.id }</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"church-tithe-wp-arrangement-status\">\n\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title church-tithe-wp-arrangement-plan-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_amount_title + ': ' }</span>\n\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value church-tithe-wp-arrangement-plan-value\">{ this.props.main_component.state.current_arrangement_info.recurring_status_visible }</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"church-tithe-wp-arrangement-interval\">\n\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-title church-tithe-wp-arrangement-plan-title\">{ this.props.main_component.state.unique_settings.strings.arrangement_amount_title + ': ' }</span>\n\t\t\t\t\t<span className=\"church-tithe-wp-receipt-line-item-value church-tithe-wp-arrangement-plan-value\">{ this.format_amount() }</span>\n\t\t\t\t</div>\n\t\t\t\t{ this.render_renewal_date() }\n\t\t\t\t{ this.render_payment_method() }\n\t\t\t\t<div className=\"church-tithe-wp-arrangement-actions\">\n\t\t\t\t\t{ this.render_payment_method_update_form() }\n\t\t\t\t\t{ this.render_authenticate_sca_button() }\n\t\t\t\t\t{ this.render_cancel_button() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\nexport default Church_Tithe_WP_Arrangement;\n\nclass Church_Tithe_WP_Authenticate_Payment_Button extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tsca_authentication_status: 'initial',\n\t\t};\n\n\t}\n\n\n\tattempt_payment_intent_confirmation() {\n\n\t\tthis.setState( {\n\t\t\tsca_authentication_status: 'authorizing',\n\t\t} );\n\n\t\t// Pass the PaymentIntent's client secret off to Stripe\n\t\tthis.props.stripe.confirmPaymentIntent(\n\t\t\tthis.props.main_component.state.current_arrangement_info.pending_invoice.payment_intent.client_secret,\n\t\t\t{\n\t\t\t\tpayment_method: this.props.main_component.state.current_arrangement_info.pending_invoice.payment_intent.payment_method,\n\t\t\t}\n\t\t).then( ( payment_intent_result ) => {\n\n\t\t\t// If the Payment Intent was unable to be confirmed\n\t\t\tif ( payment_intent_result.error ) {\n\n\t\t\t\tconsole.log( payment_intent_result.error );\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tsca_authentication_status: 'failed_to_authorize',\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\t// Success with no 3DS\n\t\t\t\tif ('succeeded' === payment_intent_result.paymentIntent.status) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tsca_authentication_status: 'success',\n\t\t\t\t\t}, () => {\n\t\t\t\t\t\tthis.props.get_arrangement( this.props.main_component.state.current_arrangement_info.id );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\n\t\t\t\t\t// It didn't go through without 3DS so try it as a card payment so we can use Stripe simpified 3DS\n\t\t\t\t\t// We got a payment intent from Stripe, so process it now\n\t\t\t\t\tthis.props.stripe.handleCardPayment(\n\t\t\t\t\t\tthis.props.main_component.state.current_arrangement_info.pending_invoice.payment_intent.client_secret,\n\t\t\t\t\t\t{}\n\t\t\t\t\t).then( (payment_intent_result) => {\n\t\t\t\t\t\t// If the response from handleCardPayment was no good\n\t\t\t\t\t\tif (payment_intent_result.error) {\n\n\t\t\t\t\t\t\t// Display error.message in the UI.\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tsca_authentication_status: 'failed_to_authorize',\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// The PaymentIntent was successful\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\tsca_authentication_status: 'success',\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis.props.get_arrangement( this.props.main_component.state.current_arrangement_info.id );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\trender() {\n\n\t\t// Don't show this if there is no payment intent to authorize\n\t\tif ( ! this.props.main_component.state.current_arrangement_info.pending_invoice ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tvar button_text;\n\n\t\tif ( 'failed_to_authorize' == this.state.sca_authentication_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"church-tithe-wp-receipt-action-button\">\n\t\t\t\t\t<div>{  this.props.main_component.state.unique_settings.strings.sca_auth_description }</div>\n\t\t\t\t\t<button className=\"church-tithe-wp-receipt-line-item-action church-tithe-wp-arrangement-action-authenticate\" onClick={ this.attempt_payment_intent_confirmation.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.sca_auth_failed }</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( 'authorizing' == this.state.sca_authentication_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"church-tithe-wp-receipt-action-button\">\n\t\t\t\t\t<div>{  this.props.main_component.state.unique_settings.strings.sca_auth_description }</div>\n\t\t\t\t\t<button className=\"church-tithe-wp-receipt-line-item-action church-tithe-wp-arrangement-action-authenticate\">{ this.props.main_component.state.unique_settings.strings.sca_authing_verb }</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( 'initial' == this.state.sca_authentication_status ) {\n\n\t\t\tvar invoice = this.props.main_component.state.current_arrangement_info.pending_invoice.invoice;\n\t\t\tvar formatted_amount = church_tithe_wp_format_money( invoice.total, invoice.currency, this.props.main_component.state.current_arrangement_info.is_zero_decimal_currency, this.props.main_component.state.unique_settings.locale, '' );\n\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className=\"church-tithe-wp-receipt-action-button\">\n\t\t\t\t\t\t<div>{  this.props.main_component.state.unique_settings.strings.sca_auth_description }</div>\n\t\t\t\t\t\t<button className=\"church-tithe-wp-receipt-line-item-action church-tithe-wp-arrangement-action-authenticate\" onClick={ this.attempt_payment_intent_confirmation.bind( this ) }>{ this.props.main_component.state.unique_settings.strings.sca_auth_verb + ' - ' + formatted_amount }</button>\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\n\t\tif ( 'success' == this.state.sca_authentication_status ) {\n\t\t\treturn(\n\t\t\t\t<div className=\"church-tithe-wp-receipt-action-button\">\n\t\t\t\t\t<div>{ this.props.main_component.state.unique_settings.strings.sca_authed_verb }</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n}\n\nclass Church_Tithe_WP_Update_Card_Form extends React.Component {\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tstatus_of_payment_method_updating: 'initial',\n\t\t\tform_validation_attempted: false,\n\t\t\tstripe_elements_fields_complete: false,\n\t\t\tstripe_card_error_code: '',\n\t\t};\n\n\t}\n\n\tupdate_payment_method_for_arrangement() {\n\n\t\tvar postData = new FormData();\n\t\tpostData.append('action', 'church_tithe_wp_update_arrangement' );\n\t\tpostData.append('church_tithe_wp_arrangement_id', this.props.main_component.state.current_arrangement_info.id );\n\t\tpostData.append('church_tithe_wp_stripe_payment_method_id', this.state.stripe_payment_method.id);\n\t\tpostData.append('church_tithe_wp_update_arrangement_nonce', this.props.main_component.state.frontend_nonces.update_arrangement_nonce );\n\n\t\t// Update the payment method to use for this arrangement's renewals.\n\t\tfetch( church_tithe_wp_js_vars.ajaxurl + '?church_tithe_wp_update_arrangement', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"same-origin\",\n\t\t\tcredentials: \"same-origin\",\n\t\t\tbody: postData\n\t\t} ).then(\n\t\t\t( response ) => {\n\t\t\t\tif ( response.status !== 200 ) {\n\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update'\n\t\t\t\t\t} );\n\n\t\t\t\t\tconsole.log('Looks like there was a problem. Status Code: ' + response.status);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Examine the text in the response\n\t\t\t\tresponse.json().then(\n\t\t\t\t\t( data ) => {\n\t\t\t\t\t\tif ( data.success ) {\n\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tstatus_of_payment_method_updating: 'success'\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t// Reload the card attached to the arrangement and update it visually.\n\t\t\t\t\t\t\t\tthis.props.main_component.setState( {\n\t\t\t\t\t\t\t\t\tcurrent_arrangement_payment_method: data.payment_method\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tthis.props.Church_Tithe_WP_Arrangement.setState( {\n\t\t\t\t\t\t\t\t\t\t\tcard_form_visible: false,\n\t\t\t\t\t\t\t\t\t\t\tstatus_of_payment_method_updating: 'initial',\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update'\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t).catch(\n\t\t\t\t\t( err ) => {\n\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update'\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconsole.log('Fetch Error: ', err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t).catch(\n\t\t\t( err ) => {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update'\n\t\t\t\t} );\n\n\t\t\t\tconsole.log('Fetch Error :-S', err);\n\t\t\t}\n\t\t);\n\n\t}\n\n\thandleCreditCardSubmit( event ){\n\n\t\tevent.preventDefault();\n\n\t\tthis.setState( {\n\t\t\tstatus_of_payment_method_updating: 'updating'\n\t\t});\n\n\t\t// Create a stripe payment_method using the submitted info\n\t\tthis.create_stripe_payment_method().then( () => {\n\n\t\t\t// Validate the fields\n\t\t\tvar allow_form_to_be_submitted = this.validate_form( true );\n\n\t\t\t// Prevent the form submission if a field didn't validate\n\t\t\tif ( ! allow_form_to_be_submitted ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update',\n\t\t\t\t}, () => {\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tthis.update_payment_method_for_arrangement();\n\t\t\t}\n\n\t\t} ).catch((err) => {\n\n\t\t\tthis.setState( {\n\t\t\t\tstripe_card_error_code: err,\n\t\t\t\tstatus_of_payment_method_updating: 'unable_to_update',\n\t\t\t}, () => {\n\t\t\t\tconsole.log( err );\n\t\t\t});\n\n\t\t\t// Validate the fields\n\t\t\tvar allow_form_to_be_submitted = this.validate_form( true );\n\n\t\t\t// Prevent the form submission if a field didn't validate\n\t\t\treturn false;\n\n\t\t} );\n\n\t}\n\n\tvalidate_form( modify_state = true ) {\n\n\t\tvar all_fields_validate = true;\n\n\t\t// Credit Card form specific fields\n\t\tif ( 'credit_card' == this.state.payment_mode ) {\n\n\t\t\t// Name field\n\t\t\tif ( ! this.state.name_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t\t// Email field\n\t\t\tif ( ! this.state.email_validated ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t\t// Stripe all in one field\n\t\t\tif ( ! this.state.stripe_payment_method ) {\n\t\t\t\tall_fields_validate = false;\n\t\t\t}\n\n\t\t}\n\n\t\tif ( modify_state ) {\n\n\t\t\tthis.setState( {\n\t\t\t\tform_validation_attempted: true\n\t\t\t} );\n\n\t\t\tif ( ! all_fields_validate ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: true,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tform_has_any_error: false,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn all_fields_validate;\n\n\t}\n\n\tcreate_stripe_payment_method() {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tvar billing_details = {\n\t\t\t\tbilling_details: {\n\t\t\t\t\taddress: {\n\t\t\t\t\t\tpostal_code: this.state.postal_code\n\t\t\t\t\t},\n\t\t\t\t\temail: this.state.email_value,\n\t\t\t\t\tname: this.state.name_value,\n\t\t\t\t},\n\t\t\t}\n\n\t\t\t// If no zip code was found\n\t\t\tif ( this.state.stripe_elements_fields_complete && ! billing_details.billing_details.address.postal_code ) {\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tstripe_card_error_code: 'incomplete_zip'\n\t\t\t\t}, () => {\n\t\t\t\t\treject('incomplete_zip');\n\t\t\t\t\treturn;\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\t// Set the validation of this field\n\t\t\t\tthis.props.stripe.createPaymentMethod(\n\t\t\t\t\t'card',\n\t\t\t\t\tbilling_details\n\t\t\t\t).then( (result) => {\n\t\t\t\t\tif (result.error) {\n\n\t\t\t\t\t\t// Show error in payment form\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tstripe_payment_method: null,\n\t\t\t\t\t\t\tstripe_card_error_code: result.error.code\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\treject(result.error.code);\n\t\t\t\t\t\t\treturn result.error;\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tstripe_payment_method: result.paymentMethod,\n\t\t\t\t\t\t\tstripe_card_error_code: 'success'\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tresolve( result.paymentMethod );\n\t\t\t\t\t\t\treturn result.paymentMethod;\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t});\n\n\t};\n\n\trender_complete_payment_button_field() {\n\n\t\tvar button_class;\n\t\tvar button_text;\n\n\t\tif ( 'initial' == this.state.status_of_payment_method_updating ) {\n\t\t\tbutton_class = '';\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.update_payment_method_verb;\n\t\t}\n\t\tif ( 'updating' == this.state.status_of_payment_method_updating ) {\n\t\t\tbutton_class = ' church-tithe-wp-btn-attempting-payment';\n\t\t\tbutton_text = <Church_Tithe_WP_Spinner />;\n\t\t}\n\t\tif ( 'success' == this.state.status_of_payment_method_updating ) {\n\t\t\tbutton_class = ' church-tithe-wp-btn-success';\n\t\t\tbutton_text = <span><Church_Tithe_WP_Checkmark /></span>;\n\t\t}\n\t\tif ( 'unable_to_update' == this.state.status_of_payment_method_updating ) {\n\t\t\tbutton_class = ' church-tithe-wp-btn-error';\n\t\t\tbutton_text = this.props.main_component.state.unique_settings.strings.complete_payment_button_error_text;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<button type=\"button\" onClick={this.handleCreditCardSubmit.bind( this )} className={ 'church-tithe-wp-pay-button' + button_class }>{ button_text }</button>\n\t\t\t</div>\n\t\t)\n\t}\n\n\tset_validation_and_value_of_field( state_validation_variable, is_validated, state_value_variable = null, state_value = null ) {\n\n\t\treturn new Promise( (resolve, reject) => {\n\n\t\t\tif ( null == state_value_variable ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t},  () => {\n\t\t\t\t\tresolve( this.state );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t[state_validation_variable]: is_validated,\n\t\t\t\t\t[state_value_variable]: state_value,\n\t\t\t\t}, () => {\n\t\t\t\t\tresolve( this.state );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t} );\n\t}\n\n\trender() {\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"church-tithe-wp-payment-field-container\">\n\t\t\t\t\t<div className=\"church-tithe-wp-payment-field\">\n\t\t\t\t\t\t<Church_Tithe_WP_Input_Field\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\tstate_validation_variable_name={ 'name_validated' }\n\t\t\t\t\t\t\tstate_value_variable_name={ 'name_value' }\n\t\t\t\t\t\t\tset_validation_and_value_of_field={ this.set_validation_and_value_of_field.bind( this ) }\n\t\t\t\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\t\t\t\tis_validated={ this.state.name_validated }\n\t\t\t\t\t\t\tvalidate_form={ this.validate_form.bind( this ) }\n\t\t\t\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.name }\n\t\t\t\t\t\t\tinitial_value={ this.props.main_component.state.unique_settings.strings.current_user_name }\n\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass_name={ 'church-tithe-wp-name' }\n\t\t\t\t\t\t\tplaceholder={ this.props.main_component.state.unique_settings.strings.input_field_instructions.name.placeholder_text }\n\t\t\t\t\t\t\tname=\"tithe-amount\"\n\t\t\t\t\t\t\tdisabled={ false }\n\t\t\t\t\t\t\tediting_key={ 'strings/input_field_instructions/name/[current_key_here]/instruction_message' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"church-tithe-wp-payment-field-container\">\n\t\t\t\t\t<div className=\"church-tithe-wp-payment-field\">\n\t\t\t\t\t\t<Church_Tithe_WP_Stripe_All_In_One_Field\n\t\t\t\t\t\t\tmain_component={ this.props.main_component }\n\t\t\t\t\t\t\tcard_form={ this }\n\t\t\t\t\t\t\tform_validation_attempted={ this.state.form_validation_attempted }\n\t\t\t\t\t\t\tvalidate_form={ null }\n\t\t\t\t\t\t\tstripe_card_error_code={ this.state.stripe_card_error_code }\n\t\t\t\t\t\t\tinstruction_codes={ this.props.main_component.state.unique_settings.strings.input_field_instructions.stripe_all_in_one }\n\t\t\t\t\t\t\tstripe={ this.props.stripe }\n\t\t\t\t\t\t\tdisabled={ false }\n\t\t\t\t\t\t\tmobile_mode={ window.innerWidth > 600 ? false : true}\n\t\t\t\t\t\t\tzip_code_placeholder={ this.props.main_component.state.unique_settings.strings.zip_code_placeholder }\n\t\t\t\t\t\t\tcreate_stripe_source={ this.create_stripe_payment_method }\n\t\t\t\t\t\t\tediting_key={ 'strings/input_field_instructions/stripe_all_in_one/[current_key_here]/instruction_message' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"church-tithe-wp-payment-field-container\">\n\t\t\t\t\t<div className=\"church-tithe-wp-payment-field\">\n\t\t\t\t\t\t{ this.render_complete_payment_button_field() }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\nconst ChurchTitheWPUpdateCardForm = injectStripe(Church_Tithe_WP_Update_Card_Form);\nconst ChurchTitheWPAuthenticatePaymentButton = injectStripe(Church_Tithe_WP_Authenticate_Payment_Button);\n","window.Church_Tithe_WP_Spinner = class Church_Tithe_WP_Spinner extends React.Component{\n\n\t\tget_color_mode_class() {\n\n\t\t\tif ( this.props.color_mode ) {\n\t\t\t\treturn ( ' ' + this.props.color_mode );\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t  render(){\n        return(\n\t\t\t\t\t<div className={ \"church-tithe-wp-spinner-container\" }>\n\t\t\t\t\t\t<div className={ \"church-tithe-wp-spinner\" + this.get_color_mode_class() }>\n              <div className=\"church-tithe-wp-double-bounce1\"></div>\n              <div className=\"church-tithe-wp-double-bounce2\"></div>\n            </div>\n\t\t\t\t\t</div>\n        )\n    }\n}\nexport default Church_Tithe_WP_Spinner;\n","window.Church_Tithe_WP_Checkmark = class Church_Tithe_WP_Checkmark extends React.Component{\n    render(){\n        return(\n            <svg className=\"church-tithe-wp-checkmark-svg\" xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"100\" viewBox=\"0 0 200 200\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <circle className=\"church-tithe-wp-checkmark--circle\" cx=\"100\" cy=\"100\" r=\"84.615\" fill=\"#4BB543\"/>\n                    <polyline className=\"church-tithe-wp-checkmark--check\" stroke=\"#FFF\"  points=\"76.923 130.769 123.077 130.769 123.077 38.462\" transform=\"rotate(42 100 84.615)\"/>\n                </g>\n            </svg>\n        )\n    }\n}\nexport default Church_Tithe_WP_Checkmark;\n","window.Church_Tithe_WP_Modal = class Church_Tithe_WP_Modal extends React.Component{\n\n\tconstructor( props ){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\thas_mounted: false,\n\t\t\tmodal_open: false\n\t\t}\n\n\t\tthis.handle_key_press = this.handle_key_press.bind( this );\n\t\tthis.toggle_modal = this.toggle_modal.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.handle_open_status_based_on_url();\n\t}\n\n\tcomponentDidUpdate() {\n\n\t\tif ( ! this.state.modal_open ) {\n\t\t\t// Remove a listener for the ESC key when the modal is closed\n\t\t\tdocument.removeEventListener(\"keydown\", this.handle_key_press, false);\n\t\t} else {\n\n\t\t\tif ( ! this.state.has_mounted ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\thas_mounted: true\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Add a listener for the ESC key when the modal is open\n\t\t\tdocument.addEventListener(\"keydown\", this.handle_key_press, false);\n\t\t}\n\n\t\tthis.handle_open_status_based_on_url();\n\t}\n\n\thandle_open_status_based_on_url() {\n\n\t\t// If a modal is open based on the setting in the main component\n\t\tif ( this.props.main_component && this.props.main_component.state.modal_visual_state ) {\n\t\t\t// Check if that modal is us!\n\t\t\tif ( this.props.slug == Object.keys(this.props.main_component.state.modal_visual_state)[0] ) {\n\t\t\t\t// Open this modal if it isn't already open\n\t\t\t\tif ( ! this.state.modal_open ) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tmodal_open:  true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If the current modal in the URL is not us, close this one.\n\t\t\telse {\n\t\t\t\tif ( this.state.modal_open ) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tmodal_open:  false\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget_modal_visible_class() {\n\t\tif ( this.state.modal_open ) {\n\t\t\treturn ' church-tithe-wp-modal-open';\n\t\t} else {\n\t\t\treturn ' church-tithe-wp-modal-closed';\n\t\t}\n\t}\n\n\thandle_key_press( event ) {\n\n\t\tif( event.keyCode === 27 ) {\n\t\t\tthis.toggle_modal( this.state );\n\t\t}\n\n\t}\n\n\ttoggle_modal( state ) {\n\n\t\t// If the modal is open, close it\n\t\tif ( state.modal_open ) {\n\t\t\tthis.props.main_component.set_all_current_visual_states( false, {} );\n\t\t} else {\n\t\t\tthis.props.main_component.set_all_current_visual_states( false, {\n\t\t\t\t[this.props.slug]: {}\n\t\t\t} );\n\t\t}\n\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className={ 'church-tithe-wp-modal-background church-tithe-wp-modal' + this.get_modal_visible_class() }>\n\t\t\t\t<div className={ 'church-tithe-wp-modal-outside-click-to-close' } onClick={ this.toggle_modal.bind( null, this.state ) } />\n\t\t\t\t<div className={ 'church-tithe-wp-modal-relative' }>\n\t\t\t\t\t<div className={ 'church-tithe-wp-modal-absolute' }>\n\t\t\t\t\t\t<div className={ 'church-tithe-wp-modal-inner' }>\n\t\t\t\t\t\t\t{ this.props.modal_contents }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default Church_Tithe_WP_Modal;\n"],"sourceRoot":""}