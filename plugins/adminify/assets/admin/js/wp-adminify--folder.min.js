/*! For license information please see wp-adminify--folder.min.js.LICENSE.txt */
"use strict";(self.webpackChunkadminify=self.webpackChunkadminify||[]).push([[1567],{9172:(t,r,o)=>{var a=o(538);a.ZP.component("folder-app",o(8425).Z),a.ZP.component("folders",o(7552).Z),jQuery((function(t){if(t("#wp-adminify--folder-app").length){var r=jQuery("#tmpl-attachment");if(r.length){var o=r.html().replace('data.orientation }}">','data.orientation }}" data-folders="{{ data.media_folder }}">');r.html(o)}new a.ZP({el:"#wp-adminify--folder-app",template:"<folder-app></folder-app>"})}}))},7552:(t,r,o)=>{o.d(r,{Z:()=>i});const a={props:{folders:{type:Array,required:!0},folder_select_toggle:{type:Boolean,required:!0}},methods:{is_folder:function is_folder(t){return this.$parent.is_folder(t)},get_folder_url:function get_folder_url(t){return this.$parent.get_folder_url(t)},folderActions:function folderActions(t,r){this.$parent.folderActions(t,r)},showRenameFolderPopup:function showRenameFolderPopup(t){this.$parent.showRenameFolderPopup(t)},showDeleteFolderPopup:function showDeleteFolderPopup(t){this.$parent.showDeleteFolderPopup(t)},showNewSubFolderPopup:function showNewSubFolderPopup(t){this.$parent.showNewSubFolderPopup(t)}}};const i=(0,o(1900).Z)(a,(function render(){var t=this,r=t._self._c;return r("ul",t._l(t.folders,(function(o){return r("li",{key:o.term_id,staticClass:"folder--single-root has--sub-menu",class:t.is_folder(o)&&"active",attrs:{"data-folder":o.term_id}},[r("a",{style:{color:o.color},attrs:{href:t.get_folder_url(o)},on:{contextmenu:function contextmenu(r){return t.folderActions(r,o)}}},[r("span",{staticClass:"wp-adminify--folder-left"},[r("span",{staticClass:"wp-adminify--icon-control"},[t.folder_select_toggle?t._e():r("span",{staticClass:"wp-adminify--icon dashicons dashicons-open-folder"}),t._v(" "),t.folder_select_toggle?r("input",{directives:[{name:"model",rawName:"v-model",value:o.selected,expression:"_folder.selected"}],staticClass:"wp-adminify--control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(o.selected)?t._i(o.selected,null)>-1:o.selected},on:{"!click":function click(t){t.stopPropagation()},change:function change(r){var a=o.selected,i=r.target,l=!!i.checked;if(Array.isArray(a)){var d=t._i(a,null);i.checked?d<0&&t.$set(o,"selected",a.concat([null])):d>-1&&t.$set(o,"selected",a.slice(0,d).concat(a.slice(d+1)))}else t.$set(o,"selected",l)}}}):t._e()]),t._v(" "),r("span",{staticClass:"wp-adminify--name"},[t._v(t._s(o.name))])]),t._v(" "),r("span",{staticClass:"wp-adminify--count"},[t._v(t._s(o.count))])]),t._v(" "),o.children.length?r("folders",{staticClass:"folder--sub-lists",attrs:{folders:o.children,folder_select_toggle:t.folder_select_toggle}}):t._e(),t._v(" "),r("ul",{staticClass:"adminify--sub-menu"},[r("li",[r("a",{attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),r.stopPropagation(),t.showNewSubFolderPopup(o)}}},[t._v("New Sub-folder")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),r.stopPropagation(),t.showRenameFolderPopup(o)}}},[t._v("Rename")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),r.stopPropagation(),t.showDeleteFolderPopup(o)}}},[t._v("Delete")])])])],1)})),0)}),[],!1,null,null,null).exports},8425:(t,r,o)=>{o.d(r,{Z:()=>d});var a=o(1955);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(t,r,o){t[r]=o.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",d=i.asyncIterator||"@@asyncIterator",_=i.toStringTag||"@@toStringTag";function define(t,r,o){return Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,o){return t[r]=o}}function wrap(t,r,o,i){var l=r&&r.prototype instanceof Generator?r:Generator,d=Object.create(l.prototype),_=new Context(i||[]);return a(d,"_invoke",{value:makeInvokeMethod(t,o,_)}),d}function tryCatch(t,r,o){try{return{type:"normal",arg:t.call(r,o)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var u={};define(u,l,(function(){return this}));var p=Object.getPrototypeOf,h=p&&p(p(values([])));h&&h!==r&&o.call(h,l)&&(u=h);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(u);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,i,l,d){var _=tryCatch(t[a],t,i);if("throw"!==_.type){var c=_.arg,u=c.value;return u&&"object"==_typeof(u)&&o.call(u,"__await")?r.resolve(u.__await).then((function(t){invoke("next",t,l,d)}),(function(t){invoke("throw",t,l,d)})):r.resolve(u).then((function(t){c.value=t,l(c)}),(function(t){return invoke("throw",t,l,d)}))}d(_.arg)}var i;a(this,"_invoke",{value:function value(t,o){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,o,r,a)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,o){var a="suspendedStart";return function(i,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw l;return doneResult()}for(o.method=i,o.arg=l;;){var d=o.delegate;if(d){var _=maybeInvokeDelegate(d,o);if(_){if(_===c)continue;return _}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===a)throw a="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a="executing";var u=tryCatch(t,r,o);if("normal"===u.type){if(a=o.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(a="completed",o.method="throw",o.arg=u.arg)}}}function maybeInvokeDelegate(t,r){var o=r.method,a=t.iterator[o];if(void 0===a)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),c;var i=tryCatch(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,c;var l=i.arg;return l?l.done?(r[t.resultName]=l.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):l:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function next(){for(;++a<t.length;)if(o.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(v,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,_,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,_,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,d,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,o,a,i,l){void 0===l&&(l=Promise);var d=new AsyncIterator(wrap(r,o,a,i),l);return t.isGeneratorFunction(o)?d:d.next().then((function(t){return t.done?t.value:d.next()}))},defineIteratorMethods(v),define(v,_,"Generator"),define(v,l,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),o=[];for(var a in r)o.push(a);return o.reverse(),function next(){for(;o.length;){var t=o.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(o,a){return l.type="throw",l.arg=t,r.next=o,a&&(r.method="next",r.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var d=o.call(i,"catchLoc"),_=o.call(i,"finallyLoc");if(d&&_){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(d){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!_)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var l=i;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var d=l?l.completion:{};return d.type=t,d.arg=r,l?(this.method="next",this.next=l.finallyLoc,c):this.complete(d)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),c},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),resetTryEntry(o),c}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc===t){var a=o.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(o)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,o){return this.delegate={iterator:values(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=void 0),c}},t}function asyncGeneratorStep(t,r,o,a,i,l,d){try{var _=t[l](d),c=_.value}catch(t){return void o(t)}_.done?r(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(t){return function(){var r=this,o=arguments;return new Promise((function(a,i){var l=t.apply(r,o);function _next(t){asyncGeneratorStep(l,a,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,a,i,_next,_throw,"throw",t)}_next(void 0)}))}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var a,i,l,d,_=[],c=!0,u=!1;try{if(l=(o=o.call(t)).next,0===r){if(Object(o)!==o)return;c=!1}else for(;!(c=(a=l.call(o)).done)&&(_.push(a.value),_.length!==r);c=!0);}catch(t){u=!0,i=t}finally{try{if(!c&&null!=o.return&&(d=o.return(),Object(d)!==d))return}finally{if(u)throw i}}return _}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var a=0,i=function F(){};return{s:i,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,_=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return d=t.done,t},e:function e(t){_=!0,l=t},f:function f(){try{d||null==o.return||o.return()}finally{if(_)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,a=new Array(r);o<r;o++)a[o]=t[o];return a}function _defineProperty(t,r,o){return(r=function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,r||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var i=jQuery;const l={data:function data(){var t;return _defineProperty(t={post_type:"",post_type_tax:"",folders:[],posts:{},filter_folder:"",total_uncat_posts:""},"total_uncat_posts",""),_defineProperty(t,"folder_select_toggle",!1),_defineProperty(t,"create_folder_popup",!1),_defineProperty(t,"new_folder_name",null),_defineProperty(t,"create_folder_error",null),_defineProperty(t,"rename_folder_popup",!1),_defineProperty(t,"rename_folder_name",null),_defineProperty(t,"rename_folder_error",null),_defineProperty(t,"delete_folder_popup",!1),_defineProperty(t,"delete_folder_error",null),_defineProperty(t,"move_to_folder_popup",!1),_defineProperty(t,"color_tags",["#7B61FF","#0347FF","#F24AE1","#ED2E7E","#FFC804","#00BA88"]),_defineProperty(t,"active_color_tag","#7B61FF"),_defineProperty(t,"currentView","all"),_defineProperty(t,"sort","a-z"),_defineProperty(t,"is_pro",!!wp_adminify__folder_data.is_pro),_defineProperty(t,"pro_notice",wp_adminify__folder_data.pro_notice),_defineProperty(t,"total_posts",{"auto-draft":0,draft:0,future:0,inherit:0,pending:0,private:0,publish:0,"request-completed":0,"request-confirmed":0,"request-failed":0,"request-pending":0,trash:0}),t},mounted:function mounted(){this.post_type=wp_adminify__folder_data.post_type,this.post_type_tax=wp_adminify__folder_data.post_type_tax,this.folders=wp_adminify__folder_data.folders,this.total_posts=wp_adminify__folder_data.total_posts,this.total_uncat_posts=wp_adminify__folder_data.total_uncat_posts,this._active_color_tag=this.active_color_tag,this.adminurl=wp_adminify__folder_data.adminurl,this.folder_hierarchy=wp_adminify__folder_data.folder_hierarchy,this.folders_to_edit=[];var t=a.Z.get(this.post_type_tax+"__sort");t&&(this.sort=t),this.init_folder_events(),i(function(){this.init_draggable_events(),this.init_droppable_events(),this.reset_on_other_ajax_events(),this.init_submenu_events(),this.set_posts_folders()}.bind(this))},methods:{set_posts_folders:function set_posts_folders(){var t=this;i("#the-list .adminify-move-file").each((function(){var r=i(this).data("id"),o=i(this).data("folders");o=o?String(o).split(",").map((function(t){return Number(t)})):[],t.posts[r]=o})),i(".attachments-browser .attachments .attachment").each((function(){var r=i(this).data("id"),o=i(this).find(".attachment-preview").data("folders");o=o?String(o).split(",").map((function(t){return Number(t)})):[],t.posts[r]=o}))},get_folder_by_id:function get_folder_by_id(t){return this.folders.find((function(r){return r.term_id==t}))},get_folder_ids_by_post_id:function get_folder_ids_by_post_id(t){return this.posts[t]},init_submenu_events:function init_submenu_events(){i(".folder--actions .has--sub-menu > a").on("click",(function(t){t.preventDefault(),t.stopImmediatePropagation(),i(this).parent().toggleClass("sub-menu--open")})),i("body").on("click",(function(){i(".has--sub-menu.sub-menu--open").removeClass("sub-menu--open")}))},reset_on_other_ajax_events:function reset_on_other_ajax_events(){var t=this;i(document).ajaxComplete(function(t,r,o){var a=this;if("html"==o.dataType)return this.init_draggable_events();o.data&&(["inline-save","query-attachments","delete-post"].some((function(t){return-1!=o.data.indexOf("action=".concat(t))}))&&setTimeout((function(){a.init_draggable_events(),a.refresh_folders_data_ajax()}),100))}.bind(this)),wp.Uploader&&wp.Uploader.queue&&wp.Uploader.queue.on("reset",(function(){t.init_draggable_events(),t.refresh_folders_data_ajax()}))},init_folder_events:function init_folder_events(){var t=this;if(wp.media){var r=wp.media.view.Attachments;wp.media.view.Attachments=r.extend({initialize:function initialize(){var o=this;r.prototype.initialize.apply(this,arguments),i(".folder--lists, .folder--stats").on("click","li a",(function(r){r.preventDefault();var a=i(this).attr("href");if(i(".attachments-browser .attachments").length){o.model.get("library").props.set("media_folder",t.getUrlParameter(a,"media_folder"));var l=t.getUrlParameter(a);window.history.pushState(l,"",a)}}))}})}else i(".folder--lists, .folder--stats").on("click","li a",(function(r){r.preventDefault();var o=i(this).attr("href");if(i(".folder--lists, .folder--stats").find("li").removeClass("active"),i(this).closest("li").addClass("active"),i("#the-list").length){i("#the-list").load("".concat(o," #the-list > tr"));var a=t.getUrlParameter(o);window.history.pushState(a,"",o)}}))},folderActions:function folderActions(t,r){t.preventDefault(),this.folders.forEach((function(t){t.contexted=!1})),r.contexted=!0,i(".folder--lists li").removeClass("sub-menu--open"),i(t.target).closest("li").addClass("sub-menu--open")},get_active_folder:function get_active_folder(){return i(".folder--lists li.active").toArray().map((function(t){return i(t).data("folder")}))},is_folder:function is_folder(t){var r=window.location.href;return!("all"==t&&r.indexOf(wp_adminify__folder_data.post_type_tax)>-1)&&r==this.get_folder_url(t)},getUrlParameter:function getUrlParameter(t,r){t=t.substring(t.indexOf("?")+1);var o,a=new URLSearchParams(t),i={},l=_createForOfIteratorHelper(a.keys());try{for(l.s();!(o=l.n()).done;){var d=o.value;a.getAll(d).length>1?i[d]=a.getAll(d):i[d]=a.get(d)}}catch(t){l.e(t)}finally{l.f()}return r?r in i?i[r]:"":i},get_folder_url:function get_folder_url(t){var r=location.search,o=new URLSearchParams(r),a=o.get("post_type"),i=new URL(location.protocol+"//"+location.host+location.pathname);if(a&&i.searchParams.set("post_type",a),"all"!==t){var l="uncategorized"==t?"-1":t.slug;i.searchParams.set(this.post_type_tax,l)}var d,_=_createForOfIteratorHelper(o.entries());try{for(_.s();!(d=_.n()).done;){var c=_slicedToArray(d.value,2),u=c[0],p=c[1];"post_type"!=u&&(u!=this.post_type_tax&&i.searchParams.set(u,p))}}catch(t){_.e(t)}finally{_.f()}return i.toJSON()},showPopupOverlay:function showPopupOverlay(){i("body").addClass("wp-adminify--popup-show")},hidePopupOverlay:function hidePopupOverlay(){i("body").removeClass("wp-adminify--popup-show")},showNewFolderPopup:function showNewFolderPopup(){this.showPopupOverlay(),this.create_folder_popup=!0,this.parent_folder=null,this.active_color_tag=this.color_tags[0],this._active_color_tag=this.active_color_tag},showNewSubFolderPopup:function showNewSubFolderPopup(t){this.showPopupOverlay(),this.create_folder_popup=!0,this.parent_folder=t.term_id,this.active_color_tag=this.color_tags[0],this._active_color_tag=this.active_color_tag},showRenameFolderPopup:function showRenameFolderPopup(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r&&r.term_id?this.folders_to_edit=[r]:this.get_active_folder().length?this.folders_to_edit=[this.folders.find((function(r){return r.term_id==t.get_active_folder()[0]}))]:this.folders_to_edit=null,this.folders_to_edit&&this.folders_to_edit.length&&(r=this.folders_to_edit[0],this._rename_folder_name=r.name,this.rename_folder_name=r.name,this.active_color_tag=r.color,this._active_color_tag=this.active_color_tag,this.showPopupOverlay(),this.rename_folder_popup=!0)},showDeleteFolderPopup:function showDeleteFolderPopup(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r&&r.term_id?this.folders_to_edit=[r]:this.folder_select_toggle?this.folders_to_edit=this.folders.filter((function(t){return t.selected})):this.get_active_folder().length?this.folders_to_edit=[this.folders.find((function(r){return r.term_id==t.get_active_folder()[0]}))]:this.folders_to_edit=null,this.folders_to_edit&&this.folders_to_edit.length&&(this.showPopupOverlay(),this.delete_folder_popup=!0)},hide_rename_folder_popup:function hide_rename_folder_popup(){this.hidePopupOverlay(),this.rename_folder_popup=!1,this.rename_folder_error=null},hide_delete_folder_popup:function hide_delete_folder_popup(){this.hidePopupOverlay(),this.delete_folder_popup=!1,this.delete_folder_error=null},hide_move_to_folder_popup:function hide_move_to_folder_popup(){this.hidePopupOverlay(),this.move_to_folder_popup=!1},hide_create_folder_popup:function hide_create_folder_popup(){this.hidePopupOverlay(),this.create_folder_popup=!1,this.new_folder_name=null,this.create_folder_error=null,this.active_color_tag=this._active_color_tag},saveNewFolder:function saveNewFolder(){var t=this,r={post_type:wp_adminify__folder_data.post_type,post_type_tax:wp_adminify__folder_data.post_type_tax,new_folder_name:this.new_folder_name,folder_color_tag:this.active_color_tag,parent_folder:this.parent_folder,action:"adminify_folder",route:"create_new_folder",_ajax_nonce:wp_adminify__folder_data.nonce};this.is_pro&&(r.parent_folder=this.parent_folder),i.ajax({url:wp_adminify__folder_data.ajaxurl,method:"post",data:r}).done((function(r,o,a){r.success&&200==a.status?(t.refresh_folders_data(r.data),t.hide_create_folder_popup()):t.create_folder_error=r.data.message}))},renameFolder:function renameFolder(){var t=this,r=!1;if(this.active_color_tag!=this._active_color_tag&&(r=!0),r||this._rename_folder_name.trim()==this.rename_folder_name.trim()||(r=!0),!r)return this.hide_rename_folder_popup();i.ajax({url:wp_adminify__folder_data.ajaxurl,method:"post",data:{post_type:wp_adminify__folder_data.post_type,post_type_tax:wp_adminify__folder_data.post_type_tax,term_id:t.folders_to_edit[0].term_id,folder_name:t.rename_folder_name,folder_color_tag:t.active_color_tag,action:"adminify_folder",route:"rename_folder",_ajax_nonce:wp_adminify__folder_data.nonce}}).done((function(r,o,a){r.success&&200==a.status?(t.refresh_folders_data(r.data),t.hide_rename_folder_popup(),i(".folder--lists li.active > a").trigger("click")):t.rename_folder_error=r.data.message}))},init_draggable_events:function init_draggable_events(){i(".adminify-move-file:not(.ui-draggable), .adminify-move-multiple:not(.ui-draggable)").draggable({revert:"invalid",containment:"document",helper:"clone",cursor:"move",start:function start(t,r){i(this).closest("td").addClass("adminify-draggable"),i("body").addClass("adminify--items-dragging")},stop:function stop(t,r){i(this).closest("td").removeClass("adminify-draggable"),i("body").removeClass("adminify--items-dragging")}}),i(".attachments-browser li.attachment:not(.ui-draggable)").draggable({revert:"invalid",containment:"document",cursor:"move",helper:"clone",cursorAt:{left:0,top:0},start:function start(t,r){i("body").addClass("adminify--items-dragging")},stop:function stop(t,r){i(".adminify--selected-items").remove(),i("body").removeClass("adminify--items-dragging")}})},init_droppable_events:function init_droppable_events(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var r;return _regeneratorRuntime().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:r=t,i(".folder--lists li a:not(.ui-droppable), .folder--stats li.folder--single-uncategorized a:not(.ui-droppable)").droppable({accept:".adminify-move-file, .adminify-move-multiple, .attachments-browser li.attachment",hoverClass:"adminify-drop-hover",classes:{"ui-droppable-active":"ui-state-highlight"},tolerance:"pointer",drop:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t,o){var a,l,d,_;return _regeneratorRuntime().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(a=i(this).parent("li").data("folder")){t.next=3;break}return t.abrupt("return");case 3:if(l=[],o.draggable.hasClass("adminify-move-multiple")?(l=i("#the-list .check-column input[type=checkbox]:checked").toArray().map((function(t){return t.value})),i(".wp-list-table .manage-column.check-column input").prop("checked",!1)):o.draggable.hasClass("adminify-move-file")?l=[o.draggable[0].attributes["data-id"].nodeValue]:o.draggable.hasClass("attachment")&&(l=i(".media-toolbar.wp-filter").hasClass("media-toolbar-mode-select")?i(".attachments-browser li.attachment.selected").toArray().map((function(t){return t.dataset.id})):[o.draggable[0].attributes["data-id"].nodeValue]),l.length){t.next=7;break}return t.abrupt("return");case 7:if(d=!1,"uncategorized"===a){t.next=14;break}if(!l.some((function(t){return!!r.get_folder_ids_by_post_id(t).length}))){t.next=14;break}return t.next=13,r.shouldWeMoveToFolder();case 13:d=t.sent;case 14:o.draggable.hasClass("attachment")||(_=i("input[name=post_view]").first().val()||"list",i.ajax({url:wp_adminify__folder_data.ajaxurl,method:"post",data:{post_ids:l,folder_id:a,post_type:wp_adminify__folder_data.post_type,post_type_tax:wp_adminify__folder_data.post_type_tax,action:"adminify_folder",route:"move_to_folder",move_to_folder:d,screen:pagenow,mode:_,_ajax_nonce:wp_adminify__folder_data.nonce}}).done((function(t,o){t.success&&(r.refresh_rows(),r.refresh_folders_data(t.data))}))),o.draggable.hasClass("attachment")&&i.ajax({url:wp_adminify__folder_data.ajaxurl,method:"post",data:{post_ids:l,folder_id:a,post_type:wp_adminify__folder_data.post_type,post_type_tax:wp_adminify__folder_data.post_type_tax,action:"adminify_folder",route:"move_to_folder",move_to_folder:d,screen:pagenow,mode:"grid",_ajax_nonce:wp_adminify__folder_data.nonce}}).done((function(t,o){t.success&&(r.refresh_rows(),r.refresh_folders_data(t.data))}));case 16:case"end":return t.stop()}}),_callee,this)})));return function drop(r,o){return t.apply(this,arguments)}}()});case 2:case"end":return o.stop()}}),_callee2)})))()},shouldWeMoveToFolder:function shouldWeMoveToFolder(){var t=this;return this.showPopupOverlay(),this.move_to_folder_popup=!0,new Promise((function(t){jQuery("body").on("click.promptDialog",".button-move, .button-copy",(function(r){r.preventDefault(),jQuery(this).hasClass("button-move")&&t(!0),t(!1)}))})).finally((function(){jQuery(".button-move, .button-copy").off("click.promptDialog"),t.hidePopupOverlay(),t.move_to_folder_popup=!1}))},refresh_rows:function refresh_rows(){var t=i(".folder--lists li.active, .folder--stats li.active").first();t.length||(t=i(".folder--stats li").first()),t.children("a").trigger("click")},get_allowed_status:function get_allowed_status(){return["pending","draft","future","private","publish","inherit"]},refresh_folders_data:function refresh_folders_data(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.folders=r.folders,this.total_posts=r.total_posts,this.total_uncat_posts=r.total_uncat_posts,this.folder_hierarchy=r.folder_hierarchy,setTimeout((function(){t.init_droppable_events(),t.init_draggable_events(),t.set_posts_folders()}),200)},refresh_folders_data_ajax:function refresh_folders_data_ajax(){var t=this;i.ajax({url:wp_adminify__folder_data.ajaxurl,method:"post",data:{post_type:wp_adminify__folder_data.post_type,post_type_tax:wp_adminify__folder_data.post_type_tax,action:"adminify_folder",route:"refresh_folders",_ajax_nonce:wp_adminify__folder_data.nonce}}).done((function(r,o){r.success&&t.refresh_folders_data(r.data)}))},get_color_tags:function get_color_tags(){if(this.folders_to_edit||this.folders_to_edit.length){var t=this.folders_to_edit[0],r="";return t&&t.color&&(r=t.color),!r||this.color_tags.includes(r)?this.color_tags:this.color_tags.concat([r])}},deleteFolders:function deleteFolders(){var t=this,r=this.folders_to_edit;if(!r.length)return this.hide_delete_folder_popup();r=r.map((function(t){return t.term_id})),i.ajax({url:wp_adminify__folder_data.ajaxurl,method:"post",data:{post_type:wp_adminify__folder_data.post_type,post_type_tax:wp_adminify__folder_data.post_type_tax,term_ids:r,action:"adminify_folder",route:"delete_folders",_ajax_nonce:wp_adminify__folder_data.nonce}}).done((function(r,o,a){r.success&&200==a.status&&(t.refresh_folders_data(r.data),t.hide_delete_folder_popup(),i(".folder--lists, .folder--stats").find("li.active > a").trigger("click"))}))},sortFolders:function sortFolders(t){var r=i(t.currentTarget).data("sort");r&&(a.Z.set(this.post_type_tax+"__sort",r),this.sort=r)}},computed:{_filter_folder:function _filter_folder(){return this.filter_folder.trim().toLowerCase()},filtered_folders:function filtered_folders(){var t=this,r=this,o=this.folders.map((function(t){return t.selected=!1,t.contexted=!1,t.children=[],t}));function addChild(t,a){r.folder_hierarchy[t.term_id].forEach((function(i){var l=o.find((function(t){return t.term_id==i})),d=o.findIndex((function(t){return t.term_id==i}));l&&d>-1&&(t.children.find((function(t){return t.term_id==l.term_id}))||(t.children.push(l),l=t.children.find((function(t){return t.term_id==i})),i in r.folder_hierarchy&&addChild(l,a)))}))}if(o=o.sort((function(r,o){if("a-z"==t.sort){if(r.name<o.name)return-1;if(r.name>o.name)return 1}if("z-a"==t.sort){if(r.name<o.name)return 1;if(r.name>o.name)return-1}return 0})),this._filter_folder){var a=o.filter((function(r){return r.name.toLowerCase().search(t._filter_folder.toLowerCase())>-1}));if(a.length)return a}for(var i in o.forEach((function(t){t.term_id in r.folder_hierarchy&&addChild(t,o)})),r.folder_hierarchy)r.folder_hierarchy[i].forEach((function(t){var r=o.findIndex((function(r){return r.term_id==t}));o.splice(r,1)}));return o},total_posts_count:function total_posts_count(){var t=this,r=0;return this.get_allowed_status().forEach((function(o){r+=Number(t.total_posts[o])})),r},is_reached_limit:function is_reached_limit(){return!this.is_pro&&(!(!this.folders||!this.folders.length)&&this.folders.length>=3)}},watch:{filter_folder:function filter_folder(){var t=this;setTimeout((function(){t.init_draggable_events(),t.init_droppable_events()}),50)}}};const d=(0,o(1900).Z)(l,(function render(){var t=this,r=t._self._c;return r("div",{attrs:{id:"wp-adminify--folder-app"}},[r("div",{staticClass:"wp-adminify--folder-widget"},[r("div",{staticClass:"wp-adminify--folder-app"},[r("div",{staticClass:"wp-adminify--folder-app--inner"},[r("div",{staticClass:"folder--header"},[r("span",[t._v("Folders")]),t._v(" -\n                    "),r("a",{attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),t.showNewFolderPopup.apply(null,arguments)}}},[t._v("Create New Folder")])]),t._v(" "),r("div",{staticClass:"folder--actions"},[r("span",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.folder_select_toggle,expression:"folder_select_toggle"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.folder_select_toggle)?t._i(t.folder_select_toggle,null)>-1:t.folder_select_toggle},on:{change:function change(r){var o=t.folder_select_toggle,a=r.target,i=!!a.checked;if(Array.isArray(o)){var l=t._i(o,null);a.checked?l<0&&(t.folder_select_toggle=o.concat([null])):l>-1&&(t.folder_select_toggle=o.slice(0,l).concat(o.slice(l+1)))}else t.folder_select_toggle=i}}})]),t._v(" "),r("a",{staticClass:"btn--folder-rename",attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),r.stopPropagation(),t.showRenameFolderPopup.apply(null,arguments)}}},[t._v("Rename")]),t._v(" "),r("a",{staticClass:"btn--folder-delete",attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),r.stopPropagation(),t.showDeleteFolderPopup.apply(null,arguments)}}},[t._v("Delete")]),t._v(" "),r("ul",{staticClass:"folder-sort--list"},[t._m(0),t._v(" "),r("li",{staticClass:"folder--sort has--sub-menu"},[t._m(1),t._v(" "),r("ul",{staticClass:"adminify--sub-menu"},[r("li",[r("a",{attrs:{"data-sort":"a-z",href:"#"},on:{click:function click(r){return r.preventDefault(),t.sortFolders(r)}}},[t._v("A → Z")])]),t._v(" "),r("li",[r("a",{attrs:{"data-sort":"z-a",href:"#"},on:{click:function click(r){return r.preventDefault(),t.sortFolders(r)}}},[t._v("Z → A")])])])])])]),t._v(" "),r("div",{staticClass:"folder--search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filter_folder,expression:"filter_folder"}],attrs:{type:"text",placeholder:"Search folder"},domProps:{value:t.filter_folder},on:{input:function input(r){r.target.composing||(t.filter_folder=r.target.value)}}})]),t._v(" "),r("ul",{staticClass:"folder--stats"},[r("li",{staticClass:"folder--single-all",class:t.is_folder("all")&&"active",attrs:{"data-folder":"all"}},[r("a",{attrs:{href:t.get_folder_url("all")}},[r("span",[t._v("All")]),r("span",{staticClass:"wp-adminify--count"},[t._v(t._s(t.total_posts_count))])])]),t._v(" "),r("li",{staticClass:"folder--single-uncategorized",class:t.is_folder("uncategorized")&&"active",attrs:{"data-folder":"uncategorized"}},[r("a",{attrs:{href:t.get_folder_url("uncategorized")}},[r("span",[t._v("Uncategorized")]),r("span",{staticClass:"wp-adminify--count"},[t._v(t._s(t.total_uncat_posts))])])])]),t._v(" "),t.folders?r("folders",{staticClass:"folder--lists",attrs:{folders:t.filtered_folders,folder_select_toggle:t.folder_select_toggle}}):t._e()],1)])]),t._v(" "),r("div",{staticClass:"wp-adminify--popup-area"},[r("div",{staticClass:"wp-adminify--popup-container"},[r("div",{staticClass:"wp-adminify--popup-container_inner"},[t.create_folder_popup?r("div",{staticClass:"popup--create-new-folder"},[r("a",{staticClass:"wp-adminify--popup-close",attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),t.hide_create_folder_popup.apply(null,arguments)}}},[r("span",{staticClass:"dashicons dashicons-no-alt"})]),t._v(" "),t.parent_folder?[r("h3",[t._v("New Sub Folder")]),t._v(" "),t.is_pro?[r("div",{staticClass:"popup--new-folder__name"},[r("div",[t._v("Sub Folder Name")]),t._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.new_folder_name,expression:"new_folder_name"}],attrs:{type:"text",placeholder:"Write here"},domProps:{value:t.new_folder_name},on:{input:[function(r){r.target.composing||(t.new_folder_name=r.target.value)},function(r){t.create_folder_error=null}]}})])]),t._v(" "),r("br"),t._v(" "),r("div",{staticClass:"popup--new-folder__color"},[r("div",[t._v("Colour Tag")]),t._v(" "),r("div",[r("ul",{staticClass:"wp-adminify--colors"},t._l(t.color_tags,(function(o){return r("li",{key:o,class:o==t.active_color_tag?"active":""},[r("a",{style:"background: ".concat(o,";"),attrs:{href:"#"},on:{click:function click(r){r.preventDefault(),t.active_color_tag=o}}})])})),0)])]),t._v(" "),r("a",{staticClass:"button button-primary",attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),t.saveNewFolder.apply(null,arguments)}}},[t._v("Save Folder")]),t._v(" "),t.create_folder_error?r("div",{staticClass:"popup--new-folder-error"},[t._v(t._s(t.create_folder_error))]):t._e()]:[r("div",{staticClass:"wp-adminify-folder--pro-notice",domProps:{innerHTML:t._s(t.pro_notice)}})]]:[r("h3",[t._v("New Folder")]),t._v(" "),t.is_reached_limit?[r("div",{staticClass:"wp-adminify-folder--pro-notice",domProps:{innerHTML:t._s(t.pro_notice)}})]:[r("div",{staticClass:"popup--new-folder__name"},[r("div",[t._v("Folder Name")]),t._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.new_folder_name,expression:"new_folder_name"}],attrs:{type:"text",placeholder:"Write here"},domProps:{value:t.new_folder_name},on:{input:[function(r){r.target.composing||(t.new_folder_name=r.target.value)},function(r){t.create_folder_error=null}]}})])]),t._v(" "),r("br"),t._v(" "),r("div",{staticClass:"popup--new-folder__color"},[r("div",[t._v("Colour Tag")]),t._v(" "),r("div",[r("ul",{staticClass:"wp-adminify--colors"},t._l(t.color_tags,(function(o){return r("li",{key:o,class:o==t.active_color_tag?"active":""},[r("a",{style:"background: ".concat(o,";"),attrs:{href:"#"},on:{click:function click(r){r.preventDefault(),t.active_color_tag=o}}})])})),0)])]),t._v(" "),r("a",{staticClass:"button button-primary",attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),t.saveNewFolder.apply(null,arguments)}}},[t._v("Save Folder")]),t._v(" "),t.create_folder_error?r("div",{staticClass:"popup--new-folder-error"},[t._v(t._s(t.create_folder_error))]):t._e()]]],2):t._e(),t._v(" "),t.rename_folder_popup?r("div",{staticClass:"popup--rename-folder"},[r("a",{staticClass:"wp-adminify--popup-close",attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),t.hide_rename_folder_popup.apply(null,arguments)}}},[r("span",{staticClass:"dashicons dashicons-no-alt"})]),t._v(" "),r("h3",[t._v("Rename Folder")]),t._v(" "),r("div",{staticClass:"popup--new-folder__name"},[r("div",[t._v("Rename Folder")]),t._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.rename_folder_name,expression:"rename_folder_name"}],attrs:{type:"text",placeholder:"Write here"},domProps:{value:t.rename_folder_name},on:{input:[function(r){r.target.composing||(t.rename_folder_name=r.target.value)},function(r){t.rename_folder_error=null}]}})])]),t._v(" "),r("br"),t._v(" "),r("div",{staticClass:"popup--new-folder__color"},[r("div",[t._v("Change Color")]),t._v(" "),r("div",[r("ul",{staticClass:"wp-adminify--colors"},t._l(t.get_color_tags(),(function(o){return r("li",{key:o,class:o==t.active_color_tag?"active":""},[r("a",{style:"background: ".concat(o,";"),attrs:{href:"#"},on:{click:function click(r){r.preventDefault(),t.active_color_tag=o}}})])})),0)])]),t._v(" "),r("a",{staticClass:"button button-primary",attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),t.renameFolder.apply(null,arguments)}}},[t._v("Save Folder")]),t._v(" "),t.rename_folder_error?r("div",{staticClass:"popup--new-folder-error"},[t._v(t._s(t.rename_folder_error))]):t._e()]):t._e(),t._v(" "),t.delete_folder_popup?r("div",{staticClass:"popup--delete-folder"},[r("a",{staticClass:"wp-adminify--popup-close",attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),t.hide_delete_folder_popup.apply(null,arguments)}}},[r("span",{staticClass:"dashicons dashicons-no-alt"})]),t._v(" "),r("h3",[t._v("Are you sure you want to delete the selected folder?")]),t._v(" "),r("p",[t._v("Items in the folder will not be deleted.")]),t._v(" "),r("div",[r("a",{staticClass:"button",attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),t.hide_delete_folder_popup.apply(null,arguments)}}},[t._v("No, Keep it")]),t._v(" "),r("a",{staticClass:"button button-primary",attrs:{href:"#"},on:{click:function click(r){return r.preventDefault(),t.deleteFolders.apply(null,arguments)}}},[t._v("Yes, Delete it!")])])]):t._e(),t._v(" "),t.move_to_folder_popup?r("div",{staticClass:"popup--move-to-folder"},[r("h3",[t._v("Few posts are already in another Folder")]),t._v(" "),r("p",[t._v("Please choose a option whether you want to copy or move to new Folder.")]),t._v(" "),t._m(2)]):t._e()])])])])}),[function(){var t=this._self._c;return t("li",{staticClass:"folder--expand"},[t("a",{staticClass:"btn--folder-expand",attrs:{href:"#"}},[t("span",{staticClass:"dashicons dashicons-arrow-down-alt2"})])])},function(){var t=this._self._c;return t("a",{staticClass:"btn--folder-sort",attrs:{href:"#"}},[t("span",{staticClass:"dashicons dashicons-sort"})])},function(){var t=this,r=t._self._c;return r("div",[r("a",{staticClass:"button button-copy",attrs:{href:"#"}},[t._v("Copy To Folder")]),t._v(" "),r("a",{staticClass:"button button-primary button-move",attrs:{href:"#"}},[t._v("Move To Folder")])])}],!1,null,null,null).exports}},t=>{t.O(0,[8495],(()=>{return r=9172,t(t.s=r);var r}));t.O()}]);