function siteseo_titles_counters(){let t=jQuery,e=t("#siteseo_titles_title_meta");if(e.length){t(".snippet-title-custom:visible").length>0?e=t(".snippet-title-custom"):t(".snippet-title:visible").length>0?e=t(".snippet-title"):t(".snippet-title-default:visible").length>0&&(e=t(".snippet-title-default"));var s=e.val(),i=t("#siteseo_titles_title_meta").attr("placeholder");if(t("#siteseo_titles_title_counters").after('<div id="siteseo_titles_title_counters_val">/ 60</div>'),s.length>0?(t("#siteseo_titles_title_counters").text(s.length),t("#siteseo_titles_title_pixel").text(pixelTitle(s))):i.length&&(t("#siteseo_titles_title_counters").text(i.length),t("#siteseo_titles_title_pixel").text(pixelTitle(i))),s.length>60?t("#siteseo_titles_title_counters").css("color","red"):i.length>60&&t("#siteseo_titles_title_counters").css("color","red"),pixelTitle(s)>568?t("#siteseo_titles_title_pixel").css("color","red"):pixelTitle(i)>568&&t("#siteseo_titles_title_pixel").css("color","red"),s.length)var o=Math.round(pixelTitle(s)/568*100);else var o=Math.round(pixelTitle(i)/568*100);o>=100&&(o=100),t("#siteseo_titles_title_counters_progress").attr("aria-valuenow",o),t("#siteseo_titles_title_counters_progress").text(o+"%"),t("#siteseo_titles_title_counters_progress").css("width",o+"%"),t("#siteseo_titles_title_meta, #siteseo-tag-single-title, #siteseo-tag-single-site-title, #siteseo-tag-single-sep").on("keyup paste change click",function(e){var s=t("#siteseo_titles_title_meta").val();t(".snippet-title-custom:visible").length>0?s=t(".snippet-title-custom").text():t(".snippet-title:visible").length>0?s=t(".snippet-title").text():t(".snippet-title-default:visible").length>0&&(s=t(".snippet-title-default").text());var i=t("#siteseo_titles_title_meta").attr("placeholder");if(t("#siteseo_titles_title_counters").css("color","inherit"),t("#siteseo_titles_title_pixel").css("color","inherit"),s.length>60&&t("#siteseo_titles_title_counters").css("color","red"),pixelTitle(s)>568&&t("#siteseo_titles_title_pixel").css("color","red"),0==s.length&&(i.length>60&&t("#siteseo_titles_title_counters").css("color","red"),pixelTitle(i)>568&&t("#siteseo_titles_title_pixel").css("color","red")),s.length>0?(t("#siteseo_titles_title_counters").text(s.length),t("#siteseo_titles_title_pixel").text(pixelTitle(s))):i.length&&(t("#siteseo_titles_title_counters").text(i.length),t("#siteseo_titles_title_pixel").text(pixelTitle(i))),s.length)var o=Math.round(pixelTitle(s)/568*100);else var o=Math.round(pixelTitle(i)/568*100);o>=100&&(o=100),t("#siteseo_titles_title_counters_progress").attr("aria-valuenow",o),t("#siteseo_titles_title_counters_progress").text(o+"%"),t("#siteseo_titles_title_counters_progress").css("width",o+"%")})}}function siteseo_meta_desc_counters(){let t=jQuery;if(t("#siteseo_titles_desc_meta").length){var e=t("#siteseo_titles_desc_meta").val(),s=t("#siteseo_titles_desc_meta").attr("placeholder");if(t("#siteseo_titles_desc_counters").after('<div id="siteseo_titles_desc_counters_val">/ 160</div>'),e.length>0?(t("#siteseo_titles_desc_counters").text(e.length),t("#siteseo_titles_desc_pixel").text(pixelDesc(e))):s.length&&(t("#siteseo_titles_desc_counters").text(s.length),t("#siteseo_titles_desc_pixel").text(pixelDesc(s))),e.length>160?t("#siteseo_titles_desc_counters").css("color","red"):s.length>160&&t("#siteseo_titles_desc_counters").css("color","red"),pixelDesc(e)>940?t("#siteseo_titles_desc_pixel").css("color","red"):pixelDesc(s)>940&&t("#siteseo_titles_desc_pixel").css("color","red"),e.length)var i=Math.round(pixelDesc(e)/940*100);else var i=Math.round(pixelDesc(s)/940*100);i>=100&&(i=100),t("#siteseo_titles_desc_counters_progress").attr("aria-valuenow",i),t("#siteseo_titles_desc_counters_progress").text(i+"%"),t("#siteseo_titles_desc_counters_progress").css("width",i+"%"),t("#siteseo_titles_desc_meta, #siteseo-tag-single-excerpt").on("keyup paste change click",function(e){var s=t("#siteseo_titles_desc_meta").val(),i=t("#siteseo_titles_desc_meta").attr("placeholder");if(t("#siteseo_titles_desc_counters").css("color","inherit"),t("#siteseo_titles_desc_pixel").css("color","inherit"),s.length>160&&t("#siteseo_titles_desc_counters").css("color","red"),pixelDesc(s)>940&&t("#siteseo_titles_desc_pixel").css("color","red"),0==s.length&&(i.length>160&&t("#siteseo_titles_desc_counters").css("color","red"),pixelDesc(i)>940&&t("#siteseo_titles_desc_pixel").css("color","red")),s.length>0?(t("#siteseo_titles_desc_counters").text(s.length),t("#siteseo_titles_desc_pixel").text(pixelDesc(s))):i.length&&(t("#siteseo_titles_desc_counters").text(i.length),t("#siteseo_titles_desc_pixel").text(pixelDesc(i))),s.length>0?(t(".snippet-description-custom").text(e.target.value.substr(0,160)+"..."),t(".snippet-description").hide(),t(".snippet-description-custom").css("display","inline"),t(".snippet-description-default").hide()):0==s.length&&(t(".snippet-description-default").css("display","inline"),t(".snippet-description-custom").hide(),t(".snippet-description").hide()),s.length)var o=Math.round(pixelDesc(s)/940*100);else var o=Math.round(pixelDesc(i)/940*100);o>=100&&(o=100),t("#siteseo_titles_desc_counters_progress").attr("aria-valuenow",o),t("#siteseo_titles_desc_counters_progress").text(o+"%"),t("#siteseo_titles_desc_counters_progress").css("width",o+"%")}),t("#excerpt, .editor-post-excerpt textarea").keyup(function(e){var s=t("#siteseo_titles_desc_meta").val(),i=t("#siteseo_titles_desc_meta").attr("placeholder");if(0==s.length&&0==t(".snippet-description-custom").val().length&&(t(".snippet-description-custom").text(e.target.value),t(".snippet-description").hide(),t(".snippet-description-custom").css("display","inline"),t(".snippet-description-default").hide()),s.length)var o=s.length;else var o=i.length;o>=100&&(o=100),t("#siteseo_titles_desc_counters_progress").attr("aria-valuenow",o),t("#siteseo_titles_desc_counters_progress").text(o+"%"),t("#siteseo_titles_desc_counters_progress").css("width",o+"%")})}}function pixelTitle(t){return inputText=t,font="20px Arial",(context=(canvas=document.createElement("canvas")).getContext("2d")).font=font,formattedWidth=Math.ceil(width=context.measureText(inputText).width)}function pixelDesc(t){return inputText=t,font="14px Arial",(context=(canvas=document.createElement("canvas")).getContext("2d")).font=font,formattedWidth=Math.ceil(width=context.measureText(inputText).width)}function siteseo_is_valid_url(t){return null!==t.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)}function siteseo_social_img(t){let e=jQuery;if(e("#siteseo_social_fb_title_meta").length){e(".snippet-"+t+"-img-alert").hide();var s=e("#siteseo_social_"+t+"_img_meta").val();if(""==s)var s=e("#siteseo_social_"+t+"_img_meta").attr("placeholder");!0===siteseo_is_valid_url(s)?(s.length>0?(e(".snippet-"+t+"-img-custom img").attr("src",s),e(".snippet-"+t+"-img").hide(),e(".snippet-"+t+"-img-custom").show(),e(".snippet-"+t+"-img-default").hide()):0==s.length&&(e(".snippet-"+t+"-img-default").show(),e(".snippet-"+t+"-img-custom").show(),e(".snippet-"+t+"-img").hide()),s.length>0&&e.get(s).done(function(){var i;if(-1==["jpg","jpeg","gif","png","webp"].indexOf(s.split(/\#|\?/)[0].split(".").pop().trim()))e(".snippet-"+t+"-img-alert.alert1").show();else{var o=new Image;o.src=s,e(o).one("load",function(){pic_real_width=parseInt(o.width),pic_real_height=parseInt(o.height),"fb"==t?(min_width=200,min_height=200):(min_width=144,min_height=144),(pic_real_width<min_width||pic_real_height<min_height)&&e(".snippet-"+t+"-img-alert.alert2").show(),ratio_img=(pic_real_width/pic_real_height).toFixed(2),e(".snippet-"+t+"-img-alert.alert4").show(),e(".snippet-"+t+"-img-alert.alert4 span").text(ratio_img)}),fetch(s).then(s=>{let i=Number(s.headers.get("Content-Length"));i/1024>300&&(e(".snippet-"+t+"-img-alert.alert6").show(),e(".snippet-"+t+"-img-alert.alert6 span").text(Math.round(i/1024)+"KB."))}).catch(t=>{console.error(t)})}}).fail(function(){e(".snippet-"+t+"-img-alert.alert3").show()})):e(".snippet-"+t+"-img-alert.alert5").show()}}async function siteseo_social(){let t=jQuery;t("#siteseo_social_fb_title_meta").length&&(t("#siteseo_social_fb_title_meta, #siteseo-tag-single-title, #siteseo-tag-single-site-title, #siteseo-tag-single-sep").on("keyup paste change click",function(e){var s=t("#siteseo_social_fb_title_meta").val();s.length>0?(t(".snippet-fb-title-custom").text(e.target.value),t(".snippet-fb-title").hide(),t(".snippet-fb-title-custom").show(),t(".snippet-fb-title-default").hide()):0==s.length&&(t(".snippet-fb-title-default").show(),t(".snippet-fb-title-custom").hide(),t(".snippet-fb-title").hide())}),t("#siteseo_social_fb_desc_meta").on("keyup paste change click",function(e){var s=t("#siteseo_social_fb_desc_meta").val();s.length>0?(t(".snippet-fb-description-custom").text(e.target.value),t(".snippet-fb-description").hide(),t(".snippet-fb-description-custom").show(),t(".snippet-fb-description-default").hide()):0==s.length&&(t(".snippet-fb-description-default").show(),t(".snippet-fb-description-custom").hide(),t(".snippet-fb-description").hide())}),siteseo_social_img("fb"),t("#siteseo_social_fb_img_meta").on("keyup paste change click",function(){siteseo_social_img("fb")}),t("#siteseo_social_twitter_title_meta").on("keyup paste change click",function(e){var s=t("#siteseo_social_twitter_title_meta").val();s.length>0?(t(".snippet-twitter-title-custom").text(e.target.value),t(".snippet-twitter-title").hide(),t(".snippet-twitter-title-custom").show(),t(".snippet-twitter-title-default").hide()):0==s.length&&(t(".snippet-twitter-title-default").show(),t(".snippet-twitter-title-custom").hide(),t(".snippet-twitter-title").hide())}),t("#siteseo_social_twitter_desc_meta").on("keyup paste change click",function(e){var s=t("#siteseo_social_twitter_desc_meta").val();s.length>0?(t(".snippet-twitter-description-custom").text(e.target.value),t(".snippet-twitter-description").hide(),t(".snippet-twitter-description-custom").show(),t(".snippet-twitter-description-default").hide()):0==s.length&&(t(".snippet-twitter-description-default").show(),t(".snippet-twitter-description-custom").hide(),t(".snippet-twitter-description").hide())}),siteseo_social_img("twitter"),t("#siteseo_social_twitter_img_meta").on("keyup paste change click",function(){siteseo_social_img("twitter")}))}function siteseo_ca_toggle(){let t=jQuery;var e=!1;t(".gr-analysis-title .btn-toggle").on("click",function(s){e&&(event.stopImmediatePropagation(),event.preventDefault(),e=!1),t(this).toggleClass("open"),t(this).attr("aria-expanded","false"==t(this).attr("aria-expanded")),t(this).parent().parent().next(".gr-analysis-content").toggle(),t(this).parent().parent().next(".gr-analysis-content").attr("aria-hidden","true"!=t(this).parent().parent().next(".gr-analysis-content").attr("aria-hidden"))}),t("#expand-all").on("click",function(e){e.preventDefault(),t(".gr-analysis-content").show(),t(".gr-analysis-title button").attr("aria-expanded",!0),t(".gr-analysis-content").attr("aria-hidden",!1)}),t("#close-all").on("click",function(e){e.preventDefault(),t(".gr-analysis-content").hide(),t(".gr-analysis-title button").attr("aria-expanded",!1),t(".gr-analysis-content").attr("aria-hidden",!0)})}jQuery(document).ready(function(){jQuery("#siteseo-ca-tabs .wrap-ca-list").length&&(jQuery("#siteseo-ca-tabs .hidden").removeClass("hidden"),jQuery("#siteseo-ca-tabs").tabs())});var input=document.querySelector("input[id=siteseo_analysis_target_kw_meta]"),target_kw=new Tagify(input,{originalInputValueFormat:t=>t.map(t=>t.value).join(",")});function siteseo_google_suggest(t){let e=jQuery;var s,i=String(t).split(",");for(s=0;s<i.length;s++)null!=i[s]&&void 0!=i[s]&&""!=i[s]&&"[object Object]"!=i[s]&&(document.getElementById("siteseo_suggestions").innerHTML+='<li><a href="#" class="siteseo-suggest-btn components-button is-secondary">'+i[s]+"</a></li>");e(".siteseo-suggest-btn").click(function(t){t.preventDefault(),target_kw.addTags(e(this).text())})}function siteseo_analysis_init(t){"1"==t("#toggle-preview").attr("data-toggle")?t("#siteseo_cpt .google-snippet-preview").addClass("mobile-preview"):t("#siteseo_cpt .google-snippet-preview").removeClass("mobile-preview"),t("#toggle-preview").off("click"),t("#toggle-preview").on("click",function(){t("#toggle-preview").attr("data-toggle","1"==t("#toggle-preview").attr("data-toggle")?"0":"1"),t("#siteseo_cpt .google-snippet-preview").toggleClass("mobile-preview")});var e=function(){if(void 0!==jQuery("#siteseo-tabs").attr("data_id"))var t=jQuery("#siteseo-tabs").attr("data_id");else if(void 0!==jQuery("#siteseo_content_analysis .wrap-siteseo-analysis").attr("data_id"))var t=jQuery("#siteseo_content_analysis .wrap-siteseo-analysis").attr("data_id");if(t){if(void 0!==jQuery("#siteseo-tabs").attr("data_tax"))var e=jQuery("#siteseo-tabs").attr("data_tax");else if(void 0!==jQuery("#siteseo_content_analysis .wrap-siteseo-analysis").attr("data_tax"))var e=jQuery("#siteseo_content_analysis .wrap-siteseo-analysis").attr("data_tax");if(void 0!==jQuery("#siteseo-tabs").attr("data_origin"))var s=jQuery("#siteseo-tabs").attr("data_origin");else if(void 0!==jQuery("#siteseo_content_analysis .wrap-siteseo-analysis").attr("data_origin"))var s=jQuery("#siteseo_content_analysis .wrap-siteseo-analysis").attr("data_origin");jQuery.ajax({method:"GET",url:siteseoAjaxRealPreview.siteseo_real_preview,data:{action:"siteseo_do_real_preview",post_id:t,tax_name:e,origin:s,post_type:jQuery("#siteseo_launch_analysis").attr("data_post_type"),siteseo_analysis_target_kw:jQuery("#siteseo_analysis_target_kw_meta").val(),_ajax_nonce:siteseoAjaxRealPreview.siteseo_nonce},beforeSend:function(){jQuery(".analysis-score p span").fadeIn().text(siteseoAjaxRealPreview.i18n.progress),jQuery(".analysis-score p").addClass("loading")},success:function(t){og_title=void 0===t.data.og_title?"":t.data.og_title.values,og_desc=void 0===t.data.og_desc?"":t.data.og_desc.values,og_img=void 0===t.data.og_img?"":t.data.og_img.values,og_url=void 0===t.data.og_url?"":t.data.og_url.host,og_site_name=void 0===t.data.og_site_name?"":t.data.og_site_name.values,tw_title=void 0===t.data.tw_title?"":t.data.tw_title.values,tw_desc=void 0===t.data.tw_desc?"":t.data.tw_desc.values,tw_img=void 0===t.data.tw_img?"":t.data.tw_img.values,meta_robots=void 0===t.data.meta_robots?"":t.data.meta_robots[0];var e={og_title:og_title,og_desc:og_desc,og_img:og_img,og_url:og_url,og_site_name:og_site_name,tw_title:tw_title,tw_desc:tw_desc,tw_img:tw_img};for(var s in e)e.length&&(s=e[s].length>1?e[s].slice(-1)[0]:e[s][0]);meta_robots=meta_robots.toString(),jQuery("#siteseo-advanced-alert").empty(),/noindex/.test(meta_robots)&&jQuery("#siteseo-advanced-alert").append('<span class="impact high" aria-hidden="true"></span>'),title="",t.data.title&&(title=t.data.title.substr(0,60)+"..."),jQuery("#siteseo_cpt .google-snippet-preview .snippet-title").html(title),jQuery("#siteseo_cpt .google-snippet-preview .snippet-title-default").html(title),jQuery("#siteseo_titles_title_meta").attr("placeholder",title),meta_desc="",t.data.meta_desc&&(meta_desc=t.data.meta_desc.substr(0,160)+"..."),jQuery("#siteseo_cpt .google-snippet-preview .snippet-description").html(meta_desc),jQuery("#siteseo_cpt .google-snippet-preview .snippet-description-default").html(meta_desc),jQuery("#siteseo_titles_desc_meta").attr("placeholder",meta_desc),e.og_title&&(jQuery("#siteseo_cpt #siteseo_social_fb_title_meta").attr("placeholder",e.og_title[0]),jQuery("#siteseo_cpt .facebook-snippet-preview .snippet-fb-title").html(e.og_title[0]),jQuery("#siteseo_cpt .facebook-snippet-preview .snippet-fb-title-default").html(e.og_title[0])),e.og_desc&&(jQuery("#siteseo_cpt #siteseo_social_fb_desc_meta").attr("placeholder",e.og_desc[0]),jQuery("#siteseo_cpt .facebook-snippet-preview .snippet-fb-description").html(e.og_desc[0]),jQuery("#siteseo_cpt .facebook-snippet-preview .snippet-fb-description-default").html(e.og_desc[0])),e.og_img&&(jQuery("#siteseo_cpt #siteseo_social_fb_img_meta").attr("placeholder",e.og_img[0]),jQuery("#siteseo_cpt .facebook-snippet-preview .snippet-fb-img img").attr("src",e.og_img[0]),jQuery("#siteseo_cpt .facebook-snippet-preview .snippet-fb-img-default img").attr("src",e.og_img[0])),jQuery("#siteseo_cpt .facebook-snippet-preview .snippet-fb-url").html(e.og_url),jQuery("#siteseo_cpt .facebook-snippet-preview .snippet-fb-site-name").html(e.og_site_name),e.tw_title&&(jQuery("#siteseo_cpt #siteseo_social_twitter_title_meta").attr("placeholder",e.tw_title[0]),jQuery("#siteseo_cpt .twitter-snippet-preview .snippet-twitter-title").html(e.tw_title[0]),jQuery("#siteseo_cpt .twitter-snippet-preview .snippet-twitter-title-default").html(e.tw_title[0])),e.tw_desc&&(jQuery("#siteseo_cpt #siteseo_social_twitter_desc_meta").attr("placeholder",e.tw_desc[0]),jQuery("#siteseo_cpt .twitter-snippet-preview .snippet-twitter-description").html(e.tw_desc[0]),jQuery("#siteseo_cpt .twitter-snippet-preview .snippet-twitter-description-default").html(e.tw_desc[0])),e.tw_img&&(jQuery("#siteseo_cpt #siteseo_social_twitter_img_meta").attr("placeholder",e.tw_img[0]),jQuery("#siteseo_cpt .twitter-snippet-preview .snippet-twitter-img img").attr("src",e.tw_img[0]),jQuery("#siteseo_cpt .twitter-snippet-preview .snippet-twitter-img-default img").attr("src",e.tw_img[0])),jQuery("#siteseo_cpt .twitter-snippet-preview .snippet-twitter-url").html(e.og_url),jQuery("#siteseo_cpt #siteseo_robots_canonical_meta").attr("placeholder",t.data.canonical),jQuery("#siteseo-analysis-tabs").load(" #siteseo-analysis-tabs-1","",siteseo_ca_toggle),jQuery("#siteseo-wrap-notice-target-kw").load(" #siteseo-notice-target-kw",""),jQuery(".analysis-score p").removeClass("loading"),jQuery("#siteseo_titles_title_counters_val").remove(),jQuery("#siteseo_titles_desc_counters_val").remove(),siteseo_titles_counters(),siteseo_meta_desc_counters(),siteseo_social()}})}};e(),t(document).off("click","#siteseo_launch_analysis",e),t(document).on("click","#siteseo_launch_analysis",e),siteseo_ca_toggle(),t("#siteseo_inspect_url").on("click",function(){if(t(this).attr("disabled","disabled"),t(".spinner").css("visibility","visible"),t(".spinner").css("float","none"),void 0!==jQuery("#siteseo-tabs").attr("data_id"))var e=jQuery("#siteseo-tabs").attr("data_id");else if(void 0!==jQuery("#siteseo_content_analysis .wrap-siteseo-analysis").attr("data_id"))var e=jQuery("#siteseo_content_analysis .wrap-siteseo-analysis").attr("data_id");jQuery.ajax({method:"POST",url:siteseoAjaxInspectUrl.siteseo_inspect_url,data:{action:"siteseo_inspect_url",post_id:e,_ajax_nonce:siteseoAjaxInspectUrl.siteseo_nonce},success:function(){t(".spinner").css("visibility","hidden"),t("#siteseo_inspect_url").removeAttr("disabled"),t("#siteseo-ca-tabs-1").load(" #siteseo-ca-tabs-1")}})})}jQuery(document).ready(function(t){siteseo_analysis_init(t)});