window.init_wpfront_notifiction_bar_options=function(e,t,i){var n=jQuery,o=Vue.createApp({data:()=>e,mounted(){var e=n("div.wrap.notification-bar-add-edit");n(function(){e.find(".if-js-closed").removeClass("if-js-closed").addClass("closed"),postboxes.add_postbox_toggles("<?php echo $this->controller->get_menu_slug(); ?>")}),this.minutestohours(),i&&this.tinymce()},methods:{tinymceinit(){if("undefined"!=typeof tinymce)tinymce.init({body_id:"wpfront-notification-bar-editor",body_class:"wpfront-notification-bar-editor wpfront-message",selector:"textarea#notification-bar-message-text",height:"400",plugins:"code, lists, link, fullscreen, image, media, quickbars, hr",quickbars_selection_toolbar:"bold italic underline | formatselect | blockquote quicklink",menubar:!1,media_live_embeds:!0,content_css:t.content_css,content_style:"body{ text-align: center; padding: 0; margin: 0; } p{ margin: 0; }",toolbar1:"undo redo | styleselect | fontselect fontsizeselect forecolor backcolor | numlist bullist | bold italic strikethrough blockquote underline lineheight hr |  code",toolbar2:"alignleft aligncenter alignright | link unlink | outdent indent | uploadmedia image media",fontsize_formats:t.fontsize_formats,font_formats:t.font_formats,setup:function(e){var i;e.ui.registry.addButton("uploadmedia",{icon:"upload",tooltip:t.tinymce_tooltip,onAction:function(){i?i.open():(i=wp.media({title:t.tinymce_title,button:{text:t.tinymce_button_text},multiple:!1}),i.on("select",function(){var t,n=i.state().get("selection").first().toJSON();t="image"==n.type?'<img width="'+n.width+'" height="'+n.height+'"src="'+n.url+'">':"video"==n.type?'<video width="320" height="240"  controls><source src="'+n.url+'" type="video/mp4"></video>':'<a href="'+n.url+'">'+n.name+"</a>",e.execCommand("mceInsertContent",!1,t)}),i.open())}})}});else{var e=this;setTimeout(function(){e.tinymceinit()},100)}},tinymce(){"visual"==e.editor?this.tinymceinit():"undefined"!=typeof tinymce&&tinymce.remove("textarea#notification-bar-message-text")},mediaLibrary(){var e=null;return null===e&&(e=wp.media.frames.file_frame=wp.media({title:t.choose_image,multiple:!1,button:{text:t.select_image}}).on("select",function(){var t=e.state().get("selection").first().toJSON();n("#reopen-button-image-url").val(t.url)})),e.open(),!1},minutestohours(){var e=parseInt(n('input[name="wpfront-notification-bar-options[schedule_duration]"]').val());if(e>60){var i,o=e/60,s=Math.floor(o),a=60*(o-s),l=Math.round(a);i=l>0?t.x_hours_minutes.replace("%1$d",s).replace("%2$d",l):t.x_hours.replace("%1$d",s),n("#schedule_duration").replaceWith('<span id="schedule_duration" class="description">= '+i+"</span>")}else n("#schedule_duration").replaceWith('<span id="schedule_duration" class="description"></span>')},schedules(){var e=[],t=[],i=[],o=[],s=[],a=n('input[name="wpfront-notification-bar-options[schedule_start_date]"]').val(),l=n('input[name="wpfront-notification-bar-options[schedule_start_time]"]').val(),c=n('input[name="wpfront-notification-bar-options[schedule_end_date]"]').val(),u=n('input[name="wpfront-notification-bar-options[schedule_end_time]"]').val(),d=n('input[name="wpfront-notification-bar-options[schedule_duration]"]').val();"day"==n('input[name="wpfront-notification-bar-options[schedule]"]:checked').val()&&(n("input:checkbox[name='wpfront-day-minutes[]']:checked").each(function(){e.push(n(this).val())}),n("input:checkbox[name='wpfront-day-hour[]']:checked").each(function(){t.push(n(this).val())}),i.push("*"),o.push("*"),s.push("*")),"week"==n('input[name="wpfront-notification-bar-options[schedule]"]:checked').val()&&(n("input:checkbox[name='wpfront-day-minutes[]']:checked").each(function(){e.push(n(this).val())}),n("input:checkbox[name='wpfront-day-hour[]']:checked").each(function(){t.push(n(this).val())}),i.push("*"),o.push("*"),n("input:checkbox[name='wpfront-week-days[]']:checked").each(function(){s.push(n(this).val())})),"mon"==n('input[name="wpfront-notification-bar-options[schedule]"]:checked').val()&&(n("input:checkbox[name='wpfront-day-minutes[]']:checked").each(function(){e.push(n(this).val())}),n("input:checkbox[name='wpfront-day-hour[]']:checked").each(function(){t.push(n(this).val())}),n("input:checkbox[name='wpfront-month-days[]']:checked").each(function(){i.push(n(this).val())}),o.push("*"),s.push("*"));var r={action:"notification_bar_cron_text",cronminutes:e,cronhours:t,cronmday:i,cronmon:o,cronwday:s,schedulestartdate:a,schedulestarttime:l,scheduleduration:d,scheduleenddate:c,scheduleendtime:u},p=n("a.thickbox.more_schedules").attr("data-action");n("#div_more_schedules_inside").text(p),n.post(ajaxurl,r,function(e){n("#notification-bar-schedule").replaceWith(e.data[0]),n("#div_more_schedules_inside").replaceWith(e.data[1])})}}});o.component("HelpIcon",{props:["helpText"],template:'<el-tooltip :content="helpText" raw-content="true" placement="right"><i class="tooltip fa fa-question-circle-o help-icon"></i></el-tooltip>'}),o.component("ColorPicker",{props:["modelValue","name"],template:n("#color-picker").html()}),o.component("PostsFilterSelection",{props:["modelValue","name"],template:n("#posts-filter-selection").html(),computed:{selectedPosts:{get(){return this.modelValue.split(",")},set(e){this.$emit("update:modelValue",e.filter(e=>e).join().trim())}}}}),o.component("DisplayRolesSettings",{props:["modelValue","name"],template:n("#display-roles-settings").html(),computed:{selectedRoles:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}}),o.component("DatePicker",{props:["modelValue","name"],data:function(){return{data:this.modelValue}},template:n("#date-picker").html()}),o.component("TimePicker",{props:["modelValue","name"],data:function(){return{data:this.modelValue}},template:n("#time-picker").html()}),o.component("ScheduleSelectionSettings",{props:["modelValue"],template:n("#schedule-selection-settings").html(),data(){return e.scheduleType=this.scheduledata(),e},methods:{schedules(){this.$parent.schedules()},scheduledata:()=>($time_units=e.schedule.split(" "),$minutes=$time_units[0].split(","),$hours=$time_units[1].split(","),$month_days=$time_units[2].split(","),$month=$time_units[3].split(","),$week_days=$time_units[4].split(","),isNaN($month_days[0])&&"L"!=$month_days[0]||($schedule_type="mon"),isNaN($week_days[0])||($schedule_type="week"),$month_days[0]+$week_days[0]=="**"&&($schedule_type="day"),$schedule_type)},computed:{selectedMonthDays:{get(){return $time_units=this.modelValue.split(" "),$month_days=$time_units[2].split(","),$month_days},set(e){this.$emit("input",e)}},selectedWeekDays:{get(){return $time_units=this.modelValue.split(" "),$week_days=$time_units[4].split(","),$week_days},set(e){this.$emit("input",e)}},selectedHours:{get(){return $time_units=this.modelValue.split(" "),$hours=$time_units[1].split(","),$hours},set(e){this.$emit("input",e)}},selectedMinutes:{get(){return $time_units=this.modelValue.split(" "),$minutes=$time_units[0].split(","),$minutes},set(e){this.$emit("input",e)}}}}),o.use(ElementPlus),o.mount("#notification-bar-add-edit")};