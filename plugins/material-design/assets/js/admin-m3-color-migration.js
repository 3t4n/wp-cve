(()=>{"use strict";function t(t){return t<0?-1:0===t?0:1}function r(t,r,n){return(1-n)*t+n*r}function n(t){return(t%=360)<0&&(t+=360),t}function o(t,r){return 180-Math.abs(Math.abs(t-r)-180)}const e=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],a=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],s=[95.047,100,108.883];function i(t){return t>>16&255}function h(t){return t>>8&255}function c(t){return 255&t}function u(t,r,n){const o=a,e=o[0][0]*t+o[0][1]*r+o[0][2]*n,s=o[1][0]*t+o[1][1]*r+o[1][2]*n,i=o[2][0]*t+o[2][1]*r+o[2][2]*n,h=M(e),c=M(s),u=M(i);return(255<<24|(255&h)<<16|(255&c)<<8|255&u)>>>0}function f(t){const r=(t+16)/116,n=r*r*r>216/24389;return u((n?r*r*r:t/(24389/27))*s[0],(t>8?r*r*r:t/(24389/27))*s[1],(n?r*r*r:t/(24389/27))*s[2])}function m(t){const r=function(t){const r=p(i(t)),n=p(h(t)),o=p(c(t));return[(a=[r,n,o])[0]*(s=e)[0][0]+a[1]*s[0][1]+a[2]*s[0][2],a[0]*s[1][0]+a[1]*s[1][1]+a[2]*s[1][2],a[0]*s[2][0]+a[1]*s[2][1]+a[2]*s[2][2]];var a,s}(t)[1]/100;if(r<=216/24389)return 24389/27*r;return 116*Math.pow(r,1/3)-16}function l(t){return t>8?100*Math.pow((t+16)/116,3):t/(24389/27)*100}function p(t){const r=t/255;return r<=.040449936?r/12.92*100:100*Math.pow((r+.055)/1.055,2.4)}function M(t){const r=t/100;let n=0;return n=r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055,o=0,e=255,(a=Math.round(255*n))<o?o:a>e?e:a;var o,e,a}class C{constructor(t,r,n,o,e,a,s,i,h,c){this.n=t,this.aw=r,this.nbb=n,this.ncb=o,this.c=e,this.nc=a,this.rgbD=s,this.fl=i,this.fLRoot=h,this.z=c}static make(t=function(){return s}(),n=200/Math.PI*l(50)/100,o=50,e=2,a=!1){const i=t,h=.401288*i[0]+.650173*i[1]+-.051461*i[2],c=-.250268*i[0]+1.204414*i[1]+.045854*i[2],u=-.002079*i[0]+.048952*i[1]+.953127*i[2],f=.8+e/10,m=f>=.9?r(.59,.69,10*(f-.9)):r(.525,.59,10*(f-.8));let p=a?1:f*(1-1/3.6*Math.exp((-n-42)/92));p=p>1?1:p<0?0:p;const M=f,g=[p*(100/h)+1-p,p*(100/c)+1-p,p*(100/u)+1-p],w=1/(5*n+1),d=w*w*w*w,y=1-d,I=d*n+.1*y*y*Math.cbrt(5*n),b=l(o)/t[1],T=1.48+Math.sqrt(b),O=.725/Math.pow(b,.2),E=O,A=[Math.pow(I*g[0]*h/100,.42),Math.pow(I*g[1]*c/100,.42),Math.pow(I*g[2]*u/100,.42)],S=[400*A[0]/(A[0]+27.13),400*A[1]/(A[1]+27.13),400*A[2]/(A[2]+27.13)];return new C(b,(2*S[0]+S[1]+.05*S[2])*O,O,E,m,M,g,I,Math.pow(I,.25),T)}}C.DEFAULT=C.make();class g{constructor(t,r,n,o,e,a,s,i,h){this.hue=t,this.chroma=r,this.j=n,this.q=o,this.m=e,this.s=a,this.jstar=s,this.astar=i,this.bstar=h}distance(t){const r=this.jstar-t.jstar,n=this.astar-t.astar,o=this.bstar-t.bstar,e=Math.sqrt(r*r+n*n+o*o);return 1.41*Math.pow(e,.63)}static fromInt(t){return g.fromIntInViewingConditions(t,C.DEFAULT)}static fromIntInViewingConditions(r,n){const o=(65280&r)>>8,e=255&r,a=p((16711680&r)>>16),s=p(o),i=p(e),h=.41233895*a+.35762064*s+.18051042*i,c=.2126*a+.7152*s+.0722*i,u=.01932141*a+.11916382*s+.95034478*i,f=.401288*h+.650173*c-.051461*u,m=-.250268*h+1.204414*c+.045854*u,l=-.002079*h+.048952*c+.953127*u,M=n.rgbD[0]*f,C=n.rgbD[1]*m,w=n.rgbD[2]*l,d=Math.pow(n.fl*Math.abs(M)/100,.42),y=Math.pow(n.fl*Math.abs(C)/100,.42),I=Math.pow(n.fl*Math.abs(w)/100,.42),b=400*t(M)*d/(d+27.13),T=400*t(C)*y/(y+27.13),O=400*t(w)*I/(I+27.13),E=(11*b+-12*T+O)/11,A=(b+T-2*O)/9,S=(20*b+20*T+21*O)/20,H=(40*b+20*T+O)/20,_=180*Math.atan2(A,E)/Math.PI,P=_<0?_+360:_>=360?_-360:_,R=P*Math.PI/180,v=H*n.nbb,D=100*Math.pow(v/n.aw,n.c*n.z),F=4/n.c*Math.sqrt(D/100)*(n.aw+4)*n.fLRoot,U=P<20.14?P+360:P,V=5e4/13*(.25*(Math.cos(U*Math.PI/180+2)+3.8))*n.nc*n.ncb*Math.sqrt(E*E+A*A)/(S+.305),k=Math.pow(V,.9)*Math.pow(1.64-Math.pow(.29,n.n),.73),L=k*Math.sqrt(D/100),j=L*n.fLRoot,q=50*Math.sqrt(k*n.c/(n.aw+4)),x=(1+100*.007)*D/(1+.007*D),G=1/.0228*Math.log(1+.0228*j),B=G*Math.cos(R),J=G*Math.sin(R);return new g(P,L,D,F,j,q,x,B,J)}static fromJch(t,r,n){return g.fromJchInViewingConditions(t,r,n,C.DEFAULT)}static fromJchInViewingConditions(t,r,n,o){const e=4/o.c*Math.sqrt(t/100)*(o.aw+4)*o.fLRoot,a=r*o.fLRoot,s=r/Math.sqrt(t/100),i=50*Math.sqrt(s*o.c/(o.aw+4)),h=n*Math.PI/180,c=(1+100*.007)*t/(1+.007*t),u=1/.0228*Math.log(1+.0228*a),f=u*Math.cos(h),m=u*Math.sin(h);return new g(n,r,t,e,a,i,c,f,m)}static fromUcs(t,r,n){return g.fromUcsInViewingConditions(t,r,n,C.DEFAULT)}static fromUcsInViewingConditions(t,r,n,o){const e=r,a=n,s=Math.sqrt(e*e+a*a),i=(Math.exp(.0228*s)-1)/.0228/o.fLRoot;let h=Math.atan2(a,e)*(180/Math.PI);h<0&&(h+=360);const c=t/(1-.007*(t-100));return g.fromJchInViewingConditions(c,i,h,o)}toInt(){return this.viewed(C.DEFAULT)}viewed(r){const n=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),o=Math.pow(n/Math.pow(1.64-Math.pow(.29,r.n),.73),1/.9),e=this.hue*Math.PI/180,a=.25*(Math.cos(e+2)+3.8),s=r.aw*Math.pow(this.j/100,1/r.c/r.z),i=a*(5e4/13)*r.nc*r.ncb,h=s/r.nbb,c=Math.sin(e),f=Math.cos(e),m=23*(h+.305)*o/(23*i+11*o*f+108*o*c),l=m*f,p=m*c,M=(460*h+451*l+288*p)/1403,C=(460*h-891*l-261*p)/1403,g=(460*h-220*l-6300*p)/1403,w=Math.max(0,27.13*Math.abs(M)/(400-Math.abs(M))),d=t(M)*(100/r.fl)*Math.pow(w,1/.42),y=Math.max(0,27.13*Math.abs(C)/(400-Math.abs(C))),I=t(C)*(100/r.fl)*Math.pow(y,1/.42),b=Math.max(0,27.13*Math.abs(g)/(400-Math.abs(g))),T=t(g)*(100/r.fl)*Math.pow(b,1/.42),O=d/r.rgbD[0],E=I/r.rgbD[1],A=T/r.rgbD[2];return u(1.86206786*O-1.01125463*E+.14918677*A,.38752654*O+.62144744*E-.00897398*A,-.0158415*O-.03412294*E+1.04996444*A)}}class w{constructor(t,r,n){this.internalHue=t,this.internalChroma=r,this.internalTone=n,this.setInternalState(this.toInt())}static from(t,r,n){return new w(t,r,n)}static fromInt(t){const r=g.fromInt(t),n=m(t);return new w(r.hue,r.chroma,n)}toInt(){return d(this.internalHue,this.internalChroma,this.internalTone)}get hue(){return this.internalHue}set hue(t){this.setInternalState(d(n(t),this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(t){this.setInternalState(d(this.internalHue,t,this.internalTone))}get tone(){return this.internalTone}set tone(t){this.setInternalState(d(this.internalHue,this.internalChroma,t))}setInternalState(t){const r=g.fromInt(t),n=m(t);this.internalHue=r.hue,this.internalChroma=r.chroma,this.internalTone=n}}function d(t,r,o){return function(t,r,o,e){if(r<1||Math.round(o)<=0||Math.round(o)>=100)return f(o);t=n(t);let a=r,s=r,i=0,h=!0,c=null;for(;Math.abs(i-a)>=.4;){const r=y(t,s,o);if(h){if(null!=r)return r.viewed(e);h=!1,s=i+(a-i)/2}else null===r?a=s:(c=r,i=s),s=i+(a-i)/2}if(null===c)return f(o);return c.viewed(e)}(n(t),r,(a=100,(s=o)<(e=0)?e:s>a?a:s),C.DEFAULT);var e,a,s}function y(t,r,n){let o=0,e=100,a=0,s=1e3,i=1e3,h=null;for(;Math.abs(o-e)>.01;){a=o+(e-o)/2;const c=g.fromJch(a,r,t).toInt(),u=m(c),f=Math.abs(n-u);if(f<.2){const r=g.fromInt(c),n=r.distance(g.fromJch(r.j,r.chroma,t));n<=1&&n<=i&&(s=f,i=n,h=r)}if(0===s&&0===i)break;u<n?o=a:e=a}return h}class I{static harmonize(t,r){const e=w.fromInt(t),a=w.fromInt(r),s=o(e.hue,a.hue),i=Math.min(.5*s,15),h=n(e.hue+i*I.rotationDirection(e.hue,a.hue));return w.from(h,e.chroma,e.tone).toInt()}static hctHue(t,r,n){const o=I.cam16Ucs(t,r,n),e=g.fromInt(o),a=g.fromInt(t);return w.from(e.hue,a.chroma,m(t)).toInt()}static cam16Ucs(t,r,n){const o=g.fromInt(t),e=g.fromInt(r),a=o.jstar,s=o.astar,i=o.bstar,h=a+(e.jstar-a)*n,c=s+(e.astar-s)*n,u=i+(e.bstar-i)*n;return g.fromUcs(h,c,u).toInt()}static rotationDirection(t,r){const n=r-t,o=r-t+360,e=r-t-360,a=Math.abs(n),s=Math.abs(o),i=Math.abs(e);return a<=s&&a<=i?n>=0?1:-1:s<=a&&s<=i?o>=0?1:-1:e>=0?1:-1}}class b{constructor(t,r){this.hue=t,this.chroma=r,this.cache=new Map}static fromInt(t){const r=w.fromInt(t);return b.fromHueAndChroma(r.hue,r.chroma)}static fromHueAndChroma(t,r){return new b(t,r)}tone(t){let r=this.cache.get(t);return void 0===r&&(r=w.from(this.hue,this.chroma,t).toInt(),this.cache.set(t,r)),r}}class T{constructor(t){const r=w.fromInt(t),n=r.hue;this.a1=b.fromHueAndChroma(n,Math.max(48,r.chroma)),this.a2=b.fromHueAndChroma(n,16),this.a3=b.fromHueAndChroma(n+60,24),this.n1=b.fromHueAndChroma(n,4),this.n2=b.fromHueAndChroma(n,8),this.error=b.fromHueAndChroma(25,84)}static of(t){return new T(t)}}class O{constructor(t){this.props=t}get primary(){return this.props.primary}get primaryContainer(){return this.props.primaryContainer}get onPrimary(){return this.props.onPrimary}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondary(){return this.props.onSecondary}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get shadow(){return this.props.shadow}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(t){const r=T.of(t);return new O({primary:r.a1.tone(40),onPrimary:r.a1.tone(100),primaryContainer:r.a1.tone(90),onPrimaryContainer:r.a1.tone(10),secondary:r.a2.tone(40),onSecondary:r.a2.tone(100),secondaryContainer:r.a2.tone(90),onSecondaryContainer:r.a2.tone(10),tertiary:r.a3.tone(40),onTertiary:r.a3.tone(100),tertiaryContainer:r.a3.tone(90),onTertiaryContainer:r.a3.tone(10),error:r.error.tone(40),onError:r.error.tone(100),errorContainer:r.error.tone(90),onErrorContainer:r.error.tone(10),background:r.n1.tone(99),onBackground:r.n1.tone(10),surface:r.n1.tone(99),onSurface:r.n1.tone(10),surfaceVariant:r.n2.tone(90),onSurfaceVariant:r.n2.tone(30),outline:r.n2.tone(50),shadow:r.n1.tone(0),inverseSurface:r.n1.tone(20),inverseOnSurface:r.n1.tone(95),inversePrimary:r.a1.tone(80)})}static dark(t){const r=T.of(t);return new O({primary:r.a1.tone(80),onPrimary:r.a1.tone(20),primaryContainer:r.a1.tone(30),onPrimaryContainer:r.a1.tone(90),secondary:r.a2.tone(80),onSecondary:r.a2.tone(20),secondaryContainer:r.a2.tone(30),onSecondaryContainer:r.a2.tone(90),tertiary:r.a3.tone(80),onTertiary:r.a3.tone(20),tertiaryContainer:r.a3.tone(30),onTertiaryContainer:r.a3.tone(90),error:r.error.tone(80),onError:r.error.tone(20),errorContainer:r.error.tone(30),onErrorContainer:r.error.tone(80),background:r.n1.tone(10),onBackground:r.n1.tone(90),surface:r.n1.tone(10),onSurface:r.n1.tone(90),surfaceVariant:r.n2.tone(30),onSurfaceVariant:r.n2.tone(80),outline:r.n2.tone(60),shadow:r.n1.tone(0),inverseSurface:r.n1.tone(90),inverseOnSurface:r.n1.tone(20),inversePrimary:r.a1.tone(40)})}toJSON(){return Object.assign({},this.props)}}class E{constructor(){}static score(t){let r=0;for(const n of t.values())r+=n;const n=new Map,e=new Map,a=new Array(360).fill(0);for(const[o,s]of t.entries()){const t=s/r;n.set(o,t);const i=g.fromInt(o);e.set(o,i);a[Math.round(i.hue)]+=t}const s=new Map;for(const[t,r]of e.entries()){const n=Math.round(r.hue);let o=0;for(let t=n-15;t<n+15;t++){o+=a[(i=t,(i%=360)<0&&(i+=360),i)]}s.set(t,o)}var i;const h=new Map;for(const[t,r]of e.entries()){const n=100*s.get(t)*E.WEIGHT_PROPORTION,o=r.chroma<E.TARGET_CHROMA?E.WEIGHT_CHROMA_BELOW:E.WEIGHT_CHROMA_ABOVE,e=n+(r.chroma-E.TARGET_CHROMA)*o;h.set(t,e)}const c=E.filter(s,e),u=new Map;for(const t of c){let r=!1;const n=e.get(t).hue;for(const[t]of u){if(o(n,e.get(t).hue)<15){r=!0;break}}r||u.set(t,h.get(t))}const f=Array.from(u.entries());f.sort((t,r)=>r[1]-t[1]);const m=f.map(t=>t[0]);return 0===m.length&&m.push(4282549748),m}static filter(t,r){const n=new Array;for(const[o,e]of r.entries()){const r=t.get(o);e.chroma>=E.CUTOFF_CHROMA&&m(o)>=E.CUTOFF_TONE&&r>=E.CUTOFF_EXCITED_PROPORTION&&n.push(o)}return n}}E.TARGET_CHROMA=48,E.WEIGHT_PROPORTION=.7,E.WEIGHT_CHROMA_ABOVE=.3,E.WEIGHT_CHROMA_BELOW=.1,E.CUTOFF_CHROMA=15,E.CUTOFF_TONE=10,E.CUTOFF_EXCITED_PROPORTION=.01;function A(t){return parseInt(t,16)}function S(t,r=[]){const n=T.of(t);return{source:t,schemes:{light:O.light(t),dark:O.dark(t)},palettes:{primary:n.a1,secondary:n.a2,tertiary:n.a3,neutral:n.n1,neutralVariant:n.n2,error:n.error},customColors:r.map(r=>function(t,r){let n=r.value;const o=n,e=t;r.blend&&(n=I.harmonize(o,e));const a=T.of(n).a1;return{color:r,value:n,light:{color:a.tone(40),onColor:a.tone(100),colorContainer:a.tone(90),onColorContainer:a.tone(10)},dark:{color:a.tone(80),onColor:a.tone(20),colorContainer:a.tone(30),onColorContainer:a.tone(90)}}}(t,r))}}const H=()=>{const t=S((t=>{const r=3===(t=t.replace("#","")).length,n=6===t.length,o=8===t.length;if(!r&&!n&&!o)throw new Error("unexpected hex "+t);let e=0,a=0,s=0;return r?(e=A(t.slice(0,1).repeat(2)),a=A(t.slice(1,2).repeat(2)),s=A(t.slice(2,3).repeat(2))):n?(e=A(t.slice(0,2)),a=A(t.slice(2,4)),s=A(t.slice(4,6))):o&&(e=A(t.slice(2,4)),a=A(t.slice(4,6)),s=A(t.slice(6,8))),(255<<24|(255&e)<<16|(255&a)<<8|255&s)>>>0})(window.material_m3_migration_color.primaryColor));wp.ajax.post("m3_migrate_colors",{_wpnonce:window.material_m3_migration_color.nonce,colorPalette:JSON.stringify(t)})};document.addEventListener("DOMContentLoaded",()=>setTimeout(H,1))})();