(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,l=window.wp.element,n=window.wp.serverSideRender;var a=e.n(n);const o=window.wp.i18n,r=window.wp.blockEditor,c=window.wp.components,i=window.wp.hooks,s=window.wp.data;function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var n;for(n=0;n<e.length;n+=1)t.push({label:l+e[n].name,value:e[n].id}),e[n].children.length>0&&u(e[n].children,t,l.trim()+"— ");return t}const d=JSON.parse('{"u2":"acadp/categories"}');(0,t.registerBlockType)(d.u2,{attributes:{view:{type:"string",default:acadp_blocks.categories.view},parent:{type:"number",default:acadp_blocks.categories.parent},columns:{type:"number",default:acadp_blocks.categories.columns},depth:{type:"number",default:acadp_blocks.categories.depth},orderby:{type:"string",default:acadp_blocks.categories.orderby},order:{type:"string",default:acadp_blocks.categories.order},show_count:{type:"boolean",default:acadp_blocks.categories.show_count},hide_empty:{type:"boolean",default:acadp_blocks.categories.hide_empty}},edit:function(e){let{attributes:t,setAttributes:n}=e;const{view:d,parent:p,columns:_,depth:g,orderby:m,order:h,show_count:b,hide_empty:w}=t,v=(0,s.useSelect)((e=>{const t=e("core").getEntityRecords("taxonomy","acadp_categories",{per_page:100});let l=[{label:"— "+(0,o.__)("Select parent")+" —",value:0}];if(t&&t.length>0){let e=function(e,t){var l,n,a={},o=[];for(n=0;n<e.length;n+=1)a[e[n].id]=n,e[n].children=[];for(n=0;n<e.length;n+=1)0==(l=e[n]).parent?o.push(l):a.hasOwnProperty(l.parent)&&e[a[l.parent]].children.push(l);return o}(t),n=u(e);l=[...l,...n]}return l})),y=(0,l.useRef)();return(0,l.useEffect)((()=>{y.current?(0,i.doAction)("acadp_init_categories",t):y.current=!0})),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(r.InspectorControls,null,(0,l.createElement)(c.PanelBody,{title:(0,o.__)("Categories settings")},(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.SelectControl,{label:(0,o.__)("Select template"),value:d,options:[{label:(0,o.__)("List"),value:"text_list"},{label:(0,o.__)("Grid"),value:"image_grid"}],onChange:e=>n({view:e})})),(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.SelectControl,{label:(0,o.__)("Select parent"),value:p,options:v,onChange:e=>n({parent:Number(e)})})),(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.RangeControl,{label:(0,o.__)("Number of columns"),value:_,min:1,max:12,onChange:e=>n({columns:e})})),(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.RangeControl,{label:(0,o.__)("Depth"),value:g,min:1,max:12,onChange:e=>n({depth:e})})),(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.SelectControl,{label:(0,o.__)("Order by"),value:m,options:[{label:(0,o.__)("ID"),value:"id"},{label:(0,o.__)("Count"),value:"count"},{label:(0,o.__)("Name"),value:"name"},{label:(0,o.__)("Slug"),value:"slug"}],onChange:e=>n({orderby:e})})),(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.SelectControl,{label:(0,o.__)("Order"),value:h,options:[{label:(0,o.__)("Ascending"),value:"asc"},{label:(0,o.__)("Descending"),value:"desc"}],onChange:e=>n({order:e})})),(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.ToggleControl,{label:(0,o.__)("Show listings count"),help:(0,o.__)("Check this to show the listings count next to the category name"),checked:b,onChange:()=>n({show_count:!b})})),(0,l.createElement)(c.PanelRow,null,(0,l.createElement)(c.ToggleControl,{label:(0,o.__)("Hide empty categories"),help:(0,o.__)("Check this to hide categories with no listings"),checked:w,onChange:()=>n({hide_empty:!w})})))),(0,l.createElement)("div",(0,r.useBlockProps)(),(0,l.createElement)(c.Disabled,null,(0,l.createElement)(a(),{block:"acadp/categories",attributes:t}))))}})})();