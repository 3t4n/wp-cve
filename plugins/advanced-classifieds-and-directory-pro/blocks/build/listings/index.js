(()=>{"use strict";var e={n:l=>{var t=l&&l.__esModule?()=>l.default:()=>l;return e.d(t,{a:t}),t},d:(l,t)=>{for(var a in t)e.o(t,a)&&!e.o(l,a)&&Object.defineProperty(l,a,{enumerable:!0,get:t[a]})},o:(e,l)=>Object.prototype.hasOwnProperty.call(e,l)};const l=window.wp.blocks,t=window.wp.element,a=window.wp.serverSideRender;var o=e.n(a);const n=window.wp.i18n,r=window.wp.blockEditor,s=window.wp.components,c=window.wp.hooks,i=window.wp.data;function _(e,l){var t,a,o={},n=[];for(a=0;a<e.length;a+=1)o[e[a].id]=a,e[a].children=[];for(a=0;a<e.length;a+=1)(t=e[a]).parent==l?n.push(t):o.hasOwnProperty(t.parent)&&e[o[t.parent]].children.push(t);return n}function d(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var a;for(a=0;a<e.length;a+=1)l.push({label:t+e[a].name,value:e[a].id}),e[a].children.length>0&&d(e[a].children,l,t.trim()+"— ");return l}const u=JSON.parse('{"u2":"acadp/listings"}');(0,l.registerBlockType)(u.u2,{attributes:{view:{type:"string",default:acadp_blocks.listings.view},location:{type:"number",default:acadp_blocks.listings.location},category:{type:"number",default:acadp_blocks.listings.category},columns:{type:"number",default:acadp_blocks.listings.columns},listings_per_page:{type:"number",default:acadp_blocks.listings.listings_per_page},filterby:{type:"string",default:acadp_blocks.listings.filterby},orderby:{type:"string",default:acadp_blocks.listings.orderby},order:{type:"string",default:acadp_blocks.listings.order},featured:{type:"boolean",default:acadp_blocks.listings.featured},header:{type:"boolean",default:acadp_blocks.listings.header},show_excerpt:{type:"boolean",default:acadp_blocks.listings.show_excerpt},show_category:{type:"boolean",default:acadp_blocks.listings.show_category},show_location:{type:"boolean",default:acadp_blocks.listings.show_location},show_price:{type:"boolean",default:acadp_blocks.listings.show_price},show_date:{type:"boolean",default:acadp_blocks.listings.show_date},show_user:{type:"boolean",default:acadp_blocks.listings.show_user},show_views:{type:"boolean",default:acadp_blocks.listings.show_views},show_custom_fields:{type:"boolean",default:acadp_blocks.listings.show_custom_fields},pagination:{type:"boolean",default:acadp_blocks.listings.pagination}},edit:function(e){let{attributes:l,setAttributes:a}=e;const{view:u,category:g,location:p,columns:h,listings_per_page:w,filterby:b,orderby:m,order:f,featured:y,header:E,show_excerpt:v,show_category:C,show_location:k,show_price:R,show_date:S,show_user:P,show_views:T,show_custom_fields:x,pagination:O}=l,A=(0,i.useSelect)((e=>{const l=e("core").getEntityRecords("taxonomy","acadp_locations",{per_page:100});let t=[{label:"— "+(0,n.__)("All Locations")+" —",value:0}];if(l&&l.length>0){let e=d(_(l,parseInt(acadp_blocks.base_location)));t=[...t,...e]}return t})),N=(0,i.useSelect)((e=>{const l=e("core").getEntityRecords("taxonomy","acadp_categories",{per_page:100});let t=[{label:"— "+(0,n.__)("All Categories")+" —",value:0}];if(l&&l.length>0){let e=d(_(l,0));t=[...t,...e]}return t})),L=(0,t.useRef)();return(0,t.useEffect)((()=>{L.current?(0,c.doAction)("acadp_init_listings",l):L.current=!0})),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(r.InspectorControls,null,(0,t.createElement)(s.PanelBody,{title:(0,n.__)("Listings settings")},(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.SelectControl,{label:(0,n.__)("Select template"),value:u,options:[{label:(0,n.__)("List"),value:"list"},{label:(0,n.__)("Grid"),value:"grid"},{label:(0,n.__)("Map"),value:"map"}],onChange:e=>a({view:e})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.SelectControl,{label:(0,n.__)("Select location"),value:p,options:A,onChange:e=>a({location:Number(e)})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.SelectControl,{label:(0,n.__)("Select category"),value:g,options:N,onChange:e=>a({category:Number(e)})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.RangeControl,{label:(0,n.__)("Number of columns"),value:h,min:1,max:12,onChange:e=>a({columns:e})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.RangeControl,{label:(0,n.__)("Number of listings"),help:(0,n.__)('Enter the number of listings to show per page. Add "0" to show all listings.'),value:w,min:1,max:100,onChange:e=>a({listings_per_page:e})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.SelectControl,{label:(0,n.__)("Filter by"),value:b,options:[{label:(0,n.__)("None"),value:""},{label:(0,n.__)("Featured"),value:"featured"}],onChange:e=>a({filterby:e})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.SelectControl,{label:(0,n.__)("Order by"),value:m,options:[{label:(0,n.__)("Title"),value:"title"},{label:(0,n.__)("Date posted"),value:"date"},{label:(0,n.__)("Price"),value:"price"},{label:(0,n.__)("Views count"),value:"views"},{label:(0,n.__)("Random"),value:"rand"}],onChange:e=>a({orderby:e})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.SelectControl,{label:(0,n.__)("Order"),value:f,options:[{label:(0,n.__)("Ascending"),value:"asc"},{label:(0,n.__)("Descending"),value:"desc"}],onChange:e=>a({order:e})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show featured"),help:(0,n.__)("Show or hide featured listings at the top of normal listings."),checked:y,onChange:()=>a({featured:!y})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show header"),help:(0,n.__)('The header section consist of the "Listings count", "Views switcher", and "Sort by" options.'),checked:E,onChange:()=>a({header:!E})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show excerpt (short description)"),checked:v,onChange:()=>a({show_excerpt:!v})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show category name"),checked:C,onChange:()=>a({show_category:!C})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show location name"),checked:k,onChange:()=>a({show_location:!k})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show price"),checked:R,onChange:()=>a({show_price:!R})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show date"),checked:S,onChange:()=>a({show_date:!S})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show user"),checked:P,onChange:()=>a({show_user:!P})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show views"),checked:T,onChange:()=>a({show_views:!T})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show custom fields"),checked:x,onChange:()=>a({show_custom_fields:!x})})),(0,t.createElement)(s.PanelRow,null,(0,t.createElement)(s.ToggleControl,{label:(0,n.__)("Show pagination"),checked:O,onChange:()=>a({pagination:!O})})))),(0,t.createElement)("div",(0,r.useBlockProps)(),(0,t.createElement)(s.Disabled,null,(0,t.createElement)(o(),{block:"acadp/listings",attributes:l}))))}})})();