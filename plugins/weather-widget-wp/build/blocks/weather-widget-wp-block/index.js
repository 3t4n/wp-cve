!function(){"use strict";var e=window.wp.element,t=JSON.parse('{"u2":"weather-widget-wp/block"}'),a=window.React,n=window.wp.i18n,l=window.wp.blocks,r=window.wp.components,i=window.wp.blockEditor,o=e=>{let{attributes:t,setAttributes:a}=e;const n=`${weatherWidgetWpObject.apiUrl}weather-widget-wp/api/settings`;fetch(n,{method:"GET",headers:{"Content-Type":"application/json","X-WP-NONCE":weatherWidgetWpObject.nonce}}).then((e=>{if(!e.ok)throw Error(e.status+" - Open Weather API error.");return e})).then((e=>e.json())).then((e=>{fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t.location}&appid=${e.api_key}`).then((e=>e.json())).then((e=>{if(401===e.cod&&console.log("No API key, typo or added newly created API key. Newly created Open Weather API keys need 15 minutes to be active and show data, so please be patient."),200===!e.cod)throw new Error("Open Weather API error");e.weather.forEach((e=>a({iconCode:e.id,description:e.description}))),a({temperature:"C"===t.tempUnits?Math.round(e.main.temp-273.15):Math.round(9*(e.main.temp-273.15)/5+32),tempMin:"C"===t.tempUnits?Math.round(e.main.temp_min-273.15)+"°C":Math.round(9*(e.main.temp_min-273.15)/5+32)+"°F",tempMax:"C"===t.tempUnits?Math.round(e.main.temp_max-273.15)+"°C":Math.round(9*(e.main.temp_max-273.15)/5+32)+"°F",wind:e.wind.speed+"m/s"})})).catch((()=>console.log("Open Weather API error")))})).catch((()=>console.log("Open Weather API error")))},s=t=>{let{attributes:l,setAttributes:r}=t;return(0,a.useEffect)((()=>{const e=setTimeout((()=>{o({attributes:l,setAttributes:r})}),2500);return()=>clearTimeout(e)}),[l.location]),(0,e.createElement)("fieldset",null,(0,e.createElement)("h2",null,(0,n.__)("Weather Location","weather-widget-wp")),(0,e.createElement)("label",{className:"components-base-control__label",htmlFor:"weather-location"},(0,n.__)("Location","weather-widget-wp")),(0,e.createElement)("input",{onChange:e=>{r({location:e.target.value})},value:l.location,id:"weather-location",className:"components-text-control__input",name:"weather-location",type:"text",max:"20",placeholder:(0,n.__)("Santorini","weather-widget-wp")}),(0,e.createElement)("small",null,(0,n.__)("Enter a name of a location (city) to show weather data. You will need to have API key from Open Weather added to the","weather-widget-wp")," ",(0,e.createElement)("a",{href:"/wp-admin/admin.php?page=weather-widget-wp",target:"_blank"},(0,n.__)("Weather Widget WP plugin settings","weather-widget-wp")),"."))},d=t=>{let{attributes:l,setAttributes:r}=t;(0,a.useEffect)((()=>{const e=setTimeout((()=>{o({attributes:l,setAttributes:r})}),1e3);return()=>clearTimeout(e)}),[l.tempUnits]);const i=e=>{e.target.checked&&r({tempUnits:e.target.value})};return(0,e.createElement)("fieldset",null,(0,e.createElement)("h2",null,(0,n.__)("Temperature Units","weather-widget-wp")),(0,e.createElement)("label",null,(0,e.createElement)("input",{checked:"C"===l.tempUnits,onChange:i,type:"radio",name:"temp-units",id:"temp-units",value:"C"}),(0,n.__)("°C - Celsius","weather-widget-wp")),(0,e.createElement)("label",null,(0,e.createElement)("input",{checked:"F"===l.tempUnits,onChange:i,type:"radio",name:"temp-units",id:"temp-units",value:"F"}),(0,n.__)("°F - Fahrenheit","weather-widget-wp")))},c=t=>{let{attributes:a,setAttributes:l}=t;return(0,e.createElement)("fieldset",null,(0,e.createElement)("h2",null,(0,n.__)("Style","weather-widget-wp")),(0,e.createElement)("select",{value:a.style,onChange:e=>{l({style:e.target.value})},name:"style",id:"style"},(0,e.createElement)("option",{value:"style-minimal"},(0,n.__)("Minimal","weather-widget-wp")),(0,e.createElement)("option",{value:"style-expanded"},(0,n.__)("Expanded","weather-widget-wp"))))},p=t=>{let{attributes:a,setAttributes:l}=t;const r=()=>{if("style-expanded"===a.style||"style-expanded-no-css"===a.style)return!0};return(0,e.createElement)("fieldset",null,(0,e.createElement)("h2",null,(0,n.__)("Weather Data","weather-widget-wp")),(0,e.createElement)((()=>(0,e.createElement)("label",null,(0,e.createElement)("input",{checked:a.dataIcon,onChange:e=>{l({dataIcon:e.target.checked})},type:"checkbox",name:"weather-data-icon",value:"1"}),(0,n.__)("Weather icon","weather-widget-wp"))),null),(0,e.createElement)((()=>(0,e.createElement)("label",null,(0,e.createElement)("input",{checked:a.dataDesc,onChange:e=>{l({dataDesc:e.target.checked})},type:"checkbox",name:"weather-data-desc",value:"1"}),(0,n.__)("Short weather description","weather-widget-wp"))),null),r()?(0,e.createElement)((()=>(0,e.createElement)("label",null,(0,e.createElement)("input",{checked:a.dataDate,onChange:e=>{l({dataDate:e.target.checked})},type:"checkbox",name:"weather-data-date",value:"1"}),(0,n.__)("Current date","weather-widget-wp"))),null):null,r()?(0,e.createElement)((()=>(0,e.createElement)("label",null,(0,e.createElement)("input",{checked:a.dataWind,onChange:e=>{l({dataWind:e.target.checked})},type:"checkbox",name:"weather-data-wind",value:"1"}),(0,n.__)("Wind speed","weather-widget-wp"))),null):null,r()?(0,e.createElement)((()=>(0,e.createElement)("label",null,(0,e.createElement)("input",{checked:a.dataMin,onChange:e=>{l({dataMin:e.target.checked})},type:"checkbox",name:"weather-data-min",value:"1"}),(0,n.__)("Temperature minimum","weather-widget-wp"))),null):null,r()?(0,e.createElement)((()=>(0,e.createElement)("label",null,(0,e.createElement)("input",{checked:a.dataMax,onChange:e=>{l({dataMax:e.target.checked})},type:"checkbox",name:"weather-data-max",value:"1"}),(0,n.__)("Temperature maximum","weather-widget-wp"))),null):null)},m=t=>{let{attributes:a,setAttributes:l}=t;return(0,e.createElement)("fieldset",null,(0,e.createElement)("h2",null,(0,n.__)("Text Color","weather-widget-wp")),(0,e.createElement)("label",null,(0,n.__)("Pick custom text color","weather-widget-wp"),(0,e.createElement)(r.ColorPalette,{onChange:e=>{l({textColor:e})},value:a.textColor,colors:[{name:"White",color:"#fff"},{name:"Gray",color:"#ccc"},{name:"Black",color:"#333"}]})))},g=t=>{let{attributes:a,setAttributes:l}=t;return(0,e.createElement)("fieldset",null,(0,e.createElement)("h2",null,(0,n.__)("Background Color/Gradient","weather-widget-wp")),(0,e.createElement)(r.GradientPicker,{onChange:e=>{l({bgColor:e})},value:a.bgColor,gradients:[{name:"Clear Sky",slug:"clear-sky",gradient:"linear-gradient(74.1deg, #537895 11.78%, #A3BECD 90.32%)"},{name:"Summer Sun",slug:"summer-sun",gradient:"linear-gradient(74.1deg, #ff9966 11.78%, #ff5e62 90.32%)"},{name:"Autumn",slug:"autumn",gradient:"linear-gradient(74.1deg, #F2994A 11.78%, #F2C94C 90.32%)"},{name:"Silver",slug:"silver",gradient:"linear-gradient(74.1deg, #8e9eab 11.78%, #eef2f3 90.32%)"},{name:"Carbon",slug:"carbon",gradient:"linear-gradient(74.1deg, #232526 11.78%, #414345 90.32%)"}],__nextHasNoMargin:!0}))},u=t=>{let{attributes:a,setAttributes:l}=t;return(0,e.createElement)("fieldset",null,(0,e.createElement)("h2",null,(0,n.__)("Rounded Corners","weather-widget-wp")),(0,e.createElement)(r.RangeControl,{onChange:e=>{l({roundness:e})},value:a.roundness,allowReset:!0,resetFallbackValue:18,min:0,max:36}))},w=t=>{let{attributes:a,setAttributes:l}=t;const i=()=>{if("style-expanded"===a.style)return!0};return(0,e.createElement)("fieldset",null,(0,e.createElement)("h2",null,(0,n.__)("Padding","weather-widget-wp")),(0,e.createElement)(r.__experimentalBoxControl,{onChange:e=>{var t;t=e,i()?l({paddingExp:t}):l({paddingMin:t})},resetValues:i()?{top:"115px",left:"40px",right:"40px",bottom:"40px"}:{top:"30px",left:"30px",right:"30px",bottom:"30px"},values:i()?a.paddingExp:a.paddingMin}))},h=t=>{let{attributes:a,setAttributes:l}=t;return(0,e.createElement)("fieldset",null,(0,e.createElement)("h2",null,(0,n.__)("Drop Shadow","weather-widget-wp")),(0,e.createElement)(r.RangeControl,{onChange:e=>{l({shadowSize:e})},value:a.shadowSize,label:(0,n.__)("Shadow size:","weather-widget-wp"),allowReset:!0,resetFallbackValue:30,min:0,max:100}),(0,e.createElement)("label",null,(0,n.__)("Shadow color:","weather-widget-wp"),(0,e.createElement)(r.ColorPalette,{onChange:e=>{l({shadowColor:e})},value:a.shadowColor,colors:[{name:"Dark Shadow",color:"rgba(51, 51, 51, 0.35)"}],enableAlpha:!0})))},b=()=>{const t=new Date,a=`${t.getDate()} ${t.toLocaleString("default",{month:"long"})} ${t.getFullYear()}`;return(0,e.createElement)("small",{className:"current-date"},a)},E=t=>{let{attributes:a}=t;return(0,e.createElement)("footer",{className:"footer-group"},a.dataWind?(0,e.createElement)("figure",{className:"weather-wind"},(0,e.createElement)("i",{className:"weather-i-windy"}),(0,e.createElement)("span",null,a.wind),(0,e.createElement)("figcaption",null,(0,n.__)("wind speed","weather-widget-wp"))):null,a.dataMax?(0,e.createElement)("figure",{className:"weather-temp-max"},(0,e.createElement)("i",{className:"weather-i-temp-max"}),(0,e.createElement)("span",null,a.tempMax),(0,e.createElement)("figcaption",null,(0,n.__)("max temp.","weather-widget-wp"))):null,a.dataMin?(0,e.createElement)("figure",{className:"weather-temp-min"},(0,e.createElement)("i",{className:"weather-i-temp-min"}),(0,e.createElement)("span",null,a.tempMin),(0,e.createElement)("figcaption",null,(0,n.__)("min temp.","weather-widget-wp"))):null)};(0,l.registerBlockType)(t.u2,{attributes:{location:{type:"string",default:"Santorini"},title:{type:"string",default:"Santorini, GR"},description:{type:"string"},tempUnits:{type:"string",default:"C"},temperature:{type:"string"},wind:{type:"string"},tempMin:{type:"string"},tempMax:{type:"string"},style:{type:"string",default:"style-expanded"},iconCode:{type:"number"},iconClass:{type:"string",default:"weather-i-sea-and-sun"},bgImgClass:{type:"string",default:" bg-img-broken-clouds"},dataIcon:{type:"boolean",default:!0},dataBgImg:{type:"boolean",default:!0},dataDesc:{type:"boolean",default:!0},dataDate:{type:"boolean",default:!0},dataWind:{type:"boolean",default:!0},dataMin:{type:"boolean",default:!0},dataMax:{type:"boolean",default:!0},blockAlignment:{type:"string"},alignment:{type:"string"},textColor:{type:"string",default:"#fff"},bgColor:{type:"string",default:"linear-gradient(74.1deg, #537895 11.78%, #A3BECD 90.32%)"},roundness:{type:"number",default:18},paddingMin:{type:"array",default:{top:"30px",left:"30px",right:"30px",bottom:"30px"}},paddingExp:{type:"array",default:{top:"115px",left:"40px",right:"40px",bottom:"40px"}},shadowSize:{type:"number",default:30},shadowColor:{type:"string",default:"rgba(51, 51, 51, 0.35)"}},edit:t=>{let{attributes:l,setAttributes:x}=t;(0,a.useEffect)((()=>{o({attributes:l,setAttributes:x})}),[]),(0,a.useEffect)((()=>{(e=>{let{attributes:t,setAttributes:a}=e;switch(!0){case t.iconCode<=299:a({iconClass:"weather-i-cloud-thunder",bgImgClass:" bg-img-rain-cloud-thunder"});break;case t.iconCode<=399:a({iconClass:"weather-i-rain-drizzle",bgImgClass:" bg-img-rain-drizzle"});break;case t.iconCode<=599:a({iconClass:"weather-i-rain",bgImgClass:" bg-img-rain"});break;case t.iconCode<=699:a({iconClass:"weather-i-snowflake",bgImgClass:" bg-img-snow"});break;case t.iconCode<=799:a({iconClass:"weather-i-windy",bgImgClass:" bg-img-windy"});break;case t.iconCode<=800:a({iconClass:"weather-i-sun",bgImgClass:" bg-img-sun"});break;case t.iconCode<=899:a({iconClass:"weather-i-clouds",bgImgClass:" bg-img-clouds"});break;default:a({iconClass:"weather-i-cloud-sun",bgImgClass:" bg-img-broken-clouds"})}})({attributes:l,setAttributes:x})}),[l.iconClass,l.bgImgClass]);const C={"--weather-widget-wp-text-align":l.alignment,"--weather-widget-wp-text-color":l.textColor,"--weather-widget-wp-bg":l.bgColor,"--weather-widget-wp-roundness":l.roundness+"px","--weather-widget-wp-padding-min":l.paddingMin?`${l.paddingMin.top} ${l.paddingMin.right} ${l.paddingMin.bottom} ${l.paddingMin.left}`:"","--weather-widget-wp-padding-exp":l.paddingExp?`${l.paddingExp.top} ${l.paddingExp.right} ${l.paddingExp.bottom} ${l.paddingExp.left}`:"","--weather-widget-wp-shadow-size":`0 ${l.shadowSize}px ${2*l.shadowSize}px ${.16*l.shadowSize}px`,"--weather-widget-wp-shadow-color":l.shadowColor},f=()=>{if("style-expanded"===l.style)return!0},y="weather-widget-wp "+l.style+(l.dataBgImg?l.bgImgClass:"")+(l.dataIcon?"":" no-icon")+(l.className?` ${l.className}`:""),_=l.blockAlignment?` block-align-${l.blockAlignment}`:"";return(0,e.createElement)("div",(0,i.useBlockProps)(),(0,e.createElement)(i.BlockControls,null,(0,e.createElement)(i.AlignmentToolbar,{value:l.alignment,onChange:e=>x({alignment:void 0===e?"none":e})}),(0,e.createElement)(i.BlockAlignmentToolbar,{value:l.blockAlignment,onChange:e=>x({blockAlignment:void 0===e?"left":e})})),(0,e.createElement)(i.InspectorControls,{key:"settings"},(0,e.createElement)("div",{id:"weather-widget-wp-settings"},(0,e.createElement)(r.PanelBody,{title:(0,n.__)("Settings","weather-widget-wp"),initialOpen:!0},(0,e.createElement)(s,{attributes:l,setAttributes:x}),(0,e.createElement)(d,{attributes:l,setAttributes:x}),(0,e.createElement)(c,{attributes:l,setAttributes:x}),(0,e.createElement)(p,{attributes:l,setAttributes:x})),(0,e.createElement)(r.PanelBody,{title:(0,n.__)("Customize Style","weather-widget-wp"),initialOpen:!1},(0,e.createElement)(m,{attributes:l,setAttributes:x}),(0,e.createElement)(g,{attributes:l,setAttributes:x}),(0,e.createElement)(u,{attributes:l,setAttributes:x}),(0,e.createElement)(w,{attributes:l,setAttributes:x}),(0,e.createElement)(h,{attributes:l,setAttributes:x})))),(0,e.createElement)("div",{className:`wrapper-weather-widget-wp${_}`},(0,e.createElement)("div",{className:y,style:C},(0,e.createElement)("div",{className:"temp-group"},l.dataIcon?(0,e.createElement)("i",{className:l.iconClass}):null,l.dataDate&&f()?(0,e.createElement)(b,null):null,(0,e.createElement)("span",{className:"weather-temp"},l.temperature,(0,e.createElement)("span",{className:"temp-units"},"°",l.tempUnits))),(0,e.createElement)("div",{className:"info-group"},(0,e.createElement)(i.RichText,{tagName:"span",className:"weather-title",value:l.title,onChange:e=>x({title:e}),placeholder:(0,n.__)('Enter title here, e.g. "Santorini, GR"',"weather-widget-wp")}),l.dataDesc?(0,e.createElement)("small",{className:"weather-description"},l.description):null),f()&&(l.dataWind||l.dataMax||l.dataMin)?(0,e.createElement)(E,{attributes:l}):null)))},save:e=>{let{attributes:t}=e;const a=t.blockAlignment?`block_align="${t.blockAlignment}"`:"",n=t.className?`css_class="${t.className}"`:"",l=()=>{if("style-expanded"===t.style)return!0};return`[weather_widget_wp_location city="${t.location}" title="${t.title}" units="${t.tempUnits}" style="${t.style}" ${t.dataIcon?"icon=1":"icon=0"} ${t.dataBgImg?"bg_img=1":"bg_img=0"} ${l()&&t.dataDate?"date=1":"date=0"} ${t.dataDesc?"desc=1":"desc=0"} ${l()&&t.dataWind?"wind=1":"wind=0"} ${l()&&t.dataMin?"min=1":"min=0"} ${l()&&t.dataMax?"max=1":"max=0"} ${a} ${n} ${(()=>{const e=t.alignment&&"left"!==t.alignment?`--weather-widget-wp-text-align:${t.alignment};`:"",a=t.bgColor&&"linear-gradient(74.1deg, #537895 11.78%, #A3BECD 90.32%)"!==t.bgColor?`--weather-widget-wp-bg:${t.bgColor};`:"",n=t.textColor&&"#fff"!==t.textColor?`--weather-widget-wp-text-color:${t.textColor};`:"",l=18!==t.roundness?`--weather-widget-wp-roundness:${t.roundness+"px"};`:"",r=t.paddingMin&&JSON.stringify(t.paddingMin)!==JSON.stringify({top:"30px",left:"30px",right:"30px",bottom:"30px"})?`--weather-widget-wp-padding-min:${t.paddingMin.top} ${t.paddingMin.right} ${t.paddingMin.bottom} ${t.paddingMin.left};`:"",i=t.paddingExp&&JSON.stringify(t.paddingExp)!==JSON.stringify({top:"115px",left:"40px",right:"40px",bottom:"40px"})?`--weather-widget-wp-padding-exp:${t.paddingExp.top} ${t.paddingExp.right} ${t.paddingExp.bottom} ${t.paddingExp.left};`:"",o=t.shadowSize&&30!==t.shadowSize?`--weather-widget-wp-shadow-size:0 ${t.shadowSize}px ${2*t.shadowSize}px ${.16*t.shadowSize}px;`:"",s=t.shadowColor&&"rgba(51, 51, 51, 0.35)"!==t.shadowColor?`--weather-widget-wp-shadow-color:${t.shadowColor};`:"";return e||a||n||l||r||i||o||s?`css_style="${e+a+n+l+r+i+o+s}"`:""})()}]`}})}();