!function(){"use strict";var n,a,t,c,o,i;n=window.jQuery,a="woocommerce_",t="faire_wc_integration",c=function(a,t){var c=n("#".concat(t));return c.length||(c=a.after('<p class="faire-msg" id="'.concat(t,'"></p>')).next("#".concat(t))),c},o=function(){var c=faireAdminSettings.productsManualSyncLinkExistingMsg,o=n("#".concat(a).concat(t,"_product_sync_mode")),i=n("#".concat(a).concat(t,"_initial_setup_products_exist")),e=function(){n("#".concat(a).concat(t,"_product_sync_schedule_num, #").concat(a).concat(t,"_product_sync_schedule_time")).closest("tr").toggle("sync_scheduled"===o.val())};o.on("change",(function(n){if(!function(){if("do_not_sync"!==o.val()&&1===parseInt(i.val())){if(!confirm(c))return!1;i.val("")}return!0}())return o.val("do_not_sync").trigger("change"),n.preventDefault(),!1;e()})),e()},i=function(o){var i=n("#".concat(a).concat(t,"_").concat(o,"_sync_manual")),e="faire_".concat(o,"_manual_sync_status");n(document).on("heartbeat-tick",(function(r,s){if(s[e]){var d=c(i,"".concat(o,"_sync_results"));n("#".concat(a).concat(t,"_product_sync_results")).val(s[e].details),d.html(s[e].message)}}))},n(document).ready((function(){var e,r,s,d,l,u,_,f,m,p,g,y,v,h,S,b,k,A,M,w,x,C,T,U;-1!==window.location.href.indexOf("section=".concat(t))&&(r=n(".options-section"),s=n("a.faire-admin-section-link-js"),d=n("#mainform .submit"),l=faireAdminSettings.isSyncEnabled,u=function(n){s.removeClass("is-selected"),n.addClass("is-selected"),r.hide(),r.filter('[data-section="'+n.data("section")+'"]').show()},e=s.filter('[href="'.concat(window.location.hash,'"]')),"yes"===l&&0<e.length&&u(e),"yes"!==l&&d.find(".woocommerce-save-button").attr("disabled",!0),d.detach().hide().appendTo("#mainform .submit-placeholder").fadeIn(),s.click((function(a){var t=s.filter('[href="'.concat(n(this).attr("href"),'"]'));u(t)})),n("#woocommerce_faire_wc_integration_initial_setup").click((function(a){a.preventDefault(),n(".woocommerce-save-button").attr("disabled",!1).trigger("click")})),o(),_=n(".".concat(a).concat(t,"_product_pricing_policy")),f=n(".".concat(a).concat(t,"_product_pricing_policy:checked")),m=n("#".concat(a).concat(t,"_product_wholesale_multiplier")),p=n("#".concat(a).concat(t,"_product_wholesale_percentage")),g=function(a){m.closest("tr").toggle("wholesale_multiplier"===n(a).val()),p.closest("tr").toggle("wholesale_percentage"===n(a).val())},_.on("click",(function(){g(this)})),g(f),y=n("#".concat(a).concat(t,"_product_wholesale_map")),v=function(){n("#".concat(a).concat(t,"_product_wholesale_map_field")).closest("tr").toggle(y.is(":checked"))},y.on("click",(function(){v()})),v(),h=faireAdminSettings.ajaxUrl,S=faireAdminSettings.nonceManualSyncProducts,b=faireAdminSettings.productsManualSyncMsg,k=faireAdminSettings.productsManualSyncLinkExistingMsg,A=n("#".concat(a).concat(t,"_product_sync_manual")),M=n("#".concat(a).concat(t,"_initial_setup_products_exist")),A.on("click",(function(){if(1===parseInt(M.val())){if(!confirm(k))return!1;M.val("")}var a=c(n(this),"product_sync_results");a.html(b),A.prop("disabled",!0),n.post(h,{action:"faire_products_manual_sync",nonce:S},(function(t){a.html(""),void 0!==t.data&&Array.isArray(t.data)&&(a.html(t.data.join("<br>")),n(document).on("heartbeat-send",(function(n,a){a.faire_product_manual_sync="init"})))})).fail((function(n){return a.val(void 0===n.data?"":n.data)})).always((function(){return A.prop("disabled",!1)}))})),i("product"),i("order"),function(){var o=faireAdminSettings.ajaxUrl,i=faireAdminSettings.nonceManualSyncProductUnlinking,e=faireAdminSettings.productUnlinkingManualSyncMsg,r=faireAdminSettings.productUnlinkingManualSyncSuccessMsg,s=faireAdminSettings.productUnlinkingManualSyncFailMsg,d=n("#".concat(a).concat(t,"_product_unlinking_manual_sync"));d.on("click",(function(){var a=c(n(this),"faire_product_unlinking_sync_manual_msg");a.html(e),d.prop("disabled",!0),n.post(o,{action:"faire_product_unlinking_manual_sync",nonce:i},(function(n){void 0!==n.data&&"success"===n.data.status?void 0!==n.data.info&&n.data.info.length>0?a.html(n.data.info):a.html(r):a.html(s)})).fail((function(n){void 0!==n.responseText&&(a.html(s),console.error(n.responseText))})).always((function(){return d.prop("disabled",!1)}))}))}(),function(){var o=faireAdminSettings.ajaxUrl,i=faireAdminSettings.nonceManualSyncProductTaxonomy,e=faireAdminSettings.productTaxonomyManualSyncMsg,r=faireAdminSettings.productTaxonomyManualSyncSuccessMsg,s=faireAdminSettings.productTaxonomyManualSyncFailMsg,d=n("#".concat(a).concat(t,"_product_taxonomy_sync_manual"));d.on("click",(function(a){a.preventDefault();var t=c(n(this).parent(),"faire_product_taxonomy_manual_sync_msg");t.html(e),d.prop("disabled",!0),n.post(o,{action:"faire_product_taxonomy_manual_sync",nonce:i},(function(n){void 0!==n.data&&"success"===n.data.status?t.html(r):t.html(s)})).fail((function(n){void 0!==n.responseText&&(t.html(s),console.error(n.responseText))})).always((function(){return d.prop("disabled",!1)}))}))}(),function(){var o=faireAdminSettings.ajaxUrl,i=faireAdminSettings.nonceManualSyncProductLinking,e=faireAdminSettings.productLinkingManualSyncMsg,r=faireAdminSettings.productLinkingManualSyncFailed,s=n("#".concat(a).concat(t,"_product_linking_sync_manual")),d=n("#".concat(a).concat(t,"_product_linking_create_products_csv")),l=n("#".concat(a).concat(t,"_product_linking_create_variations_csv")),u=n("#".concat(a).concat(t,"_initial_setup_products_exist"));s.on("click",(function(){var _=c(n(this),"product_linking_sync_results"),f=n("#".concat(a).concat(t,"_product_linking_sync_results"));_.html(e),s.prop("disabled",!0),n.post(o,{action:"faire_product_linking_manual_sync",nonce:i},(function(n){_.html("");var a=void 0===n.data||void 0===n.data.message?"":n.data.message;f.val(a),void 0!==n.data&&(u.val(""),!0===n.data.products_csv?(d.attr("disabled",!1),d.addClass("button-secondary").removeClass("disabled")):(d.attr("disabled",!0),d.removeClass("button-secondary").addClass("disabled")),!0===n.data.variations_csv?(l.attr("disabled",!1),l.addClass("button-secondary").removeClass("disabled")):(l.attr("disabled",!0),l.removeClass("button-secondary").addClass("disabled")))})).fail((function(n){void 0===n.responseJSON.data?(_.html(r),console.error(n)):_.html(n.responseJSON.data)})).always((function(){return s.prop("disabled",!1)}))}))}(),n("#".concat(a).concat(t,"_product_linking_create_products_csv")).on("click",(function(){window.location=window.location+"&wc_faire_link_products_csv=yes"})),n("#".concat(a).concat(t,"_product_linking_create_variations_csv")).on("click",(function(){window.location=window.location+"&wc_faire_link_variations_csv=yes"})),function(){var o=faireAdminSettings.ajaxUrl,i=faireAdminSettings.nonceManualSyncBrand,e=faireAdminSettings.brandManualSyncMsg,r=faireAdminSettings.brandManualSyncSuccessMsg,s=faireAdminSettings.brandManualSyncFailMsg,d=n("#".concat(a).concat(t,"_brand_sync_manual")),l=n("#".concat(a).concat(t,"_brand_locale")),u=n("#".concat(a).concat(t,"_brand_currency"));d.on("click",(function(){var a=c(n(this).parent(),"faire_brand_manual_sync_msg");a.html(e),d.prop("disabled",!0),n.post(o,{action:"faire_brand_manual_sync",nonce:i},(function(n){void 0!==n.data&&"success"===n.data.status?(a.html(r),void 0!==n.data.brand.locale&&l.val(n.data.brand.locale),void 0!==n.data.brand.currency&&u.val(n.data.brand.currency)):a.html(s)})).fail((function(n){void 0!==n.responseText&&(a.html(s),console.error(n.responseText))})).always((function(){return d.prop("disabled",!1)}))}))}(),function(){var o=faireAdminSettings.ajaxUrl,i=faireAdminSettings.nonceManualSyncOrders,e=faireAdminSettings.ordersManualSyncMsg,r=faireAdminSettings.ordersManualSyncFailed,s=n("#".concat(a).concat(t,"_order_sync_manual"));s.on("click",(function(){var d=c(n(this),"order_sync_results"),l=n("#".concat(a).concat(t,"_order_sync_results"));d.html(e),s.prop("disabled",!0),n.post(o,{action:"faire_orders_manual_sync",nonce:i},(function(a){d.html(a.data.message),l.val(void 0===a.data.details?"":a.data.details),n(document).on("heartbeat-send",(function(n,a){a.faire_order_manual_sync="init"}))})).fail((function(n){void 0===n.responseJSON.data?(d.html(r),console.error(n)):d.html(n.responseJSON.data)})).always((function(){return s.prop("disabled",!1)}))}))}(),function(){var o=faireAdminSettings.ajaxUrl,i=faireAdminSettings.nonceCancelManualSyncOrders,e=faireAdminSettings.ordersCancelManualSyncMsg,r=faireAdminSettings.ordersCancelManualSyncFailed,s=n("#".concat(a).concat(t,"_cancel_order_sync_manual")),d=n("#".concat(a).concat(t,"_order_sync_manual"));s.on("click",(function(){console.log("ordersCancelManualSyncButton");var l=c(n(this),"order_sync_results");n("#".concat(a).concat(t,"_order_sync_results")),l.html(e),s.prop("disabled",!0),n.post(o,{action:"faire_cancel_orders_manual_sync",nonce:i},(function(n){d.prop("disabled",!1),s.fadeOut(),void 0!==n.data&&l.html(n.data)})).fail((function(n){console.log(n),s.prop("disabled",!1),void 0===n.responseJSON.data?(l.html(r),console.error(n)):l.html(n.responseJSON.data)}))}))}(),w=n("#".concat(a).concat(t,"_order_sync_mode")),x=function(){var c="sync_scheduled"===w.val();n("#".concat(a).concat(t,"_order_sync_schedule_num")).closest("tr").toggle(c),n("#".concat(a).concat(t,"_order_sync_schedule_time")).closest("tr").toggle(c)},w.on("change",(function(){x()})),x(),function(){var o=faireAdminSettings.ajaxUrl,i=faireAdminSettings.nonceApiTestConnection,e=faireAdminSettings.testingApiConnectionMsg,r=faireAdminSettings.apiKeyEmptyError,s=n("#".concat(a).concat(t,"_test_api_connection"));s.on("click",(function(){if(!s.prop("disabled")){var d=c(n(this),"connection_test_msg");if(!n(n("#".concat(a).concat(t,"_api_key"))).val().trim())return d.html(r),void s.prop("disabled",!1);d.html(e),s.prop("disabled",!0),n.post(o,{action:"faire_test_api_connection",nonce:i},(function(n){return d.html(n.data)})).fail((function(n){return d.html(n.responseJSON.data)})).always((function(){return s.prop("disabled",!1)}))}}))}(),C=n("#".concat(a).concat(t,"_initial_setup")),T="".concat(a).concat(t,"_initial_setup_trigger"),U=n("#mainform button[type=submit]"),C.on("click",(function(){n("<input>").attr({type:"hidden",name:T,value:"yes"}).insertAfter(U),U.trigger("click")})))}))}();