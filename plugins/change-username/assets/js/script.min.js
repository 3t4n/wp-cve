!function(){const e=window.change_username;let n;const t=document.querySelector(".user-user-login-wrap td .description"),o=document.getElementById("user_login"),s=c("a",{href:"#",onclick:y},"Change"),l=c("input",{type:"text",name:"new_user_login",value:o.value,className:"regular-text",style:{"min-height":"28px"},autocomplete:"off"}),a=c("input",{type:"button",value:"Change",className:"button",onclick:d}),i=c("form",{method:"POST",onsubmit:d,style:{display:"none"}},[l,a]),r=c("p",{style:{display:"none"}});function u(e,n){for(const t in n)"object"==typeof n[t]?u(e[t],n[t]):e[t]=n[t]}function c(e,n,t){const o=document.createElement(e);if(t||!Array.isArray(n)&&"string"!=typeof n||(t=n,n=null),n&&u(o,n),t)if("string"==typeof t)o.textContent=t;else for(let e=0;e<t.length;e++)o.appendChild(t[e]);return o}function d(t){t.preventDefault();const s=i.new_user_login.value,l=o.value;if(s.length<2||s===l)return;a.value="Please wait..",a.disabled=!0;const u="current_username="+encodeURIComponent(l)+"&new_username="+encodeURIComponent(s)+"&_ajax_nonce="+encodeURIComponent(e.nonce),c=new XMLHttpRequest;c.open("POST",e.ajaxurl+"?action=change_username",!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.onload=function(){a.value="Change",a.disabled=!1;let t=!0;if(c.status>=200&&c.status<400&&-1!=c.responseText)try{const n=JSON.parse(c.responseText);t=!1,e.nonce=n.new_nonce,r.style.color=n.success?"green":"red",r.innerHTML=n.message,n.success&&(o.value=s,y())}catch(e){}t&&(r.style.color="red",r.textContent="Uh oh, something went wrong submitting the form."),n&&window.clearTimeout(n),r.style.display="",n=window.setTimeout((function(){r.style.display="none"}),6e3)},c.send(u)}function p(e){27===e.keyCode&&y()}function y(e){e&&e.preventDefault(),"none"===i.style.display?(i.style.display="",s.style.display="none",o.style.display="none",l.focus(),document.addEventListener("keydown",p)):(i.style.display="none",s.style.display="inline",o.style.display="",document.removeEventListener("keydown",p))}t.parentNode.replaceChild(s,t),s.parentNode.appendChild(c("div",[i,r]))}();