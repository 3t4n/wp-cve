(function($){var prefix='automatorwp-clickup-';var _prefix='automatorwp_clickup_';$('body').on('click','.automatorwp_settings #'+_prefix+'authorize',function(e){e.preventDefault();var button=$(this);var wrapper=button.parent();var token=$('#'+_prefix+'token').val();var response_wrap=wrapper.find('#'+_prefix+'response');if(!response_wrap.length){wrapper.append('<div id="'+_prefix+'response" style="display: none; margin-top: 10px;"></div>');response_wrap=wrapper.find('#'+_prefix+'response')}
if(token.length===0){response_wrap.addClass('automatorwp-notice-error');response_wrap.html('API token is required to connect with ClickUp');response_wrap.slideDown('fast');return}
response_wrap.slideUp('fast');response_wrap.attr('class','');wrapper.append('<span class="spinner is-active" style="float: none;"></span>');button.prop('disabled',!0);$.post(ajaxurl,{action:'automatorwp_clickup_authorize',nonce:automatorwp_clickup.nonce,token:token,},function(response){response_wrap.addClass('automatorwp-notice-'+(response.success===!0?'success':'error'));response_wrap.html((response.data.message!==undefined?response.data.message:response.data));response_wrap.slideDown('fast');wrapper.find('.spinner').remove();if(response.success===!0&&response.data.redirect_url!==undefined){window.location=response.data.redirect_url;return}
button.prop('disabled',!1)})});$('body').on('change','.automatorwp-action-clickup-create-list .cmb2-id-team select, '+'.automatorwp-action-clickup-add-comment-task .cmb2-id-team select, '+'.automatorwp-action-clickup-add-tag-task .cmb2-id-team select, '+'.automatorwp-action-clickup-create-task .cmb2-id-team select, '+'.automatorwp-action-clickup-remove-task .cmb2-id-team select, '+'.automatorwp-action-clickup-remove-tag-task .cmb2-id-team select',function(e,first_change){var team=$(this).closest('.cmb-row');var space_team=team.next('.cmb2-id-space');var team_id=$(this).val();if(first_change===undefined){first_change=!1}
if(team_id==='any'||team_id===''||team_id===null){if(first_change){space_team.hide()}else{space_team.slideUp('fast')}}else{var space_selector=space_team.find('select.select2-hidden-accessible');space_selector.next('.select2').remove();space_selector.data('table',team_id);if(!first_change){space_selector.val('')}
space_selector.removeAttr('data-select2-id');automatorwp_ajax_selector(space_selector);if(first_change){space_team.show()}else{space_team.slideDown('fast')}}});$('body').on('change','.automatorwp-action-clickup-create-list .cmb2-id-space select, '+'.automatorwp-action-clickup-add-comment-task .cmb2-id-space select, '+'.automatorwp-action-clickup-add-tag-task .cmb2-id-space select, '+'.automatorwp-action-clickup-create-task .cmb2-id-space select, '+'.automatorwp-action-clickup-remove-task .cmb2-id-space select, '+'.automatorwp-action-clickup-remove-tag-task .cmb2-id-space select',function(e,first_change){var space=$(this).closest('.cmb-row');var folder_space=space.next('.cmb2-id-folder');var space_id=$(this).val();if(first_change===undefined){first_change=!1}
if(space_id==='any'||space_id===''||space_id===null){if(first_change){folder_space.hide()}else{folder_space.slideUp('fast')}}else{var folder_selector=folder_space.find('select.select2-hidden-accessible');folder_selector.next('.select2').remove();folder_selector.data('table',space_id);if(!first_change){folder_selector.val('')}
folder_selector.removeAttr('data-select2-id');automatorwp_ajax_selector(folder_selector);if(first_change){folder_space.show()}else{folder_space.slideDown('fast')}}});$('body').on('change','.automatorwp-action-clickup-create-list .cmb2-id-folder select, '+'.automatorwp-action-clickup-add-comment-task .cmb2-id-folder select, '+'.automatorwp-action-clickup-add-tag-task .cmb2-id-folder select, '+'.automatorwp-action-clickup-create-task .cmb2-id-folder select, '+'.automatorwp-action-clickup-remove-task .cmb2-id-folder select, '+'.automatorwp-action-clickup-remove-tag-task .cmb2-id-folder select',function(e,first_change){var folder=$(this).closest('.cmb-row');var list_folder=folder.next('.cmb2-id-list');var folder_id=$(this).val();if(first_change===undefined){first_change=!1}
if(folder_id==='any'||folder_id===''||folder_id===null){if(first_change){list_folder.hide()}else{list_folder.slideUp('fast')}}else{var list_selector=list_folder.find('select.select2-hidden-accessible');list_selector.next('.select2').remove();list_selector.data('table',folder_id);list_selector.removeAttr('data-select2-id');automatorwp_ajax_selector(list_selector);if(first_change){list_folder.show()}else{list_folder.slideDown('fast')}}});$('body').on('change','.automatorwp-action-clickup-add-comment-task .cmb2-id-list select, '+'.automatorwp-action-clickup-add-tag-task .cmb2-id-list select, '+'.automatorwp-action-clickup-remove-task .cmb2-id-list select, '+'.automatorwp-action-clickup-remove-tag-task .cmb2-id-list select',function(e,first_change){var list=$(this).closest('.cmb-row');var task_list=list.next('.cmb2-id-task');var list_id=$(this).val();if(first_change===undefined){first_change=!1}
if(list_id==='any'||list_id===''||list_id===null){if(first_change){task_list.hide()}else{task_list.slideUp('fast')}}else{var task_selector=task_list.find('select.select2-hidden-accessible');task_selector.next('.select2').remove();task_selector.data('table',list_id);task_selector.removeAttr('data-select2-id');automatorwp_ajax_selector(task_selector);if(first_change){task_list.show()}else{task_list.slideDown('fast')}}});$('body').on('change','.automatorwp-action-clickup-add-comment-task .cmb2-id-task select, '+'.automatorwp-action-clickup-add-tag-task .cmb2-id-task select, '+'.automatorwp-action-clickup-remove-task .cmb2-id-task select, '+'.automatorwp-action-clickup-remove-tag-task .cmb2-id-task select',function(e,first_change){var task=$(this).closest('.cmb-row');var tag_list=task.next('.cmb2-id-tag');var task_id=$(this).val();if(first_change===undefined){first_change=!1}
if(task_id==='any'||task_id===''||task_id===null){if(first_change){tag_list.hide()}else{tag_list.slideUp('fast')}}else{var tag_selector=tag_list.find('select.select2-hidden-accessible');tag_selector.next('.select2').remove();tag_selector.data('table',list_id);tag_selector.removeAttr('data-select2-id');automatorwp_ajax_selector(tag_selector);if(first_change){tag_list.show()}else{tag_list.slideDown('fast')}}});$('body').on('click','.automatorwp-automation-item-label > .automatorwp-option',function(e){var item=$(this).closest('.automatorwp-automation-item[class*="clickup"]');var option=$(this).data('option');var option_form=item.find('.automatorwp-option-form-container[data-option="'+option+'"]');var team_selector=option_form.find('.cmb2-id-team');if(team_selector!==undefined){team_selector.find('select.select2-hidden-accessible').trigger('change',[!0])}
var space_selector=option_form.find('.cmb2-id-space');if(space_selector!==undefined){space_selector.find('select.select2-hidden-accessible').trigger('change',[!0])}
var folder_selector=option_form.find('.cmb2-id-folder');if(folder_selector!==undefined){folder_selector.find('select.select2-hidden-accessible').trigger('change',[!0])}
var list_selector=option_form.find('.cmb2-id-list');if(list_selector!==undefined){list_selector.find('select.select2-hidden-accessible').trigger('change',[!0])}
var task_selector=option_form.find('.cmb2-id-task');if(task_selector!==undefined){task_selector.find('select.select2-hidden-accessible').trigger('change',[!0])}})})(jQuery)