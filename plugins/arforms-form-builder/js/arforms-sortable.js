"use strict";const arforms_insert_after=(e,t)=>e.insertAdjacentHTML("afterend",t),arforms_sortable=class{constructor(){this.arforms_adjust_styling_height(),this.arforms_init_sortable(),document.getElementById("arfchange_field").value="",document.getElementById("arfchange_inner_field").value="",arflite_load_external_js_function(),arflite_initialize_resizable(),document.getElementById("arfchange_field").value="",document.getElementById("arfchange_inner_field").value=""}arforms_reinit_sortable(){null!=this.sortable_data&&void 0!==this.sortable_data&&(this.sortable_data.forEach((e,t)=>{try{e.destroy()}catch(e){console.log(e)}delete this.sortable_data[t]}),this.sortable_data=[]),this.arforms_init_sortable()}arforms_adjust_styling_height(){if(null==document.querySelector(".arf_form_styling_tools")||null==document.querySelector(".arf_form_style_tab_container.active .arf_accordion_container.active"))return!1;var e=document.querySelector(".arf_form_styling_tools").offsetHeight-document.querySelector(".arf_form_styling_tools .arf_form_style_tabs").offsetHeight,t=e-204;document.querySelector(".arf_form_style_tab_container.active .arf_accordion_container.active").style.height=t-80+"px",document.querySelector(".arf_form_style_tab_container.active").style.minHeight=200+t+"px",document.querySelector(".arf_form_style_tab_container.active").style.maxHeight=200+t+"px",document.getElementById("arf_styling_height").value=e,document.getElementById("arf_styling_content_height").value=t-30}arforms_init_sortable(){let t=document.getElementById("new_fields");var e;null!=t&&(document.getElementById("arfeditor_loader").style.display="none",e=document.getElementById("arf_form_input_fields_container"),null!=this.sortable_data&&void 0!==this.sortable_data||(this.sortable_data=[]),null!=e&&(e=Sortable.create(e,{group:{name:"arforms-fields",pull:"clone",put:!1},animation:0,preventOnFilter:!1,sort:!1,filter:".arflite_prevent_sorting",ghostClass:"arf-sortable-placeholder"}),this.sortable_data.push(e)),null!=(e=document.getElementById("arf_form_other_fields_container"))&&(e=Sortable.create(e,{group:{name:"arforms-fields",pull:"clone",put:!1},animation:0,sort:!1,preventOnFilter:!1,filter:".arflite_prevent_sorting",ghostClass:"arf-sortable-placeholder"}),this.sortable_data.push(e)),e=Sortable.create(t,{group:{name:"arforms-fields"},preventOnFilter:!1,onStart:function(e){t.classList.add("arforms_choosen_for_sort")},onEnd:function(a){t.classList.remove("arforms_choosen_for_sort"),a.item.classList.contains("arfformfield")&&arforms_sortable.arforms_sort_fields(a);let e=document.getElementById("arf_sortable_custom_class");null!=e&&e.parentNode.removeChild(e),a.item.classList.contains("arf_inner_wrapper_sortable")&&a.item.removeAttribute("style"),setTimeout(function(){let e=a.item.getAttribute("id");var t,r;void 0!==e&&!/[\d+](_confirm)/gi.test(e)&&/[\d+]/.test(e)&&(t=e.replace("arf_field_",""),jQuery("#arf_field_data_"+t).trigger("change"),r=document.getElementById("arf_field_data_"+t).value,void 0!==(r=(r=arflite_parse_json(r)).placeholdertext)&&""!=r&&document.querySelector('[name="item_meta['+t+']"]').attr("placeholder",r),arflite_initialize_on_sortable_focus_tipso(t,"0"))},300),arfliteaddinnerclasses(),arflite_initialize_field_order(),arfliteinitialize_field_resize_width(),arforms_sortable_obj.arforms_reinit_sortable()},filter:".arfformfield label,.arf_field_option_model,.arf_field_values_model,.controls,input,textarea,select,#required,#fieldoption,#duplicate,#delete,#edit_opt_icon,#running_total_icon,.arf_field_option_multicolumn,.arf_form_element_item:not(.arflite_pro_form_field),.arf_main_label",animation:250,swapThreshold:.7,emptyInsertThreshold:1,onAdd:arforms_sortable.add_form_field_from_list}),this.sortable_data.push(e),this.arforms_multicol_container_init())}arforms_multicol_container_init(){let s=this,e=document.querySelectorAll(".sortable_inner_wrapper");0<e.length&&e.forEach((e,t)=>{e=Sortable.create(e,{group:{name:"arforms-fields",put:function(e,t,r){if(s.enableSwap=!1,null!=e.el.querySelector(".arfformfield")&&r.classList.contains("arf_form_element_item"))return!1;if(r.classList.contains("arf_inner_wrapper_sortable"))return!1;var r=e.el.parentNode,a=t.el.parentNode;if(null!=e.el.querySelector(".arfformfield")){if(r!=a)return!1;null==t.el.querySelector(".arfformfield")?s.from_field_id=t.el.getAttribute("id").replace("arfmainfieldid_","arf_field_"):s.from_field_id=t.el.querySelector(".arfformfield").getAttribute("id"),s.enableSwap=!0,s.parentNode=a,s.from=t.el,e.el.querySelector(".arfformfield").classList.add("sortable-swapping"),s.swappedOffset=e.el.querySelector(".arfformfield").getClientRects(),s.swap_elm=e.el.querySelector(".arfformfield")}}},onEnd:function(e){var l,i,_;if(1==s.enableSwap){s.parentNode;let e=s.from,t=s.swap_elm;var r=s.swappedOffset[0].x,a=e.getClientRects()[0].x,o=s.from_field_id,a=parseFloat(a)-parseFloat(r);t.style.transform=`translateX(${a}px)`,l=e,i=t,_=o,setTimeout(function(){l.appendChild(i),i.style.transform="",i.classList.remove("sortable-swapping");var e=i.getAttribute("id").replace("arf_field_",""),t=_.replace("arf_field_","");let r=i.parentNode,a=document.getElementById(_).parentNode;document.getElementById(_).classList.remove("sortable-swapping"),r.classList.remove("arf_sortable_receiver"),r.setAttribute("id","arfmainfieldid_"+e),a.classList.remove("arf_sortable_receiver"),a.setAttribute("id","arfmainfieldid_"+t),arflite_initialize_field_order(),arfliteaddinnerclasses(),arforms_sortable_obj.arforms_adjust_height(),arfliteremoveBlankElm()},250),s.enableSwap=!1,arforms_sortable_obj.arforms_reinit_sortable()}},onChoose:function(){document.getElementById("new_fields").classList.add("arforms_choosen_for_inner_sort")},onUnChoose:function(){document.getElementById("new_fields").classList.remove("arforms_choosen_for_inner_sort")},filter:".arf_inner_wrapper_sortable, .arf_field_width_overlay, .arf_main_label",animation:250,swapThreshold:.7,draggable:".arfformfield",onAdd:function(a){if(a.item.classList.contains("arf_form_element_item"))arforms_sortable.add_form_inner_field_from_list(a);else{let e=a.from,t=e.getAttribute("id");if("new_fields"==t)return!1;e.removeAttribute("id"),null==e.querySelector("arfformfield")&&e.classList.add("arf_sortable_receiver");let r=a.to;r.classList.remove("arf_sortable_receiver"),r.setAttribute("id",t);var a=t.replace("arfmainfieldid_",""),l=arflite_retrieve_field_data(a),i=l.type;arflite_load_bootstrap_js_css(i,a),arflite_initialize_control(a),arforms_sortable_obj.arforms_adjust_height(),/[\d+](_confirm)/gi.test(a)||(l=l.name,arflite_update_name_dropdown(a,i,l)),arflite_reset_single_field_ids(a),arfliteremoveBlankElm(),arfliteaddinnerclasses(),arflite_initialize_field_order(),arfliteSetDefaultColumnWidth(),"undefined"!=s.enableSwap&&0!=s.enableSwap||arforms_sortable_obj.arforms_reinit_sortable()}},preventOnFilter:!1});s.sortable_data.push(e)})}arforms_adjust_height(){var e=document.getElementsByClassName("arf_inner_wrapper_sortable").length;for(let t=0;t<e;t++){let r=document.getElementsByClassName("arf_inner_wrapper_sortable")[t],e=r;var l=r.getElementsByClassName("sortable_inner_wrapper").length;let a=0;for(let t=0;t<l;t++){let e=r.getElementsByClassName("sortable_inner_wrapper")[t];(e=null!=e.querySelector(".arfformfield")?e.querySelector(".arfformfield"):e).style.height="auto";var i=e.offsetHeight;(0==a||0==t||a<i)&&(a=i)}0<e.querySelectorAll(".sortable_inner_wrapper").length&&e.querySelectorAll(".sortable_inner_wrapper").forEach((e,t)=>{e.style.height=a+"px"})}}static add_form_inner_field_from_list(i){let _=i.item;if(_.classList.contains("arf_form_element_item")){var o=_.getAttribute("data-type"),s=document.getElementById("arfmainforminputstyle").value;let e;var s=(e="material"==s?arflite_parse_json(Base64.decode(document.getElementById("arflite_convert_new_materialize_field_array_json").value)):arflite_parse_json(Base64.decode(document.getElementById("arflite_convert_new_field_array_json").value)))[o],f=arforms_sortable_obj.arforms_generate_form_field_id(),n=document.getElementById("id").value,d=arforms_sortable_obj.arforms_generate_random_string();let t=s,r=(t=(t=(t=t.replace(/\{arf_field_id\}/gi,f)).replace(/\{arf_form_id\}/gi,n)).replace(/\{arf_unique_key\}/gi,d),jQuery(t).find("#arf_field_"+f).prop("outerHTML"));s=_.getAttribute("inner_class"),n=_.getAttribute("data-width");let a,l=(a="arf_2col"==s||"arf21colclass"==s?"arf_2":"arf31colclass"==s||"arf_23col"==s||"arf_3col"==s?"arf_3":"arf41colclass"==s||"arf42colclass"==s||"arf43colclass"==s||"arf_4col"==s?"arf_4":"arf51colclass"==s||"arf52colclass"==s||"arf53colclass"==s||"arf54colclass"==s||"arf_5col"==s?"arf_5":"arf61colclass"==s||"arf62colclass"==s||"arf63colclass"==s||"arf64colclass"==s||"arf65colclass"==s||"arf_6col"==s?"arf_6":"arf_1",null!==(d=arflite_retrieve_field_data(f))&&(d.inner_class=s,d.classes=a,c=JSON.stringify(d),document.getElementById("arf_field_data_"+f).value=c),r.replace(/inner_class\=('|")(.*)('|")/,`inner_class=$1${s}$3`));/data-width\=('|")(.*)('|")/.test(l)&&(l=l.replace(/data-width\=('|")(.*)('|")/,`data-width=$1${n}$3`)),null!==i.to&&(i.to.setAttribute("id","arfmainfieldid_"+f),i.to.classList.remove("arf_sortable_receiver")),_.outerHTML=l;var c=document.getElementById("arfhidelabels").value;1==c&&document.getElementById("arf_field_"+f).classList.add("none_container"),u=o,p=f,setTimeout(function(){arflite_initialize_resizable(),arflite_load_bootstrap_js_css(u,p);var e,t=arflite_retrieve_field_data(p);null!=t&&(e={field_id:p,field_name:t.name,field_type:t.type},window.added_new_fields.push(e)),arflite_initialize_field_order(),document.getElementById("arf_field_data_"+p).value=JSON.stringify(t),arfliteaddinnerclasses(),arflite_update_name_dropdown(p,u,t.name)},10),m=f,setTimeout(function(){arfliteheightdiv("individual",m)},10),setTimeout(function(){arfliteinitialize_field_resize_width(),arforms_sortable_obj.arforms_reinit_sortable()},200)}else if(_.classList.contains("arfformfield")){let t=_;s=t.getAttribute("id").replace("arf_field_","");if(null!=t){t.outerHTML;n=_.parentNode.getAttribute("inner_class");_.parentNode.getAttribute("data-width");let e;e="arf_2col"==n||"arf21colclass"==n?"arf_2":"arf31colclass"==n||"arf_23col"==n||"arf_3col"==n?"arf_3":"arf41colclass"==n||"arf42colclass"==n||"arf43colclass"==n||"arf_4col"==n?"arf_4":"arf51colclass"==n||"arf52colclass"==n||"arf53colclass"==n||"arf54colclass"==n||"arf_5col"==n?"arf_5":"arf61colclass"==n||"arf62colclass"==n||"arf63colclass"==n||"arf64colclass"==n||"arf65colclass"==n||"arf_6col"==n?"arf_6":"arf_1",null!==(d=arflite_retrieve_field_data(s))&&(d.inner_class=n,d.classes=e,c=JSON.stringify(d),document.getElementById("arf_field_data_"+s).value=c),_.parentNode.setAttribute("id","arfmainfieldid_"+s),_.parentNode.classList.remove("arf_sortable_receiver"),null!=i.from&&null!=i.from.getAttribute("id")&&/arfmainfieldid_(\d+)/i.test(i.from.getAttribute("id"))&&(i.from.removeAttribute("id"),i.from.classList.add("arf_sortable_receiver")),arfliteaddinnerclasses()}a=s,setTimeout(function(){arflite_initialize_resizable();var e,t=arflite_retrieve_field_data(a),r=t.type;null!=t&&(arflite_load_bootstrap_js_css(t.type,a),e={field_id:a,field_name:t.name,field_type:t.type},window.added_new_fields.push(e)),arflite_initialize_field_order(),document.getElementById("arf_field_data_"+a).value=JSON.stringify(t),arflite_update_name_dropdown(a,r,t.name)},10),e=s,setTimeout(function(){arfliteheightdiv("individual",e)},10),setTimeout(function(){arfliteinitialize_field_resize_width(),arfliteremoveBlankElm(),arforms_sortable_obj.arforms_reinit_sortable()},200)}else if(_.classList.contains("sortable_inner_wrapper")){let e=i.from,a=(e.classList.contains("single_column_wrapper")&&i.from.replaceWith(""),_.querySelector(".arfformfield"));o=a.getAttribute("id").replace("arf_field_","");if(null!=a){let e=a.parentNode.outerHTML;f=i.to.parentNode.getAttribute("inner_class"),n=i.to.parentNode.getAttribute("data-width");let t,r=(t="arf_2col"==f||"arf21colclass"==f?"arf_2":"arf31colclass"==f||"arf_23col"==f||"arf_3col"==f?"arf_3":"arf41colclass"==f||"arf42colclass"==f||"arf43colclass"==f||"arf_4col"==f?"arf_4":"arf51colclass"==f||"arf52colclass"==f||"arf53colclass"==f||"arf54colclass"==f||"arf_5col"==f?"arf_5":"arf61colclass"==f||"arf62colclass"==f||"arf63colclass"==f||"arf64colclass"==f||"arf65colclass"==f||"arf_6col"==f?"arf_6":"arf_1",null!==(d=arflite_retrieve_field_data(o))&&(d.inner_class=f,d.classes=t,c=JSON.stringify(d),document.getElementById("arf_field_data_"+o).value=c),e=e.replace(/inner_class\=('|")(.*)('|")/,`inner_class=$1${f}$3`),!1);/data-width\=('|")(.*)('|")/.test(e)?e=e.replace(/data-width\=('|")(.*)('|")/,`data-width=$1${n}$3`):r=!0,_.parentNode.parentNode.outerHTML=e,1==r&&(document.getElementById("arfmainfieldid_"+o).setAttribute("data-width",n),document.getElementById("arfmainfieldid_"+o).style.width=n+"%")}l=o,setTimeout(function(){arflite_initialize_resizable();var e,t=arflite_retrieve_field_data(l),r=t.type;null!=t&&(arflite_load_bootstrap_js_css(t.type,l),e={field_id:l,field_name:t.name,field_type:t.type},window.added_new_fields.push(e)),arflite_initialize_field_order(),document.getElementById("arf_field_data_"+l).value=JSON.stringify(t),arfliteaddinnerclasses(),arflite_update_name_dropdown(l,r,t.name)},10),t=o,setTimeout(function(){arfliteheightdiv("individual",t)},10),setTimeout(function(){arfliteinitialize_field_resize_width()},200),arforms_sortable_obj.arforms_reinit_sortable()}var t,l,e,a,m,u,p}static arforms_sort_fields(e){let t=e.item,r=t.getAttribute("id");var a,l,i,e=r.replace("arf_field_",""),_=(arflite_initialize_control(e,!0),arflite_retrieve_field_data(e));null!=_?(a=_.type,l=t.outerHTML,i=arflite_multicol_html(),i=`<div class='arf_inner_wrapper_sortable arfmainformfield edit_form_item arffieldbox ui-state-default 1  ui-sortable-handle single_column_wrapper' data-id='arf_editor_main_row_${document.getElementById("arf_editor_total_rows").value}'>${i}<div class='sortable_inner_wrapper edit_field_type_${a} arf_1col arf1columns' id='${r}' inner_class='arf_1col'>${l}</div></div>`,t.outerHTML=i,arflite_load_bootstrap_js_css(a,e)):(l=t.outerHTML,arflite_multicol_html(),i=`<div class='arf_inner_wrapper_sortable arfmainformfield edit_form_item arffieldbox ui-state-default 1 ui-sortable-handle single_column_wrapper' data-id='arf_editor_main_row_${document.getElementById("arf_editor_total_rows").value}'>" + multicol_html_data + "<div class='sortable_inner_wrapper edit_field_type_${field_type} arf_1col arf1columns' id='${r}' inner_class='arf_1col'>${l}</div></div>`,t.outerHTML=i),arflite_initialize_control(e),/[\d+](_confirm)/gi.test(e)||(field_name=_.name,arflite_update_name_dropdown(e,field_type,field_name)),arflite_reset_single_field_ids(e),arfliteremoveBlankElm()}static add_form_field_from_list(a){let l=a.item;if(l.classList.contains("arf_form_element_item")){var i=l.getAttribute("data-type"),_=document.getElementById("arfmainforminputstyle").value;let e;var _=(e="material"==_?arflite_parse_json(Base64.decode(document.getElementById("arflite_convert_new_materialize_field_array_json").value)):arflite_parse_json(Base64.decode(document.getElementById("arflite_convert_new_field_array_json").value)))[i],o=arforms_sortable_obj.arforms_generate_form_field_id(),s=document.getElementById("id").value,f=arforms_sortable_obj.arforms_generate_random_string();let t=_;_=document.getElementById("arf_editor_total_rows").value,s=(t=(t=(t=t.replace(/\{arf_field_id\}/gi,o)).replace(/\{arf_form_id\}/gi,s)).replace(/\{arf_unique_key\}/gi,f),_=parseInt(_)+1,t=t.replace(/\{arf_editor_index_row\}/gi,_),l.outerHTML=t,document.getElementById("arfhidelabels").value),s=(1==s&&document.getElementById("arf_field_"+o).classList.add("none_container"),document.getElementById("arf_editor_total_rows").value=_,arfliteSetDefaultColumnWidth(),arflite_load_bootstrap_js_css(i,o),arflite_initialize_control(o),/[\d+](_confirm)/gi.test(o)||(f=arflite_retrieve_field_data(o).name,arflite_update_name_dropdown(o,i,f)),arflite_reset_single_field_ids(o),arfliteremoveBlankElm(),arfliteaddinnerclasses(),arflite_initialize_field_order(),arflite_retrieve_field_data(o)),_=s.name,f=(window.is_add_new_field=!0,{field_id:o,field_name:_,field_type:i});window.added_new_fields.push(f),window.loaded_settings=[]}else if(null!=a.to.getAttribute("id")&&"new_fields"==a.to.getAttribute("id")){let e=l;s=e.outerHTML;let t=e.getAttribute("id");var o=t.replace("arf_field_",""),_=(arflite_initialize_control(o,!0),arflite_retrieve_field_data(o)),i=_.type,f=arflite_multicol_html(),a=document.getElementById("arf_editor_total_rows").value,a=(l.getAttribute("inner_class"),l.getAttribute("data-width"),"<div class='arf_inner_wrapper_sortable arfmainformfield edit_form_item arffieldbox ui-state-default 1  ui-sortable-handle single_column_wrapper' data-id='arf_editor_main_row_"+a+"'>"+f+"<div class='sortable_inner_wrapper edit_field_type_"+i+" arf_1col arf1columns' id='"+t+"' inner_class='arf_1col'>"+s+"</div></div>");l.outerHTML=a;let r=arflite_retrieve_field_data(o);null!==r&&(r.inner_class="arf_1col",r.classes="arf_1",f=JSON.stringify(r),document.getElementById("arf_field_data_"+o).value=f),arflite_load_bootstrap_js_css(i,o),arflite_initialize_control(o),arfliteaddinnerclasses(),arforms_sortable_obj.arforms_adjust_height(),/[\d+](_confirm)/gi.test(o)||(s=_.name,arflite_update_name_dropdown(o,i,s)),arflite_reset_single_field_ids(o),arfliteremoveBlankElm(),arflite_initialize_field_order()}arforms_sortable_obj.arforms_reinit_sortable()}arforms_generate_form_field_id(){var e=document.getElementById("arflite_max_field_id").value||0;return e++,document.getElementById("arflite_max_field_id").value=e}arforms_generate_random_string(){let t="";var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=5;0<e;--e)t+=r[Math.round(Math.random()*(r.length-1))];return t}},arforms_sortable_obj=new arforms_sortable;