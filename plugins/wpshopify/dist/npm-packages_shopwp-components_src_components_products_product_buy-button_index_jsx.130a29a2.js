"use strict";(self.webpackChunkshopwp=self.webpackChunkshopwp||[]).push([["npm-packages_shopwp-components_src_components_products_product_buy-button_index_jsx","Link-public"],{Y2m9:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var a=n("LpH3"),o=n("FG1g"),i={name:"1m7okhr-LinkModalCSS",styles:"text-decoration:none;display:block;&:hover{cursor:pointer;};label:LinkModalCSS;"},r=function(t){var e=t.children,n=(0,o.V)(),r=i;return(0,a.tZ)("a",{href:"#!",onClick:function(){shopwp.misc.isPro&&n({type:"TOGGLE_MODAL",payload:!0})},css:r,className:"wps-link-modal"},e)},s=n("iPOl"),l={name:"rj311j-linkCSS",styles:"text-decoration:none;display:block;.wps-product-image{&:hover{cursor:pointer;}};label:linkCSS;"},c=function(t){var e=t.type,n=t.payload,o=t.linkTo,i=t.manualLink,r=t.target,c=t.classNames,p=t.children,u="wps-"+e+"-link "+c,d=l;return(0,a.tZ)("a",{href:wp.hooks.applyFilters("misc.linkHref",i?encodeURI(i):(0,s.vp)(n,e,o),o),className:u,css:d,"aria-label":"Product Link",target:wp.hooks.applyFilters("misc.linkTarget",function(t){return t||"_blank"}(r),e,n)},p)},p=function(t){var e=t.type,n=t.payload,a=t.classNames,o=void 0===a?"":a,i=t.target,s=t.children,l=t.linkTo,p=void 0===l?"none":l,u=t.manualLink;return t.disableLink?s:"none"!==p||u?"modal"===p?React.createElement(r,null,s):React.createElement(c,{type:e,payload:n,linkTo:p,manualLink:u,target:i,classNames:o},s):s}},"rDd/":function(t,e,n){n.d(e,{F:function(){return a},z:function(){return o}});var a=wp.element.createContext(),o=wp.element.createContext()},fFxg:function(t,e,n){n.d(e,{C:function(){return o},r:function(){return i}});var a=n("rDd/");function o(){var t=wp.element.useContext(a.F);if(!t)throw new Error("useProductBuyButtonState must be used within the ProductBuyButtonProvider");return t}function i(){var t=wp.element.useContext(a.z);if(!t)throw new Error("useProductBuyButtonDispatch must be used within the ProductBuyButtonProvider");return t}},Jy9X:function(t,e,n){n.r(e),n.d(e,{default:function(){return Qt}});var a=n("LpH3"),o=n("U039"),i=n("FG1g"),r=n("iPOl"),s=n("vJz7"),l=n.n(s),c=n("6LH5"),p=n.n(c),u=n("8w0R"),d=n.n(u),y=n("HUZZ"),S=n.n(y),f=n("rjDe"),m=n.n(f);function b(t){return d()(t,"value").filter((function(t){return t.value}))}n("oT6z");var v,T=n("dGr1"),O=n("3mso"),g=n.n(O),h=n("fFxg"),E=n("WZtd"),C=n("YE4J"),w=n("2MD/"),k=n("jAHd"),x=n.n(k),_=n("AU3J"),P=n("fXh0"),B=function(t){var e=t.minQuantity,n=t.maxQuantity,o=t.quantityStep,r=(0,i.V)();return(0,a.tZ)(P.default,{dispatch:r,quantityStep:o,maxQuantity:n,minQuantity:e,initialQuantity:e>1?e:1,onChange:function(t){r({type:"UPDATE_QUANTITY",payload:t})},small:!1})},D=n("Pb72"),I=n("Y2m9"),N=n("DGrm"),Z=n("D57m"),L={name:"17sxv2k-textNoticeCSS",styles:"text-align:center;margin:5px auto 2.4em auto;font-size:15px;padding:10px;color:red;width:calc(100% - 30px);font-weight:normal;display:block;label:textNoticeCSS;"},A=function(t){var e=t.quantityLeft,n=L;return(0,a.tZ)(Z.iQ,null,(0,a.tZ)("span",{className:"wps-notice-text",css:[n,";label:ProductBuyButtonTextNotice;"]},wp.i18n.sprintf(wp.i18n.__("Only %s left!","shopwp"),e)))},V=function(t){var e=t.settings,n=wp.element,a=n.useEffect,o=(0,n.useState)(!1),r=(0,w.Z)(o,2),s=r[0],l=r[1],c=(0,i.C)();return a((function(){c.selectedVariant&&c.selectedVariant.node.availableForSale?(c.selectedVariant.node.quantityAvailable||l(!1),c.selectedVariant.node.quantityAvailable<=e.leftInStockThreshold&&l(c.selectedVariant.node.quantityAvailable)):l(!1)}),[c.selectedVariant]),s&&s>0&&c.selectedVariant?React.createElement(A,{quantityLeft:s}):null},R=wp.element,j=R.useRef,F=R.useEffect,U=R.useState;function q(t,e,n){var a={attributes:wp.hooks.applyFilters("cart.lineItemAttributes",[],t,e,n),merchandiseId:t.node.id,quantity:e};return null!=n&&n.subscription&&(a.sellingPlanId=n.subscription.sellingPlanId),[a]}function Q(t){var e=t.hasLink,n=t.payload,o=t.children,i=t.linkTo,r=t.linkTarget,s=t.isDirectCheckout,l=t.linkWithBuyButton;return!e||s||l?o:(0,a.tZ)(I.default,{type:"products",payload:n,linkTo:i,target:r},o)}var G={name:"jql0qu-NoticeCSS",styles:"margin-top:15px;label:NoticeCSS;"};function W(t){var e=t.addToCartButtonColor,n=t.addToCartButtonTextColor,o=t.hasLink,i=t.linkWithBuyButton,r=t.isDirectCheckout,s=t.productDispatch,l=t.hasManyVariants,c=t.loader,p=t.buttonText,u=t.addedToCart,d=t.quantity,y=t.selectedOptions,S=t.payload,f=t.settings,m=t.linkTo,b=wp.element.useState(!1),O=(0,w.Z)(b,2),g=O[0],k=O[1];function P(){return l?(0,T.oJ)(S,y):function(t){return!!t.variants.edges.length&&t.variants.edges[0]}(S)}var B=U(!1),I=(0,w.Z)(B,2),N=I[0],Z=I[1],L=P();F((function(){if((0,T.tW)(y,S)){var t=P();t&&t.node.availableForSale?(k(!0),Z(!1)):Z(!0)}else Z(!1)}),[y]);var A=U(!1),V=(0,w.Z)(A,2),R=V[0],Q=V[1],W=j(),M=(0,h.C)(),H=(0,h.r)(),K=(f.maxQuantity,G),X=(0,a.F4)(v||(v=(0,C.Z)(["\n\t\t0% {\n\t\t\ttransform: translateX(0);\n\t\t}\n\n\t\t6.5% {\n\t\t\ttransform: translateX(-6px) rotateY(-9deg);\n\t\t}\n\n\t\t18.5% {\n\t\t\ttransform: translateX(5px) rotateY(7deg);\n\t\t}\n\n\t\t31.5% {\n\t\t\ttransform: translateX(-3px) rotateY(-5deg);\n\t\t}\n\n\t\t43.5% {\n\t\t\ttransform: translateX(2px) rotateY(3deg);\n\t\t}\n\n\t\t50% {\n\t\t\ttransform: translateX(0);\n\t\t}\n\t"]))),J=(0,a.iv)("font-family:",f.addToCartButtonTypeFontFamily?f.addToCartButtonTypeFontFamily:"inherit",";font-weight:",f.addToCartButtonTypeFontWeight?f.addToCartButtonTypeFontWeight:"initial",";font-style:",f.addToCartButtonTypeFontStyle?f.addToCartButtonTypeFontStyle:"initial",";font-size:",f.addToCartButtonTypeFontSize?f.addToCartButtonTypeFontSize:"initial",";letter-spacing:",f.addToCartButtonTypeLetterSpacing?f.addToCartButtonTypeLetterSpacing:"initial",";line-height:",f.addToCartButtonTypeLineHeight?f.addToCartButtonTypeLineHeight:1,";text-decoration:",f.addToCartButtonTypeTextDecoration?f.addToCartButtonTypeTextDecoration:"initial",";text-transform:",f.addToCartButtonTypeTextTransform?f.addToCartButtonTypeTextTransform:"initial",";overflow-y:hidden;flex:1;min-width:160px;min-height:45px;animation:",g?(0,a.iv)(X," 0.9s ease-in-out;;label:addToCartCSS;"):"none"," &:focus,&:hover{text-decoration:none;cursor:",R||N?"not-allowed":"pointer",";color:",R||N?"rgba(255, 255, 255, 1)":"rgba(255, 255, 255, 0.7)",";}&&{background-color:",N?"#cfcfcf":e,";};label:addToCartCSS;");function Y(){return(Y=(0,E.Z)(x().mark((function t(e){var n,a,c,p,u;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("modal"!==m||!shopwp.misc.isPro||r||i){t.next=3;break}return s({type:"TOGGLE_MODAL",payload:!0}),t.abrupt("return");case 3:if(!o||r||i){t.next=5;break}return t.abrupt("return");case 5:if(e.preventDefault(),L||!l){t.next=9;break}return s({type:"SET_MISSING_SELECTIONS",payload:!0}),t.abrupt("return");case 9:if(L){t.next=14;break}return console.error("ShopWP error: handleClick variant undefined "),s({type:"SET_MISSING_SELECTIONS",payload:!0}),H({type:"UPDATE_SELECTED_OPTIONS",payload:!1}),t.abrupt("return");case 14:if(n=wp.hooks.applyFilters("product.lineItemOptions",{minQuantity:f.minQuantity,maxQuantity:f.maxQuantity,subscription:M.subscription,attributes:M.attributes,variantId:L.node.id}),a=q(L,d,M),!r){t.next=24;break}c={lines:a,lineItemOptions:[{variantId:L.node.id,options:n}],note:!1,discountCode:!1,customAttributes:!1},s({type:"SET_DIRECT_CHECKOUT_PARAMS",payload:c}),s({type:"SET_IS_DIRECT_CHECKOUT",payload:!0}),Q(!0),wp.hooks.doAction("do.directCheckout",c),t.next=36;break;case 24:if(p=f.resetVariantsAfterAdding,f.openCartAfterAdding,u={lines:a,extras:{openCartAfterAdding:f.openCartAfterAdding}},!M.payload.requiresSellingPlan||M.subscription){t.next=30;break}return H({type:"SET_NOTICE",payload:{type:"error",message:"This product cannot be purchased without a subscription. Please select a subscription and try again. If you don't see a subscription, you may need to turn this feature on."}}),t.abrupt("return");case 30:p&&(s({type:"SET_ADDED_VARIANT",payload:L.node}),s({type:"SET_SELECTED_VARIANT",payload:!1})),H({type:"UPDATE_SELECTED_OPTIONS",payload:!1}),s({type:"SET_MISSING_SELECTIONS",payload:!1}),s({type:"SET_NOTICE",payload:!1}),wp.hooks.doAction("do.addToCart",u),wp.hooks.doAction("on.afterAddToCart",a,L.node);case 36:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,a.tZ)(React.Fragment,null,(0,a.tZ)("button",{ref:W,type:"button",role:"button",itemProp:"potentialAction",itemScope:!0,itemType:"https://schema.org/BuyAction",className:"wps-btn wps-btn-secondary wps-add-to-cart","data-wps-is-direct-checkout":r?"1":"0",onClick:function(t){return Y.apply(this,arguments)},css:[_.ct,J,";label:AddButton;"],disabled:R||N},R?c:(0,a.tZ)(z,{isDisabled:N,addedToCart:u,buttonText:p,addToCartButtonTextColor:n,afterAddedText:f.afterAddedText,productBuyButtonState:M})),M.notice?(0,a.tZ)(D.default,{status:M.notice.type,extraCSS:K},M.notice.message):null)}function z(t){var e=t.buttonText,n=t.addedToCart,o=t.addToCartButtonTextColor,i=t.afterAddedText,r=t.isDisabled,s=t.productBuyButtonState,l=U((function(){return!1})),c=(0,w.Z)(l,2),p=c[0],u=c[1],d=j();F((function(){n&&(u(!0),setTimeout((function(){d.current&&u(!1)}),3e3))}),[n]);var y=(0,a.iv)("display:block;margin:0;padding:0;width:100%;color:",o||"inherit",";transition:all 0.3s ease;&:hover{cursor:",r?"not-allowed":"pointer",";};label:AddButtonTextCSS;");return(0,a.tZ)("span",{css:y,ref:d,"aria-label":"Product Add to Cart Text"},function(){if(p)var t=i;else t=e;return wp.hooks.applyFilters("product.addToCart.text",t,s)}())}var M=function(t){var e=t.hasLink,n=t.payload,o=t.linkTarget,i=t.linkTo,r=t.linkWithBuyButton,s=t.addToCartButtonColor,l=t.addToCartButtonTextColor,c=t.isDirectCheckout,p=t.hasManyVariants,u=t.productDispatch,d=t.buttonText,y=t.addedToCart,S=t.quantity,f=t.selectedOptions,m=t.settings,b=t.shouldShowQuantity,v=(0,a.iv)("display:",b?"flex":"block",";align-items:flex-start;flex-wrap:wrap;.wps-quantity-container{margin-right:10px;margin-bottom:10px;}",(0,_.mq)("medium"),"{flex-direction:column;.wps-quantity-container{margin-bottom:10px;}};label:AddButtonWrapperCSS;");return(0,a.tZ)("div",{className:"wps-component wps-component-products-add-button wps-btn-wrapper","aria-label":"Product Add Button"},(0,a.tZ)("div",{css:v},b?(0,a.tZ)(B,{minQuantity:m.minQuantity,maxQuantity:m.maxQuantity?m.maxQuantity:!!n.totalInventory&&n.totalInventory,quantityStep:m.quantityStep,payload:n}):null,(0,a.tZ)(Q,{hasLink:e,payload:n,linkTarget:o,linkTo:i,linkWithBuyButton:r,isDirectCheckout:c},(0,a.tZ)(W,{hasLink:e,linkWithBuyButton:r,addToCartButtonColor:s,addToCartButtonTextColor:l,loader:(0,a.tZ)(N.default,null),isDirectCheckout:c,hasManyVariants:p,productDispatch:u,buttonText:d,addedToCart:y,quantity:S,selectedOptions:f,payload:n,settings:m,linkTo:i}))),shopwp.misc.isPro&&m.showInventoryLevels&&n.availableForSale&&n.totalInventory?(0,a.tZ)(V,{settings:m}):null)},H=n("5Ulf");function K(t,e){switch(e.type){case"SET_SELECTED_OPTION":return(0,T.kK)("selectedOption",e,t);case"SET_IS_OPTION_SELECTED":return(0,T.kK)("isOptionSelected",e,t);case"TOGGLE_DROPDOWN":return(0,T.kK)("isDropdownOpen",e,t);default:throw new Error("Unhandled action type: ".concat(e.type," in ProductOptionReducer"))}}var X=n("WQbw");function J(t){var e=wp.element.useReducer(K,function(t){return{isOptionSelected:!1,option:!!t.option&&t.option,dropdownElement:!!t.dropdownElement&&t.dropdownElement,selectedOption:{},isDropdownOpen:!1,variants:!!t.variants&&t.variants,totalOptions:!!t.totalOptions&&t.totalOptions,settings:!!t.settings&&t.settings}}(t.options)),n=(0,w.Z)(e,2),a=n[0],o=n[1],i=wp.element.useMemo((function(){return[a,o]}),[a]);return React.createElement(X.m.Provider,(0,H.Z)({value:i},t))}var Y=wp.element,$=Y.useContext,tt=Y.useEffect,et=function(t){var e=t.children,n=(0,i.C)(),a=(0,i.V)(),r=$(X.m),s=(0,w.Z)(r,2)[1],l=(0,h.C)(),c=(0,h.r)(),p=(0,o.sc)();return tt((function(){if(n.selectFirstVariant){if(!n.payload.variants.edges.length)return void console.warn("ShopWP warning: Unable to select first variant because no variants exist.");var t=n.payload.variants.edges[0].node;if(!n.payload.availableForSale||!t.availableForSale||!t.selectedOptions)return void console.warn("ShopWP warning: Unable to select first variant because product is not available for sale.");var e=function(t){var e={};return t.forEach((function(t){return e[t.name]=t.value})),e}(t.selectedOptions);c({type:"UPDATE_SELECTED_OPTIONS",payload:e}),s({type:"SET_SELECTED_OPTION",payload:e}),s({type:"SET_IS_OPTION_SELECTED",payload:!0})}else if(n.preSelectVariant){var o=(0,T.oQ)(n.preSelectVariant,n.payload);if(o){var i=(0,T.ot)(o.node.selectedOptions);a({type:"SET_SELECTED_VARIANT",payload:o}),i.forEach((function(t){c({type:"UPDATE_SELECTED_OPTIONS",payload:t}),s({type:"SET_SELECTED_OPTION",payload:t}),s({type:"SET_IS_OPTION_SELECTED",payload:!0})})),wp.hooks.doAction("on.beforeAddToCart",n)}}}),[]),tt((function(){p||g()(l.selectedOptions)&&(s({type:"SET_IS_OPTION_SELECTED",payload:!1}),s({type:"SET_SELECTED_OPTION",payload:{}}))}),[l.selectedOptions,s]),e},nt=n("kD43"),at=n("ZnvT");function ot(t){var e=t.defaultStyles,n=t.onSelection,o=t.isSelected,i=t.isAvailableToSelect,r=t.isAvailableInShopify,s=t.variantValue,l=t.variantObject,c=t.optionName;return(0,a.tZ)("button",{css:e,type:"button",onMouseDown:n,"data-is-variant-selected":o,"data-is-available":i,"data-is-available-in-shopify":r,"data-option-name":c,"data-variant-name":s},wp.hooks.applyFilters("product.variantValue",s),l&&(0,a.tZ)(rt,{variantObject:l}))}var it={name:"pvjize-variantObjectCSS",styles:"&&{font-size:15px;margin-top:5px;margin-bottom:0;display:inline;margin-left:10px;};label:variantObjectCSS;"};function rt(t){var e=t.variantObject,n=it;return(0,a.tZ)("p",{css:n,className:"wps-variant-button-price"},(0,a.tZ)(at.Z,{price:e[0].node.priceV2.amount}))}var st=function(t){var e=t.optionObj,n=t.onSelection,o=t.selectedOptions,i=t.isAvailableToSelect,r=t.variants,s=t.totalOptions,l=t.settings,c=t.isAvailableInShopify,p=(0,T.OH)(o,e),u=p?"#415aff":"#606060",d=p?"white":"black",y=p?"#415aff":"transparent",S=i?1:.4;if(l.showPriceUnderVariantButton&&1===s)var f=(0,T.$X)(e,r);else f=!1;var m=l.colorSwatchNames,b="margin: 0 10px 10px 0;\n    outline: none;\n    border: 1px solid ".concat(u,";\n    font-size: 16px;\n    padding: 10px;\n    border-radius: 5px;\n    opacity: ").concat(S,";\n    color: ").concat(d,";\n    background-color: ").concat(y,";\n    transition: all ease 0.2s;\n\ttext-decoration: ").concat(c?"none":"line-through",";\n\n    &:hover,\n    &:focus {\n      cursor: ").concat(i?p?"auto":"pointer":"not-allowed",";\n      background-color: ").concat(i?p?y:"#e9e9e9":y,";\n      text-decoration: ").concat(c?"none":"line-through",";\n    }"),v=(0,a.iv)(wp.hooks.applyFilters("product.variantStyles",function(t,e){var n=m.map((function(t){return String(t).toLowerCase()}));if(n&&!n.includes(String(t.name).toLowerCase()))return e;var a=wp.hooks.applyFilters("product.colorSwatchValue",t.value);if("white"===a||"White"===a)var o=p?"3px solid #333":"1px solid #333";else o=p?"1px solid "+a:"none";return"\n         margin: 0 10px 10px 0;\n         outline: none;\n         padding: 10px;\n         background-color: ".concat(a,";\n         text-indent: 150%;\n         white-space: nowrap;\n         overflow: hidden;\n         width: 40px;\n         height: 40px;\n         font-size: 0;\n         opacity: ").concat(i?1:.1,";\n         border-radius: 50%;\n         border: ").concat(o,";\n         box-shadow: ").concat(p?"inset 0 0 0px 4px white":"none",";\n         transition: all ease 0.15s;\n         line-height: 1;\n\n         &:hover {\n            transform: scale(1.2);\n            cursor: ").concat(p?"auto":"pointer",";\n            opacity: 1 !important;\n         }      \n      ")}(e,b),e,p,i),";;label:ProductVariantButtonValueButtonCSS;");return(0,a.tZ)(ot,{defaultStyles:v,onSelection:n,isSelected:p,isAvailableToSelect:i,isAvailableInShopify:c,variantValue:e.value,optionName:e.name,variantObject:f})},lt=function(t){var e=t.option,n=t.selectedOptions,a=t.availableVariants,o=t.variants,i=t.totalOptions,r=t.settings,s=t.allSelectableOptions;return e.values.map((function(t){return React.createElement(nt.Z,{selectedOptions:n,availableVariants:a,optionObj:t,key:t.name+t.value,variants:o,totalOptions:i,settings:r,allSelectableOptions:s},React.createElement(st,null))}))},ct={name:"kqaj3j-selectStyles",styles:"margin-top:6px;color:red;label:selectStyles;"},pt=function(t){var e=t.productOptionState,n=ct;return(0,a.tZ)("p",{css:n},wp.hooks.applyFilters("product.missingSelectionText",wp.i18n.__("Please select a ","shopwp")+String(e.option.name).toLowerCase(),e))},ut={name:"1rx0q05-groupStyles",styles:"display:flex;flex-direction:column;margin-bottom:1em;label:groupStyles;"},dt={name:"18jk3bw-labelStyles",styles:"margin-bottom:5px;font-weight:bold;font-size:15px;label:labelStyles;"},yt=function(t){var e=t.option,n=t.missingSelections,o=t.selectedOptions,i=t.availableVariants,r=t.settings,s=t.allSelectableOptions,l=wp.element,c=l.useRef,p=(0,l.useContext)(X.m),u=(0,w.Z)(p,1)[0],d=c(),y=dt,S=ut;return(0,a.tZ)("div",{className:"wpshopify-variant-buttons-group",css:S},(0,a.tZ)("label",{css:y},wp.hooks.applyFilters("product.optionName",e.name,u)),(0,a.tZ)("div",{className:"wpshopify-variant-buttons",ref:d},(0,a.tZ)(lt,{option:e,availableVariants:i,selectedOptions:o,variants:u.variants,totalOptions:u.totalOptions,settings:r,allSelectableOptions:s})),n&&!u.isOptionSelected&&(0,a.tZ)(pt,{productOptionState:u}))},St=function(t){var e=t.option,n=t.missingSelections,a=t.availableVariants,o=t.selectedOptions,i=t.variants,r=t.totalOptions,s=t.settings,l=t.allSelectableOptions;return e?React.createElement(J,{options:{option:e,variants:i,totalOptions:r,settings:s}},React.createElement(et,null,React.createElement(yt,{option:e,missingSelections:n,availableVariants:a,selectedOptions:o,settings:s,allSelectableOptions:l}))):""},ft=function(t){var e=t.options,n=t.missingSelections,o=t.selectedOptions,i=t.availableVariants,r=t.variants,s=t.settings,l=t.allSelectableOptions;return e?(0,a.tZ)("div",{className:"wpshopify-products-variant-buttons"},e.map((function(t){return t&&(0,a.tZ)(St,{key:t.name,option:t,missingSelections:n,selectedOptions:o,availableVariants:i,variants:r,totalOptions:e.length,settings:s,allSelectableOptions:l})}))):null},mt=wp.element.lazy((function(){return Promise.all([n.e("vendors-npm-packages_shopwp-components_node_modules_tippy_js_dist_tippy_css-npm-packages_shop-b6ab03"),n.e("ProductOptionDropdown-public")]).then(n.bind(n,"2uii"))})),bt=wp.element.memo((function(t){var e=t.option,n=t.availableVariants,a=t.selectedOptions,o=t.missingSelections,i=t.variants,r=t.settings,s=t.totalOptions,l=t.allSelectableOptions,c=(0,wp.element.useRef)();return React.createElement(J,{options:{option:e,variants:i,dropdownElement:c,settings:r,totalOptions:s}},React.createElement(et,null,React.createElement(mt,{availableVariants:n,selectedOptions:a,missingSelections:o,settings:r,allSelectableOptions:l})))})),vt=function(t){var e=t.options,n=t.availableVariants,a=t.selectedOptions,o=t.missingSelections,i=t.variants,r=t.settings,s=t.allSelectableOptions;return React.createElement("div",{className:"wps-component wps-component-products-options","aria-label":"Product Options"},e&&e.map((function(t){return React.createElement(bt,{key:t.name,option:t,availableVariants:n,selectedOptions:a,missingSelections:o,variants:i,settings:r,totalOptions:e.length,allSelectableOptions:s})})))},Tt=function(t){var e=t.settings,n=(0,i.V)(),o=(0,h.r)(),r=(0,a.iv)("position:absolute;right:0;font-size:14px;text-decoration:underline;top:","dropdown"===e.variantStyle?"-50px":"-25px",";padding:5px 0;animation:",_.Ji," 0.2s ease;animation-timing-function:cubic-bezier(0.445, 0.05, 0.55, 0.95);&:hover{cursor:pointer;};label:ClearSelectionsCSS;");return(0,a.tZ)("p",{css:[r,_.Ji,";label:ClearSelections;"],onClick:function(){n({type:"SET_MISSING_SELECTIONS",payload:!1}),n({type:"SET_SELECTED_VARIANT",payload:!1}),n({type:"SET_SELECTED_SUBSCRIPTION_INFO",payload:!1}),n({type:"SET_NOTICE",payload:!1}),o({type:"UPDATE_SELECTED_OPTIONS",payload:!1})}},e.clearSelectionsText)},Ot={name:"5ow4qb-ProductOptionsCSS",styles:"position:relative;label:ProductOptionsCSS;"},gt=function(t){var e=t.variantStyle,n=t.availableOptions,o=t.missingSelections,i=t.selectedOptions,r=t.availableVariants,s=t.variants,l=t.settings,c=t.allSelectableOptions,p=t.hasSelections,u=t.isDirectCheckoutOut,d=Ot;return(0,a.tZ)("div",{className:"wps-product-options",css:d,"aria-label":"Product variant ".concat(e||"dropdown")},p&&!u&&(0,a.tZ)(Tt,{settings:l}),"dropdown"===e?(0,a.tZ)(vt,{options:n,missingSelections:o,availableVariants:r,selectedOptions:i,variants:s,settings:l,allSelectableOptions:c}):"buttons"===e&&shopwp.misc.isPro?(0,a.tZ)(ft,{options:n,missingSelections:o,availableVariants:r,selectedOptions:i,variants:s,settings:l,allSelectableOptions:c}):(0,a.tZ)(vt,{options:n,missingSelections:o,availableVariants:r,selectedOptions:i,variants:s,settings:l,allSelectableOptions:c}))},ht=function(t,e){switch(e.type){case"SET_SELLING_PLANS":return(0,T.kK)("sellingPlans",e,t);case"SET_IS_LOADING_SELLING_GROUPS":return(0,T.kK)("isLoadingSellingGroups",e,t);case"SET_SELECTED_SUBSCRIPTION":return(0,T.kK)("selectedSubscription",e,t);case"SET_NOTICE":return(0,T.kK)("notice",e,t);default:throw new Error("Unhandled action type: ".concat(e.type," in SubscriptionsBuyButtonReducer"))}};function Et(t){return t.payload.requiresSellingPlan?[{id:t.payload.id+"subscription"}]:[{id:t.payload.id+"onetime"},{id:t.payload.id+"subscription"}]}var Ct=n("MSCe"),wt=function(t){var e=wp.element.useReducer(ht,function(t){return{payload:t.payload,sellingGroups:Et(t),sellingPlans:!1,isLoadingSellingGroups:!!t.payload.requiresSellingPlan,selectedSubscription:t.payload.requiresSellingPlan||t.settings.subscriptionsSelectOnLoad?t.payload.id+"subscription":t.payload.id+"onetime",prices:(0,T.vD)(t.payload,"asc"),error:!1,settings:t.settings}}(t)),n=(0,w.Z)(e,2),a=n[0],o=n[1];return React.createElement(Ct.m.Provider,{value:a},React.createElement(Ct.Z.Provider,{value:o},t.children))},kt=wp.element.lazy((function(){return n.e("SubscriptionDetails-public").then(n.bind(n,"OkWJ"))})),xt=wp.element.lazy((function(){return n.e("SellingGroups-public").then(n.bind(n,"bXem"))})),_t={name:"bvgcu4-SubscriptionBuyButtonCSS",styles:"margin:0px 0 25px 0;display:flex;flex-direction:column;label:SubscriptionBuyButtonCSS;"},Pt=function(){var t=wp.element.Suspense,e=_t;return(0,a.tZ)(t,{fallback:!1},(0,a.tZ)("div",{css:e},(0,a.tZ)(xt,null),(0,a.tZ)(kt,null)))},Bt=function(t){return React.createElement(wt,t,React.createElement(Pt,null))},Dt=function(t){var e=t.settings,n=t.payload,a=t.productState,o=t.productDispatch,i=(0,h.C)(),s=(0,h.r)(),c=wp.element,u=c.useEffect,d=c.Suspense,y=(e.directCheckout||shopwp.general.directCheckout)&&shopwp.misc.isPro;function f(){return!("none"===e.linkTo||e.isSingular&&e.postId||y||"shopify"!==e.linkTo&&"wordpress"!==e.linkTo&&"modal"!==e.linkTo||e.linkWithBuyButton)}var v=(0,r.L2)(e,y,e.linkWithBuyButton),O=[];n.variants.edges.forEach((function(t){O.push({availableForSale:t.node.availableForSale,id:t.node.id,selectedOptions:t.node.selectedOptions})}));var E=function(t,e){if(!t.edges.length)return!1;if(e)var n=t.edges;else n=function(t){return S()(t,(function(t){return t.node.availableForSale}))}(t.edges);var a,o=function(t){return l()(m()(t,(function(t){return t.node.selectedOptions.id=t.node.id,t.node.selectedOptions.map((function(t){return{name:t.name,value:t.value}}))})),"name")}(n);return a=o,p()(a,(function(t,e){return{name:e,values:b(t)}}))}(n.variants,e.showOutOfStockVariants);return u((function(){var t=(0,T.oJ)(n,i.selectedOptions);t?(o({type:"SET_SELECTED_VARIANT",payload:t}),wp.hooks.doAction("on.beforeAddToCart",a),t.node.availableForSale?s({type:"SET_NOTICE",payload:!1}):s({type:"SET_NOTICE",payload:{type:"warning",message:e.outOfStockNoticeText}})):(o({type:"SET_SELECTED_VARIANT",payload:!1}),(0,T.tW)(i.selectedOptions,n)?s({type:"SET_NOTICE",payload:{type:"warning",message:e.variantNotAvailableText}}):s({type:"SET_NOTICE",payload:!1}))}),[i.selectedOptions,o,n]),React.createElement(d,{fallback:"Loading buy button ..."},a.hasManyVariants&&!f()&&React.createElement(gt,{allSelectableOptions:O,missingSelections:a.missingSelections,variantStyle:e.variantStyle,selectedOptions:i.selectedOptions,hasSelections:!g()(i.selectedOptions),availableOptions:E,variants:n.variants,productDispatch:o,settings:e,isDirectCheckoutOut:a.isDirectCheckingOut}),function(){if(n.sellingPlanGroups.edges.length)var t=!0;else t=!1;return shopwp.misc.isPro&&shopwp.misc.hasRecharge&&e.subscriptions&&"none"===e.linkTo&&t}()&&React.createElement(Bt,{payload:n,settings:e}),React.createElement(M,{shouldShowQuantity:!1===e.hideQuantity&&!f(),settings:e,addedToCart:a.addedToCart,hasLink:a.hasLink,payload:n,linkTarget:e.linkTarget,linkTo:e.linkTo,linkWithBuyButton:e.linkWithBuyButton,addToCartButtonColor:e.addToCartButtonColor,addToCartButtonTextColor:e.addToCartButtonTextColor,isDirectCheckout:y,hasManyVariants:a.hasManyVariants,productDispatch:o,buttonText:v,quantity:a.quantity,selectedOptions:i.selectedOptions}))},It=n("8fid"),Nt=n("UtQO"),Zt=n.n(Nt);function Lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function At(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(n),!0).forEach((function(e){(0,It.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vt=function(t,e){switch(e.type){case"SET_SUBSCRIPTION":return(0,T.kK)("subscription",e,t);case"SET_SUBSCRIPTIONS":return(0,T.kK)("subscriptions",e,t);case"SET_NOTICE":return(0,T.kK)("notice",e,t);case"UPDATE_SELECTED_OPTIONS":return!1===t.selectedOptions||!1===e.payload?At(At({},t),{},{selectedOptions:Zt()(t.selectedOptions,{$set:e.payload})}):At(At({},t),{},{selectedOptions:Zt()(t.selectedOptions,{$merge:e.payload})});default:throw new Error("Unhandled action type: ".concat(e.type," in ProductBuyButtonReducer"))}},Rt=n("rDd/"),jt=function(t){var e=wp.element.useReducer(Vt,function(t){return{subscription:!1,subscriptions:!1,attributes:!1,selectedOptions:!1,settings:t.settings,payload:t.payload}}(t)),n=(0,w.Z)(e,2),a=n[0],o=n[1];return React.createElement(Rt.F.Provider,{value:a},React.createElement(Rt.z.Provider,{value:o},t.children))},Ft=n("Qu7M"),Ut=wp.element.lazy((function(){return Promise.resolve().then(n.bind(n,"Pb72"))})),qt={name:"1u6ks4d-unavailableNoticeCSS",styles:"margin-top:15px;label:unavailableNoticeCSS;"},Qt=function(){var t=(0,i.C)(),e=(0,i.V)(),n=(0,Ft.Q)(),r=(0,a.iv)("display:flex;flex-direction:column;margin-bottom:",n.settings.isSingleComponent?"0px":"15px",";;label:buyButtonWrapperCSS;"),s=qt;return(0,o.vI)((0,a.tZ)(jt,{settings:n.settings,payload:t.payload},(0,a.tZ)("div",{css:r,className:"wps-component-products-buy-button","aria-label":"Product Buy Button"},(0,a.tZ)(T.ce,{name:"before.productBuyButton",args:[t]}),t.payload.availableForSale?(0,a.tZ)(Dt,{payload:t.payload,productState:t,productDispatch:e,settings:n.settings}):(0,a.tZ)(T.ce,{name:"product.unavailableHtml",args:[t]},(0,a.tZ)(Ut,{status:"warning",extraCSS:s},n.settings.noticeUnavailableText)),(0,a.tZ)(T.ce,{name:"after.productBuyButton",args:[t]}))),(0,T.tu)(n.settings.dropzoneProductBuyButton))}},WQbw:function(t,e,n){n.d(e,{m:function(){return a}});var a=wp.element.createContext()},kD43:function(t,e,n){var a=n("2MD/"),o=n("8fid"),i=n("WQbw"),r=n("dGr1"),s=n("fFxg"),l=n("oT6z"),c=n.n(l);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.Z=function(t){var e=t.optionObj,n=t.selectedOptions,o=t.variants,l=void 0!==o&&o,p=t.totalOptions,d=void 0!==p&&p,y=t.settings,S=t.children,f=t.allSelectableOptions,m=(0,wp.element.useContext)(i.m),b=(0,a.Z)(m,2),v=b[0],T=b[1],O=(0,r.$B)(e.name,e.value),g=(0,s.r)(),h=function(t,e){var n=function(t,e){return t.filter((function(t){return!!c()(t.selectedOptions,e)&&t}))}(t,e);return!!n.filter((function(t){return t.availableForSale})).length}(f,e),E=function(t,e,n,a,o){if(e.settings.showOutOfStockVariants)return!0;if(e.isOptionSelected)return!!o;var i=u(u({},n),t);return!!(0,r.Zj)(i,a).length}(n,v,O,l,h);return wp.element.cloneElement(S,{onSelection:function(){g({type:"UPDATE_SELECTED_OPTIONS",payload:O}),T({type:"SET_SELECTED_OPTION",payload:O}),T({type:"TOGGLE_DROPDOWN",payload:!1}),T({type:"SET_IS_OPTION_SELECTED",payload:!0}),wp.hooks.doAction("on.variantsSelection",O,v)},optionObj:e,isAvailableToSelect:E,selectedOptions:n,variants:l,totalOptions:d,settings:y,isAvailableInShopify:h})}},MSCe:function(t,e,n){n.d(e,{Z:function(){return o},m:function(){return a}});var a=wp.element.createContext(),o=wp.element.createContext()}}]);