($=>{"use strict";function t(e){$(".themify_sl_multi_num").append('<tr class="themify_sl_multi_row"><td><input type="text" style="display:inline;width:100%;" class="themify_sl_number_lable" value="'+e.lable+'"></td><td><textarea type="text" style="display:inline;width:100%;" class="themify_sl_number">'+e.number+'</textarea></td><td><input type="text" style="display:inline;width:100%;" class="themify_sl_link" value="'+e.link+'"></td><td><span class="ti-close tsl_row_remover" style="vertical-align:middle;cursor:pointer" width="16px" height="16px"></span></td></tr>'),$(".tsl_row_remover").on("click",function(e){$(this).closest(".themify_sl_multi_row").remove(),e.preventDefault()})}function l(e){$(".themify_sl_multi_time").append('<tr class="themify_sl_multi_row"><td><input type="text" style="display:inline;width:100%;" class="themify_sl_time_day" value="'+e.lable+'"></td><td><input type="text" class="themify_sl_time_open" style="display:inline;width:100%;" value="'+e.open+'"/></td><td><input type="text" style="display:inline;width:100%;" class="themify_sl_time_close" value="'+e.close+'"></td><td><span class="ti-close tsl_row_remover" style="vertical-align:middle;cursor:pointer" width="16px" height="16px"></span></td></tr>'),$(".tsl_row_remover").on("click",function(e){$(this).closest(".themify_sl_multi_row").remove(),e.preventDefault()})}var s=$("#themify_storelocator_address");if(s.length){for(var n=$("#themify_storelocator_numbers"),o=$("#themify_storelocator_timing"),i=(n.hide(),o.hide(),""==s.val()&&s.val("{}"),""==n.val()&&n.val("[]"),""==o.val()&&o.val("[]"),$("#themify_sl_add_num").on("click",function(e){t({lable:"",number:"",link:""}),e.preventDefault()}),$("#themify_sl_add_time").on("click",function(e){l({lable:"",open:"",close:""}),e.preventDefault()}),$("#post").on("submit",function(e){var t,l=$(".themify_sl_multi_num").find(".themify_sl_multi_row"),i=$(".themify_sl_multi_time").find(".themify_sl_multi_row"),a=[];l.each(function(){""==(t={lable:$(this).find(".themify_sl_number_lable").val(),number:$(this).find(".themify_sl_number").val(),link:$(this).find(".themify_sl_link").val()}).lable&&""==t.number||a.push(t),$(this).remove()}),n.val(JSON.stringify(a)),a=[],i.each(function(){""==(t={lable:$(this).find(".themify_sl_time_day").val(),open:$(this).find(".themify_sl_time_open").val(),close:$(this).find(".themify_sl_time_close").val()}).lable&&""==t.open&&""==t.close||a.push(t),$(this).remove()}),o.val(JSON.stringify(a)),a={address:s.val()},themify_SL_map_marker.post_marker&&(a.position=themify_SL_map_marker.latlng_from_marker(themify_SL_map_marker.post_marker.marker)),s.val(JSON.stringify(a))}),JSON.parse(n.val())),a=0;a<i.length;a++){let e=i[a].link||"";t({lable:i[a].lable,number:i[a].number,link:e})}for(i=JSON.parse(o.val()),a=0;a<i.length;a++)l({lable:i[a].lable,open:i[a].open,close:i[a].close});"[]"==n.val()&&t({lable:"",number:"",link:""}),"[]"==o.val()&&l({lable:"",open:"",close:""}),$("#themify_storelocator_address").css({visibility:"hidden"}),"object"!=typeof google||"object"!=typeof google.maps?$.getScript("//maps.googleapis.com/maps/api/js?key="+ThemifyStoreLocator.map_key,function(){e()}):e()}function e(){var e,l=$("#themify_storelocator_address");if(l.length){l.css({visibility:"visible"});let t;try{t=JSON.parse(l.val())}catch(e){t={address:""}}l.val(t.address),t="object"==typeof t.position?(e={position:t.position,title:"Store Location"},{lat:t.position.lat,lng:t.position.lng}):{lat:35.8799875,lng:76.5151001},themify_SL_map_marker.init({map_container:$(".themify_storelocator_map").get(0),settings:{map_load:{center:{lat:t.lat,lng:t.lng},zoom:8,mapTypeId:"roadmap"},map_width:"50%",map_height:"200px"},markers:[],suggestion:!1}),"object"==typeof e&&(themify_SL_map_marker.post_marker=themify_SL_map_marker.add_marker(e)),l.on("blur",function(){l=$(this).val(),themify_SL_map_marker.admin_post_marker(l)})}}})(jQuery,window,document);