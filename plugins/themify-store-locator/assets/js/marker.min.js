var themify_SL_map_marker;!function(){"use strict";themify_SL_map_marker={init:function(t){this.map_box=t.map_container,this.wait_msg=t.wait_msg||!1,this.settings=t.settings,this.markers=t.markers,this.marked=new Array,this.previous_window=!1,this.post_marker=!1,this.suggestion=null!=t.suggestion&&t.suggestion,this.suggestion_box=null!=t.suggestion_box?t.suggestion_box:"","object"!=typeof google&&"object"!=typeof google.maps?this.map_box.innerHTML="Google Map API is not loaded":(this.load_map(),null!=this.markers&&0<this.markers.length&&this.marker_cluster())},load_map:function(){this.settings.map_width&&(this.map_box.style.width=this.settings.map_width),this.settings.map_height&&(this.map_box.style.height=this.settings.map_height),this.map=new google.maps.Map(this.map_box,this.settings.map_load),this.bounds=new google.maps.LatLngBounds,this.wait_msg&&this.wait_msg.remove()},change_map_center:function(t,e){this.map.setCenter(t),e&&(this.map.fitBounds(this.bounds),this.change_map_zoom(this.map.getZoom()))},change_map_zoom:function(t){this.map.setZoom(15<t?15:t)},add_marker:function(o){if("string"!=typeof o.position){let t=!1,e=new google.maps.Marker({position:o.position,animation:google.maps.Animation.DROP,title:""});0!=o.content&&null!=o.content&&""!=o.content?(t=this.create_info_window(o.content),e.addListener("click",function(){themify_SL_map_marker.previous_window&&themify_SL_map_marker.previous_window.close(),t.open(themify_SL_map_marker.map,this),themify_SL_map_marker.previous_window=t})):e.addListener("click",function(){themify_SL_map_marker.previous_window&&themify_SL_map_marker.previous_window.close()}),e.setMap(this.map),this.bounds.extend(e.getPosition());const i={marker:e,infobox:t};return this.marked.push(i),i}},marker_cluster:function(){for(let t=0,e=this.markers.length;t<e;++t)this.marked.push(this.add_marker(this.markers[t]));setTimeout(function(){themify_SL_map_marker.change_map_center(themify_SL_map_marker.bounds.getCenter(),!0)},1e3)},admin_post_marker:function(t){this.latlng_from_address(t,function(t){"object"==typeof t&&(themify_SL_map_marker.post_marker&&themify_SL_map_marker.post_marker.marker.setMap(null),themify_SL_map_marker.post_marker=themify_SL_map_marker.add_marker({position:t,title:"Store Location"}),themify_SL_map_marker.change_map_center(t,!1))})},create_info_window:function(t){return new google.maps.InfoWindow({content:t,maxWidth:400})},latlng_from_address:function(t,o){let e=new google.maps.Geocoder,i;e.geocode({address:t},function(t,e){i=e==google.maps.GeocoderStatus.OK?t[0].geometry.location:e,"function"==typeof o?o(i):e==google.maps.GeocoderStatus.ZERO_RESULTS?alert("Please enter a valid address"):e==google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&alert('Your Google Map API key reached the query limit for "Google Map Geocoder"')})},latlng_from_marker:function(t){return{lat:t.position.lat(),lng:t.position.lng()}}}}();