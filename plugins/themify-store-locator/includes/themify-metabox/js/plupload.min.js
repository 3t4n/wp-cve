function themify_create_pluploader(e){"use strict";var d=e,n=d.attr("id").replace("plupload-upload-ui",""),m=!1,c=!1,u=jQuery,e=JSON.parse(JSON.stringify(global_plupload_init));e.browse_button=n+e.browse_button,e.container=n+e.container,e.drop_element=n+e.drop_element,e.file_data_name=n+e.file_data_name,e.multipart_params.imgid=n,e.multipart_params._ajax_nonce=d.find(".ajaxnonceplu").attr("id").replace("ajaxnonceplu",""),d.hasClass("add-preset")&&(m=!0,e.multipart_params.haspreset="haspreset"),d.hasClass("add-preview")&&(c=!0,e.multipart_params.haspreview="haspreview"),d.hasClass("add-to-media")&&(e.multipart_params.tomedia="tomedia"),d.data("postid")&&(e.multipart_params.topost=d.data("postid")),d.data("fields")&&(e.multipart_params.fields=d.data("fields")),d.data("featured")&&(e.multipart_params.featured=d.data("featured")),d.data("formats")&&(e.filters[0].extensions=d.data("formats")),e.multipart_params.action=d.data("action");const a=new plupload.Uploader(e);a.bind("Init",function(e){}),a.init(),d.data("init",1),a.bind("FilesAdded",function(e,a){if(d.data("confirm")&&!confirm(d.data("confirm")))return;e.refresh(),e.start(),u(".tb_alert").addClass("busy").fadeIn(800)}),a.bind("Error",function(e,a){var t,r;u(".prompt-box .show-login").hide(),u(".prompt-box .show-error").show(),-600==a.code&&(t=themify_plupload_lang.filesize_error,r=themify_plupload_lang.filesize_error_fix),0<u(".prompt-box .show-error").length&&(u(".prompt-box .show-error").html('<p class="prompt-error">'+t+"</p>"),r)&&u(".prompt-box .show-error").append("<p>"+r+"</p>"),u(".overlay, .prompt-box").fadeIn(500);const o=document.getElementsByClassName("overlay");o[0]&&o[0].addEventListener("click",function(){u(".overlay, .prompt-box").fadeOut(500)},{once:!0})}),a.bind("FileUploaded",function(e,a,t){var r=JSON.parse(t.response),o="",o="200"!=t.status||r.error?"error":"done";if(u(".tb_alert").removeClass("busy").addClass(o).delay(800).fadeOut(800,function(){u(this).removeClass(o)}),r.error){u(".prompt-box .show-login").hide(),u(".prompt-box .show-error").show(),0<u(".prompt-box .show-error").length&&(u(".prompt-box .show-error").html('<p class="prompt-error">'+r.error+"</p>"),u(".prompt-box .show-error").append("<p>"+themify_plupload_lang.enable_zip_upload+"</p>")),u(".overlay, .prompt-box").fadeIn(500);const i=document.getElementsByClassName("overlay");void(i[0]&&i[0].addEventListener("click",function(){u(".overlay, .prompt-box").fadeOut(500)},{once:!0,passive:!0}))}else{u("#"+a.id).fadeOut();var t=r.file,a=r.url,s=r.type;if("zip"===s||"rar"===s||"plain"===s?window.location=location.href.replace(location.hash,""):u("#"+n).val(a),void 0!==r.thumb&&(themifyMediaLib.setPreviewIcon(d.closest(".themify_field, .themify_field_row"),r.thumb),u("body").trigger("themify_plupload_selected",[d,r])),m){u("#"+n).closest("fieldset").children(".preset").find("img").removeClass("selected");const p=a.replace(/^.*[\\\/]/,""),l=u('<a href="#" title="'+p+'"><span title="'+t+'"></span><img src="'+a+'" alt="'+a+'" class="backgroundThumb selected" /></a>').css("display","inline-block");u("#"+n).closest("fieldset").children(".preset").append(l)}c&&u("#"+n+"-preview").attr("src",a)}})}!function($){"use strict";const e=function(){const e=$(".plupload-upload-uic");0<e.length&&e.each(function(){themify_create_pluploader($(this))})};"complete"===document.readyState?e():window.addEventListener("load",e,{once:!0,passive:!0})}(jQuery);