(function($){$('.requirements-list').on('change','.select-trigger-type',function(){var trigger_type=$(this).val();var id_field=$(this).siblings('.input-button-id');var class_field=$(this).siblings('.input-button-class');id_field.hide();class_field.hide();if(trigger_type==='gamipress_specific_id_button_click'||trigger_type==='gamipress_user_specific_id_button_click'){id_field.show()}
if(trigger_type==='gamipress_specific_class_button_click'||trigger_type==='gamipress_user_specific_class_button_click'){class_field.show()}
gamipress_button_update_shortcode_preview($(this).closest('.requirement-row'))});$('.requirements-list li').each(function(){var trigger_type=$(this).find('.select-trigger-type').val();var id_field=$(this).find('.input-button-id');var class_field=$(this).find('.input-button-class');id_field.hide();class_field.hide();if(trigger_type==='gamipress_specific_id_button_click'||trigger_type==='gamipress_user_specific_id_button_click'){id_field.show()}
if(trigger_type==='gamipress_specific_class_button_click'||trigger_type==='gamipress_user_specific_class_button_click'){class_field.show()}
gamipress_button_update_shortcode_preview($(this))});$('.requirements-list').on('update_requirement_data','.requirement-row',function(e,requirement_details,requirement){if(requirement_details.trigger_type==='gamipress_specific_id_button_click'||requirement_details.trigger_type==='gamipress_user_specific_id_button_click'){requirement_details.button_id=requirement.find('.input-button-id').val()}
if(requirement_details.trigger_type==='gamipress_specific_class_button_click'||requirement_details.trigger_type==='gamipress_user_specific_class_button_click'){requirement_details.button_class=requirement.find('.input-button-class').val()}});$('.requirements-list').on('keyup change','.input-button-id, .input-button-class',function(e,requirement_details,requirement){gamipress_button_update_shortcode_preview($(this).closest('.requirement-row'))});function gamipress_button_update_shortcode_preview(row){var triggers=['gamipress_button_click','gamipress_specific_id_button_click','gamipress_specific_class_button_click','gamipress_user_button_click','gamipress_user_specific_id_button_click','gamipress_user_specific_class_button_click',];var trigger_type=row.find('.select-trigger-type').val();var id_field=row.find('.input-button-id');var class_field=row.find('.input-button-class');var preview=row.find('.gamipress-button-shortcode-preview');preview.hide();if(triggers.indexOf(trigger_type)!==-1){var shortcode='[gamipress_button label="Click here!"';if(trigger_type==='gamipress_specific_id_button_click'||trigger_type==='gamipress_user_specific_id_button_click'){shortcode+=' id="'+id_field.val()+'"'}
if(trigger_type==='gamipress_specific_class_button_click'||trigger_type==='gamipress_user_specific_class_button_click'){shortcode+=' class="'+class_field.val()+'"'}
shortcode+=']';preview.find('.gamipress-button-shortcode').val(shortcode);preview.show()}}})(jQuery)