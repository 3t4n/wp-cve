jQuery(document).ready(function(e){let t={counts:1};function a(t){let a=t.val(),d=t.parents(".wdr-conditions-container").attr("data-index");"greater_than_or_equal"==a||"greater_than"==a?e(".promo_show_hide_"+d).show():e(".promo_show_hide_"+d).hide()}function d(a,d,o=!1){e.ajax({data:{method:"rebuild_onsale_list",action:"wdr_ajax",rules:a,update:o?1:0,awdr_nonce:d.attr("data-awdr_nonce")},type:"post",url:ajaxurl,error:function(e,a){l(wdr_data.localization_data.error,"error",t),d.removeAttr("disabled")},success:function(e){d.html(wdr_data.localization_data.rebuild_on_sale_list_processed_text),d.removeAttr("disabled")}})}function o(t){void 0!==t.required_rebuild&&!0==t.required_rebuild&&(e("#awdr_rebuild_on_sale_list_on_rule_page").html(wdr_data.localization_data.rebuild_on_sale_list_build_text),e(".awdr_rebuild_on_sale_rule_page_con").addClass("need_attention"))}function i(t){t.selectWoo({width:"100%",minimumInputLength:1,placeholder:t.data("placeholder"),escapeMarkup:function(e){return e},language:{noResults:function(){return wdr_data.labels.select2_no_results},errorLoading:function(){return wdr_data.labels.searching_text}},ajax:{url:ajaxurl,type:"POST",dataType:"json",delay:250,data:function(a){return{query:a.term,action:"wdr_ajax",method:t.data("list")||"products",awdr_nonce:e("input[name=wdr_ajax_select2]").val()||"",taxonomy:t.data("taxonomy")||"",selected:t.val()}},processResults:function(e){return{results:e.data||[]}}}}),t.parent().find(".select2-search__field").css("width","100%")}function r(e){return 0===e?0:parseInt(e)+1}e(".wdr-btn-add-product-filter").click(function(){wdr_buildrule.show_hide_rule_block({showBlockId:".wdr-filter-block",hideBlockId:".wdr-discount-template, .wdr-advanced-layout-block",thisObject:this})}),e(".add-product-filter").click(function(){var t=e(".wdr-filter-group-items").children().last().attr("data-index");t=r(t),wdr_buildrule.wdr_clone_field({addFilterType:".wdr-build-filter-type",addFilterMethod:".products",addRemoveIcon:".wdr-icon-remove",ruleAppendTo:".wdr-filter-group-items",newIndex:t}),i(e('.wdr-filter-group[data-index="'+t+'"]').find('[data-field="autocomplete"]')),e(".wdr-filter-group[data-index="+t+"]").append("<div class='wdr_filter_desc_text'>"+wdr_data.localization_data.filter_products+"</div>")}),e(document).on("click",".remove-current-row",function(){e(".wdr-filter-group-items > div").length>=2&&wdr_buildrule.remove_wdr_field_group({parentsRow:".wdr-filter-group",thisObject:this})}),e(document).on("change",".wdr-product-filter-type",function(){let t=e(this).parents(".wdr-filter-group").data("index"),a=e(this).val();switch(wdr_buildrule.remove_wdr_field_group({parentRow:e(this).parent()}),wdr_buildrule.wdr_clone_field({addFilterMethod:"."+a,addRemoveIcon:".wdr-icon-remove",ruleAppendTo:e(this).parents(".wdr-filter-group"),newIndex:t}),a){case"products":e('.wdr-filter-group[data-index="'+t+'"]').append('<div class="wdr_filter_desc_text">'+wdr_data.localization_data.filter_products+"</div>");break;case"product_category":e('.wdr-filter-group[data-index="'+t+'"]').append('<div class="wdr_filter_desc_text">'+wdr_data.localization_data.filter_Category+"</div>");break;case"product_attributes":e('.wdr-filter-group[data-index="'+t+'"]').append('<div class="wdr_filter_desc_text">'+wdr_data.localization_data.filter_Attributes+"</div>");break;case"product_tags":e('.wdr-filter-group[data-index="'+t+'"]').append('<div class="wdr_filter_desc_text">'+wdr_data.localization_data.filter_Tags+"</div>");break;case"product_sku":e('.wdr-filter-group[data-index="'+t+'"]').append('<div class="wdr_filter_desc_text">'+wdr_data.localization_data.filter_SKUs+"</div>");break;case"product_on_sale":e('.wdr-filter-group[data-index="'+t+'"]').append('<div class="wdr_filter_desc_text">'+wdr_data.localization_data.filter_On_sale_products+"</div>");break;case"all_products":e('.wdr-filter-group[data-index="'+t+'"]').append('<div class="wdr_filter_desc_text">'+wdr_data.localization_data.filter_all_products+"</div>");break;default:e('.wdr-filter-group[data-index="'+t+'"]').append('<div class="wdr_filter_desc_text">'+wdr_data.localization_data.filter_custom_taxonomies+"</div>")}i(e(this).parents(".wdr-filter-group").find('[data-field="autocomplete"]'))}),e(".wdr-btn-add-condition").click(function(){wdr_buildrule.show_hide_rule_block({showBlockId:".wdr-condition-template",hideBlockId:".wdr-filter-block, .wdr-discount-template, .wdr-advanced-layout-block",thisObject:this})}),e(".add-product-condition").click(function(){var t=e(".wdr-condition-group-items").children().last().attr("data-index");t=r(t),wdr_buildrule.wdr_clone_field({addConditionType:".wdr-build-condition-type",addFilterMethod:".cart_subtotal",addRemoveIcon:".wdr-icon-remove",ruleAppendTo:".wdr-condition-group-items",newIndex:t}),"1"==wdr_data.enable_subtotal_promo_text&&wdr_buildrule.wdr_clone_field({addConditionType:"empty-promo",addFilterMethod:".wdr-subtotal-promo-messeage-main",addRemoveIcon:".wdr-icon-remove",ruleAppendTo:".wdr-condition-group-items",newIndex:t}),e(".subtotal_operator").trigger("change")}),e(document).on("change",".subtotal_operator",function(){"1"==wdr_data.enable_subtotal_promo_text&&a(e(this))}),e(document).on("change",".wdr_quantity_operator",function(){"1"==wdr_data.enable_cart_quantity_promo_text&&a(e(this))}),e(document).on("click",".remove-current-row",function(){if(e(".wdr-condition-group-items > div").length>=2&&(wdr_buildrule.remove_wdr_field_group({parentsRow:".wdr-conditions-container",thisObject:this}),"1"==wdr_data.enable_subtotal_promo_text||"1"==wdr_data.enable_cart_quantity_promo_text)){let t=e(this).parent(".wdr-btn-remove").siblings(".wdr-condition-type").find(".wdr-product-condition-type").val();if("cart_subtotal"==t){let a=e(this).parents(".wdr-conditions-container").attr("data-index");e(".promo_show_hide_"+a).remove()}if("cart_items_quantity"==t){let d=e(this).parents(".wdr-conditions-container").attr("data-index");e(".promo_show_hide_"+d).remove()}}}),e(document).on("change",".wdr-product-condition-type",function(){var t=e(this).parents(".wdr-condition-group").data("index"),a=e(this).val();wdr_buildrule.remove_wdr_field_group({parentRow:e(this).parent()}),wdr_buildrule.wdr_clone_field({addFilterMethod:"."+a,addRemoveIcon:".wdr-icon-remove",ruleAppendTo:e(this).parents(".wdr-conditions-container"),newIndex:t});var d=e(this).parents(".wdr-conditions-container").attr("data-index");"undefined"!=e(".promo_show_hide_"+d)[0]&&e(".promo_show_hide_"+d).remove(),"order_time"==a?e(".wdr_time_picker").datetimepicker({datepicker:!1,format:"H:i"}):"cart_subtotal"==a?("1"==wdr_data.enable_subtotal_promo_text&&wdr_buildrule.wdr_clone_field({addConditionType:"empty-promo",addFilterMethod:".wdr-subtotal-promo-messeage-main",addRemoveIcon:".wdr-icon-remove",ruleAppendTo:".wdr-condition-group-items",newIndex:t}),e(".subtotal_operator").trigger("change")):"cart_items_quantity"==a&&("1"==wdr_data.enable_cart_quantity_promo_text&&wdr_buildrule.wdr_clone_field({addConditionType:"empty-promo",addFilterMethod:".wdr-cart-quantity-promo-messeage-main",addRemoveIcon:".wdr-icon-remove",ruleAppendTo:".wdr-condition-group-items",newIndex:t}),e(".wdr_quantity_operator").trigger("change")),i(e(this).parents(".wdr-conditions-container").find('[data-field="autocomplete"]')),function t(a){a.each(function(t,a){var d=e(a),o=wdr_data.lists[d.data("list")];d.selectWoo({width:"100%",escapeMarkup:function(e){return e},minimumInputLength:1,placeholder:d.data("placeholder"),language:{noResults:function(){return wdr_data.labels.select2_no_results}},data:o}),d.parent().find(".select2-search__field").css("width","100%")})}(e(this).parents(".wdr-conditions-container").find('[data-field="preloaded"]')),function t(a){a.each(function(t,a){var d=e(a),o=wdr_data.lists[d.data("list")];d.selectWoo({width:"100%",escapeMarkup:function(e){return e},placeholder:d.data("placeholder"),language:{noResults:function(){return wdr_data.labels.select2_no_results}},data:o}),d.parent().find(".select2-search__field").css("width","100%")})}(e(this).parents(".wdr-conditions-container").find('[data-field="autoloaded"]')),function t(a){a.each(function(t,a){var d=e(a).data("class");"start_dateonly"==d?e('[data-class="'+d+'"]').datetimepicker({format:"Y-m-d",onShow:function(t){this.setOptions({maxDate:!!e('[data-class="end_dateonly"]').val()&&e('[data-class="end_dateonly"]').val()})},timepicker:!1}):"end_dateonly"==d?e('[data-class="'+d+'"]').datetimepicker({format:"Y-m-d",onShow:function(t){this.setOptions({minDate:!!e('[data-class="start_dateonly"]').val()&&e('[data-class="start_dateonly"]').val()})},timepicker:!1}):"start_datetimeonly"==d?e('[data-class="'+d+'"]').datetimepicker({timepicker:!0,format:"Y-m-d H:i",onShow:function(t){this.setOptions({maxDate:!!e('[data-class="end_datetimeonly"]').val()&&e('[data-class="end_datetimeonly"]').val()})}}):"end_datetimeonly"==d&&e('[data-class="'+d+'"]').datetimepicker({timepicker:!0,format:"Y-m-d H:i",onShow:function(t){this.setOptions({minDate:!!e('[data-class="start_datetimeonly"]').val()&&e('[data-class="start_datetimeonly"]').val()})}})})}(e(this).parents(".wdr-conditions-container").find('[data-field="date"]'))}),e(document).on("change",".wdr_copon_type",function(){var t=e(this).val();"at_least_one_any"===t?(e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-search").css("display","none"),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-value").css("display","none")):"none_at_all"===t?(e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-search").css("display","none"),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-value").css("display","none")):"custom_coupon"===t?(e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-search").css("display","none"),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-value").css("display","block")):(e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-value").css("display","none"),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-search").css("display","block"),i(e(this).parents(".wdr-conditions-container").find('[data-field="autocomplete"]')))}),e(".wdr-btn-add-discount").click(function(){wdr_buildrule.show_hide_rule_block({showBlockId:".wdr-discount-template",hideBlockId:".wdr-filter-block, .wdr-advanced-layout-block",thisObject:this})}),e(document).on("click",".add_discount_elements",function(){var t=e(this).data("append"),a=e(this).data("discount-method"),d=e(this).data("next-starting-value"),o=e("."+t).children().last().attr("data-index");if(o=r(o),wdr_buildrule.wdr_clone_field({addFilterMethod:"."+a,ruleAppendTo:"."+t,addDiscountElement:"enable",newIndex:o}),""!=d&&"undefined"!=d){e("."+t+" "+d+":last-child").find(".awdr_value_selector").val("");let s=e("."+t+" "+d+":nth-last-child(2)").find(".awdr_auto_add_value").val();""==(s=parseInt(s)+1)||isNaN(s)||e("."+t+" "+d+":nth-last-child(1)").find(".awdr_next_value").val(s)}"add_buyx_gety_range"==a?(e(".buyx_gety_individual_range[data-index="+o+"]").find(".awdr-buyx-gety-max").show(),e(".buyx_gety_individual_range[data-index="+o+"]").find(".awdr-bogo-recurcive").prop("checked",!1),e(".wdr-buyx-gety-discount-inner").css("border-bottom","1px solid #ddd")):"add_buyx_getx_range"==a&&(e(".buyx_getx_individual_range[data-index="+o+"]").find(".awdr-buyx-getx-max").show(),e(".buyx_getx_individual_range[data-index="+o+"]").find(".awdr-bogo-recurcive").prop("checked",!1),e(".buyx_getx_individual_range").css("border-bottom","1px solid #ddd")),i(e("."+t+" div:last-child").find('[data-field="autocomplete"]')),i(e("."+t+" div:last-child").find('[data-list="product_category"]'))}),e(document).on("click",".wdr_discount_remove",function(){e(this).closest(".wdr-discount-group").parent().find(".wdr-discount-group").length>1&&(wdr_buildrule.remove_wdr_field_group({parentsRow:".wdr-discount-group",thisObject:this}),wdr_buildrule.re_index_ranges())}),e(document).on("click",'[data-click="wdr-bottombar"]',function(){var t=e(this).data("dtype");e(this).hide(),e("."+t).show()}),e(document).on("click","#awdr_rebuild_on_sale_list",function(){var t=e("#awdr_rebuild_on_sale_rules").val();e(".awdr_rebuild_on_sale_list_notice").html(""),null!=t?(e("#awdr_rebuild_on_sale_list").attr("disabled","disabled"),e("#awdr_rebuild_on_sale_list").html(wdr_data.localization_data.rebuild_on_sale_list_processing_text),d(t,e(this),!0)):e(".awdr_rebuild_on_sale_list_notice").html(wdr_data.localization_data.rebuild_on_sale_list_error_please_select_rule)}),e(document).on("click","#awdr_rebuild_on_sale_list_on_rule_page",function(){e(this).attr("disabled","disabled"),e(this).html(wdr_data.localization_data.rebuild_on_sale_list_processing_text),d(null,e(this),!1)}),e(document).on("click","#awdr_do_v1_v2_migration",function(){e(".wdr_migration_process").append(wdr_data.localization_data.processing_migration_text),function a(d){e.ajax({data:{method:"do_v1_v2_migration",action:"wdr_ajax",awdr_nonce:d},type:"post",url:ajaxurl,error:function(e,a){l(wdr_data.localization_data.error,"error",t)},success:function(o){void 0!=o.data.status?("completed"==o.data.status?(l(wdr_data.localization_data.processing_migration_success_message,"success",t),location.reload()):a(d),e(".wdr_migration_process_status").html(o.data.display_text)):location.reload()}})}(e(this).attr("data-awdr_nonce"))}),e(document).on("click","#awdr_skip_v1_v2_migration",function(){e(".wdr_migration_process").append(wdr_data.localization_data.skip_migration_text),e.ajax({data:{method:"skip_v1_v2_migration",action:"wdr_ajax"},type:"post",url:ajaxurl,error:function(e,a){l(wdr_data.localization_data.error,"error",t)},success:function(a){"failed"===a?l(wdr_data.localization_data.error,"error",t):!0===a.data&&(e(".wdr_migration_process").append(wdr_data.localization_data.skip_migration_success_message),l(wdr_data.localization_data.skip_migration_success_message,"success",t)),location.reload()}})}),e(".awdr-switch-version-button").on("click",function(t){t.preventDefault();var a=e(this).attr("data-version"),d=e(this).attr("data-page"),o=e(this).attr("data-nonce");e.ajax({url:ajaxurl,type:"POST",data:{action:"awdr_switch_version",version:a,page:d,wdr_nonce:o},success:function(t){!0==t.data.status&&window.location.replace(t.data.url),e(".wdr_switch_message").html(t.data.message)}})}),e(document).on("click",".wdr_duplicate_rule",function(){let a=e(".woo_discount_loader");e.ajax({data:{rowid:e(this).data("duplicate-rule"),awdr_nonce:e(this).data("awdr_nonce"),method:"duplicate_rule",action:"wdr_ajax"},type:"post",url:ajaxurl,beforeSend:function(){a.show()},complete:function(){a.hide()},error:function(e,a){l(wdr_data.localization_data.error,"error",t)},success:function(e){"failed"===e?l(wdr_data.localization_data.error,"error",t):l(wdr_data.localization_data.duplicate_rule,"success",t),location.reload()}})}),e(document).on("click",".wdr_delete_rule",function(){var a=e(this).closest("tr");if(confirm(wdr_data.localization_data.delete_confirm)){let d=e(".woo_discount_loader");e.ajax({data:{rowid:e(this).data("delete-rule"),priority:e(this).data("priority"),awdr_nonce:e(this).data("awdr_nonce"),method:"delete_rule",action:"wdr_ajax"},type:"post",url:ajaxurl,beforeSend:function(){d.show()},complete:function(){d.hide()},error:function(e,a){l(wdr_data.localization_data.error,"error",t)},success:function(e){e?("failed"===e.status?l(wdr_data.localization_data.error,"error",t):(l(wdr_data.localization_data.deleted_rule,"success",t),a.hide(500,function(){a.remove()})),void 0!==e.build_index&&o(e.build_index)):l(wdr_data.localization_data.error,"error",t)}})}}),e(document).on("change",".wdr_manage_status",function(){let a="",d=e(this).closest("tr");a=!0==e(this).prop("checked")?1:0;let i=e(".woo_discount_loader");e.ajax({data:{rowid:e(this).data("manage-status"),awdr_nonce:e(this).data("awdr_nonce"),method:"manage_status",action:"wdr_ajax",changeto:a},type:"post",url:ajaxurl,beforeSend:function(){i.show()},complete:function(){i.hide()},error:function(e,a){l(wdr_data.localization_data.error,"error",t)},success:function(i){i?"failed"===i.status?l(wdr_data.localization_data.error,"error",t):(1==a?(e(d).find(".awdr-enabled-status").show(),l(wdr_data.localization_data.enabled_rule,"success",t)):(e(d).find(".awdr-enabled-status").hide(),l(wdr_data.localization_data.disabled_rule,"success",t)),void 0!==i.build_index&&o(i.build_index)):l(wdr_data.localization_data.error,"error",t)}})}),e(".edit-filters").selectWoo({width:"100%",minimumInputLength:1,placeholder:wdr_data.labels.placeholders,language:{noResults:function(){return wdr_data.labels.select2_no_results}},ajax:{url:ajaxurl,type:"POST",dataType:"json",delay:250,data:function(t){return{query:t.term,action:"wdr_ajax",method:e(this).data("list")||"products",awdr_nonce:e("input[name=wdr_ajax_select2]").val()||"",taxonomy:e(this).data("taxonomy")||"",selected:e(this).val()}},processResults:function(e){return{results:e.data||[]}}}}),e(".edit-filters").parent().find(".select2-search__field").css("width","100%"),e(".edit-preloaded-values").each(function(t,a){var d=e(a),o=wdr_data.lists[d.data("list")];d.selectWoo({width:"100%",escapeMarkup:function(e){return e},minimumInputLength:1,placeholder:d.data("placeholder"),language:{noResults:function(){return wdr_data.labels.select2_no_results}},data:o}),d.parent().find(".select2-search__field").css("width","100%")}),e(".edit-all-loaded-values").each(function(t,a){var d=e(a),o=wdr_data.lists[d.data("list")];d.selectWoo({width:"100%",escapeMarkup:function(e){return e},placeholder:d.data("placeholder"),language:{noResults:function(){return wdr_data.labels.select2_no_results}},data:o}),d.parent().find(".select2-search__field").css("width","100%")}),e("#wdr-save-rule").submit(function(a){a.preventDefault();if(!function t(a){let d=e(".awdr-product-discount-type").val(),o=[],i=[],r=[];switch(d){case"wdr_simple_discount":case"wdr_cart_discount":case"wdr_bulk_discount":case"wdr_set_discount":case"wdr_buy_x_get_x_discount":case"wdr_buy_x_get_y_discount":o=wdr_filter_validation(),i=function t(a){let d=[];switch(a){case"wdr_simple_discount":let o=e(".product_discount_value").val();""!=o&&o?e(".product_discount_value").css("border","1px solid #7e8993"):(d.push("fails"),e(".product_discount_value").css("border","1px solid red"),e(".product_discount_value").focus());break;case"wdr_cart_discount":let i=e(".awdr_cart_discount_value").val();""!=i&&i?e(".awdr_cart_discount_value").css("border","1px solid #7e8993"):(d.push("fails"),e(".awdr_cart_discount_value").css("border","1px solid red"),e(".awdr_cart_discount_value").focus());break;case"wdr_free_shipping":break;case"wdr_bulk_discount":e(".bulk_range_setter").find(".awdr-bulk-group").each(function(t,a){let o=e(a).find(".bulk_discount_min").val(),i=e(a).find(".bulk_discount_max").val(),r=e(a).find(".bulk_discount_value").val();""==o&&""==i?(d.push("fails"),e(a).find(".bulk_discount_min").css("border","1px solid red"),e(a).find(".bulk_discount_min").focus(),e(a).find(".bulk_discount_max").css("border","1px solid red"),e(a).find(".bulk_discount_max").focus()):(e(a).find(".bulk_discount_min").css("border","1px solid #7e8993"),e(a).find(".bulk_discount_max").css("border","1px solid #7e8993"));let s=parseInt(r);""==r||s<0?(d.push("fails"),e(a).find(".bulk_discount_value").css("border","1px solid red"),e(a).find(".bulk_discount_value").focus()):e(a).find(".bulk_discount_value").css("border","1px solid #7e8993")});break;case"wdr_set_discount":e(".set_range_setter").find(".bundle-set-range-main").each(function(t,a){let o=e(a).find(".set_discount_min").val(),i=e(a).find(".set_discount_value").val();""==o?(d.push("fails"),e(a).find(".set_discount_min").css("border","1px solid red"),e(a).find(".set_discount_min").focus()):e(a).find(".set_discount_min").css("border","1px solid #7e8993"),""==i?(d.push("fails"),e(a).find(".set_discount_value").css("border","1px solid red"),e(a).find(".set_discount_value").focus()):e(a).find(".set_discount_value").css("border","1px solid #7e8993")});break;case"wdr_buy_x_get_x_discount":e(".buyx_getx_range_setter").find(".buyx_getx_individual_range").each(function(t,a){let o=e(a).find(".bxgx-min").val(),i=e(a).find(".bxgx-max").val(),r=e(a).find(".bxgx-qty").val(),s=e(a).find(".buyx_getx_discount_select").val(),n=e(a).find(".bxgx-value").val();""==o&&""==i?(d.push("fails"),e(a).find(".bxgx-min").css("border","1px solid red"),e(a).find(".bxgx-min").focus(),e(a).find(".bxgx-max").css("border","1px solid red"),e(a).find(".bxgx-max").focus()):(e(a).find(".bxgx-min").css("border","1px solid #7e8993"),e(a).find(".bxgx-max").css("border","1px solid #7e8993")),!0==e(a).find(".awdr-bogo-recurcive").prop("checked")&&(""==o?(d.push("fails"),e(a).find(".bxgx-min").css("border","1px solid red"),e(a).find(".bxgx-min").focus()):e(a).find(".bxgx-min").css("border","1px solid #7e8993")),""==r?(d.push("fails"),e(a).find(".bxgx-qty").css("border","1px solid red"),e(a).find(".bxgx-qty").focus()):e(a).find(".bxgx-qty").css("border","1px solid #7e8993"),"free_product"!=s&&""==n?(d.push("fails"),e(a).find(".bxgx-value").css("border","1px solid red"),e(a).find(".bxgx-value").focus()):e(a).find(".bxgx-value").css("border","1px solid #7e8993")});break;case"wdr_buy_x_get_y_discount":let r=e(".select_bxgy_type").val();e(".awdr_buyx_gety_range_setter").find(".buyx_gety_individual_range").each(function(t,a){let o=e(a).find(".bxgy-min").val(),i=e(a).find(".bxgy-max").val(),s=e(a).find(".bxgy-product-selector").val(),n=e(a).find(".bxgy-category-selector").val(),l=e(a).find(".bxgy-qty").val(),c=e(a).find(".buyx_gety_discount_select").val(),u=e(a).find(".bxgy-val").val();"bxgy_product"==r?0==s.length?(d.push("fails"),e(a).find(".select2-selection").css("border","1px solid red"),e(a).find(".select2-selection").focus()):e(a).find(".select2-selection").css("border","1px solid #7e8993"):"bxgy_category"==r?0==n.length?(d.push("fails"),e(a).find(".select2-selection").css("border","1px solid red"),e(a).find(".select2-selection").focus()):e(a).find(".select2-selection").css("border","1px solid #7e8993"):"bxgy_collection"==r?0==e(a).find(".bxgy-collection-selector").val().length?(d.push("fails"),e(a).find(".select2-selection").css("border","1px solid red"),e(a).find(".select2-selection").focus()):e(a).find(".select2-selection").css("border","1px solid #7e8993"):"0"!=r&&r?e(".select_bxgy_type").css("border","1px solid #7e8993"):(d.push("fails"),e(".select_bxgy_type").css("border","1px solid red"),e(".select_bxgy_type").focus()),""==o&&""==i?(d.push("fails"),e(a).find(".bxgy-min").css("border","1px solid red"),e(a).find(".bxgy-min").focus(),e(a).find(".bxgy-max").css("border","1px solid red"),e(a).find(".bxgy-max").focus()):(e(a).find(".bxgy-min").css("border","1px solid #7e8993"),e(a).find(".bxgy-max").css("border","1px solid #7e8993")),!0==e(a).find(".awdr-bogo-recurcive").prop("checked")&&(""==o?(d.push("fails"),e(a).find(".bxgy-min").css("border","1px solid red"),e(a).find(".bxgy-min").focus()):e(a).find(".bxgy-min").css("border","1px solid #7e8993")),""==l?(d.push("fails"),e(a).find(".bxgy-qty").css("border","1px solid red"),e(a).find(".bxgy-qty").focus()):e(a).find(".bxgy-qty").css("border","1px solid #7e8993"),"free_product"!=c&&""==u?(d.push("fails"),e(a).find(".bxgy-val").css("border","1px solid red"),e(a).find(".bxgy-val").focus()):e(a).find(".bxgy-val").css("border","1px solid #7e8993")});break;default:d.push("fails")}return d}(d),r=s();break;case"wdr_free_shipping":r=s()}return -1===o.indexOf("fails")&&-1===i.indexOf("fails")&&-1===r.indexOf("fails")}(e(this)))return!1;let d=e(".woo_discount_loader");e("#wdr-save-rule .awdr-validation-attention").css("border","1px solid #7e8993"),e.ajax({data:e(this).serialize(),type:"post",url:ajaxurl,beforeSend:function(){d.show()},complete:function(){d.hide()},error:function(e,a){l(wdr_data.localization_data.error,"error",t)},success:function(a){var d=a.data;if(a.success)void 0!=d.build_index&&o(d.build_index),d.redirect?(window.location.href=d.redirect,l(wdr_data.localization_data.save_rule,"success",t)):(e(".wdr_desc_text.coupon_error_msg").hide(),e(".coupon_name_msg").css("border",""),l(wdr_data.localization_data.save_rule,"success",t));else if(d.coupon_message)e(".coupon_name_msg").css("border","1px solid #FF0000").focus(),l(wdr_data.localization_data.coupon_exists,"error",t);else for(let[i,r]of Object.entries(d)){d.hasOwnProperty(i)&&r.forEach(function(e){l(e,"error",t)});let s="",n;(n=i.split(".")).forEach(function(e,t){1!==n.length?s+=t+1!==1?"["+e+"]":e:s+=e}),e('#wdr-save-rule [name="'+s+'"]').css("border","1px solid red").focus().addClass("awdr-validation-attention")}}})}),e(document).on("click",".wdr_save_close",function(){e("input[name=wdr_save_close]").val("1"),e(".wdr_save_stay").click()});function s(){let t=[];return e(".wdr-condition-group").each(function(a,d){let o=e(d).find(".wdr-product-condition-type").val();if(void 0!==o)switch(o){case"cart_subtotal":case"cart_items_quantity":case"cart_items_weight":case"cart_line_items_count":""==e(d).find(".float_only_field").val()?(t.push("fails"),e(d).find(".float_only_field").css("border","1px solid red"),e(d).find(".float_only_field").focus()):e(d).find(".float_only_field").css("border","1px solid #7e8993");break;case"cart_coupon":let i=e(d).find(".wdr_copon_type").val(),r=e(d).find(".coupon_name_msg").val(),s=e(d).find("#rm-coupon").val();"custom_coupon"==i?""==r?(t.push("fails"),e(d).find(".coupon_name_msg").css("border","1px solid red"),e(d).find(".coupon_name_msg").focus()):e(d).find(".coupon_name_msg").css("border","1px solid #7e8993"):s?e(d).find(".select2-selection").css("border","1px solid #7e8993"):(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus());break;case"cart_payment_method":0==e(d).find(".select2-hidden-accessible").val().length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993");break;case"cart_item_product_attributes":let n=e(d).find(".awdr-attribute-validation").val(),l=e(d).find(".awdr-num-validation").val();0==n.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),""==l?(t.push("fails"),e(d).find(".awdr-num-validation").css("border","1px solid red"),e(d).find(".awdr-num-validation").focus()):e(d).find(".awdr-num-validation").css("border","1px solid #7e8993");break;case"cart_item_product_category":let c=e(d).find(".awdr-category-validation").val(),u=e(d).find(".awdr-num-validation").val();0==c.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),""==u?(t.push("fails"),e(d).find(".awdr-num-validation").css("border","1px solid red"),e(d).find(".awdr-num-validation").focus()):e(d).find(".awdr-num-validation").css("border","1px solid #7e8993");break;case"cart_item_product_combination":let p=e(d).find(".awdr-product-validation").val(),f=e(d).find(".product_from_qty").val(),h=e(d).find(".product_to_qty").val(),w=e(d).find(".combination_operator").val();0==p.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),"in_range"==w?""==f&&""==h?(t.push("fails"),e(d).find(".product_from_qty").css("border","1px solid red"),e(d).find(".product_from_qty").focus(),e(d).find(".product_to_qty").css("border","1px solid red"),e(d).find(".product_to_qty").focus()):(e(d).find(".product_from_qty").css("border","1px solid #7e8993"),e(d).find(".product_to_qty").css("border","1px solid #7e8993")):""==f?(t.push("fails"),e(d).find(".product_from_qty").css("border","1px solid red"),e(d).find(".product_from_qty").focus()):e(d).find(".product_from_qty").css("border","1px solid #7e8993");break;case"cart_item_product_sku":let b=e(d).find(".awdr-sku-validation").val(),m=e(d).find(".awdr-num-validation").val();0==b.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),""==m?(t.push("fails"),e(d).find(".awdr-num-validation").css("border","1px solid red"),e(d).find(".awdr-num-validation").focus()):e(d).find(".awdr-num-validation").css("border","1px solid #7e8993");break;case"cart_item_product_tags":let g=e(d).find(".awdr-tag-validation").val(),v=e(d).find(".awdr-num-validation").val();0==g.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),""==v?(t.push("fails"),e(d).find(".awdr-num-validation").css("border","1px solid red"),e(d).find(".awdr-num-validation").focus()):e(d).find(".awdr-num-validation").css("border","1px solid #7e8993");break;case"cart_item_products":let x=e(d).find(".awdr-product-validation").val(),y=e(d).find(".awdr-num-validation").val();0==x.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),""==y?(t.push("fails"),e(d).find(".awdr-num-validation").css("border","1px solid red"),e(d).find(".awdr-num-validation").focus()):e(d).find(".awdr-num-validation").css("border","1px solid #7e8993");break;case"cart_item_category_combination":let k=e(d).find(".awdr-cat-validation").val(),_=e(d).find(".cat_from_qty").val(),$=e(d).find(".cat_to_qty").val(),z=e(d).find(".cat_combination_operator").val();0==k.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),"in_range"==z?""==_&&""==$?(t.push("fails"),e(d).find(".cat_from_qty").css("border","1px solid red"),e(d).find(".cat_from_qty").focus(),e(d).find(".cat_to_qty").css("border","1px solid red"),e(d).find(".cat_to_qty").focus()):(e(d).find(".cat_from_qty").css("border","1px solid #7e8993"),e(d).find(".cat_to_qty").css("border","1px solid #7e8993")):""==_?(t.push("fails"),e(d).find(".cat_from_qty").css("border","1px solid red"),e(d).find(".cat_from_qty").focus()):e(d).find(".cat_from_qty").css("border","1px solid #7e8993");break;case"order_date":let q=e(d).find(".awdr-from-date").val(),j=e(d).find(".awdr-end-date").val();""==q&&""==j?(t.push("fails"),e(d).find(".awdr-from-date").css("border","1px solid red"),e(d).find(".awdr-from-date").focus(),e(d).find(".awdr-end-date").css("border","1px solid red"),e(d).find(".awdr-end-date").focus()):(e(d).find(".awdr-from-date").css("border","1px solid #7e8993"),e(d).find(".awdr-end-date").css("border","1px solid #7e8993"));break;case"order_date_and_time":let O=e(d).find(".awdr-from-date").val(),I=e(d).find(".awdr-end-date").val();""==O&&""==I?(t.push("fails"),e(d).find(".awdr-from-date").css("border","1px solid red"),e(d).find(".awdr-from-date").focus(),e(d).find(".awdr-end-date").css("border","1px solid red"),e(d).find(".awdr-end-date").focus()):(e(d).find(".awdr-from-date").css("border","1px solid #7e8993"),e(d).find(".awdr-end-date").css("border","1px solid #7e8993"));break;case"order_days":0==e(d).find(".wdr_order_days").val().length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993");break;case"order_time":let C=e(d).find(".wdr-from-time").val(),S=e(d).find(".wdr-to-time").val();""==C&&""==S?(t.push("fails"),e(d).find(".wdr-from-time").css("border","1px solid red"),e(d).find(".wdr-from-time").focus(),e(d).find(".wdr-to-time").css("border","1px solid red"),e(d).find(".wdr-to-time").focus()):(e(d).find(".wdr-from-time").css("border","1px solid #7e8993"),e(d).find(".wdr-to-time").css("border","1px solid #7e8993"));break;case"purchase_last_order":0==e(d).find(".wdr-wc-order-status").val().length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993");break;case"purchase_last_order_amount":let T=e(d).find(".wdr-wc-order-status").val(),D=e(d).find(".float_only_field").val();0==T.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),""==D?(t.push("fails"),e(d).find(".float_only_field").css("border","1px solid red"),e(d).find(".float_only_field").focus()):e(d).find(".float_only_field").css("border","1px solid #7e8993");break;case"purchase_previous_orders":let A=e(d).find(".wdr-wc-order-status").val(),R=e(d).find(".float_only_field").val();0==A.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),""==R?(t.push("fails"),e(d).find(".float_only_field").css("border","1px solid red"),e(d).find(".float_only_field").focus()):e(d).find(".float_only_field").css("border","1px solid #7e8993");break;case"purchase_previous_orders_for_specific_product":let M=e(d).find(".wdr-wc-order-status").val(),F=e(d).find(".float_only_field").val();0==e(d).find(".specific_product").val().length?(t.push("fails"),e(d).find(".wdr-previous-order-product-selector .select2-selection").css("border","1px solid red"),e(d).find(".wdr-previous-order-product-selector .select2-selection").focus()):e(d).find(".wdr-previous-order-product-selector .select2-selection").css("border","1px solid #7e8993"),0==M.length?(t.push("fails"),e(d).find(".wdr-previous-order-product-status .select2-selection").css("border","1px solid red"),e(d).find(".wdr-previous-order-product-status .select2-selection").focus()):e(d).find(".wdr-previous-order-product-status .select2-selection").css("border","1px solid #7e8993"),""==F?(t.push("fails"),e(d).find(".float_only_field").css("border","1px solid red"),e(d).find(".float_only_field").focus()):e(d).find(".float_only_field").css("border","1px solid #7e8993");break;case"purchase_quantities_for_specific_product":let B=e(d).find(".wdr-wc-order-status").val(),E=e(d).find(".float_only_field").val();0==e(d).find(".specific_product").val().length?(t.push("fails"),e(d).find(".wdr-previous-order-product-selector .select2-selection").css("border","1px solid red"),e(d).find(".wdr-previous-order-product-selector .select2-selection").focus()):e(d).find(".wdr-previous-order-product-selector .select2-selection").css("border","1px solid #7e8993"),0==B.length?(t.push("fails"),e(d).find(".wdr-previous-order-product-status .select2-selection").css("border","1px solid red"),e(d).find(".wdr-previous-order-product-status .select2-selection").focus()):e(d).find(".wdr-previous-order-product-status .select2-selection").css("border","1px solid #7e8993"),""==E?(t.push("fails"),e(d).find(".float_only_field").css("border","1px solid red"),e(d).find(".float_only_field").focus()):e(d).find(".float_only_field").css("border","1px solid #7e8993");break;case"purchase_spent":let L=e(d).find(".wdr-wc-order-status").val(),Y=e(d).find(".float_only_field").val();0==L.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),""==Y?(t.push("fails"),e(d).find(".float_only_field").css("border","1px solid red"),e(d).find(".float_only_field").focus()):e(d).find(".float_only_field").css("border","1px solid #7e8993");break;case"shipping_city":case"shipping_zipcode":case"Billing_city":case"user_email":""==e(d).find(".awdr-validation").val()?(t.push("fails"),e(d).find(".awdr-validation").css("border","1px solid red"),e(d).find(".awdr-validation").focus()):e(d).find(".awdr-validation").css("border","1px solid #7e8993");break;case"shipping_country":0==e(d).find(".get_awdr_shipping_country").val().length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993");break;case"shipping_state":let H=e(d).find(".get_awdr_shipping_state").val(),P=e(d).find(".get_awdr_state_based_country").val();0==H.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993"),0==P.length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993");break;case"user_list":0==e(d).find(".wdr_user_list").val().length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993");break;case"user_role":0==e(d).find(".wdr_user_role").val().length?(t.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993")}}),t}function n(t={}){var a=new URLSearchParams(window.location.search);["name","page_no","limit"].forEach(function(e){if(e in t)t[e]||delete t[e];else{let d=a.get(e);d&&(t[e]=d)}});var d=wdr_data.admin_url+"&"+e.param(t);window.location.replace(d)}function l(t,a="success",d=null){switch(a){case"error":var o="wdr-alert-error";break;case"warning":var o="wdr-alert-warning";break;default:var o="wdr-alert-success"}let i="wdr-notify-msg-"+d.counts,r='<div style="display: none;" class="wdr-alert '+o+'" id="'+i+'">'+t+"</div>";e("#notify-msg-holder").append(r);let s=e("#"+i);var n=d.counts;d.counts=parseInt(n)+parseInt(1),s.fadeIn(500),setTimeout(function(){s.fadeOut(500),s.remove()},5e3)}window.wdr_filter_validation=function t(){let a=[];return e(".wdr-filter-group").each(function(t,d){let o=e(d).find(".wdr-product-filter-type").val(),i=e(d).find(".awdr_validation").val();switch(o){case"all_products":case"product_on_sale":break;case"products":case"product_category":case"product_attributes":case"product_tags":case"product_sku":0==i.length?(a.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993");break;default:null==i||0==i.length?(a.push("fails"),e(d).find(".select2-selection").css("border","1px solid red"),e(d).find(".select2-selection").focus()):e(d).find(".select2-selection").css("border","1px solid #7e8993")}}),a},e("#configuration-form").submit(function(a){a.preventDefault();let d=e(this).serialize(),o=e(".woo_discount_loader");e.ajax({data:d,type:"post",url:ajaxurl,beforeSend:function(){o.show()},complete:function(){o.hide()},error:function(e,a){l(wdr_data.localization_data.error,"error",t)},success:function(a){switch(a.data.save_popup){case"alert_in_popup":"alert_in_popup"==a.data.save_popup&&"passed"==a.data.security_pass?(e(".awdr-save-green").show(),setTimeout(function(){e(".awdr-save-green").fadeOut(500),window.location.replace(wdr_data.admin_url+"&tab=settings")},2e3)):"alert_in_popup"==a.data.save_popup&&"fails"==a.data.security_pass&&(e(".awdr-error-red").show(),setTimeout(function(){e(".awdr-error-red").fadeOut(500),window.location.replace(wdr_data.admin_url+"&tab=settings")},2e3));break;case"alert_in_normal":"alert_in_normal"==a.data.save_popup&&"passed"==a.data.security_pass?(l(wdr_data.localization_data.save_settings,"success",t),setTimeout(function(){window.location.replace(wdr_data.admin_url+"&tab=settings")},1e3)):"alert_in_normal"==a.data.save_popup&&"fails"==a.data.security_pass&&(l(wdr_data.localization_data.error,"error",t),setTimeout(function(){window.location.replace(wdr_data.admin_url+"&tab=settings")},1e3));break;default:e(".awdr-error-red").show(),l(wdr_data.localization_data.error,"error",t),setTimeout(function(){e(".awdr-error-red").fadeOut(500),window.location.replace(wdr_data.admin_url+"&tab=settings")},1e3)}}})}),e("#awdr_advanced_configuration_form").submit(function(a){a.preventDefault();let d=e(this).serialize(),o=e(".woo_discount_loader");e.ajax({data:d,type:"post",url:ajaxurl,beforeSend:function(){o.show()},complete:function(){o.hide()},error:function(e,a){l(wdr_data.localization_data.error,"error",t)},success:function(t){"passed"==t.data.security_pass?(e(".awdr-save-green").show(),setTimeout(function(){e(".awdr-save-green").fadeOut(500),window.location.replace(wdr_data.admin_url+"&tab=advanced_section")},2e3)):"fails"==t.data.security_pass&&(e(".awdr-error-red").show(),setTimeout(function(){e(".awdr-error-red").fadeOut(500),window.location.replace(wdr_data.admin_url+"&tab=advanced_section")},2e3))}})}),e(document).on("click",".bulk-table-customized-setting",function(){e("input[name=customizer_save_alert]").val("1"),e(".save-configuration-submit").click()}),e("#sort_customizable_table").dragtable({persistState:function(t){t.el.find("th").each(function(a){""!=this.id&&(t.sortOrder[this.id]=a,"customize-bulk-table-title"==this.id?e(".customize_bulk_table_title").val(a):"customize-bulk-table-discount"==this.id?e(".customize_bulk_table_discount").val(a):"customize-bulk-table-range"==this.id&&e(".customize_bulk_table_range").val(a))})}}),e("#wdr-bulk-action-top").submit(function(a){if(a.preventDefault(),!(e('input[name="saved_rules[]"]:checked').length>0))return!1;{let d=e("#bulk-action-selector-top").val(),o;if("enable"==d)o=confirm("Are you sure to enable the selected rules?");else if("disable"==d)o=confirm("Are you sure to disable the selected rules?");else{if("delete"!=d)return!1;o=confirm("Are you sure to delete the selected rules?")}if(!1==o)return!1}let i=e(".woo_discount_loader");e.ajax({data:e(this).serialize(),type:"post",url:ajaxurl,beforeSend:function(){i.show()},complete:function(){i.hide()},error:function(e,a){l(wdr_data.localization_data.error,"error",t)},success:function(e){"disabled"==e.disable?l(wdr_data.localization_data.disabled_rule,"success",t):"enabled"==e.enable?l(wdr_data.localization_data.enabled_rule,"success",t):"deleted"==e.delete?l(wdr_data.localization_data.deleted_rule,"success",t):l(wdr_data.localization_data.error,"error",t),n()}})}),e(document).on("submit","#wdr-search-top",function(t){t.preventDefault(),n({name:e("#awdr-name").val(),page_no:1})}),e(document).on("click","#awdr_limit",function(t){t.preventDefault(),n({limit:e(this).val()})}),e(document).on("click","#awdr_re_order",function(t){t.preventDefault();var a=new URLSearchParams(window.location.search).get("re_order"),d=e("#page_sort").val();0==a&&0==d||null==a&&0==d?n({re_order:1}):n({re_order:0})}),e(document).on("keyup",".current-page",function(t){13===t.keyCode&&n({page_no:e(this).val()})}),e(document).on("keypress keyup blur",".float_only_field",function(t){e(this).val(e(this).val().replace(/[^0-9\.]/g,"")),(46!==t.which||-1!==e(this).val().indexOf("."))&&(t.which<48||t.which>57)&&t.preventDefault()}),e(document).on("keypress keyup blur",".number_only_field",function(e){(e.which<48||e.which>57)&&e.preventDefault()}),e('[data-class="start_dateonly"]').datetimepicker({timepicker:!1,format:"Y-m-d",onShow:function(t,a){let d=e(a).closest("form").find('[data-class="end_dateonly"]');1!==d.length&&(d=e('[data-class="end_dateonly"]')),this.setOptions({maxDate:!!d.val()&&d.val()})}}),e('[data-class="end_dateonly"]').datetimepicker({timepicker:!1,format:"Y-m-d",onShow:function(t,a){let d=e(a).closest("form").find('[data-class="start_dateonly"]');1!==d.length&&(d=e('[data-class="start_dateonly"]')),this.setOptions({minDate:!!d.val()&&d.val()})}}),e('[data-class="start_datetimeonly"]').datetimepicker({timepicker:!0,format:"Y-m-d H:i",onShow:function(t){this.setOptions({maxDate:!!e('[data-class="end_datetimeonly"]').val()&&e('[data-class="end_datetimeonly"]').val()})}}),e('[data-class="end_datetimeonly"]').datetimepicker({timepicker:!0,format:"Y-m-d H:i",onShow:function(t){this.setOptions({minDate:!!e('[data-class="start_datetimeonly"]').val()&&e('[data-class="start_datetimeonly"]').val()})}}),e(".wdr_time_picker").datetimepicker({datepicker:!1,format:"H:i"}),e(document).on("change",".wdr-bulk-type",function(){"product_selected_categories"==e(this).val()?e(".wdr-bulk-cat-selector").show():e(".wdr-bulk-cat-selector").hide()}),e(".settings_option_show_hide").click(function(){var t=e(this).data("name");"1"==e(this).val()?(e("."+t).show(),"hide_table_position"==t&&e(".wdr-popup-link").show()):(e("."+t).hide(),"hide_table_position"==t&&e(".wdr-popup-link").hide())}),e(".bulk_table_customizer_preview").click(function(){var t=e(this).data("colname");"show"==e(this).data("showhide")?e("."+t).show():e("."+t).hide()}),e(".settings_option_show_hide_on_change").change(function(){"disabled"==e(this).val()?e(".display_you_saved_text").hide():e(".display_you_saved_text").show()}),e(document).on("change",".wdr-rules-select",function(){var t=e(".wdr-rules-select"),a=e(this).val();"off"==a?(t.val("on"),e(".wdr-rules-selector").prop("checked",!0)):"on"==a&&(t.val("off"),e(".wdr-rules-selector").prop("checked",!1))}),e(document).on("change",".wdr-rules-selector",function(){var t=e(".wdr-rules-select"),a=e(".wdr-ruleboard input:checkbox").length,d=e(".wdr-ruleboard input:checkbox:checked").length;a==d?(t.val("on"),t.prop("checked",!0)):a!=d&&(t.val("off"),t.prop("checked",!1))});var c,u=document.getElementById("ruleHeader");function p(){if(null!=u){var e=u.offsetTop;window.pageYOffset>e?u.classList.add("wdr-sticky"):u.classList.remove("wdr-sticky")}}var f=!1;function h(){e("#sortable").sortable({handle:".awdr-sortable-handle",delay:150,start:function(e,t){var a=t.item.attr("id"),d=t.item.attr("data-priority");a&&d&&(selectedData.push(a),selectedPriority.push(d))},update:function(e,t){if(t.originalPosition.top-t.offset.top<0)var a=t.item.prev();else var a=t.item.next();var d=a.attr("id"),o=a.attr("data-priority");d&&o&&(selectedData.push(d),selectedPriority.push(o))}})}(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(f=!0),e(document).ready(function(){(function a(){var d,o=new URLSearchParams(window.location.search).get("re_order"),i=e("#page_sort").val();let r;1==o||1==i?(d=0,r=e(".woo_discount_loader"),e("#sortable").sortable({delay:150,start:function(e,t){d=t.item.attr("data-priority")},update:function(o,i){if(i.originalPosition.top-i.offset.top<0)var s,n=i.item.prev();else var n=i.item.next();var c,u,p=n.attr("data-priority"),f={drag_position:d,drop_position:p};let h;p>0&&d>0&&(c=f,u={},h=e(".woo_discount_loader"),s=new URLSearchParams(window.location.search),["re_order","name","page_no","limit"].forEach(function(e){if(e in u)u[e]||delete u[e];else{let t=s.get(e);t&&(u[e]=t)}}),e.ajax({data:{position:c,method:"update_priority_order",action:"wdr_ajax",awdr_nonce:e("input[name=awdr_rule_list_nonce]").val()},type:"post",url:ajaxurl+"?"+e.param(u),error:function(e,a){l(wdr_data.localization_data.error,"error",t)},success:function(d){e(".wdr_settings_container").html(d.html),a(),h.hide(),!1===d?l(wdr_data.localization_data.error,"error",t):l(wdr_data.localization_data.save_priority,"success",t)}}),r.show())}}),e("#sortable").sortable("enable"),e(".dashicons-menu").css({color:"black"}),e(".awdr-listing-rule-tr").css({color:"black"}),e(".wdr-ruleboard").css({cursor:"move"})):(e("#sortable").sortable({disabled:!0}),e(".dashicons-menu").css({color:"darkgray"}))})()}),e("#sortable").disableSelection(),e(document).on("click",".help-popup",function(){var t="#"+e(this).attr("data-id");e(t).dialog({modal:!0,closeText:""})}),e(document).on("click",".remove-clicked-discount-block",function(){var t=e(this).data("showblock"),a=e(this).data("removeval"),d=e(this).data("removeopt");e("."+t).hide(),e("."+a).removeAttr("value"),e("."+d).prop("selectedIndex",0),e("[data-dtype="+t+"]").show(),"wdr-bulk-discount"==t&&(e(".bulk_product_category_selector option:selected").remove(),e(".wdr-bulk-cat-selector").hide())}),e(".wdr-btn-add-message").click(function(){wdr_buildrule.show_hide_rule_block({showBlockId:".wdr-advanced-layout-block",hideBlockId:".wdr-discount-template, .wdr-filter-block",thisObject:this})});var w=e(".bulk-min").length;if(w>=2){var b=e(".bulk_discount_min").val(),m=e(".bulk_discount_max").val(),g=e(".bulk_discount_value").val();(b||m||g)&&e(".adv-msg-min-qty, .adv-msg-max-qty").show()}var w=e(".set-min").length;if(w>=2){var b=e(".set_discount_min").val(),g=e(".set_discount_value").val();(b||g)&&(e(".adv-msg-min-qty").show(),e(".adv-msg-max-qty").hide())}function v(){e(".wdr-condition-group").each(function(t,a){let d=e(a).find(".wdr-product-condition-type").val();void 0!==d&&"cart_item_product_onsale"===d&&e(this).remove()})}e(".popup_table_discount_column_value").click(function(){1==e(this).val()?(e(".wdr_table_discounted_value").show(),e(".wdr_table_discounted_price").hide()):(e(".wdr_table_discounted_value").hide(),e(".wdr_table_discounted_price").show())}),e(".modal-trigger").click(function(t){t.preventDefault(),dataModal=e(this).attr("data-modal"),e("#"+dataModal).css({display:"block"})}),e(".close-modal, .modal-sandbox").click(function(){e(".modal").css({display:"none"})}),e("#badge_colorpicker").on("change",function(){e("#badge_hexcolor").val(this.value)}),e("#badge_hexcolor").on("change",function(){e("#badge_colorpicker").val(this.value)}),e("#text_colorpicker").on("change",function(){e("#text_hexcolor").val(this.value)}),e("#text_hexcolor").on("change",function(){e("#text_colorpicker").val(this.value)}),e("#awdr_shortcode_copy_btn").on("click",function(){t=e("<input>"),e("body").append(t),t.val(e("#awdr_shortcode_text").text()).select(),document.execCommand("copy"),t.remove();var t,a=e(this);a.html(wdr_data.localization_data.copied),setTimeout(function(){a.html(wdr_data.localization_data.copy_shortcode)},2e3)}),e(".tips, .help_tip, .woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),e(".awdr_popup_col_name_text_box").keyup(function(){var t=e(this).val(),a=e(this).data("keyup");e("."+a).html(t)}),e(".awdr_popup_col_name_text_box").blur(function(){var t=e(this).val(),a=e(this).data("keyup");e("."+a).html(t)}),e(".apply_product_and_cart_discount_to").change(function(){let t=e(this).data("subsequent");"all"==e(this).val()?e("."+t).show():e("."+t).hide()}),e(document).on("change",".awdr-bogo-discount-type",function(){let t=e(this).val(),a=e(this).attr("data-parent"),d=e(this).attr("data-siblings");switch(t){case"flat":e(this).parent("."+a).siblings("."+d).show(),e(this).parent("."+a).siblings("."+d).find(".wdr_desc_text").text(wdr_data.localization_data.buyx_getx_value);break;case"percentage":e(this).parent("."+a).siblings("."+d).show(),e(this).parent("."+a).siblings("."+d).find(".wdr_desc_text").text(wdr_data.localization_data.buyx_getx_percentage);break;default:e(this).parent("."+a).siblings("."+d).hide()}}),e(document).on("change",".awdr-bogo-recurcive",function(){let t=e(this).attr("data-recursive-row"),a=e(this).attr("data-recursive-parent"),d=e(this).attr("data-hide-add-range"),o=e(this).attr("data-bogo-max-range"),i=e(this).attr("data-bogo-min-range"),r=e(this).attr("data-bogo-border"),s=e("."+t).length,n=e(this).attr("data-ranges-row-parent");if(!1==e(this).prop("checked")){e(this).parents("."+n).siblings("."+d).show(),""!=o&&(e(this).parents("."+a).siblings("."+o).show(),e(this).parents("."+a).siblings().find("."+o).show()),e(this).parents("."+a).siblings("."+i).find(".wdr_desc_text").text(wdr_data.localization_data.recursive_min_qty),e("."+r).css("border-bottom","1px solid #ddd");return}s>3&&(confirm(wdr_data.localization_data.recursive_warning)?e(this).parents("."+t).siblings().remove():e(this).prop("checked",!1)),!0==e(this).prop("checked")&&(e(this).parents("."+n).siblings("."+d).hide(),""!=o&&(e(this).parents("."+a).siblings("."+o).hide(),e(this).parents("."+a).siblings().find("."+o).hide()),e(this).parents("."+a).siblings("."+i).find(".wdr_desc_text").text(wdr_data.localization_data.recursive_qty),e("."+r).css("border-bottom","unset"))}),e(document).on("change",".awdr_mode_of_operator",function(){let t=e(this).val();if("wdr_buy_x_get_y_discount"==e(".awdr-product-discount-type").val()){"variation"==t?(e(".awdr-bxgy-dynamic-tip").attr("title",wdr_data.localization_data.bulk_variants_discount_description_tool_tip),e(".awdr-example").html(wdr_data.localization_data.mode_variation_cumulative_example)):"product"==t?(e(".awdr-bxgy-dynamic-tip").attr("title",wdr_data.localization_data.bulk_individual_product_discount_description_tool_tip),e(".awdr-example").html("")):(e(".awdr-bxgy-dynamic-tip").attr("title",wdr_data.localization_data.bulk_filter_together_discount_description_tool_tip),e(".awdr-example").html(""));return}"variation"==t?(e(".awdr-discount-content").html(wdr_data.localization_data.bulk_variants_discount_description),e(".awdr-example").html(wdr_data.localization_data.mode_variation_cumulative_example)):"product"==t?(e(".awdr-discount-content").html(wdr_data.localization_data.bulk_individual_product_discount_description),e(".awdr-example").html("")):(e(".awdr-discount-content").html(wdr_data.localization_data.bulk_filter_together_discount_description),e(".awdr-example").html(""))}),e(document).on("change",".awdr-product-discount-type",function(){e(".awdr-example").html("");var t=e(this).data("placement");let a=e(this).val(),d="awdr_doc_";switch(a){case"wdr_simple_discount":e("."+d+a).show(),e(".awdr_doc_wdr_cart_discount,.awdr_doc_wdr_free_shipping,.awdr_doc_wdr_bulk_discount,.awdr_doc_wdr_set_discount,.awdr_doc_wdr_buy_x_get_x_discount,.awdr_doc_wdr_buy_x_get_y_discount").hide();break;case"wdr_cart_discount":e("."+d+a).show(),e(".awdr_doc_wdr_simple_discount,.awdr_doc_wdr_free_shipping,.awdr_doc_wdr_bulk_discount,.awdr_doc_wdr_set_discount,.awdr_doc_wdr_buy_x_get_x_discount,.awdr_doc_wdr_buy_x_get_y_discount").hide();break;case"wdr_free_shipping":e("."+d+a).show(),e(".awdr_doc_wdr_simple_discount,.awdr_doc_wdr_cart_discount,.awdr_doc_wdr_bulk_discount,.awdr_doc_wdr_set_discount,.awdr_doc_wdr_buy_x_get_x_discount,.awdr_doc_wdr_buy_x_get_y_discount").hide();break;case"wdr_bulk_discount":e("."+d+a).show(),e(".awdr_doc_wdr_simple_discount,.awdr_doc_wdr_cart_discount,.awdr_doc_wdr_free_shipping,.awdr_doc_wdr_set_discount,.awdr_doc_wdr_buy_x_get_x_discount,.awdr_doc_wdr_buy_x_get_y_discount").hide();break;case"wdr_set_discount":e("."+d+a).show(),e(".awdr_doc_wdr_simple_discount,.awdr_doc_wdr_cart_discount,.awdr_doc_wdr_free_shipping,.awdr_doc_wdr_bulk_discount,.awdr_doc_wdr_buy_x_get_x_discount,.awdr_doc_wdr_buy_x_get_y_discount").hide();break;case"wdr_buy_x_get_x_discount":e("."+d+a).show(),e(".awdr_doc_wdr_simple_discount,.awdr_doc_wdr_cart_discount,.awdr_doc_wdr_free_shipping,.awdr_doc_wdr_bulk_discount,.awdr_doc_wdr_set_discount,.awdr_doc_wdr_buy_x_get_y_discount").hide();break;case"wdr_buy_x_get_y_discount":e("."+d+a).show(),e(".awdr_doc_wdr_simple_discount,.awdr_doc_wdr_cart_discount,.awdr_doc_wdr_free_shipping,.awdr_doc_wdr_bulk_discount,.awdr_doc_wdr_set_discount,.awdr_doc_wdr_buy_x_get_x_discount").hide();break;default:e(".awdr_doc_wdr_simple_discount,.awdr_doc_wdr_cart_discount,.awdr_doc_wdr_free_shipping,.awdr_doc_wdr_bulk_discount,.awdr_doc_wdr_set_discount,.awdr_doc_wdr_buy_x_get_x_discount,.awdr_doc_wdr_buy_x_get_y_discount").hide()}"not_selected"!=e(this).val()&&"wdr_free_shipping"!=e(this).val()?(wdr_buildrule.wdr_clone_field({addFilterMethod:"."+e(this).val(),ruleAppendTo:"."+t,addDiscountType:"enable"}),e(".awdr-free-shipping-special-condition").hasClass("wdr-hide")||e(".awdr-free-shipping-special-condition").addClass("wdr-hide"),v(),e(".calculate_cart_from option[value='from_filter']").show(),e(".adv-msg-discount, .adv-msg-discount-price").show(),e(".awdr-hidden-new-rule").fadeIn(500),e(".awdr-filter-section").fadeIn(500),e("button.wdr_save_stay, button.wdr_save_close").attr("disabled",!1).removeClass("wdr_save_btn_disabled"),i(e("."+t).find('[data-field="autocomplete"]')),e(".awdr-discount-container").show(),e("."+t).find(".bulk_range_setter_group").addClass("bulk_range_setter").attr("id","bulk_adjustment_sortable"),e("."+t).find(".set_range_setter_group").addClass("set_range_setter").attr("id","bulk_adjustment_sortable"),e(window).width()>1024?!0==f?e("#bulk_adjustment_sortable").sortable({handle:".awdr-sortable-handle"}):e("#bulk_adjustment_sortable").sortable():e("#bulk_adjustment_sortable").sortable({handle:".awdr-sortable-handle"}),e("#bulk_adjustment_sortable").disableSelection(),e(".awdr-filter-heading").html(wdr_data.localization_data.common_filter_heading),e(".awdr-filter-content").html(wdr_data.localization_data.common_filter_description),e(".awdr-discount-heading").html(wdr_data.localization_data.common_discount_heading),e(".awdr-discount-content").html(wdr_data.localization_data.common_discount_description),e(".awdr-rules-content").html(wdr_data.localization_data.common_rules_description),"wdr_buy_x_get_y_discount"==e(this).val()&&(e(".awdr-free-shipping-special-condition").hasClass("wdr-hide")||e(".awdr-free-shipping-special-condition").addClass("wdr-hide"),v(),e(".awdr-discount-heading").html(wdr_data.localization_data.two_column_bxgy_discount_heading),i(e("."+t).find('[data-list="product_category"]')),e(".adv-msg-min-qty, .adv-msg-max-qty, .adv-msg-discount, .adv-msg-discount-price").hide()),"wdr_buy_x_get_x_discount"==e(this).val()&&(e(".awdr-free-shipping-special-condition").hasClass("wdr-hide")||e(".awdr-free-shipping-special-condition").addClass("wdr-hide"),v(),e(".adv-msg-min-qty, .adv-msg-max-qty, .adv-msg-discount, .adv-msg-discount-price").hide()),"wdr_bulk_discount"==e(this).val()?(e(".awdr-free-shipping-special-condition").hasClass("wdr-hide")||e(".awdr-free-shipping-special-condition").addClass("wdr-hide"),v(),e(".awdr-discount-heading").html(wdr_data.localization_data.two_column_bulk_discount_heading),e(".awdr_mode_of_operator").trigger("change"),e(".adv-msg-min-qty, .adv-msg-max-qty, .adv-msg-discount, .adv-msg-discount-price").show()):"wdr_set_discount"==e(this).val()&&(e(".awdr-free-shipping-special-condition").hasClass("wdr-hide")||e(".awdr-free-shipping-special-condition").addClass("wdr-hide"),v(),e(".awdr_mode_of_operator").trigger("change"),e(".awdr-discount-heading").html(wdr_data.localization_data.two_column_set_discount_heading),e(".adv-msg-min-qty, .adv-msg-discount, .adv-msg-discount-price").show(),e(".adv-msg-max-qty").hide())):"wdr_free_shipping"==e(this).val()?(e(".awdr-free-shipping-special-condition").removeClass("wdr-hide"),e(".awdr-hidden-new-rule").fadeIn(500),e(".awdr-filter-section").fadeOut(),e("button.wdr_save_stay, button.wdr_save_close").attr("disabled",!1).removeClass("wdr_save_btn_disabled"),e("."+t).html(""),e(".awdr-discount-container").hide(),e(".adv-msg-min-qty, .adv-msg-max-qty, .adv-msg-discount, .adv-msg-discount-price").hide(),e(".calculate_cart_from option[value='from_filter']").hide()):(e(".awdr-free-shipping-special-condition").hasClass("wdr-hide")||e(".awdr-free-shipping-special-condition").addClass("wdr-hide"),v(),e("button.wdr_save_stay, button.wdr_save_close").attr("disabled",!0).addClass("wdr_save_btn_disabled"),e(".awdr-hidden-new-rule").fadeOut(500)),e(this).trigger("advanced_woo_discount_rules_on_change_adjustment_type",[e(this).val()])}),e(".awdr-product-discount-type").trigger("change"),"view"==wdr_data.rule_id?e("button.wdr_save_stay, button.wdr_save_close").attr("disabled",!1).removeClass("wdr_save_btn_disabled"):e("button.wdr_save_stay, button.wdr_save_close").attr("disabled",!0).addClass("wdr_save_btn_disabled"),e(document).on("change",".apply_fee_coupon_checkbox",function(){!0==e(this).prop("checked")?e(this).parents(".awdr_rtl_compatible").siblings(".apply_fee_coupon_label").show():e(this).parents(".awdr_rtl_compatible").siblings(".apply_fee_coupon_label").hide()}),e(document).on("change",".bulk_table_customizer_show_hide_column",function(){var t=e(this).data("colname");!0==e(this).prop("checked")?e("."+t).show():e("."+t).hide()});var x=document.getElementsByClassName("awdr-accordion");for(c=0;c<x.length;c++)x[c].addEventListener("click",function(t){t.preventDefault(),this.classList.toggle("awdr-accordion-active");var a=this.nextElementSibling;"block"===a.style.display?e(a).slideUp(1e3):e(a).slideDown(1e3)});e(document).on("change",".on_sale_badge_condition",function(){"disabled"===e(this).val()?(e(".sale_badge_toggle").hide(),e(".sale_badge_customizer,.sale_badge_percentage_customizer").hide()):(e(".sale_badge_toggle").show(),!0==e("#customize_on_sale_badge").prop("checked")?(e(".sale_badge_customizer").show(),e(".display_percentage_on_sale_badge_con").show()):(e(".sale_badge_customizer").hide(),e("#display_percentage_on_sale_badge").prop("checked",!1).trigger("change"),e(".display_percentage_on_sale_badge_con").hide()),!0==e("#display_percentage_on_sale_badge").prop("checked")?e(".sale_badge_percentage_customizer").show():e(".sale_badge_percentage_customizer").hide())}),e(document).on("change","#customize_on_sale_badge",function(){!0==e(this).prop("checked")?(e(".sale_badge_customizer").show(),e(".display_percentage_on_sale_badge_con").show()):(e(".sale_badge_customizer").hide(),e("#display_percentage_on_sale_badge").prop("checked",!1).trigger("change"),e(".display_percentage_on_sale_badge_con").hide())}),e(document).on("change","#display_percentage_on_sale_badge",function(){!0==e(this).prop("checked")?e(".sale_badge_percentage_customizer").show():e(".sale_badge_percentage_customizer").hide()}),e(document).on("change","#badge_colorpicker",function(){let t=e(this).val();e(".awdr_admin_discount_bar").css("background-color",t)}),e(document).on("change","#badge_hexcolor",function(){let t=e(this).val();e(".awdr_admin_discount_bar").css("background-color",t)}),e(document).on("change","#text_colorpicker",function(){let t=e(this).val();e(".awdr_admin_discount_bar").css("color",t)}),e(document).on("change","#text_hexcolor",function(){let t=e(this).val();e(".awdr_admin_discount_bar").css("color",t)}),e(document).on("change","#awdr_discount_bar_content",function(){let t=e(this).val();e(".awdr_admin_discount_bar").html(t)}),e(document).on("click",".awdr-hidden-search",function(){let t=e(".awdr-hidden-name").val(),a=e(".awdr-hidden-rule-limit").val();e(".wdr-rule-limit-key").val(a),e(".wdr-rule-search-key").val(t),e("#wdr-search-top").submit()}),e(document).on("change","#select_usage_limits",function(){let t=e("#select_usage_limits").val();if(""==t)e(".awdr-rule-limit-disabled-outer .rule_limit_msg_outer").hide(),e(".awdr-rule-limit-disabled").hide();else{var a=e(".awdr-used-limit-total").html();t<=parseInt(a)?(e(".awdr-rule-limit-disabled").hide(),e(".awdr-rule-limit-disabled-outer").show(),e(".awdr-rule-limit-disabled-outer .rule_limit_msg_outer").html(wdr_data.localization_data.invalid_rule_limit)):(e(".awdr-rule-limit-disabled").hide(),e(".awdr-rule-limit-disabled-outer").hide())}}),e("#awdr-import-csv").on("submit",function(){return!!RegExp("([a-zA-Z0-9s_\\.-:])+(.csv)$").test(e("#awdr-file-uploader").val().toLowerCase())||(e("#awdr-upload-response").html(wdr_data.localization_data.invalid_file_type),!1)}),e(document).on("change",".get_awdr_state_based_country",function(){let t=e(this).val();if(!t||""==t||0==t.length)return!1;let a=e(this).parents(".wdr-conditions-container").attr("data-index"),d=e(this).parents(".wdr_shipping_state_group"),o=e(this).parent().siblings(".wdr-shipping-state-value"),i=e(".woo_discount_loader"),r=e(this).parent().siblings(".wdr-shipping-state-value").find(".get_awdr_shipping_state").val();var s={action:"wdr_ajax",method:"get_state_details",selected_country:t,selected_state:r,selected_index:a,awdr_nonce:e("input[name=wdr_ajax_select2]").val()||""};e.ajax({url:ajaxurl,data:s,type:"POST",beforeSend:function(){i.show()},complete:function(){i.hide()},success:function(t){o.remove(),d.append("<div class='wdr-shipping-state-value wdr-select-filed-hight wdr-search-box' style='width: min-content;'>"+t.data+"<span class='wdr_select2_desc_text'>"+wdr_data.localization_data.select_state+"</span> </div>"),e(".append-preloaded-values").selectWoo()},error:function(e){console.log("error")}})}),e(".get_awdr_state_based_country").trigger("change"),e(document).on("change",".wdr_copon_type",function(){var t=e(this).val();"custom_coupon"===t?(e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-one, .wdr-cart-coupon-url-all").css("display","none"),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-custom").css("display","block")):"at_least_one"===t?(e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-custom, .wdr-cart-coupon-url-all").css("display","none"),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-one").css("display","block")):"all"===t&&(e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-custom, .wdr-cart-coupon-url-one").css("display","none"),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-all").css("display","block"))}),e(document).on("click",".wdr-copy-coupon-url",function(a){a.preventDefault(),e(this).parents(".wdr-coupon-url-group").find("input[type=url]").select(),document.execCommand("copy")?(e(this).html(wdr_data.localization_data.coupon_url_copied),l(wdr_data.localization_data.coupon_url_success,"success",t)):l(wdr_data.localization_data.error,"error",t)}),e(document).on("change",".wdr-cart-coupon-url-enable",function(t){t.preventDefault(),e(this).closest(".wdr-cart-coupon-url").find(".wdr-cart-coupon-url-lists").slideToggle()}),e(document).on("change keyup",".wdr-cart-coupon-value input",function(){var t=wdr_data.home_url,a=e(this).val();""!==a?($group='<span class="wdr-coupon-url-group"><label>',$group+=' <input type="url" value="'+t+"?wdr_coupon="+encodeURIComponent(a)+'"></label>',$group+='<button class="wdr-copy-coupon-url">'+wdr_data.localization_data.coupon_url_copy+"</button></span>",e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-custom").html($group),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-custom").css("display","block")):e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-custom").css("display","none")}),e(document).on("change",".wdr-cart-coupon-search select, select.wdr_copon_type",function(){var t=wdr_data.home_url,a=e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-search select").val(),d=e(this).parents(".wdr_cart_coupon_group").find("select.wdr_copon_type").val();if(0!==a.length){if("at_least_one"===d)$groups="",a.forEach(function(e){$groups+='<span class="wdr-coupon-url-group"><label>',$groups+=' <input type="url" value="'+t+"?wdr_coupon="+encodeURIComponent(e)+'"></label>',$groups+='<button class="wdr-copy-coupon-url">'+wdr_data.localization_data.coupon_url_copy+"</button></span><br>"}),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-one").html($groups),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-one").css("display","block");else if("all"===d){var o="";t+="?wdr_coupon=",a.forEach(function(e){o+=e+", ",t+=encodeURIComponent(e)+","}),o=o.replace(/(^, )|(, $)/g,""),t=t.replace(/(^,)|(,$)/g,""),$group='<span class="wdr-coupon-url-group"><label>',$group+=' <input type="url" value="'+t+'"></label>',$group+='<button class="wdr-copy-coupon-url">'+wdr_data.localization_data.coupon_url_copy+"</button></span>",e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-all").html($group),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-all").css("display","block")}}else e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-one").css("display","none"),e(this).parents(".wdr_cart_coupon_group").find(".wdr-cart-coupon-url-all").css("display","none")}),e("#bulk_adjustment_sortable").on("sortstop",function(e,t){wdr_buildrule.re_index_ranges()})});