/*! For license information please see frontend-spb.js.LICENSE.txt */
(()=>{"use strict";var e={"./src/frontend/frontend-shared.ts":(e,a,t)=>{t.r(a),t.d(a,{PaypalPayments:()=>r});class r{static scrollTop(){jQuery("html, body").animate({scrollTop:0},300)}static setNotices(e){jQuery(".woocommerce-notices-wrapper:first").html(e)}static makeRequest(e,a){const t={async:!0,crossDomain:!0,url:r.replaceVars(paypal_brasil_settings.paypal_brasil_handler_url,{ACTION:e}),method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(a)};return jQuery.ajax(t)}static showDefaultButton(){jQuery("#paypal-brasil-button-container .default-submit-button").show(),jQuery("#paypal-brasil-button-container .paypal-submit-button").hide()}static showPaypalButton(){jQuery("#paypal-brasil-button-container .default-submit-button").hide(),jQuery("#paypal-brasil-button-container .paypal-submit-button").show()}static isPaypalPaymentsSelected(){return!!jQuery("#payment_method_paypal-brasil-spb-gateway:checked").length}static triggerUpdateCheckout(){jQuery(document.body).trigger("update_checkout")}static triggerUpdateCart(){jQuery(document.body).trigger("wc_update_cart")}static submitForm(){jQuery("form.woocommerce-checkout, form#order_review").submit()}static replaceVars(e,a){let t=e;for(let e in a)a.hasOwnProperty(e)&&(t=t.replace(new RegExp("{"+e+"}","g"),a[e]));return t}}},"./src/frontend/frontend-spb/frontend-spb-api.ts":(e,a,t)=>{t.r(a),t.d(a,{paymentSpb:()=>o});var r=t("./src/frontend/frontend-shared.ts");const o={create:()=>paypal_brasil_settings.is_order_pay_page?jQuery("#paypal-spb-fields [name=paypal-brasil-spb-order-pay-ec]").val():new Promise(((e,a)=>{r.PaypalPayments.makeRequest("checkout",{nonce:paypal_brasil_settings.nonce,first_name:jQuery("form.woocommerce-checkout [name=billing_first_name]").val(),last_name:jQuery("form.woocommerce-checkout [name=billing_last_name]").val(),country:jQuery("form.woocommerce-checkout [name=billing_country]").val(),address_line_1:jQuery("form.woocommerce-checkout [name=billing_address_1]").val(),address_line_2:jQuery("form.woocommerce-checkout [name=billing_address_2]").val(),number:jQuery("form.woocommerce-checkout [name=billing_number]").val(),city:jQuery("form.woocommerce-checkout [name=billing_city]").val(),state:jQuery("form.woocommerce-checkout [name=billing_state]").val(),neighborhood:jQuery("form.woocommerce-checkout [name=billing_neighborhood]").val(),postcode:jQuery("form.woocommerce-checkout [name=billing_postcode]").val(),phone:jQuery("form.woocommerce-checkout [name=billing_phone]").val()}).done((function(a){e(a.data.ec)})).fail((function(e){a(e.responseJSON)}))})),approve:e=>{jQuery("#paypal-spb-fields [name=paypal-brasil-spb-order-id]").val(e.orderID),jQuery("#paypal-spb-fields [name=paypal-brasil-spb-payer-id]").val(e.payerID),jQuery("#paypal-spb-fields [name=paypal-brasil-spb-pay-id]").val(e.paymentID),r.PaypalPayments.submitForm()},error:e=>{r.PaypalPayments.triggerUpdateCheckout(),e&&(r.PaypalPayments.setNotices(e.data.error_notice),r.PaypalPayments.scrollTop())},cancel:()=>{r.PaypalPayments.triggerUpdateCheckout(),r.PaypalPayments.setNotices(paypal_brasil_spb_settings.cancel_message),r.PaypalPayments.scrollTop()}}}},a={};function t(r){var o=a[r];if(void 0!==o)return o.exports;var n=a[r]={exports:{}};return e[r](n,n.exports,t),n.exports}t.d=(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{t.r({});var e=t("./src/frontend/frontend-shared.ts"),a=t("./src/frontend/frontend-spb/frontend-spb-api.ts");class r extends e.PaypalPayments{constructor(){super(),jQuery(document).on("updated_checkout","body",this.updateCheckoutButton),jQuery("form.woocommerce-checkout, form#order_review").on("change","[name=payment_method]",this.updateCheckoutButton),jQuery(document).on("updated_checkout","body",this.renderPayPalButton),paypal_brasil_settings.is_order_pay_page&&jQuery(document.body).trigger("updated_checkout")}updateCheckoutButton(){e.PaypalPayments.isPaypalPaymentsSelected()?e.PaypalPayments.showPaypalButton():e.PaypalPayments.showDefaultButton()}renderPayPalButton(){document.getElementById("paypal-button").innerHTML="",paypal.Buttons({locale:"pt_BR",style:{size:"responsive",color:paypal_brasil_settings.style.color,shape:paypal_brasil_settings.style.format,label:"pay"},createOrder:a.paymentSpb.create,onApprove:a.paymentSpb.approve,onError:a.paymentSpb.error,onCancel:a.paymentSpb.cancel}).render("#paypal-button")}}new r})(),t.r(r)})();
//# sourceMappingURL=frontend-spb.js.map