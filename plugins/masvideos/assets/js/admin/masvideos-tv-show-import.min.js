!function(i,s){function t(i){this.$form=i,this.xhr=!1,this.mapping=masvideos_tv_show_import_params.mapping,this.position=0,this.file=masvideos_tv_show_import_params.file,this.update_existing=masvideos_tv_show_import_params.update_existing,this.delimiter=masvideos_tv_show_import_params.delimiter,this.security=masvideos_tv_show_import_params.import_nonce,this.imported=0,this.failed=0,this.updated=0,this.skipped=0,this.$form.find(".masvideos-importer-progress").val(0),this.run_import=this.run_import.bind(this),this.run_import()}t.prototype.run_import=function(){var t=this;i.ajax({type:"POST",url:ajaxurl,data:{action:"masvideos_do_ajax_tv_show_import",position:t.position,mapping:t.mapping,file:t.file,update_existing:t.update_existing,delimiter:t.delimiter,security:t.security},dataType:"json",success:function(i){i.success&&(t.position=i.data.position,t.imported+=i.data.imported,t.failed+=i.data.failed,t.updated+=i.data.updated,t.skipped+=i.data.skipped,t.$form.find(".masvideos-importer-progress").val(i.data.percentage),"done"===i.data.position?s.location=i.data.url+"&tv-shows-imported="+parseInt(t.imported,10)+"&tv-shows-failed="+parseInt(t.failed,10)+"&tv-shows-updated="+parseInt(t.updated,10)+"&tv-shows-skipped="+parseInt(t.skipped,10):t.run_import())}}).fail(function(i){s.console.log(i)})},i.fn.masvideos_tv_show_importer=function(){return new t(this),this},i(".masvideos-importer").masvideos_tv_show_importer()}(jQuery,window);