jQuery(function(n){function s(){return{language:{errorLoading:function(){return masvideos_enhanced_select_params.i18n_searching},inputTooLong:function(e){var t=e.input.length-e.maximum;return 1==t?masvideos_enhanced_select_params.i18n_input_too_long_1:masvideos_enhanced_select_params.i18n_input_too_long_n.replace("%qty%",t)},inputTooShort:function(e){var t=e.minimum-e.input.length;return 1==t?masvideos_enhanced_select_params.i18n_input_too_short_1:masvideos_enhanced_select_params.i18n_input_too_short_n.replace("%qty%",t)},loadingMore:function(){return masvideos_enhanced_select_params.i18n_load_more},maximumSelected:function(e){return 1===e.maximum?masvideos_enhanced_select_params.i18n_selection_too_long_1:masvideos_enhanced_select_params.i18n_selection_too_long_n.replace("%qty%",e.maximum)},noResults:function(){return masvideos_enhanced_select_params.i18n_no_matches},searching:function(){return masvideos_enhanced_select_params.i18n_searching}}}}try{n(document.body).on("masvideos-enhanced-select-init",function(){n(":input.masvideos-enhanced-select, :input.chosen_select").filter(":not(.enhanced)").each(function(){var e=n.extend({minimumResultsForSearch:10,allowClear:!!n(this).data("allow_clear"),placeholder:n(this).data("placeholder")},s());n(this).selectWoo(e).addClass("enhanced")}),n(":input.masvideos-enhanced-select-nostd, :input.chosen_select_nostd").filter(":not(.enhanced)").each(function(){var e=n.extend({minimumResultsForSearch:10,allowClear:!0,placeholder:n(this).data("placeholder")},s());n(this).selectWoo(e).addClass("enhanced")}),n(":input.masvideos-enhanced-search").filter(":not(.enhanced)").each(function(){var e={allowClear:!!n(this).data("allow_clear"),placeholder:n(this).data("placeholder"),minimumInputLength:n(this).data("minimum_input_length")?n(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:masvideos_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:n(this).data("action")||"masvideos_json_search_videos",security:n(this).data("nonce_key")?masvideos_enhanced_select_params[n(this).data("nonce_key")]:masvideos_enhanced_select_params.search_movies_nonce,exclude:n(this).data("exclude"),include:n(this).data("include"),limit:n(this).data("limit")}},processResults:function(e){var a=[];return e&&n.each(e,function(e,t){a.push({id:e,text:t})}),{results:a}},cache:!0}};if(e=n.extend(e,s()),n(this).selectWoo(e).addClass("enhanced"),n(this).data("sortable")){var a=n(this),t=n(this).next(".select2-container").find("ul.select2-selection__rendered");t.sortable({placeholder:"ui-state-highlight select2-selection__choice",forcePlaceholderSize:!0,items:"li:not(.select2-search__field)",tolerance:"pointer",stop:function(){n(t.find(".select2-selection__choice").get().reverse()).each(function(){var e=n(this).data("data").id,t=a.find('option[value="'+e+'"]')[0];a.prepend(t)})}})}else n(this).prop("multiple")&&n(this).on("change",function(){var e=n(this).children();e.sort(function(e,t){var a=e.text.toLowerCase(),n=t.text.toLowerCase();return n<a?1:a<n?-1:0}),n(this).html(e)})}),n(":input.masvideos-customer-search").filter(":not(.enhanced)").each(function(){var e={allowClear:!!n(this).data("allow_clear"),placeholder:n(this).data("placeholder"),minimumInputLength:n(this).data("minimum_input_length")?n(this).data("minimum_input_length"):"1",escapeMarkup:function(e){return e},ajax:{url:masvideos_enhanced_select_params.ajax_url,dataType:"json",delay:1e3,data:function(e){return{term:e.term,action:"masvideos_json_search_customers",security:masvideos_enhanced_select_params.search_customers_nonce,exclude:n(this).data("exclude")}},processResults:function(e){var a=[];return e&&n.each(e,function(e,t){a.push({id:e,text:t})}),{results:a}},cache:!0}};if(e=n.extend(e,s()),n(this).selectWoo(e).addClass("enhanced"),n(this).data("sortable")){var a=n(this),t=n(this).next(".select2-container").find("ul.select2-selection__rendered");t.sortable({placeholder:"ui-state-highlight select2-selection__choice",forcePlaceholderSize:!0,items:"li:not(.select2-search__field)",tolerance:"pointer",stop:function(){n(t.find(".select2-selection__choice").get().reverse()).each(function(){var e=n(this).data("data").id,t=a.find('option[value="'+e+'"]')[0];a.prepend(t)})}})}}),n(":input.masvideos-category-search").filter(":not(.enhanced)").each(function(){var e=n.extend({allowClear:!!n(this).data("allow_clear"),placeholder:n(this).data("placeholder"),minimumInputLength:n(this).data("minimum_input_length")?n(this).data("minimum_input_length"):3,escapeMarkup:function(e){return e},ajax:{url:masvideos_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:"masvideos_json_search_categories",security:masvideos_enhanced_select_params.search_categories_nonce}},processResults:function(e){var a=[];return e&&n.each(e,function(e,t){a.push({id:t.slug,text:t.formatted_name})}),{results:a}},cache:!0}},s());n(this).selectWoo(e).addClass("enhanced")})}).on("masvideos_backbone_modal_before_remove",function(){n(".masvideos-enhanced-select, :input.masvideos-enhanced-search, :input.masvideos-customer-search").filter(".select2-hidden-accessible").selectWoo("close")}).trigger("masvideos-enhanced-select-init"),n("html").on("click",function(e){this===e.target&&n(".masvideos-enhanced-select, :input.masvideos-enhanced-search, :input.masvideos-customer-search").filter(".select2-hidden-accessible").selectWoo("close")})}catch(e){window.console.log(e)}});