!function(){"use strict";var e=wp.i18n,t=wp.components;const{useState:l,Fragment:n}=wp.element,{Dropdown:a,ColorPicker:o,Button:p}=wp.components,{__:r}=wp.i18n;var m=e=>{const{value:t,title:r="",defaultColor:m,onChange:i,className:d,disableAlpha:s,boxPosition:c="top left",globalColors:u=[]}=e,[w,b]=l(t);return wp.element.createElement(a,{position:c,renderToggle:e=>{let{isOpen:l,onToggle:n}=e;return wp.element.createElement("div",{style:{display:"flex"}},m&&m!=w&&wp.element.createElement(p,{icon:"image-rotate",className:"bColorReset",onClick:()=>{i(m),b(m)}}),wp.element.createElement("div",{className:"BColorButtonContainer"},wp.element.createElement("button",{className:"BColorButton",title:r,onClick:n,"aria-expanded":l,style:t?{backgroundColor:t}:{backgroundColor:"transparent"}})))},renderContent:e=>{let{isOpen:l,onToggle:a,onClose:p}=e;return wp.element.createElement(n,null,wp.element.createElement(o,{color:t||"",onChangeComplete:e=>{i(`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`),b(e.hex)},disableAlpha:s||!1}),u.length>0&&wp.element.createElement("div",{style:{display:"flex"},className:"globalColors"},u.map((e=>wp.element.createElement("div",{className:"BColorButtonContainer"},wp.element.createElement("button",{className:"BColorButton",onClick:()=>{i(e.color),b(e)},"aria-expanded":l,style:t?{backgroundColor:e.color}:{backgroundColor:"transparent"}}))))))}})};const{Component:i,Fragment:d,useState:s}=wp.element,{PanelRow:c,__experimentalNumberControl:u}=wp.components,w=u,{__:b}=wp.i18n,h=e=>{const[t,l]=s(!1),{enable:{top:n=!0,right:a=!0,bottom:o=!0,left:p=!0},onChange:r,value:m,title:i,label:u,isShiftStepEnabled:h=!0,isDragEnabled:f=!1,shiftStep:E=10,className:g=" ",width:_="250px",device:C="desktop",onChangeDevice:v}=e,P=(e,l)=>{if(t){const e={...m};e.top=l,e.left=l,e.right=l,e.bottom=l,r(e)}else r({...m,[e]:l})};return wp.element.createElement(d,null,wp.element.createElement(c,null,wp.element.createElement("label",null,i)),wp.element.createElement(c,null,wp.element.createElement("div",{className:g,style:{width:_,maxWidth:"100%",display:"flex"}},n&&wp.element.createElement(w,{label:u.top||b("Top","bsection"),isShiftStepEnabled:h,isDragEnabled:f,onChange:e=>{P("top",parseInt(e))},shiftStep:E,value:m.top}),a&&wp.element.createElement(w,{label:u.right||b("Right","bsection"),isShiftStepEnabled:h,isDragEnabled:f,onChange:e=>P("right",parseInt(e)),shiftStep:E,value:m.right}),o&&wp.element.createElement(w,{label:u.bottom||b("Bottom","bsection"),isShiftStepEnabled:h,isDragEnabled:f,onChange:e=>P("bottom",parseInt(e)),shiftStep:E,value:m.bottom}),p&&wp.element.createElement(w,{label:u.left||b("Left","bsection"),isShiftStepEnabled:h,isDragEnabled:f,onChange:e=>P("left",parseInt(e)),shiftStep:E,value:m.left}))))};h.defaultProps={enable:{},value:{top:0,right:0,bottom:0,left:0},label:{}};var f=h;var E=l=>{const{attributes:n,setAttributes:a}=l,{titleFontSize:o,height:p,width:r,showName:i,print:d,onlyPDF:s,defaultBrowser:c,adobeEmbedder:u,downloadButton:w,downloadButtonText:b,fullscreenButton:h,fullscreenButtonText:E,newWindow:g,protect:_,thumbMenu:C,sidebarOpen:v,initialPage:P,zoomLevel:F,alert:y,lastVersion:S,hrScroll:N,adobeOptions:T,popupBtnStyle:B,popupBtnText:k}=n;return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(t.PanelBody,{title:(0,e.__)("Settings","pdfp"),initialOpen:!1},wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"adobeEmbedder",className:"label"},(0,e.__)("use adobe PDF embedder","pdfp")),wp.element.createElement(t.FormToggle,{id:"adobeEmbedder",checked:u,onChange:()=>a({adobeEmbedder:!u})})),u&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"embedMode",className:"label"},(0,e.__)("Embed Mode","pdfp")),wp.element.createElement(t.SelectControl,{options:[{label:"Sized Container",value:"SIZED_CONTAINER"},{label:"Full Window",value:"FULL_WINDOW"},{label:"In-Line",value:"IN_LINE"},{label:"Lightbox",value:"LIGHT_BOX"}],value:T?.embedMode,onChange:e=>a({adobeOptions:{...T,embedMode:e}})})),"LIGHT_BOX"===T?.embedMode&&wp.element.createElement(t.PanelRow,null,wp.element.createElement(t.TextControl,{label:(0,e.__)("Button Text","pdfp"),value:k,onChange:e=>a({popupBtnText:e})})),["SIZED_CONTAINER","IN_LINE","LIGHT_BOX","FULL_WINDOW"].includes(T?.embedMode)&&wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"showPrintPDF",className:"label"},(0,e.__)("Show Print Button","pdfp")),wp.element.createElement(t.FormToggle,{id:"showPrintPDF",checked:T?.showPrintPDF,onChange:()=>a({adobeOptions:{...T,showPrintPDF:!T?.showPrintPDF}})})),["SIZED_CONTAINER","IN_LINE","LIGHT_BOX","FULL_WINDOW"].includes(T?.embedMode)&&wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"showDownloadPDF",className:"label"},(0,e.__)("Show Download Button","pdfp")),wp.element.createElement(t.FormToggle,{id:"showDownloadPDF",checked:T?.showDownloadPDF,onChange:()=>a({adobeOptions:{...T,showDownloadPDF:!T?.showDownloadPDF}})})),["SIZED_CONTAINER"].includes(T.embedMode)&&wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"showFullScreen",className:"label"},(0,e.__)("Show Fullscreen Button","pdfp")),wp.element.createElement(t.FormToggle,{id:"showFullScreen",checked:T?.showFullScreen,onChange:()=>a({adobeOptions:{...T,showFullScreen:!T?.showFullScreen}})})),["FULL_WINDOW"].includes(T?.embedMode)&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"showAnnotationTools",className:"label"},(0,e.__)("Show Annotation Tools","pdfp")),wp.element.createElement(t.FormToggle,{id:"showAnnotationTools",checked:T?.showAnnotationTools,onChange:()=>a({adobeOptions:{...T,showAnnotationTools:!T?.showAnnotationTools}})})))),!u&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"protect",className:"label"},(0,e.__)("Protect my content","pdfp")),wp.element.createElement(t.FormToggle,{id:"protect",checked:_,onChange:()=>a({protect:!_})})),_&&wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"alert",className:"label"},(0,e.__)("Enable Alert","pdfp")),wp.element.createElement(t.FormToggle,{id:"alert",checked:y,onChange:()=>a({alert:!y})})),!_&&wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"print",className:"label"},(0,e.__)("Allow print","pdfp")),wp.element.createElement(t.FormToggle,{id:"print",checked:d,onChange:()=>a({print:!d})})),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"showName",className:"label"},(0,e.__)("Show title on top","pdfp")),wp.element.createElement(t.FormToggle,{id:"showName",checked:i,onChange:()=>a({showName:!i})})),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"onlyPDF",className:"label"},(0,e.__)("Raw PDF","pdfp")),wp.element.createElement(t.FormToggle,{id:"onlyPDF",checked:s,onChange:()=>a({onlyPDF:!s})})),!_&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"defaultBrowser",className:"label"},(0,e.__)("Use browser pdf viewer","pdfp")),wp.element.createElement(t.FormToggle,{id:"defaultBrowser",checked:c,onChange:()=>a({defaultBrowser:!c})})),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"downloadButton",className:"label"},(0,e.__)("Show download button","pdfp")),wp.element.createElement(t.FormToggle,{id:"downloadButton",checked:w,onChange:()=>a({downloadButton:!w})})),w&&wp.element.createElement(t.TextControl,{label:"",value:b,onChange:e=>a({downloadButtonText:e})})),!_&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"fullscreenButton",className:"label"},(0,e.__)("Show fullscreen button","pdfp")),wp.element.createElement(t.FormToggle,{id:"fullscreenButton",checked:h,onChange:()=>a({fullscreenButton:!h})})),h&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(t.TextControl,{label:"",value:E,onChange:e=>a({fullscreenButtonText:e})}),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"newWindow",className:"label"},(0,e.__)("Open in new window","pdfp")),wp.element.createElement(t.FormToggle,{id:"newWindow",checked:g,onChange:()=>a({newWindow:!g})})))),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"thumbMenu",className:"label"},(0,e.__)("Enable thumbnails toggle menu","pdfp")),wp.element.createElement(t.FormToggle,{id:"thumbMenu",checked:C,onChange:()=>a({thumbMenu:!C})})),C&&wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"sidebarOpen",className:"label"},(0,e.__)("Show Thumb by Default","pdfp")),wp.element.createElement(t.FormToggle,{id:"sidebarOpen",checked:v,onChange:()=>a({sidebarOpen:!v})})),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"lastVersion",className:"label"},(0,e.__)("Load the last version of the PDF","pdfp")),wp.element.createElement(t.FormToggle,{id:"lastVersion",checked:S,onChange:()=>a({lastVersion:!S})})),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"hrScroll",className:"label"},(0,e.__)("Horizontal Scrollbar","pdfp")),wp.element.createElement(t.FormToggle,{id:"hrScroll",checked:N,onChange:()=>a({hrScroll:!N})})),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{className:"label"},(0,e.__)("Initail page","pdfp")),wp.element.createElement(t.__experimentalNumberControl,{isShiftStepEnabled:!0,onChange:e=>a({initialPage:e}),shiftStep:1,value:P})),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{className:"label"},(0,e.__)("Zoom Level (%)","pdfp")),wp.element.createElement(t.__experimentalNumberControl,{help:(0,e.__)("leave empty to set auto","pdfp"),isShiftStepEnabled:!0,onChange:e=>a({zoomLevel:e}),shiftStep:1,value:F})))),wp.element.createElement(t.PanelBody,{title:(0,e.__)("Style","pdfp"),initialOpen:!1},wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"Height",className:"label"},(0,e.__)("Height","pdfp")),wp.element.createElement(t.__experimentalUnitControl,{onChange:e=>a({height:e}),value:p,units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100},{value:"vh",label:"vh",default:100}],isResetValueOnUnitChange:!0})),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"width",className:"label"},(0,e.__)("Width","pdfp")),wp.element.createElement(t.__experimentalUnitControl,{onChange:e=>a({width:e}),value:r,units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100},{value:"vw",label:"vw",default:100}],isResetValueOnUnitChange:!0})),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",{htmlFor:"titleFontSize",className:"label"},(0,e.__)("Title Font Size","pdfp")),wp.element.createElement(t.__experimentalUnitControl,{onChange:e=>a({titleFontSize:e}),value:o,units:[{value:"px",label:"px",default:16},{value:"em",label:"em",default:1},{value:"rem",label:"rem",default:1}],isResetValueOnUnitChange:!0}))),"LIGHT_BOX"===T?.embedMode&&u&&wp.element.createElement(t.PanelBody,{title:(0,e.__)("Adobe Lightbox Button Style","pdfp")},wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",null,(0,e.__)("Background","bpm")),wp.element.createElement(m,{value:B?.background,onChange:e=>a({popupBtnStyle:{...B,background:e}})})),wp.element.createElement(t.PanelRow,null,wp.element.createElement("label",null,(0,e.__)("Text Color","bpm")),wp.element.createElement(m,{value:B?.color,onChange:e=>a({popupBtnStyle:{...B,color:e}})})),wp.element.createElement(f,{title:(0,e.__)("Padding","pdfp"),value:B?.padding||{},onChange:e=>a({popupBtnStyle:{...B,padding:e}})})))};const{Fragment:g,useState:_,useEffect:C,useRef:v}=wp.element,{RichText:P}=wp.blockEditor;var F=t=>{let{attributes:l,clientId:n,setAttributes:a,isSelected:o,isPreset:p=!1}=t;const r="http://localhost/freemius/wp-content/uploads/2022/02/temp.pdf",{uniqueId:m="pdfpnewId",file:i=pdfp?.placeholder||r,title:d,titleFontSize:s,height:c,width:u,showName:w,print:b,onlyPDF:h,downloadButton:f,downloadButtonText:E,fullscreenButton:_,fullscreenButtonText:F,protect:y,thumbMenu:S,hrScroll:N,initialPage:T,zoomLevel:B,additional:k,adobeEmbedder:D,adobeOptions:x,align:O,popupBtnStyle:I,CSS:R,popupBtnText:A}=l,L=v();C((()=>{!D&&L.current&&(L.current.innerHTML=""),L?.current&&"LIGHT_BOX"!=x.embedMode&&M()}),[x,D,i]),C((()=>{document.getElementById(m)&&(document.getElementById(m).style.height=c)}),[x.embedMode]);const M=()=>{"undefined"!=typeof AdobeDC&&new AdobeDC.View({clientId:fpdfAdmin?.adobeClientKey,divId:m}).previewFile({content:{location:{url:i}},metaData:{fileName:d||" "}},x)};let U="";if(i.includes(window.location.origin)){let e="&z=auto";B&&(e="&z="+B/100);const t=h?"raw/raw.html":y?"web/pviewer.html":"web/viewer.html";U=`${pdfp?.dir}pdfjs-new/${t}?file=${i}${e}&nobaki=${!y&&f?"vera":"false"}&stdono=${b&&!y?"vera":"false"}&open=false&onlypdf=${h?"vera":"false"}&hrscroll=${N?"vera":"false"}&side=${S}#page=${T}`}else i.includes(".google.com")&&(U=i);return C((()=>{a({CSS:`.${m}btn {background: ${I?.background}; color: ${I?.color}; padding: ${I?.padding?.top}px ${I?.padding?.right}px ${I?.padding?.bottom}px ${I?.padding?.left}px}`})}),[I,m,c]),wp.element.createElement("div",null,D?wp.element.createElement(wp.element.Fragment,null,fpdfAdmin?.adobeClientKey?wp.element.createElement("div",{className:"pdfp_editor_wrapper pdfp_wrapper",ref:L,style:{width:`${"LIGHT_BOX"===x?.embedMode?"fit-content":u} `},"data-align":O},o?"":wp.element.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,minHeight:"400px"}}),"LIGHT_BOX"===x?.embedMode?wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("style",null,R),wp.element.createElement("button",{className:`${m}btn`,onClick:()=>{!p&&M()}},A||i?.split(".").slice(0,-1).join("."))):wp.element.createElement("div",{id:m,style:{height:c}})):wp.element.createElement("div",{style:{padding:"20px",border:"1px solid #ddd"}},wp.element.createElement("h2",null,(0,e.__)("Adobe Client Key Required to use Adobe Embedder","pdfp")),wp.element.createElement("a",{className:"button button-primary",target:"_blank",href:`${pdfp?.siteUrl}/wp-admin/edit.php?post_type=pdfposter&page=fpdf-settings#tab=cloud-api`},(0,e.__)("Generate Client key","pdfp")))):wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{className:`pdfp_wrapper ${o&&"pdfp_editor_wrapper"} ${k.Class}`,style:{width:u}},w&&!p&&wp.element.createElement(P,{tagName:"p",value:d,allowedFormats:[],style:{fontSize:s,margin:"20px"},onChange:e=>a({title:e}),placeholder:(0,e.__)("Title","pdfp")}),i.includes("dropbox.com")?wp.element.createElement("div",{style:{border:"2px solid #ddd"}},wp.element.createElement("p",null,i),wp.element.createElement("p",null,(0,e.__)("Preview is not available for dropbox","pdfp"))):wp.element.createElement(g,null,wp.element.createElement("div",{className:"cta_wrapper"},f&&!y&&wp.element.createElement("a",{className:"pdfp_download",onClick:e=>e.preventDefault(),download:!0,href:i},wp.element.createElement("button",{className:"pdfp_download_btn"},E)),_&&!y&&wp.element.createElement("a",{href:U,onClick:e=>e.preventDefault(),target:"_blank"},wp.element.createElement("button",null,F))),wp.element.createElement("div",{className:"iframe_wrapper"},wp.element.createElement("div",{className:"pdfp_frame_overlay"}),wp.element.createElement("iframe",{className:"pdfp_iframe",height:c,style:{height:c},src:U}))))))};const y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await jQuery.ajax({method:e,url:pdfp?.ajax_url,dataType:"json",data:{action:"pdf_poster_ajax",nonce:pdfp?.nonce,...t}}).then((e=>e)).catch((e=>console.log({error:e})))};function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},S.apply(this,arguments)}const{useEffect:N,useState:T}=wp.element;var B=l=>{const{attributes:n,setAttributes:a,preset:o,setPreset:p,setModalOpen:r}=l,{statePresets:m=[]}=n,[i,d]=T(!1),s=e=>{p({...o,preset:{...o.preset,...e}})};return wp.element.createElement("div",null,wp.element.createElement(t.Modal,{shouldCloseOnClickOutside:!1,title:(0,e.__)("Preset","pdfp"),onRequestClose:()=>{r(!1),p(null)},className:"pdfpPresetModal"},wp.element.createElement(t.TextControl,{value:o.name,onChange:e=>p({...o,name:e})}),wp.element.createElement("div",{className:"pdfpPreset"},wp.element.createElement("div",{className:"options"},wp.element.createElement(E,{attributes:o.preset||{},setAttributes:s})),wp.element.createElement("div",{className:"preview"},wp.element.createElement(F,S({isPreset:!0},l,{attributes:o.preset,setAttributes:s})))),wp.element.createElement("div",{className:"actionsWrapper"},wp.element.createElement("div",{className:"actions"},wp.element.createElement("div",null),wp.element.createElement("div",null,i&&wp.element.createElement("div",{class:"pdfp_loader"}),wp.element.createElement(t.Button,{disabled:i,variant:"primary",onClick:async e=>{d(!0);const{addional:t,file:l,uniqueId:n,title:i,CSS:s,...c}=o.preset,{data:u}=await y("POST",{model:"Presets",method:"create",name:o.name,preset:c,id:o.id});if(d(!1),u){if(o.id)a({statePresets:m.map((e=>e.id===o.id?o:e))});else{const e=[...m,{...o,id:u.id}];a({statePresets:e})}p({...o,id:u.id})}r(!1)}},o?.id?(0,e.__)("Update","pdfp"):(0,e.__)("Create","pdfp")))))))};const{Fragment:k}=wp.element,{MediaUpload:D,MediaUploadCheck:x}=wp.blockEditor,{Button:O,PanelRow:I,TextControl:R}=wp.components;var A=function(e){let{value:t,type:l=[],onSelect:n}=e;return wp.element.createElement("div",{className:"bMediaUpload"},wp.element.createElement(k,null,wp.element.createElement(x,null,wp.element.createElement(D,{allowedTypes:l,onSelect:e=>n(e.url),render:e=>{let{open:t}=e;return wp.element.createElement(O,{className:"button button-primary",onClick:t,icon:"upload"})}})),wp.element.createElement(I,{className:"width-100"},wp.element.createElement(R,{id:"picker_field",value:t,onChange:e=>n(e)}))))};var L=e=>{let{setAttributes:l,clientId:n,appId:a,developerKey:o}=e;var p=["https://www.googleapis.com/auth/drive.file"];if(!n||!a||!o)return wp.element.createElement(wp.element.Fragment,null);var r,m=!1;function i(){window.gapi.auth.authorize({client_id:n,scope:p,immediate:!1},s)}function d(){m=!0,c()}function s(e){e&&!e.error&&(r=e.access_token,c())}function c(){if(m&&r){var e=new google.picker.View(google.picker.ViewId.DOCS);(new google.picker.PickerBuilder).setAppId(a).setOAuthToken(r).addView(e).addView(new google.picker.DocsUploadView).setDeveloperKey(o).setCallback(u).build().setVisible(!0)}}function u(e){e.action==google.picker.Action.PICKED&&(e.docs?.[0]?.embedUrl?l({file:e.docs[0]?.embedUrl}):c())}return wp.element.createElement(t.PanelRow,null,wp.element.createElement("button",{onClick:function(){gapi.load("auth",{callback:i}),gapi.load("picker",{callback:d})},className:"drive-picker-button"},"Choose From Google Drive"))};function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},M.apply(this,arguments)}var U=t=>{let{label:l,className:n,onChange:a,isPremium:o=!1,Component:p,setOpen:r=(()=>{}),...m}=t;return wp.element.createElement(p,M({className:`${n} ${o?"":"bplProIdentifier"}`,label:(t=>o?t:wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("span",{className:"bplOpacity75"},t)," ",wp.element.createElement("span",{className:"labelPro"},(0,e.__)("Pro","text-domain"))))(l),onChange:e=>{o?a(e):r(!0)},isPremium:o},m))};const{Fragment:$,useEffect:W,useRef:j,useState:z}=wp.element,{Panel:V,PanelBody:H,PanelRow:G,FormToggle:X,TextControl:Z,__experimentalNumberControl:q,__experimentalUnitControl:K}=wp.components,{InspectorControls:Q}=wp.blockEditor,{select:J}=wp.data;var Y=l=>{const{getCurrentPostId:n}=J("core/editor"),a=j(null),[o,p]=(j(null),z(!1)),[r,i]=z(!1),[d,s]=z(!1),[c,u]=z(pdfp?.pipe),{attributes:w,preset:b,setPreset:h,setAttributes:E,setModalOpen:g}=l,{uniqueId:_,file:C,title:v,titleFontSize:P,height:F,width:S,showName:N,print:T,onlyPDF:B,defaultBrowser:k,adobeEmbedder:D,downloadButton:x,downloadButtonText:O,fullscreenButton:I,fullscreenButtonText:R,newWindow:M}=w,{protect:Y,thumbMenu:ee,sidebarOpen:te,initialPage:le,zoomLevel:ne,alert:ae,lastVersion:oe,hrScroll:pe,additional:re,adobeOptions:me,popupBtnStyle:ie,popupBtnText:de,statePresets:se=[]}=w;W((()=>{if("undefined"!=typeof Dropbox){options={success:function(e){E({file:e?.[0]?.link})},cancel:function(){},linkType:"preview",multiselect:!1,folderselect:!1};var e=Dropbox.createChooseButton(options);setTimeout((()=>{a.current&&!a.current?.hasChildNodes()&&a.current.appendChild(e)}),1e3)}(async()=>{const{data:e}=await y("GET",{model:"Presets",method:"all"});E({statePresets:e})})()}),[]);const ce=async e=>{s(!0);const{data:t}=await(async e=>await jQuery.ajax({method:"POST",url:pdfp?.ajax_url,dataType:"json",data:{action:"pdf_poster_ajax",nonce:pdfp?.nonce,model:"Presets",method:"delete",id:e}}).then((e=>e)).catch((e=>console.log({err:e}))))(e);t&&E({statePresets:se.filter((t=>t.id!==e))}),i(!1),s(!1)},ue=J("core/editor").getCurrentPostType(),we=n();return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(Q,{style:{marginBottom:"40px"}},wp.element.createElement($,null,wp.element.createElement(V,null,"pdfposter"===ue&&wp.element.createElement(H,null,wp.element.createElement(G,null,wp.element.createElement("div",{className:"pdfp_front_shortcode"},wp.element.createElement("input",{value:`[pdf id=${we}]`}),wp.element.createElement("span",{className:"htooltip"},(0,e.__)("Copy To Clipboard","pdfp"))))),wp.element.createElement(H,null,c&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(G,null,wp.element.createElement("div",{id:"picker_container",ref:a})),wp.element.createElement(L,{setAttributes:E,clientId:fpdfAdmin?.gClientId,appId:fpdfAdmin?.gAppId,developerKey:fpdfAdmin?.gDeveloperKey})),wp.element.createElement(G,null,wp.element.createElement("label",{className:"label"},(0,e.__)("Upload PDF","pdfp"))),wp.element.createElement(A,{type:["application/pdf"],onSelect:e=>E({file:e}),value:C,placeholder:"Audio URL"}),c&&wp.element.createElement(Z,{disabled:!c,label:(0,e.__)("Title","pdfp"),value:v,onChange:e=>E({title:e})}),!c&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(t.ToggleControl,{label:(0,e.__)("Allow print","pdfp"),id:"print",checked:T,onChange:()=>E({print:!T})}),wp.element.createElement(t.ToggleControl,{label:(0,e.__)("Show title on top","pdfp"),id:"showName",checked:N,onChange:()=>E({showName:!N})}),wp.element.createElement(Z,{label:(0,e.__)("Fullscreen Button Text","pdfp"),value:R,onChange:e=>E({fullscreenButtonText:e})}))),c&&wp.element.createElement(H,{title:(0,e.__)("Presets","pdfp")},wp.element.createElement("div",{className:"pdfp-presets"},se.map((l=>wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{className:"pdfp-preset-item"},wp.element.createElement("div",{className:"box",onClick:()=>{E({...l.preset})}},wp.element.createElement("span",null,l.name?.[0]?.toUpperCase())),wp.element.createElement("div",{className:"actions"},wp.element.createElement(t.Dashicon,{icon:"edit",title:(0,e.__)("Edit","pdfp"),onClick:()=>{h(l),g(!0)}}),wp.element.createElement(t.Dashicon,{icon:"trash",title:(0,e.__)("Delete","pdfp"),onClick:e=>{e.preventDefault(),i(l.id)}})),wp.element.createElement("p",null,l?.name||(0,e.__)("Unknown Name","pdfp"))))))),wp.element.createElement(t.Button,{variant:"primary",onClick:()=>{g(!0);const{uniqueId:e,statePresets:t,...l}=w;h({preset:l})}},(0,e.__)("Add New Preset","pdfp"))),wp.element.createElement(H,{title:(0,e.__)("Settings","pdfp"),initialOpen:!1},wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("use adobe PDF embedder","pdfp"),id:"adobeEmbedder",checked:D,onChange:()=>E({adobeEmbedder:!D})}),D&&c&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(G,null,wp.element.createElement("label",{htmlFor:"embedMode",className:"label"},(0,e.__)("Embed Mode","pdfp")),wp.element.createElement(t.SelectControl,{options:[{label:"Sized Container",value:"SIZED_CONTAINER"},{label:"Full Window",value:"FULL_WINDOW"},{label:"In-Line",value:"IN_LINE"},{label:"Lightbox",value:"LIGHT_BOX"}],value:me.embedMode,onChange:e=>E({adobeOptions:{...me,embedMode:e}})})),"LIGHT_BOX"===me?.embedMode&&wp.element.createElement(G,null,wp.element.createElement(Z,{label:(0,e.__)("Button Text","pdfp"),value:de,onChange:e=>E({popupBtnText:e})})),["SIZED_CONTAINER","IN_LINE","LIGHT_BOX","FULL_WINDOW"].includes(me.embedMode)&&wp.element.createElement(G,null,wp.element.createElement("label",{htmlFor:"showPrintPDF",className:"label"},(0,e.__)("Show Print Button","pdfp")),wp.element.createElement(X,{id:"showPrintPDF",checked:me?.showPrintPDF,onChange:()=>E({adobeOptions:{...me,showPrintPDF:!me?.showPrintPDF}})})),["SIZED_CONTAINER","IN_LINE","LIGHT_BOX","FULL_WINDOW"].includes(me.embedMode)&&wp.element.createElement(G,null,wp.element.createElement("label",{htmlFor:"showDownloadPDF",className:"label"},(0,e.__)("Show Download Button","pdfp")),wp.element.createElement(X,{id:"showDownloadPDF",checked:me?.showDownloadPDF,onChange:()=>E({adobeOptions:{...me,showDownloadPDF:!me?.showDownloadPDF}})})),["SIZED_CONTAINER"].includes(me.embedMode)&&wp.element.createElement(G,null,wp.element.createElement("label",{htmlFor:"showFullScreen",className:"label"},(0,e.__)("Show Fullscreen Button","pdfp")),wp.element.createElement(X,{id:"showFullScreen",checked:me?.showFullScreen,onChange:()=>E({adobeOptions:{...me,showFullScreen:!me?.showFullScreen}})})),["FULL_WINDOW"].includes(me.embedMode)&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(G,null,wp.element.createElement("label",{htmlFor:"showAnnotationTools",className:"label"},(0,e.__)("Show Annotation Tools","pdfp")),wp.element.createElement(X,{id:"showAnnotationTools",checked:me?.showAnnotationTools,onChange:()=>E({adobeOptions:{...me,showAnnotationTools:!me?.showAnnotationTools}})})))),!D&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Protect my content","pdfp"),id:"protect",checked:Y,onChange:()=>E({protect:!Y})}),Y&&wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Enable Alert","pdfp"),id:"alert",checked:ae,onChange:()=>E({alert:!ae})}),!Y&&c&&wp.element.createElement(t.ToggleControl,{label:(0,e.__)("Allow print","pdfp"),id:"print",checked:T,onChange:()=>E({print:!T})}),c&&wp.element.createElement(t.ToggleControl,{label:(0,e.__)("Show title on top","pdfp"),id:"showName",checked:N,onChange:()=>E({showName:!N})}),wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Raw PDF","pdfp"),id:"onlyPDF",checked:B,onChange:()=>E({onlyPDF:!B})}),!Y&&wp.element.createElement($,null,wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Use browser pdf viewer","pdfp"),id:"defaultBrowser",checked:k,onChange:()=>E({defaultBrowser:!k})}),wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Show download button","pdfp"),id:"downloadButton",checked:x,onChange:()=>E({downloadButton:!x})}),x&&wp.element.createElement(U,{isPremium:c,Component:Z,label:"Download Button Text",value:O,onChange:e=>E({downloadButtonText:e})})),!Y&&wp.element.createElement($,null,wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Show fullscreen button","pdfp"),id:"fullscreenButton",checked:I,onChange:()=>E({fullscreenButton:!I})}),I&&wp.element.createElement($,null,c&&wp.element.createElement(Z,{label:(0,e.__)("Fullscreen Button Text","pdfp"),value:R,onChange:e=>E({fullscreenButtonText:e})}),wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Open fullscreen in new window","pdfp"),id:"newWindow",checked:M,onChange:()=>E({newWindow:!M})}))),!B&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Enable thumbnails toggle menu","pdfp"),id:"thumbMenu",checked:ee,onChange:()=>E({thumbMenu:!ee})}),ee&&wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Show Thumb by Default","pdfp"),id:"sidebarOpen",checked:te,onChange:()=>E({sidebarOpen:!te})})),wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Load the last version of the PDF","pdfp"),id:"lastVersion",checked:oe,onChange:()=>E({lastVersion:!oe})}),wp.element.createElement(U,{isPremium:c,Component:t.ToggleControl,label:(0,e.__)("Horizontal Scrollbar","pdfp"),id:"hrScroll",checked:pe,onChange:()=>E({hrScroll:!pe})}),wp.element.createElement(U,{label:(0,e.__)("Initail page","pdfp"),isPremium:c,Component:q,isShiftStepEnabled:!0,onChange:e=>E({initialPage:e}),shiftStep:1,value:le}),wp.element.createElement(U,{label:(0,e.__)("Zoom Level (%)","pdfp"),isPremium:c,Component:q,help:(0,e.__)("leave empty to set auto","pdfp"),isShiftStepEnabled:!0,onChange:e=>E({zoomLevel:parseInt(e)}),min:25,max:300,shiftStep:1,value:ne}))),wp.element.createElement(H,{title:(0,e.__)("Style","pdfp"),initialOpen:!1},wp.element.createElement(G,null,wp.element.createElement("label",{htmlFor:"Height",className:"label"},(0,e.__)("Height","pdfp")),wp.element.createElement(K,{onChange:e=>E({height:e}),value:F,units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100},{value:"vh",label:"vh",default:100}],isResetValueOnUnitChange:!0})),wp.element.createElement(G,null,wp.element.createElement("label",{htmlFor:"width",className:"label"},(0,e.__)("Width","pdfp")),wp.element.createElement(K,{onChange:e=>E({width:e}),value:S,units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100},{value:"vw",label:"vw",default:100}],isResetValueOnUnitChange:!0})),c&&wp.element.createElement(K,{label:(0,e.__)("Title Font Size","pdfp"),onChange:e=>E({titleFontSize:e}),value:P,units:[{value:"px",label:"px",default:16},{value:"em",label:"em",default:1},{value:"rem",label:"rem",default:1}],isResetValueOnUnitChange:!0})),"LIGHT_BOX"===me.embedMode&&D&&c&&wp.element.createElement(H,{title:(0,e.__)("Adobe Lightbox Button Style","pdfp")},wp.element.createElement(G,null,wp.element.createElement("label",null,(0,e.__)("Background","bpm")),wp.element.createElement(m,{value:ie?.background,onChange:e=>E({popupBtnStyle:{...ie,background:e}})})),wp.element.createElement(G,null,wp.element.createElement("label",null,(0,e.__)("Text Color","bpm")),wp.element.createElement(m,{value:ie?.color,onChange:e=>E({popupBtnStyle:{...ie,color:e}})})),wp.element.createElement(f,{title:(0,e.__)("Padding","pdfp"),value:ie?.padding||{},onChange:e=>E({popupBtnStyle:{...ie,padding:e}})})),wp.element.createElement(H,{title:(0,e.__)("Additional","pdfp"),initialOpen:!1},wp.element.createElement(U,{isPremium:c,Component:Z,label:(0,e.__)("Class","pdfp"),value:re.Class,onChange:e=>E({additional:{...re,Class:e}})}),wp.element.createElement(U,{isPremium:c,Component:t.TextareaControl,label:(0,e.__)("CSS","pdfp"),value:re.CSS,onChange:e=>E({additional:{...re,CSS:e}})}))))),r&&wp.element.createElement(t.Modal,{title:(0,e.__)("Do you want to delete?","pdfp"),onRequestClose:()=>i(!1)},wp.element.createElement("div",{className:"confirmPresetDelete"},d&&wp.element.createElement("span",{className:"pdfp_loader"}),wp.element.createElement(t.Button,{disabled:d,variant:"primary",onClick:()=>{p(!0),ce(r)}},(0,e.__)("Yes","pdfp")))))},ee=wp.element;const{__:te}=wp.i18n,{MediaUpload:le,MediaUploadCheck:ne,URLPopover:ae}=wp.blockEditor;var oe=e=>{let{setAttributes:l,attributes:n}=e;const{file:a}=n,[o,p]=(0,ee.useState)(""),[r,m]=(0,ee.useState)(!0),[i,d]=(0,ee.useState)(!0),[s,c]=(0,ee.useState)(null),[u,w]=(0,ee.useState)(!1),b=((0,ee.useRef)(null),e=>!!new RegExp("https?","i").test(e));return wp.element.createElement(ee.Fragment,null,wp.element.createElement(t.Placeholder,{icon:wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"html5-block-icon"},wp.element.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),wp.element.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),instructions:te("Upload a PDF or paste/write PDF URL.","pdfp"),label:te("Upload a PDF ","pdfp")},wp.element.createElement(ne,null,wp.element.createElement(le,{allowedTypes:["application/pdf"],onSelect:e=>l({file:e.url}),render:e=>{let{open:l}=e;return wp.element.createElement(t.Button,{isPrimary:!0,onClick:l},te("Upload","pdfp"))}})),wp.element.createElement("div",{className:"h5vpUrlInput"},wp.element.createElement("h3",{style:{fontSize:"15px"}}," Or "),wp.element.createElement("input",{type:"url","aria-label":te("URL","pdfp"),placeholder:te("Paste or type a PDF URL","pdfp"),onChange:e=>{pdfp?.pipe?p(e.target.value):d(!0)},value:o}),wp.element.createElement(t.Button,{label:te("Apply","pdfp"),type:"submit",onClick:e=>{if(e.preventDefault(),!b(o))return m(!1),!1;m(!0),p(""),l({file:o})},isPrimary:!0},te("Apply","pdfp"))),!r&&wp.element.createElement("p",{style:{color:"#bd1818",width:"100%",margin:0}},te("URL is not valid","pdfp"))))};function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},pe.apply(this,arguments)}const{Fragment:re,useState:me,useEffect:ie,useRef:de}=wp.element;var se=function(e){const{attributes:t,setAttributes:l,clientId:n}=e,{uniqueId:a,file:o=pdfp?.placeholder,additional:p,adobeOptions:r}=t,[m,i]=me(!1),[d,s]=me({preset:t});return ie((()=>{l({uniqueId:"pdfp"+n.substr(0,8)}),l({adobeOptions:{...r,updated:!0}})}),[]),o?wp.element.createElement(re,null,wp.element.createElement("style",null,p?.CSS),wp.element.createElement(Y,pe({setModalOpen:i},e,{setPreset:s})),wp.element.createElement(F,e),pdfp?.pipe&&wp.element.createElement(wp.element.Fragment,null,m&&wp.element.createElement(B,pe({preset:d,setPreset:s,setModalOpen:i},e)))):wp.element.createElement(oe,{attributes:t,setAttributes:l})},ce=JSON.parse('{"apiVersion":"1","name":"pdfp/pdfposter","title":"PDF Poster","description":"","category":"design","icon":"pdf","keywords":["PDF poster","Document poster","PDF Embedder"],"textdomain":"pdfp","attributes":{"uniqueId":{"type":"string","default":""},"file":{"type":"string","default":""},"title":{"type":"string","default":""},"titleFontSize":{"type":"string","default":"16px"},"height":{"type":"string","default":"1122px"},"width":{"type":"string","default":"100%"},"showName":{"type":"boolean","default":false},"print":{"type":"boolean","default":false},"onlyPDF":{"type":"boolean","default":false},"defaultBrowser":{"type":"boolean","default":false},"downloadButton":{"type":"boolean","default":false},"downloadButtonText":{"type":"string","default":"Download File"},"fullscreenButton":{"type":"boolean","default":true},"fullscreenButtonText":{"type":"string","default":"View Fullscreen"},"newWindow":{"type":"boolean","default":false},"protect":{"type":"boolean","default":false},"thumbMenu":{"type":"boolean","default":false},"sidebarOpen":{"type":"boolean","default":false},"initialPage":{"type":"number","default":0},"zoomLevel":{"type":"number"},"alert":{"type":"boolean","default":false},"lastVersion":{"type":"boolean","default":false},"hrScroll":{"type":"boolean","default":false},"additional":{"type":"object","default":{"ID":"","Class":"","CSS":""}},"adobeEmbedder":{"type":"boolean","default":false},"adobeOptions":{"type":"object","default":{"showDownloadPDF":true,"showPrintPDF":true,"showAnnotationTools":true,"showFullScreen":false,"embedMode":"SIZED_CONTAINER"}},"popupBtnStyle":{"type":"object","default":{"background":"#2271b1","color":"#fff","padding":{"top":10,"right":20,"bottom":10,"left":10}}},"popupBtnText":{"type":"string","default":"Open Document"},"CSS":{"type":"string","default":""}},"supports":{"html":false,"lock":false},"example":{"attributes":{"preview":true}}}');const{registerBlockType:ue}=wp.blocks;ue(ce,{edit:se,save:()=>null});var we={data:{type:"object",default:{tringle_text:""}}};const{Panel:be,PanelBody:he,SelectControl:fe}=wp.components,{InspectorControls:Ee}=wp.blockEditor,{withSelect:ge}=wp.data,{compose:_e}=wp.compose;var Ce=_e([ge(((e,t)=>({docs:e("core").getEntityRecords("postType","pdfposter",{per_page:100})})))])((e=>{const{props:{attributes:t,setAttributes:l},docs:n}=e,{data:a}=t;let o;return n&&(o=n.map(((e,t)=>({label:e?.title?.rendered,value:e?.id}))),o=[{label:"Select",value:null},...o]),wp.element.createElement(Ee,{style:{marginBottom:"40px"}},wp.element.createElement(be,null,wp.element.createElement(he,null,wp.element.createElement(fe,{label:"Size",value:a?.tringle_text,options:o,onChange:e=>l({data:{tringle_text:e}})}))))}));const{Fragment:ve,useEffect:Pe,useState:Fe}=wp.element;var ye=function(e){const{attributes:t}=e,{data:{tringle_text:l}}=t,[n,a]=Fe({});Pe((()=>{jQuery.get(pdfp?.siteUrl+"/wp-json/pdfposter/v1/single/"+l,(function(e){a(e)}))}),[t]);const{file:o=pdfp?.placeholder,title:p,titleFontSize:r,height:m="1122px",width:i="100%",showName:d,print:s,onlyPDF:c,downloadButton:u,downloadButtonText:w,fullscreenButton:b,fullscreenButtonText:h,protect:f,thumbMenu:E,initialPage:g}=n,_=`${pdfp?.dir}pdfjs/web/${f?"pviewer.php":"viewer.php"}?file=${o}&nobaki=${!f&&u?"vera":"false"}&stdono=${s&&!f?"vera":"false"}&open=false&onlypdf=${c?"vera":"false"}&side=${E}#page=${g}`;return wp.element.createElement(ve,null,wp.element.createElement(Ce,{props:e}),wp.element.createElement("div",{className:"pdfp_wrapper",style:{width:i}},d&&wp.element.createElement("p",{style:{fontSize:r}},p),wp.element.createElement("div",{className:"cta_wrapper"},u&&!f&&wp.element.createElement("a",{className:"pdfp_download",download:!0,href:o},wp.element.createElement("button",{className:"pdfp_download_btn"},w)),b&&!f&&wp.element.createElement("a",{href:_,target:"_blank"},wp.element.createElement("button",null,h))),wp.element.createElement("div",{className:"iframe_wrapper"},wp.element.createElement("div",{className:"pdfp_frame_overlay"}),wp.element.createElement("iframe",{className:"pdfp_iframe",height:m,style:{height:m},src:_}))))};const{registerBlockType:Se}=wp.blocks;Se("meta-box/document-embedder",{title:(0,e.__)("PDF Poster Selector","pdfp"),icon:"pdf",category:"design",keywords:[(0,e.__)("PDF Poster","pdfp"),(0,e.__)("PDF Viewer","pdfp")],supports:{html:!1},attributes:we,getEditWrapperProps:()=>{},edit:ye,save:()=>null,example:{attributes:!0}})}();
//# sourceMappingURL=editor.js.map