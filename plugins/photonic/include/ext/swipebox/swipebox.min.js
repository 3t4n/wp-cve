/*! Swipebox v1.5.2 | Constantin Saguin csag.co | MIT License | github.com/brutaldesign/swipebox */
!function(b,c,m,u){m.swipebox=function(s,e){m(s).addClass("swipebox");var n,o,t={useCSS:!0,useSVG:!0,initialIndexOnArray:0,removeBarsOnMobile:!0,hideCloseButtonOnMobile:!1,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"cccccc",beforeOpen:null,afterOpen:null,afterClose:null,afterMedia:null,nextSlide:null,prevSlide:null,loopAtEnd:!1,autoplayVideos:!1,queryStringData:{},toggleClassOnLoad:""},r=this,h=[],a=".swipebox",i=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),l=null!==i||c.createTouch!==u||"ontouchstart"in b||"onmsgesturechange"in b||navigator.msMaxTouchPoints,d=!!c.createElementNS&&!!c.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,g=b.innerWidth||m(b).width(),p=b.innerHeight||m(b).height(),w=0;r.settings={},m.swipebox.close=function(){n.closeSlide()},m.swipebox.extend=function(){return n},r.init=function(){r.settings=m.extend({},t,e),Array.isArray(s)?(h=s,n.target=m(b),n.init(r.settings.initialIndexOnArray)):m(c).on("click",a,function(e){return"slide current"!==e.target.parentNode.className&&(Array.isArray(s)||(n.destroy(),o=m(a),n.actions()),h=[],i||(t="data-rel",i=m(this).attr(t)),i||(t="rel",i=m(this).attr(t)),(o=i&&""!==i&&"nofollow"!==i?m(a).filter("["+t+'="'+i+'"]'):m(a)).each(function(){var e=null,t=null;m(this).attr("title")&&(e=m(this).attr("title")),m(this).attr("href")&&(t=m(this).attr("href")),h.push({href:t,title:e})}),i=o.index(m(this)),e.preventDefault(),e.stopPropagation(),n.target=m(e.target),void n.init(i));var t,i})},n={init:function(e){r.settings.beforeOpen&&r.settings.beforeOpen(),this.target.trigger("swipebox-start"),m.swipebox.isOpen=!0,this.build(),this.openSlide(e),this.openMedia(e),this.preloadMedia(e+1),this.preloadMedia(e-1),r.settings.afterOpen&&r.settings.afterOpen(e)},build:function(){var e,t=this;m("body").append('<div id="swipebox-overlay">\t\t\t\t\t<div id="swipebox-container">\t\t\t\t\t\t<div id="swipebox-slider"></div>\t\t\t\t\t\t<div id="swipebox-top-bar">\t\t\t\t\t\t\t<div id="swipebox-title"></div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div id="swipebox-bottom-bar">\t\t\t\t\t\t\t<div id="swipebox-arrows">\t\t\t\t\t\t\t\t<a id="swipebox-prev"></a>\t\t\t\t\t\t\t\t<a id="swipebox-next"></a>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<a id="swipebox-close"></a>\t\t\t\t\t</div>\t\t\t</div>'),d&&!0===r.settings.useSVG&&(e=(e=m("#swipebox-close").css("background-image")).replace("png","svg"),m("#swipebox-prev, #swipebox-next, #swipebox-close").css({"background-image":e})),i&&r.settings.removeBarsOnMobile&&m("#swipebox-bottom-bar, #swipebox-top-bar").remove(),m.each(h,function(){m("#swipebox-slider").append('<div class="slide"></div>')}),t.setDim(),t.actions(),l&&t.gesture(),t.keyboard(),t.animBars(),t.resize()},setDim:function(){var e,t,i;"onorientationchange"in b?b.addEventListener("orientationchange",function(){0===b.orientation?(e=g,t=p):90!==b.orientation&&-90!==b.orientation||(e=p,t=g)},!1):(e=b.innerWidth||m(b).width(),t=b.innerHeight||m(b).height()),i={width:e,height:t},m("#swipebox-overlay").css(i)},resize:function(){var e=this;m(b).resize(function(){e.setDim()}).resize()},supportTransition:function(){for(var e="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),t=0;t<e.length;t++)if(c.createElement("div").style[e[t]]!==u)return e[t];return!1},doCssTrans:function(){if(r.settings.useCSS&&this.supportTransition())return!0},gesture:function(){var t,i,s,o,a,n,r=this,l=!1,d=!1,p={},b={},c=m("#swipebox-top-bar, #swipebox-bottom-bar"),u=m("#swipebox-slider");c.addClass("visible-bars"),r.setTimeout(),m("body").bind("touchstart",function(e){return m(this).addClass("touching"),t=m("#swipebox-slider .slide").index(m("#swipebox-slider .slide.current")),b=e.originalEvent.targetTouches[0],p.pageX=e.originalEvent.targetTouches[0].pageX,p.pageY=e.originalEvent.targetTouches[0].pageY,m("#swipebox-slider").css({"-webkit-transform":"translate3d("+w+"%, 0, 0)",transform:"translate3d("+w+"%, 0, 0)"}),m(".touching").bind("touchmove",function(e){e.preventDefault(),e.stopPropagation(),b=e.originalEvent.targetTouches[0],d||(a=s,s=b.pageY-p.pageY,(50<=Math.abs(s)||l)&&(e=.75-Math.abs(s)/u.height(),u.css({top:s+"px"}),u.css({opacity:e}),l=!0)),o=i,i=b.pageX-p.pageX,n=100*i/g,!d&&!l&&10<=Math.abs(i)&&(m("#swipebox-slider").css({"-webkit-transition":"",transition:""}),d=!0),d&&(0<i?0===t?m("#swipebox-overlay").addClass("leftSpringTouch"):(m("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),m("#swipebox-slider").css({"-webkit-transform":"translate3d("+(w+n)+"%, 0, 0)",transform:"translate3d("+(w+n)+"%, 0, 0)"})):i<0&&(h.length===t+1?m("#swipebox-overlay").addClass("rightSpringTouch"):(m("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),m("#swipebox-slider").css({"-webkit-transform":"translate3d("+(w+n)+"%, 0, 0)",transform:"translate3d("+(w+n)+"%, 0, 0)"}))))}),!1}).bind("touchend",function(e){e.preventDefault(),e.stopPropagation(),m("#swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"}),s=b.pageY-p.pageY,i=b.pageX-p.pageX,n=100*i/g,l?(l=!1,100<=Math.abs(s)&&Math.abs(s)>Math.abs(a)?(e=0<s?u.height():-u.height(),u.animate({top:e+"px",opacity:0},300,function(){r.closeSlide()})):u.animate({top:0,opacity:1},300)):d?(d=!1,10<=i&&o<=i?r.getPrev():i<=-10&&i<=o&&r.getNext()):c.hasClass("visible-bars")?(r.clearTimeout(),r.hideBars()):(r.showBars(),r.setTimeout()),m("#swipebox-slider").css({"-webkit-transform":"translate3d("+w+"%, 0, 0)",transform:"translate3d("+w+"%, 0, 0)"}),m("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),m(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){var e;0<r.settings.hideBarsDelay&&((e=this).clearTimeout(),e.timeout=b.setTimeout(function(){e.hideBars()},r.settings.hideBarsDelay))},clearTimeout:function(){b.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var e=m("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?e.addClass("visible-bars"):(m("#swipebox-top-bar").animate({top:0},500),m("#swipebox-bottom-bar").animate({bottom:0},500),setTimeout(function(){e.addClass("visible-bars")},1e3))},hideBars:function(){var e=m("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?e.removeClass("visible-bars"):(m("#swipebox-top-bar").animate({top:"-50px"},500),m("#swipebox-bottom-bar").animate({bottom:"-50px"},500),setTimeout(function(){e.removeClass("visible-bars")},1e3))},animBars:function(){var e=this,t=m("#swipebox-top-bar, #swipebox-bottom-bar");t.addClass("visible-bars"),e.setTimeout(),m("#swipebox-slider").click(function(){t.hasClass("visible-bars")||(e.showBars(),e.setTimeout())}),m("#swipebox-bottom-bar").hover(function(){e.showBars(),t.addClass("visible-bars"),e.clearTimeout()},function(){0<r.settings.hideBarsDelay&&(t.removeClass("visible-bars"),e.setTimeout())})},keyboard:function(){var t=this;m(b).bind("keyup",function(e){e.preventDefault(),e.stopPropagation(),37===e.keyCode?t.getPrev():39===e.keyCode?t.getNext():27===e.keyCode&&t.closeSlide()})},actions:function(){var t=this,e="touchend click";h.length<2?(m("#swipebox-bottom-bar").hide(),u===h[1]&&m("#swipebox-top-bar").hide()):(m("#swipebox-prev").bind(e,function(e){e.preventDefault(),e.stopPropagation(),t.getPrev(),t.setTimeout()}),m("#swipebox-next").bind(e,function(e){e.preventDefault(),e.stopPropagation(),t.getNext(),t.setTimeout()})),m("#swipebox-close").bind(e,function(e){e.preventDefault(),e.stopPropagation(),t.closeSlide()})},setSlide:function(e,t){t=t||!1;var i=m("#swipebox-slider");w=100*-e,this.doCssTrans()?i.css({"-webkit-transform":"translate3d("+100*-e+"%, 0, 0)",transform:"translate3d("+100*-e+"%, 0, 0)"}):i.animate({left:100*-e+"%"}),m("#swipebox-slider .slide").removeClass("current"),m("#swipebox-slider .slide").eq(e).addClass("current"),this.setTitle(e),t&&i.fadeIn(),m("#swipebox-prev, #swipebox-next").removeClass("disabled"),0===e?m("#swipebox-prev").addClass("disabled"):e===h.length-1&&!0!==r.settings.loopAtEnd&&m("#swipebox-next").addClass("disabled")},openSlide:function(e){m("html").addClass("swipebox-html"),l?(m("html").addClass("swipebox-touch"),r.settings.hideCloseButtonOnMobile&&m("html").addClass("swipebox-no-close-button")):m("html").addClass("swipebox-no-touch"),m(b).trigger("resize"),this.setSlide(e,!0)},preloadMedia:function(e){var t=this,i=null;h[e]!==u&&(i=h[e].href),t.isVideo(i)?t.openMedia(e):setTimeout(function(){t.openMedia(e)},1e3)},openMedia:function(e){var t,i;if(h[e]!==u&&(t=h[e].href),e<0||e>=h.length)return!1;i=m("#swipebox-slider .slide").eq(e),this.isVideo(t)?(i.html(this.getVideo(t)),r.settings.afterMedia&&r.settings.afterMedia(e)):(i.addClass("slide-loading"),this.loadMedia(t,function(){i.removeClass("slide-loading"),i.html(this),r.settings.afterMedia&&r.settings.afterMedia(e)}))},setTitle:function(e){var t=null;m("#swipebox-title").empty(),h[e]!==u&&(t=h[e].title),t?(m("#swipebox-top-bar").show(),m("#swipebox-title").append(t)):m("#swipebox-top-bar").hide()},isVideo:function(e){if(e)return!!(e.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||e.match(/vimeo\.com\/([0-9]*)/)||e.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/))||(0<=e.toLowerCase().indexOf("swipeboxvideo=1")||void 0)},parseUri:function(e,t){var i=c.createElement("a"),s={};return i.href=decodeURIComponent(e),i.search&&(s=JSON.parse('{"'+i.search.toLowerCase().replace("?","").replace(/&/g,'","').replace(/=/g,'":"')+'"}')),m.isPlainObject(t)&&(s=m.extend(s,t,r.settings.queryStringData)),m.map(s,function(e,t){if(e&&""<e)return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")},getVideo:function(e){var t="",i=e.match(/((?:www\.)?youtube\.com|(?:www\.)?youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/),s=e.match(/(?:www\.)?youtu\.be\/([a-zA-Z0-9\-_]+)/),o=e.match(/(?:www\.)?vimeo\.com\/([0-9]*)/),a="",t=i||s?(s&&(i=s),console.log(i),a=n.parseUri(e,{autoplay:r.settings.autoplayVideos?"1":"0",v:""}),'<iframe width="560" height="315" src="https://'+i[1]+"/embed/"+i[2]+"?"+a+'" frameborder="0" allowfullscreen></iframe>'):o?(a=n.parseUri(e,{autoplay:r.settings.autoplayVideos?"1":"0",byline:"0",portrait:"0",color:r.settings.vimeoColor}),'<iframe width="560" height="315"  src="//player.vimeo.com/video/'+o[1]+"?"+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):'<iframe width="560" height="315" src="'+e+'" frameborder="0" allowfullscreen></iframe>';return'<div class="swipebox-video-container" style="max-width:'+r.settings.videoMaxWidth+'px"><div class="swipebox-video">'+t+"</div></div>"},loadMedia:function(e,t){var i;0===e.trim().indexOf("#")?t.call(m("<div>",{class:"swipebox-inline-container"}).append(m(e).clone().toggleClass(r.settings.toggleClassOnLoad))):this.isVideo(e)||(i=m("<img>").on("load",function(){t.call(i)})).attr("src",e)},getNext:function(){var e,t=this,i=m("#swipebox-slider .slide").index(m("#swipebox-slider .slide.current"));i+1<h.length?(e=m("#swipebox-slider .slide").eq(i).contents().find("iframe").attr("src"),m("#swipebox-slider .slide").eq(i).contents().find("iframe").attr("src",e),i++,t.setSlide(i),t.preloadMedia(i+1),r.settings.nextSlide&&r.settings.nextSlide(i)):!0===r.settings.loopAtEnd?(e=m("#swipebox-slider .slide").eq(i).contents().find("iframe").attr("src"),m("#swipebox-slider .slide").eq(i).contents().find("iframe").attr("src",e),i=0,t.preloadMedia(i),t.setSlide(i),t.preloadMedia(i+1),r.settings.nextSlide&&r.settings.nextSlide(i)):(m("#swipebox-overlay").addClass("rightSpring"),setTimeout(function(){m("#swipebox-overlay").removeClass("rightSpring")},500))},getPrev:function(){var e,t=m("#swipebox-slider .slide").index(m("#swipebox-slider .slide.current"));0<t?(e=m("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src"),m("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src",e),t--,this.setSlide(t),this.preloadMedia(t-1),r.settings.prevSlide&&r.settings.prevSlide(t)):(m("#swipebox-overlay").addClass("leftSpring"),setTimeout(function(){m("#swipebox-overlay").removeClass("leftSpring")},500))},nextSlide:function(e){},prevSlide:function(e){},closeSlide:function(){m("html").removeClass("swipebox-html"),m("html").removeClass("swipebox-touch"),m(b).trigger("resize"),this.destroy()},destroy:function(){m(b).unbind("keyup"),m("body").unbind("touchstart"),m("body").unbind("touchmove"),m("body").unbind("touchend"),m("#swipebox-slider").unbind(),m("#swipebox-overlay").remove(),Array.isArray(s)||s.removeData("_swipebox"),this.target&&this.target.trigger("swipebox-destroy"),m.swipebox.isOpen=!1,r.settings.afterClose&&r.settings.afterClose()}},r.init()},m.fn.swipebox=function(e){return m.data(this,"_swipebox")||(e=new m.swipebox(this,e),this.data("_swipebox",e)),this.data("_swipebox")}}(window,document,jQuery);
