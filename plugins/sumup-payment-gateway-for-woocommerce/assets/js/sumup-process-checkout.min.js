jQuery(function(e){if("undefined"==typeof wc_checkout_params)return!1;var o={wc_checkout_form:null,sumupPaymentSelected:function(){return e("#payment_method_sumup").is(":checked")},$checkout_form:e("form.checkout"),initSubmitProcess:function(e,t){return!o.sumupPaymentSelected()||(o.wc_checkout_form=t,"order-created"===sumup_gateway_params.status?(showSumupPayment(),!1):(o.sumupCheckoutSubmit(),!1))},sumupCheckoutSubmit:function(){o.$checkout_form.addClass("processing"),o.wc_checkout_form.blockOnSubmit(this.$checkout_form),o.wc_checkout_form.attachUnloadEventsOnSubmit(),e.ajaxSetup({dataFilter:function(e,t){if("json"!==t)return e;if(o.wc_checkout_form.is_valid_json(e))return e;var r=e.match(/{"result.*}/);return null===r?console.log("Unable to fix malformed JSON"):o.wc_checkout_form.is_valid_json(r[0])?(console.log("Fixed malformed JSON. Original:"),console.log(e),e=r[0]):console.log("Unable to fix malformed JSON"),e}}),e.ajax({type:"POST",url:wc_checkout_params.checkout_url,data:o.$checkout_form.serialize(),dataType:"json",success:function(t){o.wc_checkout_form.detachUnloadEventsOnSubmit();try{if("success"!==t.result||!0!==t.openModal)throw"failure"===t.result?"Result failure":"Invalid response";if("undefined"==typeof sumup_gateway_params)return void o.wc_checkout_form.submit_error("Error to access SumUp settings");sumup_gateway_params.checkoutId=t.checkoutId,sumup_gateway_params.orderId=t.order_id,sumup_gateway_params.country=t.country,sumup_gateway_params.status="order-created",sumup_gateway_params.redirectUrl=t.redirectUrl,window.addEventListener("woo_sumup_loaded",e=>{if(o.$checkout_form.removeClass("processing").unblock(),"yes"===sumup_gateway_params.openPaymentInModal)showSumupPayment();else{const e=document.getElementById("place_order");e&&(e.style.display="none");const o=document.querySelector(".wc_payment_methods.payment_methods.methods");o&&(showSumupPayment(),o.scrollIntoView({behavior:"smooth"}))}}),initSumUpGateway()}catch(r){if(!0===t.reload)return void window.location.reload();!0===t.refresh&&e(document.body).trigger("update_checkout"),t.messages?o.wc_checkout_form.submit_error(t.messages):o.wc_checkout_form.submit_error('<div class="woocommerce-error">'+wc_checkout_params.i18n_checkout_error+"</div>")}},error:function(e,t,r){o.wc_checkout_form.detachUnloadEventsOnSubmit(),o.wc_checkout_form.submit_error('<div class="woocommerce-error">'+(r||wc_checkout_params.i18n_checkout_error)+"</div>")}})}};o.$checkout_form.on("checkout_place_order_sumup",o.initSubmitProcess)});