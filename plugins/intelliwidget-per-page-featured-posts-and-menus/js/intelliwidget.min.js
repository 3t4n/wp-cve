!function(e){"use strict";function t(t){t.find(".inside").each(function(){var t=e(this).prop("id");k[t]=e(this).parent(".iw-collapsible").hasClass("closed")?0:1})}function i(t,i){for(var s in k)k.hasOwnProperty(s)&&1===k[s]&&(e("#"+s).parent(".iw-collapsible").removeClass("closed"),i&&e("#"+s).find(".intelliwidget-multiselect").multiSelect())}function s(){e(".iw-tabbed-sections").each(function(){var t=e(this);t.data("viewWidth",0),t.data("visWidth",0),t.data("leftTabs",[]),t.data("rightTabs",[]),t.data("visTabs",[]),t.find(".iw-tab").each(function(){t.data("visTabs").push(e(this).prop("id")),t.data("visWidth",t.data("visWidth")+e(this).outerWidth()),e(this).show()})}),n()}function n(){e(".iw-tabbed-sections").each(function(){var t=e(this),i=0;if(t.data("viewWidth",t.find(".iw-tabs").width()-24),t.data("viewWidth")>0)for(;t.data("visTabs").length&&t.data("visWidth")>t.data("viewWidth");){var s=t.data("visTabs").shift(),n=e("#"+s).outerWidth();if(t.data("visWidth",t.data("visWidth")-n),e("#"+s).hide(),t.data("leftTabs").push(s),++i>50)break}}),o()}function a(t){var i,s=t.parent(".iw-tabbed-sections");(i=s.data("visTabs").pop())&&(s.data("visWidth",s.data("visWidth")-e("#"+i).outerWidth()),e("#"+i).hide(),s.data("rightTabs").unshift(i)),(i=s.data("leftTabs").pop())&&(s.data("visWidth",s.data("visWidth")+e("#"+i).outerWidth()),e("#"+i).show(),s.data("visTabs").unshift(i)),o()}function l(t){var i,s=t.parent(".iw-tabbed-sections");(i=s.data("visTabs").shift())&&(s.data("visWidth",s.data("visWidth")-e("#"+i).outerWidth()),e("#"+i).hide(),s.data("leftTabs").push(i)),(i=s.data("rightTabs").shift())&&(s.data("visWidth",s.data("visWidth")+e("#"+i).outerWidth()),e("#"+i).show(),s.data("visTabs").push(i)),o()}function o(){e(".iw-larr, .iw-rarr").css("visibility","hidden"),e(".iw-tabbed-sections").each(function(){var t=e(this);t.data("rightTabs").length&&t.find(".iw-rarr").css("visibility","visible"),t.data("leftTabs").length&&t.find(".iw-larr").css("visibility","visible")})}function r(e){var t=e.split("_"),i=t.pop(),s=t.pop();return s+"_"+i}function d(t,i,s){return p(t),A?"undefined"!=typeof window.wp.customize&&"undefined"!=typeof window.wp.customize.Widgets?(i.nonce=window.wp.customize.Widgets.data.nonce,i.wp_customize="on"):i._wpnonce_widgets=e("#_wpnonce_widgets").val():(i.iwpage=e("#iwpage").val(),i[window.IWAjax.idfield]=e("#"+window.IWAjax.idfield).val()),e.post(window.IWAjax.ajaxurl,i,function(i){"fail"===i?h(t,"failure"):(s&&s(t,i),h(t,"success"),A||e(document).trigger("widget-updated"))},i.action.indexOf("_delete")>0?"text":"json").fail(function(){h(t,"failure")}),!1}function c(t,i){var s;s=e(t).hasClass("iw-save")?e(t).parent(".iw-save-container").siblings(".spinner").first():e(t).hasClass("iw-delete")?e(t).parent(".submitbox").siblings(".spinner").first():e(t).hasClass("iw-toggle iw-collapsible")?e(t).parent(".").siblings(".spinner").first():e(t).parents(".inside").first().find(".spinner").first(),s.css({visibility:i}).show(),"hidden"===i&&s.hide()}function p(t){e(T).removeClass("success failure"),c(t,"visible"),e(t).prop("disabled",!0)}function h(t,i){var s="#"+e(t).attr("id");e(s).prop("disabled",!1),c(s,"hidden"),e(s).parents(".inside,.iw-tabbed-section").first().find(T).first().addClass(i)}function f(t){var i={};e(".intelliwidget-input").each(function(){i[e(this).attr("id")]="checkbox"===e(this).attr("type")?e(this).is(":checked")?1:0:e(this).val()}),i.action="iw_"+window.IWAjax.objtype+"_cdfsave",d(t.target,i,null)}function u(i){var s=e(i.target).parents(".iw-tabbed-section").first(),n=s.find(".iw-save"),a=s.prop("id"),l=r(a),o={};return t(s),o["intelliwidget_"+l+"_post_types"]=[],s.find("select,textarea,input[type=text],input[type=checkbox]:checked,input[type=hidden]").each(function(){var t=e(this),i=t.prop("id"),s=t.val();i.indexOf("_post_types")>0?o["intelliwidget_"+l+"_post_types"].push(s):o[i]=s,i.indexOf("_menu_location")>0&&""!==s&&(o["intelliwidget_"+l+"_replace_widget"]="nav_menu_location-"+s)}),o.action="iw_"+window.IWAjax.objtype+"_save",d(n,o,_),!1}function m(t){var i={};return i.intelliwidget_widget_page_id=e("#intelliwidget_widget_page_id").val(),i.action="iw_"+window.IWAjax.objtype+"_copy",d(t.target,i,null),!1}function v(t){t.preventDefault(),t.stopPropagation();var i=e(t.target).attr("href"),s=U(i);return s.action="iw_"+window.IWAjax.objtype+"_add",d(t.target,s,$),!1}function b(t){t.preventDefault(),t.stopPropagation();var i=e(t.target).attr("href"),s=U(i);return s.action="iw_"+window.IWAjax.objtype+"_delete",d(t.target,s,C),!1}function g(t){var i=A?".widget":".iw-tabbed-section",s=e(t.target).parents(i).first(),n=A?s.find(".widget-id").val():r(s.prop("id")),a=A?"#widget-"+n+"-menus":"#intelliwidget_"+n+"_menus",l={};return e(a).has("select").length?(e(a).find(".intelliwidget-multiselect").multiSelect("refresh"),!1):(A?(l["widget-id"]=s.find(".widget-id").val(),l.action="iw_widget_menus"):(s.find('input[type="hidden"]').each(function(){l[e(this).attr("id")]=e(this).val()}),l.action="iw_"+window.IWAjax.objtype+"_menus"),void d(a,l,y))}function w(t){var i=e(t).val(),s=e(t).attr("id"),n=s.substring(0,s.indexOf("search")),a=n.split(/[\-_]/),l=a.pop(),o=a.pop(),r="iw_"+(A?"widget":"post")+"_select_menu",c={};c[s]=i.replace(/[\n\r]/g,""),c[n]=e("#"+n).val(),c.menutype=l,c.action=r,A?c["widget-id"]="intelliwidget-"+o:c.intelliwidget_box_id=o,d("#"+n,c,x)}function _(t,i){var s=e(i.tab),n=e(".iw-tabs").find("#"+s.prop("id")),a=e(t).parents(".iw-tabbed-section").first(),l=a.parent(".iw-tabbed-sections");n.html(s.html()),a.html(i.form).find(".intelliwidget-multiselect").multiSelect(),l.tabs("refresh").tabs({active:n.index()})}function $(t,i){var n=e(t).parent(".inside").find(".iw-tabbed-sections"),a=e(i.form).hide(),l=e(i.tab).hide();n.append(a),n.find(".iw-tabs").append(l),l.show(),n.tabs("refresh").tabs({active:l.index()}),s()}function C(t){var i=e(t).parents(".iw-tabbed-section").first(),n=i.parent(".iw-tabbed-sections"),a=i.prop("id"),l=r(a),o=i.index();i.remove(),e("#iw_tab_"+l).remove(),n.tabs("refresh"),s(),n.tabs({active:o})}function y(t,i){e(t).html(i).find(".intelliwidget-multiselect").multiSelect()}function x(t,i){e(t).html(i).prop("disabled",!1).multiSelect("refresh")}function U(e){var t,i,s={},n=e.substring(e.indexOf("?")+1).split("&");for(i=0;i<n.length;i++)t=n[i].split("="),s[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return s}function W(t,i){var s,n="#"+t+"_div",a=!i&&!e("#"+t).val(),l=e("#"+t+"_aa").val(),o=("00"+e("#"+t+"_mm").val()).slice(-2),r=("00"+e("#"+t+"_jj").val()).slice(-2),d=("00"+e("#"+t+"_hh").val()).slice(-2),c=("00"+e("#"+t+"_mn").val()).slice(-2);if(!e(n).length)return!0;if(s=new Date(l,o-1,r,d,c),s.getFullYear()!=l||1+s.getMonth()!=o||s.getDate()!=r||s.getMinutes()!=c){if(!0===i)return e(n).addClass("form-invalid"),e(".iw-cdfsave").prop("disabled",!0),!1;a=!0}return e(n).removeClass("form-invalid"),e(".iw-cdfsave").prop("disabled",!1),a?e("#"+t).val(""):(e("#"+t+"_timestamp").html("<b>"+e('option[value="'+e("#"+t+"_mm").val()+'"]',"#"+t+"_mm").text()+" "+r+", "+l+" @ "+d+":"+c+"</b> "),e("#"+t).val(l+"-"+e("#"+t+"_mm").val()+"-"+r+" "+d+":"+c)),!0}function j(t){if(e(t.target).hasClass("iw-menusearch")){if(clearTimeout(e(t.target).data("timer")),e(t.target).data("timer",setTimeout(w,400,t.target)),13===t.which)return t.stopPropagation(),t.preventDefault(),!1}else if(13===t.which)return t.stopPropagation(),t.preventDefault(),u.call(t),!1}function S(){e(document).on("widget-updated",i),e(".iw-tabbed-sections").tabs({active:e("iw-tab").length-1}),e("body").on("click",".iw-collapsible > .iw-toggle, .iw-collapsible > h4, .iw-collapsible > h3",function(i){i.stopPropagation();var s=e(this).parent(".iw-collapsible"),n=e(this).parents("div.widget, div.iw-tabbed-section").first();s.hasClass("closed")?(s.removeClass("closed"),s.hasClass("panel-selection")&&g(i)):s.addClass("closed"),t(n)}),e("#intelliwidget_main_meta_box,.main-meta-box").on("click",".iw-save",u),e("#intelliwidget_post_meta_box").on("click",".iw-cdfsave",f),e("#intelliwidget_main_meta_box,.main-meta-box").on("click",".iw-copy",m),e("#intelliwidget_main_meta_box,.main-meta-box").on("click",".iw-add",v),e("#intelliwidget_main_meta_box,.main-meta-box").on("click",".iw-delete",b),e("#intelliwidget_main_meta_box,.main-meta-box").on("change",".iw-control",u),e("body").on("change",".intelliwidget-form-container .iw-widget-control",function(){var i=e(this).parents("div.widget").first(),s=i.find(".widget-id").val();if("undefined"!=typeof window.wp.customize&&"undefined"!=typeof window.wp.customize.Widgets){var n=window.wp.customize.Widgets.getWidgetFormControlForWidget(s);n.liveUpdateMode=!1,n.updateWidget()}else t(i),window.wpWidgets.save(i,0,0,0)}),e("#intelliwidget_main_meta_box,.main-meta-box").on("keydown","input,select,textarea",j),e("body").on("keydown",".intelliwidget-form-container .iw-menusearch",function(t){return 13===t.which?(t.stopPropagation(),t.preventDefault(),w(t.target),!1):(clearTimeout(e(t.target).data("timer")),void e(t.target).data("timer",setTimeout(w,400,t.target)))}),"post"===window.IWAjax.objtype&&(W("intelliwidget_event_date",!1),W("intelliwidget_expire_date",!1)),e("#intelliwidget_post_meta_box").on("click","a.intelliwidget-edit-timestamp",function(){var t=e(this).attr("id").split("-",1);return e("#"+t+"_div").is(":hidden")&&(e("#"+t+"_div").slideDown("fast"),e("#"+t+"_mm").focus(),e(this).hide()),!1}),e("#intelliwidget_post_meta_box").on("click",".intelliwidget-clear-timestamp",function(){var t=e(this).attr("id").split("-",1);return e("#"+t+"_div").slideUp("fast"),e("#"+t+"_mm").val(e("#"+t+"_cur_mm").val()),e("#"+t+"_jj").val(e("#"+t+"_cur_jj").val()),e("#"+t+"_aa").val(e("#"+t+"_cur_aa").val()),e("#"+t+"_hh").val(e("#"+t+"_cur_hh").val()),e("#"+t+"_mn").val(e("#"+t+"_cur_mn").val()),e("#"+t+"_timestamp").html(""),e("#"+t).val(""),e("a#"+t+"-edit").show(),W(t,!1),!1}),e("#intelliwidget_post_meta_box").on("click",".intelliwidget-cancel-timestamp",function(){var t=e(this).attr("id").split("-",1);return e("#"+t+"_div").slideUp("fast"),e("#"+t+"_mm").val(e("#"+t+"_hidden_mm").val()),e("#"+t+"_jj").val(e("#"+t+"_hidden_jj").val()),e("#"+t+"_aa").val(e("#"+t+"_hidden_aa").val()),e("#"+t+"_hh").val(e("#"+t+"_hidden_hh").val()),e("#"+t+"_mn").val(e("#"+t+"_hidden_mn").val()),e("a#"+t+"-edit").show(),W(t,!1),!1}),e("#intelliwidget_post_meta_box").on("click",".intelliwidget-save-timestamp",function(){var t=e(this).attr("id").split("-",1);return W(t,!0)&&(e("#"+t+"_div").slideUp("fast"),e("a#"+t+"-edit").show()),!1}),e(".iw-tabbed-sections").on("click",".iw-larr, .iw-rarr",function(t){t.preventDefault(),t.stopPropagation(),e(this).is(":visible")&&(e(this).hasClass("iw-larr")?a(e(this)):l(e(this)))}),e(window).resize(n),e(".iw-tabbed-sections").slideDown(),s()}var k={},T=".iw-copy-container,.iw-save-container,.iw-cdf-container",A=""===window.IWAjax.objtype;e(document).ready(function(){S()})}(jQuery),function(e){"use strict";var t=function(t,i){this.options=i,this.$element=e(t),this.$container=e("<div/>",{"class":"ms-container"}),this.$selectableContainer=e("<div/>",{"class":"ms-selectable"}),this.$selectionContainer=e("<div/>",{"class":"ms-selection"}),this.$selectableUl=e("<ul/>",{"class":"ms-list",tabindex:"-1"}),this.$selectionUl=e("<ul/>",{"class":"ms-list",tabindex:"-1"}),this.scrollTo=0,this.elemsSelector="li:visible:not(.ms-optgroup-label,.ms-optgroup-container,."+i.disabledClass+")"};t.prototype={constructor:t,init:function(){var t=this,i=this.$element;if(0===i.next(".ms-container").length){i.css({position:"absolute",left:"-9999px"}),i.attr("id",i.attr("id")?i.attr("id"):Math.ceil(1e3*Math.random())+"multiselect"),this.$container.attr("id","ms-"+i.attr("id")),this.$container.addClass(t.options.cssClass),i.find("option").each(function(){t.generateLisFromOption(this)}),this.$selectionUl.find(".ms-optgroup-label").hide(),t.options.selectableHeader&&t.$selectableContainer.append(t.options.selectableHeader),t.$selectableContainer.append(t.$selectableUl),t.options.selectableFooter&&t.$selectableContainer.append(t.options.selectableFooter),t.options.selectionHeader&&t.$selectionContainer.append(t.options.selectionHeader),t.$selectionContainer.append(t.$selectionUl),t.options.selectionFooter&&t.$selectionContainer.append(t.options.selectionFooter),t.$container.append(t.$selectableContainer),t.$container.append(t.$selectionContainer),i.after(t.$container),t.activeMouse(t.$selectableUl),t.activeKeyboard(t.$selectableUl);var s=t.options.dblClick?"dblclick":"click";t.$selectableUl.on(s,".ms-elem-selectable",function(){t.select(e(this).data("ms-value"))}),t.$selectionUl.on(s,".ms-elem-selection",function(){t.deselect(e(this).data("ms-value"))}),t.activeMouse(t.$selectionUl),t.activeKeyboard(t.$selectionUl),i.on("focus",function(){t.$selectableUl.focus()})}var n=i.find("option:selected").map(function(){return e(this).val()}).get();t.select(n,"init"),"function"==typeof t.options.afterInit&&t.options.afterInit.call(this,this.$container)},generateLisFromOption:function(t,i){for(var s=this,n=s.$element,a="",l=e(t),o=0;o<t.attributes.length;o++){var r=t.attributes[o];"value"!==r.name&&"disabled"!==r.name&&(a+=r.name+'="'+r.value+'" ')}var d=e("<li "+a+"><span>"+s.escapeHTML(l.text())+"</span></li>"),c=d.clone(),p=l.val(),h=s.sanitize(p);d.data("ms-value",p).addClass("ms-elem-selectable").attr("id",h+"-selectable"),c.data("ms-value",p).addClass("ms-elem-selection").attr("id",h+"-selection").hide(),(l.prop("disabled")||n.prop("disabled"))&&(c.addClass(s.options.disabledClass),d.addClass(s.options.disabledClass));var f=l.parent("optgroup");if(f.length>0){var u=f.attr("label"),m=s.sanitize(u),v=s.$selectableUl.find("#optgroup-selectable-"+m),b=s.$selectionUl.find("#optgroup-selection-"+m);if(0===v.length){var g='<li class="ms-optgroup-container"></li>',w='<ul class="ms-optgroup"><li class="ms-optgroup-label"><span>'+u+"</span></li></ul>";v=e(g),b=e(g),v.attr("id","optgroup-selectable-"+m),b.attr("id","optgroup-selection-"+m),v.append(e(w)),b.append(e(w)),s.options.selectableOptgroup&&(v.find(".ms-optgroup-label").on("click",function(){var t=f.children(":not(:selected, :disabled)").map(function(){return e(this).val()}).get();s.select(t)}),b.find(".ms-optgroup-label").on("click",function(){var t=f.children(":selected:not(:disabled)").map(function(){return e(this).val()}).get();s.deselect(t)})),s.$selectableUl.append(v),s.$selectionUl.append(b)}i=void 0==i?v.find("ul").children().length:i+1,d.insertAt(i,v.children()),c.insertAt(i,b.children())}else i=void 0==i?s.$selectableUl.children().length:i,d.insertAt(i,s.$selectableUl),c.insertAt(i,s.$selectionUl)},addOption:function(t){var i=this;void 0!==t.value&&null!==t.value&&(t=[t]),e.each(t,function(t,s){if(void 0!==s.value&&null!==s.value&&0===i.$element.find("option[value='"+s.value+"']").length){var n=e('<option value="'+s.value+'">'+s.text+"</option>"),t=parseInt("undefined"==typeof s.index?i.$element.children().length:s.index),a=void 0==s.nested?i.$element:e("optgroup[label='"+s.nested+"']");n.insertAt(t,a),i.generateLisFromOption(n.get(0),t,s.nested)}})},escapeHTML:function(t){return e("<div>").text(t).html()},activeKeyboard:function(t){var i=this;t.on("focus",function(){e(this).addClass("ms-focus")}).on("blur",function(){e(this).removeClass("ms-focus")}).on("keydown",function(s){switch(s.which){case 40:case 38:return s.preventDefault(),s.stopPropagation(),void i.moveHighlight(e(this),38===s.which?-1:1);case 37:case 39:return s.preventDefault(),s.stopPropagation(),void i.switchList(t);case 9:if(i.$element.is("[tabindex]")){s.preventDefault();var n=parseInt(i.$element.attr("tabindex"),10);return n=s.shiftKey?n-1:n+1,void e('[tabindex="'+n+'"]').focus()}s.shiftKey&&i.$element.trigger("focus")}return e.inArray(s.which,i.options.keySelect)>-1?(s.preventDefault(),s.stopPropagation(),void i.selectHighlighted(t)):void 0})},moveHighlight:function(e,t){var i=e.find(this.elemsSelector),s=i.filter(".ms-hover"),n=null,a=i.first().outerHeight(),l=e.height();"#"+this.$container.prop("id");if(i.removeClass("ms-hover"),1===t){if(n=s.nextAll(this.elemsSelector).first(),0===n.length){var o=s.parent();if(o.hasClass("ms-optgroup")){var r=o.parent(),d=r.next(":visible");n=d.length>0?d.find(this.elemsSelector).first():i.first()}else n=i.first()}}else if(-1===t&&(n=s.prevAll(this.elemsSelector).first(),0===n.length)){var o=s.parent();if(o.hasClass("ms-optgroup")){var r=o.parent(),c=r.prev(":visible");n=c.length>0?c.find(this.elemsSelector).last():i.last()}else n=i.last()}if(n.length>0){n.addClass("ms-hover");var p=e.scrollTop()+n.position().top-l/2+a/2;e.scrollTop(p)}},selectHighlighted:function(e){var t=e.find(this.elemsSelector),i=t.filter(".ms-hover").first();i.length>0&&(e.parent().hasClass("ms-selectable")?this.select(i.data("ms-value")):this.deselect(i.data("ms-value")),t.removeClass("ms-hover"))},switchList:function(e){e.blur(),this.$container.find(this.elemsSelector).removeClass("ms-hover"),e.parent().hasClass("ms-selectable")?this.$selectionUl.focus():this.$selectableUl.focus()},activeMouse:function(){var t=this;e("body").on("mouseenter",t.elemsSelector,function(){e(this).parents(".ms-container").find(t.elemsSelector).removeClass("ms-hover"),e(this).addClass("ms-hover")}),e("body").on("mouseleave",t.elemsSelector,function(){e(this).parents(".ms-container").find(t.elemsSelector).removeClass("ms-hover")})},refresh:function(){this.destroy(),this.$element.multiSelect(this.options)},destroy:function(){e("#ms-"+this.$element.attr("id")).remove(),this.$element.css("position","").css("left",""),this.$element.removeData("multiselect")},select:function(t,i){"string"==typeof t&&(t=[t]);var s=this,n=this.$element,a=e.map(t,function(e){return s.sanitize(e)}),l=this.$selectableUl.find("#"+a.join("-selectable, #")+"-selectable").filter(":not(."+s.options.disabledClass+")"),o=this.$selectionUl.find("#"+a.join("-selection, #")+"-selection").filter(":not(."+s.options.disabledClass+")"),r=n.find("option:not(:disabled)").filter(function(){return e.inArray(this.value,t)>-1});if("init"===i&&(l=this.$selectableUl.find("#"+a.join("-selectable, #")+"-selectable"),o=this.$selectionUl.find("#"+a.join("-selection, #")+"-selection")),l.length>0){l.addClass("ms-selected").hide(),o.addClass("ms-selected").show(),r.prop("selected",!0),s.$container.find(s.elemsSelector).removeClass("ms-hover");var d=s.$selectableUl.children(".ms-optgroup-container");if(d.length>0){d.each(function(){var t=e(this).find(".ms-elem-selectable");t.length===t.filter(".ms-selected").length&&e(this).find(".ms-optgroup-label").hide()});var c=s.$selectionUl.children(".ms-optgroup-container");c.each(function(){var t=e(this).find(".ms-elem-selection");t.filter(".ms-selected").length>0&&e(this).find(".ms-optgroup-label").show()})}else if(s.options.keepOrder&&"init"!==i){var p=s.$selectionUl.find(".ms-selected");p.length>1&&p.last().get(0)!=o.get(0)&&o.insertAfter(p.last())}"init"!==i&&(n.trigger("change"),"function"==typeof s.options.afterSelect&&s.options.afterSelect.call(this,t))}},deselect:function(t){"string"==typeof t&&(t=[t]);var i=this,s=this.$element,n=e.map(t,function(e){return i.sanitize(e)}),a=this.$selectableUl.find("#"+n.join("-selectable, #")+"-selectable"),l=this.$selectionUl.find("#"+n.join("-selection, #")+"-selection").filter(".ms-selected").filter(":not(."+i.options.disabledClass+")"),o=s.find("option").filter(function(){return e.inArray(this.value,t)>-1});if(l.length>0){a.removeClass("ms-selected").show(),l.removeClass("ms-selected").hide(),o.prop("selected",!1),i.$container.find(i.elemsSelector).removeClass("ms-hover");var r=i.$selectableUl.children(".ms-optgroup-container");if(r.length>0){r.each(function(){var t=e(this).find(".ms-elem-selectable");t.filter(":not(.ms-selected)").length>0&&e(this).find(".ms-optgroup-label").show()});var d=i.$selectionUl.children(".ms-optgroup-container");d.each(function(){var t=e(this).find(".ms-elem-selection");0===t.filter(".ms-selected").length&&e(this).find(".ms-optgroup-label").hide()})}s.trigger("change"),"function"==typeof i.options.afterDeselect&&i.options.afterDeselect.call(this,t)}},select_all:function(){var t=this.$element,i=t.val();if(t.find('option:not(":disabled")').prop("selected",!0),this.$selectableUl.find(".ms-elem-selectable").filter(":not(."+this.options.disabledClass+")").addClass("ms-selected").hide(),this.$selectionUl.find(".ms-optgroup-label").show(),this.$selectableUl.find(".ms-optgroup-label").hide(),this.$selectionUl.find(".ms-elem-selection").filter(":not(."+this.options.disabledClass+")").addClass("ms-selected").show(),this.$selectionUl.focus(),t.trigger("change"),"function"==typeof this.options.afterSelect){var s=e.grep(t.val(),function(t){return e.inArray(t,i)<0});this.options.afterSelect.call(this,s)}},deselect_all:function(){var e=this.$element,t=e.val();e.find("option").prop("selected",!1),this.$selectableUl.find(".ms-elem-selectable").removeClass("ms-selected").show(),this.$selectionUl.find(".ms-optgroup-label").hide(),this.$selectableUl.find(".ms-optgroup-label").show(),this.$selectionUl.find(".ms-elem-selection").removeClass("ms-selected").hide(),this.$selectableUl.focus(),e.trigger("change"),"function"==typeof this.options.afterDeselect&&this.options.afterDeselect.call(this,t)},sanitize:function(e){var t,i,s=0;if(0==e.length)return s;var n=0;for(t=0,n=e.length;n>t;t++)i=e.charCodeAt(t),s=(s<<5)-s+i,s|=0;return s}},e.fn.multiSelect=function(){var i=arguments[0],s=arguments;return this.each(function(){var n=e(this),a=n.data("multiselect"),l=e.extend({},e.fn.multiSelect.defaults,n.data(),"object"==typeof i&&i);a||n.data("multiselect",a=new t(this,l)),"string"==typeof i?a[i](s[1]):a.init()})},e.fn.multiSelect.defaults={keySelect:[32],selectableOptgroup:!1,disabledClass:"disabled",dblClick:!1,keepOrder:!1,cssClass:""},e.fn.multiSelect.Constructor=t,e.fn.insertAt=function(e,t){return this.each(function(){0===e?t.prepend(this):t.children().eq(e-1).after(this)})}}(jQuery);