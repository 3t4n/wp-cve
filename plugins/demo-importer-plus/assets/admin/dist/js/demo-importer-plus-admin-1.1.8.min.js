"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var DemoImporterAjaxQueue=function(){var requests=[];return{add:function(opt){requests.push(opt)},remove:function(opt){-1<jQuery.inArray(opt,requests)&&requests.splice($.inArray(opt,requests),1)},run:function(){var oriSuc,self=this;requests.length?(oriSuc=requests[0].complete,requests[0].complete=function(){"function"==typeof oriSuc&&oriSuc(),requests.shift(),self.run.apply(self,[])},jQuery.ajax(requests[0])):self.tid=setTimeout(function(){self.run.apply(self,[])},1e3)},stop:function(){requests=[],clearTimeout(this.tid)},_log:function(data,level){(new Date).toLocaleTimeString();_typeof(data)}}}();!function($){var _DemoImporterPlus,DemoImporterSSEImport={complete:{posts:0,media:0,users:0,comments:0,terms:0},updateDelta:function(type,delta){this.complete[type]+=delta;var self=this;requestAnimationFrame(function(){self.render()})},updateProgress:function(type,complete,total){if("undefined"!==type&&"undefined"!=complete+"/"+total){0!==(total=parseInt(total,10))&&!isNaN(total)||(total=1);var type=parseInt(complete,10)/total,complete=Math.round(100*type)+"%",progress_bar=100*type;if(progress_bar<=100){for(var process_bars=document.getElementsByClassName("di-process"),i=0;i<process_bars.length;i++)process_bars[i].value=progress_bar;DemoImporterPlus._log_title("Importing Content.. "+complete,!1,!1)}}},render:function(){for(var types=Object.keys(this.complete),complete=0,total=0,i=types.length-1;0<=i;i--){var type=types[i];this.updateProgress(type,this.complete[type],this.data.count[type]),complete+=this.complete[type],total+=this.data.count[type]}this.updateProgress("total",complete,total)}};DemoImporterPlus=(_defineProperty(_DemoImporterPlus={visited_sites_and_pages:[],mouseLocation:!1,action_slug:"",import_start_time:"",import_end_time:"",wpforms_url:"",page_settings_flag:!0,init:function(){DemoImporterPlus._prepareSites(),DemoImporterPlus._bind()},_prepareSites:function(){var $container=$("#demo-import-plus").infiniteScroll({path:function(){return 0<demoImporterVars.allowedDemos.length?"".concat(demoImporterVars.demoAPIURL,"/wp-json/demoimporterplusapi/v1/dipa-demos?ids=").concat(demoImporterVars.allowedDemos.join(","),"&per_page=100"):"".concat(demoImporterVars.demoAPIURL,"/wp-json/demoimporterplusapi/v1/dipa-demos?page=").concat(this.pageIndex)},responseBody:"json",status:".loader-wrap",history:!1});$container.on("load.infiniteScroll",function(event,body,path,response){$(".di-sites-ldr-placeholder").hide(),$(".single-site-wrap > .svg-animated-loader").hide();var data,theTemplate,LoadedPages=$container.data("infiniteScroll").loadCount,response=Math.abs(response.headers.get("x-wp-totalpages"));LoadedPages<=response&&(theTemplate=wp.template("demo-importer-plus-page-builder-sites"),data=[],body.data.forEach(function(d){data.push(d)}),body=theTemplate(data),theTemplate=$(body),$container.infiniteScroll("appendItems",theTemplate),LoadedPages==response)&&($container.trigger("last.infiniteScroll"),$container.infiniteScroll("destroy"))}),$container.infiniteScroll("loadNextPage")},_bind:function(){$(".dip-category-filter-anchor, .dip-category-filter-items").hover(function(){DemoImporterPlus.mouseLocation=!0},function(){DemoImporterPlus.mouseLocation=!1}),$("body").mouseup(function(){DemoImporterPlus.mouseLocation||DemoImporterPlus._closeFilter()}),$(document).on("click",".dip-category-filter-anchor",DemoImporterPlus._toggleFilter),$(document).on("click",".dip-filter-wrap-checkbox, .dip-category",DemoImporterPlus._filterClick),$(document).on("click","#demo-importer-plus-welcome-form .page-builders li",DemoImporterPlus._change_page_builder),$(document).on("click","#demo-import-plus .demo-import-plus-previewing-site .theme-screenshot, #demo-import-plus .demo-import-plus-previewing-site .theme-name, .demo-importer-plus-search-results .demo-import-plus-previewing-site .theme-screenshot, .demo-importer-plus-search-results .demo-import-plus-previewing-site .theme-name",DemoImporterPlus.show_page_popup_from_search),$(document).on("click","#single-pages .site-single",DemoImporterPlus._change_site_preview_screenshot),$(document).on("click",".demo-importer-previewing-single-pages .back-to-layout",DemoImporterPlus._go_back),$(document).on("click",".site-import-layout-button",DemoImporterPlus.show_page_popup_from_sites),$(document).on("click",".site-import-cancel, .demo-import-sitest-result-prev .close, .demo-import-sites-popup .close",DemoImporterPlus._close_popup),$(document).on("click",".demo-importer-plus-tooltip-icon",DemoImporterPlus._toggle_tooltip),$(document).on("click",".demo-importer-plus-page-import-popup .site-install-site-button, .preview-page-from-search-result .site-install-site-button",DemoImporterPlus.import_page_process),$(document).on("demo-importer-plus-after-site-pages-required-plugins",DemoImporterPlus._page_api_call),$(document).on("click",".site-import-site-button",DemoImporterPlus._show_site_popup),$(document).on("click",".demo-importer-plus-site-import-popup .site-install-site-button",DemoImporterPlus._resetData),$(document).on("demo-importer-plus-after-importer-sites-required-plugins",DemoImporterPlus._start_site_import),$(document).on("demo-importer-plus-reset-data",DemoImporterPlus._backup_before_rest_options),$(document).on("demo-importer-plus-sites-backup-settings-before-reset-done",DemoImporterPlus._reset_customizer_data),$(document).on("demo-importer-plus-sites-reset-customizer-data-done",DemoImporterPlus._reset_site_options),$(document).on("demo-importer-plus-sites-reset-site-options-done",DemoImporterPlus._reset_widgets_data),$(document).on("demo-importer-plus-sites-reset-widgets-data-done",DemoImporterPlus._reset_terms),$(document).on("demo-importer-plus-sites-delete-terms-done",DemoImporterPlus._reset_contact_form7),$(document).on("demo-importer-plus-sites-delete-contact-form7-done",DemoImporterPlus._reset_posts),$(document).on("demo-importer-plus-sites-reset-data-done",DemoImporterPlus._recheck_backup_options),$(document).on("demo-importer-plus-backup-settings-done",DemoImporterPlus._importCustomizerSettings),$(document).on("demo-importer-plus-import-customizer-settings-done",DemoImporterPlus._importXML),$(document).on("demo-importer-plus-import-xml-done",DemoImporterPlus.import_siteOptions),$(document).on("demo-importer-plus-import-options-done",DemoImporterPlus._importWidgets),$(document).on("demo-importer-plus-import-widgets-done",DemoImporterPlus._importEnd),$(document).on("wp-plugin-installing",DemoImporterPlus._pluginInstalling),$(document).on("wp-plugin-install-error",DemoImporterPlus._installError),$(document).on("wp-plugin-install-success",DemoImporterPlus._installSuccess),$(document).on("click",".demo-importer-plus-skip-and-import-step",DemoImporterPlus._remove_skip_and_import_popup);var timeout=null;$(document).on("input keyup",".demo-importer-plus-search",function(){clearTimeout(timeout),timeout=setTimeout(DemoImporterPlus.searchDemo,1e3)}),$(document).on("wp-theme-install-success",DemoImporterPlus._activateTheme)},searchDemo:function(e){$(".demo-importer-plus-search-results").show(),$("#demo-import-plus").hide();var search_results=function(search_term,demo_type,demo_cat){var search_results=[];return $.ajax({url:"".concat(demoImporterVars.demoAPIURL,"/wp-json/demoimporterplusapi/v1/dipa-demos/?search_term=").concat(search_term),type:"GET",data:{search_term:search_term,demo_category:demo_cat,demo_type:demo_type},dataType:"json",async:!1,beforeSend:function(){$(".di-sites-ldr-placeholder").show()},success:function(response){search_results=response.data,$(".di-sites-ldr-placeholder").hide()}}),search_results},search_input=$(".demo-importer-plus-search"),search_input=$.trim(search_input.val())||"",$filter_type=$(".dip-filter-wrap-checkbox input[name=dip-radio]:checked").val(),$filter_name=$(".dip-category-filter-anchor").attr("data-slug");search_input||$filter_type||$filter_name?(0<(search_results=search_results(search_input,$filter_type,$filter_name)).length?($filter_type=wp.template("demo-importer-plus-page-builder-sites"),$(".demo-importer-plus-search-results").html($filter_type(search_results))):(search_input.length&&$("body").addClass("demo-importer-plus-no-search-result"),$(".demo-importer-plus-search-results").html(wp.template("demo-importer-plus-no-sites"))),$("body").removeClass("demo-importer-plus-no-search-result")):($("#demo-import-plus").show(),$(".demo-importer-plus-search-results").html(""))},_closeFilter:function(e){$(".dip-category-filter-items").removeClass("visible")},_toggleFilter:function(e){var items=$(".dip-category-filter-items");items.hasClass("visible")?items.removeClass("visible"):items.addClass("visible")},_filterClick:function(e){DemoImporterPlus.filter_array=[],$(this).hasClass("dip-category")&&($(".dip-category-filter-anchor").attr("data-slug",$(this).data("slug")),$(".dip-category-filter-items").find(".dip-category").removeClass("category-active"),$(this).addClass("category-active"),$(".dip-category-filter-anchor").text($(this).text()),$(".dip-category-filter-anchor").trigger("click"),$(".demo-importer-plus-search").val(""));var $filter_name=$(".dip-category-filter-anchor").attr("data-slug"),$filter_name=(""!=$filter_name&&DemoImporterPlus.filter_array.push($filter_name),$(".dip-filter-wrap-checkbox input[name=dip-radio]:checked").length&&($(".dip-filter-wrap-checkbox input[name=dip-radio]").removeClass("active"),$(".dip-filter-wrap-checkbox input[name=dip-radio]:checked").addClass("active")),$(".dip-filter-wrap-checkbox input[name=dip-radio]:checked").val());""!=$filter_name&&DemoImporterPlus.filter_array.push($filter_name),DemoImporterPlus._closeFilter(),$(".demo-importer-plus-search").trigger("keyup")},add_sites_after_search:function(data){var template=wp.template("demo-importer-plus-page-builder-sites");$("#demo-import-plus").html(template(data))},add_sites:function(data){var template=wp.template("demo-importer-plus-page-builder-sites");$("#demo-import-plus").html(template(data))},isEmpty:function(obj){for(var key in obj)if(obj.hasOwnProperty(key))return!1;return!0},_get_sites_and_pages_by_search_term:function(search_term){var items=[],tags_strings=[];if(""==(search_term=search_term.toLowerCase())&&0==DemoImporterPlus.filter_array.length)return demoImporterVars.default_page_builder_sites;var $filter_type=$(".dip-filter-wrap-checkbox input[name=dip-radio]:checked").val(),$filter_name=$(".dip-category-filter-anchor").attr("data-slug");for(site_id in demoImporterVars.default_page_builder_sites){var current_site=demoImporterVars.default_page_builder_sites[site_id],text_match=!0,free_match=!0,category_match=!0,match_id="";if(""!=search_term&&(text_match=!1),""!=$filter_name&&(category_match=!1),""!=$filter_type&&(free_match=!1),current_site.site_title&&DemoImporterPlus._unescape_lower(current_site.site_title).toLowerCase().includes(search_term)&&(text_match=!0,match_id=site_id),Object.keys(current_site.site_tags).length)for(site_tag_id in current_site.site_tags){var tag_title=current_site.site_tags[site_tag_id];(tag_title=DemoImporterPlus._unescape_lower(tag_title.replace("-"," "))).toLowerCase().includes(search_term)&&(text_match=!0,match_id=site_id)}for(filter_id in DemoImporterPlus.filter_array){var slug=DemoImporterPlus.filter_array[filter_id];if("free"==slug&&"free"==current_site.site_type&&(free_match=!0,match_id=site_id),"pro"==slug&&"free"!=current_site.site_type&&(free_match=!0,match_id=site_id),"free"!=slug&&"pro"!=slug&&null!=slug)for(cat_id in current_site.site_categories)slug.toLowerCase()==current_site.site_categories[cat_id].slug&&(category_match=!0,match_id=site_id)}if(""!=match_id&&text_match&&category_match&&free_match)for(site_tag_id in items[site_id]=current_site,items[site_id].type="site",items[site_id].site_id=site_id,items[site_id]["pages-count"]=null!=current_site.pages?Object.keys(current_site.pages).length:0,tags_strings.push(DemoImporterPlus._unescape_lower(current_site.title)),current_site["sites-tag"]){tag_title=current_site["sites-tag"][site_tag_id];(tag_title=DemoImporterPlus._unescape_lower(tag_title.replace("-"," "))).toLowerCase().includes(search_term)&&tags_strings.push(DemoImporterPlus._unescape_lower(tag_title))}}return""!=search_term&&DemoImporterPlus._log(items),items},_unescape:function(input_string){input_string=_.unescape(input_string);return input_string=(input_string=input_string.replace("&#8211;","-")).replace("&#8217;","'")},_unescape_lower:function(input_string){return(input_string=DemoImporterPlus._unescape(input_string)).toLowerCase()},_log:function(data,level){(new Date).toLocaleTimeString();_typeof(data)},_toggle_tooltip:function(event){event.preventDefault();event=$(event.currentTarget).data("tip-id")||"";event&&$("#"+event).length&&$("#"+event).toggle()},_log_title:function(data,append){var markup="<p>"+data+"</p>",data=("object"==_typeof(data)&&(markup="<p>"+JSON.stringify(data)+"</p>"),$(".dip-importing-wrap"));$(".current-importing-status-title").length&&(data=$(".current-importing-status-title")),append?data.append(markup):data.html(markup)},_importFailMessage:function(message,heading,jqXHR,topContent){heading=heading||"The import process interrupted";var output,status_code="";200==(status_code=jqXHR?jqXHR.status?parseInt(jqXHR.status):"":status_code)&&demoImporterVars.debug?output=demoImporterVars.importFailedMessageDueToDebug:(output=topContent||demoImporterVars.importFailedMessage,message&&(output+='<div class="current-importing-status">Error: '+message+"</div>")),$(".demo-import-plus-import-content").html(output),$(".demo-import-sitest-result-prev .heading h3").html(heading),$(".dip-demo-import").removeClass("updating-message installing button-primary").addClass("disabled").text("Import Failed!")},_go_back:function(event){event.preventDefault(),DemoImporterPlus._clean_url_params("demo-importer-site"),DemoImporterPlus._clean_url_params("demo-importer-page"),$(".search-filter-wrap").show(),$(".back-to-layout").hide(),DemoImporterPlus.close_pages_popup()},_close_popup:function(){DemoImporterPlus._clean_url_params("demo-importer-site"),DemoImporterPlus._clean_url_params("demo-importer-page"),$(".preview-page-from-search-result").hide(),DemoImporterPlus.hide_popup()},close_pages_popup:function(){$("#demo-import-plus").show(),$(".di-sites__search-title").show(),$("#site-pages").hide().html(""),$("body").removeClass("demo-import-previewing-single-pages"),$(".demo-import-sitest-result-prev").hide(),$("#demo-importer-plus .demo-importe-theme").removeClass("current"),DemoImporterPlus._clean_url_params("demo-importer-site"),DemoImporterPlus._clean_url_params("demo-importer-page"),DemoImporterPlus._clean_url_params("license")},_changeAndSetURL:function(url_params){url_params=window.location.href+(-1===window.location.href.indexOf("?")?"?":"&")+decodeURIComponent($.param(url_params));DemoImporterPlus._changeURL(url_params)},_changeURL:function(url){history.pushState(null,"",url)},_getParamFromURL:function(name,url){url=url||window.location.href,name=name.replace(/[\[\]]/g,"\\$&");name=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)").exec(url);return name?name[2]?decodeURIComponent(name[2].replace(/\+/g," ")):"":null},_clean_url_params:function(single_param){var current_url_separator,url_params=DemoImporterPlus._getQueryStrings(),single_param=(delete url_params[single_param],delete url_params[""],window.location.href),single_param=single_param.substr(0,single_param.indexOf("?"));single_param=$.isEmptyObject(url_params)?single_param+decodeURIComponent($.param(url_params)):(current_url_separator=-1===single_param.indexOf("?")?"?":"&",single_param+current_url_separator+decodeURIComponent($.param(url_params))),DemoImporterPlus._changeURL(single_param)},_remove_skip_and_import_popup:function(event){event.preventDefault(),$(this).parents(".skip-and-import").addClass("demo-importer-plus-hide visited"),$(".skip-and-import.demo-importer-plus-hide").not(".visited").length?$(".skip-and-import.demo-importer-plus-hide").not(".visited").first().removeClass("demo-importer-plus-hide"):($(".demo-import-sitest-result-prev .default").removeClass("demo-importer-plus-hide"),$(".demo-import-sitest-result-prev").hasClass("import-page")&&(DemoImporterPlus.skip_and_import_popups=[],(DemoImporterPlus.required_plugins.notinstalled||0).length||DemoImporterPlus.import_page_process()))},_installError:function(event,response){event.preventDefault(),$(".demo-importer-plus-result-preview .heading h3").text("Plugin Installation Failed"),$(".demo-import-plus-import-content").html('<p>Plugin "<b>'+response.name+'</b>" installation failed.</p><p>There has been an error on your website. Read an article <a href="https://rishitheme.com/docs/how-to-resolve-demo-import-issue/" target="blank">here</a> to solve the issue.</p>'),$(".dip-demo-import").removeClass("updating-message installing button-primary").addClass("disabled").text("Import Failed!"),wp.updates.queue=[],wp.updates.queueChecker()},_pluginInstalling:function(event,args){event.preventDefault(),DemoImporterPlus._log_title("Installing Plugin - "+args.name)},_installSuccess:function(event,response){event.preventDefault();event=demoImporterVars.requiredPlugins.notinstalled;demoImporterVars.requiredPlugins.notinstalled=DemoImporterPlus._removePluginFromQueue(response.slug,event),setTimeout(function(){DemoImporterPlus._log_title("Activating Plugin - "+response.name),DemoImporterPlus._log("Activating Plugin - "+response.name),$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-required-plugin-activate",init:response.init,options:DemoImporterPlus.options_data,enabledExtensions:DemoImporterPlus.enabled_extensions,_ajax_nonce:demoImporterVars._ajax_nonce}}).done(function(result){DemoImporterPlus._log(result),result.success&&(result=demoImporterVars.requiredPlugins.inactive,DemoImporterPlus._log_title("Successfully Activated Plugin - "+response.name),DemoImporterPlus._log("Successfully Activated Plugin - "+response.name),demoImporterVars.requiredPlugins.inactive=DemoImporterPlus._removePluginFromQueue(response.slug,result),DemoImporterPlus._enable_demo_import_button())})},1200)},_getQueryStrings:function(string){return(string||document.location.search).replace(/(^\?)/,"").split("&").map(function(n){return this[(n=n.split("="))[0]]=n[1],this}.bind({}))[0]}},"isEmpty",function(obj){for(var key in obj)if(obj.hasOwnProperty(key))return!1;return!0}),_defineProperty(_DemoImporterPlus,"_unescape",function(input_string){input_string=_.unescape(input_string);return input_string=(input_string=input_string.replace("&#8211;","-")).replace("&#8217;","'")}),_defineProperty(_DemoImporterPlus,"_unescape_lower",function(input_string){return(input_string=DemoImporterPlus._unescape(input_string)).toLowerCase()}),_defineProperty(_DemoImporterPlus,"_set_preview_screenshot_by_page",function(element){var imgLarge,large_img_url=$(element).find(".theme-screenshot").attr("data-featured-src")||"",url=$(element).find(".theme-screenshot").attr("data-src")||"",page_name=$(element).find(".theme-name").text()||"",element=($(element).siblings().removeClass("current_page"),$(element).addClass("current_page"),$(element).attr("data-page-id")||"");element&&(DemoImporterPlus._clean_url_params("demo-importer-page"),DemoImporterPlus._changeAndSetURL({"demo-importer-page":element})),$(".site-import-layout-button").removeClass("disabled"),page_name&&(element=demoImporterVars.strings.importSingleTemplate.replace("%s",page_name.trim()),$(".site-import-layout-button").text(element)),url&&($(".single-site-preview").animate({scrollTop:0},0),$(".single-site-preview img").addClass("loading").attr("src",url),(imgLarge=new Image).src=large_img_url,imgLarge.onload=function(){$(".single-site-preview img").removeClass("loading"),$(".single-site-preview img").attr("src",imgLarge.src)})}),_defineProperty(_DemoImporterPlus,"_change_site_preview_screenshot",function(event){event.preventDefault();event=$(event.currentTarget);DemoImporterPlus._set_preview_screenshot_by_page(event)}),_defineProperty(_DemoImporterPlus,"_change_page_builder",function(event){var page_builder=$(event.currentTarget).attr("data-page-builder")||"";$(event.currentTarget).parents(".page-builders").find("img").removeClass("active"),$(event.currentTarget).find("img").addClass("active"),$.ajax({url:ajaxurl,type:"POST",data:{action:"demo_importer_plus_change_page_builder",page_builder:page_builder},beforeSend:function(){DemoImporterPlus._log("Change Page Builder..")}}).done(function(response){DemoImporterPlus._log(response)})}),_defineProperty(_DemoImporterPlus,"show_page_popup_from_search",function(event){event.preventDefault();var page_id=$(event.currentTarget).parents(".demo-import-plus-theme").attr("data-page-id")||"",site_id=$(event.currentTarget).parents(".demo-import-plus-theme").attr("data-site-id")||"";$("#demo-import-plus").hide(),$("#site-pages").hide(),$(".di-sites__search-title").hide(),$(".search-filter-wrap").hide(),$(".demo-importer-plus-search-results").hide(),$(".back-to-layout").show(),demoImporterVars.default_page_builder_sites.find(function(site){return site.id==site_id})||!1?DemoImporterPlus.show_pages_by_site_id(site_id,page_id):($(".single-site-wrap > .svg-animated-loader").show(),event=(new Date).getTime(),fetch("".concat(demoImporterVars.demoAPIURL,"/wp-json/demoimporterplusapi/v1/dipa-demos/").concat(site_id,"?nocache=").concat(event)).then(function(response){return response.json()}).then(function(data){$(".single-site-wrap > .svg-animated-loader").hide(),demoImporterVars.default_page_builder_sites.push(data.data),DemoImporterPlus.show_pages_by_site_id(site_id,page_id)}))}),_defineProperty(_DemoImporterPlus,"_get_id",function(site_id){return site_id.replace("id-","")}),_defineProperty(_DemoImporterPlus,"show_page_popup",function(){DemoImporterPlus.process_import_page()}),_defineProperty(_DemoImporterPlus,"_show_site_popup",function(event){event.preventDefault(),$($(this)).hasClass("updating-message")||($(".demo-import-sitest-result-prev").addClass("import-site").removeClass("import-page"),$(".demo-import-sitest-result-prev").removeClass("preview-page-from-search-result demo-importer-plus-page-import-popup dip-sites-activate-license").addClass("demo-importer-plus-popup demo-importer-plus-site-import-popup").show(),event=wp.template("demo-import-sitest-result-prev"),$(".demo-import-sitest-result-prev").html(event("dip-sites")).addClass("preparing"),$(".demo-import-plus-import-content").append('<div class="dip-loading-wrap"><div class="dip-loading-icon"></div></div>'),DemoImporterPlus.action_slug="importer-sites",demoImporterVars.cpt_slug="demo-importer-plus",event=$("#site-pages").attr("data-site-id")||"",event=DemoImporterPlus._get_id(event),DemoImporterPlus.visited_sites_and_pages[event]?(DemoImporterPlus.templateData=DemoImporterPlus.visited_sites_and_pages[event],DemoImporterPlus.process_site_data(DemoImporterPlus.templateData.data)):$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-import-site-api-request",url:"/"+event},beforeSend:function(){}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"",jqXHR)}).done(function(response){DemoImporterPlus._log(response),response.success?(DemoImporterPlus.visited_sites_and_pages[response.data.data.id]=response.data,DemoImporterPlus.templateData=response.data.data,DemoImporterPlus.process_site_data(DemoImporterPlus.templateData)):($(".demo-import-sitest-result-prev .heading > h3").text("Import Process Interrupted"),$(".demo-import-plus-import-content").find(".dip-loading-wrap").remove(),$(".demo-import-sitest-result-prev").removeClass("preparing"),$(".demo-import-plus-import-content").html(wp.template("dip-sites-request-failed")),$(".dip-demo-import").removeClass("updating-message installing button-primary").addClass("disabled").text("Import Failed!"))}))}),_defineProperty(_DemoImporterPlus,"_resetData",function(){var status;DemoImporterPlus.import_start_time=new Date,$(this).hasClass("updating-message")||($(this).addClass("updating-message installing").text("Importing.."),$("body").addClass("importing-site"),$(".demo-import-sitest-result-prev .inner > h3").text("We're importing your website."),$(".install-theme-info").hide(),$(".dip-importing-wrap").show(),$(".current-importing-status").html('<div class="current-importing-status-title"></div><div class="current-importing-status-description"></div>'),$(".demo-importer-plus-theme-activation .checkbox").is(":checked")&&(status=$(".demo-importer-plus-theme-activation .checkbox").data("status"),DemoImporterPlus._installTheme(status)),$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-set-reset-data",_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){}}).done(function(response){DemoImporterPlus._log(response),response.success&&(DemoImporterPlus.site_imported_data=response.data,DemoImporterPlus._bulkPluginInstallActivate())}))}),_defineProperty(_DemoImporterPlus,"_installTheme",function(status){var theme_slug=DemoImporterPlus.templateData.theme_slug;DemoImporterPlus._log_title(demoImporterVars.log.themeInstall),DemoImporterPlus._log(demoImporterVars.log.themeInstall),"not-installed"==status?(wp.updates.shouldRequestFilesystemCredentials&&!wp.updates.ajaxLocked&&wp.updates.requestFilesystemCredentials(),wp.updates.installTheme({slug:theme_slug})):"installed-but-inactive"==status&&DemoImporterPlus._activateTheme()}),_defineProperty(_DemoImporterPlus,"_activateTheme",function(event,response){setTimeout(function(){$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-activate-theme",theme_name:DemoImporterPlus.templateData.theme_slug,_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){}}).done(function(result){DemoImporterPlus._log(result),result.success&&(DemoImporterPlus._log_title(result.data.message),DemoImporterPlus._log(result.data.message))})},3e3)}),_defineProperty(_DemoImporterPlus,"_start_site_import",function(){DemoImporterPlus._is_reset_data()?$(document).trigger("demo-importer-plus-reset-data"):$(document).trigger("demo-importer-plus-sites-reset-data-done")}),_defineProperty(_DemoImporterPlus,"_is_reset_data",function(){return!!$(".demo-importer-plus-reset-data").find(".checkbox").is(":checked")}),_defineProperty(_DemoImporterPlus,"_is_process_xml",function(){return!!$(".demo-importer-plus-import-xml").find(".checkbox").is(":checked")}),_defineProperty(_DemoImporterPlus,"_is_process_customizer",function(){var theme_status=!$(".demo-importer-plus-theme-activation .checkbox").length||$(".demo-importer-plus-theme-activation .checkbox").is(":checked"),customizer_status=$(".demo-importer-plus-import-customizer").find(".checkbox").is(":checked");return!(!theme_status||!customizer_status)}),_defineProperty(_DemoImporterPlus,"_is_process_widgets",function(){return!!$(".demo-importer-plus-import-widgets").find(".checkbox").is(":checked")}),_defineProperty(_DemoImporterPlus,"_startImportCartFlows",function(event){DemoImporterPlus._is_process_xml()&&""!==DemoImporterPlus.cartflows_url?$.ajax({url:demoImporterVars.ajaxurl,type:"POST",dataType:"json",data:{action:"demo-importer-plus-import-cartflows",cartflows_url:DemoImporterPlus.cartflows_url,_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Importing Flows & Steps.."),DemoImporterPlus._log(DemoImporterPlus.cartflows_url)}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Import Cartflows Flow Failed!",jqXHR)}).done(function(response){DemoImporterPlus._log(response),!1===response.success?DemoImporterPlus._importFailMessage(response.data,"Import Cartflows Flow Failed!"):$(document).trigger(DemoImporterPlus.action_slug+"-import-cartflows-done")}):$(document).trigger(DemoImporterPlus.action_slug+"-import-cartflows-done")}),_defineProperty(_DemoImporterPlus,"_startImportContactForms",function(event){DemoImporterPlus._is_process_xml()&&""!==DemoImporterPlus.wpforms_url?$.ajax({url:demoImporterVars.ajaxurl,type:"POST",dataType:"json",data:{action:"dip-sites-import-wpforms",wpforms_url:DemoImporterPlus.wpforms_url,_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Importing WP Forms.."),DemoImporterPlus._log(DemoImporterPlus.wpforms_url)}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Import WP Forms Failed!",jqXHR)}).done(function(response){DemoImporterPlus._log(response),!1===response.success?DemoImporterPlus._importFailMessage(response.data,"Import WP Forms Failed!"):$(document).trigger(DemoImporterPlus.action_slug+"-import-wpforms-done")}):$(document).trigger(DemoImporterPlus.action_slug+"-import-wpforms-done")}),_defineProperty(_DemoImporterPlus,"_importCustomizerSettings",function(event){DemoImporterPlus._is_process_customizer()?$.ajax({url:demoImporterVars.ajaxurl,type:"POST",dataType:"json",data:{action:"demo-importer-plus-import-customizer-settings",customizer_data:DemoImporterPlus.customizer_data,_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Importing Customizer Settings..")}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Import Customizer Settings Failed!",jqXHR)}).done(function(response){DemoImporterPlus._log(response),!1===response.success?DemoImporterPlus._importFailMessage(response.data,"Import Customizer Settings Failed!"):$(document).trigger("demo-importer-plus-import-customizer-settings-done")}):$(document).trigger("demo-importer-plus-import-customizer-settings-done")}),_defineProperty(_DemoImporterPlus,"_importXML",function(){DemoImporterPlus._is_process_xml()?$.ajax({url:demoImporterVars.ajaxurl,type:"POST",dataType:"json",data:{action:"demo-importer-plus-import-prepare-xml",wxr_url:DemoImporterPlus.wxr_url,_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Importing Content.."),DemoImporterPlus._log(DemoImporterPlus.wxr_url),$(".di-process-wrap").show()}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Prepare Import XML Failed!",jqXHR)}).done(function(response){var evtSource;DemoImporterPlus._log(response),!1===response.success?(response.data.error||response.data,DemoImporterPlus._importFailMessage(demoImporterVars.xmlRequiredFilesMissing)):"yes"!==$(".dip-demo-import").attr("data-xml-processing")&&($(".dip-demo-import").attr("data-xml-processing","yes"),DemoImporterSSEImport.data=response.data,DemoImporterSSEImport.render(),$(".current-importing-status-description").html("").show(),$(".current-importing-status-wrap").append('<div class="di-process-wrap"><progress class="di-process" max="100" value="0"></progress></div>'),(evtSource=new EventSource(DemoImporterSSEImport.data.url)).onmessage=function(message){var data=JSON.parse(message.data.replace(/&quot;/g,'"'));switch(data.action){case"updateDelta":DemoImporterSSEImport.updateDelta(data.type,data.delta);break;case"complete":evtSource.close(),$(".current-importing-status-description").hide(),$(".dip-demo-import").removeAttr("data-xml-processing"),document.getElementsByClassName("di-process").value="100",$(".di-process-wrap").hide(),$(document).trigger("demo-importer-plus-import-xml-done")}},evtSource.onerror=function(error){evtSource.close(),DemoImporterPlus._importFailMessage("","Import Process Interrupted")},evtSource.addEventListener("log",function(message){var data=JSON.parse(message.data.replace(/&quot;/g,'"'));(message=data.message||"")&&"info"===data.level&&(message=message.replace(/"/g,function(letter){return""}),$(".current-importing-status-description").html(message)),DemoImporterPlus._log(message,data.level)}))}):$(document).trigger("demo-importer-plus-import-xml-done")}),_defineProperty(_DemoImporterPlus,"import_siteOptions",function(event){DemoImporterPlus._is_process_xml()?$.ajax({url:demoImporterVars.ajaxurl,type:"POST",dataType:"json",data:{action:"demo-importer-plus-import-options",options_data:DemoImporterPlus.options_data,_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Importing Options.."),$(".dip-demo-import .percent").html("")}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Import Site Options Failed!",jqXHR)}).done(function(response){DemoImporterPlus._log(response),!1===response.success?DemoImporterPlus._importFailMessage(response.data,"Import Site Options Failed!"):$(document).trigger("demo-importer-plus-import-options-done")}):$(document).trigger("demo-importer-plus-import-options-done")}),_defineProperty(_DemoImporterPlus,"_importWidgets",function(event){DemoImporterPlus._is_process_widgets()?$.ajax({url:demoImporterVars.ajaxurl,type:"POST",dataType:"json",data:{action:"demo-importer-plus-import-widgets",widgets_data:DemoImporterPlus.widgets_data,_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Importing Widgets..")}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Import Widgets Failed!",jqXHR)}).done(function(response){DemoImporterPlus._log(response),!1===response.success?DemoImporterPlus._importFailMessage(response.data,"Import Widgets Failed!"):$(document).trigger("demo-importer-plus-import-widgets-done")}):$(document).trigger("demo-importer-plus-import-widgets-done")}),_defineProperty(_DemoImporterPlus,"_importEnd",function(event){$.ajax({url:demoImporterVars.ajaxurl,type:"POST",dataType:"json",data:{action:"demo-importer-plus-import-end",_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Import Complete!")}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Import Complete Failed!",jqXHR)}).done(function(response){DemoImporterPlus._log(response),!1===response.success?DemoImporterPlus._importFailMessage(response.data,"Import Complete Failed!"):(DemoImporterPlus.site_import_status=!0,DemoImporterPlus.import_complete())})}),_defineProperty(_DemoImporterPlus,"import_complete",function(){var template;!1!==DemoImporterPlus.subscribe_status&&($("body").removeClass("importing-site"),template=wp.template("demo-importer-plus-site-import-success"),$(".demo-import-sitest-result-prev .inner").html(template()),$(".rotating,.current-importing-status-wrap,.notice-warning").remove(),$(".demo-import-sitest-result-prev").addClass("demo-importer-plus-result-preview"),DemoImporterPlus._importSuccessButton(),DemoImporterPlus.site_import_status=!1,DemoImporterPlus.subscribe_status=!1)}),_defineProperty(_DemoImporterPlus,"_importSuccessButton",function(){$(".dip-demo-import").removeClass("updating-message installing").removeAttr("data-import").addClass("view-site").removeClass("dip-demo-import").text(demoImporterVars.strings.viewSite).attr("target","_blank").append('<i class="dashicons dashicons-external"></i>').attr("href",demoImporterVars.siteURL)}),_defineProperty(_DemoImporterPlus,"add_skip_and_import_popups",function(templates){if(Object.keys(templates).length){for(temp_id in templates){var template=wp.template(temp_id),template_data=templates[temp_id]||"";$(".demo-import-sitest-result-prev .inner").append(template(template_data))}$(".demo-import-sitest-result-prev .inner > .default").addClass("demo-importer-plus-hide"),$(".demo-import-sitest-result-prev .inner > .skip-and-import:not(:ldip-child)").addClass("demo-importer-plus-hide")}}),_defineProperty(_DemoImporterPlus,"process_site_data",function(data){"log_file"in data&&(DemoImporterPlus.log_file_url=decodeURIComponent(data.log_file)||""),DemoImporterPlus.customizer_data=JSON.stringify(data["customizer-data"])||"",DemoImporterPlus.wxr_url=encodeURI(data["wxr-path"])||"",DemoImporterPlus.options_data=JSON.stringify(data["site-option"])||"",DemoImporterPlus.theme_name=JSON.stringify(data["theme-name"])||"",DemoImporterPlus.enabled_extensions=JSON.stringify(data["dip-enabled-extensions"])||"",DemoImporterPlus.widgets_data=data["widgets-data"]||"",DemoImporterPlus.template_kit_markup(data),DemoImporterPlus.required_plugins_list_markup(data.required_plugins)}),_defineProperty(_DemoImporterPlus,"template_kit_markup",function(data){demoImporterVars.default_page_builder}),_defineProperty(_DemoImporterPlus,"hide_popup",function(){$(".demo-importer-plus-popup").hide()}),_defineProperty(_DemoImporterPlus,"process_import_page",function(){DemoImporterPlus.hide_popup();var page_id=DemoImporterPlus._get_id($("#single-pages").find(".current_page").attr("data-page-id"))||"",site_id=DemoImporterPlus._get_id($("#site-pages").attr("data-site-id"))||"";$(".demo-import-sitest-result-prev").removeClass("demo-importer-plus-site-import-popup demo-importer-plus-page-import-popup").addClass("preview-page-from-search-result demo-importer-plus-page-import-popup").show(),$(".demo-import-sitest-result-prev").html(wp.template("demo-import-sitest-result-prev")).addClass("preparing"),$(".demo-import-plus-import-content").append('<div class="dip-loading-wrap"><div class="dip-loading-icon"></div></div>'),DemoImporterPlus.action_slug="site-pages",demoImporterVars.cpt_slug="site-pages",DemoImporterPlus.visited_sites_and_pages[page_id]?(DemoImporterPlus.templateData=DemoImporterPlus.visited_sites_and_pages[page_id],DemoImporterPlus.required_plugins_list_markup(DemoImporterPlus.templateData.data["page-required-plugins"])):$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-import-site-api-request",url:"/"+site_id+"?page="+page_id},beforeSend:function(){DemoImporterPlus._log("Requesting API URL")}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Page Import API Request Failed!",jqXHR)}).done(function(response){DemoImporterPlus._log(response),response.success?(DemoImporterPlus.visited_sites_and_pages[response.data.data.id]=response.data,DemoImporterPlus.templateData=response.data,DemoImporterPlus.required_plugins_list_markup(DemoImporterPlus.templateData.data["page-required-plugins"])):($(".demo-import-sitest-result-prev .heading > h3").text("Import Process Interrupted"),$(".demo-import-plus-import-content").find(".dip-loading-wrap").remove(),$(".demo-import-sitest-result-prev").removeClass("preparing"),$(".demo-import-plus-import-content").html(wp.template("demo-importr-plus-request-failed")),$(".demo-import-plus-impr").removeClass("updating-message installing button-primary").addClass("disabled").text("Import Failed!"))})}),_defineProperty(_DemoImporterPlus,"_backup_before_rest_options",function(){DemoImporterPlus._backupOptions("demo-importer-plus-sites-backup-settings-before-reset-done"),DemoImporterPlus.backup_taken=!0}),_defineProperty(_DemoImporterPlus,"_recheck_backup_options",function(){DemoImporterPlus._backupOptions("demo-importer-plus-backup-settings-done"),DemoImporterPlus.backup_taken=!0}),_defineProperty(_DemoImporterPlus,"_backupOptions",function(trigger_name){DemoImporterPlus.backup_taken?$(document).trigger(trigger_name):$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-backup-settings",_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Processing Customizer Settings Backup..")}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Backup Customizer Settings Failed!",jqXHR)}).done(function(data){DemoImporterPlus._log(data),DemoImporterPlus._log_title("Customizer Settings Backup Done.."),$(document).trigger(trigger_name)})}),_defineProperty(_DemoImporterPlus,"_reset_customizer_data",function(){$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-reset-customizer-data",_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Reseting Customizer Data..")}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Reset Customizer Settings Failed!",jqXHR)}).done(function(data){DemoImporterPlus._log(data),DemoImporterPlus._log_title("Complete Resetting Customizer Data.."),DemoImporterPlus._log("Complete Resetting Customizer Data.."),$(document).trigger("demo-importer-plus-sites-reset-customizer-data-done")})}),_defineProperty(_DemoImporterPlus,"_reset_site_options",function(){$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-reset-site-options",_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Reseting Site Options..")}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Reset Site Options Failed!",jqXHR)}).done(function(data){DemoImporterPlus._log(data),DemoImporterPlus._log_title("Complete Reseting Site Options.."),$(document).trigger("demo-importer-plus-sites-reset-site-options-done")})}),_defineProperty(_DemoImporterPlus,"_reset_widgets_data",function(){$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-reset-widgets-data",_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Reseting Widgets..")}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+" "+jqXHR.statusText,"Reset Widgets Data Failed!",jqXHR)}).done(function(data){DemoImporterPlus._log(data),DemoImporterPlus._log_title("Complete Reseting Widgets.."),$(document).trigger("demo-importer-plus-sites-reset-widgets-data-done")})}),_defineProperty(_DemoImporterPlus,"_reset_posts",function(){DemoImporterPlus.site_imported_data.reset_posts.length?(DemoImporterPlus.reset_remaining_posts=DemoImporterPlus.site_imported_data.reset_posts.length,DemoImporterPlus._log_title("Deleting Posts.."),$.each(DemoImporterPlus.site_imported_data.reset_posts,function(index,post_id){DemoImporterAjaxQueue.add({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-sites-delete-posts",post_id:post_id,_ajax_nonce:demoImporterVars._ajax_nonce},success:function(result){DemoImporterPlus.reset_processed_posts<DemoImporterPlus.site_imported_data.reset_posts.length&&(DemoImporterPlus.reset_processed_posts+=1),DemoImporterPlus._log_title("Deleting Post "+DemoImporterPlus.reset_processed_posts+" of "+DemoImporterPlus.site_imported_data.reset_posts.length+"<br/>"+result.data),--DemoImporterPlus.reset_remaining_posts,0==DemoImporterPlus.reset_remaining_posts&&($(document).trigger("demo-importer-plus-sites-delete-posts-done"),$(document).trigger("demo-importer-plus-sites-reset-data-done"))}})}),DemoImporterAjaxQueue.run()):($(document).trigger("demo-importer-plus-sites-delete-posts-done"),$(document).trigger("demo-importer-plus-sites-reset-data-done"))}),_defineProperty(_DemoImporterPlus,"_reset_contact_form7",function(){DemoImporterPlus.site_imported_data.reset_contact_form7.length?(DemoImporterPlus.reset_remaining_contact_form7=DemoImporterPlus.site_imported_data.reset_contact_form7.length,DemoImporterPlus._log_title("Deleting Contact Form 7.."),$.each(DemoImporterPlus.site_imported_data.reset_contact_form7,function(index,post_id){DemoImporterAjaxQueue.add({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-sites-delete-contact-form7",post_id:post_id,_ajax_nonce:demoImporterVars._ajax_nonce},success:function(result){DemoImporterPlus.reset_processed_contact_form7<DemoImporterPlus.site_imported_data.reset_contact_form7.length&&(DemoImporterPlus.reset_processed_contact_form7+=1),DemoImporterPlus._log_title("Deleting Form "+DemoImporterPlus.reset_processed_contact_form7+" of "+DemoImporterPlus.site_imported_data.reset_contact_form7.length+"<br/>"+result.data),DemoImporterPlus._log("Deleting Form "+DemoImporterPlus.reset_processed_contact_form7+" of "+DemoImporterPlus.site_imported_data.reset_contact_form7.length+"<br/>"+result.data),--DemoImporterPlus.reset_remaining_contact_form7,0==DemoImporterPlus.reset_remaining_contact_form7&&$(document).trigger("demo-importer-plus-sites-delete-contact-form7-done")}})}),DemoImporterAjaxQueue.run()):$(document).trigger("demo-importer-plus-sites-delete-contact-form7-done")}),_defineProperty(_DemoImporterPlus,"_reset_terms",function(){DemoImporterPlus.site_imported_data.reset_terms.length?(DemoImporterPlus.reset_remaining_terms=DemoImporterPlus.site_imported_data.reset_terms.length,DemoImporterPlus._log_title("Deleting Terms.."),$.each(DemoImporterPlus.site_imported_data.reset_terms,function(index,term_id){DemoImporterAjaxQueue.add({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-sites-delete-terms",term_id:term_id,_ajax_nonce:demoImporterVars._ajax_nonce},success:function(result){DemoImporterPlus.reset_processed_terms<DemoImporterPlus.site_imported_data.reset_terms.length&&(DemoImporterPlus.reset_processed_terms+=1),DemoImporterPlus._log_title("Deleting Term "+DemoImporterPlus.reset_processed_terms+" of "+DemoImporterPlus.site_imported_data.reset_terms.length+"<br/>"+result.data),DemoImporterPlus._log("Deleting Term "+DemoImporterPlus.reset_processed_terms+" of "+DemoImporterPlus.site_imported_data.reset_terms.length+"<br/>"+result.data),--DemoImporterPlus.reset_remaining_terms,0==DemoImporterPlus.reset_remaining_terms&&$(document).trigger("demo-importer-plus-sites-delete-terms-done")}})}),DemoImporterAjaxQueue.run()):$(document).trigger("demo-importer-plus-sites-delete-terms-done")}),_defineProperty(_DemoImporterPlus,"_bulkPluginInstallActivate",function(){var not_installed,activate_plugins;0!==Object.keys(demoImporterVars.requiredPlugins).length&&(not_installed=demoImporterVars.requiredPlugins.notinstalled||"",$(".demo-import-sitest-result-prev").hasClass("skip-plugins")&&(not_installed=[]),activate_plugins=demoImporterVars.requiredPlugins.inactive||"",0<not_installed.length&&DemoImporterPlus._installAllPlugins(not_installed),0<activate_plugins.length&&DemoImporterPlus._activateAllPlugins(activate_plugins),activate_plugins.length<=0)&&not_installed.length<=0&&DemoImporterPlus._enable_demo_import_button()}),_defineProperty(_DemoImporterPlus,"_activateAllPlugins",function(activate_plugins){DemoImporterPlus.remaining_activate_plugins=activate_plugins.length,$.each(activate_plugins,function(index,single_plugin){DemoImporterAjaxQueue.add({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-required-plugin-activate",init:single_plugin.init,options:DemoImporterPlus.options_data,enabledExtensions:DemoImporterPlus.enabled_extensions,_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title('Activating Plugin "'+single_plugin.name+'"')},success:function(result){result.success&&(result=demoImporterVars.requiredPlugins.inactive,demoImporterVars.requiredPlugins.inactive=DemoImporterPlus._removePluginFromQueue(single_plugin.slug,result),DemoImporterPlus._enable_demo_import_button()),--DemoImporterPlus.remaining_activate_plugins,DemoImporterPlus.remaining_activate_plugins}})}),DemoImporterAjaxQueue.run()}),_defineProperty(_DemoImporterPlus,"_enable_demo_import_button",function(type){switch(type=void 0!==type?type:"free",$(".install-theme-info .theme-details .site-description").remove(),type){case"free":var notinstalled=demoImporterVars.requiredPlugins.notinstalled||0,inactive=demoImporterVars.requiredPlugins.inactive||0;(notinstalled=$(".demo-import-sitest-result-prev").hasClass("skip-plugins")?[]:notinstalled).length===inactive.length&&$(document).trigger("demo-importer-plus-after-"+DemoImporterPlus.action_slug+"-required-plugins");break;case"upgrade":var demo_slug=$(".wp-full-overlay-header").attr("data-demo-slug");$(".dip-demo-import").addClass("go-pro button-primary").removeClass("dip-demo-import").attr("target","_blank").attr("href",demoImporterVars.getUpgradeURL+demo_slug).text(demoImporterVars.getUpgradeText).append('<i class="dashicons dashicons-external"></i>');break;default:demo_slug=$(".wp-full-overlay-header").attr("data-demo-slug");$(".dip-demo-import").addClass("go-pro button-primary").removeClass("dip-demo-import").attr("target","_blank").attr("href",demoImporterVars.getProURL).text(demoImporterVars.getProText).append('<i class="dashicons dashicons-external"></i>'),$(".wp-full-overlay-header").find(".go-pro").remove(),0==demoImporterVars.isWhiteLabeled&&(demoImporterVars.isPro?$(".install-theme-info .theme-details").prepend(wp.template("dip-sites-pro-inactive-site-description")):$(".install-theme-info .theme-details").prepend(wp.template("dip-sites-pro-site-description")))}}),_defineProperty(_DemoImporterPlus,"_installAllPlugins",function(not_installed){$.each(not_installed,function(index,single_plugin){wp.updates.queue.push({action:"install-plugin",data:{slug:single_plugin.slug,init:single_plugin.init,name:single_plugin.name,success:function(){$(document).trigger("wp-plugin-install-success",[single_plugin])},error:function(){$(document).trigger("wp-plugin-install-error",[single_plugin])}}})}),wp.updates.queueChecker()}),_defineProperty(_DemoImporterPlus,"import_page_process",function(){$(".demo-importer-plus-page-import-popup .site-install-site-button, .preview-page-from-search-result .site-install-site-button").hasClass("updating-message")||($(".demo-importer-plus-page-import-popup .site-install-site-button, .preview-page-from-search-result .site-install-site-button").addClass("updating-message installing").text("Importing.."),DemoImporterPlus.import_start_time=new Date,$(".demo-import-sitest-result-prev .inner > h3").text("We're importing your website."),$(".install-theme-info").hide(),$(".dip-importing-wrap").show(),$(".current-importing-status").html('<div class="current-importing-status-title"></div><div class="current-importing-status-description"></div>'),DemoImporterPlus._bulkPluginInstallActivate())}),_defineProperty(_DemoImporterPlus,"required_plugins_list_markup",function(requiredPlugins){""!==requiredPlugins&&($("#plugin-filter"),$(".dip-demo-import").addClass("disabled not-click-able").removeAttr("data-import"),$(".required-plugins").addClass("loading").html('<span class="spinner is-active"></span>'),$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-required-plugins",_ajax_nonce:demoImporterVars._ajax_nonce,required_plugins:requiredPlugins,options:DemoImporterPlus.options_data,enabledExtensions:DemoImporterPlus.enabled_extensions},beforeSend:function(){}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),$(".required-plugins").removeClass("loading").html(""),DemoImporterPlus._importFailMessage(jqXHR.status+jqXHR.statusText,"Required Plugins Failed!",jqXHR)}).done(function(response){if(DemoImporterPlus._log(response),!1===response.success)DemoImporterPlus._importFailMessage(response.data,"Required Plugins Failed!","",demoImporterVars.importFailedRequiredPluginsMessage);else{required_plugins=response.data.required_plugins;var compatibilities=demoImporterVars.compatibilities;if(DemoImporterPlus.skip_and_import_popups=[],DemoImporterPlus.required_plugins=response.data.required_plugins,response.data.update_avilable_plugins.length){compatibilities.warnings["update-available"]=demoImporterVars.compatibilities_data["update-available"];for(var list_html="<ul>",index=0;index<response.data.update_avilable_plugins.length;index++)list_html+="<li>"+response.data.update_avilable_plugins[index].name+"</li>";compatibilities.warnings["update-available"].tooltip=compatibilities.warnings["update-available"].tooltip.replace("##LIST##",list_html+="</ul>")}else delete compatibilities.warnings["update-available"];response.data.third_party_required_plugins.length&&(DemoImporterPlus.skip_and_import_popups["dip-sites-third-party-required-plugins"]=response.data.third_party_required_plugins);"yes"===($("#single-pages").find(".current_page").attr("data-dynamic-page")||"no")&&"site-pages"===DemoImporterPlus.action_slug&&(DemoImporterPlus.skip_and_import_popups["dip-sites-dynamic-page"]=""),$(".demo-import-plus-impr").removeClass("disabled not-click-able").attr("data-import","disabled"),$(".required-plugins").removeClass("loading").html(""),$(".required-plugins-list").html("");var output="";void 0!==required_plugins.notinstalled&&(parseInt(required_plugins.notinstalled.length),$(required_plugins.notinstalled).each(function(index,plugin){output+='<li class="plugin-card plugin-card-'+plugin.slug+'" data-slug="'+plugin.slug+'" data-init="'+plugin.init+'" data-name="'+plugin.name+'">'+plugin.name+"</li>"})),void 0!==required_plugins.inactive&&(parseInt(required_plugins.inactive.length),$(required_plugins.inactive).each(function(index,plugin){output+='<li class="plugin-card plugin-card-'+plugin.slug+'" data-slug="'+plugin.slug+'" data-init="'+plugin.init+'" data-name="'+plugin.name+'">'+plugin.name+"</li>"})),""==output?$(".demo-import-sitest-result-prev").find(".dip-sites-import-plugins").hide():($(".demo-import-sitest-result-prev").find(".dip-sites-import-plugins").show(),$(".demo-import-sitest-result-prev").find(".required-plugins-list").html(output)),demoImporterVars.requiredPlugins=required_plugins,$(".demo-import-plus-import-content").find(".dip-loading-wrap").remove(),$(".demo-import-sitest-result-prev").removeClass("preparing"),Object.keys(compatibilities.errors).length||Object.keys(compatibilities.warnings).length||Object.keys(DemoImporterPlus.skip_and_import_popups).length?((Object.keys(compatibilities.errors).length||Object.keys(compatibilities.warnings).length)&&(DemoImporterPlus.skip_and_import_popups["demo-importer-plus-compatibility-messages"]=compatibilities),Object.keys(DemoImporterPlus.skip_and_import_popups).length&&DemoImporterPlus.add_skip_and_import_popups(DemoImporterPlus.skip_and_import_popups)):"site-pages"!==DemoImporterPlus.action_slug||(demoImporterVars.requiredPlugins.notinstalled||0).length||DemoImporterPlus.import_page_process()}}))}),_defineProperty(_DemoImporterPlus,"_page_api_call",function(){Object.keys(DemoImporterPlus.skip_and_import_popups).length||null!=DemoImporterPlus.templateData&&DemoImporterPlus.import_contact_form7(DemoImporterPlus.templateData.data.contact_form,function(form_response){$("body").addClass("importing-site"),$(".current-importing-status-wrap").remove(),$(".demo-import-sitest-result-prev .inner > h3").text("We are importing page!"),fetch(DemoImporterPlus.templateData.data["page-api-url"]).then(function(response){return response.json()}).then(function(data){$.ajax({url:demoImporterVars.ajaxurl,type:"POST",dataType:"json",data:{action:"demo-importer-plus-create-page",_ajax_nonce:demoImporterVars._ajax_nonce,page_settings_flag:DemoImporterPlus.page_settings_flag,data:data},success:function(response){var template;response.success?($("body").removeClass("importing-site"),$(".rotating,.current-importing-status-wrap,.notice-warning").remove(),template=wp.template("demo-importer-plus-page-import-success"),$(".demo-import-sitest-result-prev .inner").html(template(response.data))):DemoImporterPlus._importFailMessage(response.data,"Page Rest API Request Failed!")}})}).catch(function(err){DemoImporterPlus._log(err),DemoImporterPlus._importFailMessage(response.data,"Page Rest API Request Failed!")})})}),_defineProperty(_DemoImporterPlus,"_insertDemo",function(data){var page_id,templateModel,page_content,api_url;void 0!==data&&void 0!==data["post-meta"]._elementor_data&&(page_id=DemoImporterPlus.templateData.data["page-id"],page_id=DemoImporterPlus.templateData.data.pages[page_id],templateModel=new Backbone.Model({getTitle:function(){return data.title}}),page_content=JSON.parse(data["post-meta"]._elementor_data),api_url="",api_url=page_id["page-api-url"],$.ajax({url:demoImporterVars.ajaxurl,type:"POST",data:{action:"demo-importer-plus-page-elementor-batch-process",id:elementor.config.document.id,url:api_url,_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){}}).fail(function(jqXHR){}).done(function(response){DemoImporterPlus.processing=!1,$elscope.find(".demo-importer-plus-sites-content-wrap").removeClass("processing"),void 0!==(page_content=response.data)&&""!==page_content&&(null!=$e&&void 0!==$e.internal?(elementor.channels.data.trigger("template:before:insert",templateModel),elementor.getPreviewView().addChildModel(page_content,{at:DemoImporterPlus.index}),elementor.channels.data.trigger("template:after:insert",{}),$e.internal("document/save/set-is-modified",{status:!0})):(elementor.channels.data.trigger("template:before:insert",templateModel),elementor.getPreviewView().addChildModel(page_content,{at:DemoImporterPlus.index}),elementor.channels.data.trigger("template:after:insert",{}),elementor.saver.setFlagEditorChange(!0))),DemoImporterPlus.insertActionFlag=!0,DemoImporterPlus._close()}))}),_defineProperty(_DemoImporterPlus,"import_contact_form7",function(contact_form,callback){void 0===contact_form?callback&&"function"==typeof callback&&callback(""):$.ajax({url:demoImporterVars.ajaxurl,type:"POST",dataType:"json",data:{action:"demo-importer-plus-import-contactforms",contact_forms:contact_form,_ajax_nonce:demoImporterVars._ajax_nonce},beforeSend:function(){DemoImporterPlus._log_title("Importing Contact Form 7..")}}).fail(function(jqXHR){DemoImporterPlus._log(jqXHR),DemoImporterPlus._importFailMessage(jqXHR.status+jqXHR.statusText,"Import Contact Form 7 Failed!",jqXHR)}).done(function(response){DemoImporterPlus._log(response),!1===response.success?DemoImporterPlus._importFailMessage(response.data,"Import Contact Form 7 Failed!"):callback&&"function"==typeof callback&&callback(response)})}),_defineProperty(_DemoImporterPlus,"show_page_popup_from_sites",function(e){e.preventDefault(),$(this).hasClass("updating-message")||($(".demo-import-sitest-result-prev").addClass("import-page").removeClass("import-site"),DemoImporterPlus.show_page_popup())}),_defineProperty(_DemoImporterPlus,"show_pages_by_site_id",function(site_id,page_id){var site_template,data=(demoImporterVars.default_page_builder_sites||[]).find(function(site){return site.id==site_id});void 0!==data&&(site_template=wp.template("demo-imprt-single-site-preview"),DemoImporterPlus._getParamFromURL("demo-importer-site")||DemoImporterPlus._changeAndSetURL({"demo-importer-site":site_id}),$("#demo-import-plus").hide(),$("#site-pages").show().html(site_template(data)).removeClass("brizy elementor beaver-builder gutenberg").addClass(demoImporterVars.default_page_builder),$("body").addClass("demo-importer-previewing-single-pages"),$("#site-pages").attr("data-site-id",site_id),DemoImporterPlus._getParamFromURL("demo-importer-page")?DemoImporterPlus._set_preview_screenshot_by_page($('#single-pages .site-single[data-page-id="'+DemoImporterPlus._getParamFromURL("demo-importer-page")+'"]')):page_id&&$('#single-pages .site-single[data-page-id="'+page_id+'"]').length?DemoImporterPlus._set_preview_screenshot_by_page($('#single-pages .site-single[data-page-id="'+page_id+'"]')):$("#single-pages .site-single").eq(0).length&&DemoImporterPlus._set_preview_screenshot_by_page($("#single-pages .site-single").eq(0)),$("#single-pages .site-single").eq(0).length||$(".site-import-layout-button").hide()),window.scrollTo({top:0,behavior:"smooth"})}),_defineProperty(_DemoImporterPlus,"_removePluginFromQueue",function(removeItem,pluginsList){return jQuery.grep(pluginsList,function(value){return value.slug!=removeItem})}),_DemoImporterPlus),$(function(){DemoImporterPlus.init()})}(jQuery);