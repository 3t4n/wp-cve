!function(e,t,n,d){function i(e,t){this.masterSelect=jQuery(e),this.dependentSelect=jQuery(t),this.dependentHtml=this.dependentSelect.html(),this.updateDependentSelect(),this.masterSelect.change(jQuery.proxy(this.updateDependentSelect,this))}e.fn.dependentDropdown=function(e){return this.each(function(){new i(this,e)})},i.prototype={constructor:i,updateDependentSelect:function(){if(""===this.masterSelect.val())this.dependentSelect.prop("disabled","disabled");else{var t=this.masterSelect.val(),n=e(this.dependentHtml).filter("optgroup[label='"+t+"']").find("option");n.length>1?(this.dependentSelect.html(n),this.dependentSelect.prop("disabled",!1)):(this.dependentSelect.html('<option value="">none available</option>'),this.dependentSelect.prop("disabled",!0))}}}}(jQuery,window,document);
(function(){var t,e,s,i,r,o={}.hasOwnProperty,n=function(t,e){function s(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,s,i,r,o,n;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),o=t.childNodes,n=[],i=0,r=o.length;r>i;i++)s=o[i],n.push(this.add_option(s,e,t.disabled));return n},t.prototype.add_option=function(t,e,s){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:!0===s?s:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t.prototype.escapeExpression=function(t){var e,s;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(s,function(t){return e[t]||"&amp;"})):t},t}(),i.select_to_array=function(t){var e,s,r,o,n;for(s=new i,n=t.childNodes,r=0,o=n.length;o>r;r++)e=n[r],s.add_node(e);return s.parsed},e=function(){function t(e,s){this.form_field=e,this.options=null!=s?s:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.results_option_build=function(t){var e,s,i,r,o;for(e="",o=this.results_data,i=0,r=o.length;r>i;i++)s=o[i],e+=s.group?this.result_add_group(s):this.result_add_option(s),(null!=t?t.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(s.text));return e},t.prototype.result_add_option=function(t){var e,s;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),s=document.createElement("li"),s.className=e.join(" "),s.style.cssText=t.style,s.setAttribute("data-option-array-index",t.array_index),s.innerHTML=t.search_text,this.outerHTML(s)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,s,i,r;for(i=this.results_data,r=[],e=0,s=i.length;s>e;e++)t=i[e],t.selected?r.push(t.selected=!1):r.push(void 0);return r},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,s,i,r,o,n,h,l,c,a,_;for(this.no_results_clear(),i=0,o=this.get_search_text(),t=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=new RegExp(t,"i"),s=this.get_search_regex(t),_=this.results_data,c=0,a=_.length;a>c;c++)e=_[c],e.search_match=!1,r=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(r=this.results_data[e.group_array_index],0===r.active_options&&r.search_match&&(i+=1),r.active_options+=1),(!e.group||this.group_search)&&(e.search_text=e.group?e.label:e.text,e.search_match=this.search_string_match(e.search_text,s),e.search_match&&!e.group&&(i+=1),e.search_match?(o.length&&(n=e.search_text.search(l),h=e.search_text.substr(0,n+o.length)+"</em>"+e.search_text.substr(n+o.length),e.search_text=h.substr(0,n)+"<em>"+h.substr(n)),null!=r&&(r.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>i&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.get_search_regex=function(t){var e;return e=this.search_contains?"":"^",new RegExp(e+t,"i")},t.prototype.search_string_match=function(t,e){var s,i,r,o;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" "),i.length))for(r=0,o=i.length;o>r;r++)if(s=i[r],e.test(s))return!0},t.prototype.choices_count=function(){var t,e,s,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,e=0,s=i.length;s>e;e++)t=i[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(i){return e.browser_is_supported()?this.each(function(){var e,r;e=t(this),r=e.data("chosen"),"destroy"===i&&r instanceof s?r.destroy():r instanceof s||e.data("chosen",new s(this,i))}):this}}),s=function(e){function s(){return r=s.__super__.constructor.apply(this,arguments)}return n(s,e),s.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},s.prototype.set_up_html=function(){var e,s;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),s={class:e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(s.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",s),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},s.prototype.register_observers=function(){var t=this;return this.container.bind("touchstart.chosen",function(e){t.container_mousedown(e)}),this.container.bind("touchend.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},s.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},s.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},s.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},s.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},s.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=t.originalEvent.deltaY||-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},s.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},s.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},s.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},s.prototype.test_active_click=function(e){var s;return s=t(e.target).closest(".chosen-container"),s.length&&this.container[0]===s[0]?this.active_field=!0:this.close_field()},s.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},s.prototype.result_do_highlight=function(t){var e,s,i,r,o;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),r=i+o,s=this.result_highlight.position().top+this.search_results.scrollTop(),(e=s+this.result_highlight.outerHeight())>=r)return this.search_results.scrollTop(e-i>0?e-i:0);if(o>s)return this.search_results.scrollTop(s)}},s.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},s.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},s.prototype.update_results_content=function(t){return this.search_results.html(t)},s.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},s.prototype.set_tab_index=function(){var t;return this.form_field.tabIndex?(t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t):void 0},s.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},s.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},s.prototype.search_results_mouseup=function(e){var s;return s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s.length?(this.result_highlight=s,this.result_select(e),this.search_field.focus()):void 0},s.prototype.search_results_mouseover=function(e){var s;return s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s?this.result_do_highlight(s):void 0},s.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},s.prototype.choice_build=function(e){var s,i,r=this;return s=t("<li />",{class:"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?s.addClass("search-choice-disabled"):(i=t("<a />",{class:"search-choice-close","data-option-array-index":e.array_index}),i.bind("click.chosen",function(t){return r.choice_destroy_link_click(t)}),s.append(i)),this.search_container.before(s)},s.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},s.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},s.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},s.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},s.prototype.result_select=function(t){var e,s;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),s=this.results_data[e[0].getAttribute("data-option-array-index")],s.selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(s):this.single_set_selected_text(s.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[s.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},s.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},s.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},s.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},s.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},s.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},s.prototype.no_results=function(e){var s;return s=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),s.find("span").first().html(e),this.search_results.append(s),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},s.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},s.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},s.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},s.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},s.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},s.prototype.keydown_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:this.results_showing&&t.preventDefault();break;case 32:this.disable_search&&t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},s.prototype.search_field_scale=function(){var e,s,i,r,o,n,h,l;if(this.is_multiple){for(0,n=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],h=0,l=o.length;l>h;h++)i=o[h],r+=i+":"+this.search_field.css(i)+";";return e=t("<div />",{style:r}),e.text(this.search_field.val()),t("body").append(e),n=e.width()+25,e.remove(),s=this.container.outerWidth(),n>s-10&&(n=s-10),this.search_field.css({width:n+"px"})}},s}(e)}).call(this);
var LocationSearch=function(t){function e(e,i){return this.$element=t(e),void 0===i&&(i={}),this.omniSearchUrl="//apps.flexmls.com/quick_launch/omni",this.portalSlug=i.portalSlug,this.init(),this}return e.prototype={constructor:e,init:function(){var e=this;this.s2=t(this.$element).select2({ajax:{url:e.omniSearchUrl,dataType:"jsonp",quietMillis:500,data:e.ajaxData.bind(e),processResults:e.processAjaxResults.bind(e),cache:!0},placeholder:"Enter an Address, City, or ZIP",minimumInputLength:3,formatInputTooShort:function(t,e){return"Please enter "+(e-t.length)+" or more characters"}})},selectedValues:function(){var e=t(this.$element).select2("data"),i=[];return Array.isArray(e)||(e=[e]),e.forEach(function(t){i.push({id:t.id,text:t.text,fieldName:t.id.split("_")[0],value:t.id.split("_")[1]})}),i},ajaxData:function(t){var e={_q:t.term,_lo:!1};return void 0!==this.portalSlug&&(e.portal_slug=this.portalSlug),e},processAjaxResults:function(t,e){var i=this,r=[];return t.D.Results.forEach(function(t){var e,a,s,n;"Field"==t.Type?(e=t.Field.Id,a=t.Field.Name,s=t.Field.Value,n=t.Field.SparkQl):"Listing"==t.Type&&(e="ListingId",a=t.Listing.Name,s=t.Listing.Number,n=t.Listing.SparkQl),r.push({id:e+"_"+s,text:i.getDisplayText(e,s,a),fieldName:e,value:s,sparkQl:n})}),{results:r}},getDisplayText:function(t,e,i){return"ListingId"===t?e+" (MLS #)":"polygon"===e.substr(0,7)||"radius"===e.substr(0,6)?"Drawn Shape":e+" ("+i+")"}},e}(jQuery);
var AdminLocationSearch=function(t){function i(i){this.widgetContainer=t(i),this.locationSearchInput=this.widgetContainer.find(".flexmlsAdminLocationSearch"),this.locationSearchValues=this.widgetContainer.find(".flexmls_connect__location_fields"),this.portalSlug=this.locationSearchInput.attr("data-portal-slug"),this.init()}return i.prototype={constructor:i,init:function(){this.locationSearchInput.length&&(this.locationSearch=new LocationSearch(this.locationSearchInput,{portalSlug:this.portalSlug}),this.insertInitiallySelectedValue(),this.locationSearchInput.change(this.updateLocationSearchValues.bind(this)))},insertInitiallySelectedValue:function(){var t=this,i=this.locationSearchValues.val();i.length&&(i.split("|").forEach(function(i){var a=i.split("="),n=a[0],e=a[1].split(/&(.+)/)[0],o=a[1].split(/&(.+)/)[1],l=t.locationSearch.getDisplayText(n,o,n),c=new Option(l,n+"_"+e,!0,!0);t.locationSearchInput.append(c)}),this.locationSearchInput.trigger("change"))},updateLocationSearchValues:function(t){var i=this.locationSearch.selectedValues(),a=[];i.forEach(function(t){var i=t.value,n=t.value;"SubdivisionName"==t.fieldName&&("'"!=i[0]&&"'"!=i[i.length-1]||(i=i.substr(1),i=i.slice(0,-1)),i+="*"),a.push(t.fieldName+"="+i+"&"+n)}),this.locationSearchValues.val(a.join("|"))}},i}(jQuery);
function rmxId(e){return"x'"==e.substring(0,2)?e.substring(2,e.length-1):e}function xId(e){return"x'"==e.substring(0,2)?e:"x'"+e+"'"}var flexmls_connect={};flexmls_connect.report_options={absorption:[],inventory:[{label:"Active Listings",value:"ActiveListings",selected:!0},{label:"New Listings",value:"NewListings",selected:!0},{label:"Pended Listings",value:"PendedListings"},{label:"Sold Listings",value:"SoldListings"}],price:[{label:"Active Avg List Price",value:"ActiveAverageListPrice",selected:!0},{label:"New Avg List Price",value:"NewAverageListPrice",selected:!0},{label:"Pended Avg List Price",value:"PendedAverageListPrice"},{label:"Sold Avg List Price",value:"SoldAverageListPrice"},{label:"Sold Avg Sale Price",value:"SoldAverageSoldPrice"},{label:"Active Median List Price",value:"ActiveMedianListPrice",selected:!0},{label:"New Median List Price",value:"NewMedianListPrice",selected:!0},{label:"Pended Median List Price",value:"PendedMedianListPrice"},{label:"Sold Median List Price",value:"SoldMedianListPrice"},{label:"Sold Median Sale Price",value:"SoldMedianSoldPrice"}],ratio:[{label:"Sale to Original List Price Ratio",value:"SaleToOriginalListPriceRatio",selected:!0},{label:"Sale to List Price Ratio",value:"SaleToListPriceRatio"}],dom:[{label:"Average CDOM",value:"AverageCdom",selected:!0},{label:"Average ADOM",value:"AverageDom"}],volume:[{label:"Active List Volume",value:"ActiveListVolume",selected:!0},{label:"New List Volume",value:"NewListVolume",selected:!0},{label:"Pended List Volume",value:"PendedListVolume"},{label:"Sold List Volume",value:"SoldListVolume"},{label:"Sold Sale Volume",value:"SoldSaleVolume"}]},jQuery(document).ready(function(e){jQuery("#summary-views").keyup(function(){""!=jQuery(this).val()?jQuery("#summary-views-check").attr("checked","checked"):jQuery("#summary-views-check").removeAttr("checked")}),jQuery("#detail-views").keyup(function(){""!=jQuery(this).val()?jQuery("#detail-views-check").attr("checked","checked"):jQuery("#detail-views-check").removeAttr("checked")}),jQuery("#idx_frame_shortcode_docs_link").live("click",function(){return jQuery("#idx_frame_shortcode_docs").toggle("slow"),!1}),jQuery("select.flexmls_connect__stat_type").live("change",function(){var e=jQuery(this).parent().parent(),l=jQuery("select.flexmls_connect__stat_display",e),t=flexmls_connect.report_options[jQuery(":selected",this).val()];l.html("");for(var r=0;r<t.length;r++)jQuery("<option value='"+t[r].value+"' "+(t[r].selected?"selected='selected'":"")+">"+t[r].label+"</option>").appendTo(l)}),jQuery(".flexmls_connect__theme_selector").live("change",function(){var l=jQuery(this).parent().parent().parent(),t=jQuery(this).val();if(""!=t){var r={vert_round_light:{border:"round",orientation:"vertical",scheme:"light"},vert_round_dark:{border:"round",orientation:"vertical",scheme:"dark"},vert_square_light:{border:"square",orientation:"vertical",scheme:"light"},vert_square_dark:{border:"square",orientation:"vertical",scheme:"dark"},hori_round_light:{border:"round",orientation:"horizontal",scheme:"light"},hori_round_dark:{border:"round",orientation:"horizontal",scheme:"dark"},hori_square_light:{border:"square",orientation:"horizontal",scheme:"light"},hori_square_dark:{border:"square",orientation:"horizontal",scheme:"dark"}},o=jQuery("input[fmc-field='width']",l),i=jQuery("select[fmc-field='orientation']",l),n=jQuery("select[fmc-field='border_style']",l),c=jQuery("input[fmc-field='background_color']",l)[0],a=jQuery("input[fmc-field='title_text_color']",l)[0],s=jQuery("input[fmc-field='field_text_color']",l)[0],u=jQuery("input[fmc-field='detailed_search_text_color']",l)[0],_=jQuery("input[fmc-field='submit_button_background']",l)[0],d=jQuery("input[fmc-field='submit_button_text_color']",l)[0],v=r[t];"vertical"==v.orientation?(jQuery(o).val("300"),jQuery(i).val("vertical")):(jQuery(o).val("730"),jQuery(i).val("horizontal")),"round"==v.border?jQuery(n).val("rounded"):jQuery(n).val("squared"),"light"==v.scheme?(e(_).wpColorPicker("color","#59CFEB"),e(d).wpColorPicker("color","000000"),e(a).wpColorPicker("color","000000"),e(c).wpColorPicker("color","FFFFFF"),e(s).wpColorPicker("color","545454"),e(u).wpColorPicker("color","234C7A")):(e(_).wpColorPicker("color","84B03D"),e(d).wpColorPicker("color","000000"),e(a).wpColorPicker("color","FFFFFF"),e(c).wpColorPicker("color","313131"),e(s).wpColorPicker("color","EDEDED"),e(u).wpColorPicker("color","4496EA"))}}),jQuery("select.flexmls_connect__listing_source").live("change",function(){var e=jQuery(this).parent().parent();"location"===jQuery(this).val()?(jQuery(".flexmls_connect__location, .flexmls_connect__location_property_type_p",e).show(),jQuery(".flexmls_connect__no_filters_applied",e).hide(),jQuery(".flexmls_connect__roster",e).hide()):"agent"===jQuery(this).val()?(jQuery(".flexmls_connect__roster",e).show(),jQuery(".flexmls_connect__location, .flexmls_connect__location_property_type_p",e).hide()):(jQuery(".flexmls_connect__location, .flexmls_connect__location_property_type_p",e).hide(),jQuery(".flexmls_connect__no_filters_applied",e).show(),jQuery(".flexmls_connect__roster",e).hide())}),jQuery("select.flexmls_connect__setting_enabler_property_type_enabled").live("change",function(){var e=jQuery(this).parent().parent().parent();"on"===jQuery(this).val()?jQuery(".flexmls_connect__disable_group_property_type_enabled",e).show():jQuery(".flexmls_connect__disable_group_property_type_enabled",e).hide()}),jQuery("select.flexmls_connect__setting_enabler_detailed_search").live("change",function(){var e=jQuery(this).parent().parent().parent();"on"===jQuery(this).val()?jQuery(".flexmls_connect__disable_group_detailed_search",e).show():jQuery(".flexmls_connect__disable_group_detailed_search",e).hide()}),jQuery("ul.flexmls_connect__sortable li span.remove").live("click",function(){var e=jQuery(this).parent().parent().parent();jQuery(this).parent().remove(),flexmls_connect.build_sortable_hidden_input(jQuery("ul.flexmls_connect__sortable",e))}),jQuery("button.flexmls_connect__add_std_field, button.flexmls_connect__add_property_type").live("click",function(){var e=jQuery(this).parent(),l=jQuery("select.flexmls_connect__available option:selected",e);return 0==jQuery("ul.flexmls_connect__sortable li[data-connect-name='"+l.val()+"']",e).length&&jQuery('<li><span class="remove" title="Remove this">&times;</span><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>'+l.text()+"</li>").attr("data-connect-name",l.val()).appendTo(jQuery("ul.flexmls_connect__sortable",e)),flexmls_connect.build_sortable_hidden_input(jQuery("ul.flexmls_connect__sortable",e)),!1}),jQuery(".photos_display").live("change",function(){"all"!=this.value?jQuery(".photos_days").show():jQuery(".photos_days").hide()}),jQuery(document).on("widget-added widget-updated",function(e,l){new AdminLocationSearch(jQuery(l).find("form"))}),jQuery("#widgets-right .widget form, .flexmls-idx_page_fmc_admin_neighborhood form").each(function(){new AdminLocationSearch(this)})}),flexmls_connect.sortable_setup=function(e){widget=jQuery(e).parent(),jQuery("ul.flexmls_connect__sortable",widget).each(function(l,t){try{jQuery(t).addClass("loaded").sortable({stop:function(e,l){flexmls_connect.build_sortable_hidden_input(jQuery(this))}}),jQuery(t).disableSelection()}catch(l){setTimeout(function(){flexmls_connect.sortable_setup(e)},1e3)}})},flexmls_connect.build_sortable_hidden_input=function(e){var l=jQuery(e).parent(),t="";jQuery("li",jQuery(e)).each(function(e,l){var r=jQuery(l).attr("data-connect-name");r&&(t+=""==t?r:","+r)}),jQuery("input.flexmls_connect__list_values",l).val(t)};
var spotlight={};spotlight.show=function(t,o){if(!o)var o={};o.id||(o.id="spotlight_"+Math.floor(1e16*Math.random())),o.html||(o.html="Insert HTML here..."),o.zIndex||(o.zIndex=100),o.width=o.width?o.width:150;var e=["position:absolute;padding:4px 10px;border-radius:10px; -moz-border-radius:10px; -webkit-border-radius:10px;"];e.push("background-color:"+(o.backgroundColor?o.backgroundColor:"#fff9d7")+";"),e.push("border:1px solid "+(o.borderColor?o.borderColor:"#e2c822")+";"),e.push("color:"+(o.color?o.color:"#000")+";"),e.push("font-size:"+(o.fontSize?o.fontSize:"9pt")+";"),e.push("width:"+o.width+"px;z-index:"+o.zIndex+";");var i=o.orientation&&"left"==o.orientation?"-":"";e.push("-moz-box-shadow:"+i+"3px 3px 10px #333;"),e.push("-webkit-box-shadow:"+i+"3px 3px 10px #333;"),e.push("box-shadow:"+i+"3px 3px 10px #333;"),e.push("filter:progid:DXImageTransform.Microsoft.DropShadow(color=#888888, offx="+i+"1, offy=1)progid:DXImageTransform.Microsoft.DropShadow(color=#cccccc, offx="+i+"1, offy=1);");var r=jQuery("#"+o.id).length>0?jQuery("#"+o.id):jQuery("<div class='spotlight' id='"+o.id+"' >");if(r.html(o.html),o.cancelCookie){jQuery("<div style='text-align:center;padding-top:1em;'></div>").prepend(jQuery("<a title='stop showing this message' style='cursor:pointer;'></a>").html("Don't show this message again").click(function(){spotlight.optout(o.id,o.cancelCookie)})).appendTo(r)}o.close&&r.prepend(jQuery("<a title='close' style='"+(o.closeColor?"color:"+o.closeColor+";":"")+"cursor:pointer;font-size:11pt;text-decoration:none;position:relative;float:right;padding-left:6px;top:-4px;right:-2px;'></a>").html("&times;").click(function(){spotlight.hide(o.id)}));var n=jQuery(t).offset();if(o.left&&(n.left=n.left+o.left),o.top&&(n.top=n.top+o.top),o.orientation){var s=isNaN(o.orientationBuffer)?2:o.orientationBuffer;"above"==o.orientation&&(n.bottom=jQuery(window).height()-n.top+s),"below"==o.orientation&&(n.top+=t.offsetHeight+s),"left"==o.orientation&&(n.left-=o.width+20+s+2),"right"==o.orientation&&(n.left+=t.offsetWidth+s)}return n.top<0&&(n.top=0),n.left<0&&(n.left=0),e.push("left:"+n.left+"px;"),n.bottom?e.push("bottom:"+n.bottom+"px;"):e.push("top:"+n.top+"px;"),r.attr("z",o.zIndex).attr("style",e.join("")),jQuery("#"+o.id).length>0&&(document.getElementById(o.id).style.cssText=e.join("")),jQuery("#"+o.id).length>0?r.show():r.appendTo("body"),navigator.userAgent.match("MSIE 6")&&spotlight.shim(o.id),o.closeTimer&&parseInt(o.closeTimer)>0&&setTimeout("spotlight.hide('"+o.id+"')",parseInt(o.closeTimer)),o.id},spotlight.hide=function(t){jQuery("div#"+t+", iframe#"+t+"_shim").remove()},spotlight.optout=function(t,o){var e=new Date;e.setTime(e.getTime()+31536e6);var i="; expires="+e.toGMTString();document.cookie=o+"=true"+i+"; path=/",document.getElementById(t)&&document.getElementById(t).parentNode.removeChild(document.getElementById(t))},spotlight.shim=function(t){var o=document.getElementById(t),e=jQuery(o),i=jQuery("iframe#"+t+"_shim");if(i.length>0)i.css({width:e.width()+22,height:e.height()+10});else{var r=e.offset();jQuery("<iframe>").attr("id",t+"_shim").attr("src","about:blank").attr("frameBorder",0).attr("scrolling","no").css({width:e.width(),height:e.height(),position:"absolute",top:r.top,left:r.left,margin:0,zIndex:o.z-1}).appendTo("body")}};
!function(e){e(document).ready(function(e){e("#flexmls_connect__admin_srf_table").length&&t.init("#flexmls_connect__admin_srf_table")});var t={table:null,newFieldSelect:null,rowTemplate:"",init:function(n){t.table=e(n),t.rowTemplate=t.table.data("template"),t.insertCurrentFields(),t.table.sortable({items:".flexmls_connect__admin_srf_row",cursor:"move",axis:"y",opacity:.7,placeholder:"flexmls_connect__admin_srf_placeholder"}),t.newFieldSelect=e(".flexmls_connect__admin_srf_add_new").chosen(),t.bindDelete(),t.bindNewFieldSelect()},insertCurrentFields:function(){var n=t.table.data("fields"),l="";e.each(n,function(e,n){l+=t.buildRow(e,n)}),t.table.append(l)},buildRow:function(e,n){return t.rowTemplate.replace(/{{field_id}}/g,e).replace(/{{display_name}}/g,n)},bindDelete:function(){e(".flexmls_connect__admin_srf_delete").click(function(t){t.preventDefault(),e(this).parent().slideUp().animate({opacity:0},function(){e(this).remove()}).dequeue()})},bindNewFieldSelect:function(){t.newFieldSelect.change(function(){var n=e(this).val(),l=e("option:selected",e(this)).text(),i=e(t.buildRow(n,l));i.css({position:"relative",opacity:"0",height:"0",top:"30px",display:"none"}),t.table.append(i),i.slideDown().animate({opacity:1,height:"100%",top:0},function(){e(this).attr("style","")}).dequeue(),t.bindDelete(),t.clearSelection()})},clearSelection:function(){t.newFieldSelect.val("").trigger("chosen:updated")}}}(jQuery);
!function(t){if(!t.wp.wpColorPicker.prototype._hasAlpha){var o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==",r='<div class="wp-picker-holder" />',i='<div class="wp-picker-container" />',e='<input type="button" class="button button-small" />',a=void 0!==wpColorPickerL10n.current;if(a)var n='<a tabindex="0" class="wp-color-result" />';else var n='<button type="button" class="button wp-color-result" aria-expanded="false"><span class="wp-color-result-text"></span></button>',l="<label></label>",s='<span class="screen-reader-text"></span>';Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var t=parseInt(this._color,10).toString(16);return this.error?"":(t.length<6&&(t=("00000"+t).substr(-6)),"#"+t)},t.widget("wp.wpColorPicker",t.wp.wpColorPicker,{_hasAlpha:!0,_create:function(){if(t.support.iris){var p=this,c=p.element;if(t.extend(p.options,c.data()),"hue"===p.options.type)return p._createHueOnly();p.close=t.proxy(p.close,p),p.initialValue=c.val(),c.addClass("wp-color-picker"),a?(c.hide().wrap(i),p.wrap=c.parent(),p.toggler=t(n).insertBefore(c).css({backgroundColor:p.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",wpColorPickerL10n.current),p.pickerContainer=t(r).insertAfter(c),p.button=t(e).addClass("hidden")):(c.parent("label").length||(c.wrap(l),p.wrappingLabelText=t(s).insertBefore(c).text(wpColorPickerL10n.defaultLabel)),p.wrappingLabel=c.parent(),p.wrappingLabel.wrap(i),p.wrap=p.wrappingLabel.parent(),p.toggler=t(n).insertBefore(p.wrappingLabel).css({backgroundColor:p.initialValue}),p.toggler.find(".wp-color-result-text").text(wpColorPickerL10n.pick),p.pickerContainer=t(r).insertAfter(p.wrappingLabel),p.button=t(e)),p.options.defaultColor?(p.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString),a||p.button.attr("aria-label",wpColorPickerL10n.defaultAriaLabel)):(p.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear),a||p.button.attr("aria-label",wpColorPickerL10n.clearAriaLabel)),a?c.wrap('<span class="wp-picker-input-wrap" />').after(p.button):(p.wrappingLabel.wrap('<span class="wp-picker-input-wrap hidden" />').after(p.button),p.inputWrapper=c.closest(".wp-picker-input-wrap")),c.iris({target:p.pickerContainer,hide:p.options.hide,width:p.options.width,mode:p.options.mode,palettes:p.options.palettes,change:function(r,i){p.options.alpha?(p.toggler.css({"background-image":"url("+o+")"}),a?p.toggler.html('<span class="color-alpha" />'):(p.toggler.css({position:"relative"}),0==p.toggler.find("span.color-alpha").length&&p.toggler.append('<span class="color-alpha" />')),p.toggler.find("span.color-alpha").css({width:"30px",height:"24px",position:"absolute",top:0,left:0,"border-top-left-radius":"2px","border-bottom-left-radius":"2px",background:i.color.toString()})):p.toggler.css({backgroundColor:i.color.toString()}),t.isFunction(p.options.change)&&p.options.change.call(this,r,i)}}),c.val(p.initialValue),p._addListeners(),p.options.hide||p.toggler.click()}},_addListeners:function(){var o=this;o.wrap.on("click.wpcolorpicker",function(t){t.stopPropagation()}),o.toggler.click(function(){o.toggler.hasClass("wp-picker-open")?o.close():o.open()}),o.element.on("change",function(r){(""===t(this).val()||o.element.hasClass("iris-error"))&&(o.options.alpha?(a&&o.toggler.removeAttr("style"),o.toggler.find("span.color-alpha").css("backgroundColor","")):o.toggler.css("backgroundColor",""),t.isFunction(o.options.clear)&&o.options.clear.call(this,r))}),o.button.on("click",function(r){t(this).hasClass("wp-picker-clear")?(o.element.val(""),o.options.alpha?(a&&o.toggler.removeAttr("style"),o.toggler.find("span.color-alpha").css("backgroundColor","")):o.toggler.css("backgroundColor",""),t.isFunction(o.options.clear)&&o.options.clear.call(this,r)):t(this).hasClass("wp-picker-default")})}}),t.widget("a8c.iris",t.a8c.iris,{_create:function(){if(this._super(),this.options.alpha=this.element.data("alpha")||!1,this.element.is(":input")||(this.options.alpha=!1),void 0!==this.options.alpha&&this.options.alpha){var o=this,r=o.element,i=t('<div class="iris-strip iris-slider iris-alpha-slider"><div class="iris-slider-offset iris-slider-offset-alpha"></div></div>').appendTo(o.picker.find(".iris-picker-inner")),e=i.find(".iris-slider-offset-alpha"),a={aContainer:i,aSlider:e};void 0!==r.data("custom-width")?o.options.customWidth=parseInt(r.data("custom-width"))||0:o.options.customWidth=100,o.options.defaultWidth=r.width(),(o._color._alpha<1||-1!=o._color.toString().indexOf("rgb"))&&r.width(parseInt(o.options.defaultWidth+o.options.customWidth)),t.each(a,function(t,r){o.controls[t]=r}),o.controls.square.css({"margin-right":"0"});var n=o.picker.width()-o.controls.square.width()-20,l=n/6,s=n/2-l;t.each(["aContainer","strip"],function(t,r){o.controls[r].width(s).css({"margin-left":l+"px"})}),o._initControls()}},_initControls:function(){if(this._super(),this.options.alpha){var t=this;t.controls.aSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(100*t._color._alpha),slide:function(o,r){t._color._alpha=parseFloat(r.value/100),t._change.apply(t,arguments)}})}},_change:function(){this._super();var t=this,r=t.element;if(this.options.alpha){var i=t.controls,e=parseInt(100*t._color._alpha),a=t._color.toRgb(),n=["rgb("+a.r+","+a.g+","+a.b+") 0%","rgba("+a.r+","+a.g+","+a.b+", 0) 100%"],l=t.options.defaultWidth,s=t.options.customWidth,p=t.picker.closest(".wp-picker-container").find(".wp-color-result");i.aContainer.css({background:"linear-gradient(to bottom, "+n.join(", ")+"), url("+o+")"}),p.hasClass("wp-picker-open")&&(i.aSlider.slider("value",e),t._color._alpha<1?(i.strip.attr("style",i.strip.attr("style").replace(/rgba\(([0-9]+,)(\s+)?([0-9]+,)(\s+)?([0-9]+)(,(\s+)?[0-9\.]+)\)/g,"rgb($1$3$5)")),r.width(parseInt(l+s))):r.width(l))}(r.data("reset-alpha")||!1)&&t.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){t._color._alpha=1,t.active="external"})},_addInputListeners:function(t){var o=this,r=function(r){var i=new Color(t.val()),e=t.val();t.removeClass("iris-error"),i.error?""!==e&&t.addClass("iris-error"):i.toString()!==o._color.toString()&&("keyup"===r.type&&e.match(/^[0-9a-fA-F]{3}$/)||o._setOption("color",i.toString()))};t.on("change",r).on("keyup",o._debounce(r,100)),o.options.hide&&t.on("focus",function(){o.show()})}})}}(jQuery),jQuery(document).ready(function(t){t(".color-picker").wpColorPicker(),t(".wp-picker-container").each(function(){var o=t(this).find(".wp-color-picker").clone(),r=t(this).parent();t(this).remove(),r.append(o)}),jQuery(".wp-color-picker").wpColorPicker()});