function add_cart(e,t,o,a,n){jQuery.post(fmcAjax.ajaxurl,{action:"fmcAccount_add_cart",flexmls_cart_id:e,flexmls_listing_id:t,flexmls_cart_type:o,flexmls_page_override:document.URL},function(e){window.onbeforeunload=function(e){},"SUCCESS"==e?a.each(function(){jQuery(this).bind("click",n)}):window.location=e})}function remove_cart(e,t,o,a,n,r){jQuery.post(fmcAjax.ajaxurl,{action:"fmcAccount_remove_cart",flexmls_cart_id:e,flexmls_listing_id:t,flexmls_cart_type:o,flexmls_page_override:document.URL},function(e){window.onbeforeunload=function(e){},"SUCCESS"==e?a&&a.each(function(){jQuery(this).bind("click",n)}):r&&(window.location=e)})}function get_cart_type(e){return e.hasClass("Favorites")?"Favorites":e.hasClass("Rejects")?"Rejects":void 0}var flexml_cart_event=function(){window.onbeforeunload=function(e){return"Leaving now may prevent your listing from being saved in your listing cart."};var e=jQuery(this),t=e.attr("Value"),o=e.parent().attr("Value"),a=e.parent().children();e.hasClass("selected")?(a.each(function(){jQuery(this).unbind()}),e.removeClass("selected"),remove_cart(t,o,get_cart_type(e),a,flexml_cart_event,!0)):(a.each(function(){var e=jQuery(this);e.unbind(),e.hasClass("selected")&&remove_cart(e.attr("Value"),o,get_cart_type(e),!1,flexml_cart_event),e.removeClass("selected")}),e.addClass("selected"),add_cart(t,o,get_cart_type(e),a,flexml_cart_event))};jQuery(document).ready(function(){jQuery(".flexmls_portal_cart_handle").bind("click",flexml_cart_event),jQuery("button[href].flexmls_connect__page_content").click(function(){document.location.href=jQuery(this).attr("href")}),jQuery(function(){var e=jQuery(".flexmlsConnect_cookie").val();if(void 0!==e){var t=parseInt(flexmls_connect.readCookie(e),10);isNaN(t)?flexmls_connect.createCookie(e,2,5):flexmls_connect.createCookie(e,parseInt(t+1,5))}var o=1e3*parseInt(jQuery("#portal_seconds").val(),10),a=1==jQuery("#portal_show").val(),n=parseInt(jQuery("input#portal_required").val()),r=jQuery("input#portal_position_x").val(),i=jQuery("input#portal_position_y").val(),l=jQuery("#portal_link").val(),c=jQuery("#fmc_dialog"),s=(screen.availHeight,c.height(),screen.availWidth,c.width(),[]);if(n=1===n,s.push({text:"Create or Login",class:"portal-button-primary flexmls_connect__button",click:function(){window.location=l}}),n||s.push({text:"Not now",class:"portal-button-secondary",click:function(){jQuery.post(fmcAjax.ajaxurl,{action:"fmcPortal_No_Thanks"},function(e){"SUCCESS"==e&&(document.cookie="user_start_time=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="search_page=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="detail_page=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",c.dialog("close"))})}}),c.dialog({dialogClass:"wp-dialog",position:{my:r+" "+i},resizable:!1,buttons:s,closeOnEscape:!n,autoOpen:!1,modal:!0}),a?c.dialog("open"):o&&setTimeout(function(){c.dialog("open")},o),a||o){if("bottom"==i){jQuery(".wp-dialog").css("bottom","10%"),jQuery(".wp-dialog").css("top","auto");var u=jQuery(window).scrollTop(),d=jQuery(".wp-dialog").offset().top,_=d-u;jQuery(".wp-dialog").css("top",_+"px"),jQuery(".wp-dialog").css("bottom","auto")}else"top"==i&&jQuery(".wp-dialog").css("top","5%");if("left"==r)jQuery(".wp-dialog").css("left","5%");else if("right"==r){jQuery(".wp-dialog").css("right","5%"),jQuery(".wp-dialog").css("left","auto");var u=jQuery(window).scrollLeft(),d=jQuery(".wp-dialog").offset().left,_=d-u;jQuery(".wp-dialog").css("left",_+"px"),jQuery(".wp-dialog").css("right","auto")}}})});