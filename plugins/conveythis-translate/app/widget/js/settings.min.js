jQuery(document).ready(function(s){s("#conveythis_api_key").on("input",function(){var e=s(this),t=e.val();/^(pub_)?[a-zA-Z0-9]*$/.test(t)||(t=t.substring(0,t.length-1),e.val(t)),36===t.length&&(/^pub_[a-zA-Z0-9]{32}$/.test(t)||alert('Error api key "pub_********************************"'))}),s(".conveythis_new_user").on("click",function(){jQuery.ajax({url:"options.php",method:"POST",data:{ready_user:1},success:function(){jQuery.ajax({url:"options.php",method:"POST",data:{convey_event:!0,convey_event_name:"eventReadyUserSuccess"}}),window.location.reload()},error:function(){jQuery.ajax({url:"options.php",method:"POST",data:{convey_event:!0,convey_event_name:"eventReadyUserError"}})}})}),s(".api-key-setting").on("click",function(){s("#login-form").css("display","none"),s("#login-form-settings").css("display","block")}),s("#login-form .signup-modal").on("click",function(){jQuery.ajax({url:"options.php",method:"POST",data:{convey_event:!0,convey_event_name:"eventSignupModal"}})}),s("#register_form").submit(e=>{e.preventDefault();var a={};jQuery.each(s("#register_form").serializeArray(),function(e,t){a[t.name]=t.value}),a["i-agree"]?(s("#signUpModal").modal("hide"),jQuery.ajax({method:"POST",url:"https://app.conveythis.com/api/signup",data:{email:a.email,domain:window.location.hostname,timestamp:Math.floor(Date.now()/1e3)},beforeSend:()=>{s(".loader").show()},success:e=>{if("success"==e.status){iconType="success",textTitle="Check your email and click on confirmation link",textDescription='<div class="loader-info"><p>You have successfully registered, please do not forget to confirm your email.<p/></div>',timeClose=5e3,newKey=e.data.pub_key;var t="eventRegisterFormSuccess";newKey&&(t+="Key"),1==e.data.is_registered&&(iconType="warning",textTitle="Your account already exists.",textDescription='<div class="loader-info"><p>Please go to <a target="_blank" href="https://app.conveythis.com/">ConveyThis</a> and log in. After that, you can copy API key for the plugin and apply it in the settings.<p/></div>',t="accountAlreadyExists"),1==e.data.duplication_domain&&(iconType="error",textTitle="Your domain has already been added.",textDescription='<div class="loader-info"><p>Please go to <a target="_blank" href="https://app.conveythis.com/">ConveyThis</a> and log in. After that, you can copy API key for the plugin and apply it in the settings.<p/></div>',t="domainAlreadyExists"),jQuery.ajax({url:"options.php",method:"POST",data:{convey_event:!0,convey_event_name:t}}),newKey&&(toastr.success("Confirmation email was sent to your email"),s("#conveythis_api_key").val(newKey),s(".loader").hide(),s(".next").click()),Swal.fire({icon:iconType,title:textTitle,showCloseButton:!1,showConfirmButton:!1,html:textDescription,timer:timeClose}).then(()=>{});const a=new Pusher(e.data.pusher_app_key,{cluster:e.data.pusher_cluster,encrypted:!0}),i=a.subscribe("notification_channel");i.bind("new_notification-"+e.data.tmp_pusher_id,function(e){s("#conveythis_api_key").val(e.api_key),s(".loader").hide(),s("#signUpModal").modal("hide"),s(".next").click()}),0!=e.data.is_registered||e.data.duplication_domain||setTimeout(()=>{jQuery.ajax({url:"options.php",method:"POST",data:{set_api_key:1,api_key:e.data.pub_key},success:function(){jQuery.ajax({url:"options.php",method:"POST",data:{convey_event:!0,convey_event_name:"eventSetApiKeySuccess"}}),window.location.reload()},error:function(){jQuery.ajax({url:"options.php",method:"POST",data:{convey_event:!0,convey_event_name:"eventSetApiKeyError"}})}})},timeClose)}else jQuery.ajax({url:"options.php",method:"POST",data:{convey_event:!0,convey_event_name:"eventRegisterFormError"}}),toastr.error(e.message)},complete:()=>{s(".loader").hide()}})):toastr.error("Agreeing to ConveyThis terms is required to register an account")}),s(".signup-link a").click(()=>{s(".login-link").show(),s(".signup-link").hide(),s("#register-div").show(),s("#login-div").hide()}),s(".login-link a").click(()=>{s(".login-link").hide(),s(".signup-link").show(),s("#register-div").hide(),s("#login-div").show()});var e=s(".input-psswd");s(".label-psswd").on("click",function(){"false"==e.attr("psswd-shown")?(s(".label-psswd .hide").show(),s(".label-psswd .show").hide(),e.removeAttr("type"),e.attr("type","text"),e.removeAttr("psswd-shown"),e.attr("psswd-shown","true")):(s(".label-psswd .hide").hide(),s(".label-psswd .show").show(),e.removeAttr("type"),e.attr("type","password"),e.removeAttr("psswd-shown"),e.attr("psswd-shown","false")),s(this).toggleClass("active")}),s(".signup-modal").click(()=>{s("#signUpModal").modal("show")});var t=s.fn.dropdown.noConflict();s.fn.bootstrapBtn=t;var o={703:{title_en:"English",title:"English",code2:"en",code3:"eng",flag:"R04"},704:{title_en:"Afrikaans",title:"Afrikaans",code2:"af",code3:"afr",flag:"7xS"},705:{title_en:"Albanian",title:"Shqip",code2:"sq",code3:"sqi",flag:"5iM"},706:{title_en:"Amharic",title:"አማርኛ",code2:"am",code3:"amh",flag:"ZH1"},707:{title_en:"Arabic",title:"العربية",code2:"ar",code3:"ara",flag:"J06"},708:{title_en:"Armenian",title:"Հայերեն",code2:"hy",code3:"hye",flag:"q9U"},709:{title_en:"Azerbaijan",title:"Azərbaycanca",code2:"az",code3:"aze",flag:"Wg1"},710:{title_en:"Bashkir",title:"Башҡортса",code2:"ba",code3:"bak",flag:"D1H"},711:{title_en:"Basque",title:"Euskara",code2:"eu",code3:"eus",flag:""},712:{title_en:"Belarusian",title:"Беларуская",code2:"be",code3:"bel",flag:"O8S"},713:{title_en:"Bengali",title:"বাংলা",code2:"bn",code3:"ben",flag:"63A"},714:{title_en:"Bosnian",title:"Bosanski",code2:"bs",code3:"bos",flag:"Z1t"},715:{title_en:"Bulgarian",title:"Български",code2:"bg",code3:"bul",flag:"V3p"},716:{title_en:"Burmese",title:"မြန်မာဘာသာ",code2:"my",code3:"mya",flag:"YB9"},717:{title_en:"Catalan",title:"Català",code2:"ca",code3:"cat",flag:"Pw6"},718:{title_en:"Cebuano",title:"Cebuano",code2:"ceb",code3:"ceb",flag:""},719:{title_en:"Chinese (Simplified)",title:"简体",code2:"zh",code3:"zh-sim",flag:"Z1v"},796:{title_en:"Chinese (Traditional)",title:"繁體",code2:"zh-tw",code3:"zh-tra",flag:"Z1v"},720:{title_en:"Croatian",title:"Hrvatski",code2:"hr",code3:"hrv",flag:"7KQ"},721:{title_en:"Czech",title:"Čeština",code2:"cs",code3:"cze",flag:"1ZY"},722:{title_en:"Danish",title:"Dansk",code2:"da",code3:"dan",flag:"Ro2"},723:{title_en:"Dutch",title:"Nederlands",code2:"nl",code3:"nld",flag:"8jV"},724:{title_en:"Esperanto",title:"Esperanto",code2:"eo",code3:"epo",flag:"Dw0"},725:{title_en:"Estonian",title:"Eesti",code2:"et",code3:"est",flag:"VJ8"},726:{title_en:"Finnish",title:"Finnish",code2:"fi",code3:"fin",flag:"nM4"},727:{title_en:"French",title:"Français",code2:"fr",code3:"fre",flag:"E77"},728:{title_en:"Galician",title:"Galego",code2:"gl",code3:"glg",flag:"A5d"},729:{title_en:"Georgian",title:"ქართული",code2:"ka",code3:"kat",flag:"8Ou"},730:{title_en:"German",title:"Deutsch",code2:"de",code3:"ger",flag:"K7e"},731:{title_en:"Greek",title:"Ελληνικά",code2:"el",code3:"ell",flag:"kY8"},732:{title_en:"Gujarati",title:"ગુજરાતી",code2:"gu",code3:"guj",flag:"My6"},733:{title_en:"Haitian",title:"Kreyòl Ayisyen",code2:"ht",code3:"hat",flag:""},734:{title_en:"Hebrew",title:"עברית",code2:"he",code3:"heb",flag:"5KS"},735:{title_en:"Hill Mari",title:"Курыкмарий",code2:"mrj",code3:"mrj",flag:""},736:{title_en:"Hindi",title:"हिन्दी",code2:"hi",code3:"hin",flag:"My6"},737:{title_en:"Hungarian",title:"Magyar",code2:"hu",code3:"hun",flag:"OU2"},738:{title_en:"Icelandic",title:"Íslenska",code2:"is",code3:"isl",flag:"Ho8"},739:{title_en:"Indonesian",title:"Bahasa Indonesia",code2:"id",code3:"ind",flag:"t0X"},740:{title_en:"Irish",title:"Gaeilge",code2:"ga",code3:"gle",flag:"5Tr"},741:{title_en:"Italian",title:"Italiano",code2:"it",code3:"ita",flag:"BW7"},742:{title_en:"Japanese",title:"日本語",code2:"ja",code3:"jpn",flag:"4YX"},743:{title_en:"Javanese",title:"Basa Jawa",code2:"jv",code3:"jav",flag:"C9k"},744:{title_en:"Kannada",title:"ಕನ್ನಡ",code2:"kn",code3:"kan",flag:"My6"},745:{title_en:"Kazakh",title:"Қазақша",code2:"kk",code3:"kaz",flag:"QA5"},746:{title_en:"Khmer",title:"ភាសាខ្មែរ",code2:"km",code3:"khm",flag:"o8B"},747:{title_en:"Korean",title:"한국어",code2:"ko",code3:"kor",flag:"0W3"},748:{title_en:"Kyrgyz",title:"Кыргызча",code2:"ky",code3:"kir",flag:"uP6"},749:{title_en:"Laotian",title:"ພາສາລາວ",code2:"lo",code3:"lao",flag:"Qy5"},750:{title_en:"Latin",title:"Latina",code2:"la",code3:"lat",flag:"BW7"},751:{title_en:"Latvian",title:"Latviešu",code2:"lv",code3:"lav",flag:"j1D"},752:{title_en:"Lithuanian",title:"Lietuvių",code2:"lt",code3:"lit",flag:"uI6"},753:{title_en:"Luxemb",title:"Lëtzebuergesch",code2:"lb",code3:"ltz",flag:"EV8"},754:{title_en:"Macedonian",title:"Македонски",code2:"mk",code3:"mkd",flag:"6GV"},755:{title_en:"Malagasy",title:"Malagasy",code2:"mg",code3:"mlg",flag:"4tE"},756:{title_en:"Malay",title:"Bahasa Melayu",code2:"ms",code3:"msa",flag:"C9k"},757:{title_en:"Malayalam",title:"മലയാളം",code2:"ml",code3:"mal",flag:"My6"},758:{title_en:"Maltese",title:"Malti",code2:"mt",code3:"mlt",flag:"N11"},759:{title_en:"Maori",title:"Māori",code2:"mi",code3:"mri",flag:"0Mi"},760:{title_en:"Marathi",title:"मराठी",code2:"mr",code3:"mar",flag:"My6"},761:{title_en:"Mari",title:"Мари́йский",code2:"mhr",code3:"chm",flag:""},762:{title_en:"Mongolian",title:"Монгол",code2:"mn",code3:"mon",flag:"X8h"},763:{title_en:"Nepali",title:"नेपाली",code2:"ne",code3:"nep",flag:"E0c"},764:{title_en:"Norwegian",title:"Norsk",code2:"no",code3:"nor",flag:"4KE"},765:{title_en:"Papiamento",title:"E Papiamento",code2:"pap",code3:"pap",flag:""},766:{title_en:"Persian",title:"فارسی",code2:"fa",code3:"per",flag:"Vo7"},767:{title_en:"Polish",title:"Polski",code2:"pl",code3:"pol",flag:"j0R"},768:{title_en:"Portuguese",title:"Português",code2:"pt",code3:"por",flag:"1oU"},769:{title_en:"Punjabi",title:"ਪੰਜਾਬੀ",code2:"pa",code3:"pan",flag:"n4T"},770:{title_en:"Romanian",title:"Română",code2:"ro",code3:"rum",flag:"V5u"},771:{title_en:"Russian",title:"Русский",code2:"ru",code3:"rus",flag:"D1H"},772:{title_en:"Scottish",title:"Gàidhlig",code2:"gd",code3:"gla",flag:"9MI"},773:{title_en:"Serbian",title:"Српски",code2:"sr",code3:"srp",flag:"GC6"},774:{title_en:"Sinhala",title:"සිංහල",code2:"si",code3:"sin",flag:"9JL"},775:{title_en:"Slovakian",title:"Slovenčina",code2:"sk",code3:"slk",flag:"Y2i"},776:{title_en:"Slovenian",title:"Slovenščina",code2:"sl",code3:"slv",flag:"ZR1"},777:{title_en:"Spanish",title:"Español",code2:"es",code3:"spa",flag:"A5d"},778:{title_en:"Sundanese",title:"Basa Sunda",code2:"su",code3:"sun",flag:"Wh1"},779:{title_en:"Swahili",title:"Kiswahili",code2:"sw",code3:"swa",flag:"X3y"},780:{title_en:"Swedish",title:"Svenska",code2:"sv",code3:"swe",flag:"oZ3"},781:{title_en:"Tagalog",title:"Tagalog",code2:"tl",code3:"tgl",flag:"2qL"},782:{title_en:"Tajik",title:"Тоҷикӣ",code2:"tg",code3:"tgk",flag:"7Qa"},783:{title_en:"Tamil",title:"தமிழ்",code2:"ta",code3:"tam",flag:"My6"},784:{title_en:"Tatar",title:"Татарча",code2:"tt",code3:"tat",flag:"D1H"},785:{title_en:"Telugu",title:"తెలుగు",code2:"te",code3:"tel",flag:"My6"},786:{title_en:"Thai",title:"ภาษาไทย",code2:"th",code3:"tha",flag:"V6r"},787:{title_en:"Turkish",title:"Türkçe",code2:"tr",code3:"tur",flag:"YZ9"},788:{title_en:"Udmurt",title:"Удму́рт дунне́",code2:"udm",code3:"udm",flag:""},789:{title_en:"Ukrainian",title:"Українська",code2:"uk",code3:"ukr",flag:"2Mg"},790:{title_en:"Urdu",title:"اردو",code2:"ur",code3:"urd",flag:"n4T"},791:{title_en:"Uzbek",title:"O‘zbek",code2:"uz",code3:"uzb",flag:"zJ3"},792:{title_en:"Vietnamese",title:"Tiếng Việt",code2:"vi",code3:"vie",flag:"l2A"},793:{title_en:"Welsh",title:"Cymraeg",code2:"cy",code3:"wel",flag:"D4b"},794:{title_en:"Xhosa",title:"isiXhosa",code2:"xh",code3:"xho",flag:"7xS"},795:{title_en:"Yiddish",title:"ייִדיש",code2:"yi",code3:"yid",flag:"5KS"},797:{title_en:"Somali",title:"Soomaali",code2:"so",code3:"som",flag:"3fH"},798:{title_en:"Corsican",title:"Corsu",code2:"co",code3:"cos",flag:"E77"},799:{title_en:"Frisian",title:"Frysk",code2:"fy",code3:"fry",flag:"8jV"},800:{title_en:"Hausa",title:"Hausa",code2:"ha",code3:"hau",flag:"8oM"},801:{title_en:"Hawaiian",title:"Ōlelo Hawaiʻi",code2:"haw",code3:"haw",flag:"00P"},802:{title_en:"Hmong",title:"Hmong",code2:"hmn",code3:"hmn",flag:"Z1v"},803:{title_en:"Igbo",title:"Igbo",code2:"ig",code3:"ibo",flag:"8oM"},804:{title_en:"Kinyarwanda",title:"Kinyarwanda",code2:"rw",code3:"kin",flag:"8UD"},805:{title_en:"Kurdish",title:"Kurdî",code2:"ku",code3:"kur",flag:"YZ9"},806:{title_en:"Chichewa",title:"Chichewa",code2:"ny",code3:"nya",flag:"O9C"},807:{title_en:"Odia",title:"ଓଡିଆ",code2:"or",code3:"ori",flag:"My6"},808:{title_en:"Samoan",title:"Faasamoa",code2:"sm",code3:"smo",flag:"54E"},809:{title_en:"Sesotho",title:"Sesotho",code2:"st",code3:"sot",flag:"7xS"},810:{title_en:"Shona",title:"Shona",code2:"sn",code3:"sna",flag:"80Y"},811:{title_en:"Sindhi",title:"سنڌي",code2:"sd",code3:"snd",flag:"n4T"},812:{title_en:"Turkmen",title:"Türkmenler",code2:"tk",code3:"tuk",flag:"Tm5"},813:{title_en:"Uyghur",title:"ئۇيغۇر",code2:"ug",code3:"uig",flag:"Z1v"},814:{title_en:"Yoruba",title:"Yoruba",code2:"yo",code3:"yor",flag:"8oM"},815:{title_en:"Zulu",title:"Zulu",code2:"zu",code3:"zul",flag:"7xS"}};function l(){let e=s("input[name=target_languages]").val();if(e)for(language_id in e=e.split(","),s("#dns-setup-records").html(""),o){var t;e.includes(o[language_id].code2)&&(t="<tr><td>"+o[language_id].title_en+"</td><td>"+o[language_id].code2+"."+location.hostname+"</td><td>dns1.conveythis.com</td></tr>",s("#dns-setup-records").append(t))}}function d(){s(".dropdown-target-languages .item").show();var e=s(".dropdown-current-language").dropdown("get value");""!=e&&s(".target-language-"+e).hide()}s("#range-style-indenting-vertical").range({min:0,max:300,start:s("#display-style-indenting-vertical").text(),onChange:function(e){s("#display-style-indenting-vertical").html(e),s("[name=style_indenting_vertical]").val(e)}}),s("#range-style-indenting-horizontal").range({min:0,max:300,start:s("#display-style-indenting-horizontal").text(),onChange:function(e){s("#display-style-indenting-horizontal").html(e),s("[name=style_indenting_horizontal]").val(e)}}),s(".ui.dropdown").dropdown({onChange:function(e){s(this).hasClass("widget-trigger")&&(d(),conveythisSettings.view()),l()}}),conveythisSettings.effect(function(){s("#customize-view-button").transition("pulse")}),conveythisSettings.view(),s(".conveythis-widget-option-form input[name=style_corner_type]").on("change",function(){conveythisSettings.view()}),s(".conveythis-widget-option-form .form-control-color").on("change",function(){conveythisSettings.view()}),s("button.btn-default-color").click(function(){let e=s(this).parent().find("input[type=color]");var t=e.data("default");e.val(t),conveythisSettings.view()}),s(".conveythis-reset").on("click",function(e){e.preventDefault(),s(this).parent().parent().find(".ui.dropdown").dropdown("clear")}),s(".conveythis-delete-page").on("click",function(e){s(this).parent().remove(),s(".autoSave").click()}),s("#add_blockpage").on("click",function(e){e.preventDefault();s("#blockpages_wrapper").append('<div class="blockpage position-relative w-100 pe-4">\n                    <button class="conveythis-delete-page"></button>\n                    <div class="ui input"><input type="url" name="blockpages[]" class="ui input w-100" placeholder="https://example.com"></div>\n                </div>'),s(document).find(".conveythis-delete-page").on("click",function(e){e.preventDefault(),s(this).parent().remove()})}),s("#add_exlusion").on("click",function(e){e.preventDefault();e=s('<div class="exclusion d-flex position-relative w-100 pe-4">\n                    <button class="conveythis-delete-page"></button>\n                    <div class="dropdown me-3">\n                        <i class="dropdown icon"></i>\n                        <select class="dropdown fluid ui form-control rule selection">\n                            <option value="start">Start</option>\n                            <option value="end">End</option>\n                            <option value="contain">Contain</option>\n                            <option value="equal">Equal</option>\n                        </select>\n                    </div>\n                     <div class="ui input"><input type="text" class="page_url w-100" placeholder="https://example.com" value=""></div>\n                </div>');s("#exclusion_wrapper").append(e),s(document).find(".conveythis-delete-page").on("click",function(e){e.preventDefault(),s(this).parent().remove()}),s(".ui.dropdown").dropdown()}),s("#add_flag_style").on("click",function(e){e.preventDefault();let t=s(".cloned").clone();t.removeClass("cloned"),t.find(".change_language").prepend('<input type="hidden" name="style_change_language[]" value="">'),t.find(".change_flag").prepend('<input type="hidden" name="style_change_flag[]"  value="">'),s("#flag-style_wrapper").append(t),s(document).find(".conveythis-delete-page").on("click",function(e){e.preventDefault(),s(this).parent().remove()}),s(".ui.dropdown").dropdown()}),s("#add_glossary").on("click",function(e){e.preventDefault();let t=s('input[name="target_languages"]').val().split(","),a=s('<div class="glossary position-relative w-100">\n                        <button class="conveythis-delete-page" style="top:10px"></button>\n                        <div class="row w-100 mb-2">\n                            <div class="col-md-3">\n                                <div class="ui input">\n                                    <input type="text" class="source_text w-100 conveythis-input-text" placeholder="Enter Word" value="">\n                                </div>\n                            </div>\n                            <div class="col-md-3">\n                                <div class="dropdown fluid">\n                                    <i class="dropdown icon"></i>\n                                    <select class="dropdown fluid ui form-control rule w-100" required>\n                                        <option value="prevent">Don\'t translate</option>\n                                        <option value="replace">Translate as</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class="col-md-3">\n                                <div class="ui input">\n                                    <input type="text" class="conveythis-input-text translate_text w-100" disabled>\n                                </div>\n                            </div>\n                            <div class="col-md-3">\n                                <div class="dropdown fluid">\n                                    <i class="dropdown icon"></i>\n                                    <select class="dropdown fluid ui form-control target_language w-100">\n                                        <option value="">All languages</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                    </div>'),i=a.find(".target_language");for(var n in o){var l=o[n];t.includes(l.code2)&&i.append('<option value="'+l.code2+'">'+l.title_en+"</option>")}a.find(".conveythis-delete-page").on("click",function(e){e.preventDefault(),s(this).parent().remove()}),s("#glossary_wrapper").append(a),s(".ui.dropdown").dropdown(),s(document).find("div.glossary .rule select").on("change",function(e){e.preventDefault();let t=s(this).parent().closest(".glossary").find(".translate_text");"prevent"==this.value?t.attr("disabled","disabled"):t.removeAttr("disabled")})}),s(document).on("input","#link_enter",function(){var e=s(this).val();/^\/(?!http:\/\/|https:\/\/).*$/.test(e)||(s(this).val(""),alert("Note: Please provide the link in the format (/404.html or /system/link) without using (https:// or http://), and also without the domain name (temp_domain.com)."))}),s("#add_system_link").on("click",function(e){e.preventDefault();let t=s('<div class="system_link position-relative w-100"> <input type="hidden" class="system_link_id" value=""/> <button type="submit" name="submit" class="conveythis-delete-page"></button> <div class="row w-100 mb-2"><div class="ui input w-100"><input id="link_enter" type="text" class="link_text w-100 conveythis-input-text" placeholder="Enter link (/404.html or /path/path...)"  value="" ></div></div></div>');t.find(".conveythis-delete-page").on("click",function(e){e.preventDefault(),s(this).parent().remove()}),s("#system_link_wrapper").append(t),s(".ui.dropdown").dropdown()}),s("#conveythis_clear_all_cache").on("click",function(e){e.preventDefault();var t=s(this).data("href"),e={api_key:s("#conveythis_api_key").val(),conveythis_clear_all_cache:!0};s.ajax({url:t,type:"post",data:e,dataType:"json",success:function(e){e.clear&&s("#conveythis_confirmation_message_clear_all_cahce").hide()}})}),s("#conveythis_dismiss_all_cache").on("click",function(e){e.preventDefault();e=s(this).data("href");s.ajax({url:e,type:"post",data:{dismiss:!0},dataType:"json",success:function(e){e.clear&&s("#conveythis_confirmation_message_clear_all_cahce").hide()}})}),s("#clear_translate_cache").on("click",function(e){var o=s(this);jQuery.ajax({url:"options.php",method:"POST",data:{clear_translate_cache:!0},success:function(e){let t;const a=document.querySelector(".box-notification-success"),i=document.querySelector(".box-notification-error");var n;function l(){a.style.display="none",i.style.display="none"}n=e,t&&clearTimeout(t),l(),n.clear_cache_translate?(o.addClass("btn-success"),a.style.display="block",o.css("color","#ffffff")):(o.addClass("btn-error"),i.style.display="block"),t=setTimeout(l,3e3)}})}),s(document).find("div.glossary .rule select").on("change",function(e){e.preventDefault();let t=s(this).parent().closest(".glossary").find(".translate_text");"prevent"==this.value?t.attr("disabled","disabled"):t.removeAttr("disabled")}),s("#add_exlusion_block").on("click",function(e){e.preventDefault();let t=s('<div class="exclusion_block position-relative w-100 pe-4">\n                        <button class="conveythis-delete-page"></button>\n                        <div class="ui input">\n                            <input type="text" class="form-control id_value w-100"  placeholder="Enter id">\n                        </div>\n                    </div>');t.find(".conveythis-delete-page").on("click",function(e){e.preventDefault(),s(this).parent().remove()}),s("#exclusion_block_wrapper").append(t)}),l(),s("input[name=style_position_type]").change(function(){"custom"==this.value?(s("#position-fixed").fadeOut(),s("#position-custom").fadeIn()):(s("#position-custom").fadeOut(),s("#position-fixed").fadeIn())}),s("input[name=url_structure]").change(function(){"subdomain"==this.value?(s("#dns-setup").fadeIn(),l()):s("#dns-setup").fadeOut()}),s("input[name=target_languages]").change(function(){let e=s('input[name="target_languages_translations"]').val();e=e?JSON.parse(e):{};let t=this.value.split(",");for(language_id in s("#target_languages_translations").html(""),s("#default_language_list").html('<div class="item" data-value="">No value</div>'),o){var a,i=o[language_id].code2;t.includes(i)&&(a="<tr><td><div class='ui input'><input type='text' language_id='"+i+"' value='"+(e[i]||i)+"' placeholder='Alias for "+o[language_id].title_en+"' /></div></td></tr>",s("#target_languages_translations").append(a),s("#default_language_list").append('<div class="item" data-value="'+i+'">'+o[language_id].title_en+"</div>"))}}),s(".conveythis-widget-option-form, #login-form-settings").submit(function(e){!1===function(){let e=!0,t=s("#conveythis_api_key"),a=s('input[name="source_language"]'),i=s('input[name="target_languages"]');return t.val()?(s("#apiKey .validation-label").hide(),s("#apiKey .input").removeClass("validation-icon"),t.removeClass("validation-failed")):(s("#apiKey .validation-label").show(),s("#apiKey .input").addClass("validation-icon"),t.addClass("validation-failed"),e=!1),a.val()?(s("#sourceLanguage .dropdown").removeClass("validation-icon"),s("#sourceLanguage .validation-label").hide(),a.parent().removeClass("validation-failed")):(s("#sourceLanguage .dropdown").addClass("validation-icon"),s("#sourceLanguage .validation-label").show(),a.parent().addClass("validation-failed"),e=!1),i.val()?(s("#targetLanguages .dropdown").removeClass("validation-icon"),s("#targetLanguages .validation-label").hide(),i.parent().removeClass("validation-failed")):(s("#targetLanguages .dropdown").addClass("validation-icon"),s("#targetLanguages .validation-label").show(),i.parent().addClass("validation-failed"),e=!1),e}()&&e.preventDefault();let t={},a=s("#target_languages_translations input[language_id]");for(var i in a){let e=a[i].value.trim();if(-1<e.indexOf("/"))return alert("Translation cannot contain slash: "+e),!1;e&&(t[i.getAttribute("language_id")]=e)}s('input[name="target_languages_translations"]').val(JSON.stringify(t));let n=[];s("div.exclusion").each(function(){var t=s(this).find(".rule select").val(),a=s(this).find("input.page_url").val().trim();if(t&&a){let e={rule:t,page_url:a};a=s(this).find("input.exclusion_id").val();a&&(e.id=a),n.push(e)}}),s('input[name="exclusions"]').val(JSON.stringify(n));let l=[];s("div.glossary").each(function(){var t=s(this).find(".rule select").val(),a=s(this).find("input.source_text").val().trim(),i=s(this).find("input.translate_text").val().trim(),n=s(this).find(".target_language select").val().trim();if(t&&a){let e={rule:t,source_text:a,translate_text:i,target_language:n};n=s(this).find("input.glossary_id").val();n&&(e.glossary_id=n),l.push(e)}}),s('input[name="glossary"]').val(JSON.stringify(l));let o=[];s("div.exclusion_block").each(function(){var t=s(this).find("input.id_value").val().trim();if(t){let e={id_value:t};t=s(this).find("input.exclusion_block_id").val();t&&(e.id=t),o.push(e)}}),s('input[name="exclusion_blocks"]').val(JSON.stringify(o));let d=[];s("div.system_link").each(function(){var t=s(this).find("input.link_text").val();if(t){let e={link:t};t=s(this).find("input.system_link_id").val();t&&(e.link_id=t),d.push(e)}}),s('input[name="conveythis_system_links"]').val(JSON.stringify(d))}),s("input[name=target_languages]").change(),s("button#main-tab, button#widget-style-tab").on("shown.bs.tab",function(e){var t=document.querySelector(".widget-preview");let a=document.getElementById("widget-preview-style"),i=document.getElementById("widget-preview-general");t&&a&&i&&("widget-style-tab"==this.id?(a.appendChild(t),i.innerHTML=""):(i.appendChild(t),a.innerHTML=""))}),setTimeout(function(){!function(){try{var e=s("#conveythis_api_key").val();e&&jQuery.ajax({url:"https://api.conveythis.com/25/admin/account/plan/api-key/"+e+"/",success:function(t){if(t.data&&t.data.languages){var a=t.data.languages;s(".dropdown-target-languages").dropdown({maxSelections:a,message:{maxSelections:'Need more languages? <a href="//app.conveythis.com/dashboard/pricing" target="_blank">Upgrade your plan</a>.'},onChange:function(){conveythisSettings.view(),l()}}),d();let e=s(".dropdown-target-languages").dropdown("get value");if(e)try{var i=e.split(",");if(i.length>a){let t=[];for(let e=0;e<a;e++)t.push(i[e]);var n=t.join(",");s(".dropdown-target-languages").dropdown("set value",n),setTimeout(function(){s(".dropdown-target-languages").dropdown("set selected",n)},200)}}catch(e){}t.data.meta.alias.includes("free")?(s(".paid-function input").prop("disabled",!0),s(".paid-function button").prop("disabled",!0)):s(".hide-paid").remove(),"pro"!=t.data.meta.alias&&"pro_new"!=t.data.meta.alias&&"pro_plus"!=t.data.meta.alias&&"pro_new_plus"!=t.data.meta.alias&&"enterprise"!=t.data.meta.alias&&(s("input[name=url_structure][value=regular]").prop("checked",!0),s("input[name=url_structure][value=subdomain]").prop("disabled",!0),s("#dns-plan-error").show(),s("#dns-setup").hide()),1==t.data.is_trial_expired&&s("#conveythis-trial-expired-message").show(),void 0!==t.data.is_confirmed&&null!==t.data.is_confirmed&&void 0!==t.data.activ_to&&null!==t.data.activ_to&&1!=t.data.is_confirmed&&0<t.data.activ_to&&(activeTo=t.data.activ_to,Math.floor(Date.now()/1e3)<activeTo?(documentLocale=document.querySelector("html").getAttribute("lang"),active_to_time=new Date(1e3*activeTo).toLocaleString(documentLocale,{timeZone:"UTC"}),s("#conveythis_confirmation_message_warning > span").text(active_to_time),s("#conveythis_confirmation_message_warning").show()):(s("#conveythis_confirmation_message_danger > span > b").text(t.data.email),s("#conveythis_confirmation_message_danger").show())),void 0!==t.data.word_limit&&t.data.word_limit&&s("#conveythis_word_translation_exceeded_warning").show()}}})}catch(e){}}()},1e3)});