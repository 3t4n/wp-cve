window.onload=(e=>{(function(){"use strict";function e(){try{window.uvsMicTimeoutIdentifier&&(clearTimeout(window.uvsMicTimeoutIdentifier),window.uvsMicTimeoutIdentifier=null)}catch(e){}}function t(e){return e=parseInt(e,10),isNaN(e)||null==e?0:e}function s(e=null){var t=!1;try{var s=document.querySelectorAll("button.universal-voice-search-button");if(null==s||null==e)return t;for(var i=0;i<s.length;i++){var u=s[i].className,n=s[i].getAttribute("id");if(void 0!==u&&""!=u.trim()&&(-1!=u.indexOf("listening")&&e!=n)){t=!0;break}}}catch(e){t=!1}return t}function i(e){let t=0,s=0;e.clientHeight>=80&&(t=e.clientHeight+15,s=-t/6),e.clientHeight>=60?(t=e.clientHeight+12,s=-t/5):e.clientHeight>=30?(t=e.clientHeight+10,s=-t/4):(t=e.clientHeight+8,s=-t/3.5);const i=document.createElement("div");i.setAttribute("id","pulse"),i.setAttribute("class","pulse-color"),i.style.width=t+"px",i.style.height=t+"px",i.style.left=s+"px";const u=document.createElement("div");return u.setAttribute("id","pulse-rate"),u.setAttribute("class","pulse-color"),u.style.width=t+"px",u.style.height=t+"px",u.style.left=s+"px",{uvsPulse:i,uvsPulseRate:u}}function u(){const t=document.getElementById("flt-mic");if(null!=t){const n=t.getElementsByClassName("my-icon-wrapper")[0].getElementsByTagName("i")[0],o=i(n);if("webkitSpeechRecognition"in window&&!0===uvsClientInfo.chrome){let i=new webkitSpeechRecognition;function u(){F=!1,K||(W=q,t.classList.remove("listening"),n.classList.remove("my-icon-animation-wrapper"),n.removeChild(o.uvsPulse),n.removeChild(o.uvsPulseRate),void 0!==W&&0!=W.length?(N.value=W,uvsAudioPlayer.configure(uvsAlternativeResponse.basic,function(){}),uvsAudioPlayer.play(),setTimeout(()=>{E.submit()},2e3)):(uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask))}i.continuous=!0,i.interimResults=!0,i.onstart=function(){F=!0},i.onerror=function(e){t.classList.remove("listening"),F=!1,n.classList.remove("my-icon-animation-wrapper"),n.removeChild(o.uvsPulse),n.removeChild(o.uvsPulseRate),"no-speech"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),K=!0,N.placeholder=uvsMessages.unableToHear),"audio-capture"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),uvsAudioPlayer.play(),K=!0,N.placeholder=uvsMessages.micNotAccessible),"not-allowed"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),uvsAudioPlayer.play(),K=!0,N.placeholder=uvsMessages.browserDenyMicAccess)},i.onend=function(){f&&u()},i.onresult=function(e){let t="";if(void 0===e.results)return i.onend=null,i.stop(),N.placeholder=uvsMessages.unableToHear,uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),void uvsAudioPlayer.play();let s=e.results.length;for(let n=e.resultIndex;n<s;++n)e.results[n].isFinal?(q=e.results[n][0].transcript,0==f&&(u(),i.stop())):t+=e.results[n][0].transcript},t.addEventListener(g,function(l){!0!==s(t.getAttribute("id"),t)&&(F?(e(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),0==f&&(u(),i.stop())):(t.classList.add("listening"),n.classList.add("my-icon-animation-wrapper"),n.appendChild(o.uvsPulse),n.appendChild(o.uvsPulseRate),l.preventDefault(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),W="",F=!0,i.lang=uvsSttLanguageContext.gcp.stt?uvsSttLanguageContext.gcp.langCode:"en-US",i.start(),K=!1,e(),window.uvsMicTimeoutIdentifier=setTimeout(function(){let e=t.classList;e&&e.contains("listening")&&t.click()},d)))})}else t.addEventListener(g,function(i){function u(){return void 0===vs.uvsXApiKey||null===vs.uvsXApiKey?(uvsAudioPlayer.configure(uvsAlternativeResponse.unavailable),uvsAudioPlayer.play(),!1):F?(e(),uvsAudioRecorder.stop(),uvsStopAudio(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),t.classList.remove("listening"),n.classList.remove("my-icon-animation-wrapper"),n.removeChild(o.uvsPulse),n.removeChild(o.uvsPulseRate),N.placeholder=uvsMessages.transcribeText,uvsAudioRecorder.getBuffers(function(e){uvsSttLanguageContext.gcp.stt?uvsAudioRecorder.exportMonoWAV(function(e){uvsAudioRecorder.convertBlobToBase64(e).then(function(e){uvsGcpStt(e).then(function(e){N.value=e,uvsAudioPlayer.configure(uvsAlternativeResponse.basic,function(){}),uvsAudioPlayer.play(),setTimeout(()=>{E.submit()},2e3)}).catch(function(e){uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask})}).catch(function(e){uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask})}):(uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask)}),void(F=!1)):(t.classList.add("listening"),n.classList.add("my-icon-animation-wrapper"),n.appendChild(o.uvsPulse),n.appendChild(o.uvsPulseRate),i.preventDefault(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),W="",F=!0,uvsAudioRecorder.clear(),uvsAudioRecorder.record(t),e(),void(window.uvsMicTimeoutIdentifier=setTimeout(function(){let e=t.classList;e&&e.contains("listening")&&t.click()},d)))}(!0===uvsClientInfo.ios||uvsClientInfo.iosSafari&&!uvsClientInfo.chrome&&!uvsClientInfo.firefox&&!uvsClientInfo.edge||uvsClientInfo.windows&&uvsClientInfo.firefox)&&(uvsAudioPlayer.configure(uvsSilenceSoundPath),uvsAudioPlayer.play()),!0!==s(t.getAttribute("id"),t)&&(uvsAudioRecorder&&uvsAudioContext?u():uvsInitAudio(function(e){if(!uvsAudioRecorder||!uvsAudioContext)return N.placeholder=uvsMessages.micNotAccessible,!1;u()}))},!1)}}function n(e){if(vs.uvsFloatingMic&&"yes"===vs.uvsFloatingMic){var t="OtherKey"==vs.uvsKeyboardSpecialKey?vs.uvsKeyboardMicSwitch:"Space"==vs.uvsKeyboardSpecialKey?" ":vs.uvsKeyboardSpecialKey,s=0;window.addEventListener("keydown",i=>{let u=i.target;"INPUT"!==u.tagName&&i.key==t&&(s++,i.preventDefault(),2==s&&("single"==e?B.click():"double"==e&&(L.classList.contains("uvs-widget-visible")?I.click():(B.click(),I.click())),s=0))})}}function o(e){"add"==e?(B.classList.add("listening"),B.classList.add("singleClick"),H.classList.add("singleClick")):"remove"==e&&(B.classList.remove("listening"),B.classList.remove("singleClick"),H.classList.remove("singleClick"))}function l(){if(w.classList.remove("uvsWidgetChatWrapper"),"webkitSpeechRecognition"in window&&!0===uvsClientInfo.chrome){let i=new webkitSpeechRecognition;function t(){F=!1,K||(W=q,o("remove"),void 0!==W&&0!=W.length?(N.value=W,uvsAudioPlayer.configure(uvsAlternativeResponse.basic,function(){}),uvsAudioPlayer.play(),setTimeout(()=>{E.submit()},2e3)):(uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask))}i.continuous=!0,i.interimResults=!0,i.onstart=function(){F=!0},i.onerror=function(e){o("remove"),F=!1,"no-speech"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),K=!0,N.placeholder=uvsMessages.unableToHear),"audio-capture"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),uvsAudioPlayer.play(),K=!0,N.placeholder=uvsMessages.micNotAccessible),"not-allowed"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),uvsAudioPlayer.play(),K=!0,N.placeholder=uvsMessages.browserDenyMicAccess)},i.onend=function(){f&&t()},i.onresult=function(e){let s="";if(void 0===e.results)return i.onend=null,i.stop(),N.placeholder=uvsMessages.unableToHear,uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),void uvsAudioPlayer.play();let u=e.results.length;for(let n=e.resultIndex;n<u;++n)e.results[n].isFinal?(q=e.results[n][0].transcript,0==f&&(t(),i.stop())):s+=e.results[n][0].transcript},B.addEventListener(g,function(u){!0!==s(I.getAttribute("id"),I)&&(F?(e(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),0==f&&(t(),i.stop())):(o("add"),u.preventDefault(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),W="",F=!0,i.lang=uvsSttLanguageContext.gcp.stt?uvsSttLanguageContext.gcp.langCode:"en-US",i.start(),K=!1,e(),window.uvsMicTimeoutIdentifier=setTimeout(function(){let e=B.classList;e&&e.contains("listening")&&B.click()},d)))})}else B.addEventListener(g,function(t){function i(){return void 0===vs.uvsXApiKey||null===vs.uvsXApiKey?(uvsAudioPlayer.configure(uvsAlternativeResponse.unavailable),uvsAudioPlayer.play(),!1):F?(e(),uvsAudioRecorder.stop(),uvsStopAudio(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),o("remove"),N.placeholder=uvsMessages.transcribeText,uvsAudioRecorder.getBuffers(function(e){uvsSttLanguageContext.gcp.stt?uvsAudioRecorder.exportMonoWAV(function(e){uvsAudioRecorder.convertBlobToBase64(e).then(function(e){uvsGcpStt(e).then(function(e){N.value=e,uvsAudioPlayer.configure(uvsAlternativeResponse.basic,function(){}),uvsAudioPlayer.play(),setTimeout(()=>{E.submit()},2e3)}).catch(function(e){uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask})}).catch(function(e){uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask})}):(uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask)}),void(F=!1)):(o("add"),t.preventDefault(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),W="",F=!0,uvsAudioRecorder.clear(),uvsAudioRecorder.record(B),e(),void(window.uvsMicTimeoutIdentifier=setTimeout(function(){let e=B.classList;e&&e.contains("listening")&&B.click()},d)))}(!0===uvsClientInfo.ios||uvsClientInfo.iosSafari&&!uvsClientInfo.chrome&&!uvsClientInfo.firefox&&!uvsClientInfo.edge||uvsClientInfo.windows&&uvsClientInfo.firefox)&&(uvsAudioPlayer.configure(uvsSilenceSoundPath),uvsAudioPlayer.play()),!0!==s(B.getAttribute("id"),I)&&(uvsAudioRecorder&&uvsAudioContext?i():uvsInitAudio(function(e){if(!uvsAudioRecorder||!uvsAudioContext)return N.placeholder=uvsMessages.micNotAccessible,!1;i()}))},!1)}function r(){if("webkitSpeechRecognition"in window&&!0===uvsClientInfo.chrome){let i=new webkitSpeechRecognition;function t(){F=!1,K||(W=q,I.classList.remove("listening"),void 0!==W&&0!=W.length?(N.value=W,uvsAudioPlayer.configure(uvsAlternativeResponse.basic,function(){}),uvsAudioPlayer.play(),setTimeout(()=>{E.submit()},2e3)):(uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask))}i.continuous=!0,i.interimResults=!0,i.onstart=function(){F=!0},i.onerror=function(e){I.classList.remove("listening"),F=!1,"no-speech"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),K=!0,N.placeholder=uvsMessages.unableToHear),"audio-capture"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),uvsAudioPlayer.play(),K=!0,N.placeholder=uvsMessages.micNotAccessible),"not-allowed"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),uvsAudioPlayer.play(),K=!0,N.placeholder=uvsMessages.browserDenyMicAccess)},i.onend=function(){f&&t()},i.onresult=function(e){let s="";if(void 0===e.results)return i.onend=null,i.stop(),N.placeholder=uvsMessages.unableToHear,uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),void uvsAudioPlayer.play();let u=e.results.length;for(let n=e.resultIndex;n<u;++n)e.results[n].isFinal?(q=e.results[n][0].transcript,0==f&&(t(),i.stop())):s+=e.results[n][0].transcript},I.addEventListener(g,function(u){!0!==s(I.getAttribute("id"),I)&&(F?(e(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),0==f&&(t(),i.stop())):(I.classList.add("listening"),u.preventDefault(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),W="",F=!0,i.lang=uvsSttLanguageContext.gcp.stt?uvsSttLanguageContext.gcp.langCode:"en-US",i.start(),K=!1,e(),window.uvsMicTimeoutIdentifier=setTimeout(function(){let e=I.classList;e&&e.contains("listening")&&I.click()},d)))})}else I.addEventListener(g,function(t){function i(){return void 0===vs.uvsXApiKey||null===vs.uvsXApiKey?(uvsAudioPlayer.configure(uvsAlternativeResponse.unavailable),uvsAudioPlayer.play(),!1):F?(e(),uvsAudioRecorder.stop(),uvsStopAudio(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),I.classList.remove("listening"),N.placeholder=uvsMessages.transcribeText,uvsAudioRecorder.getBuffers(function(e){uvsSttLanguageContext.gcp.stt?uvsAudioRecorder.exportMonoWAV(function(e){uvsAudioRecorder.convertBlobToBase64(e).then(function(e){uvsGcpStt(e).then(function(e){N.value=e,uvsAudioPlayer.configure(uvsAlternativeResponse.basic,function(){}),uvsAudioPlayer.play(),setTimeout(()=>{E.submit()},2e3)}).catch(function(e){uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask})}).catch(function(e){uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask})}):(uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),N.placeholder=uvsMessages.ask)}),void(F=!1)):(I.classList.add("listening"),t.preventDefault(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),W="",F=!0,uvsAudioRecorder.clear(),uvsAudioRecorder.record(I),e(),void(window.uvsMicTimeoutIdentifier=setTimeout(function(){let e=I.classList;e&&e.contains("listening")&&I.click()},d)))}(!0===uvsClientInfo.ios||uvsClientInfo.iosSafari&&!uvsClientInfo.chrome&&!uvsClientInfo.firefox&&!uvsClientInfo.edge||uvsClientInfo.windows&&uvsClientInfo.firefox)&&(uvsAudioPlayer.configure(uvsSilenceSoundPath),uvsAudioPlayer.play()),!0!==s(I.getAttribute("id"),I)&&(uvsAudioRecorder&&uvsAudioContext?i():uvsInitAudio(function(e){if(!uvsAudioRecorder||!uvsAudioContext)return N.placeholder=uvsMessages.micNotAccessible,!1;i()}))},!1)}function a(e,t){if(void 0===e||null==e||0==e.length)return!1;let s=document.querySelector(e);if(s.classList)s.classList.toggle(t);else{let e=s.className.split(" "),i=e.indexOf(t);i>=0?e.splice(i,1):(e.push(t),s.className=e.join(" "))}}function c(){1==uvsIsSingleClick?(a(".uvs-widget-toggle-button","uvs-toggle-btn-mic"),a(".uvs-widget-toggle-button","uvs-toggle-btn-mic"),a(".uvs-widget-toggle-button","uvs-widget-active"),a(".uvs-widget-toggle-button","uvs-widget-visible"),a("#uvsWidgetToggleButton","uvs-widget-float"),a(".uvs-widget-button","uvs-widget-visible")):(a(".uvs-widget-toggle-button","uvs-toggle-btn-mic"),a(".uvs-widget-toggle-button","uvs-toggle-btn-close"),a(".uvs-widget-toggle-button","uvs-widget-active"),a(".uvs-widget-toggle-button","uvs-widget-visible"),a("#uvsWidgetToggleButton","uvs-widget-float"),a(".uvs-widget-chat-wrapper","uvs-widget-visible"),a(".uvs-widget-button","uvs-widget-visible"))}var d=null;void 0!==vs.uvsMicListenTimeoutDuration&&null!==vs.uvsMicListenTimeoutDuration?(d=parseInt(vs.uvsMicListenTimeoutDuration),d=isNaN(d)?8:d):d=8,d=d<8?8:d,d=d>20?20:d,d*=1e3,e();var v=["form[role=search]","form[class=searchform]","form[class=search_form]","form[class=search-form]","form[class=searchForm]"],p=["input[name=s]","input[name=search]","input[name=find]","input[type=search]","input[class=search-field]","input[class=search_field]","input[class=searchfield]","input[class=searchField]","input[id=search]","input[id=search-field]","input[id=search_field]","input[id=searchfield]","input[id=searchField]"],g="click",A=navigator.userAgent.toLowerCase(),f=A.indexOf("android")>-1,y=document.querySelectorAll("form"),m=[];try{for(var h=0;h<v.length&&(m=document.querySelectorAll(v[h]),!(m.length>0));h++);}catch(e){m=[]}m.length<y.length&&(m=null,m=y);let b=null;[].forEach.call(m,function(i,u){var n=null,o=!1;try{0==u&&(b=i);for(var l=0;l<p.length&&(n=i.querySelector(p[l]),null===n);l++);let e=i.querySelector("input[type=submit]");if(null===e&&(e=i.querySelector("button[type=submit]")),null!==e){i.addEventListener("submit",function(e){1==o&&e.preventDefault()},!1);try{let t=e.querySelectorAll("img, svg");for(let e=0;e<t.length;e++){let s=t[e];s.classList.add("uvs-hide-element")}}catch(e){}}}catch(e){n=null}if(null!==n)try{var r=i.getAttribute("style"),a=null!=r&&""!=r.trim();r=a?r+";":"",i.setAttribute("style",r+"display: block !important"),i.classList.add("uvs-sanitize-form-wrapper");var c=document.createElement("button");c.setAttribute("type","button"),c.setAttribute("class","universal-voice-search-button"),c.setAttribute("id","universal-voice-search-button"+u),c.appendChild(document.createTextNode(universal_voice_search.button_message));var v=document.createElement("img");v.setAttribute("src",vs.uvsImagesPath+"uvs_mic.svg"),v.setAttribute("class","uvs-mic-image"),c.appendChild(v);var A=t(n.offsetHeight),y=t(.8*A);0==t(y)&&(A=y=35);var m=t(.1*A),h="top: "+m+"px; ";h+="height: "+y+"px !important; ",h+="width: "+y+"px !important; ",h+="z-index: 999 !important; margin-left: 3px !important; border-radius: 50% !important;  border: 2px solid #ffff !important;",c.setAttribute("style",h);var P=document.createElement("div");P.setAttribute("style",r+"display: inline-block !important");let l=window.getComputedStyle(n);P.setAttribute("class","uvs-mic-band"),P.setAttribute("onclick","return false"),P.style.width=l.width,n.insertAdjacentElement("beforebegin",P);var w=n.parentNode.nodeName;null!=w&&0!=w.length&&(w=w.toLowerCase(),"form"!=w&&(n.parentNode.style.zIndex=1)),P.appendChild(n),n.insertAdjacentElement("beforebegin",c),n.setAttribute("style",r+"width: 100% !important;"),n.classList.add("uvs-mic-band"),i.setAttribute("style",r);var C,R="",M="";if("webkitSpeechRecognition"in window&&!0===uvsClientInfo.chrome){var L=new webkitSpeechRecognition;function S(){o=!1,C||(R=M,c.classList.remove("listening"),c.style.setProperty("color","white"),void 0!==R&&0!=R.length?(n.value=M,uvsAudioPlayer.configure(uvsAlternativeResponse.basic,function(){i.submit()}),uvsAudioPlayer.play()):n.placeholder=uvsMessages.ask)}L.continuous=!0,L.interimResults=!0,L.onstart=function(){o=!0},L.onerror=function(e){c.classList.remove("listening"),o=!1,"no-speech"==e.error&&(n.placeholder=uvsMessages.unableToHear,uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),C=!0),"audio-capture"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),uvsAudioPlayer.play(),n.placeholder=uvsMessages.micNotAccessible,C=!0),"not-allowed"==e.error&&(uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),uvsAudioPlayer.play(),n.placeholder=uvsMessages.browserDenyMicAccess,c.style.setProperty("color","white"),C=!0)},L.onend=function(){f&&S()},L.onresult=function(e){let t="";if(void 0===e.results)return L.onend=null,L.stop(),n.placeholder=uvsMessages.unableToHear,uvsAudioPlayer.configure(uvsAlternativeResponse.micConnect),void uvsAudioPlayer.play();for(var s=e.resultIndex;s<e.results.length;++s)e.results[s].isFinal?(M=e.results[s][0].transcript,0==f&&(S(),L.stop())):(t+=e.results[s][0].transcript,n.value=t)},c.addEventListener(g,function(t){!0!==s(c.getAttribute("id"))&&(o?(e(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),0==f&&(S(),L.stop())):(c.classList.add("listening"),t.preventDefault(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),n.value=R="",o=!0,L.lang=uvsSttLanguageContext.gcp.stt?uvsSttLanguageContext.gcp.langCode:"en-US",L.start(),C=!1,e(),window.uvsMicTimeoutIdentifier=setTimeout(function(){let e=c.classList;e&&e.contains("listening")&&c.click()},d)))})}else c.addEventListener(g,function(t){function u(){return void 0===vs.uvsXApiKey||null===vs.uvsXApiKey?(uvsAudioPlayer.configure(uvsAlternativeResponse.unavailable),uvsAudioPlayer.play(),!1):o?(e(),uvsAudioRecorder.stop(),uvsStopAudio(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),c.classList.remove("listening"),c.style.setProperty("color","white"),n.placeholder=uvsMessages.transcribeText,uvsAudioRecorder.getBuffers(function(e){uvsSttLanguageContext.gcp.stt?uvsAudioRecorder.exportMonoWAV(function(e){uvsAudioRecorder.convertBlobToBase64(e).then(function(e){uvsGcpStt(e).then(function(e){n.value=e,uvsAudioPlayer.configure(uvsAlternativeResponse.basic,function(){i.submit()}),uvsAudioPlayer.play()}).catch(function(e){uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),n.placeholder=uvsMessages.ask})}).catch(function(e){uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),n.placeholder=uvsMessages.ask})}):(uvsAudioPlayer.configure(uvsAlternativeResponse.notAudible),uvsAudioPlayer.play(),n.placeholder=uvsMessages.ask)}),void(o=!1)):(c.classList.add("listening"),t.preventDefault(),uvsAudioPlayer.isPlaying()&&uvsAudioPlayer.stop(),n.value=R="",o=!0,uvsAudioRecorder.clear(),uvsAudioRecorder.record(c),e(),void(window.uvsMicTimeoutIdentifier=setTimeout(function(){let e=c.classList;e&&e.contains("listening")&&c.click()},d)))}(!0===uvsClientInfo.ios||uvsClientInfo.iosSafari&&!uvsClientInfo.chrome&&!uvsClientInfo.firefox&&!uvsClientInfo.edge||uvsClientInfo.windows&&uvsClientInfo.firefox)&&(uvsAudioPlayer.configure(uvsSilenceSoundPath),uvsAudioPlayer.play()),!0!==s(c.getAttribute("id"))&&(uvsAudioRecorder&&uvsAudioContext?u():uvsInitAudio(function(e){if(!uvsAudioRecorder||!uvsAudioContext)return alert(uvsMessages.cantAccessMicrophone),!1;u()}))},!1)}catch(e){}});let P=document.createDocumentFragment(),w=document.createElement("div"),C="uvs-widget-wrapper-middle-right",R="uvs-widget-chat-wrapper-middle-right",M=vs.uvsSelectedMicPosition?vs.uvsSelectedMicPosition.toLowerCase():"middle right";switch(M){case"middle left":C="uvs-widget-wrapper-middle-left",R="uvs-widget-chat-wrapper-middle-left";break;case"top right":C="uvs-widget-wrapper-top-right",R="uvs-widget-chat-wrapper-top-right";break;case"top left":C="uvs-widget-wrapper-top-left",R="uvs-widget-chat-wrapper-top-left";break;case"bottom right":C="uvs-widget-wrapper-bottom-right",R="uvs-widget-chat-wrapper-bottom-right";break;case"bottom left":C="uvs-widget-wrapper-bottom-left",R="uvs-widget-chat-wrapper-bottom-left";break;default:C="uvs-widget-wrapper-middle-right",R="uvs-widget-chat-wrapper-middle-right"}w.setAttribute("class","uvs-widget-wrapper "+C);let L=document.createElement("div");L.setAttribute("class","uvs-widget-chat-wrapper "+R);let S=document.createElement("div");S.setAttribute("class","uvs-widget-field");let I=document.createElement("a");I.setAttribute("id","uvsWidgetMic"),I.setAttribute("class","uvs-widget-button");let x=document.createElement("img");x.setAttribute("src",vs.uvsImagesPath+"uvs-widget-mic-black.svg"),I.appendChild(x);let k=document.createElement("a");k.setAttribute("id","uvsWidgetSearchBtn");let T=document.createElement("button");T.setAttribute("class","uvs-widget-form-submit-btn"),T.setAttribute("type","submit"),T.setAttribute("alt","Go"),T.setAttribute("title","Search"),k.appendChild(T);let E=document.createElement("form");E.setAttribute("class","uvs-widget-form"),null!==b?(E.action=b.action,E.method=b.method):(E.action=uvsGetCurrentHostURL()+"/",E.method="get");let N=document.createElement("input");N.setAttribute("id","uvsWidgetSearch"),N.setAttribute("class","uvs-widget-search uvs-widget-search-text"),N.setAttribute("name","uvs-widget-search"),N.setAttribute("placeholder",uvsWidgetMessages.placeholder),N.setAttribute("name","s"),E.appendChild(N),E.appendChild(k),S.appendChild(I),S.appendChild(E),L.appendChild(S);let B=document.createElement("a"),D=document.createElement("div"),H=document.createElement("span");H.setAttribute("id","uvsWidgetPulseEffect"),vs.uvsFloatingMic&&"yes"===vs.uvsFloatingMic&&(B.setAttribute("id","uvsWidgetToggleButton"),B.setAttribute("class","uvs-widget-button"),D.setAttribute("class","uvs-widget-icon uvs-widget-toggle-button uvs-toggle-btn-mic"),B.appendChild(D)),w.appendChild(L),w.appendChild(H),w.appendChild(B),P.appendChild(w),document.body.appendChild(P),B.addEventListener("click",function(e){c()});let K,W="",F=!1,q="";1==uvsIsElementor&&u(),1==uvsIsSingleClick?(l(),n("single")):(r(),n("double"))})()});