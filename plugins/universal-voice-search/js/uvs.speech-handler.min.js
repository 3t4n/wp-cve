function stt(t,e,n){if(0==e){let t=Math.floor(10*Math.random()),e=uvsAlternativeResponse.randomLib;0==respTimeOut&&(uvsAudioPlayer.configure(e[t]),uvsAudioPlayer.play(),respTimeOut=!0,setTimeout(function(){respTimeOut=!1},6e3))}}function uvsGcpStt(t){return new Promise(function(e,n){if(!(uvsSttLanguageContext.gcp.endPoint&&uvsSttLanguageContext.gcp.key&&uvsSttLanguageContext.gcp.langCode&&void 0!==t&&t))return void n(null);let i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==this.readyState)try{let t=JSON.parse(this.response);if(200===this.status){errcnt=0;let i=void 0!==t&&t instanceof Object&&"results"in t?t.results:[],s=i&&i.length>0&&i[0]instanceof Object?i[0]:{},o="alternatives"in s&&s.alternatives?s.alternatives:[],u=o.length>0&&o[0]instanceof Object?o[0]:{},a="transcript"in u&&u.transcript?u.transcript:null;void 0!==a&&a?e(a):n(null)}else{let i="error"in t?t.error:{},s="message"in i&&i.message?i.message.toLowerCase():"";if(errcnt<1&&s&&-1!==s.indexOf("api key"))errcnt++,uvsRefreshVoiceServicesKeys().then(function(t){uvsSttLanguageContext.gcp.key=t,uvsGcpStt().then(function(t){t?e(t):(errcnt=0,n(null))}).catch(function(t){errcnt=0,n(null)})}).catch(function(t){alert(t),errcnt=0,n(null)});else{errcnt=0;let t=Math.floor(10*Math.random()),e=uvsAlternativeResponse.randomLib;uvsAudioPlayer.configure(e[t]),uvsAudioPlayer.play(),n(null)}}}catch(t){n(null)}},i.onerror=function(t){n(null)},i.open("POST",uvsSttLanguageContext.gcp.endPoint+uvsSttLanguageContext.gcp.qs.key+uvsSttLanguageContext.gcp.key,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8");let s={config:{encoding:"ENCODING_UNSPECIFIED",languageCode:uvsSttLanguageContext.gcp.langCode,enableWordTimeOffsets:!1},audio:{content:t}};i.send(JSON.stringify(s,null,!0))})}function uvsLogServiceCall(t=0){try{let e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){let t=JSON.parse(this.responseText);uvsServiceLogs.updatedAt=t.updatedAt||uvsServiceLogs.updatedAt,uvsServiceLogs.currentValue=t.currentValue||uvsServiceLogs.currentValue,uvsServiceLogs.lastValue=t.lastValue||uvsServiceLogs.lastValue}},e.open("POST",uvsAjaxObj.ajax_url,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send("action=uvs_log_service_call&_ajax_nonce="+uvsAjaxObj.nonce+"&updateLastValue="+t)}catch(t){}}function uvsGetCurrentHostURL(){var t=null;try{if(void 0===window.location||void 0===window.location.hostname||void 0===window.location.protocol)return uvsGetHostName();var e=window.location.protocol,n=window.location.hostname;t=e+"//"+n}catch(e){t=uvsGetHostName(),console.log("Something went wrong while discovering current domain.")}return t}function uvsGetHostName(){return uvsHostName}function uvsRefreshVoiceServicesKeys(){return new Promise(function(t,e){let n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState)if(200===this.status){let n=JSON.parse(this.response);if(void 0===n&&e(uvsErrorLibrary.outOfService),uvsSttLanguageContext.gcp.stt&&"gStt"in n&&n.gStt)return void t(n.gStt);e(uvsErrorLibrary.outOfService)}else e(uvsErrorLibrary.outOfService)};let i="?action=uvs_refresh_access_keys&_ajax_nonce="+uvsAjaxObj.keys_nonce;n.open("GET",uvsAjaxObj.ajax_url+i,!0),n.onerror=function(t){e(uvsErrorLibrary.outOfService)},n.send(null)})}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var respTimeOut=!1,errcnt=0;let uvsHostName=void 0!==vs.uvsCurrentHostName?vs.uvsCurrentHostName:null;var uvsAudioPlayer={htmlAudioElement:document.createElement("AUDIO"),lastFilePath:null,antiMuteButtonPlaybacks:[uvsSilenceSoundPath],isAntiMutePlayback:!1,configure:function(t=null,e=null){try{let n=void 0!==t&&t?t:null;if(n){let t=uvsIsMuteSimon?uvsSilenceSoundPath:n;this.htmlAudioElement.src=vs._uvsPath+t,this.htmlAudioElement.preload="auto",this.lastFilePath=n,-1!==this.antiMuteButtonPlaybacks.indexOf(n)?this.isAntiMutePlayback=!0:this.isAntiMutePlayback=!1}else this.htmlAudioElement.src="",this.isAntiMutePlayback=!1;this.htmlAudioElement.onplay=function(){}.bind(this),this.htmlAudioElement.onended=function(){this.htmlAudioElement.src="",this.isAntiMutePlayback=!1,n&&"function"==typeof e&&(e(),e=null)}.bind(this),this.htmlAudioElement.onerror=function(){this.isAntiMutePlayback=!1}.bind(this),this.htmlAudioElement.onplaying=function(){}.bind(this)}catch(t){this.clear(),this.isAntiMutePlayback=!1}},play:function(){try{this.htmlAudioElement&&this.htmlAudioElement.src&&this.htmlAudioElement.play().catch(function(t){console.log("VDN Exception: Failed to play audio.")})}catch(t){this.clear()}},stop:function(){try{this.clear()}catch(t){this.clear()}},clear:function(){try{if(this.htmlAudioElement){let t=isNaN(this.htmlAudioElement.duration)?0:this.htmlAudioElement.duration;this.htmlAudioElement.currentTime=t}this.lastFilePath=null}catch(t){this.lastFilePath=null,this.isAntiMutePlayback=!1}},isPlaying:function(){let t=isNaN(this.htmlAudioElement.currentTime)?0:this.htmlAudioElement.currentTime,e=isNaN(this.htmlAudioElement.duration)?0:this.htmlAudioElement.duration;return t<e}};