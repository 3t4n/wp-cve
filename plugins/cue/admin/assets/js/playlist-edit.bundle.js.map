{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./admin/assets/js/collections/tracks.js","webpack:///./admin/assets/js/models/track.js","webpack:///./admin/assets/js/modules/application.js","webpack:///./admin/assets/js/modules/workflows.js","webpack:///./admin/assets/js/playlist-edit.js","webpack:///./admin/assets/js/views/edit-playlist/track-list.js","webpack:///./admin/assets/js/views/edit-playlist/track/artwork.js","webpack:///./admin/assets/js/views/edit-playlist/track/audio.js","webpack:///./admin/assets/js/views/edit-playlist/track/index.js","webpack:///./admin/assets/js/views/frame/track-media.js","webpack:///./admin/assets/js/views/screen/button/add-tracks.js","webpack:///./admin/assets/js/views/screen/edit-playlist.js","webpack:///(webpack)/buildin/global.js","webpack:///external \"Backbone\"","webpack:///external \"jQuery\"","webpack:///external \"mejs\"","webpack:///external \"_\"","webpack:///external \"wp\""],"names":["Tracks","Backbone","Collection","extend","model","Track","comparator","track","parseInt","get","fetch","wp","ajax","post","post_id","settings","postId","done","tracks","reset","save","data","sort","Object","assign","toJSON","nonce","saveNonce","Model","defaults","artist","artworkId","artworkUrl","audioId","audioUrl","format","length","title","order","Application","constructor","l10n","config","global","cue","Attachment","media","frames","setModel","id","method","frame","call","_addTracks","TrackMediaFrame","workflows","addTracks","frameTitle","library","type","button","text","frameButtonText","multiple","uploader","options","plupload","filters","mime_types","fileTypes","extensions","state","props","off","debouncedScan","on","selection","_","each","models","attachment","push","embed","url","_selectArtwork","workflow","selectArtwork","files","attachments","first","set","sizes","_selectAudio","selectAudio","isEmbed","setState","keys","attributes","without","key","value","destroy","_cueSettings","view","defaultProps","collection","controller","$","screen","EditPlaylistScreen","el","render","TrackList","View","className","tagName","initialize","listenTo","addTrack","updateOrder","$el","empty","sortable","axis","delay","forceHelperSize","forcePlaceholderSize","opacity","start","e","ui","placeholder","css","update","trackView","append","find","item","i","cid","TrackArtwork","template","events","parent","html","toggleClass","isEmpty","select","open","TrackAudio","refresh","cleanup","playerId","attr","mejs","players","remove","$mediaEl","wrap","playerSettings","classPrefix","defaultAudioHeight","features","pluginPath","stretching","success","mediaElement","domObject","t","$fakeBody","container","nodeName","replaceWith","childNodes","error","$parent","closest","split","pop","pluginVars","mediaelementplayer","player","pause","setSrc","updateTitle","updateFields","views","add","minimize","preventDefault","removeClass","blur","toggleOpenStatus","hasClass","window","trigger","updateAttribute","attribute","target","$settings","filter","val","MediaFrame","Toolbar","Post","PostFrame","Select","SelectFrame","createStates","states","Library","priority","toolbar","filterable","query","editable","allowLocalEdits","displaySettings","displayUserSettings","Embed","addFromUrl","menuItem","bindHandlers","prototype","apply","arguments","createToolbar","mainEmbedToolbar","mainMenu","embedContent","editSelectionContent","mainInsertToolbar","selectionStatusToolbar","style","requires","click","close","AddTracksButton","$button","addClass","saved","buttonClick"],"mappings":"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","file":"playlist-edit.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin/assets/js/playlist-edit.js\");\n","import Backbone from 'backbone';\nimport wp from 'wp';\n\nimport { settings } from 'cue';\nimport { Track } from '../models/track';\n\nexport const Tracks = Backbone.Collection.extend({\n\tmodel: Track,\n\n\tcomparator: function( track ) {\n\t\treturn parseInt( track.get( 'order' ), 10 );\n\t},\n\n\tfetch: function() {\n\t\treturn wp.ajax.post( 'cue_get_playlist_tracks', {\n\t\t\tpost_id: settings.postId\n\t\t}).done( tracks => this.reset( tracks ) );\n\t},\n\n\tsave: function( data ) {\n\t\tthis.sort();\n\n\t\tdata = Object.assign({}, data, {\n\t\t\tpost_id: settings.postId,\n\t\t\ttracks: this.toJSON(),\n\t\t\tnonce: settings.saveNonce\n\t\t});\n\n\t\treturn wp.ajax.post( 'cue_save_playlist_tracks', data );\n\t}\n});\n","import Backbone from 'backbone';\n\nexport const Track = Backbone.Model.extend({\n\tdefaults: {\n\t\tartist: '',\n\t\tartworkId: '',\n\t\tartworkUrl: '',\n\t\taudioId: '',\n\t\taudioUrl: '',\n\t\tformat: '',\n\t\tlength: '',\n\t\ttitle: '',\n\t\torder: 0\n\t}\n});\n","class Application {\n\tconstructor() {\n\t\tthis.l10n = {};\n\t\tthis.settings = {};\n\t}\n\n\tconfig( settings ) {\n\t\tif ( settings.l10n ) {\n\t\t\tthis.l10n = Object.assign( this.l10n, settings.l10n );\n\t\t\tdelete settings.l10n;\n\t\t}\n\n\t\tthis.settings = Object.assign( this.settings, settings );\n\t}\n}\n\nglobal.cue = global.cue || new Application();\n\nexport default global.cue;\nexport const l10n = global.cue.l10n;\nexport const settings = global.cue.settings;\n","import _ from 'underscore';\nimport wp from 'wp';\n\nimport cue from 'cue';\nimport { TrackMediaFrame } from '../views/frame/track-media';\n\nconst { Attachment } = wp.media.model;\nconst { l10n } = cue;\n\nexport default {\n\tframes: [],\n\tmodel: {},\n\n\t/**\n\t * Set a model for the current workflow.\n\t *\n\t * @param {Object} frame\n\t */\n\tsetModel: function( model ) {\n\t\tthis.model = model;\n\t\treturn this;\n\t},\n\n\t/**\n\t * Retrieve or create a frame instance for a particular workflow.\n\t *\n\t * @param {string} id Frame identifer.\n\t */\n\tget: function( id )  {\n\t\tconst method = '_' + id;\n\t\tlet frame = this.frames[ method ] || null;\n\n\t\t// Always call the frame method to perform any routine set up. The\n\t\t// frame method should short-circuit before being initialized again.\n\t\tframe = this[ method ].call( this, frame );\n\n\t\t// Store the frame for future use.\n\t\tthis.frames[ method ] = frame;\n\n\t\treturn frame;\n\t},\n\n\t/**\n\t * Workflow for adding tracks to the playlist.\n\t *\n\t * @param {Object} frame\n\t */\n\t_addTracks: function( frame ) {\n\t\tif ( frame ) {\n\t\t\treturn frame; // Return the existing frame for this workflow.\n\t\t}\n\n\t\t// Initialize the audio frame.\n\t\tframe = new TrackMediaFrame({\n\t\t\ttitle: l10n.workflows.addTracks.frameTitle,\n\t\t\tlibrary: {\n\t\t\t\ttype: 'audio'\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\ttext: l10n.workflows.addTracks.frameButtonText\n\t\t\t},\n\t\t\tmultiple: 'add'\n\t\t});\n\n\t\t// Set the extensions that can be uploaded.\n\t\tframe.uploader.options.uploader.plupload = {\n\t\t\tfilters: {\n\t\t\t\tmime_types: [ {\n\t\t\t\t\ttitle: l10n.workflows.addTracks.fileTypes,\n\t\t\t\t\textensions: 'm4a,mp3,ogg,wma'\n\t\t\t\t} ]\n\t\t\t}\n\t\t};\n\n\t\t// Prevent the Embed controller scanner from changing the state.\n\t\tframe.state( 'embed' ).props.off( 'change:url', frame.state( 'embed' ).debouncedScan );\n\n\t\t// Insert each selected attachment as a new track model.\n\t\tframe.state( 'insert' ).on( 'insert', function( selection ) {\n\t\t\t_.each( selection.models, function( attachment ) {\n\t\t\t\tcue.tracks.push( attachment.toJSON().cue );\n\t\t\t});\n\t\t});\n\n\t\t// Insert the embed data as a new model.\n\t\tframe.state( 'embed' ).on( 'select', function() {\n\t\t\tconst embed = this.props.toJSON();\n\n\t\t\tconst track = {\n\t\t\t\taudioId: '',\n\t\t\t\taudioUrl: embed.url\n\t\t\t};\n\n\t\t\tif ( ( 'title' in embed ) && '' !== embed.title ) {\n\t\t\t\ttrack.title = embed.title;\n\t\t\t}\n\n\t\t\tcue.tracks.push( track );\n\t\t});\n\n\t\treturn frame;\n\t},\n\n\t/**\n\t * Workflow for selecting track artwork image.\n\t *\n\t * @param {Object} frame\n\t */\n\t_selectArtwork: function( frame ) {\n\t\tconst workflow = this;\n\n\t\t// Return existing frame for this workflow.\n\t\tif ( frame ) {\n\t\t\treturn frame;\n\t\t}\n\n\t\t// Initialize the artwork frame.\n\t\tframe = wp.media({\n\t\t\ttitle: l10n.workflows.selectArtwork.frameTitle,\n\t\t\tlibrary: {\n\t\t\t\ttype: 'image'\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\ttext: l10n.workflows.selectArtwork.frameButtonText\n\t\t\t},\n\t\t\tmultiple: false\n\t\t});\n\n\t\t// Set the extensions that can be uploaded.\n\t\tframe.uploader.options.uploader.plupload = {\n\t\t\tfilters: {\n\t\t\t\tmime_types: [ {\n\t\t\t\t\tfiles: l10n.workflows.selectArtwork.fileTypes,\n\t\t\t\t\textensions: 'jpg,jpeg,gif,png'\n\t\t\t\t} ]\n\t\t\t}\n\t\t};\n\n\t\t// Automatically select the existing artwork if possible.\n\t\tframe.on( 'open', function() {\n\t\t\tconst selection = this.get( 'library' ).get( 'selection' );\n\t\t\tconst artworkId = workflow.model.get( 'artworkId' );\n\t\t\tconst attachments = [];\n\n\t\t\tif ( artworkId ) {\n\t\t\t\tattachments.push( Attachment.get( artworkId ) );\n\t\t\t\tattachments[0].fetch();\n\t\t\t}\n\n\t\t\tselection.reset( attachments );\n\t\t});\n\n\t\t// Set the model's artwork ID and url properties.\n\t\tframe.state( 'library' ).on( 'select', function() {\n\t\t\tconst attachment = this.get( 'selection' ).first().toJSON();\n\n\t\t\tworkflow.model.set({\n\t\t\t\tartworkId: attachment.id,\n\t\t\t\tartworkUrl: attachment.sizes.cue.url\n\t\t\t});\n\t\t});\n\n\t\treturn frame;\n\t},\n\n\t/**\n\t * Workflow for selecting track audio.\n\t *\n\t * @param {Object} frame\n\t */\n\t_selectAudio: function( frame ) {\n\t\tconst workflow = this;\n\n\t\t// Return the existing frame for this workflow.\n\t\tif ( frame ) {\n\t\t\treturn frame;\n\t\t}\n\n\t\t// Initialize the audio frame.\n\t\tframe = new TrackMediaFrame({\n\t\t\ttitle: l10n.workflows.selectAudio.frameTitle,\n\t\t\tlibrary: {\n\t\t\t\ttype: 'audio'\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\ttext: l10n.workflows.selectAudio.frameButtonText\n\t\t\t},\n\t\t\tmultiple: false\n\t\t});\n\n\t\t// Set the extensions that can be uploaded.\n\t\tframe.uploader.options.uploader.plupload = {\n\t\t\tfilters: {\n\t\t\t\tmime_types: [ {\n\t\t\t\t\ttitle: l10n.workflows.selectAudio.fileTypes,\n\t\t\t\t\textensions: 'm4a,mp3,ogg,wma'\n\t\t\t\t} ]\n\t\t\t}\n\t\t};\n\n\t\t// Prevent the Embed controller scanner from changing the state.\n\t\tframe.state( 'embed' ).props.off( 'change:url', frame.state( 'embed' ).debouncedScan );\n\n\t\t// Set the frame state when opening it.\n\t\tframe.on( 'open', function() {\n\t\t\tconst selection = this.get( 'insert' ).get( 'selection' );\n\t\t\tconst audioId = workflow.model.get( 'audioId' );\n\t\t\tconst audioUrl = workflow.model.get( 'audioUrl' );\n\t\t\tconst isEmbed = audioUrl && ! audioId;\n\t\t\tconst attachments = [];\n\n\t\t\t// Automatically select the existing audio file if possible.\n\t\t\tif ( audioId ) {\n\t\t\t\tattachments.push( Attachment.get( audioId ) );\n\t\t\t\tattachments[0].fetch();\n\t\t\t}\n\n\t\t\tselection.reset( attachments );\n\n\t\t\t// Set the embed state properties.\n\t\t\tif ( isEmbed ) {\n\t\t\t\tthis.get( 'embed' ).props.set({\n\t\t\t\t\turl: audioUrl,\n\t\t\t\t\ttitle: workflow.model.get( 'title' )\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.get( 'embed' ).props.set({\n\t\t\t\t\turl: '',\n\t\t\t\t\ttitle: ''\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Set the state to 'embed' if the model has an audio URL but\n\t\t\t// not a corresponding attachment ID.\n\t\t\tframe.setState( isEmbed ? 'embed' : 'insert' );\n\t\t});\n\n\t\t// Copy data from the selected attachment to the current model.\n\t\tframe.state( 'insert' ).on( 'insert', function( selection ) {\n\t\t\tconst attachment = selection.first().toJSON().cue;\n\t\t\tconst data = {};\n\t\t\tconst keys = _.keys( workflow.model.attributes );\n\n\t\t\t// Attributes that shouldn't be updated when inserting an\n\t\t\t// audio attachment.\n\t\t\t_.without( keys, [ 'id', 'order' ] );\n\n\t\t\t// Update these attributes if they're empty.\n\t\t\t// They shouldn't overwrite any data entered by the user.\n\t\t\t_.each( keys, function( key ) {\n\t\t\t\tconst value = workflow.model.get( key );\n\n\t\t\t\tif ( ! value && ( key in attachment ) && value !== attachment[ key ] ) {\n\t\t\t\t\tdata[ key ] = attachment[ key ];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Attributes that should always be replaced.\n\t\t\tdata.audioId  = attachment.audioId;\n\t\t\tdata.audioUrl = attachment.audioUrl;\n\n\t\t\tworkflow.model.set( data );\n\t\t});\n\n\t\t// Copy the embed data to the current model.\n\t\tframe.state( 'embed' ).on( 'select', function() {\n\t\t\tconst embed = this.props.toJSON();\n\t\t\tconst data = {};\n\n\t\t\tdata.audioId  = '';\n\t\t\tdata.audioUrl = embed.url;\n\n\t\t\tif ( ( 'title' in embed ) && '' !== embed.title ) {\n\t\t\t\tdata.title = embed.title;\n\t\t\t}\n\n\t\t\tworkflow.model.set( data );\n\t\t});\n\n\t\t// Remove an empty model if the frame is escaped.\n\t\tframe.on( 'escape', function() {\n\t\t\tconst model = workflow.model.toJSON();\n\n\t\t\tif ( ! model.artworkUrl && ! model.audioUrl ) {\n\t\t\t\tworkflow.model.destroy();\n\t\t\t}\n\t\t});\n\n\t\treturn frame;\n\t}\n};\n","/* global _cueSettings */\n\nimport $ from 'jquery';\nimport wp from 'wp';\n\nimport cue from 'cue';\nimport { EditPlaylistScreen } from './views/screen/edit-playlist';\nimport { Track } from './models/track';\nimport { Tracks } from './collections/tracks';\nimport workflows from './modules/workflows';\n\ncue.data = _cueSettings; // Back-compat.\ncue.config( _cueSettings );\n\nwp.media.view.settings.post.id = cue.data.postId;\nwp.media.view.settings.defaultProps = {};\n\nObject.assign( cue, { collection: {}, controller: {}, model: {}, view: {} });\ncue.model.Track = Track;\ncue.model.Tracks = Tracks;\ncue.workflows = workflows;\n\n/**\n * ========================================================================\n * SETUP\n * ========================================================================\n */\n\n$(function( $ ) {\n\tconst tracks = new cue.model.Tracks( cue.data.tracks );\n\tcue.tracks = tracks;\n\tdelete cue.data.tracks;\n\n\tconst screen = new EditPlaylistScreen({\n\t\tel: '#post',\n\t\tcollection: tracks,\n\t\tl10n: cue.l10n\n\t});\n\n\tscreen.render();\n});\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport wp from 'wp';\n\nimport { Track } from './track';\n\nexport const TrackList = wp.Backbone.View.extend({\n\tclassName: 'cue-tracklist',\n\ttagName: 'ol',\n\n\tinitialize: function() {\n\t\tthis.listenTo( this.collection, 'add', this.addTrack );\n\t\tthis.listenTo( this.collection, 'add remove', this.updateOrder );\n\t\tthis.listenTo( this.collection, 'reset', this.render );\n\t},\n\n\trender: function() {\n\t\tthis.$el.empty();\n\n\t\tthis.collection.each( this.addTrack, this );\n\t\tthis.updateOrder();\n\n\t\tthis.$el.sortable({\n\t\t\taxis: 'y',\n\t\t\tdelay: 150,\n\t\t\tforceHelperSize: true,\n\t\t\tforcePlaceholderSize: true,\n\t\t\topacity: 0.6,\n\t\t\tstart: ( e, ui ) => {\n\t\t\t\tui.placeholder.css( 'visibility', 'visible' );\n\t\t\t},\n\t\t\tupdate: ( e, ui ) => {\n\t\t\t\tthis.updateOrder();\n\t\t\t}\n\t\t});\n\n\t\treturn this;\n\t},\n\n\taddTrack: function( track ) {\n\t\tconst trackView = new Track({ model: track });\n\t\tthis.$el.append( trackView.render().el );\n\t},\n\n\tupdateOrder: function() {\n\t\t_.each( this.$el.find( '.cue-track' ), ( item, i ) => {\n\t\t\tconst cid = $( item ).data( 'cid' );\n\t\t\tthis.collection.get( cid ).set( 'order', i );\n\t\t});\n\t}\n});\n","import _ from 'underscore';\nimport wp from 'wp';\n\nimport workflows from '../../../modules/workflows';\n\nexport const TrackArtwork = wp.Backbone.View.extend({\n\ttagName: 'span',\n\tclassName: 'cue-track-artwork',\n\ttemplate: wp.template( 'cue-playlist-track-artwork' ),\n\n\tevents: {\n\t\t'click': 'select'\n\t},\n\n\tinitialize: function( options ) {\n\t\tthis.parent = options.parent;\n\t\tthis.listenTo( this.model, 'change:artworkUrl', this.render );\n\t},\n\n\trender: function() {\n\t\tthis.$el.html( this.template( this.model.toJSON() ) );\n\t\tthis.parent.$el.toggleClass( 'has-artwork', ! _.isEmpty( this.model.get( 'artworkUrl' ) ) );\n\t\treturn this;\n\t},\n\n\tselect: function() {\n\t\tworkflows.setModel( this.model ).get( 'selectArtwork' ).open();\n\t}\n});\n","import $ from 'jquery';\nimport mejs from 'mediaelementjs';\nimport wp from 'wp';\n\nimport { settings } from 'cue';\nimport workflows from '../../../modules/workflows';\n\nexport const TrackAudio = wp.Backbone.View.extend({\n\ttagName: 'span',\n\tclassName: 'cue-track-audio',\n\ttemplate: wp.template( 'cue-playlist-track-audio' ),\n\n\tevents: {\n\t\t'click .cue-track-audio-selector': 'select'\n\t},\n\n\tinitialize: function( options ) {\n\t\tthis.parent = options.parent;\n\n\t\tthis.listenTo( this.model, 'change:audioUrl', this.refresh );\n\t\tthis.listenTo( this.model, 'destroy', this.cleanup );\n\t},\n\n\trender: function() {\n\t\tconst track = this.model.toJSON();\n\t\tconst playerId = this.$el.find( '.mejs-audio' ).attr( 'id' );\n\n\t\t// Remove the MediaElement player object if the\n\t\t// audio file URL is empty.\n\t\tif ( '' === track.audioUrl && playerId ) {\n\t\t\tmejs.players[ playerId ].remove();\n\t\t}\n\n\t\t// Render the media element.\n\t\tthis.$el.html( this.template( this.model.toJSON() ) );\n\n\t\t// Set up MediaElement.js.\n\t\tconst $mediaEl = this.$el.find( '.cue-audio' );\n\n\t\tif ( $mediaEl.length ) {\n\n\t\t\t// MediaElement traverses the DOM and throws an error if it\n\t\t\t// can't find a parent node before reaching <body>. It makes\n\t\t\t// sure the flash fallback won't exist within a <p> tag.\n\n\t\t\t// The view isn't attached to the DOM at this point, so an\n\t\t\t// error is thrown when reaching the top of the tree.\n\n\t\t\t// This hack makes it stop searching. The fake <body> tag is\n\t\t\t// removed in the success callback.\n\t\t\t// @see mediaelement-and-player.js:~1222\n\t\t\t$mediaEl.wrap( '<body></body>' );\n\n\t\t\tconst playerSettings = {\n\t\t\t\tclassPrefix: 'mejs-',\n\t\t\t\tdefaultAudioHeight: 30,\n\t\t\t\tfeatures: [ 'playpause', 'current', 'progress', 'duration' ],\n\t\t\t\tpluginPath: settings.pluginPath,\n\t\t\t\tstretching: 'responsive',\n\t\t\t\tsuccess: ( mediaElement, domObject, t ) => {\n\t\t\t\t\tconst $fakeBody = $( t.container ).parent();\n\n\t\t\t\t\t// Remove the fake <body> tag.\n\t\t\t\t\tif ( $.nodeName( $fakeBody.get( 0 ), 'body' ) ) {\n\t\t\t\t\t\t$fakeBody.replaceWith( $fakeBody.get( 0 ).childNodes );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: el => {\n\t\t\t\t\tconst $el = $( el );\n\t\t\t\t\tconst $parent = $el.closest( '.cue-track' );\n\t\t\t\t\tconst playerId = $el.closest( '.mejs-audio' ).attr( 'id' );\n\n\t\t\t\t\t// Remove the audio element if there is an error.\n\t\t\t\t\tmejs.players[ playerId ].remove();\n\t\t\t\t\t$parent.find( 'audio' ).remove();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Hack to allow .m4a files.\n\t\t\t// @link https://github.com/johndyer/mediaelement/issues/291\n\t\t\tif ( 'm4a' === $mediaEl.attr( 'src' ).split( '.' ).pop() ) {\n\t\t\t\tplayerSettings.pluginVars = 'isvideo=true';\n\t\t\t}\n\n\t\t\t$mediaEl.mediaelementplayer( playerSettings );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\trefresh: function( e ) {\n\t\tconst track = this.model.toJSON();\n\t\tconst playerId = this.$el.find( '.mejs-audio' ).attr( 'id' );\n\t\tconst player = playerId ? mejs.players[ playerId ] : null;\n\n\t\tif ( player && '' !== track.audioUrl ) {\n\t\t\tplayer.pause();\n\t\t\tplayer.setSrc( track.audioUrl );\n\t\t} else {\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\tcleanup: function() {\n\t\tconst playerId = this.$el.find( '.mejs-audio' ).attr( 'id' );\n\t\tconst player = playerId ? mejs.players[ playerId ] : null;\n\n\t\tif ( player ) {\n\t\t\tplayer.remove();\n\t\t}\n\t},\n\n\tselect: function() {\n\t\tworkflows.setModel( this.model ).get( 'selectAudio' ).open();\n\t}\n});\n","import $ from 'jquery';\nimport wp from 'wp';\n\nimport { TrackArtwork } from './artwork';\nimport { TrackAudio } from './audio';\n\nexport const Track = wp.Backbone.View.extend({\n\ttagName: 'li',\n\tclassName: 'cue-track',\n\ttemplate: wp.template( 'cue-playlist-track' ),\n\n\tevents: {\n\t\t'change [data-setting]': 'updateAttribute',\n\t\t'click .js-toggle': 'toggleOpenStatus',\n\t\t'dblclick .cue-track-title': 'toggleOpenStatus',\n\t\t'click .js-close': 'minimize',\n\t\t'click .js-remove': 'destroy'\n\t},\n\n\tinitialize: function() {\n\t\tthis.listenTo( this.model, 'change:title', this.updateTitle );\n\t\tthis.listenTo( this.model, 'change', this.updateFields );\n\t\tthis.listenTo( this.model, 'destroy', this.remove );\n\t},\n\n\trender: function() {\n\t\tthis.$el.html( this.template( this.model.toJSON() ) ).data( 'cid', this.model.cid );\n\n\t\tthis.views.add( '.cue-track-column-artwork', new TrackArtwork({\n\t\t\tmodel: this.model,\n\t\t\tparent: this\n\t\t}));\n\n\t\tthis.views.add( '.cue-track-audio-group', new TrackAudio({\n\t\t\tmodel: this.model,\n\t\t\tparent: this\n\t\t}));\n\n\t\treturn this;\n\t},\n\n\tminimize: function( e ) {\n\t\te.preventDefault();\n\t\tthis.$el.removeClass( 'is-open' ).find( 'input:focus' ).blur();\n\t},\n\n\ttoggleOpenStatus: function( e ) {\n\t\te.preventDefault();\n\t\tthis.$el.toggleClass( 'is-open' ).find( 'input:focus' ).blur();\n\n\t\t// Trigger a resize so the media element will fill the container.\n\t\tif ( this.$el.hasClass( 'is-open' ) ) {\n\t\t\t$( window ).trigger( 'resize' );\n\t\t}\n\t},\n\n\t/**\n\t * Update a model attribute when a field is changed.\n\t *\n\t * Fields with a 'data-setting=\"{{key}}\"' attribute whose value\n\t * corresponds to a model attribute will be automatically synced.\n\t *\n\t * @param {Object} e Event object.\n\t */\n\tupdateAttribute: function( e ) {\n\t\tconst attribute = $( e.target ).data( 'setting' );\n\t\tconst value = e.target.value;\n\n\t\tif ( this.model.get( attribute ) !== value ) {\n\t\t\tthis.model.set( attribute, value );\n\t\t}\n\t},\n\n\t/**\n\t * Update a setting field when a model's attribute is changed.\n\t */\n\tupdateFields: function() {\n\t\tconst track = this.model.toJSON();\n\t\tconst $settings = this.$el.find( '[data-setting]' );\n\n\t\t// A change event shouldn't be triggered here, so it won't cause\n\t\t// the model attribute to be updated and get stuck in an\n\t\t// infinite loop.\n\t\tfor ( const attribute in track ) {\n\t\t\tconst value = $( '<div/>' ).html( track[ attribute ] ).text(); // Decodes HTML entities.\n\t\t\t$settings.filter( '[data-setting=\"' + attribute + '\"]' ).val( value );\n\t\t}\n\t},\n\n\tupdateTitle: function() {\n\t\tconst title = this.model.get( 'title' );\n\t\tthis.$el.find( '.cue-track-title .text' ).text( title ? title : 'Title' );\n\t},\n\n\t/**\n\t * Destroy the view's model.\n\t *\n\t * Avoid syncing to the server by triggering an event instead of\n\t * calling destroy() directly on the model.\n\t */\n\tdestroy: function() {\n\t\tthis.model.trigger( 'destroy', this.model );\n\t},\n\n\tremove: function() {\n\t\tthis.$el.remove();\n\t}\n});\n","import wp from 'wp';\n\nimport { l10n } from 'cue';\n\nconst { MediaFrame, Toolbar } = wp.media.view;\nconst { Post: PostFrame, Select: SelectFrame } = MediaFrame;\n\nexport const TrackMediaFrame = PostFrame.extend({\n\tcreateStates: function() {\n\t\tconst options = this.options;\n\n\t\tthis.states.add([\n\t\t\tnew wp.media.controller.Library({\n\t\t\t\tid: 'insert',\n\t\t\t\ttitle: options.title,\n\t\t\t\tpriority: 20,\n\t\t\t\ttoolbar: 'main-insert',\n\t\t\t\tfilterable: 'uploaded',\n\t\t\t\tlibrary: wp.media.query( options.library ),\n\t\t\t\tmultiple: options.multiple ? 'reset' : false,\n\t\t\t\teditable: false,\n\t\t\t\tallowLocalEdits: true,\n\t\t\t\tdisplaySettings: false,\n\t\t\t\tdisplayUserSettings: false\n\t\t\t}),\n\n\t\t\tnew wp.media.controller.Embed({\n\t\t\t\ttitle: l10n.addFromUrl,\n\t\t\t\tmenuItem: { text: l10n.addFromUrl, priority: 120 },\n\t\t\t\ttype: 'link'\n\t\t\t})\n\t\t]);\n\t},\n\n\tbindHandlers: function() {\n\t\tSelectFrame.prototype.bindHandlers.apply( this, arguments );\n\n\t\tthis.on( 'toolbar:create:main-insert', this.createToolbar, this );\n\t\tthis.on( 'toolbar:create:main-embed', this.mainEmbedToolbar, this );\n\n\t\tthis.on( 'menu:render:default', this.mainMenu, this );\n\n\t\tthis.on( 'content:render:embed', this.embedContent, this );\n\t\tthis.on( 'content:render:edit-selection', this.editSelectionContent, this );\n\n\t\tthis.on( 'toolbar:render:main-insert', this.mainInsertToolbar, this );\n\t},\n\n\tmainInsertToolbar: function( view ) {\n\t\tthis.selectionStatusToolbar( view );\n\n\t\tview.set( 'insert', {\n\t\t\tstyle: 'primary',\n\t\t\tpriority: 80,\n\t\t\ttext: this.options.button.text,\n\t\t\trequires: {\n\t\t\t\tselection: true\n\t\t\t},\n\t\t\tclick: () => {\n\t\t\t\tconst state = this.state();\n\t\t\t\tconst selection = state.get( 'selection' );\n\n\t\t\t\tthis.close();\n\t\t\t\tstate.trigger( 'insert', selection ).reset();\n\t\t\t}\n\t\t});\n\t},\n\n\tmainEmbedToolbar: function( toolbar ) {\n\t\ttoolbar.view = new Toolbar.Embed({\n\t\t\tcontroller: this,\n\t\t\ttext: this.options.button.text\n\t\t});\n\t}\n});\n","import $ from 'jquery';\nimport wp from 'wp';\n\nimport workflows from '../../../modules/workflows';\n\nexport const AddTracksButton = wp.Backbone.View.extend({\n\tid: 'add-tracks',\n\ttagName: 'p',\n\n\tevents: {\n\t\t'click .button': 'click'\n\t},\n\n\tinitialize: function( options ) {\n\t\tthis.l10n = options.l10n;\n\t},\n\n\trender: function() {\n\t\tconst $button = $( '<a />', {\n\t\t\ttext: this.l10n.addTracks\n\t\t}).addClass( 'button button-secondary' );\n\n\t\tthis.$el.html( $button );\n\n\t\treturn this;\n\t},\n\n\tclick: function( e ) {\n\t\te.preventDefault();\n\t\tworkflows.get( 'addTracks' ).open();\n\t}\n});\n","import $ from 'jquery';\nimport wp from 'wp';\n\nimport { AddTracksButton } from './button/add-tracks';\nimport { TrackList } from '../edit-playlist/track-list';\n\nexport const EditPlaylistScreen = wp.Backbone.View.extend({\n\tsaved: false,\n\n\tevents: {\n\t\t'click #publish': 'buttonClick',\n\t\t'click #save-post': 'buttonClick'\n\t},\n\n\tinitialize: function( options ) {\n\t\tthis.l10n = options.l10n;\n\t},\n\n\trender: function() {\n\t\tthis.views.add( '#cue-playlist-editor .cue-panel-body', [\n\t\t\tnew AddTracksButton({\n\t\t\t\tcollection: this.collection,\n\t\t\t\tl10n: this.l10n\n\t\t\t}),\n\t\t\tnew TrackList({\n\t\t\t\tcollection: this.collection\n\t\t\t})\n\t\t]);\n\n\t\treturn this;\n\t},\n\n\tbuttonClick: function( e ) {\n\t\tconst $button = $( e.target );\n\n\t\tif ( ! this.saved ) {\n\t\t\tthis.collection.save().done( data => {\n\t\t\t\tthis.saved = true;\n\t\t\t\t$button.click();\n\t\t\t});\n\t\t}\n\n\t\treturn this.saved;\n\t}\n});\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = Backbone;","module.exports = jQuery;","module.exports = mejs;","module.exports = _;","module.exports = wp;"],"sourceRoot":""}
