!function(t){var e={};function n(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function s(t){t=t;var e={toggleTransliteration:()=>{}};this.load=function(n=!0){var s=document.querySelector(t);if(null!==s){var r={sourceLanguage:google.elements.transliteration.LanguageCode.ENGLISH,destinationLanguage:[google.elements.transliteration.LanguageCode.HINDI],transliterationEnabled:n};(e=new google.elements.transliteration.TransliterationControl(r)).makeTransliteratable([s])}else console.warn(`element ${t} doesn't exist`)},this.toggle=function(){e.toggleTransliteration()},this.status=function(){return e.isTransliterationEnabled()},this.stop=()=>{e.disableTransliteration()},this.start=()=>{e.enableTransliteration()}}n.r(e);class r{constructor(t){this.element=t}lastWord(){throw new Error("lastWord() method must be implemented.")}replace(t,e,n,s){throw new Error("replace() method must be implemented.")}caretInfo(){throw new Error("caretInfo() method must be implemented.")}}const o=["क","ख","ग","घ","ङ","च","छ","ज","झ","ञ","ट","ठ","ड","ढ","ण","त","थ","द","ध","न","प","फ","ब","भ","म","क़","ख़","ग़","ज़","ड़","ढ़","फ़","य","र","ल","ळ","व","ह","श","ष","स","ऱ","ऴ","्","अ","आ","इ","ई","उ","ऊ","ा","ि","ी","ु","ू","ऋ","ॠ","ऌ","ॡ","ए","ऐ","ओ","औ","ृ","ॄ","ॢ","ॣ","े","ै","ो","ौ"," ॑"," ॒","॓","॔","ँ","ं","ः","़","।","॥","ऽ","॰","ॐ","०","१","२","३","४","५","६","७","८","९","ऍ","ऑ","ऎ","ऒ","ॅ","ॉ","ॆ","ॊ"],i=t=>"string"==typeof t&&/[a-zA-Z0-9]/.test(t),a=t=>"string"==typeof t&&/[0-9]/.test(t),l=t=>"string"==typeof t&&/[^A-Za-z0-9]/.test(t),c=t=>"string"==typeof t&&/[a-zA-Z]/.test(t),u=t=>"string"==typeof t&&o.includes(t.charAt(0)),d=t=>"string"==typeof t&&/\s/g.test(t);class h extends r{constructor(t){super(),this.element=t}lastWord(){const t=this.caretInfo();if(!t.isCollapsed)return null;const e=this.element.value,n=e.trimEnd(),s=e.length-n.length,r=t.position.start-s;let o=r-1;const i=[];let a;for(;o>=0&&(a=e.charAt(o),!d(a));)i.push(a),o--;const l=i.reverse().join("");return{word:l,position:{start:r-l.length,end:r}}}caretInfo(){const t={isCollapsed:!0,position:{start:0,end:0}},e={start:this.element.selectionStart,end:this.element.selectionEnd};return t.isCollapsed=e.start===e.end,t.isCollapsed&&(t.position.end=t.position.start=e.start),t.position=e,t}replace(t,e,n){this.element.setRangeText(t,e,n)}}class p extends r{lastWord(){const t=this.caretInfo();if(!t.isCollapsed)return null;const e={current:t.position.end.node,previous:t.position.end.node.previousSibling};null===e.previous&&(e.previous=function(t){let e=t.previousSibling;return null!==e?e:e=t.parentElement.previousSibling}(e.current)),e.previous===this.element&&(e.previous=null);const n={current:e.current.nodeValue,previous:""};null!==e.previous&&(n.previous=e.previous.nodeValue);const s=n.current.substr(0,t.position.end.offset).trimRight(),r=s.split(" ");let o=r[r.length-1];const i=o.length;return{word:o,node:e.current,position:{start:s.length-i,end:s.length}}}replace(t,e,n,s){const r=new Range;r.setStart(s,e),r.setEnd(s,n),r.deleteContents(),r.insertNode(document.createTextNode(t))}caretInfo(){const t=window.getSelection(),{anchorNode:e,anchorOffset:n,focusNode:s,focusOffset:r,isCollapsed:o}=t;return{isCollapsed:o,position:{start:{node:e,offset:n},end:{node:s,offset:r}}}}}class f extends p{caretInfo(){const t=this.element.contentWindow.getSelection(),{anchorNode:e,anchorOffset:n,focusNode:s,focusOffset:r,isCollapsed:o}=t;return{isCollapsed:o,position:{start:{node:e,offset:n},end:{node:s,offset:r}}}}}window.iFrame_Caret=f;class g{constructor(t){"string"==typeof t&&new TypeError("Given argument is not string"),this.string=t,this.url="https://www.google.com/inputtools/request",this.ime="transliteration_en_hi",this.num=5}async fetch(){return new Promise(async(t,e)=>{const n=new URLSearchParams({text:this.string,ime:this.ime,num:this.num}),s=`${this.url}?${n}`;fetch(s).then(async e=>{const n=await e.json(),s=this.processResponseJSON(n);t(s)}).catch(()=>{e()})})}processResponseJSON(t){const e={originalText:this.string,transliteration:[]};return void 0!==t[1][0][1]&&(e.transliteration=t[1][0][1]),e}}function m(t){i(this.lastWord.word)&&this.transliterator.stop(),u(this.lastWord.word)&&(t.preventDefault(),t.target.ownerDocument.execCommand("insertText","","।"))}function w(t){let e=!1;if(a(this.lastWord.word)&&(e=!0),l(this.lastWord.word)&&(e=!0),e&&(t.preventDefault(),t.target.ownerDocument.execCommand("insertText",""," ")),!u(this.lastWord.word)&&"."===this.lastWord.word.split("").pop()){const{node:t}=this.lastWord,{start:e,end:n}=this.lastWord.position;new g(this.lastWord.word).fetch().then(s=>{if(void 0!==s.transliteration[0]){const r=s.transliteration[0].replace(/\.$/,"।");this.caret.replace(r,e,n,t)}})}this.transliterator.start()}function v(t){a(this.lastWord.word)&&this.transliterator.stop(),c(this.lastWord.word)&&!l(this.lastWord.word)&&this.transliterator.start()}function b(t){this.transliterator.stop()}window.WPHindi={writer:class{constructor(t,e=!0){this.editor=null,this.selector=t,this.transliterator=new s(t),this.status=e,this.caret=null,this.lastWord=null}load(){null===this.editor&&(this.editor=document.querySelector(this.selector),this.caret=new(function(t){const{tagName:e,contentEditable:n}=t,s=e.toLowerCase();return"true"===n?p:"input"===s||"textarea"===s?h:"iframe"===s?f:null}(this.editor))(this.editor),this.caret instanceof f?this.editor.contentWindow.addEventListener("keydown",this.inputListener.bind(this)):this.editor.addEventListener("keydown",this.inputListener.bind(this)),this.transliterator.load(this.status))}inputListener(t){const{key:e}=t;if(!i(e)&&this.status)switch(this.lastWord=this.caret.lastWord(),e){case".":m.call(this,t);break;case" ":w.call(this,t);break;case",":v.call(this,t);break;default:b.call(this,t)}}stop(){this.status=!1,this.transliterator.stop()}start(){this.status=!0,this.transliterator.start()}toggle(){this.status=!this.status,this.transliterator.toggle()}}}}]);