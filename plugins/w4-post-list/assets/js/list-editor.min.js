!function(d){function t(){var e=d(".w4pl_active .w4pl_group_fields").outerHeight();d("#w4pl_list_options").css("minHeight",e)}d(document).on("w4pl/form_loaded",function(e){t(),d("#w4pl_orderby").trigger("change")}),d(document).ready(function(){d(document).trigger("w4pl/form_loaded",d("#w4pl_list_options"))}),d(document.body).on("change",".w4pl_field_compare",function(){(-1!==d.inArray(d(this).val(),["IN","NOT IN","BETWEEN","NOT BETWEEN"])?d(this).parent("td").next("td").children(".item").show().children(".button"):(d(this).parent("td").next("td").children(".item").hide().children(".button").hide(),d(this).parent("td").next("td").find(".item:first"))).show()}),d(document.body).on("click",".w4pl_clone_parent",function(e){var t=d(this).parent(".wpce_parent_item").clone();return d(this).parent(".wpce_parent_item").after(t),d(this).parent(".wpce_parent_item").parent().find(".w4pl_remove_parent").show(),!1}),d(document.body).on("click",".w4pl_remove_parent",function(e){var t=d(this);return 0==t.parent(".wpce_parent_item").siblings().length?t.hide():(d(".w4pl_remove_parent").show(),t.parent(".wpce_parent_item").remove()),!1}),d(document.body).on("change",".w4pl_onchange_lfr",function(){var e=d(this).parents(".w4pl_field_group").attr("id"),t=null,n=e;d("#publish").addClass("disabled"),null===n&&(n="w4pl_field_group_type"),null===t&&(t=d("#w4pl_list_options :input").serialize()+"&action=w4pl_list_edit_form_html"),d("#w4pl_list_options").append('<div id="w4pl_lo"></div>'),d.post(ajaxurl,t,function(e){return d("#w4pl_list_options").replaceWith(e),d("#"+n).addClass("w4pl_active"),d(document).trigger("w4pl/form_loaded",d("#w4pl_list_options")),d("#publish").removeClass("disabled"),!1})}),d(document.body).on("click",".w4pl_toggler",function(){return d(d(this).data("target")).toggle(),t(),!1}),d(document.body).on("change","#w4pl_orderby",function(){"meta_value"==d(this).val()||"meta_value_num"==d(this).val()?d("#orderby_meta_key_wrap").show():d("#orderby_meta_key_wrap").hide()}),d(document.body).on("click",".w4pl_group_title",function(){return d("#w4pl_list_options").height("auto"),d(".w4pl_field_group").removeClass("w4pl_active"),d(this).parent(".w4pl_field_group").addClass("w4pl_active"),d("#w4pl_tab_id").val(d(this).parent(".w4pl_field_group").attr("id")),t(),!1}),d(document.body).on("click","#w4pl_template_buttons a",function(e){var t,n="w4pl_template",r=d(this).data("code"),a=(n=document.getElementById(n)).scrollTop,l=0,i=n.selectionStart||"0"==n.selectionStart?"ff":!!document.selection&&"ie",_=("ie"==i?(n.focus(),(t=document.selection.createRange()).moveStart("character",-n.value.length),l=t.text.length):"ff"==i&&(l=n.selectionStart),n.value.substring(0,l)),o=n.value.substring(l,n.value.length);return n.value=_+r+o,l+=r.length,"ie"==i?(n.focus(),(t=document.selection.createRange()).moveStart("character",-n.value.length),t.moveStart("character",l),t.moveEnd("character",0),t.select()):"ff"==i&&(n.selectionStart=l,n.selectionEnd=l,n.focus()),n.scrollTop=a,!1}),d(document).ready(function(){function e(){d("#w4pl_meta_query_table tbody tr").each(function(e,t){t=d(t);t.find(".wffi_w4pl_meta_query_key").attr("name","w4pl[meta_query][key]["+e+"]"),t.find(".wffi_w4pl_meta_query_compare").attr("name","w4pl[meta_query][compare]["+e+"]"),t.find(".wffi_w4pl_meta_query_value").attr("name","w4pl[meta_query][value]["+e+"][]"),t.find("td.values").attr("data-pos",e),d(this).replaceWith(t)})}function n(e){var t=e.children(".item"),n=e.data("pos");t.each(function(e,t){t=d(t);t.find("input").attr("name","w4pl[meta_query][value]["+n+"]["+e+"]"),d(this).replaceWith(t)})}d(document.body).on("click","#w4pl_meta_query_add_btn",function(){return d(d("#w4pl_meta_query_clone tbody").html()).appendTo("#w4pl_meta_query_table tbody"),e(),!1}),d(document.body).on("click",".w4pl_meta_query_remove_btn",function(){return d(this).parents("tr").remove(),e(),!1}),d(document.body).on("click",".w4pl_meta_query_value_add",function(){d(".w4pl_meta_query_value_del").show();var e=d(this).parent(".item").parent("td");return d(this).parent(".item").after(d("#w4pl_meta_query_value_clone").html()),n(e),!1}),d(document.body).on("click",".w4pl_meta_query_value_del",function(){d(".w4pl_meta_query_value_del").show();var e=d(this).parent(".item").parent("td"),t=d(this);return 1==e.children(".item").length?d(this).hide():(t.parent(".item").remove(),n(e)),!1}),d(document.body).on("change",".w4pl_meta_query_compare",function(){(-1!=d.inArray(d(this).val(),["IN","NOT IN","BETWEEN","NOT BETWEEN"])?d(this).parent("td").next("td").children(".item").show().children(".w4pl_meta_query_value_add, .w4pl_meta_query_value_del"):(d(this).parent("td").next("td").children(".item").hide().children(".w4pl_meta_query_value_add, .w4pl_meta_query_value_del").hide(),d(this).parent("td").next("td").find(".item:first"))).show()}),d(".w4pl_meta_query_compare").each(function(e,t){d(this).trigger("change")})}),d(document).ready(function(){function e(){d("#w4pl_tax_query_table tbody tr").each(function(e,t){t=d(t);t.find(".wffi_w4pl_tax_query_taxonomy").attr("name","w4pl[tax_query][taxonomy]["+e+"]").removeAttr("id"),t.find(".wffi_w4pl_tax_query_field").attr("name","w4pl[tax_query][field]["+e+"]").removeAttr("id"),t.find(".wffi_w4pl_tax_query_operator").attr("name","w4pl[tax_query][operator]["+e+"]").removeAttr("id"),t.find(".wffi_w4pl_tax_query_terms").attr("name","w4pl[tax_query][terms]["+e+"][]").removeAttr("id"),t.find("td.terms").attr("data-pos",e),d(this).replaceWith(t)})}function n(e){var t=e.children(".item"),n=e.data("pos");t.each(function(e,t){t=d(t);t.find("input").attr("name","w4pl[tax_query][terms]["+n+"]["+e+"]"),d(this).replaceWith(t)})}d(document.body).on("click","#w4pl_tax_query_add_btn",function(){return d(d("#w4pl_tax_query_clone tbody").html()).appendTo("#w4pl_tax_query_table tbody"),e(),!1}),d(document.body).on("click",".w4pl_tax_query_remove_btn",function(){return d(this).parents("tr").remove(),e(),!1}),d(document.body).on("click",".w4pl_tax_query_value_add",function(){d(".w4pl_tax_query_value_del").show();var e=d(this).parent(".item").parent("td");return d(this).parent(".item").after(d("#w4pl_tax_query_value_clone").html()),n(e),!1}),d(document.body).on("click",".w4pl_tax_query_value_del",function(){d(".w4pl_tax_query_value_del").show();var e=d(this).parent(".item").parent("td"),t=d(this);return 1==e.children(".item").length?d(this).hide():(t.parent(".item").remove(),n(e)),!1}),d(document.body).on("change",".w4pl_tax_query_operator",function(){(-1!=d.inArray(d(this).val(),["IN","NOT IN"])?(console.log(d(this).val()),d(this).parents("tr").find(".w4pl_tax_query_terms_cell").children(".item").show().children(".w4pl_tax_query_value_add, .w4pl_tax_query_value_del")):(d(this).parents("tr").find(".w4pl_tax_query_terms_cell .item").hide().children(".w4pl_tax_query_value_add, .w4pl_tax_query_value_del").hide(),d(this).parents("tr").find(".w4pl_tax_query_terms_cell .item:first"))).show()}),d(".w4pl_tax_query_operator").each(function(e,t){d(this).trigger("change")})})}(jQuery);