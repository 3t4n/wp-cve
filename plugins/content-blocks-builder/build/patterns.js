!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,n=window.wp.i18n,l=window.wp.data,o=window.wp.plugins,a=window.wp.blocks,r=window.wp.components,s=window.wp.blockEditor,c=window.wp.notices,i=window.wp.apiFetch,d=e.n(i),u=window.wp.url,b=window.wp.coreData;const p=()=>(0,l.useSelect)((e=>e(b.store).canUser("update","settings")),[]);var m=window.lodash;function w(e){let{modalTitle:l,title:o,titleHelp:a,setIsModalOpen:s,onSubmit:c=m.noop,onCancel:i=m.noop,className:d}=e;const[u,b]=(0,t.useState)(o),p=()=>{s(!1),b(""),i()};return(0,t.createElement)(r.Modal,{title:l,closeLabel:(0,n.__)("Close","content-blocks-builder"),onRequestClose:()=>p(),overlayClassName:"reusable-blocks-menu-items__convert-modal",className:d},(0,t.createElement)("form",{onSubmit:e=>{e.preventDefault(),c(u),p()}},(0,t.createElement)(r.TextControl,{label:(0,n.__)("Name","content-blocks-builder"),value:u,onChange:b,help:a,className:"title-input"}),(0,t.createElement)(r.Flex,{className:"reusable-blocks-menu-items__convert-modal-actions",justify:"flex-end"},(0,t.createElement)(r.FlexItem,null,(0,t.createElement)(r.Button,{variant:"secondary",onClick:()=>p()},(0,n.__)("Cancel","content-blocks-builder"))),(0,t.createElement)(r.FlexItem,null,(0,t.createElement)(r.Button,{variant:"primary",type:"submit",disabled:!u},(0,n.__)("Save","content-blocks-builder"))))))}(0,o.registerPlugin)("boldblocks-create-block-pattern",{render:()=>{const{getBlocksByClientId:e,getBlockName:o}=(0,l.useSelect)((e=>e(s.store)),[]),{createSuccessNotice:i}=(0,l.useDispatch)(c.store),[p,m]=(0,t.useState)({isModalOpen:!1,clientIds:[]}),{isModalOpen:k,clientIds:_}=p;if(!(0,l.useSelect)((e=>e(b.store).canUser("create","posts")),[]))return null;const g=(0,n.__)("Create block pattern","content-blocks-builder");return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(s.BlockSettingsMenuControls,null,(e=>{let{selectedClientIds:n}=e;return n?.length>0&&((e,t)=>{var n;if(!e?.length)return!1;const l=t(e[0]),o=(0,a.getBlockSupport)(l,"boldblocks"),r=null!==(n=o?.layoutType)&&void 0!==n&&n;return!["gridItem","carouselItem","accordionItem","vstackItem"].includes(r)})(n,o)?(0,t.createElement)(r.MenuItem,{label:g,icon:"plus-alt2",onClick:()=>m({isModalOpen:!0,clientIds:n})},g):null})),k&&(0,t.createElement)(w,{modalTitle:g,title:(0,n.__)("CBB - A new pattern","content-blocks-builder"),titleHelp:(0,n.__)("You could name your pattern with a prefix that indicates it is a white label, such as ‘Awesome Project - Hero’.","content-blocks-builder"),setIsModalOpen:e=>m({...p,isModalOpen:e}),onSubmit:t=>{(t=>{let{title:l,clientIds:o}=t;const r=e(o),s=(0,a.serialize)(r);d()({path:"wp/v2/boldblocks-patterns",method:"POST",data:{title:l,content:s,status:"publish"}}).then((e=>{var t;i("The new pattern has been created!",{type:"snackbar",actions:[{label:(0,n.__)("Edit pattern","content-blocks-builder"),url:(t=e.id,(0,u.addQueryArgs)(`post.php?post=${t}&action=edit`))}]})}))})({title:t,clientIds:_})},className:"cbb-block-modal"}))}});var k=window.wp.editPost,_=window.wp.editor,g=window.wp.hooks;(0,o.registerPlugin)("boldblocks-pattern-meta",{render:()=>{const{getCurrentPostType:e}=(0,l.useSelect)((e=>e(_.store)),[]),[o,a]=(0,t.useState)(!0),[s,c]=(0,t.useState)([]);if("boldblocks_pattern"!==e())return null;(0,t.useEffect)((()=>{d()({path:"boldblocks/v1/getPatternCategories"}).then((e=>{c(e),a(!1)}))}),[]);const[i,m]=(0,b.useEntityProp)("postType","boldblocks_pattern","meta"),w=e=>t=>{m({...i,[e]:t})},{boldblocks_pattern_categories:h=[],boldblocks_pattern_description:E="",boldblocks_pattern_disabled_inserter:f=!1}=i,C=(0,n.__)("Pattern settings","content-blocks-builder"),S=(0,t.createElement)(t.Fragment,null,(0,t.createElement)(r.TextareaControl,{label:(0,n.__)("Pattern description","content-blocks-builder"),value:E,onChange:w("boldblocks_pattern_description"),rows:4}),(0,t.createElement)(r.ToggleControl,{checked:f,label:(0,n.__)("Don't show this pattern in the inserter","content-blocks-builder"),onChange:w("boldblocks_pattern_disabled_inserter")}),(0,t.createElement)(r.BaseControl,{label:(0,n.__)("Select pattern categories","content-blocks-builder")}),s.length?(0,t.createElement)(t.Fragment,null,s.filter((e=>{let{name:t}=e;return"boldblocks"!==t})).map((e=>{let{name:n,label:l}=e;return(0,t.createElement)(r.CheckboxControl,{key:n,label:l,checked:h.find((e=>{let{name:t}=e;return t===n})),onChange:e=>{let t=[];t=e?[...h,{name:n,label:l}]:h.filter((e=>{let{name:t}=e;return t!==n})),w("boldblocks_pattern_categories")(t)}})})),p&&(0,t.createElement)("p",null,(0,t.createElement)(r.ExternalLink,{href:(0,u.addQueryArgs)("edit.php?post_type=boldblocks_block&page=cbb-settings&tab=others")},(0,n.__)("Manage custom categories","content-blocks-builder")))):(0,t.createElement)(t.Fragment,null,o&&(0,t.createElement)(r.Spinner,null)),(0,g.applyFilters)("boldblocks.patternSettings.additionalSettings",null,{meta:i,setMeta:m}));return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(k.PluginDocumentSettingPanel,{name:"content-block-settings",title:C,initialOpen:!0},S),(0,t.createElement)(k.PluginSidebarMoreMenuItem,{target:"pattern-settings"},C),(0,t.createElement)(k.PluginSidebar,{name:"pattern-settings",title:C},(0,t.createElement)(r.PanelBody,null,S)))}})}();