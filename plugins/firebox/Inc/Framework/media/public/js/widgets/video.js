function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var FPF_Video_Init=function(){function e(){this.players=[],this.init()}var t=e.prototype;return t.init=function(){if(this.initEvents(),window.IntersectionObserver){var e=document.querySelectorAll(".fpf-widget.fpf-video:not(.done)");if(e){var o=this,t=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){var t=e.target;if(t.classList.contains("done"))return;if(t.querySelector(".fpf-video-embed-overlay")&&!t.classList.contains("hiddenOverlay")&&"true"!==t.querySelector(".fpf-video-embed").dataset.videoAutoplay)return;o.startVideo(t)}else{var i=e.target;if(!i.classList.contains("done"))return;if("false"===i.querySelector(".fpf-video-embed").dataset.videoAutopause)return;o.pauseVideo(i)}})},{rootMargin:"0px 0px 0px 0px"});e.forEach(function(e){t.observe(e)})}}},t.startVideo=function(e){switch(e.classList.add("done"),e.querySelector(".fpf-video-embed").dataset.videoType){case"youtube":this.players[e.id]=new FPF_YouTube_Video(e),this.players[e.id].init();break;case"vimeo":this.players[e.id]=new FPF_Vimeo_Video(e),this.players[e.id].init()}},t.pauseVideo=function(e){this.players[e.id].pause()},t.initEvents=function(){document.addEventListener("click",function(e){this.onCoverClose(e)}.bind(this))},t.onCoverClose=function(e){var t=e.target.closest(".fpf-video-embed-overlay");if(t){var i=t.closest(".fpf-widget.fpf-video");i.classList.add("hiddenOverlay"),this.startVideo(i)}},e}(),FPF_Video=function(){function e(e){this.video=e,this.videoElement=this.video.querySelector(".fpf-video-embed"),this.dataset=this.videoElement.dataset,this.overlay=this.video.querySelector(".fpf-video-embed-overlay"),this.player=null}return e.prototype.setAttributeBool=function(e,t){return e[t]&&"true"===e[t]?1:0},e}(),FPF_YouTube_Video=function(t){function e(e){return t.call(this,e)||this}_inheritsLoose(e,t);var i=e.prototype;return i.init=function(){this.maybeLoadYouTubeAPI()},i.pause=function(){this.player.pauseVideo()},i.youTubeApiLoaded=function(){var e;return void 0!==(null==(e=window.YT)?void 0:e.Player)},i.maybeLoadYouTubeAPI=function(){var i=this;if(!document.querySelector(".fpframework-youtube-api-script")&&!this.youTubeApiLoaded()){var e=document.createElement("script");e.className="fpframework-youtube-api-script",e.src="https://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}return new Promise(function(e,t){!function e(t){i.youTubeApiLoaded()?i.initYouTubeVideo():setTimeout(function(){return e(t)},350)}(e)})},i.initYouTubeVideo=function(){var t=this,e="https://www.youtube"+("true"===this.dataset.videoPrivacy?"-nocookie":"")+".com";this.player=new window.YT.Player(this.videoElement,{videoId:this.dataset.videoId,playerVars:{autoplay:0,controls:this.setAttributeBool(this.dataset,"videoControls"),showinfo:0,modestbranding:this.setAttributeBool(this.dataset,"videoBranding"),loop:this.setAttributeBool(this.dataset,"videoLoop"),playlist:this.dataset.videoId,fs:0,cc_load_policy:0,iv_load_policy:3,autohide:0,mute:this.setAttributeBool(this.dataset,"videoMute"),start:parseInt(this.dataset.videoStart,10)||void 0,end:parseInt(this.dataset.videoEnd,10)||void 0},host:e,events:{onReady:function(e){"true"!==t.video.dataset.readonly&&"true"!==t.video.dataset.disabled&&("true"===t.dataset.videoAutoplay&&e.target.playVideo(),"true"===t.dataset.videoAutoplay&&t.overlay?t.video.classList.add("hiddenOverlay"):"false"===t.dataset.videoAutoplay&&t.overlay&&(t.video.classList.add("hiddenOverlay"),t.player.playVideo()))},onStateChange:function(e){e.data===window.YT.PlayerState.PLAYING&&t.video.classList.add("hiddenOverlay")}}})},e}(FPF_Video),FPF_Vimeo_Video=function(t){function e(e){return t.call(this,e)||this}_inheritsLoose(e,t);var i=e.prototype;return i.init=function(){this.maybeLoadVimeoAPI()},i.pause=function(){this.player.pause()},i.vimeoApiLoaded=function(){var e;return void 0!==(null==(e=window.Vimeo)?void 0:e.Player)},i.maybeLoadVimeoAPI=function(){var i=this;if(!document.querySelector(".fpframework-vimeo-api-script")&&!this.vimeoApiLoaded()){var e=document.createElement("script");e.className="fpframework-vimeo-api-script",e.src="https://player.vimeo.com/api/player.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}return new Promise(function(e,t){!function e(t){i.vimeoApiLoaded()?i.initVimeoVideo():setTimeout(function(){return e(t)},350)}(e)})},i.initVimeoVideo=function(){var e=this;this.player=new window.Vimeo.Player(this.videoElement,{id:this.dataset.videoId,loop:this.setAttributeBool(this.dataset,"videoLoop"),autoplay:0,controls:this.setAttributeBool(this.dataset,"videoControls"),byline:!1,title:!1,autopause:!1,muted:this.setAttributeBool(this.dataset,"videoMute"),dnt:this.setAttributeBool(this.dataset,"videoPrivacy")}),this.dataset.videoStart&&this.player.setCurrentTime(this.dataset.videoStart),this.player.on("loaded",function(){"true"!==e.video.dataset.readonly&&"true"!==e.video.dataset.disabled&&("true"===e.dataset.videoAutoplay&&e.player.play(),"true"===e.dataset.videoAutoplay&&e.overlay?e.video.classList.add("hiddenOverlay"):"false"===e.dataset.videoAutoplay&&e.overlay&&(e.player.play(),e.player.on("play",function(){e.video.classList.add("hiddenOverlay")})))})},e}(FPF_Video);document.addEventListener("DOMContentLoaded",function(){new FPF_Video_Init});

