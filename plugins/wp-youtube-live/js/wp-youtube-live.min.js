function wpYTsendRequest(a){console.log("sending request..."),jQuery(".wp-youtube-live .spinner").show(),jQuery.ajax({method:"POST",url:wpYouTubeLiveSettings.ajaxUrl,data:a}).done(function(a){var b=JSON.parse(a);b.error?jQuery(".wp-youtube-live-error").append(b.error).show():!0===b.live&&void 0!==b.content&&(jQuery(".wp-youtube-live").replaceWith(b.content).addClass("live"),jQuery(".wp-youtube-live-error").hide(),window.dispatchEvent(wpYTevent),onYouTubeIframeAPIReady())}).always(function(){jQuery(".wp-youtube-live .spinner").hide()})}function wpYTcheckAgain(a){console.log("checking again..."),jQuery(".wp-youtube-live").hasClass("live")?(console.log("aborting check since video is live"),clearInterval(checkAgainTimer)):wpYTsendRequest(a)}function wpYTonPlayerReady(a){"true"==wpYTdata.autoplay&&a.target.playVideo()}function wpYTonPlayerStateChange(a){console.log("YouTube player: "+a.data),0==a.data&&(jQuery(".wp-youtube-live").removeClass("live").addClass("completed"),wpYTdata.completedVideoID=wpYTPlayer.getVideoData().video_id,wpYTcheckAgain(window.wpYTdata))}var wpYTdata=Object.assign(wpYouTubeLiveSettings,{action:"load_youtube_live",isAjax:!0}),wpYTevent=document.createEvent("Event");if(wpYTevent.initEvent("wpYouTubeLiveStarted",!0,!0),"true"==wpYouTubeLiveSettings.auto_refresh)var checkAgainTimer=setInterval(function(){wpYTdata.requestType="refresh",wpYTcheckAgain(wpYTdata)},1e3*wpYouTubeLiveSettings.refreshInterval);jQuery(document).ready(function(){wpYTsendRequest(wpYTdata),jQuery("body").on("click","button#check-again",function(a){a.preventDefault(),wpYTdata.requestType="refresh",wpYTcheckAgain(wpYTdata)})});