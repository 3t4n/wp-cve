/*
 Football Pool WordPress plugin

 @copyright Copyright (c) 2012-2022 Antoine Hurkmans
 @link https://wordpress.org/plugins/football-pool/
 @license https://plugins.svn.wordpress.org/football-pool/trunk/LICENSE
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,m){a.raw=m;return a};
jQuery(document).ready(function(){jQuery().chosen&&(jQuery(".fp-select.allow-single-deselect").not(".no-chosen").chosen({allow_single_deselect:!0,hide_results_on_select:!1,inherit_select_classes:!0,disable_search_threshold:10,no_results_text:FootballPoolAdmin.chosen_no_results_text}),jQuery(".fp-select").not(".allow-single-deselect").not(".no-chosen").chosen({disable_search_threshold:10,hide_results_on_select:!1,inherit_select_classes:!0,no_results_text:FootballPoolAdmin.chosen_no_results_text}));
jQuery("body.football-pool input.current-page").keydown(function(h){13===(h.keyCode?h.keyCode:h.which)&&jQuery('input[name="action"]').val("")});jQuery("div.matchtype input:checkbox").click(function(){var h=jQuery(this).attr("id").replace("matchtype-","");jQuery(this).is(":checked")?jQuery("div.matchtype-"+h+" input:checkbox").each(function(){jQuery(this).attr("checked","checked")}):jQuery("div.matchtype-"+h+" input:checkbox").each(function(){jQuery(this).removeAttr("checked")})});jQuery("div.row-actions span a").each(function(){jQuery(this).focus({el:jQuery(this)},
function(h){jQuery(window).keyup({el:h.data.el},function(k){9===(k.keyCode?k.keyCode:k.which)&&k.data.el.parent().parent().css({left:0})})});jQuery(this).blur({el:jQuery(this)},function(h){jQuery(window).keyup({el:h.data.el},function(k){9===(k.keyCode?k.keyCode:k.which)&&k.data.el.parent().parent().css({left:-9999})})})});var a=document.querySelector(".fp-admin .back-to-top");if(null!==a){var m=document.querySelector(".fp-admin .progress-bar");document.addEventListener("scroll",function(){m.style.width=
(document.documentElement||document.body).scrollTop/((document.documentElement||document.body).scrollHeight-(document.documentElement||document.body).clientHeight)*100+"%";100<(document.documentElement||document.body).scrollTop?a.classList.remove("hidden"):a.classList.add("hidden")});a.addEventListener("click",function(h){document.body.scrollIntoView({behavior:"smooth"});h.preventDefault()})}});
var FootballPoolAdmin=function(a){function m(){r||(n=!0,a.ajax({data:{action:"footballpool_calculate_scorehistory",fp_recalc_nonce:FootballPoolAjax.fp_recalc_nonce,calculation_step:"cancel_calculation",iteration:1},url:ajaxurl,global:!1,dataType:"json",method:"POST",success:function(b,c,d){console.log("football pool calculation cancelled")},error:function(b,c,d){console.log(d)}}))}function h(b){var c=b||0,d=[];0===c?(n=!1,t=(new Date).getTime(),a.ajax({data:{action:"footballpool_calculate_scorehistory",
fp_recalc_nonce:FootballPoolAjax.fp_recalc_nonce,iteration:0,force_calculation:v},url:ajaxurl,global:!1,dataType:"json",method:"POST",success:function(e,g,f){a.colorbox({html:e.colorbox_html,overlayClose:!1,escKey:!0,arrowKey:!1,close:FootballPoolAjax.colorbox_close,innerWidth:"500px",innerHeight:"285px"});a(document).bind("cbox_cleanup",function(){m()});a("#fp-calc-progress").show();d=a("#fp-calc-progressbar");0!==d.length&&(d.progressbar(),d.show(),a("#ajax-loader").show(),d.progressbar("option",
"max")!=e.total_iterations&&d.progressbar("option","max",e.total_iterations));a("#calculation-message").html(e.message);n||h(e)},error:function(e,g,f){p();e="";null!==g&&(e+="textStatus: "+g+". ");null!==f&&(e+="errorThrown: "+f+". ");console.log("Error message: "+e);alert("Error message:\n"+e)}})):(!1===q&&(q=setInterval(function(){var e=(new Date).getTime()-t;a("#time-elapsed").html(k(e/1E3))},1E3)),a.ajax({data:{action:"footballpool_calculate_scorehistory",force_calculation:c.force_calculation,
fp_recalc_nonce:c.fp_recalc_nonce,total_iterations:c.total_iterations,iteration:c.iteration,sub_iteration:c.sub_iteration,sub_iterations:c.sub_iterations,calculation_step:c.calculation_step,user:c.user,ranking:c.ranking,match:c.match,question:c.question,prev_total_score:c.prev_total_score,score_order:c.score_order,calc_start_time:c.calc_start_time,calculation_steps_cache:c.calculation_steps_cache},url:ajaxurl,global:!1,dataType:"json",method:"POST",success:function(e,g,f){null===e?u(FootballPoolAdmin.error_message+
" Error: response was null."):(r="undefined"!==typeof e.completed&&1===e.completed,g=(new Date).getTime()-t,g=(g/c.iteration*c.total_iterations-g)/1E3,0>g&&(g=0),1<c.iteration&&a("#time-left").html(k(g)),d=a("#fp-calc-progressbar"),0!==d.length&&(d.progressbar(),d.progressbar("option","max")!=e.total_iterations&&d.progressbar("option","max",e.total_iterations),d.progressbar("option","value",e.iteration)),a("#calculation-message").html(e.message),!1===e.error?r?(p(),a("#time-left").html(k(0)),a("#ajax-loader").hide()):
n||h(e):(p(),u(e.error)))},error:function(e,g,f){u(f)}}))}function k(b){b=Math.floor(b);var c=Math.floor(b/3600),d=Math.floor((b-3600*c)/60);b=b-3600*c-60*d;10>c&&(c="0"+c);10>d&&(d="0"+d);10>b&&(b="0"+b);return c+":"+d+":"+b}function p(){clearInterval(q);q=!1}function u(b){b=b||FootballPoolAjax.error_message;p();a("#ajax-loader").hide();a("#fp-calc-progress").show();a("#calculation-message").html('<span class="error">'+b+"</span>")}var l=[],t,q=!1,v=0,r=!1,n=!1;return{calculate:h,force_calculation:function(){v=
1;h()},bulk_action_warning:function(b){var c=a("#"+b);return c&&0!==c.prop("selectedIndex")?(b=a("#"+b+" option").filter(":selected").attr("bulk-msg"),""!==b&&void 0!==b?confirm(b):!0):!1},toggle_points:function(b){a("#"+b+"_points").toggle()},set_input_param:function(b,c,d){if(a.isArray(c)&&1<=c.length)a.each(c,function(g,f){""!==f&&(a.isArray(l[f])||(l[f]=[]),l[f][b]=a(f).attr(b),e=a.isArray(d)?d[g]:d,a(f).attr(b,e))});else if(""!==c){l[c]=[b,a(c).attr(b)];var e=a.isArray(d)?d[0]:d;a(c).attr(b,
e)}},restore_input_param:function(b,c){var d="";a.isArray(c)&&1<=c.length?a.each(c,function(e,g){d=l[g][b];a(g).attr(b,d)}):""!==c&&(d=l[c][b],a(c).attr(b,d))},disable_inputs:function(b,c){var d=c||"",e=!1;""!==d&&(e=a("#"+d).is(":checked"));a.isArray(b)&&1<=b.length?a.each(b,function(g,f){""!==f&&(""!==d?e?a(f).attr("disabled","disabled"):a(f).removeAttr("disabled"):a(f).attr("disabled","disabled"))}):""!==b&&(""!==d?e?a(b).attr("disabled","disabled"):a(b).removeAttr("disabled"):a(b).attr("disabled",
"disabled"))},toggle_linked_options:function(b,c,d){var e=d?d:!1;a.isArray(b)&&1<=b.length?a.each(b,function(g,f){""!==f&&(!0===e?a(f).toggle():a(f).toggle(!0))}):""!==b&&(!0===e?a(b).toggle():a(b).toggle(!0));a.isArray(c)&&1<=c.length?a.each(c,function(g,f){""!==f&&a(f).toggle(!1)}):""!==c&&a(c).toggle(!1)}}}(jQuery);jQuery(document).ready(function(){jQuery("input[title].with-hint").inputHints()});
jQuery.fn.inputHints=function(){jQuery(this).each(function(a){""===jQuery(this).val()&&jQuery(this).val(jQuery(this).attr("title")).addClass("hint")});return jQuery(this).focus(function(){jQuery(this).val()==jQuery(this).attr("title")&&jQuery(this).val("").removeClass("hint")}).blur(function(){""==jQuery(this).val()&&jQuery(this).val(jQuery(this).attr("title")).addClass("hint")})};
