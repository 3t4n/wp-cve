var quform=function(e,t,i,n){"use strict";var o=e.core,a=o.cache,r=t(document),s=!1,d=!1,p={init:function(){"#add"===window.location.hash&&p.showAddNewPopup(),a.get(".qfb-tabs-nav-zapier-add-integration").click(function(e){e.preventDefault(),p.showAddNewPopup()}),a.get("#qfb-zapier-add-new-integration-popup").find(".qfb-popup-close-button").click(p.hideAddNewPopup),a.get("#qfb-zapier-add-new-integration-submit").click(p.addNew),a.get("#qfb-zapier-add-new-integration-name").keyup(function(e){13===e.keyCode&&a.get("#qfb-zapier-add-new-integration-submit").click()}),a.get("#the-list").find(".column-shortcode input").on("click",function(){t(this).focus().select()}),a.get("#the-list").find(".delete a").click(function(){return confirm(i.singleConfirmDelete)}),t("#doaction").click(function(){return 0<t('input[name="ids[]"]:checked').length&&("delete"===t("#bulk-action-selector-top").val()?confirm(i.pluralConfirmDelete):void 0)}),t("#doaction2").click(function(){return 0<t('input[name="ids[]"]:checked').length&&("delete"===t("#bulk-action-selector-bottom").val()?confirm(i.pluralConfirmDelete):void 0)}),a.get("#qfb-zapier-show-integration-table-settings").click(function(){p.showTableSettings()}),a.get("#qfb-zapier-integrations-table-settings").find(".qfb-popup-save-button").click(function(){p.saveTableSettings()}),a.get("#qfb-zapier-integrations-table-settings").find(".qfb-popup-close-button").click(function(){p.hideTableSettings()}),a.get("#qfb-zapier-integrations-table-settings").find(".qfb-popup-overlay").click(function(){p.hideTableSettings()}),a.get("#qfb_zapier_integrations_per_page").on("keyup",function(e){e.keyCode&&13===e.keyCode&&p.saveTableSettings()})},showAddNewPopup:function(){r.on("keydown.quform-close-popup",function(e){27===e.keyCode&&p.hideAddNewPopup()}),a.get("body").css("overflow","hidden"),a.get("#qfb-zapier-add-new-integration-popup").show(),a.get("#qfb-zapier-add-new-integration-name").focus()},hideAddNewPopup:function(){r.off("keydown.quform-close-popup"),a.get("#qfb-zapier-add-new-integration-popup").hide(),a.get("body").css("overflow","")},addNew:function(){s||(s=!0,a.get("#qfb-zapier-add-new-integration-loading").css({opacity:1}),t.ajax({type:"POST",url:n.ajaxUrl,data:{action:"quform_zapier_add_integration",_ajax_nonce:i.addNewNonce,name:a.get("#qfb-zapier-add-new-integration-name").val()},dataType:"json"}).done(function(e){"success"!==(e=o.sanitizeResponse(e)).type?(a.get("#qfb-zapier-add-new-integration-popup").find(".qfb-validation-error").remove(),s=!1,"error"!==e.type&&"invalid"!==e.type||p.onAddFail(e)):window.location=e.url}).fail(function(){a.get("#qfb-zapier-add-new-integration-popup").find(".qfb-validation-error").remove(),s=!1,p.onAddFail({message:n.ajaxError})}).always(function(){a.get("#qfb-zapier-add-new-integration-loading").css({opacity:0})}))},onAddFail:function(e){var n;o.isNonEmptyString(e.message)&&o.showFixedMessage(i.errorAdding+"<br>"+e.message,"error"),e.errors&&t.each(e.errors,function(e,t){var i=a.get("#"+e).closest(o.settingInputWrap);n=n||i,o.addValidationError(i,t)}),n&&o.scrollTo(n,a.get("#qfb-zapier-add-new-integration-popup-inner"))},showTableSettings:function(){a.get("body").css("overflow","hidden"),a.get("#qfb-zapier-integrations-table-settings").show()},hideTableSettings:function(){a.get("body").css("overflow",""),a.get("#qfb-zapier-integrations-table-settings").hide(),a.get("#qfb-zapier-integrations-table-settings").find(".qfb-submission-error").remove(),a.get("#qfb-zapier-integrations-table-settings").find(".qfb-validation-error").remove()},saveTableSettings:function(){d||(d=!0,a.get("#qfb-zapier-integrations-table-settings").find(".qfb-submission-error").remove(),a.get("#qfb-zapier-integrations-table-settings").find(".qfb-validation-error").remove(),t.ajax({url:n.ajaxUrl,type:"POST",dataType:"json",data:{action:"quform_zapier_save_integrations_table_settings",_ajax_nonce:i.saveTableSettingsNonce,per_page:a.get("#qfb_zapier_integrations_per_page").val()}}).done(function(e){var n;e=o.sanitizeResponse(e),d=!1,"success"===e.type?window.location.reload():"error"!==e.type&&"invalid"!==e.type||(n=[],e.message&&n.push(o.addSubmissionError(a.get("#qfb-zapier-integrations-table-settings").find(".qfb-settings"),e.message)),e.errors&&t.each(e.errors,function(e,t){var i=a.get("#"+e).closest(o.settingInputWrap);o.addValidationError(i,t),n.push(i)}),n.length&&o.scrollTo(n[0],a.get("#qfb-zapier-integrations-table-settings-inner")))}).fail(function(){o.scrollTo(o.addSubmissionError(a.get("#qfb-zapier-integrations-table-settings").find(".qfb-settings"),n.ajaxError),a.get("#qfb-zapier-integrations-table-settings-inner")),d=!1}))}};return t(p.init),e.zapier=e.zapier||{},e.zapier.list=p,e}(quform,jQuery,quformZapierIntegrationsListL10n,quformCoreL10n);