if("undefined"!=typeof ai_selection_block){function u(a,b){for(;b;){if((b.nodeName||b.tagName).toLowerCase()===a.toLowerCase())return b;b=b.parentNode}return null}function l(a){var b=a.nodeName.toLowerCase();a.hasAttribute("id")&&""!=a.id&&(b=b+"#"+a.id);a.className&&(classes=a.className.replace(/ai-selected|ai-highlighted/g,"").trim())&&(b=b+"."+classes.replace(/\s{2,}/g," ").trim().replace(/ /g,"."));return b}function m(a){for(var b=[];null!=a.parentNode;){for(var c=0,d=0,n=0,f=0;f<a.parentNode.childNodes.length;f++){var g=
a.parentNode.childNodes[f];g instanceof HTMLElement&&(g.nodeName==a.nodeName&&d++,g===a&&(n=c),c++)}a.hasAttribute("id")&&""!=a.id?b.unshift(a.nodeName.toLowerCase()+"#"+a.id):1<d?b.unshift(a.nodeName.toLowerCase()+":nth-child("+(n+1)+")"):b.unshift(a.nodeName.toLowerCase());a=a.parentNode}return b.slice(1)}function v(a){var b=[],c=!1;a.reverse().forEach(function(d){c||b.unshift(d);c=-1!=d.indexOf("#")});return b}function h(a){a=a.trim();","==a.slice(0,1)&&(a=a.slice(1,a.length));","==a.slice(-1)&&
(a=a.slice(0,a.length-1));return a.trim()}function e(a){return'<kbd class="ai-html-element">'+a+"</kbd>"}function p(a){var b=[];a.forEach(function(c){b.push(e(c))});return b}function q(){document.querySelectorAll(".ai-html-element").forEach(function(a){a.addEventListener("click",b=>{b=a.innerText;document.getElementById("ai-selector-element").innerHTML=e(b);document.querySelector(".ai-selected").classList.remove("ai-selected");document.querySelector(b).classList.add("ai-selected");document.querySelectorAll("#ai-selector-data "+
b).forEach(function(c){c.classList.remove("ai-selected")});document.getElementById("ai-selector").value=b})})}function r(a){if(null!=window.opener&&!window.opener.closed){var b=window.opener.document,c=document.getElementById("ai-selector").value;a&&(a=b.querySelector(ai_settings_input).value.trim(),a=h(a),""!=a&&(a+=", "),c=a+c);b.querySelector(ai_settings_input).value=c}}function t(){ctrl_pressed?(document.getElementById("ai-use-button").style.display="none",document.getElementById("ai-add-button").style.display=
"block"):(document.getElementById("ai-use-button").style.display="block",document.getElementById("ai-add-button").style.display="none")}var ctrl_pressed=!1,selected_element=null,current_element=null;document.onclick=function(a){a=a||event;var b=u("a",a.target||a.srcElement);if(b&&(a.preventDefault(),!ctrl_pressed)){a={html_element_selection:ai_selection_block,selector:document.getElementById("ai-selector").value,input:ai_settings_input};var c=document.createElement("form");c.setAttribute("method",
"post");c.setAttribute("action",b.href);c.setAttribute("target","_self");for(var d in a)a.hasOwnProperty(d)&&(b=document.createElement("input"),b.type="hidden",b.name=d,b.value=encodeURI(a[d]),c.appendChild(b));document.body.appendChild(c);c.submit();document.body.removeChild(c)}};document.addEventListener("keydown",a=>{"17"==a.which&&(ctrl_pressed=!0,t(),null!=current_element&&"A"==current_element.tagName&&(a=new Event("mouseover",{bubbles:!0,cancelable:!0}),current_element.dispatchEvent(a)))});
document.addEventListener("keyup",a=>{ctrl_pressed=!1;t();null!=current_element&&"A"==current_element.tagName&&(a=new Event("mouseout",{bubbles:!0,cancelable:!0}),current_element.dispatchEvent(a))});document.querySelector("body").style.userSelect="none";document.querySelector("body").style.marginTop="140px";var selection_ui='<section id="ai-selector-data"><table>  <tbody>    <tr>      <td class="data-name">'+ai_front.element+'</td>      <td class="data-value"><section id="ai-selector-element"></section></td>      <td><button type="button" id="ai-cancel-button" style="min-width: 110px;" title="'+
ai_front.cancel_element_selection+'"> '+ai_front.cancel+" </button></td>    </tr>    <tr>      <td>"+ai_front.path+'</td>      <td><section id="ai-selector-path"></section></td>      <td><button type="button" id="ai-parent-button" style="min-width: 110px;" title="'+ai_front.select_parent_element+'"> '+ai_front.parent+" </button></td>    </tr>    <tr>      <td>"+ai_front.selector+'</td>      <td style="width: 100%;"><input id="ai-selector" type="text" value="" maxlength="500" title="'+ai_front.css_selector+
'" /></td>      <td><button type="button" id="ai-use-button" style="min-width: 110px;" title="'+ai_front.use_current_selector+'"> '+ai_front.use+' </button>          <button type="button" id="ai-add-button" style="min-width: 110px; display: none;" title="'+ai_front.add_current_selector+'"> '+ai_front.add+" </button></td>    </tr>  </tbody></table></section>",range=document.createRange(),fragment_ok=!0;try{var fragment=range.createContextualFragment(selection_ui)}catch(a){fragment_ok=!1,console.error("AI SELECTION",
"range.createContextualFragment ERROR:",a)}fragment_ok&&document.querySelector("body").prepend(fragment);function k(a){var b=a.target,c=m(b);if(-1==c.join(" > ").indexOf("ai-selector-data")&&!b.classList.contains("ai-html-element"))switch(a.type){case "click":if("A"!=b.tagName||ctrl_pressed)selected_element=b,document.getElementById("ai-selector-element").innerHTML=e(l(b)),document.getElementById("ai-selector-path").innerHTML=p(c).join(" > "),q(),document.querySelectorAll(".ai-highlighted").forEach(function(d){d.classList.remove("ai-highlighted")}),
document.querySelectorAll(".ai-selected").forEach(function(d){d.classList.remove("ai-selected")}),b.classList.add("ai-selected"),document.getElementById("ai-selector").value=v(c).join(" > ");break;case "mouseover":current_element=b;("A"!=b.tagName||ctrl_pressed)&&b.classList.add("ai-highlighted");break;case "mouseout":b.classList.remove("ai-highlighted")}}document.querySelector("body").addEventListener("mouseover",a=>{k(a)});document.querySelector("body").addEventListener("mouseout",a=>{k(a)});document.querySelector("body").addEventListener("click",
a=>{k(a)});document.getElementById("ai-selector").addEventListener("input",a=>{document.querySelectorAll(".ai-highlighted").forEach(function(c){c.classList.remove("ai-highlighted")});document.querySelectorAll(".ai-selected").forEach(function(c){c.classList.remove("ai-selected")});a=h(document.getElementById("ai-selector").value);if(""!=a){try{document.querySelectorAll(a).forEach(function(c){c.classList.add("ai-selected")})}catch(c){return}var b=a.split(",");b.forEach(function(c){document.querySelectorAll("#ai-selector-data "+
c).forEach(function(d){d.classList.remove("ai-selected")})});1==b.length&&""!=a&&1==document.querySelectorAll(a).length?(selected_element=document.querySelector(b[0]),document.getElementById("ai-selector-element").innerHTML=e(l(selected_element)),document.getElementById("ai-selector-path").innerHTML=p(m(selected_element)).join(" > "),q()):(selected_element=null,document.getElementById("ai-selector-element").innerText="",document.getElementById("ai-selector-path").innerText="")}});window.onkeydown=
function(a){27===a.keyCode&&window.close()};(function(){if(null!=window.opener&&!window.opener.closed){document.getElementById("ai-selector").value=h(ai_settings_selector);var a=new Event("input",{bubbles:!0,cancelable:!0});document.getElementById("ai-selector").dispatchEvent(a)}})();document.getElementById("ai-cancel-button").addEventListener("click",a=>{window.close()});document.getElementById("ai-parent-button").addEventListener("click",a=>{"BODY"!=selected_element.tagName&&(selected_element=selected_element.parentElement,
a=new Event("click",{bubbles:!0,cancelable:!0}),selected_element.dispatchEvent(a))});document.getElementById("ai-use-button").addEventListener("click",a=>{r(!1);window.close()});document.getElementById("ai-add-button").addEventListener("click",a=>{r(!0);window.close()})};
