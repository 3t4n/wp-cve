jQuery(document).ready(function(f){f(document).on("click","#zrdn-reset-layout",function(){localStorage.removeItem("zrdnDashboardDefaultsSet");window.localStorage.removeItem("zrdn_layout");window.localStorage.removeItem("zrdn_toggle_data_id_undefined");f(".zrdn-item").each(function(){var m=f(this).data("id");localStorage.setItem("zrdn_toggle_data_id_"+m,"checked")});localStorage.removeItem("zrdnFormValues");location.reload()});var a;e();function e(){a=new Muuri(".zrdn-grid",{dragEnabled:true,dragStartPredicate:function(n,o){return o.target.className==="zrdn-grid-title"},dragSortHeuristics:{sortInterval:50,minDragDistance:10,minBounceBackAngle:1},dragPlaceholder:{enabled:false,duration:400,createElement:function(n){return n.getElement().cloneNode(true)}},dragReleaseDuration:400,dragReleaseEasing:"ease",layoutOnInit:true}).on("move",function(){h(a)});var m=window.localStorage.getItem("zrdn_layout");if(m){l(a,m)}else{a.layout(true)}h(a)}function d(n){var m=n.getItems().map(function(o){return o.getElement().getAttribute("data-id")});return JSON.stringify(m)}function h(m){var n=d(m);window.localStorage.setItem("zrdn_layout",n)}function l(n,u){var q=JSON.parse(u);var s=n.getItems();f(".zrdn-item").each(function(){var w=f(this).data("id");if(typeof w==="undefined"){return}if(!q.includes(w.toString())){q.push(w.toString())}if(localStorage.getItem("zrdn_toggle_data_id_"+w)===null){localStorage.setItem("zrdn_toggle_data_id_"+w,"checked")}if(localStorage.getItem("zrdn_toggle_data_id_"+w)!=="checked"){f(this).removeClass("muuri-active")}else{f(this).addClass("muuri-active")}});var r=s.map(function(w){return w.getElement().getAttribute("data-id")});var v=[];var t;var m;for(var p=0;p<q.length;p++){t=q[p];m=r.indexOf(t);if(m>-1){v.push(s[m])}}try{n.sort(v,{layout:"instant"});n.filter(".muuri-active")}catch(o){console.log("error with grid, clear");localStorage.removeItem("zrdn_layout");localStorage.removeItem("layout")}}f(".zrdn-item").each(function(){var m=f(this).data("id");if(!localStorage.getItem("zrdn_toggle_data_id_"+m)){localStorage.setItem("zrdn_toggle_data_id_"+m,"checked")}f("#zrdn_toggle_data_id_"+m).change(function(){if(document.getElementById("zrdn_toggle_data_id_"+m).checked){localStorage.setItem("zrdn_toggle_data_id_"+m,"checked")}else{localStorage.setItem("zrdn_toggle_data_id_"+m,"unchecked")}var n=window.localStorage.getItem("zrdn_layout");if(n){l(a,n)}else{a.layout(true)}})});var c=window.location.hash.substr(1).replace("#top","");f("ul.tabs li").click(function(){var m=f(this).attr("data-tab");if(m==="dashboard"){f("#zrdn-show-toggles").show()}else{f("#zrdn-show-toggles").hide()}f("ul.tabs li").removeClass("current");f(".tab-content").removeClass("current");f(this).addClass("current");f("#"+m).addClass("current")});var b=f(".tab-"+c).attr("href");if(typeof b!=="undefined"){if(b.indexOf("#"+c)!==-1){f(".tab-"+c)[0].click();window.location.href=b}}var j=JSON.parse(localStorage.getItem("zrdnFormValues"))||{};var g=f("#zrdn-toggle-dashboard :checkbox");if(localStorage.getItem("zrdnDashboardDefaultsSet")===null){g.each(function(){j[this.id]="checked";f("#"+this.id).prop("checked","checked")});localStorage.setItem("zrdnFormValues",JSON.stringify(j));localStorage.setItem("zrdnDashboardDefaultsSet","set")}g.on("change",function(){k()});f.each(j,function(m,n){f("#"+m).prop("checked",n)});var i=false;g.each(function(){if(f(this).is(":checked")){i=true}});if(!i){console.log("not one checked, reset");f("#zrdn-reset-layout").click()}f("#zrdn-toggle-dashboard").hide();f("#zrdn-show-toggles").click(function(){if(f("#zrdn-toggle-dashboard").is(":visible")){f("#zrdn-toggle-dashboard").slideUp();f("#zrdn-toggle-arrows").attr("class","dashicons dashicons-arrow-down-alt2")}else{f("#zrdn-toggle-dashboard").slideDown();f("#zrdn-toggle-arrows").attr("class","dashicons dashicons-arrow-up-alt2")}});function k(){g.each(function(){j[this.id]=this.checked});localStorage.setItem("zrdnFormValues",JSON.stringify(j))}});