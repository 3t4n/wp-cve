(function(){tinymce.create("tinymce.plugins.zrdnEditRecipeGrid",{init:function(d,b){var c=this;c.url=b;d.onBeforeSetContent.add(function(f,g){g.content=c._convert_codes_to_imgs(g.content)});d.onExecCommand.add(function(f,g){if(g==="mceInsertContent"){var h=tinyMCE.activeEditor.selection.getBookmark();tinyMCE.activeEditor.setContent(c._convert_codes_to_imgs(tinyMCE.activeEditor.getContent()));tinyMCE.activeEditor.selection.moveToBookmark(h)}});d.onPostProcess.add(function(f,g){if(g.get){g.content=c._convert_imgs_to_codes(g.content)}});var e=jQuery("body");var a={overflow:e.css("overflow"),position:e.css("position")};d.addButton("zrdn_buttons_grid",{title:"Zip Recipes Grid",icon:"zip-icon dashicons-screenoptions",onclick:function(){var f=d.dom.select("img.zrdn-grid")[0];if(f){d.selection.select(f);d.selection.collapse()}d.insertContent("[zrdn-grid]")}})},_convert_codes_to_imgs:function(a){return a.replace(/\[zrdn-grid\]/g,function(d,c){return'<img id="zrdn-grid" class="zrdn-grid" src="'+plugindir+'/plugins/RecipeGrid2/images/iframe-placeholder.png" alt="" />'})},_convert_imgs_to_codes:function(a){return a.replace(/\<img[^>]*?\sid="zrdn-grid.*?\>/g,function(d,c){return"[zrdn-grid]"})},getInfo:function(){return{longname:"Zip Recipes Grid",author:"RogierLankhorst",authorurl:"https://www.ziprecipes.net/",infourl:"https://www.ziprecipes.net/",version:"6.0"}}});tinymce.PluginManager.add("zrdn_plugin_grid",tinymce.plugins.zrdnEditRecipeGrid)})();