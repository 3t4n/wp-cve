"function"!=typeof Object.create&&(Object.create=function(obj){function F(){}return F.prototype=obj,new F}),function($,window,document){var EZP={init:function(options,elem){var self=this;if(self.elem=elem,self.$elem=$(elem),self.options=$.extend({},$.fn.ezPlus.options,self.responsiveConfig(options||{})),self.imageSrc=self.$elem.attr("data-"+self.options.attrImageZoomSrc)?self.$elem.attr("data-"+self.options.attrImageZoomSrc):self.$elem.attr("src"),self.options.enabled){self.options.tint&&(self.options.lensColour="transparent",self.options.lensOpacity="1"),"inner"===self.options.zoomType&&(self.options.showLens=!1),"lens"===self.options.zoomType&&(self.options.zoomWindowWidth=0),-1===self.options.zoomId&&(self.options.zoomId=generateUUID()),self.$elem.parent().removeAttr("title").removeAttr("alt"),self.zoomImage=self.imageSrc,self.refresh(1);var galleryEvent=self.options.galleryEvent+".ezpspace";galleryEvent+=self.options.touchEnabled?" touchend.ezpspace":"",self.$galleries=$(self.options.gallery?"#"+self.options.gallery:self.options.gallerySelector),self.$galleries.on(galleryEvent,self.options.galleryItem,(function(e){if(self.options.galleryActiveClass&&($(self.options.galleryItem,self.$galleries).removeClass(self.options.galleryActiveClass),$(this).addClass(self.options.galleryActiveClass)),"A"===this.tagName&&e.preventDefault(),$(this).data(self.options.attrImageZoomSrc)?self.zoomImagePre=$(this).data(self.options.attrImageZoomSrc):self.zoomImagePre=$(this).data("image"),self.swaptheimage($(this).data("image"),self.zoomImagePre),"A"===this.tagName)return!1}))}function generateUUID(){var d=(new Date).getTime(),uuid;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"===c?r:3&r|8).toString(16)}))}},refresh:function(length){var self=this;setTimeout((function(){self.fetch(self.imageSrc,self.$elem,self.options.minZoomLevel)}),length||self.options.refresh)},fetch:function(imgsrc,element,minZoom){var self=this,newImg=new Image;newImg.onload=function(){newImg.width/element.width()<=minZoom?self.largeWidth=element.width()*minZoom:self.largeWidth=newImg.width,newImg.height/element.height()<=minZoom?self.largeHeight=element.height()*minZoom:self.largeHeight=newImg.height,self.startZoom(),self.currentImage=self.imageSrc,self.options.onZoomedImageLoaded(self.$elem)},self.setImageSource(newImg,imgsrc)},setImageSource:function(image,src){image.src=src},startZoom:function(){var self=this;if(self.nzWidth=self.$elem.width(),self.nzHeight=self.$elem.height(),self.isWindowActive=!1,self.isLensActive=!1,self.isTintActive=!1,self.overWindow=!1,self.options.imageCrossfade){var elementZoomWrapper=$('<div class="zoomWrapper"/>').css({height:self.nzHeight,width:self.nzWidth});self.$elem.parent().hasClass("zoomWrapper")&&self.$elem.unwrap(),self.zoomWrap=self.$elem.wrap(elementZoomWrapper),self.$elem.css({position:"absolute"})}function getWindowZoomStyle(){return{display:"none",position:"absolute",height:self.options.zoomWindowHeight,width:self.options.zoomWindowWidth,border:self.options.borderSize+"px solid "+self.options.borderColour,backgroundSize:self.largeWidth/self.currentZoomLevel+"px "+self.largeHeight/self.currentZoomLevel+"px",backgroundPosition:"0px 0px",backgroundRepeat:"no-repeat",backgroundColor:""+self.options.zoomWindowBgColour,overflow:"hidden",zIndex:100}}function getInnerZoomStyle(){var borderWidth=self.$elem.css("border-left-width");return self.options.scrollZoom&&(self.zoomLens=$('<div class="zoomLens"/>')),{display:"none",position:"absolute",height:self.nzHeight,width:self.nzWidth,marginTop:borderWidth,marginLeft:borderWidth,border:self.options.borderSize+"px solid "+self.options.borderColour,backgroundPosition:"0px 0px",backgroundRepeat:"no-repeat",cursor:self.options.cursor,overflow:"hidden",zIndex:self.options.zIndex}}function getWindowLensStyle(){return self.nzHeight<self.options.zoomWindowHeight/self.heightRatio?self.lensHeight=self.nzHeight:self.lensHeight=self.options.zoomWindowHeight/self.heightRatio,self.largeWidth<self.options.zoomWindowWidth?self.lensWidth=self.nzWidth:self.lensWidth=self.options.zoomWindowWidth/self.widthRatio,{display:"none",position:"absolute",height:self.lensHeight,width:self.lensWidth,border:self.options.lensBorderSize+"px solid "+self.options.lensBorderColour,backgroundPosition:"0px 0px",backgroundRepeat:"no-repeat",backgroundColor:self.options.lensColour,opacity:self.options.lensOpacity,cursor:self.options.cursor,zIndex:999,overflow:"hidden"}}self.zoomLock=1,self.scrollingLock=!1,self.changeBgSize=!1,self.currentZoomLevel=self.options.zoomLevel,self.updateOffset(self),self.widthRatio=self.largeWidth/self.currentZoomLevel/self.nzWidth,self.heightRatio=self.largeHeight/self.currentZoomLevel/self.nzHeight,"window"===self.options.zoomType&&(self.zoomWindowStyle=getWindowZoomStyle()),"inner"===self.options.zoomType&&(self.zoomWindowStyle=getInnerZoomStyle()),"window"===self.options.zoomType&&(self.lensStyle=getWindowLensStyle()),self.tintStyle={display:"block",position:"absolute",height:self.nzHeight,width:self.nzWidth,backgroundColor:self.options.tintColour,opacity:0},self.lensRound={},"lens"===self.options.zoomType&&(self.lensStyle={display:"none",position:"absolute",float:"left",height:self.options.lensSize,width:self.options.lensSize,border:self.options.borderSize+"px solid "+self.options.borderColour,backgroundPosition:"0px 0px",backgroundRepeat:"no-repeat",backgroundColor:self.options.lensColour,cursor:self.options.cursor}),"round"===self.options.lensShape&&(self.lensRound={borderRadius:self.options.lensSize/2+self.options.borderSize}),self.zoomContainer=$('<div class="'+self.options.container+'" uuid="'+self.options.zoomId+'"/>'),self.zoomContainer.css({position:"absolute",top:self.nzOffset.top,left:self.nzOffset.left,height:self.nzHeight,width:self.nzWidth,zIndex:self.options.zIndex}),self.$elem.attr("id")&&self.zoomContainer.attr("id",self.$elem.attr("id")+"-"+self.options.container),$("."+self.options.container).remove(),$(self.options.zoomContainerAppendTo).append(self.zoomContainer),self.options.containLensZoom&&"lens"===self.options.zoomType&&self.zoomContainer.css("overflow","hidden"),"inner"!==self.options.zoomType&&(self.zoomLens=$('<div class="zoomLens"/>').css($.extend({},self.lensStyle,self.lensRound)).appendTo(self.zoomContainer).click((function(){self.$elem.trigger("click")})),self.options.tint&&(self.tintContainer=$('<div class="tintContainer"/>'),self.zoomTint=$('<div class="zoomTint"/>').css(self.tintStyle),self.zoomLens.wrap(self.tintContainer),self.zoomTintcss=self.zoomLens.after(self.zoomTint),self.zoomTintImage=$('<img src="'+self.$elem.attr("src")+'">').css({position:"absolute",top:0,left:0,height:self.nzHeight,width:self.nzWidth,maxWidth:"none"}).appendTo(self.zoomLens).click((function(){self.$elem.trigger("click")}))));var targetZoomContainer=isNaN(self.options.zoomWindowPosition)?"body":self.zoomContainer;function mouseMoveZoomHandler(e){self.lastX===e.clientX&&self.lastY===e.clientY||(self.setPosition(e),self.currentLoc=e),self.lastX=e.clientX,self.lastY=e.clientY}self.zoomWindow=$('<div class="zoomWindow"/>').css($.extend({zIndex:999,top:self.windowOffsetTop,left:self.windowOffsetLeft},self.zoomWindowStyle)).appendTo(targetZoomContainer).click((function(){self.$elem.trigger("click")})),self.zoomWindowContainer=$('<div class="zoomWindowContainer" />').css({width:self.options.zoomWindowWidth}),self.zoomWindow.wrap(self.zoomWindowContainer),"lens"===self.options.zoomType&&(self.zoomContainer.css("display","none"),self.zoomLens.css({backgroundImage:'url("'+self.imageSrc+'")'})),"window"===self.options.zoomType&&self.zoomWindow.css({backgroundImage:'url("'+self.imageSrc+'")'}),"inner"===self.options.zoomType&&self.zoomWindow.css({backgroundImage:'url("'+self.imageSrc+'")'}),self.options.touchEnabled&&(self.$elem.on("touchmove.ezpspace",(function(e){e.preventDefault();var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];self.setPosition(touch)})),self.zoomContainer.on("touchmove.ezpspace",(function(e){self.setElements("show"),e.preventDefault();var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];self.setPosition(touch)})),self.zoomContainer.add(self.$elem).on("touchend.ezpspace",(function(e){self.showHideWindow("hide"),self.options.showLens&&self.showHideLens("hide"),self.options.tint&&"inner"!==self.options.zoomType&&self.showHideTint("hide")})),self.options.showLens&&(self.zoomLens.on("touchmove.ezpspace",(function(e){e.preventDefault();var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];self.setPosition(touch)})),self.zoomLens.on("touchend.ezpspace",(function(e){self.showHideWindow("hide"),self.options.showLens&&self.showHideLens("hide"),self.options.tint&&"inner"!==self.options.zoomType&&self.showHideTint("hide")})))),self.zoomContainer.on("click.ezpspace touchstart.ezpspace",self.options.onImageClick),self.zoomContainer.add(self.$elem).on("mousemove.ezpspace",(function(e){!1===self.overWindow&&self.setElements("show"),mouseMoveZoomHandler(e)}));var elementToTrack=null;"inner"!==self.options.zoomType&&(elementToTrack=self.zoomLens),self.options.tint&&"inner"!==self.options.zoomType&&(elementToTrack=self.zoomTint),"inner"===self.options.zoomType&&(elementToTrack=self.zoomWindow),elementToTrack&&elementToTrack.on("mousemove.ezpspace",mouseMoveZoomHandler),self.zoomContainer.add(self.$elem).hover((function(){!1===self.overWindow&&self.setElements("show")}),(function(){self.scrollLock||(self.setElements("hide"),self.options.onDestroy(self.$elem))})),"inner"!==self.options.zoomType&&self.zoomWindow.hover((function(){self.overWindow=!0,self.setElements("hide")}),(function(){self.overWindow=!1})),self.options.minZoomLevel?self.minZoomLevel=self.options.minZoomLevel:self.minZoomLevel=2*self.options.scrollZoomIncrement,self.options.scrollZoom&&self.zoomContainer.add(self.$elem).on("wheel DOMMouseScroll MozMousePixelScroll",(function(e){self.scrollLock=!0,clearTimeout($.data(this,"timer")),$.data(this,"timer",setTimeout((function(){self.scrollLock=!1}),250));var theEvent=e.originalEvent.deltaY||-1*e.originalEvent.detail,nextZoomLevel;return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),0!==theEvent&&(theEvent/120>0?(nextZoomLevel=parseFloat(self.currentZoomLevel)-self.options.scrollZoomIncrement)>=parseFloat(self.minZoomLevel)&&self.changeZoomLevel(nextZoomLevel):(self.fullheight||self.fullwidth)&&self.options.mantainZoomAspectRatio||(nextZoomLevel=parseFloat(self.currentZoomLevel)+self.options.scrollZoomIncrement,self.options.maxZoomLevel?nextZoomLevel<=self.options.maxZoomLevel&&self.changeZoomLevel(nextZoomLevel):self.changeZoomLevel(nextZoomLevel)),!1)}))},destroy:function(){var self=this;this.$elem.off(".ezpspace"),this.$galleries.off(".ezpspace"),$(this.zoomContainer).remove(),this.options.loadingIcon&&this.spinner&&this.spinner.length&&(this.spinner.remove(),delete this.spinner)},getIdentifier:function(){var self=this;return this.options.zoomId},setElements:function(type){var self=this;if(!this.options.zoomEnabled)return!1;"show"===type&&this.isWindowSet&&("inner"===this.options.zoomType&&this.showHideWindow("show"),"window"===this.options.zoomType&&this.showHideWindow("show"),this.options.showLens&&(this.showHideZoomContainer("show"),this.showHideLens("show")),this.options.tint&&"inner"!==this.options.zoomType&&this.showHideTint("show")),"hide"===type&&("window"===this.options.zoomType&&this.showHideWindow("hide"),this.options.tint||this.showHideWindow("hide"),this.options.showLens&&(this.showHideZoomContainer("hide"),this.showHideLens("hide")),this.options.tint&&this.showHideTint("hide"))},setPosition:function(e){var self=this,lensHeight,lensWidth;if(!this.options.zoomEnabled||void 0===e)return!1;(this.nzHeight=this.$elem.height(),this.nzWidth=this.$elem.width(),this.updateOffset(this),this.options.tint&&"inner"!==this.options.zoomType&&this.zoomTint.css({top:0,left:0}),this.options.responsive&&!this.options.scrollZoom)&&(this.options.showLens&&(this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?this.lensHeight=this.nzHeight:this.lensHeight=this.options.zoomWindowHeight/this.heightRatio,this.largeWidth<this.options.zoomWindowWidth?this.lensWidth=this.nzWidth:this.lensWidth=this.options.zoomWindowWidth/this.widthRatio,this.widthRatio=this.largeWidth/this.nzWidth,this.heightRatio=this.largeHeight/this.nzHeight,"lens"!==this.options.zoomType&&(this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?this.lensHeight=this.nzHeight:this.lensHeight=this.options.zoomWindowHeight/this.heightRatio,this.nzWidth<this.options.zoomWindowHeight/this.heightRatio?this.lensWidth=this.nzWidth:this.lensWidth=this.options.zoomWindowWidth/this.widthRatio,this.zoomLens.css({width:this.lensWidth,height:this.lensHeight}),this.options.tint&&this.zoomTintImage.css({width:this.nzWidth,height:this.nzHeight})),"lens"===this.options.zoomType&&this.zoomLens.css({width:this.options.lensSize,height:this.options.lensSize})));if(this.zoomContainer.css({top:this.nzOffset.top,left:this.nzOffset.left,width:this.nzWidth,height:this.nzHeight}),this.mouseLeft=parseInt(e.pageX-this.pageOffsetX-this.nzOffset.left),this.mouseTop=parseInt(e.pageY-this.pageOffsetY-this.nzOffset.top),"window"===this.options.zoomType){var zoomLensHeight=this.zoomLens.height()/2,zoomLensWidth=this.zoomLens.width()/2;this.Etoppos=this.mouseTop<0+zoomLensHeight,this.Eboppos=this.mouseTop>this.nzHeight-zoomLensHeight-2*this.options.lensBorderSize,this.Eloppos=this.mouseLeft<0+zoomLensWidth,this.Eroppos=this.mouseLeft>this.nzWidth-zoomLensWidth-2*this.options.lensBorderSize}"inner"===this.options.zoomType&&(this.Etoppos=this.mouseTop<this.nzHeight/2/this.heightRatio,this.Eboppos=this.mouseTop>this.nzHeight-this.nzHeight/2/this.heightRatio,this.Eloppos=this.mouseLeft<0+this.nzWidth/2/this.widthRatio,this.Eroppos=this.mouseLeft>this.nzWidth-this.nzWidth/2/this.widthRatio-2*this.options.lensBorderSize),this.mouseLeft<0||this.mouseTop<0||this.mouseLeft>this.nzWidth||this.mouseTop>this.nzHeight?this.setElements("hide"):(this.options.showLens&&(this.lensLeftPos=Math.floor(this.mouseLeft-this.zoomLens.width()/2),this.lensTopPos=Math.floor(this.mouseTop-this.zoomLens.height()/2)),this.Etoppos&&(this.lensTopPos=0),this.Eloppos&&(this.windowLeftPos=0,this.lensLeftPos=0,this.tintpos=0),"window"===this.options.zoomType&&(this.Eboppos&&(this.lensTopPos=Math.max(this.nzHeight-this.zoomLens.height()-2*this.options.lensBorderSize,0)),this.Eroppos&&(this.lensLeftPos=this.nzWidth-this.zoomLens.width()-2*this.options.lensBorderSize)),"inner"===this.options.zoomType&&(this.Eboppos&&(this.lensTopPos=Math.max(this.nzHeight-2*this.options.lensBorderSize,0)),this.Eroppos&&(this.lensLeftPos=this.nzWidth-this.nzWidth-2*this.options.lensBorderSize)),"lens"===this.options.zoomType&&(this.windowLeftPos=-1*((e.pageX-this.pageOffsetX-this.nzOffset.left)*this.widthRatio-this.zoomLens.width()/2),this.windowTopPos=-1*((e.pageY-this.pageOffsetY-this.nzOffset.top)*this.heightRatio-this.zoomLens.height()/2),this.zoomLens.css({backgroundPosition:this.windowLeftPos+"px "+this.windowTopPos+"px"}),this.changeBgSize&&(this.nzHeight>this.nzWidth?("lens"===this.options.zoomType&&this.zoomLens.css({backgroundSize:this.largeWidth/this.newvalueheight+"px "+this.largeHeight/this.newvalueheight+"px"}),this.zoomWindow.css({backgroundSize:this.largeWidth/this.newvalueheight+"px "+this.largeHeight/this.newvalueheight+"px"})):("lens"===this.options.zoomType&&this.zoomLens.css({backgroundSize:this.largeWidth/this.newvaluewidth+"px "+this.largeHeight/this.newvaluewidth+"px"}),this.zoomWindow.css({backgroundSize:this.largeWidth/this.newvaluewidth+"px "+this.largeHeight/this.newvaluewidth+"px"})),this.changeBgSize=!1),this.setWindowPosition(e)),this.options.tint&&"inner"!==this.options.zoomType&&this.setTintPosition(e),"window"===this.options.zoomType&&this.setWindowPosition(e),"inner"===this.options.zoomType&&this.setWindowPosition(e),this.options.showLens&&(this.fullwidth&&"lens"!==this.options.zoomType&&(this.lensLeftPos=0),this.zoomLens.css({left:this.lensLeftPos,top:this.lensTopPos})))},showHideZoomContainer:function(change){var self=this;"show"===change&&this.zoomContainer&&this.zoomContainer.show(),"hide"===change&&this.zoomContainer&&this.zoomContainer.hide()},showHideWindow:function(change){var self=this;"show"===change&&!self.isWindowActive&&self.zoomWindow&&(self.options.onShow(self),self.options.zoomWindowFadeIn?self.zoomWindow.stop(!0,!0,!1).fadeIn(self.options.zoomWindowFadeIn):self.zoomWindow.show(),self.isWindowActive=!0),"hide"===change&&self.isWindowActive&&(self.options.zoomWindowFadeOut?self.zoomWindow.stop(!0,!0).fadeOut(self.options.zoomWindowFadeOut,(function(){self.loop&&(clearInterval(self.loop),self.loop=!1)})):self.zoomWindow.hide(),self.options.onHide(self),self.isWindowActive=!1)},showHideLens:function(change){var self=this;"show"===change&&(this.isLensActive||(this.zoomLens&&(this.options.lensFadeIn?this.zoomLens.stop(!0,!0,!1).fadeIn(this.options.lensFadeIn):this.zoomLens.show()),this.isLensActive=!0)),"hide"===change&&this.isLensActive&&(this.zoomLens&&(this.options.lensFadeOut?this.zoomLens.stop(!0,!0).fadeOut(this.options.lensFadeOut):this.zoomLens.hide()),this.isLensActive=!1)},showHideTint:function(change){var self=this;"show"===change&&!this.isTintActive&&this.zoomTint&&(this.options.zoomTintFadeIn?this.zoomTint.css("opacity",this.options.tintOpacity).animate().stop(!0,!0).fadeIn("slow"):(this.zoomTint.css("opacity",this.options.tintOpacity).animate(),this.zoomTint.show()),this.isTintActive=!0),"hide"===change&&this.isTintActive&&(this.options.zoomTintFadeOut?this.zoomTint.stop(!0,!0).fadeOut(this.options.zoomTintFadeOut):this.zoomTint.hide(),this.isTintActive=!1)},setLensPosition:function(e){},setWindowPosition:function(e){var self=this;if(isNaN(self.options.zoomWindowPosition))self.externalContainer=$(self.options.zoomWindowPosition),self.externalContainer.length||(self.externalContainer=$("#"+self.options.zoomWindowPosition)),self.externalContainerWidth=self.externalContainer.width(),self.externalContainerHeight=self.externalContainer.height(),self.externalContainerOffset=self.externalContainer.offset(),self.windowOffsetTop=self.externalContainerOffset.top,self.windowOffsetLeft=self.externalContainerOffset.left;else switch(self.options.zoomWindowPosition){case 1:self.windowOffsetTop=self.options.zoomWindowOffsetY,self.windowOffsetLeft=+self.nzWidth;break;case 2:self.options.zoomWindowHeight>self.nzHeight?(self.windowOffsetTop=-1*(self.options.zoomWindowHeight/2-self.nzHeight/2),self.windowOffsetLeft=self.nzWidth):$.noop();break;case 3:self.windowOffsetTop=self.nzHeight-self.zoomWindow.height()-2*self.options.borderSize,self.windowOffsetLeft=self.nzWidth;break;case 4:self.windowOffsetTop=self.nzHeight,self.windowOffsetLeft=self.nzWidth;break;case 5:self.windowOffsetTop=self.nzHeight,self.windowOffsetLeft=self.nzWidth-self.zoomWindow.width()-2*self.options.borderSize;break;case 6:self.options.zoomWindowHeight>self.nzHeight?(self.windowOffsetTop=self.nzHeight,self.windowOffsetLeft=-1*(self.options.zoomWindowWidth/2-self.nzWidth/2+2*self.options.borderSize)):$.noop();break;case 7:self.windowOffsetTop=self.nzHeight,self.windowOffsetLeft=0;break;case 8:self.windowOffsetTop=self.nzHeight,self.windowOffsetLeft=-1*(self.zoomWindow.width()+2*self.options.borderSize);break;case 9:self.windowOffsetTop=self.nzHeight-self.zoomWindow.height()-2*self.options.borderSize,self.windowOffsetLeft=-1*(self.zoomWindow.width()+2*self.options.borderSize);break;case 10:self.options.zoomWindowHeight>self.nzHeight?(self.windowOffsetTop=-1*(self.options.zoomWindowHeight/2-self.nzHeight/2),self.windowOffsetLeft=-1*(self.zoomWindow.width()+2*self.options.borderSize)):$.noop();break;case 11:self.windowOffsetTop=self.options.zoomWindowOffsetY,self.windowOffsetLeft=-1*(self.zoomWindow.width()+2*self.options.borderSize);break;case 12:self.windowOffsetTop=-1*(self.zoomWindow.height()+2*self.options.borderSize),self.windowOffsetLeft=-1*(self.zoomWindow.width()+2*self.options.borderSize);break;case 13:self.windowOffsetTop=-1*(self.zoomWindow.height()+2*self.options.borderSize),self.windowOffsetLeft=0;break;case 14:self.options.zoomWindowHeight>self.nzHeight?(self.windowOffsetTop=-1*(self.zoomWindow.height()+2*self.options.borderSize),self.windowOffsetLeft=-1*(self.options.zoomWindowWidth/2-self.nzWidth/2+2*self.options.borderSize)):$.noop();break;case 15:self.windowOffsetTop=-1*(self.zoomWindow.height()+2*self.options.borderSize),self.windowOffsetLeft=self.nzWidth-self.zoomWindow.width()-2*self.options.borderSize;break;case 16:self.windowOffsetTop=-1*(self.zoomWindow.height()+2*self.options.borderSize),self.windowOffsetLeft=self.nzWidth;break;default:self.windowOffsetTop=self.options.zoomWindowOffsetY,self.windowOffsetLeft=self.nzWidth}if(self.isWindowSet=!0,self.windowOffsetTop=self.windowOffsetTop+self.options.zoomWindowOffsetY,self.windowOffsetLeft=self.windowOffsetLeft+self.options.zoomWindowOffsetX,self.zoomWindow.css({top:self.windowOffsetTop,left:self.windowOffsetLeft}),"inner"===self.options.zoomType&&self.zoomWindow.css({top:0,left:0}),self.windowLeftPos=-1*((e.pageX-self.pageOffsetX-self.nzOffset.left)*self.widthRatio-self.zoomWindow.width()/2),self.windowTopPos=-1*((e.pageY-self.pageOffsetY-self.nzOffset.top)*self.heightRatio-self.zoomWindow.height()/2),self.Etoppos&&(self.windowTopPos=0),self.Eloppos&&(self.windowLeftPos=0),self.Eboppos&&(self.windowTopPos=-1*(self.largeHeight/self.currentZoomLevel-self.zoomWindow.height())),self.Eroppos&&(self.windowLeftPos=-1*(self.largeWidth/self.currentZoomLevel-self.zoomWindow.width())),self.fullheight&&(self.windowTopPos=0),self.fullwidth&&(self.windowLeftPos=0),"window"===self.options.zoomType||"inner"===self.options.zoomType)if(1===self.zoomLock&&(self.widthRatio<=1&&(self.windowLeftPos=0),self.heightRatio<=1&&(self.windowTopPos=0)),"window"===self.options.zoomType&&(self.largeHeight<self.options.zoomWindowHeight&&(self.windowTopPos=0),self.largeWidth<self.options.zoomWindowWidth&&(self.windowLeftPos=0)),self.options.easing){self.xp||(self.xp=0),self.yp||(self.yp=0);var interval=16,easingInterval=parseInt(self.options.easing);"number"==typeof easingInterval&&isFinite(easingInterval)&&Math.floor(easingInterval)===easingInterval&&(interval=easingInterval),self.loop||(self.loop=setInterval((function(){self.xp+=(self.windowLeftPos-self.xp)/self.options.easingAmount,self.yp+=(self.windowTopPos-self.yp)/self.options.easingAmount,self.scrollingLock?(clearInterval(self.loop),self.xp=self.windowLeftPos,self.yp=self.windowTopPos,self.xp=-1*((e.pageX-self.pageOffsetX-self.nzOffset.left)*self.widthRatio-self.zoomWindow.width()/2),self.yp=-1*((e.pageY-self.pageOffsetY-self.nzOffset.top)*self.heightRatio-self.zoomWindow.height()/2),self.changeBgSize&&(self.nzHeight>self.nzWidth?("lens"===self.options.zoomType&&self.zoomLens.css({backgroundSize:self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px"}),self.zoomWindow.css({backgroundSize:self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px"})):("lens"!==self.options.zoomType&&self.zoomLens.css({backgroundSize:self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvalueheight+"px"}),self.zoomWindow.css({backgroundSize:self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px"})),self.changeBgSize=!1),self.zoomWindow.css({backgroundPosition:self.windowLeftPos+"px "+self.windowTopPos+"px"}),self.scrollingLock=!1,self.loop=!1):Math.round(Math.abs(self.xp-self.windowLeftPos)+Math.abs(self.yp-self.windowTopPos))<1?(clearInterval(self.loop),self.zoomWindow.css({backgroundPosition:self.windowLeftPos+"px "+self.windowTopPos+"px"}),self.loop=!1):(self.changeBgSize&&(self.nzHeight>self.nzWidth?("lens"===self.options.zoomType&&self.zoomLens.css({backgroundSize:self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px"}),self.zoomWindow.css({backgroundSize:self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px"})):("lens"!==self.options.zoomType&&self.zoomLens.css({backgroundSize:self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px"}),self.zoomWindow.css({backgroundSize:self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px"})),self.changeBgSize=!1),self.zoomWindow.css({backgroundPosition:self.xp+"px "+self.yp+"px"}))}),interval))}else self.changeBgSize&&(self.nzHeight>self.nzWidth?("lens"===self.options.zoomType&&self.zoomLens.css({backgroundSize:self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px"}),self.zoomWindow.css({backgroundSize:self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px"})):("lens"===self.options.zoomType&&self.zoomLens.css({backgroundSize:self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px"}),self.largeHeight/self.newvaluewidth<self.options.zoomWindowHeight?self.zoomWindow.css({backgroundSize:self.largeWidth/self.newvaluewidth+"px "+self.largeHeight/self.newvaluewidth+"px"}):self.zoomWindow.css({backgroundSize:self.largeWidth/self.newvalueheight+"px "+self.largeHeight/self.newvalueheight+"px"})),self.changeBgSize=!1),self.zoomWindow.css({backgroundPosition:self.windowLeftPos+"px "+self.windowTopPos+"px"})},setTintPosition:function(e){var self=this,zoomLensWidth=this.zoomLens.width(),zoomLensHeight=this.zoomLens.height();this.updateOffset(this),this.tintpos=-1*(e.pageX-this.pageOffsetX-this.nzOffset.left-zoomLensWidth/2),this.tintposy=-1*(e.pageY-this.pageOffsetY-this.nzOffset.top-zoomLensHeight/2),this.Etoppos&&(this.tintposy=0),this.Eloppos&&(this.tintpos=0),this.Eboppos&&(this.tintposy=-1*(this.nzHeight-zoomLensHeight-2*this.options.lensBorderSize)),this.Eroppos&&(this.tintpos=-1*(this.nzWidth-zoomLensWidth-2*this.options.lensBorderSize)),this.options.tint&&(this.fullheight&&(this.tintposy=0),this.fullwidth&&(this.tintpos=0),this.zoomTintImage.css({left:this.tintpos,top:this.tintposy}))},swaptheimage:function(smallimage,largeimage){var self=this,newImg=new Image;if(self.options.loadingIcon&&!self.spinner){var styleAttr={background:'url("'+self.options.loadingIcon+'") no-repeat',height:self.nzHeight,width:self.nzWidth,zIndex:2e3,position:"absolute",backgroundPosition:"center center"};"inner"===self.options.zoomType&&styleAttr.setProperty("top",0),self.spinner=$('<div class="ezp-spinner"></div>').css(styleAttr),self.$elem.after(self.spinner)}else self.spinner&&self.spinner.show();self.options.onImageSwap(self.$elem),newImg.onload=function(){self.largeWidth=newImg.width,self.largeHeight=newImg.height,self.zoomImage=largeimage,self.zoomWindow.css({backgroundSize:self.largeWidth+"px "+self.largeHeight+"px"}),self.swapAction(smallimage,largeimage)},self.setImageSource(newImg,largeimage)},swapAction:function(smallimage,largeimage){var self=this,elemWidth=self.$elem.width(),elemHeight=self.$elem.height(),newImg2=new Image;if(newImg2.onload=function(){self.nzHeight=newImg2.height,self.nzWidth=newImg2.width,self.options.onImageSwapComplete(self.$elem),self.doneCallback()},self.setImageSource(newImg2,smallimage),self.currentZoomLevel=self.options.zoomLevel,self.options.maxZoomLevel=!1,"lens"===self.options.zoomType&&self.zoomLens.css("background-image",'url("'+largeimage+'")'),"window"===self.options.zoomType&&self.zoomWindow.css("background-image",'url("'+largeimage+'")'),"inner"===self.options.zoomType&&self.zoomWindow.css("background-image",'url("'+largeimage+'")'),self.currentImage=largeimage,self.options.imageCrossfade){var oldImg=self.$elem,newImg=oldImg.clone();if(self.$elem.attr("src",smallimage),self.$elem.after(newImg),newImg.stop(!0).fadeOut(self.options.imageCrossfade,(function(){$(this).remove()})),self.$elem.width("auto").removeAttr("width"),self.$elem.height("auto").removeAttr("height"),oldImg.fadeIn(self.options.imageCrossfade),self.options.tint&&"inner"!==self.options.zoomType){var oldImgTint=self.zoomTintImage,newImgTint=oldImgTint.clone();self.zoomTintImage.attr("src",largeimage),self.zoomTintImage.after(newImgTint),newImgTint.stop(!0).fadeOut(self.options.imageCrossfade,(function(){$(this).remove()})),oldImgTint.fadeIn(self.options.imageCrossfade),self.zoomTint.css({height:elemHeight,width:elemWidth})}self.zoomContainer.css({height:elemHeight,width:elemWidth}),"inner"===self.options.zoomType&&(self.options.constrainType||(self.zoomWrap.parent().css({height:elemHeight,width:elemWidth}),self.zoomWindow.css({height:elemHeight,width:elemWidth}))),self.options.imageCrossfade&&self.zoomWrap.css({height:elemHeight,width:elemWidth})}else self.$elem.attr("src",smallimage),self.options.tint&&(self.zoomTintImage.attr("src",largeimage),self.zoomTintImage.attr("height",elemHeight),self.zoomTintImage.css("height",elemHeight),self.zoomTint.css("height",elemHeight)),self.zoomContainer.css({height:elemHeight,width:elemWidth}),self.options.imageCrossfade&&self.zoomWrap.css({height:elemHeight,width:elemWidth});if(self.options.constrainType){if("height"===self.options.constrainType){var autoWDimension={height:self.options.constrainSize,width:"auto"};self.zoomContainer.css(autoWDimension),self.options.imageCrossfade?(self.zoomWrap.css(autoWDimension),self.constwidth=self.zoomWrap.width()):(self.$elem.css(autoWDimension),self.constwidth=elemWidth);var constWDim={height:self.options.constrainSize,width:self.constwidth};"inner"===self.options.zoomType&&(self.zoomWrap.parent().css(constWDim),self.zoomWindow.css(constWDim)),self.options.tint&&(self.tintContainer.css(constWDim),self.zoomTint.css(constWDim),self.zoomTintImage.css(constWDim))}if("width"===self.options.constrainType){var autoHDimension={height:"auto",width:self.options.constrainSize};self.zoomContainer.css(autoHDimension),self.options.imageCrossfade?(self.zoomWrap.css(autoHDimension),self.constheight=self.zoomWrap.height()):(self.$elem.css(autoHDimension),self.constheight=elemHeight);var constHDim={height:self.constheight,width:self.options.constrainSize};"inner"===self.options.zoomType&&(self.zoomWrap.parent().css(constHDim),self.zoomWindow.css(constHDim)),self.options.tint&&(self.tintContainer.css(constHDim),self.zoomTint.css(constHDim),self.zoomTintImage.css(constHDim))}}},doneCallback:function(){var self=this;this.options.loadingIcon&&this.spinner&&this.spinner.length&&this.spinner.hide(),this.updateOffset(this),this.nzWidth=this.$elem.width(),this.nzHeight=this.$elem.height(),this.currentZoomLevel=this.options.zoomLevel,this.widthRatio=this.largeWidth/this.nzWidth,this.heightRatio=this.largeHeight/this.nzHeight,"window"===this.options.zoomType&&(this.nzHeight<this.options.zoomWindowHeight/this.heightRatio?this.lensHeight=this.nzHeight:this.lensHeight=this.options.zoomWindowHeight/this.heightRatio,this.nzWidth<this.options.zoomWindowWidth?this.lensWidth=this.nzWidth:this.lensWidth=this.options.zoomWindowWidth/this.widthRatio,this.zoomLens&&this.zoomLens.css({width:this.lensWidth,height:this.lensHeight}))},getCurrentImage:function(){var self=this;return this.zoomImage},getGalleryList:function(){var self=this;return self.gallerylist=[],self.options.gallery?$("#"+self.options.gallery+" a").each((function(){var imgSrc="";$(this).data(self.options.attrImageZoomSrc)?imgSrc=$(this).data(self.options.attrImageZoomSrc):$(this).data("image")&&(imgSrc=$(this).data("image")),imgSrc===self.zoomImage?self.gallerylist.unshift({href:""+imgSrc,title:$(this).find("img").attr("title")}):self.gallerylist.push({href:""+imgSrc,title:$(this).find("img").attr("title")})})):self.gallerylist.push({href:""+self.zoomImage,title:$(this).find("img").attr("title")}),self.gallerylist},changeZoomLevel:function(value){var self=this;this.scrollingLock=!0,this.newvalue=parseFloat(value).toFixed(2);var newvalue=this.newvalue,maxheightnewvalue=this.largeHeight/(this.options.zoomWindowHeight/this.nzHeight*this.nzHeight),maxwidthtnewvalue=this.largeWidth/(this.options.zoomWindowWidth/this.nzWidth*this.nzWidth);"inner"!==this.options.zoomType&&(maxheightnewvalue<=newvalue?(this.heightRatio=this.largeHeight/maxheightnewvalue/this.nzHeight,this.newvalueheight=maxheightnewvalue,this.fullheight=!0):(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,this.newvalueheight=newvalue,this.fullheight=!1),maxwidthtnewvalue<=newvalue?(this.widthRatio=this.largeWidth/maxwidthtnewvalue/this.nzWidth,this.newvaluewidth=maxwidthtnewvalue,this.fullwidth=!0):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1),"lens"===this.options.zoomType&&(maxheightnewvalue<=newvalue?(this.fullwidth=!0,this.newvaluewidth=maxheightnewvalue):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1))),"inner"===this.options.zoomType&&(newvalue>(maxheightnewvalue=parseFloat(this.largeHeight/this.nzHeight).toFixed(2))&&(newvalue=maxheightnewvalue),newvalue>(maxwidthtnewvalue=parseFloat(this.largeWidth/this.nzWidth).toFixed(2))&&(newvalue=maxwidthtnewvalue),maxheightnewvalue<=newvalue?(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,this.newvalueheight=newvalue>maxheightnewvalue?maxheightnewvalue:newvalue,this.fullheight=!0):(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,this.newvalueheight=newvalue>maxheightnewvalue?maxheightnewvalue:newvalue,this.fullheight=!1),maxwidthtnewvalue<=newvalue?(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue>maxwidthtnewvalue?maxwidthtnewvalue:newvalue,this.fullwidth=!0):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1));var scrcontinue=!1;"inner"===this.options.zoomType&&(this.nzWidth>=this.nzHeight&&(this.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,this.fullheight=!0,this.fullwidth=!0)),this.nzHeight>this.nzWidth&&(this.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,this.fullheight=!0,this.fullwidth=!0))),"inner"!==this.options.zoomType&&(scrcontinue=!0),scrcontinue&&(this.zoomLock=0,this.changeZoom=!0,this.options.zoomWindowHeight/this.heightRatio<=this.nzHeight&&(this.currentZoomLevel=this.newvalueheight,"lens"!==this.options.zoomType&&"inner"!==this.options.zoomType&&(this.changeBgSize=!0,this.zoomLens.css({height:this.options.zoomWindowHeight/this.heightRatio})),"lens"!==this.options.zoomType&&"inner"!==this.options.zoomType||(this.changeBgSize=!0)),this.options.zoomWindowWidth/this.widthRatio<=this.nzWidth&&("inner"!==this.options.zoomType&&this.newvaluewidth>this.newvalueheight&&(this.currentZoomLevel=this.newvaluewidth),"lens"!==this.options.zoomType&&"inner"!==this.options.zoomType&&(this.changeBgSize=!0,this.zoomLens.css({width:this.options.zoomWindowWidth/this.widthRatio})),"lens"!==this.options.zoomType&&"inner"!==this.options.zoomType||(this.changeBgSize=!0)),"inner"===this.options.zoomType&&(this.changeBgSize=!0,this.nzWidth>this.nzHeight?this.currentZoomLevel=this.newvaluewidth:this.nzHeight>=this.nzWidth&&(this.currentZoomLevel=this.newvaluewidth))),this.setPosition(this.currentLoc)},closeAll:function(){var self=this;this.zoomWindow&&this.zoomWindow.hide(),this.zoomLens&&this.zoomLens.hide(),this.zoomTint&&this.zoomTint.hide()},updateOffset:function(self){if("body"!==self.options.zoomContainerAppendTo){self.nzOffset=self.$elem.offset();var appendedPosition=$(self.options.zoomContainerAppendTo).offset();self.nzOffset.top=self.$elem.offset().top-appendedPosition.top,self.nzOffset.left=self.$elem.offset().left-appendedPosition.left,self.pageOffsetX=appendedPosition.left,self.pageOffsetY=appendedPosition.top}else self.nzOffset=self.$elem.offset(),self.pageOffsetX=0,self.pageOffsetY=0},changeState:function(value){var self=this;"enable"===value&&(this.options.zoomEnabled=!0),"disable"===value&&(this.options.zoomEnabled=!1)},responsiveConfig:function(options){return options.respond&&options.respond.length>0?$.extend({},options,this.configByScreenWidth(options)):options},configByScreenWidth:function(options){var screenWidth=$(window).width(),config=$.grep(options.respond,(function(item){var range=item.range.split("-");return screenWidth>=range[0]&&screenWidth<=range[1]}));return config.length>0?config[0]:options}};$.fn.ezPlus=function(options){return this.each((function(){var elevate=Object.create(EZP);elevate.init(options,this),$.data(this,"ezPlus",elevate)}))},$.fn.ezPlus.options={container:"ZoomContainer",attrImageZoomSrc:"zoom-image",borderColour:"#888",borderSize:4,constrainSize:!1,constrainType:!1,containLensZoom:!1,cursor:"inherit",debug:!1,easing:!1,easingAmount:12,enabled:!0,gallery:!1,galleryActiveClass:"zoomGalleryActive",gallerySelector:!1,galleryItem:"a",galleryEvent:"click",imageCrossfade:!1,lensBorderColour:"#000",lensBorderSize:1,lensColour:"white",lensFadeIn:!1,lensFadeOut:!1,lensOpacity:.4,lensShape:"square",lensSize:200,lenszoom:!1,loadingIcon:!1,mantainZoomAspectRatio:!1,maxZoomLevel:!1,minZoomLevel:1.01,onComplete:$.noop,onDestroy:$.noop,onImageClick:$.noop,onImageSwap:$.noop,onImageSwapComplete:$.noop,onShow:$.noop,onHide:$.noop,onZoomedImageLoaded:$.noop,preloading:1,respond:[],responsive:!0,scrollZoom:!1,scrollZoomIncrement:.1,showLens:!0,tint:!1,tintColour:"#333",tintOpacity:.4,touchEnabled:!0,zoomActivation:"hover",zoomContainerAppendTo:"body",zoomId:-1,zoomLevel:1,zoomTintFadeIn:!1,zoomTintFadeOut:!1,zoomType:"window",zoomWindowAlwaysShow:!1,zoomWindowBgColour:"#fff",zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowHeight:400,zoomWindowOffsetX:0,zoomWindowOffsetY:0,zoomWindowPosition:1,zoomWindowWidth:400,zoomEnabled:!0,zIndex:999}}(window.jQuery,window,document);