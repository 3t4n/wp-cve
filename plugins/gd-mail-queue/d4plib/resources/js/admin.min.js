var d4plib_admin;!function(i,n,e){(d4plib_admin={scroll_offset:40,active_element:null,init:function(){i(".d4p-nav-button > a").click(function(e){e.preventDefault(),i(this).next().slideToggle("fast")}),setTimeout(function(){i(".d4p-wrap .updated").slideUp("slow")},4e3),i(n).bind("load resize orientationchange",function(){e.body.clientWidth<800?d4plib_admin.scroll_offset=60:d4plib_admin.scroll_offset=40,e.body.clientWidth<640?i(".d4p-panel-scroller").removeClass("d4p-scroll-active"):i(".d4p-panel-scroller").addClass("d4p-scroll-active")}),i(".d4p-check-uncheck a").click(function(e){e.preventDefault();e="checkall"===i(this).attr("href").substring(1);i(this).parent().parent().find("input[type=checkbox]").prop("checked",e)})},settings:function(){"undefined"!=typeof d4plib_media_image&&null!==d4plib_media_image&&d4plib_media_image.init(),i.numeric&&(i(".d4p-setting-number input, .d4p-field-number").numeric(),i(".d4p-setting-integer input, .d4p-field-integer").numeric({decimalPlaces:0,negative:!1})),i(".d4p-color-picker").wpColorPicker(),i(e).on("click",".d4p-group h3 i.fa.fa-caret-down, .d4p-group h3 i.fa.fa-caret-up",function(){var e=i(this).hasClass("fa-caret-down"),t=i(this).parent().next();e?(i(this).removeClass("fa-caret-down").addClass("fa-caret-up"),t.slideDown(300)):(i(this).removeClass("fa-caret-up").addClass("fa-caret-down"),t.slideUp(300))}),i(e).on("click",".d4p-section-toggle .d4p-toggle-title",function(){var e=i(this).find("i.fa"),t=e.hasClass("fa-caret-down"),a=i(this).next();t?(e.removeClass("fa-caret-down").addClass("fa-caret-up"),a.slideDown(300)):(e.removeClass("fa-caret-up").addClass("fa-caret-down"),a.slideUp(300))}),i(e).on("click",".d4p-setting-expandable_pairs .button-secondary",function(e){e.preventDefault();var t=i(this).parent();t.fadeOut(200,function(){t.remove()})}),i(".d4p-setting-expandable_pairs a.button-primary").click(function(e){e.preventDefault();var e=i(this).closest(".d4p-setting-expandable_pairs"),t=i(".d4p-next-id",e),a=t.val(),e=i(".pair-element-0",e).clone();i("input",e).each(function(){var e=i(this).attr("id").replace("_0_","_"+a+"_"),t=i(this).attr("name").replace("[0]","["+a+"]");i(this).attr("id",e).attr("name",t)}),e.attr("class","pair-element-"+a).fadeIn(),i(this).before(e),a++,t.val(a)}),i(e).on("click",".d4p-setting-expandable_text .button-secondary",function(e){d4plib_admin.handlers.expendable_text_remove(this,e)}),i(e).on("click",".d4p-setting-expandable_raw .button-secondary",function(e){d4plib_admin.handlers.expendable_text_remove(this,e)}),i(e).on("click",".d4p-setting-expandable_regex .button-secondary",function(e){d4plib_admin.handlers.expendable_text_remove(this,e)}),i(".d4p-setting-expandable_text a.button-primary").click(function(e){d4plib_admin.handlers.expendable_text_add(this,e,".d4p-setting-expandable_text")}),i(".d4p-setting-expandable_raw a.button-primary").click(function(e){d4plib_admin.handlers.expendable_text_add(this,e,".d4p-setting-expandable_raw")}),i(".d4p-setting-expandable_regex a.button-primary").click(function(e){d4plib_admin.handlers.expendable_text_add(this,e,".d4p-setting-expandable_regex")})},scroller:function(){var e,t=i(".d4p-panel-scroller"),a=i(n);0<t.length&&(e=t.offset(),a.scroll(function(){a.scrollTop()>e.top&&t.hasClass("d4p-scroll-active")?t.stop().animate({marginTop:a.scrollTop()-e.top+d4plib_admin.scroll_offset}):t.stop().animate({marginTop:0})}))},handlers:{expendable_text_remove:function(e,t){t.preventDefault();var a=i(e).parent();a.fadeOut(200,function(){a.remove()})},expendable_text_add:function(e,t,a){t.preventDefault();var t=i(e).closest(a),e=i(".d4p-next-id",t),n=e.val(),a=i(".exp-text-element-0",t).clone();i("input",a).each(function(){var e=i(this).attr("id").replace("_0_","_"+n+"_"),t=i(this).attr("name").replace("[0]","["+n+"]");i(this).attr("id",e).attr("name",t)}),a.attr("class","exp-text-element exp-text-element-"+n).fadeIn(),i("ol",t).append(a),n++,e.val(n)}}}).init(),d4plib_admin.settings(),d4plib_admin.scroller()}(jQuery,window,document);