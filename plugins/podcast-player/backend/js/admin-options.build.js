(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function r(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:String(r)}const n=r((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jQuery("#pp-options-module-help .pp-docs-hide").hide(),jQuery("#pp-options-module-help .pp-docs-title").on("click",(function(){jQuery(this).toggleClass("pp-toggle"),jQuery(this).next().slideToggle("fast")})),jQuery("#pp-options-module-toolkit .pp-toolkit-content").hide(),jQuery("#pp-options-module-toolkit .pp-toolkit-title").on("click",(function(){jQuery(this).toggleClass("pp-toggle"),jQuery(this).next().slideToggle("fast")})),jQuery(".pp-hidden-settings").hide(),jQuery(".pp-hidden-settings-title").on("click",(function(){jQuery(this).toggleClass("pp-toggle"),jQuery(this).next().slideToggle("fast")}))}));function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,p(o.key),o)}}function p(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:String(t)}const a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=window.ppjsAdminOpt||{},this.adminPage=jQuery("#pp-options-page"),this.index=jQuery(".select-pp-feed-index").first(),this.refresh=jQuery(".pp-feed-refresh"),this.reset=jQuery(".pp-feed-reset"),this.feedback=jQuery(".pp-toolkit-feedback").first(),this.newFeedback=jQuery("#pp-action-feedback"),this.managePodcastList=this.adminPage.find(".pp-podcasts-list"),this.events()}var t,r;return t=e,r=[{key:"events",value:function(){var e=this,t=this;this.refresh.on("click",function(){this.ajaxFeedEditor("refresh")}.bind(this)),this.reset.on("click",function(){this.ajaxFeedEditor("reset")}.bind(this)),jQuery(".pp-feed-del").on("click",(function(){t.index.val()?(jQuery(this).next(".pp-toolkit-del-confirm").slideDown("fast"),t.response()):t.response(t.data.messages.nourl,"pp-error")})),jQuery(".pp-feed-cancel").on("click",(function(){jQuery(this).parents(".pp-toolkit-del-confirm").hide()})),this.managePodcastList.on("click",".pp-podcast-refresh-btn",(function(t){var r=jQuery(t.currentTarget);e.feedRefreshDelete("refresh",r)})),this.managePodcastList.on("click",".pp-podcast-delete-btn",(function(t){var r=jQuery(t.currentTarget);e.feedRefreshDelete("reset",r)})),this.newFeedback.on("click",".pp-error-close",(function(t){e.newFeedback.removeClass("pp-error")}))}},{key:"ajaxFeedEditor",value:function(e){var t=this,r=this.getAjaxConfig(e);this.response(this.data.messages.running,"pp-running"),r?jQuery.ajax({url:this.data.ajaxurl,data:r,type:"POST",timeout:6e4,success:function(e){var r=JSON.parse(e);jQuery.isEmptyObject(r)||(void 0!==r.error?t.response(r.error,"pp-error"):void 0!==r.message&&t.response(r.message,"pp-success"))},error:function(e,r,o){t.response(o,"pp-error")}}):this.response(this.data.messages.nourl,"pp-error")}},{key:"feedRefreshDelete",value:function(e,t){var r=this,o=t.closest(".pp-podcast-list-item"),n=o.data("podcast"),i={action:"pp_feed_editor",security:this.data.security,atype:e,feedUrl:n};t.addClass("pp-wip"),this.managePodcastList.find(".pp-toolkit-buttons").prop("disabled",!0),jQuery.ajax({url:this.data.ajaxurl,data:i,type:"POST",timeout:6e4,success:function(n){var i=JSON.parse(n);jQuery.isEmptyObject(i)||(void 0!==i.error?r.newResponse(i.error,"pp-error"):void 0!==i.message&&(r.newResponse(i.message,"pp-success"),"reset"==e&&o.fadeOut(200,(function(){jQuery(this).remove()}))),t.removeClass("pp-wip"),setTimeout((function(){r.managePodcastList.find(".pp-toolkit-buttons").prop("disabled",!1)}),1500))},error:function(e,o,n){r.newResponse(n,"pp-error"),t.removeClass("pp-wip"),r.managePodcastList.find(".pp-toolkit-buttons").prop("disabled",!1)}})}},{key:"getAjaxConfig",value:function(e){var t=this.index.val();return!!t&&{action:"pp_feed_editor",security:this.data.security,atype:e,feedUrl:t}}},{key:"response",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.feedback.removeClass("pp-error pp-success pp-running"),!1!==t&&(this.feedback.addClass(t),this.feedback.find(".pp-feedback").text(e))}},{key:"newResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.newFeedback.removeClass("pp-error pp-success pp-running"),!1!==t&&(this.newFeedback.addClass(t),this.newFeedback.find(".pp-feedback").text(e)),setTimeout(function(){this.newFeedback.removeClass("pp-success pp-running")}.bind(this),1500)}}],r&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();new n,new a})();