var CustomRelatedPosts;(()=>{"use strict";var t={73:t=>{t.exports=window.jQuery}},e={};function r(o){var a=e[o];if(void 0!==a)return a.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,r),s.exports}r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{r.r(o),r.d(o,{Metabox:()=>a});var t=r(73);t(document).ready(function(t){t("#crp_meta_box").length>0&&e.initMetaBox()});var e={post_id:void 0,search_term_field:void 0,search_button:void 0,initMetaBox:function(){e.post_id=t("#crp_post").val(),e.search_post_type=t("#crp_search_post_type"),e.search_term_field=t("#crp_search_term"),e.search_button=t("#crp_search_button"),e.search_term_field.on("keydown",function(t){13==t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.searchPosts())}),e.search_post_type.on("change",function(t){e.search_term_field.val().length>0&&e.searchPosts()}),e.search_button.on("click",function(){e.searchPosts()}),t("#crp_relations").on("click",".crp_remove_relation",function(){e.removeRelation(t(this))}),t("#crp_search_results_table").on("click","button",function(t){t.preventDefault(),t.stopPropagation()})},removeRelation:function(r){var o=r.hasClass("crp_remove_relation_both"),a=r.hasClass("crp_remove_relation_to"),s=r.hasClass("crp_remove_relation_from"),_=r.parent("div").data("post");if(null==_)if(_=r.parents("tr").data("post"),a){var n=r.parents("tr").find("td").first().text(),i='<div id="crp_related_post_'+_+'" data-post="'+_+'">'+crp_admin.remove_image_from+n+"</div>";t("#crp_relations_single_from").prepend(i)}else if(s){i='<div id="crp_related_post_'+_+'" data-post="'+_+'">'+(n=r.parents("tr").find("td").first().text())+crp_admin.remove_image_to+"</div>";t("#crp_relations_single_to").prepend(i)}t("#crp_related_post_"+_).remove();var c={action:"crp_remove_relation",security:crp_admin.nonce,base:e.post_id,target:_,from:o||s,to:o||a};t.post(crp_admin.ajax_url,c)},searchPosts:function(){t(".crp_search_results").slideUp(250),e.search_button.addClass("crp_spinner");var r=e.search_term_field.val();if(0==r.length)e.search_button.removeClass("crp_spinner"),t("#crp_search_results_input").slideDown(500),e.search_term_field.focus();else{var o={action:"crp_search_posts",security:crp_admin.nonce,post_type:e.search_post_type.val(),term:r,base:e.post_id};t.post(crp_admin.ajax_url,o,function(r){e.search_button.removeClass("crp_spinner"),0==r.length?(t("#crp_search_results_none").slideDown(500),e.search_term_field.focus()):t("#crp_search_results_table").slideDown(500).find("tbody").html(r)},"html")}},linkTo:function(r){e.addLink(r,!1,!0),e.disableActions(r,!1);var o='<div id="crp_related_post_'+r+'" data-post="'+r+'">'+t("#crp_post_"+r+"_title").text()+crp_admin.remove_image_to+"</div>";t("#crp_relations_single_to").append(o)},linkFrom:function(r){e.addLink(r,!0,!1),e.disableActions(r,!1);var o=t("#crp_post_"+r+"_title").text(),a='<div id="crp_related_post_'+r+'" data-post="'+r+'">'+crp_admin.remove_image_from+o+"</div>";t("#crp_relations_single_from").append(a)},linkBoth:function(r){e.addLink(r,!0,!0),e.disableActions(r,!0),t("#crp_related_post_"+r).remove();var o=t("#crp_post_"+r+"_title").text(),a='<tr id="crp_related_post_'+r+'" data-post="'+r+'"><td>'+o+crp_admin.remove_image_to+'</td><td><div class="crp_link">'+crp_admin.remove_image_both+"</div></td><td>"+crp_admin.remove_image_from+o+"</td></tr>";t("#crp_relations_both").append(a)},disableActions:function(e,r){t("#crp_post_"+e+"_actions").find("button").each(function(t,e){(r||1!=t)&&(e.disabled=!0)})},addLink:function(r,o,a){var s={action:"crp_link_posts",security:crp_admin.nonce,base:e.post_id,target:r,from:o,to:a};t.post(crp_admin.ajax_url,s)}};const a=e})(),(CustomRelatedPosts=void 0===CustomRelatedPosts?{}:CustomRelatedPosts).admin=o})();