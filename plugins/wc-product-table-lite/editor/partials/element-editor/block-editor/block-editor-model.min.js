!function(t,e){e.data=null,e.parent,e.get_data=function(){return JSON.parse(JSON.stringify(this.data))},e.set_data=function(e,a){this.ensure_data_ids(e),this.data=t.extend([],e),this.parent.view.render(),this.parent.$elm.data("wcpt-data",this.data),void 0===a&&(a=!0),a&&this.parent.$elm.trigger("change")},e.ensure_data_ids=function(t){if(t)for(var e=Date.now(),a=0;a<t.length;a++){var i=t[a];i.id||(i.id=e++),i.type||(i.type="row");for(var n=0;n<i.elements.length;n++){var s=i.elements[n];s.id||(s.id=e++)}}},e.get_export_code=function(t,e){if(t||e)a=this.data[t].elements[e];else var a=this.data;return JSON.stringify(this.strip_id(a))},e.strip_id=function(e){var a=this;return t.each(e,(function(t,i){"object"==typeof i&&(e[t]=a.strip_id(i)),"id"==t&&delete e[t]})),e},e.random_id=function(e){var a=this;return t.each(e,(function(t,i){"object"==typeof i&&(e[t]=a.random_id(i)),"id"==t&&(e[t]=Math.round(1e8*Math.random()))})),e},e.get_row=function(t){t=parseInt(t);for(var e=0;e<this.data.length;e++){var a=this.data[e];if(a.id==t)return a}},e.get_element=function(t){t=parseInt(t);for(var e=0;e<this.data.length;e++){this.data[e];for(var a=0;a<this.data[e].elements.length;a++){var i=this.data[e].elements[a];if(i.id==t)return i}}},e.add_row=function(t,e){t||(t={elements:[],id:Date.now(),condition:{},style:{}});var a=this.get_data();e||(e=a.length),a.splice(e,0,t),this.set_data(a)},e.add_element=function(t,e,a){(i=this.get_data()).length||this.add_row();var i=this.get_data();if(null==e)var n=i[e=i.length-1];null==a&&(a=n.elements.length),i[e].elements.splice(a,0,t),this.set_data(i)},e.remove_element=function(t,e){var a=this.get_data();a[t].elements.splice(e,1),this.set_data(a)},e.update_element=function(t,e,a){var i=this.get_data();i[e].elements.splice(a,1,t),this.set_data(i)},e.duplicate_element=function(e,a){var i=this.get_data(),n=i[e];n.elements.splice(a+1,0,t.extend(!0,{},n.elements[a])),this.random_id(n.elements[a+1]),n.elements[a+1].id=Date.now(),this.set_data(i)},e.remove_row=function(t){var e=this.get_data();e.splice(t,1),this.set_data(e)},e.reset_row=function(t){var e=this.get_data();e[t].elements=[],e[t].conditon={},e[t].style={},this.set_data(e)},e.update_row=function(t,e){var a=this.get_data();a.splice(e,1,t),this.set_data(a)},e.duplicate_row=function(e){var a=this.get_data();a.splice(e+1,0,t.extend(!0,{},a[e])),this.random_id(a[e+1]),this.set_data(a)}}(jQuery,WCPT_Block_Editor.Model);