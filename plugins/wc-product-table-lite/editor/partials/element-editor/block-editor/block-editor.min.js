var WCPT_Block_Editor={};!function(t){WCPT_Block_Editor={$elm:t(),Config:{add_row:!0,delete_row:!0,add_element_partial:"add-common-element",connect_with:".wcpt-block-editor-row"},Ctrl:{},View:{},Model:{},init:function(e,i){this.view=Object.create(WCPT_Block_Editor.View),this.model=Object.create(WCPT_Block_Editor.Model),this.ctrl=Object.create(WCPT_Block_Editor.Ctrl),this.config=Object.create(WCPT_Block_Editor.Config),this.view.parent=this,this.model.parent=this,this.ctrl.parent=this,this.$elm=t(e),this.$elm.data("wcpt_block_editor",this),this.$elm.addClass("wcpt-block-editor"),i?t.extend(!0,this.config,i):(this.$elm.attr("wcpt-be-add-element-partial")&&(this.config.add_element_partial=this.$elm.attr("wcpt-be-add-element-partial")),"0"===this.$elm.attr("wcpt-be-add-row")&&(this.config.add_row=!1),"0"===this.$elm.attr("wcpt-be-delete-row")&&(this.config.delete_row=!1),this.$elm.attr("wcpt-be-edit-row")&&(this.config.edit_row=this.$elm.attr("wcpt-be-edit-row")),this.$elm.attr("wcpt-be-connect-with")&&(this.config.connect_with=this.$elm.attr("wcpt-be-connect-with"))),this.$elm.on("click",".wcpt-block-editor-add-row",this.ctrl.add_row),this.$elm.on("sortupdate",this.ctrl.sort_update),this.$elm.on("click",".wcpt-element-block",this.ctrl.edit_element),this.$elm.on("click",".wcpt-block-editor-add-element",this.ctrl.add_element),this.$elm.on("click",".wcpt-block-editor-edit-row",this.ctrl.edit_row),this.$elm.on("click",".wcpt-block-editor-delete-row",this.ctrl.delete_row);var o=!1;this.$elm.data("wcpt-data")&&(o=this.$elm.data("wcpt-data")),this.config.data&&(o=t.extend(!0,{},this.config.data)),"string"==typeof o&&(o=[{id:Date.now(),style:{},condition:{},elements:[{type:"text",text:o}]}]),"object"!=typeof o&&(o=[{id:Date.now(),style:{},condition:{},elements:[]}]);this.model.set_data(o,!1)}},t.fn.wcpt_block_editor=function(e){return this.each((function(){t(this).data("wcpt_block_editor")||Object.create(WCPT_Block_Editor).init(this,e)}))}}(jQuery);