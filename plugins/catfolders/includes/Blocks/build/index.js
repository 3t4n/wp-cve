(()=>{"use strict";var e,t={706:()=>{const e=window.wp.blocks,t=JSON.parse('{"u2":"catfolders/image-gallery"}'),a=window.wp.element,l=window.wp.blockEditor,n=window.wp.components;function o(){return(0,a.createElement)("div",{className:"block-spinner-wrap"},(0,a.createElement)("span",{className:"spinner is-active"}))}function r(e){return(0,a.createElement)(n.Notice,{status:"error",isDismissible:!1},(0,a.createElement)("p",null,e.mess))}const c=({layout:e,columns:t,attachments:l,displayCaption:o})=>{const c="masonry"===e?`is-style-masonry catf-columns-${t}`:"";return(0,a.createElement)("div",{id:"catfolders-gallery-app"},l.length?(0,a.createElement)(n.__experimentalGrid,{columns:t,columnGap:10,className:c},l.map(((e,t)=>(0,a.createElement)("figure",{className:"wp-block-image",key:t},(0,a.createElement)("img",{src:e.src,alt:e.src}),o&&""!==e.caption?(0,a.createElement)("figcaption",{className:"wp-block-image-caption"},e.caption):null)))):(0,a.createElement)(r,{mess:window.catfData.i18n.global.error_notice_folder_empty}))},s=(e=[],t=" ")=>e.length?e.flatMap((e=>[{label:t+e.title,value:e.id},...s(e.children||[],t+"-")])):[];function i({folders:e,onChange:t,defaultValue:l}){const o=[{label:"Please choose folder",value:"0",disabled:!0},...s(e)];return(0,a.createElement)(a.Fragment,null,o.length>1?(0,a.createElement)(n.SelectControl,{label:window.catfData.i18n.global.folders,multiple:!0,options:o,onChange:t,defaultValue:l}):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("p",null,window.catfData.i18n.global.dont_have_folder),(0,a.createElement)(n.Button,{href:`${window.catfData.adminUrl}upload.php`,target:"_blank",variant:"primary",className:"create-first-folder-button"},window.catfData.i18n.global.create_first_folder)))}const m=(e="GET",t="",a={})=>jQuery.ajax({url:window.catfData.apiSettings.rest_url+t,method:e,dataType:"json",contentType:"application/json",headers:{"X-WP-Nonce":window.catfData.apiSettings.rest_nonce,"X-HTTP-Method-Override":e},data:"GET"===e?a:JSON.stringify(a)});(0,e.registerBlockType)(t.u2,{icon:{src:()=>(0,a.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",enableBackground:"new 0 0 512 512"},(0,a.createElement)("g",null,(0,a.createElement)("g",null,(0,a.createElement)("path",{className:"st0",fill:"#EA60D5",d:"M416.5,36.7h-261c-25.8,0-46.8,21-46.8,46.8v25.3H83.5c-25.8,0-46.8,21-46.8,46.8v261c0,25.8,21,46.8,46.8,46.8\nh261c25.8,0,46.8-21,46.8-46.8v-25.3h25.3c25.8,0,46.8-21,46.8-46.8v-261C463.3,57.7,442.3,36.7,416.5,36.7z M155.5,61.8h261\nc11.9,0,21.7,9.7,21.7,21.7v206.1l-10-11.8l-56-65.4c-5.9-7-14.5-10.7-23.8-10.9c-9.2,0.1-17.8,4.1-23.7,11.2l-65.9,79.1l-21.5-21.4\nc-12.1-12.1-31.9-12.1-44,0l-49,48.9l-10.4,10V83.5C133.9,71.5,143.6,61.8,155.5,61.8z M366.1,416.5c0,11.9-9.7,21.7-21.7,21.7h-261\nc-11.9,0-21.7-9.7-21.7-21.7v-261c0-11.9,9.7-21.7,21.7-21.7h25.3v210.6c0,25.8,21,46.8,46.8,46.8h210.6V416.5z M163,204.3\nc-5.8-25.8,16.9-48.5,42.7-42.7c13,2.9,23.5,13.4,26.4,26.4c5.8,25.8-16.8,48.5-42.7,42.7C176.4,227.9,165.9,217.3,163,204.3z"}))))},edit:({attributes:e,setAttributes:t})=>{const[s,u]=(0,a.useState)([]),[d,p]=(0,a.useState)([]),[f,g]=(0,a.useState)(!0),w=(0,l.useBlockProps)(),h=async e=>{var a;t({folders:e}),await(a=e,m("GET","/get-attachments-from-folders",{folders:a.toString()})).then((e=>{p(e)})).catch((()=>{console.log(!1)})),t({caption:!0})};return(0,a.useEffect)((()=>{h(e.folders),m("GET","/folders").then((e=>{u(e.tree),g(!1)})).catch((e=>{console.log(e)}))}),[]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{...w},(0,a.createElement)("div",{className:"wp-block-catfolders-block-catfolders-gallery catf-wp-block-gallery"},e.folders.length?(0,a.createElement)(c,{attachments:d,layout:e.layout,columns:e.columns,displayCaption:e.caption}):(0,a.createElement)(r,{mess:window.catfData.i18n.global.error_notice_choose_folder})),(0,a.createElement)(l.InspectorControls,null,(0,a.createElement)(n.Panel,null,(0,a.createElement)(n.PanelBody,{title:window.catfData.i18n.global.gallery_setting,initialOpen:!0},f?(0,a.createElement)(o,null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(i,{folders:s,onChange:h,defaultValue:e.folders}),e.folders.length?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(n.RadioControl,{label:window.catfData.i18n.global.folders_layout_display,name:"layout",selected:e.layout,options:[{label:"Grid",value:"grid"},{label:"Masonry",value:"masonry"}],onChange:e=>t({layout:e})}),(0,a.createElement)(n.RangeControl,{label:window.catfData.i18n.global.folders_columns,value:e.columns,onChange:e=>t({columns:e}),min:1,max:4}),(0,a.createElement)(n.ToggleControl,{label:window.catfData.i18n.global.attachments_caption,checked:e.caption,onChange:e=>{t({caption:e})}})):null))))))},save:()=>null})}},a={};function l(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}};return t[e](o,o.exports,l),o.exports}l.m=t,e=[],l.O=(t,a,n,o)=>{if(!a){var r=1/0;for(m=0;m<e.length;m++){for(var[a,n,o]=e[m],c=!0,s=0;s<a.length;s++)(!1&o||r>=o)&&Object.keys(l.O).every((e=>l.O[e](a[s])))?a.splice(s--,1):(c=!1,o<r&&(r=o));if(c){e.splice(m--,1);var i=n();void 0!==i&&(t=i)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[a,n,o]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[r,c,s]=a,i=0;if(r.some((t=>0!==e[t]))){for(n in c)l.o(c,n)&&(l.m[n]=c[n]);if(s)var m=s(l)}for(t&&t(a);i<r.length;i++)o=r[i],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(m)},a=globalThis.webpackChunkgutenpride=globalThis.webpackChunkgutenpride||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=l.O(void 0,[431],(()=>l(706)));n=l.O(n)})();