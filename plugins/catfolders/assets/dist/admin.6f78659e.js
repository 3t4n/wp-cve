var K=Object.defineProperty;var Q=(t,e,r)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var k=(t,e,r)=>(Q(t,typeof e!="symbol"?e+"":e,r),r);import{p as u,r as z,j as n,a as i,s as y,b as f,c as C,E as X,m as g,I as $,C as Y,M as Z,F as ee,T as te,H as ne,S as R,d as se,e as re,_ as oe,f as ae}from"./SettingBanner.a67b9c6b.js";const ie=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),H=t=>Array.isArray(t)&&t.every(e=>typeof e=="object"&&!(e instanceof Array)),le=t=>Array.isArray(t)&&t.every(e=>Array.isArray(e)),ce=t=>Array.from(t.map(e=>Object.keys(e)).reduce((e,r)=>new Set([...e,...r]),[])),de=(t,e)=>{e=e||ce(t);let r=e,s=e;H(e)&&(r=e.map(c=>c.label),s=e.map(c=>c.key));const o=t.map(c=>s.map(d=>pe(d,c)));return[r,...o]},pe=(t,e)=>{const r=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(s,o,c,d){const l=s[o];if(l==null)d.splice(1);else return l},e);return r===void 0?t in e?e[t]:"":r},ge=t=>typeof t>"u"||t===null?"":t,M=(t,e=",",r='"')=>t.filter(s=>s).map(s=>s.map(o=>ge(o)).map(o=>`${r}${o}${r}`).join(e)).join(`
`),ue=(t,e,r,s)=>M(e?[e,...t]:t,r,s),he=(t,e,r,s)=>M(de(t,e),r,s),fe=(t,e,r,s)=>e?`${e.join(r)}
${t}`:t.replace(/"/g,'""'),V=(t,e,r,s)=>{if(H(t))return he(t,e,r,s);if(le(t))return ue(t,e,r,s);if(typeof t=="string")return fe(t,e,r);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},q=(t,e,r,s,o)=>{const c=V(t,r,s,o),d=ie()?"application/csv":"text/csv",l=new Blob([e?"\uFEFF":"",c],{type:d}),a=`data:${d};charset=utf-8,${e?"\uFEFF":""}${c}`,p=window.URL||window.webkitURL;return typeof p.createObjectURL>"u"?a:p.createObjectURL(l)},G={data:u.exports.oneOfType([u.exports.string,u.exports.array,u.exports.func]).isRequired,headers:u.exports.array,target:u.exports.string,separator:u.exports.string,filename:u.exports.string,uFEFF:u.exports.bool,onClick:u.exports.func,asyncOnClick:u.exports.bool,enclosingCharacter:u.exports.string},W={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},me={target:"_blank"};class E extends z.Component{constructor(e){super(e),this.state={}}buildURI(){return q(...arguments)}componentDidMount(){const{data:e,headers:r,separator:s,enclosingCharacter:o,uFEFF:c,target:d,specs:l,replace:a}=this.props;this.state.page=window.open(this.buildURI(e,c,r,s,o),d,l,a)}getWindow(){return this.state.page}render(){return null}}k(E,"defaultProps",Object.assign(W,me)),k(E,"propTypes",G);class U extends z.Component{constructor(e){super(e),this.buildURI=this.buildURI.bind(this)}buildURI(){return q(...arguments)}handleLegacy(e,r=!1){if(window.navigator.msSaveOrOpenBlob){e.preventDefault();const{data:s,headers:o,separator:c,filename:d,enclosingCharacter:l,uFEFF:a}=this.props,p=r&&typeof s=="function"?s():s;let v=new Blob([a?"\uFEFF":"",V(p,o,c,l)]);return window.navigator.msSaveBlob(v,d),!1}}handleAsyncClick(e){const r=s=>{if(s===!1){e.preventDefault();return}this.handleLegacy(e,!0)};this.props.onClick(e,r)}handleSyncClick(e){if(this.props.onClick(e)===!1){e.preventDefault();return}this.handleLegacy(e)}handleClick(){return e=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(e):this.handleSyncClick(e);this.handleLegacy(e)}}render(){const{data:e,headers:r,separator:s,filename:o,uFEFF:c,children:d,onClick:l,asyncOnClick:a,enclosingCharacter:p,...v}=this.props,S=typeof window>"u"?"":this.buildURI(e,c,r,s,p);return n("a",{download:o,...v,ref:J=>this.link=J,target:"_self",href:S,onClick:this.handleClick(),children:d})}}k(U,"defaultProps",W),k(U,"propTypes",G);const be=U;const x=({header:t,actions:e,children:r})=>i("div",{className:"catf-setting-card",children:[n("div",{className:"catf-setting-card-head",children:t}),n("div",{className:"catf-setting-card-content",children:r}),e&&n("div",{className:"catf-setting-card-actions",children:e})]}),{catfData:h}=window,T=y.div`
  display: flex;
  margin-bottom: 10px;
  align-items: center;
`,_e=()=>{const[t,e]=f.exports.useState([]),[r,s]=f.exports.useState(!1),[o,c]=f.exports.useState(""),[d,l]=f.exports.useState(!1);function a(){s(!0),X.exportCSV().then(m=>{g.success(h.i18n.global.successfully),e(m.folders),s(!1)}).catch(m=>{g.error(h.i18n.global.something_went_wrong),s(!1),console.log(m)})}function p(m){const S=m.target.files;S!=null&&S.length&&c(S[0])}function v(){const m=new FormData;m.append("file",o),l(!0),$.importCSV(m).then(()=>{g.success(h.i18n.global.successfully),l(!1)}).catch(()=>{g.error(h.i18n.global.something_went_wrong),l(!1)})}return n(x,{header:h.i18n.global.backup_and_restore,children:n("table",{className:"form-table backup-restore",children:i("tbody",{children:[i("tr",{children:[n("th",{children:h.i18n.global.export}),i("td",{children:[i(T,{children:[n("button",{onClick:a,className:C("button","button-primary",{"updating-message":r}),style:{marginRight:10},children:h.i18n.global.export_now}),t.length?n(be,{uFEFF:!1,filename:"cat_folder",data:t,children:h.i18n.global.download_csv}):null]}),n("p",{children:h.i18n.global.export_desc})]})]}),i("tr",{children:[n("th",{children:h.i18n.global.import}),i("td",{children:[i(T,{children:[n("input",{type:"file",accept:".csv",onChange:p}),n("button",{style:{display:o?"block":"none"},onClick:v,className:C("button",{"updating-message":d}),children:h.i18n.global.import_now})]}),n("p",{children:h.i18n.global.choose_csv_file_to_import})]})]})]})})})};const{catfData:I}=window,we=()=>{const[t,e]=f.exports.useState(!1);function r(){!confirm(I.i18n.global.are_you_sure_to_delete)||(e(!0),Y.cleanDB().then(()=>{e(!1),location.reload()}).catch(o=>{console.log(o),e(!1)}))}return n(x,{header:I.i18n.global.clear_all_data,actions:n("div",{style:{textAlign:"right"},children:n("button",{onClick:r,className:C("button","button-danger",{"updating-message":t}),style:{pointerEvents:t?"none":"auto"},children:I.i18n.global.clear_now})}),children:n("p",{children:I.i18n.global.this_action_will_delete})})},{catfData:F}=window,ye=()=>{const[t,e]=f.exports.useState(!1);function r(){e(!0),s(1,()=>{g.success(F.i18n.global.successfully),e(!1)},()=>{g.error(F.i18n.global.something_went_wrong),e(!1)})}const s=(o,c,d)=>{Z.generateSize({page:o}).then(l=>{l.success&&(l.next=="1"?s(o+1,c,onerror):c())}).catch(l=>{console.log({err:l}),d!=null&&d()})};return n(x,{header:F.i18n.global.attachment_size,children:i("div",{className:"catf-setting-card-panel",children:[F.i18n.global.generate_size_desc,n("button",{onClick:r,className:C("button","button-primary",{"updating-message":t}),children:F.i18n.global.generate})]})})};const{catfSettings:ve,catfData:_}=window,xe=()=>{const[t,e]=f.exports.useState(!1),[r,s]=f.exports.useState(""),[o,c]=f.exports.useState(ve.pluginsToImport),d=a=>{const p=[...o],v=p.find(m=>m.prefix===a);v&&(v.folder_counter=-1),c(p)};function l(a){s(a),e(!0),$.getFolderStructure(a).then(()=>{$.getAttachmentInFolder(a).then(()=>{$.process(a).then(()=>{g.success(_.i18n.global.successfully),d(a),s(""),e(!1)}).catch(p=>{g.error(_.i18n.global.something_went_wrong),s(""),e(!1),console.log(p)})}).catch(p=>{g.error(_.i18n.global.something_went_wrong),s(""),e(!1),console.log(p)})}).catch(p=>{g.error(_.i18n.global.something_went_wrong),s(""),e(!1),console.log(p)})}return n(x,{header:_.i18n.global.import_from_other_plugin,actions:n("div",{dangerouslySetInnerHTML:{__html:_.i18n.global.more_plugins_to_import}}),children:n("ul",{className:"carf-setting-import-list",children:o.map(a=>i("li",{"data-plugin":a.prefix,className:C("carf-setting-import-item",{success:a.folder_counter==-1}),children:[i("div",{className:"carf-setting-import-item__title",children:[a.plugin_name," (",_.i18n.global.by," ",a.author,")",n("p",{children:a.folder_counter==-1?_.i18n.global.already_imported:a.folder_counter+" "+_.i18n.global.folders_found_to_import})]}),n("button",{onClick:()=>l(a.prefix),disabled:t&&a.prefix!==r||a.folder_counter==-1,className:C("button","button-primary",{"updating-message":t&&a.prefix===r}),children:_.i18n.global.import_now})]},a.prefix))})})},A=y.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;

  button {
    font-weight: 400;
  }

  h4 {
    font-size: 15px;
    margin: 0;
  }

  svg {
    width: 24px;
  }
`,Se=y.p.attrs({className:"description"})`
  display: flex;
  .description-icon {
    display: inline-flex;
    align-items: center;
    svg {
      width: 16px;
      fill: #2271b1;
    }
  }
`,Ce=y.div`
  img {
    width: 480px;
  }
`;y.hr`
  margin: 10px 0;
  border-top: 1px solid rgb(226, 228, 231);
`;const j=({name:t,onChange:e,checked:r})=>{function s(o){e({name:t,value:o.target.checked})}return i("div",{className:"catf-switch-wrapper",children:[n("input",{onChange:s,checked:r,id:t,type:"checkbox"}),n("label",{htmlFor:t})]})},{catfData:w}=window,L=window.catfSettings.globalSettings,ke=()=>{const[t,e]=f.exports.useState(L.userrestriction),[r,s]=f.exports.useState(L.allowsvgupload);function o(l){e(!t),R.globalSetting(l).then(()=>{g.success(w.i18n.global.save_successfully)}).catch(a=>{g.error(w.i18n.global.something_went_wrong),console.log(a)})}function c(l){s(!r),R.globalSetting(l).then(()=>{g.success(w.i18n.global.save_successfully)}).catch(a=>{g.error(w.i18n.global.something_went_wrong),console.log(a)})}const d=`${window.catfData.pluginUrl}assets/img/${t?"personal_folder_helper.jpg":"common_folder_helper.jpg"}`;return i(ee,{children:[i(A,{children:[n("h4",{children:w.i18n.global.user_based_folders}),n(j,{checked:t,name:"userrestriction",onChange:o})]}),i(Se,{children:[t?w.i18n.global.personal_folder_helper:w.i18n.global.common_folder_helper,n(te,{overlayStyle:{maxWidth:500},autoAdjustOverflow:!0,arrow:!0,title:n(Ce,{children:n("img",{src:d,alt:"helper image"})}),children:n("span",{className:"description-icon",children:n(ne,{})})})]}),n("div",{dangerouslySetInnerHTML:{__html:w.i18n.global.view_our_document}}),i(A,{children:[n("h4",{style:{marginTop:"1rem"},children:w.i18n.global.allow_svg_upload_sanitization}),n(j,{checked:r,name:"allowsvgupload",onChange:c})]})]})},{catfData:Fe}=window,Ie=()=>n(x,{header:n(A,{children:Fe.i18n.global.media_folder_access}),children:n(ke,{})}),{catfData:De}=window,$e=()=>n(x,{header:De.i18n.global.license,children:n(se,{})});const{catfData:b}=window,Ne=y.div`
  display: flex;
  align-items: center;
  height: 100%;
  img {
    width: 80%;
    display: block;
    margin: auto;
    @media (max-width: 575px) {
      width: 50%;
    }
  }
`,N=y.ul`
  list-style: disc;
  padding-left: 20px;
`,Ue=y.div`
  display: flex;
  flex-wrap: wrap;
`,O=y.div`
  width: 100%;
  @media (min-width: 576px) {
    width: ${t=>t.theme.main};
  }
`;function Ae(){return n(x,{header:b.i18n.global.support,children:i(Ue,{children:[n(O,{theme:{main:"calc(5/12*100%)"},children:n(Ne,{children:n("img",{src:`${window.catfData.pluginUrl}assets/img/mascot.svg`,alt:""})})}),i(O,{theme:{main:"calc(7/12*100%)"},children:[n("h3",{children:b.i18n.global.getting_started}),i(N,{children:[n("li",{children:n("a",{href:"https://wpmediafolders.com/docs/catfolders/licensing/#license",target:"__blank",rel:"noopener noreferrer",children:b.i18n.global.enter_license_key})}),n("li",{children:n("a",{href:"https://wpmediafolders.com/docs/settings/migrate/",target:"__blank",rel:"noopener noreferrer",children:b.i18n.global.import_from_other_plugin_normal})})]}),n("h3",{children:b.i18n.global.need_help}),i(N,{children:[n("li",{children:n("a",{href:"https://wordpress.org/support/plugin/catfolders/",target:"__blank",rel:"noopener noreferrer",children:b.i18n.global.create_support_topic})}),n("li",{children:n("a",{href:"https://wpmediafolders.com/contact/",target:"__blank",rel:"noopener noreferrer",children:b.i18n.global.chat_with_us})})]}),n("h3",{children:b.i18n.global.love}),i(N,{children:[n("li",{children:i("a",{href:"https://wordpress.org/support/plugin/catfolders/reviews/?filter=5",target:"__blank",rel:"noopener noreferrer",children:[b.i18n.global.write_us," \u{1F496}"]})}),i("li",{children:[n("a",{href:"https://feedbo.io/board/catfolders/",target:"__blank",rel:"noopener noreferrer",children:b.i18n.global.send_us_idea})," ",b.i18n.global.to_make_work," \u{1F44B}"]})]})]})]})})}const{catfData:D,wp:Pe,catfSettings:Re}=window,{hooks:Ee}=Pe,{pluginsToImport:Te}=Re;let P=[{id:"settings",name:D.i18n.global.settings,content:n(Ie,{})},{id:"goPro",name:D.i18n.global.go_pro,content:n($e,{})},{id:"import",name:D.i18n.global.tools,content:i("div",{children:[Te.length?n(xe,{}):null,n(ye,{}),n(_e,{}),n(we,{})]})},{id:"support",name:D.i18n.global.support,content:n(Ae,{})}];P=Ee.applyFilters("catf_setting_tabs",P);const B=P,je=window.catfData.pluginUrl+"assets/img/logo.svg",Le=()=>{const[t,e]=f.exports.useState("settings"),r=s=>{e(s)};return i(re,{prefixCls:"catf",theme:{token:{colorPrimary:"#2271b1"}},children:[n("div",{className:"catf-setting-page-head",children:i("nav",{className:"catf-setting-page-tabs-wrapper",children:[i("div",{className:"header-logo",children:[n("img",{src:je}),i("a",{href:"https://wpmediafolders.com/",target:"_blank",rel:"noopener noreferrer",children:["CatFolders",n("sup",{children:oe("lite")})]})]}),B.map(s=>n("a",{onClick:()=>{r(s.id)},className:t===s.id?"active":"",children:s.name},s.id))]})}),n("div",{className:"catf-setting-page",children:n("div",{className:"catf-setting-page-content",children:B.map((s,o)=>n("div",{className:"catf-setting-page-container",style:{visibility:t===s.id?"visible":"hidden",display:t===s.id?"block":"none"},children:s.content},o))})})]})};document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("catf-setting-app");t&&ae.createRoot(t).render(n(Le,{}))});
