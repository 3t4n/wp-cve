<?php	/* ***************************************************** */	// GLOBALS	/* ***************************************************** */	define('DUMMY_METABOX_FIELDS', 'dummy_metabox_fields');	define('DUMMY_METABOX_NONCE',  's0yw345zrtgfd296');		global $dummy_metabox_fields;	$dummy_metabox_fields = array(		'Tab #1' => array(			array(				'name'             => 'List',				'key'              => 'wpkruaclist_',				'type'             => PostMetaManagerFieldType::HTMLList,				'custom_vars' => array(					'sortable'         => true,					'max_items'        => 5,					'depth'            => 1				)			),			array(				'type' => PostMetaManagerFieldType::Delimiter,			),					array(				'name'             => 'List',				'key'              => 'wpkruaclist_2',				'type'             => PostMetaManagerFieldType::HTMLList,				'custom_vars' => array(					'sortable'         => true,					'max_items'        => 5,					'depth'            => 1				)			),			array(				'type' => PostMetaManagerFieldType::Delimiter,			),							array(				'name'    => 'RadioButtons',				'key'     => 'radbut',				'type'    => PostMetaManagerFieldType::RadioButtons,				'options' => array(					array(						'key'   => 'Kurac',						'value' => 'kurac'					),					array(						'key'   => 'Palac',						'value' => 'palac'					),					array(						'key'   => 'Kurac',						'value' => 'kurac'					),					array(						'key'   => 'Kriminalac',						'value' => 'kriminalac'					),					array(						'key'   => 'Mutni Jozo',						'value' => 'mutni_jozo'					)				)			),			array(				'type' => PostMetaManagerFieldType::Delimiter,			),			array(				'name'             => 'Drop down',				'key'              => 'sdfjhgiucxvz8redg',				'type'             => PostMetaManagerFieldType::DropDown,				'custom_vars' => array(					'items'            => array('c' => 'c', 'd' => 'd')				)							),				array(				'type' => PostMetaManagerFieldType::Delimiter,			),				array(				'name'             => 'Drop down',				'key'              => 'sdfbcvbxvz8redg',				'type'             => PostMetaManagerFieldType::DropDown,				'custom_vars' => array(					'items'            => array('c' => array('c1' =>'c1', 'd1' => 'd1'), 'd' => array('c2' =>'c2', 'd2' => 'd2'), 'e' => array('c3' =>'c3', 'd3' => 'd3')),					'has_groups'       => true				)							),				array(				'type' => PostMetaManagerFieldType::Delimiter,			),							array(				'name'        => 'Media file upload',				'key'         => 'mfo',				'type'        => PostMetaManagerFieldType::MediaFileUpload,				'custom_vars' => array(					'is_featured_img' => false, // if ($key == DUMMY_META_CONGRESS_FEAT_IMG) update_post_meta($post_id, '_thumbnail_id', $value);					'library'         => 'image',					'multiple'        => false,					'title'           => 'Pick a motherfucking image',				)			),			array(				'type' => PostMetaManagerFieldType::Delimiter,			),							array(				'name'             => 'Navigation Pages',				'key'              => 'asdxcvxcgredg',				'type'             => PostMetaManagerFieldType::NestablePicker,				'custom_vars' => array(					'sortable'         => true,					'max_items'        => 5,					'depth'            => 2,					'items'            => array('a' => 'a', 'b' => 'b')				)							),				array(				'type' => PostMetaManagerFieldType::Delimiter,			),					),		'Tab #2' => array(			array(				'name' => 'Year',				'key'  => 'year',				'type' => PostMetaManagerFieldType::Textbox			),			array(				'type' => PostMetaManagerFieldType::Delimiter,			),			array(				'name'        => 'Date',				'key'         => 'date',				'type'        => PostMetaManagerFieldType::WPEditor,				'custom_vars' => array(					'media_buttons' => true				)			),			array(				'type' => PostMetaManagerFieldType::Delimiter,			),						array(				'name'        => 'Kurac',				'key'         => 'kurac',				'type'        => PostMetaManagerFieldType::Checkbox,				'custom_vars' => array(					'label' => 'kurac'				)			),			array(				'type' => PostMetaManagerFieldType::Delimiter,			),						array(				'name'        => 'govno',				'key'         => 'govno',				'type'        => PostMetaManagerFieldType::Checkbox,				'custom_vars' => array(					'label' => 'govno'				)			)					)	);		/* ***************************************************** */	// ADD CUSTOM FIELDS META BOX	/* ***************************************************** */	function dummy_add_metabox_fields() {		add_meta_box('dummy_render_metabox_fields', 'Congress Options', 'dummy_render_metabox_fields', CPT_DUMMY_POST, 'normal', 'high');	}		function dummy_render_metabox_fields() {		global $post, $dummy_metabox_fields;		wp_nonce_field($post->post_type . '_verification', DUMMY_METABOX_NONCE);		$meta = get_post_meta($post->ID);		$pmm = new PostMetaManager(DUMMY_METABOX_FIELDS, $meta);		if (count($dummy_metabox_fields) > 0) {		?>						<?php foreach ($dummy_metabox_fields as $field_name => $fields) { ?>				<div id="<?php _e(sanitize_title($field_name)) ?>">					<?php						$pmm->start();						foreach ($fields as $field_data) $pmm->add_fields($field_data);						$pmm->end();						$pmm->flush();					?>				</div>			<?php } ?>								<!--			<div id="options-tabs" style="visibility: hidden;">				<ul>					<?php foreach ($dummy_metabox_fields as $field_name => $field_data) { ?>						<li><a href="#<?php _e(sanitize_title($field_name)) ?>"><?php _e($field_name) ?></a></li>					<?php } ?>				</ul>				<?php foreach ($dummy_metabox_fields as $field_name => $fields) { ?>					<div id="<?php _e(sanitize_title($field_name)) ?>">						<?php						$pmm->start();						foreach ($fields as $field_data) $pmm->add_fields($field_data);						$pmm->end();						$pmm->flush();						?>					</div>				<?php } ?>			</div>			<script type="text/javascript">				jQuery(function ($)				{					$("#options-tabs").tabs().css("visibility", "visible");					// if (adminpage == "post-new-php") $("#options-tabs").tabs("disable");				});			</script>			-->		<?php		}	}		add_action('add_meta_boxes', 'dummy_add_metabox_fields');		/* ***************************************************** */	// SAVE CUSTOM FIELDS	/* ***************************************************** */	function dummy_save_metabox_fields($post_id) {		$post_type = get_post_type($post_id);				if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) 			return;		if (!wp_verify_nonce($_POST[DUMMY_METABOX_NONCE], $post_type . '_verification'))			return;			if ($_POST['post_type'] == CPT_DUMMY_POST) {			if (!current_user_can('edit_page', $post_id))				return;		}				$fields = isset($_POST[DUMMY_METABOX_FIELDS]) ? $_POST[DUMMY_METABOX_FIELDS] : array();// print_r($fields);// die();		foreach ($fields as $key => $value) {			$value = PostMetaManagerHelper::sanitize_meta_for_db_input($value);			update_post_meta($post_id, $key, $value);		}	}		add_action('save_post', 'dummy_save_metabox_fields');?>