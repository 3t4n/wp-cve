!function(p,t,o){"use strict";p.yit_popup=function(i,e){var n={popup_class:"ypop",content:"",delay:0,position:"center",mobile:!1},s=this;s.settings={};var a=p(i);s.init=function(){s.settings=p.extend({},n,e),l(),r()};var r=function(){p(o).on("touchstart click",".ypop-overlay",(function(t){(p(t.target).hasClass("close")||0==p(t.target).parents(".ypop-overlay").length)&&c()})).on("keyup",(function(p){27==p.keyCode&&c()})).on("click",".ypop-wrapper a.close",(function(){c()})),p(t).on("resize",(function(){u()})),p("html").removeClass("yit-opened"),d()},l=function(){0==p("body").find(".ypop-modal").length?s.bigwrapper=p("<div />",{class:"ypop-modal"}).prependTo("body"):s.bigwrapper=p("body").find(".ypop-modal"),0==s.bigwrapper.find(".ypop-overlay").length?s.overlay=p("<div />",{class:"ypop-overlay"}).appendTo(s.bigwrapper):s.overlay=s.bigwrapper.find(".ypop-overlay"),0==s.bigwrapper.find(".ypop-wrapper").length?s.popup=p("<div />",{class:"ypop-wrapper "+s.settings.popup_class}).appendTo(s.bigwrapper):s.popup=s.bigwrapper.find(".ypop-wrapper"),0==s.popup.find(".close").length?s.close=p("<a />",{class:"close"}).appendTo(s.popup):s.close=s.popup.find(".close")},u=function(){var p=s.popup.outerWidth();s.popup.outerHeight();s.settings.mobile&&((s.popup.outerHeight()>jQuery(t).height()-120||s.popup.outerWidth()>jQuery(t).width()-60)&&(p=jQuery(t).width()-60),s.popup.css({width:p+"px",height:"auto"})),"center"==s.settings.position?s.popup.css({position:"fixed",top:Math.max(0,(jQuery(t).height()-s.popup.outerHeight())/2-50)+"px",left:Math.max(0,(jQuery(t).width()-p)/2)+"px"}):"left-top"==s.settings.position?s.popup.css({position:"fixed",top:" 0px",left:"0px"}):"left-bottom"==s.settings.position?s.popup.css({position:"fixed",bottom:" 0px",left:"0px"}):"right-bottom"==s.settings.position?s.popup.css({position:"fixed",bottom:" 0px",right:"0px"}):"right-top"==s.settings.position&&s.popup.css({position:"fixed",top:" 0px",right:"0px"})},d=function(){s.settings.delay>0?setInterval((function(){y(),p(".ypop-modal").addClass("open"),u()}),s.settings.delay):(y(),p(".ypop-modal").addClass("open"),u())},c=function(){a.trigger("close.ypop"),p(".ypop-modal").removeClass("open"),h()},h=function(){s.popup.remove(),s.overlay.remove()},y=function(){""!=s.settings.content?s.popup.html(s.settings.content):a.data("container")?s.popup.html(p(a.data("container")).html()):a.data("content")?s.popup.html(a.data("content")):a.attr("title")?s.popup.html(a.attr("title")):s.popup.html(""),s.popup.find("form, input, label, a").each((function(){if(void 0!==p(this).attr("id")){var t=p(this).attr("id")+"_ypop";p(this).attr("id",t)}if(void 0!==p(this).attr("for")){t=p(this).attr("for")+"_ypop";p(this).attr("for",t)}})),0==s.overlay.find(".close").length?s.close=p("<a />",{class:"close"}).appendTo(s.popup):s.close=s.overlay.find(".close")};s.init()},p.fn.yit_popup=function(t){return this.each((function(){if(void 0===p(this).data("yit_popup")){var o=new p.yit_popup(this,t);p(this).data("yit_popup",o)}}))}}(jQuery,window,document);