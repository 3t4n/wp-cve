{"version":3,"file":"embed-privacy.min.js","mappings":"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","sources":["webpack://embed-privacy/./assets/js/embed-privacy.js"],"sourcesContent":["/**\n * Embed Privacy JavaScript functions.\n * \n * @author\tEpiphyt\n * @license\tGPL2\n * @package\tepiphyt\\Embed_Privacy\n */\ndocument.addEventListener( 'DOMContentLoaded', function() {\n\tvar checkboxes = document.querySelectorAll( '.embed-privacy-inner .embed-privacy-input' );\n\tvar labels = document.querySelectorAll( '.embed-privacy-inner .embed-privacy-label' );\n\tvar overlays = document.querySelectorAll( '.embed-privacy-overlay' );\n\tvar overlayLinks = document.querySelectorAll( '.embed-privacy-overlay a' );\n\t\n\tfor ( var i = 0; i < overlays.length; i++ ) {\n\t\toverlays[ i ].addEventListener( 'click', function( event ) {\n\t\t\tif ( event.currentTarget.tagName !== 'INPUT' ) {\n\t\t\t\toverlayClick( event.currentTarget );\n\t\t\t}\n\t\t} );\n\t\t\n\t\tvar button = overlays[ i ].parentNode.querySelector( '.embed-privacy-enable' );\n\t\t\n\t\tif ( ! button ) {\n\t\t\tcontinue;\n\t\t}\n\t\t\n\t\tbutton.addEventListener( 'click', function( event ) {\n\t\t\toverlayClick( event.currentTarget.parentNode.querySelector( '.embed-privacy-overlay' ) );\n\t\t\tevent.currentTarget.parentNode.removeChild( event.currentTarget ); // IE11 doesn't support .remove()\n\t\t} );\n\t\tbutton.addEventListener( 'keypress', function( event ) {\n\t\t\tif ( event.code === 'Enter' || event.code === 'Space' ) {\n\t\t\t\tevent.preventDefault(); // prevent space from scrolling the page\n\t\t\t\toverlayClick( event.currentTarget.parentNode.querySelector( '.embed-privacy-overlay' ) );\n\t\t\t\tevent.currentTarget.parentNode.removeChild( event.currentTarget ); // IE11 doesn't support .remove()\n\t\t\t}\n\t\t} );\n\t}\n\t\n\tif ( embedPrivacy.javascriptDetection === 'yes' ) {\n\t\tenableAlwaysActiveProviders();\n\t}\n\t\n\toptOut();\n\tsetMinHeight();\n\t\n\twindow.addEventListener( 'resize', function() {\n\t\tsetMinHeight();\n\t} );\n\t\n\tfor ( var i = 0; i < overlayLinks.length; i++ ) {\n\t\toverlayLinks[ i ].addEventListener( 'click', function( event ) {\n\t\t\t// don't trigger the overlays click\n\t\t\tevent.stopPropagation();\n\t\t} );\n\t}\n\t\n\tfor ( var i = 0; i < checkboxes.length; i++ ) {\n\t\tcheckboxes[ i ].addEventListener( 'click', function( event ) {\n\t\t\t// don't trigger the overlays click\n\t\t\tevent.stopPropagation();\n\t\t\t\n\t\t\tcheckboxActivation( event.currentTarget );\n\t\t} );\n\t}\n\t\n\tfor ( var i = 0; i < labels.length; i++ ) {\n\t\tlabels[ i ].addEventListener( 'click', function( event ) {\n\t\t\t// don't trigger the overlays click\n\t\t\tevent.stopPropagation();\n\t\t} );\n\t}\n\t\n\t/**\n\t * Clicking on a checkbox to always enable/disable an embed provider.\n\t * \n\t * @since\t1.2.0\n\t * \n\t * @param\t{element}\ttarget Target element\n\t */\n\tfunction checkboxActivation( target ) {\n\t\tvar embedProvider = target.getAttribute( 'data-embed-provider' );\n\t\tvar cookie = ( get_cookie( 'embed-privacy' ) ? JSON.parse( get_cookie( 'embed-privacy' ) ) : '' );\n\t\t\n\t\tif ( target.checked ) {\n\t\t\t// add|update the cookie's value\n\t\t\tif ( cookie !== null && Object.keys( cookie ).length !== 0 && cookie.constructor === Object ) {\n\t\t\t\tcookie[ embedProvider ] = true;\n\t\t\t\t\n\t\t\t\tset_cookie( 'embed-privacy', JSON.stringify( cookie ) );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tset_cookie( 'embed-privacy', '{\"' + embedProvider + '\":true}', 365 );\n\t\t\t}\n\t\t\t\n\t\t\tenableAlwaysActiveProviders();\n\t\t}\n\t\telse if ( cookie !== null ) {\n\t\t\tdelete cookie[ embedProvider ];\n\t\t\t\n\t\t\tif ( Object.keys( cookie ).length !== 0 ) {\n\t\t\t\tset_cookie( 'embed-privacy', JSON.stringify( cookie ), 365 );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tremove_cookie( 'embed-privacy' );\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\t * Check whether to enable an always active provider by default.\n\t * \n\t * @since\t1.2.0\n\t */\n\tfunction enableAlwaysActiveProviders() {\n\t\tvar cookie = ( get_cookie( 'embed-privacy' ) ? JSON.parse( get_cookie( 'embed-privacy' ) ) : '' );\n\t\t\n\t\tif ( cookie === null || ! Object.keys( cookie ).length ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar providers = Object.keys( cookie );\n\t\t\n\t\tfor ( var i = 0; i < overlays.length; i++ ) {\n\t\t\tvar provider = overlays[ i ].parentNode.getAttribute( 'data-embed-provider' );\n\t\t\t\n\t\t\tif ( providers.includes( provider ) ) {\n\t\t\t\toverlays[ i ].click();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\t * Get always active providers from cookie.\n\t * \n\t * @since\t1.4.8\n\t * \n\t * @return\t{string[]} List of always active providers\n\t */\n\tfunction getAlwaysActiveProviders() {\n\t\tconst cookie = ( get_cookie( 'embed-privacy' ) ? JSON.parse( get_cookie( 'embed-privacy' ) ) : '' );\n\t\t\n\t\tif ( ! cookie ) {\n\t\t\treturn [];\n\t\t}\n\t\t\n\t\treturn Object.keys( cookie );\n\t}\n\t\n\t/**\n\t * Opting in/out for embed providers.\n\t * \n\t * @since\t1.2.0\n\t */\n\tfunction optOut() {\n\t\tconst optOutContainer = document.querySelector( '.embed-privacy-opt-out' );\n\t\t\n\t\tif ( ! optOutContainer ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar optOutCheckboxes = optOutContainer.querySelectorAll( '.embed-privacy-opt-out-input' );\n\t\tconst showAll = optOutContainer.getAttribute( 'data-show-all' ) === '1';\n\t\t\n\t\tif ( ! optOutCheckboxes ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tconst alwaysActiveProviders = getAlwaysActiveProviders();\n\t\t\n\t\tfor ( var i = 0; i < optOutCheckboxes.length; i++ ) {\n\t\t\tif ( embedPrivacy.javascriptDetection === 'yes' && alwaysActiveProviders.indexOf( optOutCheckboxes[ i ].getAttribute( 'data-embed-provider' ) ) !== -1 ) {\n\t\t\t\toptOutCheckboxes[ i ].checked = true;\n\t\t\t}\n\t\t\telse if ( embedPrivacy.javascriptDetection === 'yes' && ! showAll ) {\n\t\t\t\toptOutCheckboxes[ i ].parentNode.classList.add( 'is-hidden' );\n\t\t\t\t\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\toptOutCheckboxes[ i ].addEventListener( 'click', function( event ) {\n\t\t\t\tvar currentTarget = event.currentTarget;\n\t\t\t\t\n\t\t\t\tif ( ! currentTarget ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ( currentTarget.checked ) {\n\t\t\t\t\tcurrentTarget.classList.add( 'is-enabled' );\n\t\t\t\t\tcurrentTarget.classList.remove( 'is-disabled' );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcurrentTarget.classList.add( 'is-disabled' );\n\t\t\t\t\tcurrentTarget.classList.remove( 'is-enabled' );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcheckboxActivation( currentTarget );\n\t\t\t} );\n\t\t}\n\t\t\n\t\tconst nonHiddenProviders = optOutContainer.querySelectorAll( '.embed-privacy-provider:not(.is-hidden)' );\n\t\t\n\t\t// remove the container completely if there is no provider to display\n\t\tif ( ! showAll && ! nonHiddenProviders.length ) {\n\t\t\toptOutContainer.remove();\n\t\t}\n\t}\n\t\n\t/**\n\t * Clicking on an overlay.\n\t * \n\t * @since\t1.2.0\n\t * \n\t * @param\t{element}\ttarget Target element\n\t */\n\tfunction overlayClick( target ) {\n\t\tvar embedContainer = target.parentNode;\n\t\tvar embedContent = target.nextElementSibling;\n\t\t\n\t\tembedContainer.classList.remove( 'is-disabled' );\n\t\tembedContainer.classList.add( 'is-enabled' );\n\t\t// hide the embed overlay\n\t\ttarget.style.display = 'none';\n\t\t// get stored content from JavaScript\n\t\tvar embedObject = JSON.parse( window[ '_' + target.parentNode.getAttribute( 'data-embed-id' ) ] );\n\t\t\n\t\tembedContent.innerHTML = htmlentities_decode( embedObject.embed );\n\t\t\n\t\t// reset wrapper inline CSS set in setMinHeight()\n\t\tvar wrapper = embedContainer.parentNode;\n\t\t\n\t\tif ( wrapper.classList.contains( 'wp-block-embed__wrapper' ) ) {\n\t\t\twrapper.style.removeProperty( 'height' );\n\t\t}\n\t\t\n\t\t// get all script tags inside the embed\n\t\tvar scriptTags = embedContent.querySelectorAll( 'script' );\n\t\t\n\t\t// insert every script tag inside the embed as a new script\n\t\t// to execute it\n\t\tfor ( var n = 0; n < scriptTags.length; n++ ) {\n\t\t\tvar element = document.createElement( 'script' );\n\t\t\t\n\t\t\tif ( scriptTags[ n ].src ) {\n\t\t\t\t// if script tag has a src attribute\n\t\t\t\telement.src = scriptTags[ n ].src;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// if script tag has content\n\t\t\t\telement.innerHTML = scriptTags[ n ].innerHTML;\n\t\t\t}\n\t\t\t\n\t\t\t// append it to body\n\t\t\tembedContent.appendChild( element );\n\t\t}\n\t\t\n\t\tif ( typeof jQuery !== 'undefined' ) {\n\t\t\tconst videoShortcode = jQuery( '.wp-video-shortcode' );\n\t\t\t\n\t\t\tif ( videoShortcode.length ) {\n\t\t\t\tvideoShortcode.mediaelementplayer();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\t * Calculate min height of the embed wrapper depending of the overlay content.\n\t */\n\tfunction setMinHeight() {\n\t\tfor ( var i = 0; i < overlays.length; i++ ) {\n\t\t\tvar wrapper = overlays[ i ].parentNode.parentNode;\n\t\t\t\n\t\t\tif ( ! wrapper.classList.contains( 'wp-block-embed__wrapper' ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\twrapper.style.removeProperty( 'height' );\n\t\t\t\n\t\t\tif ( wrapper.offsetHeight < overlays[ i ].offsetHeight ) {\n\t\t\t\twrapper.style.height = overlays[ i ].offsetHeight + 'px';\n\t\t\t}\n\t\t}\n\t}\n} );\n\n/**\n * Get a cookie.\n * \n * @link\thttps://stackoverflow.com/a/24103596/3461955\n * \n * @param\t{string}\tname The name of the cookie\n */\nfunction get_cookie( name ) {\n\tvar nameEQ = name + '=';\n\tvar ca = document.cookie.split( ';' );\n\tfor ( var i = 0; i < ca.length; i++ ) {\n\t\tvar c = ca[ i ];\n\t\twhile ( c.charAt( 0 ) == ' ' ) c = c.substring( 1, c.length );\n\t\tif ( c.indexOf( nameEQ ) == 0 ) return c.substring( nameEQ.length, c.length );\n\t}\n\treturn null;\n}\n\n/**\n * Decode a string with HTML entities.\n * \n * @param\t{string}\tcontent The content to decode\n * @return\t{string} The decoded content\n */\nfunction htmlentities_decode( content ) {\n\tvar textarea = document.createElement( 'textarea' );\n\t\n\ttextarea.innerHTML = content;\n\t\n\treturn textarea.value;\n}\n\n/**\n * Remove a cookie.\n * \n * @link\thttps://stackoverflow.com/a/24103596/3461955\n * \n * @param\t{string}\tname The name of the cookie\n */\nfunction remove_cookie( name ) {\n\tdocument.cookie = name + '=; expires=0; path=/';\n}\n\n/**\n * Set a cookie.\n * \n * @link\thttps://stackoverflow.com/a/24103596/3461955\n * \n * @param\t{string}\tname The name of the cookie\n * @param\t{string}\tvalue The value of the cookie\n * @param\t{number}\tdays The expiration in days\n */\nfunction set_cookie( name, value, days ) {\n\tvar expires = '';\n\tif ( days ) {\n\t\tvar date = new Date();\n\t\tdate.setTime( date.getTime() + ( days * 24 * 60 * 60 * 1000 ) );\n\t\texpires = '; expires=' + date.toUTCString();\n\t}\n\tdocument.cookie = name + '=' + ( value || '' ) + expires + '; path=/';\n}\n"],"names":["get_cookie","name","nameEQ","ca","document","cookie","split","i","length","c","charAt","substring","indexOf","set_cookie","value","days","expires","date","Date","setTime","getTime","toUTCString","addEventListener","checkboxes","querySelectorAll","labels","overlays","overlayLinks","event","currentTarget","tagName","overlayClick","button","parentNode","querySelector","removeChild","code","preventDefault","embedPrivacy","javascriptDetection","enableAlwaysActiveProviders","optOutContainer","optOutCheckboxes","showAll","getAttribute","alwaysActiveProviders","JSON","parse","Object","keys","getAlwaysActiveProviders","checked","classList","add","remove","checkboxActivation","nonHiddenProviders","optOut","setMinHeight","window","stopPropagation","target","embedProvider","constructor","stringify","providers","provider","includes","click","embedContainer","embedContent","nextElementSibling","style","display","content","textarea","embedObject","innerHTML","embed","createElement","wrapper","contains","removeProperty","scriptTags","n","element","src","appendChild","jQuery","videoShortcode","mediaelementplayer","offsetHeight","height"],"sourceRoot":""}