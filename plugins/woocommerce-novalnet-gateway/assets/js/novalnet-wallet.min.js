!function(t){wc_novalnet_wallet={initiate_wallet:function(e,a){var n=a+"Instance";if(void 0!==e){n=NovalnetPayment().createPaymentObject();var o=a.toUpperCase();n.setPaymentIntent(wc_novalnet_wallet.walletPaymentRequest(e,o)),n.isPaymentMethodAvailable((function(o){if(o){t("#"+e).empty(),n.addPaymentButton("#"+e),t(".wallet_seperator").show();var _="#product_page_"+a+"_button";if(["product_page_googlepay_button","product_page_applepay_button"].includes(e)){var p=jQuery(_).width()-5+"px";"applepay"==a?t("#product_page_applepay_button").find("apple-pay-button").css({width:p}):t("#product_page_googlepay_button").find("button").css({width:p})}else["mini_cart_page_applepay_button","mini_cart_page_googlepay_button"].includes(e)?"mini_cart_page_applepay_button"==e?t("#mini_cart_page_applepay_button").find("apple-pay-button").css({"min-width":"84%",width:"84%","margin-left":"7.6%"}):t("#mini_cart_page_googlepay_button").find("button").css({"min-width":"85%",width:"20%","margin-left":"7%"}):["shopping_cart_page_applepay_button","checkout_page_applepay_button","guest_checkout_page_applepay_button","paylater_page_applepay_button"].includes(e)?t("#shopping_cart_page_applepay_button, #checkout_page_applepay_button, #guest_checkout_page_applepay_button, #paylater_page_applepay_button").find("apple-pay-button").css({width:"100%"}):t("#shopping_cart_page_googlepay_button, #checkout_page_googlepay_button, #guest_checkout_page_googlepay_button","#paylater_page_googlepay_button").find("button").css({width:"100%"})}else t("#"+e).hide()}))}},walletPaymentRequest:function(e,a){if("applepay"==a.toLowerCase())var n=my_ajax_object.applepay_setting.apple_pay_button_height,o=my_ajax_object.applepay_setting.apple_pay_button_theme,_=my_ajax_object.applepay_setting.apple_pay_button_type,p=t("<textarea/>").html(my_ajax_object.applepay_setting.seller_name).text(),i=my_ajax_object.applepay_setting.apple_pay_button_corner_radius,l="yes"==my_ajax_object.applepay_setting.enforce_3d,r="yes"==my_ajax_object.applepay_setting.test_mode?"SANDBOX":"PRODUCTION",d="border-box";else{n=my_ajax_object.googlepay_setting.google_pay_button_height,_=my_ajax_object.googlepay_setting.google_pay_button_type,p=t("<textarea/>").html(my_ajax_object.googlepay_setting.seller_name).text(),l="yes"==my_ajax_object.googlepay_setting.enforce_3d;var s=my_ajax_object.googlepay_setting.partner_id;r="yes"==my_ajax_object.googlepay_setting.test_mode?"SANDBOX":"PRODUCTION",i=0,d="fill"}var u=["postalAddress","phone","email"],c=e.indexOf("product_page")>-1?t("#product_has_virtual_product").val():t("#cart_has_virtual").val();if(1==c)u=["email"];var y={width:"auto",cornerRadius:parseInt(i),height:parseInt(n)},g="1"==t("#setpending").val()||1==c,m={clientKey:my_ajax_object.client_key,paymentIntent:{transaction:{amount:String(t("#"+e).attr("data-total")),currency:String(t("#"+e).attr("data-currency")),paymentMethod:a,enforce3d:l,environment:r,setPendingPayment:g},merchant:{countryCode:String(t("#"+e).attr("data-country")),paymentDataPresent:!1},custom:{lang:String(t("#"+e).attr("data-storeLang"))},order:{paymentDataPresent:!1,merchantName:p,lineItems:JSON.parse(t("#novalnet_wallet_article_details").val()),billing:{requiredFields:["postalAddress","phone","email"]},shipping:{requiredFields:u,methodsUpdatedLater:!0}},button:{dimensions:y,locale:String(t("#"+e).attr("data-storeLang")),type:_,boxSizing:d},callbacks:{onProcessCompletion:function(e,n){if("SUCCESS"==e.result.status){e={response:e};var o={action:"novalnet_order_creation",payment:a.toLowerCase(),variable_name:e};""!==t("#pay_for_order_id").val()&&(o.pay_for_order_id=t("#pay_for_order_id").val()),1==c&&(o.is_virtual_order=1),t.ajax({url:my_ajax_object.ajax_url,type:"POST",data:o,success:function(t){"success"==t.result?(n({status:"SUCCESS",statusText:""}),wc_novalnet_wallet.blockDocumentBody(),window.location.replace(t.redirect)):"error"==t.result&&(n({status:"FAILURE",statusText:t.redirect}),"applepay"==a.toLowerCase()&&alert(t.redirect))},error:function(t){alert(t.responseText)}})}},onShippingContactChange:function(a,n){var o={address:a},_={action:"novalnet_shipping_address_update",shippingInfo:JSON.stringify(o),shippingAddressChange:"1",simple_product_id:t("#novalnet_product_id").val(),variable_product_id:t("input[name=product_id]").val(),variable_variant_id:t("input[name=variation_id]").val(),source_page:e};t.ajax({url:my_ajax_object.ajax_url,type:"POST",data:_,success:function(t){let e={};0==t.shipping_address.length?e.methodsNotFound="There are no shipping options available. Please ensure that your address has been entered correctly, or contact us if you need any help.":null!=t.shipping_address&&t.shipping_address.length&&(e.amount=t.amount,e.lineItems=t.article_details,e.methods=t.shipping_address,e.defaultIdentifier=t.shipping_address[0].identifier),n(e)}})},onShippingMethodChange:function(e,a){var n={shippingMethod:e},o={action:"novalnet_shipping_method_update",shippingInfo:JSON.stringify(n),shippingAddressChange:"1"};t.ajax({url:my_ajax_object.ajax_url,type:"POST",data:o,success:function(t){var e={amount:t.amount,lineItems:t.order_info};a(e)}})},onPaymentButtonClicked:function(a){if(""==t("#pay_for_order_id").val()){let o=t(".single_add_to_cart_button").attr("class");if(null!=o){let _=["product_page_googlepay_button","mini_cart_page_googlepay_button","product_page_applepay_button","mini_cart_page_applepay_button"];if(_.includes(e)&&o.includes("wc-variation-selection-needed"))return t(".single_add_to_cart_button").click(),a({status:"FAILURE"}),!1;if(1==c&&_.includes(e)){var n={action:"add_virtual_product_in_cart",simple_product_id:t("#novalnet_product_id").val(),variable_product_id:t("input[name=product_id]").val(),variable_variant_id:t("input[name=variation_id]").val()};t.ajax({url:my_ajax_object.ajax_url,type:"POST",data:n,success:function(t){console.log("Product added")}})}a({status:"SUCCESS"})}else a({status:"SUCCESS"})}else a({status:"SUCCESS"})}}}};return"googlepay"==a.toLowerCase()?((1==c||t("#pay_for_order").val()||1==t("#cart_has_one_time_shipping").val())&&delete m.paymentIntent.order.shipping,delete m.paymentIntent.button.dimensions.cornerRadius,m.paymentIntent.merchant.partnerId=s):(m.paymentIntent.button.style=o,delete m.paymentIntent.transaction.enforce3d),"applepay"!=a.toLowerCase()||1!=c&&!t("#pay_for_order").val()||delete m.paymentIntent.order.shipping.methodsUpdatedLater,m},blockDocumentBody:function(){1!==t(document.body).data("blockUI.isBlocked")&&t(document.body).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},walletInitiator:function(){var e=jQuery("div").find('[data-id = "googlepay_wallet_button"]').attr("id");t("#"+e).empty(),null!=e&&null!=t("#novalnet_wallet_article_details").val()&&wc_novalnet_wallet.initiate_wallet(e,"googlepay");e=jQuery("div").find('[data-id = "applepay_wallet_button"]').attr("id");t("#"+e).empty(),null!=e&&null!=t("#novalnet_wallet_article_details").val()&&wc_novalnet_wallet.initiate_wallet(e,"applepay")}},t(document).ready((function(){t(document.body).on("update_checkout wc_fragments_refreshed updated_cart_totals",(function(t){wc_novalnet_wallet.walletInitiator()})),t(document.body).on("mouseenter",".cart-contents",(function(){var e;null!=(e=jQuery("div").find('[data-id = "googlepay_wallet_button"]').attr("id"))&&"mini_cart_page_googlepay_button"==e&&(t("#mini_cart_page_googlepay_button :button").remove(),wc_novalnet_wallet.initiate_wallet(e,"googlepay")),null!=(e=jQuery("div").find('[data-id = "applepay_wallet_button"]').attr("id"))&&"mini_cart_page_applepay_button"==e&&(t("#mini_cart_page_applepay_button :button").remove(),wc_novalnet_wallet.initiate_wallet(e,"applepay"))}))}))}(jQuery);