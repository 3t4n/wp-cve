if(mo_oauth_ajax_object.app)var app=JSON.parse(mo_oauth_ajax_object.app);var last_step=4,final_step=3,mo_oauth_test_ajax_count=0;function mooauth_client_default_apps_input_filter(){var e,o,t,a,s,l,m=0;for(l=0,o=(e=document.getElementById("mo_oauth_client_default_apps_search")).value.toUpperCase(),a=(t=document.getElementById("mo_oauth_client_searchable_apps")).getElementsByTagName("li");l<a.length;l++)void 0!=(s=a[l].getElementsByTagName("a")[0])&&s.innerHTML.split("<br>")[1].toUpperCase().indexOf(o)>-1?a[l].style.display="":(a[l].style.display="none",m++),m>=a.length?(document.getElementById("mo_oauth_client_search_res").innerHTML="<p class='lead muted mo_premium_features_notice'>It looks like your identity provider is not listed below, you can select Custom OAuth 2.0 or OpenID to configure the plugin. Please send us query using support form given aside for more details.</p>",a[1].style.display="",a[2].style.display="",a[3].style.display=""):document.getElementById("mo_oauth_client_search_res").innerHTML=""}function mooauth_auto_fill_form(){if(null!=app&&(null!=app.mo_oauth_appId||void 0!=app.mo_oauth_appId)){if(mooauth_get_step(app.mo_oauth_step),jQuery("#appId").val(app.mo_oauth_appId),jQuery("#displayName").val(app.mo_oauth_app_name),jQuery("#moauth_show_desc").html('This will displayed on SSO login button as<b> "Login with '+app.mo_oauth_app_name+'"</b>. The entire button name is customizable in paid versions.'),void 0!=app.mo_oauth_scopes_list&&""!=app.mo_oauth_scopes_list){if(Array.isArray(app.mo_oauth_scopes_list))var e=app.mo_oauth_scopes_list;else var e=JSON.parse(app.mo_oauth_scopes_list);jQuery(".ui.fluid.dropdown").dropdown({values:e}),jQuery("#scope_list").val(app.mo_oauth_scopes_list)}else jQuery(".ui.fluid.dropdown").dropdown({values:[]}),jQuery("#scope_list").val("");if(void 0!=app.mo_oauth_scopes&&""!=app.mo_oauth_scopes&&'[""]'!=app.mo_oauth_scopes){if(console.log("on load"),console.log(app.mo_oauth_scopes),Array.isArray(app.mo_oauth_scopes))var o=app.mo_oauth_scopes;else var o=JSON.parse(app.mo_oauth_scopes);console.log("after parse"),console.log(app.mo_oauth_scopes),jQuery(".ui.dropdown.fluid").dropdown({allowAdditions:!0,clearable:!0}),jQuery(".ui.fluid.dropdown").dropdown("clear"),jQuery(".ui.fluid.dropdown").dropdown("set selected",o)}else jQuery(".ui.dropdown.fluid").dropdown({allowAdditions:!0,clearable:!0});void 0!=app.mo_oauth_client_id&&jQuery("#clientId").val(app.mo_oauth_client_id),void 0!=app.mo_oauth_client_secret&&jQuery("#clientSecret").val(app.mo_oauth_client_secret);var t=jQuery(".mo-discovery");if(jQuery(t).empty(),void 0!=app.mo_oauth_authorize&&jQuery(t).append('<div class="field-group"><label>Authorization Endpoint</label><input type="text" class="mo-normal-text long-field" name="authorize" id="authorize" value="'+app.mo_oauth_authorize+'" placeholder="Enter authorization endpoint"></div>'),void 0!=app.mo_oauth_token&&jQuery(t).append('<div class="field-group"><label>Token Endpoint</label><input type="text" class="mo-normal-text long-field" name="token" id="token" value="'+app.mo_oauth_token+'" placeholder="Enter token endpoint"></div>'),void 0!=app.mo_oauth_userinfo&&jQuery(t).append('<div class="field-group"><label>Userinfo Endpoint</label><input type="text" class="mo-normal-text long-field" name="userinfo" id="userinfo" value="'+app.mo_oauth_userinfo+'" placeholder="Enter userinfo endpoint"></div>'),void 0!=app.mo_oauth_notice&&jQuery.getJSON(mo_oauth_ajax_object.site_url+"\\wp-content\\plugins\\miniorange-login-with-eve-online-google-facebook\\admin\\partials\\apps\\partials\\defaultapps.json",function(e){jQuery(t).append('<div id= "notice" class="mo-setup-notice">Note : '+e[app.mo_oauth_appId].setup_notice+" </div>")}),void 0!=app.mo_oauth_requesturl&&jQuery(t).append('<div class="field-group"><label>Request Token Endpoint</label><input type="text" class="mo-normal-text long-field" name="requesturl" id="requesturl" value="'+app.mo_oauth_requesturl+'" placeholder="Enter request token endpoint"></div>'),void 0!=app.mo_oauth_input){jQuery("#discInput").val(app.mo_oauth_input);var a=app.mo_oauth_input.split(" ");for(i in a){var s="mo_oauth_"+a[i],l=a[i];void 0!=app[s]?jQuery(t).append('<div class="field-group"><label>'+l+'</label><input type="text" class="mo-normal-text long-field" name="'+l+'" id="'+l+'" value="'+app[s]+'" placeholder="Enter '+app.mo_oauth_appId+" "+l+'"><i class="fa mo-valid-icon"></i></div>'):jQuery(t).append('<div class="field-group"><label>'+l+'</label><input type="text" class="mo-normal-text long-field" name="'+l+'" id="'+l+'" value="" placeholder="Enter '+app.mo_oauth_appId+" "+l+'"><i class="fa mo-valid-icon"></i></div>')}}void 0!=app.mo_oauth_guide&&jQuery(".mo-oauth-setup-guide").append('<a href="'+app.mo_oauth_guide+'" class="mo-oauth-setup-guide-link" target="_blank">&nbspSetup Guide</a>&nbsp'),void 0!=app.mo_oauth_video&&jQuery(".mo-oauth-setup-guide").append('<a href="'+app.mo_oauth_video+'" class="mo-oauth-setup-video-link" target="_blank">&nbspVideo Guide</a>'),void 0!=app.mo_oauth_type&&(jQuery("#type").val(app.mo_oauth_type),"oauth1"==app.mo_oauth_type?jQuery("#mo-oauth-scope").hide():jQuery("#mo-oauth-scope").show()),void 0!=app.mo_oauth_debug&&(!0===app.mo_oauth_debug||"true"==app.mo_oauth_debug?jQuery("#debug").prop("checked",!0):jQuery("#debug").prop("checked",!1)),void 0!=app.mo_oauth_send_header&&(!0===app.mo_oauth_send_header||"true"==app.mo_oauth_send_header?jQuery("#send_header").prop("checked",!0):jQuery("#send_header").prop("checked",!1)),void 0!=app.mo_oauth_send_body&&(!0===app.mo_oauth_send_body||"true"==app.mo_oauth_send_body?jQuery("#send_body").prop("checked",!0):jQuery("#send_body").prop("checked",!1)),mooauth_get_summary()}else mooauth_get_step(1)}function mooauth_update_display_name_description(e){e.value=e.value.replace(/[^a-zA-Z?,.()/@ 0-9]/g,"");var o=e.value;jQuery("#moauth_show_desc").html('This will be displayed on the SSO login button as <b>"Login with '+o+'"</b>. The entire button name is customizable in paid versions.'),jQuery("#moauth_show_warning").html("Note : Special characters are not allowed in app names."),jQuery("#moauth_show_warning").css({"background-color":"#457be221",color:"#1b1b1b",padding:"8px","font-size":"11px",margin:"11px 0px","border-radius":"4px",border:"1px solid #457be2"})}function mooauth_get_data(e,o){var t=jQuery("#multi-select").dropdown("get value").split(",");if(console.log(e+" "+o),console.log(t),""!=jQuery("#scope_list").val())var a=JSON.parse(jQuery("#scope_list").val());else var a="";if("back"==o)var s=parseInt(jQuery("#step").val())-1;else if("next"==o)var s=parseInt(jQuery("#step").val())+1;else var s=parseInt(jQuery("#step").val());var l={action:"mo_outh_ajax",mo_oauth_option:e,mo_oauth_appId:jQuery("#appId").val(),mo_oauth_step:s,mo_oauth_nonce:jQuery("#nonce").val(),mo_oauth_scopes:t,mo_oauth_client_id:jQuery("#clientId").val(),mo_oauth_client_secret:jQuery("#clientSecret").val(),mo_oauth_app_name:jQuery("#displayName").val(),mo_oauth_type:jQuery("#type").val(),mo_oauth_scopes_list:a};jQuery("#authorize").length&&(l.mo_oauth_authorize=jQuery("#authorize").val()),jQuery("#token").length&&(l.mo_oauth_token=jQuery("#token").val()),jQuery("#userinfo").length&&(l.mo_oauth_userinfo=jQuery("#userinfo").val()),jQuery("#notice").length&&(l.mo_oauth_notice=jQuery("#notice").text()),jQuery("#requesturl").length&&(l.mo_oauth_requesturl=jQuery("#requesturl").val());var m=jQuery("#discInput").val();""!=m&&(l.mo_oauth_input=m);var p=m.split(" ");for(i in p)l["mo_oauth_"+p[i]]=jQuery("#"+p[i]).val();return jQuery(".mo-oauth-setup-guide").length&&(jQuery(".mo-oauth-setup-guide-link").length&&(l.mo_oauth_guide=jQuery(".mo-oauth-setup-guide-link").attr("href")),jQuery(".mo-oauth-setup-video-link").length&&(l.mo_oauth_video=jQuery(".mo-oauth-setup-video-link").attr("href"))),jQuery("#debug").length&&(l.mo_oauth_debug=jQuery("#debug").is(":checked")),jQuery("#send_header").length&&(l.mo_oauth_send_header=jQuery("#send_header").is(":checked")),jQuery("#send_body").length&&(l.mo_oauth_send_body=jQuery("#send_body").is(":checked")),l}function mooauth_get_step(e){jQuery("#step").val(e);var o=parseInt(jQuery("#step").val()),t="step"+o;for(i=1;i<=last_step;i++){var e="step"+i;i<o?(jQuery(".icon-step"+i).removeClass("mo-multistep-root-active"),jQuery(".icon-step"+i).removeClass("mo-multistep-root-incompleted"),jQuery(".icon-step"+i).addClass("mo-multistep-root-completed"),jQuery(".mo-label-step"+i).removeClass("mo-muisteplabel-active"),jQuery(".mo-label-step"+i).removeClass("mo-muisteplabel-incompleted"),jQuery(".mo-label-step"+i).addClass("mo-muisteplabel-completed"),jQuery(".mo-muilti-step-connector"+i).addClass("mo-multistep-completed")):(jQuery(".icon-step"+i).removeClass("mo-multistep-root-completed"),jQuery(".icon-step"+i).addClass("mo-multistep-root-incompleted"),jQuery(".mo-label-step"+i).removeClass("mo-muisteplabel-completed"),jQuery(".mo-label-step"+i).addClass("mo-muisteplabel-incompleted"),jQuery(".mo-muilti-step-connector"+i).removeClass("mo-multistep-completed"),jQuery(".mo-muilti-step-connector"+i).removeClass("mo-multistep-active")),e==t?(jQuery("#"+e).show(),jQuery(".icon-step"+i).addClass("mo-multistep-root-active"),jQuery(".mo-label-step"+i).addClass("mo-muisteplabel-active"),jQuery(".mo-muilti-step-connector"+i).addClass("mo-multistep-active")):jQuery("#"+e).hide()}jQuery("#step").val(o),"1"==o&&(jQuery(".mo-button__footer").hide(),jQuery(".mo-multistepper-root").hide(),jQuery(".mo-skip__footer").show()),"1"!=o&&(jQuery(".mo-button__footer").show(),jQuery(".mo-multistepper-root").show(),jQuery(".mo-skip__footer").hide()),jQuery("#mo-btn-next").hide(),jQuery("#mo-btn-finish").hide(),jQuery("#mo-link-draft").hide(),jQuery("#mo-btn-close").hide(),jQuery(".mo-btn-test-finish_class").hide(),jQuery("#mo-btn-test-re-run").hide(),final_step==o&&(mooauth_get_summary(),jQuery("#mo-btn-finish").show()),last_step==o&&(mooauth_get_summary(),jQuery(".mo-btn-test-finish_class").show()),final_step>o&&(jQuery("#mo-btn-next").show(),jQuery("#mo-link-draft").show(),jQuery("#mo-btn-close").show())}function mooauth_get_summary(){jQuery(".mo-summary-name").empty(),jQuery(".mo-summary-id").empty(),jQuery(".mo-summary-secret").empty(),jQuery(".mo-summary-scopes").empty(),jQuery(".mo-summary-endpoints").empty(),jQuery(".mo-summary-name").append("Login with "+jQuery("#displayName").val()),jQuery(".mo-summary-id").val(jQuery("#clientId").val()),jQuery(".mo-summary-secret").val(jQuery("#clientSecret").val());var e=jQuery("#multi-select").dropdown("get value").toString().replaceAll(","," ");jQuery(".mo-summary-scopes").append(e),jQuery("#authorize").length&&(jQuery(".mo-summary-endpoints").append('<li class="summary-form-row"><label>Authorization Endpoint :</label><div class="mo-summary-authorize mo-summary-data"></div><a class="mo-editstep" data-step="2"> </a></li>'),jQuery(".mo-summary-authorize").text(jQuery("#authorize").val())),jQuery("#token").length&&(jQuery(".mo-summary-endpoints").append('<li class="summary-form-row"><label>Token Endpoint :</label><div class="mo-summary-token mo-summary-data"></div><a class="mo-editstep" data-step="2"> </a></li>'),jQuery(".mo-summary-token").text(jQuery("#token").val())),jQuery("#userinfo").length&&(jQuery(".mo-summary-endpoints").append('<li class="summary-form-row"><label>Userinfo Endpoint :</label><div class="mo-summary-userinfo mo-summary-data"></div><a class="mo-editstep" data-step="2"> </a></li>'),jQuery(".mo-summary-userinfo").text(jQuery("#userinfo").val())),jQuery("#requesturl").length&&(jQuery(".mo-summary-endpoints").append('<li class="summary-form-row"><label>Request Token Endpoint :</label><div class="mo-summary-requesturl mo-summary-data"></div><a class="mo-editstep" data-step="2"> </a></li>'),jQuery(".mo-summary-requesturl").text(jQuery("#requesturl").val()));var o=jQuery("#discInput").val();if(""!=o)var t=o.split(" ");for(i in t)jQuery(".mo-summary-endpoints").append('<li class="summary-form-row"><label>'+t[i]+' :</label><div class="mo-summary-'+t[i]+' mo-summary-data"></div><a class="mo-editstep" data-step="2"> </a></li>'),jQuery(".mo-summary-"+t[i]).text(jQuery("#"+t[i]).val())}function mooauth_input_validation(){var e="success";for(i=0,li=jQuery(".mo-summary-data");i<li.length;i++){if("input"===li[i].localName)var o=jQuery("#"+li[i].id).val();else if("mo-summary-scopes mo-summary-data"!==li[i].className)var o=li[i].childNodes[0];(void 0===o||""===o)&&(e="error")}return"error"==e&&(jQuery("#mo-btn-finish").tooltip({items:"#mo-btn-finish",content:"ERROR: Some fields are missing. Please add correct input to proceed",offset:[45,170],delay:4e3}),jQuery("#mo-btn-finish").tooltip("open"),setTimeout(function(){jQuery(".ui-tooltip").fadeOut("slow"),jQuery("#mo-btn-finish").tooltip({items:"#mo-btn-finish",content:""})},5e3)),e}function mooauth_steps_icr(){console.log("increment");var e=parseInt(jQuery("#step").val())+1,o="step"+e;for(console.log("increment e"+e),i=1;i<=last_step;i++){var t="step"+i;i<e?(jQuery(".icon-step"+i).removeClass("mo-multistep-root-active"),jQuery(".icon-step"+i).removeClass("mo-multistep-root-incompleted"),jQuery(".icon-step"+i).addClass("mo-multistep-root-completed"),jQuery(".mo-label-step"+i).removeClass("mo-muisteplabel-active"),jQuery(".mo-label-step"+i).removeClass("mo-muisteplabel-incompleted"),jQuery(".mo-label-step"+i).addClass("mo-muisteplabel-completed"),jQuery(".mo-muilti-step-connector"+i).addClass("mo-multistep-completed"),jQuery(".mo-muilti-step-connector"+i).removeClass("mo-multistep-active")):(jQuery(".icon-step"+i).removeClass("mo-multistep-root-completed"),jQuery(".icon-step"+i).addClass("mo-multistep-root-incompleted"),jQuery(".mo-label-step"+i).removeClass("mo-muisteplabel-completed"),jQuery(".mo-label-step"+i).addClass("mo-muisteplabel-incompleted"),jQuery(".mo-muilti-step-connector"+i).removeClass("mo-multistep-completed"),jQuery(".mo-muilti-step-connector"+i).removeClass("mo-multistep-active")),t==o?(jQuery("#"+t).show(),jQuery(".icon-step"+i).removeClass("mo-multistep-root-active"),jQuery(".icon-step"+i).addClass("mo-multistep-root-completed"),jQuery(".icon-step"+i).removeClass("mo-multistep-root-incompleted"),jQuery(".mo-muilti-step-connector"+i).addClass("mo-multistep-active")):jQuery("#"+t).hide()}jQuery("#step").val(e),jQuery(".mo-multistepper-root").show(),jQuery(".mo-button__footer").show(),jQuery(".mo-skip__footer").hide(),final_step==e?(mooauth_get_summary(),jQuery("#mo-btn-next").hide(),jQuery("#mo-link-draft").hide(),jQuery("#mo-btn-close").hide(),jQuery("#mo-btn-finish").show()):(jQuery("#mo-btn-next").show(),jQuery("#mo-link-draft").show(),jQuery("#mo-btn-close").show(),jQuery("#mo-btn-finish").hide()),last_step==e&&(jQuery("#mo-btn-next").hide(),jQuery("#mo-link-draft").hide(),jQuery("#mo-btn-close").hide(),jQuery(".mo-btn-test-finish_class").show(),jQuery("#mo-btn-test-re-run").show()),jQuery("#mo-btn-back").val("Back"),2==e&&jQuery("#mo-btn-back").val("Change Application")}function mooauth_steps_dcr(){var e=parseInt(jQuery("#step").val())-1,o="step"+e;for(console.log("Current Steps=>"),console.log(e),i=1;i<=last_step;i++){i<e?(jQuery(".icon-step"+i).addClass("mo-multistep-root-completed"),jQuery(".icon-step"+i).removeClass("mo-multistep-root-incompleted"),jQuery(".mo-label-step"+i).removeClass("mo-muisteplabel-incompleted"),jQuery(".mo-label-step"+i).addClass("mo-muisteplabel-completed"),jQuery(".mo-muilti-step-connector"+i).addClass("mo-multistep-completed")):(jQuery(".icon-step"+i).removeClass("mo-multistep-root-completed"),jQuery(".icon-step"+i).addClass("mo-multistep-root-incompleted"),jQuery(".mo-label-step"+i).removeClass("mo-muisteplabel-completed"),jQuery(".mo-label-step"+i).addClass("mo-muisteplabel-incompleted"),jQuery(".mo-muilti-step-connector"+i).removeClass("mo-multistep-active"),jQuery(".mo-muilti-step-connector"+i).removeClass("mo-multistep-completed"));var t="step"+i;t==o?(console.log("show"+t),jQuery("#"+t).show(),jQuery(".icon-step"+i).addClass("mo-multistep-root-active"),jQuery(".mo-label-step"+i).addClass("mo-muisteplabel-active"),jQuery(".mo-muilti-step-connector"+i).addClass("mo-multistep-active")):(console.log("hide"+t),jQuery(".mo-muilti-step-connector"+i).removeClass("mo-multistep-active"),jQuery(".mo-label-step"+i).removeClass("mo-muisteplabel-active"),jQuery(".icon-step"+i).removeClass("mo-multistep-root-active"),jQuery("#"+t).hide()),jQuery("#mo-btn-back").val("Back"),2==e&&jQuery("#mo-btn-back").val("Select New Application")}jQuery("#step").val(e),1==e&&(jQuery(".mo-multistepper-root").hide(),jQuery(".mo-button__footer").hide(),jQuery(".mo-skip__footer").show()),3==e?(jQuery("#mo-btn-finish").show(),jQuery("#mo-link-draft").show()):(jQuery("#mo-btn-finish").hide(),jQuery("#mo-btn-next").show(),jQuery("#mo-link-draft").show(),jQuery("#mo-btn-close").show()),jQuery(".mo-btn-test-finish_class").hide(),jQuery("#mo-btn-test-re-run").hide()}function mooauth_copyUrl(){var e=document.getElementById("callbackurl");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy")}function mooauth_showClientSecret(e,o){var t=document.getElementById(e),a=document.getElementById(o);"password"==t.type?(t.type="text",a.className="fa fa-eye-slash"):(t.type="password",a.className="fa fa-eye")}function mooauth_testConfiguration(e){var o=jQuery("#displayName").val(),t=window.open(e+"/?option=testattrmappingconfig&app="+o,"Test Attribute Configuration","width=600, height=600"),a=setInterval(function(){t.closed&&(clearInterval(a),mooauth_get_test_result(),mo_oauth_trace_test_progress=setInterval(mooauth_get_test_result,100))},1e3)}