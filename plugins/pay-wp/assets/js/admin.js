jQuery(document).ready((e=>{function o(){e("#woocommerce_wppay_wppay_ia_enabled").is(":checked")?(e("#woocommerce_wppay_ia_title").closest("tr").show(),e("#woocommerce_wppay_ia_description").closest("tr").show(),e("#woocommerce_wppay_ia_title").prop("required",!0)):(e("#woocommerce_wppay_ia_title").closest("tr").hide(),e("#woocommerce_wppay_ia_description").closest("tr").hide(),e("#woocommerce_wppay_ia_title").prop("required",!1))}function r(){e("#woocommerce_wppay_wppay_subscriptions_enabled").is(":checked")?(e("#woocommerce_wppay_subscriptions_title").closest("tr").show(),e("#woocommerce_wppay_subscriptions_description").closest("tr").show(),e("#woocommerce_wppay_subscriptions_title").prop("required",!0)):(e("#woocommerce_wppay_subscriptions_title").closest("tr").hide(),e("#woocommerce_wppay_subscriptions_description").closest("tr").hide(),e("#woocommerce_wppay_subscriptions_title").prop("required",!1))}function c(){const o=e("#woocommerce_wppay_sandbox").is(":checked");e("tr.pos-settings").each((function(){e(this).show()})),"rest_api"===e("#woocommerce_wppay_api_version").val()?(e('tr[data-api="classic"]').each((function(){e(this).hide()})),e("#woocommerce_wppay_testmode").closest("tr").hide(),e("#woocommerce_wppay_check_sig").closest("tr").hide(),e("#woocommerce_wppay_returns_title").hide(),e("#woocommerce_wppay_returns_title").next().hide(),e("#woocommerce_wppay_return_error").closest("table").hide()):(e('tr[data-api="rest"]').each((function(){e(this).hide()})),e("#woocommerce_wppay_testmode").closest("tr").show(),e("#woocommerce_wppay_check_sig").closest("tr").show(),e("#woocommerce_wppay_returns_title").show(),e("#woocommerce_wppay_returns_title").next().show(),e("#woocommerce_wppay_return_error").closest("table").show()),o?e('tr[data-env="production"]').each((function(){e(this).hide()})):e('tr[data-env="sandbox"]').each((function(){e(this).hide()}))}e(`<span>${wppay_admin_object.protocol} </span>`).insertBefore("#woocommerce_wppay_return_error, #woocommerce_wppay_return_ok, #woocommerce_wppay_return_reports"),e("#woocommerce_wppay_return_error").val(`${wppay_admin_object.site_url}?wc-api=WC_Gateway_wppay&sessionId=%sessionId%&orderId=%orderId%&errorId=%error%`),e("#woocommerce_wppay_return_ok").val(`${wppay_admin_object.site_url}?wc-api=WC_Gateway_wppay&sessionId=%sessionId%&orderId=%orderId%`),e("#woocommerce_wppay_return_reports").val(`${wppay_admin_object.site_url}?wc-api=WC_Gateway_wppay&sessionId=%sessionId%&orderId=%orderId%`),c(),e("#woocommerce_wppay_api_version").on("change",(()=>{c()})),e("#woocommerce_wppay_sandbox").on("click",(()=>{c()})),o(),e("#woocommerce_wppay_wppay_ia_enabled").on("change",(()=>{o()})),r(),e("#woocommerce_wppay_wppay_subscriptions_enabled").on("change",(()=>{r()}));const t=e("#currency-selector"),p=e("#add-new-wppay-pos"),s=e("#settings-accordion");function a(){e(".remove_wppay_profile").on("click",(function(o){if(o.preventDefault(),!confirm("Czy jesteś pewien że chcesz usunąć tą walutę? po zapisaniu ustawień nie będzie można odzyskać ustawień."))return!1;{const o=e(this).closest("h3");o.next("div").remove(),o.remove(),s.accordion("refresh"),i()}}))}function i(){t.find("option").each((function(){e(`h3[data-currency="${e(this).attr("value")}"]`).length>0?e(this).prop("disabled",!0):e(this).prop("disabled",!1)})),t.prop("selectedIndex",0),t.trigger("change")}e(".wppay-tips").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,defaultPosition:"top"}),s.accordion({collapsible:!0,active:!1,heightStyle:"content"}),a(),i(),t.on("change",(()=>{""===t.val()?p.prop("disabled",!0):p.prop("disabled",!1)})),t.trigger("change"),p.on("click",(o=>{o.preventDefault();const r={action:"wppay_get_single_currency",security:wppay_admin_object.wppay_nonce,currency:t.val()};e.post(ajaxurl,r,(e=>{0!==e&&!0===e.success&&(s.append(e.content),s.accordion("refresh"),a(),i(),c())}))})),e("#payments-sortable").sortable()}));