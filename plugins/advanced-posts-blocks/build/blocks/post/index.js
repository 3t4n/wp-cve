(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var l in s)e.o(s,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:s[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,s=window.wp.element,l=window.lodash,o=window.wp.components,n=window.wp.i18n,a=window.wp.blockEditor,c=window.wp.data,r=({onChange:e,value:t,filter:l=(()=>!0)})=>{const a=(0,c.useSelect)((e=>e("core").getPostTypes({per_page:-1})||[]),[]).filter((e=>!["attachment","wp_block"].includes(e.slug))).filter(l);return(0,s.createElement)(o.SelectControl,{label:(0,n.__)("Post Type","advanced-posts-blocks"),value:t.slug,options:a.map((e=>({label:e.name,value:e.slug}))),onChange:t=>{const s=a.find((e=>e.slug===t));e(s)}})},p=JSON.parse('{"name":"advanced-posts-blocks/post","title":"Single Post","icon":"text-page","supports":{"align":["center","wide","full"],"html":false},"category":"widgets"}'),i=window.wp.serverSideRender;var d=e.n(i);function u({title:e,children:t}){return(0,s.createElement)(o.Placeholder,{label:e},t)}const m=(0,s.memo)((({name:e,attributes:t,title:l,emptyResponseLabel:n})=>(0,s.createElement)(d(),{block:e,attributes:t,LoadingResponsePlaceholder:()=>(0,s.createElement)(u,null,(0,s.createElement)(o.Spinner,null)),EmptyResponsePlaceholder:()=>(0,s.createElement)(u,{title:l},n)}))),g=m,{name:b,title:w}=p,{name:v,supports:y,category:_,icon:k}=p,E=(0,n.__)("Single Post","advanced-posts-blocks");(0,t.registerBlockType)(v,{supports:y,category:_,title:`${E} (Advanced Posts Blocks)`,description:(0,n.__)("Display single post.","advanced-posts-blocks"),keywords:["single post",(0,n.__)("single post","advanced-posts-blocks")],icon:k,edit:({attributes:e,setAttributes:p})=>{const[i,d]=(0,s.useState)(""),{postId:u,className:m,postType:v}=e,y=(_=v,(0,c.useSelect)((e=>e("core").getPostType(_)||{}),[_]));var _;const k=((e,t)=>(0,c.useSelect)((s=>t?s("core").getEntityRecord("postType",e.slug,t):null),[e,t]))(y,u);let E=((e,t)=>(0,c.useSelect)((s=>""===t.search?[]:s("core").getEntityRecords("postType",e.slug,t)||[]),[e.slug,t]))(y,{per_page:-1,advanced_posts_blocks:!0,search:i});k&&(E=(0,l.uniqBy)([k,...E],"id"));const h=(0,s.createElement)(o.ComboboxControl,{help:(0,n.__)("Select post","advanced-posts-blocks"),label:(0,n.__)("Post","advanced-posts-blocks"),value:u,options:[...E.map((e=>({label:`${e.title.rendered} (ID: ${e.id})`,value:e.id})))],onFilterValueChange:e=>{d(e)},onChange:e=>{p({postId:e?parseInt(e):void 0})}}),P=(0,s.createElement)(a.InspectorControls,null,(0,s.createElement)(o.PanelBody,{title:(0,n.__)("Query setting","advanced-posts-blocks")},(0,s.createElement)(r,{value:y,onChange:e=>{p({postId:void 0}),p({postType:e.slug})}}),h)),f=(0,t.getBlockDefaultClassName)(b),S=((e,t=[])=>{const s=(e=>e.flatMap((e=>e?e.split(" "):[])))(t),{className:l}=e,o=l?l.split(" "):[];return{...e,className:o.filter((e=>!s.includes(e))).join(" ")}})((0,a.useBlockProps)(),[f,m]);return(0,s.createElement)("div",{...S},P,(0,s.createElement)(o.Disabled,null,(0,s.createElement)(g,{name:b,attributes:e,title:w,emptyResponseLabel:(0,n.__)("Post Not Found.","advanced-posts-blocks")})))},save:()=>null})})();