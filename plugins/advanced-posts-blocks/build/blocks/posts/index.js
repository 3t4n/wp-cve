(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,o=window.wp.element,s=window.wp.components,n=window.wp.i18n,l=window.wp.blockEditor;function a({numberOfItems:e,order:t,orderBy:l,offset:a,ignoreStickyPosts:r,maxItems:c=100,minItems:d=1,showAllPosts:i,postType:p,onNumberOfItemsChange:u,onOrderChange:m,onOrderByChange:g,onOffsetChange:b,onIgnoreStickyPostsChange:y,onshowAllPostsChange:h}){const k=[{label:(0,n.__)("Date","advanced-posts-blocks"),value:"date"},{label:(0,n.__)("Title","advanced-posts-blocks"),value:"title"}];return[g&&(0,o.createElement)(s.SelectControl,{key:"query-controls-order-by-select",label:(0,n.__)("Order by","advanced-posts-blocks"),value:l,options:p?.supports?.["page-attributes"]?[...k,{label:(0,n.__)("Page Order","advanced-posts-blocks"),value:"menu_order"}]:k,onChange:e=>{e!==l&&g(e)}}),m&&(0,o.createElement)(s.SelectControl,{key:"query-controls-order-select",label:(0,n.__)("Order","advanced-posts-blocks"),value:t,options:[{label:(0,n.__)("DESC","advanced-posts-blocks"),value:"desc"},{label:(0,n.__)("ASC","advanced-posts-blocks"),value:"asc"}],onChange:e=>{e!==t&&m(e)}}),!i&&u&&(0,o.createElement)(s.RangeControl,{key:"query-controls-range-control",label:(0,n.__)("Number of items","advanced-posts-blocks"),value:e,onChange:u,min:d,max:c}),y&&(0,o.createElement)(s.CheckboxControl,{key:"query-controls-nopaging-control",label:(0,n.__)("Show all posts","advanced-posts-blocks"),checked:i,onChange:h}),b&&(0,o.createElement)(s.RangeControl,{key:"query-controls-offset-control",label:(0,n.__)("Offset","advanced-posts-blocks"),value:a,onChange:b,min:0,max:c}),y&&(0,o.createElement)(s.CheckboxControl,{key:"query-controls-ignore-sticky-posts-control",label:(0,n.__)("Ignore sticky posts","advanced-posts-blocks"),checked:r,onChange:y})]}const r=window.wp.data,c=({onChange:e,value:t,filter:l=(()=>!0)})=>{const a=(0,r.useSelect)((e=>e("core").getPostTypes({per_page:-1})||[]),[]).filter((e=>!["attachment","wp_block"].includes(e.slug))).filter(l);return(0,o.createElement)(s.SelectControl,{label:(0,n.__)("Post Type","advanced-posts-blocks"),value:t.slug,options:a.map((e=>({label:e.name,value:e.slug}))),onChange:t=>{const o=a.find((e=>e.slug===t));e(o)}})},d=({taxonomy:e,termIds:t,handleChange:n})=>{var l;const a=(null!==(l=(0,r.useSelect)((t=>t("core").getEntityRecords("taxonomy",e.slug,{per_page:-1})),[e]))&&void 0!==l?l:[]).flatMap((e=>[{id:e.id,name:e.name},{id:-1*e.id,name:`- ${e.name}`}])),c=a.reduce(((e,t)=>({...e,[t.id]:t})),{}),d=a.reduce(((e,t)=>({...e,[t.name]:t})),{});return a&&a.length>0?(0,o.createElement)(s.FormTokenField,{key:e.rest_base,label:e.labels.name,value:t.map((e=>c[e].name)),suggestions:a.map((e=>e.name)),onChange:e=>{const t=e.map((e=>d[e]?.id));t.includes(void 0)||n(t)}}):null},i=JSON.parse('{"name":"advanced-posts-blocks/posts","title":"Multiple Posts","icon":"admin-page","Y4":{"Xo":{"Z":"date"}},"supports":{"align":["center","wide","full"],"html":false},"category":"widgets"}'),p=window.wp.serverSideRender;var u=e.n(p);function m({title:e,children:t}){return(0,o.createElement)(s.Placeholder,{label:e},t)}const g=(0,o.memo)((({name:e,attributes:t,title:n,emptyResponseLabel:l})=>(0,o.createElement)(u(),{block:e,attributes:t,LoadingResponsePlaceholder:()=>(0,o.createElement)(m,null,(0,o.createElement)(s.Spinner,null)),EmptyResponsePlaceholder:()=>(0,o.createElement)(m,{title:n},l)}))),b=g,{name:y,title:h}=i,{name:k,supports:v,category:_,icon:f}=i,C=(0,n.__)("Multiple Posts","advanced-posts-blocks");(0,t.registerBlockType)(k,{supports:v,category:_,title:`${C} (Advanced Posts Blocks)`,description:(0,n.__)("Display multiple posts.","advanced-posts-blocks"),keywords:["multiple posts",(0,n.__)("multiple posts","advanced-posts-blocks")],icon:f,edit:({attributes:e,setAttributes:p})=>{const{postsToShow:u,order:m,orderBy:g,postType:k,offset:v,ignoreStickyPosts:_,showAllPosts:f,className:C}=e,w=(P=k,(0,r.useSelect)((e=>e("core").getPostType(P)||{}),[P]));var P;const E=(e=>(0,r.useSelect)((t=>(t("core").getTaxonomies({per_page:-1})||[]).filter((t=>(e.taxonomies||[]).includes(t.slug)))),[e]))(w),S=w.labels||{},O=E.map(((t,s)=>{var n,l;const a=null!==(n=null!==(l=e[t.rest_base]?.terms)&&void 0!==l?l:e[t.rest_base])&&void 0!==n?n:[];return(0,o.createElement)(d,{key:s,taxonomy:t,termIds:a,handleChange:e=>{p({[t.rest_base]:{terms:e}})}})})),T=(0,o.createElement)(l.InspectorControls,null,(0,o.createElement)(s.PanelBody,{title:(0,n.__)("Query setting","advanced-posts-blocks")},(0,o.createElement)(c,{value:w,onChange:e=>{e?.supports["page-attributes"]||"menu_order"!==g||p({orderBy:i.Y4.Xo.Z}),p({postType:e.slug})}}),O,(0,o.createElement)(a,{order:m,orderBy:g,offset:v,ignoreStickyPosts:_,showAllPosts:f,postType:w,numberOfItems:u,onOffsetChange:e=>p({offset:e}),onOrderChange:e=>p({order:e}),onOrderByChange:e=>p({orderBy:e}),onNumberOfItemsChange:e=>p({postsToShow:e}),onIgnoreStickyPostsChange:e=>p({ignoreStickyPosts:e}),onshowAllPostsChange:e=>{p({showAllPosts:e})}}))),B=(0,t.getBlockDefaultClassName)(y),I=((e,t=[])=>{const o=(e=>e.flatMap((e=>e?e.split(" "):[])))(t),{className:s}=e,n=s?s.split(" "):[];return{...e,className:n.filter((e=>!o.includes(e))).join(" ")}})((0,l.useBlockProps)(),[B,C]);return(0,o.createElement)("div",{...I},T,(0,o.createElement)(s.Disabled,null,(0,o.createElement)(b,{name:y,attributes:e,title:h,emptyResponseLabel:S.not_found})))},save:()=>null})})();