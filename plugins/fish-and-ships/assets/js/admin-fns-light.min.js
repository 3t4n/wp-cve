/**
 * Lightweight JS without UI dependencies for wizard, rate, fns-news & messages. 
 * It will be loaded in the whole admin side, and is appart for performance reasons
 *
 * @package Fish and Ships
 * @version 1.5
 */
jQuery(document).ready(function(t){function n(){"undefined"!=typeof fish_and_ships_pointers&&t(fish_and_ships_pointers).each(function(o,e){for(var i in e)if(e[i].auto_open)return function(o,a){if(Array.isArray(a.anchor))t(a.anchor).each(function(n,s){if(anchors=t(s),anchors.length>0&&t(anchors[0]).is(":visible"))return!1});else if(anchors=t(a.anchor),anchors.length<1)return;t(anchors[0]).pointer({content:"<h3>"+a.title+"</h3>"+a.content,position:{edge:a.edge,align:a.align},close:function(){!function(t){var n="";fish_and_ships_pointers.hasOwnProperty(t)&&fish_and_ships_pointers[t].hasOwnProperty("extra_action")&&(n=fish_and_ships_pointers[t].extra_action);s("pointer",t,"",n)}(o),function(n){fish_and_ships_pointers.hasOwnProperty(n)&&(t('.fns-pointed[data-fns-key="'+n+'"]').removeClass("fns-pointed").removeAttr("data-fns-key").removeAttr("data-fns-offset"),delete fish_and_ships_pointers[n])}(o),n()},opened:function(){var n=t(".wp-pointer:last");t(n).addClass(a.wrapper_class).attr("data-fns-key",o),void 0!==a.close_bt&&t(".wp-pointer-buttons .close",n).addClass("custom").html(a.close_bt);var s=n.offset().top,e=n.height(),i=t(window).height(),r=s-(i/2-e/2);t("html, body").animate({scrollTop:r},700);var c=t(anchors[0]).offset().top;t(anchors[0]).addClass("fns-pointed").attr("data-fns-key",o).attr("data-fns-offset",Math.round(s-c))}}).pointer("open")}(i,e[i]),a(),!1})}function s(n,s,a,e){t.ajax({url:ajaxurl,data:{action:"wc_fns_wizard",kind:n,key:s,param:a},error:function(t,n,s){var a=t.status+": "+t.statusText;console.log("Fish n Ships, AJAX error - "+a),o(e)},success:function(t){"1"!=t&&console.log("Fish n Ships, AJAX error - "+t),o(e)},dataType:"html"})}function o(t){switch(t){case"wizard-end":s("wizard","","off","")}}function a(){null!==e&&(clearTimeout(e),e=null);var n=!1,s=250;t(".fns-pointed").each(function(o,a){var e=t(a).offset().top,i=t(a).attr("data-fns-key"),r=parseInt(t(a).attr("data-fns-offset"),10),c=t('.wp-pointer[data-fns-key="'+i+'"]');t(c).hasClass("wp-pointer-top")&&(r+=10);var d=Math.round(e+r);parseInt(t(c).css("top"),10)!=d&&(s=25),t(c).css("top",d),n=!0}),n&&(e=setTimeout(a,s))}t(window).on("load",function(){t("div.wc-fns-wizard.must").length>0&&t(window).scrollTop()>0&&t("html, body").animate({scrollTop:0},700)}),0!=t(".woocommerce-layout__notice-list-hide").length&&0!=t("div.wc-fns-wizard.must").length&&(0!=t("div.wrap.woocommerce").length?setTimeout(function(){t("div.wrap.woocommerce").prepend(t("div.wc-fns-wizard.must"))},1):0!=t("div.woocommerce-layout__main").length?setTimeout(function(){t("div.woocommerce-layout__main").prepend(t("div.wc-fns-wizard.must"))},1):t("body").addClass("show_wc_fns_wizard"),setTimeout(function(){t("div.wc-fns-wizard.must").length>1&&t("div.wc-fns-wizard.must").not(":last").remove()},100)),t(document).on("click",".fns-show-videos",function(){return t(".fns-hidden-videos").slideToggle(),!1}),t(document).on("click","div.wc-fns-wizard a, div.wc-fns-news a",function(){var s=t(this).attr("href"),o=t(this).hasClass("wc-fns-continue-wizard"),a=!0;if(o&&(a=!1),void 0!==t(this).attr("data-kind")){a="_blank"===t(this).attr("target");var e=t(this).attr("data-kind"),i=t(this).attr("data-key"),r=t(this).attr("data-param");t.ajax({url:ajaxurl,data:{action:"wc_fns_wizard",kind:e,key:i,param:r},error:function(t,n,o){var a=t.status+": "+t.statusText;console.log("Fish n Ships, AJAX error - "+a),"#"!=s&&(location.href=s)},success:function(t){"1"!=t&&(console.log("Fish n Ships, AJAX error - "+t),"#"!=s&&(location.href=s))},dataType:"html"})}else if(!o)return!0;return jQuery(this).closest("div.wc-fns-wizard, div.wc-fns-news").slideUp(function(){jQuery(this).closest("div.wc-fns-wizard, div.wc-fns-news").remove(),t("#activity-panel-tab-restart-fns").css("display","flex"),o&&setTimeout(function(){n()},100)}),a}),setTimeout(function(){0==t(".wc-fns-wizard").length&&n()},20);var e=null});