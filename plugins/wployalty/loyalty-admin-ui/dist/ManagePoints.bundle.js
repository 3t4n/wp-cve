"use strict";(self.webpackChunkreact_wordpress=self.webpackChunkreact_wordpress||[]).push([[279],{1554:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(7294),n=a(3972);const r=function(e){var t=e.setActive,a=e.activeState,n=e.setActiveState,r=e.right,s=e.activeLabels;return l.createElement("div",{className:"flex   flex-col border rounded-lg bg-white w-55 text-light border-light_border z-10 absolute ".concat(r," top-13 overflow-hidden")},s.map((function(e,r){return l.createElement("p",{key:r,onClick:function(){!function(e){t(!1),n({value:e.value,label:e.label})}(e)},className:"flex items-center  px-4 py-2 justify-between ".concat(e.value===a.value?"bg-primary_extra_light text-primary":"bg-white text-dark "," hover:bg-primary_extra_light cursor-pointer hover:bg-opacity-50")},e.label,e.value===a.value&&l.createElement("span",{className:"flex items-center"},l.createElement("i",{className:" wlr wlrf-tick color-important font-medium  text-lg 2xl:text-xl leading-0 cursor-pointer "})))})))},s=function(e){var t=e.icon,a=e.active,s=e.setActive,c=e.activeState,i=e.setActiveState,o=e.activeLabels,m=e.width,u=void 0===m?"w-36":m,d=e.title,p=e.closeOtherDropDown,f=l.useContext(n.Gr);return l.createElement("div",{className:"relative flex items-center border justify-between  ".concat(u," rounded-lg border-light_border p-1.5 cursor-pointer "),onClick:function(){p(),s(!a)}},l.createElement("div",{className:"flex items-center justify-start space-x-2 text-10px xl:text-xs 2xl:text-sm_14_l_20 "},l.createElement("p",{className:"font-medium text-light"},d||f.common.filter),l.createElement("p",{className:"text-dark font-semibold"},c.label)),l.createElement("div",null,t),a&&l.createElement(r,{active:a,setActive:s,activeState:c,setActiveState:i,right:"right-0",activeLabels:o,width:"w-40"}))}},2304:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(7294),n=[{value:5},{value:10},{value:20},{value:50},{value:100}];const r=function(e){e.editlimit;var t=e.setEditLimit,a=e.limitFilter,r=e.setLimitFilter,s=e.right,c=void 0===s?0:s;return[5,10,20,50,100].includes(a.value),l.createElement("div",{className:"absolute flex  flex-col border rounded-lg bg-white w-23  text-light border-light_border z-10  ".concat(c,"  bottom-14 overflow-hidden")},n.map((function(e,n){return l.createElement("p",{key:n,onClick:function(){return function(e){t(!1),r({value:e.value})}(e)},className:"flex items-center  px-4 py-2 justify-between ".concat(e.value==a.value?"bg-primary_extra_light text-primary":"bg-white text-dark "," hover:bg-primary_extra_light cursor-pointer hover:bg-opacity-50")},e.value,e.value==a.value&&l.createElement("span",{className:"flex items-center"},l.createElement("i",{className:" wlr wlrf-tick color-important font-medium  text-lg 2xl:text-xl leading-0 cursor-pointer "})))})))},s=function(e){var t=e.editLimit,a=e.setEditLimit,n=e.limitFilter,s=e.setLimitFilter,c=e.closeOtherDropDown;return l.createElement("div",{className:"relative flex items-center border justify-between h-12 w-23 px-4 py-2 space-x-3 rounded-lg border-light_border   cursor-pointer ",onClick:function(){c(),a(!t)}},l.createElement("div",{className:"text-dark font-medium text-sm_14_l_20"},n.value),l.createElement("div",null,l.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-updown color-important "})),t&&l.createElement(r,{editLimit:t,setEditLimit:a,limitFilter:n,setLimitFilter:s,right:"right-0"}))}},6553:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var l=a(4942),n=a(2982),r=a(885),s=a(7294),c=a(6732),i=a(874),o=a(8085),m=a(616),u=a(3972),d=a(3089),p=a(8991);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const _=function(e){var t=e.localState,a=e.loadUserLists,l=e.close,n=e.open,o=e.setOpen,m=s.useState({user_email:"",points:0,comments:""}),f=(0,r.Z)(m,2),_=f[0],g=f[1],v=s.useContext(u.Gr),b=s.useState({}),w=(0,r.Z)(b,2),h=w[0],y=w[1],E=s.useState([]),N=(0,r.Z)(E,2),S=N[0],j=N[1],Z=s.useState(!1),C=(0,r.Z)(Z,2),k=C[0],O=C[1],D=s.useState(!1),P=(0,r.Z)(D,2),A=P[0],L=P[1];return s.createElement("div",{className:"w-full flex flex-col"},s.createElement("div",{className:"flex flex-col px-7 p-3 border-b  space-y-6 items-start w-35rem"},s.createElement(p.Z,{width:"w-full",required:!0,type:"email",margin:"",placeholder:v.manage_points.add_new_customer.email.placeholder,label:v.manage_points.add_new_customer.email.name,value:_.user_email,onChange:function(e){g(x(x({},_),{},{user_email:e.target.value}))},onfocus:function(){return L(!0)},error:S.includes("user_email")||""===_.user_email&&A,error_message:S.includes("user_email")&&(0,d.e$)(h,"user_email")}),s.createElement(p.Z,{width:"w-full",type:"text",margin:"",label:v.common.points_text,value:_.points,onChange:function(e){g(x(x({},_),{},{points:(0,d.mE)(e.target.value)}))},error:S.includes("points"),error_message:S.includes("points")&&(0,d.e$)(h,"points")}),s.createElement(p.Z,{width:"w-full",type:"area",margin:"",label:v.manage_points.add_new_customer.comments,value:_.comments,onChange:function(e){g(x(x({},_),{},{comments:e.target.value}))},error:S.includes("comments"),error_message:S.includes("comments")&&(0,d.e$)(h,"comments")})),s.createElement("div",{className:"w-full flex items-center py-3 px-7   justify-end space-x-4"},s.createElement(i.Z,{padding:"px-6 py-2.5",textStyle:"text-light font-medium text-sm_14_l_20",bgColor:"bg-white",outline:!0,outlineStyle:"border-light ",click:function(e){e.preventDefault(),o(!n)}},v.common.cancel),s.createElement(i.Z,{disabled:k,padding:"px-6 py-3",textStyle:"text-sm_14_l_20 font-medium text-white ",click:function(e){var n;e.preventDefault(),n={wlr_nonce:t.local.point_users.wlr_user_nonce,action:"wlr_add_new_customer"},n=Object.assign({},n,_),O(!0),(0,c.j0)(n).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?(alertify.success(t.data.message),a(),g({user_email:"",points:0,comments:""}),O(!1),y({}),j([]),l()):!1===t.success&&null!==t.data&&(y(t.data),void 0===t.data.field_error&&j([]),L(!0),(0,d.il)(t.data,{setErrorList:j}),O(!1))}))}},v.common.save)))};var g=a(3399),v=a(7338),b=a(6048),w=a(1401),h=a(1731),y=a(849);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const S=function(e){var t=e.close,a=e.State,l=e.setState,n=e.nonce,o=e.isProgress,m=s.useState(!0),p=(0,r.Z)(m,2),f=p[0],x=p[1],_=s.useState(null),E=(0,r.Z)(_,2),S=E[0],j=E[1],Z=s.useState("equal"),C=(0,r.Z)(Z,2),k=C[0],O=C[1],D=s.useContext(u.Gr),P=function(e,t){var a=s.useState(e),l=(0,r.Z)(a,2),n=l[0],c=l[1];return s.useEffect((function(){var e;(e=n)&&"incomplete"===e.response_status&&R()}),[n]),[n,c]}({file:{},header:{},need_update:"no",process_count:0,total_count:0,limit_start:w.Uk}),A=(0,r.Z)(P,2),L=A[0],F=A[1],R=function(){var e=Object.assign({},{wlr_nonce:n,action:"wlr_handle_import",need_update:L.need_update,handle_count:L.process_count,total_count:L.total_count,limit_start:L.limit_start,update_type:k,limit:a.csv_limit},L.file);(0,c.j0)(e).then((function(e){var a=(0,d.R3)(e.data);if(!0===a.success&&null!==a.data&&a.data!=={}){x(!1);var l=a.data.success;"incomplete"===l?a.data.total_count<a.data.limit_start?F(N(N({},L),{},{process_count:a.data.total_count,limit_start:a.data.limit_start,response_status:l})):F(N(N({},L),{},{process_count:L.limit_start,limit_start:a.data.limit_start,response_status:l})):"completed"===a.data.success&&(o.set(!1),F(N(N({},L),{},{process_count:L.limit_start-1,limit_start:a.data.limit_start,response_status:l})),x(!1),alertify.success(a.data.message),setTimeout((function(){q(1),K(0),t(),location.reload()}),1500),x(!1))}else!1===a.success&&null!==a.data&&(alertify.error(a.data.message),x(!1))}))},G=s.useRef(null),U=s.useState(1),z=(0,r.Z)(U,2),I=z[0],q=z[1],V=s.useState(0),$=(0,r.Z)(V,2),H=$[0],K=$[1],M=[{label:D.common.select.yes,value:"yes"},{label:D.common.select.no,value:"no"}],T=[{label:"10",value:"10"},{label:"20",value:"20"},{label:"40",value:"40"},{label:"50",value:"50"}],B=[{label:D.common.select.add,value:"add"},{label:D.common.select.sub,value:"sub"},{label:D.common.select.equal,value:"equal"}],W=[{id:1,name:D.manage_points.progress.upload},{id:2,name:D.manage_points.progress.preview},{id:3,name:D.manage_points.progress.completed}],Y=function(e){var t=e.item;return s.createElement("div",{className:"flex items-center space-x-2 ".concat(t.id!=W.length?"w-4/12":"w-3/12")},s.createElement("div",{className:"flex items-center justify-center"},s.createElement("div",{className:" p-4 rounded-full border-gray-300 border border-opacity-50  \n          ".concat(I==t.id&&"bg-primary border-0 "," ").concat(H>=t.id&&"bg-green-500 border-0 ")}),s.createElement("p",{className:"absolute text-15px antialiased mt-2px ".concat((I==t.id||H>=t.id)&&"text-white")},t.id)),s.createElement("p",{className:"antialiased text-15px "},t.name),t.id!=W.length&&s.createElement("div",{className:"w-full border  border-gray-300 border-opacity-50"}))},J=function(e){var t=e.bg,a=void 0===t?"bg-primary":t,l=e.count,n=void 0===l?0:l,r=e.text,c=void 0===r?D.manage_points.progress.total:r,i=e.textStyle,o=void 0===i?"text-primary":i;return s.createElement("div",{className:"flex items-center justify-between space-x-3 ".concat(a," bg-opacity-5 py-2 px-5 ")},s.createElement("p",{className:"text-textColor text-15px antialiased"},c),s.createElement("p",{className:"text-15px ".concat(o," font-medium")},n))};s.useEffect((function(){l(N(N({},a),{},{selectedFile:S})),x(!1)}),[S]);var Q=function(){var e={};e.importfile=a.selectedFile,e.wlr_nonce=n,e.need_update=a.need_update,e.limit=a.csv_limit,e.action="wlr_import_preview",e.update_type=k;var t=function(e){return["email","points","referral_code","comment"].includes(e)};(0,c.j0)(e).then((function(e){var a=(0,d.R3)(e.data);"completed"===a.success&&null!==a.data&&a.data!=={}?(Object.keys(a.data.header).every(t)?F(N(N({},a.data),{},{limit_start:w.Uk})):(alertify.error(D.common.format),j(null),(0,d.Yd)("csvFileImport"),q(1),K(0)),x(!1)):(alertify.error(a.message),x(!1))}))},X=function(e){var t=e.active,a=e.completed,l=e.disable,n=void 0!==l&&l,r=e.operation,c=void 0===r?null:r;return s.createElement(i.Z,{padding:"px-5 py-2.5",bgColor:"bg-primary",textStyle:"text-sm text-white",click:function(e){e.preventDefault(),2===I&&o.set(!0),q(t),K(a),null!==c&&c(),x(!0)},disabled:n},D.common.next)},ee=function(e){var t=e.active,a=e.completed;return s.createElement(i.Z,{padding:"px-5 py-2.5",bgColor:"bg-base-btn_bg",disabled:"string"==typeof L.response_status,textStyle:"text-sm text-textColor-light",click:function(e){e.preventDefault(),q(t),K(a)}},D.common.back)},te=function(){return s.createElement("div",{className:"grid grid-cols-2 gap-3 w-full min-w-full bg-primary_extra_light py-2 px-5 rounded"},s.createElement("p",{className:"text-textColor-light antialiased text-15px"},D.manage_points.progress.field_name),s.createElement("p",{className:"text-textColor-light antialiased text-15px"},D.manage_points.progress.field_value))},ae=function(e){var t=e.fieldName,a=e.fieldValue;return s.createElement("div",{className:"grid grid-cols-2 gap-3 w-full min-w-full pb-2 px-5 rounded border-b border-gray-300",key:t},s.createElement("p",{className:"text-textColor antialiased text-15px"},t),s.createElement("p",{className:"text-textColor antialiased text-15px"},a||"-"))},le=function(){return s.useEffect((function(){var e,t;!f&&(t=function(e){e.preventDefault(),j(e.dataTransfer.files[0])},(e=document.getElementById("drop-file-ref")).addEventListener("drop",t),e.addEventListener("dragover",t))}),[]),s.createElement("div",{className:"w-full flex flex-col items-start justify-start"},s.createElement("div",{className:"w-full flex flex-col items-start justify-start px-7"},s.createElement("p",{className:"leading-5 text-xs mt-3 tracking-wide py-2.5 px-3 font-normal rounded-md",style:{backgroundColor:"rgb(255,213,87)",color:"black"}},s.createElement("span",{className:"font-medium"},s.createElement("i",{className:"wlr wlrf-warning"})," ",D.manage_points.important_label)," ",D.manage_points.import_notice),s.createElement("div",{className:"w-full space-y-3"},s.createElement("input",{accept:"text/csv, .csv",id:"csvFileImport",type:"file",onChange:function(e){(0,d.KH)(e.target.files,["csv"],"csvFileImport")&&j(e.target.files[0])},ref:G,className:"hidden"}),s.createElement("div",{className:"flex flex-col items-center justify-center space-y-4 w-full py-10 border-2 border-dashed border-gray-300 rounded cursor-pointer",onClick:function(){return G.current.click()},id:"drop-file-ref"},S?s.createElement("i",{className:"wlr wlrf-file_check text-4xl text-primary"}):s.createElement("i",{className:"wlr wlrf-file_upload text-4xl text-textColor-light"}),S?s.createElement("p",{className:"text-15px text-textColor-light"},"".concat(D.manage_points.import.added," ").concat(S.name," "),s.createElement("span",{className:"text-primary "},D.manage_points.import.choose_another_file)," ".concat(D.manage_points.import.replace)):s.createElement("p",{className:"text-15px text-textColor-light"},"".concat(D.manage_points.import.drag_drop," "),s.createElement("span",{className:"text-primary "},D.manage_points.import.choose_file)," ".concat(D.manage_points.import.upload_data))))),s.createElement("div",{className:"flex items-end  w-full space-x-4 px-7 py-4 space-y-4 border-b border-light_border"},s.createElement(g.Z,{width:"w-1/3"},s.createElement(v.Z,{fontSize:"text-sm",others:" font-medium text-textColor"},D.manage_points.import.update_points),s.createElement(b.Z,{options:M,value:a.need_update,onChange:function(e){l(N(N({},a),{},{need_update:e.value}))}})),s.createElement(g.Z,{width:"w-1/3"},s.createElement(v.Z,{fontSize:"text-sm",others:" font-medium text-textColor"},D.manage_points.import.records_per_batch),s.createElement(b.Z,{options:T,value:a.csv_limit,onChange:function(e){l(N(N({},a),{},{csv_limit:e.value}))}})),s.createElement(g.Z,{width:"w-1/3"},s.createElement(v.Z,{fontSize:"text-sm",others:" font-medium text-textColor"},D.manage_points.import.points_update_type),s.createElement(b.Z,{options:B,value:k,onChange:function(e){O(e.value)}}))),s.createElement("div",{className:"flex w-full items-center justify-end px-7  py-3"},s.createElement(X,{active:2,completed:1,disable:!S,operation:Q,removeSelectedFileId:"csvFileImport"})))},ne=function(){return s.createElement("div",{className:"flex flex-col w-full"},s.createElement("div",{className:"w-full flex-col items-center justify-start px-7 pb-3  border-b border-light_border space-y-4 overflow-y-auto max-h-350 2xl:max-h-450"},s.createElement(J,{count:L.total_count}),s.createElement(te,null),Object.keys(L.header).map((function(e,t){return s.createElement(ae,{key:t,fieldName:e,fieldValue:L.header[e]})}))),s.createElement("div",{className:"flex items-center space-x-3  py-3 px-7 justify-end"},s.createElement(ee,{active:1,completed:0}),s.createElement(X,{active:3,completed:2,operation:R})))},re=function(){return s.createElement("div",{className:"flex flex-col w-full"},s.createElement("div",{className:"w-full flex-col items-start justify-start border-b border-light_border pb-3 px-7 space-y-4 overflow-y-auto max-h-350 2xl:max-h-450"},s.createElement("div",{className:"flex items-center justify-between bg-green-500 bg-opacity-5 py-2 px-5 rounded"},s.createElement("p",{className:"text-textColor text-15px antialiased"},D.manage_points.progress.processed),s.createElement("div",{className:"flex items-center gap-x-2 justify-between"},s.createElement(y.Z,{processCount:L.process_count,totalCount:L.total_count}),s.createElement("p",{className:"text-15px text-green-500 font-medium"},L.process_count))),s.createElement(te,null),Object.keys(L.header).map((function(e,t){return s.createElement(ae,{key:t,fieldName:e,fieldValue:L.header[e]})}))))};return s.createElement("div",{className:"w-35rem mt-3 xl:mt-4 2xl:mt-5 flex flex-col items-start justify-start space-y-5"},s.createElement((function(){return s.createElement("div",{className:"w-full flex items-center px-24 space-x-2 justify-center"},W.map((function(e){return s.createElement(Y,{item:e,key:e.id})})))}),null),f?s.createElement(h.Z,{height:"h-[250px]"}):s.createElement("div",{className:"flex flex-col w-full space-y-3"},function(){switch(I){case 1:default:return s.createElement(le,null);case 2:return s.createElement(ne,null);case 3:return s.createElement(re,null)}}()))};var j=a(5215);const Z=function(e){e.close;var t=e.localState,a=s.useContext(u.Gr),l=function(e){var t=e.fileName,l=e.download;return s.createElement("div",{className:"flex items-center px-5 py-3 justify-between gap-3 w-full min-w-full border border-light_border  bg-primary_extra_light rounded ",key:t},s.createElement("div",{className:"flex justify-start gap-x-2"},s.createElement("div",null,s.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-file color-important "})),s.createElement("p",{className:"text-textColor antialiased text-15px"},t)),s.createElement("a",{download:t,href:l,className:"text-sm text-primary hover:text-green-500 border-none shadow-none"},a.manage_points.progress.download))};return s.createElement("div",{className:"w-35rem flex flex-col justify-start items-start p-5 h-125 2xl:h-150 space-y-2 overflow-y-auto"},t.local.point_users.export_csv_file_list.map((function(e,t){return s.createElement(l,{fileName:e.file_name,download:e.file_url,key:t})})))};var C=a(3007),k=a(4753),O=a(1489);const D=function(e){var t=e.icon,a=e.title,l=e.description,n=e.import_customer,r=e.add_new,c=e.importAction,o=e.addNewCustomerAction,m=(0,s.useContext)(u.jZ);return s.createElement("div",{className:"w-full  h-120 flex flex-col justify-center items-center gap-y-2 2xl:gap-y-4 bg-white"},s.createElement("div",null,t),s.createElement("h2",{className:"text-sm 2xl:text-xl text-dark font-bold"},a),s.createElement("p",{className:"text-light text-base font-normal  text-center tracking-wide max-w-xl leading-7.5"},l),m&&s.createElement("div",{className:"flex items-center justify-center gap-2 2xl:gap-3"},s.createElement(i.Z,{padding:"px-3 2xl:px-5 py-2 2xl:py-3",bgColor:"bg-white",outline:!0,textStyle:"text-primary font-medium text-xs 2xl:text-sm_14_l_20",outlineStyle:"border-primary_border",others:"hover:shadow-none",click:c},n),s.createElement(i.Z,{padding:"px-3 2xl:px-5 py-2 2xl:py-3",bgColor:"bg-primary",outline:!1,textStyle:"text-white font-medium text-xs 2xl:text-sm_14_l_20",others:"hover:shadow-none",click:o},r)))};var P=a(1554),A=a(2304),L=a(1257);const F=function(e){var t=e.AllCheck,a=e.AllCheckList,l=e.setAllCheck,n=e.State,r=e.active,c=e.setActive,i=e.activeState,o=e.setActiveState,m=e.CommonState,p=(0,s.useContext)(u.Gr),f=s.useContext(u.jZ),x=function(e){var t=e.children,a=e.span,l=e.subtitle;return s.createElement("div",{className:"grid ".concat(a,"  absoulute  text-light text-10px 2xl:text-12px font-semibold uppercase leading-4 self-center")},t," ",s.createElement("span",{className:"text-extra_light font-normal text-10px "},l))};return s.createElement("div",{className:"grid grid-cols-12 items-center 2xl:gap-3 w-full min-w-full  py-4",style:{minWidth:"1024px"}},s.createElement(L.Z,{checked:t&&a.length===n.users.length,click:function(){return l(!t)}}),s.createElement((function(e){var t=e.children,a=e.span;return e.subtitle,s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a)},s.createElement("div",{onClick:function(){(0,d.c3)(r,c,p.common.email_descending,p.common.email_ascending,"email_desc","email_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 cursor-pointer"},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),s.createElement("span",{className:"text-light flex items-center"},["email_asc","email_desc"].includes(i.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("email_asc"===i.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-3"},p.manage_points.customers),s.createElement((function(e){var t=e.children,a=e.span;return s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a," ")},s.createElement("div",{onClick:function(){(0,d.c3)(r,c,p.common.point_descending,p.common.point_ascending,"point_desc","point_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 cursor-pointer"},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),s.createElement("span",{className:"text-light flex items-center"},["point_asc","point_desc"].includes(i.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("point_asc"===i.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-3"},p.common.points_text),s.createElement((function(e){var t=e.children,a=e.span;return s.createElement("div",{className:"grid ".concat(a,"  absoulute")},s.createElement("div",{className:"text-light text-10px 2xl:text-12px font-semibold uppercase leading-4"},t))}),{span:"col-span-2"},p.rewards.name),s.createElement((function(e){var t=e.children,a=e.span;return e.subtitle,s.createElement("div",{className:"flex items-center justify-start space-x-2  ".concat(a)},s.createElement("div",{onClick:function(){f&&(0,d.c3)(r,c,p.common.level_descending,p.common.level_ascending,"level_desc","level_asc",o,m,"customers")},className:"flex items-center justify-start space-x-2 ".concat(f&&"cursor-pointer"," ")},s.createElement("p",{className:" grid ".concat(a," text-light text-10px 2xl:text-12px  font-bold uppercase leading-4 whitespace-nowrap ")},t),f&&s.createElement("span",{className:"text-light flex items-center"},["level_asc","level_desc"].includes(i.value)?s.createElement("i",{className:" color-important wlr wlrf-".concat("level_asc"===i.value?"sort-asc":"sort-desc"," text-sm  transition-all duration-300 ")}):s.createElement("i",{className:" color-important wlr wlrf-sort text-sm  transition-all duration-300  "}))))}),{span:"col-span-1"},p.manage_points.levels_image),s.createElement(x,{span:"col-span-1"},p.levels.created_on_label),s.createElement(x,{span:"col-span-1 md:justify-center"},p.common.actions))};var R=a(9902),G=a(2382),U=a(6);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q=s.lazy((function(){return a.e(95).then(a.bind(a,7154))}));const V=function(){var e=s.useContext(u.Gr),t=s.useContext(u.jZ),a=s.useContext(u.ko),l=a.CommonState,p=a.setCommonState,f=a.appState,x=l.customers,g=x.sort,v=x.limit,b=x.search,h=s.useState(null),y=(0,r.Z)(h,2),E=y[0],N=y[1],L=s.useState({loading:!0,users:[],pageCount:1,offset:0,selectedFile:null,need_update:"no",csv_limit:w.Zu,export_popup:!1,export_limit:w.l0,export_process_item:0,export_total_count:0,export_none:""}),z=(0,r.Z)(L,2),V=z[0],$=z[1],H=!1,K=s.useState(!1),M=(0,r.Z)(K,2),T=M[0],B=M[1],W=s.useState(!1),Y=(0,r.Z)(W,2),J=Y[0],Q=Y[1],X=s.useState(!1),ee=(0,r.Z)(X,2),te=ee[0],ae=ee[1],le=s.useState(!1),ne=(0,r.Z)(le,2),re=ne[0],se=ne[1],ce=s.useState(!1),ie=(0,r.Z)(ce,2),oe=ie[0],me=ie[1],ue=s.useState(!1),de=(0,r.Z)(ue,2),pe=de[0],fe=de[1],xe=s.useState(!1),_e=(0,r.Z)(xe,2),ge=_e[0],ve=_e[1],be=s.useState(""),we=(0,r.Z)(be,2),he=we[0],ye=we[1],Ee=s.useState([]),Ne=(0,r.Z)(Ee,2),Se=Ne[0],je=Ne[1],Ze=s.useState(!1),Ce=(0,r.Z)(Ze,2),ke=Ce[0],Oe=Ce[1],De=s.useState(!1),Pe=(0,r.Z)(De,2),Ae=Pe[0],Le=Pe[1],Fe=s.useState(!1),Re=(0,r.Z)(Fe,2),Ge=Re[0],Ue=Re[1],ze=s.useState(""),Ie=(0,r.Z)(ze,2),qe=Ie[0],Ve=Ie[1],$e=[{value:"all",label:e.common.active_all},{value:"id_asc",label:e.common.id_asc},{value:"id_desc",label:e.common.id_desc},{value:"email_asc",label:e.common.email_ascending},{value:"email_desc",label:e.common.email_descending},{value:"level_asc",label:e.common.level_ascending},{value:"level_desc",label:e.common.level_descending},{value:"point_asc",label:e.common.point_ascending},{value:"point_desc",label:e.common.point_descending}],He=function(e){var t=(0,n.Z)(Se);t.includes(e)?(t.splice(t.indexOf(e),1),je(t)):je([].concat((0,n.Z)(t),[e]))},Ke=function(e){var t={wlr_nonce:f.local.point_users.wlr_user_nonce,action:"wlr_get_customer_list",limit:v.value,offset:void 0!==(null==e?void 0:e.offset)?e.offset:x.offset,sorting_field:g.value,search:(null==e?void 0:e.search)||b};$(I(I({},V),{},{loading:!0})),(0,c.j0)(t).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?$((function(e){return I(I({},e),{},{users:t.data.item,pageCount:Math.ceil(t.data.total_count/t.data.limit),loading:!1})})):!1===t.success&&null!==t.data&&(alertify.error(t.data.message),ye(b),$(I(I({},V),{},{loading:!1})))}))},Me=function(e){var t={wlr_nonce:f.local.common.wlr_common_user_nonce,action:"wlr_update_customer_birth_date",id:e.id,birth_date:e.birthday_date};$(I(I({},V),{},{loading:!0})),(0,c.j0)(t).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&null!==t.data&&t.data!=={}?($(I(I({},V),{},{loading:!1})),alertify.success(t.data.message)):!1===t.success&&null!==t.data&&($(I(I({},V),{},{loading:!1})),alertify.error(t.data.message)),Ke()}))};s.useEffect((function(){H=!0,Ke()}),[f]),s.useEffect((function(){if(!H){var e=I({},l);e.customers.offset=0,p(e),Ke()}}),[g,v]);var Te=function(){var e=I({},l);e.customers.offset=0,p(e),ye(b),Ke({search:b,offset:0})};s.useLayoutEffect((function(){var e=[];ge?(V.users.map((function(t){return e.push(t.id)})),je(e)):je([])}),[ge]),s.useEffect((function(){0!==V.users.length&&V.users.length===Se.length&&ve(!0)}),[Se]);var Be,We,Ye=function(e,t){var a=(0,n.Z)(V.users);a.map((function(a){t.id===a.id&&(a.birthday_date=e)})),$(I(I({},V),{},{users:a}))},Je=function(){var e={action:"wlr_bulk_delete_users",user_list:Se,wlr_nonce:f.local.point_users.wlr_user_nonce};(0,c.j0)(e).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&t.data!=={}?(alertify.success(t.data.message),je([]),ve(!1)):alertify.error(t.data.message),Ke()}))},Qe=function(e){var t={action:"wlr_delete_customer",id:e,wlr_nonce:f.local.point_users.wlr_user_nonce};(0,c.j0)(t).then((function(e){var t=(0,d.R3)(e.data);!0===t.success&&t.data!=={}?(alertify.success(t.data.message),je([]),ve(!1)):alertify.error(t.data.message),Ke()}))};return s.createElement("div",{className:"bg-white w-full rounded-b-xl h-full flex flex-col items-start py-5 px-8 space-y-4 "},s.createElement("div",{className:"flex items-center justify-between w-full gap-x-1.5"},s.createElement(k.Z,{title:e.manage_points.name,videoLink:e.common.all_video_links.point_users}),s.createElement("div",{className:"flex items-center gap-x-1.5 2xl:gap-x-2 "},Se.length>0?s.createElement(i.Z,{icon:s.createElement("i",{className:"text-md leading-0 antialiased wlr wlrf-delete text-redd color-important "}),bgColor:"bg-white",textStyle:"text-redd font-medium text-sm_14_l_20",padding:"px-5 py-3",outline:!0,outlineStyle:"border-redd",click:function(t){t.preventDefault(),(0,O.Gr)(Je,e.manage_points.delete_multi_alert_message,e.manage_points.delete_ok,e.manage_points.delete_cancel,e.manage_points.delete_customer)}},e.common.delete):s.createElement("div",{className:"flex items-center gap-x-1.5 2xl:gap-x-2"},s.createElement(C.Z,{id:"search_customers",search_icon_id:"search_customer_icon",placeHolder:e.manage_points.search_customer,value:b,onChange:function(e){var t=I({},l);t.customers.search=e.target.value,p(t)},onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),Te())},click:function(e){e.preventDefault(),Oe(!1),Le(!1),Te()},onfocus:function(e){Oe(!1),Le(!1)},others:"w-32.5 xl:w-37.5 2xl:w-45"}),s.createElement(P.Z,{title:e.common.sort_by,active:ke,setActive:Oe,activeState:g,setActiveState:function(e){var t=I({},l);t.customers.sort={value:e.value,label:e.label},p(t)},activeLabels:t?$e:(Be=$e,We=[],(0,n.Z)(Be).map((function(e){["level_asc","level_desc"].includes(e.value)||We.push(e)})),We),width:"w-44",icon:s.createElement("i",{className:"text-xl ml-2 text-light leading-0 antialiased wlr wlrf-filter color-important  "}),closeOtherDropDown:function(){Le(!1)}}),s.createElement(i.Z,{id:"import_customers",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-import color-important"}),bgColor:"bg-white",textStyle:"text-primary font-medium text-xs  2xl:text-sm_14_l_20",h:!0,padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,outlineStyle:"border-primary",click:function(e){e.preventDefault(),t&&(Q(!0),Oe(!1),Le(!1))},is_pro:t},e.manage_points.import_txt),s.createElement(i.Z,{id:"export_customers",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-export color-important "}),bgColor:"bg-white",textStyle:"text-primary font-medium text-xs  2xl:text-sm_14_l_20",padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,outlineStyle:"border-primary",click:function(e){t&&(e.preventDefault(),ae(!0),Oe(!1),Le(!1))},is_pro:t},e.manage_points.export_txt),f.local.point_users.show_export_file_download>0&&t&&s.createElement(i.Z,{padding:"xl:px-3 2xl:px-5 px-2.5 py-2.5",outline:!0,icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-document-download color-important "}),bgColor:"bg-white",textStyle:"text-xs  2xl:text-sm_14_l_20 text-primary ",minwidth:"180px",click:function(e){e.preventDefault(),t&&(fe(!0),Oe(!1),Le(!1))},is_pro:t},e.manage_points.exported_txt),s.createElement(i.Z,{id:"add_new_customer",icon:s.createElement("i",{className:"2xl:text-md xl:text-sm text-xs leading-0 antialiased wlr wlrf-customer color-important "}),bgColor:"bg-primary",textStyle:"text-white font-medium text-xs  2xl:text-sm_14_l_20",padding:"xl:px-3 2xl:px-5 px-2.5 py-3",outline:!0,outlineStyle:"border-primary_light",click:function(e){e.preventDefault(),t&&(B(!0),Oe(!1),Le(!1))},is_pro:t},e.manage_points.add_new_customer_txt)))),s.createElement("div",{className:"flex flex-col items-start w-full ",onClick:function(){Oe(!1)}},s.createElement(F,{AllCheck:ge,AllCheckList:Se,setAllCheck:ve,State:V,active:Ge,setActive:Ue,activeState:g,setActiveState:p,CommonState:l}),V.loading?s.createElement(G.Z,{listData:v.value,height:"h-158"}):V.users.length>0?s.createElement("div",{className:"relative flex flex-col space-y-2 items-start w-full min-h-158",onClick:function(){Le(!1)}},V.users.map((function(e){return s.createElement(s.Suspense,{key:e.id,fallback:s.createElement(R.Z,{height:"h-30"})},s.createElement(q,{key:e.id,user:e,State:V,setState:$,localState:f,AllCheckList:Se,AddCheck:He,updateAction:Me,deleteUser:Qe,save:Ye,copied:{value:qe,set:Ve},ShowPoints:{value:oe,set:me},id:{value:E,set:N}}))}))):s.createElement(D,{icon:s.createElement("i",{className:"text-6xl 2xl:text-8xl text-primary  wlr wlrf-customer-empty color-important "}),title:""===he?e.manage_points.empty.name:e.manage_points.no_customers,description:""===he?e.manage_points.empty.description:e.manage_points.no_customers_description,import_customer:e.manage_points.import_customers,add_new:e.manage_points.add_new_customer_txt,importAction:function(e){e.preventDefault(),Q(!0)},addNewCustomerAction:function(e){e.preventDefault(),B(!0)}}),s.createElement("div",{className:"flex items-center justify-end  w-full py-3"},V.users.length>0&&s.createElement(A.Z,{editLimit:Ae,setEditLimit:Le,limitFilter:v,setLimitFilter:function(e){var t=I({},l);t.customers.limit={value:e.value},p(t)},closeOtherDropDown:function(){Oe(!1)}}),V.pageCount>1&&s.createElement(o.Z,{handlePageClick:function(e){var t=e.selected,a=Math.ceil(t*v.value),n=I({},l);n.customers.offset=a,p(n),Ke()},pageCount:V.pageCount,limit:!0,forcePage:x.offset/x.limit.value,loading:V.loading}))),T&&s.createElement(m.Z,{title:e.manage_points.add_new_customer_txt,open:T,setOpen:B},s.createElement(_,{open:T,setOpen:B,localState:f,loadUserLists:Ke,close:function(){return B(!1)}})),J&&s.createElement(m.Z,{title:e.manage_points.import_customers,open:J,setOpen:Q,clickOutSide:!1,isProgress:re},s.createElement(S,{close:function(){return Q(!1)},State:V,setState:$,nonce:f.local.point_users.wlr_user_nonce,isProgress:{val:re,set:se}})),te&&s.createElement(m.Z,{title:e.manage_points.export_customers,open:te,setOpen:ae,clickOutSide:!1,isProgress:re},s.createElement(j.Z,{close:function(){return ae(!1)},State:V,setState:$,isProgress:{val:re,set:se},nonce:f.local.point_users.wlr_user_nonce})),fe&&s.createElement(m.Z,{title:e.manage_points.download_exports,open:pe,setOpen:fe},s.createElement(Z,{close:function(){return pe(!1)},localState:f})),oe&&s.createElement(m.Z,{title:e.manage_points.update_points,open:oe,setOpen:me},s.createElement(U.Z,{id:E,handlePointUpdate:d.UC,reload:Ke,nonce:f.local.common.wlr_common_user_nonce,setShowPoints:me})))}}}]);