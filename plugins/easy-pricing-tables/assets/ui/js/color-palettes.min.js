!function(t,e){var o,i,s;o='<div class="color-palettes"></div>',i=".color-palettes {display:block; position:relative;}.color-palettes, .color-palettes * {-moz-box-sizing: content-box; -web-box-sizing:content-box; box-sizing: content-box;}input+.color-palettes {margin-top:4px;}.color-palettes .color-palettes-item {border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;float:left;margin: 0px 2px 5px 2px;} .color-palettes .color-palettes-item span {width: 50%; height: 100%; display: block; margin-left: 50%; border-top-right-radius: 3px; border-bottom-right-radius: 3px; box-shadow:inset -1px 0px 5px 0px rgba(0,0,0,.3);} .color-palettes-border {border-radius: 3px; border: 1px solid #aaa; width: 200px; background-color: #fff;}.color-palettes-container {position:absolute;top:0;right:0;left:0;bottom:0}.color-palettes-border .color-palettes-container{top:10px;right:10px;left:9px;bottom:10px}",s={options:{color:!1,hide:!0,border:!0,target:!1,width:200,palettes:!0},_color:"#ffffff",_palettes:["#000","#ffffff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_initiated:!1,_create:function(){var e=this.element;this.options.color||e.val();this._color=e.val(),e.is("input")?(this.options.target?this.palette=t(o).appendTo(this.options.target):this.palette=t(o).insertAfter(e),this._addInputListeners(e)):(e.append(o),this.palette=e.find(".color-palettes")),this._addColorPalettes(),this.options.hide&&this.palette.hide(),this.options.border&&this.palette.addClass("color-palettes-border"),this._paletteListeners(),this.active="external",this._dimensions(),this._change()},_addColorPalettes:function(){var e=t('<div class="color-palettes-container" />'),o=t('<a class="color-palettes-item" tabindex="0" />'),i=t('<a class="color-palettes-item" tabindex="0"><span/></a>'),s=t.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.palette.find(".color-palettes-container").length&&(e=this.palette.find(".color-palettes-container").detach().html("")),t.each(s,function(t,s){var r=s.split("/");if(r.length>1){var a=r[0],l=r[1];i.clone().data("color",s).data("multicolor",s).css("backgroundColor",a).appendTo(e).height(10).width(10).find("span").css({backgroundColor:l})}else o.clone().data("color",s).css("backgroundColor",s).appendTo(e).height(10).width(10)}),this.palette.append(e)},_dimensions:function(e){var o,i,s=this.options,r="100%",a=s.border?s.width-20-1:s.width-1;t.isArray(s.palettes)?s.palettes.length:this._palettes.length;e&&this.palette.css({width:"",height:""}),r=a*(parseFloat(r)/100),boxHeight=s.border?r+20:r,this.palette.css({width:s.width,height:boxHeight}),palettesPerLine=7,i=r-4*palettesPerLine,o=i/palettesPerLine,this.palette.find(".color-palettes-item").each(function(e){t(this).css({width:o,height:o})})},_addInputListeners:function(t){var e=this,o=function(o){var i=t.val(),s=t.val().replace("/^#/","");t.removeClass("color-palettes-error"),i.error?""!==s&&t.addClass("color-palettes-error"):i.toString()!==e._color.toString()&&("keyup"===o.type&&s.match(/^[0-9a-fA-F]+$/)||e._setOption("color",i.toString()))};t.on("change",o).on("keyup",e._debounce(o,100)),e.options.hide&&t.one("focus",function(){e.show()})},_paletteListeners:function(){var e=this;e.palette.find(".color-palettes-container").on("click.palette",".color-palettes-item",function(){e._color=t(this).data("color"),e.active="external",e._change()}).on("keydown.palette",".color-palettes-item",function(e){if(13!==e.keyCode&&32!==e.keyCode)return!0;e.stopPropagation(),t(this).trigger("click")})},_setOption:function(t,e){var o,i,s=this.options[t],r=!1;switch(this.options[t]=e,t){case"color":e.replace(/^#/,""),(o=e).error?this.options[t]=s:(this._color=o,this.options.color=this.options[t]=this._color.toString(),this.active="external",this._change());break;case"palettes":r=!0,e?this._addColorPalettes():this.palette.find(".color-palettes-container").remove(),s||this._paletteListeners();break;case"width":r=!0;break;case"border":r=!0,i=e?"addClass":"removeClass",this.palette[i]("color-palettes-border")}r&&this._dimensions(!0)},destroy:function(){t.Widget.prototype.destroy.call(this)},_change:function(){this._color;this.options.color=this._color.toString(),this._initiated&&this._trigger("change",{type:this.active},{color:this._color}),this.element.is(":input")&&!this._color.error&&(this.element.removeClass("color-palettes-error"),this.element.val()!==this._color.toString()&&this.element.val(this._color.toString())),this._initiated=!0,this.active=!0},_debounce:function(t,e,o){var i,s;return function(){var r,a,l=this,n=arguments;return r=function(){i=null,o||(s=t.apply(l,n))},a=o&&!i,clearTimeout(i),i=setTimeout(r,e),a&&(s=t.apply(l,n)),s}},show:function(){this.palette.show()},hide:function(){this.palette.hide()},toggle:function(){this.palette.toggle()},color:function(t){return!0===t?this._color.clone():void 0===t?this._color.toString():void this.option("color",t)}},t.widget("ui.colorpalettes",s),t('<style id="color-palettes-css">'+i+"</style>").appendTo("head")}(jQuery);