if("undefined"==typeof jq)var jq=jQuery;var BuddyPress_Learndash_Group_Edit=function(a){function b(){null!=a.courses&&null!=a.users&&(d.toggleClass("hidden"),"undefined"!=typeof wp.data&&"undefined"!=typeof wp.data.dispatch("core/notices")&&wp.data.dispatch("core/notices").createNotice("info",g,{id:"ldEnrollment"}),c(a.users.slice(e,f)))}function c(b){return 0===b.length?(d.toggleClass("hidden"),"undefined"!=typeof wp.data&&"undefined"!=typeof wp.data.dispatch("core/notices")&&wp.data.dispatch("core/notices").removeNotice("ldEnrollment"),0):void jq.ajax({type:"POST",url:ajaxurl,data:{action:"mass_group_join",users:b,courses:a.courses},success:function(b){return b!==Object(b)||"undefined"==typeof b.success&&"undefined"==typeof b.error?(b=new Object,void(b.success=!1)):(e=f,f+=10,void c(a.users.slice(e,f)))}})}var d=jq("#enrollment-notice"),e=0,f=10,g="BuddyPress for Learndash enrolling users to the course buddypress groups. This can take a while if you have many students(members). Do not navigate away from this page until this is done.";return{init:b}};jq(function(a){var b=!1;buddypress_learndash_vars.proceed_enrollment&&new BuddyPress_Learndash_Group_Edit(buddypress_learndash_vars).init(),"undefined"!=typeof wp.data&&wp.data.subscribe(function(){if("undefined"!=typeof wp.data.select("core/editor")&&"sfwd-courses"==wp.data.select("core/editor").getCurrentPostType()){var c=wp.data.select("core/editor").isSavingPost(),d=wp.data.select("core/editor").isAutosavingPost();c&&!d&&"-1"!==document.getElementById("bp-course-group").value&&(b&&b.abort(),b=jq.ajax({type:"POST",url:ajaxurl,data:{action:"get_enrollment_data",screen_id:buddypress_learndash_vars.screen_id,post_ID:a("#post_ID")[0].value},success:function(a){var b=a.data;new BuddyPress_Learndash_Group_Edit(b).init()}}))}})});