jQuery(function(n){var a=n("#bto_scenario_data"),e={image_frame:!1,$button:!1};a.on("change","input.scenario_action_overlay_image",function(){var a=n(this),i=a.closest(".scenario_action_overlay_image_group").find(".action_conditional_images");a.is(":checked")?i.show():i.hide()}).on("click",".upload_conditional_image_button",function(a){e.$button=n(this),a.preventDefault(),e.image_frame||(e.image_frame=wp.media({title:wc_cp_ci_admin_params.i18n_choose_component_image,button:{text:wc_cp_ci_admin_params.i18n_set_component_image},states:[new wp.media.controller.Library({title:wc_cp_ci_admin_params.i18n_choose_component_image,filterable:"all"})]}),e.image_frame.on("select",function(){var a=e.image_frame.state().get("selection").first().toJSON(),i=(a.sizes&&a.sizes.thumbnail?a.sizes.thumbnail:a).url;e.$button.addClass("has_image"),e.$button.closest(".action_conditional_images").find(".remove_conditional_image_button").addClass("has_image"),e.$button.find("input").val(a.id).change(),e.$button.find("img").eq(0).attr("src",i)})),e.image_frame.open()}).on("click",".remove_conditional_image_button",function(a){var i=n(this),e=i.closest(".action_conditional_images"),t=e.find(".upload_conditional_image_button");a.preventDefault(),t.removeClass("has_image"),i.removeClass("has_image"),e.find("input").val("").change(),t.find("img").eq(0).attr("src",wc_composite_admin_params.wc_placeholder_img_src)})});