!function(e){"use strict";e(function(){var r=!1;function i(i){if(r)return r=!1,!0;if(e(".iugu-token").remove(),!e("#payment_method_iugu-credit-card").is(":checked"))return!0;if(e("#iugu-save-card").is(":checked")){var o="1"==e("#iugu-is_user_logged_in").val();if(o||(o="1"==e("#iugu-is_registration_required").val()),!o&&(o="1"==e("#iugu-woocommerce_enable_signup_and_login_from_checkout").val())&&(o=e("#createaccount").is(":checked")),!o)return alert(e("#iugu-save-card").attr("placeholder")),!1}var u=e(i),n=e("#iugu-credit-card-fields",u),t=e("#iugu-card-installments").val();if(e("#customer-payment-method-id").length>0&&""!==e("#customer-payment-method-id").val())t<1?(e(".woocommerce-error",n).remove(),n.prepend('<div class="woocommerce-error"><ul><li>'+iugu_wc_credit_card_params.i18n_installments_field+" "+iugu_wc_credit_card_params.i18n_is_invalid+".</li></ul></div>")):(e(".iugu-token",u).remove(),r=!0,u.submit());else{var c=u.find("#iugu-card-expiry").val().replaceAll(" ",""),a="";u.find("#iugu-card-expiry").val(c),Iugu.createPaymentToken(i,function(i){t<1&&(i.errors||(i.errors={}),i.errors.installments="is_invalid"),i.errors?(console.log(i.errors),e(".woocommerce-error",n).remove(),a+="<ul>",e.each(i.errors,function(e,r){var i=r;"is_invalid"===i&&(i=iugu_wc_credit_card_params.i18n_is_invalid),a+="<li>"+iugu_wc_credit_card_params["i18n_"+e+"_field"]+" "+i+".</li>"}),a+="</ul>",n.prepend('<div class="woocommerce-error">'+a+"</div>")):(e(".iugu-token",u).remove(),u.append(e('<input class="iugu-token" name="iugu_token" type="hidden" />').val(i.id)),r=!0,u.submit())})}return!1}Iugu.setAccountID(iugu_wc_credit_card_params.iugu_account_id),iugu_wc_credit_card_params.is_sandbox&&Iugu.setTestMode(!0),e("form.checkout").on("checkout_place_order_iugu-credit-card",function(){return i(this)}),e("form.checkout").on("change",'input[name^="payment_method"]',function(){e("body").trigger("update_checkout")}),e("form#order_review").submit(function(){return i(this)})})}(jQuery);