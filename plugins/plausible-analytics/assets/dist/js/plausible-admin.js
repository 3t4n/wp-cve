(()=>{function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}document.addEventListener("DOMContentLoaded",(function(){if(document.location.href.includes("plausible_analytics")){var t={nonceElem:document.getElementById("_wpnonce"),nonce:"",showWizardElem:document.getElementById("show_wizard"),domainNameElem:document.getElementById("domain_name"),apiTokenElem:document.getElementById("api_token"),createAPITokenElems:document.getElementsByClassName("plausible-create-api-token"),buttonElems:document.getElementsByClassName("plausible-analytics-button"),stepElems:document.getElementsByClassName("plausible-analytics-wizard-next-step"),init:function(){if(""===document.location.hash&&null!==document.getElementById("plausible-analytics-wizard")&&(document.location.hash="#welcome_slide"),null!==this.nonceElem&&(this.nonce=this.nonceElem.value),this.toggleWizardStep(),window.addEventListener("hashchange",this.toggleWizardStep),null!==this.showWizardElem&&this.showWizardElem.addEventListener("click",this.showWizard),null!==this.domainNameElem&&this.domainNameElem.addEventListener("keyup",this.disableConnectButton),null!==this.apiTokenElem&&this.apiTokenElem.addEventListener("keyup",this.disableConnectButton),this.createAPITokenElems.length>0)for(var e=0;e<this.createAPITokenElems.length;e++)this.createAPITokenElems[e].addEventListener("click",this.createAPIToken);if(this.buttonElems.length>0)for(var t=0;t<this.buttonElems.length;t++)this.buttonElems[t].addEventListener("click",this.saveOption);if(document.addEventListener("click",this.toggleOption),this.stepElems.length>0)for(var n=0;n<this.stepElems.length;n++)this.stepElems[n].addEventListener("click",this.saveOptionOnNext)},toggleOption:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null!==e.target.classList&&e.target.classList.contains("plausible-analytics-toggle")){var a=e.target.closest("button"),i="",s="";i="submit"===e.target.type?a.querySelector("span"):e.target.closest("span"),a.classList.contains("bg-indigo-600")?(a.classList.replace("bg-indigo-600","bg-gray-200"),i.classList.replace("translate-x-5","translate-x-0"),s=""):(a.classList.replace("bg-gray-200","bg-indigo-600"),i.classList.replace("translate-x-0","translate-x-5"),s="on");var l=new FormData;l.append("action","plausible_analytics_toggle_option"),l.append("option_name",a.name),l.append("option_value",a.value),l.append("option_label",a.nextElementSibling.innerHTML),l.append("toggle_status",s),l.append("is_list",a.dataset.list),l.append("_nonce",t.nonce);var o=!1;"proxy_enabled"!==a.name&&"enable_analytics_dashboard"!==a.name||(o=!0,n=!1),t.ajax(l,null,n,o).then((function(n){!1===n&&t.toggleOption(e,!1)}))}},saveOption:function(e){var n=e.target,a=n.closest(".plausible-analytics-section").querySelectorAll("input, textarea"),i=new FormData,s=[];a.forEach((function(e){s.push({name:e.name,value:e.value})})),i.append("action","plausible_analytics_save_options"),i.append("options",JSON.stringify(s)),i.append("_nonce",t.nonce),n.children[0].classList.remove("hidden"),n.setAttribute("disabled","disabled"),t.ajax(i,n,null,!0)},saveOptionOnNext:function(n){var a=document.location.hash.replace("#","");if("api_token_slide"===a||"domain_name_slide"===a){var i,s=[],l=function(t,n){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,n){if(t){if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){a&&(t=a);var i=0,s=function(){};return{s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,l=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw l}}}}(n.target.closest(".plausible-analytics-wizard-step-section").getElementsByTagName("INPUT"));try{for(l.s();!(i=l.n()).done;){var o=i.value;s.push({name:o.name,value:o.value})}}catch(e){l.e(e)}finally{l.f()}var c=new FormData;c.append("action","plausible_analytics_save_options"),c.append("options",JSON.stringify(s)),c.append("_nonce",t.nonce),t.ajax(c,null,!1,!0)}},disableConnectButton:function(e){var t=e.target,n=document.getElementById("connect_plausible_analytics"),a=!1;if(null===n){var i=document.location.hash;n=document.querySelector(i+" .plausible-analytics-wizard-next-step"),a=!0}null!==n&&(""===t.value?a?(n.classList+=" pointer-events-none",n.classList.replace("bg-indigo-600","bg-gray-200")):(n.disabled=!0,n.innerHTML=n.innerHTML.replace("Connected","Connect")):a?(n.classList.remove("pointer-events-none"),n.classList.replace("bg-gray-200","bg-indigo-600")):n.disabled=!1)},createAPIToken:function(e){e.preventDefault();var t=document.getElementById("domain_name").value;t=t.replace("/","%2F"),window.open("https://plausible.io/".concat(t,"/settings/integrations?new_token=WordPress"),"_blank","location=yes,height=768,width=1024,scrollbars=yes,status=no")},showWizard:function(e){var n=new FormData;n.append("action","plausible_analytics_show_wizard"),n.append("_nonce",e.target.dataset.nonce),t.ajax(n,null,!1,!0)},toggleWizardStep:function(){if(null!==document.getElementById("plausible-analytics-wizard")){for(var e=document.location.hash.substring(1).replace("_slide",""),t=document.querySelectorAll(".plausible-analytics-wizard-step"),n=document.querySelectorAll(".plausible-analytics-wizard-active-step"),a=document.querySelectorAll(".plausible-analytics-wizard-completed-step"),i=0;i<t.length;i++)t[i].classList.remove("hidden");for(var s=0;s<n.length;s++)n[s].classList+=" hidden";for(var l=0;l<a.length;l++)a[l].classList+=" hidden";var o=document.getElementById("active-step-"+e),c=document.getElementById("step-"+e);o.classList.remove("hidden"),c.classList+=" hidden";var r=o.dataset.completedSteps.split(",");(r=r.filter((function(e){return e}))).length<1||r.forEach((function(e){var t=document.getElementById("completed-step-"+e),n=document.getElementById("step-"+e);t.classList.remove("hidden"),n.classList+=" hidden"}))}},ajax:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return fetch(ajaxurl,{method:"POST",body:e}).then((function(e){return n&&(n.children[0].classList+=" hidden",n.removeAttribute("disabled")),200===e.status&&e.json()})).then((function(e){!0===a&&(!0===e.success?t.notice(e.data):t.notice(e.data,!0));var n=new CustomEvent("plausibleAjaxDone",{detail:e});return document.dispatchEvent(n),!0===i&&window.location.reload(),e.success}))},notice:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!0===t?(document.getElementById("icon-error").classList.remove("hidden"),document.getElementById("icon-success").classList+=" hidden"):(document.getElementById("icon-success").classList.remove("hidden"),document.getElementById("icon-error").classList+=" hidden");var n=document.getElementById("plausible-analytics-notice");document.getElementById("plausible-analytics-notice-text").innerHTML=e,n.classList.remove("hidden"),setTimeout((function(){n.classList.replace("opacity-0","opacity-100")}),200),!1===t&&setTimeout((function(){n.classList.replace("opacity-100","opacity-0"),setTimeout((function(){n.classList+=" hidden"}),200)}),2e3)}};t.init()}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvcGxhdXNpYmxlLWFkbWluLmpzIiwibWFwcGluZ3MiOiJnSEFLQUEsU0FBU0MsaUJBQWlCLG9CQUFvQixXQUM3QyxHQUFLRCxTQUFTRSxTQUFTQyxLQUFLQyxTQUFTLHVCQUFyQyxDQUlBLElBQUlDLEVBQVksQ0FJZkMsVUFBV04sU0FBU08sZUFBZSxZQUNuQ0MsTUFBTyxHQUNQQyxlQUFnQlQsU0FBU08sZUFBZSxlQUN4Q0csZUFBZ0JWLFNBQVNPLGVBQWUsZUFDeENJLGFBQWNYLFNBQVNPLGVBQWUsYUFDdENLLG9CQUFxQlosU0FBU2EsdUJBQXVCLDhCQUNyREMsWUFBYWQsU0FBU2EsdUJBQXVCLDhCQUM3Q0UsVUFBV2YsU0FBU2EsdUJBQXVCLHdDQUszQ0csS0FBTSxXQXlCTCxHQXhCK0IsS0FBM0JoQixTQUFTRSxTQUFTZSxNQUF5RSxPQUExRGpCLFNBQVNPLGVBQWUsZ0NBQzVEUCxTQUFTRSxTQUFTZSxLQUFPLGtCQUdILE9BQW5CQyxLQUFLWixZQUNSWSxLQUFLVixNQUFRVSxLQUFLWixVQUFVYSxPQUc3QkQsS0FBS0UsbUJBRUxDLE9BQU9wQixpQkFBaUIsYUFBY2lCLEtBQUtFLGtCQUVmLE9BQXhCRixLQUFLVCxnQkFDUlMsS0FBS1QsZUFBZVIsaUJBQWlCLFFBQVNpQixLQUFLSSxZQUd4QixPQUF4QkosS0FBS1IsZ0JBQ1JRLEtBQUtSLGVBQWVULGlCQUFpQixRQUFTaUIsS0FBS0ssc0JBRzFCLE9BQXRCTCxLQUFLUCxjQUNSTyxLQUFLUCxhQUFhVixpQkFBaUIsUUFBU2lCLEtBQUtLLHNCQUc5Q0wsS0FBS04sb0JBQW9CWSxPQUFTLEVBQ3JDLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJUCxLQUFLTixvQkFBb0JZLE9BQVFDLElBQ3BEUCxLQUFLTixvQkFBb0JhLEdBQUd4QixpQkFBaUIsUUFBU2lCLEtBQUtRLGdCQUk3RCxHQUFJUixLQUFLSixZQUFZVSxPQUFTLEVBQzdCLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJUCxLQUFLSixZQUFZVSxPQUFRQyxJQUM1Q1AsS0FBS0osWUFBWVcsR0FBR3hCLGlCQUFpQixRQUFTaUIsS0FBS1MsWUFVckQsR0FGQTNCLFNBQVNDLGlCQUFpQixRQUFTaUIsS0FBS1UsY0FFcENWLEtBQUtILFVBQVVTLE9BQVMsRUFDM0IsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlQLEtBQUtILFVBQVVTLE9BQVFDLElBQzFDUCxLQUFLSCxVQUFVVSxHQUFHeEIsaUJBQWlCLFFBQVNpQixLQUFLVyxpQkFHcEQsRUFRQUQsYUFBYyxTQUFVRSxHQUFzQixJQUFuQkMsSUFBVUMsVUFBQVIsT0FBQSxRQUFBUyxJQUFBRCxVQUFBLEtBQUFBLFVBQUEsR0FJcEMsR0FBMkIsT0FBdkJGLEVBQUVJLE9BQU9DLFdBQXVCTCxFQUFFSSxPQUFPQyxVQUFVQyxTQUFTLDhCQUFoRSxDQUlBLElBQU1DLEVBQVNQLEVBQUVJLE9BQU9JLFFBQVEsVUFDNUJDLEVBQVMsR0FDVEMsRUFBZSxHQUlsQkQsRUFEcUIsV0FBbEJULEVBQUVJLE9BQU9PLEtBQ0hKLEVBQU9LLGNBQWMsUUFHckJaLEVBQUVJLE9BQU9JLFFBQVEsUUFHdkJELEVBQU9GLFVBQVVDLFNBQVMsa0JBRTdCQyxFQUFPRixVQUFVUSxRQUFRLGdCQUFpQixlQUMxQ0osRUFBT0osVUFBVVEsUUFBUSxnQkFBaUIsaUJBQzFDSCxFQUFlLEtBR2ZILEVBQU9GLFVBQVVRLFFBQVEsY0FBZSxpQkFDeENKLEVBQU9KLFVBQVVRLFFBQVEsZ0JBQWlCLGlCQUMxQ0gsRUFBZSxNQUdoQixJQUFNSSxFQUFPLElBQUlDLFNBQ2pCRCxFQUFLRSxPQUFPLFNBQVUscUNBQ3RCRixFQUFLRSxPQUFPLGNBQWVULEVBQU9VLE1BQ2xDSCxFQUFLRSxPQUFPLGVBQWdCVCxFQUFPbEIsT0FDbkN5QixFQUFLRSxPQUFPLGVBQWdCVCxFQUFPVyxtQkFBbUJDLFdBQ3RETCxFQUFLRSxPQUFPLGdCQUFpQk4sR0FDN0JJLEVBQUtFLE9BQU8sVUFBV1QsRUFBT2EsUUFBUUMsTUFDdENQLEVBQUtFLE9BQU8sU0FBVXpDLEVBQVVHLE9BRWhDLElBQUk0QyxHQUFTLEVBS08sa0JBQWhCZixFQUFPVSxNQUE0QywrQkFBaEJWLEVBQU9VLE9BQzdDSyxHQUFTLEVBQ1RyQixHQUFhLEdBR0QxQixFQUFVZ0QsS0FBS1QsRUFBTSxLQUFNYixFQUFZcUIsR0FFN0NFLE1BQUssU0FBVUMsSUFDTCxJQUFaQSxHQUNIbEQsRUFBVXVCLGFBQWFFLEdBQUcsRUFFNUIsR0FuREEsQ0FvREQsRUFPQUgsV0FBWSxTQUFVRyxHQUNyQixJQUFNTyxFQUFTUCxFQUFFSSxPQUVYc0IsRUFEVW5CLEVBQU9DLFFBQVEsZ0NBQ1JtQixpQkFBaUIsbUJBQ2xDYixFQUFPLElBQUlDLFNBQ1hhLEVBQVUsR0FFaEJGLEVBQU9HLFNBQVEsU0FBVUMsR0FDeEJGLEVBQVFHLEtBQUssQ0FBQ2QsS0FBTWEsRUFBTWIsS0FBTTVCLE1BQU95QyxFQUFNekMsT0FDOUMsSUFFQXlCLEVBQUtFLE9BQU8sU0FBVSxvQ0FDdEJGLEVBQUtFLE9BQU8sVUFBV2dCLEtBQUtDLFVBQVVMLElBQ3RDZCxFQUFLRSxPQUFPLFNBQVV6QyxFQUFVRyxPQUVoQzZCLEVBQU8yQixTQUFTLEdBQUc3QixVQUFVOEIsT0FBTyxVQUNwQzVCLEVBQU82QixhQUFhLFdBQVksWUFFaEM3RCxFQUFVZ0QsS0FBS1QsRUFBTVAsRUFBUSxNQUFNLEVBQ3BDLEVBT0FSLGlCQUFrQixTQUFVQyxHQUMzQixJQUFJYixFQUFPakIsU0FBU0UsU0FBU2UsS0FBSzBCLFFBQVEsSUFBSyxJQUUvQyxHQUFhLG9CQUFUMUIsR0FBdUMsc0JBQVRBLEVBQThCLENBQy9ELElBSXdCa0QsRUFGcEJULEVBQVUsR0FBR1UsRSx5NUJBQUFDLENBRk52QyxFQUFFSSxPQUFPSSxRQUFRLDRDQUNWZ0MscUJBQXFCLFVBR2YsSUFBeEIsSUFBQUYsRUFBQUcsTUFBQUosRUFBQUMsRUFBQUksS0FBQUMsTUFBMEIsS0FBakJiLEVBQUtPLEVBQUFoRCxNQUNidUMsRUFBUUcsS0FBSyxDQUFDZCxLQUFNYSxFQUFNYixLQUFNNUIsTUFBT3lDLEVBQU16QyxPQUM5QyxDQUFDLE9BQUF1RCxHQUFBTixFQUFBdEMsRUFBQTRDLEVBQUEsU0FBQU4sRUFBQU8sR0FBQSxDQUVELElBQUlDLEVBQU8sSUFBSS9CLFNBQ2YrQixFQUFLOUIsT0FBTyxTQUFVLG9DQUN0QjhCLEVBQUs5QixPQUFPLFVBQVdnQixLQUFLQyxVQUFVTCxJQUN0Q2tCLEVBQUs5QixPQUFPLFNBQVV6QyxFQUFVRyxPQUVoQ0gsRUFBVWdELEtBQUt1QixFQUFNLE1BQU0sR0FBTyxFQUNuQyxDQUNELEVBT0FyRCxxQkFBc0IsU0FBVU8sR0FDL0IsSUFBSUksRUFBU0osRUFBRUksT0FDWEcsRUFBU3JDLFNBQVNPLGVBQWUsK0JBQ2pDc0UsR0FBZSxFQUVuQixHQUFlLE9BQVh4QyxFQUFpQixDQUNwQixJQUFJeUMsRUFBVzlFLFNBQVNFLFNBQVNlLEtBQ2pDb0IsRUFBU3JDLFNBQVMwQyxjQUFjb0MsRUFBVywwQ0FDM0NELEdBQWUsQ0FDaEIsQ0FFZSxPQUFYeEMsSUFJaUIsS0FBakJILEVBQU9mLE1BV04wRCxHQUlKeEMsRUFBT0YsV0FBYSx1QkFDcEJFLEVBQU9GLFVBQVVRLFFBQVEsZ0JBQWlCLGlCQUoxQ04sRUFBTzBDLFVBQVcsRUFDbEIxQyxFQUFPWSxVQUFZWixFQUFPWSxVQUFVTixRQUFRLFlBQWEsWUFacERrQyxHQUdKeEMsRUFBT0YsVUFBVThCLE9BQU8sdUJBQ3hCNUIsRUFBT0YsVUFBVVEsUUFBUSxjQUFlLGtCQUh4Q04sRUFBTzBDLFVBQVcsRUFnQnJCLEVBT0FyRCxlQUFnQixTQUFVSSxHQUN6QkEsRUFBRWtELGlCQUVGLElBQUlDLEVBQVNqRixTQUFTTyxlQUFlLGVBQWVZLE1BQ3BEOEQsRUFBU0EsRUFBT3RDLFFBQVEsSUFBSyxPQUU3QnRCLE9BQU82RCxLQUFLLHdCQUFEQyxPQUF5QkYsRUFBTSw4Q0FBOEMsU0FBVSw4REFDbkcsRUFPQTNELFdBQVksU0FBVVEsR0FDckIsSUFBSThDLEVBQU8sSUFBSS9CLFNBQ2YrQixFQUFLOUIsT0FBTyxTQUFVLG1DQUN0QjhCLEVBQUs5QixPQUFPLFNBQVVoQixFQUFFSSxPQUFPZ0IsUUFBUTFDLE9BRXZDSCxFQUFVZ0QsS0FBS3VCLEVBQU0sTUFBTSxHQUFPLEVBQ25DLEVBS0F4RCxpQkFBa0IsV0FDakIsR0FBOEQsT0FBMURwQixTQUFTTyxlQUFlLDhCQUE1QixDQWFBLElBVEEsSUFBTVUsRUFBT2pCLFNBQVNFLFNBQVNlLEtBQUttRSxVQUFVLEdBQUd6QyxRQUFRLFNBQVUsSUFLL0QwQyxFQUFXckYsU0FBU3lELGlCQUFpQixvQ0FDckM2QixFQUFjdEYsU0FBU3lELGlCQUFpQiwyQ0FDeEM4QixFQUFpQnZGLFNBQVN5RCxpQkFBaUIsOENBRXRDaEMsRUFBSSxFQUFHQSxFQUFJNEQsRUFBUzdELE9BQVFDLElBQ3BDNEQsRUFBUzVELEdBQUdVLFVBQVU4QixPQUFPLFVBRzlCLElBQUssSUFBSXhDLEVBQUksRUFBR0EsRUFBSTZELEVBQVk5RCxPQUFRQyxJQUN2QzZELEVBQVk3RCxHQUFHVSxXQUFhLFVBRzdCLElBQUssSUFBSVYsRUFBSSxFQUFHQSxFQUFJOEQsRUFBZS9ELE9BQVFDLElBQzFDOEQsRUFBZTlELEdBQUdVLFdBQWEsVUFNaEMsSUFBSXFELEVBQWN4RixTQUFTTyxlQUFlLGVBQWlCVSxHQUN2RHdFLEVBQXNCekYsU0FBU08sZUFBZSxRQUFVVSxHQUU1RHVFLEVBQVlyRCxVQUFVOEIsT0FBTyxVQUM3QndCLEVBQW9CdEQsV0FBYSxVQU9qQyxJQUFJdUQsRUFBMEJGLEVBQVl0QyxRQUFRcUMsZUFBZUksTUFBTSxNQU12RUQsRUFBMEJBLEVBQXdCRSxRQUFPLFNBQUFwQixHQUFDLE9BQUlBLENBQUMsS0FFbkNoRCxPQUFTLEdBSXJDa0UsRUFBd0IvQixTQUFRLFNBQVVrQyxHQUN6QyxJQUFJQyxFQUFnQjlGLFNBQVNPLGVBQWUsa0JBQW9Cc0YsR0FDNURFLEVBQWUvRixTQUFTTyxlQUFlLFFBQVVzRixHQUVyREMsRUFBYzNELFVBQVU4QixPQUFPLFVBQy9COEIsRUFBYTVELFdBQWEsU0FDM0IsR0F2REEsQ0F3REQsRUFZQWtCLEtBQU0sU0FBVXVCLEdBQXdELElBQWxEdkMsRUFBTUwsVUFBQVIsT0FBQSxRQUFBUyxJQUFBRCxVQUFBLEdBQUFBLFVBQUEsR0FBRyxLQUFNRCxJQUFVQyxVQUFBUixPQUFBLFFBQUFTLElBQUFELFVBQUEsS0FBQUEsVUFBQSxHQUFTb0IsRUFBTXBCLFVBQUFSLE9BQUEsUUFBQVMsSUFBQUQsVUFBQSxJQUFBQSxVQUFBLEdBQzdELE9BQU9nRSxNQUNOQyxRQUNBLENBQ0NDLE9BQVEsT0FDUkMsS0FBTXZCLElBRU50QixNQUFLLFNBQUE4QyxHQU1OLE9BTEkvRCxJQUNIQSxFQUFPMkIsU0FBUyxHQUFHN0IsV0FBYSxVQUNoQ0UsRUFBT2dFLGdCQUFnQixhQUdBLE1BQXBCRCxFQUFTRSxRQUNMRixFQUFTRyxNQUlsQixJQUFHakQsTUFBSyxTQUFBOEMsSUFDWSxJQUFmckUsS0FDc0IsSUFBckJxRSxFQUFTN0MsUUFDWmxELEVBQVVtRyxPQUFPSixFQUFTeEIsTUFFMUJ2RSxFQUFVbUcsT0FBT0osRUFBU3hCLE1BQU0sSUFJbEMsSUFBSTZCLEVBQVEsSUFBSUMsWUFBWSxvQkFBcUIsQ0FBQ0MsT0FBUVAsSUFRMUQsT0FOQXBHLFNBQVM0RyxjQUFjSCxJQUVSLElBQVhyRCxHQUNIL0IsT0FBT25CLFNBQVNrRCxTQUdWZ0QsRUFBUzdDLE9BQ2pCLEdBQ0QsRUFRQWlELE9BQVEsU0FBVUssR0FBMEIsSUFBakJDLEVBQU85RSxVQUFBUixPQUFBLFFBQUFTLElBQUFELFVBQUEsSUFBQUEsVUFBQSxJQUNqQixJQUFaOEUsR0FDSDlHLFNBQVNPLGVBQWUsY0FBYzRCLFVBQVU4QixPQUFPLFVBQ3ZEakUsU0FBU08sZUFBZSxnQkFBZ0I0QixXQUFhLFlBRXJEbkMsU0FBU08sZUFBZSxnQkFBZ0I0QixVQUFVOEIsT0FBTyxVQUN6RGpFLFNBQVNPLGVBQWUsY0FBYzRCLFdBQWEsV0FHcEQsSUFBSXFFLEVBQVN4RyxTQUFTTyxlQUFlLDhCQUVyQ1AsU0FBU08sZUFBZSxtQ0FBbUMwQyxVQUFZNEQsRUFFdkVMLEVBQU9yRSxVQUFVOEIsT0FBTyxVQUV4QjhDLFlBQVcsV0FDVlAsRUFBT3JFLFVBQVVRLFFBQVEsWUFBYSxjQUN2QyxHQUFHLE1BRWEsSUFBWm1FLEdBQ0hDLFlBQVcsV0FDVlAsRUFBT3JFLFVBQVVRLFFBQVEsY0FBZSxhQUN4Q29FLFlBQVcsV0FDVlAsRUFBT3JFLFdBQWEsU0FDckIsR0FBRyxJQUNKLEdBQUcsSUFFTCxHQUdEOUIsRUFBVVcsTUFsWlYsQ0FtWkQsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYXVzaWJsZS1hbmFseXRpY3MvLi9hc3NldHMvc3JjL2pzL2FkbWluL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQbGF1c2libGUgQW5hbHl0aWNzXG4gKlxuICogQWRtaW4gSlNcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcblx0aWYgKCFkb2N1bWVudC5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCdwbGF1c2libGVfYW5hbHl0aWNzJykpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRsZXQgcGxhdXNpYmxlID0ge1xuXHRcdC8qKlxuXHRcdCAqIFByb3BlcnRpZXNcblx0XHQgKi9cblx0XHRub25jZUVsZW06IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdfd3Bub25jZScpLFxuXHRcdG5vbmNlOiAnJyxcblx0XHRzaG93V2l6YXJkRWxlbTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dfd2l6YXJkJyksXG5cdFx0ZG9tYWluTmFtZUVsZW06IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb21haW5fbmFtZScpLFxuXHRcdGFwaVRva2VuRWxlbTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwaV90b2tlbicpLFxuXHRcdGNyZWF0ZUFQSVRva2VuRWxlbXM6IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BsYXVzaWJsZS1jcmVhdGUtYXBpLXRva2VuJyksXG5cdFx0YnV0dG9uRWxlbXM6IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BsYXVzaWJsZS1hbmFseXRpY3MtYnV0dG9uJyksXG5cdFx0c3RlcEVsZW1zOiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwbGF1c2libGUtYW5hbHl0aWNzLXdpemFyZC1uZXh0LXN0ZXAnKSxcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgZXZlbnRzLlxuXHRcdCAqL1xuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmIChkb2N1bWVudC5sb2NhdGlvbi5oYXNoID09PSAnJyAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxhdXNpYmxlLWFuYWx5dGljcy13aXphcmQnKSAhPT0gbnVsbCkge1xuXHRcdFx0XHRkb2N1bWVudC5sb2NhdGlvbi5oYXNoID0gJyN3ZWxjb21lX3NsaWRlJztcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoaXMubm9uY2VFbGVtICE9PSBudWxsKSB7XG5cdFx0XHRcdHRoaXMubm9uY2UgPSB0aGlzLm5vbmNlRWxlbS52YWx1ZTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy50b2dnbGVXaXphcmRTdGVwKCk7XG5cblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy50b2dnbGVXaXphcmRTdGVwKTtcblxuXHRcdFx0aWYgKHRoaXMuc2hvd1dpemFyZEVsZW0gIT09IG51bGwpIHtcblx0XHRcdFx0dGhpcy5zaG93V2l6YXJkRWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc2hvd1dpemFyZCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLmRvbWFpbk5hbWVFbGVtICE9PSBudWxsKSB7XG5cdFx0XHRcdHRoaXMuZG9tYWluTmFtZUVsZW0uYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmRpc2FibGVDb25uZWN0QnV0dG9uKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoaXMuYXBpVG9rZW5FbGVtICE9PSBudWxsKSB7XG5cdFx0XHRcdHRoaXMuYXBpVG9rZW5FbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5kaXNhYmxlQ29ubmVjdEJ1dHRvbik7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLmNyZWF0ZUFQSVRva2VuRWxlbXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3JlYXRlQVBJVG9rZW5FbGVtcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlQVBJVG9rZW5FbGVtc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY3JlYXRlQVBJVG9rZW4pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLmJ1dHRvbkVsZW1zLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJ1dHRvbkVsZW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5idXR0b25FbGVtc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc2F2ZU9wdGlvbik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBEdWUgdG8gdGhlIHN0cnVjdHVyZSBvZiB0aGUgdG9nZ2xlcywgYW55IGV2ZW50cyBib3VuZCB0byB0aGVtIHdvdWxkIGJlIHRyaWdnZXJlZCB0d2ljZSwgdGhhdCdzIHdoeSB3ZSBiaW5kIGl0IHRvIHRoZSBkb2N1bWVudHMnIGNsaWNrJ1xuXHRcdFx0ICogZXZlbnQuXG5cdFx0XHQgKi9cblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy50b2dnbGVPcHRpb24pO1xuXG5cdFx0XHRpZiAodGhpcy5zdGVwRWxlbXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RlcEVsZW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5zdGVwRWxlbXNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnNhdmVPcHRpb25Pbk5leHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFRvZ2dsZSBPcHRpb24gYW5kIHN0b3JlIGluIERCLlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGVcblx0XHQgKiBAcGFyYW0gc2hvd05vdGljZVxuXHRcdCAqL1xuXHRcdHRvZ2dsZU9wdGlvbjogZnVuY3Rpb24gKGUsIHNob3dOb3RpY2UgPSB0cnVlKSB7XG5cdFx0XHQvKipcblx0XHRcdCAqIE1ha2Ugc3VyZSBldmVudCB0YXJnZXQgaXMgYSB0b2dnbGUuXG5cdFx0XHQgKi9cblx0XHRcdGlmIChlLnRhcmdldC5jbGFzc0xpc3QgPT09IG51bGwgfHwgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncGxhdXNpYmxlLWFuYWx5dGljcy10b2dnbGUnKSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGJ1dHRvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpO1xuXHRcdFx0bGV0IHRvZ2dsZSA9ICcnO1xuXHRcdFx0bGV0IHRvZ2dsZVN0YXR1cyA9ICcnO1xuXG5cdFx0XHQvLyBUaGUgYnV0dG9uIGVsZW1lbnQgaXMgY2xpY2tlZC5cblx0XHRcdGlmIChlLnRhcmdldC50eXBlID09PSAnc3VibWl0Jykge1xuXHRcdFx0XHR0b2dnbGUgPSBidXR0b24ucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gVGhlIHNwYW4gZWxlbWVudCBpcyBjbGlja2VkLlxuXHRcdFx0XHR0b2dnbGUgPSBlLnRhcmdldC5jbG9zZXN0KCdzcGFuJyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdiZy1pbmRpZ28tNjAwJykpIHtcblx0XHRcdFx0Ly8gVG9nZ2xlOiBvZmZcblx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5yZXBsYWNlKCdiZy1pbmRpZ28tNjAwJywgJ2JnLWdyYXktMjAwJyk7XG5cdFx0XHRcdHRvZ2dsZS5jbGFzc0xpc3QucmVwbGFjZSgndHJhbnNsYXRlLXgtNScsICd0cmFuc2xhdGUteC0wJyk7XG5cdFx0XHRcdHRvZ2dsZVN0YXR1cyA9ICcnO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gVG9nZ2xlOiBvblxuXHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LnJlcGxhY2UoJ2JnLWdyYXktMjAwJywgJ2JnLWluZGlnby02MDAnKTtcblx0XHRcdFx0dG9nZ2xlLmNsYXNzTGlzdC5yZXBsYWNlKCd0cmFuc2xhdGUteC0wJywgJ3RyYW5zbGF0ZS14LTUnKTtcblx0XHRcdFx0dG9nZ2xlU3RhdHVzID0gJ29uJztcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuXHRcdFx0Zm9ybS5hcHBlbmQoJ2FjdGlvbicsICdwbGF1c2libGVfYW5hbHl0aWNzX3RvZ2dsZV9vcHRpb24nKTtcblx0XHRcdGZvcm0uYXBwZW5kKCdvcHRpb25fbmFtZScsIGJ1dHRvbi5uYW1lKTtcblx0XHRcdGZvcm0uYXBwZW5kKCdvcHRpb25fdmFsdWUnLCBidXR0b24udmFsdWUpO1xuXHRcdFx0Zm9ybS5hcHBlbmQoJ29wdGlvbl9sYWJlbCcsIGJ1dHRvbi5uZXh0RWxlbWVudFNpYmxpbmcuaW5uZXJIVE1MKTtcblx0XHRcdGZvcm0uYXBwZW5kKCd0b2dnbGVfc3RhdHVzJywgdG9nZ2xlU3RhdHVzKTtcblx0XHRcdGZvcm0uYXBwZW5kKCdpc19saXN0JywgYnV0dG9uLmRhdGFzZXQubGlzdCk7XG5cdFx0XHRmb3JtLmFwcGVuZCgnX25vbmNlJywgcGxhdXNpYmxlLm5vbmNlKTtcblxuXHRcdFx0bGV0IHJlbG9hZCA9IGZhbHNlO1xuXG5cdFx0XHQvKipcblx0XHRcdCAqIFdoZW4gZWl0aGVyIG9mIHRoZXNlIG9wdGlvbnMgYXJlIGVuYWJsZWQsIHdlIG5lZWQgdGhlIHBhZ2UgdG8gcmVsb2FkLCB0byBkaXNwbGF5IG5vdGljZXMvd2FybmluZ3MuXG5cdFx0XHQgKi9cblx0XHRcdGlmIChidXR0b24ubmFtZSA9PT0gJ3Byb3h5X2VuYWJsZWQnIHx8IGJ1dHRvbi5uYW1lID09PSAnZW5hYmxlX2FuYWx5dGljc19kYXNoYm9hcmQnKSB7XG5cdFx0XHRcdHJlbG9hZCA9IHRydWU7XG5cdFx0XHRcdHNob3dOb3RpY2UgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0bGV0IHJlc3VsdCA9IHBsYXVzaWJsZS5hamF4KGZvcm0sIG51bGwsIHNob3dOb3RpY2UsIHJlbG9hZCk7XG5cblx0XHRcdHJlc3VsdC50aGVuKGZ1bmN0aW9uIChzdWNjZXNzKSB7XG5cdFx0XHRcdGlmIChzdWNjZXNzID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdHBsYXVzaWJsZS50b2dnbGVPcHRpb24oZSwgZmFsc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2F2ZSB2YWx1ZSBvZiBpbnB1dCBvciB0ZXh0IGFyZWEgdG8gREIuXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gZVxuXHRcdCAqL1xuXHRcdHNhdmVPcHRpb246IGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRjb25zdCBidXR0b24gPSBlLnRhcmdldDtcblx0XHRcdGNvbnN0IHNlY3Rpb24gPSBidXR0b24uY2xvc2VzdCgnLnBsYXVzaWJsZS1hbmFseXRpY3Mtc2VjdGlvbicpO1xuXHRcdFx0Y29uc3QgaW5wdXRzID0gc2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCwgdGV4dGFyZWEnKTtcblx0XHRcdGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcblx0XHRcdGNvbnN0IG9wdGlvbnMgPSBbXTtcblxuXHRcdFx0aW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGlucHV0KSB7XG5cdFx0XHRcdG9wdGlvbnMucHVzaCh7bmFtZTogaW5wdXQubmFtZSwgdmFsdWU6IGlucHV0LnZhbHVlfSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Zm9ybS5hcHBlbmQoJ2FjdGlvbicsICdwbGF1c2libGVfYW5hbHl0aWNzX3NhdmVfb3B0aW9ucycpO1xuXHRcdFx0Zm9ybS5hcHBlbmQoJ29wdGlvbnMnLCBKU09OLnN0cmluZ2lmeShvcHRpb25zKSk7XG5cdFx0XHRmb3JtLmFwcGVuZCgnX25vbmNlJywgcGxhdXNpYmxlLm5vbmNlKTtcblxuXHRcdFx0YnV0dG9uLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXHRcdFx0YnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcblxuXHRcdFx0cGxhdXNpYmxlLmFqYXgoZm9ybSwgYnV0dG9uLCBudWxsLCB0cnVlKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2F2ZSBPcHRpb25zIG9uIE5leHQgY2xpY2sgZm9yIEFQSSBUb2tlbiBhbmQgRG9tYWluIE5hbWUgc2xpZGVzLlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGVcblx0XHQgKi9cblx0XHRzYXZlT3B0aW9uT25OZXh0OiBmdW5jdGlvbiAoZSkge1xuXHRcdFx0bGV0IGhhc2ggPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJyk7XG5cblx0XHRcdGlmIChoYXNoID09PSAnYXBpX3Rva2VuX3NsaWRlJyB8fCBoYXNoID09PSAnZG9tYWluX25hbWVfc2xpZGUnKSB7XG5cdFx0XHRcdGxldCBmb3JtID0gZS50YXJnZXQuY2xvc2VzdCgnLnBsYXVzaWJsZS1hbmFseXRpY3Mtd2l6YXJkLXN0ZXAtc2VjdGlvbicpO1xuXHRcdFx0XHRsZXQgaW5wdXRzID0gZm9ybS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnSU5QVVQnKTtcblx0XHRcdFx0bGV0IG9wdGlvbnMgPSBbXTtcblxuXHRcdFx0XHRmb3IgKGxldCBpbnB1dCBvZiBpbnB1dHMpIHtcblx0XHRcdFx0XHRvcHRpb25zLnB1c2goe25hbWU6IGlucHV0Lm5hbWUsIHZhbHVlOiBpbnB1dC52YWx1ZX0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0bGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcblx0XHRcdFx0ZGF0YS5hcHBlbmQoJ2FjdGlvbicsICdwbGF1c2libGVfYW5hbHl0aWNzX3NhdmVfb3B0aW9ucycpO1xuXHRcdFx0XHRkYXRhLmFwcGVuZCgnb3B0aW9ucycsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpKTtcblx0XHRcdFx0ZGF0YS5hcHBlbmQoJ19ub25jZScsIHBsYXVzaWJsZS5ub25jZSk7XG5cblx0XHRcdFx0cGxhdXNpYmxlLmFqYXgoZGF0YSwgbnVsbCwgZmFsc2UsIHRydWUpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBEaXNhYmxlIENvbm5lY3QgYnV0dG9uIGlmIERvbWFpbiBOYW1lIG9yIEFQSSBUb2tlbiBmaWVsZCBpcyBlbXB0eS5cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBlXG5cdFx0ICovXG5cdFx0ZGlzYWJsZUNvbm5lY3RCdXR0b246IGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XG5cdFx0XHRsZXQgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nvbm5lY3RfcGxhdXNpYmxlX2FuYWx5dGljcycpO1xuXHRcdFx0bGV0IGJ1dHRvbklzSHJlZiA9IGZhbHNlO1xuXG5cdFx0XHRpZiAoYnV0dG9uID09PSBudWxsKSB7XG5cdFx0XHRcdGxldCBzbGlkZV9pZCA9IGRvY3VtZW50LmxvY2F0aW9uLmhhc2g7XG5cdFx0XHRcdGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVfaWQgKyAnIC5wbGF1c2libGUtYW5hbHl0aWNzLXdpemFyZC1uZXh0LXN0ZXAnKTtcblx0XHRcdFx0YnV0dG9uSXNIcmVmID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGJ1dHRvbiA9PT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0YXJnZXQudmFsdWUgIT09ICcnKSB7XG5cdFx0XHRcdGlmICghYnV0dG9uSXNIcmVmKSB7XG5cdFx0XHRcdFx0YnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BvaW50ZXItZXZlbnRzLW5vbmUnKTtcblx0XHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LnJlcGxhY2UoJ2JnLWdyYXktMjAwJywgJ2JnLWluZGlnby02MDAnKVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWJ1dHRvbklzSHJlZikge1xuXHRcdFx0XHRidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRidXR0b24uaW5uZXJIVE1MID0gYnV0dG9uLmlubmVySFRNTC5yZXBsYWNlKCdDb25uZWN0ZWQnLCAnQ29ubmVjdCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdCArPSAnIHBvaW50ZXItZXZlbnRzLW5vbmUnO1xuXHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LnJlcGxhY2UoJ2JnLWluZGlnby02MDAnLCAnYmctZ3JheS0yMDAnKVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBPcGVuIGNyZWF0ZSBBUEkgdG9rZW4gZGlhbG9nLlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGVcblx0XHQgKi9cblx0XHRjcmVhdGVBUElUb2tlbjogZnVuY3Rpb24gKGUpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0bGV0IGRvbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb21haW5fbmFtZScpLnZhbHVlO1xuXHRcdFx0ZG9tYWluID0gZG9tYWluLnJlcGxhY2UoJy8nLCAnJTJGJyk7XG5cblx0XHRcdHdpbmRvdy5vcGVuKGBodHRwczovL3BsYXVzaWJsZS5pby8ke2RvbWFpbn0vc2V0dGluZ3MvaW50ZWdyYXRpb25zP25ld190b2tlbj1Xb3JkUHJlc3NgLCAnX2JsYW5rJywgJ2xvY2F0aW9uPXllcyxoZWlnaHQ9NzY4LHdpZHRoPTEwMjQsc2Nyb2xsYmFycz15ZXMsc3RhdHVzPW5vJyk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFNob3cgd2l6YXJkLlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGVcblx0XHQgKi9cblx0XHRzaG93V2l6YXJkOiBmdW5jdGlvbiAoZSkge1xuXHRcdFx0bGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcblx0XHRcdGRhdGEuYXBwZW5kKCdhY3Rpb24nLCAncGxhdXNpYmxlX2FuYWx5dGljc19zaG93X3dpemFyZCcpO1xuXHRcdFx0ZGF0YS5hcHBlbmQoJ19ub25jZScsIGUudGFyZ2V0LmRhdGFzZXQubm9uY2UpO1xuXG5cdFx0XHRwbGF1c2libGUuYWpheChkYXRhLCBudWxsLCBmYWxzZSwgdHJ1ZSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFRvZ2dsZXMgdGhlIGFjdGl2ZS9pbmFjdGl2ZS9jdXJyZW50IHN0YXRlIG9mIHRoZSBzdGVwcy5cblx0XHQgKi9cblx0XHR0b2dnbGVXaXphcmRTdGVwOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXVzaWJsZS1hbmFseXRpY3Mtd2l6YXJkJykgPT09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBoYXNoID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkucmVwbGFjZSgnX3NsaWRlJywgJycpO1xuXG5cdFx0XHQvKipcblx0XHRcdCAqIFJlc2V0IGFsbCBzdGVwcyB0byBpbmFjdGl2ZS5cblx0XHRcdCAqL1xuXHRcdFx0bGV0IGFsbFN0ZXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBsYXVzaWJsZS1hbmFseXRpY3Mtd2l6YXJkLXN0ZXAnKTtcblx0XHRcdGxldCBhY3RpdmVTdGVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbGF1c2libGUtYW5hbHl0aWNzLXdpemFyZC1hY3RpdmUtc3RlcCcpO1xuXHRcdFx0bGV0IGNvbXBsZXRlZFN0ZXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBsYXVzaWJsZS1hbmFseXRpY3Mtd2l6YXJkLWNvbXBsZXRlZC1zdGVwJyk7XG5cblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYWxsU3RlcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0YWxsU3RlcHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG5cdFx0XHR9XG5cblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYWN0aXZlU3RlcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0YWN0aXZlU3RlcHNbaV0uY2xhc3NMaXN0ICs9ICcgaGlkZGVuJztcblx0XHRcdH1cblxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjb21wbGV0ZWRTdGVwcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb21wbGV0ZWRTdGVwc1tpXS5jbGFzc0xpc3QgKz0gJyBoaWRkZW4nO1xuXHRcdFx0fVxuXG5cdFx0XHQvKipcblx0XHRcdCAqIE1hcmsgY3VycmVudCBzdGVwIGFzIGFjdGl2ZS5cblx0XHRcdCAqL1xuXHRcdFx0bGV0IGN1cnJlbnRTdGVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZS1zdGVwLScgKyBoYXNoKTtcblx0XHRcdGxldCBpbmFjdGl2ZUN1cnJlbnRTdGVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0ZXAtJyArIGhhc2gpO1xuXG5cdFx0XHRjdXJyZW50U3RlcC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblx0XHRcdGluYWN0aXZlQ3VycmVudFN0ZXAuY2xhc3NMaXN0ICs9ICcgaGlkZGVuJztcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBNYXJrIHN0ZXBzIGFzIGNvbXBsZXRlZC5cblx0XHRcdCAqXG5cdFx0XHQgKiBAdHlwZSB7c3RyaW5nW119XG5cdFx0XHQgKi9cblx0XHRcdGxldCBjdXJyZW50bHlDb21wbGV0ZWRTdGVwcyA9IGN1cnJlbnRTdGVwLmRhdGFzZXQuY29tcGxldGVkU3RlcHMuc3BsaXQoJywnKTtcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBGaWx0ZXIgZW1wdHkgYXJyYXkgZWxlbWVudHMuXG5cdFx0XHQgKiBAdHlwZSB7c3RyaW5nW119XG5cdFx0XHQgKi9cblx0XHRcdGN1cnJlbnRseUNvbXBsZXRlZFN0ZXBzID0gY3VycmVudGx5Q29tcGxldGVkU3RlcHMuZmlsdGVyKG4gPT4gbik7XG5cblx0XHRcdGlmIChjdXJyZW50bHlDb21wbGV0ZWRTdGVwcy5sZW5ndGggPCAxKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y3VycmVudGx5Q29tcGxldGVkU3RlcHMuZm9yRWFjaChmdW5jdGlvbiAoc3RlcCkge1xuXHRcdFx0XHRsZXQgY29tcGxldGVkU3RlcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wbGV0ZWQtc3RlcC0nICsgc3RlcCk7XG5cdFx0XHRcdGxldCBpbmFjdGl2ZVN0ZXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RlcC0nICsgc3RlcCk7XG5cblx0XHRcdFx0Y29tcGxldGVkU3RlcC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblx0XHRcdFx0aW5hY3RpdmVTdGVwLmNsYXNzTGlzdCArPSAnIGhpZGRlbic7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogRG8gQUpBWCByZXF1ZXN0IGFuZCAob3B0aW9uYWxseSkgc2hvdyBhIG5vdGljZSBvciAob3B0aW9uYWxseSkgcmVsb2FkIHRoZSBwYWdlLlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGRhdGFcblx0XHQgKiBAcGFyYW0gYnV0dG9uXG5cdFx0ICogQHBhcmFtIHNob3dOb3RpY2Vcblx0XHQgKiBAcGFyYW0gcmVsb2FkXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIG9iamVjdFxuXHRcdCAqL1xuXHRcdGFqYXg6IGZ1bmN0aW9uIChkYXRhLCBidXR0b24gPSBudWxsLCBzaG93Tm90aWNlID0gdHJ1ZSwgcmVsb2FkID0gZmFsc2UpIHtcblx0XHRcdHJldHVybiBmZXRjaChcblx0XHRcdFx0YWpheHVybCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHRcdGJvZHk6IGRhdGEsXG5cdFx0XHRcdH1cblx0XHRcdCkudGhlbihyZXNwb25zZSA9PiB7XG5cdFx0XHRcdGlmIChidXR0b24pIHtcblx0XHRcdFx0XHRidXR0b24uY2hpbGRyZW5bMF0uY2xhc3NMaXN0ICs9ICcgaGlkZGVuJztcblx0XHRcdFx0XHRidXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuXHRcdFx0XHRpZiAoc2hvd05vdGljZSA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdGlmIChyZXNwb25zZS5zdWNjZXNzID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRwbGF1c2libGUubm90aWNlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRwbGF1c2libGUubm90aWNlKHJlc3BvbnNlLmRhdGEsIHRydWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGxldCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgncGxhdXNpYmxlQWpheERvbmUnLCB7ZGV0YWlsOiByZXNwb25zZX0pO1xuXG5cdFx0XHRcdGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXG5cdFx0XHRcdGlmIChyZWxvYWQgPT09IHRydWUpIHtcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gcmVzcG9uc2Uuc3VjY2Vzcztcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBEaXNwbGF5cyBhIG5vdGljZSBvciBlcnJvciBtZXNzYWdlLlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIG1lc3NhZ2Vcblx0XHQgKiBAcGFyYW0gaXNFcnJvclxuXHRcdCAqL1xuXHRcdG5vdGljZTogZnVuY3Rpb24gKG1lc3NhZ2UsIGlzRXJyb3IgPSBmYWxzZSkge1xuXHRcdFx0aWYgKGlzRXJyb3IgPT09IHRydWUpIHtcblx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ljb24tZXJyb3InKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ljb24tc3VjY2VzcycpLmNsYXNzTGlzdCArPSAnIGhpZGRlbic7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWNvbi1zdWNjZXNzJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG5cdFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpY29uLWVycm9yJykuY2xhc3NMaXN0ICs9ICcgaGlkZGVuJztcblx0XHRcdH1cblxuXHRcdFx0bGV0IG5vdGljZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF1c2libGUtYW5hbHl0aWNzLW5vdGljZScpO1xuXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxhdXNpYmxlLWFuYWx5dGljcy1ub3RpY2UtdGV4dCcpLmlubmVySFRNTCA9IG1lc3NhZ2U7XG5cblx0XHRcdG5vdGljZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdG5vdGljZS5jbGFzc0xpc3QucmVwbGFjZSgnb3BhY2l0eS0wJywgJ29wYWNpdHktMTAwJyk7XG5cdFx0XHR9LCAyMDApXG5cblx0XHRcdGlmIChpc0Vycm9yID09PSBmYWxzZSkge1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRub3RpY2UuY2xhc3NMaXN0LnJlcGxhY2UoJ29wYWNpdHktMTAwJywgJ29wYWNpdHktMCcpO1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0bm90aWNlLmNsYXNzTGlzdCArPSAnIGhpZGRlbic7XG5cdFx0XHRcdFx0fSwgMjAwKVxuXHRcdFx0XHR9LCAyMDAwKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwbGF1c2libGUuaW5pdCgpO1xufSk7XG4iXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwibG9jYXRpb24iLCJocmVmIiwiaW5jbHVkZXMiLCJwbGF1c2libGUiLCJub25jZUVsZW0iLCJnZXRFbGVtZW50QnlJZCIsIm5vbmNlIiwic2hvd1dpemFyZEVsZW0iLCJkb21haW5OYW1lRWxlbSIsImFwaVRva2VuRWxlbSIsImNyZWF0ZUFQSVRva2VuRWxlbXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiYnV0dG9uRWxlbXMiLCJzdGVwRWxlbXMiLCJpbml0IiwiaGFzaCIsInRoaXMiLCJ2YWx1ZSIsInRvZ2dsZVdpemFyZFN0ZXAiLCJ3aW5kb3ciLCJzaG93V2l6YXJkIiwiZGlzYWJsZUNvbm5lY3RCdXR0b24iLCJsZW5ndGgiLCJpIiwiY3JlYXRlQVBJVG9rZW4iLCJzYXZlT3B0aW9uIiwidG9nZ2xlT3B0aW9uIiwic2F2ZU9wdGlvbk9uTmV4dCIsImUiLCJzaG93Tm90aWNlIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJidXR0b24iLCJjbG9zZXN0IiwidG9nZ2xlIiwidG9nZ2xlU3RhdHVzIiwidHlwZSIsInF1ZXJ5U2VsZWN0b3IiLCJyZXBsYWNlIiwiZm9ybSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwibmFtZSIsIm5leHRFbGVtZW50U2libGluZyIsImlubmVySFRNTCIsImRhdGFzZXQiLCJsaXN0IiwicmVsb2FkIiwiYWpheCIsInRoZW4iLCJzdWNjZXNzIiwiaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsIm9wdGlvbnMiLCJmb3JFYWNoIiwiaW5wdXQiLCJwdXNoIiwiSlNPTiIsInN0cmluZ2lmeSIsImNoaWxkcmVuIiwicmVtb3ZlIiwic2V0QXR0cmlidXRlIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicyIsIm4iLCJkb25lIiwiZXJyIiwiZiIsImRhdGEiLCJidXR0b25Jc0hyZWYiLCJzbGlkZV9pZCIsImRpc2FibGVkIiwicHJldmVudERlZmF1bHQiLCJkb21haW4iLCJvcGVuIiwiY29uY2F0Iiwic3Vic3RyaW5nIiwiYWxsU3RlcHMiLCJhY3RpdmVTdGVwcyIsImNvbXBsZXRlZFN0ZXBzIiwiY3VycmVudFN0ZXAiLCJpbmFjdGl2ZUN1cnJlbnRTdGVwIiwiY3VycmVudGx5Q29tcGxldGVkU3RlcHMiLCJzcGxpdCIsImZpbHRlciIsInN0ZXAiLCJjb21wbGV0ZWRTdGVwIiwiaW5hY3RpdmVTdGVwIiwiZmV0Y2giLCJhamF4dXJsIiwibWV0aG9kIiwiYm9keSIsInJlc3BvbnNlIiwicmVtb3ZlQXR0cmlidXRlIiwic3RhdHVzIiwianNvbiIsIm5vdGljZSIsImV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJkaXNwYXRjaEV2ZW50IiwibWVzc2FnZSIsImlzRXJyb3IiLCJzZXRUaW1lb3V0Il0sInNvdXJjZVJvb3QiOiIifQ==