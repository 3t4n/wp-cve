var XOFieaturedImageTool;!function($){XOFieaturedImageTool=function(parameters){var self=this,total_count=parameters.post_ids.length,counter=0,successes_counter=0,error_counter=0,abort_flag=!1;this.sprintf=function(){var _arg=$.makeArray(arguments),template=_arg.shift(),i;for(i in _arg)template=template.replace("%s",_arg[i]);return template},this.updateStatus=function(response){counter++,$("#xo-featured-image-bar").progressbar("value",counter/total_count*100),$("#xo-featured-image-bar-percent").html(Math.round(counter/total_count*100)+"%"),response.success?(successes_counter++,$("#xo-featured-image-success-count").html(successes_counter)):(error_counter++,$("#xo-featured-image-error-count").html(error_counter),$("#xo-featured-image-msg").append("<li>"+response.error+"</li>"))},this.finalization=function(){var msg="";$("#xo-featured-image-stop-bottun").hide(),msg=error_counter>0?this.sprintf(parameters.failure_message,error_counter):parameters.success_message,$("#xo-featured-image-message").hide(),$("#message").html("<p><strong>"+msg+"</strong></p>"),$("#message").show(),$("#xo-featured-image-back-link").show()},this.init=function(id){$("#xo-featured-image-bar").progressbar(),$("#xo-featured-image-bar-percent").html("0%"),$("#xo-featured-image-stop-bottun").click((function(btn){abort_flag=!0,$("#xo-featured-image-stop-bottun").prop("disabled",!0),$("#xo-featured-image-stop-bottun").val(parameters.stop_button_message)}))},this.start=function(id){$.ajax({type:"POST",url:ajaxurl,data:{action:"xo_featured_image_tools",nonce:parameters.nonce,id:id,external_image:parameters.external_image,exclude_small_image:parameters.exclude_small_image,default_image:parameters.default_image},success:function(response){(response!==Object(response)||void 0===response.success&&void 0===response.error)&&((response=new Object).success=!1,response.error="Fatal error."),self.updateStatus(response),parameters.post_ids.length&&!abort_flag?self.start(parameters.post_ids.shift()):self.finalization()},error:function(response){self.updateStatus(response),parameters.post_ids.length&&!abort_flag?self.start(parameters.post_ids.shift()):self.finalization()}})},this.init(),this.start(parameters.post_ids.shift())}}(jQuery);