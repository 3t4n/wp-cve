/**
 * FloatingButton
 * A JavaScript class for creating customizable floating button.
 *
 * @version 1.0.0
 * @license MIT License
 * @author Dmytro Lobov
 */
"use strict";class FloatingButton{constructor(t){this.settings={showAfterTimer:!1,hideAfterTimer:!1,showAfterPosition:!1,hideAfterPosition:!1,uncheckedBtn:!1,uncheckedSubBtn:!1,hideBtns:!1,...t},this.element=document.getElementById(this.settings.element)}activeLikeBtn(){const t=this.element.querySelector('[data-btn-type="like"]');if(!t)return!1;if(!this.settings.pageId){const e=t.closest("li");return e?e.remove():this.element.remove(),!1}parseInt(localStorage.getItem("likePost"))===this.settings.pageId&&t.classList.add("_active")}displayMenu(){this.settings.showAfterTimer||this.settings.hideAfterTimer||this.settings.hideAfterPosition||this.settings.showAfterPosition?(this.settings.showAfterTimer&&this.showAfterTimer(this.settings.showAfterTimer),this.settings.hideAfterTimer&&this.hideAfterTimer(this.settings.hideAfterTimer),this.settings.hideAfterPosition&&this.hideAfterPosition(this.settings.hideAfterPosition),this.settings.showAfterPosition&&this.showAfterPosition(this.settings.showAfterPosition)):this.showMenu()}showMenu(){this.element.classList.remove("is-hidden")}hideMenu(){this.element.classList.add("is-hidden")}showAfterTimer(){setTimeout((()=>this.showMenu()),1e3*this.settings.showAfterTimer)}hideAfterTimer(){setTimeout((()=>this.element.classList.add("is-hidden")),1e3*this.settings.hideAfterTimer)}hideAfterPosition(){window.addEventListener("scroll",(()=>{window.scrollY>this.settings.hideAfterPosition?this.hideMenu():this.showMenu()}))}showAfterPosition(){window.addEventListener("scroll",(()=>{window.scrollY<=this.settings.showAfterPosition?this.hideMenu():this.showMenu()}))}actionServices(){this.element.addEventListener("click",(t=>{const e=t.target.closest("[data-btn-type]");if(!e)return;t.preventDefault();const s=e.getAttribute("data-btn-type");this.handleAction(s,e)}))}handleAction(t,e){const s={print:()=>window.print(),back:()=>window.history.back(),forward:()=>window.history.forward(),scroll:()=>{const t=e.getAttribute("href");document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},toTop:()=>window.scrollTo({top:0,behavior:"smooth"}),tobottom:()=>window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),like:()=>this.setLikes(e)}[t];s&&s()}setLikes(t){const e=t.getAttribute("data-counter"),s=localStorage.getItem("likePost");if(this.settings.pageId&&this.settings.pageId!==parseInt(s)){const s=parseInt(e)+1;let i={action:"wowp_likes",post_id:this.settings.pageId,_ajax_nonce:wowp_flBtn.nonce},o=new URLSearchParams;for(let t in i)o.append(t,i[t]);fetch(wowp_flBtn.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:o.toString()}).then((e=>{localStorage.setItem("likePost",this.settings.pageId),t.setAttribute("data-counter",s),t.classList.add("_active")})).catch((t=>console.error("Error:",t)))}}shareServices(){this.element.querySelectorAll("[data-share]").forEach((t=>{t.addEventListener("click",(()=>{this.shareThis(t)}))}))}shareThis(t){const e=t.getAttribute("data-share"),s=this.defaultShareServices()[e],i=`\n    menubar=no,\n    toolbar=no,\n    location=no,\n    scrollbars=no,\n    status=no,\n    resizable=yes,\n    width=550,\n    height=450,\n    top=${(screen.height-450)/2},\n    left=${(screen.width-550)/2}\n  `;window.open(s.url,null,i)}defaultShareServices(){const t=encodeURIComponent(document.location.href),e=encodeURIComponent(document.title);return{blogger:{url:`https://www.blogger.com/blog-this.g?u=${t}&n=${e}`},buffer:{url:`https://buffer.com/add?text=${e}&url=${t}`},diaspora:{url:`https://share.diasporafoundation.org/?title=${e}&url=${t}`},digg:{url:`http://digg.com/submit?url=${t}`},douban:{url:`http://www.douban.com/recommend/?url=${t}&title=${e}`},draugiem:{url:`https://www.draugiem.lv/say/ext/add.php?title=${e}&url=${t}`},email:{url:`mailto:?subject=${e}&body=${t}`},evernote:{url:`http://www.evernote.com/clip.action?url=${t}&title=${e}`},facebook:{url:`https://www.facebook.com/sharer.php?u=${t}`},flipboard:{url:`https://share.flipboard.com/bookmarklet/popout?v=2&title=${e}&url=${t}`},"google-bookmarks":{url:`https://www.google.com/bookmarks/mark?op=edit&bkmk=${t}&title=${e}`},googleplus:{url:`https://plus.google.com/share?url=${t}`},"hacker-news":{url:`https://news.ycombinator.com/submitlink?u=${t}&t=${e}`},instapaper:{url:`http://www.instapaper.com/edit?url=${t}&title=${e}`},line:{url:`https://lineit.line.me/share/ui?url=${t}`},linkedin:{url:`https://www.linkedin.com/shareArticle?mini=true&url=${t}&title=${e}`},livejournal:{url:`http://www.livejournal.com/update.bml?subject=${e}&event=${t}`},myspace:{url:`https://myspace.com/post?u=${t}&t=${e}`},odnoklassniki:{url:`https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&st.shareUrl=${t}`},pinterest:{url:`http://pinterest.com/pin/create/button/?url=${t}`},pocket:{url:`https://getpocket.com/edit?url=${t}`},qzone:{url:`http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${t}`},reddit:{url:`http://www.reddit.com/submit?url=${t}&title=${e}`},renren:{url:`http://widget.renren.com/dialog/share?resourceUrl=${t}&srcUrl=${t}&title=${e}`},skype:{url:`https://web.skype.com/share?url=${t}`},stumbleupon:{url:"http://www.stumbleupon.com/submit?url=${PAGE_URL}&title=${PAGE_TITLE}"},telegram:{url:`https://telegram.me/share/url?url=${t}&text=${e}`},tumblr:{url:`https://www.tumblr.com/widgets/share/tool?canonicalUrl=${t}&title=${e}`},twitter:{url:`https://twitter.com/intent/tweet?url=${t}&text=${e}`},vk:{url:`http://vk.com/share.php?url=${t}&title=${e}`},weibo:{url:`http://service.weibo.com/share/share.php?url=${t}&title=${e}`},whatsapp:{url:`whatsapp://send?text=${e}%20%0A${t}`},xing:{url:`https://www.xing.com/spi/shares/new?url=${t}`}}}translate(){this.element.querySelectorAll("[data-google-lang]").length>0&&this.appendScript()}appendScript(){const t=document.head,e=document.createElement("script");e.src="https://translate.google.com/translate_a/element.js?cb=FLBTNTranslateInit",e.setAttribute("defer",""),t.appendChild(e);const s=document.createElement("style");s.textContent=".skiptranslate {display: none !important;}body {top: 0 !important}",t.appendChild(s)}static Translate(){const t=document,e=window,s=t.documentElement.lang.slice(0,2);this.getLanguage(s)===s&&this.clearCookie();const i=Array.from(t.querySelectorAll("[data-google-lang]"));if(!i.length)return!1;new google.translate.TranslateElement({pageLanguage:s}),i.forEach((t=>{t.addEventListener("click",(s=>{s.preventDefault();let i=t.getAttribute("data-google-lang");this.setCookie(i),e.location.reload()}))}))}static getLanguage(t){const e=document.cookie.match("(^|;) ?googtrans=([^;]*)(;|$)"),s=e?e[2].split("/")[2]:null;return void 0!==s&&"null"!==s?s:t}static clearCookie(){document.cookie="googtrans=null",document.cookie="googtrans=null; domain="+document.domain}static setCookie(t){document.cookie="googtrans=/auto/"+t,document.cookie="googtrans=/auto/"+t+"; domain="+document.domain}uncheckBtn(){if(!this.settings.uncheckedBtn)return;const t=this.settings.element,e=this.element,s=this;document.addEventListener("click",(function(i){i.target.closest("#"+t)!==e&&(e.querySelector('input[type="checkbox"]').checked=!1,s.hideButtons("show"))}))}uncheckedSubBtn(){if(!this.settings.uncheckedSubBtn)return;const t=[...this.element.querySelectorAll("ul a")],e=this;t.forEach((t=>{t.addEventListener("click",(t=>{this.element.querySelector('input[type="checkbox"]').checked=!1,e.hideButtons("show")}))}))}hideButtons(t){if(!this.settings.hideBtns)return;const e=[...document.querySelectorAll(".flBtn")].filter((t=>t!==this.element));"hide"===t?e.forEach((t=>t.classList.add("is-hidden"))):e.forEach((t=>t.classList.remove("is-hidden")))}check(){const t=this.element.querySelector('input[type="checkbox"]'),e=this.element,s=this;if(!t)return!1;function i(){t.checked?(e.classList.add("flBtn-stop"),s.hideButtons("hide")):(e.classList.remove("flBtn-stop"),s.hideButtons("show"))}t.addEventListener("change",i),i()}openMenu(){const t=document.querySelectorAll('[data-btn-type="content-menu"]');if(!t)return!1;t.forEach((t=>{t.addEventListener("click",(()=>{const e=t.closest(".flBtn"),s=t.getBoundingClientRect(),i=t.getAttribute("data-btn-call-menu"),o=document.querySelector('[data-btn-menu="'+i+'"]'),n=t.closest("ul");let r=!1;n&&n.querySelector(".flBtn-first")&&(r=n.classList.contains("flBtn-first"));const l=window.innerWidth,a=window.innerHeight;e.classList.contains("flBtn-position-l")?(o.style.top=s.top+"px",o.style.left=s.left+s.width+10+"px"):e.classList.contains("flBtn-position-r")?(o.style.top=s.top+"px",o.style.right=s.width+40+"px"):e.classList.contains("flBtn-position-t")?(o.style.top=s.top+s.width+10+"px",o.style.left=s.left+"px"):e.classList.contains("flBtn-position-b")?(o.style.left=s.left+"px",o.style.bottom=s.width+40+"px"):e.classList.contains("flBtn-position-tr")?(o.style.top=r?s.top+"px":s.bottom+20+"px",o.style.right=r?s.width+40+"px":l-s.right+"px"):e.classList.contains("flBtn-position-tl")?(o.style.top=r?s.top+"px":s.bottom+20+"px",o.style.left=r?s.right+10+"px":s.left+"px"):e.classList.contains("flBtn-position-bl")?(o.style.bottom=r?a-s.bottom+"px":a-s.top+20+"px",o.style.left=r?s.right+20+"px":s.left+"px"):e.classList.contains("flBtn-position-br")&&(o.style.bottom=r?a-s.bottom+"px":a-s.top+20+"px",o.style.right=r?l-s.left+20+"px":l-s.right+"px"),o.classList.remove("is-hidden")}))}))}closeMenu(){const t=document.querySelectorAll(".flBtn_close");if(!t)return!1;t.forEach((t=>{t.addEventListener("click",(()=>{t.closest(".flBtn_menu-wrapper").classList.add("is-hidden")}))}))}run(){this.activeLikeBtn(),this.displayMenu(),this.actionServices(),this.shareServices(),this.translate(),this.uncheckBtn(),this.uncheckedSubBtn(),this.check(),this.openMenu(),this.closeMenu()}static initialize(t){const e=new FloatingButton(t);return e.run(),e}}function FLBTNTranslateInit(){FloatingButton.Translate()}document.addEventListener("DOMContentLoaded",(function(){for(let t in window)if(t.indexOf("FloatingButton_")>=0){const e=window[t];new FloatingButton(e),FloatingButton.initialize(e)}}));