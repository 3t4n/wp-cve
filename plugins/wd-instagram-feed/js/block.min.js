!function(o,n){!function(){var t,e=JSON.parse(tw_obj_translate.blocks);for(t in window.tw_gb)window.tw_gb.hasOwnProperty(t)&&(e[t]=window.tw_gb[t]);if(!e)return;for(t in e)e.hasOwnProperty(t)&&(e[t].inited||(e[t].inited=!0,function(t,e,p,c){var d=e.createElement,o=c.isPopup,e=d("img",{width:c.iconSvg.width,height:c.iconSvg.height,src:c.iconSvg.src});t.registerBlockType(p,{title:c.title,icon:e,category:"common",attributes:{shortcode:{type:"string"},popupOpened:{type:"boolean",value:!0},notInitial:{type:"boolean"},shortcode_id:{type:"string"}},edit:function(s){return s.attributes.notInitial?s.attributes.popupOpened?o?function(t,e){var o="wdg_cb_"+p;if(window[o+"_shortcode"]=t||"",window[o]=function(t,e){delete window[o],s&&s.setAttributes({shortcode:t,shortcode_id:e,popupOpened:!1})},s.setAttributes({popupOpened:!0}),!e&&null!=t){var n=t.split(" ");for(i=0;i<n.length;i++){var r=n[i].split("=");"id"==r[0]&&(e=r[1].replace(/"/g,""))}}return d("form",{className:"tw-container"},d("div",{className:"tw-container-wrap"+(c.containerClass?" "+c.containerClass:"")},d("span",{className:"media-modal-close",onClick:a},d("span",{className:"media-modal-icon"})),d("iframe",{src:c.data.shortcodeUrl+"&callback="+o+"&edit="+e})))}(s.attributes.shortcode,s.attributes.shortcode_id):function(t){s.setAttributes({popupOpened:!0});var i=[],n=JSON.parse(c.data);n.inputs.forEach(function(o){"select"===o.type&&(i.push(d("option",{value:"",dataId:0},tw_obj_translate.empty_item)),o.options.length&&o.options.forEach(function(t){var e="["+n.shortcode_prefix+" "+o.shortcode_attibute_name+'="'+t.id+'"]';i.push(d("option",{value:e,dataId:t.id},t.name))}))}),n.shortcodes&&n.shortcodes.forEach(function(t){i.push(d("option",{value:t.shortcode,dataId:t.id},t.name))});return d("form",{onSubmit:e},d("div",{},c.titleSelect),d("select",{value:t,onChange:e,class:"tw-gb-select"},i))}(s.attributes.shortcode):(s.attributes.shortcode?function(){return d("img",{src:c.iconUrl,alt:c.title,style:{height:"36px",width:"36px"},onClick:function(){s.setAttributes({popupOpened:!0})}.bind(this)})}:function(){return s.setAttributes({popupOpened:!1}),d("p",{style:{cursor:"pointer"},onClick:function(){s.setAttributes({popupOpened:!0})}.bind(this)},tw_obj_translate.nothing_selected)})():(s.setAttributes({notInitial:!0,popupOpened:!0}),d("p"));function a(){s.setAttributes({popupOpened:!1})}function e(t,e){var o=t.target.querySelector("option:checked");s.setAttributes({shortcode:o.value,shortcode_id:o.dataId,popupOpened:!1}),t.preventDefault()}},save:function(t){return t.attributes.shortcode}})}(o,n,t,e[t])))}()}(window.wp.blocks,window.wp.element);