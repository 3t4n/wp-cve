class BVSelect{constructor({selector:a="defaultId",width:c="100%",searchbox:d=!1,search_autofocus:e=!1,offset:f=!0,search_placeholder:g="Search...",placeholder:h="Select Option",breakpoint:i="600"}){var b=Math.floor(1e4*Math.random())+0,j=g,k=h,l=0,m=[],n="",o="",p=a.substring(1);function q(a,b){a.style.opacity=0,a.style.display=b||"block",function c(){var b=parseFloat(a.style.opacity);(b+=.1)>1||(a.style.opacity=b,requestAnimationFrame(c))}()}function r(){var a=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),c=document.getElementById("ul_"+b),d=c.lastChild,e=d.getBoundingClientRect().top;Math.round(e+50)>Math.round(a)?(l=b,document.getElementById("ul_"+b).style.position="fixed",document.getElementById("ul_"+b).style.bottom="0px"):(l=0,document.getElementById("ul_"+b).style.position="absolute",document.getElementById("ul_"+b).style.bottom="")}this.selector=a.substring(1),this.searchbox=d,this.width=c,this.offset=f,this.randomID=b,this.search_placeholder,this.breakpoint=i,this.search_autofocus=e,document.getElementById(this.selector).style.display="none",this.SetupListOptions=function(){for(var c=document.getElementById(this.selector),a=0;a<c.length;a++){var n=c[a].text,o=c[a].value,p=c[a].disabled,q=c[a].getAttribute("data-separator"),f=c[a].getAttribute("data-img"),g=c[a].getAttribute("data-icon"),h=c[a].getAttribute("data-link"),d="";if(h){var i=new URL(h);i.searchParams.set("post",o),d="<a href='"+i+"' class='shop-ready-edit shop-ready-tmp-edit-popup-js'>Edit</a>"}else d="";if(!0==p)var j="bv_disabled";else var j="";if(q)var l="bv_separator";else var l="";if(f)var e="<img src="+f+">";else if(g)var e="<i class='"+g+"' aria-hidden='true'></i>";else var e="";document.getElementById("ul_"+b).insertAdjacentHTML("beforeend","<li class='"+j+" "+l+"'  > "+e+" <span>"+n+"</span> "+d+"</li>")}document.querySelectorAll("#ul_"+b+" li").forEach(a=>{a.addEventListener("click",l=>{let d=Array.from(a.parentNode.children).indexOf(a);var h=document.getElementById(this.selector);if(!0==this.searchbox)var f=-1;else var f="";if(a.classList.contains("bv_disabled")||a.classList.contains("nofocus")||a.classList.contains("bv_separator"));else{if(h.attributes.multiple){var e="";if(event.preventDefault(),m.indexOf(d)> -1){var j=m.indexOf(d);m.splice(j,1),document.getElementById(this.selector)[d+f].selected=!1,a.style.backgroundColor="transparent"}else m.push(d),a.style.backgroundColor="#4367FF";if(0==m.length)e=k;else{for(var g=0;g<m.length;g++){var i=m[g];document.getElementById(this.selector).getElementsByTagName("option")[i+f].selected="selected",e+=", "+h[i-1].innerHTML}e=e.substring(2)}document.getElementById("main_"+b).innerHTML="<span>"+e+"</span><i id='arrow_"+b+"' class='arrows_bv arrow down'></i>"}else document.getElementById(this.selector).getElementsByTagName("option")[d+f].selected="selected",null!=c.getAttribute("onchange")&&document.getElementById(this.selector).onchange(),document.getElementById("main_"+b).innerHTML="<span>"+a.textContent+"</span><i id='arrow_"+b+"' class='arrows_bv arrow down'></i>",document.getElementById("ul_"+b).style.display="none",document.body.classList.remove("stop-scrolling"),document.body.contains(document.getElementById("deletebg"))&&document.getElementById("deletebg").remove(),r();!0==this.searchbox&&(document.getElementById("input_"+b).value="",Array.from(document.querySelectorAll("#ul_"+b+" li")).forEach(function(a){a.style.display="block"}))}})})},this.CriarDivBase=function(){document.getElementById(this.selector).insertAdjacentHTML("afterend",'<div id="bv_'+b+'" data-search="'+this.searchbox+'" class="bv_mainselect"></div>'),document.getElementById("bv_"+b).insertAdjacentHTML("afterbegin",'<div id="main_'+b+'" style="width:'+this.width+';" class="bv_atual bv_background"></div><ul id="ul_'+b+'" class="bv_ul_inner bv_background"></ul>');var g=document.getElementById("ul_"+b);document.getElementById("bv_"+b);var h=document.getElementById("main_"+b).offsetWidth;g.style.width=h+"px",!0==this.searchbox&&document.querySelector("#ul_"+b).insertAdjacentHTML("afterbegin",'<li class="nofocus"><div class="innerinput"><input placeholder="'+j+'" class="bv_input" id="input_'+b+'" type="text"></div</li>');var a=document.getElementById(this.selector);if(a.attributes.multiple)o=k;else{for(var c=0;c<a.length;c++)if(""==a[c].getAttribute("selected"))var l=1;o=1==l?a.options[a.selectedIndex].text:k}document.getElementById("main_"+b).innerHTML="<span>"+o+"</span><i id='arrow_"+b+"' class='arrows_bv arrow down'></i>",document.getElementById("main_"+b).addEventListener("click",function(){document.getElementById("ul_"+b).style.position="absolute",document.getElementById("ul_"+b).style.bottom="",window.innerWidth<i?(document.getElementById("ul_"+b).classList.add("bv_ul_mobile"),document.getElementById(p).insertAdjacentHTML("afterend",'<div id="deletebg" class="bv_ul_bg"></div>'),document.body.classList.add("stop-scrolling")):document.getElementById("ul_"+b).classList.remove("bv_ul_mobile");var a=document.getElementById("main_"+b).offsetWidth;g.style.width=a+"px","block"==document.getElementById("ul_"+b).style.display?(document.getElementById("ul_"+b).style.display="none",Array.from(document.querySelectorAll(".arrows_bv")).forEach(function(a){a.classList.remove("up"),a.classList.add("down")})):(Array.from(document.querySelectorAll(".bv_ul_inner")).forEach(function(a){a.style.display="none"}),q(document.getElementById("ul_"+b)),Array.from(document.querySelectorAll(".arrows_bv")).forEach(function(a){a.classList.remove("up"),a.classList.add("down")}),document.querySelector("#arrow_"+b).classList.remove("down"),document.querySelector("#arrow_"+b).classList.add("up")),!0==f&&r(),!0==e&& !0==d&&document.getElementById("input_"+b).focus()},!1),this.SetupListOptions()},this.CriarDivBase(),document.addEventListener("scroll",function(){if(0!=l){var a=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),c=document.getElementById("main_"+b),d=c.lastChild,e=d.getBoundingClientRect().top,f=document.getElementById("ul_"+b).clientHeight,g=a-e;g>f&&r()}},!1),!0==this.searchbox&&document.getElementById("input_"+b).addEventListener("keyup",function(){var d,e,c,a;for(d=document.getElementById("input_"+b).value.toUpperCase(),e=document.getElementById("ul_"+b),c=e.getElementsByTagName("li"),Array.from(document.querySelectorAll(".bv_separator")).forEach(function(a){a.style.display="none"}),a=0;a<c.length;a++)""==d?Array.from(document.querySelectorAll("#ul_"+b+" li")).forEach(function(a){a.style.display="block"}):(c[a].innerText||c[a].textContent).toUpperCase().indexOf(d)> -1&&!c[a].classList.contains("bv_separator")?c[a].style.display="":c[a].classList.contains("nofocus")||(c[a].style.display="none")},!1),document.addEventListener("click",function(a){a.target.closest(".bv_ul_inner")&&event.target.classList.contains("bv_input")||event.target.classList.contains("bv_input")||event.target.classList.contains("bv_atual")||"LI"!=event.target.nodeName&&(Array.from(document.querySelectorAll(".bv_ul_inner")).forEach(function(a){a.style.display="none"}),Array.from(document.querySelectorAll(".arrows_bv")).forEach(function(a){a.classList.remove("up"),a.classList.add("down")}),Array.from(document.querySelectorAll("#input_"+b)).forEach(function(a){a.value=""}),Array.from(document.querySelectorAll("#ul_"+b+" li")).forEach(function(a){a.style.display="block"}),document.body.classList.remove("stop-scrolling"),document.body.contains(document.getElementById("deletebg"))&&document.getElementById("deletebg").remove(),document.getElementById("ul_"+b)&&(l=0,document.getElementById("ul_"+b).style.position="absolute",document.getElementById("ul_"+b).style.bottom=""))},!0)}Destroy(){document.getElementById("bv_"+this.randomID).remove(),document.getElementById(this.selector).style.display="block"}Update(){Array.from(document.querySelectorAll("#ul_"+this.randomID+" li")).forEach(function(a){a.classList.contains("nofocus")||a.remove()}),this.SetupListOptions()}GetID(){return this.randomID}Change(a){if(a.placeholder&&(document.getElementById("main_"+this.randomID).innerHTML="<span>"+a.placeholder+"</span><i id='arrow_"+this.randomID+"' class='arrows_bv arrow down'></i>"),a.search_placeholder&&(document.getElementById("input_"+this.randomID).placeholder=a.search_placeholder),a.options&&"object"==typeof a.options){document.querySelector("#"+this.selector).innerHTML="";for(var c,d,e,f,g=Object.keys(a.options).length,b=0;b<g;b++)c=!0==a.options[b].disabled?"disabled":"",d=!0==a.options[b].separator?"data-separator='true'":"",e=a.options[b].img?"data-img='"+a.options[b].img+"'":"",f=a.options[b].icon?"data-icon='"+a.options[b].icon+"'":"",document.getElementById(this.selector).insertAdjacentHTML("beforeend","<option "+e+" "+f+" "+d+" "+c+" value="+a.options[b].value+" >"+a.options[b].inner_text+"</option>")}else console.error("Options must be and Object. Read documentation.")}SetOption(c){var a=document.getElementById(this.selector);if("byIndex"==c.type)a.selectedIndex=c.value,null!=a.getAttribute("onchange")&&document.getElementById(this.selector).onchange(),document.getElementById("main_"+this.randomID).innerHTML="<span>"+a.options[a.selectedIndex].text+"</span><i id='arrow_"+this.randomID+"' class='arrows_bv arrow down'></i>";else if("byValue"==c.type)for(var b=0;b<a.length;b++)a[b].value==c.value&&(a.selectedIndex=a[b].index,null!=a.getAttribute("onchange")&&document.getElementById(this.selector).onchange(),document.getElementById("main_"+this.randomID).innerHTML="<span>"+a[b].innerText+"</span><i id='arrow_"+this.randomID+"' class='arrows_bv arrow down'></i>")}AppendOption(a){var c=a.position;if(void 0==c)var c="beforeend";if(a.options&&"object"==typeof a.options)for(var d,e,f,g,h=Object.keys(a.options).length,b=0;b<h;b++)d=!0==a.options[b].disabled?"disabled":"",e=!0==a.options[b].separator?"data-separator='true'":"",f=a.options[b].img?"data-img='"+a.options[b].img+"'":"",g=a.options[b].icon?"data-icon='"+a.options[b].icon+"'":"",document.getElementById(this.selector).insertAdjacentHTML(c,"<option "+f+" "+g+" "+e+" "+d+" value="+a.options[b].value+" >"+a.options[b].inner_text+"</option>");else console.error("Options must be and Object. Read documentation.")}}