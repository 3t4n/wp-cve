!function(t,e,n,a,s){"use strict";var i="jalbum-projector.js",r=function(t){console&&t&&DEBUG&&(t.match(/^Error\:/i)?console.error(i+" "+t):t.match(/^Warning\:/i)?console.warn(i+" "+t):t.match(/^Info\:/i)?console.info(i+" "+t):console.log(i+" "+t))},o=function(t){return t*(1-2*Math.random())};t.fn.jalbum=function(n){n=t.extend({},t.fn.jalbum.defaults,n);var s={projector:"projector",prev:"jprev",next:"jnext",jalbum:"jalbum",cards:"jcards",card:"jcard",caption:"jcaption",title:"jtitle",hasCaption:"jhascaption",imageReady:"jimageready",prevPage:"jprevpg",nextPage:"jnextpg",currPage:"jcurrpg",paging:"jpaging",shade:"jshade",threedee:"threedee",error:"jerror"};return t(this).each(function(){var i,l,c,d,p,m,u,f,h,g,w,y=t(this),v=y.parents(".jalbum-preview").length,b=y.attr("data-jalbum")?t.extend({},n,JSON.parse(y.attr("data-jalbum"))):n,T=y.attr("data-jalbum-texts")?t.extend({},t.fn.jalbum.text,JSON.parse(y.attr("data-jalbum-texts"))):t.fn.jalbum.text,A=y.data("jalbum-ns"),x=t(),M=(t(),t()),E=[],I=[],F=-1,j=0,k=(t(),null),q=null,H=!1,P=function(t){b.opennew?p?(p.location=t,p.focus()):p=window.open(t,"_blank"):window.location.href=t},C=function(){var t=y.css("paddingBottom");l=y.outerWidth(),c=y.outerHeight()||.75*l,t.endsWith("%")&&(c+=l*parseInt(t)/100),y.removeClass("landscape portrait").addClass(l>c?"landscape":"portrait")},D=function(){var t;if(clearTimeout(w),!(j<2)){if("random"===m)do{t=Math.floor(Math.random()*E.length)}while(t===F);else t=(F+1)%j;"coverflow"===b.transition?z(t,1):z(t),w=setTimeout(D,b.slideshowdelay+b.transitionspeed)}},O=function(){var e=0;clearTimeout(q),M.find("."+s.card).each(function(n){var a=t(this);if(a.data("fitted"))return e++,!0;var s=a.children("img");if(!s.length)return!0;var i,r=a.outerWidth()||M.outerWidth(),o=a.outerHeight()||M.outerHeight(),l=s[0].naturalWidth||s.width(),c=s[0].naturalHeight||s.height();if(!(l&&c&&r&&o))return!0;r/l>o/c!=("fit"===b.fit)?(i=r/l,s.css({left:0,top:(o-c*i)/2,width:"100%"})):(i=o/c,s.css({top:0,left:(r-l*i)/2,height:"100%"})),a.data("fitted",!0),e++}),M.find("."+s.card).length>e&&(q=setTimeout(O,100))},W=function(e){var n=e?(e instanceof jQuery?e:t(e.target)).closest("."+s.card):M.find("#c"+F),a=function(){return[n.outerWidth()||M.outerWidth(),n.outerHeight()||M.outerHeight()]},i=function(t){if(t&&t.length){var e=t.children("img");window.getComputedStyle(t[0],null),e.length&&window.getComputedStyle(e[0],null)}};if(n.addClass(s.imageReady),O(),h){var r=n.prevAll(),l=null,c=function(e){clearTimeout(l);var a=new Date,i=e?t(this).closest("."+s.card):n.prevAll(),r=i.data("ts")||i.children("."+s.card).data("ts");i.length&&(isNaN(r)||a-r<.9*b.transitionspeed||(i.parent().hasClass(s.prevPage)?i.parent().remove():"coverflow"===b.transition?i.not(n.prev()).remove():i.remove()))};switch(M.removeClass("bwd").addClass("fwd"),"carousel"!==b.transition&&("coverflow"===b.transition?n.prev().prev().prevAll().remove():n.prev().prevAll().remove(),r=n.prevAll()),r.data("ts",new Date),i(n),b.transition){case"crossfade":if(r.length){var d=function(){n.css({opacity:0,transition:"none"}),window.requestAnimationFrame(p)},p=function(){n.css({opacity:1,transition:"opacity "+b.transitionspeed+"ms ease-in-out"}),r.one("transitionend",c).css({opacity:0}),l=setTimeout(c,b.transitionspeed+20)};window.requestAnimationFrame(d)}else window.requestAnimationFrame(function(){n.show().css({opacity:1,transition:"opacity "+b.transitionspeed+"ms ease-in-out"})});break;case"zoom":if(r.length){var d=function(){n.show().css({opacity:0,transform:"scale(0.9)",transition:"none"}),window.requestAnimationFrame(p)},p=function(){n.css({opacity:1,transform:"scale(1)",transition:"transform "+b.transitionspeed+"ms ease-out, opacity "+b.transitionspeed+"ms ease-in-out"}),r.one("transitionend",c).css({opacity:0,transform:"scale(1.11)",transition:"transform "+b.transitionspeed+"ms ease-out, opacity "+b.transitionspeed+"ms ease-in-out"}),l=setTimeout(c,b.transitionspeed+20)};window.requestAnimationFrame(d)}else window.requestAnimationFrame(function(){n.show().css({transform:"scale(1)",opacity:1})});break;case"stack":if(r.length){var m=a(),u=((v=o(60))+90)/180*Math.PI,f=Math.min(m[0],m[1])/4,d=function(){n.css({opacity:0,transform:"scale(0.92)",transition:"none"}),window.requestAnimationFrame(p)},p=function(){n.css({opacity:1,transform:"scale(1)",transition:"transform "+b.transitionspeed+"ms ease-out, opacity "+b.transitionspeed/2+"ms linear"}),r.one("transitionend",c).css({opacity:0,transform:"rotate("+(0-v/10)+"deg) translate("+Math.round(f*Math.cos(u))+"px,"+1*Math.round(0-f*Math.sin(u))+"px)",transition:"transform "+b.transitionspeed+"ms ease-out, opacity "+b.transitionspeed/2+"ms linear"}),l=setTimeout(c,b.transitionspeed+20)};window.requestAnimationFrame(d)}else window.requestAnimationFrame(function(){n.show().css({opacity:1,transform:"scale(1)",transition:"opacity "+Math.min(b.transitionspeed/2,500)+"ms linear"})});break;case"kenburns":var m=a(),g=n.children("img").eq(0),y=1.14+o(.2),v=o(1)*Math.PI,f=(Math.random()+.2)*Math.min(m[0],m[1])*.08,T=Math.round(f*Math.cos(v)),A=Math.round(f*Math.sin(v)),d=function(){n.data({sc:y>1.14?y-.2:y+.2,dx:-T,dy:-A}),g.css({transform:"translate("+T+"px,"+A+"px) scale("+y+")",transition:"none"}).show(),window.requestAnimationFrame(p)},p=function(){n.css({opacity:1,transition:"opacity "+b.transitionspeed+"ms linear"}),g.css({transform:"scale("+(y>1.14?y-.1:y+.1)+") translate(0,0)",transition:"transform "+b.transitionspeed+"ms linear"}),r.length&&(g=r.children("img").eq(0),r.css({opacity:0,transition:"opacity "+b.transitionspeed+"ms linear"}),g.one("transitionend",c).css({transform:"scale("+r.data("sc")+") translate("+r.data("dx")+"px,"+r.data("dy")+"px)"}),l=setTimeout(c,b.transitionspeed+20))};window.requestAnimationFrame(d);break;case"slide":if(r.length){var x=function(t){if(t.length>0){for(var e=[],n=0;n<t.length;n++)switch(t[n].toLowerCase()){case"e":e.push([1,0]);break;case"s":e.push([0,1]);break;case"w":e.push([-1,0]);break;case"n":e.push([0,-1])}return 1===e.length?e[0]:e.length>1?e[Math.floor(Math.random()*e.length)]||[1,0]:[1,0]}return Math.random()>=.5?[Math.random()>=.5?1:-1,0]:[0,Math.random()>=.5?1:-1]}(b.direction||""),m=a(),d=function(){n.show().css({opacity:.7,transform:"translate("+x[0]*m[0]+"px,"+x[1]*m[1]+"px)",transition:"none"}),r.css({transition:"none"}),window.requestAnimationFrame(p)},p=function(){n.css({opacity:1,transform:"translate(0,0)",transition:"transform "+b.transitionspeed+"ms ease-in-out, opacity "+b.transitionspeed+"ms ease-out"}),r.one("transitionend",c).css({opacity:.7,transform:"translate("+(0-x[0]*m[0])+"px,"+(0-x[1]*m[1])+"px)",transition:"transform "+b.transitionspeed+"ms ease-in-out, opacity "+b.transitionspeed+"ms ease-out"}),l=setTimeout(c,b.transitionspeed+20)};window.requestAnimationFrame(d)}else window.requestAnimationFrame(function(){n.show().css({opacity:1,transition:"opacity "+Math.min(b.transitionspeed,1e3)+"ms ease-out"})});break;case"swap":if(r.length){var m=a(),d=function(){n.css({zIndex:0,opacity:0,transform:"scale(0.7) translate(0,-40px)",transition:"none"}).show(),r.css({zIndex:1,opacity:1,transition:"none"}),window.requestAnimationFrame(p)},p=function(){n.css({opacity:1,transform:"scale(0.85) translate("+m[0]/2+"px,-40px)",transition:"transform "+b.transitionspeed/2+"ms ease-in-out, opacity "+b.transitionspeed/2+"ms linear"}).one("transitionend",function(){window.requestAnimationFrame(E)}),r.css({transform:"scale(0.7) translate("+(0-.55*m[0])+"px,20px)",transition:"transform "+b.transitionspeed/2+"ms ease-in-out, opacity "+b.transitionspeed/2+"ms linear"}),l=setTimeout(c,b.transitionspeed+30)},E=function(){n.css({zIndex:1,transform:"scale(1) translate(0,0)"}),r.css({zIndex:0,opacity:0,transform:"scale(0.49) translate(0,40px)"}).one("transitionend",c)};window.requestAnimationFrame(d)}else window.requestAnimationFrame(function(){n.css({zIndex:1,opacity:0,transform:"scale(0.85)",transition:"none"}).show(),window.requestAnimationFrame(function(){n.css({opacity:1,transform:"scale(1)",transition:"transform "+Math.min(b.transitionspeed/2,500)+"ms ease-in-out, opacity "+Math.min(b.transitionspeed/2,500)+"ms linear"})})});break;case"carousel":var m=a(),I=M.children().index(n),f=Math.round(m[0]/(2*Math.tan(Math.PI/j))),u=Math.round(m[0]/(2*Math.sin(Math.PI/j))),v=360/j;if(M.data("initialized")){p=function(){I=Math.floor((M.data("num")||0)/j)*j+(I||j),M.data("num",I).css({transform:"translateZ(-"+u+"px) rotateY(-"+I*v+"deg)",transition:"transform "+b.transitionspeed+"ms"}).children().css({opacity:BACKFACEBUG?.9:.6}),n.css({opacity:1})};window.requestAnimationFrame(p)}else{d=function(){M.css({transform:"translateZ(-"+u+"px) rotateY(0)",transition:"none"}),M.children().each(function(e){t(this).css({backfaceVisibility:"visible",opacity:e===I?1:BACKFACEBUG?.9:.6,transform:"rotateY("+e*v+"deg) translateZ("+f+"px)",transition:"none"}).show()}),M.data({num:0,initialized:!0}),window.requestAnimationFrame(function(){M.css({transition:"transform "+b.transitionspeed+"ms"}),M.children().css({backfaceVisibility:"hidden",transition:"opacity "+b.transitionspeed+"ms ease-out"})})};window.requestAnimationFrame(d)}break;case"flip":if(r.length){var d=function(){n.css({opacity:0}).show().css({transition:"opacity "+b.transitionspeed+"ms"}),window.requestAnimationFrame(p)},p=function(){r.css({opacity:0}),n.css({opacity:1}),M.css({transform:"rotateY(-180deg)",transition:"transform "+b.transitionspeed+"ms"}).on("transitionend",function(t){window.requestAnimationFrame(k)}),l=setTimeout(k,b.transitionspeed+20)},k=function(){c(),M.css({transition:"none",transform:"rotateY(0)"})};window.requestAnimationFrame(d)}else window.requestAnimationFrame(function(){n.show().css({opacity:1,transition:"opacity "+Math.min(b.transitionspeed,1e3)+"ms"})});break;case"book":M.children("."+s.paging).remove();var J,q,H,P,C,W,z,N=M.width(),B=N/2,d=function(){M.children("."+s.prevPage).length&&M.find("."+s.prevPage+" ."+s.card).unwrap(),r.css({width:N,left:0}).wrap(J=t("<div>",{class:s.prevPage})),n.css({opacity:1,width:N,left:-B}).wrap(q=t("<div>",{class:s.nextPage})).show(),H=t("<div>",{class:s.paging}).appendTo(M),P=r.clone().css({left:"-100%"}).appendTo(H),C=n.show().clone().css({opacity:1}).appendTo(H),W=t("<div>",{class:s.shade}).appendTo(P),z=t("<div>",{class:s.shade}).hide().appendTo(C),H.show().css({transition:"transform "+b.transitionspeed/2+"ms linear"}).data("ts",new Date),window.requestAnimationFrame(p)},p=function(){W.css({transition:"opacity "+b.transitionspeed/2+"ms ease-in",opacity:.75}),H.one("transitionend",function(){window.requestAnimationFrame(E)}).css({transform:"rotateY(-90deg)"}),l=setTimeout(k,b.transitionspeed+30)},E=function(){P.hide(),C.css("backface-visibility","visible").show(),H.one("transitionend",function(t){window.requestAnimationFrame(k)}).css({transform:"rotateY(-180deg)"}),z.show().css({transition:"opacity "+b.transitionspeed/2+"ms ease-out",opacity:0})},k=function(){H&&H.remove(),n.parent().hasClass(s.nextPage)&&n.unwrap("."+s.nextPage).css("left",0),c()};r.length?window.requestAnimationFrame(d):window.requestAnimationFrame(function(){n.show().css({opacity:1,transition:"opacity "+Math.min(b.transitionspeed,500)+"ms"})});break;case"cube":var m=a(),f=Math.round(m[1]/2),d=function(){n.css({opacity:1,zIndex:9999,backgroundColor:"#666"}).show(),window.requestAnimationFrame(p)},p=function(){n.css({transform:"rotateX(270deg) translateZ("+f+"px)"}),M.css({transform:"translateZ("+f+"px) rotateX(0)"}).on("transitionend",function(t){window.requestAnimationFrame(k)}).css({transition:"transform "+b.transitionspeed+"ms",transform:"translateZ(-"+f+"px) rotateX(90deg)"}),l=setTimeout(k,b.transitionspeed+30)},k=function(){r.remove(),M.css({transition:"none",transform:"translateZ(-"+f+"px) rotateX(0)"}),n.css({zIndex:0,transform:"rotateX(0) translateZ("+f+"px)"})};window.requestAnimationFrame(d);break;case"coverflow":var U=n.next(),S=n.prev(),Y=S.prev(),f=a()[0]/8,G=null;d=function(){Y.css({zIndex:0}),n.css({zIndex:2}),S.length||n.css({opacity:1,transform:"scale(0.5) translate3d("+f*b.coverflowFactor[0]+"px,0,-"+2*f+"px) rotateY(-86deg)"}).show(),U.css({zIndex:1,opacity:0,transform:"scale(0.4) translate3d("+f*b.coverflowFactor[1]+"px,0,-"+3*f+"px) rotateY(-120deg)"}).show().css({willChange:"transform, opacity"}),n.add(S).css({opacity:1,transition:"transform "+b.transitionspeed+"ms ease-in-out"}),U.add(Y).css({transition:"transform "+b.transitionspeed+"ms ease-in-out, opacity "+b.transitionspeed+"ms linear"}),window.requestAnimationFrame(p)},p=function(){S.on("transitionend",function(){Y.remove()}).css({transform:"scale(0.5) translate3d(-"+f*b.coverflowFactor[0]+"px,0,-"+2*f+"px) rotateY(86deg)"}),U.css({opacity:1,transform:"scale(0.5) translate3d("+f*b.coverflowFactor[0]+"px,0,-"+2*f+"px) rotateY(-86deg)"}),n.css({opacity:1,transform:"scale(0.75) translate3d(0,0,0) rotateY(0)"}),Y.css({opacity:0,transform:"scale(0.4) translate3d(-"+f*b.coverflowFactor[1]+"px,0,-"+3*f+"px) rotateY(120deg)"}),G=setTimeout(function(){clearTimeout(G),window.requestAnimationFrame(E)},.5*b.transitionspeed)},E=function(){n.css({zIndex:3}),S.css({zIndex:1})},window.requestAnimationFrame(d)}w=setTimeout(D,b.slideshowdelay+b.transitionspeed)}else i(n),n.css({opacity:0,transform:"translateY(-20px) scale(1.2)"}).show().css({transition:"transform 300ms cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 300ms linear"}).css({opacity:1,transform:"translateY(0) scale(1)"})},z=function(e,n){"random"===m?F=e:(F=e%j,n=n?Math.min(n,j-F):0);var r=function(e,n){if(e>=E.length)return t();var a,r,o=t("<div>",{id:"c"+e,class:s.card+" "+(E[e][J.CATEGORY]||"folder")+" "+(h?b.transition:"")}).appendTo(M),l=t("<img>").appendTo(o);if("masonry"===b.type&&o.css(I[e]),o.css("opacity",0),a=o.outerWidth()||M.outerWidth(),r=o.outerHeight()||M.outerHeight(),b.captiontemplate){var c=t("<div>",{class:s.caption+" "+b.captionplacement+" "+b.captionstyle,html:i.processTemplate(b.captiontemplate,E[e],b.removeEmptyTags)}).appendTo(o);c.is(":empty")||!c.text()?c.remove():b.removeEmptyTags?c.children(":empty").remove():o.addClass(s.hasCaption)}return o.on("click."+A,function(e){var n=parseInt(t(this).attr("id").substring(1));if(f||isNaN(n)||F===n){if(!b.disablelinks){if("A"===e.target.nodeName&&t(e.target).parents("."+s.caption).length)return!0;P(b.linktoindex?d:i.getLink(E[n]))}}else z(n)}),t.isFunction(n)&&l.one("load",n),l.attr("src",a>E[e][J.THUMB][J.WIDTH]||r>E[e][J.THUMB][J.HEIGHT]?i.getImagePath(E[e]):i.getThumbPath(E[e])),l},o=function(e){if(E&&E.length>e){t("<img>").appendTo(a).hide().attr("src",E[e][J.IMAGE]&&(M.outerWidth()>E[e][J.THUMB][J.WIDTH]||M.outerHeight()>E[e][J.THUMB][J.HEIGHT])?i.getImagePath(E[e]):i.getThumbPath(E[e])).one("load",function(){t(this).remove()})}};if(w=clearTimeout(w),n){for(var l=0;l<=n;l++)M.children("#c"+(e+l)).length||r((e+l)%j);M.waitAllImg(null,W),o((e+l)%j)}else{var c=M.children("#c"+e);if(c.length){var p=c.find("img");p.length&&0!==p[0].naturalWidth&&p[0].complete?W(p):p.one("load",W)}else r(e,W);f||o((e+1)%j)}},N=function(){if(b.hasOwnProperty("layout")){if("grid"===b.type){if((e=b.layout.match(/grid-(\d)-(\d)/))&&e.length>2)return parseInt(e[1])*parseInt(e[2])}else if("mosaic"===b.type){var e=b.layout.match(/mos-(\d)-(\d)(-(\d))?/);if(e&&e.length>2)return parseInt(e[1])+parseInt(e[2])+(e[4]?parseInt(e[4]):0)}return parseInt(b.layout)||t.fn.jalbum.defaults.numberofcards[b.type]}return t.fn.jalbum.defaults.numberofcards[b.type]},B=function(){if(!(j<2)){for(var t,e=l/c,n=[],a=function(t){var e=E[t];return e?e.hasOwnProperty(J.IMAGE)?e[J.IMAGE][J.WIDTH]/e[J.IMAGE][J.HEIGHT]:e[J.THUMB][J.WIDTH]/e[J.THUMB][J.HEIGHT]:(r("Item "+t+" is missing! (max "+E.length+")"),1)},s=0,i=0;s<j;s++)i+=n[s]=a(s);if(i>1.5*e){var o=Math.ceil(1/Math.sqrt(e/i));t=new Array(o);for(var s=0,d=0;s<j;s++)void 0===t[m=Math.floor(o*(d+n[s]/2)/i)]&&(t[m]=new Array),t[m].push(s),d+=n[s];for(m=0;m<o;m++)t[m]||(t.splice(m,1),o--);for(var p,m=0;m<o;m++){for(u=0,h=t[m].length,s=0;s<h;s++)u+=n[t[m][s]];for(s=0;s<h;s++)p=t[m][s],I[p]={width:100*n[p]/u+"%",height:c/o/u}}for(var u=0,m=0;m<o;m++)u+=I[t[m][0]].height;u=c/u;for(var f,m=0;m<o;m++){f=Math.round(I[t[m][0]].height*u);for(var s=0,h=t[m].length;s<h;s++)I[t[m][s]].height=f}}else{u=e/i;for(s=0;s<j;s++)E[s].targetWidth=100*n[s]*u+"%",E[s].targetHeight=c}}},U=function(){"masonry"===b.type&&(B(),M.find("."+s.card).each(function(e){var n=t(this);n.css(I[e]);var a=n.outerWidth(),s=n.outerHeight();n.find("img").eq(0).attr("src",a>E[e][J.THUMB][J.WIDTH]||s>E[e][J.THUMB][J.HEIGHT]?i.getImagePath(E[e]):i.getThumbPath(E[e]))}))},S=function(){H||(function(t){var n=e.scrollTop(),a=t.offset().top;return!(a>=n+e.height()||a+t.outerHeight()<=a)}(y)?function(){var t=null,e=function(n){clearTimeout(t),z(n),n<j-1&&(t=setTimeout(e,100,n+1))};E.length<j&&(j=E.length),M.addClass("max-"+j),f?("masonry"===b.type&&B(),e(0)):"carousel"===b.transition?z(0,j):"coverflow"===b.transition?z(0,1):z(0),H=!0}():setTimeout(S,200))},Y=function(t,e){var n=Math.min(t.length,e);if(b.skipduplicates){for(var a,s=[],i=[],r=0;r<t.length;r++)if((a=t[r][J.THUMB][J.PATH].getFile())&&-1===i.indexOf(a)){if(s.push(t[r]),s.length>=n)return s;i.push(a)}return s}return t.splice(0,n)},G=function(t,e){switch(m){case"name":return(e[J.TITLE]||e[J.NAME]||"").localeCompare(t[J.TITLE]||t[J.NAME]||"");case"date-reverse":return(e.hasOwnProperty(J.DATES)?e[J.DATES][J.TAKENDATE]:e[J.FILEDATE])||0-(t.hasOwnProperty(J.DATES)?t[J.DATES][J.TAKENDATE]:t[J.FILEDATE])||0;case"date":return(t.hasOwnProperty(J.DATES)?t[J.DATES][J.TAKENDATE]:t[J.FILEDATE])||0-(e.hasOwnProperty(J.DATES)?e[J.DATES][J.TAKENDATE]:e[J.FILEDATE])||0}},L=function(){(E="random"===n.ordering?function(t,e){var n=[],a=Math.min(t.length,e);if(b.skipduplicates)for(var s,i,r="",o=0;o<a;o++){if(n.length>=a||!t.length)return n;for(i=0;i<t.length;i++)if(l=Math.floor(Math.random()*t.length*.999),(s=t[l][J.THUMB][J.PATH].getFile())&&-1===r.indexOf(":"+s+":")){n.push(t.splice(l,1)[0]),r+=":"+s+":";break}}else for(var l,o=0;o<a;o++)l=Math.floor(Math.random()*t.length*.999),n.push(t.splice(l,1)[0]);return n}(this,j):"original"!==n.ordering?function(t,e){var n=Math.min(t.length,e);return t.length<2?t:(t.sort(G),Y(t,n))}(this,j):Y(this,j)).length&&S(),b.titletemplate&&(x=t("<div>",{class:s.title+" "+b.titleplacement+" "+b.titlestyle+(b.disablelinks?"":" linked"),html:i.processTemplate(b.titletemplate,void 0,b.removeEmptyTags)}).appendTo(y),b.removeEmptyCaption&&x.children(":empty").remove(),b.disablelinks||x.find("h1,h2,h3,h4,h5,h6").on("click",function(){P(d)})),e.on("resize."+A+" orientationchange."+A,function(){clearTimeout(k),C(),k=setTimeout(U,100)}),h&&(w=setTimeout(D,b.slideshowdelay+b.transitionspeed))},Z=function(){!b.folder||i.getFolder(b.folder)?E=i.collectNItem({folder:b.folder,levels:b.depth,include:b.include,max:j,sortBy:m,sortOrder:u,ready:L}):r('Invlaid folder: "'+b.folder+'"')},K=function(e,n){var a=t("<div>").css({position:"absolute",width:"80%",maxWidth:"600px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:".5rem 1rem",backgroundColor:"#900",color:"#eee"}).append(t("<h4>",{text:T.error})).append(t("<p>",{html:(T[e||"unknownError"]||T.unknownError).template(n||"?")})).appendTo(y.empty());v||setTimeout(function(){a.fadeOut(function(){a.remove()})},6e3)};if(typeof Album===UNDEF)return K("missingLibrary","jalbum-album.js"),void r("Critical Error: Missing jalbum-album.js library!");b.hasOwnProperty("albumurl")?(typeof A!==UNDEF&&(y.off("."+A),y.empty(),y.removeClass()),function(){j=N(),f="masonry.grid.mosaic.strip".indexOf(b.type)>=0,h="slideshow.slider".indexOf(b.type)>=0,g=!f&&"carousel.flip.book.cube.coverflow".indexOf(b.transition)>=0,v&&(b.disablelinks=!0),C();var e=[s.jalbum,b.type];if(f?(e.push("grid-like"),b.gap&&e.push("gap-"+b.gap)):(e.push("slider-like"),e.push(b.transition)),g&&e.push(s.threedee),A="jalbum-"+Math.floor(1e4*Math.random()),y.data("jalbum-ns",A).attr("id",A).addClass(e.join(" ")),M=t("<div>").appendTo(y),e=[s.cards],h&&e.push(b.transition),"grid"!==b.type&&"mosaic"!==b.type||!b.hasOwnProperty("layout")||e.push(b.layout),M.addClass(e.join(" ")),b.hasOwnProperty("slideshowdelay")?"number"!=typeof b.slideshowdelay&&(b.slideshowdelay=parseInt(b.slideshowdelay)):b.slideshowdelay=t.fn.jalbum.defaults.timings[b.transition||"slide"][0],b.hasOwnProperty("transitionspeed")?"number"!=typeof b.transitionspeed&&(b.transitionspeed=parseInt(b.transitionspeed)):b.transitionspeed=t.fn.jalbum.defaults.timings[b.transition||"slide"][1],b.hasOwnProperty("layout")?"grid"!==b.type&&"mosaic"!==b.type&&"number"!=typeof b.layout&&(b.layout=parseInt(b.layout)):b.layout=t.fn.jalbum.defaults.layouts[b.type||"grid"],"number"!=typeof b.depth&&(b.depth=parseInt(b.depth)||2),b.hasOwnProperty("skipduplicates")&&(b.skipduplicates="false"!==b.skipduplicates||1==b.skipduplicates),b.hasOwnProperty("ordering")){var n=b.ordering.split("-");u="reverse"===n[1]?1:0,"date"===n[0]?m=J.TAKENDATE:"name"===n[0]?m=J.NAME:"size"===n[0]?m=J.FILESIZE:u="random"===b.ordering?-1:0}b.albumurl=b.albumurl.replace(/\\\//g,"/").replace(/\/$/,""),b.albumurl.endsWith("/")||(b.albumurl+="/"),"https:"===location.protocol&&b.albumurl.startsWith("http:")&&(b.albumurl=b.albumurl.replace(/^http/,"https")),b.hasOwnProperty("folder")?(b.folder=b.folder+"",b.folder.startsWith("/")&&(b.folder=b.folder.substring(1)),b.depth+=b.folder.split("/").length):b.folder="",d=b.albumurl+b.folder,i=new Album(t,{albumPath:b.albumurl,relPath:b.folder,ready:Z,fatalError:K})}()):r("Error: no album URL provided!")})},t.fn.jalbum.defaults={type:"slideshow",transition:"slide",folder:"",depth:2,quickdiscovery:!1,include:"images",exclude:"webPage,webLocation",skipduplicates:!0,disablelinks:!1,linktoindex:!1,fit:"cover",maxzoom:1.25,autoplay:!0,numberofcards:{slideshow:12,slider:3,masonry:17,grid:12,mosaic:4,strip:6},timings:{crossfade:[1e3,2e3],zoom:[1e3,2e3],kenburns:[0,4e3],stack:[1500,1500],slide:[1500,1500],swap:[2e3,1e3],carousel:[2e3,1e3],flip:[2e3,1e3],book:[2e3,1e3],cube:[2e3,1e3],coverflow:[2e3,1e3]},layouts:{slideshow:12,grid:"grid-4-3",masonry:17,mosaic:"mos-1-3",strip:6},coverflowFactor:[6.4,12.4],gap:"",selecteditems:!1,ordering:"original",showDots:!1,titletemplate:"",titleplacement:"center top",titlestyle:"white",captiontemplate:"",captionplacement:"center bottom",captionstyle:"dark",removeEmptyTags:!0},t.fn.jalbum.text={error:"Error",databaseAccessDenied:'The album\'s database file "{0}" is missing or access is denied. If the album comes from an external site ensure Cross Origin Resource Sharing (CORS) is enabled!',noSuchFolder:'The given folder "{0}" does not exists, or its database file is missing!',missingLibrary:'Missing "{0}" library!',unknownError:"Unknown error: {0}"},n.ready(function(){t("[data-jalbum]").jalbum()})}(jQuery,jQuery(window),jQuery(document),jQuery("body"));