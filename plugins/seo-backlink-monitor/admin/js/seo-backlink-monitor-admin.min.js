"use strict";!function(s){var i={init:function(){var t,n=s("#seo-blm-links-list-search-input"),o=s("#seo-blm-search-column");s("#seo-backlink-monitor-links").on("click",".seo-blm-tbl-nav-pages a, .seo-blm-sort-column.sortable a, .seo-blm-sort-column.sorted a",function(e){e.preventDefault();e=this.search.substring(1),e={paged:i.__query(e,"paged")||"1",order:i.__query(e,"order")||"asc",orderby:i.__query(e,"orderby")||"date",search_field:n.val()||"",search_column:o.val()||""};i.update(e)}),s("input[name=paged]").on("keyup",function(e){"Enter"!==e.key&&13!==e.which||e.preventDefault();var a={paged:parseInt(s("input[name=paged]").val())||"1",order:s("input[name=order]").val()||"asc",orderby:s("input[name=orderby]").val()||"date",search_field:n.val()||"",search_column:o.val()||""};window.clearTimeout(t),t=window.setTimeout(function(){i.update(a)},500)}),s("#seo-blm-links-list-search-input").on("keyup",function(e){"Enter"!==e.key&&13!==e.which||s("#seo-blm-links-search-btn").trigger("click")}),s("#seo-blm-links-search-btn").click(function(e){if(e.preventDefault(),e.stopImmediatePropagation(),""==n.val())return n.addClass("seo-blm-field-required"),!1;if(""==o.val())return o.addClass("seo-blm-field-required"),n.removeClass("seo-blm-field-required"),!1;""!==n.val()&&""!==o.val()&&(n.removeClass("seo-blm-field-required"),o.removeClass("seo-blm-field-required"));e={paged:parseInt(s("input[name=paged]").val())||"1",order:s("input[name=order]").val()||"asc",orderby:s("input[name=orderby]").val()||"date",search_field:n.val(),search_column:o.val()};i.update(e)}),s("#seo-blm-links-reset-btn").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),s("#seo-blm-search-column").prop("selectedIndex",0).trigger("change"),n.val("");e={paged:parseInt(s("input[name=paged]").val())||"1",order:s("input[name=order]").val()||"asc",orderby:s("input[name=orderby]").val()||"date",search_field:"",search_column:""};i.update(e)}),s("#seo-backlink-monitor-links").on("click",".seo-blm-delete-link",function(e){e.preventDefault();var e=s(this).attr("data-id"),a=s("#tr-"+e),t={paged:parseInt(s("input[name=paged]").val())||"1",order:s("input[name=order]").val()||"asc",orderby:s("input[name=orderby]").val()||"date",search_field:n.val()||"",search_column:o.val()||"",deletion_id:e||""};s.confirm({title:SEO_BLM_Localize.confirm_remove_title,content:SEO_BLM_Localize.confirm_remove_message,type:"red",container:"body",closeIcon:!0,buttons:{removeBtn:{text:SEO_BLM_Localize.confirm_remove_button,btnClass:"btn-red",action:function(){a.css({backgroundColor:"red","font-weight":"bold"}),a.slideUp(500,function(){a.remove()}),s("#seo-blm-search-column option[value='']").attr("selected",!0),n.val(""),i.update(t)}},close:function(){}}})}),s("#seo-backlink-monitor-links").on("click",".seo-blm-refresh-link",function(e){e.preventDefault();var a=s(this),t=a.find(".dashicons"),e=a.attr("data-id"),a=s("#tr-"+e);i.refresh({refresh_id:e},t,a)})},update:function(e){s.ajax({url:SEO_BLM_Localize.ajax_url,data:s.extend({seo_blm_ajax_custom_list_nonce:SEO_BLM_Localize.custom_list_ajax_nonce,action:"seo_blm_list_table_ajax"},e),beforeSend:function(){s(".top .bulkactions").append('<div class="page-content" id="loader">'+SEO_BLM_Localize.content+'<img src="'+SEO_BLM_Localize.imgsrc+'"/></div>'),s("#seo-blm-links-search-btn").prop("disabled",!0)},success:function(e){var a=s.parseJSON(e);s(".top .bulkactions #loader").remove(),a.rows.length&&(s("#seo-backlink-monitor-links").find("#the-list").html(a.rows),t()),a.column_headers.length&&s("#seo-backlink-monitor-links").find("thead tr, tfoot tr").each(function(){s(this).html(a.column_headers)}),a.pagination.bottom.length&&s("#seo-backlink-monitor-links").find(".tablenav.top .tablenav-pages").html(s(a.pagination.top).html()),a.pagination.top.length&&s("#seo-backlink-monitor-links").find(".tablenav.bottom .tablenav-pages").html(s(a.pagination.bottom).html()),s("#seo-blm-links-search-btn").prop("disabled",!1)}})},refresh:function(e,a,t){s.ajax({url:SEO_BLM_Localize.ajax_url,data:s.extend({seo_blm_ajax_refresh_link_nonce:SEO_BLM_Localize.refresh_ajax_nonce,action:"seo_blm_refresh_link_ajax"},e),beforeSend:function(){a.addClass("spin")},success:function(e){a.removeClass("spin").toggleClass("dashicons-update dashicons-thumbs-up"),setTimeout(function(){a.toggleClass("dashicons-thumbs-up dashicons-update")},2e3),t.find("> .dateRefresh .date").html(e.dateRefresh),t.find("> .anchorText").html(e.anchorText),t.find("> .follow").html(e.follow),t.find("> .status").html(e.status)},error:function(e){a.removeClass("spin").toggleClass("dashicons-update dashicons-thumbs-down"),setTimeout(function(){a.toggleClass("dashicons-thumbs-down dashicons-update")},2e3),console.log("ERROR",e)}})},__query:function(e,a){for(var t=e.split("&"),n=0;n<t.length;n+=1){var o=t[n].split("=");if(o[0]==a)return o[1]}return!1}};function t(){s(".toggle-note").each(function(){var e=s(this),a=e.parent();e.prependTo(a)})}i.init(),s(document).on("click","[data-toggle]",function(e){e.preventDefault();var a=s(this),e=s(a.attr("data-toggle"));s("[data-toggle]").not(a).each(function(){var e=s(this),e=s(e.attr("data-toggle"));e.length&&e.slideUp()}),e.length&&(e.is(":visible")?e.slideUp():e.slideDown())}),s(document).on("click","[data-toggle-single]",function(e){e.preventDefault();e=s(this),e=s(e.attr("data-toggle-single"));e.length&&(e.is(":visible")?e.slideUp():e.slideDown())}),t(),s(document).on("click",".toggle-extended",function(e){e.preventDefault();var a=s(this),e=(a=!a.is("[data-toggle-single]")?a.parents("[data-toggle-single]"):a).find(".dashicons"),a=s('[data-toggle-single="'+a.attr("data-toggle-single")+'"]');e.is(".dashicons-arrow-right")?a.find(".dashicons").removeClass("dashicons-arrow-right").addClass("dashicons-arrow-down"):a.find(".dashicons").removeClass("dashicons-arrow-down").addClass("dashicons-arrow-right")}),s(".search-help").insertAfter(".tablenav.top"),s(document).on("change","#seo-blm-search-column",function(){var e=s(this),e=s("#search-help-"+e.val());s(".search-help").slideUp(),e.length&&e.slideDown()}).trigger("change"),s(".search-help a").on("click",function(e){e.preventDefault();e=s(this).attr("data-search-val");s("#seo-blm-links-list-search-input").val(e),s("#seo-blm-links-search-btn").trigger("click")})}(jQuery);