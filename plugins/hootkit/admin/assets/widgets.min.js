!function(t){"use strict";t.fn.hootWidgetIconPicker=function(){return this.each(function(){var e=t(this),i=e.siblings(".hoot-icon-picker-box"),o=e.siblings(".hoot-icon-picked"),n=o.children("i"),d=i.find("i");o.on("click",function(){i.toggle()}),d.on("click",function(){var o=t(this).data("value");d.removeClass("selected");var r=t(this).hasClass("cmb-icon-none")?"":"selected";t(this).addClass(r),n.removeClass().addClass(r+" "+o),e.val(o),e.trigger("change"),i.toggle()})})},t(document).on("click",function(e){t(e.target).closest(".hoot-icon-picker-box").length||t(e.target).closest(".hoot-icon-picked").length||t(".hoot-icon-picker-box").hide()}),t.fn.hootWidgetImageUpload=function(){return this.each(function(){if("undefined"!=typeof wp&&wp.media&&wp.media.editor){var e=t(this),i=e.siblings(".hoot-image"),o=e.children(".hoot-image-selected-img"),n=e.siblings(".hoot-image-remove");n.on("click",function(t){t.preventDefault(),i.val(""),i.trigger("change"),o.css("background-image","none")}),e.on("click",function(t){var n=e.data("frame");return n?(n.open(),!1):(n=wp.media({title:e.data("title"),library:{type:e.data("library").split(",").map(function(t){return t.trim()})},button:{text:e.data("update"),close:!1}}),e.data("frame",n),n.on("select",function(){var t=n.state().get("selection").first().attributes;i.val(t.id),i.trigger("change");var e="";e="undefined"!=typeof t.sizes?"undefined"!=typeof t.sizes.thumbnail?t.sizes.thumbnail.url:t.sizes.full.url:t.icon,o.css("background-image","url("+e+")"),n.close()}),n.open(),!1)})}})},t.fn.hootWidgetCollapser=function(){return this.each(function(){var e=t(this),i=e.siblings(".hoot-collapse-body");e.on("click",function(){i.toggle()})})},t.fn.hootSetupWidget=function(){var e=function(e,n,d){e.find(".hoot-widget-field-group-add").each(function(){var e=t(this),d=e.siblings(".hoot-widget-field-group-items"),r=e.parent(".hoot-widget-field-group").data("id"),a=t("#hoot-groupdata-"+n).data("groupwgtnumber"),s=t("#hoot-groupdata-"+n).data("grouphtml"),l="undefined"!=typeof s?t(s)[0][r]:"";e.on("click",function(){var n=parseInt(t(this).data("iterator")),r=t(this).data("widgetnumber"),s=parseInt(t(this).data("limit"));if(s){var c=t(this).data("limitmsg"),g=t(this).siblings(".hoot-widget-field-group-items").children().length;if(g+1>=s&&t(this).addClass("maxreached"),g>=s)return c&&alert(c),!1}n++,t(this).data("iterator",n);var h=l.trim().replace(/975318642/g,n).replace(new RegExp(a,"g"),r),f=t(h);i(f),o(f),f.find(".hoot-icon").hootWidgetIconPicker(),f.find(".hoot-image-selected").hootWidgetImageUpload(),f.find(".hoot-color").wpColorPicker(),f.find(".hoot-select2").select2(),d.append(f),d.hasClass("issortable")&&d.sortable("refresh"),e.closest(".hoot-widget-form").find("input").filter(":first").trigger("change")})}),e.find(".hoot-widget-field-group-top").click(function(){t(this).toggleClass("open"),t(this).is(".open")?t(this).siblings(".hoot-widget-field-group-items").find(".hoot-widget-field-group-item-form").show():t(this).siblings(".hoot-widget-field-group-items").find(".hoot-widget-field-group-item-form").hide()})},i=function(e){e.find(".hoot-widget-field-group-item-top").on("click",function(){t(this).siblings(".hoot-widget-field-group-item-form").toggle()})},o=function(e){e.find(".hoot-widget-field-group-remove").on("click",function(){t(this).closest(".hoot-widget-form").find("input").filter(":first").trigger("change"),t(this).closest(".hoot-widget-field-group-items").siblings(".hoot-widget-field-group-add").removeClass("maxreached"),t(this).closest(".hoot-widget-field-group-item").remove()})};return this.each(function(n,d){var r=t(d),a=r.data("class"),s=r.find(".hoot-widget-field-group-items");if(r.data("hoot-form-setup")===!0)return!0;var l=r.closest(".widget");return l.length>0&&void 0!==l.attr("id")&&l.attr("id").indexOf("__i__")>-1?!0:(r.find(".hoot-icon").hootWidgetIconPicker(),r.find(".hoot-image-selected").hootWidgetImageUpload(),r.find(".hoot-color").wpColorPicker(),r.find(".hoot-select2").select2(),r.find(".hoot-collapse-head").hootWidgetCollapser(),s.hasClass("issortable")&&s.sortable({handle:".fa-arrows-alt",placeholder:"hoot-widget-field-sortlistitem-placeholder",forcePlaceholderSize:!0}),e(r,a,!1),i(r),o(r),void r.trigger("hootwidgetformsetup").data("hoot-form-setup",!0))})},t("body.widgets-php:not(.block-editor-page) .hoot-widget-form").hootSetupWidget(),t(document).on("widget-added widget-updated",function(t,e){e.find(".hoot-widget-form").hootSetupWidget()})}(jQuery);