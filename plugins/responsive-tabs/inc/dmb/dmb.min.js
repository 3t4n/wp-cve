/**
 * Team Members Admin JS
 */

!function(l){l(document).ready(function(){var a;a=jQuery.fn.clone,jQuery.fn.clone=function(){for(var t=a.apply(this,arguments),e=this.find("textarea").add(this.filter("textarea")),i=t.find("textarea").add(t.filter("textarea")),n=this.find("select").add(this.filter("select")),o=t.find("select").add(t.filter("select")),d=0,s=e.length;d<s;++d)l(i[d]).val(l(e[d]).val());for(d=0,s=n.length;d<s;++d)o[d].selectedIndex=n[d].selectedIndex;return t};var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");function i(t){return isNaN(t)?"00":e[(t-t%16)/16]+e[t%16]}function n(){0<l(".dmb_main").not(".dmb_empty_row").length?l(".dmb_no_row_notice").hide():l(".dmb_no_row_notice").show()}function o(t,e){e=e||!1;var i=(t=t).closest(".dmb_main").find(".dmb_handle_title");cloneCopyText="",cloneCopyText=e?" copy":"",""!=t.val()?i.html(t.val()+cloneCopyText):i.html(objectL10n.untitled+cloneCopyText)}l(".dmb_color_picker").wpColorPicker(),l(".dmb_main").not(".dmb_empty_row").each(function(t,e){l(this).find(".dmb_tab_content").each(function(t,e){""==l.trim(l(this).text())?l(this).hide():l(this).show(),l(this).html(l.parseHTML(l(this).text()))})}),n(),l(".dmb_add_row").on("click",function(){var t=l(".dmb_empty_row").clone(!0);return t.removeClass("dmb_empty_row").addClass("dmb_main").show(),t.insertBefore(l(".dmb_empty_row")),t.find(".dmb_tab_title").focus(),t.find(".dmb_color_picker_ready").removeClass(".dmb_color_picker_ready").addClass(".dmb_color_picker").wpColorPicker().css({padding:"3px"}),t.find(".dmb_handle_title").html(objectL10n.untitled),t.find(".dmb_tab_content").hide(),n(),!1}),l(".dmb_remove_row_btn").click(function(t){return l(this).closest(".dmb_main").remove(),n(),!1}),l(".dmb_handle").click(function(t){return l(this).siblings(".dmb_inner").slideToggle(50),l(this).hasClass("closed")?l(this).removeClass("closed"):l(this).addClass("closed"),!1}),l(".dmb_collapse_rows").click(function(t){return l(".dmb_handle").each(function(t,e){l(this).closest(".dmb_empty_row").length||l(this).hasClass("closed")||(l(this).siblings(".dmb_inner").slideToggle(50),l(this).addClass("closed"))}),!1}),l(".dmb_expand_rows").click(function(t){return l(".dmb_handle").each(function(t,e){l(this).hasClass("closed")&&(l(this).siblings(".dmb_inner").slideToggle(50),l(this).removeClass("closed"))}),!1}),l(".dmb_move_row_down").click(function(t){return l(this).closest(".dmb_main").next().hasClass("dmb_main")&&(l(this).closest(".dmb_main").clone(!0).insertAfter(l(this).closest(".dmb_main").next()),l(this).closest(".dmb_main").remove()),!1}),l(".dmb_move_row_up").click(function(t){return l(this).closest(".dmb_main").prev().hasClass("dmb_main")&&(l(this).closest(".dmb_main").clone(!0).insertBefore(l(this).closest(".dmb_main").prev()),l(this).closest(".dmb_main").remove()),!1}),l(".dmb_clone_row").click(function(t){var e=l(this).closest(".dmb_main").clone(!0);return e.insertAfter(l(this).closest(".dmb_main")),e.find(".dmb_handle_title").html(e.find(".dmb_tab_title").val()+" (copy)"),e.find(".dmb_tab_title").focus(),o(e.find(".dmb_tab_title"),!0),n(),!1}),l(".dmb_main").not(".dmb_empty_row").each(function(t,e){""!=l(this).find(".dmb_tab_title").val()&&o(l(this).find(".dmb_tab_title"))}),l("body").on("keyup",".dmb_tab_title",function(t){o(l(this))}),l(".dmb_show_preview_tab_set").click(function(){var n={},t={},o="";n.breakpoint=l(".dmb_breakpoint").val(),n.color=function(t){if(t)return"#"+i((t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+i(t[2])+i(t[3])}(l(".wp-color-result").css("backgroundColor"))||"#8dba09",n.tabBackground=l("select[name='tabs_tbgs']").val(),t.tabCount=l(".dmb_main").not(".dmb_empty_row").length,o+='<div class="rtbs" style="margin-top:100px; margin-bottom:60px;">',o+='<div class="rtbs_breakpoint" style="display:none">'+n.breakpoint+"</div>",o+='<div class="rtbs_inactive_tab_background" style="display:none">'+n.tabBackground+"</div>",o+='<div class="rtbs_color" style="display:none">'+n.color+"</div>",o+='<div class="rtbs_menu">',o+='<ul><li class="mobile_toggle">&zwnj;</li>',l(".dmb_main").not(".dmb_empty_row").each(function(t,e){var i={};i.title=l(this).find(".dmb_tab_title").val(),i.content=l.trim(l(this).find(".dmb_tab_content").html())||"",0==t?(o+="<style>.rtbs li {font-size:15px;} .rtbs_content, .rtbs_content p {font-size:15px;}</style>",o+='<li class="current">',o+='<a style="background:'+n.color+'" class="active prev-tab-link-'+t+'" href="#" data-tab="#prev-tab-'+t+'">'):(o+='<li style="font-size:15px;">',o+='<a href="#" data-tab="#prev-tab-'+t+'" class="prev-tab-link-'+t+'">'),i.title?o+=i.title:o+="&nbsp;",o+="</a>",o+="</li>"}),o+="</ul></div>",l(".dmb_main").not(".dmb_empty_row").each(function(t,e){var i={};i.title=l(this).find(".dmb_tab_title").val(),i.content=l.trim(l(this).find(".dmb_tab_content").html())||"",o+=0==t?'<div style="border-top:7px solid '+n.color+'; " id="prev-tab-'+t+'" class="rtbs_content active">':'<div style="border-top:7px solid '+n.color+'; " id="prev-tab-'+t+'" class="rtbs_content">',o+=i.content,o+='<div style="margin-top:30px; clear:both;"></div></div>'}),o+="</div>",o+='<div style="clear:both;"></div>',o+='<div class="dmb_accuracy_preview_notice">'+objectL10n.previewAccuracy+"</div>",0==t.tabCount?l("#dmb_preview_tabs").append('<div class="dmb_no_row_preview_notice">'+objectL10n.noTabNotice+"</div>"):l("#dmb_preview_tabs").append(o),l("#dmb_preview_tabs").fadeIn(100)}),l(".dmb_preview_tabs_close").click(function(){l("#dmb_preview_tabs .rtbs, .dmb_accuracy_preview_notice, .dmb_no_row_preview_notice").remove(),l("#dmb_preview_tabs").fadeOut(100)});var d="";l(".dmb_edit_tab_content").click(function(){l("#dmb_unique_editor").fadeIn(100),null!==tinymce.activeEditor&&tinymce.activeEditor.focus(),d=l(this).parent().find(".dmb_tab_content"),tinymce.get("dmb_editor").setContent(d.html())}),l(".dmb_ue_update").click(function(){var t;return(t=l("#wp-dmb_editor-wrap").hasClass("tmce-active")?tinymce.activeEditor.getContent():l("#dmb_editor").val())?d.show():d.hide(),d.html(l.parseHTML(t)),d.siblings(".biofield").val(t),l("#dmb_unique_editor").fadeOut(100),null!==tinymce.activeEditor&&tinymce.activeEditor.setContent(""),!1}),l(".dmb_ue_cancel").click(function(){l("#dmb_unique_editor").fadeOut(100)})})}(jQuery);