{"version":3,"sources":["../assets/src/scripts/pointers/pointers.ts"],"names":[],"mappings":"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","file":"../pointers.js","sourcesContent":["///<reference path=\"../../../../build/typings/index.d.ts\" />\r\n//@TODO: Migrate this\r\nnamespace TotalContest {\r\n    class Button {\r\n        constructor(label, callback, cssClass?) {\r\n            let template = `<button class=\"button ${cssClass || ''}\" style=\"margin-right: 10px;\">${label || ''}</button>`;\r\n\r\n            let button = jQuery(template);\r\n            button.on('click', callback);\r\n\r\n            return button;\r\n        }\r\n    }\r\n\r\n    class PointerSettings {\r\n        constructor(args) {\r\n            let template = `<h3>${args.title || ''}</h3><p>${args.body || ''}</p>`;\r\n\r\n            return jQuery.extend(\r\n                true,\r\n                {\r\n                    content: template,\r\n                    position: {\r\n                        edge: 'left',\r\n                        align: 'left'\r\n                    }\r\n                },\r\n                args\r\n            );\r\n        }\r\n    }\r\n\r\n    class Pointers {\r\n        public pointers: any = jQuery();\r\n        public context = 'global';\r\n        public i18n = {\r\n            done: 'Done',\r\n            next: 'Next',\r\n            previous: 'Previous',\r\n        };\r\n        public current: any = false;\r\n\r\n        constructor(args) {\r\n            if (args.context) {\r\n                this.context = args.context;\r\n            }\r\n\r\n            if (args.i18n) {\r\n                this.i18n = args.i18n;\r\n            }\r\n\r\n            if (args.items) {\r\n                jQuery.each(\r\n                    args.items,\r\n                    (selector, args) => {\r\n                        let instance = jQuery(selector)['pointer'](new PointerSettings(args)).data('wpPointer');\r\n\r\n                        this.pointers.push(instance);\r\n                    }\r\n                );\r\n            }\r\n        }\r\n\r\n        next() {\r\n            this.open(this.current + 1);\r\n        }\r\n\r\n        previous() {\r\n            this.open(this.current - 1);\r\n        }\r\n\r\n        start() {\r\n            this.open(0);\r\n        }\r\n\r\n        open(index) {\r\n            if (this.pointers[this.current]) {\r\n                this.pointers[this.current].close();\r\n            }\r\n\r\n            if (this.pointers[index]) {\r\n                this.current = parseInt(index);\r\n\r\n                let instance = this.pointers.get(this.current);\r\n                instance.open();\r\n\r\n                let position = instance.element.offset().top - instance.element.outerHeight() - 100;\r\n                let buttons = instance.content.find('.wp-pointer-buttons');\r\n\r\n                buttons.find('.close').on('click', jQuery.proxy(this.dismiss, this));\r\n\r\n                if (this.current !== 0) {\r\n                    buttons.append(new Button(this.i18n.previous, jQuery.proxy(this.previous, this)));\r\n                }\r\n\r\n                if (this.current < this.pointers.length - 1) {\r\n                    buttons.append(new Button(this.i18n.next, jQuery.proxy(this.next, this), 'button-primary'));\r\n                }\r\n\r\n                if (this.current === this.pointers.length - 1) {\r\n                    buttons.append(new Button(this.i18n.done, jQuery.proxy(this.dismiss, this), 'button-primary'));\r\n                }\r\n            }\r\n        }\r\n\r\n        dismiss() {\r\n            this.pointers[this.current].close();\r\n            jQuery.get(window['ajaxurl'], {action: 'totalcontest_dismiss', type: 'pointer', object: this.context});\r\n        }\r\n    }\r\n\r\n\r\n    jQuery(function ($) {\r\n\r\n        if (window['totalcontestPointers']) {\r\n            let pointers = new Pointers(window['totalcontestPointers']);\r\n            pointers.start();\r\n        }\r\n\r\n    });\r\n}"]}