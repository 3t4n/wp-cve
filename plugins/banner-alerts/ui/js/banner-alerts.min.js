!function(t){var e={latestTimestamp:0,$alertsBannerContainer:null,$alertsBanner:null,$alerts:null,$controls:null,options:[],init:function(){var t=(this.getCookie("last-alert-timestamp")||"0:0").split(":");this.latestTimestamp=t[0]||0,Math.floor((new Date).getTime()/1e3)-(t[1]||0)>=1800&&this.retrieveAlerts(this.latestTimestamp)},retrieveAlerts:function(s){t.post(banner_alerts_vars.ajaxurl,{action:"get_banner_alerts",timestamp:s},function(t){e.options=t.options,e.addAlertsContainer(),e.addAlerts(t.alerts),""==t.alerts&&e.saveLatestTimestamp()})},setCookie:function(t,e,s){var n="";if(s){var i=new Date;i.setTime(i.getTime()+864e5*s),n="; expires="+i.toUTCString()}document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+n+"; path=/"},getCookie:function(t){for(var e=t+"=",s=decodeURIComponent(document.cookie),n=s.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1);if(0===a.indexOf(e))return a.substring(e.length,a.length)}return null},saveLatestTimestamp:function(){this.setCookie("last-alert-timestamp",this.latestTimestamp+":"+Math.floor((new Date).getTime()/1e3),365)},addAlertsContainer:function(){this.$alertsBannerContainer=t("<div/>",{"class":"banner-alerts-container"}),this.$alertsBanner=t("<div/>",{id:"banner-alerts","class":"banner-alerts"}).appendTo(this.$alertsBannerContainer),this.$alerts=t("<div/>",{"class":"alerts"}).appendTo(this.$alertsBanner),this.$controls=t("<div/>",{"class":"controls"}).appendTo(this.$alertsBanner),this.$alertsBannerContainer.hide(),t("body").prepend(this.$alertsBannerContainer)},addAlerts:function(t){null===this.$alerts&&this.addAlertsContainer();var e;for(e=0;e<t.length;e++)this.buildAlertDom(t[e]).appendTo(this.$alerts),t[e].date_modified_gmt>this.latestTimestamp&&(this.latestTimestamp=t[e].date_modified_gmt);t.length>0&&(this.addControls(t.length),"0"==this.options["display-speed"]?this.$alertsBannerContainer.show(0):this.$alertsBannerContainer.slideDown(this.options["display-speed"]))},addControls:function(s){if(""!=this.options["display-styles"]&&t("<style/>",{text:this.options["display-styles"],type:"text/css"}).prependTo(this.$alertsBannerContainer),s>1&&"1"==this.options["use-slider"]){var n=t("div.banner-alerts > div.alerts");t("<style/>",{text:"#banner-alerts .alert { display: none; } #banner-alerts .alert:first-child { display: block; }",type:"text/css"}).prependTo(this.$alertsBannerContainer),this.$navigation=t("<div/>",{"class":"navigation"}).appendTo(this.$controls),t("<a/>",{text:"<","class":"previous",href:"#"}).on("click",function(){return n.find(".alert:last-child").prependTo(n),!1}).appendTo(this.$navigation),t("<a/>",{text:">","class":"next",href:"#"}).on("click",function(){return n.find(".alert:first-child").appendTo(n),!1}).appendTo(this.$navigation)}"1"==this.options["display-dismiss"]&&t("<a/>",{html:banner_alerts_vars.dismissText,"class":"dismiss",href:"#"}).on("click",function(){return e.dismissAll(),!1}).appendTo(this.$controls)},buildAlertDom:function(e){var s=t("<div/>",{"class":"alert","data-id":e.id});if("1"==this.options["display-title"]?t("<h2/>").html(e.title).appendTo(s):"2"==this.options["display-title"]&&t("<h2/>").append(t("<a/>",{href:e.permalink}).html(e.title)).appendTo(s),"1"==this.options["display-mode"]?t("<div/>").html(e.content).appendTo(s):"2"==this.options["display-mode"]&&t("<div/>").html(e.excerpt).appendTo(s),"1"==this.options["display-readmore"]){t("<a/>",{text:banner_alerts_vars.readMoreText,"class":"read-more",href:e.permalink}).appendTo(s)}return s},dismissAll:function(){"0"==this.options["display-speed"]?this.$alertsBannerContainer.hide(0):this.$alertsBannerContainer.slideUp(this.options["display-speed"]);var t;t="number"==typeof e.options["display-speed"]?e.options["display-speed"]:400,setTimeout(function(){e.$alertsBannerContainer.find("style").remove()},t),this.saveLatestTimestamp()}},s=navigator.userAgent.match(/(googlebot)|(yandexbot)|(baiduspider)|(bingbot)|(slurp)/i);s||e.init()}(jQuery);