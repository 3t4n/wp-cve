jQuery(document).ready(function(t){}),jQuery(document).ready(function(t){}),jQuery(document).ready(function(t){}),jQuery(document).ready(function(t){}),jQuery(document).ready(function(t){}),jQuery(document).ready(function(t){}),jQuery(document).ready(function(t){}),function(t){var e={},a=0;t.galleriffic={version:"2.0.1",normalizeHash:function(t){return t.replace(/^.*#/,"").replace(/\?.*$/,"")},getImage:function(a){if(a)return e[a=t.galleriffic.normalizeHash(a)]},gotoImage:function(e){var a=t.galleriffic.getImage(e);return!!a&&(a.gallery.gotoImage(a),!0)},removeImageByHash:function(e,a){var n=t.galleriffic.getImage(e);if(!n)return!1;var s=n.gallery;return(!a||a==s)&&s.removeImageByIndex(n.index)}};var n={delay:3e3,numThumbs:20,preloadAhead:40,enableTopPager:!1,enableBottomPager:!0,maxPagesToShow:7,imageContainerSel:"",captionContainerSel:"",controlsContainerSel:"",loadingContainerSel:"",renderSSControls:!0,renderNavControls:!0,playLinkText:"Play",pauseLinkText:"Pause",prevLinkText:"Previous",nextLinkText:"Next",nextPageLinkText:"Next &rsaquo;",prevPageLinkText:"&lsaquo; Prev",enableHistory:!1,enableKeyboardNavigation:!0,autoStart:!1,syncTransitions:!1,defaultTransitionDuration:1e3,onSlideChange:void 0,onTransitionOut:void 0,onTransitionIn:void 0,onPageTransitionOut:void 0,onPageTransitionIn:void 0,onImageAdded:void 0,onImageRemoved:void 0};t.fn.galleriffic=function(s){t.extend(this,{version:t.galleriffic.version,isSlideshowRunning:!1,slideshowTimeout:void 0,clickHandler:function(e,a){if(this.pause(),!this.enableHistory){var n=t.galleriffic.normalizeHash(t(a).attr("href"));t.galleriffic.gotoImage(n),e.preventDefault()}},appendImage:function(t){return this.addImage(t,!1,!1),this},insertImage:function(t,e){return this.addImage(t,!1,!0,e),this},addImage:function(n,s,r,o){var h="string"==typeof n?t(n):n,l=h.find("a.thumb"),d=l.attr("href"),u=l.attr("title"),c=h.find(".caption").remove(),p=l.attr("name");a++,p&&!e[""+p]||(p=a),r||(o=this.data.length);var f={title:u,slideUrl:d,caption:c,hash:p,gallery:this,index:o};r?(this.data.splice(o,0,f),this.updateIndices(o)):this.data.push(f);var g=this;return s||this.updateThumbs(function(){var t=g.find("ul.thumbs");r?t.children(":eq("+o+")").before(h):t.append(h),g.onImageAdded&&g.onImageAdded(f,h)}),e[""+p]=f,l.attr("rel","history").attr("href","#"+p).removeAttr("name").click(function(t){g.clickHandler(t,this)}),this},removeImageByIndex:function(t){if(t<0||t>=this.data.length)return!1;var e=this.data[t];return!!e&&(this.removeImage(e),!0)},removeImageByHash:function(e){return t.galleriffic.removeImageByHash(e,this)},removeImage:function(t){var a=t.index;return this.data.splice(a,1),delete e[""+t.hash],this.updateThumbs(function(){var e=r.find("ul.thumbs").children(":eq("+a+")").remove();r.onImageRemoved&&r.onImageRemoved(t,e)}),this.updateIndices(a),this},updateIndices:function(t){for(i=t;i<this.data.length;i++)this.data[i].index=i;return this},initializeThumbs:function(){this.data=[];var e=this;return this.find("ul.thumbs > li").each(function(a){e.addImage(t(this),!0,!1)}),this},isPreloadComplete:!1,preloadInit:function(){if(0==this.preloadAhead)return this;this.preloadStartIndex=this.currentImage.index;var t=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,t)},preloadRelocate:function(t){return this.preloadStartIndex=t,this},preloadRecursive:function(t,e){if(t!=this.preloadStartIndex){var a=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,a)}var n=this,s=e-t;if(s<0&&(s=this.data.length-1-t+e),this.preloadAhead>=0&&s>this.preloadAhead)return setTimeout(function(){n.preloadRecursive(t,e)},500),this;var r=this.data[e];if(!r)return this;if(r.image)return this.preloadNext(t,e);var o=new Image;return o.onload=function(){r.image=this,n.preloadNext(t,e)},o.alt=r.title,o.src=r.slideUrl,this},preloadNext:function(t,e){var a=this.getNextIndex(e);if(a==t)this.isPreloadComplete=!0;else{var n=this;setTimeout(function(){n.preloadRecursive(t,a)},100)}return this},getNextIndex:function(t){var e=t+1;return e>=this.data.length&&(e=0),e},getPrevIndex:function(t){var e=t-1;return e<0&&(e=this.data.length-1),e},pause:function(){return this.isSlideshowRunning=!1,this.slideshowTimeout&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=void 0),this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("play").attr("title",this.playLinkText).attr("href","#play").html(this.playLinkText),this},play:function(){if(this.isSlideshowRunning=!0,this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("pause").attr("title",this.pauseLinkText).attr("href","#pause").html(this.pauseLinkText),!this.slideshowTimeout){var t=this;this.slideshowTimeout=setTimeout(function(){t.ssAdvance()},this.delay)}return this},toggleSlideshow:function(){return this.isSlideshowRunning?this.pause():this.play(),this},ssAdvance:function(){return this.isSlideshowRunning&&this.next(!0),this},next:function(t,e){return this.gotoIndex(this.getNextIndex(this.currentImage.index),t,e),this},previous:function(t,e){return this.gotoIndex(this.getPrevIndex(this.currentImage.index),t,e),this},nextPage:function(t,e){var a=this.getCurrentPage();if(a<this.getNumPages()-1){var n=a*this.numThumbs+this.numThumbs;this.gotoIndex(n,t,e)}return this},previousPage:function(t,e){var a=this.getCurrentPage();if(a>0){var n=a*this.numThumbs-this.numThumbs;this.gotoIndex(n,t,e)}return this},gotoIndex:function(e,a,n){a||this.pause(),e<0?e=0:e>=this.data.length&&(e=this.data.length-1);var s=this.data[e];return!n&&this.enableHistory?t.historyLoad(String(s.hash)):this.gotoImage(s),this},gotoImage:function(t){var e=t.index;return this.onSlideChange&&this.onSlideChange(this.currentImage.index,e),this.currentImage=t,this.preloadRelocate(e),this.refresh(),this},getDefaultTransitionDuration:function(t){return t?this.defaultTransitionDuration:this.defaultTransitionDuration/2},refresh:function(){var t=this.currentImage;if(!t)return this;var e=t.index;this.$controlsContainer&&this.$controlsContainer.find("div.nav-controls a.prev").attr("href","#"+this.data[this.getPrevIndex(e)].hash).end().find("div.nav-controls a.next").attr("href","#"+this.data[this.getNextIndex(e)].hash);var a=this.$imageContainer.find("span.current").addClass("previous").removeClass("current"),n=0;this.$captionContainer&&(n=this.$captionContainer.find("span.current").addClass("previous").removeClass("current"));var s=this.syncTransitions&&t.image,r=!0,o=this,h=function(){r=!1,a.remove(),n&&n.remove(),s||(t.image&&t.hash==o.data[o.currentImage.index].hash?o.buildImage(t,s):o.$loadingContainer&&o.$loadingContainer.show())};if(0==a.length?h():this.onTransitionOut?this.onTransitionOut(a,n,s,h):(a.fadeTo(this.getDefaultTransitionDuration(s),0,h),n&&n.fadeTo(this.getDefaultTransitionDuration(s),0)),s&&this.buildImage(t,s),!t.image){var l=new Image;l.onload=function(){t.image=this,r||t.hash!=o.data[o.currentImage.index].hash||o.buildImage(t,s)},l.alt=t.title,l.src=t.slideUrl}return this.relocatePreload=!0,this.syncThumbs()},buildImage:function(t,e){var a=this,n=this.getNextIndex(t.index);if(e)var s=this.$imageContainer.append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");else var s=this.$imageContainer.html('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");s.find("a").append(t.image).click(function(t){a.clickHandler(t,this)});var r=0;return this.$captionContainer&&(r=this.$captionContainer.append('<span class="image-caption current"></span>').find("span.current").css("opacity","0").append(t.caption)),this.$loadingContainer&&this.$loadingContainer.hide(),this.onTransitionIn?this.onTransitionIn(s,r,e):(s.fadeTo(this.getDefaultTransitionDuration(e),1),r&&r.fadeTo(this.getDefaultTransitionDuration(e),1)),this.isSlideshowRunning&&(this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.slideshowTimeout=setTimeout(function(){a.ssAdvance()},this.delay)),this},getCurrentPage:function(){return Math.floor(this.currentImage.index/this.numThumbs)},syncThumbs:function(){this.getCurrentPage()!=this.displayedPage&&this.updateThumbs();var t=this.find("ul.thumbs").children();return t.filter(".selected").removeClass("selected"),t.eq(this.currentImage.index).addClass("selected"),this},updateThumbs:function(t){var e=this,a=function(){t&&t(),e.rebuildThumbs(),e.onPageTransitionIn?e.onPageTransitionIn():e.show()};return this.onPageTransitionOut?this.onPageTransitionOut(a):(this.hide(),a()),this},rebuildThumbs:function(){var e=this.data.length>this.numThumbs;if(this.enableTopPager){var a=this.find("div.top");0==a.length?a=this.prepend('<div class="top pagination"></div>').find("div.top"):a.empty(),e&&this.buildPager(a)}if(this.enableBottomPager){var n=this.find("div.bottom");0==n.length?n=this.append('<div class="bottom pagination"></div>').find("div.bottom"):n.empty(),e&&this.buildPager(n)}var s=this.getCurrentPage(),r=s*this.numThumbs,o=r+this.numThumbs-1;o>=this.data.length&&(o=this.data.length-1);var h=this.find("ul.thumbs");return h.find("li").each(function(e){var a=t(this);e>=r&&e<=o?a.show():a.hide()}),this.displayedPage=s,h.removeClass("noscript"),this},getNumPages:function(){return Math.ceil(this.data.length/this.numThumbs)},buildPager:function(t){var e=this,a=this.getNumPages(),n=this.getCurrentPage(),s=n*this.numThumbs,r=this.maxPagesToShow-1,o=n-Math.floor((this.maxPagesToShow-1)/2)+1;if(o>0){var h=a-o;h<r&&(o-=r-h)}if(o<0&&(o=0),n>0){var l=s-this.numThumbs;t.append('<a rel="history" class="pprev" href="#'+this.data[l].hash+'" title="'+this.prevPageLinkText+'">'+this.prevPageLinkText+"</a>")}for(o>0&&(this.buildPageLink(t,0,a),o>1&&t.append('<span class="ellipsis">&hellip;</span>'),r--);r>0;)this.buildPageLink(t,o,a),r--,o++;if(o<a){var d=a-1;o<d&&t.append('<span class="ellipsis">&hellip;</span>'),this.buildPageLink(t,d,a)}var u=s+this.numThumbs;return u<this.data.length&&t.append('<a rel="history" class="pnext" href="#'+this.data[u].hash+'" title="'+this.nextPageLinkText+'">'+this.nextPageLinkText+"</a>"),t.find("a").click(function(t){e.clickHandler(t,this)}),this},buildPageLink:function(t,e,a){var n=e+1;if(e==this.getCurrentPage())t.append('<span class="current">'+n+"</span>");else if(e<a){var s=e*this.numThumbs;t.append('<a rel="history" href="#'+this.data[s].hash+'" title="'+n+'">'+n+"</a>")}return this}}),t.extend(this,n,s),this.enableHistory&&!t.historyInit&&(this.enableHistory=!1),this.imageContainerSel&&(this.$imageContainer=t(this.imageContainerSel)),this.captionContainerSel&&(this.$captionContainer=t(this.captionContainerSel)),this.loadingContainerSel&&(this.$loadingContainer=t(this.loadingContainerSel)),this.initializeThumbs(),this.maxPagesToShow<3&&(this.maxPagesToShow=3),this.displayedPage=-1,this.currentImage=this.data[0];var r=this;this.$loadingContainer&&this.$loadingContainer.hide(),this.controlsContainerSel&&(this.$controlsContainer=t(this.controlsContainerSel).empty(),this.renderSSControls&&(this.autoStart?this.$controlsContainer.append('<div class="ss-controls"><a href="#pause" class="pause" title="'+this.pauseLinkText+'"><span>'+this.pauseLinkText+"</span></a></div>"):this.$controlsContainer.append('<div class="ss-controls"><a href="#play" class="play" title="'+this.playLinkText+'"><span>'+this.playLinkText+"</span></a></div>"),this.$controlsContainer.find("div.ss-controls a").click(function(t){return r.toggleSlideshow(),t.preventDefault(),!1})),this.renderNavControls&&this.$controlsContainer.append('<div class="nav-controls"><a class="prev" rel="history" title="'+this.prevLinkText+'"><span>'+this.prevLinkText+'</span></a><a class="next" rel="history" title="'+this.nextLinkText+'"><span>'+this.nextLinkText+"</span></a></div>").find("div.nav-controls a").click(function(t){r.clickHandler(t,this)}));var o=!this.enableHistory||!location.hash;return this.enableHistory&&location.hash&&(e[t.galleriffic.normalizeHash(location.hash)]||(o=!0)),o&&this.gotoIndex(0,!1,!0),this.enableKeyboardNavigation&&t(document).keydown(function(t){switch(t.charCode?t.charCode:t.keyCode?t.keyCode:0){case 32:case 39:r.next();break;case 33:r.previousPage(),t.preventDefault();break;case 34:r.nextPage(),t.preventDefault();break;case 35:r.gotoIndex(r.data.length-1),t.preventDefault();break;case 36:r.gotoIndex(0),t.preventDefault();break;case 37:r.previous()}}),this.autoStart&&this.play(),setTimeout(function(){r.preloadInit()},1e3),this}}(jQuery),jQuery.extend({historyCurrentHash:void 0,historyCallback:void 0,historyIframeSrc:void 0,historyInit:function(t,e){jQuery.historyCallback=t,e&&(jQuery.historyIframeSrc=e);var a=location.hash.replace(/\?.*$/,"");if(jQuery.historyCurrentHash=a,jQuery.support.msie){""==jQuery.historyCurrentHash&&(jQuery.historyCurrentHash="#"),jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;"'+(jQuery.historyIframeSrc?' src="'+jQuery.historyIframeSrc+'"':"")+"></iframe>");var n=jQuery("#jQuery_history")[0].contentWindow.document;n.open(),n.close(),n.location.hash=a}else jQuery.support.safari&&(jQuery.historyBackStack=[],jQuery.historyBackStack.length=history.length,jQuery.historyForwardStack=[],jQuery.lastHistoryLength=history.length,jQuery.isFirst=!0);a&&jQuery.historyCallback(a.replace(/^#/,"")),setInterval(jQuery.historyCheck,100)},historyAddHistory:function(t){jQuery.historyBackStack.push(t),jQuery.historyForwardStack.length=0,this.isFirst=!0},historyCheck:function(){if(jQuery.support.msie){var t=jQuery("#jQuery_history")[0],e=(t.contentDocument||t.contentWindow.document).location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(location.hash=e,jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}else if(jQuery.support.safari){if(jQuery.lastHistoryLength==history.length&&jQuery.historyBackStack.length>jQuery.lastHistoryLength&&jQuery.historyBackStack.shift(),!jQuery.dontCheck){var a=history.length-jQuery.historyBackStack.length;if(jQuery.lastHistoryLength=history.length,a){if(jQuery.isFirst=!1,a<0)for(var n=0;n<Math.abs(a);n++)jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop());else for(var n=0;n<a;n++)jQuery.historyBackStack.push(jQuery.historyForwardStack.shift());var s=jQuery.historyBackStack[jQuery.historyBackStack.length-1];void 0!=s&&(jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,""),jQuery.historyCallback(s))}else if(void 0==jQuery.historyBackStack[jQuery.historyBackStack.length-1]&&!jQuery.isFirst){if(location.hash){var e=location.hash;jQuery.historyCallback(location.hash.replace(/^#/,""))}else{var e="";jQuery.historyCallback("")}jQuery.isFirst=!0}}}else{var e=location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}},historyLoad:function(t){var e;if(t=decodeURIComponent(t.replace(/\?.*$/,"")),jQuery.support.safari?e=t:(e="#"+t,location.hash=e),jQuery.historyCurrentHash=e,jQuery.support.msie){var a=jQuery("#jQuery_history")[0].contentWindow.document;a.open(),a.close(),a.location.hash=e,jQuery.lastHistoryLength=history.length,jQuery.historyCallback(t)}else if(jQuery.support.safari){jQuery.dontCheck=!0,this.historyAddHistory(t);var n=function(){jQuery.dontCheck=!1};window.setTimeout(n,200),jQuery.historyCallback(t),location.hash=e}else jQuery.historyCallback(t)}}),jQuery(document).ready(function(t){var e;t(".colorpicker").hide(),t(".colorpicker").each(function(){t(this).farbtastic(t(this).closest(".color-picker").find(".color"))}),t(".color").click(function(){t(this).closest(".color-picker").find(".colorpicker").fadeIn()}),t(document).mousedown(function(){t(".colorpicker").each(function(){"block"==t(this).css("display")&&t(this).fadeOut()})}),jQuery.fn.uploadMediaFile=function(t,a){var n=t.attr("id"),s=n.replace("_button",""),r=n.replace("_button","_preview");if(e)return void e.open();(e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON(),jQuery("#"+s).val(attachment.id),a&&jQuery("#"+r).attr("src",attachment.sizes.thumbnail.url),e=!1}),e.open()},jQuery(".image_upload_button").click(function(){jQuery.fn.uploadMediaFile(jQuery(this),!0)}),jQuery(".image_delete_button").click(function(){return jQuery(this).closest("td").find(".image_data_field").val(""),jQuery(this).closest("td").find(".image_preview").remove(),!1})}),function(t){var e={},a=0;t.galleriffic={version:"2.0.1",normalizeHash:function(t){return t.replace(/^.*#/,"").replace(/\?.*$/,"")},getImage:function(a){if(a)return e[a=t.galleriffic.normalizeHash(a)]},gotoImage:function(e){var a=t.galleriffic.getImage(e);return!!a&&(a.gallery.gotoImage(a),!0)},removeImageByHash:function(e,a){var n=t.galleriffic.getImage(e);if(!n)return!1;var s=n.gallery;return(!a||a==s)&&s.removeImageByIndex(n.index)}};var n={delay:3e3,numThumbs:20,preloadAhead:40,enableTopPager:!1,enableBottomPager:!0,maxPagesToShow:7,imageContainerSel:"",captionContainerSel:"",controlsContainerSel:"",loadingContainerSel:"",renderSSControls:!0,renderNavControls:!0,playLinkText:"Play",pauseLinkText:"Pause",prevLinkText:"Previous",nextLinkText:"Next",nextPageLinkText:"Next &rsaquo;",prevPageLinkText:"&lsaquo; Prev",enableHistory:!1,enableKeyboardNavigation:!0,autoStart:!1,syncTransitions:!1,defaultTransitionDuration:1e3,onSlideChange:void 0,onTransitionOut:void 0,onTransitionIn:void 0,onPageTransitionOut:void 0,onPageTransitionIn:void 0,onImageAdded:void 0,onImageRemoved:void 0};t.fn.galleriffic=function(s){t.extend(this,{version:t.galleriffic.version,isSlideshowRunning:!1,slideshowTimeout:void 0,clickHandler:function(e,a){if(this.pause(),!this.enableHistory){var n=t.galleriffic.normalizeHash(t(a).attr("href"));t.galleriffic.gotoImage(n),e.preventDefault()}},appendImage:function(t){return this.addImage(t,!1,!1),this},insertImage:function(t,e){return this.addImage(t,!1,!0,e),this},addImage:function(n,s,r,o){var h="string"==typeof n?t(n):n,l=h.find("a.thumb"),d=l.attr("href"),u=l.attr("title"),c=h.find(".caption").remove(),p=l.attr("name");a++,p&&!e[""+p]||(p=a),r||(o=this.data.length);var f={title:u,slideUrl:d,caption:c,hash:p,gallery:this,index:o};r?(this.data.splice(o,0,f),this.updateIndices(o)):this.data.push(f);var g=this;return s||this.updateThumbs(function(){var t=g.find("ul.thumbs");r?t.children(":eq("+o+")").before(h):t.append(h),g.onImageAdded&&g.onImageAdded(f,h)}),e[""+p]=f,l.attr("rel","history").attr("href","#"+p).removeAttr("name").click(function(t){g.clickHandler(t,this)}),this},removeImageByIndex:function(t){if(t<0||t>=this.data.length)return!1;var e=this.data[t];return!!e&&(this.removeImage(e),!0)},removeImageByHash:function(e){return t.galleriffic.removeImageByHash(e,this)},removeImage:function(t){var a=t.index;return this.data.splice(a,1),delete e[""+t.hash],this.updateThumbs(function(){var e=r.find("ul.thumbs").children(":eq("+a+")").remove();r.onImageRemoved&&r.onImageRemoved(t,e)}),this.updateIndices(a),this},updateIndices:function(t){for(i=t;i<this.data.length;i++)this.data[i].index=i;return this},initializeThumbs:function(){this.data=[];var e=this;return this.find("ul.thumbs > li").each(function(a){e.addImage(t(this),!0,!1)}),this},isPreloadComplete:!1,preloadInit:function(){if(0==this.preloadAhead)return this;this.preloadStartIndex=this.currentImage.index;var t=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,t)},preloadRelocate:function(t){return this.preloadStartIndex=t,this},preloadRecursive:function(t,e){if(t!=this.preloadStartIndex){var a=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,a)}var n=this,s=e-t;if(s<0&&(s=this.data.length-1-t+e),this.preloadAhead>=0&&s>this.preloadAhead)return setTimeout(function(){n.preloadRecursive(t,e)},500),this;var r=this.data[e];if(!r)return this;if(r.image)return this.preloadNext(t,e);var o=new Image;return o.onload=function(){r.image=this,n.preloadNext(t,e)},o.alt=r.title,o.src=r.slideUrl,this},preloadNext:function(t,e){var a=this.getNextIndex(e);if(a==t)this.isPreloadComplete=!0;else{var n=this;setTimeout(function(){n.preloadRecursive(t,a)},100)}return this},getNextIndex:function(t){var e=t+1;return e>=this.data.length&&(e=0),e},getPrevIndex:function(t){var e=t-1;return e<0&&(e=this.data.length-1),e},pause:function(){return this.isSlideshowRunning=!1,this.slideshowTimeout&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=void 0),this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("play").attr("title",this.playLinkText).attr("href","#play").html(this.playLinkText),this},play:function(){if(this.isSlideshowRunning=!0,this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("pause").attr("title",this.pauseLinkText).attr("href","#pause").html(this.pauseLinkText),!this.slideshowTimeout){var t=this;this.slideshowTimeout=setTimeout(function(){t.ssAdvance()},this.delay)}return this},toggleSlideshow:function(){return this.isSlideshowRunning?this.pause():this.play(),this},ssAdvance:function(){return this.isSlideshowRunning&&this.next(!0),this},next:function(t,e){return this.gotoIndex(this.getNextIndex(this.currentImage.index),t,e),this},previous:function(t,e){return this.gotoIndex(this.getPrevIndex(this.currentImage.index),t,e),this},nextPage:function(t,e){var a=this.getCurrentPage();if(a<this.getNumPages()-1){var n=a*this.numThumbs+this.numThumbs;this.gotoIndex(n,t,e)}return this},previousPage:function(t,e){var a=this.getCurrentPage();if(a>0){var n=a*this.numThumbs-this.numThumbs;this.gotoIndex(n,t,e)}return this},gotoIndex:function(e,a,n){a||this.pause(),e<0?e=0:e>=this.data.length&&(e=this.data.length-1);var s=this.data[e];return!n&&this.enableHistory?t.historyLoad(String(s.hash)):this.gotoImage(s),this},gotoImage:function(t){var e=t.index;return this.onSlideChange&&this.onSlideChange(this.currentImage.index,e),this.currentImage=t,this.preloadRelocate(e),this.refresh(),this},getDefaultTransitionDuration:function(t){return t?this.defaultTransitionDuration:this.defaultTransitionDuration/2},refresh:function(){var t=this.currentImage;if(!t)return this;var e=t.index;this.$controlsContainer&&this.$controlsContainer.find("div.nav-controls a.prev").attr("href","#"+this.data[this.getPrevIndex(e)].hash).end().find("div.nav-controls a.next").attr("href","#"+this.data[this.getNextIndex(e)].hash);var a=this.$imageContainer.find("span.current").addClass("previous").removeClass("current"),n=0;this.$captionContainer&&(n=this.$captionContainer.find("span.current").addClass("previous").removeClass("current"));var s=this.syncTransitions&&t.image,r=!0,o=this,h=function(){r=!1,a.remove(),n&&n.remove(),s||(t.image&&t.hash==o.data[o.currentImage.index].hash?o.buildImage(t,s):o.$loadingContainer&&o.$loadingContainer.show())};if(0==a.length?h():this.onTransitionOut?this.onTransitionOut(a,n,s,h):(a.fadeTo(this.getDefaultTransitionDuration(s),0,h),n&&n.fadeTo(this.getDefaultTransitionDuration(s),0)),s&&this.buildImage(t,s),!t.image){var l=new Image;l.onload=function(){t.image=this,r||t.hash!=o.data[o.currentImage.index].hash||o.buildImage(t,s)},l.alt=t.title,l.src=t.slideUrl}return this.relocatePreload=!0,this.syncThumbs()},buildImage:function(t,e){var a=this,n=this.getNextIndex(t.index);if(e)var s=this.$imageContainer.append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");else var s=this.$imageContainer.html('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");s.find("a").append(t.image).click(function(t){a.clickHandler(t,this)});var r=0;return this.$captionContainer&&(r=this.$captionContainer.append('<span class="image-caption current"></span>').find("span.current").css("opacity","0").append(t.caption)),this.$loadingContainer&&this.$loadingContainer.hide(),this.onTransitionIn?this.onTransitionIn(s,r,e):(s.fadeTo(this.getDefaultTransitionDuration(e),1),r&&r.fadeTo(this.getDefaultTransitionDuration(e),1)),this.isSlideshowRunning&&(this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.slideshowTimeout=setTimeout(function(){a.ssAdvance()},this.delay)),this},getCurrentPage:function(){return Math.floor(this.currentImage.index/this.numThumbs)},syncThumbs:function(){this.getCurrentPage()!=this.displayedPage&&this.updateThumbs();var t=this.find("ul.thumbs").children();return t.filter(".selected").removeClass("selected"),t.eq(this.currentImage.index).addClass("selected"),this},updateThumbs:function(t){var e=this,a=function(){t&&t(),e.rebuildThumbs(),e.onPageTransitionIn?e.onPageTransitionIn():e.show()};return this.onPageTransitionOut?this.onPageTransitionOut(a):(this.hide(),a()),this},rebuildThumbs:function(){var e=this.data.length>this.numThumbs;if(this.enableTopPager){var a=this.find("div.top");0==a.length?a=this.prepend('<div class="top pagination"></div>').find("div.top"):a.empty(),e&&this.buildPager(a)}if(this.enableBottomPager){var n=this.find("div.bottom");0==n.length?n=this.append('<div class="bottom pagination"></div>').find("div.bottom"):n.empty(),e&&this.buildPager(n)}var s=this.getCurrentPage(),r=s*this.numThumbs,o=r+this.numThumbs-1;o>=this.data.length&&(o=this.data.length-1);var h=this.find("ul.thumbs");return h.find("li").each(function(e){var a=t(this);e>=r&&e<=o?a.show():a.hide()}),this.displayedPage=s,h.removeClass("noscript"),this},getNumPages:function(){return Math.ceil(this.data.length/this.numThumbs)},buildPager:function(t){var e=this,a=this.getNumPages(),n=this.getCurrentPage(),s=n*this.numThumbs,r=this.maxPagesToShow-1,o=n-Math.floor((this.maxPagesToShow-1)/2)+1;if(o>0){var h=a-o;h<r&&(o-=r-h)}if(o<0&&(o=0),n>0){var l=s-this.numThumbs;t.append('<a rel="history" class="pprev" href="#'+this.data[l].hash+'" title="'+this.prevPageLinkText+'">'+this.prevPageLinkText+"</a>")}for(o>0&&(this.buildPageLink(t,0,a),o>1&&t.append('<span class="ellipsis">&hellip;</span>'),r--);r>0;)this.buildPageLink(t,o,a),r--,o++;if(o<a){var d=a-1;o<d&&t.append('<span class="ellipsis">&hellip;</span>'),this.buildPageLink(t,d,a)}var u=s+this.numThumbs;return u<this.data.length&&t.append('<a rel="history" class="pnext" href="#'+this.data[u].hash+'" title="'+this.nextPageLinkText+'">'+this.nextPageLinkText+"</a>"),t.find("a").click(function(t){e.clickHandler(t,this)}),this},buildPageLink:function(t,e,a){var n=e+1;if(e==this.getCurrentPage())t.append('<span class="current">'+n+"</span>");else if(e<a){var s=e*this.numThumbs;t.append('<a rel="history" href="#'+this.data[s].hash+'" title="'+n+'">'+n+"</a>")}return this}}),t.extend(this,n,s),this.enableHistory&&!t.historyInit&&(this.enableHistory=!1),this.imageContainerSel&&(this.$imageContainer=t(this.imageContainerSel)),this.captionContainerSel&&(this.$captionContainer=t(this.captionContainerSel)),this.loadingContainerSel&&(this.$loadingContainer=t(this.loadingContainerSel)),this.initializeThumbs(),this.maxPagesToShow<3&&(this.maxPagesToShow=3),this.displayedPage=-1,this.currentImage=this.data[0];var r=this;this.$loadingContainer&&this.$loadingContainer.hide(),this.controlsContainerSel&&(this.$controlsContainer=t(this.controlsContainerSel).empty(),this.renderSSControls&&(this.autoStart?this.$controlsContainer.append('<div class="ss-controls"><a href="#pause" class="pause" title="'+this.pauseLinkText+'"><span>'+this.pauseLinkText+"</span></a></div>"):this.$controlsContainer.append('<div class="ss-controls"><a href="#play" class="play" title="'+this.playLinkText+'"><span>'+this.playLinkText+"</span></a></div>"),this.$controlsContainer.find("div.ss-controls a").click(function(t){return r.toggleSlideshow(),t.preventDefault(),!1})),this.renderNavControls&&this.$controlsContainer.append('<div class="nav-controls"><a class="prev" rel="history" title="'+this.prevLinkText+'"><span>'+this.prevLinkText+'</span></a><a class="next" rel="history" title="'+this.nextLinkText+'"><span>'+this.nextLinkText+"</span></a></div>").find("div.nav-controls a").click(function(t){r.clickHandler(t,this)}));var o=!this.enableHistory||!location.hash;return this.enableHistory&&location.hash&&(e[t.galleriffic.normalizeHash(location.hash)]||(o=!0)),o&&this.gotoIndex(0,!1,!0),this.enableKeyboardNavigation&&t(document).keydown(function(t){switch(t.charCode?t.charCode:t.keyCode?t.keyCode:0){case 32:case 39:r.next();break;case 33:r.previousPage(),t.preventDefault();break;case 34:r.nextPage(),t.preventDefault();break;case 35:r.gotoIndex(r.data.length-1),t.preventDefault();break;case 36:r.gotoIndex(0),t.preventDefault();break;case 37:r.previous()}}),this.autoStart&&this.play(),setTimeout(function(){r.preloadInit()},1e3),this}}(jQuery),jQuery.extend({historyCurrentHash:void 0,historyCallback:void 0,historyIframeSrc:void 0,historyInit:function(t,e){jQuery.historyCallback=t,e&&(jQuery.historyIframeSrc=e);var a=location.hash.replace(/\?.*$/,"");if(jQuery.historyCurrentHash=a,jQuery.support.msie){""==jQuery.historyCurrentHash&&(jQuery.historyCurrentHash="#"),jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;"'+(jQuery.historyIframeSrc?' src="'+jQuery.historyIframeSrc+'"':"")+"></iframe>");var n=jQuery("#jQuery_history")[0].contentWindow.document;n.open(),n.close(),n.location.hash=a}else jQuery.support.safari&&(jQuery.historyBackStack=[],jQuery.historyBackStack.length=history.length,jQuery.historyForwardStack=[],jQuery.lastHistoryLength=history.length,jQuery.isFirst=!0);a&&jQuery.historyCallback(a.replace(/^#/,"")),setInterval(jQuery.historyCheck,100)},historyAddHistory:function(t){jQuery.historyBackStack.push(t),jQuery.historyForwardStack.length=0,this.isFirst=!0},historyCheck:function(){if(jQuery.support.msie){var t=jQuery("#jQuery_history")[0],e=(t.contentDocument||t.contentWindow.document).location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(location.hash=e,jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}else if(jQuery.support.safari){if(jQuery.lastHistoryLength==history.length&&jQuery.historyBackStack.length>jQuery.lastHistoryLength&&jQuery.historyBackStack.shift(),!jQuery.dontCheck){var a=history.length-jQuery.historyBackStack.length;if(jQuery.lastHistoryLength=history.length,a){if(jQuery.isFirst=!1,a<0)for(var n=0;n<Math.abs(a);n++)jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop());else for(var n=0;n<a;n++)jQuery.historyBackStack.push(jQuery.historyForwardStack.shift());var s=jQuery.historyBackStack[jQuery.historyBackStack.length-1];void 0!=s&&(jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,""),jQuery.historyCallback(s))}else if(void 0==jQuery.historyBackStack[jQuery.historyBackStack.length-1]&&!jQuery.isFirst){if(location.hash){var e=location.hash;jQuery.historyCallback(location.hash.replace(/^#/,""))}else{var e="";jQuery.historyCallback("")}jQuery.isFirst=!0}}}else{var e=location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}},historyLoad:function(t){var e;if(t=decodeURIComponent(t.replace(/\?.*$/,"")),jQuery.support.safari?e=t:(e="#"+t,location.hash=e),jQuery.historyCurrentHash=e,jQuery.support.msie){var a=jQuery("#jQuery_history")[0].contentWindow.document;a.open(),a.close(),a.location.hash=e,jQuery.lastHistoryLength=history.length,jQuery.historyCallback(t)}else if(jQuery.support.safari){jQuery.dontCheck=!0,this.historyAddHistory(t);var n=function(){jQuery.dontCheck=!1};window.setTimeout(n,200),jQuery.historyCallback(t),location.hash=e}else jQuery.historyCallback(t)}}),jQuery(document).ready(function(t){var e;t(".colorpicker").hide(),t(".colorpicker").each(function(){t(this).farbtastic(t(this).closest(".color-picker").find(".color"))}),t(".color").click(function(){t(this).closest(".color-picker").find(".colorpicker").fadeIn()}),t(document).mousedown(function(){t(".colorpicker").each(function(){"block"==t(this).css("display")&&t(this).fadeOut()})}),jQuery.fn.uploadMediaFile=function(t,a){var n=t.attr("id"),s=n.replace("_button",""),r=n.replace("_button","_preview");if(e)return void e.open();(e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON(),jQuery("#"+s).val(attachment.id),a&&jQuery("#"+r).attr("src",attachment.sizes.thumbnail.url),e=!1}),e.open()},jQuery(".image_upload_button").click(function(){jQuery.fn.uploadMediaFile(jQuery(this),!0)}),jQuery(".image_delete_button").click(function(){return jQuery(this).closest("td").find(".image_data_field").val(""),jQuery(this).closest("td").find(".image_preview").remove(),!1})}),function(t){var e={},a=0;t.galleriffic={version:"2.0.1",normalizeHash:function(t){return t.replace(/^.*#/,"").replace(/\?.*$/,"")},getImage:function(a){if(a)return e[a=t.galleriffic.normalizeHash(a)]},gotoImage:function(e){var a=t.galleriffic.getImage(e);return!!a&&(a.gallery.gotoImage(a),!0)},removeImageByHash:function(e,a){var n=t.galleriffic.getImage(e);if(!n)return!1;var s=n.gallery;return(!a||a==s)&&s.removeImageByIndex(n.index)}};var n={delay:3e3,numThumbs:20,preloadAhead:40,enableTopPager:!1,enableBottomPager:!0,maxPagesToShow:7,imageContainerSel:"",captionContainerSel:"",controlsContainerSel:"",loadingContainerSel:"",renderSSControls:!0,renderNavControls:!0,playLinkText:"Play",pauseLinkText:"Pause",prevLinkText:"Previous",nextLinkText:"Next",nextPageLinkText:"Next &rsaquo;",prevPageLinkText:"&lsaquo; Prev",enableHistory:!1,enableKeyboardNavigation:!0,autoStart:!1,syncTransitions:!1,defaultTransitionDuration:1e3,onSlideChange:void 0,onTransitionOut:void 0,onTransitionIn:void 0,onPageTransitionOut:void 0,onPageTransitionIn:void 0,onImageAdded:void 0,onImageRemoved:void 0};t.fn.galleriffic=function(s){t.extend(this,{version:t.galleriffic.version,isSlideshowRunning:!1,slideshowTimeout:void 0,clickHandler:function(e,a){if(this.pause(),!this.enableHistory){var n=t.galleriffic.normalizeHash(t(a).attr("href"));t.galleriffic.gotoImage(n),e.preventDefault()}},appendImage:function(t){return this.addImage(t,!1,!1),this},insertImage:function(t,e){return this.addImage(t,!1,!0,e),this},addImage:function(n,s,r,o){var h="string"==typeof n?t(n):n,l=h.find("a.thumb"),d=l.attr("href"),u=l.attr("title"),c=h.find(".caption").remove(),p=l.attr("name");a++,p&&!e[""+p]||(p=a),r||(o=this.data.length);var f={title:u,slideUrl:d,caption:c,hash:p,gallery:this,index:o};r?(this.data.splice(o,0,f),this.updateIndices(o)):this.data.push(f);var g=this;return s||this.updateThumbs(function(){var t=g.find("ul.thumbs");r?t.children(":eq("+o+")").before(h):t.append(h),g.onImageAdded&&g.onImageAdded(f,h)}),e[""+p]=f,l.attr("rel","history").attr("href","#"+p).removeAttr("name").click(function(t){g.clickHandler(t,this)}),this},removeImageByIndex:function(t){if(t<0||t>=this.data.length)return!1;var e=this.data[t];return!!e&&(this.removeImage(e),!0)},removeImageByHash:function(e){return t.galleriffic.removeImageByHash(e,this)},removeImage:function(t){var a=t.index;return this.data.splice(a,1),delete e[""+t.hash],this.updateThumbs(function(){var e=r.find("ul.thumbs").children(":eq("+a+")").remove();r.onImageRemoved&&r.onImageRemoved(t,e)}),this.updateIndices(a),this},updateIndices:function(t){for(i=t;i<this.data.length;i++)this.data[i].index=i;return this},initializeThumbs:function(){this.data=[];var e=this;return this.find("ul.thumbs > li").each(function(a){e.addImage(t(this),!0,!1)}),this},isPreloadComplete:!1,preloadInit:function(){if(0==this.preloadAhead)return this;this.preloadStartIndex=this.currentImage.index;var t=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,t)},preloadRelocate:function(t){return this.preloadStartIndex=t,this},preloadRecursive:function(t,e){if(t!=this.preloadStartIndex){var a=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,a)}var n=this,s=e-t;if(s<0&&(s=this.data.length-1-t+e),this.preloadAhead>=0&&s>this.preloadAhead)return setTimeout(function(){n.preloadRecursive(t,e)},500),this;var r=this.data[e];if(!r)return this;if(r.image)return this.preloadNext(t,e);var o=new Image;return o.onload=function(){r.image=this,n.preloadNext(t,e)},o.alt=r.title,o.src=r.slideUrl,this},preloadNext:function(t,e){var a=this.getNextIndex(e);if(a==t)this.isPreloadComplete=!0;else{var n=this;setTimeout(function(){n.preloadRecursive(t,a)},100)}return this},getNextIndex:function(t){var e=t+1;return e>=this.data.length&&(e=0),e},getPrevIndex:function(t){var e=t-1;return e<0&&(e=this.data.length-1),e},pause:function(){return this.isSlideshowRunning=!1,this.slideshowTimeout&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=void 0),this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("play").attr("title",this.playLinkText).attr("href","#play").html(this.playLinkText),this},play:function(){if(this.isSlideshowRunning=!0,this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("pause").attr("title",this.pauseLinkText).attr("href","#pause").html(this.pauseLinkText),!this.slideshowTimeout){var t=this;this.slideshowTimeout=setTimeout(function(){t.ssAdvance()},this.delay)}return this},toggleSlideshow:function(){return this.isSlideshowRunning?this.pause():this.play(),this},ssAdvance:function(){return this.isSlideshowRunning&&this.next(!0),this},next:function(t,e){return this.gotoIndex(this.getNextIndex(this.currentImage.index),t,e),this},previous:function(t,e){return this.gotoIndex(this.getPrevIndex(this.currentImage.index),t,e),this},nextPage:function(t,e){var a=this.getCurrentPage();if(a<this.getNumPages()-1){var n=a*this.numThumbs+this.numThumbs;this.gotoIndex(n,t,e)}return this},previousPage:function(t,e){var a=this.getCurrentPage();if(a>0){var n=a*this.numThumbs-this.numThumbs;this.gotoIndex(n,t,e)}return this},gotoIndex:function(e,a,n){a||this.pause(),e<0?e=0:e>=this.data.length&&(e=this.data.length-1);var s=this.data[e];return!n&&this.enableHistory?t.historyLoad(String(s.hash)):this.gotoImage(s),this},gotoImage:function(t){var e=t.index;return this.onSlideChange&&this.onSlideChange(this.currentImage.index,e),this.currentImage=t,this.preloadRelocate(e),this.refresh(),this},getDefaultTransitionDuration:function(t){return t?this.defaultTransitionDuration:this.defaultTransitionDuration/2},refresh:function(){var t=this.currentImage;if(!t)return this;var e=t.index;this.$controlsContainer&&this.$controlsContainer.find("div.nav-controls a.prev").attr("href","#"+this.data[this.getPrevIndex(e)].hash).end().find("div.nav-controls a.next").attr("href","#"+this.data[this.getNextIndex(e)].hash);var a=this.$imageContainer.find("span.current").addClass("previous").removeClass("current"),n=0;this.$captionContainer&&(n=this.$captionContainer.find("span.current").addClass("previous").removeClass("current"));var s=this.syncTransitions&&t.image,r=!0,o=this,h=function(){r=!1,a.remove(),n&&n.remove(),s||(t.image&&t.hash==o.data[o.currentImage.index].hash?o.buildImage(t,s):o.$loadingContainer&&o.$loadingContainer.show())};if(0==a.length?h():this.onTransitionOut?this.onTransitionOut(a,n,s,h):(a.fadeTo(this.getDefaultTransitionDuration(s),0,h),n&&n.fadeTo(this.getDefaultTransitionDuration(s),0)),s&&this.buildImage(t,s),!t.image){var l=new Image;l.onload=function(){t.image=this,r||t.hash!=o.data[o.currentImage.index].hash||o.buildImage(t,s)},l.alt=t.title,l.src=t.slideUrl}return this.relocatePreload=!0,this.syncThumbs()},buildImage:function(t,e){var a=this,n=this.getNextIndex(t.index);if(e)var s=this.$imageContainer.append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");else var s=this.$imageContainer.html('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");s.find("a").append(t.image).click(function(t){a.clickHandler(t,this)});var r=0;return this.$captionContainer&&(r=this.$captionContainer.append('<span class="image-caption current"></span>').find("span.current").css("opacity","0").append(t.caption)),this.$loadingContainer&&this.$loadingContainer.hide(),this.onTransitionIn?this.onTransitionIn(s,r,e):(s.fadeTo(this.getDefaultTransitionDuration(e),1),r&&r.fadeTo(this.getDefaultTransitionDuration(e),1)),this.isSlideshowRunning&&(this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.slideshowTimeout=setTimeout(function(){a.ssAdvance()},this.delay)),this},getCurrentPage:function(){return Math.floor(this.currentImage.index/this.numThumbs)},syncThumbs:function(){this.getCurrentPage()!=this.displayedPage&&this.updateThumbs();var t=this.find("ul.thumbs").children();return t.filter(".selected").removeClass("selected"),t.eq(this.currentImage.index).addClass("selected"),this},updateThumbs:function(t){var e=this,a=function(){t&&t(),e.rebuildThumbs(),e.onPageTransitionIn?e.onPageTransitionIn():e.show()};return this.onPageTransitionOut?this.onPageTransitionOut(a):(this.hide(),a()),this},rebuildThumbs:function(){var e=this.data.length>this.numThumbs;if(this.enableTopPager){var a=this.find("div.top");0==a.length?a=this.prepend('<div class="top pagination"></div>').find("div.top"):a.empty(),e&&this.buildPager(a)}if(this.enableBottomPager){var n=this.find("div.bottom");0==n.length?n=this.append('<div class="bottom pagination"></div>').find("div.bottom"):n.empty(),e&&this.buildPager(n)}var s=this.getCurrentPage(),r=s*this.numThumbs,o=r+this.numThumbs-1;o>=this.data.length&&(o=this.data.length-1);var h=this.find("ul.thumbs");return h.find("li").each(function(e){var a=t(this);e>=r&&e<=o?a.show():a.hide()}),this.displayedPage=s,h.removeClass("noscript"),this},getNumPages:function(){return Math.ceil(this.data.length/this.numThumbs)},buildPager:function(t){var e=this,a=this.getNumPages(),n=this.getCurrentPage(),s=n*this.numThumbs,r=this.maxPagesToShow-1,o=n-Math.floor((this.maxPagesToShow-1)/2)+1;if(o>0){var h=a-o;h<r&&(o-=r-h)}if(o<0&&(o=0),n>0){var l=s-this.numThumbs;t.append('<a rel="history" class="pprev" href="#'+this.data[l].hash+'" title="'+this.prevPageLinkText+'">'+this.prevPageLinkText+"</a>")}for(o>0&&(this.buildPageLink(t,0,a),o>1&&t.append('<span class="ellipsis">&hellip;</span>'),r--);r>0;)this.buildPageLink(t,o,a),r--,o++;if(o<a){var d=a-1;o<d&&t.append('<span class="ellipsis">&hellip;</span>'),this.buildPageLink(t,d,a)}var u=s+this.numThumbs;return u<this.data.length&&t.append('<a rel="history" class="pnext" href="#'+this.data[u].hash+'" title="'+this.nextPageLinkText+'">'+this.nextPageLinkText+"</a>"),t.find("a").click(function(t){e.clickHandler(t,this)}),this},buildPageLink:function(t,e,a){var n=e+1;if(e==this.getCurrentPage())t.append('<span class="current">'+n+"</span>");else if(e<a){var s=e*this.numThumbs;t.append('<a rel="history" href="#'+this.data[s].hash+'" title="'+n+'">'+n+"</a>")}return this}}),t.extend(this,n,s),this.enableHistory&&!t.historyInit&&(this.enableHistory=!1),this.imageContainerSel&&(this.$imageContainer=t(this.imageContainerSel)),this.captionContainerSel&&(this.$captionContainer=t(this.captionContainerSel)),this.loadingContainerSel&&(this.$loadingContainer=t(this.loadingContainerSel)),this.initializeThumbs(),this.maxPagesToShow<3&&(this.maxPagesToShow=3),this.displayedPage=-1,this.currentImage=this.data[0];var r=this;this.$loadingContainer&&this.$loadingContainer.hide(),this.controlsContainerSel&&(this.$controlsContainer=t(this.controlsContainerSel).empty(),this.renderSSControls&&(this.autoStart?this.$controlsContainer.append('<div class="ss-controls"><a href="#pause" class="pause" title="'+this.pauseLinkText+'"><span>'+this.pauseLinkText+"</span></a></div>"):this.$controlsContainer.append('<div class="ss-controls"><a href="#play" class="play" title="'+this.playLinkText+'"><span>'+this.playLinkText+"</span></a></div>"),this.$controlsContainer.find("div.ss-controls a").click(function(t){return r.toggleSlideshow(),t.preventDefault(),!1})),this.renderNavControls&&this.$controlsContainer.append('<div class="nav-controls"><a class="prev" rel="history" title="'+this.prevLinkText+'"><span>'+this.prevLinkText+'</span></a><a class="next" rel="history" title="'+this.nextLinkText+'"><span>'+this.nextLinkText+"</span></a></div>").find("div.nav-controls a").click(function(t){r.clickHandler(t,this)}));var o=!this.enableHistory||!location.hash;return this.enableHistory&&location.hash&&(e[t.galleriffic.normalizeHash(location.hash)]||(o=!0)),o&&this.gotoIndex(0,!1,!0),this.enableKeyboardNavigation&&t(document).keydown(function(t){switch(t.charCode?t.charCode:t.keyCode?t.keyCode:0){case 32:case 39:r.next();break;case 33:r.previousPage(),t.preventDefault();break;case 34:r.nextPage(),t.preventDefault();break;case 35:r.gotoIndex(r.data.length-1),t.preventDefault();break;case 36:r.gotoIndex(0),t.preventDefault();break;case 37:r.previous()}}),this.autoStart&&this.play(),setTimeout(function(){r.preloadInit()},1e3),this}}(jQuery),jQuery.extend({historyCurrentHash:void 0,historyCallback:void 0,historyIframeSrc:void 0,historyInit:function(t,e){jQuery.historyCallback=t,e&&(jQuery.historyIframeSrc=e);var a=location.hash.replace(/\?.*$/,"");if(jQuery.historyCurrentHash=a,jQuery.support.msie){""==jQuery.historyCurrentHash&&(jQuery.historyCurrentHash="#"),jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;"'+(jQuery.historyIframeSrc?' src="'+jQuery.historyIframeSrc+'"':"")+"></iframe>");var n=jQuery("#jQuery_history")[0].contentWindow.document;n.open(),n.close(),n.location.hash=a}else jQuery.support.safari&&(jQuery.historyBackStack=[],jQuery.historyBackStack.length=history.length,jQuery.historyForwardStack=[],jQuery.lastHistoryLength=history.length,jQuery.isFirst=!0);a&&jQuery.historyCallback(a.replace(/^#/,"")),setInterval(jQuery.historyCheck,100)},historyAddHistory:function(t){jQuery.historyBackStack.push(t),jQuery.historyForwardStack.length=0,this.isFirst=!0},historyCheck:function(){if(jQuery.support.msie){var t=jQuery("#jQuery_history")[0],e=(t.contentDocument||t.contentWindow.document).location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(location.hash=e,jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}else if(jQuery.support.safari){if(jQuery.lastHistoryLength==history.length&&jQuery.historyBackStack.length>jQuery.lastHistoryLength&&jQuery.historyBackStack.shift(),!jQuery.dontCheck){var a=history.length-jQuery.historyBackStack.length;if(jQuery.lastHistoryLength=history.length,a){if(jQuery.isFirst=!1,a<0)for(var n=0;n<Math.abs(a);n++)jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop());else for(var n=0;n<a;n++)jQuery.historyBackStack.push(jQuery.historyForwardStack.shift());var s=jQuery.historyBackStack[jQuery.historyBackStack.length-1];void 0!=s&&(jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,""),jQuery.historyCallback(s))}else if(void 0==jQuery.historyBackStack[jQuery.historyBackStack.length-1]&&!jQuery.isFirst){if(location.hash){var e=location.hash;jQuery.historyCallback(location.hash.replace(/^#/,""))}else{var e="";jQuery.historyCallback("")}jQuery.isFirst=!0}}}else{var e=location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}},historyLoad:function(t){var e;if(t=decodeURIComponent(t.replace(/\?.*$/,"")),jQuery.support.safari?e=t:(e="#"+t,location.hash=e),jQuery.historyCurrentHash=e,jQuery.support.msie){var a=jQuery("#jQuery_history")[0].contentWindow.document;a.open(),a.close(),a.location.hash=e,jQuery.lastHistoryLength=history.length,jQuery.historyCallback(t)}else if(jQuery.support.safari){jQuery.dontCheck=!0,this.historyAddHistory(t);var n=function(){jQuery.dontCheck=!1};window.setTimeout(n,200),jQuery.historyCallback(t),location.hash=e}else jQuery.historyCallback(t)}}),jQuery(document).ready(function(t){var e;t(".colorpicker").hide(),t(".colorpicker").each(function(){t(this).farbtastic(t(this).closest(".color-picker").find(".color"))}),t(".color").click(function(){t(this).closest(".color-picker").find(".colorpicker").fadeIn()}),t(document).mousedown(function(){t(".colorpicker").each(function(){"block"==t(this).css("display")&&t(this).fadeOut()})}),jQuery.fn.uploadMediaFile=function(t,a){var n=t.attr("id"),s=n.replace("_button",""),r=n.replace("_button","_preview");if(e)return void e.open();(e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON(),jQuery("#"+s).val(attachment.id),a&&jQuery("#"+r).attr("src",attachment.sizes.thumbnail.url),e=!1}),e.open()},jQuery(".image_upload_button").click(function(){jQuery.fn.uploadMediaFile(jQuery(this),!0)}),jQuery(".image_delete_button").click(function(){return jQuery(this).closest("td").find(".image_data_field").val(""),jQuery(this).closest("td").find(".image_preview").remove(),!1})}),function(t){var e={},a=0;t.galleriffic={version:"2.0.1",normalizeHash:function(t){return t.replace(/^.*#/,"").replace(/\?.*$/,"")},getImage:function(a){if(a)return e[a=t.galleriffic.normalizeHash(a)]},gotoImage:function(e){var a=t.galleriffic.getImage(e);return!!a&&(a.gallery.gotoImage(a),!0)},removeImageByHash:function(e,a){var n=t.galleriffic.getImage(e);if(!n)return!1;var s=n.gallery;return(!a||a==s)&&s.removeImageByIndex(n.index)}};var n={delay:3e3,numThumbs:20,preloadAhead:40,enableTopPager:!1,enableBottomPager:!0,maxPagesToShow:7,imageContainerSel:"",captionContainerSel:"",controlsContainerSel:"",loadingContainerSel:"",renderSSControls:!0,renderNavControls:!0,playLinkText:"Play",pauseLinkText:"Pause",prevLinkText:"Previous",nextLinkText:"Next",nextPageLinkText:"Next &rsaquo;",prevPageLinkText:"&lsaquo; Prev",enableHistory:!1,enableKeyboardNavigation:!0,autoStart:!1,syncTransitions:!1,defaultTransitionDuration:1e3,onSlideChange:void 0,onTransitionOut:void 0,onTransitionIn:void 0,onPageTransitionOut:void 0,onPageTransitionIn:void 0,onImageAdded:void 0,onImageRemoved:void 0};t.fn.galleriffic=function(s){t.extend(this,{version:t.galleriffic.version,isSlideshowRunning:!1,slideshowTimeout:void 0,clickHandler:function(e,a){if(this.pause(),!this.enableHistory){var n=t.galleriffic.normalizeHash(t(a).attr("href"));t.galleriffic.gotoImage(n),e.preventDefault()}},appendImage:function(t){return this.addImage(t,!1,!1),this},insertImage:function(t,e){return this.addImage(t,!1,!0,e),this},addImage:function(n,s,r,o){var h="string"==typeof n?t(n):n,l=h.find("a.thumb"),d=l.attr("href"),u=l.attr("title"),c=h.find(".caption").remove(),p=l.attr("name");a++,p&&!e[""+p]||(p=a),r||(o=this.data.length);var f={title:u,slideUrl:d,caption:c,hash:p,gallery:this,index:o};r?(this.data.splice(o,0,f),this.updateIndices(o)):this.data.push(f);var g=this;return s||this.updateThumbs(function(){var t=g.find("ul.thumbs");r?t.children(":eq("+o+")").before(h):t.append(h),g.onImageAdded&&g.onImageAdded(f,h)}),e[""+p]=f,l.attr("rel","history").attr("href","#"+p).removeAttr("name").click(function(t){g.clickHandler(t,this)}),this},removeImageByIndex:function(t){if(t<0||t>=this.data.length)return!1;var e=this.data[t];return!!e&&(this.removeImage(e),!0)},removeImageByHash:function(e){return t.galleriffic.removeImageByHash(e,this)},removeImage:function(t){var a=t.index;return this.data.splice(a,1),delete e[""+t.hash],this.updateThumbs(function(){var e=r.find("ul.thumbs").children(":eq("+a+")").remove();r.onImageRemoved&&r.onImageRemoved(t,e)}),this.updateIndices(a),this},updateIndices:function(t){for(i=t;i<this.data.length;i++)this.data[i].index=i;return this},initializeThumbs:function(){this.data=[];var e=this;return this.find("ul.thumbs > li").each(function(a){e.addImage(t(this),!0,!1)}),this},isPreloadComplete:!1,preloadInit:function(){if(0==this.preloadAhead)return this;this.preloadStartIndex=this.currentImage.index;var t=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,t)},preloadRelocate:function(t){return this.preloadStartIndex=t,this},preloadRecursive:function(t,e){if(t!=this.preloadStartIndex){var a=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,a)}var n=this,s=e-t;if(s<0&&(s=this.data.length-1-t+e),this.preloadAhead>=0&&s>this.preloadAhead)return setTimeout(function(){n.preloadRecursive(t,e)},500),this;var r=this.data[e];if(!r)return this;if(r.image)return this.preloadNext(t,e);var o=new Image;return o.onload=function(){r.image=this,n.preloadNext(t,e)},o.alt=r.title,o.src=r.slideUrl,this},preloadNext:function(t,e){var a=this.getNextIndex(e);if(a==t)this.isPreloadComplete=!0;else{var n=this;setTimeout(function(){n.preloadRecursive(t,a)},100)}return this},getNextIndex:function(t){var e=t+1;return e>=this.data.length&&(e=0),e},getPrevIndex:function(t){var e=t-1;return e<0&&(e=this.data.length-1),e},pause:function(){return this.isSlideshowRunning=!1,this.slideshowTimeout&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=void 0),this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("play").attr("title",this.playLinkText).attr("href","#play").html(this.playLinkText),this},play:function(){if(this.isSlideshowRunning=!0,this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("pause").attr("title",this.pauseLinkText).attr("href","#pause").html(this.pauseLinkText),!this.slideshowTimeout){var t=this;this.slideshowTimeout=setTimeout(function(){t.ssAdvance()},this.delay)}return this},toggleSlideshow:function(){return this.isSlideshowRunning?this.pause():this.play(),this},ssAdvance:function(){return this.isSlideshowRunning&&this.next(!0),this},next:function(t,e){return this.gotoIndex(this.getNextIndex(this.currentImage.index),t,e),this},previous:function(t,e){return this.gotoIndex(this.getPrevIndex(this.currentImage.index),t,e),this},nextPage:function(t,e){var a=this.getCurrentPage();if(a<this.getNumPages()-1){var n=a*this.numThumbs+this.numThumbs;this.gotoIndex(n,t,e)}return this},previousPage:function(t,e){var a=this.getCurrentPage();if(a>0){var n=a*this.numThumbs-this.numThumbs;this.gotoIndex(n,t,e)}return this},gotoIndex:function(e,a,n){a||this.pause(),e<0?e=0:e>=this.data.length&&(e=this.data.length-1);var s=this.data[e];return!n&&this.enableHistory?t.historyLoad(String(s.hash)):this.gotoImage(s),this},gotoImage:function(t){var e=t.index;return this.onSlideChange&&this.onSlideChange(this.currentImage.index,e),this.currentImage=t,this.preloadRelocate(e),this.refresh(),this},getDefaultTransitionDuration:function(t){return t?this.defaultTransitionDuration:this.defaultTransitionDuration/2},refresh:function(){var t=this.currentImage;if(!t)return this;var e=t.index;this.$controlsContainer&&this.$controlsContainer.find("div.nav-controls a.prev").attr("href","#"+this.data[this.getPrevIndex(e)].hash).end().find("div.nav-controls a.next").attr("href","#"+this.data[this.getNextIndex(e)].hash);var a=this.$imageContainer.find("span.current").addClass("previous").removeClass("current"),n=0;this.$captionContainer&&(n=this.$captionContainer.find("span.current").addClass("previous").removeClass("current"));var s=this.syncTransitions&&t.image,r=!0,o=this,h=function(){r=!1,a.remove(),n&&n.remove(),s||(t.image&&t.hash==o.data[o.currentImage.index].hash?o.buildImage(t,s):o.$loadingContainer&&o.$loadingContainer.show())};if(0==a.length?h():this.onTransitionOut?this.onTransitionOut(a,n,s,h):(a.fadeTo(this.getDefaultTransitionDuration(s),0,h),n&&n.fadeTo(this.getDefaultTransitionDuration(s),0)),s&&this.buildImage(t,s),!t.image){var l=new Image;l.onload=function(){t.image=this,r||t.hash!=o.data[o.currentImage.index].hash||o.buildImage(t,s)},l.alt=t.title,l.src=t.slideUrl}return this.relocatePreload=!0,this.syncThumbs()},buildImage:function(t,e){var a=this,n=this.getNextIndex(t.index);if(e)var s=this.$imageContainer.append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");else var s=this.$imageContainer.html('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");s.find("a").append(t.image).click(function(t){a.clickHandler(t,this)});var r=0;return this.$captionContainer&&(r=this.$captionContainer.append('<span class="image-caption current"></span>').find("span.current").css("opacity","0").append(t.caption)),this.$loadingContainer&&this.$loadingContainer.hide(),this.onTransitionIn?this.onTransitionIn(s,r,e):(s.fadeTo(this.getDefaultTransitionDuration(e),1),r&&r.fadeTo(this.getDefaultTransitionDuration(e),1)),this.isSlideshowRunning&&(this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.slideshowTimeout=setTimeout(function(){a.ssAdvance()},this.delay)),this},getCurrentPage:function(){return Math.floor(this.currentImage.index/this.numThumbs)},syncThumbs:function(){this.getCurrentPage()!=this.displayedPage&&this.updateThumbs();var t=this.find("ul.thumbs").children();return t.filter(".selected").removeClass("selected"),t.eq(this.currentImage.index).addClass("selected"),this},updateThumbs:function(t){var e=this,a=function(){t&&t(),e.rebuildThumbs(),e.onPageTransitionIn?e.onPageTransitionIn():e.show()};return this.onPageTransitionOut?this.onPageTransitionOut(a):(this.hide(),a()),this},rebuildThumbs:function(){var e=this.data.length>this.numThumbs;if(this.enableTopPager){var a=this.find("div.top");0==a.length?a=this.prepend('<div class="top pagination"></div>').find("div.top"):a.empty(),e&&this.buildPager(a)}if(this.enableBottomPager){var n=this.find("div.bottom");0==n.length?n=this.append('<div class="bottom pagination"></div>').find("div.bottom"):n.empty(),e&&this.buildPager(n)}var s=this.getCurrentPage(),r=s*this.numThumbs,o=r+this.numThumbs-1;o>=this.data.length&&(o=this.data.length-1);var h=this.find("ul.thumbs");return h.find("li").each(function(e){var a=t(this);e>=r&&e<=o?a.show():a.hide()}),this.displayedPage=s,h.removeClass("noscript"),this},getNumPages:function(){return Math.ceil(this.data.length/this.numThumbs)},buildPager:function(t){var e=this,a=this.getNumPages(),n=this.getCurrentPage(),s=n*this.numThumbs,r=this.maxPagesToShow-1,o=n-Math.floor((this.maxPagesToShow-1)/2)+1;if(o>0){var h=a-o;h<r&&(o-=r-h)}if(o<0&&(o=0),n>0){var l=s-this.numThumbs;t.append('<a rel="history" class="pprev" href="#'+this.data[l].hash+'" title="'+this.prevPageLinkText+'">'+this.prevPageLinkText+"</a>")}for(o>0&&(this.buildPageLink(t,0,a),o>1&&t.append('<span class="ellipsis">&hellip;</span>'),r--);r>0;)this.buildPageLink(t,o,a),r--,o++;if(o<a){var d=a-1;o<d&&t.append('<span class="ellipsis">&hellip;</span>'),this.buildPageLink(t,d,a)}var u=s+this.numThumbs;return u<this.data.length&&t.append('<a rel="history" class="pnext" href="#'+this.data[u].hash+'" title="'+this.nextPageLinkText+'">'+this.nextPageLinkText+"</a>"),t.find("a").click(function(t){e.clickHandler(t,this)}),this},buildPageLink:function(t,e,a){var n=e+1;if(e==this.getCurrentPage())t.append('<span class="current">'+n+"</span>");else if(e<a){var s=e*this.numThumbs;t.append('<a rel="history" href="#'+this.data[s].hash+'" title="'+n+'">'+n+"</a>")}return this}}),t.extend(this,n,s),this.enableHistory&&!t.historyInit&&(this.enableHistory=!1),this.imageContainerSel&&(this.$imageContainer=t(this.imageContainerSel)),this.captionContainerSel&&(this.$captionContainer=t(this.captionContainerSel)),this.loadingContainerSel&&(this.$loadingContainer=t(this.loadingContainerSel)),this.initializeThumbs(),this.maxPagesToShow<3&&(this.maxPagesToShow=3),this.displayedPage=-1,this.currentImage=this.data[0];var r=this;this.$loadingContainer&&this.$loadingContainer.hide(),this.controlsContainerSel&&(this.$controlsContainer=t(this.controlsContainerSel).empty(),this.renderSSControls&&(this.autoStart?this.$controlsContainer.append('<div class="ss-controls"><a href="#pause" class="pause" title="'+this.pauseLinkText+'"><span>'+this.pauseLinkText+"</span></a></div>"):this.$controlsContainer.append('<div class="ss-controls"><a href="#play" class="play" title="'+this.playLinkText+'"><span>'+this.playLinkText+"</span></a></div>"),this.$controlsContainer.find("div.ss-controls a").click(function(t){return r.toggleSlideshow(),t.preventDefault(),!1})),this.renderNavControls&&this.$controlsContainer.append('<div class="nav-controls"><a class="prev" rel="history" title="'+this.prevLinkText+'"><span>'+this.prevLinkText+'</span></a><a class="next" rel="history" title="'+this.nextLinkText+'"><span>'+this.nextLinkText+"</span></a></div>").find("div.nav-controls a").click(function(t){r.clickHandler(t,this)}));var o=!this.enableHistory||!location.hash;return this.enableHistory&&location.hash&&(e[t.galleriffic.normalizeHash(location.hash)]||(o=!0)),o&&this.gotoIndex(0,!1,!0),this.enableKeyboardNavigation&&t(document).keydown(function(t){switch(t.charCode?t.charCode:t.keyCode?t.keyCode:0){case 32:case 39:r.next();break;case 33:r.previousPage(),t.preventDefault();break;case 34:r.nextPage(),t.preventDefault();break;case 35:r.gotoIndex(r.data.length-1),t.preventDefault();break;case 36:r.gotoIndex(0),t.preventDefault();break;case 37:r.previous()}}),this.autoStart&&this.play(),setTimeout(function(){r.preloadInit()},1e3),this}}(jQuery),jQuery.extend({historyCurrentHash:void 0,historyCallback:void 0,historyIframeSrc:void 0,historyInit:function(t,e){jQuery.historyCallback=t,e&&(jQuery.historyIframeSrc=e);var a=location.hash.replace(/\?.*$/,"");if(jQuery.historyCurrentHash=a,jQuery.support.msie){""==jQuery.historyCurrentHash&&(jQuery.historyCurrentHash="#"),jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;"'+(jQuery.historyIframeSrc?' src="'+jQuery.historyIframeSrc+'"':"")+"></iframe>");var n=jQuery("#jQuery_history")[0].contentWindow.document;n.open(),n.close(),n.location.hash=a}else jQuery.support.safari&&(jQuery.historyBackStack=[],jQuery.historyBackStack.length=history.length,jQuery.historyForwardStack=[],jQuery.lastHistoryLength=history.length,jQuery.isFirst=!0);a&&jQuery.historyCallback(a.replace(/^#/,"")),setInterval(jQuery.historyCheck,100)},historyAddHistory:function(t){jQuery.historyBackStack.push(t),jQuery.historyForwardStack.length=0,this.isFirst=!0},historyCheck:function(){if(jQuery.support.msie){var t=jQuery("#jQuery_history")[0],e=(t.contentDocument||t.contentWindow.document).location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(location.hash=e,jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}else if(jQuery.support.safari){if(jQuery.lastHistoryLength==history.length&&jQuery.historyBackStack.length>jQuery.lastHistoryLength&&jQuery.historyBackStack.shift(),!jQuery.dontCheck){var a=history.length-jQuery.historyBackStack.length;if(jQuery.lastHistoryLength=history.length,a){if(jQuery.isFirst=!1,a<0)for(var n=0;n<Math.abs(a);n++)jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop());else for(var n=0;n<a;n++)jQuery.historyBackStack.push(jQuery.historyForwardStack.shift());var s=jQuery.historyBackStack[jQuery.historyBackStack.length-1];void 0!=s&&(jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,""),jQuery.historyCallback(s))}else if(void 0==jQuery.historyBackStack[jQuery.historyBackStack.length-1]&&!jQuery.isFirst){if(location.hash){var e=location.hash;jQuery.historyCallback(location.hash.replace(/^#/,""))}else{var e="";jQuery.historyCallback("")}jQuery.isFirst=!0}}}else{var e=location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}},historyLoad:function(t){var e;if(t=decodeURIComponent(t.replace(/\?.*$/,"")),jQuery.support.safari?e=t:(e="#"+t,location.hash=e),jQuery.historyCurrentHash=e,jQuery.support.msie){var a=jQuery("#jQuery_history")[0].contentWindow.document;a.open(),a.close(),a.location.hash=e,jQuery.lastHistoryLength=history.length,jQuery.historyCallback(t)}else if(jQuery.support.safari){jQuery.dontCheck=!0,this.historyAddHistory(t);var n=function(){jQuery.dontCheck=!1};window.setTimeout(n,200),jQuery.historyCallback(t),location.hash=e}else jQuery.historyCallback(t)}}),jQuery(document).ready(function(t){var e;t(".colorpicker").hide(),t(".colorpicker").each(function(){t(this).farbtastic(t(this).closest(".color-picker").find(".color"))}),t(".color").click(function(){t(this).closest(".color-picker").find(".colorpicker").fadeIn()}),t(document).mousedown(function(){t(".colorpicker").each(function(){"block"==t(this).css("display")&&t(this).fadeOut()})}),jQuery.fn.uploadMediaFile=function(t,a){var n=t.attr("id"),s=n.replace("_button",""),r=n.replace("_button","_preview");if(e)return void e.open();(e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON(),jQuery("#"+s).val(attachment.id),a&&jQuery("#"+r).attr("src",attachment.sizes.thumbnail.url),e=!1}),e.open()},jQuery(".image_upload_button").click(function(){jQuery.fn.uploadMediaFile(jQuery(this),!0)}),jQuery(".image_delete_button").click(function(){return jQuery(this).closest("td").find(".image_data_field").val(""),jQuery(this).closest("td").find(".image_preview").remove(),!1})}),function(t){var e={},a=0;t.galleriffic={version:"2.0.1",normalizeHash:function(t){return t.replace(/^.*#/,"").replace(/\?.*$/,"")},getImage:function(a){if(a)return e[a=t.galleriffic.normalizeHash(a)]},gotoImage:function(e){var a=t.galleriffic.getImage(e);return!!a&&(a.gallery.gotoImage(a),!0)},removeImageByHash:function(e,a){var n=t.galleriffic.getImage(e);if(!n)return!1;var s=n.gallery;return(!a||a==s)&&s.removeImageByIndex(n.index)}};var n={delay:3e3,numThumbs:20,preloadAhead:40,enableTopPager:!1,enableBottomPager:!0,maxPagesToShow:7,imageContainerSel:"",captionContainerSel:"",controlsContainerSel:"",loadingContainerSel:"",renderSSControls:!0,renderNavControls:!0,playLinkText:"Play",pauseLinkText:"Pause",prevLinkText:"Previous",nextLinkText:"Next",nextPageLinkText:"Next &rsaquo;",prevPageLinkText:"&lsaquo; Prev",enableHistory:!1,enableKeyboardNavigation:!0,autoStart:!1,syncTransitions:!1,defaultTransitionDuration:1e3,onSlideChange:void 0,onTransitionOut:void 0,onTransitionIn:void 0,onPageTransitionOut:void 0,onPageTransitionIn:void 0,onImageAdded:void 0,onImageRemoved:void 0};t.fn.galleriffic=function(s){t.extend(this,{version:t.galleriffic.version,isSlideshowRunning:!1,slideshowTimeout:void 0,clickHandler:function(e,a){if(this.pause(),!this.enableHistory){var n=t.galleriffic.normalizeHash(t(a).attr("href"));t.galleriffic.gotoImage(n),e.preventDefault()}},appendImage:function(t){return this.addImage(t,!1,!1),this},insertImage:function(t,e){return this.addImage(t,!1,!0,e),this},addImage:function(n,s,r,o){var h="string"==typeof n?t(n):n,l=h.find("a.thumb"),d=l.attr("href"),u=l.attr("title"),c=h.find(".caption").remove(),p=l.attr("name");a++,p&&!e[""+p]||(p=a),r||(o=this.data.length);var f={title:u,slideUrl:d,caption:c,hash:p,gallery:this,index:o};r?(this.data.splice(o,0,f),this.updateIndices(o)):this.data.push(f);var g=this;return s||this.updateThumbs(function(){var t=g.find("ul.thumbs");r?t.children(":eq("+o+")").before(h):t.append(h),g.onImageAdded&&g.onImageAdded(f,h)}),e[""+p]=f,l.attr("rel","history").attr("href","#"+p).removeAttr("name").click(function(t){g.clickHandler(t,this)}),this},removeImageByIndex:function(t){if(t<0||t>=this.data.length)return!1;var e=this.data[t];return!!e&&(this.removeImage(e),!0)},removeImageByHash:function(e){return t.galleriffic.removeImageByHash(e,this)},removeImage:function(t){var a=t.index;return this.data.splice(a,1),delete e[""+t.hash],this.updateThumbs(function(){var e=r.find("ul.thumbs").children(":eq("+a+")").remove();r.onImageRemoved&&r.onImageRemoved(t,e)}),this.updateIndices(a),this},updateIndices:function(t){for(i=t;i<this.data.length;i++)this.data[i].index=i;return this},initializeThumbs:function(){this.data=[];var e=this;return this.find("ul.thumbs > li").each(function(a){e.addImage(t(this),!0,!1)}),this},isPreloadComplete:!1,preloadInit:function(){if(0==this.preloadAhead)return this;this.preloadStartIndex=this.currentImage.index;var t=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,t)},preloadRelocate:function(t){return this.preloadStartIndex=t,this},preloadRecursive:function(t,e){if(t!=this.preloadStartIndex){var a=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,a)}var n=this,s=e-t;if(s<0&&(s=this.data.length-1-t+e),this.preloadAhead>=0&&s>this.preloadAhead)return setTimeout(function(){n.preloadRecursive(t,e)},500),this;var r=this.data[e];if(!r)return this;if(r.image)return this.preloadNext(t,e);var o=new Image;return o.onload=function(){r.image=this,n.preloadNext(t,e)},o.alt=r.title,o.src=r.slideUrl,this},preloadNext:function(t,e){var a=this.getNextIndex(e);if(a==t)this.isPreloadComplete=!0;else{var n=this;setTimeout(function(){n.preloadRecursive(t,a)},100)}return this},getNextIndex:function(t){var e=t+1;return e>=this.data.length&&(e=0),e},getPrevIndex:function(t){var e=t-1;return e<0&&(e=this.data.length-1),e},pause:function(){return this.isSlideshowRunning=!1,this.slideshowTimeout&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=void 0),this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("play").attr("title",this.playLinkText).attr("href","#play").html(this.playLinkText),this},play:function(){if(this.isSlideshowRunning=!0,this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("pause").attr("title",this.pauseLinkText).attr("href","#pause").html(this.pauseLinkText),!this.slideshowTimeout){var t=this;this.slideshowTimeout=setTimeout(function(){t.ssAdvance()},this.delay)}return this},toggleSlideshow:function(){return this.isSlideshowRunning?this.pause():this.play(),this},ssAdvance:function(){return this.isSlideshowRunning&&this.next(!0),this},next:function(t,e){return this.gotoIndex(this.getNextIndex(this.currentImage.index),t,e),this},previous:function(t,e){return this.gotoIndex(this.getPrevIndex(this.currentImage.index),t,e),this},nextPage:function(t,e){var a=this.getCurrentPage();if(a<this.getNumPages()-1){var n=a*this.numThumbs+this.numThumbs;this.gotoIndex(n,t,e)}return this},previousPage:function(t,e){var a=this.getCurrentPage();if(a>0){var n=a*this.numThumbs-this.numThumbs;this.gotoIndex(n,t,e)}return this},gotoIndex:function(e,a,n){a||this.pause(),e<0?e=0:e>=this.data.length&&(e=this.data.length-1);var s=this.data[e];return!n&&this.enableHistory?t.historyLoad(String(s.hash)):this.gotoImage(s),this},gotoImage:function(t){var e=t.index;return this.onSlideChange&&this.onSlideChange(this.currentImage.index,e),this.currentImage=t,this.preloadRelocate(e),this.refresh(),this},getDefaultTransitionDuration:function(t){return t?this.defaultTransitionDuration:this.defaultTransitionDuration/2},refresh:function(){var t=this.currentImage;if(!t)return this;var e=t.index;this.$controlsContainer&&this.$controlsContainer.find("div.nav-controls a.prev").attr("href","#"+this.data[this.getPrevIndex(e)].hash).end().find("div.nav-controls a.next").attr("href","#"+this.data[this.getNextIndex(e)].hash);var a=this.$imageContainer.find("span.current").addClass("previous").removeClass("current"),n=0;this.$captionContainer&&(n=this.$captionContainer.find("span.current").addClass("previous").removeClass("current"));var s=this.syncTransitions&&t.image,r=!0,o=this,h=function(){r=!1,a.remove(),n&&n.remove(),s||(t.image&&t.hash==o.data[o.currentImage.index].hash?o.buildImage(t,s):o.$loadingContainer&&o.$loadingContainer.show())};if(0==a.length?h():this.onTransitionOut?this.onTransitionOut(a,n,s,h):(a.fadeTo(this.getDefaultTransitionDuration(s),0,h),n&&n.fadeTo(this.getDefaultTransitionDuration(s),0)),s&&this.buildImage(t,s),!t.image){var l=new Image;l.onload=function(){t.image=this,r||t.hash!=o.data[o.currentImage.index].hash||o.buildImage(t,s)},l.alt=t.title,l.src=t.slideUrl}return this.relocatePreload=!0,this.syncThumbs()},buildImage:function(t,e){var a=this,n=this.getNextIndex(t.index);if(e)var s=this.$imageContainer.append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");else var s=this.$imageContainer.html('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");s.find("a").append(t.image).click(function(t){a.clickHandler(t,this)});var r=0;return this.$captionContainer&&(r=this.$captionContainer.append('<span class="image-caption current"></span>').find("span.current").css("opacity","0").append(t.caption)),this.$loadingContainer&&this.$loadingContainer.hide(),this.onTransitionIn?this.onTransitionIn(s,r,e):(s.fadeTo(this.getDefaultTransitionDuration(e),1),r&&r.fadeTo(this.getDefaultTransitionDuration(e),1)),this.isSlideshowRunning&&(this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.slideshowTimeout=setTimeout(function(){a.ssAdvance()},this.delay)),this},getCurrentPage:function(){return Math.floor(this.currentImage.index/this.numThumbs)},syncThumbs:function(){this.getCurrentPage()!=this.displayedPage&&this.updateThumbs();var t=this.find("ul.thumbs").children();return t.filter(".selected").removeClass("selected"),t.eq(this.currentImage.index).addClass("selected"),this},updateThumbs:function(t){var e=this,a=function(){t&&t(),e.rebuildThumbs(),e.onPageTransitionIn?e.onPageTransitionIn():e.show()};return this.onPageTransitionOut?this.onPageTransitionOut(a):(this.hide(),a()),this},rebuildThumbs:function(){var e=this.data.length>this.numThumbs;if(this.enableTopPager){var a=this.find("div.top");0==a.length?a=this.prepend('<div class="top pagination"></div>').find("div.top"):a.empty(),e&&this.buildPager(a)}if(this.enableBottomPager){var n=this.find("div.bottom");0==n.length?n=this.append('<div class="bottom pagination"></div>').find("div.bottom"):n.empty(),e&&this.buildPager(n)}var s=this.getCurrentPage(),r=s*this.numThumbs,o=r+this.numThumbs-1;o>=this.data.length&&(o=this.data.length-1);var h=this.find("ul.thumbs");return h.find("li").each(function(e){var a=t(this);e>=r&&e<=o?a.show():a.hide()}),this.displayedPage=s,h.removeClass("noscript"),this},getNumPages:function(){return Math.ceil(this.data.length/this.numThumbs)},buildPager:function(t){var e=this,a=this.getNumPages(),n=this.getCurrentPage(),s=n*this.numThumbs,r=this.maxPagesToShow-1,o=n-Math.floor((this.maxPagesToShow-1)/2)+1;if(o>0){var h=a-o;h<r&&(o-=r-h)}if(o<0&&(o=0),n>0){var l=s-this.numThumbs;t.append('<a rel="history" class="pprev" href="#'+this.data[l].hash+'" title="'+this.prevPageLinkText+'">'+this.prevPageLinkText+"</a>")}for(o>0&&(this.buildPageLink(t,0,a),o>1&&t.append('<span class="ellipsis">&hellip;</span>'),r--);r>0;)this.buildPageLink(t,o,a),r--,o++;if(o<a){var d=a-1;o<d&&t.append('<span class="ellipsis">&hellip;</span>'),this.buildPageLink(t,d,a)}var u=s+this.numThumbs;return u<this.data.length&&t.append('<a rel="history" class="pnext" href="#'+this.data[u].hash+'" title="'+this.nextPageLinkText+'">'+this.nextPageLinkText+"</a>"),t.find("a").click(function(t){e.clickHandler(t,this)}),this},buildPageLink:function(t,e,a){var n=e+1;if(e==this.getCurrentPage())t.append('<span class="current">'+n+"</span>");else if(e<a){var s=e*this.numThumbs;t.append('<a rel="history" href="#'+this.data[s].hash+'" title="'+n+'">'+n+"</a>")}return this}}),t.extend(this,n,s),this.enableHistory&&!t.historyInit&&(this.enableHistory=!1),this.imageContainerSel&&(this.$imageContainer=t(this.imageContainerSel)),this.captionContainerSel&&(this.$captionContainer=t(this.captionContainerSel)),this.loadingContainerSel&&(this.$loadingContainer=t(this.loadingContainerSel)),this.initializeThumbs(),this.maxPagesToShow<3&&(this.maxPagesToShow=3),this.displayedPage=-1,this.currentImage=this.data[0];var r=this;this.$loadingContainer&&this.$loadingContainer.hide(),this.controlsContainerSel&&(this.$controlsContainer=t(this.controlsContainerSel).empty(),this.renderSSControls&&(this.autoStart?this.$controlsContainer.append('<div class="ss-controls"><a href="#pause" class="pause" title="'+this.pauseLinkText+'"><span>'+this.pauseLinkText+"</span></a></div>"):this.$controlsContainer.append('<div class="ss-controls"><a href="#play" class="play" title="'+this.playLinkText+'"><span>'+this.playLinkText+"</span></a></div>"),this.$controlsContainer.find("div.ss-controls a").click(function(t){return r.toggleSlideshow(),t.preventDefault(),!1})),this.renderNavControls&&this.$controlsContainer.append('<div class="nav-controls"><a class="prev" rel="history" title="'+this.prevLinkText+'"><span>'+this.prevLinkText+'</span></a><a class="next" rel="history" title="'+this.nextLinkText+'"><span>'+this.nextLinkText+"</span></a></div>").find("div.nav-controls a").click(function(t){r.clickHandler(t,this)}));var o=!this.enableHistory||!location.hash;return this.enableHistory&&location.hash&&(e[t.galleriffic.normalizeHash(location.hash)]||(o=!0)),o&&this.gotoIndex(0,!1,!0),this.enableKeyboardNavigation&&t(document).keydown(function(t){switch(t.charCode?t.charCode:t.keyCode?t.keyCode:0){case 32:case 39:r.next();break;case 33:r.previousPage(),t.preventDefault();break;case 34:r.nextPage(),t.preventDefault();break;case 35:r.gotoIndex(r.data.length-1),t.preventDefault();break;case 36:r.gotoIndex(0),t.preventDefault();break;case 37:r.previous()}}),this.autoStart&&this.play(),setTimeout(function(){r.preloadInit()},1e3),this}}(jQuery),jQuery.extend({historyCurrentHash:void 0,historyCallback:void 0,historyIframeSrc:void 0,historyInit:function(t,e){jQuery.historyCallback=t,e&&(jQuery.historyIframeSrc=e);var a=location.hash.replace(/\?.*$/,"");if(jQuery.historyCurrentHash=a,jQuery.support.msie){""==jQuery.historyCurrentHash&&(jQuery.historyCurrentHash="#"),jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;"'+(jQuery.historyIframeSrc?' src="'+jQuery.historyIframeSrc+'"':"")+"></iframe>");var n=jQuery("#jQuery_history")[0].contentWindow.document;n.open(),n.close(),n.location.hash=a}else jQuery.support.safari&&(jQuery.historyBackStack=[],jQuery.historyBackStack.length=history.length,jQuery.historyForwardStack=[],jQuery.lastHistoryLength=history.length,jQuery.isFirst=!0);a&&jQuery.historyCallback(a.replace(/^#/,"")),setInterval(jQuery.historyCheck,100)},historyAddHistory:function(t){jQuery.historyBackStack.push(t),jQuery.historyForwardStack.length=0,this.isFirst=!0},historyCheck:function(){if(jQuery.support.msie){var t=jQuery("#jQuery_history")[0],e=(t.contentDocument||t.contentWindow.document).location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(location.hash=e,jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}else if(jQuery.support.safari){if(jQuery.lastHistoryLength==history.length&&jQuery.historyBackStack.length>jQuery.lastHistoryLength&&jQuery.historyBackStack.shift(),!jQuery.dontCheck){var a=history.length-jQuery.historyBackStack.length;if(jQuery.lastHistoryLength=history.length,a){if(jQuery.isFirst=!1,a<0)for(var n=0;n<Math.abs(a);n++)jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop());else for(var n=0;n<a;n++)jQuery.historyBackStack.push(jQuery.historyForwardStack.shift());var s=jQuery.historyBackStack[jQuery.historyBackStack.length-1];void 0!=s&&(jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,""),jQuery.historyCallback(s))}else if(void 0==jQuery.historyBackStack[jQuery.historyBackStack.length-1]&&!jQuery.isFirst){if(location.hash){var e=location.hash;jQuery.historyCallback(location.hash.replace(/^#/,""))}else{var e="";jQuery.historyCallback("")}jQuery.isFirst=!0}}}else{var e=location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}},historyLoad:function(t){var e;if(t=decodeURIComponent(t.replace(/\?.*$/,"")),jQuery.support.safari?e=t:(e="#"+t,location.hash=e),jQuery.historyCurrentHash=e,jQuery.support.msie){var a=jQuery("#jQuery_history")[0].contentWindow.document;a.open(),a.close(),a.location.hash=e,jQuery.lastHistoryLength=history.length,jQuery.historyCallback(t)}else if(jQuery.support.safari){jQuery.dontCheck=!0,this.historyAddHistory(t);var n=function(){jQuery.dontCheck=!1};window.setTimeout(n,200),jQuery.historyCallback(t),location.hash=e}else jQuery.historyCallback(t)}}),jQuery(document).ready(function(t){var e;t(".colorpicker").hide(),t(".colorpicker").each(function(){t(this).farbtastic(t(this).closest(".color-picker").find(".color"))}),t(".color").click(function(){t(this).closest(".color-picker").find(".colorpicker").fadeIn()}),t(document).mousedown(function(){t(".colorpicker").each(function(){"block"==t(this).css("display")&&t(this).fadeOut()})}),jQuery.fn.uploadMediaFile=function(t,a){var n=t.attr("id"),s=n.replace("_button",""),r=n.replace("_button","_preview");if(e)return void e.open();(e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON(),jQuery("#"+s).val(attachment.id),a&&jQuery("#"+r).attr("src",attachment.sizes.thumbnail.url),e=!1}),e.open()},jQuery(".image_upload_button").click(function(){jQuery.fn.uploadMediaFile(jQuery(this),!0)}),jQuery(".image_delete_button").click(function(){return jQuery(this).closest("td").find(".image_data_field").val(""),jQuery(this).closest("td").find(".image_preview").remove(),!1})}),function(t){var e={},a=0;t.galleriffic={version:"2.0.1",normalizeHash:function(t){return t.replace(/^.*#/,"").replace(/\?.*$/,"")},getImage:function(a){if(a)return e[a=t.galleriffic.normalizeHash(a)]},gotoImage:function(e){var a=t.galleriffic.getImage(e);return!!a&&(a.gallery.gotoImage(a),!0)},removeImageByHash:function(e,a){var n=t.galleriffic.getImage(e);if(!n)return!1;var s=n.gallery;return(!a||a==s)&&s.removeImageByIndex(n.index)}};var n={delay:3e3,numThumbs:20,preloadAhead:40,enableTopPager:!1,enableBottomPager:!0,maxPagesToShow:7,imageContainerSel:"",captionContainerSel:"",controlsContainerSel:"",loadingContainerSel:"",renderSSControls:!0,renderNavControls:!0,playLinkText:"Play",pauseLinkText:"Pause",prevLinkText:"Previous",nextLinkText:"Next",nextPageLinkText:"Next &rsaquo;",prevPageLinkText:"&lsaquo; Prev",enableHistory:!1,enableKeyboardNavigation:!0,autoStart:!1,syncTransitions:!1,defaultTransitionDuration:1e3,onSlideChange:void 0,onTransitionOut:void 0,onTransitionIn:void 0,onPageTransitionOut:void 0,onPageTransitionIn:void 0,onImageAdded:void 0,onImageRemoved:void 0};t.fn.galleriffic=function(s){t.extend(this,{version:t.galleriffic.version,isSlideshowRunning:!1,slideshowTimeout:void 0,clickHandler:function(e,a){if(this.pause(),!this.enableHistory){var n=t.galleriffic.normalizeHash(t(a).attr("href"));t.galleriffic.gotoImage(n),e.preventDefault()}},appendImage:function(t){return this.addImage(t,!1,!1),this},insertImage:function(t,e){return this.addImage(t,!1,!0,e),this},addImage:function(n,s,r,o){var h="string"==typeof n?t(n):n,l=h.find("a.thumb"),d=l.attr("href"),u=l.attr("title"),c=h.find(".caption").remove(),p=l.attr("name");a++,p&&!e[""+p]||(p=a),r||(o=this.data.length);var f={title:u,slideUrl:d,caption:c,hash:p,gallery:this,index:o};r?(this.data.splice(o,0,f),this.updateIndices(o)):this.data.push(f);var g=this;return s||this.updateThumbs(function(){var t=g.find("ul.thumbs");r?t.children(":eq("+o+")").before(h):t.append(h),g.onImageAdded&&g.onImageAdded(f,h)}),e[""+p]=f,l.attr("rel","history").attr("href","#"+p).removeAttr("name").click(function(t){g.clickHandler(t,this)}),this},removeImageByIndex:function(t){if(t<0||t>=this.data.length)return!1;var e=this.data[t];return!!e&&(this.removeImage(e),!0)},removeImageByHash:function(e){return t.galleriffic.removeImageByHash(e,this)},removeImage:function(t){var a=t.index;return this.data.splice(a,1),delete e[""+t.hash],this.updateThumbs(function(){var e=r.find("ul.thumbs").children(":eq("+a+")").remove();r.onImageRemoved&&r.onImageRemoved(t,e)}),this.updateIndices(a),this},updateIndices:function(t){for(i=t;i<this.data.length;i++)this.data[i].index=i;return this},initializeThumbs:function(){this.data=[];var e=this;return this.find("ul.thumbs > li").each(function(a){e.addImage(t(this),!0,!1)}),this},isPreloadComplete:!1,preloadInit:function(){if(0==this.preloadAhead)return this;this.preloadStartIndex=this.currentImage.index;var t=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,t)},preloadRelocate:function(t){return this.preloadStartIndex=t,this},preloadRecursive:function(t,e){if(t!=this.preloadStartIndex){var a=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,a)}var n=this,s=e-t;if(s<0&&(s=this.data.length-1-t+e),this.preloadAhead>=0&&s>this.preloadAhead)return setTimeout(function(){n.preloadRecursive(t,e)},500),this;var r=this.data[e];if(!r)return this;if(r.image)return this.preloadNext(t,e);var o=new Image;return o.onload=function(){r.image=this,n.preloadNext(t,e)},o.alt=r.title,o.src=r.slideUrl,this},preloadNext:function(t,e){var a=this.getNextIndex(e);if(a==t)this.isPreloadComplete=!0;else{var n=this;setTimeout(function(){n.preloadRecursive(t,a)},100)}return this},getNextIndex:function(t){var e=t+1;return e>=this.data.length&&(e=0),e},getPrevIndex:function(t){var e=t-1;return e<0&&(e=this.data.length-1),e},pause:function(){return this.isSlideshowRunning=!1,this.slideshowTimeout&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=void 0),this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("play").attr("title",this.playLinkText).attr("href","#play").html(this.playLinkText),this},play:function(){if(this.isSlideshowRunning=!0,this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("pause").attr("title",this.pauseLinkText).attr("href","#pause").html(this.pauseLinkText),!this.slideshowTimeout){var t=this;this.slideshowTimeout=setTimeout(function(){t.ssAdvance()},this.delay)}return this},toggleSlideshow:function(){return this.isSlideshowRunning?this.pause():this.play(),this},ssAdvance:function(){return this.isSlideshowRunning&&this.next(!0),this},next:function(t,e){return this.gotoIndex(this.getNextIndex(this.currentImage.index),t,e),this},previous:function(t,e){return this.gotoIndex(this.getPrevIndex(this.currentImage.index),t,e),this},nextPage:function(t,e){var a=this.getCurrentPage();if(a<this.getNumPages()-1){var n=a*this.numThumbs+this.numThumbs;this.gotoIndex(n,t,e)}return this},previousPage:function(t,e){var a=this.getCurrentPage();if(a>0){var n=a*this.numThumbs-this.numThumbs;this.gotoIndex(n,t,e)}return this},gotoIndex:function(e,a,n){a||this.pause(),e<0?e=0:e>=this.data.length&&(e=this.data.length-1);var s=this.data[e];return!n&&this.enableHistory?t.historyLoad(String(s.hash)):this.gotoImage(s),this},gotoImage:function(t){var e=t.index;return this.onSlideChange&&this.onSlideChange(this.currentImage.index,e),this.currentImage=t,this.preloadRelocate(e),this.refresh(),this},getDefaultTransitionDuration:function(t){return t?this.defaultTransitionDuration:this.defaultTransitionDuration/2},refresh:function(){var t=this.currentImage;if(!t)return this;var e=t.index;this.$controlsContainer&&this.$controlsContainer.find("div.nav-controls a.prev").attr("href","#"+this.data[this.getPrevIndex(e)].hash).end().find("div.nav-controls a.next").attr("href","#"+this.data[this.getNextIndex(e)].hash);var a=this.$imageContainer.find("span.current").addClass("previous").removeClass("current"),n=0;this.$captionContainer&&(n=this.$captionContainer.find("span.current").addClass("previous").removeClass("current"));var s=this.syncTransitions&&t.image,r=!0,o=this,h=function(){r=!1,a.remove(),n&&n.remove(),s||(t.image&&t.hash==o.data[o.currentImage.index].hash?o.buildImage(t,s):o.$loadingContainer&&o.$loadingContainer.show())};if(0==a.length?h():this.onTransitionOut?this.onTransitionOut(a,n,s,h):(a.fadeTo(this.getDefaultTransitionDuration(s),0,h),n&&n.fadeTo(this.getDefaultTransitionDuration(s),0)),s&&this.buildImage(t,s),!t.image){var l=new Image;l.onload=function(){t.image=this,r||t.hash!=o.data[o.currentImage.index].hash||o.buildImage(t,s)},l.alt=t.title,l.src=t.slideUrl}return this.relocatePreload=!0,this.syncThumbs()},buildImage:function(t,e){var a=this,n=this.getNextIndex(t.index);if(e)var s=this.$imageContainer.append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");else var s=this.$imageContainer.html('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");s.find("a").append(t.image).click(function(t){a.clickHandler(t,this)});var r=0;return this.$captionContainer&&(r=this.$captionContainer.append('<span class="image-caption current"></span>').find("span.current").css("opacity","0").append(t.caption)),this.$loadingContainer&&this.$loadingContainer.hide(),this.onTransitionIn?this.onTransitionIn(s,r,e):(s.fadeTo(this.getDefaultTransitionDuration(e),1),r&&r.fadeTo(this.getDefaultTransitionDuration(e),1)),this.isSlideshowRunning&&(this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.slideshowTimeout=setTimeout(function(){a.ssAdvance()},this.delay)),this},getCurrentPage:function(){return Math.floor(this.currentImage.index/this.numThumbs)},syncThumbs:function(){this.getCurrentPage()!=this.displayedPage&&this.updateThumbs();var t=this.find("ul.thumbs").children();return t.filter(".selected").removeClass("selected"),t.eq(this.currentImage.index).addClass("selected"),this},updateThumbs:function(t){var e=this,a=function(){t&&t(),e.rebuildThumbs(),e.onPageTransitionIn?e.onPageTransitionIn():e.show()};return this.onPageTransitionOut?this.onPageTransitionOut(a):(this.hide(),a()),this},rebuildThumbs:function(){var e=this.data.length>this.numThumbs;if(this.enableTopPager){var a=this.find("div.top");0==a.length?a=this.prepend('<div class="top pagination"></div>').find("div.top"):a.empty(),e&&this.buildPager(a)}if(this.enableBottomPager){var n=this.find("div.bottom");0==n.length?n=this.append('<div class="bottom pagination"></div>').find("div.bottom"):n.empty(),e&&this.buildPager(n)}var s=this.getCurrentPage(),r=s*this.numThumbs,o=r+this.numThumbs-1;o>=this.data.length&&(o=this.data.length-1);var h=this.find("ul.thumbs");return h.find("li").each(function(e){var a=t(this);e>=r&&e<=o?a.show():a.hide()}),this.displayedPage=s,h.removeClass("noscript"),this},getNumPages:function(){return Math.ceil(this.data.length/this.numThumbs)},buildPager:function(t){var e=this,a=this.getNumPages(),n=this.getCurrentPage(),s=n*this.numThumbs,r=this.maxPagesToShow-1,o=n-Math.floor((this.maxPagesToShow-1)/2)+1;if(o>0){var h=a-o;h<r&&(o-=r-h)}if(o<0&&(o=0),n>0){var l=s-this.numThumbs;t.append('<a rel="history" class="pprev" href="#'+this.data[l].hash+'" title="'+this.prevPageLinkText+'">'+this.prevPageLinkText+"</a>")}for(o>0&&(this.buildPageLink(t,0,a),o>1&&t.append('<span class="ellipsis">&hellip;</span>'),r--);r>0;)this.buildPageLink(t,o,a),r--,o++;if(o<a){var d=a-1;o<d&&t.append('<span class="ellipsis">&hellip;</span>'),this.buildPageLink(t,d,a)}var u=s+this.numThumbs;return u<this.data.length&&t.append('<a rel="history" class="pnext" href="#'+this.data[u].hash+'" title="'+this.nextPageLinkText+'">'+this.nextPageLinkText+"</a>"),t.find("a").click(function(t){e.clickHandler(t,this)}),this},buildPageLink:function(t,e,a){var n=e+1;if(e==this.getCurrentPage())t.append('<span class="current">'+n+"</span>");else if(e<a){var s=e*this.numThumbs;t.append('<a rel="history" href="#'+this.data[s].hash+'" title="'+n+'">'+n+"</a>")}return this}}),t.extend(this,n,s),this.enableHistory&&!t.historyInit&&(this.enableHistory=!1),this.imageContainerSel&&(this.$imageContainer=t(this.imageContainerSel)),this.captionContainerSel&&(this.$captionContainer=t(this.captionContainerSel)),this.loadingContainerSel&&(this.$loadingContainer=t(this.loadingContainerSel)),this.initializeThumbs(),this.maxPagesToShow<3&&(this.maxPagesToShow=3),this.displayedPage=-1,this.currentImage=this.data[0];var r=this;this.$loadingContainer&&this.$loadingContainer.hide(),this.controlsContainerSel&&(this.$controlsContainer=t(this.controlsContainerSel).empty(),this.renderSSControls&&(this.autoStart?this.$controlsContainer.append('<div class="ss-controls"><a href="#pause" class="pause" title="'+this.pauseLinkText+'"><span>'+this.pauseLinkText+"</span></a></div>"):this.$controlsContainer.append('<div class="ss-controls"><a href="#play" class="play" title="'+this.playLinkText+'"><span>'+this.playLinkText+"</span></a></div>"),this.$controlsContainer.find("div.ss-controls a").click(function(t){return r.toggleSlideshow(),t.preventDefault(),!1})),this.renderNavControls&&this.$controlsContainer.append('<div class="nav-controls"><a class="prev" rel="history" title="'+this.prevLinkText+'"><span>'+this.prevLinkText+'</span></a><a class="next" rel="history" title="'+this.nextLinkText+'"><span>'+this.nextLinkText+"</span></a></div>").find("div.nav-controls a").click(function(t){r.clickHandler(t,this)}));var o=!this.enableHistory||!location.hash;return this.enableHistory&&location.hash&&(e[t.galleriffic.normalizeHash(location.hash)]||(o=!0)),o&&this.gotoIndex(0,!1,!0),this.enableKeyboardNavigation&&t(document).keydown(function(t){switch(t.charCode?t.charCode:t.keyCode?t.keyCode:0){case 32:case 39:r.next();break;case 33:r.previousPage(),t.preventDefault();break;case 34:r.nextPage(),t.preventDefault();break;case 35:r.gotoIndex(r.data.length-1),t.preventDefault();break;case 36:r.gotoIndex(0),t.preventDefault();break;case 37:r.previous()}}),this.autoStart&&this.play(),setTimeout(function(){r.preloadInit()},1e3),this}}(jQuery),jQuery.extend({historyCurrentHash:void 0,historyCallback:void 0,historyIframeSrc:void 0,historyInit:function(t,e){jQuery.historyCallback=t,e&&(jQuery.historyIframeSrc=e);var a=location.hash.replace(/\?.*$/,"");if(jQuery.historyCurrentHash=a,jQuery.support.msie){""==jQuery.historyCurrentHash&&(jQuery.historyCurrentHash="#"),jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;"'+(jQuery.historyIframeSrc?' src="'+jQuery.historyIframeSrc+'"':"")+"></iframe>");var n=jQuery("#jQuery_history")[0].contentWindow.document;n.open(),n.close(),n.location.hash=a}else jQuery.support.safari&&(jQuery.historyBackStack=[],jQuery.historyBackStack.length=history.length,jQuery.historyForwardStack=[],jQuery.lastHistoryLength=history.length,jQuery.isFirst=!0);a&&jQuery.historyCallback(a.replace(/^#/,"")),setInterval(jQuery.historyCheck,100)},historyAddHistory:function(t){jQuery.historyBackStack.push(t),jQuery.historyForwardStack.length=0,this.isFirst=!0},historyCheck:function(){if(jQuery.support.msie){var t=jQuery("#jQuery_history")[0],e=(t.contentDocument||t.contentWindow.document).location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(location.hash=e,jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}else if(jQuery.support.safari){if(jQuery.lastHistoryLength==history.length&&jQuery.historyBackStack.length>jQuery.lastHistoryLength&&jQuery.historyBackStack.shift(),!jQuery.dontCheck){var a=history.length-jQuery.historyBackStack.length;if(jQuery.lastHistoryLength=history.length,a){if(jQuery.isFirst=!1,a<0)for(var n=0;n<Math.abs(a);n++)jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop());else for(var n=0;n<a;n++)jQuery.historyBackStack.push(jQuery.historyForwardStack.shift());var s=jQuery.historyBackStack[jQuery.historyBackStack.length-1];void 0!=s&&(jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,""),jQuery.historyCallback(s))}else if(void 0==jQuery.historyBackStack[jQuery.historyBackStack.length-1]&&!jQuery.isFirst){if(location.hash){var e=location.hash;jQuery.historyCallback(location.hash.replace(/^#/,""))}else{var e="";jQuery.historyCallback("")}jQuery.isFirst=!0}}}else{var e=location.hash.replace(/\?.*$/,"");e!=jQuery.historyCurrentHash&&(jQuery.historyCurrentHash=e,jQuery.historyCallback(e.replace(/^#/,"")))}},historyLoad:function(t){var e;if(t=decodeURIComponent(t.replace(/\?.*$/,"")),jQuery.support.safari?e=t:(e="#"+t,location.hash=e),jQuery.historyCurrentHash=e,jQuery.support.msie){var a=jQuery("#jQuery_history")[0].contentWindow.document;a.open(),a.close(),a.location.hash=e,jQuery.lastHistoryLength=history.length,jQuery.historyCallback(t)}else if(jQuery.support.safari){jQuery.dontCheck=!0,this.historyAddHistory(t);var n=function(){jQuery.dontCheck=!1};window.setTimeout(n,200),jQuery.historyCallback(t),location.hash=e}else jQuery.historyCallback(t)}}),jQuery(document).ready(function(t){var e;t(".colorpicker").hide(),t(".colorpicker").each(function(){t(this).farbtastic(t(this).closest(".color-picker").find(".color"))}),t(".color").click(function(){t(this).closest(".color-picker").find(".colorpicker").fadeIn()}),t(document).mousedown(function(){t(".colorpicker").each(function(){"block"==t(this).css("display")&&t(this).fadeOut()})}),jQuery.fn.uploadMediaFile=function(t,a){var n=t.attr("id"),s=n.replace("_button",""),r=n.replace("_button","_preview");if(e)return void e.open();(e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON(),jQuery("#"+s).val(attachment.id),a&&jQuery("#"+r).attr("src",attachment.sizes.thumbnail.url),e=!1}),e.open()},jQuery(".image_upload_button").click(function(){jQuery.fn.uploadMediaFile(jQuery(this),!0)}),jQuery(".image_delete_button").click(function(){return jQuery(this).closest("td").find(".image_data_field").val(""),jQuery(this).closest("td").find(".image_preview").remove(),!1})});