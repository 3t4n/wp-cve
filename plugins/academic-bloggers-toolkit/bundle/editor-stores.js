!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=138)}([,,function(e,t){!function(){e.exports=this.regeneratorRuntime}()},function(e,t,r){var n=r(47),o=r(48),i=r(49);e.exports=function(e){return n(e)||o(e)||i()}},,function(e,t){!function(){e.exports=this.wp.data}()},function(e,t,r){var n=r(39),o=r(40),i=r(41);e.exports=function(e,t){return n(e)||o(e,t)||i()}},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){function r(e,t,r,n,o,i,c){try{var a=e[i](c),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var c=e.apply(t,n);function a(e){r(c,o,i,a,u,"next",e)}function u(e){r(c,o,i,a,u,"throw",e)}a(void 0)}))}}},function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"a",(function(){return p}));var n=["accessed","container","event-date","issued","original-date","submitted"];function o(e){return n.includes(e)}var i=["chapter-number","collection-number","edition","issue","number-of-pages","number-of-volumes","volume"];function c(e){return i.includes(e)}var a=["author","collection-editor","composer","container-author","director","editor","editorial-director","illustrator","interviewer","original-author","recipient","reviewed-author","translator"];function u(e){return a.includes(e)}var s=["DOI","ISBN","ISSN","PMCID","PMID","URL","abstract","annote","archive","archive-place","archive_location","authority","call-number","citation-label","citation-number","collection-title","container-title","container-title-short","dimensions","event","event-place","first-reference-note-number","genre","journalAbbreviation","jurisdiction","keyword","language","locator","medium","note","number","original-publisher","original-publisher-place","original-title","page","page-first","publisher","publisher-place","references","reviewed-title","scale","section","shortTitle","source","status","title","title-short","version","year-suffix"];function l(e){return s.includes(e)}var f=["id","type"].concat(n,i,a,s);function d(e){return f.includes(e)}var p="​"},function(e,t){!function(){e.exports=this.lodash}()},,function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return g}));var n,o,i=r(3),c=r.n(i),a=r(14),u=r.n(a),s=r(17),l=r.n(s),f=r(31),d=r.n(f),p=r(21),b=r.n(p),v=r(9),y=r(22),h=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},m=n=function(){function e(){u()(this,e)}return l()(e,null,[{key:"create",value:function(e){var t=document.createElement("span");return t.className=n.className,t.id=b()(),t.dataset.items=JSON.stringify(e),t.contentEditable="false",t.outerHTML}},{key:"getItems",value:function(e){return JSON.parse(e.dataset.items||e.dataset.reflist||"[]")}}]),e}();m.className="abt-citation",m.legacyClassNames=[n.className,"abt_cite"],m.selector=y.a.apply(void 0,c()(n.legacyClassNames.map((function(e){return{classNames:[e],attributes:{id:!0}}})))),m=n=h([function(e){return}],m);var g=o=function(){function e(){u()(this,e)}return l()(e,null,[{key:"create",value:function(e){var t=document.createElement("span");return t.className=o.className,t.id=b()(),t.dataset.note=e,t.contentEditable="false",t.outerHTML}},{key:"createMarker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=["*","†","‡","§","¶","#"];return e>=0?o.createMarker(e-r.length,t+r[e%r.length]):"<sup>".concat(v.a).concat(t).concat(v.a,"</sup>")}}]),e}();g.className="abt-footnote",g.legacyClassNames=[o.className],g.selector=y.a.apply(void 0,c()(o.legacyClassNames.map((function(e){return{classNames:[e],attributes:{id:!0}}})))),g=o=h([function(e){return}],g)},,function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},,,function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t,r){var n=r(50);e.exports=function(e,t){if(null==e)return{};var r,o,i=n(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(o=0;o<c.length;o++)r=c[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return u}));var n=r(3),o=r.n(n),i=r(10);function c(e){return void 0===e?e:JSON.parse(JSON.stringify(e))}function a(e,t,r){var n=!0,o=!1,c=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value,l=Object(i.get)(e,s);if(l)return l}}catch(e){o=!0,c=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw c}}return r}function u(e,t,r){var n=o()(e),i=n.splice(t,1);return[].concat(o()(n.slice(0,r)),o()(i),o()(n.slice(r)))}},function(e,t,r){var n=r(51),o=r(52);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||n)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var a=0;a<16;++a)t[i+a]=c[a];return t||o(c)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return c}));var n=r(6),o=r.n(n);function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map((function(e){var t=e.element,r=e.id,n=e.classNames,i=void 0===n?[]:n,c=e.attributes,a=void 0===c?{}:c,u="";t&&(u+="".concat(t)),r&&(u+="#".concat(r));var s=!0,l=!1,f=void 0;try{for(var d,p=i[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var b=d.value;u+=".".concat(b)}}catch(e){l=!0,f=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw f}}for(var v=0,y=Object.entries(a);v<y.length;v++){var h=o()(y[v],2),m=h[0],g=h[1];u+="boolean"==typeof g?g?"[".concat(m,"]"):"":"[".concat(m,'="').concat(g,'"]')}return u})).join()}function c(e){var t=i({element:"script",id:e,attributes:{type:"application/json"}}),r=document.querySelector(t);if(!r)throw new Error('Unable to retrieve JSON data using ID "'.concat(e,'"'));return JSON.parse(r.innerHTML)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return p}));var n=r(3),o=r.n(n),i=r(7),c=r.n(i),a=r(18),u=r(5);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var l=["core/freeform","core/html"];function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.createElement("div");if(e){var r=Object(u.select)("core/editor").getEditorBlocks().filter((function(e){return!l.includes(e.name)&&e.isValid}));t.innerHTML=Object(a.serialize)(r)}else t.innerHTML=Object(u.select)("core/editor").getEditedPostContent();return t}function d(e){var t=e.entryspacing,r=e.hangingindent,n=e.maxoffset,o=e.linespacing,i=e.secondFieldAlign;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(r,!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t?{"data-entryspacing":"".concat(t)}:void 0,{},r?{"data-hangingindent":"".concat(r)}:void 0,{},n?{"data-maxoffset":"".concat(n)}:void 0,{},o?{"data-linespacing":"".concat(o)}:void 0,{},i?{"data-second-field-align":i}:void 0)}function p(e){if("string"==typeof e){var t=document.createElement("div");t.innerHTML=e;var r=t.querySelector(".csl-entry");if(!r)throw new Error('Outer HTML of item must be a div with className "csl-entry"');e=r}var n=e,i=[],c=!0,a=!1,u=void 0;try{for(var s,l=e.children[Symbol.iterator]();!(c=(s=l.next()).done);c=!0){var f=s.value;if(f.classList.contains("csl-indent"))break;f.classList.contains("csl-left-margin")?i=[].concat(o()(i),[f]):f.classList.contains("csl-right-inline")&&(f.outerHTML=f.innerHTML)}}catch(e){a=!0,u=e}finally{try{c||null==l.return||l.return()}finally{if(a)throw u}}return i.forEach((function(e){return n.removeChild(e)})),n.innerHTML.trim()}},,,,function(e,t){!function(){e.exports=this.wp.url}()},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},,,function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?e.exports=n=function(e){return r(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},n(t)}e.exports=n},,,function(e,t,r){var n=r(31),o=r(64);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?o(e):t}},function(e,t,r){var n=r(42);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},,,,function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var c,a=e[Symbol.iterator]();!(n=(c=a.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},,function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return _}));var n=r(2),o=r.n(n),i=r(8),c=r.n(i),a=r(34),u=r.n(a),s=r(28),l=r.n(s),f=r(35),d=r.n(f),p=r(3),b=r.n(p),v=r(7),y=r.n(v),h=r(14),m=r.n(h),g=r(17),O=r.n(g),w=r(10);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(r,!0).forEach((function(t){y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;m()(this,e),this.PREFIX="ABT_CACHE_",this.VERSION="v1.0",this.KEY="".concat(this.PREFIX).concat(this.VERSION),this._cache=this.storageIsAvailable()?top.localStorage:this.createFallbackStorage();this.ITEM_KEY=t,this.EXPIRES=Date.now()+864e5*n;var o=this.KEY,i=this.PREFIX;Object.keys(this._cache).filter((function(e){return e.startsWith(i)&&e!==o})).forEach((function(e){return r._cache.removeItem(e)}))}return O()(e,[{key:"getItem",value:function(e){return this.cache[e]||null}},{key:"removeItem",value:function(e){this.cache=Object(w.omit)(this.cache,e)}},{key:"setItem",value:function(e,t){this.cache=S({},this.cache,y()({},e,t))}},{key:"storageIsAvailable",value:function(){try{var e=window.localStorage;return e.setItem("__storage_test__","test"),e.removeItem("__storage_test__"),!0}catch(e){return!1}}},{key:"createFallbackStorage",value:function(){return{_value:new Map,get length(){return this._value.size},clear:function(){this._value.clear()},getItem:function(e){return this._value.get(e)||null},key:function(e){return b()(this._value.keys())[e]||null},removeItem:function(e){this._value.delete(e)},setItem:function(e,t){this._value.set(e,t)}}}},{key:"cache",get:function(){var e=this.EXPIRES,t=this.ITEM_KEY,r=this.KEY,n=JSON.parse(this._cache.getItem(r)||"{}"),o=n[t];return(!o||o.expires<Date.now())&&(o={expires:e,data:{}},this._cache.setItem(r,JSON.stringify(S({},n,y()({},t,S({},o)))))),S({},o.data)},set:function(e){var t=this.ITEM_KEY,r=this.KEY,n=JSON.parse(this._cache.getItem(r)||"{}"),o=n[t];this._cache.setItem(r,JSON.stringify(S({},n,y()({},t,S({},o,{data:e})))))}}]),e}(),j=new(function(e){function t(){var e;return m()(this,t),(e=u()(this,l()(t).apply(this,arguments))).parser=new DOMParser,e}var r;return d()(t,e),O()(t,[{key:"fetchItem",value:(r=c()(o.a.mark((function e(t){var r,n,i,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.parser.parseFromString(t,"application/xml"),n=r.querySelector("style"),!r.querySelector("parsererror")){e.next=4;break}throw new Error("Invalid style XML");case 4:if(n){e.next=6;break}throw new Error("CSL style is not valid");case 6:return i=n.getAttribute("default-locale")||"en-US",e.next=9,fetch("https://raw.githubusercontent.com/citation-style-language/locales/master/locales-".concat(i,".xml"));case 9:if((c=e.sent).ok){e.next=12;break}throw new Error(c.statusText);case 12:return e.next=14,c.text();case 14:return a=e.sent,this.setItem(i,a),e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(E))("locales"),_=new(function(e){function t(){return m()(this,t),u()(this,l()(t).apply(this,arguments))}var r;return d()(t,e),O()(t,[{key:"fetchItem",value:(r=c()(o.a.mark((function e(t){var r,n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=this.getItem(t))){e.next=3;break}return e.abrupt("return",r);case 3:return e.next=5,fetch("https://raw.githubusercontent.com/citation-style-language/styles/master/".concat(t,".csl"));case 5:if((n=e.sent).ok){e.next=8;break}throw new Error(n.statusText);case 8:return e.next=10,n.text();case 10:return i=e.sent,this.setItem(t,i),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(E))("styles")},,,function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(2),o=r.n(n),i=r(7),c=r.n(i),a=r(8),u=r.n(a),s=r(27);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(r,!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){return p.apply(this,arguments)}function p(){return(p=u()(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(ajaxurl,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:Object(s.addQueryArgs)(void 0,f({_wpnonce:_abt_nonce,action:t},r)).slice(1),credentials:"same-origin"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},,,,,,,,,,,function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},,,,,,,,function(e,t){!function(){e.exports=this.CSL}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(6),o=r.n(n),i=r(14),c=r.n(i),a=r(17),u=r.n(a),s=r(5),l=r(72),f=r(10),d=r(44),p=function(){function e(t){c()(this,e),this.sys={retrieveItem:function(e){var t=Object(s.select)("abt/data").getItemById(e);if(!t)throw new Error('CSL Data could not be found for item ID "'.concat(e,'"'));return t},retrieveLocale:function(e){var t=d.a.getItem(e);if(!t)throw new Error('Requested locale "'.concat(e,'" was not prefetched'));return t}};var r=e.instance;if(r)return r.style!==t&&(r.style=t,r.engine=new l.Engine(r.sys,r.style),r.engine.opt.development_extensions.wrap_url_and_doi=!0),r;e.instance=this,this.style=t,this.engine=new l.Engine(this.sys,this.style),this.engine.opt.development_extensions.wrap_url_and_doi=!0}return u()(e,[{key:"parseCitations",value:function(e){var t=this;return this.engine.rebuildProcessorState(e).map((function(e){var r=o()(e,3),n=r[0];return{id:n,html:r[2],sortedItems:JSON.stringify(t.registry.citationById[n].sortedItems.map((function(e){return o()(e,1)[0].id})))}}))}},{key:"bibliography",get:function(){var e;try{if(!(e=this.engine.makeBibliography()))return{items:[],meta:{}}}catch(e){return{items:[],meta:{}}}var t=e,r=o()(t,2),n=r[0],i=r[1],c=n.entryspacing,a=n.hangingindent,u=n.linespacing,s=n.maxoffset,l=n["second-field-align"];return{meta:{entryspacing:c,hangingindent:a,linespacing:u,maxoffset:s,secondFieldAlign:l||void 0},items:Object(f.zipWith)(Object(f.flatten)(n.entry_ids),i,(function(e,t){return{id:e,content:t}}))}}},{key:"registry",get:function(){return this.engine.registry.citationreg}}]),e}();p.instance=null,t.a=p},,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";e.exports=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}},,,,,,,,,,function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"addReference",(function(){return X})),r.d(n,"addReferences",(function(){return z})),r.d(n,"removeFootnote",(function(){return G})),r.d(n,"removeFootnotes",(function(){return W})),r.d(n,"removeReference",(function(){return Q})),r.d(n,"removeReferences",(function(){return Z})),r.d(n,"updateReference",(function(){return $})),r.d(n,"removeAllCitations",(function(){return ee})),r.d(n,"parseCitations",(function(){return te})),r.d(n,"parseFootnotes",(function(){return re})),r.d(n,"setStyle",(function(){return ne}));var o={};r.r(o),r.d(o,"getCitationStyles",(function(){return he}));var i={};r.r(i),r.d(i,"getCitationStyles",(function(){return Se})),r.d(i,"getStyle",(function(){return Ee})),r.d(i,"getCitationsByIndex",(function(){return je})),r.d(i,"getCitedItems",(function(){return _e})),r.d(i,"getFootnotes",(function(){return ke})),r.d(i,"getItems",(function(){return Ie})),r.d(i,"getSortedItems",(function(){return Te})),r.d(i,"getItemById",(function(){return Pe})),r.d(i,"getSerializedState",(function(){return Ce})),r.d(i,"getUncitedItems",(function(){return De}));var c={};r.r(c),r.d(c,"clearSelectedItems",(function(){return Re})),r.d(c,"setIdentifierKind",(function(){return Ae})),r.d(c,"setSidebarSortMode",(function(){return Me})),r.d(c,"setSidebarSortOrder",(function(){return Le})),r.d(c,"toggleItemSelected",(function(){return He}));var a={};r.r(a),r.d(a,"getIdentifierKind",(function(){return qe})),r.d(a,"getSelectedItems",(function(){return Ke})),r.d(a,"getSidebarSortMode",(function(){return Ve})),r.d(a,"getSidebarSortOrder",(function(){return Ue}));var u=r(3),s=r.n(u),l=r(5),f=r(7),d=r.n(f),p=r(2),b=r.n(p),v=r(18),y=r(9),h=r(22),m=r(23),g=r(12),O=r(110),w=r(8),x=r.n(w),S=r(53),E=r(44);var j,_,k,I,T={FETCH_CITATION_STYLES:(I=x()(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.a)("get_style_json");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)}))),function(){return I.apply(this,arguments)}),FETCH_LOCALE:(k=x()(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.style,e.abrupt("return",E.a.fetchItem(r));case 2:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)}),FETCH_STYLE:(_=x()(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.abrupt("return",E.b.fetchItem(r));case 2:case"end":return e.stop()}}),e)}))),function(e){return _.apply(this,arguments)}),SAVE_STATE:(j=x()(b.a.mark((function e(t){var r,n,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.state,e.next=3,Object(S.a)("update_abt_state",{post_id:r,state:n});case 3:return o=e.sent,e.abrupt("return",o.json());case 5:case"end":return e.stop()}}),e)}))),function(e){return j.apply(this,arguments)})};function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(r,!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=b.a.mark(X),N=b.a.mark(z),R=b.a.mark(G),A=b.a.mark(W),M=b.a.mark(Q),L=b.a.mark(Z),H=b.a.mark($),B=b.a.mark(ee),F=b.a.mark(te),J=b.a.mark(re),Y=b.a.mark(ne),q=b.a.mark(oe),K=b.a.mark(ie),V=b.a.mark(ce),U=b.a.mark(ae);function X(e){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z([e]);case 2:case"end":return t.stop()}}),D)}function z(e){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,{type:"ADD_REFERENCES",data:e};case 2:return t.next=4,oe();case 4:case"end":return t.stop()}}),N)}function G(e){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W([e]);case 2:case"end":return t.stop()}}),R)}function W(e){var t,r,n,o,i,c,a,u;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:for(t=Object(m.a)(),r=0,n=!0,o=!1,i=void 0,s.prev=5,c=t.querySelectorAll(g.b.selector)[Symbol.iterator]();!(n=(a=c.next()).done);n=!0)u=a.value,e.includes("".concat(u.id,"-ref"))&&u.parentNode&&(u.parentNode.removeChild(u),r++);s.next=13;break;case 9:s.prev=9,s.t0=s.catch(5),o=!0,i=s.t0;case 13:s.prev=13,s.prev=14,n||null==c.return||c.return();case 16:if(s.prev=16,!o){s.next=19;break}throw i;case 19:return s.finish(16);case 20:return s.finish(13);case 21:if(!(r>0)){s.next=24;break}return s.next=24,oe();case 24:case"end":return s.stop()}}),A,null,[[5,9,13,21],[14,,16,20]])}function Q(e){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z([e]);case 2:case"end":return t.stop()}}),M)}function Z(e){var t,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(m.a)(),r=s()(t.querySelectorAll(g.a.selector)).reduce((function(t,r){var n=g.a.getItems(r),o=n.filter((function(t){return!e.includes(t)}));return 0===o.length&&r.parentNode?r.parentNode.removeChild(r):r.dataset.items=JSON.stringify(o),t.filter((function(e){return!n.includes(e)}))}),s()(e)),n.next=4,Object(l.dispatch)("core/block-editor").resetBlocks(Object(v.parse)(t.innerHTML));case 4:if(!(r.length>0)){n.next=9;break}return n.next=7,{type:"REMOVE_REFERENCES",itemIds:r};case 7:return n.next=9,oe();case 9:case"end":return n.stop()}}),L)}function $(e){var t;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Object(l.select)("abt/data").getCitedItems().findIndex((function(t){return t.id===e.id}))>=0,r.next=3,{type:"UPDATE_REFERENCE",data:e};case 3:if(!t){r.next=6;break}return r.next=6,te();case 6:return r.next=8,oe();case 8:case"end":return r.stop()}}),H)}function ee(){var e,t,r,n,o,i,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(e=Object(m.a)(),t=!0,r=!1,n=void 0,a.prev=4,o=e.querySelectorAll(g.a.selector)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)(c=i.value).parentNode&&c.parentNode.removeChild(c);a.next=12;break;case 8:a.prev=8,a.t0=a.catch(4),r=!0,n=a.t0;case 12:a.prev=12,a.prev=13,t||null==o.return||o.return();case 15:if(a.prev=15,!r){a.next=18;break}throw n;case 18:return a.finish(15);case 19:return a.finish(12);case 20:return a.next=22,Object(l.dispatch)("core/block-editor").resetBlocks(Object(v.parse)(e.innerHTML));case 22:case"end":return a.stop()}}),B,null,[[4,8,12,20],[13,,15,19]])}function te(){var e,t,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o=void 0,i=void 0,o=Object(l.select)("abt/data").getStyle(),i=o.value,"custom"===o.kind?i:{type:"FETCH_STYLE",id:i};case 2:return e=n.sent,n.next=5,{type:"FETCH_LOCALE",style:e};case 5:return t=new O.a(e),r=t.parseCitations(Object(l.select)("abt/data").getCitationsByIndex()),n.next=9,ie(t.bibliography);case 9:return n.next=11,ae(r);case 11:case"end":return n.stop()}var o,i}),F)}function re(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=Object(m.a)()).querySelectorAll(g.b.selector).forEach((function(e,t){e.innerHTML=g.b.createMarker(t)})),t.next=4,Object(l.dispatch)("core/block-editor").resetBlocks(Object(v.parse)(e.innerHTML));case 4:return t.next=6,ce();case 6:case"end":return t.stop()}}),J)}function ne(e){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,{type:"SET_STYLE",style:e};case 2:return t.next=4,te();case 4:return t.next=6,oe();case 6:case"end":return t.stop()}}),Y)}function oe(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{type:"SAVE_STATE",id:Object(l.select)("core/editor").getCurrentPostId(),state:Object(l.select)("abt/data").getSerializedState().meta._abt_state};case 2:return e.next=4,Object(l.dispatch)("core/editor").autosave();case 4:case"end":return e.stop()}}),q)}function ie(e){var t,r,n,o;return b.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.items,r=e.meta,n=Object(l.select)("core/block-editor").getBlocks(),o=n.find((function(e){return"abt/bibliography"===e.name})),!(t.length>0&&o)){i.next=8;break}return i.next=6,Object(l.dispatch)("core/block-editor").updateBlockAttributes(o.clientId,C({},r,{items:t}));case 6:i.next=16;break;case 8:if(!(t.length>0)||o){i.next=13;break}return i.next=11,Object(l.dispatch)("core/block-editor").insertBlock(Object(v.createBlock)("abt/bibliography",C({},r,{items:t})),n.length,void 0,!1);case 11:i.next=16;break;case 13:if(0!==t.length||!o){i.next=16;break}return i.next=16,Object(l.dispatch)("core/block-editor").removeBlock(o.clientId);case 16:case"end":return i.stop()}}),K)}function ce(){var e,t,r,n;return b.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e=Object(l.select)("abt/data").getFootnotes(),t=Object(l.select)("core/block-editor").getBlocks(),r=t.findIndex((function(e){return"abt/footnotes"===e.name})),n=t.findIndex((function(e){return"abt/bibliography"===e.name})),!(e.length>0&&r>=0)){o.next=9;break}return o.next=7,Object(l.dispatch)("core/block-editor").updateBlockAttributes(t[r].clientId,{items:e});case 7:o.next=17;break;case 9:if(!(e.length>0&&-1===r)){o.next=14;break}return o.next=12,Object(l.dispatch)("core/block-editor").insertBlock(Object(v.createBlock)("abt/footnotes",{items:e}),n>0?n:t.length,void 0,!1);case 12:o.next=17;break;case 14:if(!(0===e.length&&r>=0)){o.next=17;break}return o.next=17,Object(l.dispatch)("core/block-editor").removeBlock(t[r].clientId);case 17:case"end":return o.stop()}}),V)}function ae(e){var t,r,n,o,i,c,a;return b.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:for(t=Object(m.a)(),r=!0,n=!1,o=void 0,u.prev=4,i=function(){var e=a.value,r=e.html,n=e.id,o=e.sortedItems,i=t.querySelector(h.a.apply(void 0,s()(g.a.legacyClassNames.map((function(e){return{classNames:[e],attributes:{id:n}}})))));i&&(i.innerHTML=r,i.dataset.items=o,i.firstElementChild?(i.dataset.hasChildren="true",i.firstElementChild.innerHTML=y.a+i.firstElementChild.innerHTML+y.a):(delete i.dataset.hasChildren,i.innerHTML=y.a+r+y.a))},c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0)i();u.next=13;break;case 9:u.prev=9,u.t0=u.catch(4),n=!0,o=u.t0;case 13:u.prev=13,u.prev=14,r||null==c.return||c.return();case 16:if(u.prev=16,!n){u.next=19;break}throw o;case 19:return u.finish(16);case 20:return u.finish(13);case 21:return u.next=23,Object(l.dispatch)("core/block-editor").resetBlocks(Object(v.parse)(t.innerHTML));case 23:case"end":return u.stop()}}),U,null,[[4,9,13,21],[14,,16,20]])}var ue=r(19),se=r.n(ue),le=r(128),fe=r.n(le);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(r,!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be=pe({citationStyles:{renamed:{},styles:[]}},Object(h.b)("abt-editor-state"));var ve=Object(l.combineReducers)({citationStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.citationStyles,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITATION_STYLES":return t.styles;default:return e}},references:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.references,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_REFERENCES":var r=t.data.map((function(e){e.id;var t=se()(e,["id"]);return pe({},t,{id:"".concat(fe()(JSON.stringify(t)))})})).filter((function(t){var r=t.id;return-1===e.findIndex((function(e){return e.id===r}))}));return r.length>0?[].concat(s()(e),s()(r)):e;case"REMOVE_REFERENCES":return e.filter((function(e){var r=e.id;return!t.itemIds.includes(r)}));case"UPDATE_REFERENCE":var n=e.findIndex((function(e){return e.id===t.data.id}));return-1===n?[].concat(s()(e),[t.data]):[].concat(s()(e.slice(0,n)),[t.data],s()(e.slice(n+1)));default:return e}},style:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.style,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STYLE":return t.style;default:return e}}}),ye=b.a.mark(he);function he(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,{type:"FETCH_CITATION_STYLES"};case 2:return e=t.sent,t.abrupt("return",{type:"SET_CITATION_STYLES",styles:e});case 4:case"end":return t.stop()}}),ye)}var me=r(6),ge=r.n(me),Oe=r(10),we=r.n(Oe),xe=r(20);function Se(e){return Object(xe.a)(e.citationStyles)}function Ee(e){return Object(xe.a)(e.style)}function je(e){var t=Object(m.a)(!0);return s()(t.querySelectorAll(g.a.selector)).map((function(t,r){return{citationID:t.id,citationItems:g.a.getItems(t).reduce((function(t,r){var n=Pe(e,r);return void 0!==n?[].concat(s()(t),[{id:r,item:n}]):t}),[]),properties:{index:r,noteIndex:0}}}))}function _e(e){var t=Object(m.a)(!0);return we()(s()(t.querySelectorAll(g.a.selector))).flatMap(g.a.getItems).uniq().map(Object(Oe.partial)(Pe,e)).compact().value()}function ke(){var e=Object(m.a)(),t=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div");return r.className="abt-footnotes-item__marker",n.className="abt-footnotes-item__content",t.appendChild(r),t.appendChild(n),s()(e.querySelectorAll(g.b.selector)).map((function(e){return r.innerHTML=e.innerHTML,n.textContent=e.dataset.note||"",{id:"".concat(e.id,"-ref"),content:t.innerHTML}}))}function Ie(e,t){switch(t){case"cited":return _e(e);case"uncited":return De(e);default:return Object(xe.a)(e.references)}}function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",n=arguments.length>3?arguments[3]:void 0;return Object(Oe.orderBy)(Ie(e,n),(function(e){switch(t){case"date":var r=Object(Oe.get)(e.issued,"[date-parts][0]",[-5e3]),n=ge()(r,3),o=n[0],i=n[1],c=void 0===i?0:i,a=n[2];return new Date(o,c,void 0===a?1:a).toJSON();case"publication":return Object(xe.b)(e,["journalAbbreviation","container-title-short","container-title","publisher"],"~");case"title":default:return e.title||"~"}}),r)}function Pe(e,t){return Object(xe.a)(e.references.find((function(e){return e.id===t})))}function Ce(e){var t=e.references,r=e.style;return{meta:{_abt_state:JSON.stringify({references:t,style:r})}}}function De(e){return Object(Oe.differenceWith)(e.references,_e(e),(function(e,t){return e.id===t.id}))}var Ne=["abt/data",{actions:n,controls:T,reducer:ve,resolvers:o,selectors:i}];function Re(){return{type:"CLEAR_SELECTED_ITEMS"}}function Ae(e){return{type:"SET_IDENTIFIER_KIND",kind:e}}function Me(e){return{type:"SET_SIDEBAR_SORT_MODE",mode:e}}function Le(e){return{type:"SET_SIDEBAR_SORT_ORDER",order:e}}function He(e){return{type:"TOGGLE_ITEM_SELECTED",id:e}}function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(r,!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Je={identifierKind:"doi"};var Ye={selectedItems:[],sortMode:"title",sortOrder:"asc"};function qe(e){return e.addReferenceDialog.identifierKind}function Ke(e){return s()(e.sidebar.selectedItems)}function Ve(e){return e.sidebar.sortMode}function Ue(e){return e.sidebar.sortOrder}var Xe=["abt/ui",{actions:c,reducer:Object(l.combineReducers)({addReferenceDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IDENTIFIER_KIND":return Fe({},e,{identifierKind:t.kind});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_SELECTED_ITEMS":return Fe({},e,{selectedItems:[]});case"SET_SIDEBAR_SORT_MODE":return Fe({},e,{sortMode:t.mode});case"SET_SIDEBAR_SORT_ORDER":return Fe({},e,{sortOrder:t.order});case"TOGGLE_ITEM_SELECTED":return Fe({},e,{selectedItems:e.selectedItems.includes(t.id)?e.selectedItems.filter((function(e){return e!==t.id})):[].concat(s()(e.selectedItems),[t.id])});default:return e}}}),selectors:a}];l.registerStore.apply(void 0,s()(Ne)),l.registerStore.apply(void 0,s()(Xe))}]);
//# sourceMappingURL=editor-stores.js.map