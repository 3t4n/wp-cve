{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external {\"this\":[\"wp\",\"i18n\"]}","webpack:///external {\"this\":[\"wp\",\"element\"]}","webpack:///external {\"this\":\"regeneratorRuntime\"}","webpack:///../node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///external {\"this\":[\"wp\",\"components\"]}","webpack:///external {\"this\":[\"wp\",\"data\"]}","webpack:///../node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///../node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///../node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///external {\"this\":\"lodash\"}","webpack:///../node_modules/@babel/runtime/helpers/extends.js","webpack:///../node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///../node_modules/classnames/index.js","webpack:///external {\"this\":[\"wp\",\"blockEditor\"]}","webpack:///../node_modules/@babel/runtime/helpers/createClass.js","webpack:///external {\"this\":[\"wp\",\"blocks\"]}","webpack:///../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack:///./js/utils/data.ts","webpack:///../node_modules/uuid/v4.js","webpack:///./js/utils/editor.ts","webpack:///../node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///../node_modules/@babel/runtime/helpers/typeof.js","webpack:///./js/utils/csl.ts","webpack:///../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///../node_modules/@babel/runtime/helpers/inherits.js","webpack:///../node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///../node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./js/utils/cache.ts","webpack:///../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///../node_modules/uuid/lib/rng-browser.js","webpack:///../node_modules/uuid/lib/bytesToUuid.js","webpack:///../node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./js/components/count-icon/index.tsx","webpack:///./js/gutenberg/components/sidebar-item-list/index.tsx","webpack:///./js/gutenberg/components/sidebar-item-list/style.scss?fca6","webpack:///./js/gutenberg/components/reference-item/style.scss?bbd3","webpack:///external {\"this\":\"CSL\"}","webpack:///./js/gutenberg/components/reference-item/index.tsx","webpack:///./js/gutenberg/blocks/static-bibliography/style.scss?790f","webpack:///./js/components/count-icon/style.scss?6ceb","webpack:///../node_modules/dompurify/dist/purify.js","webpack:///./js/components/textarea-autosize/index.tsx","webpack:///./js/components/textarea-autosize/style.scss?04b2","webpack:///./js/utils/processor.ts","webpack:///./js/gutenberg/blocks/bibliography/style.scss?11e4","webpack:///./js/gutenberg/blocks/bibliography/edit.tsx","webpack:///./js/gutenberg/blocks/bibliography/save.tsx","webpack:///./js/gutenberg/blocks/bibliography/index.ts","webpack:///./js/gutenberg/blocks/footnotes/index.ts","webpack:///./js/gutenberg/blocks/footnotes/edit.tsx","webpack:///./js/gutenberg/blocks/footnotes/save.tsx","webpack:///./js/gutenberg/blocks/static-bibliography/live-item.tsx","webpack:///./js/gutenberg/blocks/static-bibliography/edit.tsx","webpack:///./js/gutenberg/blocks/static-bibliography/index.ts","webpack:///./js/gutenberg/blocks/static-bibliography/save.tsx","webpack:///./js/gutenberg/blocks/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","this","arrayWithoutHoles","iterableToArray","nonIterableSpread","arr","arrayWithHoles","iterableToArrayLimit","nonIterableRest","obj","configurable","writable","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","args","arguments","apply","err","undefined","_extends","assign","target","length","source","instance","Constructor","TypeError","hasOwn","classNames","classes","argType","push","Array","isArray","inner","join","default","_defineProperties","props","descriptor","protoProps","staticProps","objectWithoutPropertiesLoose","excluded","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","clone","data","JSON","parse","stringify","firstTruthyValue","paths","fallback","path","val","swapWith","a","b","list","item","splice","slice","rng","bytesToUuid","options","buf","offset","rnds","random","ii","INVALID_BLOCK_TYPES","getEditorDOM","excludeInvalid","doc","document","createElement","filteredBlocks","getEditorBlocks","filter","block","includes","isValid","innerHTML","getEditedPostContent","parseBibAttributes","entryspacing","hangingindent","maxoffset","linespacing","secondFieldAlign","stripListItem","container","child","querySelector","Error","content","toRemove","children","el","classList","contains","outerHTML","forEach","removeChild","trim","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_typeof2","iterator","constructor","_typeof","CSLDate","getYear","date","raw","Date","getUTCFullYear","raw2parts","split","date2raw","CSLPerson","getNames","people","count","names","map","family","given","literal","Boolean","assertThisInitialized","subClass","superClass","toString","_arr","_n","_d","_e","_s","_i","next","_setPrototypeOf","AbstractCache","daysTilExpiration","PREFIX","VERSION","KEY","_cache","storageIsAvailable","top","localStorage","createFallbackStorage","ITEM_KEY","EXPIRES","now","keys","k","startsWith","removeItem","cache","storage","window","setItem","_value","Map","size","clear","getItem","index","delete","set","expires","localeCache","parser","DOMParser","style","xml","parseFromString","styleNode","localeId","getAttribute","fetch","response","ok","statusText","text","locale","styleCache","styleId","cached","arr2","iter","from","sourceKeys","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","Math","byteToHex","substr","bth","ReferenceError","CountIcon","className","icon","SidebarItemList","items","onItemClick","onItemDoubleClick","selectedItems","renderItem","aria-multiselectable","role","id","aria-selected","tabIndex","onClick","onDoubleClick","onKeyDown","e","ReferenceItem","title","__html","sanitize","authors","author","publication","journalAbbreviation","publisher","year","issued","dangerouslySetInnerHTML","meta","freeze$1","freeze","x","html","svg","svgFilters","mathMl","freeze$2","html$1","svg$1","mathMl$1","apply$1","Reflect","addToSet","array","element","lcElement","toLowerCase","isFrozen","newObject","fun","thisValue","seal","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","_toConsumableArray","arraySlice","getGlobal","_createTrustedTypesPolicy","trustedTypes","createPolicy","suffix","currentScript","hasAttribute","policyName","createHTML","html$$1","console","warn","createDOMPurify","DOMPurify","root","version","removed","nodeType","isSupported","originalDocument","useDOMParser","removeTitle","DocumentFragment","HTMLTemplateElement","Node","NodeFilter","_window$NamedNodeMap","NamedNodeMap","MozNamedAttrMap","Text","Comment","TrustedTypes","template","ownerDocument","trustedTypesPolicy","emptyHTML","_document","implementation","createNodeIterator","getElementsByTagName","createDocumentFragment","importNode","hooks","createHTMLDocument","documentMode","MUSTACHE_EXPR$$1","ERB_EXPR$$1","DATA_ATTR$$1","ARIA_ATTR$$1","IS_SCRIPT_OR_DATA$$1","ATTR_WHITESPACE$$1","IS_ALLOWED_URI$$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","concat","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_JQUERY","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_DOM_IMPORT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","CONFIG","formElement","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","_forceRemove","node","parentNode","_removeAttribute","attribute","getAttributeNode","removeAttribute","_initDocument","dirty","leadingWhitespace","matches","match","documentElement","body","firstElementChild","insertBefore","createTextNode","childNodes","test","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","FILTER_ACCEPT","_isNode","nodeName","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","elm","textContent","attributes","setAttribute","namespaceURI","tagName","allowedTags","querySelectorAll","insertAdjacentHTML","htmlToInsert","cloneNode","replace","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","attr","idAttr","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","_attr","RegExp","setAttributeNS","pop","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","importedNode","oldNode","returnNode","toStaticHTML","appendChild","firstChild","nodeIterator","serializedHTML","setConfig","clearConfig","isValidAttribute","tag","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","factory","inputRef","ref","textarea","current","offsetHeight","clientHeight","height","scrollHeight","rows","Processor","sys","retrieveItem","getItemById","retrieveLocale","lang","engine","opt","development_extensions","wrap_url_and_doi","citations","rebuildProcessorState","sortedItems","registry","citationById","makeBibliography","entry_ids","citationreg","Bibliography","isToggleable","aria-label","BibliographyHeading","ItemList","heading","headingAlign","headingLevel","isSelected","setAttributes","Tag","textAlign","placeholder","onBlur","onChange","currentTarget","atts","containerAttrs","Content","category","description","type","selector","query","supports","inserter","multiple","reusable","transforms","transform","re","dataset","headingMatch","exec","parseInt","edit","controls","level","isActive","subscript","align","checked","help","label","toggleable","save","summary","LiveItem","onRemove","onMoveDown","onMoveUp","row","data-id","display","buttonList","disabled","orderedList","List","addItem","references","find","fetchItem","getStyle","styleXml","processor","parseCitations","citationID","citationItems","properties","noteIndex","newItem","bibliography","keywords","anchor","select","existingIds","getSortedItems","initialOpen","ListTag","footnotes"],"mappings":"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","file":"bundle/editor-blocks.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 137);\n","(function() { module.exports = this[\"wp\"][\"i18n\"]; }());","(function() { module.exports = this[\"wp\"][\"element\"]; }());","(function() { module.exports = this[\"regeneratorRuntime\"]; }());","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","(function() { module.exports = this[\"wp\"][\"components\"]; }());","(function() { module.exports = this[\"wp\"][\"data\"]; }());","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","(function() { module.exports = this[\"lodash\"]; }());","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","(function() { module.exports = this[\"wp\"][\"blockEditor\"]; }());","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","(function() { module.exports = this[\"wp\"][\"blocks\"]; }());","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","import { get } from 'lodash';\n\ntype Widen<T> = T extends string ? string : T extends number ? number : T;\n\nexport function clone<T>(data: T): T {\n    if (data === undefined) {\n        return data;\n    }\n    return JSON.parse(JSON.stringify(data));\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport function firstTruthyValue<T extends Record<string, any>, U>(obj: T, paths: string[], fallback: Widen<U>): Widen<U>; // prettier-ignore\nexport function firstTruthyValue<T extends Record<string, any>, U>(obj: T, paths: string[]): U | undefined; // prettier-ignore\nexport function firstTruthyValue<T extends Record<string, any>, U>(\n    obj: T,\n    paths: string[],\n    fallback?: Widen<U>,\n) {\n    for (const path of paths) {\n        const val = get(obj, path);\n        if (val) {\n            return val;\n        }\n    }\n    return fallback;\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\nexport function swapWith<T>(arr: T[], a: number, b: number): T[] {\n    const list = [...arr];\n    const item = list.splice(a, 1);\n    return [...list.slice(0, b), ...item, ...list.slice(b)];\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import { serialize } from '@wordpress/blocks';\nimport { select } from '@wordpress/data';\n\nimport Processor from 'utils/processor';\n\nconst INVALID_BLOCK_TYPES = ['core/freeform', 'core/html'];\n\nexport function getEditorDOM(excludeInvalid = false): HTMLDivElement {\n    const doc = document.createElement('div');\n    if (excludeInvalid) {\n        const filteredBlocks = select('core/editor')\n            .getEditorBlocks()\n            .filter(\n                block =>\n                    !INVALID_BLOCK_TYPES.includes(block.name) && block.isValid,\n            );\n        doc.innerHTML = serialize(filteredBlocks);\n    } else {\n        doc.innerHTML = select('core/editor').getEditedPostContent();\n    }\n    return doc;\n}\n\nexport function parseBibAttributes({\n    entryspacing,\n    hangingindent,\n    maxoffset,\n    linespacing,\n    secondFieldAlign,\n}: { [k in keyof Processor.BibMeta]?: string }) {\n    return {\n        ...(entryspacing\n            ? { 'data-entryspacing': `${entryspacing}` }\n            : undefined),\n        ...(hangingindent\n            ? { 'data-hangingindent': `${hangingindent}` }\n            : undefined),\n        ...(maxoffset ? { 'data-maxoffset': `${maxoffset}` } : undefined),\n        ...(linespacing ? { 'data-linespacing': `${linespacing}` } : undefined),\n        ...(secondFieldAlign\n            ? { 'data-second-field-align': secondFieldAlign }\n            : undefined),\n    };\n}\n\nexport function stripListItem(item: Element | string): string {\n    if (typeof item === 'string') {\n        const container = document.createElement('div');\n        container.innerHTML = item;\n        const child = container.querySelector('.csl-entry');\n        if (child) {\n            item = child;\n        } else {\n            throw new Error(\n                'Outer HTML of item must be a div with className \"csl-entry\"',\n            );\n        }\n    }\n    const content = item;\n    let toRemove: Element[] = [];\n    for (const el of item.children) {\n        if (el.classList.contains('csl-indent')) {\n            break;\n        }\n        if (el.classList.contains('csl-left-margin')) {\n            toRemove = [...toRemove, el];\n            continue;\n        }\n        if (el.classList.contains('csl-right-inline')) {\n            el.outerHTML = el.innerHTML;\n        }\n    }\n    toRemove.forEach(el => content.removeChild(el));\n    return content.innerHTML.trim();\n}\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","import { _x } from '@wordpress/i18n';\nimport { get } from 'lodash';\n\nexport const CSLDate = {\n    getYear(date?: CSL.Date): string | number {\n        if (date && date.raw) {\n            return new Date(date.raw).getUTCFullYear();\n        }\n        return get(\n            date,\n            '[date-parts][0][0]',\n            _x(\n                'n.d.',\n                'Abbreviation for \"no date\"',\n                'academic-bloggers-toolkit',\n            ),\n        );\n    },\n    raw2parts(date: string): CSL.Date {\n        const [year, month, day] = date.split('/');\n        return {\n            'date-parts': [[year, month, day]],\n        };\n    },\n    date2raw(date?: CSL.Date): string {\n        if (date && date.raw) {\n            return date.raw;\n        } else if (date && date['date-parts']) {\n            return date['date-parts'][0].filter(d => d !== undefined).join('/');\n        }\n        return '';\n    },\n};\n\nexport const CSLPerson = {\n    getNames(people: CSL.Person[] = [], count?: number): string {\n        const names = people\n            .slice(0, count)\n            .map(({ family = '', given = '', literal = '' }) => {\n                if (family) {\n                    return `${family} ${given.slice(0, 1)}`.trim();\n                }\n                return literal;\n            })\n            .filter(Boolean)\n            .join(', ');\n        return names ? `${names}.` : '';\n    },\n};\n","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","import { omit } from 'lodash';\n\ninterface CacheJSON<T> {\n    [k: string]: {\n        expires: number;\n        data: Record<string, T>;\n    };\n}\n\ninterface StorageFallback extends Storage {\n    _value: Map<string, string>;\n}\n\nabstract class AbstractCache<T> {\n    private readonly PREFIX = 'ABT_CACHE_';\n    private readonly VERSION = 'v1.0';\n    private readonly EXPIRES: number;\n    private readonly ITEM_KEY: string;\n    private readonly KEY = `${this.PREFIX}${this.VERSION}`;\n    private readonly _cache = this.storageIsAvailable()\n        ? top.localStorage\n        : this.createFallbackStorage();\n\n    constructor(key: string, daysTilExpiration = 30) {\n        const ONE_DAY = 86400000;\n        this.ITEM_KEY = key;\n        this.EXPIRES = Date.now() + ONE_DAY * daysTilExpiration;\n        const { KEY, PREFIX } = this;\n\n        // Purge old cache versions\n        Object.keys(this._cache)\n            .filter(k => k.startsWith(PREFIX) && k !== KEY)\n            .forEach(k => this._cache.removeItem(k));\n    }\n\n    abstract async fetchItem(key: string): Promise<T>;\n\n    getItem(key: string): T | null {\n        return this.cache[key] || null;\n    }\n    removeItem(key: string): void {\n        this.cache = omit(this.cache, key);\n    }\n    setItem(key: string, value: T): void {\n        this.cache = {\n            ...this.cache,\n            [key]: value,\n        };\n    }\n\n    private get cache(): Record<string, T> {\n        const { EXPIRES: expires, ITEM_KEY, KEY } = this;\n        const value: CacheJSON<T> = JSON.parse(\n            this._cache.getItem(KEY) || '{}',\n        );\n        let item = value[ITEM_KEY];\n        if (!item || item.expires < Date.now()) {\n            item = {\n                expires,\n                data: {},\n            };\n            this._cache.setItem(\n                KEY,\n                JSON.stringify({\n                    ...value,\n                    [ITEM_KEY]: { ...item },\n                }),\n            );\n        }\n        return { ...item.data };\n    }\n    private set cache(data: Record<string, T>) {\n        const { ITEM_KEY, KEY } = this;\n        const value: CacheJSON<T> = JSON.parse(\n            this._cache.getItem(KEY) || '{}',\n        );\n        const item = value[ITEM_KEY];\n        this._cache.setItem(\n            KEY,\n            JSON.stringify({ ...value, [ITEM_KEY]: { ...item, data } }),\n        );\n    }\n\n    private storageIsAvailable(): boolean {\n        const TEST_KEY = '__storage_test__';\n        try {\n            const storage = window.localStorage;\n            storage.setItem(TEST_KEY, 'test');\n            storage.removeItem(TEST_KEY);\n            return true;\n        } catch {\n            return false;\n        }\n    }\n\n    private createFallbackStorage(): StorageFallback {\n        return {\n            _value: new Map(),\n            get length() {\n                return this._value.size;\n            },\n            clear() {\n                this._value.clear();\n            },\n            getItem(key) {\n                return this._value.get(key) || null;\n            },\n            key(index) {\n                return [...this._value.keys()][index] || null;\n            },\n            removeItem(key) {\n                this._value.delete(key);\n            },\n            setItem(key, value) {\n                this._value.set(key, value);\n            },\n        };\n    }\n}\n\nexport const localeCache = new (class extends AbstractCache<string> {\n    private parser = new DOMParser();\n\n    async fetchItem(style: string): Promise<string> {\n        const xml = this.parser.parseFromString(style, 'application/xml');\n        const styleNode = xml.querySelector('style');\n        if (xml.querySelector('parsererror')) {\n            throw new Error('Invalid style XML');\n        }\n        if (!styleNode) {\n            throw new Error('CSL style is not valid');\n        }\n        const localeId = styleNode.getAttribute('default-locale') || 'en-US';\n        const response = await fetch(\n            `https://raw.githubusercontent.com/citation-style-language/locales/master/locales-${localeId}.xml`,\n        );\n        if (!response.ok) {\n            throw new Error(response.statusText);\n        }\n        const locale = await response.text();\n        this.setItem(localeId, locale);\n        return locale;\n    }\n})('locales');\n\nexport const styleCache = new (class extends AbstractCache<string> {\n    async fetchItem(styleId: string): Promise<string> {\n        const cached = this.getItem(styleId);\n        if (cached !== null) {\n            return cached;\n        }\n        const response = await fetch(\n            `https://raw.githubusercontent.com/citation-style-language/styles/master/${styleId}.csl`,\n        );\n        if (!response.ok) {\n            throw new Error(response.statusText);\n        }\n        const style = await response.text();\n        this.setItem(styleId, style);\n        return style;\n    }\n})('styles');\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","import styles from './style.scss';\n\ninterface Props {\n    count: number;\n}\n\nexport default function CountIcon({ count }: Props) {\n    return <span className={styles.icon}>{count}</span>;\n}\n","import { ReactNode } from '@wordpress/element';\n\nimport styles from './style.scss';\n\ninterface HasID {\n    id: string;\n}\n\ninterface Props<T> {\n    items: readonly T[];\n    selectedItems?: readonly string[];\n    renderItem(item: T): ReactNode;\n    onItemClick?(id: string): void;\n    onItemDoubleClick?(id: string): void;\n}\n\nexport default function SidebarItemList<T extends HasID>({\n    items,\n    onItemClick = () => void 0,\n    onItemDoubleClick = () => void 0,\n    selectedItems = [],\n    renderItem,\n}: Props<T>) {\n    return (\n        <div aria-multiselectable={true} className={styles.list} role=\"listbox\">\n            {items.map(item => (\n                <div\n                    key={item.id}\n                    aria-selected={selectedItems.includes(item.id)}\n                    className={styles.item}\n                    role=\"option\"\n                    tabIndex={0}\n                    onClick={() => onItemClick(item.id)}\n                    onDoubleClick={() => onItemDoubleClick(item.id)}\n                    onKeyDown={e => {\n                        switch (e.key) {\n                            case ' ':\n                                return onItemClick(item.id);\n                            case 'Enter':\n                                return onItemDoubleClick(item.id);\n                        }\n                    }}\n                >\n                    {renderItem(item)}\n                </div>\n            ))}\n        </div>\n    );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"style__list___sXSVw\",\"item\":\"style__item___3Ltyn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"authors\":\"style__authors___3xZGF\",\"meta\":\"style__meta___3fNP7\"};","(function() { module.exports = this[\"CSL\"]; }());","import { useMemo } from '@wordpress/element';\nimport { _x } from '@wordpress/i18n';\nimport DOMPurify from 'dompurify';\n\nimport { CSLDate, CSLPerson } from 'utils/csl';\nimport { firstTruthyValue } from 'utils/data';\n\nimport styles from './style.scss';\n\ninterface Props {\n    item: CSL.Data;\n}\n\nexport default function ReferenceItem({ item }: Props) {\n    const title = useMemo(\n        () => ({ __html: DOMPurify.sanitize(item.title || '') }),\n        [item.title],\n    );\n    const authors = useMemo(() => CSLPerson.getNames(item.author, 3), [\n        item.author,\n    ]);\n    const publication = useMemo(\n        () =>\n            firstTruthyValue(\n                item,\n                [\n                    'journalAbbreviation',\n                    'container-title-short',\n                    'container-title',\n                    'publisher',\n                ],\n                _x(\n                    'n.p.',\n                    'Abbreviation for \"no publisher\"',\n                    'academic-bloggers-toolkit',\n                ),\n            ),\n        [\n            item.journalAbbreviation,\n            item['container-title-short'],\n            item['container-title'],\n            item.publisher,\n        ],\n    );\n    const year = useMemo(() => CSLDate.getYear(item.issued), [item.issued]);\n    return (\n        <>\n            <strong dangerouslySetInnerHTML={title} />\n            {authors && <div className={styles.authors}>{authors}</div>}\n            <div className={styles.meta}>\n                <i>{publication}</i>\n                <span>({year})</span>\n            </div>\n        </>\n    );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"style__item___x_svo\",\"buttonList\":\"style__button-list___D2Txs\",\"row\":\"style__row___zDq5B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"style__icon___S3vp9\"};","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.DOMPurify = factory());\n}(this, (function () { 'use strict';\n\nvar freeze$1 = Object.freeze || function (x) {\n  return x;\n};\n\nvar html = freeze$1(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n// SVG\nvar svg = freeze$1(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'audio', 'canvas', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'video', 'view', 'vkern']);\n\nvar svgFilters = freeze$1(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\nvar mathMl = freeze$1(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover']);\n\nvar text = freeze$1(['#text']);\n\nvar freeze$2 = Object.freeze || function (x) {\n  return x;\n};\n\nvar html$1 = freeze$2(['accept', 'action', 'align', 'alt', 'autocomplete', 'background', 'bgcolor', 'border', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'coords', 'crossorigin', 'datetime', 'default', 'dir', 'disabled', 'download', 'enctype', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'integrity', 'ismap', 'label', 'lang', 'list', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'name', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns']);\n\nvar svg$1 = freeze$2(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'tabindex', 'targetx', 'targety', 'transform', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n\nvar mathMl$1 = freeze$2(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n\nvar xml = freeze$2(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\nvar hasOwnProperty = Object.hasOwnProperty;\nvar setPrototypeOf = Object.setPrototypeOf;\n\nvar _ref$1 = typeof Reflect !== 'undefined' && Reflect;\nvar apply$1 = _ref$1.apply;\n\nif (!apply$1) {\n  apply$1 = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\n/* Add properties to a lookup table */\nfunction addToSet(set, array) {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  var l = array.length;\n  while (l--) {\n    var element = array[l];\n    if (typeof element === 'string') {\n      var lcElement = element.toLowerCase();\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!Object.isFrozen(array)) {\n          array[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/* Shallow clone an object */\nfunction clone(object) {\n  var newObject = {};\n\n  var property = void 0;\n  for (property in object) {\n    if (apply$1(hasOwnProperty, object, [property])) {\n      newObject[property] = object[property];\n    }\n  }\n\n  return newObject;\n}\n\nvar seal = Object.seal || function (x) {\n  return x;\n};\n\nvar MUSTACHE_EXPR = seal(/\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nvar ERB_EXPR = seal(/<%[\\s\\S]*|[\\s\\S]*%>/gm);\nvar DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nvar ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nvar IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nvar IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nvar ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g // eslint-disable-line no-control-regex\n);\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar _ref = typeof Reflect !== 'undefined' && Reflect;\nvar apply = _ref.apply;\n\nvar arraySlice = Array.prototype.slice;\nvar freeze = Object.freeze;\n\nvar getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {Document} document The document object (to determine policy name suffix)\n * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported).\n */\nvar _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n  if ((typeof trustedTypes === 'undefined' ? 'undefined' : _typeof(trustedTypes)) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  var suffix = null;\n  var ATTR_NAME = 'data-tt-policy-suffix';\n  if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n    suffix = document.currentScript.getAttribute(ATTR_NAME);\n  }\n\n  var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML: function createHTML(html$$1) {\n        return html$$1;\n      }\n    });\n  } catch (error) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\n\nfunction createDOMPurify() {\n  var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n\n  var DOMPurify = function DOMPurify(root) {\n    return createDOMPurify(root);\n  };\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = '2.0.7';\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n\n  if (!window || !window.document || window.document.nodeType !== 9) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  var originalDocument = window.document;\n  var useDOMParser = false;\n  var removeTitle = false;\n\n  var document = window.document;\n  var DocumentFragment = window.DocumentFragment,\n      HTMLTemplateElement = window.HTMLTemplateElement,\n      Node = window.Node,\n      NodeFilter = window.NodeFilter,\n      _window$NamedNodeMap = window.NamedNodeMap,\n      NamedNodeMap = _window$NamedNodeMap === undefined ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap,\n      Text = window.Text,\n      Comment = window.Comment,\n      DOMParser = window.DOMParser,\n      TrustedTypes = window.TrustedTypes;\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n\n  if (typeof HTMLTemplateElement === 'function') {\n    var template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  var trustedTypesPolicy = _createTrustedTypesPolicy(TrustedTypes, originalDocument);\n  var emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n\n  var _document = document,\n      implementation = _document.implementation,\n      createNodeIterator = _document.createNodeIterator,\n      getElementsByTagName = _document.getElementsByTagName,\n      createDocumentFragment = _document.createDocumentFragment;\n  var importNode = originalDocument.importNode;\n\n\n  var hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = implementation && typeof implementation.createHTMLDocument !== 'undefined' && document.documentMode !== 9;\n\n  var MUSTACHE_EXPR$$1 = MUSTACHE_EXPR,\n      ERB_EXPR$$1 = ERB_EXPR,\n      DATA_ATTR$$1 = DATA_ATTR,\n      ARIA_ATTR$$1 = ARIA_ATTR,\n      IS_SCRIPT_OR_DATA$$1 = IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE$$1 = ATTR_WHITESPACE;\n  var IS_ALLOWED_URI$$1 = IS_ALLOWED_URI;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n\n  var ALLOWED_TAGS = null;\n  var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(html), _toConsumableArray(svg), _toConsumableArray(svgFilters), _toConsumableArray(mathMl), _toConsumableArray(text)));\n\n  /* Allowed attribute names */\n  var ALLOWED_ATTR = null;\n  var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray(html$1), _toConsumableArray(svg$1), _toConsumableArray(mathMl$1), _toConsumableArray(xml)));\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  var FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  var FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  var ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  var ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  var ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Output should be safe for jQuery's $() factory? */\n  var SAFE_FOR_JQUERY = false;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  var SAFE_FOR_TEMPLATES = false;\n\n  /* Decide if document with <html>... should be returned */\n  var WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  var SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  var FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  var RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  var RETURN_DOM_FRAGMENT = false;\n\n  /* If `RETURN_DOM` or `RETURN_DOM_FRAGMENT` is enabled, decide if the returned DOM\n   * `Node` is imported into the current `Document`. If this flag is not enabled the\n   * `Node` will belong (its ownerDocument) to a fresh `HTMLDocument`, created by\n   * DOMPurify. */\n  var RETURN_DOM_IMPORT = false;\n\n  /* Try to return a Trusted Type object instead of a string, retrun a string in\n   * case Trusted Types are not supported  */\n  var RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks? */\n  var SANITIZE_DOM = true;\n\n  /* Keep element content when removing element? */\n  var KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  var IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  var USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  var FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n\n  /* Tags that are safe for data: URIs */\n  var DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image']);\n\n  /* Attributes safe for values like \"javascript:\" */\n  var URI_SAFE_ATTRIBUTES = null;\n  var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'summary', 'title', 'value', 'style', 'xmlns']);\n\n  /* Keep a reference to config to pass to hooks */\n  var CONFIG = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  var formElement = document.createElement('form');\n\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  var _parseConfig = function _parseConfig(cfg) {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || (typeof cfg === 'undefined' ? 'undefined' : _typeof(cfg)) !== 'object') {\n      cfg = {};\n    }\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n    URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n    FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n    USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    SAFE_FOR_JQUERY = cfg.SAFE_FOR_JQUERY || false; // Default false\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_DOM_IMPORT = cfg.RETURN_DOM_IMPORT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n\n    IS_ALLOWED_URI$$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$$1;\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(text)));\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html);\n        addToSet(ALLOWED_ATTR, html$1);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg);\n        addToSet(ALLOWED_ATTR, svg$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl);\n        addToSet(ALLOWED_ATTR, mathMl$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n  var _forceRemove = function _forceRemove(node) {\n    DOMPurify.removed.push({ element: node });\n    try {\n      node.parentNode.removeChild(node);\n    } catch (error) {\n      node.outerHTML = emptyHTML;\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n  var _removeAttribute = function _removeAttribute(name, node) {\n    try {\n      DOMPurify.removed.push({\n        attribute: node.getAttributeNode(name),\n        from: node\n      });\n    } catch (error) {\n      DOMPurify.removed.push({\n        attribute: null,\n        from: node\n      });\n    }\n\n    node.removeAttribute(name);\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n  var _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    var doc = void 0;\n    var leadingWhitespace = void 0;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      var matches = dirty.match(/^[\\s]+/);\n      leadingWhitespace = matches && matches[0];\n      if (leadingWhitespace) {\n        dirty = dirty.slice(leadingWhitespace.length);\n      }\n    }\n\n    /* Use DOMParser to workaround Firefox bug (see comment below) */\n    if (useDOMParser) {\n      try {\n        doc = new DOMParser().parseFromString(dirty, 'text/html');\n      } catch (error) {}\n    }\n\n    /* Remove title to fix a mXSS bug in older MS Edge */\n    if (removeTitle) {\n      addToSet(FORBID_TAGS, ['title']);\n    }\n\n    /* Otherwise use createHTMLDocument, because DOMParser is unsafe in\n    Safari (see comment below) */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createHTMLDocument('');\n      var _doc = doc,\n          body = _doc.body;\n\n      body.parentNode.removeChild(body.parentNode.firstElementChild);\n      body.outerHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    }\n\n    if (dirty && leadingWhitespace) {\n      doc.body.insertBefore(document.createTextNode(leadingWhitespace), doc.body.childNodes[0] || null);\n    }\n\n    /* Work on whole document or just its body */\n    return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n  };\n\n  // Firefox uses a different parser for innerHTML rather than\n  // DOMParser (see https://bugzilla.mozilla.org/show_bug.cgi?id=1205631)\n  // which means that you *must* use DOMParser, otherwise the output may\n  // not be safe if used in a document.write context later.\n  //\n  // So we feature detect the Firefox bug and use the DOMParser if necessary.\n  //\n  // Chrome 77 and other versions ship an mXSS bug that caused a bypass to\n  // happen. We now check for the mXSS trigger and react accordingly.\n  if (DOMPurify.isSupported) {\n    (function () {\n      try {\n        var doc = _initDocument('<svg><p><textarea><img src=\"</textarea><img src=x abc=1//\">');\n        if (doc.querySelector('svg img')) {\n          useDOMParser = true;\n        }\n      } catch (error) {}\n    })();\n\n    (function () {\n      try {\n        var doc = _initDocument('<x/><title>&lt;/title&gt;&lt;img&gt;');\n        if (/<\\/title/.test(doc.querySelector('title').innerHTML)) {\n          removeTitle = true;\n        }\n      } catch (error) {}\n    })();\n  }\n\n  /**\n   * _createIterator\n   *\n   * @param  {Document} root document/fragment to create iterator for\n   * @return {Iterator} iterator instance\n   */\n  var _createIterator = function _createIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, function () {\n      return NodeFilter.FILTER_ACCEPT;\n    }, false);\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n  var _isClobbered = function _isClobbered(elm) {\n    if (elm instanceof Text || elm instanceof Comment) {\n      return false;\n    }\n\n    if (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string') {\n      return true;\n    }\n\n    return false;\n  };\n\n  /**\n   * _isNode\n   *\n   * @param  {Node} obj object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n  var _isNode = function _isNode(obj) {\n    return (typeof Node === 'undefined' ? 'undefined' : _typeof(Node)) === 'object' ? obj instanceof Node : obj && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' && typeof obj.nodeType === 'number' && typeof obj.nodeName === 'string';\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n  var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    hooks[entryPoint].forEach(function (hook) {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n  // eslint-disable-next-line complexity\n  var _sanitizeElements = function _sanitizeElements(currentNode) {\n    var content = void 0;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    var tagName = currentNode.nodeName.toLowerCase();\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName: tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n\n    /* Take care of an mXSS pattern using p, br inside svg, math */\n    if ((tagName === 'svg' || tagName === 'math') && currentNode.querySelectorAll('p, br').length !== 0) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Keep content except for black-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName] && typeof currentNode.insertAdjacentHTML === 'function') {\n        try {\n          var htmlToInsert = currentNode.innerHTML;\n          currentNode.insertAdjacentHTML('AfterEnd', trustedTypesPolicy ? trustedTypesPolicy.createHTML(htmlToInsert) : htmlToInsert);\n        } catch (error) {}\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove in case a noscript/noembed XSS is suspected */\n    if (tagName === 'noscript' && /<\\/noscript/i.test(currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    if (tagName === 'noembed' && /<\\/noembed/i.test(currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Convert markup to cover jQuery behavior */\n    if (SAFE_FOR_JQUERY && !currentNode.firstElementChild && (!currentNode.content || !currentNode.content.firstElementChild) && /</g.test(currentNode.textContent)) {\n      DOMPurify.removed.push({ element: currentNode.cloneNode() });\n      if (currentNode.innerHTML) {\n        currentNode.innerHTML = currentNode.innerHTML.replace(/</g, '&lt;');\n      } else {\n        currentNode.innerHTML = currentNode.textContent.replace(/</g, '&lt;');\n      }\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      content = content.replace(MUSTACHE_EXPR$$1, ' ');\n      content = content.replace(ERB_EXPR$$1, ' ');\n      if (currentNode.textContent !== content) {\n        DOMPurify.removed.push({ element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && DATA_ATTR$$1.test(lcName)) {\n      // This attribute is safe\n    } else if (ALLOW_ARIA_ATTR && ARIA_ATTR$$1.test(lcName)) {\n      // This attribute is safe\n      /* Otherwise, check the name is permitted */\n    } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      return false;\n\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n      // This attribute is safe\n      /* Check no script, data or unknown possibly unsafe URI\n        unless we know URI values are safe for that attribute */\n    } else if (IS_ALLOWED_URI$$1.test(value.replace(ATTR_WHITESPACE$$1, ''))) {\n      // This attribute is safe\n      /* Keep image data URIs alive if src/xlink:href is allowed */\n      /* Further prevent gadget XSS for dynamically built script tags */\n    } else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && value.indexOf('data:') === 0 && DATA_URI_TAGS[lcTag]) {\n      // This attribute is safe\n      /* Allow unknown protocols: This provides support for links that\n        are handled by protocol handlers which may be unknown ahead of\n        time, e.g. fb:, spotify: */\n    } else if (ALLOW_UNKNOWN_PROTOCOLS && !IS_SCRIPT_OR_DATA$$1.test(value.replace(ATTR_WHITESPACE$$1, ''))) {\n      // This attribute is safe\n      /* Check for binary attributes */\n      // eslint-disable-next-line no-negated-condition\n    } else if (!value) {\n      // Binary attributes are safe at this point\n      /* Anything else, presume unsafe, do not add it back */\n    } else {\n      return false;\n    }\n\n    return true;\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} currentNode to sanitize\n   */\n  // eslint-disable-next-line complexity\n  var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    var attr = void 0;\n    var value = void 0;\n    var lcName = void 0;\n    var idAttr = void 0;\n    var l = void 0;\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    var attributes = currentNode.attributes;\n\n    /* Check if we have attributes; if not we might have a text node */\n\n    if (!attributes) {\n      return;\n    }\n\n    var hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR\n    };\n    l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      attr = attributes[l];\n      var _attr = attr,\n          name = _attr.name,\n          namespaceURI = _attr.namespaceURI;\n\n      value = attr.value.trim();\n      lcName = name.toLowerCase();\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n\n      /* Remove attribute */\n      // Safari (iOS + Mac), last tested v8.0.5, crashes if you try to\n      // remove a \"name\" attribute from an <img> tag that has an \"id\"\n      // attribute at the time.\n      if (lcName === 'name' && currentNode.nodeName === 'IMG' && attributes.id) {\n        idAttr = attributes.id;\n        attributes = apply(arraySlice, attributes, []);\n        _removeAttribute('id', currentNode);\n        _removeAttribute(name, currentNode);\n        if (attributes.indexOf(idAttr) > l) {\n          currentNode.setAttribute('id', idAttr.value);\n        }\n      } else if (\n      // This works around a bug in Safari, where input[type=file]\n      // cannot be dynamically set after type has been removed\n      currentNode.nodeName === 'INPUT' && lcName === 'type' && value === 'file' && hookEvent.keepAttr && (ALLOWED_ATTR[lcName] || !FORBID_ATTR[lcName])) {\n        continue;\n      } else {\n        // This avoids a crash in Safari v9.0 with double-ids.\n        // The trick is to first set the id to be empty and then to\n        // remove the attribute\n        if (name === 'id') {\n          currentNode.setAttribute(name, '');\n        }\n\n        _removeAttribute(name, currentNode);\n      }\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Take care of an mXSS pattern using namespace switches */\n      if (/svg|math/i.test(currentNode.namespaceURI) && new RegExp('</(' + Object.keys(FORBID_CONTENTS).join('|') + ')', 'i').test(value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        value = value.replace(MUSTACHE_EXPR$$1, ' ');\n        value = value.replace(ERB_EXPR$$1, ' ');\n      }\n\n      /* Is `value` valid for this attribute? */\n      var lcTag = currentNode.nodeName.toLowerCase();\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n\n        DOMPurify.removed.pop();\n      } catch (error) {}\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n  var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    var shadowNode = void 0;\n    var shadowIterator = _createIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} configuration object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg) {\n    var body = void 0;\n    var importedNode = void 0;\n    var currentNode = void 0;\n    var oldNode = void 0;\n    var returnNode = void 0;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    if (!dirty) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      // eslint-disable-next-line no-negated-condition\n      if (typeof dirty.toString !== 'function') {\n        throw new TypeError('toString is not a function');\n      } else {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw new TypeError('dirty is not a string, aborting');\n        }\n      }\n    }\n\n    /* Check we can run. Otherwise fall back or ignore */\n    if (!DOMPurify.isSupported) {\n      if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n        if (typeof dirty === 'string') {\n          return window.toStaticHTML(dirty);\n        }\n\n        if (_isNode(dirty)) {\n          return window.toStaticHTML(dirty.outerHTML);\n        }\n      }\n\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    if (IN_PLACE) {\n      /* No special handling necessary for in-place sanitization */\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!-->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && RETURN_TRUSTED_TYPE && dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : emptyHTML;\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Fix IE's strange behavior with manipulated textNodes #89 */\n      if (currentNode.nodeType === 3 && currentNode === oldNode) {\n        continue;\n      }\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n\n      oldNode = currentNode;\n    }\n\n    oldNode = null;\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (RETURN_DOM_IMPORT) {\n        /* AdoptNode() is not used because internal state is not reset\n               (e.g. the past names map of a HTMLFormElement), this is safe\n               in theory but we would rather not risk another attack vector.\n               The state that is cloned by importNode() is explicitly defined\n               by the specs. */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      serializedHTML = serializedHTML.replace(MUSTACHE_EXPR$$1, ' ');\n      serializedHTML = serializedHTML.replace(ERB_EXPR$$1, ' ');\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n  DOMPurify.setConfig = function (cfg) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {string} tag Tag name of containing element.\n   * @param  {string} attr Attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    var lcTag = tag.toLowerCase();\n    var lcName = attr.toLowerCase();\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    hooks[entryPoint].push(hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint].pop();\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   *\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nvar purify = createDOMPurify();\n\nreturn purify;\n\n})));\n//# sourceMappingURL=purify.js.map\n","import { createRef, HTMLProps, RefObject, useEffect } from '@wordpress/element';\nimport classNames from 'classnames';\n\nimport styles from './style.scss';\n\ninterface Props extends HTMLProps<HTMLTextAreaElement> {\n    inputRef?: RefObject<HTMLTextAreaElement>;\n}\n\nfunction TextareaAutosize({ inputRef, className, ...props }: Props) {\n    const ref = inputRef || createRef<HTMLTextAreaElement>();\n\n    useEffect(() => {\n        const { current: textarea } = ref;\n        if (textarea) {\n            const offset = textarea.offsetHeight - textarea.clientHeight;\n            textarea.style.height = 'auto';\n            textarea.style.height = `${textarea.scrollHeight + offset}px`;\n        }\n    });\n\n    return (\n        <textarea\n            {...props}\n            ref={ref}\n            className={classNames(styles.textarea, className)}\n            rows={1}\n        />\n    );\n}\n\nexport default TextareaAutosize;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"style__textarea___g5DyY\"};","import { select } from '@wordpress/data';\nimport { Bibliography as RawBib, Bibmeta, Citation, Engine } from 'citeproc';\nimport { flatten, zipWith } from 'lodash';\n\nimport { localeCache } from 'utils/cache';\n\nnamespace Processor {\n    export interface BibItem {\n        content: string;\n        id: string;\n    }\n\n    export type BibMeta = Partial<\n        Pick<\n            Bibmeta,\n            'entryspacing' | 'hangingindent' | 'linespacing' | 'maxoffset'\n        > & {\n            secondFieldAlign: Bibmeta['second-field-align'];\n        }\n    >;\n\n    export interface Bibliography {\n        items: BibItem[];\n        meta: BibMeta;\n    }\n\n    export interface CitationMeta {\n        /**\n         * ID of the citation HTMLElement.\n         */\n        id: string;\n        /**\n         * Parsed citation HTML to set as the citation HTMLElement innerHTML.\n         */\n        html: string;\n        /**\n         * A JSON stringified list of the sorted item ids in the citation.\n         */\n        sortedItems: string;\n    }\n}\nclass Processor {\n    private static instance: Processor | null = null;\n    private style!: string;\n    private engine!: Engine;\n\n    private sys: Engine['sys'] = {\n        retrieveItem(id: string): CSL.Data {\n            const item = select('abt/data').getItemById(id);\n            if (!item) {\n                throw new Error(\n                    `CSL Data could not be found for item ID \"${id}\"`,\n                );\n            }\n            return item;\n        },\n        retrieveLocale(lang: string) {\n            const locale = localeCache.getItem(lang);\n            if (!locale) {\n                throw new Error(\n                    `Requested locale \"${lang}\" was not prefetched`,\n                );\n            }\n            return locale;\n        },\n    };\n\n    /* eslint-disable @typescript-eslint/camelcase */\n    constructor(style: string) {\n        const { instance } = Processor;\n        if (instance) {\n            if (instance.style !== style) {\n                instance.style = style;\n                instance.engine = new Engine(instance.sys, instance.style);\n                instance.engine.opt.development_extensions.wrap_url_and_doi = true;\n            }\n            return instance;\n        } else {\n            Processor.instance = this;\n            this.style = style;\n            this.engine = new Engine(this.sys, this.style);\n            this.engine.opt.development_extensions.wrap_url_and_doi = true;\n        }\n    }\n    /* eslint-enable @typescript-eslint/camelcase */\n\n    parseCitations(citations: Citation[]): Processor.CitationMeta[] {\n        return this.engine\n            .rebuildProcessorState(citations)\n            .map(([id, , html]) => {\n                const sortedItems = JSON.stringify(\n                    this.registry.citationById[id].sortedItems.map(\n                        ([ref]) => ref.id,\n                    ),\n                );\n                return {\n                    id,\n                    html,\n                    sortedItems,\n                };\n            });\n    }\n\n    get bibliography(): Processor.Bibliography {\n        let data: RawBib | false;\n        try {\n            data = this.engine.makeBibliography();\n            if (!data) {\n                return { items: [], meta: {} };\n            }\n        } catch {\n            return { items: [], meta: {} };\n        }\n        const [meta, html] = data;\n        const {\n            entryspacing,\n            hangingindent,\n            linespacing,\n            maxoffset,\n            ['second-field-align']: secondFieldAlign,\n        } = meta;\n        return {\n            meta: {\n                entryspacing,\n                hangingindent,\n                linespacing,\n                maxoffset,\n                secondFieldAlign: secondFieldAlign\n                    ? secondFieldAlign\n                    : undefined,\n            },\n            items: zipWith(flatten(meta.entry_ids), html, (id, content) => ({\n                id,\n                content,\n            })),\n        };\n    }\n\n    private get registry() {\n        return this.engine.registry.citationreg;\n    }\n}\n\nexport default Processor;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"heading\":\"style__heading___2dqtH\"};","import {\n    AlignmentToolbar,\n    InspectorControls,\n    RichText,\n} from '@wordpress/block-editor';\nimport { BlockEditProps } from '@wordpress/blocks';\nimport { PanelBody, ToggleControl, Toolbar } from '@wordpress/components';\nimport { useMemo } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport classNames from 'classnames';\nimport { range } from 'lodash';\n\nimport TextareaAutosize from 'components/textarea-autosize';\nimport { parseBibAttributes } from 'utils/editor';\n\nimport { Attributes } from './';\nimport styles from './style.scss';\n\ntype HeadingType = 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';\n\ntype Props = BlockEditProps<Attributes>;\n\nexport default function BibliographyEdit(props: Props) {\n    const { attributes, setAttributes } = props;\n    const { heading, headingAlign, headingLevel, isToggleable } = attributes;\n    return (\n        <>\n            <InspectorControls>\n                <PanelBody\n                    title={__(\n                        'Bibliography Settings',\n                        'academic-bloggers-toolkit',\n                    )}\n                >\n                    {__('Heading Level', 'academic-bloggers-toolkit')}\n                    <Toolbar\n                        controls={range(1, 7).map(level => ({\n                            icon: 'heading',\n                            title: sprintf(__('Heading %d'), level),\n                            isActive: level === headingLevel,\n                            onClick: () =>\n                                setAttributes({ headingLevel: level }),\n                            subscript: `${level}`,\n                        }))}\n                    />\n                    {__('Heading Alignment', 'academic-bloggers-toolkit')}\n                    <AlignmentToolbar\n                        value={headingAlign}\n                        onChange={align =>\n                            setAttributes({\n                                headingAlign: align as typeof headingAlign,\n                            })\n                        }\n                    />\n                    <ToggleControl\n                        checked={isToggleable}\n                        help={__(\n                            'Toggle mode can only be enabled if the bibliography has a heading.',\n                            'academic-bloggers-toolkit',\n                        )}\n                        label={__('Enable toggle', 'academic-bloggers-toolkit')}\n                        onChange={toggleable =>\n                            heading &&\n                            setAttributes({ isToggleable: toggleable })\n                        }\n                    />\n                </PanelBody>\n            </InspectorControls>\n            <Bibliography {...props} />\n        </>\n    );\n}\n\nfunction Bibliography(props: Props) {\n    const { attributes } = props;\n    const { isToggleable } = attributes;\n    return (\n        <section\n            aria-label={__('Bibliography', 'academic-bloggers-toolkit')}\n            className=\"abt-bibliography\"\n        >\n            {isToggleable && (\n                <details>\n                    <summary>\n                        <BibliographyHeading {...props} />\n                    </summary>\n                    <ItemList {...attributes} />\n                </details>\n            )}\n            {!isToggleable && (\n                <>\n                    <BibliographyHeading {...props} />\n                    <ItemList {...attributes} />\n                </>\n            )}\n        </section>\n    );\n}\n\nfunction BibliographyHeading({\n    attributes: { heading, headingAlign, headingLevel, isToggleable },\n    isSelected,\n    setAttributes,\n}: Props) {\n    if (!isSelected && !heading) {\n        return null;\n    }\n    const Tag = `h${headingLevel}` as HeadingType;\n    const className = useMemo(\n        () =>\n            classNames(\n                {\n                    'abt-bibliography__heading': !isToggleable,\n                },\n                styles.heading,\n            ),\n        [isToggleable],\n    );\n    return (\n        <Tag className={className} style={{ textAlign: headingAlign }}>\n            {isSelected && (\n                <TextareaAutosize\n                    placeholder={__(\n                        'Write heading...',\n                        'academic-bloggers-toolkit',\n                    )}\n                    value={heading}\n                    onBlur={() =>\n                        !heading && setAttributes({ isToggleable: false })\n                    }\n                    onChange={e =>\n                        setAttributes({ heading: e.currentTarget.value })\n                    }\n                />\n            )}\n            {!isSelected && heading}\n        </Tag>\n    );\n}\n\nfunction ItemList(atts: Props['attributes']) {\n    const containerAttrs = useMemo(() => parseBibAttributes(atts), [atts]);\n    return (\n        <ol className=\"abt-bibliography__body\" {...containerAttrs}>\n            {atts.items.map(({ content, id }) => (\n                <RichText.Content\n                    key={id}\n                    id={id}\n                    tagName=\"li\"\n                    value={content}\n                />\n            ))}\n        </ol>\n    );\n}\n","import { RichText } from '@wordpress/block-editor';\nimport { BlockSaveProps } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\nimport { Attributes } from './';\n\nimport { parseBibAttributes } from 'utils/editor';\nimport styles from './style.scss';\n\ntype HeadingType = 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';\n\ntype Props = BlockSaveProps<Attributes>;\n\nexport default function BibliographySave(props: Props) {\n    const { attributes } = props;\n    const { isToggleable } = attributes;\n    return (\n        // eslint-disable-next-line jsx-a11y/no-redundant-roles\n        <section\n            aria-label={__('Bibliography', 'academic-bloggers-toolkit')}\n            className=\"abt-bibliography\"\n            role=\"region\"\n        >\n            {isToggleable && (\n                <details>\n                    <summary className={styles.summary}>\n                        <BibliographyHeading {...props} />\n                    </summary>\n                    <ItemList {...attributes} />\n                </details>\n            )}\n            {!isToggleable && (\n                <>\n                    <BibliographyHeading {...props} />\n                    <ItemList {...attributes} />\n                </>\n            )}\n        </section>\n    );\n}\n\nfunction BibliographyHeading({\n    attributes: { heading, headingAlign: textAlign, headingLevel },\n}: Props) {\n    if (!heading) {\n        return null;\n    }\n    const Tag = `h${headingLevel}` as HeadingType;\n    return (\n        <Tag className=\"abt-bibliography__heading\" style={{ textAlign }}>\n            {heading}\n        </Tag>\n    );\n}\n\nfunction ItemList(atts: Props['attributes']) {\n    const containerAttrs = parseBibAttributes(atts);\n    return (\n        <ol className=\"abt-bibliography__body\" {...containerAttrs}>\n            {atts.items.map(({ content, id }) => (\n                <RichText.Content\n                    key={id}\n                    id={id}\n                    tagName=\"li\"\n                    value={content}\n                />\n            ))}\n        </ol>\n    );\n}\n","import { BlockConfiguration, createBlock } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\nimport Processor from 'utils/processor';\n\nimport BibliographyEdit from './edit';\nimport BibliographySave from './save';\n\nexport interface Attributes {\n    items: Processor.BibItem[];\n    heading: string;\n    headingLevel: number;\n    isToggleable: boolean;\n    headingAlign?: 'left' | 'right' | 'center';\n    entryspacing?: string;\n    hangingindent?: string;\n    linespacing?: string;\n    maxoffset?: string;\n    secondFieldAlign?: 'flush' | 'margin';\n}\n\nexport const name = 'abt/bibliography';\n\nexport const config: BlockConfiguration<Attributes> = {\n    title: __('Bibliography', 'academic-bloggers-toolkit'),\n    category: 'widgets',\n    description: __(\n        'Display a list of your cited references.',\n        'academic-bloggers-toolkit',\n    ),\n    icon: 'welcome-learn-more',\n    attributes: {\n        entryspacing: {\n            type: 'string',\n            source: 'attribute',\n            attribute: 'data-entryspacing',\n            selector: '.abt-bibliography__body',\n        },\n        hangingindent: {\n            type: 'string',\n            source: 'attribute',\n            attribute: 'data-hangingindent',\n            selector: '.abt-bibliography__body',\n        },\n        linespacing: {\n            type: 'string',\n            source: 'attribute',\n            attribute: 'data-linespacing',\n            selector: '.abt-bibliography__body',\n        },\n        maxoffset: {\n            type: 'string',\n            source: 'attribute',\n            attribute: 'data-maxoffset',\n            selector: '.abt-bibliography__body',\n        },\n        secondFieldAlign: {\n            type: 'string',\n            source: 'attribute',\n            attribute: 'data-second-field-align',\n            selector: '.abt-bibliography__body',\n        },\n        items: {\n            type: 'array',\n            default: [],\n            source: 'query',\n            selector: 'li',\n            query: {\n                id: {\n                    source: 'attribute',\n                    type: 'string',\n                    attribute: 'id',\n                },\n                content: {\n                    source: 'html',\n                    type: 'string',\n                },\n            },\n        },\n        heading: {\n            type: 'string',\n            default: '',\n        },\n        headingLevel: {\n            type: 'number',\n            default: 3,\n        },\n        headingAlign: {\n            type: 'string',\n        },\n        isToggleable: {\n            type: 'boolean',\n            default: false,\n        },\n    },\n    supports: {\n        html: false,\n        inserter: false,\n        multiple: false,\n        reusable: false,\n    },\n    transforms: {\n        from: [\n            {\n                type: 'raw',\n                selector: '.abt-bibliography',\n                transform(node: HTMLDivElement) {\n                    const heading = node.querySelector<HTMLElement>(\n                        '.abt-bibliography__heading',\n                    );\n                    const body = node.querySelector<HTMLElement>(\n                        '.abt-bibliography__container',\n                    );\n                    if (!body || body.children.length === 0) {\n                        return;\n                    }\n                    let attributes: Partial<Attributes> = {\n                        items: [...body.children].map(item => ({\n                            id: item.id,\n                            content: item.innerHTML,\n                        })),\n                    };\n                    if (heading && heading.textContent) {\n                        const re = /^H([1-6])$/i;\n                        const {\n                            dataset: { headingLevel },\n                            nodeName,\n                            textContent,\n                        } = heading;\n                        let headingMatch = re.exec(nodeName);\n                        if (headingMatch) {\n                            attributes = {\n                                ...attributes,\n                                heading: textContent,\n                                headingLevel: parseInt(headingMatch[1], 10),\n                            };\n                        } else if (nodeName === 'BUTTON' && headingLevel) {\n                            headingMatch = re.exec(headingLevel);\n                            attributes = {\n                                ...attributes,\n                                heading: textContent,\n                                headingLevel: parseInt(\n                                    headingMatch ? headingMatch[1] : '3',\n                                    10,\n                                ),\n                                isToggleable: true,\n                            };\n                        } else {\n                            return;\n                        }\n                    }\n                    return createBlock('abt/bibliography', attributes);\n                },\n            },\n        ],\n    },\n    edit: BibliographyEdit,\n    save: BibliographySave,\n};\n\nexport default [name, config] as [string, typeof config];\n","import { BlockConfiguration } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\nimport FootnotesEdit from './edit';\nimport FootnotesSave from './save';\n\nexport interface Attributes {\n    items: Array<{\n        id: string;\n        content: string;\n    }>;\n}\n\nexport const name = 'abt/footnotes';\n\nexport const config: BlockConfiguration<Attributes> = {\n    title: __('Footnotes', 'academic-bloggers-toolkit'),\n    category: 'widgets',\n    description: __('Display a list of footnotes', 'academic-bloggers-toolkit'),\n    icon: 'testimonial',\n    attributes: {\n        items: {\n            type: 'array',\n            default: [],\n            source: 'query',\n            selector: 'li',\n            query: {\n                id: {\n                    source: 'attribute',\n                    type: 'string',\n                    attribute: 'id',\n                },\n                content: {\n                    source: 'html',\n                    type: 'string',\n                },\n            },\n        },\n    },\n    supports: {\n        html: false,\n        inserter: false,\n        multiple: false,\n        reusable: false,\n    },\n    edit: FootnotesEdit,\n    save: FootnotesSave,\n};\n\nexport default [name, config] as [string, typeof config];\n","import { RichText } from '@wordpress/block-editor';\nimport { BlockEditProps } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\nimport { Attributes } from './';\n\ntype Props = BlockEditProps<Attributes>;\n\nexport default function FootnotesEdit({ attributes: { items } }: Props) {\n    return (\n        <section\n            aria-label={__('Footnotes', 'academic-bloggers-toolkit')}\n            className=\"abt-footnotes\"\n        >\n            <hr />\n            <ol>\n                {items.map(({ content, id }) => (\n                    <RichText.Content\n                        key={id}\n                        className=\"abt-footnotes-item\"\n                        id={id}\n                        tagName=\"li\"\n                        value={content}\n                    />\n                ))}\n            </ol>\n        </section>\n    );\n}\n","import { RichText } from '@wordpress/block-editor';\nimport { BlockSaveProps } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\nimport { Attributes } from './';\n\ntype Props = BlockSaveProps<Attributes>;\n\nexport default function FootnotesSave({ attributes: { items } }: Props) {\n    return (\n        // eslint-disable-next-line jsx-a11y/no-redundant-roles\n        <section\n            aria-label={__('Footnotes', 'academic-bloggers-toolkit')}\n            className=\"abt-footnotes\"\n            role=\"region\"\n        >\n            <hr />\n            <ol>\n                {items.map(({ content, id }) => (\n                    <RichText.Content\n                        key={id}\n                        className=\"abt-footnotes-item\"\n                        id={id}\n                        tagName=\"li\"\n                        value={content}\n                    />\n                ))}\n            </ol>\n        </section>\n    );\n}\n","import { RichText } from '@wordpress/block-editor';\nimport { IconButton } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport classNames from 'classnames';\n\nimport styles from './style.scss';\n\ninterface Props {\n    id: string;\n    content: string;\n    onRemove(): void;\n    onMoveDown?(): void;\n    onMoveUp?(): void;\n}\n\nexport default function LiveItem({\n    id,\n    content,\n    onRemove,\n    onMoveDown,\n    onMoveUp,\n}: Props) {\n    return (\n        <div key={id} className={styles.row}>\n            <RichText.Content\n                className={classNames('csl-entry', styles.item)}\n                data-id={id}\n                style={{ display: 'list-item' }}\n                tagName=\"div\"\n                value={content}\n            />\n            <div className={styles.buttonList}>\n                <IconButton\n                    disabled={!onMoveUp}\n                    icon=\"arrow-up-alt2\"\n                    label={__('Move item up', 'academic-bloggers-toolkit')}\n                    onClick={onMoveUp}\n                />\n                <IconButton\n                    icon=\"trash\"\n                    label={__('Remove item', 'academic-bloggers-toolkit')}\n                    onClick={onRemove}\n                />\n                <IconButton\n                    disabled={!onMoveDown}\n                    icon=\"arrow-down-alt2\"\n                    label={__('Move item down', 'academic-bloggers-toolkit')}\n                    onClick={onMoveDown}\n                />\n            </div>\n        </div>\n    );\n}\n","import {\n    BlockFormatControls,\n    InspectorControls,\n    RichText,\n} from '@wordpress/block-editor';\nimport { BlockEditProps } from '@wordpress/blocks';\nimport { PanelBody, Placeholder, Toolbar } from '@wordpress/components';\nimport { select as globalSelect, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport classNames from 'classnames';\n\nimport CountIcon from 'components/count-icon';\nimport ReferenceItem from 'gutenberg/components/reference-item';\nimport SidebarItemList from 'gutenberg/components/sidebar-item-list';\nimport { localeCache, styleCache } from 'utils/cache';\nimport { swapWith } from 'utils/data';\nimport { stripListItem } from 'utils/editor';\nimport Processor from 'utils/processor';\n\nimport { Attributes } from './';\nimport LiveItem from './live-item';\nimport styles from './style.scss';\n\ntype Props = BlockEditProps<Attributes>;\n\nexport default function StaticBibEdit(props: Props) {\n    const {\n        attributes: { orderedList, items },\n        setAttributes,\n    } = props;\n    const references = useSelect(select => {\n        const existingIds = items.map(item => item.id);\n        return select('abt/data')\n            .getSortedItems()\n            .filter(item => !existingIds.includes(item.id));\n    });\n    return (\n        <>\n            <InspectorControls>\n                <PanelBody>\n                    {__(\n                        'Double click on one or more items in the list below to insert them into the end of the list.',\n                        'academic-bloggers-toolkit',\n                    )}\n                </PanelBody>\n                <PanelBody\n                    icon={<CountIcon count={references.length} />}\n                    initialOpen={false}\n                    title={__(\n                        'Available References',\n                        'academic-bloggers-toolkit',\n                    )}\n                >\n                    <SidebarItemList\n                        items={references}\n                        renderItem={item => <ReferenceItem item={item} />}\n                        onItemDoubleClick={async id =>\n                            addItem(id, references, items, setAttributes)\n                        }\n                    />\n                </PanelBody>\n            </InspectorControls>\n            <BlockFormatControls>\n                <Toolbar\n                    controls={[\n                        {\n                            icon: 'editor-ul',\n                            title: __(\n                                'Convert to unordered list',\n                                'academic-bloggers-toolkit',\n                            ),\n                            isActive: orderedList === false,\n                            onClick() {\n                                setAttributes({ orderedList: false });\n                            },\n                        },\n                        {\n                            icon: 'editor-ol',\n                            title: __(\n                                'Convert to ordered list',\n                                'academic-bloggers-toolkit',\n                            ),\n                            isActive: orderedList === true,\n                            onClick() {\n                                setAttributes({ orderedList: true });\n                            },\n                        },\n                    ]}\n                />\n            </BlockFormatControls>\n            {/* eslint-disable-next-line jsx-a11y/no-redundant-roles */}\n            <section\n                aria-label={__('References', 'academic-bloggers-toolkit')}\n                className=\"abt-static-bib\"\n                role=\"region\"\n            >\n                <ItemList {...props} />\n            </section>\n        </>\n    );\n}\n\nfunction ItemList({\n    attributes: { items, orderedList },\n    isSelected,\n    setAttributes,\n}: Props) {\n    const List = orderedList ? 'ol' : 'ul';\n    if (items.length === 0) {\n        return (\n            <Placeholder\n                icon=\"welcome-learn-more\"\n                label={__(\n                    'No references added yet',\n                    'academic-bloggers-toolkit',\n                )}\n            >\n                {__(\n                    'Add references to this list by double clicking one or more items listed in the \"Avaliable References\" section of the block settings panel.',\n                    'academic-bloggers-toolkit',\n                )}\n            </Placeholder>\n        );\n    }\n    if (isSelected) {\n        return (\n            <List className=\"abt-bibliography__body\">\n                {items.map(({ content, id }, i) => (\n                    <LiveItem\n                        key={id}\n                        content={content}\n                        id={id}\n                        onMoveDown={\n                            i === items.length - 1\n                                ? undefined\n                                : () =>\n                                      setAttributes({\n                                          items: swapWith(items, i, i + 1),\n                                      })\n                        }\n                        onMoveUp={\n                            i === 0\n                                ? undefined\n                                : () =>\n                                      setAttributes({\n                                          items: swapWith(items, i, i - 1),\n                                      })\n                        }\n                        onRemove={() =>\n                            setAttributes({\n                                items: [\n                                    ...items.slice(0, i),\n                                    ...items.slice(i + 1),\n                                ],\n                            })\n                        }\n                    />\n                ))}\n            </List>\n        );\n    }\n    return (\n        <List className=\"abt-bibliography__body\">\n            {items.map(({ content, id }) => (\n                <RichText.Content\n                    key={id}\n                    className={classNames('csl-entry', styles.item)}\n                    data-id={id}\n                    tagName=\"li\"\n                    value={content}\n                />\n            ))}\n        </List>\n    );\n}\n\nasync function addItem(\n    id: string,\n    references: CSL.Data[],\n    items: Processor.BibItem[],\n    setAttributes: (attrs: Partial<Attributes>) => void,\n) {\n    const data = references.find(item => item.id === id);\n    if (!data) {\n        return;\n    }\n    const styleXml = await styleCache.fetchItem(\n        globalSelect('abt/data').getStyle().value,\n    );\n    await localeCache.fetchItem(styleXml);\n    const processor = new Processor(styleXml);\n    processor.parseCitations([\n        {\n            citationID: '',\n            citationItems: [\n                {\n                    id: data.id,\n                    item: data,\n                },\n            ],\n            properties: {\n                index: 0,\n                noteIndex: 0,\n            },\n        },\n    ]);\n    const newItem = processor.bibliography.items[0];\n    if (newItem) {\n        setAttributes({\n            items: [\n                ...items,\n                {\n                    ...newItem,\n                    content: stripListItem(newItem.content),\n                },\n            ],\n        });\n    }\n}\n","import { BlockConfiguration, createBlock } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport uuid from 'uuid/v4';\n\nimport { stripListItem } from 'utils/editor';\nimport Processor from 'utils/processor';\n\nimport edit from './edit';\nimport save from './save';\n\nexport interface Attributes {\n    items: Processor.BibItem[];\n    orderedList: boolean;\n}\n\nexport const name = 'abt/static-bibliography';\n\nexport const config: BlockConfiguration<Attributes> = {\n    title: __('Static Bibliography', 'academic-bloggers-toolkit'),\n    category: 'widgets',\n    description: __(\n        'Display a static list of references.',\n        'academic-bloggers-toolkit',\n    ),\n    icon: 'welcome-learn-more',\n    keywords: [\n        __('reference', 'academic-bloggers-toolkit'),\n        __('citation', 'academic-bloggers-toolkit'),\n        __('sources', 'academic-bloggers-toolkit'),\n    ],\n    attributes: {\n        // TODO: need csl attributes here prob (see blocks/bibliography/index.ts)\n        items: {\n            type: 'array',\n            source: 'query',\n            selector: 'li',\n            default: [],\n            query: {\n                content: {\n                    type: 'string',\n                    source: 'html',\n                },\n                id: {\n                    type: 'string',\n                    source: 'attribute',\n                    attribute: 'data-id',\n                },\n            },\n        },\n        orderedList: {\n            type: 'boolean',\n            default: true,\n        },\n    },\n    supports: {\n        anchor: true,\n        html: false,\n    },\n    transforms: {\n        from: [\n            {\n                type: 'raw',\n                selector: '.abt-static-bib',\n                transform(node: HTMLDivElement) {\n                    const body = node.querySelector<HTMLDivElement>(\n                        '.abt-bibliography__container',\n                    );\n                    if (body) {\n                        const items = [...body.children].map(item => {\n                            const content = item.querySelector<HTMLDivElement>(\n                                '.csl-entry',\n                            );\n                            const id = item.id || uuid();\n                            return {\n                                id,\n                                content: content\n                                    ? stripListItem(content)\n                                    : item.innerHTML,\n                            };\n                        });\n                        return createBlock<Attributes>(\n                            'abt/static-bibliography',\n                            {\n                                items,\n                            },\n                        );\n                    }\n                    return;\n                },\n            },\n        ],\n    },\n    edit,\n    save,\n};\n\nexport default [name, config] as [string, typeof config];\n","import { RichText } from '@wordpress/block-editor';\nimport { BlockSaveProps } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\nimport { Attributes } from './';\n\ntype Props = BlockSaveProps<Attributes>;\n\nexport default function BibliographySave({\n    attributes: { items, orderedList },\n}: Props) {\n    const ListTag = orderedList ? 'ol' : 'ul';\n    return (\n        // eslint-disable-next-line jsx-a11y/no-redundant-roles\n        <section\n            aria-label={__('References', 'academic-bloggers-toolkit')}\n            className=\"abt-static-bib\"\n            role=\"region\"\n        >\n            <ListTag className=\"abt-bibliography__body\">\n                {items.map(({ content, id }, i) => (\n                    <RichText.Content\n                        key={i}\n                        className=\"csl-entry\"\n                        data-id={id}\n                        tagName=\"li\"\n                        value={content}\n                    />\n                ))}\n            </ListTag>\n        </section>\n    );\n}\n","import { registerBlockType } from '@wordpress/blocks';\n\nimport 'css/_bibliography.scss?global';\nimport 'css/_footnotes.scss?global';\n\nimport bibliographyBlock from './bibliography';\nimport footnotesBlock from './footnotes';\nimport staticBibliographyBlock from './static-bibliography';\n\nregisterBlockType(...bibliographyBlock);\nregisterBlockType(...footnotesBlock);\nregisterBlockType(...staticBibliographyBlock);\n"],"sourceRoot":""}