"use strict";function nf_duplicate_field(e){jQuery(e.find(".form_field.grid-system")).each(function(){jQuery(this).find(".id-"+jQuery(this).attr("id")).removeClass("id-"+jQuery(this).attr("id"))});var a,s,i,r=e.clone();return r.find(".edit-done").remove(),r.find(".currently_editing_field").removeClass("currently_editing_field"),r.find(".currently_editing_settings").remove(),r.find(".over-field").removeClass("over-field"),r.find(".parent-over-field").removeClass("parent-over-field"),(r.hasClass("date")||r.hasClass("time"))&&(r.find(".bootstrap-datetimepicker-widget").remove(),setup_form_element(r)),r.hasClass("field_spacer")&&(r.find(".ui-resizable-handle").remove(),r.attr("class","form_field field_spacer"),r.find(".field_spacer").resizable({handles:"s",minHeight:5,resize:function(e,t){r.find(".total_px").text(t.size.height)}})),r.hasClass("html_image")&&(r.find(".the-image-container .ui-resizable-handle").remove(),r.find(".the-image-container img").unwrap(),a=r.find(".the-image-container"),s=r.find(".show-width"),i=r.find(".show-height"),r.find(".the-image-container img").resizable({minHeight:20,minWidth:20,resize:function(e,t){a.addClass("resizing"),a.css("width",t.size.width+"px"),a.css("height",t.size.height+"px"),s.text(t.size.width+"px"),i.text(t.size.height+"px"),r.hasClass("currently_editing")&&(jQuery("#set_image_width").val(t.size.width),jQuery("#set_image_height").val(t.size.height))},stop:function(e,t){a.removeClass("resizing")}})),r.attr("id","_"+Math.round(99999*Math.random())),r.find(".form_field").each(function(){jQuery(this).attr("id","_"+Math.round(99999*Math.random()))}),r.removeClass("currently_editing"),e.hasClass("grid-system")&&(r.find(".id-"+e.attr("id")).removeClass("id-"+e.attr("id")),nf_setup_grid(r),jQuery(r.find(".grid-system")).each(function(){nf_setup_grid(jQuery(this))}),jQuery(e.find(".grid-system")).each(function(){nf_setup_grid(jQuery(this))})),r}function run_batch_sim_select(e){e.hasClass("icon-select-group")&&jQuery(".nex-forms-container").find(".icon-select-group").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("digital-signature")&&jQuery(".nex-forms-container").find(".form_field.digital-signature").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("preset_fields")&&jQuery(".nex-forms-container").find(".form_field.text").addClass("batch_edit").addClass("batch_edit_sim"),(e.hasClass("textarea")||e.hasClass("Query"))&&(jQuery(".nex-forms-container").find(".form_field.textarea").addClass("batch_edit").addClass("batch_edit_sim"),jQuery(".nex-forms-container").find(".form_field.Query").addClass("batch_edit").addClass("batch_edit_sim")),(e.hasClass("text")||e.hasClass("name")||e.hasClass("email")||e.hasClass("phone_number")||e.hasClass("url"))&&(jQuery(".nex-forms-container").find(".form_field.text").addClass("batch_edit").addClass("batch_edit_sim"),jQuery(".nex-forms-container").find(".form_field.name").addClass("batch_edit").addClass("batch_edit_sim"),jQuery(".nex-forms-container").find(".form_field.email").addClass("batch_edit").addClass("batch_edit_sim"),jQuery(".nex-forms-container").find(".form_field.phone_number").addClass("batch_edit").addClass("batch_edit_sim"),jQuery(".nex-forms-container").find(".form_field.url").addClass("batch_edit").addClass("batch_edit_sim")),e.hasClass("password")&&jQuery(".nex-forms-container").find(".form_field.password").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("select")&&jQuery(".nex-forms-container").find(".form_field.select").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("multi-select")&&jQuery(".nex-forms-container").find(".form_field.multi-select").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("radio-group")&&jQuery(".nex-forms-container").find(".form_field.radio-group").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("check-group")&&jQuery(".nex-forms-container").find(".form_field.check-group").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("single-image-select-group")&&jQuery(".nex-forms-container").find(".form_field.single-image-select-group").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("multi-image-select-group")&&jQuery(".nex-forms-container").find(".form_field.multi-image-select-group").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("image-choices-field")&&jQuery(".nex-forms-container").find(".form_field.image-choices-field").addClass("batch_edit").addClass("batch_edit_sim"),(e.hasClass("slider")||e.hasClass("md-slider"))&&jQuery(".nex-forms-container").find(".form_field.slider").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("touch_spinner")&&jQuery(".nex-forms-container").find(".form_field.touch_spinner").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("autocomplete")&&jQuery(".nex-forms-container").find(".form_field.autocomplete").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("tags")&&jQuery(".nex-forms-container").find(".form_field.tags").addClass("batch_edit").addClass("batch_edit_sim"),(e.hasClass("date")||e.hasClass("md-datepicker")||e.hasClass("jq-datepicker"))&&(jQuery(".nex-forms-container").find(".form_field.date").addClass("batch_edit").addClass("batch_edit_sim"),jQuery(".nex-forms-container").find(".form_field.md-datepicker").addClass("batch_edit").addClass("batch_edit_sim")),(e.hasClass("time")||e.hasClass("md-time-picker")||e.hasClass("jq-time-picker"))&&(jQuery(".nex-forms-container").find(".form_field.time").addClass("batch_edit").addClass("batch_edit_sim"),jQuery(".nex-forms-container").find(".form_field.md-time-picker").addClass("batch_edit").addClass("batch_edit_sim")),e.hasClass("star-rating")&&jQuery(".nex-forms-container").find(".form_field.star-rating").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("thumb-rating")&&jQuery(".nex-forms-container").find(".form_field.thumb-rating").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("smily-rating")&&jQuery(".nex-forms-container").find(".form_field.smily-rating").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("upload-multi")&&jQuery(".nex-forms-container").find(".form_field.upload-multi").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("upload-single")&&jQuery(".nex-forms-container").find(".form_field.upload-single").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("upload-image")&&jQuery(".nex-forms-container").find(".form_field.upload-image").addClass("batch_edit").addClass("batch_edit_sim"),(e.hasClass("submit-button")||e.hasClass("submit-button-2"))&&jQuery(".nex-forms-container").find(".form_field.submit-button").addClass("batch_edit").addClass("batch_edit_sim"),(e.hasClass("submit-button")||e.hasClass("submit-button-2"))&&jQuery(".nex-forms-container").find(".form_field.submit-button").addClass("batch_edit").addClass("batch_edit_sim"),(e.hasClass("submit-button")||e.hasClass("submit-button-2"))&&jQuery(".nex-forms-container").find(".form_field.submit-button").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("html_image")&&jQuery(jQuery(".form-canvas-area").attr("data-sec-pre-class")+" .inner-canvas-container").find(".form_field.html_image").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("heading")&&jQuery(jQuery(".form-canvas-area").attr("data-sec-pre-class")+" .inner-canvas-container").find(".form_field.heading").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("math_logic")&&jQuery(".nex-forms-container").find(".form_field.math_logic").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("paragraph")&&jQuery(jQuery(".form-canvas-area").attr("data-sec-pre-class")+" .inner-canvas-container").find(".form_field.paragraph").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("html")&&jQuery(jQuery(".form-canvas-area").attr("data-sec-pre-class")+" .inner-canvas-container").find(".form_field.html").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("divider")&&jQuery(jQuery(".form-canvas-area").attr("data-sec-pre-class")+" .inner-canvas-container").find(".form_field.divider").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("is_panel")&&jQuery(jQuery(".form-canvas-area").attr("data-sec-pre-class")+" .inner-canvas-container").find(".form_field.is_panel").addClass("batch_edit").addClass("batch_edit_sim"),e.hasClass("grid-system")&&jQuery(jQuery(".form-canvas-area").attr("data-sec-pre-class")+" .inner-canvas-container").find(".form_field.grid-system").addClass("batch_edit").addClass("batch_edit_sim")}function nf_save_state(e){var t;console.log("State saved - "+e),"undo"==e&&(jQuery(".undo").html(jQuery(".nex-forms-container").html()),(t=jQuery(".undo")).find("#editing_text").remove(),t.find(".over-field").removeClass("over-field"),t.find(".over-delete").removeClass("over-delete"),t.find(".set-over-field").removeClass("set-over-field"),t.find(".new_item").removeClass("new_item"),t.find(".form_field").each(function(){var e=jQuery(this).attr("id");jQuery(this).attr("data-id",e),jQuery(this).removeAttr("id")}),jQuery(".history_action.do_undo").addClass("avialable")),"redo"==e&&(jQuery(".redo").html(jQuery(".nex-forms-container").html()),(t=jQuery(".redo")).find("#editing_text").remove(),t.find(".over-field").removeClass("over-field"),t.find(".over-delete").removeClass("over-delete"),t.find(".set-over-field").removeClass("set-over-field"),t.find(".new_item").removeClass("new_item"),t.find(".form_field").each(function(){var e=jQuery(this).attr("id");jQuery(this).attr("data-id",e),jQuery(this).removeAttr("id")}),jQuery(".history_action.do_redo").addClass("avialable"))}function unformat_name(e){if(e){e=e.replace(/_/g," ");return e=(e=e.replace("[","")).replace("]","")}}function format_illegal_chars(e){if(e){"name"!=(e=(e=e.toLowerCase()).replace(/<(.|\n)*?>/g,""))&&"page"!=e&&"post"!=e&&"id"!=e||(e="_"+e);for(var t="",a=0;a<e.length;a++)-1!="\"+=!@#$%^&*()*{};<>,.?~`|/'".indexOf(e.charAt(a))?e.replace(e.charAt(a),""):" "==e.charAt(a)?t+="_":t+=e.charAt(a);return t}}function strstr(e,t,a){return-1!=(e+="").indexOf(t)}function short_str(e){return e}function insertAtCaret(e,t){var a=document.getElementById(e),s=a.scrollTop,i=0,r=a.selectionStart||"0"==a.selectionStart?"ff":!!document.selection&&"ie";"ie"==r?(a.focus(),(n=document.selection.createRange()).moveStart("character",-a.value.length),i=n.text.length):"ff"==r&&(i=a.selectionStart);var n,o=a.value.substring(0,i),e=a.value.substring(i,a.value.length);a.value=o+t+e,i+=t.length,"ie"==r?(a.focus(),(n=document.selection.createRange()).moveStart("character",-a.value.length),n.moveStart("character",i),n.moveEnd("character",0),n.select()):"ff"==r&&(a.selectionStart=i,a.selectionEnd=i,a.focus()),a.scrollTop=s}function setCookie(e,t,a){var s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);s="expires="+s.toUTCString();document.cookie=e+"="+t+"; "+s}function getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){for(var i=a[s];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}function nf_form_modified(e){jQuery(".check_save").addClass("not_saved"),jQuery(".prime_save").find(".ns").remove(),jQuery(".prime_save").append('<span class="ns">*</span>')}function isNumber(e){return""==e||!isNaN(parseFloat(e))&&isFinite(e)}function nf_setup_grid(f){var e=".id-"+f.attr("id");f.find(".grid-width-slider").remove(),f.find(".column_tools").remove();f.find(".grid_input_holder"+e).length<=0&&(e=""),f.find(".grid_input_holder"+e).each(function(e){jQuery(this).append('<div class="column_tools"><div class="add-new-column blank-column" title="Add Column"><span class="fas fa-plus"></span></div><div class="delete-column" title="Delete Column"><span class="fa fa-minus"></span></div></div>');var t="id-"+jQuery(this).closest(".form_field").attr("id"),a=jQuery(this).attr("class"),s="sm";strstr(a,"-xs-")&&(s="xs"),strstr(a,"-md-")&&(s="md"),strstr(a,"-lg-")&&(s="lg"),a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace("nex_prev_steps","")).replace("grid_input_holder","")).replace("dropped","")).replace(t,"")).replace("over-column-tools","")).replace("col-xs-","")).replace("col-sm-","")).replace("col-md-","")).replace("col-lg-","");for(var i=12;0<=i;i--)a=a.replace("grid-target-"+i,"");jQuery(this).attr("data-grid-width",parseInt(a.trim())),jQuery(this).attr("data-grid-num",e);var r=parseInt(a.trim());r<1&&(r=1),jQuery(this).attr("class","grid_input_holder "+t+"  col-"+s+"-"+r+" grid-target-"+e),f.prepend('<div class="grid-width-slider '+t+" grid-"+e+'" data-grid-target="'+e+'" data-grid-width="'+r+'" data-col-class="'+s+'"></div>')}),f.find(".grid-width-slider").each(function(e){for(var r=".id-"+jQuery(this).closest(".form_field").attr("id"),n=parseInt(jQuery(this).attr("data-grid-target")),o=""!=jQuery(this).attr("data-col-class")?jQuery(this).attr("data-col-class"):"sm",t=0,a=n;0<=a;a--)t+=parseInt(f.find(".grid-target-"+a).attr("data-grid-width"));var d,l=0,c=0,u="",_="",p="";jQuery(this).slider({min:0,max:12,value:t,slide:function(e,t){c=l=0;for(var a=n;0<=a;a--)l+=parseInt(f.find(".grid-target-"+a+r).attr("data-grid-width"));u=f.find(".grid-target-"+n+r).first(),d=parseInt(f.find(".grid-target-"+n+r).first().attr("data-grid-width")),_=f.find(".grid-target-"+(n+1)+r).first(),p=parseInt(f.find(".grid-target-"+(n+1)+r).first().attr("data-grid-width")),c=l-d;var s=t.value-c,t=l-t.value+p;if(0<s&&0<t){for(var i=0;i<=12;i++)u.removeClass("col-"+o+"-"+i),_.removeClass("col-"+o+"-"+i);u.addClass("col-"+o+"-"+s),_.addClass("col-"+o+"-"+t)}else e.preventDefault()},stop:function(e,t){f.find(".grid-width-slider.grid-"+u.attr("data-grid-num")).attr("data-grid-width",t.value-c),f.find(".grid-width-slider.grid-"+(parseInt(u.attr("data-grid-num"))+1)).attr("data-grid-width",l-t.value+p),u&&(u.attr("data-grid-width",t.value-c),_.attr("data-grid-width",l-t.value+p)),jQuery(".form-canvas-area").hasClass("split_view")&&setTimeout(function(){nf_save_nex_form("","preview","")},300)}})})}function reset_logic_gui(){jQuery(".show-active-rule").removeClass("show-active-rule"),jQuery(".over-connector").removeClass("over-connector"),jQuery(".is_target").removeClass("is_target"),jQuery(".is_arrow").removeClass("is_arrow");for(var s,e=0;e<1e3;e++)jQuery(".connect_id_"+e).removeClass("connect_id_"+e);jQuery(".nex-forms-container .form_field").each(function(e){jQuery(".for_rule_"+jQuery(this).attr("id")).removeClass("for_rule_"+jQuery(this).attr("id"))}),s=0<jQuery(".set_rules .new_rule").length?[]:"";jQuery(".set_rules .new_rule").each(function(e){var t=[],a=[];jQuery(this).find(".get_rule_conditions .the_rule_conditions").each(function(e){a.push({field_Id:jQuery(this).find(".cl_field option:selected").attr("data-field-id"),field_name:jQuery(this).find(".cl_field option:selected").attr("data-field-name"),field_type:jQuery(this).find(".cl_field option:selected").attr("data-field-type"),condition:jQuery(this).find('select[name="field_condition"]').val(),condition_value:jQuery(this).find('input[name="conditional_value"]').val(),selected_value:jQuery(this).find(".cl_field").attr("data-selected")})}),jQuery(this).find(".get_rule_actions .the_rule_actions").each(function(e){t.push({target_field_Id:jQuery(this).find('select[name="cla_field"] option:selected').attr("data-field-id"),target_field_name:jQuery(this).find('select[name="cla_field"] option:selected').attr("data-field-name"),target_field_type:jQuery(this).find('select[name="cla_field"] option:selected').attr("data-field-type"),do_action:jQuery(this).find('select[name="the_action"]').val(),selected_value:jQuery(this).find('select[name="cla_field"]').attr("data-selected")})}),s.push({operator:jQuery(this).find('select[name="selector"]').val(),reverse_actions:jQuery(this).find('select[name="reverse_actions"] option:selected').val(),conditions:a,actions:t})});var t={action:"get_c_logic_ui",conditional_logic_array:s};jQuery.post(ajaxurl,t,function(e){jQuery(".adv_arrow").remove(),jQuery(".adv_target").remove(),jQuery(".cl_arrow").remove(),jQuery(".con_logic_ui").html(""),jQuery(".con_logic_ui").html(e),logic_interface(),count_nf_conditions()})}function refresh_cl_fields(){jQuery('select[name="reloaded_fields"]').attr("name","fields_for_conditions"),jQuery('select[name="cla_field"]').addClass("cla_field"),jQuery(".refresh_cl_fields").find(".fa").addClass("fa-spin"),set_c_logic_fields(),jQuery('select[name="cla_field"]').trigger("mouseover"),jQuery('select[name="fields_for_conditions"]').trigger("mouseover"),jQuery('select[name="cla_field"]').trigger("mouseout"),jQuery('select[name="fields_for_conditions"]').trigger("mouseout"),setTimeout(function(){jQuery(".refresh_cl_fields").find(".fa").removeClass("fa-spin")},500)}function reset_rule_complexity(){jQuery(".set_rules .new_rule").each(function(){var e=jQuery(this).find(".delete_condition").length,t=jQuery(this).find(".delete_action").length;1<e||1<t?jQuery(this).addClass("advanced_view"):jQuery(this).removeClass("advanced_view")}),count_nf_conditions()}function count_nf_conditions(){jQuery(".set_rules .new_rule").each(function(e){jQuery(this).find(".rule_number").text(e+1);var t=jQuery(this).find('select[name="cla_field"]').attr("data-selected");t&&(e=jQuery(this).offset(),jQuery(this).attr("data-original-offset",e.top),t=t.split("**"),jQuery(this).attr("data-rule-key",t[0]),jQuery(this).addClass("for_rule_"+t[0]))}),jQuery(".set_rules .new_rule.advanced_view").each(function(e){jQuery(this).attr("data-rule-id",e+1),jQuery(this).addClass("connect_id_"+(e+1));e=jQuery(this).offset();jQuery(this).attr("data-original-offset",e.top)})}function set_c_logic_fields(e){var t='<option value="0">-- Fields --&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</option>',a="";t+='<optgroup label="Text Fields" class="cl_text_fields">',t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery('div.nex-forms-container div.form_field input[type="text"]').each(function(){"multi_step_name"!=jQuery(this).attr("name")&&"multi_step_icon"!=jQuery(this).attr("name")&&"multi_step_description"!=jQuery(this).attr("name")&&"multi_step_time_limit"!=jQuery(this).attr("name")&&jQuery(this).attr("name")&&"undefined"!=jQuery(this).attr("name")&&(jQuery(this).closest(".form_field").hasClass("date")?t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="date" value="'+jQuery(this).closest(".form_field").attr("id")+"**date##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"<br><br></option>":jQuery(this).closest(".form_field").hasClass("datetime")?t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="datetime" value="'+jQuery(this).closest(".form_field").attr("id")+"**datetime##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"<br><br></option>":jQuery(this).closest(".form_field").hasClass("time")?t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="time"  value="'+jQuery(this).closest(".form_field").attr("id")+"**time##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"<br><br></option>":jQuery(this).closest(".form_field").hasClass("star-rating")?t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="stars"  value="'+jQuery(this).closest(".form_field").attr("id")+"**hidden##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"<br><br></option>":t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="text"  value="'+jQuery(this).closest(".form_field").attr("id")+"**text##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"<br><br></option>",t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>')}),jQuery('div.nex-forms-container div.form_field input[type="password"]').each(function(){"undefined"!=jQuery(this).attr("name")&&(t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="hidden"  value="'+jQuery(this).closest(".form_field").attr("id")+"**password##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"</option>",t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>')}),t+="</optgroup>",t+='<optgroup label="Radio Buttons" class="cl_radios">',t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>';var s,i="";jQuery('div.nex-forms-container div.form_field input[type="radio"]').each(function(){"undefined"!=jQuery(this).attr("name")&&((s=jQuery(this).attr("name"))!=i&&(t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="radio"  value="'+jQuery(this).closest(".form_field").attr("id")+"**radio##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"</option>",t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'),i=s)}),t+="</optgroup>";var r,n="";t+='<optgroup label="Check Boxes" class="cl_checks">',t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery('div.nex-forms-container div.form_field input[type="checkbox"]').each(function(){"undefined"!=jQuery(this).attr("name")&&((r=jQuery(this).attr("name"))!=n&&(t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="checkbox"  value="'+jQuery(this).closest(".form_field").attr("id")+"**checkbox##"+jQuery(this).attr("name")+'">'+unformat_name(jQuery(this).attr("name"))+"</option>",t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'),n=r)}),t+="</optgroup>",t+='<optgroup label="Selects" class="cl_selects">',t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-container div.form_field select").each(function(){"undefined"!=jQuery(this).attr("name")&&(t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="select"  value="'+jQuery(this).closest(".form_field").attr("id")+"**select##"+jQuery(this).attr("name")+'">'+unformat_name(jQuery(this).attr("name"))+"</option>",t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>')}),t+="</optgroup>",t+='<optgroup label="Text Areas" class="cl_textareas">',t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-container div.form_field textarea").each(function(){t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="textarea"  value="'+jQuery(this).closest(".form_field").attr("id")+"**textarea##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"</option>",t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),t+="</optgroup>",t+='<optgroup label="File Uploaders" class="cl_uploaders">',t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery('div.nex-forms-container div.form_field input[type="file"]').each(function(){"undefined"!=jQuery(this).attr("name")&&(t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="file"  value="'+jQuery(this).closest(".form_field").attr("id")+"**file##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"</option>",t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>')}),t+="</optgroup>",t+='<optgroup label="Hidden Fields" class="cl_hidden">',t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery(".hidden_fields_setup .hidden_fields .hidden_field").each(function(){t+='<option data-field-id="hidden_field" data-field-name="'+format_illegal_chars(jQuery(this).find(".hidden_field_name").val())+'" data-field-type="hidden"  value="hidden_field**hidden##'+format_illegal_chars(jQuery(this).find(".hidden_field_name").val())+'">'+unformat_name(jQuery(this).find(".hidden_field_name").val())+"</option>",t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),jQuery('div.nex-forms-container div.form_field input[type="hidden"]').each(function(){"undefined"!=jQuery(this).attr("name")&&"math_result"!=jQuery(this).attr("name")&&(t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="hidden"  value="'+jQuery(this).closest(".form_field").attr("id")+"**hidden##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"</option>",t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>')}),t+="</optgroup>",t+='<optgroup label="Math Fields" class="cl_math">',t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-container div.form_field input.set_math_result").each(function(){"undefined"!=jQuery(this).attr("name")&&"math_result"!=jQuery(this).attr("name")&&(t+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).attr("name"))+'" data-field-type="hidden"  value="'+jQuery(this).closest(".form_field").attr("id")+"**text##"+format_illegal_chars(jQuery(this).attr("name"))+'">'+unformat_name(jQuery(this).attr("name"))+"</option>",t+='<option class="option_spacer" disabled="disabled">&nbsp;</option>')}),t+="</optgroup>",a+='<optgroup label="Buttons" class="cl_buttons">',a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-container div.form_field.button_fields").each(function(){var e="",t=" [-] ";""!=jQuery(this).closest(".step").attr("class")&&(e=jQuery(this).closest(".step").find('input[name="multi_step_name"]').val()+" - "),jQuery(this).find(".the_input_element").hasClass("nex-step")&&(t=" [>] "),jQuery(this).find(".the_input_element").hasClass("prev-step")&&(t=" [<] "),jQuery(this).closest(".step").find('input[name="multi_step_name"]').val()||(e=""),a+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+format_illegal_chars(jQuery(this).find(".the_input_element").text())+'" data-field-type="button"  value="'+jQuery(this).attr("id")+'**button##button">'+e+t+jQuery(this).find(".the_input_element").text()+"</option>",a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),a+="</optgroup>",a+='<optgroup label="Grids" class="cl_grids">',a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-container div.form_field.grid-system").each(function(){jQuery(this).attr("data-grid-name")&&(a+='<option  data-field-id="'+jQuery(this).attr("id")+'" data-field-name="grid" data-field-type="panel"   value="'+jQuery(this).attr("id")+'**grid##grid">'+short_str(jQuery(this).attr("data-grid-name"))+"</option>"),a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),a+="</optgroup>",a+='<optgroup label="Panels" class="cl_panels">',a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-container div.form_field.is_panel").each(function(){a+='<option  data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="panel" data-field-type="panel"   value="'+jQuery(this).attr("id")+'**panel##panel">'+short_str(jQuery(this).find(".panel-heading").text())+"</option>",a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),a+="</optgroup>",a+='<optgroup label="Headings" class="cl_headings">',a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-container div.form_field.heading").each(function(){a+='<option   data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="heading" data-field-type="heading"   value="'+jQuery(this).attr("id")+'**heading##heading">'+short_str(jQuery(this).find(".the_input_element").text())+"</option>",a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),a+="</optgroup>",a+='<optgroup label="Images" class="cl_images">',a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-container div.form_field.html_image").each(function(){var e=jQuery(this).find("img");0<e.length&&e.attr("alt")&&(a+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="html" data-field-type="html"  value="'+jQuery(this).attr("id")+'**image##html">'+short_str(jQuery(this).find("img").attr("alt"))+"</option>"),a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),a+="</optgroup>",a+='<optgroup label="HTML/Paragraphs" class="cl_paragraphs">',a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-container div.form_field.html").each(function(){a+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="html" data-field-type="html"  value="'+jQuery(this).attr("id")+'**paragraph##html">'+short_str(jQuery(this).find(".the_input_element").text())+"</option>",a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),jQuery("div.nex-forms-container div.form_field.paragraph").each(function(){a+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="paragraph" data-field-type="paragraph" value="'+jQuery(this).attr("id")+'**heading##html">'+short_str(jQuery(this).find(".the_input_element").text())+"</option>",a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),a+="</optgroup>",a+='<optgroup label="Steps" class="cl_steps">',a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-container div.form_field.step").each(function(e){a+='<option data-field-id="'+jQuery(this).closest(".form_field").attr("id")+'" data-field-name="'+jQuery(this).attr("data-step-num")+'" data-field-type="step"  value="'+jQuery(this).attr("id")+"**"+jQuery(this).attr("data-step-num")+'##step">Step '+(e+1)+" ("+short_str(jQuery(this).find('input[name="multi_step_name"]').val())+")</option>",a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),a+="</optgroup>",a+='<optgroup label="Success Message" class="cl_steps">',a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>',jQuery("div.nex-forms-msg-container div.form_field.html_fields").each(function(){a+='<option data-field-id="'+jQuery(this).attr("id")+'" data-field-name="html" data-field-type="html"  value="'+jQuery(this).attr("id")+'**success_message##html">'+short_str(jQuery(this).find(".the_input_element").text())+"</option>",a+='<option class="option_spacer" disabled="disabled">&nbsp;</option>'}),a+="</optgroup>",jQuery('select[name="cl_current_fields_container"]').html(t),jQuery('select[name="cl_current_action_fields_container"]').html(t+a)}function nf_get_wp_cats(e){var t="";jQuery("#wp_categories ul li").each(function(){t+=jQuery(this).find("a").text()+"\n"}),jQuery("#"+e).val(jQuery.trim(t)),jQuery("#"+e).trigger("change")}function logic_interface(){jQuery(".is_target").removeClass("is_target"),jQuery(".is_arrow").removeClass("is_arrow");for(var e=0;e<1e3;e++)jQuery(".connect_id_"+e).removeClass("connect_id_"+e);jQuery(".nex-forms-container .form_field").each(function(e){jQuery(".for_rule_"+jQuery(this).attr("id")).removeClass("for_rule_"+jQuery(this).attr("id"))});var r,n=50,o=88,d=100,l=-70,c=1e6,u="";jQuery(".the_rule").each(function(e){r=jQuery(this).attr("data-cl-arrow"),u=JSON.parse(jQuery(this).attr("data-cl-targets")),jQuery.each(u,function(e,t){var a=document.getElementById(""+r),s=document.getElementById(""+t.target_id),i=a.getBoundingClientRect(),a=s.getBoundingClientRect(),s=!1;jQuery("#"+t.target_id).hasClass("step")&&(s=!0);i=a.top-i.top;s&&(i-=15);s='<div class="cl_arrow '+(s?"step_rule":"")+"  for_rule_"+t.target_id+" from"+r+'" data-rule-key="'+t.target_id+'" data-target="'+t.target_id+'" style="width: '+o+"px;left: "+(jQuery("#"+r).closest(".is_panel").attr("class")?l:d)+"px;top: 16px; height:"+i+"px; z-index:"+c+'; ">',i="=";"equal_to"==t.condition&&(i='<span class="show_condition is_equal">Is Equal to</span>'),"not_equal_to"==t.condition&&(i='<span class="show_condition not_equal">Is NOT Equal to</span>'),"less_than"==t.condition&&(i='<span class="show_condition less_than">Is Less than</span>'),"greater_than"==t.condition&&(i='<span class="show_condition greater_than">Is Greater than</span>'),"less_equal"==t.condition&&(i='<span class="show_condition less_than_equal">Is Less than or Equal to</span>'),"greater_equal"==t.condition&&(i='<span class="show_condition less_than_equal">Is Greater than or Equal to</span>'),s+='<div class="arrow_condition for_rule_'+t.target_id+'" data-rule-key="'+t.target_id+'">'+i+'<span class="show_value"> '+(t.condition_value||"Empty")+"</span></div>","show"==t.action&&(s+='<div class="target_action for_rule_'+t.target_id+'"><span class="target_action_icon fa fa-eye" title="Show" data-toggle="tooltip_bs" data-placement="top"></span></div>'),"hide"==t.action&&(s+='<div class="target_action for_rule_'+t.target_id+'"><span class="target_action_icon fa fa-eye-slash" title="Hide" data-toggle="tooltip_bs" data-placement="top"></span></div>'),"enable"==t.action&&(s+='<div class="target_action for_rule_'+t.target_id+'"><span class="target_action_icon fas fa-user-edit" title="Enable" data-toggle="tooltip_bs" data-placement="top"></span></div>'),"disable"==t.action&&(s+='<div class="target_action for_rule_'+t.target_id+'"><span class="target_action_icon fas fa-user-slash" title="Disable" data-toggle="tooltip_bs" data-placement="top"></span></div>'),"change_value"==t.action&&(s+='<div class="target_action for_rule_'+t.target_id+'"><span class="target_action_icon fas fa-exchange-alt" title="Change Value" data-toggle="tooltip_bs" data-placement="top"></span></div>'),"skip_to"==t.action&&(s+='<div class="target_action for_rule_'+t.target_id+'"><span class="target_action_icon fas fa-fast-forward" title="Skip to Step" data-toggle="tooltip_bs" data-placement="top"></span></div>'),s+='<span class="arrow_start fa fa-caret-left animated  infinite for_rule_'+t.target_id+'"></span>',s+='<span class="arrow_end fa fa-caret-right animated  infinite for_rule_'+t.target_id+'"></span>',s+="</div>",jQuery("#"+r).append(s),jQuery("#"+r).addClass("is_arrow"),jQuery("#"+r).addClass("for_rule_"+t.target_id),jQuery("#"+t.target_id).addClass("is_target"),jQuery("#"+t.target_id).addClass("for_rule_"+t.target_id),o+=5,d-=5,l-=5,c-=10})}),jQuery(".the_adv_rule").each(function(e){var i=jQuery(this).attr("data-adv-id");u=JSON.parse(jQuery(this).attr("data-cl-targets")),jQuery.each(u.arrows,function(e,t){var a='<div data-rule-id="'+i+'" id="'+i+t.arrow_id+'" class="connect_id_'+i+" adv_arrow rule_id_"+i+'" style="width: '+(n+5*i+5)+"px;right: "+(jQuery("#"+t.arrow_id).closest(".is_panel").attr("class")?5*i-48:217+5*i)+'px;top: 16px; height:1px">',s="=";"equal_to"==t.condition&&(s='<span class="show_condition is_equal">Is Equal to</span>'),"not_equal_to"==t.condition&&(s='<span class="show_condition not_equal">Is NOT Equal to</span>'),"less_than"==t.condition&&(s='<span class="show_condition less_than">Is Less than</span>'),"greater_than"==t.condition&&(s='<span class="show_condition greater_than">Is Greater than</span>'),"less_equal"==t.condition&&(s='<span class="show_condition less_than_equal">Is Less than or Equal to</span>'),"greater_equal"==t.condition&&(s='<span class="show_condition less_than_equal">Is Greater than or Equal to</span>'),a+='<div class="avd_arrow_condition" data-operator="'+u.operator+'">'+s+'  <span class="show_value">'+(t.condition_value||"Empty")+"</span></div>",a+='<span class="avd_arrow_start fa fa-caret-right animated  infinite"></span>',a+="</div>",jQuery("#"+t.arrow_id).addClass("is_arrow"),jQuery("#"+t.arrow_id).append(a).addClass("connect_id_"+i)}),jQuery.each(u.targets,function(e,t){var a=!1;jQuery("#"+t.target_id).hasClass("step")&&(a=!0);a='<div data-rule-id="'+i+'" id="'+i+t.target_id+'" class="connect_id_'+i+" "+(a?"avd_step_rule":"")+" adv_target rule_id_"+i+'" style="width: 300px;right: '+(jQuery("#"+t.target_id).closest(".is_panel").attr("class")?5*i-48:217+5*i)+'px;top: 16px; height:1px">';"show"==t.action&&(a+='<div class="avd_target_action"><span class="target_action_icon fa fa-eye" title="Show" data-toggle="tooltip_bs" data-placement="top"></span></div>'),"hide"==t.action&&(a+='<div class="avd_target_action"><span class="target_action_icon fa fa-eye-slash" title="Hide" data-toggle="tooltip_bs" data-placement="top"></span></div>'),"enable"==t.action&&(a+='<div class="avd_target_action"><span class="target_action_icon fas fa-user-edit" title="Enable" data-toggle="tooltip_bs" data-placement="top"></span></div>'),"disable"==t.action&&(a+='<div class="avd_target_action"><span class="target_action_icon fas fa-user-slash" title="Disable" data-toggle="tooltip_bs" data-placement="top"></span></div>'),"change_value"==t.action&&(build_arrow+='<div class="target_action for_rule_'+t.target_id+'"><span class="target_action_icon fas fa-exchange-alt" title="Change Value" data-toggle="tooltip_bs" data-placement="top"></span></div>'),"skip_to"==t.action&&(build_arrow+='<div class="target_action for_rule_'+t.target_id+'"><span class="target_action_icon fas fa-fast-forward" title="Skip to Step" data-toggle="tooltip_bs" data-placement="top"></span></div>'),a+="</div>",jQuery("#"+t.target_id).addClass("is_target"),jQuery("#"+t.target_id).append(a).addClass("connect_id_"+i)}),n+=15}),jQuery(".the_adv_rule").each(function(e){var t=jQuery(this).attr("data-adv-id"),a=jQuery(".adv_arrow.rule_id_"+t).first().attr("id"),s=jQuery(".adv_arrow.rule_id_"+t).last().attr("id"),i=document.getElementById(""+a),r=document.getElementById(""+s),n=i.getBoundingClientRect(),s=r.getBoundingClientRect().top-n.top;jQuery("#"+a).append('<div data-rule-id="'+t+'" class="connect_id_'+t+' avd_arrows_connector" id="avd_arrows_connector_'+t+'" style="width: 1px;right: 0px;top: 0px; height:'+s+'px"></div>');i=jQuery(".adv_target.rule_id_"+t).first().attr("id"),r=jQuery(".adv_target.rule_id_"+t).last().attr("id"),n=document.getElementById(""+i),r=document.getElementById(""+r),n=n.getBoundingClientRect(),r=r.getBoundingClientRect().top-n.top;jQuery("#"+i).append('<div data-rule-id="'+t+'" class="connect_id_'+t+' avd_targets_connector" id="avd_targets_connector_'+t+'" style="width: 1px;right: 0px;top: 0px; height:'+r+'px"></div>');n=jQuery("#avd_arrows_connector_"+t).attr("id"),i=jQuery("#avd_targets_connector_"+t).attr("id"),n=document.getElementById(""+n),i=document.getElementById(""+i),n=n.getBoundingClientRect(),r=i.getBoundingClientRect().top-s/2+r/2-n.top+1,n=jQuery("#"+a).find(".avd_arrow_condition").attr("data-operator");jQuery("#"+a).append('<div data-rule-id="'+t+'" class="connect_id_'+t+' avd_connector" id="avd_connector_'+t+'" style="width: 30px;right: -30px;top: '+(s/2-1)+"px; height:"+r+'px"><div class="adv_rule_operator">'+n+"</div></div>")})}!function(u){function l(e,t){var a;e?"offset"in e?((a=e.data("jquery-collision-coordinates"))?(this.x1=a.x1,this.y1=a.y1,this.x2=a.x2,this.y2=a.y2):t&&t.length&&4<=t.length?(this.x1=t[0],this.y1=t[1],this.x2=t[2]+e.outerWidth(!0),this.y2=t[3]+e.outerHeight(!0)):e.parent().length<=0?(this.x1=parseInt(e.css("left"))||0,this.y1=parseInt(e.css("top"))||0,this.x2=parseInt(e.css("width"))||0,this.y2=parseInt(e.css("height"))||0,this.x2+=this.x1,this.x2+=(parseInt(e.css("margin-left"))||0)+(parseInt(e.css("border-left"))||0)+(parseInt(e.css("padding-left"))||0)+(parseInt(e.css("padding-right"))||0)+(parseInt(e.css("border-right"))||0)+(parseInt(e.css("margin-right"))||0),this.y2+=this.y1,this.y2+=(parseInt(e.css("margin-top"))||0)+(parseInt(e.css("border-top"))||0)+(parseInt(e.css("padding-top"))||0)+(parseInt(e.css("padding-bottom"))||0)+(parseInt(e.css("border-bottom"))||0)+(parseInt(e.css("margin-bottom"))||0)):(t=e.offset(),this.x1=t.left-(parseInt(e.css("margin-left"))||0),this.y1=t.top-(parseInt(e.css("margin-top"))||0),this.x2=this.x1+e.outerWidth(!0),this.y2=this.y1+e.outerHeight(!0)),this.proto=e):"x1"in e&&(this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2,this.proto=e):(this.x1=this.y1=this.x2=this.y2=0,this.proto=null),"dir"in e&&(this.dir=e.dir)}function _(e,t,a,s){this.target=e,this.obstacle=t,this.overlap=a,this.overlapType=s}function s(e,t,a){this.targets=e,this.obstacles=t,this.collisions=null,this.cache=null,this.containment=a||null}function i(e){return u(e).get().map(function(e,t,a){return new l(u(e))})}l.prototype.innerContainer=function(){var e=new l(this);return this.proto.css&&(e.x1+=parseInt(this.proto.css("margin-left"))||0,e.x1+=parseInt(this.proto.css("border-left"))||0,e.x1+=parseInt(this.proto.css("padding-left"))||0,e.x2-=parseInt(this.proto.css("padding-right"))||0,e.x2-=parseInt(this.proto.css("border-right"))||0,e.x2-=parseInt(this.proto.css("margin-right"))||0,e.y1+=parseInt(this.proto.css("margin-top"))||0,e.y1+=parseInt(this.proto.css("border-top"))||0,e.y1+=parseInt(this.proto.css("padding-top"))||0,e.y2-=parseInt(this.proto.css("padding-bottom"))||0,e.y2-=parseInt(this.proto.css("border-bottom"))||0,e.y2-=parseInt(this.proto.css("margin-bottom"))||0),e},l.prototype.move=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},l.prototype.update=function(e){var t,a;return"x1"in e&&(this.x1=e.x1),"x2"in e&&(this.x1=e.x2),"y1"in e&&(this.x1=e.y1),"y2"in e&&(this.x1=e.y2),"left"in e&&(t=this.x2-this.x1,this.x1=e.left,this.x2=this.x1+t),"top"in e&&(a=this.y2-this.y1,this.y1=e.top,this.y2=this.y1+a),"offset"in e&&(a=e.offset(),this.update(a),this.x2=this.x1+e.width(),this.y2=this.y1+e.height()),"dir"in e&&(this.x1=e.dir),this},l.prototype.width=function(){return this.x2-this.x1},l.prototype.height=function(){return this.y2-this.y1},l.prototype.centerx=function(){return(this.x1+this.x2)/2},l.prototype.centery=function(){return(this.y1+this.y2)/2},l.prototype.toString=function(){return(this.proto.get?"#"+this.proto.get(0).id:"")+"["+[this.x1,this.y1,this.x2,this.y2].join(",")+"]"},l.EPSILON=.001,l.prototype.containsPoint=function(e,t,a){a=((a=a||!1)?-1:1)*l.EPSILON;return e>this.x1+a&&e<this.x2-a&&t>this.y1+a&&t<this.y2-a},l.prototype.overlaps=function(e,t){var a=this._overlaps(e,t);return 0<a.length?a:(0<(a=e._overlaps(this,t)).length&&(a[0].dir="Inside"==a[0].dir?"Outside":"Outside"==a[0].dir?"Inside":"N"==a[0].dir?"S":"S"==a[0].dir?"N":"W"==a[0].dir?"E":"E"==a[0].dir?"W":"NE"==a[0].dir?"SW":"SW"==a[0].dir?"NE":"SE"==a[0].dir?"NW":"NW"==a[0].dir?"SE":void 0),a||[])},l.prototype._overlaps=function(e,t){var a=e,s=this;t=t||!1;for(var i=a.centerx(),e=a.centery(),r=[[a.x1,a.y1,"SE"],[a.x2,a.y1,"SW"],[a.x2,a.y2,"NW"],[a.x1,a.y2,"NE"],[i,a.y1,"S"],[a.x2,e,"W"],[i,a.y2,"N"],[a.x1,e,"E"],[i,e,void 0]],n=null,o={NW:!1,N:!1,NE:!1,E:!1,SE:!1,S:!1,SW:!1,W:!1},d=0;d<r.length;d++)this.containsPoint(r[d][0],r[d][1],t)&&(r[d][2]&&(o[r[d][2]]=!0),n=n||[new l({x1:Math.max(a.x1,s.x1),y1:Math.max(a.y1,s.y1),x2:Math.min(a.x2,s.x2),y2:Math.min(a.y2,s.y2),dir:r[d][2]})]);return n&&(o.NW&&o.NE&&(n[0].dir="N"),o.NE&&o.SE&&(n[0].dir="E"),o.SE&&o.SW&&(n[0].dir="S"),o.SW&&o.NW&&(n[0].dir="W"),o.NW&&o.NE&&o.SE&&o.SW&&(n[0].dir="Outside"),o.NW||o.NE||o.SE||o.SW||o.N||o.E||o.S||o.W||(n[0].dir="Inside")),n||[]},l.prototype._protrusion=function(e,t,a){e=this.overlaps(new l(e),!1);return e.length<=0||(e[0].dir=t,a.push(e[0])),a},l.prototype.protrusions=function(e){var t=[],a=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,i=e.x1,r=e.x2,n=e.y1,e=e.y2,t=this._protrusion({x1:i,y1:a,x2:r,y2:n},"N",t);return t=this._protrusion({x1:r,y1:a,x2:s,y2:n},"NE",t),t=this._protrusion({x1:r,y1:n,x2:s,y2:e},"E",t),t=this._protrusion({x1:r,y1:e,x2:s,y2:s},"SE",t),t=this._protrusion({x1:i,y1:e,x2:r,y2:s},"S",t),t=this._protrusion({x1:a,y1:e,x2:i,y2:s},"SW",t),t=this._protrusion({x1:a,y1:n,x2:i,y2:e},"W",t),this._protrusion({x1:a,y1:a,x2:i,y2:n},"NW",t)},_.prototype.distance=function(e){var t=c.target,a=c.overlap;return Math.sqrt((t.centerx()-a.centerx())*(t.centerx()-a.centerx())+(t.centery()-a.centery())*(t.centery()-a.centery()))},s.prototype.getCollisions=function(e){if(null!==this.collisions)return this.collisions;if(this.cache={},this.collisions=[],"collision"!=(e=e||"collision")&&"protrusion"!=e)return[];for(var t=[],a=this.targets,s=this.obstacles,i=0;i<a.length;i++)for(var r=a[i],n=0;n<s.length;n++)for(var o=s[n],d="collision"==e?r.overlaps(o):r.protrusions(o.innerContainer()),l=0;l<d.length;l++)t.push(new _(a[i],s[n],d[l],e));return this.collisions=t},u.fn.collision=function(e,t){var a="collision",n=null,o=null,d=null,l=null,c="body";"protrusion"==(t=t||{}).mode&&(a=t.mode),t.as&&(n=t.as),t.colliderData&&(o=t.colliderData),t.obstacleData&&(d=t.obstacleData),t.directionData&&(l=t.directionData),t.relative&&(c=t.relative);a=new s(i(this),i(e)).getCollisions(a),a=n?u.map(a,function(e,t,a){var s,i=e.overlap.x1,r=e.overlap.y1;!c||"body"==c||0<(s=u("collider"==c?e.target.proto:"obstacle"==c?e.obstacle.proto:c)).length&&(i-=(s=s.offset()).left,r-=s.top);r=u(n).offset({left:i,top:r}).width(e.overlap.width()).height(e.overlap.height());return o&&r.data(o,u(e.target.proto)),d&&r.data(d,u(e.obstacle.proto)),l&&e.overlap.dir&&r.data(l,e.overlap.dir),r}):u.map(a,function(e,t,a){return e.obstacle.proto});return function(e){for(var t=u(),a=0;a<e.length;a++)t=t.add(e[a]);return t}(a)}}(jQuery),jQuery(document).ready(function(){jQuery("input").each(function(){var e=jQuery(this).val();e=(e=e.replace(/<script[^>]*>/gi,"")).replace(/<\/script>/gi,""),jQuery(this).val(e)}),jQuery("textarea").each(function(){var e=jQuery(this).val();e=(e=e.replace(/<script[^>]*>/gi,"")).replace(/<\/script>/gi,""),jQuery(this).val(e)}),jQuery(document).on("click",".dismiss_nf_notice .notice-dismiss, .dismiss_nf_notice button",function(){jQuery(this).closest(".notice").remove(),jQuery.post(ajaxurl,{action:"dismiss_nf_notice"},function(){})}),jQuery(document).on("click",".new-form-sidebar a",function(){jQuery(".new-form-sidebar li").removeClass("active"),jQuery(this).parent().addClass("active"),jQuery(".new-form-panel").removeClass("active"),jQuery(".new-form-panel."+jQuery(this).attr("data-panel")).addClass("active"),jQuery("#new_form_setup .sub-heading").html(jQuery(this).attr("data-sub-heading"))}),jQuery(document).on("click",".load_template",function(){var a=jQuery(this);jQuery(".new-form-panel").removeClass("active"),jQuery(".new-form-panel.ajax_loading").addClass("active");var e={action:"load_template",template:a.attr("data-template-name"),template_dir:a.attr("data-template-dir")};jQuery.post(ajaxurl,e,function(e){var t=jQuery(".admin_url").text()+"admin.php?page=nex-forms-builder&open_form="+e;"true"==a.attr("data-is-tut")&&(t=jQuery(".admin_url").text()+"admin.php?page=nex-forms-builder&open_form="+e+"&tut="+a.attr("data-tut-num")),jQuery(location).attr("href",t)})}),jQuery(document).on("click","#upload_form,#upload_form2",function(){jQuery('input[name="form_html"]').trigger("click")}),jQuery(document).on("change",'input[name="form_html"]',function(){jQuery("#import_form").submit(),jQuery('input[name="form_name"]').val(""),jQuery("#nex-forms #form_update_id").text(""),jQuery(".nex-forms-container").html(""),jQuery(".open-form").removeClass("active"),jQuery(".center_panel").hide()}),"function"==typeof jQuery({}).ajaxForm&&jQuery("#import_form").ajaxForm({data:{action:"do_form_import"},beforeSubmit:function(e,t,a){jQuery("div.nex-forms-container").html('<div class="loading"><i class="fa fa-circle-o-notch fa-spin"></i></div>'),jQuery(".new-form-panel").removeClass("active"),jQuery(".new-form-panel.ajax_loading").addClass("active")},success:function(e,t,a,s){e&&"0"!=e&&0!=e?(e=jQuery(".admin_url").text()+"admin.php?page=nex-forms-builder&open_form="+e,jQuery(location).attr("href",e)):jQuery(".ajax_error_response").addClass("active")},error:function(e,t,a){console.log(a)}}),"function"==typeof jQuery({}).ajaxForm&&jQuery("#manual_import_form").ajaxForm({data:{action:"do_form_import",import_type:"manual"},beforeSubmit:function(e,t,a){jQuery(".new-form-panel").removeClass("active"),jQuery(".new-form-panel.ajax_loading").addClass("active")},success:function(e,t,a,s){e&&"0"!=e&&0!=e?(e=jQuery(".admin_url").text()+"admin.php?page=nex-forms-builder&open_form="+e,jQuery(location).attr("href",e)):jQuery(".ajax_error_response").addClass("active")},error:function(e,t,a){console.log(a)}}),"function"==typeof jQuery({}).ajaxForm&&jQuery("#new_nex_form").ajaxForm({data:{action:"nf_insert_record",table:"wap_nex_forms",is_form:1,is_template:0},beforeSubmit:function(e,t,a){jQuery(".new-form-panel").removeClass("active"),jQuery(".new-form-panel.ajax_loading").addClass("active")},success:function(e,t,a,s){jQuery(location).attr("href",jQuery("#siteurl").text()+"/wp-admin/admin.php?page=nex-forms-builder&open_form="+e)},error:function(e,t,a){console.log(a)}}),jQuery(document).on("click",".create_new_form, .create_new_form_home",function(){jQuery("#new_form_setup").modal("open")}),jQuery(document).on("click",".add-new-column",function(){var e=jQuery(this).closest(".form_field"),t=".id-"+e.attr("id"),a=jQuery(this).closest(".grid_input_holder"+t),s=parseInt(a.attr("data-grid-width")),i="sm";strstr(a.attr("class"),"-xs-")&&(i="xs"),strstr(a.attr("class"),"-md-")&&(i="md"),strstr(a.attr("class"),"-lg-")&&(i="lg");var r,n="",o=1,d=0;if(e.find(".grid_input_holder"+t).each(function(){r=parseInt(jQuery(this).attr("data-grid-width")),d<r&&(d=o=r),parseInt(jQuery(this).attr("data-grid-width"))}),1<o)if(1==s){var l=(_=a.clone()).find(".panel-body"),c=o-1,n=e.find(".grid_input_holder.col-"+i+"-"+o+t).first();1==c&&(c="1");for(var u=0;u<=12;u++)n.removeClass("col-"+i+"-"+u);n.addClass("col-"+i+"-"+c),n.attr("data-grid-width",c),_.addClass("col-"+i+"-1"),_.attr("data-grid-width","1"),jQuery(this).hasClass("blank-column")&&l.html(""),_.insertAfter(a),nf_setup_grid(e),e.find(".grid").each(function(){nf_setup_grid(jQuery(this))})}else{for(u=0;u<=12;u++)a.removeClass("col-"+i+"-"+u);var _,l=(_=a.clone()).find(".panel-body");0<s-1?(a.addClass("col-"+i+"-"+(s-1)),a.attr("data-grid-width",s-1)):(a.addClass("col-"+i+"-1"),a.attr("data-grid-width","1")),_.addClass("col-"+i+"-1"),_.attr("data-grid-width","1"),jQuery(this).hasClass("blank-column")&&l.html(""),_.insertAfter(a),nf_setup_grid(e),e.find(".grid").each(function(){nf_setup_grid(jQuery(this))})}e=jQuery(".form_canvas .panel-body");create_droppable(e),jQuery(".form-canvas-area").hasClass("split_view")&&setTimeout(function(){nf_save_nex_form("","preview","")},300)}),jQuery(document).on("click",".delete-column",function(){var e=jQuery(this).closest(".form_field"),t=jQuery(this).closest(".grid_input_holder"),a=parseInt(t.attr("data-grid-width")),s="sm";if(strstr(t.attr("class"),"-xs-")&&(s="xs"),strstr(t.attr("class"),"-md-")&&(s="md"),strstr(t.attr("class"),"-lg-")&&(s="lg"),0!=parseInt(t.attr("data-grid-num"))){for(var i=t.prev(".grid_input_holder"),r=parseInt(i.attr("data-grid-width")),n=0;n<=12;n++)i.removeClass("col-"+s+"-"+n);i.addClass("col-"+s+"-"+(r+a)),i.attr("data-grid-width",r+a)}else{for(var o=t.next(".grid_input_holder"),r=parseInt(o.attr("data-grid-width")),n=0;n<=12;n++)o.removeClass("col-"+s+"-"+n);o.addClass("col-"+s+"-"+(r+a)),o.attr("data-grid-width",r+a)}t.remove(),nf_setup_grid(e),e.find(".grid").each(function(){nf_setup_grid(jQuery(this))}),jQuery(".form-canvas-area").hasClass("split_view")&&setTimeout(function(){nf_save_nex_form("","preview","")},300)}),jQuery(document).on("mouseenter",".tab-pane",function(){jQuery(this).closest(".step").addClass("over-step")}),jQuery(document).on("mouseleave",".tab-pane",function(){jQuery(this).closest(".step").removeClass("over-step")}),jQuery(document).on("mouseenter",".settings-column-style, .popover",function(){jQuery(".form_canvas").addClass("out-of-focus")}),jQuery(document).on("mouseleave",".settings-column-style, .popover",function(){setTimeout(function(){jQuery(".form_canvas").removeClass("out-of-focus")},1e3)}),jQuery(document).on("mouseover",".edit_mask",function(){jQuery(this).closest(".form_field").find(".field_settings").toggleClass("over-mask")}),jQuery(document).on("mouseout",".edit_mask",function(){jQuery(this).closest(".form_field").find(".field_settings").toggleClass("over-mask")}),jQuery(document).on("mouseover",".field_settings .btn.delete",function(){jQuery(this).closest(".form_field").toggleClass("over-delete")}),jQuery(document).on("mouseout",".field_settings .btn.delete",function(){jQuery(this).closest(".form_field").toggleClass("over-delete")}),jQuery(document).on("mouseenter",".outer-container",function(){jQuery(this).addClass("over-form")}),jQuery(document).on("mouseleave",".outer-container",function(){jQuery(this).removeClass("over-form")}),jQuery(document).on("mouseover",".delete-column",function(){jQuery(this).closest(".grid_input_holder").find(".panel").toggleClass("over-delete")}),jQuery(document).on("mouseout",".delete-column",function(){jQuery(this).closest(".grid_input_holder").find(".panel").toggleClass("over-delete")}),jQuery(document).on("mouseover",".grid_input_holder",function(){jQuery(this).toggleClass("over-column-tools")}),jQuery(document).on("mouseout",".grid_input_holder",function(){jQuery(this).toggleClass("over-column-tools"),jQuery(".grid_input_holder").removeClass("over-column-tools")}),jQuery(document).on("mouseenter",".form-canvas-area .inner-canvas-container:not(.dragging) .form_field:not(.step)",function(){jQuery(".form_canvas").hasClass("conditional-logic-opened")||(jQuery(this).parents(".form_field").find(".field_settings").addClass("parent-over-field"),jQuery(this).find(".field_settings").last().addClass("over-field"),jQuery(this).find(".field_settings").last().removeClass("parent-over-field"),jQuery(this).parents(".form_field").addClass("set-parent-over-field"),jQuery(this).addClass("set-over-field"),jQuery(this).removeClass("set-parent-over-field"),jQuery(".outer-container").removeClass("over-form"))}),jQuery(document).on("mouseleave",".form-canvas-area .inner-canvas-container:not(.dragging) .form_field",function(){jQuery(".form_canvas").hasClass("conditional-logic-opened")||(jQuery(this).find(".field_settings").removeClass("over-field"),jQuery(this).parent().closest(".form_field").find(".field_settings").removeClass("parent-over-field"),jQuery(this).removeClass("set-over-field"),jQuery(this).parent().closest(".form_field").removeClass("set-parent-over-field"),setTimeout(function(){jQuery(".outer-container").addClass("over-form")}))}),jQuery("div.updated").remove(),jQuery(".update-nag").remove(),jQuery("div.error").remove()}),jQuery(document).ready(function(){jQuery(document).on("change",'select[name="the_action"]',function(){jQuery(this).parent().find(".changeable").removeClass("show_change_value"),jQuery(this).closest(".input-group").removeClass("steps_only"),jQuery(this).parent().parent().find(".show_change_value_to").addClass("hidden"),jQuery(this).parent().find(".cl_current_action_fields_container").removeClass("hidden"),"change_value"==jQuery(this).val()&&(jQuery(this).parent().find(".changeable").addClass("show_change_value"),jQuery(this).parent().parent().find(".show_change_value_to").removeClass("hidden")),"skip_to"==jQuery(this).val()&&jQuery(this).closest(".input-group").addClass("steps_only")}),jQuery(".set_rules select").change,jQuery(document).on("change",".set_rules select, .set_rules input",function(){reset_logic_gui()}),setTimeout(function(){refresh_cl_fields()},3e3),jQuery(document).on("mouseover",'select[name="fields_for_conditions"]',function(){var e="",t=jQuery(this),a=t.attr("data-selected")?t.attr("data-selected"):"0";jQuery('select[name="cl_current_fields_container"] option').each(function(){jQuery(this).val()==a?jQuery(this).attr("selected",!0):jQuery(this).attr("selected",!1)}),jQuery('select[name="cl_current_fields_container"] option:selected').trigger("click"),(e=jQuery('select[name="cl_current_fields_container"]').clone()).removeClass("hidden").addClass("form-control").addClass("cl_field"),e.attr("name","reloaded_fields"),e.attr("data-selected",a),t.after(e),t.remove()}),jQuery(document).on("mouseover",".cla_field",function(){var e="",t=jQuery(this),a=t.attr("data-selected")?t.attr("data-selected"):"0";jQuery('select[name="cl_current_action_fields_container"] option').each(function(){jQuery(this).val()==a?jQuery(this).attr("selected",!0):jQuery(this).attr("selected",!1)}),jQuery('select[name="cl_current_action_fields_container"] option:selected').trigger("click"),(e=jQuery('select[name="cl_current_action_fields_container"]').clone()).removeClass("hidden"),e.addClass("form-control"),e.attr("name","cla_field"),e.attr("data-selected",a),t.after(e),t.remove()}),jQuery(document).on("click",".refresh_cl_fields",function(){refresh_cl_fields()}),jQuery(document).on("click",".conditional-logic-btn",function(){setTimeout(function(){refresh_cl_fields()},1e3),jQuery(".nex-forms-container .form_field").each(function(e){jQuery(this).hasClass("icon-select-group")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-check-double"></span>'),jQuery(this).hasClass("digital-signature")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-file-signature"></span>'),jQuery(this).hasClass("name")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-user"></span>'),jQuery(this).hasClass("email")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-envelope"></span>'),jQuery(this).hasClass("phone_number")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-phone"></span>'),jQuery(this).hasClass("url")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-link"></span>'),jQuery(this).hasClass("Query")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-comment"></span>'),jQuery(this).hasClass("text")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-text-width"></span>'),jQuery(this).hasClass("textarea")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-text-height"></span>'),jQuery(this).hasClass("password")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-key"></span>'),jQuery(this).hasClass("select")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-list-ul"></span>'),jQuery(this).hasClass("multi-select")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-tasks"></span>'),jQuery(this).hasClass("radio-group")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-dot-circle-o"></span>'),jQuery(this).hasClass("check-group")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-check-square-o"></span>'),jQuery(this).hasClass("image-choices-field")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-image"></span>'),jQuery(this).hasClass("slider")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-sliders-h"></span>'),jQuery(this).hasClass("touch_spinner")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-sort"></span>'),jQuery(this).hasClass("autocomplete")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-pencil"></span>'),jQuery(this).hasClass("tags")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-tag"></span>'),jQuery(this).hasClass("date")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-calendar-o"></span>'),jQuery(this).hasClass("time")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-clock-o"></span>'),jQuery(this).hasClass("star-rating")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-star"></span>'),jQuery(this).hasClass("thumb-rating")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-thumbs-up"></span>'),jQuery(this).hasClass("smily-rating")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-smile-o"></span>'),jQuery(this).hasClass("upload-multi")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-reply-all"></span>'),jQuery(this).hasClass("upload-single")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-reply"></span>'),jQuery(this).hasClass("upload-image")&&jQuery(this).prepend('<span class="c_logic_field_type fas fa-file-image"></span>'),jQuery(this).hasClass("submit-button")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-send"></span>'),jQuery(this).hasClass("heading")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-header"></span>'),jQuery(this).hasClass("math_logic")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-calculator"></span>'),jQuery(this).hasClass("html_image")&&jQuery(this).prepend('<span class="c_logic_field_type far fa-image"></span>'),jQuery(this).hasClass("paragraph")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-align-justify"></span>'),jQuery(this).hasClass("html")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-code"></span>'),jQuery(this).hasClass("is_panel")&&jQuery(this).prepend('<span class="c_logic_field_type fa fa-window-maximize"></span>')}),jQuery(this).hasClass("active")?jQuery(".conditional_logic_wrapper #close-settings").trigger("click"):(jQuery(".inner-canvas-container .batch_edit").removeClass("batch_edit_sim"),jQuery(".inner-canvas-container .batch_edit").removeClass("batch_edit"),jQuery(".inner-canvas-container").removeClass("active"),jQuery(".form-canvas-area").removeClass("form-editor-view"),jQuery(".form-canvas-area").removeClass("msg-editor-view"),jQuery(".form-canvas-area").addClass("form-editor-view"),jQuery(".inner-msg-canvas").hide(),jQuery(".inner-form-canvas").show(),jQuery("span.editor-form").show(),jQuery("span.editor-msg").hide(),jQuery(".nex-forms-container").addClass("active"),jQuery(".form-canvas-area").attr("data-sec-pre-class",".inner-form-canvas"),jQuery(".form-canvas-area").removeClass("preview_view"),jQuery(".form-canvas-area").removeClass("split_view"),jQuery(".view_all_steps").removeClass("view_all_steps"),jQuery(".conditional_logic_wrapper").addClass("opened"),jQuery(".conditional-logic-btn").addClass("active"),jQuery(".form_canvas").addClass("conditional-logic-opened"),jQuery(".nex_forms_admin_page_wrapper").addClass("conditional-logic-ui"),jQuery(".overall-settings-column #close-settings").trigger("click"),jQuery(".field-settings-column #close-settings").trigger("click"),setTimeout(function(){reset_logic_gui()},300))}),jQuery(document).on("click",".conditional_logic_wrapper #close-settings",function(){jQuery("li.all_steps.current a").trigger("click"),jQuery(".btn.workspace.c-logic").removeClass("active"),jQuery(".btn.workspace.active").length<=0&&jQuery(".btn.workspace.normal").addClass("active"),jQuery(".conditional-logic-btn").removeClass("active"),jQuery(".conditional_logic_wrapper").removeClass("opened"),jQuery(".form_canvas").removeClass("conditional-logic-opened"),jQuery(".nex_forms_admin_page_wrapper").removeClass("conditional-logic-ui"),jQuery(".c_logic_field_type").remove()}),reset_rule_complexity(),setTimeout(function(){set_c_logic_fields()},1e3),jQuery(document).on("change",'.cl_field, select[name="cla_field"]',function(){jQuery(this).attr("data-selected",jQuery(this).val())}),jQuery(document).on("change",'input[name="adv_cl"]',function(){1==jQuery(this).prop("checked")?jQuery(".conditional_logic").removeClass("simple_view").addClass("advanced_view"):(jQuery(".conditional_logic").addClass("simple_view").removeClass("advanced_view"),reset_rule_complexity())}),jQuery(document).on("click",".add_new_rule",function(){var e=jQuery(".conditional_logic_clonables .new_rule").clone();jQuery(".set_rules").append(e);var t=Math.round(9999*Math.random());e.find(".set_rule_conditions").addClass("get_rule_conditions"),e.find(".set_rule_conditions").removeClass("set_rule_conditions"),e.find(".set_rule_actions").addClass("get_rule_actions"),e.find(".set_rule_actions").removeClass("set_rule_actions"),e.find('input[type="radio"]').attr("name",t),e.find("select.cl_field").val("0"),e.find('select[name="cla_field"]').val("0"),jQuery(".conditional_logic_wrapper.settings-column-style .inner").animate({scrollTop:1e4},300),count_nf_conditions(),jQuery("#nex-forms").hasClass("running-tutorial")&&setTimeout(function(){e.find('select[name="the_action"] option[value="0"]').prop("selected",!0),e.find('select[name="field_condition"] option[value="0"]').prop("selected",!0),e.find('select[name="the_action"] option[value="0"]').trigger("click"),e.find('select[name="field_condition"] option[value="0"]').trigger("click"),e.find('select[name="the_action"]').trigger("change"),e.find('select[name="field_condition"]').trigger("change")},200)}),jQuery(document).on("click",".add_condition",function(){var e=jQuery(".conditional_logic_clonables .set_rule_conditions").clone();jQuery(this).parent().find(".get_rule_conditions").append(e)}),jQuery(document).on("click",".add_action",function(){var e=jQuery(".conditional_logic_clonables .set_rule_actions").clone();jQuery(this).parent().find(".get_rule_actions").append(e)}),jQuery(document).on("click",".delete_action, .delete_condition",function(){jQuery(this).parent().remove(),reset_rule_complexity(),reset_logic_gui()}),jQuery(document).on("click",".delete_rule, .delete_simple_rule",function(){jQuery(this).closest(".new_rule").remove(),reset_rule_complexity(),reset_logic_gui()}),jQuery(document).on("click",".duplicate_simple_rule",function(){var e=jQuery(this).closest(".new_rule");e.clone().insertAfter(e),reset_rule_complexity()}),jQuery(document).on("mouseenter",".adv_arrow, .avd_arrows_connector, .adv_target, .avd_targets_connector, .adv_connector, .avd_arrow_condition, .new_rule.advanced_view",function(){var e=jQuery(this).attr("data-rule-id");jQuery(".connect_id_"+e).addClass("over-connector")}),jQuery(document).on("mouseleave",".adv_arrow, .avd_arrows_connector, .adv_target, .avd_targets_connector, .adv_connector, .avd_arrow_condition, .new_rule.advanced_view",function(){var e=jQuery(this).attr("data-rule-id");jQuery(".connect_id_"+e).removeClass("over-connector")}),jQuery(document).on("mouseenter",".cl_arrow",function(){var e=jQuery(this).attr("data-rule-key"),e=jQuery(".conditional_logic_wrapper.settings-column-style .inner .for_rule_"+e).attr("data-original-offset")-jQuery(".conditional_logic_wrapper.settings-column-style .inner").offset().top;jQuery(".conditional_logic_wrapper.settings-column-style .inner").animate({scrollTop:e},100)}),jQuery(document).on("mouseenter",".adv_arrow, .avd_arrows_connector, .adv_target, .avd_targets_connector, .adv_connector, .avd_arrow_condition",function(){jQuery(this).attr("data-rule-key");var e=jQuery(this).attr("data-rule-id");jQuery(".connect_id_"+e).addClass("over-connector");e=jQuery(".conditional_logic_wrapper.settings-column-style .inner .connect_id_"+e).attr("data-original-offset")-jQuery(".conditional_logic_wrapper.settings-column-style .inner").offset().top;jQuery(".conditional_logic_wrapper.settings-column-style .inner").animate({scrollTop:e},100)}),jQuery(document).on("mouseenter",".cl_arrow, .panel.new_rule",function(){var e=jQuery(this).attr("data-rule-key");jQuery(".for_rule_"+e).addClass("show-active-rule")}),jQuery(document).on("mouseleave",".cl_arrow, .panel.new_rule",function(){var e=jQuery(this).attr("data-rule-key");jQuery(".for_rule_"+e).removeClass("show-active-rule")})});