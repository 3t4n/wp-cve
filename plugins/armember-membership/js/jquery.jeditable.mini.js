!function(t){"use strict";t.fn.editableAriaShim=function(){return this.attr({role:"button",tabindex:0}),this},t.fn.editable=function(e,i){if("disable"!==e)if("enable"!==e){if("destroy"!==e){var a=t.extend({},t.fn.editable.defaults,{target:e},i),n=t.editable.types[a.type].plugin||function(){},l=t.editable.types[a.type].submit||function(){},s=t.editable.types[a.type].buttons||t.editable.types.defaults.buttons,o=t.editable.types[a.type].content||t.editable.types.defaults.content,r=t.editable.types[a.type].element||t.editable.types.defaults.element,d=t.editable.types[a.type].reset||t.editable.types.defaults.reset,p=t.editable.types[a.type].destroy||t.editable.types.defaults.destroy,c=a.callback||function(){},u=a.intercept||function(t){return t},h=a.onedit||function(){},m=a.onsubmit||function(){},f=a.onreset||function(){},b=a.onerror||d;a.before;return a.tooltip&&t(this).attr("title",a.tooltip),this.each(function(){var i=this;t(this).data("event.editable",a.event),t.trim(t(this).html())||t(this).html(a.placeholder),"destroy"!==e?(t(this).on(a.event,function(e){if(!0!==t(this).data("disabled.editable")&&9!==e.which&&!i.editing&&!1!==h.apply(this,[a,i,e])){if(a.before&&jQuery.isFunction(a.before))a.before(e);else if(a.before&&!jQuery.isFunction(a.before))throw"The 'before' option needs to be provided as a function!";e.preventDefault(),e.stopPropagation(),a.tooltip&&t(i).removeAttr("title"),t(this).html().toLowerCase().replace(/(;|"|\/)/g,"")===a.placeholder.toLowerCase().replace(/(;|"|\/)/g,"")&&t(this).html(""),i.editing=!0,i.revert=t(i).text(),t(i).html("");var p=t("<form />");a.cssclass&&("inherit"===a.cssclass?p.attr("class",t(i).attr("class")):p.attr("class",a.cssclass)),a.style&&("inherit"===a.style?(p.attr("style",t(i).attr("style")),p.css("display",t(i).css("display"))):p.attr("style",a.style)),a.label&&p.append("<label>"+a.label+"</label>"),a.formid&&p.attr("id",a.formid);var f,y,v=r.apply(p,[a,i]);a.inputcssclass&&("inherit"===a.inputcssclass?v.attr("class",t(i).attr("class")):v.attr("class",a.inputcssclass));var g=!1;if(a.loadurl){y=i.setTimeout(function(){v.disabled=!0},100),t(i).html(a.loadtext);var x={};x[a.id]=i.id,t.isFunction(a.loaddata)?t.extend(x,a.loaddata.apply(i,[i.revert,a])):t.extend(x,a.loaddata),t.ajax({type:a.loadtype,url:a.loadurl,data:x,async:!1,cache:!1,success:function(t){i.clearTimeout(y),f=t,v.disabled=!1}})}else a.data?(f=a.data,t.isFunction(a.data)&&(f=a.data.apply(i,[i.revert,a]))):f=i.revert;if(o.apply(p,[f,a,i]),v.attr("name",a.name),"none"!==a.width){var w=a.width-(v.outerWidth(!0)-a.width);v.width(w)}s.apply(p,[a,i]),a.showfn&&t.isFunction(a.showfn)&&p.hide(),t(i).html(""),t(i).append(p),a.showfn&&t.isFunction(a.showfn)&&a.showfn(p),n.apply(p,[a,i]),p.find(":input:visible:enabled:first").trigger("focus"),a.select&&v.select(),t(this).on("keydown",function(t){27===t.which?(t.preventDefault(),d.apply(p,[a,i])):13==t.which&&t.shiftKey&&(t.preventDefault(),p.trigger("submit"))}),"cancel"===a.onblur?v.on("blur",function(t){y=i.setTimeout(function(){d.apply(p,[a,i])},500)}):"submit"===a.onblur?v.on("blur",function(t){y=i.setTimeout(function(){p.trigger("submit")},200)}):t.isFunction(a.onblur)&&v.on("blur",function(t){!1===a.onblur.apply(i,[v.val(),a,p])&&d.apply(p,[a,i])}),p.on("submit",function(e){if(e.preventDefault(),e.stopPropagation(),g)return!1;if(g=!0,y&&i.clearTimeout(y),(g=!1!==m.apply(p,[a,i]))&&(g=!1!==l.apply(p,[a,i])))if(t.isFunction(a.target)){var n=function(e,n){g=!1,!1!==n&&(t(i).html(e),i.editing=!1,c.apply(i,[i.innerText,a]),t.trim(t(i).html())||t(i).html(a.placeholder))},s=a.target.apply(i,[v.val(),a,n]);!1!==s&&void 0!==s&&n(s,s)}else{var o={};o[a.name]=v.val(),o[a.id]=i.id,t.isFunction(a.submitdata)?t.extend(o,a.submitdata.apply(i,[i.revert,a,o])):t.extend(o,a.submitdata),"PUT"===a.method&&(o._method="put"),t(i).html(a.indicator);var r={type:"POST",complete:function(t,e){g=!1},data:o,dataType:"html",url:a.target,success:function(e,n){e=u.apply(i,[e,n]),"html"===r.dataType&&t(i).html(e),i.editing=!1,c.apply(i,[e,a,o]),t.trim(t(i).html())||t(i).html(a.placeholder)},error:function(t,e,n){b.apply(p,[a,i,t])}};t.extend(r,a.ajaxoptions),t.ajax(r)}return t(i).attr("title",a.tooltip),!1})}}),i.reset=function(e){i.editing&&!1!==f.apply(e,[a,i])&&(t(i).text(i.revert),i.editing=!1,t.trim(t(i).html())||t(i).html(a.placeholder),a.tooltip&&t(i).attr("title",a.tooltip))},i.destroy=function(e){t(i).off(t(i).data("event.editable")).removeData("disabled.editable").removeData("event.editable"),i.clearTimeouts(),i.editing&&d.apply(e,[a,i])},i.clearTimeout=function(e){var a=t(i).data("timeouts");if(clearTimeout(e),a){var n=a.indexOf(e);n>-1?(a.splice(n,1),a.length<=0&&t(i).removeData("timeouts")):console.warn("jeditable clearTimeout could not find timeout "+e)}},i.clearTimeouts=function(){var e=t(i).data("timeouts");if(e){for(var a=0,n=e.length;a<n;++a)clearTimeout(e[a]);e.length=0,t(i).removeData("timeouts")}},i.setTimeout=function(e,a){var n=t(i).data("timeouts"),l=setTimeout(function(){e(),i.clearTimeout(l)},a);return n||(n=[],t(i).data("timeouts",n)),n.push(l),l}):p.apply(t(this).find("form"),[a,i])})}t(this).off(t(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable")}else t(this).data("disabled.editable",!1);else t(this).data("disabled.editable",!0)};var e=function(t){var e=document.createElement("input");return e.setAttribute("type",t),"text"!==e.type?t:"text"};t.editable={types:{defaults:{element:function(e,i){var a=t('<input type="hidden"></input>');return t(this).append(a),a},content:function(e,i,a){t(this).find(":input:first").val(e)},reset:function(t,e){e.reset(this)},destroy:function(t,e){e.destroy(this)},buttons:function(e,i){var a,n,l=this;(e.submit&&(e.submit.match(/>$/)?a=t(e.submit).on("click",function(){"submit"!==a.attr("type")&&l.trigger("submit")}):((a=t('<button type="submit" />')).html(e.submit),e.submitcssclass&&a.addClass(e.submitcssclass)),t(this).append(a)),e.cancel)&&(e.cancel.match(/>$/)?n=t(e.cancel):((n=t('<button type="cancel" />')).html(e.cancel),e.cancelcssclass&&n.addClass(e.cancelcssclass)),t(this).append(n),t(n).on("click",function(a){return(t.isFunction(t.editable.types[e.type].reset)?t.editable.types[e.type].reset:t.editable.types.defaults.reset).apply(l,[e,i]),!1}))}},text:{element:function(e,i){var a=t("<input />").attr({autocomplete:"off",list:e.list,maxlength:e.maxlength,pattern:e.pattern,placeholder:e.placeholder,tooltip:e.tooltip,type:"text"});return"none"!==e.width&&a.css("width",e.width),"none"!==e.height&&a.css("height",e.height),e.size&&a.attr("size",e.size),e.maxlength&&a.attr("maxlength",e.maxlength),t(this).append(a),a}},textarea:{element:function(e,i){var a=t("<textarea></textarea>");return e.rows?a.attr("rows",e.rows):"none"!==e.height&&a.height(e.height),e.cols?a.attr("cols",e.cols):"none"!==e.width&&a.width(e.width),e.maxlength&&a.attr("maxlength",e.maxlength),t(this).append(a),a}},select:{element:function(e,i){var a=t("<select />");return e.multiple&&a.attr("multiple","multiple"),t(this).append(a),a},content:function(e,i,a){var n;n=String===e.constructor?JSON.parse(e):e;var l,s,o=[];if(Array.isArray(n)&&n.every(Array.isArray))o=n,n={},o.forEach(function(t){n[t[0]]=t[1]});else for(l in n)o.push([l,n[l]]);i.sortselectoptions&&o.sort(function(t,e){return(t=t[1])<(e=e[1])?-1:t>e?1:0});for(var r=0;r<o.length;r++){l=o[r][0];var d=o[r][1];n.hasOwnProperty(l)&&("selected"!==l&&(s=t("<option />").val(l).append(d),n.selected!==l&&l!==t.trim(a.revert)||t(s).prop("selected","selected"),t(this).find("select").append(s)))}if(!i.submit){var p=this;t(this).find("select").change(function(){p.trigger("submit")})}}},number:{element:function(i,a){var n=t("<input />").attr({maxlength:i.maxlength,placeholder:i.placeholder,min:i.min,max:i.max,step:i.step,tooltip:i.tooltip,type:e("number")});return"none"!==i.width&&n.css("width",i.width),t(this).append(n),n}},email:{element:function(i,a){var n=t("<input />").attr({maxlength:i.maxlength,placeholder:i.placeholder,tooltip:i.tooltip,type:e("email")});return"none"!==i.width&&n.css("width",i.width),t(this).append(n),n}},url:{element:function(i,a){var n=t("<input />").attr({maxlength:i.maxlength,pattern:i.pattern,placeholder:i.placeholder,tooltip:i.tooltip,type:e("url")});return"none"!==i.width&&n.css("width",i.width),t(this).append(n),n}}},addInputType:function(e,i){t.editable.types[e]=i}},t.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable keydown.editable",onblur:"cancel",tooltip:"Click to edit",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",sortselectoptions:!1,loaddata:{},submitdata:{},ajaxoptions:{}}}(jQuery);