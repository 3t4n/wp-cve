function yith_wapo_replace_image(e,t=!1){var a,i=yith_wapo.replace_image_path,o=".yith_magnifier_zoom_magnifier, .zoomWindowContainer .zoomWindow",r=e.data("replace-image");null===r||!t&&jQuery(i).attr("src")===r||(void 0!==e.data("replace-image")&&""!=e.data("replace-image")&&(void 0===jQuery(i).attr("wapo-original-img")&&(jQuery(i).attr("wapo-original-img",jQuery(i).attr("src")),jQuery(o).length)&&jQuery(o).attr("wapo-original-img",jQuery(o).css("background-image").slice(4,-1).replace(/"/g,"")),jQuery(i).attr("src",r),jQuery(i).attr("srcset",r),jQuery(i).attr("data-src",r),jQuery(o).css("background-image","url("+r+")"),jQuery("#yith_wapo_product_img").val(r),jQuery(i).attr("data-large_image",r),0<jQuery(".woocommerce-product-gallery .woocommerce-product-gallery__image").length&&jQuery(".woocommerce-product-gallery").trigger("woocommerce_gallery_reset_slide_position"),jQuery(".woocommerce-product-gallery").trigger("woocommerce_gallery_init_zoom"),jQuery(document).trigger("yith-wapo-after-replace-image")),t&&void 0!==jQuery(i).attr("wapo-original-img")&&(a=jQuery(i).attr("wapo-original-img"),e=jQuery(o).attr("wapo-original-img"),jQuery("#yith-wapo-container .yith-wapo-option").each(function(e,t){t=jQuery(t);t.data("replace-image")&&t.hasClass("selected")&&(a=t.data("replace-image"))}),jQuery("#yith_wapo_product_img").val(a),jQuery("#yith_wapo_product_img").val(""),jQuery(i).attr("src",a),jQuery(i).attr("srcset",a),jQuery(i).attr("data-src",a),jQuery(i).attr("data-large_image",a),jQuery(o).css("background-image","url("+e+")"),0<jQuery(".woocommerce-product-gallery .woocommerce-product-gallery__image").length&&jQuery(".woocommerce-product-gallery").trigger("woocommerce_gallery_reset_slide_position"),jQuery(".woocommerce-product-gallery").trigger("woocommerce_gallery_init_zoom"),jQuery(document).trigger("yith-wapo-after-replace-image")))}function yith_wapo_check_required_fields(i){var o=!1,r=!1,e=yith_wapo.dom.single_add_to_cart_button;return jQuery("form.cart .yith-wapo-addon:not(.hidden):visible input, form.cart .yith-wapo-addon:not(.hidden):visible select, form.cart .yith-wapo-addon:not(.hidden):visible textarea").each(function(){var e=jQuery(this),t=(e.closest(".yith-wapo-option"),e.closest(".yith-wapo-addon")),a=e.closest("div.yith-wapo-addon.wapo-toggle").find("h3.wapo-addon-title.toggle-closed"),t=t.find(".wapo-addon-title");"file"===e.attr("type")||e.hasClass("wapo-product-qty")||(e.attr("required")&&("checkbox"===e.attr("type")||"radio"===e.attr("type"))&&!e.closest(".yith-wapo-option").hasClass("selected")||e.attr("required")&&(""==e.val()||"Required"==e.val())?("highlight"===i&&(showRequiredMessage(e),t.addClass("wapo-error"),a)&&a.click(),o=r=!0):restartRequiredElement(e))}),"hide"==i&&(r?jQuery(e).hide():jQuery(e).fadeIn()),!o}function updateContainerProductPrice(a){if(!jQuery(".cart.yith-wcpb-bundle-form").length&&a.variation_id===parseInt(jQuery(".variation_id").val())){let e=jQuery("#yith-wapo-container"),t=0;var i;"undefined"!=typeof a.display_price&&(t=a.display_price,"yes"===yith_wapo.use_price_html_on_variations)&&"undefined"!=typeof a.price_html&&(i=jQuery(a.price_html).find("> .amount bdi").text(),i=wcPriceToFloat(i),isNaN(i)||t===i||(t=i)),e.attr("data-product-price",t),e.attr("data-product-id",a.variation_id)}}function yith_wapo_sprintf(e,...a){return e.replace(/%([sd])/g,function(e,t){return"s"===t?a.shift():"d"===t?(t=a.shift(),Number.isInteger(t)?t.toString():""):e})}function uploadFiles(a,i){for(var o=0;o<a.length;o++){let e=i.find(".yith-wapo-uploaded-file"),t=i.find(".yith-wapo-uploaded-file-element").last().data("index")+1;!isNaN(t)&&void 0!==t||(t=0),appendNewUploadedFile(o,a,e,t),o==a.length-1&&(e.show(),uploadSingleFile(a,0,i))}}function calculate_exact_file_size(e){let t=e.size,a=0;for(;900<t;)t/=1024,a++;return Math.round(100*t)/100+" "+["Bytes","KB","MB","GB"][a]}function yith_wapo_check_required_min_max(e=""){if(!checkRequiredSelect(e))return!1;if(!checkTextInputLimit())return!1;if("hide"!==e&&!yith_wapo_check_required_fields("highlight"))return!1;var t,a=0,i="hide"!==e;if(jQuery("form.cart .yith-wapo-addon:not(.hidden)").each(function(){0<(t=yith_wapo_check_min_max(jQuery(this),i))&&(a+=t)}),"hide"===e){e=yith_wapo.dom.single_add_to_cart_button;a?jQuery(e).hide():jQuery(e).fadeIn()}else if(0<a)return!1;return!0}function yith_wapo_check_min_max(a,e=!1){var t=a.data("addon-type"),i=a.data("min"),o=a.data("max"),r=a.data("exa"),n=a.find(".min-error-message"),d=a.find(".wapo-addon-title"),c=0,p=a.find("h3.wapo-addon-title.toggle-closed");if(d.removeClass("wapo-error"),"select"!==t&&(""!==i||""!==r||""!==o)){if("number"===t||"text"===t||"textarea"===t){if(jQuery(a).find(".yith-wapo-option-value").each(function(e){jQuery(this).val().length&&c++}),o&&o<c)return(t=jQuery(a).find(".options-container")).find(".max-selected-error").length||(t.append('<p class="max-selected-error">'+yith_wapo.i18n.maxOptionsSelectedMessage+"</p>"),d.addClass("wapo-error")),1}else c=a.find("input:checkbox:checked, input:radio:checked").length;if(0<r){let t=0;if(r==c)a.removeClass("required-min").find(".min-error").hide(),a.find("input:checkbox").not(":checked");else{if(e){t=r-c,a.addClass("required-min"),a.find(".min-error").show(),d.addClass("wapo-error");let e=yith_wapo.i18n.selectOptions.replace("%d",r);1===r&&(e=yith_wapo.i18n.selectAnOption),n.text(e),p&&p.click()}a.find(".yith-wapo-option:not(.out-of-stock) input:checkbox").not(":checked").attr("disabled",!1)}return t}if(0<i){t=i-c;if(!(i<=c)){if(e){let e=yith_wapo.i18n.selectAnOption;1<i&&(e=yith_wapo.i18n.selectAtLeast.replace("%d",i)),a.addClass("required-min"),a.find(".min-error").show(),d.addClass("wapo-error"),n.text(e),p&&p.click()}return t}a.removeClass("required-min").find(".min-error").hide()}if(o&&!(c<=o))return e&&(a.addClass("required-min"),(r=jQuery(a).find(".options-container")).find(".max-selected-error").length||(r.append('<small class="max-selected-error">'+yith_wapo.i18n.maxOptionsSelectedMessage+"</small>"),d.addClass("wapo-error"))),1;a.removeClass("required-min").find(".max-selected-error").hide()}}function checkRequiredSelect(r=""){let n=!0;return jQuery(".yith-wapo-addon.yith-wapo-addon-type-select select").each(function(){var e,t,a,i,o=jQuery(this);o.is(":required")&&(t=(e=o.parents(".yith-wapo-addon")).find(".min-error-message"),a=e.find(".wapo-addon-title"),i=o.val(),t.text(""),a.removeClass("wapo-error"),e.removeClass("required-min"),"default"!==i||e.hasClass("hidden")||(n=!1)||"hide"===r||(i=e.find(".min-error"),o=o.parents("div.yith-wapo-addon.wapo-toggle").find(".wapo-addon-title.toggle-closed"),e.addClass("required-min"),o&&o.click(),a.addClass("wapo-error"),t.text(yith_wapo.i18n.selectAnOption.replace("%d",1)),i.show()))}),n}function checkTextInputLimit(){let r=!0;return jQuery("form.cart .yith-wapo-addon.yith-wapo-addon-type-text:not(.hidden) input").each((e,t)=>{var t=jQuery(t),a=t.val(),i=t.attr("minlength"),o=t.attr("maxlength");""!==i&&a.length<i||""!==o&&a.length>o?(t.addClass("length-error"),t.siblings(".length-error-message").show(),r=!1):(t.siblings(".length-error-message").hide(),t.removeClass("length-error"))}),r}function yith_wapo_check_multiplied_price(e){let t=e.data("price");var a=e.data("price-sale");let i=e.data("default-price");var o=e.data("price-type"),r=e.data("price-method");let n="price",d=0;var c=e.val();0<!i&&(0<a&&"number"!==e.attr("type")&&"multiplied"===o&&(t=a,n="price-sale"),i=t,e.data("default-price",i)),"value_x_product"==r?(a=parseFloat(jQuery("#yith-wapo-container").attr("data-product-price")),d=c*a):"multiplied"==o&&(d=c*i),(0<d||"decrease"==r||d<0&&"multiplied"===o)&&e.data(n,d)}function yith_wapo_check_multiplied_length(t){var a=t.data("price");let i=t.data("default-price");var e=t.data("price-type");if(0<!i&&(i=a,t.data("default-price",i)),"characters"===e){a=t.data("remove-spaces");let e=t.val().length;a&&(e=t.val().replace(/\s+/g,"").length),t.data("price",e*i)}}jQuery(document).ready(function(p){initColorpicker=function(){var d={color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,target:!1,width:180,palettes:!1,change:function(e,t){var a=p(this).closest(".wp-picker-container"),i=a.find(".wp-picker-input-wrap"),o=a.find(".wp-picker-custom-placeholder"),r=a.find(".wp-picker-default-custom"),n=a.find(".wp-color-picker").data("addon-colorpicker-show"),a=a.find(".wp-color-picker").data("default-color"),d=i.find("input.wp-color-picker"),d=p(d[0]);"placeholder"!==n||""===t.color.toString()&&"undefined"===t.color.toString()||(i.find(".wp-color-picker").show(),o.hide(),r.show(),o.css("line-height","3.0")),r.removeClass("default_color"),a!==t.color.toString()&&r.addClass("default_color"),p(document).trigger("wapo-colorpicker-change",d)},clear:function(e,t){var a=p(this).closest(".wp-picker-container"),i=a.find(".wp-picker-input-wrap"),o=a.find(".wp-picker-custom-placeholder"),r=a.find(".wp-picker-default-custom"),a=a.find(".wp-color-picker").data("addon-colorpicker-show"),n=i.find("input.wp-color-picker"),n=p(n[0]);"placeholder"===a&&(i.find(".wp-color-picker").hide(),o.show(),r.hide(),o.css("line-height","0")),p(document).trigger("wapo-colorpicker-clear",n[0])}};function e(){p(".yith-wapo-block .yith-wapo-addon-type-colorpicker .wp-color-picker").each(function(){p(this).wpColorPicker(d);var e=p(this).closest(".wp-picker-container"),t=e.find("button .wp-color-result-text"),a=e.find(".wp-picker-default"),i=e.find(".wp-picker-input-wrap"),o=p(this).data("addon-colorpicker-show"),r=p(this).data("addon-placeholder"),t=(t.html(""),p(this).parents(".wp-picker-container")),n=t.find(".wp-picker-input-wrap");t.hasClass("yith-wapo-colorpicker-initialized")||t.addClass("yith-wapo-colorpicker-initialized"),n.find(".wp-picker-default-custom").length||(t=p("<span/>").attr({"class":"wp-picker-default-custom"}),n.find(".wp-picker-default, .wp-picker-clear").wrap(t)),"placeholder"===o&&(i.find(".wp-color-picker").hide(),i.find(".wp-picker-custom-placeholder").length||((n=p("<span/>").attr({"class":"wp-picker-custom-placeholder"})).html(r),i.find(".screen-reader-text").before(n)),t=e.find(".wp-picker-default-custom"),o=e.find(".wp-picker-custom-placeholder"),t.hide(),o.css("line-height","0")),a.trigger("click")})}p(document).on("yith-wapo-after-reload-addons",e),p(document).on("yith-wapo-after-reload-addons",initDatePickers),checkColorPickerOnInput=function(){p(document).on("click",function(e){p(e.target).is(".yith-wapo-colorpicker-container .iris-picker, .yith-wapo-colorpicker-container .iris-picker-inner")||0<(e=p(".yith-wapo-colorpicker-container .yith-wapo-colorpicker-initialized .wp-color-picker")).length&&e.iris("hide")}),p(".yith-wapo-colorpicker-container .yith-wapo-colorpicker-initialized .wp-color-picker").click(function(e){p(this).iris("show")})},e(),checkColorPickerOnInput()},initDatePickers=function(){p(".yith-wapo-block .yith_wapo_date.datepicker").each(function(){var e=p(this);initDatePicker(e)})},initTimePicker=function(t){let e=t.data("params"),o=e.time_data||"",a=e.show_time_selector||"";"object"==typeof o&&null!==o&&(o=Object.values(o)),a&&setTimeout(function(){var a,i,e;p("#wapo-datepicker-time").length||(a="",i=t.closest(".date-container").find(".temp-time").text(),p(o).each(function(e,t){a+=t!==i?"<option>"+t+"</option>":"<option selected>"+t+"</option>"}),e='<div id="wapo-datepicker-time"><label>'+yith_wapo.i18n.datepickerSetTime+'</label><select id="wapo-datepicker-time-select">'+a+'</select></div><div id="wapo-datepicker-save"><button>'+yith_wapo.i18n.datepickerSaveButton+"</button></div>",p(e).appendTo("#ui-datepicker-div"))},10)},initDatePicker=function(c){var e=c.data("params"),t="",a="",i=e.start_year||"",o=e.end_year||"",r=e.default_date||"",n=e.date_format||"",d=e.additional_opts||"",i={minDate:t=i?new Date(e.start_year,"00","01"):t,maxDate:a=o?new Date(e.end_year,"11","31"):a,defaultDate:r,dateFormat:n,beforeShowDay:function(i){let e=c.data("params"),t=e.selectable_days_opt||"",a=e.selectable_days||"",o=e.selected_items||"",r=e.enable_disable_date_rules||"",n=!0;if((r="enable"===r?1:0)&&(n=!1),"days"===t||"date"===t){var d=i.getDate()+"-"+(i.getMonth()+1)+"-"+i.getFullYear();if(-1===p.inArray(d,a))return n=!1}else if("before"===t){d=i.getTime();let e=new Date;if(e.setHours(0,0,0,0),d<(e=e.getTime()))return n=!1}return 0<o.length&&(o=JSON.parse(o),p.each(o,function(e,t){if("days"===e){let o=new Date(i);p.each(t,function(e,t){var[t,a,i]=t.split("-"),t=new Date(parseInt(t),parseInt(a)-1,parseInt(i));if(o.toDateString()===t.toDateString())return n=!!r,!1})}else if("daysweek"===e){let a=i.getDay();p.each(t,function(e,t){p.each(t,function(e,t){if(a==t)return n=!!r,!1})})}else if("months"===e){let a=i.getMonth();p.each(t,function(e,t){p.each(t,function(e,t){if(a==t-1)return n=!!r,!1})})}else if("years"===e){let a=i.getFullYear();p.each(t,function(e,t){p.each(t,function(e,t){if(a==t)return n=!!r,!1})})}})),n?[!0]:[!1]},beforeShow:function(e){initTimePicker(c)},onSelect:function(e,t){var a,i;0<p(t.dpDiv).find("#wapo-datepicker-time-select").length&&(a=p(t.dpDiv).find("#wapo-datepicker-time-select").val(),i=p(this).closest(".date-container").find(".temp-time"),p(this).val(e+" "+a),i.text(a)),p("#"+t.id).change()},onChangeMonthYear:function(e,t,a){initTimePicker(c)},onUpdateDatepicker:function(e){jQuery("#ui-datepicker-div").attr("wapo-option-id",e.id)},onClose:function(e,t){p(this).trigger("yith_wapo_date_field_updated",e)}},i=Object.assign(i,d);c.datepicker(i)},initColorpicker(),initDatePickers()}),jQuery(function(v){var a=!1;function i(e){let t=!1,a=(e.is('input[type="number"]')&&(t=!(0!=e.attr("name").indexOf("yith_wapo_product_qty")||!e.hasClass("qty"))),"");var i;e.is("select")&&(a=e.closest(".yith-wapo-addon.yith-wapo-addon-type-select")),[e=null]=[e],i=function(e){e=e.data("price");return e}(e),e=function(e){e=e.data("sale-price");return e}(e),(void 0!==i&&""!==i||void 0!==e&&""!==e||t||a&&"select"===a.data("addon-type"))&&calculateTotalAddonsPrice()}yith_wapo_conditional_logic_check=function(e={}){var d={};jQuery("form.cart .yith-wapo-addon.conditional_logic").each(function(){var e=!1,t=!1,a=jQuery(this).data("conditional_logic_display"),i=jQuery(this).data("conditional_logic_display_if"),o=String(jQuery(this).data("conditional_rule_addon")),r=String(jQuery(this).data("conditional_rule_addon_is")),n=String(jQuery(this).data("conditional_rule_variations")),o=void 0!==o&&"0"!==o&&""!==o&&o.split("|"),r=void 0!==r&&""!==r&&r.split("|");if((n=void 0!==n&&""!==n&&n.split("|"))||o&&r){if(o&&r)switch(i){case"all":e=function(e,t){for(var a=!0,i=0;i<e.length;i++)if(0!=e[i]&&e[i]){var o,r,n=e[i].split("-"),d=!1,c=!1;switch(c="undefined"!=typeof n[1]?(d=(jQuery("#yith-wapo-"+n[0]+"-"+n[1]).is(":checked")||jQuery("select#yith-wapo-"+n[0]).val()==n[1])&&!jQuery("#yith-wapo-addon-"+n[0]).hasClass("hidden"),r=jQuery("input#yith-wapo-"+n[0]+"-"+n[1]).val(),o=jQuery("textarea#yith-wapo-"+n[0]+"-"+n[1]).val(),(void 0!==r&&""!==r||void 0!==o&&""!==o)&&!jQuery("#yith-wapo-addon-"+n[0]).hasClass("hidden")):(d=(d=0<jQuery("#yith-wapo-addon-"+e[i]+" input:checkbox:checked").length||0<jQuery("#yith-wapo-addon-"+e[i]+" input:radio:checked").length||0<jQuery("#yith-wapo-addon-"+e[i]+" option:selected").length&&"default"!=jQuery("#yith-wapo-addon-"+e[i]+" option:selected").val())&&!jQuery("#yith-wapo-addon-"+e[i]).hasClass("hidden"),r="undefined",jQuery("#yith-wapo-addon-"+n[0]+" input, #yith-wapo-addon-"+n[0]+" textarea").each(function(e){""!==jQuery(this).val()&&(r=!0)}),"undefined"!=r&&""!==r&&!jQuery("#yith-wapo-addon-"+n[0]).hasClass("hidden")),t[i]){case"selected":d||(a=!1);break;case"not-selected":d&&(a=!1);break;case"empty":c&&(a=!1);break;case"not-empty":c||(a=!1)}if(!a)break}return a}(o,r);break;case"any":e=function(e,t){for(var a=!1,i=0;i<e.length;i++)if(0!=e[i]&&e[i]){var o,r,n=e[i].split("-");switch(AddonNotEmpty="undefined"!=typeof n[1]?(AddonSelected=(jQuery("#yith-wapo-"+n[0]+"-"+n[1]).is(":checked")||jQuery("select#yith-wapo-"+n[0]).val()==n[1])&&!jQuery("#yith-wapo-addon-"+n[0]).hasClass("hidden"),r=jQuery("input#yith-wapo-"+n[0]+"-"+n[1]).val(),o=jQuery("textarea#yith-wapo-"+n[0]+"-"+n[1]).val(),(void 0!==r&&""!==r||void 0!==o&&""!==o)&&!jQuery("#yith-wapo-addon-"+n[0]).hasClass("hidden")):(AddonSelected=(AddonSelected=0<jQuery("#yith-wapo-addon-"+e[i]+" input:checkbox:checked").length||0<jQuery("#yith-wapo-addon-"+e[i]+" input:radio:checked").length||0<jQuery("#yith-wapo-addon-"+e[i]+" option:selected").length&&"default"!=jQuery("#yith-wapo-addon-"+e[i]+" option:selected").val())&&!jQuery("#yith-wapo-addon-"+e[i]).hasClass("hidden"),r="undefined",jQuery("#yith-wapo-addon-"+n[0]+" input, #yith-wapo-addon-"+n[0]+" textarea").each(function(e){""!==jQuery(this).val()&&(r=!0)}),"undefined"!=r&&""!==r&&!jQuery("#yith-wapo-addon-"+n[0]).hasClass("hidden")),t[i]){case"selected":AddonSelected&&(a=!0);break;case"not-selected":AddonSelected||(a=!0);break;case"empty":AddonNotEmpty||(a=!0);break;case"not-empty":AddonNotEmpty&&(a=!0)}if(a)break}return a}(o,r)}else e=!0;e&&n&&(i=jQuery(".variation_id").val(),-1===jQuery.inArray(String(i),n))||(t=!0)}else t=e=!0,a="show";switch(a){case"show":d[jQuery(this).attr("id")]=t&&e?"not-hidden":"hidden";break;case"hide":d[jQuery(this).attr("id")]=t&&e?"hidden":"not-hidden"}}),jQuery.each(d,function(e,t){e=jQuery("#"+e);"not-hidden"===t?(("slide"===yith_wapo.conditionalDisplayEffect?e.slideDown():e.fadeIn()).removeClass("hidden").find(".yith-wapo-option:not(.out-of-stock) .yith-wapo-option-value").attr("disabled",!1),yith_wapo_replace_image(e.find(".yith-wapo-option.selected")),e.hasClass("yith-wapo-addon-type-select")&&e.find(".yith-wapo-option-value").attr("disabled",!1),yith_wapo_check_min_max(e)):("slide"===yith_wapo.conditionalDisplayEffect?e.slideUp():e.hide()).addClass("hidden").find(".yith-wapo-option-value").attr("disabled",!0)}),JSON.stringify(d)!==JSON.stringify(e)&&yith_wapo_conditional_logic_check(d)},calculateAddonsPrice=function(){var f=0,w=0,m=0,_=0,g=v(yith_wapo.productQuantitySelector).val();return 0<!g&&(g=1),v("form.cart .yith-wapo-addon:not(.hidden):visible input, form.cart .yith-wapo-addon:not(.hidden):visible select, form.cart .yith-wapo-addon:not(.hidden):visible textarea").each(function(){let c=v(this),p=parseFloat(v("#yith-wapo-container").attr("data-product-price")),l=c.data("addon-id");if(l){let e=c.attr("type"),t=c.data("price-method"),a=0,i=0,o="",r=c.parents(".yith-wapo-addon"),n=r.data("addon-type"),d=1;if("number"===e&&0==c.val())return m;var s,u,h,y;c.is("textarea")&&(e="textarea"),(c.is(":checked")||c.find(":selected").is("option")||c.is("input:not([type=checkbox])")&&c.is("input:not([type=radio])")&&""!=c.val()||c.is("textarea")&&""!=c.val())&&(c.is("select")&&(c=c.find(":selected")),"number"===e&&yith_wapo_check_multiplied_price(c),"text"!==e&&"textarea"!==e||yith_wapo_check_multiplied_length(c),w!=l&&(w=c.data("addon-id"),f=c.data("first-free-options")),"yes"==c.data("first-free-enabled")&&0<f?f--:(void 0!==c.data("price-type")&&""!==c.data("price-type")&&(o=c.data("price-type")),s=c.data("price-sale"),u=c.data("price"),h=c.data("default-sale-price"),y=c.data("default-price"),void 0!==s&&""!==s&&0<=s&&"multiplied"!==o?(a=parseFloat(s),i=parseFloat(h)):void 0!==u&&""!==u&&(a=u,i=y),"percentage"===o&&"discount"!==t&&(a=a*p/100,i=i*p/100),"product"!==n||c.hasClass(".yith-wapo-option")||(c=c.parents(".yith-wapo-option"),(d=c.find(".wapo-product-qty"))&&1<(d=d.val())&&(a*=d,i*=d)),1<g&&!r.hasClass("sell_individually")&&(a*=g,i*=g),m+=a,_+=i))}}),{totalPrice:m,totalPriceDefault:_}},setTotalBoxPrices=function(e,t,a=0,i=0){var o=v(yith_wapo.productQuantitySelector).val(),e=e*(o=0<!o?1:o),o=parseFloat(t),t=parseFloat(t+e),r=o,n=v("#yith-wapo-container").attr("data-order-price");if(parseFloat(n)===parseFloat(t))return v("#wapo-total-price-table").css("opacity","1"),!1;n={product_id:parseInt(v("#yith-wapo-container").attr("data-product-id")),options_price:o,options_default_price:i,total_order_price:t,currency:yith_wapo.woocommerce_currency};calculateProductPrice(n),v("#wapo-total-price-table").css("opacity","1"),v(document).trigger("yith_wapo_product_price_updated",[e+r])},replaceProductPrice=function(e,t){("yes"===yith_wapo.replace_price_in_product_without_addons||v("#yith-wapo-container").length&&v("#yith-wapo-container").find(".yith-wapo-block").length)&&0<parseInt(e)&&"yes"===yith_wapo.replace_product_price&&!isNaN(parseFloat(e))&&0<v(yith_wapo.replace_product_price_class).length&&(v(yith_wapo.replace_product_price_class).html('<span class="woocommerce-Price-amount amount"><bdi>'+t+"</bdi></span>"),e=v(yith_wapo.replace_product_price_class+" bdi").text(),0===wcPriceToFloat(e))&&v(yith_wapo.replace_product_price_class).find("bdi").remove()},calculateProductPrice=function(r){var e={action:"update_totals_with_suffix",data:r,security:yith_wapo.addons_nonce};jQuery.ajax({url:yith_wapo.ajaxurl,type:"post",data:e,success:function(e){var t,a,i,o;e&&(t=e.price_html,a=e.options_price_suffix,i=e.order_price_suffix,o=r.total_order_price,v("#wapo-total-product-price").html(t),v("#wapo-total-options-price").html(a),v("#wapo-total-order-price").html(i),v("#yith-wapo-container").attr("data-order-price",o),replaceProductPrice(o,i),v(document).trigger("wapo-after-calculate-product-price",e))}})},calculateTotalAddonsPrice=function(e=!0){yith_wapo_conditional_logic_check(),"yes"===yith_wapo.hide_button_required&&(yith_wapo_check_required_fields("hide"),yith_wapo_check_required_min_max("hide")),v("#wapo-total-price-table").css("opacity","0.5");var t=parseFloat(v("#yith-wapo-container").attr("data-product-price")),a=yith_wapo.total_price_box_option,i=v("button.ywgc-amount-buttons.selected_button"),i=(0<i.length&&(t=i.data("price")),calculateAddonsPrice()),o=i.totalPrice,i=i.totalPriceDefault;"hide_options"===a&&(0!==o?v("#wapo-total-price-table .hide_options tr.wapo-total-options").fadeIn():v("#wapo-total-price-table .hide_options tr.wapo-total-options").hide()),setTotalBoxPrices(t,o,e,i)},productQuantityChange=function(){let e=v(this),t=e.val(),a=e.closest(".yith-wapo-option").data("product-id"),i=e.closest(".option-add-to-cart").find(".add_to_cart_button"),o=1,r;i.length&&a&&(r="?add-to-cart="+a+"&quantity="+(o=1<t?t:o),i.attr("href",r))},wcPriceToFloat=function(e){e=e.replace(/(?![\.\,])\D/g,"").replace(yith_wapo.total_thousand_sep,"").replace(yith_wapo.decimal_sep,".");return parseFloat(e)},getDefaultProductPrice=function(){if(yith_wapo.enableGetDefaultVariationPrice){let i=v(".variations_form.cart").data("product_id");var e={action:"get_default_variation_price",product_id:parseInt(i),security:yith_wapo.addons_nonce};jQuery.ajax({url:yith_wapo.ajaxurl,type:"post",data:e,success:function(e){var t,a;e&&(t=e.price_html,(a=jQuery("#yith-wapo-container")).attr("data-product-price",e.current_price),a.attr("data-product-id",i),"yes"===yith_wapo.replace_product_price)&&a.find(".yith-wapo-block").length&&v(yith_wapo.replace_product_price_class).html(t)},complete:function(){}})}},checkDefaultOptionsOnLoad=function(){var e=v(".yith-wapo-addon:not(.conditional_logic) .yith-wapo-option.selected");v(e).each(function(){yith_wapo_replace_image(v(this))})},resetAddons=function(e,t){"yith_wccl"!==t&&(a?(getDefaultProductPrice(),v(document).trigger("yith-wapo-reset-addons")):a=!0)},foundVariation=function(e,t){"variations_form cart in_loop initialized"===e.target.classList.value||v("form.cart.ywcp").length||(updateContainerProductPrice(t),v(document).trigger("yith-wapo-reload-addons"))},reloadAddons=function(e,t=""){var a=v("form.cart").serializeArray(),i=v("form.cart #yith-wapo-container"),a={action:"live_print_blocks",addons:a,currency:yith_wapo.woocommerce_currency,current_language:yith_wapo.currentLanguage};""!=t&&(a.price=t),v("#yith-wapo-container").css("opacity","0.5"),v.ajax({url:yith_wapo.ajaxurl,type:"post",data:a,success:function(e){i.html(e),i.css("opacity","1"),v("form.cart").trigger("yith-wapo-after-reload-addons"),calculateTotalAddonsPrice()}})},removeUploadedFile=function(e){var e=e.target,t=v(e).closest(".yith-wapo-uploaded-file-element"),a=v(e).closest(".yith-wapo-option").data("max-multiple"),i=v(e).closest(".yith-wapo-ajax-uploader").find(".yith-wapo-uploaded-file-element").length,o=v(e).closest(".yith-wapo-ajax-uploader").find(".yith-wapo-ajax-uploader-container"),e=v(e).closest(".yith-wapo-option").find('input[type="hidden"].upload-parent');t.remove(),(void 0===a||i-1<a)&&o.fadeIn(),i-1<=0&&(e.val(""),calculateTotalAddonsPrice())},checkNumbersTotalValues=function(){var e=v("#yith-wapo-container .yith-wapo-addon-type-number:not(.hidden).numbers-check"),c=!1;return e.each(function(e){let t=v(this),a=t.data("numbers-min"),i=t.data("numbers-max"),o=0,r=!1,n="",d=t.find(".options");d.hasClass("error-message")&&d.removeClass("error-message"),t.find(".yith-wapo-numbers-error-message").remove(),t.find('input[type="number"]').each(function(){var e=v(this).val();if("undefined"===e||""===e)return!0;o+=parseFloat(e)}),void 0!==a&&o<a&&(r=!0,n=yith_wapo.messages.minErrorMessage+" "+a),void 0!==i&&o>i&&(r=!0,n=yith_wapo.messages.maxErrorMessage+" "+i),r&&(d.addClass("error-message"),t.append(v('<small class="yith-wapo-numbers-error-message">'+n+"</small>")),c=!0,jQuery("html, body").animate({scrollTop:t.offset().top-50},500))}),v(document).trigger("yith_wapo_check_number_total_values"),!c},checkMaxSelected=function(e){var t=e.closest(".yith-wapo-option"),e=e.closest(".yith-wapo-addon"),a=e.data("max"),e=e.find(".yith-wapo-option.selected").length;return""===a||0===a||(t.hasClass("selected")?e--:e++,!(a<e))},labelsOnChange=function(){if(!checkMaxSelected(v(this)))return v(this).prop("checked",!1),!1;var e=v(this).parent();e.hasClass("yith-wapo-option")||(e=e.closest(".yith-wapo-option")),v(this).is(":checked")?(e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected")),e.addClass("selected"),e.find("input").prop("checked",!0),yith_wapo_replace_image(e)):(e.removeClass("selected"),yith_wapo_replace_image(e,!0))},v(document).on("ywgc-amount-changed",function(e,t){t=t.data("price");jQuery("#yith-wapo-container").attr("data-product-price",t),calculateTotalAddonsPrice()}),v(document).on("yith-wapo-product-price-updated",function(e,t){void 0!==t&&v("#yith-wapo-container").attr("data-product-price",t),calculateTotalAddonsPrice()}),v(document).on("change",".gift-cards-list .ywgc-manual-amount-container input.ywgc-manual-amount",function(e){var t=v(this).val();jQuery("#yith-wapo-container").attr("data-product-price",t),calculateTotalAddonsPrice()}),v(document).on("ywdpd_price_html_updated",function(e,t){t=jQuery(t).children(".amount bdi").text(),t=wcPriceToFloat(t);isNaN(t)||(jQuery("#yith-wapo-container").attr("data-product-price",t),calculateTotalAddonsPrice())}),v(document).on("yith_wcpb_ajax_update_price_request",function(e,t){t=t.price;isNaN(t)||(jQuery("#yith-wapo-container").attr("data-product-price",t),calculateTotalAddonsPrice())}),v(document).on("change","form.cart div.yith-wapo-addon, form.cart .quantity input[type=number]",function(e){i(v(e.target))}),v(document).on("keyup",'form.cart .yith-wapo-addon-type-number input[type="number"], form.cart .yith-wapo-addon-type-text input[type="text"], form.cart .yith-wapo-addon-type-textarea textarea',function(){i(v(this))}),v(document).on("wapo-colorpicker-change wapo-colorpicker-clear",function(e,t){i(v(t))}),calculateTotalAddonsPrice(),checkDefaultOptionsOnLoad(),v(document).on("change keyup",".yith-wapo-option .wapo-product-qty",productQuantityChange),v(document).on("reset_data",resetAddons),v(document).on("found_variation",foundVariation),v(document).on("yith-wapo-reload-addons",reloadAddons),v(document).on("click",".yith-wapo-uploaded-file .remove",removeUploadedFile),v(document).on("change",".yith-wapo-addon-type-label input",labelsOnChange)}),jQuery(document).on("change",".yith-wapo-addon-type-checkbox input",function(){var e=jQuery(this),t=e.parents(".checkboxbutton"),a=e.parents(".yith-wapo-option"),i=a.parent();"checked"!==e.attr("checked")?(a.hasClass("selection-single")&&(i.find("input").attr("checked",!1),i.find("input").prop("checked",!1),i.find(".selected, .checked").removeClass("selected checked")),e.attr("checked",!0),e.prop("checked",!0),a.addClass("selected"),t.addClass("checked"),yith_wapo_replace_image(a)):(e.attr("checked",!1),e.prop("checked",!1),a.removeClass("selected"),t.removeClass("checked"),yith_wapo_replace_image(a,!0))}),jQuery(document).on("click",".yith-wapo-addon-type-color .yith-wapo-option div.label",function(){jQuery(this).closest(".yith-wapo-option").find(".yith-proteo-standard-checkbox").click()}),jQuery(document).on("change",".yith-wapo-addon-type-color input",function(){var e=jQuery(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),yith_wapo_replace_image(e)):(e.removeClass("selected"),yith_wapo_replace_image(e,!0))}),jQuery(document).on("click",".yith-wapo-addon-type-label .yith-wapo-option div.label",function(e){e.preventDefault(),jQuery(this).closest(".yith-wapo-option").find(".yith-proteo-standard-checkbox").click()}),jQuery(document).on("click change",".yith-wapo-addon-type-product .quantity input",function(e){e.stopPropagation()}),jQuery(document).on("click",".yith-wapo-addon-type-product .yith-wapo-option .product-container",function(){jQuery(this).closest(".yith-wapo-option").find(".yith-proteo-standard-checkbox").click()}),jQuery(document).on("change",".yith-wapo-addon-type-product .yith-wapo-option input.yith-proteo-standard-checkbox",function(){var e=jQuery(this).parent();(e=jQuery(this).parent()).hasClass("yith-wapo-option")||(e=e.parent()),jQuery(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),yith_wapo_replace_image(e)):(e.removeClass("selected"),yith_wapo_replace_image(e,!0))}),jQuery(document).on("click",".yith-wapo-addon-type-radio input",function(){var e=jQuery(this).closest(".yith-wapo-option");e.hasClass("yith-wapo-option")||(e=e.closest(".yith-wapo-option")),jQuery(this).is(":checked")?(e.addClass("selected"),e.siblings().removeClass("selected"),yith_wapo_replace_image(e)):e.removeClass("selected")}),jQuery("body").on("change",".yith-wapo-addon-type-select select",function(){let e=jQuery(this).parent();var t=jQuery(this).find("option:selected"),a=e.find("div.option-image"),i=(e.hasClass("yith-wapo-option")||(e=e.parent()),t.data("image")),o=t.data("description"),r=e.find("p.option-description");void 0!==i&&i&&a.html(i='<img src="'+i+'" style="max-width: 100%">'),"default"===t.val()||""===i?a.hide():a.fadeIn(),void 0===o?r.empty():r.html(o),t.data("replace-image")?yith_wapo_replace_image(t):yith_wapo_replace_image(t,!0)}),jQuery(".yith-wapo-addon-type-select select").trigger("change"),jQuery(document).on("click",".yith-wapo-addon.wapo-toggle .addon-header",function(e){e.preventDefault();var e=jQuery(this).find(".wapo-addon-title"),t=e.closest(".yith-wapo-addon");t.hasClass("toggle-open")?t.removeClass("toggle-open").addClass("toggle-closed"):t.removeClass("toggle-closed").addClass("toggle-open"),e.hasClass("toggle-open")?e.removeClass("toggle-open").addClass("toggle-closed"):e.removeClass("toggle-closed").addClass("toggle-open"),t.find(".options-container").toggle("fast"),jQuery(document).trigger("yith_proteo_inizialize_html_elements")}),showRequiredMessage=function(e){e=e.closest(".yith-wapo-option");e.find(".required-error").length<1&&(e.append('<div class="required-error"><small class="required-message">'+yith_wapo.messages.requiredMessage+"</small></div>"),e.addClass("required-color"))},restartRequiredElement=function(e){var t=e.closest(".yith-wapo-option");e.closest(".yith-wapo-option").find(".required-error").remove(),t.removeClass("required-color")},jQuery("form.cart").on("change","#price_calculator.wc-measurement-price-calculator-price-table",function(){var e=jQuery("#price_calculator.wc-measurement-price-calculator-price-table .product_price .amount").text(),e=wcPriceToFloat(e);isNaN(e)||(jQuery("#yith-wapo-container").attr("data-product-price",e),jQuery(document).trigger("yith-wapo-reload-addons",[e]))}),jQuery("html").on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),jQuery("html").on("drop",function(e){e.preventDefault(),e.stopPropagation()}),jQuery(document).on("dragenter",".yith-wapo-ajax-uploader",function(e){e.stopPropagation(),e.preventDefault(),jQuery(this).css("opacity","0.5")}),jQuery(document).on("dragover",".yith-wapo-ajax-uploader",function(e){e.stopPropagation(),e.preventDefault()}),jQuery(document).on("dragleave",".yith-wapo-ajax-uploader",function(e){e.stopPropagation(),e.preventDefault(),jQuery(e.target).hasClass("yith-wapo-ajax-uploader")&&jQuery(this).css("opacity","1")}),jQuery("body").on("drop",".yith-wapo-ajax-uploader",function(e){e.stopPropagation(),e.preventDefault(),jQuery(this).css("opacity","1");jQuery(this).closest(".yith-wapo-option").find("input.file");var t=jQuery(this),e=e.originalEvent.dataTransfer.files;checkBeforeUploadFiles(t,e)&&uploadFiles(e,t)}),jQuery(document).on("change",".yith-wapo-addon-type-file input.file",function(e){jQuery(this).closest(".yith-wapo-ajax-uploader").css("opacity","1");var t=jQuery(this),a=t.closest(".yith-wapo-option").find(".yith-wapo-ajax-uploader"),t=t[0].files;checkBeforeUploadFiles(a,t)&&uploadFiles(t,a)}),checkBeforeUploadFiles=function(e,i){var o,t=jQuery(e).find(".yith-wapo-uploaded-file-element").length+i.length,a=jQuery(e).closest(".yith-wapo-option").data("max-multiple");if(!jQuery(e).closest(".yith-wapo-option").hasClass("allow-multiple")&&1<t)return alert(yith_wapo.messages.maxFilesAllowed+"1"),!1;if(void 0!==a&&a<t)return alert(yith_wapo.messages.maxFilesAllowed+a),!1;for(o in i)if(jQuery.isNumeric(o)){let e=i[o],t="",a=!1;if(yith_wapo.upload_allowed_file_types.includes(e.name.split(".").pop().toLowerCase())||(t=yith_wapo.messages.noSupportedExtension,a=!0),parseFloat(e.size)>=parseFloat(1024*yith_wapo.upload_max_file_size*1024)&&(t=yith_wapo_sprintf(yith_wapo.messages.maxFileSize,e.name,yith_wapo.upload_max_file_size),a=!0),a)return alert(t),!1}return!0},appendNewUploadedFile=function(e,t,a,i){var o=calculate_exact_file_size(t[e]),e=t[e].name,t=jQuery(a).closest(".yith-wapo-option").data("option-id");a.append('<div class="yith-wapo-uploaded-file-element uploaded-file-'+i+'" data-index="'+i+'"><div class="yith-wapo-uploaded-file-info"><span class="info"><label class="file-name"><span>'+e+'</span></label><span class="file-size">'+o+'</span></span><i class="remove yith-plugin-fw__action-button__icon yith-icon yith-icon-trash" style="display:none"></i></div><div class="yith-wapo-loader-container" id="progressbar'+i+'"><div class="yith-wapo-loader-label"></div><div class="yith-wapo-loader" role="progressbar"></div></div><input type="hidden" id="yith-wapo-'+t+'" class="option yith-wapo-option-value" name="yith_wapo[]['+t+'][]" ></div>')},uploadSingleFile=function(o,r,n,d=!1,c=0){0===parseInt(c)&&jQuery(n).find(".yith-wapo-uploaded-file-element.completed").length&&(c=jQuery(n).find(".yith-wapo-uploaded-file-element.completed").last().data("index")+1);var p=o.length-1,e=o[r],t=new FormData,a=jQuery(n).closest(".yith-wapo-option"),i=a.data("max-multiple"),l=jQuery(n).find(".yith-wapo-uploaded-file"),s=jQuery(n).find(".yith-wapo-ajax-uploader-container"),u=jQuery(n).find('.yith-wapo-uploaded-file-element[data-index="'+c+'"]'),h=jQuery(n).find(".yith-wapo-uploaded-file-info .remove"),y=jQuery(u).find(".yith-wapo-loader-container .yith-wapo-loader-label"),f=jQuery(u).find(".yith-wapo-loader-container .yith-wapo-loader");t.append("action","yith_wapo_upload_file"),t.append("currentFile",e),jQuery.ajax({url:yith_wapo.ajaxurl,type:"POST",contentType:!1,processData:!1,"async":!0,dataType:"json",data:t,xhr:function(){var e=jQuery.ajaxSettings.xhr();return e.upload&&(e.upload.addEventListener("progress",function(e){var t=0;e.lengthComputable&&(t=Math.ceil(e.loaded/e.total*100)),f.progressbar({value:t})},!1),e.addEventListener("progress",function(e){var t;1!=o.length&&!d||(a.hasClass("allow-multiple")&&(t=jQuery(n).find(".yith-wapo-uploaded-file-element").length,void 0===i||void 0!==i&&t<i)&&s.fadeIn(),h.fadeIn(),jQuery(n).closest(".yith-wapo-option").find('input[type="hidden"].upload-parent').val(1),calculateTotalAddonsPrice())},!1)),e},beforeSend:function(){s.hide(),l.show(),f.progressbar({change:function(){y.text(f.progressbar("value")+"% "+yith_wapo.i18n.uploadPercentageDoneString)},complete:function(e){jQuery(e.target).closest(".yith-wapo-loader-container").fadeOut()}}),f.show(),jQuery(".cart").block({message:null,overlayCSS:{opacity:0}})},success:function(e,t){var a,i;"success"==t&&(t=u.find('input[type="hidden"]'),a=u.find(".yith-wapo-uploaded-file-info span.info"),i=e.type,t.val(e.url),"image/jpeg"!==i&&"image/jpg"!==i&&"image/png"!==i&&"image/gif"!==i||a.append('<img src="'+e.url+'" class="yith-wapo-img-uploaded" alt="Image uploaded from YITH Product Add-ons uploader">').fadeIn(),r<p)&&(r==p-1&&(d=!0),uploadSingleFile(o,r+1,n,d,c+1))},complete:function(){jQuery(u).addClass("completed"),console.log("Single file upload completed!"),jQuery(".cart").unblock({message:null})},error:function(e){console.log("File upload failed!"),jQuery(".cart").unblock({message:null})}})},jQuery(document).on("click",".yith-wapo-ajax-uploader .button, .yith-wapo-ajax-uploader .link",function(){jQuery(this).closest(".yith-wapo-option").find("input.file").click()}),jQuery("form.cart").on("click","span.checkboxbutton",function(){jQuery(this).find("input").is(":checked")?jQuery(this).addClass("checked"):jQuery(this).removeClass("checked")}),jQuery("form.cart").on("click","span.radiobutton",function(){jQuery(this).find("input").is(":checked")&&(jQuery(this).closest(".yith-wapo-addon.yith-wapo-addon-type-radio").find("span.radiobutton.checked").removeClass("checked"),jQuery(this).addClass("checked"))}),jQuery(document).on("change",".yith-wapo-addon-type-checkbox, .yith-wapo-addon-type-color, .yith-wapo-addon-type-label, .yith-wapo-addon-type-product",function(){yith_wapo_check_min_max(jQuery(this))}),jQuery(document).on("click","form.cart button",function(){var e=checkNumbersTotalValues(),t=yith_wapo_check_required_min_max();return!!e&&(t||yith_wapo.disable_scroll_on_required_mix_max||jQuery("html, body").animate({scrollTop:jQuery("#yith-wapo-container").offset().top-20},500),t)}),jQuery(document).on("click",".add-request-quote-button",function(e){e.preventDefault(),"undefined"==typeof yith_wapo_general&&(yith_wapo_general={do_submit:!0}),yith_wapo_check_required_min_max()?yith_wapo_general.do_submit=!0:yith_wapo_general.do_submit=!1}),jQuery(document).on("change keyup",".yith-wapo-addon-type-number input",function(){var e=jQuery(this).val();yith_wapo_replace_image(jQuery(this).closest(".yith-wapo-option"),""==e?!0:!1),yith_wapo_check_multiplied_price(jQuery(this))}),jQuery(".wapo-product-qty").keyup(function(){var e="?add-to-cart="+jQuery(this).data("product-id")+"&quantity="+jQuery(this).val();jQuery(this).parent().find("a").attr("href",e)}),jQuery(document).on("click","#wapo-datepicker-save button",function(e){e.preventDefault();e=jQuery("#ui-datepicker-div .ui-state-active");(e=0==e.length?jQuery("#ui-datepicker-div .ui-datepicker-today"):e).click(),jQuery(".hasDatepicker").datepicker("hide")}),jQuery(document).on("change","#wapo-datepicker-time-select",function(e){e.preventDefault();e=jQuery("#ui-datepicker-div").attr("wapo-option-id");jQuery("#"+e).closest(".date-container").find(".temp-time").text(jQuery(this).val())}),jQuery(document).on("yith_wcp_price_updated",function(e,t){var a=parseFloat(jQuery("form.cart.ywcp > div.quantity input.qty").val()),a=a?t/a:t;jQuery("#yith-wapo-container").attr("data-product-price",a),calculateTotalAddonsPrice()});