(()=>{"use strict";const e=window.React,t=window.wc.wcBlocksRegistry,n=window.wc.wcSettings,a=window.wp.element,l=t=>{const{eventRegistration:n,emitResponse:l,settings:s}=t,{onPaymentSetup:i}=n,[c,o]=(0,a.useState)(""),r=(0,a.useCallback)((e=>{o(e.target.value)}),[o]);return(0,a.useEffect)((()=>{const e=i((async()=>c&&c.length>0?{type:l.responseTypes.SUCCESS,meta:{paymentMethodData:{cashbill__channel:c}}}:{type:l.responseTypes.ERROR,message:"Wybierz kanał płatności!"}));return()=>{e()}}),[l.responseTypes.ERROR,l.responseTypes.SUCCESS,i,c]),(0,e.createElement)("div",{id:"cashbill__payments"},s.paymentChannels.map((t=>(0,e.createElement)("label",{key:t.name,className:"cashbill__payments__channel"+(c===t.id?" selected":"")},(0,e.createElement)("img",{width:"120",height:"64",src:t.logoUrl}),(0,e.createElement)("h4",null,t.name),(0,e.createElement)("input",{type:"radio",name:"cashbill__channel",value:t.id,onChange:r})))))},s=t=>{const{eventRegistration:n,emitResponse:l,settings:s}=t,{onPaymentSetup:i}=n,[c,o]=(0,a.useState)({}),r=(0,a.useCallback)((e=>{const t=e.target.value.replace(/\D+/g,"").replace(c[e.target.name],"");o({...c,[e.target.name]:t}),e.target.nextSibling&&t.length>0&&e.target.nextSibling.focus()}),[o,c]);return(0,a.useEffect)((()=>{const e=i((async()=>{const e=Object.values(c).join("");return e&&6===e.length?{type:l.responseTypes.SUCCESS,meta:{paymentMethodData:{cashbill__blikcode:e}}}:{type:l.responseTypes.ERROR,message:"Wpisz poprawny kod BLIK!"}}));return()=>{e()}}),[l.responseTypes.ERROR,l.responseTypes.SUCCESS,i,c]),(0,e.createElement)("div",{id:"cashbill__blik"},(0,e.createElement)("h4",null,"Wprowadź kod BLIK"),(0,e.createElement)("div",{className:"cashbill__blik__input"},(0,e.createElement)("input",{name:"blikcode0",size:"1",onChange:r,value:c.blikcode0}),(0,e.createElement)("input",{name:"blikcode1",size:"1",onChange:r,value:c.blikcode1}),(0,e.createElement)("input",{name:"blikcode2",size:"1",onChange:r,value:c.blikcode2}),(0,e.createElement)("input",{name:"blikcode3",size:"1",onChange:r,value:c.blikcode3}),(0,e.createElement)("input",{name:"blikcode4",size:"1",onChange:r,value:c.blikcode4}),(0,e.createElement)("input",{name:"blikcode5",size:"1",onChange:r,value:c.blikcode5})),(0,e.createElement)("p",null,"Po złożeniu zamówienia potwierdź transakcję w aplikacji banku."))},i=t=>{const{PaymentMethodLabel:n}=t.components,a=t.settings;return(0,e.createElement)(n,{icon:a.icon?(0,e.createElement)("img",{src:a.iconUrl,title:a.title,alt:a.title}):null,text:a.title})},c=()=>null;["applepay","basic","blik","googlepay","aliorraty","paymentocc","paypal","paysafecard","twisto"].forEach((a=>{var o;const r="cashbill_"+a+"_payment",p=(0,n.getPaymentMethodData)(r,null);if(!p)return;let m=(0,e.createElement)(c,null);p&&p.paymentChannels&&p.paymentChannels.length>0?m=(0,e.createElement)(l,{settings:p}):p&&p.blikCodeForm&&(m=(0,e.createElement)(s,{settings:p})),(0,t.registerPaymentMethod)({name:r,paymentMethodId:r,label:(0,e.createElement)(i,{settings:p}),content:m,edit:m,canMakePayment:()=>!0,ariaLabel:p.title,supports:{features:null!==(o=p?.supports)&&void 0!==o?o:[]}})}))})();