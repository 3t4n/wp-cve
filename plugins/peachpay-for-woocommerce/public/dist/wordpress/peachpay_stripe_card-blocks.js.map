{"version":3,"file":"peachpay_stripe_card-blocks.js","mappings":"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","sources":["webpack://peachpay-for-woocommerce/./node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack://peachpay-for-woocommerce/./core/blocks/src/currency-fallback.tsx","webpack://peachpay-for-woocommerce/./core/payments/stripe/blocks/src/stripe.ts","webpack://peachpay-for-woocommerce/./frontend/@shared/ts/currency.ts","webpack://peachpay-for-woocommerce/./frontend/@shared/ts/error.ts","webpack://peachpay-for-woocommerce/./frontend/@shared/ts/maybe.ts","webpack://peachpay-for-woocommerce/external window \"React\"","webpack://peachpay-for-woocommerce/external window \"regeneratorRuntime\"","webpack://peachpay-for-woocommerce/external window [\"peachpay_checkout_blocks\"]","webpack://peachpay-for-woocommerce/external window [\"wc\",\"wcBlocksRegistry\"]","webpack://peachpay-for-woocommerce/external window [\"wc\",\"wcSettings\"]","webpack://peachpay-for-woocommerce/external window [\"wp\",\"htmlEntities\"]","webpack://peachpay-for-woocommerce/external window [\"wp\",\"i18n\"]","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://peachpay-for-woocommerce/webpack/bootstrap","webpack://peachpay-for-woocommerce/webpack/runtime/compat get default export","webpack://peachpay-for-woocommerce/webpack/runtime/define property getters","webpack://peachpay-for-woocommerce/webpack/runtime/hasOwnProperty shorthand","webpack://peachpay-for-woocommerce/./core/payments/stripe/blocks/src/card/index.tsx"],"sourcesContent":["var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"2.2.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import {peachpayUpdateCurrencyCookie} from '../../../frontend/@shared/ts/currency';\nimport {__} from '@wordpress/i18n';\n\nexport default function CurrencyFallback(props: {name: string; currency: string | null}) {\n\tfunction changeCurrency() {\n\t\tif (!props.currency) {\n\t\t\treturn;\n\t\t}\n\n\t\tpeachpayUpdateCurrencyCookie(props.currency);\n\t\twindow.location.reload();\n\t}\n\n\treturn props.currency ? (\n\t\t<div style={{display: 'flex', flexDirection: 'column'}}>\n\t\t\t<p style={{textAlign: 'justify', margin: '0.5rem 0 0', fontSize: 'smaller'}}>\n\t\t\t\t{props.name} {__('does not support the currency you currently have chosen.', 'peachpay-for-woocommerce')} <b>{__('Update to', 'peachpay-for-woocommerce')} {props.currency}</b> {__('below to use this payment method.', 'peachpay-for-woocommerce')}\n\t\t\t</p>\n\t\t\t<button type='button' className='button currency-fallback-button' style={{fontSize: 'smaller', marginBottom: '16px'}}\n\t\t\t\tonClick={changeCurrency}\n\t\t\t>{__('Update to', 'peachpay-for-woocommerce')} {props.currency}</button>\n\t\t</div>\n\t) : null;\n}\n","import {type Stripe, loadStripe} from '@stripe/stripe-js';\nimport {maybeFetchWP} from '../../../../../frontend/@shared/ts/maybe';\nimport {type IResponse} from '../../../../../frontend/@type/response';\nimport {z} from '@peachpay/checkout-blocks';\n\nconst stripePromise = async (public_key: string, stripeAccount: string) =>\n\tnew Promise<Stripe | string | null>(resolve => {\n\t\ttry {\n\t\t\tresolve(\n\t\t\t\tloadStripe(public_key, {\n\t\t\t\t\tlocale: 'auto',\n\t\t\t\t\tstripeAccount,\n\t\t\t\t}),\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tresolve((error as Error).message);\n\t\t}\n\t});\n\ntype CreateSetupIntentParams = {\n\tsetup_intent_url: string;\n\tsetup_intent_nonce: string;\n\tpayment_method_type: string;\n\tpayment_method_ID?: string;\n};\n\nconst SetupIntentFetchResultSchema = z.object({\n\tsetup_intent_details: z.object({\n\t\tclient_secret: z.string(),\n\t}),\n});\n\nasync function createSetupIntent(params: CreateSetupIntentParams) {\n\tconst formData = new FormData();\n\tformData.append('security', params.setup_intent_nonce);\n\tformData.append('payment_method_type', params.payment_method_type);\n\n\tif (params.payment_method_ID) {\n\t\tformData.append('payment_method', params.payment_method_ID);\n\t}\n\n\tconst {error, result} = await maybeFetchWP<IResponse<unknown>>(params.setup_intent_url, {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t});\n\n\tif (error || !result?.data) {\n\t\treturn null;\n\t}\n\n\tconst setupIntentResult = SetupIntentFetchResultSchema.safeParse(result.data);\n\n\tif (!setupIntentResult.success) {\n\t\treturn null;\n\t}\n\n\treturn setupIntentResult.data;\n}\n\nfunction parsePaymentData(encodedStringData: string) {\n\tconst encodedPaymentData = z.object({\n\t\tdata: z.object({client_secret: z.string()}),\n\t\tintermediate_url: z.string(),\n\t\tsuccess_url: z.string(),\n\t\ttransaction_id: z.string(),\n\t});\n\n\tlet encodedData: unknown;\n\ttry {\n\t\tencodedData = JSON.parse(atob(decodeURIComponent(encodedStringData)));\n\t} catch (error) {\n\t\tconsole.error(error);\n\t\treturn null;\n\t}\n\n\tconst parsedData = encodedPaymentData.safeParse(encodedData);\n\n\tif (!parsedData.success) {\n\t\tconsole.error(parsedData.error);\n\t\treturn null;\n\t}\n\n\treturn parsedData.data;\n}\n\nexport {stripePromise as loadStripe, createSetupIntent, parsePaymentData};\n","function peachpayUpdateCurrencyCookie(newCurrency: string) {\n\tdocument.cookie = `pp_active_currency=${newCurrency};path=/`;\n}\n\nexport {peachpayUpdateCurrencyCookie};\n","/**\n * Gets a stringified error or if the stringified result is an empy string or empty object the default .toString() is used.\n * Created because JSON.stringify(error) will return {} for Error objects (https://stackoverflow.com/a/50738205/16998523).\n *\n * @param {unknown} error\n */\nexport function getErrorString(error: unknown): string {\n\tif (error instanceof Error && error.stack) {\n\t\treturn error.stack;\n\t}\n\n\tconst errorString = JSON.stringify(error);\n\treturn errorString && errorString !== '{}' ? errorString : `${error as string}`;\n}\n\n/**\n * Takes an unknown value and coerces it into an error and finally returns the error message string\n */\nexport function getErrorMessage(thrownError: unknown) {\n\treturn _toErrorWithMessage(thrownError).message;\n}\n\nfunction _toErrorWithMessage(thrownError: unknown): {message: string} {\n\tif (_isErrorWithMessage(thrownError)) {\n\t\treturn thrownError;\n\t}\n\n\ttry {\n\t\treturn new Error(JSON.stringify(thrownError));\n\t} catch {\n\t\treturn new Error(String(thrownError));\n\t}\n}\n\nfunction _isErrorWithMessage(thrownError: unknown): thrownError is {message: string} {\n\treturn (\n\t\ttypeof thrownError === 'object'\n    && thrownError !== null\n    && 'message' in thrownError\n    && typeof thrownError.message === 'string'\n\t);\n}\n","import {type IResponse} from '../../@type/response';\n\ntype Maybe<T> = {result?: T; error?: unknown};\n\n/**\n * Takes a promise and returns a Maybe type of the result or an error. This can be used to\n * avoid try/catch blocks which can be difficult to read and maintain.\n */\nasync function maybe<TResult = IResponse<void>>(promise: Promise<TResult>): Promise<Maybe<TResult>> {\n\treturn promise\n\t\t.then(result => ({result}))\n\t\t.catch((error: unknown) => ({error})) as Maybe<TResult>;\n}\n\n/**\n * Wraps a fetch request and returns a Maybe type of the resulting JSON or an error. This\n * can be used to avoid try/catch blocks which can be difficult to read and maintain.\n */\nasync function maybeFetch<TResult = IResponse<void>>(input: RequestInfo | URL, init?: RequestInit | undefined): Promise<Maybe<TResult>> {\n\treturn fetch(input, init)\n\t\t.then(async response => response.json() as Promise<TResult>)\n\t\t.then(result => ({result}))\n\t\t.catch((error: unknown) => ({error})) as Maybe<TResult>;\n}\n\n/**\n * This is a special version of maybeFetch that is used to fetch data from WordPress. WordPress sometimes\n * has bad plugins which will result in malformed JSON responses. This function will attempt to fix the malformed\n * JSON and return the corrected result.\n *\n * @param input The request URL\n * @param init The request init object\n * @param regexSelector A regex selector that will be used to extract the JSON from the malformed response if one is encountered.\n */\nasync function maybeFetchWP<TResult = IResponse<void>>(input: RequestInfo | URL, init?: RequestInit | undefined, regexSelector = /{\\s*\".*[^{}]*}/gs): Promise<Maybe<TResult>> {\n\treturn fetch(input, init)\n\t\t.then(async response => response.text())\n\t\t.then(jsonText => {\n\t\t\ttry {\n\t\t\t\treturn {result: JSON.parse(jsonText) as TResult} as Maybe<TResult>;\n\t\t\t} catch (error: unknown) {\n\t\t\t\t// Attempt to extract JSON from malformed response json text\n\t\t\t\tconst extractedJSONText = regexSelector.exec(jsonText);\n\n\t\t\t\tif (extractedJSONText === null || !extractedJSONText[0]) {\n\t\t\t\t\tconsole.log('Unable to fix malformed JSON');\n\t\t\t\t\t// Could not fix malformed JSON so just return the original error.\n\t\t\t\t\treturn {error} as Maybe<TResult>;\n\t\t\t\t}\n\n\t\t\t\tconsole.log('Fixed malformed JSON. Original:');\n\t\t\t\tconsole.log(jsonText);\n\t\t\t\treturn {result: JSON.parse(extractedJSONText[0]) as TResult} as Maybe<TResult>;\n\t\t\t}\n\t\t})\n\t\t.catch((error: unknown) => ({error} as Maybe<TResult>));\n}\n\nexport {\n\ttype Maybe,\n\n\tmaybe,\n\tmaybeFetch,\n\tmaybeFetchWP,\n};\n","module.exports = window[\"React\"];","module.exports = window[\"regeneratorRuntime\"];","module.exports = window[\"peachpay_checkout_blocks\"];","module.exports = window[\"wc\"][\"wcBlocksRegistry\"];","module.exports = window[\"wc\"][\"wcSettings\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","import {useRef, useEffect} from 'react';\nimport {__} from '@wordpress/i18n';\nimport {registerPaymentMethod} from '@woocommerce/blocks-registry';\nimport {type CheckoutAfterProcessingWithErrorEventData} from '@woocommerce/checkout';\nimport {getSetting} from '@woocommerce/settings';\nimport {loadStripe, createSetupIntent} from '../stripe';\nimport {type PaymentMethodInterface} from '@woocommerce/types';\nimport {startTransaction, updateTransaction, z} from '@peachpay/checkout-blocks';\nimport CurrencyFallback from '../../../../../blocks/src/currency-fallback';\nimport {parsePaymentData} from '../stripe';\nimport {getErrorMessage} from '../../../../../../frontend/@shared/ts/error';\nimport {decodeEntities} from '@wordpress/html-entities';\n\nconst CardSettingsSchema = z.object({\n\ticon: z.string(),\n\ttitle: z.string(),\n\tdescription: z.string(),\n\tsupports: z.string().array(),\n\tconnect_id: z.string(),\n\tpublic_key: z.string(),\n\tsetup_intent_url: z.string(),\n\tsetup_intent_nonce: z.string(),\n\tcurrency_fallback_required: z.union([z.string(), z.null()]),\n});\n\nconst peachpayStripeCardData = CardSettingsSchema.safeParse(\n\tgetSetting('peachpay_stripe_card_data', false),\n);\n\nif (!peachpayStripeCardData.success) {\n\tconsole.error(peachpayStripeCardData.error);\n\tthrow new Error(__('PeachPay Stripe Card data is not available', 'peachpay-for-woocommerce'));\n}\n\nconst method_data = peachpayStripeCardData.data;\nconst title = decodeEntities(method_data.title);\nconst description = decodeEntities(method_data.description);\n\nloadStripe(method_data.public_key, method_data.connect_id)\n\t.then(stripe => {\n\t\tif (stripe === null) {\n\t\t\tthrow new Error(__('Stripe is null', 'peachpay-for-woocommerce'));\n\t\t}\n\n\t\tif (typeof stripe === 'string') {\n\t\t\tthrow new Error(stripe);\n\t\t}\n\n\t\tconst style = {\n\t\t\tbase: {\n\t\t\t\tcolor: '#333',\n\t\t\t\tfontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n\t\t\t\tfontSmoothing: 'antialiased',\n\t\t\t\tfontSize: '16px',\n\t\t\t\t'::placeholder': {\n\t\t\t\t\tcolor: '#6a6a6a',\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tconst elements = stripe.elements();\n\t\tconst cardElement = elements.create('card', {style, hidePostalCode: true});\n\n\t\t/**\n     * Content component\n     */\n\t\tconst Content = (context: PaymentMethodInterface) => {\n\t\t\tconst {emitResponse, eventRegistration, billing} = context;\n\t\t\tconst {onPaymentSetup, onCheckoutSuccess, onCheckoutFail} = eventRegistration;\n\n\t\t\tconst containerRef = useRef<HTMLDivElement | null>(null);\n\n\t\t\tuseEffect(() => {\n\t\t\t\tif (containerRef.current) {\n\t\t\t\t\tcontainerRef.current.innerHTML = '';\n\t\t\t\t\tcardElement.mount(containerRef.current);\n\t\t\t\t}\n\t\t\t}, []);\n\n\t\t\tuseEffect(() => {\n\t\t\t\tconst unsubscribe = onPaymentSetup(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst start_transaction = await startTransaction('peachpay_stripe_card');\n\n\t\t\t\t\t\tif (start_transaction.error) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: getErrorMessage(start_transaction.error),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (start_transaction.result === undefined) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: __('Missing transaction ID', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst transaction_ID = start_transaction.result;\n\n\t\t\t\t\t\tconst tokenResult = await stripe.createPaymentMethod({\n\t\t\t\t\t\t\ttype: 'card',\n\t\t\t\t\t\t\tcard: cardElement,\n\t\t\t\t\t\t\tbilling_details: {\n\t\t\t\t\t\t\t\taddress: {\n\t\t\t\t\t\t\t\t\tcity: billing.billingAddress.city,\n\t\t\t\t\t\t\t\t\tcountry: billing.billingAddress.country,\n\t\t\t\t\t\t\t\t\tline1: billing.billingAddress.address_1,\n\t\t\t\t\t\t\t\t\tline2: billing.billingAddress.address_2,\n\t\t\t\t\t\t\t\t\tpostal_code: billing.billingAddress.postcode,\n\t\t\t\t\t\t\t\t\tstate: billing.billingAddress.state,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\temail: billing.billingAddress.email,\n\t\t\t\t\t\t\t\tname: billing.billingAddress.first_name + ' ' + billing.billingAddress.last_name,\n\t\t\t\t\t\t\t\tphone: billing.billingAddress.phone,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (tokenResult.error) {\n\t\t\t\t\t\t\tconst note = tokenResult.error.message ?? __('Failed to tokenize payment method.', 'peachpay-for-woocommerce');\n\t\t\t\t\t\t\tawait updateTransaction(transaction_ID, {paymentStatus: 'creationfailed', note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Return here because setup intents are only needed to handle 0 dollar payments\n\t\t\t\t\t\tif (billing.cartTotal.value > 0) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t\t\tpaymentMethodData: {\n\t\t\t\t\t\t\t\t\t\tpeachpay_transaction_id: transaction_ID,\n\t\t\t\t\t\t\t\t\t\tpeachpay_stripe_payment_method_id: tokenResult.paymentMethod.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst setupIntentResult = await createSetupIntent({\n\t\t\t\t\t\t\tpayment_method_type: 'card',\n\t\t\t\t\t\t\tpayment_method_ID: tokenResult.paymentMethod.id,\n\t\t\t\t\t\t\tsetup_intent_url: method_data.setup_intent_url,\n\t\t\t\t\t\t\tsetup_intent_nonce: method_data.setup_intent_nonce,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (setupIntentResult === null) {\n\t\t\t\t\t\t\tconst note = __('Failed to create setup intent.', 'peachpay-for-woocommerce');\n\t\t\t\t\t\t\tawait updateTransaction(transaction_ID, {paymentStatus: 'creationfailed', note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst {error: confirmError, setupIntent: confirmIntent} = await stripe.confirmCardSetup(setupIntentResult.setup_intent_details.client_secret);\n\t\t\t\t\t\tif (confirmError) {\n\t\t\t\t\t\t\tconst note = confirmError.message ?? __('Failed to confirm setup intent.', 'peachpay-for-woocommerce');\n\t\t\t\t\t\t\tawait updateTransaction(transaction_ID, {paymentStatus: 'creationfailed', note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (confirmIntent.status !== 'succeeded') {\n\t\t\t\t\t\t\tconst note = __('Setup intent resulted in invalid status', 'peachpay-for-woocommerce') + `(${confirmIntent.status})`;\n\t\t\t\t\t\t\tawait updateTransaction(transaction_ID, {paymentStatus: 'creationfailed', note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof confirmIntent.payment_method === 'object' || confirmIntent.payment_method === null) {\n\t\t\t\t\t\t\tconst note = __('Payment method invalid type:', 'peachpay-for-woocommerce') + `(${typeof confirmIntent.payment_method})`;\n\t\t\t\t\t\t\tawait updateTransaction(transaction_ID, {paymentStatus: 'creationfailed', note});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: note,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t\tpaymentMethodData: {\n\t\t\t\t\t\t\t\t\tpeachpay_transaction_id: transaction_ID,\n\t\t\t\t\t\t\t\t\tpeachpay_stripe_payment_method_id: confirmIntent.payment_method,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: (error as Error).message,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn unsubscribe;\n\t\t\t}, [\n\t\t\t\tbilling.billingAddress,\n\t\t\t\tbilling.cartTotal.value,\n\t\t\t\tonPaymentSetup,\n\t\t\t]);\n\n\t\t\tuseEffect(() => {\n\t\t\t\tconst unsubscribe = onCheckoutSuccess(async (data: {redirectUrl: string}) => {\n\t\t\t\t\tconst dataURL = new URL(data.redirectUrl);\n\n\t\t\t\t\tconst [name, encodedStringData] = dataURL.hash.split('=');\n\n\t\t\t\t\tif (dataURL.hash === '' || name !== '#payment_data' || !encodedStringData) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst paymentData = parsePaymentData(encodedStringData);\n\n\t\t\t\t\tif (paymentData === null) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: __('Failed to parse payment data', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tconst clientSecret = paymentData.data.client_secret;\n\t\t\t\t\tconst successURL = paymentData.success_url;\n\n\t\t\t\t\tconst {paymentIntent, error} = await stripe.retrievePaymentIntent(clientSecret);\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: error?.message ?? __('Failed to retrieve payment intent.', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (paymentIntent.status === 'succeeded' || paymentIntent.status === 'requires_capture') {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\tredirectUrl: successURL,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (paymentIntent.status === 'requires_action') {\n\t\t\t\t\t\tconst {paymentIntent, error} = await stripe.confirmCardPayment(clientSecret);\n\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: error?.message ?? __('Failed to confirm payment intent.', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tpaymentIntent.status === 'succeeded'\n              || paymentIntent.status === 'requires_capture'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\t\tredirectUrl: successURL,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: __('Confirmed payment intent invalid status:', 'peachpay-for-woocommerce') + `${paymentIntent.status}`,\n\t\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\tmessage: __('Failed to confirm payment intent with status:', 'peachpay-for-woocommerce') + `${paymentIntent.status}`,\n\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\treturn unsubscribe;\n\t\t\t}, [onCheckoutSuccess]);\n\n\t\t\tuseEffect(() => {\n\t\t\t\tconst unsubscribe = onCheckoutFail((data: CheckoutAfterProcessingWithErrorEventData) => {\n\t\t\t\t\tif (data.processingResponse?.paymentStatus === emitResponse.responseTypes.FAIL) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.FAIL,\n\t\t\t\t\t\t\tmessage: data.processingResponse.paymentDetails['message'],\n\t\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: emitResponse.responseTypes.FAIL,\n\t\t\t\t\t\tmessage:\n              data.processingResponse?.message\n              ?? __('Checkout failed unexpectedly', 'peachpay-for-woocommerce') + `${JSON.stringify(data)}`,\n\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\treturn unsubscribe;\n\t\t\t}, [onCheckoutFail]);\n\n\t\t\tif (method_data.currency_fallback_required) {\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<CurrencyFallback\n\t\t\t\t\t\t\tname={title}\n\t\t\t\t\t\t\tcurrency={method_data.currency_fallback_required}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<div style={{marginBottom: '0.5rem'}}>{description}</div>\n\t\t\t\t\t<div ref={containerRef}>Loading...</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t};\n\n\t\tconst SavedMethod = (context: PaymentMethodInterface & {token: string}) => {\n\t\t\tconst {emitResponse, eventRegistration} = context;\n\t\t\tconst {onPaymentSetup} = eventRegistration;\n\n\t\t\tuseEffect(() => {\n\t\t\t\tconst unsubscribe = onPaymentSetup(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst start_transaction = await startTransaction('peachpay_stripe_card');\n\n\t\t\t\t\t\tif (start_transaction.error || !start_transaction.result) {\n\t\t\t\t\t\t\tthrow start_transaction.error;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t\tpaymentMethodData: {\n\t\t\t\t\t\t\t\t\tpeachpay_transaction_id: start_transaction.result,\n\t\t\t\t\t\t\t\t\t'wc-peachpay_stripe_card-payment-token': context.token,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: (error as Error).message,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn unsubscribe;\n\t\t\t}, [context, onPaymentSetup]);\n\t\t};\n\n\t\t/**\n     * Label component\n     *\n     * @param {PaymentMethodInterface} props Props from payment API.\n     */\n\t\tconst Label = (props: PaymentMethodInterface) => {\n\t\t\tconst {PaymentMethodLabel, PaymentMethodIcons} = props.components;\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<PaymentMethodLabel text={title} />\n\t\t\t\t\t<PaymentMethodIcons className='pp-label-icon' icons={[{\n\t\t\t\t\t\tid: 'peachpay_stripe_card',\n\t\t\t\t\t\tsrc: method_data.icon,\n\t\t\t\t\t\talt: method_data.title,\n\t\t\t\t\t}]} />\n\t\t\t\t</>\n\t\t\t);\n\t\t};\n\n\t\tregisterPaymentMethod({\n\t\t\tariaLabel: title,\n\t\t\tcanMakePayment(data) {\n\t\t\t\treturn data.paymentMethods.includes('peachpay_stripe_card');\n\t\t\t},\n\t\t\t// @ts-expect-error Missing types are expected because WooCommerce gives the props\n\t\t\tcontent: <Content />,\n\t\t\t// @ts-expect-error Missing types are expected because WooCommerce gives the props\n\t\t\tedit: <Content />,\n\t\t\t// @ts-expect-error Missing types are expected because WooCommerce gives the props\n\t\t\tlabel: <Label />,\n\t\t\t// @ts-expect-error Missing types are expected because WooCommerce gives the props\n\t\t\tsavedTokenComponent: <SavedMethod />,\n\t\t\tname: 'peachpay_stripe_card',\n\t\t\tsupports: {\n\t\t\t\tfeatures: method_data.supports,\n\t\t\t\tshowSavedCards: !method_data.currency_fallback_required,\n\t\t\t\tshowSaveOption: !method_data.currency_fallback_required,\n\t\t\t},\n\t\t});\n\t})\n\t.catch(error => {\n\t\tthrow error as Error;\n\t});\n"],"names":["V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","stripePromise$1","Promise","resolve","then","params","reject","window","document","Stripe","console","warn","script","scripts","querySelectorAll","concat","i","length","test","src","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","addEventListener","error","loadCalled","err","loadStripe","_len","arguments","args","Array","_key","startTime","Date","now","maybeStripe","stripe","apply","undefined","_registerWrapper","name","version","registerWrapper","initStripe","CurrencyFallback","props","currency","style","display","flexDirection","textAlign","margin","fontSize","__","type","className","marginBottom","onClick","peachpayUpdateCurrencyCookie","location","reload","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","public_key","stripeAccount","_context","prev","next","abrupt","locale","message","stop","_x","_x2","SetupIntentFetchResultSchema","z","object","setup_intent_details","client_secret","string","createSetupIntent","_x3","_createSetupIntent","_callee2","formData","_yield$maybeFetchWP","result","setupIntentResult","_context2","FormData","append","setup_intent_nonce","payment_method_type","payment_method_ID","maybeFetchWP","setup_intent_url","method","sent","data","safeParse","success","parsePaymentData","encodedStringData","encodedData","encodedPaymentData","intermediate_url","success_url","transaction_id","JSON","parse","atob","decodeURIComponent","parsedData","newCurrency","cookie","getErrorMessage","thrownError","_isErrorWithMessage","stringify","_unused","String","_toErrorWithMessage","_x4","_x5","_maybeFetchWP","_callee5","input","init","regexSelector","_args5","_context5","fetch","_ref2","_callee4","response","_context4","text","_x7","jsonText","extractedJSONText","exec","log","catch","module","exports","_arrayLikeToArray","arr","len","arr2","_arrayWithHoles","isArray","asyncGeneratorStep","gen","_next","_throw","key","arg","info","value","done","fn","self","this","_iterableToArrayLimit","r","l","t","Symbol","iterator","e","n","u","a","f","o","call","Object","push","_nonIterableRest","TypeError","_slicedToArray","_unsupportedIterableToArray","minLen","prototype","toString","slice","constructor","from","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","defineProperty","enumerable","get","obj","prop","hasOwnProperty","peachpayStripeCardData","icon","title","description","supports","array","connect_id","currency_fallback_required","union","null","getSetting","method_data","decodeEntities","cardElement","elements","create","base","color","fontFamily","fontSmoothing","hidePostalCode","Content","context","emitResponse","eventRegistration","billing","onPaymentSetup","onCheckoutSuccess","onCheckoutFail","containerRef","useRef","useEffect","current","innerHTML","mount","start_transaction","transaction_ID","tokenResult","_tokenResult$error$me","note","_note","_yield$stripe$confirm","confirmError","confirmIntent","_confirmError$message","_note2","_note3","_note4","startTransaction","responseTypes","ERROR","createPaymentMethod","card","billing_details","address","city","billingAddress","country","line1","address_1","line2","address_2","postal_code","postcode","state","email","first_name","last_name","phone","updateTransaction","paymentStatus","cartTotal","SUCCESS","meta","paymentMethodData","peachpay_transaction_id","peachpay_stripe_payment_method_id","paymentMethod","id","confirmCardSetup","setupIntent","status","payment_method","t0","unsubscribe","dataURL","_dataURL$hash$split","_dataURL$hash$split2","paymentData","clientSecret","successURL","_yield$stripe$retriev","paymentIntent","_error$message","_yield$stripe$confirm2","_paymentIntent","_error","_error$message2","URL","redirectUrl","hash","split","retrievePaymentIntent","messageContext","noticeContexts","PAYMENTS","confirmCardPayment","_data$processingRespo","_data$processingRespo2","_data$processingRespo3","processingResponse","FAIL","paymentDetails","ref","registerPaymentMethod","ariaLabel","canMakePayment","paymentMethods","includes","content","edit","label","_props$components","components","PaymentMethodLabel","PaymentMethodIcons","Fragment","icons","alt","savedTokenComponent","_callee3","_context3","token","features","showSavedCards","showSaveOption"],"sourceRoot":""}