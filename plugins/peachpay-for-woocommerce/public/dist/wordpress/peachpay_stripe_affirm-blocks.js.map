{"version":3,"file":"peachpay_stripe_affirm-blocks.js","mappings":"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","sources":["webpack://peachpay-for-woocommerce/./node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack://peachpay-for-woocommerce/./core/blocks/src/currency-fallback.tsx","webpack://peachpay-for-woocommerce/./core/payments/stripe/blocks/src/stripe.ts","webpack://peachpay-for-woocommerce/./frontend/@shared/ts/currency.ts","webpack://peachpay-for-woocommerce/./frontend/@shared/ts/error.ts","webpack://peachpay-for-woocommerce/external window \"React\"","webpack://peachpay-for-woocommerce/external window \"regeneratorRuntime\"","webpack://peachpay-for-woocommerce/external window [\"peachpay_checkout_blocks\"]","webpack://peachpay-for-woocommerce/external window [\"wc\",\"wcBlocksRegistry\"]","webpack://peachpay-for-woocommerce/external window [\"wc\",\"wcSettings\"]","webpack://peachpay-for-woocommerce/external window [\"wp\",\"htmlEntities\"]","webpack://peachpay-for-woocommerce/external window [\"wp\",\"i18n\"]","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://peachpay-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://peachpay-for-woocommerce/webpack/bootstrap","webpack://peachpay-for-woocommerce/webpack/runtime/compat get default export","webpack://peachpay-for-woocommerce/webpack/runtime/define property getters","webpack://peachpay-for-woocommerce/webpack/runtime/hasOwnProperty shorthand","webpack://peachpay-for-woocommerce/./core/payments/stripe/blocks/src/affirm/index.tsx"],"sourcesContent":["var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"2.2.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import {peachpayUpdateCurrencyCookie} from '../../../frontend/@shared/ts/currency';\nimport {__} from '@wordpress/i18n';\n\nexport default function CurrencyFallback(props: {name: string; currency: string | null}) {\n\tfunction changeCurrency() {\n\t\tif (!props.currency) {\n\t\t\treturn;\n\t\t}\n\n\t\tpeachpayUpdateCurrencyCookie(props.currency);\n\t\twindow.location.reload();\n\t}\n\n\treturn props.currency ? (\n\t\t<div style={{display: 'flex', flexDirection: 'column'}}>\n\t\t\t<p style={{textAlign: 'justify', margin: '0.5rem 0 0', fontSize: 'smaller'}}>\n\t\t\t\t{props.name} {__('does not support the currency you currently have chosen.', 'peachpay-for-woocommerce')} <b>{__('Update to', 'peachpay-for-woocommerce')} {props.currency}</b> {__('below to use this payment method.', 'peachpay-for-woocommerce')}\n\t\t\t</p>\n\t\t\t<button type='button' className='button currency-fallback-button' style={{fontSize: 'smaller', marginBottom: '16px'}}\n\t\t\t\tonClick={changeCurrency}\n\t\t\t>{__('Update to', 'peachpay-for-woocommerce')} {props.currency}</button>\n\t\t</div>\n\t) : null;\n}\n","import {type Stripe, loadStripe} from '@stripe/stripe-js';\nimport {maybeFetchWP} from '../../../../../frontend/@shared/ts/maybe';\nimport {type IResponse} from '../../../../../frontend/@type/response';\nimport {z} from '@peachpay/checkout-blocks';\n\nconst stripePromise = async (public_key: string, stripeAccount: string) =>\n\tnew Promise<Stripe | string | null>(resolve => {\n\t\ttry {\n\t\t\tresolve(\n\t\t\t\tloadStripe(public_key, {\n\t\t\t\t\tlocale: 'auto',\n\t\t\t\t\tstripeAccount,\n\t\t\t\t}),\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tresolve((error as Error).message);\n\t\t}\n\t});\n\ntype CreateSetupIntentParams = {\n\tsetup_intent_url: string;\n\tsetup_intent_nonce: string;\n\tpayment_method_type: string;\n\tpayment_method_ID?: string;\n};\n\nconst SetupIntentFetchResultSchema = z.object({\n\tsetup_intent_details: z.object({\n\t\tclient_secret: z.string(),\n\t}),\n});\n\nasync function createSetupIntent(params: CreateSetupIntentParams) {\n\tconst formData = new FormData();\n\tformData.append('security', params.setup_intent_nonce);\n\tformData.append('payment_method_type', params.payment_method_type);\n\n\tif (params.payment_method_ID) {\n\t\tformData.append('payment_method', params.payment_method_ID);\n\t}\n\n\tconst {error, result} = await maybeFetchWP<IResponse<unknown>>(params.setup_intent_url, {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t});\n\n\tif (error || !result?.data) {\n\t\treturn null;\n\t}\n\n\tconst setupIntentResult = SetupIntentFetchResultSchema.safeParse(result.data);\n\n\tif (!setupIntentResult.success) {\n\t\treturn null;\n\t}\n\n\treturn setupIntentResult.data;\n}\n\nfunction parsePaymentData(encodedStringData: string) {\n\tconst encodedPaymentData = z.object({\n\t\tdata: z.object({client_secret: z.string()}),\n\t\tintermediate_url: z.string(),\n\t\tsuccess_url: z.string(),\n\t\ttransaction_id: z.string(),\n\t});\n\n\tlet encodedData: unknown;\n\ttry {\n\t\tencodedData = JSON.parse(atob(decodeURIComponent(encodedStringData)));\n\t} catch (error) {\n\t\tconsole.error(error);\n\t\treturn null;\n\t}\n\n\tconst parsedData = encodedPaymentData.safeParse(encodedData);\n\n\tif (!parsedData.success) {\n\t\tconsole.error(parsedData.error);\n\t\treturn null;\n\t}\n\n\treturn parsedData.data;\n}\n\nexport {stripePromise as loadStripe, createSetupIntent, parsePaymentData};\n","function peachpayUpdateCurrencyCookie(newCurrency: string) {\n\tdocument.cookie = `pp_active_currency=${newCurrency};path=/`;\n}\n\nexport {peachpayUpdateCurrencyCookie};\n","/**\n * Gets a stringified error or if the stringified result is an empy string or empty object the default .toString() is used.\n * Created because JSON.stringify(error) will return {} for Error objects (https://stackoverflow.com/a/50738205/16998523).\n *\n * @param {unknown} error\n */\nexport function getErrorString(error: unknown): string {\n\tif (error instanceof Error && error.stack) {\n\t\treturn error.stack;\n\t}\n\n\tconst errorString = JSON.stringify(error);\n\treturn errorString && errorString !== '{}' ? errorString : `${error as string}`;\n}\n\n/**\n * Takes an unknown value and coerces it into an error and finally returns the error message string\n */\nexport function getErrorMessage(thrownError: unknown) {\n\treturn _toErrorWithMessage(thrownError).message;\n}\n\nfunction _toErrorWithMessage(thrownError: unknown): {message: string} {\n\tif (_isErrorWithMessage(thrownError)) {\n\t\treturn thrownError;\n\t}\n\n\ttry {\n\t\treturn new Error(JSON.stringify(thrownError));\n\t} catch {\n\t\treturn new Error(String(thrownError));\n\t}\n}\n\nfunction _isErrorWithMessage(thrownError: unknown): thrownError is {message: string} {\n\treturn (\n\t\ttypeof thrownError === 'object'\n    && thrownError !== null\n    && 'message' in thrownError\n    && typeof thrownError.message === 'string'\n\t);\n}\n","module.exports = window[\"React\"];","module.exports = window[\"regeneratorRuntime\"];","module.exports = window[\"peachpay_checkout_blocks\"];","module.exports = window[\"wc\"][\"wcBlocksRegistry\"];","module.exports = window[\"wc\"][\"wcSettings\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","import {useEffect} from 'react';\nimport {__} from '@wordpress/i18n';\nimport {registerPaymentMethod} from '@woocommerce/blocks-registry';\nimport {type CheckoutAfterProcessingWithErrorEventData} from '@woocommerce/checkout';\nimport {getSetting} from '@woocommerce/settings';\nimport {decodeEntities} from '@wordpress/html-entities';\nimport {loadStripe} from '../stripe';\nimport {type PaymentMethodInterface} from '@woocommerce/types';\nimport {startTransaction, updateTransaction, z} from '@peachpay/checkout-blocks';\nimport CurrencyFallback from '../../../../../blocks/src/currency-fallback';\nimport {parsePaymentData} from '../stripe';\nimport {getErrorMessage} from '../../../../../../frontend/@shared/ts/error';\n\nconst AffirmSettingsSchema = z.object({\n\tconnect_id: z.string(),\n\tcurrency_fallback_required: z.string().nullable(),\n\tdescription: z.string(),\n\ticon_url: z.string(),\n\tpublic_key: z.string(),\n\tsetup_intent_nonce: z.string(),\n\tsetup_intent_url: z.string(),\n\tsupports: z.string().array(),\n\ttitle: z.string(),\n});\n\nconst peachpayStripeAffirmData = AffirmSettingsSchema.safeParse(\n\tgetSetting('peachpay_stripe_affirm_data', false),\n);\n\nif (!peachpayStripeAffirmData.success) {\n\tthrow new Error(\n\t\t`PeachPay Stripe Affirm data is not available \\n\\n${peachpayStripeAffirmData.error.message}`,\n\t);\n}\n\nconst method_data = peachpayStripeAffirmData.data;\n\nconst title = decodeEntities(method_data.title);\nconst description = decodeEntities(method_data.description);\n\nloadStripe(method_data.public_key, method_data.connect_id)\n\t.then(stripe => {\n\t\tif (stripe === null) {\n\t\t\tthrow new Error(__('Stripe is null', 'peachpay-for-woocommerce'));\n\t\t}\n\n\t\tif (typeof stripe === 'string') {\n\t\t\tthrow new Error(stripe);\n\t\t}\n\n\t\t/**\n     * Content component\n     */\n\t\tconst Content = (context: PaymentMethodInterface) => {\n\t\t\tconst {emitResponse, eventRegistration, billing} = context;\n\t\t\tconst {onPaymentSetup, onCheckoutSuccess, onCheckoutFail} = eventRegistration;\n\n\t\t\tuseEffect(() => {\n\t\t\t\tconst unsubscribe = onPaymentSetup(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst start_transaction = await startTransaction('peachpay_stripe_affirm');\n\n\t\t\t\t\t\tif (start_transaction.error) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: getErrorMessage(start_transaction.error),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (start_transaction.result === undefined) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage: __('Missing transaction ID', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst transaction_ID = start_transaction.result;\n\n\t\t\t\t\t\tconst tokenResult = await stripe.createPaymentMethod({\n\t\t\t\t\t\t\ttype: 'affirm',\n\t\t\t\t\t\t\tbilling_details: {\n\t\t\t\t\t\t\t\taddress: {\n\t\t\t\t\t\t\t\t\tcity: billing.billingAddress.city,\n\t\t\t\t\t\t\t\t\tcountry: billing.billingAddress.country,\n\t\t\t\t\t\t\t\t\tline1: billing.billingAddress.address_1,\n\t\t\t\t\t\t\t\t\tline2: billing.billingAddress.address_2,\n\t\t\t\t\t\t\t\t\tpostal_code: billing.billingAddress.postcode,\n\t\t\t\t\t\t\t\t\tstate: billing.billingAddress.state,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\temail: billing.billingAddress.email,\n\t\t\t\t\t\t\t\tname: billing.billingAddress.first_name + ' ' + billing.billingAddress.last_name,\n\t\t\t\t\t\t\t\tphone: billing.billingAddress.phone,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (tokenResult.error) {\n\t\t\t\t\t\t\tconst message\n                = tokenResult.error.message\n                ?? __('Failed to tokenize payment method.', 'peachpay-for-woocommerce');\n\n\t\t\t\t\t\t\tawait updateTransaction(transaction_ID, {note: message});\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\t\tpaymentMethodData: {\n\t\t\t\t\t\t\t\t\tpeachpay_transaction_id: transaction_ID,\n\t\t\t\t\t\t\t\t\tpeachpay_stripe_payment_method_id: tokenResult.paymentMethod.id,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: getErrorMessage(error),\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn unsubscribe;\n\t\t\t}, [billing.billingAddress, onPaymentSetup]);\n\n\t\t\tuseEffect(() => {\n\t\t\t\tconst unsubscribe = onCheckoutSuccess(async (data: {redirectUrl: string}) => {\n\t\t\t\t\tconst dataURL = new URL(data.redirectUrl);\n\n\t\t\t\t\tconst [name, encodedStringData] = dataURL.hash.split('=');\n\n\t\t\t\t\tif (dataURL.hash === '' || name !== '#payment_data' || !encodedStringData) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst paymentData = parsePaymentData(encodedStringData);\n\n\t\t\t\t\tif (paymentData === null) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage: __('Failed to parse payment data', 'peachpay-for-woocommerce'),\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tconst transaction_ID = paymentData.transaction_id;\n\t\t\t\t\tconst clientSecret = paymentData.data.client_secret;\n\t\t\t\t\tconst intermediateURL = paymentData.intermediate_url;\n\t\t\t\t\tconst successURL = paymentData.success_url;\n\n\t\t\t\t\tconst {paymentIntent, error} = await stripe.confirmAffirmPayment(clientSecret, {\n\t\t\t\t\t\treturn_url: intermediateURL,\n\t\t\t\t\t});\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tconst message = error?.message ?? __('Failed to confirm payment.', 'peachpay-for-woocommerce');\n\n\t\t\t\t\t\tawait updateTransaction(transaction_ID, {note: message});\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (paymentIntent) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\t\t\tredirectUrl: successURL,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tconst message = __('Payment intent missing', 'peachpay-for-woocommerce');\n\t\t\t\t\tawait updateTransaction(transaction_ID, {note: message});\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\treturn unsubscribe;\n\t\t\t}, [onCheckoutSuccess]);\n\n\t\t\tuseEffect(() => {\n\t\t\t\tconst unsubscribe = onCheckoutFail((data: CheckoutAfterProcessingWithErrorEventData) => {\n\t\t\t\t\tif (data.processingResponse?.paymentStatus === emitResponse.responseTypes.FAIL) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: emitResponse.responseTypes.FAIL,\n\t\t\t\t\t\t\tmessage: data.processingResponse.paymentDetails['message'],\n\t\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: emitResponse.responseTypes.FAIL,\n\t\t\t\t\t\tmessage:\n              data.processingResponse?.message\n              ?? __('Checkout failed unexpectedly', 'peachpay-for-woocommerce')\n                + `${JSON.stringify(data)}`,\n\t\t\t\t\t\tmessageContext: emitResponse.noticeContexts.PAYMENTS,\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\treturn unsubscribe;\n\t\t\t}, [onCheckoutFail]);\n\n\t\t\tif (method_data.currency_fallback_required) {\n\t\t\t\treturn <CurrencyFallback name={title} currency={method_data.currency_fallback_required} />;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<img style={{maxHeight: '25px'}} src={method_data.icon_url} />\n\t\t\t\t\t<p style={{textAlign: 'left', margin: '0.5rem 0 0'}}>{description}</p>\n\t\t\t\t</>\n\t\t\t);\n\t\t};\n\n\t\t/**\n     * Label component\n     *\n     * @param {PaymentMethodInterface} props Props from payment API.\n     */\n\t\tconst Label = (props: PaymentMethodInterface) => {\n\t\t\tconst {PaymentMethodLabel, PaymentMethodIcons} = props.components;\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<PaymentMethodLabel text={title} />\n\t\t\t\t\t<PaymentMethodIcons\n\t\t\t\t\t\tclassName='pp-label-icon'\n\t\t\t\t\t\ticons={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'peachpay_stripe_affirm',\n\t\t\t\t\t\t\t\tsrc: method_data.icon_url,\n\t\t\t\t\t\t\t\talt: title,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t);\n\t\t};\n\n\t\tregisterPaymentMethod({\n\t\t\tariaLabel: title,\n\t\t\tcanMakePayment(data) {\n\t\t\t\treturn data.paymentMethods.includes('peachpay_stripe_affirm');\n\t\t\t},\n\t\t\t// @ts-expect-error Missing types are expected because WooCommerce gives the props\n\t\t\tcontent: <Content />,\n\t\t\t// @ts-expect-error Missing types are expected because WooCommerce gives the props\n\t\t\tedit: <Content />,\n\t\t\t// @ts-expect-error Missing types are expected because WooCommerce gives the props\n\t\t\tlabel: <Label />,\n\t\t\tname: 'peachpay_stripe_affirm',\n\t\t\tsupports: {\n\t\t\t\tfeatures: method_data.supports,\n\t\t\t\tshowSavedCards: false,\n\t\t\t\tshowSaveOption: false,\n\t\t\t},\n\t\t});\n\t})\n\t.catch(error => {\n\t\tthrow new Error(getErrorMessage(error));\n\t});\n"],"names":["V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","stripePromise$1","Promise","resolve","then","params","reject","window","document","Stripe","console","warn","script","scripts","querySelectorAll","concat","i","length","test","src","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","addEventListener","error","loadCalled","err","loadStripe","_len","arguments","args","Array","_key","startTime","Date","now","maybeStripe","stripe","apply","undefined","_registerWrapper","name","version","registerWrapper","initStripe","CurrencyFallback","props","currency","style","display","flexDirection","textAlign","margin","fontSize","__","type","className","marginBottom","onClick","peachpayUpdateCurrencyCookie","location","reload","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","public_key","stripeAccount","_context","prev","next","abrupt","locale","message","stop","_x","_x2","parsePaymentData","encodedStringData","encodedData","encodedPaymentData","z","object","data","client_secret","string","intermediate_url","success_url","transaction_id","JSON","parse","atob","decodeURIComponent","parsedData","safeParse","success","setup_intent_details","newCurrency","cookie","getErrorMessage","thrownError","_isErrorWithMessage","stringify","_unused","String","_toErrorWithMessage","module","exports","_arrayLikeToArray","arr","len","arr2","_arrayWithHoles","isArray","asyncGeneratorStep","gen","_next","_throw","key","arg","info","value","done","fn","self","this","_iterableToArrayLimit","r","l","t","Symbol","iterator","e","n","u","a","f","o","call","Object","push","_nonIterableRest","TypeError","_slicedToArray","_unsupportedIterableToArray","minLen","prototype","toString","slice","constructor","from","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","defineProperty","enumerable","get","obj","prop","hasOwnProperty","peachpayStripeAffirmData","connect_id","currency_fallback_required","nullable","description","icon_url","setup_intent_nonce","setup_intent_url","supports","array","title","getSetting","method_data","decodeEntities","Content","context","emitResponse","eventRegistration","billing","onPaymentSetup","onCheckoutSuccess","onCheckoutFail","useEffect","start_transaction","transaction_ID","tokenResult","_tokenResult$error$me","startTransaction","sent","responseTypes","ERROR","result","createPaymentMethod","billing_details","address","city","billingAddress","country","line1","address_1","line2","address_2","postal_code","postcode","state","email","first_name","last_name","phone","updateTransaction","note","SUCCESS","meta","paymentMethodData","peachpay_transaction_id","peachpay_stripe_payment_method_id","paymentMethod","id","t0","unsubscribe","_ref2","_callee2","dataURL","_dataURL$hash$split","_dataURL$hash$split2","paymentData","clientSecret","intermediateURL","successURL","_yield$stripe$confirm","paymentIntent","_error$message","_message","_context2","URL","redirectUrl","hash","split","confirmAffirmPayment","return_url","messageContext","noticeContexts","PAYMENTS","_data$processingRespo","_data$processingRespo2","_data$processingRespo3","processingResponse","paymentStatus","FAIL","paymentDetails","Fragment","maxHeight","registerPaymentMethod","ariaLabel","canMakePayment","paymentMethods","includes","content","edit","label","_props$components","components","PaymentMethodLabel","PaymentMethodIcons","text","icons","alt","features","showSavedCards","showSaveOption","catch"],"sourceRoot":""}