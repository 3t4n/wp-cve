!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="80c690c5-874a-4bcd-af88-f55828570b2f",t._sentryDebugIdIdentifier="sentry-dbid-80c690c5-874a-4bcd-af88-f55828570b2f")}catch(t){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1.104.0"},(self.webpackChunkpeachpay_for_woocommerce=self.webpackChunkpeachpay_for_woocommerce||[]).push([[796],{5796:(t,e,n)=>{n.r(e),n.d(e,{default:()=>w});var a=n(3940),i=n(1682),o=n(3458),r=n(7246),c=n(4284),s=n(8883),d=n(5792);var u=n(3984),l=n(3629),p=n(8072),h=n(2494);function f(){o.h.subscribe((function(){!function(t,e,n){t.startsWith("peachpay_authnet_")&&"payment"===e?(0,l.HD)(".authnet-btn-container",(function(t){t.classList.remove("hide")})):(0,l.HD)(".authnet-btn-container",(function(t){t.classList.add("hide")}));"loading"===n?(0,l.HD)(".authnet-btn",(function(t){t.classList.add("hide")})):(0,l.HD)(".authnet-btn",(function(t){t.classList.remove("hide")}))}(u.hv.selectedGateway(),i.qA.modalUI.page(),i.qA.modalUI.loadingMode()),function(t){"loading"===t?(0,l.HD)(".authnet-spinner-container",(function(t){t.classList.remove("hide")})):(0,l.HD)(".authnet-spinner-container",(function(t){t.classList.add("hide")}));"processing"===t?(0,l.HD)(".authnet-btn-spinner",(function(t){t.classList.remove("hide")})):(0,l.HD)(".authnet-btn-spinner",(function(t){t.classList.add("hide")}));"processing"===t?(0,l.HD)(".authnet-btn > .button-text",(function(t){t.innerHTML=(0,c.M)("Processing")})):(0,l.HD)(".authnet-btn > .button-text",(function(t){t.innerHTML="".concat((0,c.M)("Pay")," ").concat((0,h.o)(p.AQ.total()))}));"finished"===t?(0,l.HD)(".authnet-btn",(function(t){t.disabled=!1})):(0,l.HD)(".authnet-btn",(function(t){t.disabled=!0}))}(i.qA.modalUI.loadingMode())}))}var y=n(9402);var b=function(){function t(t){this.loginId=t.loginId,this.clientKey=t.clientKey,this.scriptSrc=t.acceptSrc,this.$script=null,this.$button=null}return t.prototype.tokenize=function(e){return(0,a.mG)(this,void 0,void 0,(function(){var n=this;return(0,a.Jh)(this,(function(i){switch(i.label){case 0:if(t.isTokenizing)throw new Error("Tokenization is already in progress. Only 1 tokenization attempt may occur at a time.");return t.isTokenizing=!0,[4,this.mount(e)];case 1:return i.sent(),[4,new Promise((function(t){setTimeout((function(){t()}),1e3)}))];case 2:return i.sent(),[2,new Promise((function(e,i){var o,r;n.$button||i(new Error("Failed to locate Authorize.net tokenize button")),window.peachpayAuthnetResponseHandler=function(n){"Ok"===n.messages.resultCode&&n.opaqueData?e({token:{descriptor:n.opaqueData.dataDescriptor,value:n.opaqueData.dataValue}}):"Error"===n.messages.resultCode?e({error:n.messages.message.map((function(t){return{code:t.code,message:t.text}}))}):i(new Error("Unhandled Authorize.net tokenization response.")),window.peachpayAuthnetResponseHandler=void 0,t.isTokenizing=!1},null===(o=n.$button)||void 0===o||o.click();var c=(0,l.MW)("#AcceptUIContainer"),s=null===(r=(0,l.MW)("#AcceptUIContainer"))||void 0===r?void 0:r.parentNode,d=new MutationObserver((function(n){var i,o;try{for(var r=(0,a.XA)(n),s=r.next();!s.done;s=r.next()){var u=s.value;"childList"===u.type&&u.removedNodes[0]===c&&(d.disconnect(),e({cancel:!0}),window.peachpayAuthnetResponseHandler=void 0,t.isTokenizing=!1)}}catch(t){i={error:t}}finally{try{s&&!s.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}}));s&&d.observe(s,{attributes:!1,childList:!0,subtree:!1})}))]}}))}))},t.prototype.mount=function(t){return(0,a.mG)(this,void 0,void 0,(function(){var e=this;return(0,a.Jh)(this,(function(n){return this.unmount(),[2,new Promise((function(n,a){var i={showCreditCard:"card"===t||"all"===t,showBankAccount:"bank"===t||"all"===t},o=document.createElement("button");o.classList.add("AcceptUI"),o.setAttribute("style","display: none;"),o.setAttribute("type","button"),o.setAttribute("data-billingAddressOptions",'{"show":false,"required":false}'),o.setAttribute("data-apiLoginID",e.loginId),o.setAttribute("data-clientKey",e.clientKey),o.setAttribute("data-acceptUIFormBtnTxt","Submit"),o.setAttribute("data-acceptUIFormHeaderTxt","Card Information"),o.setAttribute("data-paymentOptions",JSON.stringify(i)),o.setAttribute("data-responseHandler","peachpayAuthnetResponseHandler"),o.textContent="Pay",e.$button=o;var r=document.createElement("script");r.type="text/javascript",r.src=e.scriptSrc,r.classList.add("pp-authnet-accept-script"),r.onload=function(){n()},r.onerror=function(){a(new Error("Failed to load tokenization script."))},e.$script=r,document.body.appendChild(o),document.body.appendChild(r)}))]}))}))},t.prototype.unmount=function(){var t,e;null===(t=this.$script)||void 0===t||t.remove(),null===(e=this.$button)||void 0===e||e.remove(),(0,l.HD)("#AcceptUIBackground,#AcceptUIContainer",(function(t){t.remove()}))},t.isTokenizing=!1,t}(),g=n(4681);function w(t){var e=this,n=i.L0.metadata("peachpay_authnet_gateways","accept_src"),p=i.L0.metadata("peachpay_authnet_gateways","public_client_key"),h=i.L0.metadata("peachpay_authnet_gateways","login_id");if(h&&p&&n){var w=new b({loginId:h,clientKey:p,acceptSrc:n}),v=function(){var t={},e={};if(i.L0.enabled("peachpay_authnet_card_gateway")){t[(a={config:{name:null!==(n=i.L0.metadata("peachpay_authnet_card_gateway","title"))&&void 0!==n?n:(0,c.M)("Card"),gatewayId:"peachpay_authnet_card",description:"".concat((0,c.M)("After clicking <b>Pay</b>, a window will appear where you can enter your card information.")),assets:{title:{src:d},badge:{src:s}}}}).config.gatewayId]=a,e[a.config.gatewayId]=a.config}var n;if(i.L0.enabled("peachpay_authnet_echeck_gateway")){var a=function(){var t;return{config:{name:null!==(t=i.L0.metadata("peachpay_authnet_echeck_gateway","title"))&&void 0!==t?t:(0,c.M)("US bank account"),gatewayId:"peachpay_authnet_echeck",description:"".concat((0,c.M)("After clicking <b>Pay</b>, a window will appear where you can enter your card information.")),assets:{title:{src:y},badge:{src:y}}}}}();t[a.config.gatewayId]=a,e[a.config.gatewayId]=a.config}return o.h.dispatch((0,u.Cj)(e)),t}();f(),(0,l.HD)(".authnet-btn",(function(n){n.addEventListener("click",(function(){return(0,a.mG)(e,void 0,void 0,(function(){var e,n,s,d,l,p,h,f,y,b,m,_,k,A,I;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return o.h.dispatch((0,i.N5)()),e=u.hv.selectedGateway(),(n=v[e])?(s="card","peachpay_authnet_echeck"===e&&(s="bank"),[4,w.tokenize(s)]):[2];case 1:return d=a.sent(),l=d.token,p=d.error,h=d.cancel,[4,t.startTransaction(n.config.gatewayId)];case 2:return f=a.sent(),y=f.error,b=f.result,y||!b?(m=y?(0,g.H)(y):(0,c.M)("An unknown error occured while starting the transaction. Please refresh the page and try again."),(0,r.j1)(m),o.h.dispatch((0,i.tv)()),[2]):h?(o.h.dispatch((0,i.tv)()),[2]):(null!=p?p:!l)?((0,r.j1)(null!==(I=null==p?void 0:p.map((function(t){return"".concat(t.code,": ").concat(t.message)})).join("\n"))&&void 0!==I?I:"An unknown error occured while tokenizing the payment method."),o.h.dispatch((0,i.tv)()),[2]):[4,t.placeOrder(b,{peachpay_authnet_data_descriptor:l.descriptor,peachpay_authnet_data_value:l.value})];case 3:return _=a.sent(),k=_.error,A=_.result,k||!A||"success"!==A.result?(o.h.dispatch((0,i.tv)()),[2]):window.top?[4,b.complete()]:[3,5];case 4:a.sent(),window.top.location=A.redirect,a.label=5;case 5:return[2]}}))}))}))}))}}},8883:(t,e,n)=>{t.exports=n.p+"img/d2a66f3e82ab3efab425-card.svg"},9402:(t,e,n)=>{t.exports=n.p+"img/e7542fee9125d1af4d23-bank.svg"},5792:(t,e,n)=>{t.exports=n.p+"img/b2c8b12eb49165de87d5-credit-card-regular.svg"}}]);
//# sourceMappingURL=796-5dfc4e030b795befc4ca.js.map