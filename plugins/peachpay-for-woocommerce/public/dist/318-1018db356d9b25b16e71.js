!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="11eac8fd-8789-4a9f-8679-76b71481c2b8",e._sentryDebugIdIdentifier="sentry-dbid-11eac8fd-8789-4a9f-8679-76b71481c2b8")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1.104.0"},(self.webpackChunkpeachpay_for_woocommerce=self.webpackChunkpeachpay_for_woocommerce||[]).push([[318],{1012:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se});var a=n(3940),i="https://js.stripe.com/v3",r=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,o="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",s=null,c=function(e){return null!==s||(s=new Promise((function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(o),window.Stripe)t(window.Stripe);else try{var a=function(){for(var e=document.querySelectorAll('script[src^="'.concat(i,'"]')),t=0;t<e.length;t++){var n=e[t];if(r.test(n.src))return n}return null}();a&&e?console.warn(o):a||(a=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(i).concat(t);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n}(e)),a.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),a.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(e){return void n(e)}else t(null)}))),s},l=Promise.resolve().then((function(){return c(null)})),u=!1;l.catch((function(e){u||console.warn(e)}));var d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];u=!0;var a=Date.now();return l.then((function(e){return function(e,t,n){if(null===e)return null;var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.2.0",startTime:t})}(a,n),a}(e,t,a)}))},p=n(3629),m=n(1682),f=n(3984),y=n(3458),g=n(8072),h=n(2494),v=n(4284);function b(){y.h.subscribe((function(){!function(e,t,n){e.startsWith("peachpay_stripe_")&&"payment"===t?(0,p.HD)(".stripe-btn-container",(function(e){e.classList.remove("hide")})):(0,p.HD)(".stripe-btn-container",(function(e){e.classList.add("hide")}));"loading"===n?(0,p.HD)(".stripe-btn",(function(e){e.classList.add("hide")})):(0,p.HD)(".stripe-btn",(function(e){e.classList.remove("hide")}))}(f.hv.selectedGateway(),m.qA.modalUI.page(),m.qA.modalUI.loadingMode()),function(e){"loading"===e?(0,p.HD)(".stripe-spinner-container",(function(e){e.classList.remove("hide")})):(0,p.HD)(".stripe-spinner-container",(function(e){e.classList.add("hide")}));"processing"===e?(0,p.HD)(".stripe-btn-spinner",(function(e){e.classList.remove("hide")})):(0,p.HD)(".stripe-btn-spinner",(function(e){e.classList.add("hide")}));"processing"===e?(0,p.HD)(".stripe-btn > .button-text",(function(e){e.innerHTML=(0,v.M)("Processing")})):(0,p.HD)(".stripe-btn > .button-text",(function(e){e.innerHTML="".concat((0,v.M)("Pay")," ").concat((0,h.o)(g.AQ.total()))}));"finished"===e?(0,p.HD)(".stripe-btn",(function(e){e.disabled=!1})):(0,p.HD)(".stripe-btn",(function(e){e.disabled=!0}))}(m.qA.modalUI.loadingMode())}))}var w=n(7150),_=n(5667);function S(e,t){return(0,a.mG)(this,void 0,void 0,(function(){var n,i,r,o,s,c;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return n=m.L0.metadata("peachpay_stripe_gateways","setup_intent_url"),i=m.L0.metadata("peachpay_stripe_gateways","setup_intent_nonce"),n&&i?((r=new FormData).append("security",i),r.append("payment_method_type",e),t&&r.append("payment_method",t),[4,(0,_.Fi)(n,{method:"POST",body:r})]):[2,null];case 1:return o=a.sent(),s=o.error,c=o.result,s||!(null==c?void 0:c.data)?[2,null]:[2,c.data.setup_intent_details.client_secret]}}))}))}var I=n(9402);function k(e){return(0,a.mG)(this,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){return[2,new Promise((function(t,n){(0,p.MW)("body",(function(t){t.insertAdjacentHTML("beforeend",function(e){var t=(new Date).toLocaleDateString(),n=" "===e.fullName?"":"<p>Name: ".concat(e.fullName,"</p>"),a='\n<div id="ach-mandate-container">\n    <div id="ach-mandate-modal">\n        <div id="ach-mandate-header">\n            <button type="button" id="ach-button-x" class="txt-btn" style="font-size: 2rem;">Ã—</button>\n        </div>\n        <div id="ach-mandate-body">\n            <span>\n                '.concat(n,"\n                <p>Date: ").concat(t,"</p>\n            </span>\n            <br>\n            <p>\n                \x3c!-- Note this text is only applicable to non recurring orders! --\x3e\n                ").concat((0,v.M)("By clicking <b>Accept</b>, you authorize"),' <span class="client">').concat(e.clientName,"</span> \n                ").concat((0,v.M)("to debit the bank account specified above for any amount owed for charges arising from your use of"),'\n                <span class="client">').concat(e.clientName,"'s</span> ").concat((0,v.M)("services and/or purchase of products from "),'\n                <span class="client">').concat(e.clientName,"</span>, ").concat((0,v.M)("pursuant to"),' <span class="client">').concat(e.clientName,"'s</span> ").concat((0,v.M)("website and terms, until this authorization is revoked. You may amend or cancel this authorization at any time by providing notice to "),'\n                <span class="client">').concat(e.clientName,"</span> ").concat((0,v.M)("with 30 (thirty) days notice."),'\n            </p>\n            <br>\n            <div style="text-align: center;">\n                <button type="button" id="ach-button-accept" class="btn" style="padding: 9px; width: 7rem;">').concat((0,v.M)("Accept"),'</button>\n                <button type="button" id="ach-button-cancel" class="txt-btn">').concat((0,v.M)("Cancel"),"</button>\n            </div>\n        </div>\n    </div>\n    <style>\n        #ach-mandate-container{\n            position: fixed;\n            left: 0;\n            right: 0;\n            top: 0;\n            bottom: 0;\n            background-color: rgba(0,0,0,0.5);\n            animation-name: fadein;\n            animation-duration: 0.4s;\n        }\n\n        @keyframes fadein{\n            from {\n                background-color: rgba(0,0,0,0);\n            }\n            to {\n                background-color: rgba(0,0,0,0.5);\n            }\n        }\n\n        #ach-mandate-container .client{\n            border: 1px solid #e6e6e6;\n            border-radius: 0.2rem;\n            background-color: #e6e6e6;\n            padding: 0 4px;\n            margin-bottom: 1px;\n            display: inline-block;\n        }\n\n        #ach-mandate-modal{\n            position: absolute;\n            background-color: white;\n            border-radius: 0.4rem;\n            z-index: 10000000000;\n            width: 50vw;\n            box-shadow:  2px 8px 20px 3px rgb(0 0 0 / 20%);\n            margin: 0 calc(49vw / 2);\n            top: 10vh;\n        }\n\n        #ach-mandate-header{\n            padding: 0 0.5rem;\n            text-align: right;\n            border-bottom: 1px solid #e6e6e6;\n        }\n\n        #ach-mandate-body{\n            padding: 1.5rem;\n        }\n\n        #ach-mandate-body p {\n            margin: 0;\n            padding: 0;\n        }\n        \n        #ach-mandate-modal .txt-btn{\n            border: none;\n            background: none;\n            color: grey;\n            font-weight: 400;\n        }\n\n        #ach-mandate-modal .txt-btn:hover{\n            cursor: pointer;\n            color: red;\n        } \n\n        @media screen and (max-width: 768px) {\n\n            \n            #ach-mandate-modal{\n                width: 100%;\n                margin: 0;\n                left: 0;\n                right: 0;\n\n                animation-duration: 0.8s;\n                animation-name: slideup;\n                top: unset;\n                bottom: 0;\n                border-bottom-left-radius: 0;\n                border-bottom-right-radius: 0;\n            }\n\n            @keyframes slideup{\n                from {\n                    bottom: -100%\n                }\n                to {\n                    bottom: 0;\n                }\n            }\n\n        }\n\n        /*This prevents the background from being scrollable*/\n        body{\n            overflow: hidden !important;\n            touch-action: none !important;\n        }\n    </style>\n</div>");return a}(e))}));var a=(0,p.MW)("#ach-mandate-container"),i=(0,p.MW)("#ach-button-accept"),r=(0,p.MW)("#ach-button-cancel"),o=(0,p.MW)("#ach-button-x");if(!(a&&i&&r&&o))return null==a||a.remove(),void n(new Error("Developer error: Mandate was not mounted."));i.addEventListener("click",(function(){a.remove(),t(!0)})),r.addEventListener("click",(function(){a.remove(),t(!1)})),o.addEventListener("click",(function(){a.remove(),t(!1)}))}))]}))}))}const M=n.p+"img/4e8c9723f0389f28b036-affirm.svg",F=n.p+"img/75a621818cd858bfa053-affirm.svg";var P=n(2815);const L=n.p+"img/904e49a8efd52bd3017e-afterpay-logo.svg";var x=n(1924);const A=n.p+"img/12bea47a7191c4bc66b4-clearpay.svg";function z(){var e=this,t={name:G(),gatewayId:"peachpay_stripe_afterpay",description:(0,v.M)("After selecting pay you will be redirected to complete your payment."),assets:{title:{src:D()},badge:{src:L}}};return window.addEventListener("pp-update-afterpay-branding",(function(){return(0,a.mG)(e,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(n){return e=function(e){void 0===e&&(e=null);var t=G(e);(0,p.MW)('#pp-pms-new .pp-pm-type[data-gateway="peachpay_stripe_afterpay"] > span',(function(e){e.innerHTML=t})),(0,p.MW)('#pp-pms-new .pp-pm-more li[data-gateway="peachpay_stripe_afterpay"] > span',(function(e){e.innerHTML=t}));var n=D(e);return{name:t,titleImage:n}}(),t.name=e.name,t.assets.title&&(t.assets.title.src=e.titleImage.length?e.titleImage:t.assets.title.src),[2]}))}))})),{config:t,tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"afterpay_clearpay",billing_details:w.g.stripeBillingDetails()})];case 1:return n=a.sent(),i=n.paymentMethod,(r=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=r.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==i?void 0:i.id)?[2,[i.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmAfterpayClearpayPayment(t,{return_url:n})];case 1:return r=a.sent(),o=r.paymentIntent,(s=r.error)?[2,[null,{note:null!==(i=s.message)&&void 0!==i?i:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}function G(e){var t;void 0===e&&(e=null);var n=m.L0.metadata("peachpay_stripe_afterpay_gateway","title");if(n&&"Afterpay"!==n&&"Clearpay"!==n)return n;if(e)return e;var a=w.g.billing.country();switch(!a&&P.l9.general.wcLocationInfoData&&(a=null===(t=P.l9.general.wcLocationInfoData())||void 0===t?void 0:t.store_country),a){case"GB":case"ES":case"FR":case"IT":return"Clearpay";default:return"Afterpay"}}function D(e){var t;if(void 0===e&&(e=null),e)return e;var n=w.g.billing.country();switch(!n&&P.l9.general.wcLocationInfoData&&(n=null===(t=P.l9.general.wcLocationInfoData())||void 0===t?void 0:t.store_country),n){case"GB":case"ES":case"FR":case"IT":return A;default:return x}}var J=n(9256),C=["BIF","CLP","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","UGX","VND","VUV","XAF","XOF","XPF"];function N(){var e,t=y.h.getState().calculatedCarts[0].cart,n=y.h.getState().calculatedCarts[0].summary;return{country:null!==(e=m.L0.metadata("peachpay_stripe_gateways","country"))&&void 0!==e?e:"US",currency:P.l9.currency.code().toLowerCase(),total:{label:(0,v.M)("Total"),amount:B(n.total,P.l9.currency.code())},displayItems:t.map((function(e){return{label:e.name,amount:B(Number.parseFloat(e.total)*Number.parseInt(e.quantity,10),P.l9.currency.code())}}))}}function E(){var e=y.h.getState().calculatedCarts[0].cart,t=y.h.getState().calculatedCarts[0].summary;return{currency:P.l9.currency.code().toLowerCase(),total:{label:(0,v.M)("Total"),amount:B(t.total,P.l9.currency.code())},displayItems:e.map((function(e){return{label:e.name,amount:B(Number.parseFloat(e.total)*Number.parseInt(e.quantity,10),P.l9.currency.code())}}))}}function H(e){return new Promise((function(t){e.once("paymentmethod",(function(n){e.off("cancel"),n.complete("success"),t([n.paymentMethod.id,{}])})),null==e||e.once("cancel",(function(){e.off("paymentmethod"),t([null,{note:"Payment was canceled by customer"}])})),e.show()}))}function B(e,t){var n=Number.parseFloat(String(e));return C.includes(t)||(n*=100),Math.round(n)}var q=n(6857),T=n(3041);const R=n.p+"img/1a65e514172655b40267-bancontact.svg",j=n.p+"img/31fa826b1a682e0e2d74-bancontact.svg";var W=n(8883),U=n(5792);const O=n.p+"img/f98545e5c40ab6bbc044-eps.svg",Q=n.p+"img/165559a744e87642e227-eps.svg";const X=n.p+"img/daf9bd0b8caf0142833a-giropay.svg",Y=n.p+"img/cd1eec17937e892cf6c2-giropay.svg";var K=n(410),V=n(3172);const Z=n.p+"img/bb216add609679e2a388-ideal.svg",$=n.p+"img/77fb0b8ca3843d373da4-ideal.svg";const ee=n.p+"img/89d1a718923a143f6ec3-klarna.svg",te=n.p+"img/5606c9a7bca3cdc32c92-klarna.svg";const ne=n.p+"img/d4044b8aea8f4aa47940-p24.svg",ae=n.p+"img/9ddd7317032bd9125379-p24.svg";var ie=n(7246),re=n(4681),oe=n(4209);function se(e){return(0,a.mG)(this,void 0,void 0,(function(){var t,n,i,r,o,s;return(0,a.Jh)(this,(function(c){switch(c.label){case 0:return t=m.L0.metadata("peachpay_stripe_gateways","public_key"),n=m.L0.metadata("peachpay_stripe_gateways","connect_id"),t&&n?[4,d(t,{stripeAccount:n,locale:"auto"})]:[2];case 1:return(i=c.sent())?(r=i.elements(),o={stripe:i,elements:r},s=function(){var e={},t={};if(m.L0.enabled("peachpay_stripe_card_gateway")){var n=function(){var e;return{config:{gatewayId:"peachpay_stripe_card",name:null!==(e=m.L0.metadata("peachpay_stripe_card_gateway","title"))&&void 0!==e?e:(0,v.M)("Card"),description:"",assets:{title:{src:U},badge:{src:W}}},init:function(e){var t=e.elements.create("card",{style:{base:{color:"#333",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"18px","::placeholder":{color:"#999"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},hidePostalCode:!1});(0,p.HD)('div.pp-pm-saved-option[data-gateway="peachpay_stripe_card"]',(function(e){e.innerHTML=""})),t.mount('#pp-pms-new div.pp-pm-saved-option[data-gateway="peachpay_stripe_card"]')},tokenize:function(e){var t,n;return(0,a.mG)(this,void 0,void 0,(function(){var i,r,o,s,c,l,u,d,p,m;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return i=e.stripe,r=e.elements,(o=r.getElement("card"))?[4,i.createPaymentMethod({type:"card",card:o,billing_details:w.g.stripeBillingDetails()})]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to locate valid card element."}]];case 1:return s=a.sent(),c=s.paymentMethod,(l=s.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=l.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==c?void 0:c.id)?g.AQ.total()>0?[2,[c.id,{}]]:[4,S("card",c.id)]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]];case 2:return(u=a.sent())?[4,i.confirmCardSetup(u)]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to create setup intent."}]];case 3:return d=a.sent(),p=d.error,!(m=d.setupIntent)||p?[2,[null,{paymentStatus:"creationfailed",note:null!==(n=null==p?void 0:p.message)&&void 0!==n?n:"Failed to confirm setup intent."}]]:"succeeded"!==m.status?[2,[null,{paymentStatus:"creationfailed",note:"Setup intent resulted in invalid status(".concat(m.status,")")}]]:[2,[m.payment_method,{}]]}}))}))},confirm:function(e,t){var n,i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s,c,l,u,d;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,(r=e.stripe).retrievePaymentIntent(t)];case 1:return o=a.sent(),s=o.paymentIntent,c=o.error,!s||c?[2,[null,{note:null!==(n=null==c?void 0:c.message)&&void 0!==n?n:"Failed to retrieve payment intent."}]]:"succeeded"===s.status||"requires_capture"===s.status?[2,["success",{}]]:"requires_action"!==s.status?[3,3]:[4,r.confirmCardPayment(t)];case 2:if(l=a.sent(),u=l.paymentIntent,d=l.error,!u||d)return[2,[null,{note:null!==(i=null==d?void 0:d.message)&&void 0!==i?i:"Failed to confirm payment intent."}]];if("succeeded"===u.status||"requires_capture"===u.status)return[2,["success",{}]];a.label=3;case 3:return[2,[null,{note:"Failed to confirm payment intent with status(".concat(s.status,")")}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_affirm_gateway")){n=function(){var e;return{config:{name:null!==(e=m.L0.metadata("peachpay_stripe_affirm_gateway","title"))&&void 0!==e?e:"Affirm",gatewayId:"peachpay_stripe_affirm",description:(0,v.M)("After selecting pay you will be redirected to complete your payment."),assets:{title:{src:M},badge:{src:F}}},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"affirm",billing_details:w.g.stripeBillingDetails()})];case 1:return n=a.sent(),i=n.paymentMethod,(r=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=r.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==i?void 0:i.id)?[2,[i.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmAffirmPayment(t,{return_url:n})];case 1:return r=a.sent(),o=r.paymentIntent,(s=r.error)?[2,[null,{note:null!==(i=s.message)&&void 0!==i?i:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_klarna_gateway")){n=function(){var e;return{config:{name:null!==(e=m.L0.metadata("peachpay_stripe_klarna_gateway","title"))&&void 0!==e?e:"Klarna",gatewayId:"peachpay_stripe_klarna",description:(0,v.M)("After selecting pay you will be redirected to complete your payment."),assets:{title:{src:te},badge:{src:ee}}},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"klarna",billing_details:w.g.stripeBillingDetails()})];case 1:return n=a.sent(),i=n.paymentMethod,(r=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=r.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==i?void 0:i.id)?[2,[i.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmKlarnaPayment(t,{return_url:n})];case 1:return r=a.sent(),o=r.paymentIntent,(s=r.error)?[2,[null,{note:null!==(i=s.message)&&void 0!==i?i:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_afterpay_gateway")){e[(n=z()).config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_sofort_gateway")){n=function(){var e;return{config:{name:null!==(e=m.L0.metadata("peachpay_stripe_sofort_gateway","title"))&&void 0!==e?e:"Sofort",gatewayId:"peachpay_stripe_sofort",description:(0,v.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),assets:{title:{src:ee},badge:{src:ee}}},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"sofort",sofort:{country:w.g.billing.country()},billing_details:w.g.stripeBillingDetails()})];case 1:return n=a.sent(),i=n.error,r=n.paymentMethod,i?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=i.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==r?void 0:r.id)?[2,[r.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmSofortPayment(t,{return_url:n})];case 1:return r=a.sent(),o=r.paymentIntent,(s=r.error)?[2,[null,{note:null!==(i=s.message)&&void 0!==i?i:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_achdebit_gateway")){n=function(){var e;return{config:{name:null!==(e=m.L0.metadata("peachpay_stripe_achdebit_gateway","title"))&&void 0!==e?e:(0,v.M)("US bank account"),description:'<p style="margin: 0;">'.concat((0,v.M)("After selecting <b>Pay</b> a prompt will appear to select a bank account."),'</p><hr><p class="muted" style="margin: 0;">').concat((0,v.M)("Note: Payments may take up to 5 days to complete."),"</p>"),gatewayId:"peachpay_stripe_achdebit",assets:{title:{src:I},badge:{src:I}}},tokenize:function(e){var t,n,i,r;return(0,a.mG)(this,void 0,void 0,(function(){var o,s,c,l,u,d,p,m;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return o=e.stripe,[4,S("us_bank_account")];case 1:return(s=a.sent())?[4,o.collectBankAccountForSetup({clientSecret:s,params:{payment_method_type:"us_bank_account",payment_method_data:{billing_details:{email:w.g.billing.email(),name:w.g.billing.firstName()+" "+w.g.billing.lastName()}}}})]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to create setup intent."}]];case 2:return c=a.sent(),l=c.error,!(u=c.setupIntent)||l?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=null==l?void 0:l.message)&&void 0!==t?t:"Failed to collect bank account for setup intent."}]]:"requires_confirmation"!==u.status?[2,[null,{paymentStatus:"creationfailed",note:"The customer canceled choosing a bank account."}]]:[4,k({fullName:w.g.billing.fullName(),clientName:null!==(i=null===(n=window.top)||void 0===n?void 0:n.location.hostname)&&void 0!==i?i:""})];case 3:return a.sent()?[4,o.confirmUsBankAccountSetup(s)]:[2,[null,{note:(0,v.M)("The required mandate was not accepted. Payment canceled.")}]];case 4:return d=a.sent(),p=d.error,!(m=d.setupIntent)||p?[2,[null,{paymentStatus:"creationfailed",note:null!==(r=null==p?void 0:p.message)&&void 0!==r?r:"Failed to confirm setup intent."}]]:"succeeded"!==m.status?[2,[null,{paymentStatus:"creationfailed",note:"Setup intent resulted in invalid status(".concat(m.status,")")}]]:[2,[m.payment_method,{}]]}}))}))},confirm:function(e,t){var n;return(0,a.mG)(this,void 0,void 0,(function(){var i,r,o;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.retrievePaymentIntent(t)];case 1:return i=a.sent(),r=i.paymentIntent,o=i.error,!r||o?[2,[null,{note:null!==(n=null==o?void 0:o.message)&&void 0!==n?n:"Failed to retrieve payment intent."}]]:"succeeded"===r.status||"processing"===r.status?[2,["success",{}]]:[2,[null,{note:"Failed to confirm payment intent with status(".concat(r.status,")")}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_eps_gateway")){n=function(){var e;return{config:{name:null!==(e=m.L0.metadata("peachpay_stripe_eps_gateway","title"))&&void 0!==e?e:"EPS",gatewayId:"peachpay_stripe_eps",description:(0,v.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),assets:{title:{src:Q},badge:{src:O}}},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"eps",billing_details:w.g.stripeBillingDetails()})];case 1:return n=a.sent(),i=n.paymentMethod,(r=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=r.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==i?void 0:i.id)?[2,[i.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmEpsPayment(t,{return_url:n})];case 1:return r=a.sent(),o=r.paymentIntent,(s=r.error)?[2,[null,{note:null!==(i=s.message)&&void 0!==i?i:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_p24_gateway")){n=function(){var e;return{config:{name:null!==(e=m.L0.metadata("peachpay_stripe_p24_gateway","title"))&&void 0!==e?e:"Przelewy24",gatewayId:"peachpay_stripe_p24",description:(0,v.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),assets:{title:{src:ae},badge:{src:ne}}},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"p24",billing_details:w.g.stripeBillingDetails()})];case 1:return n=a.sent(),i=n.paymentMethod,(r=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=r.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==i?void 0:i.id)?[2,[i.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmP24Payment(t,{return_url:n})];case 1:return r=a.sent(),o=r.paymentIntent,(s=r.error)?[2,[null,{note:null!==(i=s.message)&&void 0!==i?i:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_sepadebit_gateway")){n=function(){var e,t,n,i='<p style="margin: 0;font-size: smaller; text-align: justify">'.concat((0,v.M)("After clicking <b>Pay</b> your payment will be submitted immediately."),'</p>\n\t<hr><p class="muted" style="margin: 0;">').concat((0,v.M)("Payments typically take 5 days to complete."),"\n\t").concat((0,v.M)("By providing your IBAN and confirming this payment, you are authorizing ")+(null!==(t=null===(e=window.top)||void 0===e?void 0:e.location.hostname)&&void 0!==t?t:"")+(0,v.M)(" and Stripe, our payment service provider, to send instructions to your bank to debit your account and your bank to debit your account in accordance with those instructions. You are entitled to a refund from your bank under the terms and conditions of your agreement with your bank. A refund must be claimed within 8 weeks starting from the date on which your account was debited."),"</p>");return{config:{name:null!==(n=m.L0.metadata("peachpay_stripe_sepadebit_gateway","title"))&&void 0!==n?n:(0,v.M)("SEPA Debit"),description:i,gatewayId:"peachpay_stripe_sepadebit",assets:{title:{src:I},badge:{src:I}}},init:function(e){var t=e.elements.create("iban",{style:{base:{color:"#32325d",fontSize:"16px"}},supportedCountries:["SEPA"]}),n='<div class="pp-stripe-sepadebit-iban-mount"></div><hr>'.concat(i,"</div>");(0,p.HD)('div.pp-pm-saved-option[data-gateway="peachpay_stripe_sepadebit"]',(function(e){e.innerHTML=n})),t.mount('#pp-pms-new div.pp-pm-saved-option[data-gateway="peachpay_stripe_sepadebit"] div.pp-stripe-sepadebit-iban-mount')},tokenize:function(e){var t,n;return(0,a.mG)(this,void 0,void 0,(function(){var i,r,o,s,c,l,u,d,p,m,f;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return i=e.stripe,r=e.elements,(o=r.getElement("iban"))?(s=w.g.stripeBillingDetails()).email&&" "!==s.name?[4,i.createPaymentMethod({type:"sepa_debit",sepa_debit:o,billing_details:s})]:[2,[null,{paymentStatus:"creationfailed",note:"Billing name and billing email are required fields."}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to find IBAN element."}]];case 1:return c=a.sent(),l=c.paymentMethod,(u=c.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=u.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==l?void 0:l.id)?g.AQ.total()>0?[2,[l.id,{}]]:[4,S("sepa_debit")]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]];case 2:return(d=a.sent())?[4,i.confirmSepaDebitSetup(d,{payment_method:{sepa_debit:o,billing_details:{name:s.name,email:s.email}}})]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to create setup intent."}]];case 3:return p=a.sent(),m=p.error,!(f=p.setupIntent)||m?[2,[null,{paymentStatus:"creationfailed",note:null!==(n=null==m?void 0:m.message)&&void 0!==n?n:"Failed to confirm IBAN setup intent."}]]:"succeeded"!==f.status?[2,[null,{paymentStatus:"creationfailed",note:"Setup intent resulted in invalid status(".concat(f.status,")")}]]:[2,[f.payment_method,{}]]}}))}))},confirm:function(e,t){var n,i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s,c,l,u,d;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,(r=e.stripe).retrievePaymentIntent(t)];case 1:return o=a.sent(),s=o.paymentIntent,c=o.error,!s||c?[2,[null,{note:null!==(n=null==c?void 0:c.message)&&void 0!==n?n:"Failed to retrieve payment intent."}]]:"succeeded"===s.status||"requires_capture"===s.status||"processing"===s.status?[2,["success",{}]]:"requires_action"!==s.status?[3,3]:[4,r.confirmSepaDebitPayment(t)];case 2:if(l=a.sent(),u=l.paymentIntent,d=l.error,!u||d)return[2,[null,{note:null!==(i=null==d?void 0:d.message)&&void 0!==i?i:"Failed to confirm payment intent."}]];if("succeeded"===u.status||"requires_capture"===u.status||"processing"===u.status)return[2,["success",{}]];a.label=3;case 3:return[2,[null,{note:"Failed to confirm payment intent with status(".concat(s.status,")")}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_bancontact_gateway")){n=function(){var e;return{config:{name:null!==(e=m.L0.metadata("peachpay_stripe_bancontact_gateway","title"))&&void 0!==e?e:"Bancontact",gatewayId:"peachpay_stripe_bancontact",description:(0,v.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),assets:{title:{src:j},badge:{src:R}}},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"bancontact",billing_details:w.g.stripeBillingDetails()})];case 1:return n=a.sent(),i=n.paymentMethod,(r=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=r.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==i?void 0:i.id)?[2,[i.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmBancontactPayment(t,{return_url:n})];case 1:return r=a.sent(),o=r.paymentIntent,(s=r.error)?[2,[null,{note:null!==(i=s.message)&&void 0!==i?i:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_giropay_gateway")){n=function(){var e;return{config:{name:null!==(e=m.L0.metadata("peachpay_stripe_giropay_gateway","title"))&&void 0!==e?e:"giropay",gatewayId:"peachpay_stripe_giropay",description:(0,v.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),assets:{title:{src:Y},badge:{src:X}}},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.createPaymentMethod({type:"giropay",billing_details:w.g.stripeBillingDetails()})];case 1:return n=a.sent(),i=n.paymentMethod,(r=n.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=r.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==i?void 0:i.id)?[2,[i.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmGiropayPayment(t,{return_url:n})];case 1:return r=a.sent(),o=r.error,s=r.paymentIntent,o?[2,[null,{note:null!==(i=o.message)&&void 0!==i?i:"Failed to confirm payment."}]]:s?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_ideal_gateway")){n=function(){var e;return{config:{name:null!==(e=m.L0.metadata("peachpay_stripe_ideal_gateway","title"))&&void 0!==e?e:"iDEAL",gatewayId:"peachpay_stripe_ideal",description:(0,v.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),assets:{title:{src:$},badge:{src:Z}}},init:function(e){var t=e.elements.create("idealBank",{style:{base:{padding:"5px 0",color:"#32325d",fontSize:"16px"}}});(0,p.HD)('div.pp-pm-saved-option[data-gateway="peachpay_stripe_ideal"]',(function(e){e.innerHTML='\n<div style="text-align: left; display: flex; flex-direction: column;">\n    <label>\n        <span style="font-weight: 600;">'.concat((0,v.M)("Account name"),'</span>\n    </label>\n    <span class="ideal-accountholder-name" style="margin-bottom: 1rem;">').concat(w.g.billing.fullName(),'</span>\n    <div style="border-radius: 4px; background-color: #f4f4f4; padding: 0.1rem 0.5rem;">\n        <label style="font-weight: 600; font-size: 13px; color: #707070;">').concat((0,v.M)("iDEAL Bank"),'</label>\n        <div class="ideal-container-element"></div>\n    </div>\n    <hr>\n    <p class="muted" style="text-align: center; margin: 0.5rem 0">').concat((0,v.M)("After selecting <b>Pay</b> you will be redirected to complete your payment."),"</p>\n</div>\n")})),(0,p.HD)(".ideal-accountholder-name",(function(e){e.innerHTML=w.g.billing.fullName()})),t.mount('#pp-pms-new div.pp-pm-saved-option[data-gateway="peachpay_stripe_ideal"] .ideal-container-element')},tokenize:function(e){var t;return(0,a.mG)(this,void 0,void 0,(function(){var n,i,r,o,s,c;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return n=e.stripe,i=e.elements,(r=i.getElement("idealBank"))?[4,n.createPaymentMethod({type:"ideal",ideal:r,billing_details:w.g.stripeBillingDetails()})]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to find the required Stripe element."}]];case 1:return o=a.sent(),s=o.paymentMethod,(c=o.error)?[2,[null,{paymentStatus:"creationfailed",note:null!==(t=c.message)&&void 0!==t?t:"Failed to tokenize payment method."}]]:(null==s?void 0:s.id)?[2,[s.id,{}]]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to tokenize payment method."}]]}}))}))},confirm:function(e,t,n){var i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,e.stripe.confirmIdealPayment(t,{return_url:n})];case 1:return r=a.sent(),o=r.paymentIntent,(s=r.error)?[2,[null,{note:null!==(i=s.message)&&void 0!==i?i:"Failed to confirm payment."}]]:o?[2,["success",{}]]:[2,[null,{}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_applepay_gateway")){n=function(){var e,t,n={name:null!==(e=m.L0.metadata("peachpay_stripe_applepay_gateway","title"))&&void 0!==e?e:(0,v.M)("Apple Pay"),gatewayId:"peachpay_stripe_applepay",description:'\n<img style="display: block; text-align: left; height: 1.5rem; " src="'.concat(T,'">\n<p style="text-align: left; margin: 0.5rem 0;">').concat((0,v.M)("Apple Pay selected for checkout."),'</p>\n<hr/>\n<p style="text-align: left; margin: 0.5rem 0 0;" class="muted">').concat((0,v.M)("Another step will appear after submitting your order to complete your purchase details."),"<p>\n    "),assets:{title:{src:T},badge:{src:q}}};return{config:n,init:function(e){var i=e.stripe;return(0,a.mG)(this,void 0,void 0,(function(){var e,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(t=i.paymentRequest(N())).canMakePayment()];case 1:return(null==(e=a.sent())?void 0:e.applePay)?[3,3]:(n.browser=!1,n.initialized=!1,y.h.dispatch((0,J.s)()),[2]);case 2:return r=a.sent(),console.error(r),[3,3];case 3:return[2]}}))}))},tokenize:function(e){var n,i=e.stripe;return(0,a.mG)(this,void 0,void 0,(function(){var e,r,o,s,c,l,u;return(0,a.Jh)(this,(function(d){switch(d.label){case 0:return t?(t.update(E()),[4,H(t)]):[2,[null,{paymentStatus:"creationfailed",note:(0,v.M)("Sorry Apple Pay is not available right now. Please use another payment method or try again later.")}]];case 1:return e=a.CR.apply(void 0,[d.sent(),2]),r=e[0],o=e[1],r?g.AQ.total()>0?[2,[r,{}]]:[4,S("card",r)]:[2,[null,o]];case 2:return(s=d.sent())?[4,i.confirmCardSetup(s)]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to create setup intent."}]];case 3:return c=d.sent(),l=c.error,u=c.setupIntent,(null!=l?l:!u)?[2,[null,{paymentStatus:"creationfailed",note:null!==(n=null==l?void 0:l.message)&&void 0!==n?n:"Failed to confirm setup intent."}]]:"succeeded"!==u.status?[2,[null,{paymentStatus:"creationfailed",note:"Setup intent resulted in invalid status(".concat(u.status,")")}]]:[2,[u.payment_method,{}]]}}))}))},confirm:function(e,t){var n,i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s,c,l,u,d;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,(r=e.stripe).retrievePaymentIntent(t)];case 1:return o=a.sent(),s=o.paymentIntent,c=o.error,!s||c?[2,[null,{note:null!==(n=null==c?void 0:c.message)&&void 0!==n?n:"Failed to retrieve payment intent."}]]:"succeeded"===s.status||"requires_capture"===s.status?[2,["success",{}]]:"requires_action"!==s.status?[3,3]:[4,r.confirmCardPayment(t)];case 2:if(l=a.sent(),u=l.paymentIntent,d=l.error,!u||d)return[2,[null,{note:null!==(i=null==d?void 0:d.message)&&void 0!==i?i:"Failed to confirm payment intent."}]];if("succeeded"===u.status||"requires_capture"===u.status)return[2,["success",{}]];a.label=3;case 3:return[2,[null,{note:"Failed to confirm payment intent with status(".concat(s.status,")")}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}if(m.L0.enabled("peachpay_stripe_googlepay_gateway")){n=function(){var e,t,n={name:null!==(e=m.L0.metadata("peachpay_stripe_googlepay_gateway","title"))&&void 0!==e?e:(0,v.M)("Google Pay"),gatewayId:"peachpay_stripe_googlepay",description:'\n<img style="display: block; text-align: left; height: 1.7rem; " src="'.concat(V,'">\n<p style="text-align: left; margin: 0.5rem 0;">').concat((0,v.M)("Google Pay selected for checkout."),'</p>\n<hr/>\n<p style="text-align: left; margin: 0.5rem 0 0;" class="muted">').concat((0,v.M)("Another step will appear after submitting your order to complete your purchase details."),"<p>\n    "),assets:{title:{src:V},badge:{src:K}}};return{config:n,init:function(e){var i=e.stripe;return(0,a.mG)(this,void 0,void 0,(function(){var e,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(t=i.paymentRequest(N())).canMakePayment()];case 1:return(null==(e=a.sent())?void 0:e.googlePay)||(n.browser=!1,n.initialized=!1,y.h.dispatch((0,J.s)())),[3,3];case 2:return r=a.sent(),console.error(r),[3,3];case 3:return[2]}}))}))},tokenize:function(e){var n,i=e.stripe;return(0,a.mG)(this,void 0,void 0,(function(){var e,r,o,s,c,l,u;return(0,a.Jh)(this,(function(d){switch(d.label){case 0:return t?(t.update(E()),[4,H(t)]):[2,[null,{paymentStatus:"creationfailed",note:(0,v.M)("Sorry Google Pay is not available right now. Please use another payment method or try again later.")}]];case 1:return e=a.CR.apply(void 0,[d.sent(),2]),r=e[0],o=e[1],r?g.AQ.total()>0?[2,[r,{}]]:[4,S("card",r)]:[2,[null,o]];case 2:return(s=d.sent())?[4,i.confirmCardSetup(s)]:[2,[null,{paymentStatus:"creationfailed",note:"Failed to create setup intent."}]];case 3:return c=d.sent(),l=c.error,u=c.setupIntent,(null!=l?l:!u)?[2,[null,{paymentStatus:"creationfailed",note:null!==(n=null==l?void 0:l.message)&&void 0!==n?n:"Failed to confirm setup intent."}]]:"succeeded"!==u.status?[2,[null,{paymentStatus:"creationfailed",note:"Setup intent resulted in invalid status(".concat(u.status,")")}]]:[2,[u.payment_method,{}]]}}))}))},confirm:function(e,t){var n,i;return(0,a.mG)(this,void 0,void 0,(function(){var r,o,s,c,l,u,d;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,(r=e.stripe).retrievePaymentIntent(t)];case 1:return o=a.sent(),s=o.paymentIntent,c=o.error,!s||c?[2,[null,{note:null!==(n=null==c?void 0:c.message)&&void 0!==n?n:"Failed to retrieve payment intent."}]]:"succeeded"===s.status||"requires_capture"===s.status?[2,["success",{}]]:"requires_action"!==s.status?[3,3]:[4,r.confirmCardPayment(t)];case 2:if(l=a.sent(),u=l.paymentIntent,d=l.error,!u||d)return[2,[null,{note:null!==(i=null==d?void 0:d.message)&&void 0!==i?i:"Failed to confirm payment intent."}]];if("succeeded"===u.status||"requires_capture"===u.status)return[2,["success",{}]];a.label=3;case 3:return[2,[null,{note:"Failed to confirm payment intent with status(".concat(s.status,")")}]]}}))}))}}}();e[n.config.gatewayId]=n,t[n.config.gatewayId]=n.config}return y.h.dispatch((0,f.Cj)(t)),e}(),[4,ce(o,s,e)]):[2];case 2:return c.sent(),b(),[2]}}))}))}function ce(e,t,n){return(0,a.mG)(this,void 0,void 0,(function(){var i,r,o,s,c,l,u,d,m=this;return(0,a.Jh)(this,(function(y){switch(y.label){case 0:i=[];try{for(r=(0,a.XA)(Object.entries(t)),o=r.next();!o.done;o=r.next())s=(0,a.CR)(o.value,2),s[0],(c=s[1]).init&&i.push(c.init(e))}catch(e){u={error:e}}finally{try{o&&!o.done&&(d=r.return)&&d.call(r)}finally{if(u)throw u.error}}return[4,Promise.all(i)];case 1:return y.sent(),l=function(i){return(0,a.mG)(m,void 0,void 0,(function(){var r,o,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,oe.Z.reportValidity()];case 1:return a.sent()?(r=i.target,(null==r?void 0:r.closest("button"))?(o=f.hv.selectedGateway(),(s=t[o])?[2,le(e,s,n)]:[2]):[2]):[2]}}))}))},(0,p.HD)(".stripe-btn",(function(e){e.addEventListener("click",(function(e){return(0,a.mG)(m,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){return[2,l(e)]}))}))}))})),[2]}}))}))}function le(e,t,n){var i,r;return(0,a.mG)(this,void 0,void 0,(function(){var o,s,c,l,u,d,p,f,g,h,b,w,_,S,I,k,M,F,P,L,x,A;return(0,a.Jh)(this,(function(z){switch(z.label){case 0:return y.h.dispatch((0,m.N5)()),[4,t.tokenize(e)];case 1:return o=a.CR.apply(void 0,[z.sent(),2]),s=o[0],c=o[1],!s&&c.note&&(0,ie.j1)(null!==(i=c.note)&&void 0!==i?i:""),[4,n.startTransaction(t.config.gatewayId)];case 2:return l=z.sent(),u=l.error,d=l.result,u||!d?(p=u?(0,re.H)(u):(0,v.M)("An unknown error occured while starting the transaction. Please refresh the page and try again."),(0,ie.j1)(p),y.h.dispatch((0,m.tv)()),[2]):s?[3,4]:[4,d.complete(c)];case 3:return z.sent(),y.h.dispatch((0,m.tv)()),[2];case 4:return[4,n.placeOrder(d,{peachpay_stripe_payment_method_id:s})];case 5:return f=z.sent(),g=f.error,h=f.result,g||!h||"success"!==h.result?(y.h.dispatch((0,m.tv)()),[2]):""!==(b=new URL(h.redirect)).hash?[3,7]:[4,d.complete()];case 6:z.sent(),window.top.location.href=b,z.label=7;case 7:return w=(0,a.CR)(b.hash.split("="),2),_=w[0],S=w[1],"#payment_data"===_&&S?[3,10]:[4,d.complete()];case 8:return z.sent(),[4,(0,ie.t9)()];case 9:return z.sent(),y.h.dispatch((0,m.tv)()),[2];case 10:I=JSON.parse(atob(decodeURIComponent(S))),k=I.data.client_secret,M=I.intermediate_url,F=I.success_url,z.label=11;case 11:return z.trys.push([11,16,,20]),[4,t.confirm(e,k,M)];case 12:return P=a.CR.apply(void 0,[z.sent(),2]),L=P[0],x=P[1],"success"===L?[3,15]:(x.note&&(0,ie.j1)(null!==(r=x.note)&&void 0!==r?r:""),[4,d.complete(x)]);case 13:return z.sent(),[4,(0,ie.t9)()];case 14:return z.sent(),y.h.dispatch((0,m.tv)()),[2];case 15:return window.top.location.href=F,[3,20];case 16:return(A=z.sent())instanceof Error?[4,d.complete({note:A.message,paymentStatus:"failed"})]:[3,18];case 17:z.sent(),z.label=18;case 18:return[4,(0,ie.t9)()];case 19:return z.sent(),y.h.dispatch((0,m.tv)()),[3,20];case 20:return[2]}}))}))}},6857:(e,t,n)=>{e.exports=n.p+"img/d0db1eb027413f38ddb3-apple-pay.svg"},8883:(e,t,n)=>{e.exports=n.p+"img/d2a66f3e82ab3efab425-card.svg"},410:(e,t,n)=>{e.exports=n.p+"img/7aba4ceea17fbd040a20-google-pay.svg"},1924:(e,t,n)=>{e.exports=n.p+"img/070ee8f2835a668d3bed-afterpay.svg"},3041:(e,t,n)=>{e.exports=n.p+"img/0a580c7c9daca59b189c-apple-pay.svg"},9402:(e,t,n)=>{e.exports=n.p+"img/e7542fee9125d1af4d23-bank.svg"},5792:(e,t,n)=>{e.exports=n.p+"img/b2c8b12eb49165de87d5-credit-card-regular.svg"},3172:(e,t,n)=>{e.exports=n.p+"img/b6a9922efb467e7f87c3-google-pay.svg"}}]);
//# sourceMappingURL=318-1018db356d9b25b16e71.js.map