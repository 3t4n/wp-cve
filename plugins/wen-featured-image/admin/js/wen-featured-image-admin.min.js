var wfi_file_frame;!function($){"use strict";function wen_featured_image_replace_ajax_content(post_id,block_html){var target_id="wfi-block-wrap-"+post_id;jQuery("#"+target_id).hide().html(block_html).fadeIn()}jQuery(document).ready(function($){jQuery(document).on("click","a.wfi-btn-remove",function(event){var $this=$(this);event.preventDefault();var confirmation=confirm(WFI_OBJ.lang.are_you_sure);return!!confirmation&&void jQuery.post(WFI_OBJ.ajaxurl,{action:"wfi-remove-featured-image",security:$this.data("security"),post_id:$this.data("post")},function(response){1==response.status&&wen_featured_image_replace_ajax_content(response.post_id,response.html)})}),jQuery(document).on("click","a.wfi-btn-add",function(event){var $this=$(this);event.preventDefault(),wfi_file_frame=wp.media.frames.wfi_file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},library:{type:"image"},multiple:!1}),wfi_file_frame.on("select",function(){var attachment=wfi_file_frame.state().get("selection").first().toJSON();jQuery.post(WFI_OBJ.ajaxurl,{action:"wfi-add-featured-image",post_id:$this.data("post"),security:$this.data("security"),attachment_ID:attachment.id},function(response){1==response.status&&wen_featured_image_replace_ajax_content(response.post_id,response.html)})}),wfi_file_frame.open()}),jQuery(document).on("click","a.wfi-btn-change",function(event){var $this=$(this);event.preventDefault(),wfi_file_frame=wp.media.frames.wfi_file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},library:{type:"image"},multiple:!1}),wfi_file_frame.on("open",function(){var selection=wfi_file_frame.state().get("selection"),selected=$this.data("previous_attachment");selected&&selection.add(wp.media.attachment(selected))}),wfi_file_frame.on("select",function(){var attachment=wfi_file_frame.state().get("selection").first().toJSON();jQuery.post(WFI_OBJ.ajaxurl,{action:"wfi-change-featured-image",security:$this.data("security"),post_id:$this.data("post"),attachment_ID:attachment.id},function(response){1==response.status&&wen_featured_image_replace_ajax_content(response.post_id,response.html)})}),wfi_file_frame.open()})})}(jQuery);