!function(e){"use strict";var t={initialize:function(){e("ul.wphr-dashboard-announcement").on("click","a.mark-read",this.dashboard.markAnnouncementRead),e("ul.wphr-dashboard-announcement").on("click","a.view-full",this.dashboard.viewAnnouncement),e("ul.wphr-dashboard-announcement").on("click",".announcement-title a",this.dashboard.viewAnnouncementTitle),e("body").on("click","a#wphr-new-dept",this.department.create),e(".wphr-hr-depts").on("click","a.submitdelete",this.department.remove),e(".wphr-hr-depts").on("click","span.edit a",this.department.edit),e("body").on("click","a#wphr-new-designation",this.designation.create),e(".wphr-hr-designation").on("click","a.submitdelete",this.designation.remove),e(".wphr-hr-designation").on("click","span.edit a",this.designation.edit),e(".wphr-hr-employees").on("click","a.ressend_welcome_email",this.employee.ressend_welcome_email),e(".wphr-hr-employees").on("click","a#wphr-employee-new",this.employee.create),e(".wphr-hr-employees").on("click","span.edit a",this.employee.edit),e(".wphr-hr-employees").on("click","a.submitdelete",this.employee.remove),e(".wphr-hr-employees").on("click","a.submitrestore",this.employee.restore),e(".wphr-hr-employees").on("click","a#wphr-empl-status",this.employee.updateJobStatus),e(".wphr-hr-employees").on("click","a#wphr-empl-compensation",this.employee.updateJobStatus),e(".wphr-hr-employees").on("click","a#wphr-empl-jobinfo",this.employee.updateJobStatus),e(".wphr-hr-employees").on("click","td.action a.remove",this.employee.removeHistory),e(".wphr-hr-employees").on("click","a#wphr-employee-print",this.employee.printData),e("body").on("focusout","input#wphr-hr-user-email",this.employee.checkUserEmail),e("body").on("click","a#wphr-hr-create-wp-user-to-employee",this.employee.makeUserEmployee),e(".wphr-employee-single").on("click","a#wphr-employee-terminate",this.employee.terminateEmployee),e(".wphr-employee-single").on("click","input#wphr-hr-employee-status-update",this.employee.changeEmployeeStatus),e(".wphr-hr-employees").on("click","a#wphr-empl-performance-reviews",this.employee.updatePerformance),e(".wphr-hr-employees").on("click","a#wphr-empl-performance-comments",this.employee.updatePerformance),e(".wphr-hr-employees").on("click","a#wphr-empl-performance-goals",this.employee.updatePerformance),e(".wphr-hr-employees").on("click",".performance-tab-wrap td.action a.performance-remove",this.employee.removePerformance),e(".wphr-hr-employees").on("click","a#wphr-empl-add-exp",this.employee.general.create),e(".wphr-hr-employees").on("click","a.work-experience-edit",this.employee.general.create),e(".wphr-hr-employees").on("click","a.work-experience-delete",this.employee.general.remove),e(".wphr-hr-employees").on("click","a#wphr-empl-add-education",this.employee.general.create),e(".wphr-hr-employees").on("click","a.education-edit",this.employee.general.create),e(".wphr-hr-employees").on("click","a.education-delete",this.employee.general.remove),e(".wphr-hr-employees").on("click","a#wphr-empl-add-dependent",this.employee.general.create),e(".wphr-hr-employees").on("click","a.dependent-edit",this.employee.general.create),e(".wphr-hr-employees").on("click","a.dependent-delete",this.employee.general.remove),e(".wphr-hr-employees").on("submit",".note-tab-wrap form",this.employee.addNote),e(".wphr-hr-employees").on("click",".note-tab-wrap input#wphr-load-notes",this.employee.loadNotes),e(".wphr-hr-employees").on("click",".note-tab-wrap a.delete_note",this.employee.deleteNote),e(".wphr-hr-employees").on("click","#enable_manager",this.employee.extendUserCapabities),e("body").on("click","a#wphr-set-emp-photo",this.employee.setPhoto),e("body").on("click","a.wphr-remove-photo",this.employee.removePhoto),e("body").on("wphr-hr-after-new-dept",this.department.afterNew),e("body").on("wphr-hr-after-new-desig",this.designation.afterNew),this.initTipTip()},initToggleCheckbox:function(){var t=!1;e("tbody").children().children(".check-column").find(":checkbox").click(function(o){if("undefined"==o.shiftKey)return!0;if(o.shiftKey){if(!t)return!0;checks=e(t).closest("form").find(":checkbox").filter(":visible:enabled"),first=checks.index(t),last=checks.index(this),checked=e(this).prop("checked"),0<first&&0<last&&first!=last&&(sliced=last>first?checks.slice(first,last):checks.slice(last,first),sliced.prop("checked",function(){return!!e(this).closest("tr").is(":visible")&&checked}))}t=this;var n=e(this).closest("tbody").find(":checkbox").filter(":visible:enabled").not(":checked");return e(this).closest("table").children("thead, tfoot").find(":checkbox").prop("checked",function(){return 0===n.length}),!0}),e("thead, tfoot").find(".check-column :checkbox").on("click.wp-toggle-checkboxes",function(t){var o=e(this),n=o.closest("table"),a=o.prop("checked"),r=t.shiftKey||o.data("wp-toggle");n.children("tbody").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",function(){return!e(this).is(":hidden,:disabled")&&(r?!e(this).prop("checked"):!!a)}),n.children("thead,  tfoot").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",function(){return!r&&!!a})})},initTipTip:function(){e(".wphr-tips").tipTip({defaultPosition:"top",fadeIn:100,fadeOut:100})},initDateField:function(){e(".wphr-date-field").datepicker({dateFormat:wpHr.date_format,changeMonth:!0,changeYear:!0,yearRange:"-100:+5"})},reloadPage:function(){e(".wphr-area-left").load(window.location.href+" #wphr-area-left-inner",function(){e(".select2").select2()})},dashboard:{markAnnouncementRead:function(t){t.preventDefault();var o=e(this);o.closest("li").hasClass("unread")&&wp.ajax.send("wphr_hr_announcement_mark_read",{data:{id:o.data("row_id"),_wpnonce:wpHr.nonce},success:function(e){o.closest("li").removeClass("unread").addClass("read"),o.addClass("wphr-hide")},error:function(e){alert(e)}})},viewAnnouncementTitle:function(t){t.preventDefault();var o=e(this).closest("li").find("a.view-full");wp.ajax.send("wphr_hr_announcement_view",{data:{id:o.data("row_id"),_wpnonce:wpHr.nonce},success:function(t){e.wphrPopup({title:t.title,button:"",id:"wphr-hr-announcement",content:"<p>"+t.content+"</p>",extraClass:"midium"}),o.closest("li").removeClass("unread"),o.siblings(".mark-read").addClass("wphr-hide")},error:function(e){alert(e)}})},viewAnnouncement:function(t){t.preventDefault();var o=e(this);wp.ajax.send("wphr_hr_announcement_view",{data:{id:o.data("row_id"),_wpnonce:wpHr.nonce},success:function(t){e.wphrPopup({title:t.title,button:"",id:"wphr-hr-announcement",content:"<p>"+t.content+"</p>",extraClass:"midium"}),o.closest("li").removeClass("unread"),o.siblings(".mark-read").addClass("wphr-hide")},error:function(e){alert(e)}})}},department:{afterNew:function(t,o){var n=e(".wphr-hr-dept-drop-down");wphr.scriptReload("wphr_hr_script_reload","tmpl-wphr-new-employee"),n.append('<option selected="selected" value="'+o.id+'">'+o.title+"</option>"),n.select2().select2("val",o.id)},reload:function(){e("#wphr-dept-table-wrap").load(window.location.href+" #wphr-dept-table-wrap",function(){t.initToggleCheckbox()})},tempReload:function(){wphr.scriptReload("wphr_hr_new_dept_tmp_reload","tmpl-wphr-new-dept")},create:function(o){o.preventDefault();var n=e(this).data("single");e.wphrPopup({title:wpHr.popup.dept_title,button:wpHr.popup.dept_submit,id:"wphr-hr-new-department",content:wphr.template("wphr-new-dept")().trim(),extraClass:"smaller",onSubmit:function(o){wp.ajax.send({data:this.serialize(),success:function(a){t.department.reload(),"1"!=n?e("body").trigger("wphr-hr-after-new-dept",[a]):t.department.tempReload(),o.closeModal()},error:function(e){o.showError(e)}})}})},edit:function(o){o.preventDefault();var n=e(this);e.wphrPopup({title:wpHr.popup.dept_update,button:wpHr.popup.dept_update,id:"wphr-hr-new-department",content:wp.template("wphr-new-dept")().trim(),extraClass:"smaller",onReady:function(){var t=this;e("header",t).after(e('<div class="loader"></div>').show()),wp.ajax.send("wphr-hr-get-dept",{data:{id:n.data("id"),_wpnonce:wpHr.nonce},success:function(o){e(".loader",t).remove(),e("#dept-title",t).val(o.name),e("#emp-profile-label",t).val(o.data.employee_label),e("#dept-desc",t).val(o.data.description),e("#dept-parent",t).val(o.data.parent),e("#dept-lead",t).val(o.data.lead),e("#dept-id",t).val(o.id),e("#dept-action",t).val("wphr-hr-update-dept"),e('#dept-parent option[value="'+n.data("id")+'"]',t).attr("disabled","disabled")}})},onSubmit:function(e){wp.ajax.send({data:this.serialize(),success:function(){t.department.reload(),t.department.tempReload(),e.closeModal()},error:function(t){e.showError(t)}})}})},remove:function(o){o.preventDefault();var n=e(this);confirm(wpHr.delConfirmDept)&&wp.ajax.send("wphr-hr-del-dept",{data:{_wpnonce:wpHr.nonce,id:n.data("id")},success:function(){n.closest("tr").fadeOut("fast",function(){e(this).remove(),t.department.tempReload()})},error:function(e){alert(e)}})}},designation:{afterNew:function(o,n){var a=e(".wphr-hr-desi-drop-down");wphr.scriptReload("wphr_hr_script_reload","tmpl-wphr-new-employee"),a.append('<option selected="selected" value="'+n.id+'">'+n.title+"</option>"),t.employee.select2AddMoreActive("wphr-hr-desi-drop-down"),a.select2("val",n.id)},reload:function(){e(".wphr-hr-designation").load(window.location.href+" .wphr-hr-designation",function(){t.initToggleCheckbox()})},create:function(o){o.preventDefault();var n=e(this).data("single");e.wphrPopup({title:wpHr.popup.desig_title,button:wpHr.popup.desig_submit,id:"wphr-hr-new-designation",content:wp.template("wphr-new-desig")().trim(),extraClass:"smaller",onSubmit:function(o){wp.ajax.send({data:this.serialize(),success:function(a){t.designation.reload(),"1"!=n&&e("body").trigger("wphr-hr-after-new-desig",[a]),o.closeModal()},error:function(e){o.showError(e)}})}})},edit:function(o){o.preventDefault();var n=e(this);e.wphrPopup({title:wpHr.popup.desig_update,button:wpHr.popup.desig_update,content:wp.template("wphr-new-desig")().trim(),id:"wphr-update-designation",extraClass:"smaller",onReady:function(){var t=this;e("header",t).after(e('<div class="loader"></div>').show()),wp.ajax.send("wphr-hr-get-desig",{data:{id:n.data("id"),_wpnonce:wpHr.nonce},success:function(o){e(".loader",t).remove(),e("#desig-title",t).val(o.name),e("#desig-desc",t).val(o.data.description),e("#desig-id",t).val(o.id),e("#desig-action",t).val("wphr-hr-update-desig")}})},onSubmit:function(e){wp.ajax.send({data:this.serialize(),success:function(){t.designation.reload(),e.closeModal()},error:function(t){e.showError(t)}})}})},remove:function(t){t.preventDefault();var o=e(this);confirm(wpHr.delConfirmDept)&&wp.ajax.send("wphr-hr-del-desig",{data:{_wpnonce:wpHr.nonce,id:o.data("id")},success:function(){o.closest("tr").fadeOut("fast",function(){e(this).remove()})},error:function(e){alert(e)}})}},employee:{extendUserCapabities:function(){e(".manager_services").toggleClass("wphr-hide")},reload:function(){e(".wphr-hr-employees-wrap").load(window.location.href+" .wphr-hr-employees-wrap-inner",function(){t.initToggleCheckbox()})},setPhoto:function(t){var o;t.preventDefault(),t.stopPropagation(),o?o.open():((o=wp.media({title:wpHr.emp_upload_photo,button:{text:wpHr.emp_set_photo}})).on("select",function(){o.state().get("selection").map(function(t){var o='<img src="'+(t=t.toJSON()).url+'" alt="" />';o+='<input type="hidden" id="emp-photo-id" name="personal[photo_id]" value="'+t.id+'" />',o+='<a href="#" class="wphr-remove-photo">&times;</a>',e(".photo-container",".wphr-employee-form").html(o)})}),o.open())},removePhoto:function(t){t.preventDefault();var o='<a href="#" id="wphr-set-emp-photo" class="button button-small">'+wpHr.emp_upload_photo+"</a>";o+='<input type="hidden" name="personal[photo_id]" id="emp-photo-id" value="0">',e(".photo-container",".wphr-employee-form").html(o)},create:function(o){void 0!==o&&o.preventDefault(),void 0!==wpHr.employee_empty&&e.wphrPopup({title:wpHr.popup.employee_title,button:wpHr.popup.employee_create,id:"wphr-new-employee-popup",content:wphr.template("wphr-new-employee")(wpHr.employee_empty).trim(),onReady:function(){t.initDateField(),e(".select2").select2(),t.employee.select2Action("wphr-hrm-select2"),t.employee.select2AddMoreContent(),e("#user_notification").on("click",function(){e(this).is(":checked")?e(".show-if-notification").show():e(".show-if-notification").hide()})},onSubmit:function(o){e("button[type=submit]",".wphr-modal").attr("disabled","disabled"),wp.ajax.send("wphr-hr-employee-new",{data:this.serialize(),success:function(e){t.employee.reload(),o.enableButton(),o.closeModal()},error:function(e){o.enableButton(),o.showError(e)}})}})},select2AddMoreContent:function(){var o=e(".wphr-hrm-select2-add-more");e.each(o,function(e,o){t.employee.select2AddMoreActive(o)})},select2AddMoreActive:function(t){var o=e(t).data("id");e(t).select2({width:"element",language:{noResults:function(){return'<a href="#" class="button button-primary" id="'+o+'">Add New</a>'}},escapeMarkup:function(e){return e}})},select2Action:function(t){e("."+t).select2({width:"element"})},edit:function(o){o.preventDefault();var n=e(this);e.wphrPopup({title:wpHr.popup.employee_update,button:wpHr.popup.employee_update,id:"wphr-employee-edit",onReady:function(){var o=this;e("header",o).after(e('<div class="loader"></div>').show()),wp.ajax.send("wphr-hr-emp-get",{data:{id:n.data("id"),_wpnonce:wpHr.nonce},success:function(n){var a=wp.template("wphr-new-employee")(n);e(".content",o).html(a),e(".loader",o).remove(),t.initDateField(),e(".select2").select2(),t.employee.select2Action("wphr-hrm-select2"),t.employee.select2AddMoreContent(),e("li[data-selected]",o).each(function(){var t=e(this),o=t.data("selected");""!==o&&(t.find("select").val(o).trigger("change"),t.find("input[type=radio][value='"+o+"']").prop("checked",!0),e.each(t.find("input[type=checkbox]"),function(t,n){-1!=e.inArray(e(n).val(),o.split(","))&&e(n).prop("checked",!0)}))}),e('#work_reporting_to option[value="'+n.id+'"]',o).attr("disabled","disabled")}})},onSubmit:function(e){e.disableButton(),wp.ajax.send({data:this.serialize(),success:function(o){t.employee.reload(),e.enableButton(),e.closeModal()},error:function(t){e.enableButton(),e.showError(t)}})}})},remove:function(o){o.preventDefault();var n=e(this);confirm(wpHr.delConfirmEmployee)&&wp.ajax.send("wphr-hr-emp-delete",{data:{_wpnonce:wpHr.nonce,id:n.data("id"),hard:n.data("hard")},success:function(){n.closest("tr").fadeOut("fast",function(){e(this).remove(),t.employee.reload()})},error:function(e){alert(e)}})},restore:function(o){o.preventDefault();var n=e(this);confirm(wpHr.restoreConfirmEmployee)&&wp.ajax.send("wphr-hr-emp-restore",{data:{_wpnonce:wpHr.nonce,id:n.data("id")},success:function(){n.closest("tr").fadeOut("fast",function(){e(this).remove(),t.employee.reload()})},error:function(e){alert(e)}})},general:{create:function(o){console.log(o),void 0!==o&&o.preventDefault();var n=e(this);e.wphrPopup({title:n.data("title"),content:wp.template(n.data("template"))(n.data("data")),extraClass:"smaller",id:"wphr-hr-new-general",button:n.data("button"),onReady:function(){t.initDateField()},onSubmit:function(e){wp.ajax.send({data:this.serializeObject(),success:function(){t.reloadPage(),e.closeModal()},error:function(t){e.enableButton(),e.showError(t)}})}})},remove:function(o){o.preventDefault();var n=e(this);confirm(wpHr.confirm)&&wp.ajax.send(n.data("action"),{data:{id:n.data("id"),employee_id:n.data("employee_id"),_wpnonce:wpHr.nonce},success:function(){t.reloadPage()},error:function(e){alert(e)}})}},updateJobStatus:function(o){void 0!==o&&o.preventDefault();var n=e(this);e.wphrPopup({title:n.data("title"),button:wpHr.popup.update_status,id:"wphr-hr-update-job-status",content:"",extraClass:"smaller",onReady:function(){var o=wp.template(n.data("template"))(window.wpHrCurrentEmployee);e(".content",this).html(o),t.initDateField(),e(".row[data-selected]",this).each(function(){var t=e(this),o=t.data("selected");""!==o&&t.find("select").val(o)})},onSubmit:function(e){wp.ajax.send({data:this.serializeObject(),success:function(){t.reloadPage(),e.closeModal()},error:function(t){e.enableButton(),e.showError(t)}})}})},removeHistory:function(o){o.preventDefault(),confirm(wpHr.confirm)&&wp.ajax.send("wphr-hr-emp-delete-history",{data:{id:e(this).data("id"),_wpnonce:wpHr.nonce},success:function(){t.reloadPage()}})},printData:function(e){e.preventDefault(),window.print()},checkUserEmail:function(){var t=e(this),o=t.val(),n=t.closest("form").find("#wphr-employee-id").val();return!(""==o||!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o))&&("0"==n&&void wp.ajax.send("wphr_hr_check_user_exist",{data:{email:o,_wpnonce:wpHr.nonce},success:function(){var o=t.closest("form");o.find(".modal-suggession").fadeOut(300,function(){e(this).remove()}),o.find("button[type=submit]").removeAttr("disabled")},error:function(o){var n=t.closest("form");n.find("button[type=submit]").attr("disabled","disabled"),"employee"==o.type&&(n.find(".modal-suggession").remove(),n.find("header.modal-header").append('<div class="modal-suggession">'+wpHr.employee_exit+"</div>")),"wp_user"==o.type&&(n.find(".modal-suggession").remove(),n.find("header.modal-header").append('<div class="modal-suggession">'+wpHr.make_employee_text+' <a href="#" id="wphr-hr-create-wp-user-to-employee" data-user_id="'+o.data.ID+'">'+wpHr.create_employee_text+"</a></div>")),e(".modal-suggession").hide().slideDown(function(){n.find(".content-container").css({marginTop:"15px"})})}}))},makeUserEmployee:function(o){o.preventDefault();var n=e(this),a=n.data("user_id");n.closest(".modal-suggession").append('<div class="wphr-loader" style="top:9px; right:10px;"></div>'),wp.ajax.send("wphr-hr-convert-wp-to-employee",{data:{user_id:a,_wpnonce:wpHr.nonce},success:function(){n.closest(".modal-suggession").find(".wphr-loader").remove(),n.closest(".wphr-modal").remove(),e(".wphr-modal-backdrop").remove(),t.employee.reload(),e.wphrPopup({title:wpHr.popup.employee_update,button:wpHr.popup.employee_update,id:"wphr-employee-edit",onReady:function(){var o=this;e("header",o).after(e('<div class="loader"></div>').show()),wp.ajax.send("wphr-hr-emp-get",{data:{id:a,_wpnonce:wpHr.nonce},success:function(n){var a=wp.template("wphr-new-employee")(n);e(".content",o).html(a),e(".loader",o).remove(),t.initDateField(),e("li[data-selected]",o).each(function(){var t=e(this),o=t.data("selected");""!==o&&t.find("select").val(o).trigger("change")}),e('#work_reporting_to option[value="'+n.id+'"]',o).attr("disabled","disabled")}})},onSubmit:function(e){e.disableButton(),wp.ajax.send({data:this.serialize(),success:function(o){t.employee.reload(),e.enableButton(),e.closeModal()},error:function(t){e.enableButton(),e.showError(t)}})}})},error:function(e){alert(e)}})},addNote:function(o){o.preventDefault();var n=e(this),a=n.find("input[type=submit]");a.attr("disabled","disabled"),n.find(".wphr-note-loader").show(),wp.ajax.send({data:n.serializeObject(),success:function(){e.get(window.location.href,function(o){e("ul.notes-list li").length<0?e("ul.notes-list").prepend(e(o).find("ul.notes-list").after()):e("ul.notes-list").prepend(e(o).find("ul.notes-list li").first()),e("ul.notes-list li").length>10&&e("ul.notes-list li").last().remove(),t.employee.showLoadMoreBtn(),n.find(".wphr-note-loader").hide(),n.find("textarea").val(""),a.removeAttr("disabled")})},error:function(){a.removeAttr("disabled"),n.find(".wphr-note-loader").hide()}})},showLoadMoreBtn:function(){e("ul.notes-list li").length>=10?e(".wpwphr-load-more-btn").show():e(".wpwphr-load-more-btn").hide()},loadNotes:function(t){t.preventDefault();var o=e(this),n={action:"wphr-load-more-notes",user_id:o.data("user_id"),total_no:o.data("total_no"),offset_no:o.data("offset_no")};o.closest("p").append('<span class="wphr-loader" style="margin:4px 0px 0px 10px"></span>').find(".wphr-loader").show(),o.attr("disabled",!0),wp.ajax.send({data:n,success:function(t){o.data("offset_no",parseInt(n.total_no)+parseInt(n.offset_no)),e(t.content).appendTo(o.closest(".note-tab-wrap").find("ul.notes-list")).hide().fadeIn(),o.removeAttr("disabled"),e(".wphr-loader").remove()},error:function(e){alert(e)}})},deleteNote:function(o){if(o.preventDefault(),confirm(wpHr.delConfirmEmployeeNote)){var n=e(this),a={action:"wphr-delete-employee-note",note_id:n.data("note_id"),_wpnonce:wpHr.nonce};wp.ajax.send({data:a,success:function(o){n.closest("li").fadeOut(400,function(){e(this).remove(),t.employee.showLoadMoreBtn()})},error:function(e){alert(e)}})}},updatePerformance:function(o){void 0!==o&&o.preventDefault();var n=e(this);e.wphrPopup({title:n.data("title"),button:wpHr.popup.update_status,id:"wphr-hr-update-performance",content:"",extraClass:"smaller",onReady:function(){var o=wp.template(n.data("template"))(window.wpHrCurrentEmployee);e(".content",this).html(o),t.initDateField(),t.employee.select2Action("wphr-hrm-select2"),e(".row[data-selected]",this).each(function(){var t=e(this),o=t.data("selected");""!==o&&t.find("select").val(o)})},onSubmit:function(e){wp.ajax.send({data:this.serializeObject(),success:function(){t.reloadPage(),e.closeModal()},error:function(t){e.enableButton(),e.showError(t)}})}})},removePerformance:function(o){o.preventDefault(),confirm(wpHr.confirm)&&wp.ajax.send({data:{action:"wphr-hr-emp-delete-performance",id:e(this).data("id"),_wpnonce:wpHr.nonce},success:function(){t.reloadPage()}})},terminateEmployee:function(o){void 0!==o&&o.preventDefault();var n=e(this);if(n.data("data"))var a=n.data("data");else a=window.wpHrCurrentEmployee;e.wphrPopup({title:n.data("title"),button:wpHr.popup.terminate,id:"wphr-hr-employee-terminate",content:"",extraClass:"smaller",onReady:function(){var o=wp.template(n.data("template"))(a);e(".content",this).html(o),t.initDateField(),e(".row[data-selected]",this).each(function(){var t=e(this),o=t.data("selected");""!==o&&t.find("select").val(o)}),t.employee.select2Action("wphr-hrm-select2")},onSubmit:function(e){wp.ajax.send({data:this.serializeObject(),success:function(){t.reloadPage(),e.closeModal()},error:function(t){e.enableButton(),e.showError(t)}})}})},activateEmployee:function(o){o.preventDefault(),confirm(wpHr.confirm)&&wp.ajax.send({data:{action:"wphr-hr-emp-activate",id:e(this).data("id"),_wpnonce:wpHr.nonce},success:function(){t.reloadPage()}})},changeEmployeeStatus:function(o){o.preventDefault();var n=(p=e(this)).closest("form"),a=n.find("select#wphr-hr-employee-status-option"),r=a.val(),i=a.attr("data-selected");if("terminated"==r)r!=i?e.wphrPopup({title:p.data("title"),button:wpHr.popup.terminate,id:"wphr-hr-employee-terminate",content:"",extraClass:"smaller",onReady:function(){var o=wp.template("wphr-employment-terminate")({});e(".content",this).html(o),t.initDateField(),t.employee.select2Action("wphr-hrm-select2")},onSubmit:function(e){wp.ajax.send({data:this.serializeObject(),success:function(){t.reloadPage(),e.closeModal()},error:function(t){e.enableButton(),e.showError(t)}})}}):alert(wpHr.popup.already_terminate);else if("active"==r)if(r!=i){var p=e(this);e.wphrPopup({title:wpHr.popup.employment_status,button:wpHr.popup.update_status,id:"wphr-hr-update-job-status",content:"",extraClass:"smaller",onReady:function(){var o=wp.template("wphr-employment-status")(window.wpHrCurrentEmployee);e(".content",this).html(o),t.initDateField()},onSubmit:function(e){wp.ajax.send({data:this.serializeObject(),success:function(){e.closeModal(),n.submit()},error:function(t){e.enableButton(),e.showError(t)}})}})}else alert(wpHr.popup.already_active);else n.submit()},ressend_welcome_email:function(t){t.preventDefault();var o={user_id:e(this).data("user_id"),_wpnonce:e("#_wpnonce").val()};if(void 0!==e(this).attr("disabled")&&!1!==e(this).attr("disabled"))return!1;e(this).parent(".resend_email").find("span.spinner").addClass("active"),e(this).attr("disabled","disabled");var n=e(this).data("success"),a=e(this);wp.ajax.send("wphr-hr-employee-resend-email",{data:o,success:function(t){e(".wphr-hr-employees table.wp-list-table .resend_email span.spinner").removeClass("active"),1==t?e(a).html(n):e(a).removeAttr("disabled")}})}}};e(function(){t.initialize()})}(jQuery);