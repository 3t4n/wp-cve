!function($){function Zara4_MediaPage_AttachmentModal(){$("body").on("DOMNodeInserted",function(e){var attachmentDetails,target=$(e.target);if(target.hasClass("attachment-details"))return attachmentDetails=$(target),void Zara4_MediaPage_AttachmentModal.createButtons(attachmentDetails);for(var children=target.children(),i=0;i<children.length;i++){var child=$(children[i]);child.hasClass("media-modal")&&(attachmentDetails=$(child).find(".attachment-details"),Zara4_MediaPage_AttachmentModal.createButtons(attachmentDetails))}})}Zara4_MediaPage_AttachmentModal.prototype.constructor=Zara4_MediaPage_AttachmentModal,Zara4_MediaPage_AttachmentModal.createButtons=function(attachmentDetails){var attachmentId=attachmentDetails.data("id"),attachmentInfo=($(attachmentDetails).find(".attachment-actions"),$(attachmentDetails).find(".attachment-info")),details=attachmentInfo.find(".details");$('<div class="compression-wrapper"><div class="label">Zara 4 Compression</div><div class="content"><div class="zara-4 size-column" id="zara4-optimise-wrapper-'+attachmentId+'" data-id="'+attachmentId+'"><div class="loading-wrapper hidden"><img src="/wp-content/plugins/zara-4/img/loading.gif"> Please wait</div><div class="restore-original-wrapper hidden"><div class="compressed-size"></div><div>Saved <span class="percentage-saving"></span>%</div><div class="zara-4 compression-info"><span class="zara-4 a">Advanced Compression</span></div><div class="mt-10 zara-4 original-image-group"><div><span data-id="'+attachmentId+'" class="zara-4 link restore-original">Restore original</span></div><div><span data-id="'+attachmentId+'" class="delete zara-4 link delete-original">Delete original</span></div></div></div><div class="zara-4 optimise-wrapper hidden"><div class="btn-group"><button id="zara4-optimise-btn-'+attachmentId+'" type="button" data-id="'+attachmentId+'" class="zara-4 optimise button button-primary">Compress Now</button><button class="btn button dropdown-toggle button-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu"><li><span class="zara-4 a compression-info">Advanced compress</span></li><li class="zara-4 exclude-from-bulk-compress"><span>Exclude from bulk compress</span></li><li class="zara-4 include-in-bulk-compress hidden"><span>Include in bulk compress</span></li></ul></div><div class="excluded_from_bulk_compression_label_wrapper hidden"><div style="margin-top: 10px">- Excluded from compression</div></div></div></div></div><div style="clear: both"></div></div>').insertAfter(details),Zara4_MediaPage_AttachmentModal.refreshDisplay(attachmentDetails)},Zara4_MediaPage_AttachmentModal.refreshDisplay=function(attachmentDetails){var attachmentId=attachmentDetails.data("id"),attachmentInfo=$(attachmentDetails).find(".attachment-info");attachmentInfo.find(".compression-wrapper");$.fn.Zara4_Ajax.compressionInfo(attachmentId,function(attachmentId,response){var excludedFromBulk=response["excluded-from-bulk"];response=response.image;var compressed=response.compressed,hasBackup=response["has-backup"];if(compressed){var compressedFileSize=$.fn.Zara4_Util.formatBytes(response["compressed-file-size"]),percentageSaving=parseFloat(response["percentage-saving"]).toFixed(1);hasBackup?Zara4_MediaPage_AttachmentModal.showOriginalImageGroup(attachmentId):Zara4_MediaPage_AttachmentModal.hideOriginalImageGroup(attachmentId),Zara4_MediaPage_AttachmentModal.setRestoreOriginalData(attachmentId,compressedFileSize,percentageSaving),Zara4_MediaPage_AttachmentModal.setDisplayForIdAsShowRestoreOriginal(attachmentId)}else Zara4_MediaPage_AttachmentModal.setDisplayForIdAsShowOptimise(attachmentId),excludedFromBulk?Zara4_MediaPage_AttachmentModal.setAsIncludeInBulkCompression(attachmentId):Zara4_MediaPage_AttachmentModal.setAsExcludeFromBulkCompression(attachmentId)},function(){})},Zara4_MediaPage_AttachmentModal.setDisplayForIdAsProcessing=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!=wrapper.length){var optimiseWrapper=wrapper.find(".optimise-wrapper"),restoreOriginalWrapper=wrapper.find(".restore-original-wrapper"),loadingWrapper=wrapper.find(".loading-wrapper");restoreOriginalWrapper.slideUp(200),optimiseWrapper.slideUp(200),loadingWrapper.slideDown(200)}},Zara4_MediaPage_AttachmentModal.setDisplayForIdAsShowOptimise=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!=wrapper.length){var optimiseWrapper=wrapper.find(".optimise-wrapper"),restoreOriginalWrapper=wrapper.find(".restore-original-wrapper"),loadingWrapper=wrapper.find(".loading-wrapper");loadingWrapper.slideUp(200),restoreOriginalWrapper.slideUp(200),optimiseWrapper.slideDown(200)}},Zara4_MediaPage_AttachmentModal.setDisplayForIdAsShowRestoreOriginal=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!=wrapper.length){var optimiseWrapper=wrapper.find(".optimise-wrapper"),restoreOriginalWrapper=wrapper.find(".restore-original-wrapper"),loadingWrapper=wrapper.find(".loading-wrapper");optimiseWrapper.slideUp(200),loadingWrapper.slideUp(200),restoreOriginalWrapper.slideDown(200)}},Zara4_MediaPage_AttachmentModal.setRestoreOriginalData=function(imageId,bytesCompressed,percentageSaving){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!=wrapper.length){var restoreOriginalWrapper=wrapper.find(".restore-original-wrapper");restoreOriginalWrapper.find(".compressed-size").html(bytesCompressed),restoreOriginalWrapper.find(".percentage-saving").html(percentageSaving)}},Zara4_MediaPage_AttachmentModal.hideOriginalImageGroup=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!=wrapper.length){var originalImageGroup=wrapper.find(".original-image-group");originalImageGroup.slideUp(200)}},Zara4_MediaPage_AttachmentModal.showOriginalImageGroup=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!=wrapper.length){var originalImageGroup=wrapper.find(".original-image-group");originalImageGroup.slideDown(200)}},Zara4_MediaPage_AttachmentModal.setAsExcludeFromBulkCompression=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId),dropdownMenu=wrapper.find(".dropdown-menu"),excludeFromBulkCompress=dropdownMenu.find(".exclude-from-bulk-compress"),includeInBulkCompress=dropdownMenu.find(".include-in-bulk-compress");includeInBulkCompress.addClass("hidden"),excludeFromBulkCompress.removeClass("hidden");var buttonGroup=wrapper.find(".btn-group"),buttons=buttonGroup.find(".button");buttons.addClass("button-primary"),wrapper.find(".excluded_from_bulk_compression_label_wrapper").slideUp(200)},Zara4_MediaPage_AttachmentModal.setAsIncludeInBulkCompression=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId),dropdownMenu=wrapper.find(".dropdown-menu"),excludeFromBulkCompress=dropdownMenu.find(".exclude-from-bulk-compress"),includeInBulkCompress=dropdownMenu.find(".include-in-bulk-compress");excludeFromBulkCompress.addClass("hidden"),includeInBulkCompress.removeClass("hidden");var buttonGroup=wrapper.find(".btn-group"),buttons=buttonGroup.find(".button");buttons.removeClass("button-primary"),wrapper.find(".excluded_from_bulk_compression_label_wrapper").slideDown(200)},$.fn.Zara4_MediaPage_AttachmentModal=Zara4_MediaPage_AttachmentModal}(jQuery),function($){function Zara4_MediaPage_BulkCompression(){jQuery("<option>").val("zara4_bulk_compress").text("Compress with Zara 4").appendTo('select[name="action"]'),jQuery("<option>").val("zara4_bulk_compress").text("Compress with Zara 4").appendTo('select[name="action2"]'),$("body").append('<div id="zara-4-bulk-modal" class="zara-4" style="display: none"><h2>Zara 4 Bulk Compress</h2><div class="alert alert-boxed alert-info"><p>The <b class="number-of-images"></b> images below will be optimised and compressed by Zara 4.</p></div><table style="width:100%; margin-top:25px" id="zara4-optimise-modal-table"><thead><tr><th style="width:40%">Image Name</th><th style="width:20%">Original Size</th><th style="width:40%">Zara 4 Size</th></tr></thead><tbody id="zara4-optimise-modal-table-body"></tbody></table><hr/><div class="text-center"><a href="#" id="zara4-optimise-modal-btn-optimise" class="button button-primary" style="margin-right: 5px">Compress all</a><a href="#" id="zara4-optimise-modal-btn-close" class="button button-default" rel="modal:close">Close</a></div></div>'),$("body").append('<div id="zara-4-bulk-modal-no-images" class="zara-4" style="display: none"><h2>Zara 4 - Bulk Compress</h2><div class="alert alert-boxed alert-warning"><p><b>No images to optimise</b> - No images selected</p></div><hr/><div class="text-center"><a href="#" class="button button-default" rel="modal:close">Close</a></div></div>'),$("#posts-filter").submit(function(e){var action=null,imageIds=[],formData=$(this).serializeArray();if(formData.forEach(function(obj){"media[]"==obj.name&&imageIds.push(obj.value),"action"!=obj.name&&"action2"!=obj.name||obj.value==-1||(action=obj.value)}),"zara4_bulk_compress"==action){if(e.preventDefault(),0==imageIds.length)return void Zara4_MediaPage_BulkCompression.showBulkModalNoImages();$("#zara4-optimise-modal-table-body").children().remove(),$("#zara4-optimise-modal-table").data("image-ids",imageIds),$("#zara-4-bulk-modal .number-of-images").html(imageIds.length),imageIds.forEach(function(imageId){var optimiseBtn=$("#zara4-optimise-btn-"+imageId),originalSize=$("#zara4-original-size-"+imageId).html(),tableRow=optimiseBtn.closest("tr"),filename=tableRow.find(".filename").html();$("#zara4-optimise-modal-table-body").append("<tr id='zara4-modal-table-"+imageId+"'><td class='filename'>"+filename+"</td><td class='original-size'>"+originalSize+"</td><td class='zara4-size'><div class='queued-wrapper'>Waiting to start...</div><div class='already-optimised-wrapper hidden'>Skipped - Already optimised</div><div class='loading-wrapper hidden'><img src='"+LOADING_URL+"'/> Please wait</div><div class='completed-wrapper hidden'><span class='compressed-size'></span> - <span>Saved <span class='percentage-saving'></span>%</span></div></td></tr>")}),Zara4_MediaPage_BulkCompression.showBulkModal()}}),$("#zara4-optimise-modal-btn-optimise").click(function(e){e.preventDefault();var imageIds=$("#zara4-optimise-modal-table").data("image-ids"),numberOfImages=imageIds.length,numberOfImagesStarted=0,numberOfImagesCompleted=0,semaphore=0,asynchronousLimit=2;Zara4_MediaPage_BulkCompression.lockBulkModal();for(var dispatchFunction=function(imageId){numberOfImagesStarted++;var hasNextImage=numberOfImagesStarted<=numberOfImages,dispatchIsNotLocked=semaphore<=asynchronousLimit;if(hasNextImage&&dispatchIsNotLocked){semaphore++;var completedCallback=function(){return numberOfImagesCompleted++,semaphore--,numberOfImagesCompleted===numberOfImages?void completionFunction():void(numberOfImagesStarted<numberOfImages&&dispatchFunction(imageIds[numberOfImagesStarted]))};Zara4_MediaPage_BulkCompression.hideBulkModalQueued(imageId),Zara4_MediaPage_BulkCompression.hideBulkModalAlreadyOptimised(imageId),Zara4_MediaPage_BulkCompression.hideBulkModalCompleted(imageId),Zara4_MediaPage_BulkCompression.showBulkModalLoading(imageId),$.fn.Zara4_MediaPage_MediaColumn.compress(imageId,function(id,bytesCompressed,formattedBytesCompressed,percentageSaving,alreadyOptimised){Zara4_MediaPage_BulkCompression.setBulkModalZara4Size(id,formattedBytesCompressed),Zara4_MediaPage_BulkCompression.setBulkModalPercentageSaving(id,percentageSaving),Zara4_MediaPage_BulkCompression.hideBulkModalLoading(id),alreadyOptimised?Zara4_MediaPage_BulkCompression.showBulkModalAlreadyOptimised(id):Zara4_MediaPage_BulkCompression.showBulkModalCompleted(id),completedCallback()},function(){Zara4_MediaPage_BulkCompression.hideBulkModalLoading(id),Zara4_MediaPage_BulkCompression.showBulkModalCompleted(id),completedCallback()})}},completionFunction=function(){Zara4_MediaPage_BulkCompression.unlockBulkModal()},initialDispatchCount=Math.min(asynchronousLimit,numberOfImages),i=0;i<initialDispatchCount;i++)dispatchFunction(imageIds[i])})}Zara4_MediaPage_BulkCompression.prototype.constructor=Zara4_MediaPage_BulkCompression,Zara4_MediaPage_BulkCompression.showBulkModal=function(){$("#zara-4-bulk-modal").modal({escapeClose:!1,clickClose:!1,showClose:!1})},Zara4_MediaPage_BulkCompression.showBulkModalNoImages=function(){$("#zara-4-bulk-modal-no-images").modal()},Zara4_MediaPage_BulkCompression.lockBulkModal=function(){$("#zara4-optimise-modal-btn-optimise").attr("disabled","disabled"),$("#zara4-optimise-modal-btn-close").attr("disabled","disabled")},Zara4_MediaPage_BulkCompression.unlockBulkModal=function(){$("#zara4-optimise-modal-btn-optimise").removeAttr("disabled"),$("#zara4-optimise-modal-btn-close").removeAttr("disabled")},Zara4_MediaPage_BulkCompression.setBulkModalZara4Size=function(imageId,zara4Size){$("#zara4-modal-table-"+imageId+" .compressed-size").html(zara4Size)},Zara4_MediaPage_BulkCompression.setBulkModalPercentageSaving=function(imageId,percentageSaving){$("#zara4-modal-table-"+imageId+" .percentage-saving").html(percentageSaving)},Zara4_MediaPage_BulkCompression.showBulkModalQueued=function(imageId){$("#zara4-modal-table-"+imageId+" .queued-wrapper").slideDown(200)},Zara4_MediaPage_BulkCompression.hideBulkModalQueued=function(imageId){$("#zara4-modal-table-"+imageId+" .queued-wrapper").slideUp(200)},Zara4_MediaPage_BulkCompression.showBulkModalLoading=function(imageId){$("#zara4-modal-table-"+imageId+" .loading-wrapper").slideDown(200)},Zara4_MediaPage_BulkCompression.hideBulkModalLoading=function(imageId){$("#zara4-modal-table-"+imageId+" .loading-wrapper").slideUp(200)},Zara4_MediaPage_BulkCompression.showBulkModalAlreadyOptimised=function(imageId){$("#zara4-modal-table-"+imageId+" .already-optimised-wrapper").slideDown(200)},Zara4_MediaPage_BulkCompression.hideBulkModalAlreadyOptimised=function(imageId){$("#zara4-modal-table-"+imageId+" .already-optimised-wrapper").slideUp(200)},Zara4_MediaPage_BulkCompression.showBulkModalCompleted=function(imageId){$("#zara4-modal-table-"+imageId+" .completed-wrapper").slideDown(200)},Zara4_MediaPage_BulkCompression.hideBulkModalCompleted=function(imageId){$("#zara4-modal-table-"+imageId+" .completed-wrapper").slideUp(200)},$.fn.Zara4_MediaPage_BulkCompression=Zara4_MediaPage_BulkCompression}(jQuery),function($){function Zara4_MediaPage_CompressionInfoModal(){$("body").append('<div id="zara-4-compression-info-modal" class="zara-4" style="display: none;"><h2>Zara 4 - Compression Info</h2><hr/><div class="table-wrapper"><table class="table table-striped"><thead><tr><th>Size</th><th>Original Size</th><th>Compressed Size</th></tr></thead><tbody></tbody></table></div><div class="text-center mt-15">  <a href="#" class="button" rel="modal:close">Close</a></div></div>'),$(document).on("click",".zara-4.compression-info",function(){var id=$(this).closest(".zara-4.size-column").data("id");$("#zara-4-compression-info-modal").data("id",id),Zara4_MediaPage_CompressionInfoModal.show(id)}),$("#zara-4-compression-info-modal").on($.modal.OPEN,function(event,modal){var id=$("#zara-4-compression-info-modal").data("id");Zara4_MediaPage_CompressionInfoModal.refresh(id)}),$(document).on("click",".zara-4.specific-size-compress",function(){var tableRow=$(this).closest("tr"),id=tableRow.data("id"),size=tableRow.data("size"),loadingWrapper=tableRow.find(".loading-wrapper"),restoreOriginalWrapper=tableRow.find(".restore-original-wrapper"),compressWrapper=tableRow.find(".compress-wrapper"),compressedSizeElement=tableRow.find(".compressed-size"),percentageSavingElement=tableRow.find(".percentage-saving"),backupImageGroup=tableRow.find(".backup-image-group");loadingWrapper.slideDown(),restoreOriginalWrapper.slideUp(),compressWrapper.slideUp(),$.fn.Zara4_Ajax.compressImageSizes(id,[size],function(imageId,sizes,data){var sizeData=data[size],compressedSize=sizeData["compressed-file-size"],percentageSaving=sizeData["percentage-saving"],hasBackup="undefined"==typeof sizeData["has-backup"]||sizeData["has-backup"];hasBackup?backupImageGroup.slideDown(0):backupImageGroup.slideUp(0),compressedSizeElement.html($.fn.Zara4_Util.formatBytes(compressedSize)),percentageSavingElement.html(parseFloat(percentageSaving).toFixed(1)),loadingWrapper.slideUp(),restoreOriginalWrapper.slideDown(),$.fn.Zara4_MediaPage_MediaColumn.refreshDisplay(id)},function(error){"quota_limit"===error&&$.fn.Zara4_MediaPage_OutOfQuotaModal.showOutOfQuotaModal()})}),$(document).on("click",".zara-4.specific-size-restore-backup",function(){var tableRow=$(this).closest("tr"),id=tableRow.data("id"),size=tableRow.data("size"),loadingWrapper=tableRow.find(".loading-wrapper"),restoreOriginalWrapper=tableRow.find(".restore-original-wrapper"),compressWrapper=tableRow.find(".compress-wrapper");loadingWrapper.slideDown(),restoreOriginalWrapper.slideUp(),compressWrapper.slideUp(),$.fn.Zara4_Ajax.restoreBackupImageSizes(id,[size],function(){loadingWrapper.slideUp(),compressWrapper.slideDown(),$.fn.Zara4_MediaPage_MediaColumn.refreshDisplay(id)},function(){})}),$(document).on("click",".zara-4.specific-size-delete-backup",function(){var tableRow=$(this).closest("tr"),id=tableRow.data("id"),size=tableRow.data("size"),deleteWrapper=tableRow.find(".backup-image-group");deleteWrapper.slideUp(),$.fn.Zara4_Ajax.deleteBackupImageSizes(id,[size],function(){$.fn.Zara4_MediaPage_MediaColumn.refreshDisplay(id)},function(){})})}Zara4_MediaPage_CompressionInfoModal.prototype.constructor=Zara4_MediaPage_CompressionInfoModal,Zara4_MediaPage_CompressionInfoModal.show=function(id){$("#zara-4-compression-info-modal").modal({escapeClose:!1,clickClose:!1,showClose:!1})},Zara4_MediaPage_CompressionInfoModal.addCompressionInfoRow=function(id,imageSize,image){var compressed=image.compressed,originalFileSize=image["original-file-size"],compressedFileSize=image["compressed-file-size"],percentageSaving=image["percentage-saving"]?image["percentage-saving"]:0,hasBackup="undefined"==typeof image["has-backup"]||image["has-backup"],imageSizeColumn=$("<td>"+imageSize+"</td>"),originalSizeColumn=$('<td data-bytes="'+originalFileSize+'">'+$.fn.Zara4_Util.formatBytes(originalFileSize)+"</td>"),compressedColumn=$('<td>  <div class="restore-original-wrapper hidden">    <div class="compressed-size">'+$.fn.Zara4_Util.formatBytes(compressedFileSize)+'</div>    <div>Saved <span class="percentage-saving">'+parseFloat(percentageSaving).toFixed(1)+'</span>%</div>    <div class="mt-5 zara-4 backup-image-group">      <div><span class="zara-4 link specific-size-restore-backup">Restore original</span></div>      <div><span class="delete zara-4 link specific-size-delete-backup">Delete original</span></div>    </div>  </div>  <div class="loading-wrapper hidden"><img src="'+LOADING_URL+'"> Please wait</div>  <div class="zara-4 compress-wrapper hidden">    <button type="button" class="zara-4 specific-size-compress button button-primary">Compress Now</button>  </div></td>'),row=$('<tr data-id="'+id+'" data-size="'+imageSize+'"></tr>');row.append(imageSizeColumn),row.append(originalSizeColumn),row.append(compressedColumn);var compressWrapper=row.find(".compress-wrapper"),restoreOriginalWrapper=row.find(".restore-original-wrapper"),backupImageGroup=row.find(".backup-image-group");compressed?restoreOriginalWrapper.removeClass("hidden"):compressWrapper.removeClass("hidden"),hasBackup||backupImageGroup.addClass("hidden"),$("#zara-4-compression-info-modal table tbody").append(row)},Zara4_MediaPage_CompressionInfoModal.refresh=function(id){var tableWrapper=$("#zara-4-compression-info-modal .table-wrapper");tableWrapper.empty(),tableWrapper.append('<table class="table table-striped"><thead><tr><th>Size</th><th>Original Size</th><th>Compressed Size</th></tr></thead><tbody></tbody></table>'),$.fn.Zara4_Ajax.compressionInfo(id,function(imageId,response){for(var images=response.images,sizes=Object.keys(images),i=0;i<sizes.length;i++){var size=sizes[i],image=images[size];Zara4_MediaPage_CompressionInfoModal.addCompressionInfoRow(id,size,image)}$("#zara-4-compression-info-modal table").tablesorter({sortList:[[1,1]],headers:{0:{sorter:!1},2:{sorter:!1}},textExtraction:function(node){return $(node).data("bytes")}})},function(){})},$.fn.Zara4_MediaPage_CompressionInfoModal=Zara4_MediaPage_CompressionInfoModal}(jQuery),function($){function Zara4_MediaPage_MediaColumn(){$(document).on("click",".zara-4.optimise",function(){Zara4_MediaPage_MediaColumn.compress($(this).data("id"))}),$(document).on("click",".zara-4.restore-original",function(){Zara4_MediaPage_MediaColumn.restore_backup($(this).data("id"))}),$(document).on("click",".zara-4.delete-original",function(){Zara4_MediaPage_MediaColumn.delete_backup($(this).data("id"))}),$(document).on("click",".zara-4.exclude-from-bulk-compress",function(){var id=$(this).closest(".btn-group").find(".zara-4.optimise").data("id");$.fn.Zara4_Ajax.excludeFromBulkCompression(id,function(){Zara4_MediaPage_MediaColumn.setAsIncludeInBulkCompression(id)},function(){})}),$(document).on("click",".zara-4.include-in-bulk-compress",function(){var id=$(this).closest(".btn-group").find(".zara-4.optimise").data("id");$.fn.Zara4_Ajax.includeInBulkCompression(id,function(){Zara4_MediaPage_MediaColumn.setAsExcludeFromBulkCompression(id)},function(){})})}Zara4_MediaPage_MediaColumn.prototype.constructor=Zara4_MediaPage_MediaColumn,Zara4_MediaPage_MediaColumn.refreshDisplay=function(imageId){$.fn.Zara4_Ajax.compressionInfo(imageId,function(id,response){response=response.image;var compressed=response.compressed,hasBackup=response["has-backup"];if(compressed){var compressedFileSize=$.fn.Zara4_Util.formatBytes(response["compressed-file-size"]),percentageSaving=parseFloat(response["percentage-saving"]).toFixed(1);hasBackup?Zara4_MediaPage_MediaColumn.showOriginalImageGroup(imageId):Zara4_MediaPage_MediaColumn.hideOriginalImageGroup(imageId),Zara4_MediaPage_MediaColumn.setRestoreOriginalData(imageId,compressedFileSize,percentageSaving),Zara4_MediaPage_MediaColumn.setDisplayForIdAsShowRestoreOriginal(imageId)}else Zara4_MediaPage_MediaColumn.setDisplayForIdAsShowOptimise(imageId)},function(){})},Zara4_MediaPage_MediaColumn.setDisplayForIdAsProcessing=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!==wrapper.length){var optimiseWrapper=wrapper.find(".optimise-wrapper"),restoreOriginalWrapper=wrapper.find(".restore-original-wrapper"),loadingWrapper=wrapper.find(".loading-wrapper");restoreOriginalWrapper.slideUp(200),optimiseWrapper.slideUp(200),loadingWrapper.slideDown(200)}},Zara4_MediaPage_MediaColumn.setDisplayForIdAsShowOptimise=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!==wrapper.length){var optimiseWrapper=wrapper.find(".optimise-wrapper"),restoreOriginalWrapper=wrapper.find(".restore-original-wrapper"),loadingWrapper=wrapper.find(".loading-wrapper");loadingWrapper.slideUp(200),restoreOriginalWrapper.slideUp(200),optimiseWrapper.slideDown(200)}},Zara4_MediaPage_MediaColumn.setDisplayForIdAsShowRestoreOriginal=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!==wrapper.length){var optimiseWrapper=wrapper.find(".optimise-wrapper"),restoreOriginalWrapper=wrapper.find(".restore-original-wrapper"),loadingWrapper=wrapper.find(".loading-wrapper");optimiseWrapper.slideUp(200),loadingWrapper.slideUp(200),restoreOriginalWrapper.slideDown(200)}},Zara4_MediaPage_MediaColumn.setRestoreOriginalData=function(imageId,bytesCompressed,percentageSaving){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!==wrapper.length){var restoreOriginalWrapper=wrapper.find(".restore-original-wrapper");restoreOriginalWrapper.find(".compressed-size").html(bytesCompressed),restoreOriginalWrapper.find(".percentage-saving").html(percentageSaving)}},Zara4_MediaPage_MediaColumn.hideOriginalImageGroup=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!==wrapper.length){var originalImageGroup=wrapper.find(".original-image-group");originalImageGroup.slideUp(200)}},Zara4_MediaPage_MediaColumn.showOriginalImageGroup=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId);if(0!==wrapper.length){var originalImageGroup=wrapper.find(".original-image-group");originalImageGroup.slideDown(200)}},Zara4_MediaPage_MediaColumn.setAsExcludeFromBulkCompression=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId),dropdownMenu=wrapper.find(".dropdown-menu"),excludeFromBulkCompress=dropdownMenu.find(".exclude-from-bulk-compress"),includeInBulkCompress=dropdownMenu.find(".include-in-bulk-compress");includeInBulkCompress.addClass("hidden"),excludeFromBulkCompress.removeClass("hidden");var buttonGroup=wrapper.find(".btn-group"),buttons=buttonGroup.find(".button");buttons.addClass("button-primary"),wrapper.find(".excluded_from_bulk_compression_label_wrapper").slideUp(200)},Zara4_MediaPage_MediaColumn.setAsIncludeInBulkCompression=function(imageId){var wrapper=$("#zara4-optimise-wrapper-"+imageId),dropdownMenu=wrapper.find(".dropdown-menu"),excludeFromBulkCompress=dropdownMenu.find(".exclude-from-bulk-compress"),includeInBulkCompress=dropdownMenu.find(".include-in-bulk-compress");excludeFromBulkCompress.addClass("hidden"),includeInBulkCompress.removeClass("hidden");var buttonGroup=wrapper.find(".btn-group"),buttons=buttonGroup.find(".button");buttons.removeClass("button-primary"),wrapper.find(".excluded_from_bulk_compression_label_wrapper").slideDown(200)},Zara4_MediaPage_MediaColumn.compress=function(id,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},Zara4_MediaPage_MediaColumn.setDisplayForIdAsProcessing(id),$.fn.Zara4_Ajax.compressImage(id,function(data){var hasBackup=data["has-backup"],bytesCompressed=data["compressed-file-size"],formattedBytesCompressed=$.fn.Zara4_Util.formatBytes(bytesCompressed),percentageSaving=Math.round(10*data["percentage-saving"])/10,alreadyOptimised="already-optimised"===data.status;Zara4_MediaPage_MediaColumn.setRestoreOriginalData(id,formattedBytesCompressed,percentageSaving),Zara4_MediaPage_MediaColumn.setDisplayForIdAsShowRestoreOriginal(id),hasBackup?Zara4_MediaPage_MediaColumn.showOriginalImageGroup(id):Zara4_MediaPage_MediaColumn.hideOriginalImageGroup(id),successCallback(id,bytesCompressed,formattedBytesCompressed,percentageSaving,alreadyOptimised)},function(error){"quota_limit"===error&&$.fn.Zara4_MediaPage_OutOfQuotaModal.showOutOfQuotaModal(),Zara4_MediaPage_MediaColumn.setDisplayForIdAsShowOptimise(id),failureCallback(error)})},Zara4_MediaPage_MediaColumn.restore_backup=function(id,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},Zara4_MediaPage_MediaColumn.setDisplayForIdAsProcessing(id),$.fn.Zara4_Ajax.restoreOriginalFromId(id,function(){Zara4_MediaPage_MediaColumn.setDisplayForIdAsShowOptimise(id),successCallback(id)},function(){failureCallback()})},Zara4_MediaPage_MediaColumn.delete_backup=function(id,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},Zara4_MediaPage_MediaColumn.setDisplayForIdAsProcessing(id),$.fn.Zara4_Ajax.deleteOriginalFromId(id,function(){Zara4_MediaPage_MediaColumn.hideOriginalImageGroup(id),Zara4_MediaPage_MediaColumn.setDisplayForIdAsShowRestoreOriginal(id),successCallback(id)},function(id){failureCallback(id)})},$.fn.Zara4_MediaPage_MediaColumn=Zara4_MediaPage_MediaColumn}(jQuery),function($){function Zara4_MediaPage_OutOfQuotaModal(){$("body").append('<div id="zara-4-quota-error-modal" class="zara-4" style="display: none; width: 400px"><h2>Zara 4 - Out of quota</h2><hr/><div class="alert alert-boxed alert-warning"><p>You\'ve run out of quota - <a href="https://zara4.com/account">upgrade</a> to continue</p></div><div class="text-center mt-15"><a href="https://zara4.com/account" class="button button-primary">Upgrade</a>&nbsp;&nbsp;<a href="#" class="button" rel="modal:close">Close</a></div></div>')}Zara4_MediaPage_OutOfQuotaModal.prototype.constructor=Zara4_MediaPage_OutOfQuotaModal,Zara4_MediaPage_OutOfQuotaModal.showOutOfQuotaModal=function(){$("#zara-4-quota-error-modal").modal({escapeClose:!1,clickClose:!1,showClose:!1})},$.fn.Zara4_MediaPage_OutOfQuotaModal=Zara4_MediaPage_OutOfQuotaModal}(jQuery),function($){function Zara4_Modal_CompressAll(){$("body").append('<div id="'+Zara4_Modal_CompressAll.element_id+'" class="zara-4" style="display: none"><h2>Zara 4 - Compress All Images</h2><hr/><div class="text-center"><h3><span class="current-image-number"></span> of <span class="number-of-images"></span>&nbsp;&nbsp;&nbsp;&nbsp;(<span class="percentage-complete"></span>%)</h3></div><div class="progress progress-striped"><div class="progress-bar" style="width: 0"></div></div><div class="text-center"><div class="status-ready">Ready to start</div><div class="status-done hidden">Finished</div><div class="status-working hidden"><img alt="Loading" src="/wp-content/plugins/zara-4/img/loading.gif"/> Compressing, please wait</div></div><hr/><div class="text-center" style="margin-top: 15px"><div class="start-compression-btn-wrapper"><a href="#" class="start-compression-btn button button-primary">Start Compression</a> <a href="#" class="button button-default" rel="modal:close">Close</a></div><div class="hidden stop-compression-btn-wrapper"><a href="#" class="stop-compression-btn button">Stop</a></div><div class="hidden done-compression-btn-wrapper"><a href="#" class="button button-primary" rel="modal:close">Done</a></div></div></div>'),Zara4_Modal_CompressAll.stop=!1,Zara4_Modal_CompressAll.modal_element=$("#"+Zara4_Modal_CompressAll.element_id),Zara4_Modal_CompressAll.current_image_number_element=Zara4_Modal_CompressAll.modal_element.find(".current-image-number"),Zara4_Modal_CompressAll.number_of_images_element=Zara4_Modal_CompressAll.modal_element.find(".number-of-images"),Zara4_Modal_CompressAll.progress_bar_element=Zara4_Modal_CompressAll.modal_element.find(".progress-bar"),Zara4_Modal_CompressAll.percentage_complete_element=Zara4_Modal_CompressAll.modal_element.find(".percentage-complete"),Zara4_Modal_CompressAll.start_compression_btn_element=Zara4_Modal_CompressAll.modal_element.find(".start-compression-btn"),Zara4_Modal_CompressAll.stop_compression_btn_element=Zara4_Modal_CompressAll.modal_element.find(".stop-compression-btn"),Zara4_Modal_CompressAll.start_compression_btn_wrapper_element=Zara4_Modal_CompressAll.modal_element.find(".start-compression-btn-wrapper"),Zara4_Modal_CompressAll.stop_compression_btn_wrapper_element=Zara4_Modal_CompressAll.modal_element.find(".stop-compression-btn-wrapper"),Zara4_Modal_CompressAll.done_compression_btn_wrapper_element=Zara4_Modal_CompressAll.modal_element.find(".done-compression-btn-wrapper"),Zara4_Modal_CompressAll.status_ready_element=Zara4_Modal_CompressAll.modal_element.find(".status-ready"),Zara4_Modal_CompressAll.status_done_element=Zara4_Modal_CompressAll.modal_element.find(".status-done"),Zara4_Modal_CompressAll.status_working_element=Zara4_Modal_CompressAll.modal_element.find(".status-working"),Zara4_Modal_CompressAll.start_compression_btn_element.click(function(){Zara4_Modal_CompressAll.stop=!1,Zara4_Modal_CompressAll.hideCompressAllStartWrapper(),Zara4_Modal_CompressAll.showCompressAllStopWrapper(),Zara4_Modal_CompressAll.setCompressAllStatusWorking(),Zara4_Modal_CompressAll.compressNextImage()}),Zara4_Modal_CompressAll.stop_compression_btn_element.click(function(){Zara4_Modal_CompressAll.stop=!0,Zara4_Modal_CompressAll.hideCompressAllStopWrapper(),Zara4_Modal_CompressAll.showCompressAllStartWrapper(),Zara4_Modal_CompressAll.setCompressAllStatusReady()}),Zara4_Modal_CompressAll.modal_element.on("modal:after-close",function(){})}Zara4_Modal_CompressAll.prototype.constructor=Zara4_Modal_CompressAll,Zara4_Modal_CompressAll.element_id="zara-4_modal_compress-all",Zara4_Modal_CompressAll.show=function(){
$("#"+Zara4_Modal_CompressAll.element_id).modal({escapeClose:!1,clickClose:!1,showClose:!1})},Zara4_Modal_CompressAll.reset=function(){Zara4_Modal_CompressAll.currentImageIdIndex=0,Zara4_Modal_CompressAll.setProgress(0),Zara4_Modal_CompressAll.setProgressBarAsDefault(),Zara4_Modal_CompressAll.hideCompressAllDoneWrapper(),Zara4_Modal_CompressAll.hideCompressAllStopWrapper(),Zara4_Modal_CompressAll.showCompressAllStartWrapper()},Zara4_Modal_CompressAll.setImageCurrentImageNumber=function(currentImageNumber){Zara4_Modal_CompressAll.current_image_number_element.html(currentImageNumber)},Zara4_Modal_CompressAll.setNumberOfImages=function(numberOfImages){Zara4_Modal_CompressAll.number_of_images_element.html(numberOfImages)},Zara4_Modal_CompressAll.setProgress=function(progress){var percentage=100*progress;Zara4_Modal_CompressAll.progress_bar_element.css({width:percentage+"%"}),Zara4_Modal_CompressAll.percentage_complete_element.html(parseFloat(percentage).toFixed(1))},Zara4_Modal_CompressAll.setProgressBarAsDefault=function(){Zara4_Modal_CompressAll.progress_bar_element.removeClass("progress-bar-success").removeClass("progress-bar-danger").removeClass("progress-bar-warning")},Zara4_Modal_CompressAll.setProgressBarAsSuccess=function(){Zara4_Modal_CompressAll.progress_bar_element.addClass("progress-bar-success").removeClass("progress-bar-danger").removeClass("progress-bar-warning")},Zara4_Modal_CompressAll.setProgressBarAsWarning=function(){Zara4_Modal_CompressAll.progress_bar_element.addClass("progress-bar-warning").removeClass("progress-bar-success").removeClass("progress-bar-danger")},Zara4_Modal_CompressAll.setProgressBarAsDanger=function(){Zara4_Modal_CompressAll.progress_bar_element.addClass("progress-bar-danger").removeClass("progress-bar-success").removeClass("progress-bar-warning")},Zara4_Modal_CompressAll.showCompressAllStartWrapper=function(){Zara4_Modal_CompressAll.start_compression_btn_wrapper_element.slideDown(200)},Zara4_Modal_CompressAll.hideCompressAllStartWrapper=function(){Zara4_Modal_CompressAll.start_compression_btn_wrapper_element.slideUp(200)},Zara4_Modal_CompressAll.showCompressAllStopWrapper=function(){Zara4_Modal_CompressAll.stop_compression_btn_wrapper_element.slideDown(200)},Zara4_Modal_CompressAll.hideCompressAllStopWrapper=function(){Zara4_Modal_CompressAll.stop_compression_btn_wrapper_element.slideUp(200)},Zara4_Modal_CompressAll.showCompressAllDoneWrapper=function(){Zara4_Modal_CompressAll.done_compression_btn_wrapper_element.slideDown(200)},Zara4_Modal_CompressAll.hideCompressAllDoneWrapper=function(){Zara4_Modal_CompressAll.done_compression_btn_wrapper_element.slideUp(200)},Zara4_Modal_CompressAll.setCompressAllStatusWorking=function(){Zara4_Modal_CompressAll.status_ready_element.slideUp(200),Zara4_Modal_CompressAll.status_done_element.slideUp(200),Zara4_Modal_CompressAll.status_working_element.slideDown(200)},Zara4_Modal_CompressAll.setCompressAllStatusReady=function(){Zara4_Modal_CompressAll.status_working_element.slideUp(200),Zara4_Modal_CompressAll.status_done_element.slideUp(200),Zara4_Modal_CompressAll.status_ready_element.slideDown(200)},Zara4_Modal_CompressAll.setCompressAllStatusFinished=function(){Zara4_Modal_CompressAll.status_working_element.slideUp(200),Zara4_Modal_CompressAll.status_ready_element.slideUp(200),Zara4_Modal_CompressAll.status_done_element.slideDown(200)},Zara4_Modal_CompressAll.compressNextImage=function(){if(Zara4_Modal_CompressAll.setImageCurrentImageNumber(Zara4_Modal_CompressAll.currentImageIdIndex),Zara4_Modal_CompressAll.currentImageIdIndex===Zara4_Modal_CompressAll.imageIds.length)return Zara4_Modal_CompressAll.setProgress(1),Zara4_Modal_CompressAll.setProgressBarAsSuccess(),Zara4_Modal_CompressAll.hideCompressAllStartWrapper(),Zara4_Modal_CompressAll.hideCompressAllStopWrapper(),Zara4_Modal_CompressAll.showCompressAllDoneWrapper(),void Zara4_Modal_CompressAll.setCompressAllStatusFinished();if(!Zara4_Modal_CompressAll.stop){var percentage=(Zara4_Modal_CompressAll.currentImageIdIndex+1)/Zara4_Modal_CompressAll.imageIds.length,id=Zara4_Modal_CompressAll.imageIds[Zara4_Modal_CompressAll.currentImageIdIndex],success_callback=function(){Zara4_Modal_CompressAll.currentImageIdIndex++,Zara4_Modal_CompressAll.setProgress(percentage),Zara4_Modal_CompressAll.compressNextImage()},failure_callback=function(errorType){return"quota_limit"===errorType?void Zara4_Modal_CompressAll.setProgressBarAsDanger():(Zara4_Modal_CompressAll.currentImageIdIndex++,Zara4_Modal_CompressAll.setProgressBarAsWarning(),Zara4_Modal_CompressAll.setProgress(percentage),void Zara4_Modal_CompressAll.compressNextImage())};$.isFunction($.fn.Zara4_MediaPage_MediaColumn)?$.fn.Zara4_MediaPage_MediaColumn.compress(id,success_callback,failure_callback):$.fn.Zara4_Ajax.compressImage(id,success_callback,failure_callback)}},$.fn.Zara4_Modal_CompressAll=Zara4_Modal_CompressAll}(jQuery),function($){function Zara4_Modal_PleaseWait(){$("body").append('<div id="'+Zara4_Modal_PleaseWait.modal_id+'" class="zara-4" style="display: none; width: 640px"><h2>Zara 4 - Please Wait</h2><hr/><div style="text-align: center; font-size: 18px; margin-top: 20px; margin-bottom: 30px" class="message"></div><div style="text-align: center"><p style="font-size: 17px"><img alt="Loading" src="/wp-content/plugins/zara-4/img/loading.gif"/> Please Wait</p></div><a style="display: none;" id="zara-4_modal_please-wait_close-btn" class="button" rel="modal:close">Cancel</a></div>'),Zara4_Modal_PleaseWait.modal_element=$("#"+Zara4_Modal_PleaseWait.modal_id),Zara4_Modal_PleaseWait.message_element=Zara4_Modal_PleaseWait.modal_element.find(".message")}Zara4_Modal_PleaseWait.prototype.constructor=Zara4_Modal_PleaseWait,Zara4_Modal_PleaseWait.modal_id="zara-4_modal_please-wait",Zara4_Modal_PleaseWait.clear_message=function(){Zara4_Modal_PleaseWait.message_element.slideUp(0)},Zara4_Modal_PleaseWait.set_message=function(message){Zara4_Modal_PleaseWait.message_element.html(message),Zara4_Modal_PleaseWait.message_element.slideDown(0)},Zara4_Modal_PleaseWait.show=function(message){Zara4_Modal_PleaseWait.clear_message(),message&&Zara4_Modal_PleaseWait.set_message(message),$("#zara-4_modal_please-wait").modal({fadeDuration:200,escapeClose:!1,clickClose:!1,showClose:!1})},Zara4_Modal_PleaseWait.hide=function(){$("#zara-4_modal_please-wait_close-btn").click()},$.fn.Zara4_Modal_PleaseWait=Zara4_Modal_PleaseWait}(jQuery),function($){function Zara4_Modal_RestoreOriginal(){$("body").append('<div id="zara-4_restore-all-backed-up-images_modal" class="zara-4" style="display: none; width: 640px"><h2>Zara 4 - Restore Original Images</h2><hr/><div class="alert alert-boxed alert-warning"><p>All available backed up images will be restored.</p></div><p style="font-size: 15px">Compressed images will be removed and replace with the original uncompressed version (if a backup version is available)</p><hr/><div class="text-center"><p class="zara-4"><b>Are you sure you want to continue?</b></p></div><div class="text-center mt-15"><span id="zara-4_restore-all-backed-up-images_modal_restore-btn" class="button button-primary">Restore all</span>&nbsp;&nbsp;<a id="zara-4_restore-all-backed-up-images_modal_close-btn" class="button" rel="modal:close">Cancel</a></div></div>'),$("#zara-4_restore-all-backed-up-images_modal_restore-btn").click(function(){$("#zara-4_restore-all-backed-up-images_modal_close-btn").click(),Zara4_Modal_RestoreOriginal.restore_all()})}Zara4_Modal_RestoreOriginal.prototype.constructor=Zara4_Modal_RestoreOriginal,Zara4_Modal_RestoreOriginal.restore_all=function(){$.fn.Zara4_Modal_PleaseWait.show("Finding images that can be restored"),$.fn.Zara4_Ajax.imagesWithBackups(function(response){Zara4_Modal_RestoreOriginal.images_with_backups=eval(response),Zara4_Modal_RestoreOriginal.number_of_images_with_backsups=Zara4_Modal_RestoreOriginal.images_with_backups.length,Zara4_Modal_RestoreOriginal.current_index=0,$.fn.Zara4_Modal_PleaseWait.set_message("Restoring Image - 0 of "+Zara4_Modal_RestoreOriginal.number_of_images_with_backsups),Zara4_Modal_RestoreOriginal.restore_next()},function(){$.fn.Zara4_Modal_PleaseWait.hide()})},Zara4_Modal_RestoreOriginal.restore_next=function(){if(Zara4_Modal_RestoreOriginal.current_index===Zara4_Modal_RestoreOriginal.number_of_images_with_backsups)return void $.fn.Zara4_Modal_PleaseWait.hide();var current_image_id=Zara4_Modal_RestoreOriginal.images_with_backups[Zara4_Modal_RestoreOriginal.current_index];Zara4_Modal_RestoreOriginal.current_index=Zara4_Modal_RestoreOriginal.current_index+1,$.fn.Zara4_Modal_PleaseWait.set_message("Restoring Image - "+Zara4_Modal_RestoreOriginal.current_index+" of "+Zara4_Modal_RestoreOriginal.number_of_images_with_backsups);var success_callback=function(){Zara4_Modal_RestoreOriginal.restore_next()};$.fn.Zara4_Ajax.restoreOriginalFromId(current_image_id,success_callback,function(){})},Zara4_Modal_RestoreOriginal.show=function(){$("#zara-4_restore-all-backed-up-images_modal").modal({fadeDuration:200,escapeClose:!1,clickClose:!1,showClose:!1})},$.fn.Zara4_Modal_RestoreOriginal=Zara4_Modal_RestoreOriginal}(jQuery),function($){function Zara4_Alert_CompressAll(){Zara4_Alert_CompressAll.refresh(),setInterval(function(){Zara4_Alert_CompressAll.refresh()},1e4)}Zara4_Alert_CompressAll.prototype.constructor=Zara4_Alert_CompressAll,Zara4_Alert_CompressAll.element_id="top-table-alert",Zara4_Alert_CompressAll.refresh=function(){var compressAllFeatureEnabled="true"===COMPRESS_ALL_FEATURE_ENABLED;compressAllFeatureEnabled&&$.fn.Zara4_Ajax.uncompressedImages(function(response){if(Zara4_Alert_CompressAll.imageIds=eval(response),Zara4_Alert_CompressAll.numberOfImages=Zara4_Alert_CompressAll.imageIds.length,0===Zara4_Alert_CompressAll.numberOfImages)return void($("#"+Zara4_Alert_CompressAll.element_id).length&&$("#"+Zara4_Alert_CompressAll.element_id).remove());if(!$("#"+Zara4_Alert_CompressAll.element_id).length){var marginTop=!0,target=$(".tablenav.top").length?$(".tablenav.top"):null;target||(target=$("ul.attachments").length?$("ul.attachments"):null,marginTop=!1),target.before("<div id='top-table-alert' class='zara-4 alert alert-boxed alert-warning"+(marginTop?" mt-15":"")+"'><p class='small-margin'><b>Zara 4:</b>&nbsp;&nbsp;You have <b id='table-top-number-of-images'></b> images that can be compressed. Click <a href='#' id='table-top-btn'>here</a> to compress them all.</p></div>"),$("#table-top-btn").click(function(){$.fn.Zara4_Modal_CompressAll.reset(),$.fn.Zara4_Modal_CompressAll.imageIds=Zara4_Alert_CompressAll.imageIds;var number_of_images=$.fn.Zara4_Modal_CompressAll.imageIds.length;$.fn.Zara4_Modal_CompressAll.setImageCurrentImageNumber(0),$.fn.Zara4_Modal_CompressAll.setNumberOfImages(number_of_images),$.fn.Zara4_Modal_CompressAll.show()})}$("#table-top-number-of-images").html(Zara4_Alert_CompressAll.numberOfImages)},function(response){})},$.fn.Zara4_Alert_CompressAll=Zara4_Alert_CompressAll}(jQuery),function($){function Zara4_Util(){}Zara4_Util.prototype.constructor=Zara4_Util,Zara4_Util.formatBytes=function(bytes){var units=["B","KB","MB","GB","TB"];bytes=Math.max(bytes,0);var pow=Math.floor((bytes?Math.log(bytes):0)/Math.log(1024));return pow=Math.min(pow,units.length-1),bytes/=Math.pow(1024,pow),Math.round(10*bytes)/10+" "+units[pow]},$.fn.Zara4_Util=Zara4_Util}(jQuery),function($){function Zara4_Ajax(){}Zara4_Ajax.prototype.constructor=Zara4_Ajax,Zara4_Ajax.compressImage=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_compress",id:imageId},success:function(data){return data.error?void failureCallback(data.error):void successCallback(data)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.compressImageSizes=function(imageId,sizes,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_compress_sizes",id:imageId,sizes:sizes},success:function(data){return data.error?void failureCallback(data.error):void successCallback(imageId,sizes,data)},error:function(response){failureCallback(imageId,response)}})},Zara4_Ajax.restoreBackupImageSizes=function(imageId,sizes,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_restore_backup_for_sizes",id:imageId,sizes:sizes},success:function(data){return data.error?void failureCallback(data.error):void successCallback(imageId,sizes,data)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.deleteBackupImageSizes=function(imageId,sizes,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_delete_backup_for_sizes",id:imageId,sizes:sizes},success:function(data){return data.error?void failureCallback(data.error):void successCallback(imageId,sizes,data)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.restoreOriginalFromId=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_restore_backup",id:imageId},success:function(){successCallback(imageId)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.deleteOriginalFromId=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_delete_backup",id:imageId},success:function(){successCallback(imageId)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.compressionInfo=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_compression_info",id:imageId},success:function(response){successCallback(imageId,response)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.uncompressedImages=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_uncompressed_images"},success:successCallback,error:failureCallback})},Zara4_Ajax.excludeFromBulkCompression=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_exclude_from_bulk_compression",id:imageId},success:function(response){successCallback(imageId,response)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.includeInBulkCompression=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_include_in_bulk_compression",id:imageId},success:function(response){successCallback(imageId,response)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.excludeAllUncompressedImagesFromBulkCompression=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_exclude_all_uncompressed_images_from_bulk_compression"},success:successCallback,error:failureCallback})},Zara4_Ajax.includeAllUncompressedImagesInBulkCompression=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_include_all_uncompressed_images_in_bulk_compression"},success:successCallback,error:failureCallback})},Zara4_Ajax.uncompressedImages=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_uncompressed_images"},success:successCallback,error:failureCallback})},Zara4_Ajax.deleteAllBackups=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_delete_all_backups"},success:successCallback,error:failureCallback})},Zara4_Ajax.imagesWithBackups=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_images_with_backup"},success:successCallback,error:failureCallback})},Zara4_Ajax.userData=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"GET",url:ZARA4_API_BASE_URL+"/v1/user",data:{access_token:ZARA4_API_ACCESSTOKEN},crossDomain:!0,success:successCallback,error:failureCallback})},Zara4_Ajax.imageClassificationCount=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_image_classification_counts"},success:successCallback,error:failureCallback})},Zara4_Ajax.excludeAllUncompressedImagesFromBulkCompression=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_exclude_all_uncompressed_images_from_bulk_compression"},success:successCallback,error:failureCallback})},Zara4_Ajax.includeAllUncompressedImagesInBulkCompression=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_include_all_uncompressed_images_in_bulk_compression"},success:successCallback,error:failureCallback})},$.fn.Zara4_Ajax=Zara4_Ajax}(jQuery);