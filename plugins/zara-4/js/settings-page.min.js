!function($){function Zara4_SettingsPage_Backup(){$("body").append('<div id="zara-4_delete-all-backed-up-images_modal" class="zara-4" style="display: none; width: 640px"><h2>Zara 4 - Delete backed up images</h2><hr/><div class="alert alert-boxed alert-danger"><p>All backed up images will be deleted leaving only the compressed version.</p><p>This will free up storage space on your server but you will not be able to restore images.</p></div><div class="text-center"><p class="zara-4">Are you sure you want to continue?</p></div><div class="text-center mt-15"><span id="zara-4_delete-all-backed-up-images_modal_delete-btn" class="button button-primary">Delete all</span>&nbsp;&nbsp;<a id="zara-4_delete-all-backed-up-images_modal_close-btn" class="button" rel="modal:close">Cancel</a></div></div>'),$("#delete-all-btn").click(function(){$("#zara-4_delete-all-backed-up-images_modal").modal({fadeDuration:200,escapeClose:!1,clickClose:!1,showClose:!1})}),$("#zara-4_delete-all-backed-up-images_modal_delete-btn").click(function(){$.fn.Zara4_Ajax.deleteAllBackups(function(){Zara4_SettingsPage_Backup.refreshHasBackedUpImagesThatCanBeDeleted()},function(){}),$("#zara-4_delete-all-backed-up-images_modal_close-btn").click()}),Zara4_SettingsPage_Backup.refreshHasBackedUpImagesThatCanBeDeleted(),setTimeout(function(){Zara4_SettingsPage_Backup.refreshHasBackedUpImagesThatCanBeDeleted()},2e4)}Zara4_SettingsPage_Backup.prototype.constructor=Zara4_SettingsPage_Backup,Zara4_SettingsPage_Backup.refreshHasBackedUpImagesThatCanBeDeleted=function(){$.fn.Zara4_Ajax.imagesWithBackups(function(response){var numberOfBackUpImages=eval(response).length;numberOfBackUpImages>0?($("#delete-all-wrapper .number-of-images").html(numberOfBackUpImages),$("#delete-all-wrapper").slideDown()):$("#delete-all-wrapper").slideUp()},function(){})},$.fn.Zara4_SettingsPage_Backup=Zara4_SettingsPage_Backup}(jQuery),function($){function Zara4_SettingsPage_BulkExclusion(){Zara4_SettingsPage_BulkExclusion.refreshImageClassificationCount(),$("#exclude-all-uncompressed-images").click(function(e){e.preventDefault(),Zara4_SettingsPage_BulkExclusion.excludeAllUncompressedImages()}),$("#include-all-excluded-images").click(function(e){e.preventDefault(),Zara4_SettingsPage_BulkExclusion.includeAllExcludedImages()})}Zara4_SettingsPage_BulkExclusion.prototype.constructor=Zara4_SettingsPage_BulkExclusion,Zara4_SettingsPage_BulkExclusion.refreshImageClassificationCount=function(){$.fn.Zara4_Ajax.imageClassificationCount(function(response){response=JSON.parse(response);var numberOfCompressedImage=response["number-of-compressed-images"],numberOfUncompressedImage=response["number-of-uncompressed-images"],numberOfExcludedImages=response["number-of-excluded-images"];$("#number-of-compressed-images").html(numberOfCompressedImage),$("#number-of-uncompressed-images").html(numberOfUncompressedImage),$("#number-of-excluded-images").html(numberOfExcludedImages)},function(){})},Zara4_SettingsPage_BulkExclusion.excludeAllUncompressedImages=function(){$.fn.Zara4_Ajax.excludeAllUncompressedImagesFromBulkCompression(function(){},function(){})},Zara4_SettingsPage_BulkExclusion.includeAllExcludedImages=function(){$.fn.Zara4_Ajax.includeAllUncompressedImagesInBulkCompression(function(){},function(){})},$.fn.Zara4_SettingsPage_BulkExclusion=Zara4_SettingsPage_BulkExclusion}(jQuery),function($){function Zara4_SettingsPage_DebugInfo(){$("#debug-info-btn").click(function(){$("#zara-4-info-modal").modal({escapeClose:!1,clickClose:!1,showClose:!1})})}Zara4_SettingsPage_DebugInfo.prototype.constructor=Zara4_SettingsPage_DebugInfo,$.fn.Zara4_SettingsPage_DebugInfo=Zara4_SettingsPage_DebugInfo}(jQuery),function($){function Zara4_SettingsPage_Display(){"undefined"==typeof ZARA4_API_ACCESSTOKEN||""==ZARA4_API_ACCESSTOKEN||null==ZARA4_API_ACCESSTOKEN?Zara4_SettingsPage_Display.displayAccountStatusError("Register with Zara 4 to obtain your API credentials. <a target='_blank' href='https://zara4.com/auth/api-register'>Click here</a>"):$.fn.Zara4_Ajax.userData(function(data,textStatus,jqXHR){data.plan,data["monthly-fee"],data["monthly-quota"],data.usage,data.remaining,data.team,data["is-team-leader"];Zara4_SettingsPage_Display.usedAllQuota(data)?Zara4_SettingsPage_Display.setError("<b>Your quota has run out</b> - <a target='_blank' href='https://zara4.com/account'>upgrade</a> to continue"):Zara4_SettingsPage_Display.quotaIsRunningLow(data)&&Zara4_SettingsPage_Display.setWarning("<b>Your quota is getting low</b> - consider <a target='_blank' href='https://zara4.com/account'>upgrading</a>"),Zara4_SettingsPage_Display.quotaMeteringMethodIsDataUsage(data)?$("#allowance-remaining").html(Zara4_SettingsPage_Display.prettyBytes(Zara4_SettingsPage_Display.totalAllowanceRemaining(data))):$("#allowance-remaining").html(Zara4_SettingsPage_Display.totalAllowanceRemaining(data)),Zara4_SettingsPage_Display.displayAccountStatusOk(),$("#account-usage-wrapper").slideDown(200)},function(){Zara4_SettingsPage_Display.displayAccountStatusError("Invalid API Credentials")})}Zara4_SettingsPage_Display.prototype.constructor=Zara4_SettingsPage_Display,Zara4_SettingsPage_Display.prettyBytes=function(bytes){for(var units=["B","KB","MB","GB","TB","PB"],divisions=0;bytes>=1024;)bytes/=1024,divisions++;return parseFloat(bytes).toFixed(2)+" "+units[divisions]},Zara4_SettingsPage_Display.quotaMeteringMethod=function(data){return data["quota-metering-method"]},Zara4_SettingsPage_Display.quotaMeteringMethodIsDataUsage=function(data){return"data-usage"==Zara4_SettingsPage_Display.quotaMeteringMethod(data)},Zara4_SettingsPage_Display.currentMonthlyPlanIsFree=function(data){return data["monthly-plan"].current.plan.free},Zara4_SettingsPage_Display.totalAllowanceRemaining=function(data){return data.allowances["total-remaining"]},Zara4_SettingsPage_Display.usedAllQuota=function(data){return 0==Zara4_SettingsPage_Display.totalAllowanceRemaining(data)},Zara4_SettingsPage_Display.quotaIsRunningLow=function(data){return Zara4_SettingsPage_Display.currentMonthlyPlanIsFree(data)?Zara4_SettingsPage_Display.totalAllowanceRemaining(data)<5242880:Zara4_SettingsPage_Display.totalAllowanceRemaining(data)<52428800},Zara4_SettingsPage_Display.setWarning=function(warningMessage){$("#warning-message").html(warningMessage).css({display:"inline-block"})},Zara4_SettingsPage_Display.setError=function(errorMessage){$("#error-message").html(errorMessage).css({display:"inline-block"})},Zara4_SettingsPage_Display.displayAccountStatusOk=function(){$("#zara-4-account-status").html("<img src='images/yes.png'/> Looking good")},Zara4_SettingsPage_Display.displayAccountStatusError=function(message){$("#zara-4-account-status").html("<img src='images/no.png'/> "+message)},$.fn.Zara4_SettingsPage_Display=Zara4_SettingsPage_Display}(jQuery),function($){function Zara4_SettingsPage_Register(){$("#google-sign-up").click(function(){Zara4_SettingsPage_Register.googleSignUp()}),$("#facebook-sign-up").click(function(){Zara4_SettingsPage_Register.facebookSignUp()}),$("#github-sign-up").click(function(){Zara4_SettingsPage_Register.githubSignUp()})}Zara4_SettingsPage_Register.prototype.constructor=Zara4_SettingsPage_Register,Zara4_SettingsPage_Register.googleSignUp=function(){var signupWindow=null;window.onmessage=function(e){if(e.origin===Z4_BASE_URL){var data=e.data,clientId=data["client-id"],clientSecret=data["client-secret"];signupWindow.close(),$("#zara4-client-id").val(clientId),$("#zara4-client-secret").val(clientSecret),$("#zara-4-settings-form").submit()}};var uri=Z4_BASE_URL+"/auth/google-login?live-api-clients-for-javascript-window=true&name=WordPress&origin-uri="+window.location.href;signupWindow=window.open(uri,"zara4-signup-google","width=450,height=600")},Zara4_SettingsPage_Register.facebookSignUp=function(){var signupWindow=null;window.onmessage=function(e){if(e.origin===Z4_BASE_URL){var data=e.data,clientId=data["client-id"],clientSecret=data["client-secret"];signupWindow.close(),$("#zara4-client-id").val(clientId),$("#zara4-client-secret").val(clientSecret),$("#zara-4-settings-form").submit()}};var uri=Z4_BASE_URL+"/auth/facebook-login?live-api-clients-for-javascript-window=true&name=WordPress&origin-uri="+window.location.href;signupWindow=window.open(uri,"zara4-signup-facebook","width=450,height=600")},Zara4_SettingsPage_Register.githubSignUp=function(){var signupWindow=null;window.onmessage=function(e){if(e.origin===Z4_BASE_URL){var data=e.data,clientId=data["client-id"],clientSecret=data["client-secret"];signupWindow.close(),$("#zara4-client-id").val(clientId),$("#zara4-client-secret").val(clientSecret),$("#zara-4-settings-form").submit()}};var uri=Z4_BASE_URL+"/auth/github-login?live-api-clients-for-javascript-window=true&name=WordPress&origin-uri="+window.location.href;signupWindow=window.open(uri,"zara4-signup-gihub","width=450,height=600")},$.fn.Zara4_SettingsPage_Register=Zara4_SettingsPage_Register}(jQuery),function($){function Zara4_Modal_CompressAll(){$("body").append('<div id="'+Zara4_Modal_CompressAll.element_id+'" class="zara-4" style="display: none"><h2>Zara 4 - Compress All Images</h2><hr/><div class="text-center"><h3><span class="current-image-number"></span> of <span class="number-of-images"></span>&nbsp;&nbsp;&nbsp;&nbsp;(<span class="percentage-complete"></span>%)</h3></div><div class="progress progress-striped"><div class="progress-bar" style="width: 0"></div></div><div class="text-center"><div class="status-ready">Ready to start</div><div class="status-done hidden">Finished</div><div class="status-working hidden"><img alt="Loading" src="/wp-content/plugins/zara-4/img/loading.gif"/> Compressing, please wait</div></div><hr/><div class="text-center" style="margin-top: 15px"><div class="start-compression-btn-wrapper"><a href="#" class="start-compression-btn button button-primary">Start Compression</a> <a href="#" class="button button-default" rel="modal:close">Close</a></div><div class="hidden stop-compression-btn-wrapper"><a href="#" class="stop-compression-btn button">Stop</a></div><div class="hidden done-compression-btn-wrapper"><a href="#" class="button button-primary" rel="modal:close">Done</a></div></div></div>'),Zara4_Modal_CompressAll.stop=!1,Zara4_Modal_CompressAll.modal_element=$("#"+Zara4_Modal_CompressAll.element_id),Zara4_Modal_CompressAll.current_image_number_element=Zara4_Modal_CompressAll.modal_element.find(".current-image-number"),Zara4_Modal_CompressAll.number_of_images_element=Zara4_Modal_CompressAll.modal_element.find(".number-of-images"),Zara4_Modal_CompressAll.progress_bar_element=Zara4_Modal_CompressAll.modal_element.find(".progress-bar"),Zara4_Modal_CompressAll.percentage_complete_element=Zara4_Modal_CompressAll.modal_element.find(".percentage-complete"),Zara4_Modal_CompressAll.start_compression_btn_element=Zara4_Modal_CompressAll.modal_element.find(".start-compression-btn"),Zara4_Modal_CompressAll.stop_compression_btn_element=Zara4_Modal_CompressAll.modal_element.find(".stop-compression-btn"),Zara4_Modal_CompressAll.start_compression_btn_wrapper_element=Zara4_Modal_CompressAll.modal_element.find(".start-compression-btn-wrapper"),Zara4_Modal_CompressAll.stop_compression_btn_wrapper_element=Zara4_Modal_CompressAll.modal_element.find(".stop-compression-btn-wrapper"),Zara4_Modal_CompressAll.done_compression_btn_wrapper_element=Zara4_Modal_CompressAll.modal_element.find(".done-compression-btn-wrapper"),Zara4_Modal_CompressAll.status_ready_element=Zara4_Modal_CompressAll.modal_element.find(".status-ready"),Zara4_Modal_CompressAll.status_done_element=Zara4_Modal_CompressAll.modal_element.find(".status-done"),Zara4_Modal_CompressAll.status_working_element=Zara4_Modal_CompressAll.modal_element.find(".status-working"),Zara4_Modal_CompressAll.start_compression_btn_element.click(function(){Zara4_Modal_CompressAll.stop=!1,Zara4_Modal_CompressAll.hideCompressAllStartWrapper(),Zara4_Modal_CompressAll.showCompressAllStopWrapper(),Zara4_Modal_CompressAll.setCompressAllStatusWorking(),Zara4_Modal_CompressAll.compressNextImage()}),Zara4_Modal_CompressAll.stop_compression_btn_element.click(function(){Zara4_Modal_CompressAll.stop=!0,Zara4_Modal_CompressAll.hideCompressAllStopWrapper(),Zara4_Modal_CompressAll.showCompressAllStartWrapper(),Zara4_Modal_CompressAll.setCompressAllStatusReady()}),Zara4_Modal_CompressAll.modal_element.on("modal:after-close",function(){})}Zara4_Modal_CompressAll.prototype.constructor=Zara4_Modal_CompressAll,Zara4_Modal_CompressAll.element_id="zara-4_modal_compress-all",Zara4_Modal_CompressAll.show=function(){$("#"+Zara4_Modal_CompressAll.element_id).modal({escapeClose:!1,clickClose:!1,showClose:!1})},Zara4_Modal_CompressAll.reset=function(){Zara4_Modal_CompressAll.currentImageIdIndex=0,Zara4_Modal_CompressAll.setProgress(0),Zara4_Modal_CompressAll.setProgressBarAsDefault(),Zara4_Modal_CompressAll.hideCompressAllDoneWrapper(),Zara4_Modal_CompressAll.hideCompressAllStopWrapper(),Zara4_Modal_CompressAll.showCompressAllStartWrapper()},Zara4_Modal_CompressAll.setImageCurrentImageNumber=function(currentImageNumber){Zara4_Modal_CompressAll.current_image_number_element.html(currentImageNumber)},Zara4_Modal_CompressAll.setNumberOfImages=function(numberOfImages){Zara4_Modal_CompressAll.number_of_images_element.html(numberOfImages)},Zara4_Modal_CompressAll.setProgress=function(progress){var percentage=100*progress;Zara4_Modal_CompressAll.progress_bar_element.css({width:percentage+"%"}),Zara4_Modal_CompressAll.percentage_complete_element.html(parseFloat(percentage).toFixed(1))},Zara4_Modal_CompressAll.setProgressBarAsDefault=function(){Zara4_Modal_CompressAll.progress_bar_element.removeClass("progress-bar-success").removeClass("progress-bar-danger").removeClass("progress-bar-warning")},Zara4_Modal_CompressAll.setProgressBarAsSuccess=function(){Zara4_Modal_CompressAll.progress_bar_element.addClass("progress-bar-success").removeClass("progress-bar-danger").removeClass("progress-bar-warning")},Zara4_Modal_CompressAll.setProgressBarAsWarning=function(){Zara4_Modal_CompressAll.progress_bar_element.addClass("progress-bar-warning").removeClass("progress-bar-success").removeClass("progress-bar-danger")},Zara4_Modal_CompressAll.setProgressBarAsDanger=function(){Zara4_Modal_CompressAll.progress_bar_element.addClass("progress-bar-danger").removeClass("progress-bar-success").removeClass("progress-bar-warning")},Zara4_Modal_CompressAll.showCompressAllStartWrapper=function(){Zara4_Modal_CompressAll.start_compression_btn_wrapper_element.slideDown(200)},Zara4_Modal_CompressAll.hideCompressAllStartWrapper=function(){Zara4_Modal_CompressAll.start_compression_btn_wrapper_element.slideUp(200)},Zara4_Modal_CompressAll.showCompressAllStopWrapper=function(){Zara4_Modal_CompressAll.stop_compression_btn_wrapper_element.slideDown(200)},Zara4_Modal_CompressAll.hideCompressAllStopWrapper=function(){Zara4_Modal_CompressAll.stop_compression_btn_wrapper_element.slideUp(200)},Zara4_Modal_CompressAll.showCompressAllDoneWrapper=function(){Zara4_Modal_CompressAll.done_compression_btn_wrapper_element.slideDown(200)},Zara4_Modal_CompressAll.hideCompressAllDoneWrapper=function(){Zara4_Modal_CompressAll.done_compression_btn_wrapper_element.slideUp(200)},Zara4_Modal_CompressAll.setCompressAllStatusWorking=function(){Zara4_Modal_CompressAll.status_ready_element.slideUp(200),Zara4_Modal_CompressAll.status_done_element.slideUp(200),Zara4_Modal_CompressAll.status_working_element.slideDown(200)},Zara4_Modal_CompressAll.setCompressAllStatusReady=function(){Zara4_Modal_CompressAll.status_working_element.slideUp(200),Zara4_Modal_CompressAll.status_done_element.slideUp(200),Zara4_Modal_CompressAll.status_ready_element.slideDown(200)},Zara4_Modal_CompressAll.setCompressAllStatusFinished=function(){Zara4_Modal_CompressAll.status_working_element.slideUp(200),Zara4_Modal_CompressAll.status_ready_element.slideUp(200),Zara4_Modal_CompressAll.status_done_element.slideDown(200)},Zara4_Modal_CompressAll.compressNextImage=function(){if(Zara4_Modal_CompressAll.setImageCurrentImageNumber(Zara4_Modal_CompressAll.currentImageIdIndex),Zara4_Modal_CompressAll.currentImageIdIndex===Zara4_Modal_CompressAll.imageIds.length)return Zara4_Modal_CompressAll.setProgress(1),Zara4_Modal_CompressAll.setProgressBarAsSuccess(),Zara4_Modal_CompressAll.hideCompressAllStartWrapper(),Zara4_Modal_CompressAll.hideCompressAllStopWrapper(),Zara4_Modal_CompressAll.showCompressAllDoneWrapper(),void Zara4_Modal_CompressAll.setCompressAllStatusFinished();if(!Zara4_Modal_CompressAll.stop){var percentage=(Zara4_Modal_CompressAll.currentImageIdIndex+1)/Zara4_Modal_CompressAll.imageIds.length,id=Zara4_Modal_CompressAll.imageIds[Zara4_Modal_CompressAll.currentImageIdIndex],success_callback=function(){Zara4_Modal_CompressAll.currentImageIdIndex++,Zara4_Modal_CompressAll.setProgress(percentage),Zara4_Modal_CompressAll.compressNextImage()},failure_callback=function(errorType){return"quota_limit"===errorType?void Zara4_Modal_CompressAll.setProgressBarAsDanger():(Zara4_Modal_CompressAll.currentImageIdIndex++,Zara4_Modal_CompressAll.setProgressBarAsWarning(),Zara4_Modal_CompressAll.setProgress(percentage),void Zara4_Modal_CompressAll.compressNextImage())};$.isFunction($.fn.Zara4_MediaPage_MediaColumn)?$.fn.Zara4_MediaPage_MediaColumn.compress(id,success_callback,failure_callback):$.fn.Zara4_Ajax.compressImage(id,success_callback,failure_callback)}},$.fn.Zara4_Modal_CompressAll=Zara4_Modal_CompressAll}(jQuery),function($){function Zara4_Modal_PleaseWait(){$("body").append('<div id="'+Zara4_Modal_PleaseWait.modal_id+'" class="zara-4" style="display: none; width: 640px"><h2>Zara 4 - Please Wait</h2><hr/><div style="text-align: center; font-size: 18px; margin-top: 20px; margin-bottom: 30px" class="message"></div><div style="text-align: center"><p style="font-size: 17px"><img alt="Loading" src="/wp-content/plugins/zara-4/img/loading.gif"/> Please Wait</p></div><a style="display: none;" id="zara-4_modal_please-wait_close-btn" class="button" rel="modal:close">Cancel</a></div>'),Zara4_Modal_PleaseWait.modal_element=$("#"+Zara4_Modal_PleaseWait.modal_id),Zara4_Modal_PleaseWait.message_element=Zara4_Modal_PleaseWait.modal_element.find(".message")}Zara4_Modal_PleaseWait.prototype.constructor=Zara4_Modal_PleaseWait,Zara4_Modal_PleaseWait.modal_id="zara-4_modal_please-wait",Zara4_Modal_PleaseWait.clear_message=function(){Zara4_Modal_PleaseWait.message_element.slideUp(0)},Zara4_Modal_PleaseWait.set_message=function(message){Zara4_Modal_PleaseWait.message_element.html(message),Zara4_Modal_PleaseWait.message_element.slideDown(0)},Zara4_Modal_PleaseWait.show=function(message){Zara4_Modal_PleaseWait.clear_message(),message&&Zara4_Modal_PleaseWait.set_message(message),$("#zara-4_modal_please-wait").modal({fadeDuration:200,escapeClose:!1,clickClose:!1,showClose:!1})},Zara4_Modal_PleaseWait.hide=function(){$("#zara-4_modal_please-wait_close-btn").click()},$.fn.Zara4_Modal_PleaseWait=Zara4_Modal_PleaseWait}(jQuery),function($){function Zara4_Modal_RestoreOriginal(){$("body").append('<div id="zara-4_restore-all-backed-up-images_modal" class="zara-4" style="display: none; width: 640px"><h2>Zara 4 - Restore Original Images</h2><hr/><div class="alert alert-boxed alert-warning"><p>All available backed up images will be restored.</p></div><p style="font-size: 15px">Compressed images will be removed and replace with the original uncompressed version (if a backup version is available)</p><hr/><div class="text-center"><p class="zara-4"><b>Are you sure you want to continue?</b></p></div><div class="text-center mt-15"><span id="zara-4_restore-all-backed-up-images_modal_restore-btn" class="button button-primary">Restore all</span>&nbsp;&nbsp;<a id="zara-4_restore-all-backed-up-images_modal_close-btn" class="button" rel="modal:close">Cancel</a></div></div>'),$("#zara-4_restore-all-backed-up-images_modal_restore-btn").click(function(){$("#zara-4_restore-all-backed-up-images_modal_close-btn").click(),Zara4_Modal_RestoreOriginal.restore_all()})}Zara4_Modal_RestoreOriginal.prototype.constructor=Zara4_Modal_RestoreOriginal,Zara4_Modal_RestoreOriginal.restore_all=function(){$.fn.Zara4_Modal_PleaseWait.show("Finding images that can be restored"),$.fn.Zara4_Ajax.imagesWithBackups(function(response){Zara4_Modal_RestoreOriginal.images_with_backups=eval(response),Zara4_Modal_RestoreOriginal.number_of_images_with_backsups=Zara4_Modal_RestoreOriginal.images_with_backups.length,Zara4_Modal_RestoreOriginal.current_index=0,$.fn.Zara4_Modal_PleaseWait.set_message("Restoring Image - 0 of "+Zara4_Modal_RestoreOriginal.number_of_images_with_backsups),Zara4_Modal_RestoreOriginal.restore_next()},function(){$.fn.Zara4_Modal_PleaseWait.hide()})},Zara4_Modal_RestoreOriginal.restore_next=function(){if(Zara4_Modal_RestoreOriginal.current_index===Zara4_Modal_RestoreOriginal.number_of_images_with_backsups)return void $.fn.Zara4_Modal_PleaseWait.hide();var current_image_id=Zara4_Modal_RestoreOriginal.images_with_backups[Zara4_Modal_RestoreOriginal.current_index];Zara4_Modal_RestoreOriginal.current_index=Zara4_Modal_RestoreOriginal.current_index+1,$.fn.Zara4_Modal_PleaseWait.set_message("Restoring Image - "+Zara4_Modal_RestoreOriginal.current_index+" of "+Zara4_Modal_RestoreOriginal.number_of_images_with_backsups);var success_callback=function(){Zara4_Modal_RestoreOriginal.restore_next()};$.fn.Zara4_Ajax.restoreOriginalFromId(current_image_id,success_callback,function(){})},Zara4_Modal_RestoreOriginal.show=function(){$("#zara-4_restore-all-backed-up-images_modal").modal({fadeDuration:200,escapeClose:!1,clickClose:!1,showClose:!1})},$.fn.Zara4_Modal_RestoreOriginal=Zara4_Modal_RestoreOriginal}(jQuery),function($){function Zara4_Alert_CompressAll(){Zara4_Alert_CompressAll.refresh(),setInterval(function(){Zara4_Alert_CompressAll.refresh()},1e4)}Zara4_Alert_CompressAll.prototype.constructor=Zara4_Alert_CompressAll,Zara4_Alert_CompressAll.element_id="top-table-alert",Zara4_Alert_CompressAll.refresh=function(){var compressAllFeatureEnabled="true"===COMPRESS_ALL_FEATURE_ENABLED;compressAllFeatureEnabled&&$.fn.Zara4_Ajax.uncompressedImages(function(response){if(Zara4_Alert_CompressAll.imageIds=eval(response),Zara4_Alert_CompressAll.numberOfImages=Zara4_Alert_CompressAll.imageIds.length,0===Zara4_Alert_CompressAll.numberOfImages)return void($("#"+Zara4_Alert_CompressAll.element_id).length&&$("#"+Zara4_Alert_CompressAll.element_id).remove());if(!$("#"+Zara4_Alert_CompressAll.element_id).length){var marginTop=!0,target=$(".tablenav.top").length?$(".tablenav.top"):null;target||(target=$("ul.attachments").length?$("ul.attachments"):null,marginTop=!1),target.before("<div id='top-table-alert' class='zara-4 alert alert-boxed alert-warning"+(marginTop?" mt-15":"")+"'><p class='small-margin'><b>Zara 4:</b>&nbsp;&nbsp;You have <b id='table-top-number-of-images'></b> images that can be compressed. Click <a href='#' id='table-top-btn'>here</a> to compress them all.</p></div>"),$("#table-top-btn").click(function(){$.fn.Zara4_Modal_CompressAll.reset(),$.fn.Zara4_Modal_CompressAll.imageIds=Zara4_Alert_CompressAll.imageIds;var number_of_images=$.fn.Zara4_Modal_CompressAll.imageIds.length;$.fn.Zara4_Modal_CompressAll.setImageCurrentImageNumber(0),$.fn.Zara4_Modal_CompressAll.setNumberOfImages(number_of_images),$.fn.Zara4_Modal_CompressAll.show()})}$("#table-top-number-of-images").html(Zara4_Alert_CompressAll.numberOfImages)},function(response){})},$.fn.Zara4_Alert_CompressAll=Zara4_Alert_CompressAll}(jQuery),function($){function Zara4_Util(){}Zara4_Util.prototype.constructor=Zara4_Util,Zara4_Util.formatBytes=function(bytes){var units=["B","KB","MB","GB","TB"];bytes=Math.max(bytes,0);var pow=Math.floor((bytes?Math.log(bytes):0)/Math.log(1024));return pow=Math.min(pow,units.length-1),bytes/=Math.pow(1024,pow),Math.round(10*bytes)/10+" "+units[pow]},$.fn.Zara4_Util=Zara4_Util}(jQuery),function($){function Zara4_Ajax(){}Zara4_Ajax.prototype.constructor=Zara4_Ajax,Zara4_Ajax.compressImage=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_compress",id:imageId},success:function(data){return data.error?void failureCallback(data.error):void successCallback(data)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.compressImageSizes=function(imageId,sizes,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_compress_sizes",id:imageId,sizes:sizes},success:function(data){return data.error?void failureCallback(data.error):void successCallback(imageId,sizes,data)},error:function(response){failureCallback(imageId,response)}})},Zara4_Ajax.restoreBackupImageSizes=function(imageId,sizes,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_restore_backup_for_sizes",id:imageId,sizes:sizes},success:function(data){return data.error?void failureCallback(data.error):void successCallback(imageId,sizes,data)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.deleteBackupImageSizes=function(imageId,sizes,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_delete_backup_for_sizes",id:imageId,sizes:sizes},success:function(data){return data.error?void failureCallback(data.error):void successCallback(imageId,sizes,data)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.restoreOriginalFromId=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_restore_backup",id:imageId},success:function(){successCallback(imageId)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.deleteOriginalFromId=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_delete_backup",id:imageId},success:function(){successCallback(imageId)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.compressionInfo=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_compression_info",id:imageId},success:function(response){successCallback(imageId,response)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.uncompressedImages=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_uncompressed_images"},success:successCallback,error:failureCallback})},Zara4_Ajax.excludeFromBulkCompression=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_exclude_from_bulk_compression",id:imageId},success:function(response){successCallback(imageId,response)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.includeInBulkCompression=function(imageId,successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_include_in_bulk_compression",id:imageId},success:function(response){successCallback(imageId,response)},error:function(){failureCallback(imageId)}})},Zara4_Ajax.excludeAllUncompressedImagesFromBulkCompression=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_exclude_all_uncompressed_images_from_bulk_compression"},success:successCallback,error:failureCallback})},Zara4_Ajax.includeAllUncompressedImagesInBulkCompression=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_include_all_uncompressed_images_in_bulk_compression"},success:successCallback,error:failureCallback})},Zara4_Ajax.uncompressedImages=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_uncompressed_images"},success:successCallback,error:failureCallback})},Zara4_Ajax.deleteAllBackups=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_delete_all_backups"},success:successCallback,error:failureCallback})},Zara4_Ajax.imagesWithBackups=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_images_with_backup"},success:successCallback,error:failureCallback})},Zara4_Ajax.userData=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"GET",url:ZARA4_API_BASE_URL+"/v1/user",data:{access_token:ZARA4_API_ACCESSTOKEN},crossDomain:!0,success:successCallback,error:failureCallback})},Zara4_Ajax.imageClassificationCount=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_image_classification_counts"},success:successCallback,error:failureCallback})},Zara4_Ajax.excludeAllUncompressedImagesFromBulkCompression=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_exclude_all_uncompressed_images_from_bulk_compression"},success:successCallback,error:failureCallback})},Zara4_Ajax.includeAllUncompressedImagesInBulkCompression=function(successCallback,failureCallback){successCallback=null!=successCallback?successCallback:function(){},failureCallback=null!=failureCallback?failureCallback:function(){},$.ajax({type:"POST",url:ajaxurl,data:{action:"zara4_include_all_uncompressed_images_in_bulk_compression"},success:successCallback,error:failureCallback})},$.fn.Zara4_Ajax=Zara4_Ajax}(jQuery);