{"version":3,"file":"../../js/llms-admin-settings.min.js","sources":["llms-admin-settings.js"],"sourcesContent":[";/**\n * LifterLMS Settings Pages UI / UX\n *\n * @since    3.7.3\n * @version  3.18.0\n */( function( $, undefined ) {\n\n\twindow.llms                = window.llms || {};\n\twindow.llms.admin_settings = function() {\n\n\t\tthis.file_frame = null;\n\n\t\t/**\n\t\t * Initialize\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.7.3\n\t\t * @version  3.18.0\n\t\t */\n\t\tthis.init = function() {\n\t\t\tthis.bind();\n\t\t\tthis.bind_conditionals();\n\t\t};\n\n\t\t/**\n\t\t * Bind DOM events\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.7.3\n\t\t * @version  3.17.5\n\t\t */\n\t\tthis.bind = function() {\n\n\t\t\tvar self = this;\n\n\t\t\tif ( $( '.llms-image-field-upload' ).length ) {\n\t\t\t\t$( '.llms-image-field-upload' ).on( 'click', function( e ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tself.image_upload_click( $( this ), e );\n\t\t\t\t} );\n\n\t\t\t\t$( '.llms-image-field-remove' ).on( 'click', function( e ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tself.update_image( $( this ), '', '' );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( $( '.llms-gateway-table' ).length ) {\n\t\t\t\t$( '.llms-gateway-table tbody' ).sortable( {\n\t\t\t\t\taxis: 'y',\n\t\t\t\t\tcursor: 'move',\n\t\t\t\t\titems: 'tr',\n\t\t\t\t\t// containment: 'parent',\n\t\t\t\t\thandle: 'td.sort',\n\t\t\t\t\thelper: function( event, ui ) {\n\t\t\t\t\t\tui.children().each( function() {\n\t\t\t\t\t\t\t$( this ).width( $( this ).width() );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t// ui.css( 'left', '0' );\n\t\t\t\t\t\treturn ui;\n\t\t\t\t\t},\n\t\t\t\t\tupdate: function( event, ui ) {\n\t\t\t\t\t\t$( this ).find( 'td.sort input' ).each( function( i ) {\n\t\t\t\t\t\t\t$( this ).val( i );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t};\n\n\t\t/**\n\t\t * Allow checkboxes to conditionally display other settings\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.18.0\n\t\t * @version  3.18.0\n\t\t */\n\t\tthis.bind_conditionals = function() {\n\n\t\t\t$( '.llms-conditional-controller' ).each( function() {\n\n\t\t\t\tvar $controls = $( $( this ).attr( 'data-controls' ) ).closest( 'tr' );\n\n\t\t\t\t$( this ).on( 'change', function() {\n\n\t\t\t\t\tvar val;\n\n\t\t\t\t\tif ( 'checkbox' === $( this ).attr( 'type' ) ) {\n\t\t\t\t\t\tval = $( this ).is( ':checked' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\t$controls.show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$controls.hide();\n\t\t\t\t\t}\n\n\t\t\t\t} ).trigger( 'change' );\n\n\t\t\t} );\n\n\t\t};\n\n\t\t/**\n\t\t * Click event for image upload fields\n\t\t *\n\t\t * @param    obj   $btn  jQuery object for clicked button\n\t\t * @param    obj   e     JS event object\n\t\t * @return   void\n\t\t * @since    3.7.3\n\t\t * @version  3.7.3\n\t\t */\n\t\tthis.image_upload_click = function( $btn, e ) {\n\n\t\t\tvar self  = this,\n\t\t\t\tframe = null;\n\n\t\t\tif ( ! frame ) {\n\t\t\t\tvar title       = $btn.attr( 'data-frame-title' ) || LLMS.l10n.translate( 'Select an Image' ),\n\t\t\t\t\tbutton_text = $btn.attr( 'data-frame-button' ) || LLMS.l10n.translate( 'Select Image' );\n\t\t\t\tframe           = wp.media.frames.file_frame = wp.media({\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tbutton: {\n\t\t\t\t\t\ttext: button_text,\n\t\t\t\t\t},\n\t\t\t\t\tmultiple: false\t// Set to true to allow multiple files to be selected\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tframe.on( 'select', function() {\n\n\t\t\t\t// We set multiple to false so only get one image from the uploader\n\t\t\t\tvar attachment = frame.state().get( 'selection' ).first().toJSON();\n\n\t\t\t\tself.update_image( $btn, attachment.id, attachment.url );\n\n\t\t\t});\n\n\t\t\tframe.open();\n\n\t\t};\n\n\t\t/**\n\t\t * Update the DOM with a selected image\n\t\t *\n\t\t * @param    obj      $btn  jQuery object of the clicked button\n\t\t * @param    int      id    WP Attachment ID of the image\n\t\t * @param    string   src   <img> src of the selected image\n\t\t * @return   void\n\t\t * @since    3.7.3\n\t\t * @version  3.7.3\n\t\t */\n\t\tthis.update_image = function( $btn, id, src ) {\n\n\t\t\tvar $input   = $( '#' + $btn.attr( 'data-id' ) ),\n\t\t\t\t$preview = $btn.prevAll( 'img.llms-image-field-preview' )\n\t\t\t\t$remove  = $btn.hasClass( 'llms-image-field-remove' ) ? $btn : $btn.next( 'input.llms-image-field-remove' );\n\n\t\t\t$input.val( id );\n\t\t\t$preview.attr( 'src', src );\n\n\t\t\tif ( '' !== id ) {\n\t\t\t\t$remove.removeClass( 'hidden' );\n\t\t\t} else {\n\t\t\t\t$remove.addClass( 'hidden' );\n\t\t\t}\n\n\t\t}\n\n\t\t// go\n\t\tthis.init();\n\n\t};\n\n\tvar a = new window.llms.admin_settings();\n\n} )( jQuery );\n"],"names":["$","window","llms","admin_settings","this","file_frame","init","bind","bind_conditionals","self","length","on","e","preventDefault","image_upload_click","update_image","sortable","axis","cursor","items","handle","helper","event","ui","children","each","width","update","find","i","val","$controls","attr","closest","is","show","hide","trigger","$btn","title","button_text","frame","LLMS","l10n","translate","wp","media","frames","button","text","multiple","attachment","state","get","first","toJSON","id","url","open","src","$input","$preview","prevAll","$remove","hasClass","next","removeClass","addClass","jQuery"],"mappings":"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","sourceRoot":"../../js"}