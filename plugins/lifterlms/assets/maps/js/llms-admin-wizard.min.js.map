{"version":3,"file":"../../js/llms-admin-wizard.min.js","sources":["llms-admin-wizard.js"],"sourcesContent":["/**\n * JS from the admin setup wizard\n *\n * @since 4.8.0\n * @version 4.8.0\n */\n\n( function() {\n\tconst\n\t\tcurrStep       = document.getElementById( 'llms-setup-current-step' ),\n\t\texitLink       = document.querySelector( '.llms-exit-setup' ),\n\t\timports        = document.querySelectorAll( 'input[name=\"llms_setup_course_import_ids[]\"]' ),\n\t\tcheckboxToggle = document.getElementsByClassName( 'llms-checkbox-toggle' )[ 0 ] ?? null;\n\n\tif ( imports.length ) {\n\t\tconst\n\t\t\tsubmit = document.getElementById( 'llms-setup-submit' ),\n\t\t\tmsgs   = document.querySelectorAll( '.llms-importing-msgs .llms-importing-msg' );\n\n\t\t/**\n\t\t * Retrieve the number of courses to be imported\n\t\t *\n\t\t * @since 4.8.0\n\t\t *\n\t\t * @return {Number} The number of courses to be imported.\n\t\t */\n\t\tfunction getSelectedImportCount() {\n\t\t\tlet count = 0;\n\n\t\t\timports.forEach( function( el ) {\n\t\t\t\tif ( el.checked ) {\n\t\t\t\t\t++count;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn count;\n\t\t}\n\n\t\t/**\n\t\t * Update UI when a user toggles an import on or off.\n\t\t *\n\t\t * @since 4.8.0\n\t\t */\n\t\timports.forEach( function( el ) {\n\t\t\tel.addEventListener( 'change', function() {\n\t\t\t\t// Hide all messages.\n\t\t\t\tmsgs.forEach( function( msg ) {\n\t\t\t\t\tmsg.style.display = 'none';\n\t\t\t\t} );\n\n\t\t\t\tconst selectedCount = getSelectedImportCount();\n\n\t\t\t\t// If there's no courses to be imported, disable the submit button.\n\t\t\t\tsubmit.disabled = 0 === getSelectedImportCount() ? 'disabled' : null;\n\n\t\t\t\t// Show messages where applicable.\n\t\t\t\tif ( 1 === selectedCount ) {\n\t\t\t\t\tmsgs[0].style.display = 'block';\n\t\t\t\t} else if ( selectedCount >= 2 ) {\n\t\t\t\t\tmsgs[1].style.display = 'block';\n\t\t\t\t\tdocument.getElementById( 'llms-importing-number' ).textContent = selectedCount;\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t\t// Trigger a change event so the UI displays properly on page load.\n\t\timports[0].dispatchEvent( new Event( 'change' ) );\n\n\t\t/**\n\t\t * Start a spinner when the \"Import Courses\" button is clicked.\n\t\t *\n\t\t * @since 4.8.0\n\t\t */\n\t\tsubmit.addEventListener( 'click', function() {\n\t\t\tLLMS.Spinner.start( jQuery( submit ), 'small' );\n\t\t} );\n\t}\n\n\tif ( exitLink && 'finish' !== currStep.value ) {\n\t\t/**\n\t\t * When users click \"Exit Setup\" prior to setup completion, open a confirmation dialog\n\t\t *\n\t\t * @since 4.8.0\n\t\t */\n\t\texitLink.addEventListener( 'click', function( e ) {\n\t\t\tif ( ! window.confirm( exitLink.dataset.confirm ) ) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t} );\n\t}\n\n\tif ( checkboxToggle ) {\n\t\tcheckboxToggle.addEventListener( 'click', function() {\n\t\t\tconst hiddenFields = this.parentNode.parentNode.querySelectorAll( '.is-hidden,.is-visible' );\n\n\t\t\tfor ( let i = 0; i < hiddenFields.length; i++ ) {\n\t\t\t\thiddenFields[ i ].classList.toggle( 'is-visible' );\n\t\t\t\thiddenFields[ i ].classList.toggle( 'is-hidden' );\n\t\t\t}\n\t\t} );\n\t}\n}() );\n"],"names":["currStep","document","getElementById","exitLink","querySelector","imports","querySelectorAll","checkboxToggle","getElementsByClassName","length","submit","msgs","getSelectedImportCount","let","count","forEach","el","checked","addEventListener","msg","style","display","selectedCount","disabled","textContent","dispatchEvent","Event","LLMS","Spinner","start","jQuery","value","e","window","confirm","dataset","preventDefault","hiddenFields","this","parentNode","i","classList","toggle"],"mappings":"AAOA,CAAE,WACD,MACCA,EAAiBC,SAASC,eAAgB,yBAA0B,EACpEC,EAAiBF,SAASG,cAAe,kBAAmB,EAC5DC,EAAiBJ,SAASK,iBAAkB,8CAA+C,EAC3FC,EAAiBN,SAASO,uBAAwB,sBAAuB,EAAG,IAAO,KAEpF,GAAKH,EAAQI,OAAS,CACrB,MACCC,EAAST,SAASC,eAAgB,mBAAoB,EACtDS,EAASV,SAASK,iBAAkB,0CAA2C,EAShF,SAASM,IACRC,IAAIC,EAAQ,EAQZ,OANAT,EAAQU,QAAS,SAAUC,GACrBA,EAAGC,SACP,EAAEH,CAEJ,CAAE,EAEKA,CACR,CAOAT,EAAQU,QAAS,SAAUC,GAC1BA,EAAGE,iBAAkB,SAAU,WAE9BP,EAAKI,QAAS,SAAUI,GACvBA,EAAIC,MAAMC,QAAU,MACrB,CAAE,EAEF,IAAMC,EAAgBV,EAAuB,EAG7CF,EAAOa,SAAW,IAAMX,EAAuB,EAAI,WAAa,KAG3D,IAAMU,EACVX,EAAK,GAAGS,MAAMC,QAAU,QACI,GAAjBC,IACXX,EAAK,GAAGS,MAAMC,QAAU,QACxBpB,SAASC,eAAgB,uBAAwB,EAAEsB,YAAcF,EAEnE,CAAE,CACH,CAAE,EAGFjB,EAAQ,GAAGoB,cAAe,IAAIC,MAAO,QAAS,CAAE,EAOhDhB,EAAOQ,iBAAkB,QAAS,WACjCS,KAAKC,QAAQC,MAAOC,OAAQpB,CAAO,EAAG,OAAQ,CAC/C,CAAE,CACH,CAEKP,GAAY,WAAaH,EAAS+B,OAMtC5B,EAASe,iBAAkB,QAAS,SAAUc,GACtCC,OAAOC,QAAS/B,EAASgC,QAAQD,OAAQ,GAC/CF,EAAEI,eAAe,CAEnB,CAAE,EAGE7B,GACJA,EAAeW,iBAAkB,QAAS,WACzC,IAAMmB,EAAeC,KAAKC,WAAWA,WAAWjC,iBAAkB,wBAAyB,EAE3F,IAAMO,IAAI2B,EAAI,EAAGA,EAAIH,EAAa5B,OAAQ+B,CAAC,GAC1CH,EAAcG,GAAIC,UAAUC,OAAQ,YAAa,EACjDL,EAAcG,GAAIC,UAAUC,OAAQ,WAAY,CAElD,CAAE,CAEJ,EAAI","sourceRoot":"../../js"}