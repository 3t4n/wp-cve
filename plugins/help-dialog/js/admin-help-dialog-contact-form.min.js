jQuery(document).ready(function(e){function t(t,a,o,d,_,m){let s,c;a=void 0===a?"ephd_callback_noop":a,e.ajax({type:"POST",dataType:"json",data:t,url:ajaxurl,beforeSend:function(e){void 0!==m&&!1!==m||n("show",""),"object"==typeof m&&n("show","",m)}}).done(function(e){void 0!==(c=e||"").data&&(c.message=c.data),(c.error||void 0===c.message)&&(s=c.message?c.message:i("",ephd_vars.reload_try_again,"error"))}).fail(function(e,t,n){s=n?" ["+n+"]":ephd_vars.unknown_error,s=i(ephd_vars.error_occurred+". "+ephd_vars.msg_try_again,s,"error")}).always(function(){if(c=void 0===c?"":c,"function"==typeof _&&_(c),n("remove",""),s)return e(".ephd-bottom-notice-message").remove(),e("body #ephd-admin-page-wrap").append(s).removeClass("fadeOutDown"),void setTimeout(function(){e(".ephd-bottom-notice-message").addClass("fadeOutDown")},1e4);"function"==typeof a?"undefined"===o?a(c):a(c,o):d&&location.reload()})}function n(t,n,i){if("show"===t){let t=void 0===i?"":"ephd-admin-dialog-box-loading--relative",a='<div class="ephd-admin-dialog-box-loading '+t+'"><div class="ephd-admin-dbl__header"><div class="ephd-admin-dbl-icon ephdfa ephdfa-hourglass-half"></div>'+(n?'<div class="ephd-admin-text">'+n+"</div>":"")+'</div></div><div class="ephd-admin-dialog-box-overlay '+t+'"></div>';void 0===i?e("body").append(a):i.append(a)}else"remove"===t&&(e(".ephd-admin-dialog-box-loading").remove(),e(".ephd-admin-dialog-box-overlay").remove())}function i(e,t,n){return'<div class="ephd-bottom-notice-message"><div class="contents"><span class="'+n+'">'+(e?"<h4>"+e+"</h4>":"")+(t?"<p>"+t+"</p>":"")+'</span></div><div class="ephd-close-notice ephdfa ephdfa-window-close"></div></div>'}function a(t,n=""){e(".ephd-bottom-notice-message").remove(),e("body #ephd-admin-page-wrap").append(i(n,t,"error")),clearTimeout(_),_=setTimeout(function(){e(".ephd-bottom-notice-message").addClass("fadeOutDown")},1e4)}function o(t,n=""){e(".ephd-bottom-notice-message").remove(),e("body #ephd-admin-page-wrap").append(i(n,t,"success")),clearTimeout(_),_=setTimeout(function(){e(".ephd-bottom-notice-message").addClass("fadeOutDown")},1e4)}e(".ephd-admin__items-list__item tr").length||e(".ephd-admin__items-list__item").remove(),e(document).on("click",".ephd-admin__items-list__delete-all input",function(t){e("#ephd-admin__items-list__delete-all_confirmation").addClass("ephd-dialog-box-form--active")}),e(document).on("click",".ephd-admin__item-preview .ephd_edit_item, .ephd-cf__create-new-design-btn",function(n){n.preventDefault();let i=e(this).data("id");t({action:"ephd_load_contact_form",_wpnonce_ephd_ajax_action:ephd_help_dialog_vars.nonce,contact_form_id:void 0!==i?i:0},function(t){t.error||void 0===t.design_form||(e(".ephd-cf__create-new-design-btn, .ephd__welcome-message").hide(),e(".ephd-cf__design-form").replaceWith(t.design_form),e(".ephd-admin__item-preview").removeClass("ephd-admin__item-preview--active"))})}),e(document).on("click",".ephd-cf__design-form .ephd_save_contact_form",function(){let n=e(this).closest(".ephd-cf__design-form"),i=n.find('[name="contact_form_id"]').val();t({action:"ephd_save_contact_form",_wpnonce_ephd_ajax_action:ephd_help_dialog_vars.nonce,contact_form_id:i,contact_form_name:n.find('[name="contact_form_name"]').val(),contact_welcome_title:n.find('[name="contact_welcome_title"]').val(),contact_welcome_text:n.find('[name="contact_welcome_text"]').val(),contact_name_text:n.find('[name="contact_name_text"]').val(),contact_user_email_text:n.find('[name="contact_user_email_text"]').val(),contact_subject_text:n.find('[name="contact_subject_text"]').val(),contact_comment_text:n.find('[name="contact_comment_text"]').val(),contact_acceptance_text:n.find('[name="contact_acceptance_text"]').val(),contact_button_title:n.find('[name="contact_button_title"]').val(),contact_success_message:n.find('[name="contact_success_message"]').val()},function(t){t.error||void 0===t.message||void 0===t.design_form||(o(t.message),n.replaceWith(t.design_form),e(".ephd-admin__item-preview--"+i).length?e(".ephd-admin__item-preview--"+i).replaceWith(t.design_preview):e(t.design_preview).insertBefore(".ephd-cf__design-form"))})}),e(document).on("click",".ephd-cf__delete-contact-form-wrap input.ephd_delete_contact_form",function(t){e("#ephd-cf__delete-contact-form-confirmation").addClass("ephd-dialog-box-form--active")}),e("#ephd-cf__delete-contact-form-confirmation").on("submit",function(n){n.preventDefault();let i=e(this),a=e(".ephd-cf__design-form"),d=a.find('[name="contact_form_id"]').val();t({action:"ephd_delete_contact_form",_wpnonce_ephd_ajax_action:ephd_help_dialog_vars.nonce,contact_form_id:d},function(t){t.error||void 0===t.message||(o(t.message),i.removeClass("ephd-dialog-box-form--active"),a.removeClass("ephd-cf__design-form--active"),e(".ephd-admin__item-preview").addClass("ephd-admin__item-preview--active"),e(".ephd-admin__item-preview--"+d).fadeOut(function(){e(this).remove()}),e(".ephd-cf__create-new-design-btn, .ephd__welcome-message").show())})}),e(document).on("click",".ephd_cancel_contact_form",function(t){return t.preventDefault(),e(".ephd-cf__design-form").removeClass("ephd-cf__design-form--active"),e(".ephd-admin__item-preview").addClass("ephd-admin__item-preview--active"),e(".ephd-cf__create-new-design-btn, .ephd__welcome-message").show(),!1}),e(document).on("input",'.ephd-cf__feature-option-field__design_name input[type="text"]',function(){e(this).closest(".ephd-cf__design-form").find(".ephd-cf__design-form__title-text").html(e(this).val())}),e(document).on("click",'.ephd-cf__feature-option-field__design_name input[type="button"]',function(){e(this).closest(".ephd-cf__design-form").find(".ephd_save_contact_form").trigger("click")}),e(document).on("click",".ephd-cf__design-form__title-wrap .ephd-cf__edit-toggle",function(){e(this).closest(".ephd-cf__design-form").find(".ephd-cf__feature-option-field__design_name").slideToggle(200)}),e(document).on("click",".ephd-admin__item-preview .ephd-admin__item-preview__sub-items-btn",function(n){n.preventDefault();let i=e(this).data("id");t({action:"ephd_load_contact_form_preview",_wpnonce_ephd_ajax_action:ephd_help_dialog_vars.nonce,contact_form_id:void 0!==i?i:1},function(t){t.error||void 0===t.design_preview||e(".ephd-admin__item-preview--"+i).replaceWith(t.design_preview)})}),e(document).on("click",".ephd-admin__list-actions-row .ephd_save_contact_form_settings",function(n){n.preventDefault();let i=e(".ephd-cf__email-form"),a={action:"ephd_save_contact_form_settings",_wpnonce_ephd_ajax_action:ephd_help_dialog_vars.nonce,contact_submission_email:i.find('[name="contact_submission_email"]').val()};return t(a,function(t){t.error||void 0===t.message||(o(t.message),e(".ephd-cf__test-email-form").find('[name="email"]').val(a.contact_submission_email))}),!1}),e(document).on("click",".ephd-cf__test-email-form .ephd_test_contact_form_submission",function(n){n.preventDefault();let i=e(".ephd-cf__test-email-form"),d=i.find('[name="email"]').val(),_=e("#contact_submission_email").val();return t({action:"ephd_help_dialog_contact",_wpnonce:ephd_help_dialog_vars.nonce,jsnonce:ephd_help_dialog_vars.nonce,widget_id:i.find('[name="widget_id"]').val(),widget_name:i.find('[name="widget_name"]').val(),contact_form_id:i.find('[name="contact_form_id"]').val(),page_id:i.find('[name="page_id"]').val(),page_name:i.find('[name="page_name"]').val(),email:_,user_first_name:i.find('[name="user_first_name"]').val(),subject:i.find('[name="subject"]').val(),comment:i.find('[name="comment"]').val(),acceptance:i.find('[name="acceptance"]').val(),submission_email_test:i.find('[name="submission_email_test"]').val(),is_email_unsaved:d!==_},function(e){!1===e.success&&void 0!==e.message?a(e.message):e.error||void 0===e.message||o(e.message)}),!1}),e("#ephd-admin__items-list__delete-all_confirmation form").on("submit",function(n){n.preventDefault();let i={action:e(this).find('[name="action"]').val(),_wpnonce_ephd_ajax_action:ephd_help_dialog_vars.nonce};return e("#ephd-admin__items-list__delete-all_confirmation").removeClass("ephd-dialog-box-form--active"),t(i,function(t){if(!t.error&&void 0!==t.message){let n=e("#ephd-admin__items-list__delete-all_confirmation").parent().parent();o(t.message),n.find(".ephd-admin__items-list .ephd-admin__items-list__item").remove(),n.find(".ephd-admin__items-list__more-items-message").remove(),n.find(".ephd-admin__items-list__totally-found").html("0"),n.find(".ephd-admin__items-list__delete-all").hide()}}),!1});let d=function(n){n.preventDefault();let i=e(this).closest(".ephd-admin__items-list__item"),d=i.find('[name="item_id"]').val();if(void 0===d||!d)return void a(ephd_vars.reload_try_again);return t({action:i.find('[name="action"]').val(),item_id:d,_wpnonce_ephd_ajax_action:ephd_help_dialog_vars.nonce},function(e){if(!e.error&&void 0!==e.message){o(e.message);let t=i.closest(".ephd-admin__items-list").parent().parent().parent();parseInt(t.find('[name="page_number"]').val());t.find(".ephd-admin__items-list__totally-found").html(e.total_number),i.fadeOut(500,function(){i.remove(),0===parseInt(e.total_number)&&t.find(".ephd-admin__items-list__delete-all").hide()})}}),!1};e(".ephd-admin__items-list form.ephd-admin__items-list__field-actions__form").on("submit",d),e(".ephd-admin__items-list__more-items-message form").on("submit",function(n){n.preventDefault();let i=e(this).closest(".ephd-admin__items-list__more-items-message").parent(),a=e(this),o=i.find(".ephd-admin__items-list .ephd-admin__items-list__no-results"),_=parseInt(a.find('[name="page_number"]').val());return t({action:a.find('[name="action"]').val(),page_number:_+1,_wpnonce_ephd_ajax_action:ephd_help_dialog_vars.nonce},function(t){if(!t.error&&void 0!==t.message){let n=e(t.items);n.css("display","none"),_+=1,n.find("form.ephd-admin__items-list__field-actions__form").on("submit",d),t.total_number<=t.per_page*_&&i.find(".ephd-admin__items-list__more-items-message").remove(),e(o).before(n),n.fadeIn(1e3),a.find('[name="page_number"]').val(_)}}),!1});let _});