jQuery(document).ready(function(e){e('input[name="file-upload"]').fileuploader({changeInput:'<div class="fileuploader-input"><div class="fileuploader-input-inner"><div class="fileuploader-icon-main"></div><h3 class="fileuploader-input-caption"><span>${captions.feedback}</span></h3><p>${captions.or}</p><button type="button" class="fileuploader-input-button"><span>Browse files</span></button></div></div>',theme:"dragdrop",upload:{url:ajax.ajax_url,data:{action:"upload_file",post_id:ajax.post_id,nonce:ajax.uploader_nonce},type:"POST",enctype:"multipart/form-data",start:!0,synchron:!0,beforeSend:"",onSuccess:function(a,i){a=JSON.parse(a),e(".filr-download-link code").text(a.download_link);var n={};if(a?n=a:n.hasWarnings=!0,n.isSuccess&&n.files[0]&&(i.name=n.files[0].name,i.html.find(".column-title > div:first-child").text(n.files[0].name).attr("title",n.files[0].name)),n.hasWarnings){for(var t in n.warnings)alert(n.warnings[t]);return i.html.removeClass("upload-successful").addClass("upload-failed"),this.onError?this.onError(i):null}i.html.find(".fileuploader-action-remove").addClass("fileuploader-action-success"),setTimeout(function(){i.html.find(".progress-bar2").fadeOut(400)},400)},onError:function(e){var a=e.html.find(".progress-bar2");a.length&&(a.find("span").html("0%"),a.find(".fileuploader-progressbar .bar").width("0%"),e.html.find(".progress-bar2").fadeOut(400)),"cancelled"!=e.upload.status&&0==e.html.find(".fileuploader-action-retry").length&&e.html.find(".column-actions").prepend('<button type="button" class="fileuploader-action fileuploader-action-retry" title="Retry"><i class="fileuploader-icon-retry"></i></button>')},onProgress:function(e,a){var i=a.html.find(".progress-bar2");i.length>0&&(i.show(),i.find("span").html(e.percentage+"%"),i.find(".fileuploader-progressbar .bar").width(e.percentage+"%"))},onComplete:null},onRemove:function(a){e.ajax({type:"post",dataType:"json",url:ajax.ajax_url,data:{action:"delete_file",post_id:ajax.post_id,filename:a.name,nonce:ajax.uploader_nonce}})},captions:e.extend(!0,{},e.fn.fileuploader.languages.en,{feedback:ajax.translations[0],feedback2:ajax.translations[0],drop:ajax.translations[0],or:ajax.translations[1],button:ajax.translations[2]})}),e((data=ajax.file_data).files).each(function(){var a='<div class="column-thumbnail"><div class="fileuploader-item-image fileuploader-no-thumbnail"><div style="background-color:#7200e5" class="fileuploader-item-icon"><i>'+this.extension+'</i></div></div><span class="fileuploader-action-popup"></span></div>';e(".fileuploader-items-list").append('<li class="fileuploader-item" data-file-name="'+this.name+'"><div class="columns">'+a+'<div class="column-title"><div title="'+this.name+'">'+this.old_name+"</div><span>"+this.size2+'</span></div><div class="column-actions"><button type="button" class="fileuploader-action fileuploader-action-remove" title="Delete" data-file-name="'+this.name+'"><i class="fileuploader-icon-remove"></i></button></div></div></li>')}),e(".fileuploader-action-remove").on("click",function(){var a=e(this).attr("data-file-name");e.ajax({type:"post",dataType:"json",url:ajax.ajax_url,data:{action:"delete_file",post_id:ajax.post_id,filename:a,nonce:ajax.uploader_nonce},success:function(i){!0===i.delete&&e(".fileuploader-items-list").find("[data-file-name='"+a+"']").remove(),e(".filr-download-link code").text(i.download_link)}})}),e("input.premium").attr("disabled","disabled");var a=e("input.premium").parent();e(a).append('<span class="pro">PRO</span>'),e("select.premium").attr("disabled","disabled");var a=e("select.premium").parent();e(a).append('<span class="pro">PRO</span>')});