!function(o){"use strict";o(document).ready(function(){var i=o(".panel-top-actions button.youzify-save-options").text();o(document).on("click",".youzify-fixed-save-btn",function(e){if(e.preventDefault(),o(this).hasClass("youzify-loading"))return!1;o(".youzify-settings-form").trigger("submit")}),o(".youzify-settings-form").submit(function(e){e.preventDefault(),o.youzify_saving_options_effect(),o("#youzify-wait-message").show();var i=o(this).serialize(),t=new Array,n=o("input[type=checkbox][name*='youzify_options'][name*='[]']");n.each(function(){var e=o(this).attr("name");-1==o.inArray(e,t)&&t.push(e)}),o.each(t,function(e,t){0==n.filter("[name='"+t+"']:checked").length&&(i+="&"+t.replace("[]","")+'=""')}),o.post(Youzify.ajax_url,i,function(e){if(o.youzify_saving_options_effect({step:"end"}),o("#youzify-wait-message").hide(),e.success){if(o.ShowPanelMessage({type:"success",msg:e.data.message}),"refresh"==e.data.result){if(e.data.redirect_url)return void(window.location.href=e.data.redirect_url);location.reload()}}else o.ShowPanelMessage({msg:e.data.message,type:"error"})})}),o.youzify_saving_options_effect=function(e){var t=o.extend({step:"processing"},e);"processing"==t.step?(o(".youzify-fixed-save-btn").addClass("youzify-loading"),o(".youzify-save-options").fadeOut(800,function(){o(this).prop("disabled",!0);o(this).html('<i class="fas fa-spinner fa-spin"></i>').fadeIn(1e3)})):"end"==t.step&&(o(".youzify-fixed-save-btn").removeClass("youzify-loading"),o(".youzify-save-options").fadeOut(200,function(){o(this).html(i).fadeIn(1e3),o(this).prop("disabled",!1)}))},o(".youzify-picker-input").wpColorPicker(),o(document).on("click",".uk-upload-button",function(e){e.preventDefault();var t,i=o(this).closest(".uk-uploader");(t=wp.media.frames.kainelabs_uploader=wp.media({title:"Insert Images",library:{type:"image"},button:{text:"Select"},multiple:!1})).on("select",function(){t.state().get("selection").map(function(e){e=e.toJSON(),i.find(".uk-photo-url").val(e.url),i.find(".uk-photo-preview").css("backgroundImage","url("+e.url+")")})}),t.open()}),o.enable_live_preview=function(){o(".uk-photo-url").bind("input change",function(){var e=o(this).val(),t=o(this).closest(".uk-uploader");o.youzify_isImgExist(e)||(e=Youzify.default_img),t.find(".uk-photo-preview").css("backgroundImage","url("+e+")")})},o.enable_live_preview(),o.youzify_isImgExist=function(e,t){var i=new Image;t=void 0!==t?t:"photo";return i.src=e,0!=i.width||("banner"==t&&o.ShowPanelMessage({msg:Youzify.banner_url,type:"error"}),!1)},o(document).on("click",".youzify-confirm-reset",function(e){o(".uk-popup").removeClass("is-visible"),e.preventDefault();var t,i="&action=youzify_reset_settings",n=o(this).data("reset"),s="&reset_type="+n;"tab"===n?t=o(".youzify-settings-form").serialize()+i+s:"all"===n&&(t=i+s);o("#youzify-wait-message").show(),o.post(Youzify.ajax_url,t,function(e){o("#youzify-wait-message").hide(),e.success?(o.ShowPanelMessage({type:"success",msg:e.data.message}),location.reload()):o.ShowPanelMessage({msg:Youzify.reset_error,type:"error"})})}),o(document).on("click",".kl-hide-box-icon",function(e){e.preventDefault();var t=o(this).closest(".uk-box-item");t.find(".uk-box-content").fadeToggle(400,function(){t.toggleClass("kl-hide-box")})}),o(".uk-toggle-msg").click(function(e){e.preventDefault();var t=o(this).closest(".uk-panel-msg");t.find(".uk-msg-content").slideToggle(400,function(){t.toggleClass("uk-show-msg"),t.hasClass("uk-show-msg")?t.find("input").val("on"):t.find("input").val("off")})}),o(".uk-close-msg").click(function(e){o(this).closest(".uk-panel-msg").find("input").val("never"),o(this).closest(".uk-panel-msg").fadeOut(600)});var t=o(".youzify-panel-menu");o(".kl-toggle-btn").change(function(e){o.initResponsivePanel()}),o.initResponsivePanel=function(){o(".kl-toggle-btn").is(":checked")?t.slideDown():t.slideUp()},o(window).on("resize",function(e){e.preventDefault(),768<o(window).width()?t.fadeIn(1e3):o.initResponsivePanel()}),o(".uk-sidebar a").click(function(e){o(".kl-toggle-btn").is(":checked")&&o(window).width()<769&&(o(".kl-toggle-btn").attr("checked",!1),t.slideUp(400,function(){o("html, body").animate({scrollTop:o(".youzify-main-content").offset().top-o(".kl-responsive-menu").height()},600)}))}),o(".youzify-reset-options").on("click",function(e){e.preventDefault(),o("#uk_popup_reset_tab").addClass("is-visible")}),o("#youzify-reset-all-settings").on("click",function(e){e.preventDefault(),o("#uk_popup_reset_all").addClass("is-visible")})})}(jQuery);