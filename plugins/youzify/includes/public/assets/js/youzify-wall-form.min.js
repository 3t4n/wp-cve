!function(d){"use strict";d(document).ready(function(){var n,e=!1,o=!1,i=!1;function t(){d("<link/>",{rel:"stylesheet",href:Youzify.assets+"css/youzify-url-preview.min.css"}).appendTo("head"),d("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-url-preview.min.js"}).appendTo("head")}function u(){for(var e,i,t,a=document.cookie.split(";"),o={},s=0;s<a.length;s++)e=(t=a[s]).indexOf("="),i=d.trim(unescape(t.slice(0,e))),t=unescape(t.slice(e+1)),0===i.indexOf("bp-")&&(o[i]=t);return encodeURIComponent(d.param(o))}d(".youzify-wall-form-show-all").on("click",function(e){d(".youzify-wall-form-show-all").fadeOut(function(){d(".youzify-wall-opts-item").fadeIn(),d(this).remove()})}),d(document).on("input click",".youzify-wall-textarea, .ac-input",function(){d(this).next(".youzify-load-emojis").attr("data-cursor",d(this).prop("selectionStart"))}),d(document).on("focus",".youzify-wall-textarea",function(){0==e&&(d(this).closest("form").find(".youzify-lp-prepost").get(0)&&t(),e=!0)}),d(document).on("click",".youzify-edit-tool",function(){0==e&&(!d("#youzify-wall-form").find(".youzify-lp-prepost").get(0)&&d("#youzify-wall-form").get(0)||t(),e=!0)}),d(document).on("click",".youzify-load-emojis",function(){d(this).closest("form");d(this).find("i").attr("class","fas fa-spin fa-spinner"),d(this).addClass("loading"),d("<link/>",{rel:"stylesheet",href:Youzify.assets+"css/youzify-emojionearea.min.css"}).appendTo("head"),d("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-emojionearea.min.js"}).appendTo("head")}),d(document).on("click",".youzify-wall-post",function(){var a=0,o=d(this),s=d(this).text(),n=o.closest("form#youzify-wall-form"),l={},e=(d.each(n.serializeArray(),function(e,i){"_"!==i.name.substr(0,1)&&"whats-new"!==i.name.substr(0,9)&&(l[i.name]?d.isArray(l[i.name])?l[i.name].push(i.value):l[i.name]=new Array(l[i.name],i.value):l[i.name]=i.value)}),n.find("*").each(function(){(d.nodeName(this,"textarea")||d.nodeName(this,"input"))&&d(this).prop("disabled",!0)}),n.find(".youzify-wall-textarea").get(0).Youzify_emojioneArea&&n.find(".youzify-wall-textarea").data("Youzify_emojioneArea").disable(),o.addClass("loading"),o.prop("disabled",!0),n.addClass("submitted"),o.css("min-width",o.css("width")),o.html('<i class="fas fa-spinner fa-spin"></i>'),""),i=n.find("#whats-new-post-in").val(),t=n.find("#whats-new").val(),f=d("#youzify ul.activity-list li").first(),y=f,c=null;return(c=f.length?(y=y.hasClass("load-newest")?f.next():y).prop("class").match(/date-recorded-([0-9]+)/):c)&&(a=c[1]),0<i&&(e=n.find("#whats-new-post-object").val()),y=d.extend({action:"youzify_post_update",cookie:u(),_youzify_wpnonce_post_update:d("#_youzify_wpnonce_post_update").val(),content:t,object:e,item_id:i,since:a,_bp_as_nonce:d("#_bp_as_nonce").val()||""},l),d.post(ajaxurl,y,function(e){var i,t;n.find("*").each(function(){(d.nodeName(this,"textarea")||d.nodeName(this,"input"))&&d(this).prop("disabled",!1)}),n.find(".youzify-wall-textarea").get(0).Youzify_emojioneArea&&n.find(".youzify-wall-textarea").data("Youzify_emojioneArea").enable(),0==e.success?d.youzify_DialogMsg("error",e.data.error):(o.html('<i class="fas fa-check"></i>').hide().fadeIn("slow"),n.find(".youzify-delete-attachment").trigger("click"),0===d("ul.activity-list").length&&(d("div.error").slideUp(100).remove(),d("#message").slideUp(100).remove(),d("div.activity").append('<ul id="activity-stream" class="activity-list item-list">')),f.hasClass("load-newest")&&f.remove(),d("#activity-stream").prepend(e),a||d("#activity-stream li:first").addClass("new-update just-posted"),d(e).get(0)&&d("body,html").animate({scrollTop:d("#"+d(e).attr("id")).offset().top-65+"px"},1e3),0!==d("#latest-update").length&&(e=d("#activity-stream li.new-update .activity-content .activity-inner p").html(),i=d("#activity-stream li.new-update .activity-content .activity-header p a.view").attr("href"),t=""!==d("#activity-stream li.new-update .activity-content .activity-inner p").text()?e+" ":"",t+='<a href="'+i+'" rel="nofollow">'+BP_DTheme.view+"</a>",d("#latest-update").slideUp(300,function(){d("#latest-update").html(t),d("#latest-update").slideDown(300)})),d("li.new-update").hide().slideDown(300),d("li.new-update").removeClass("new-update"),d("#whats-new").val(""),"activity_slideshow"==l.post_type&&d.youzify_sliders_init(),n.get(0).reset(),n.find(".youzify-wall-textarea").get(0).Youzify_emojioneArea&&n.find(".youzify-wall-textarea").get(0).Youzify_emojioneArea.setText(""),n.find('.bp-checkins input[type="hidden"]').val(""),n.find(".youzify-checkin-close-icon,.youzify-remove-map").trigger("click"),n.find(".youzify-tagged-user .youzify-tagusers-delete-user, .youzify-list-delete-item, .youzify-list-close-icon").trigger("click"),n.find("div.youzify-activity-privacy").find(".list div").first().trigger("click"),n.find("#whats-new-post-in").find("option").first().trigger("click"),window.hasOwnProperty("youzify_disable_niceselect")||n.find("#whats-new-post-in").niceSelect("update"),d("#whats-new-post-in").trigger("change"),n.find('.youzify-wall-options input:radio[name="post_type"]').first().trigger("change"),n.find(".youzify-lp-prepost .lp-button-cancel").trigger("click"),"activity_giphy"==l.post_type&&(n.find(".youzify-delete-giphy-item").trigger("click"),n.find(".youzify-giphy-submit-search").val("").trigger("click")),-1!==jQuery.inArray(l.post_type,["activity_poll","activity_versus_poll","activity_hotornot_poll","activity_classic_poll"])&&(n.find(".youzify-wall-cf-input").val(""),n.find(".youzify-wall-custom-form .youzify-wall-cf-item:not(:nth-child(1)):not(:nth-child(2)) .youzify-wall-form-remove-item").trigger("click")),newest_activities="",activity_last_recorded=0),setTimeout(function(){o.html(s).fadeIn("slow")},1e3),n.find(".youzify-wall-post,.youzify-update-post").prop("disabled",!1).removeClass("loading"),"youzify-share-activity-wrapper"==n.parent().attr("id")&&d(".youzify-modal-close-icon").trigger("click")}),!1}),d(document).on("change",'input:radio[name="post_type"]',function(e){var i=d(this).closest("form"),t=d(this).val(),a=d(this).data("uploader");switch(!(1<d('input:radio[name="post_type"]').length)||0==i.find('.youzify-wall-custom-form[data-post-type!="'+t+'"]').length?i.find('.youzify-wall-custom-form[data-post-type="'+t+'"]').fadeIn():i.find('.youzify-wall-custom-form[data-post-type!="'+t+'"]').fadeOut(1,function(){i.find('.youzify-wall-custom-form[data-post-type="'+t+'"]').fadeIn()}),t){case"activity_video":i.find(".youzify-upload-attachments").attr("accept","video/*");break;case"activity_audio":i.find(".youzify-upload-attachments").attr("accept","audio/*");break;case"activity_file":i.find(".youzify-upload-attachments").removeAttr("accept");break;case"activity_poll":o||(d("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-polls.min.js"}).appendTo("head"),o=!0);break;default:i.find(".youzify-upload-attachments").attr("accept","image/*")}"on"==a?(void 0!==e.originalEvent&&"activity_quote"!=t&&"activity_link"!=t&&"youzify-edit-activity-wrapper"!=i.parent().attr("id")&&i.find(".youzify-wall-actions .youzify-wall-upload-btn").trigger("click"),i.find(".youzify-wall-actions .youzify-wall-upload-btn").fadeIn()):i.find(".youzify-wall-actions .youzify-wall-upload-btn").fadeOut(),i.find('.youzify-wall-custom-form[data-post-type="'+t+'"]').find('input[type="text"]')[0]&&i.find('.youzify-wall-custom-form[data-post-type="'+t+'"]').find('input[type="text"]')[0].focus(),i.find(".youzify-delete-attachment").trigger("click"),i.find(".youzify-attachment-item").remove()}),d('input:radio[name="post_type"]').first().trigger("change"),d(document).on("click",".youzify-wall-upload-btn",function(e){youzify_load_attachments||(d("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-attachments.min.js"}).appendTo("head"),d("<link/>",{rel:"stylesheet",href:Youzify.assets+"css/youzify-attachments.min.css"}).appendTo("head"),youzify_load_attachments=!0),d(this).closest("form").find(".youzify-wall-attachments .youzify-upload-attachments").click(),e.preventDefault()}),d(document).on("click",".youzify-tag-users-tool",function(){var a,o,s,n=d(this).closest("form");n.find(".youzify-feeling-form,.youzify-checkin-form").fadeOut(),d(this).hasClass("loaded")?(n.find(".youzify-tagusers-form").fadeToggle(),n.find(".youzify-tagusers-search-input").focus()):(a=d(this),o=a.find("i"),s=o.attr("class"),o.attr("class","fas fa-spinner fa-spin"),d.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"youzify_tag_users_get_user_friends"},success:function(e){a.addClass("loaded");var t,i=d("<div></div>").append(e.data);"youzify-edit-activity-wrapper"==n.parent().attr("id")&&(t=[],n.find('input[name="tagged_users[]"]').each(function(){i.find('.youzify-list-item[data-user-id="100"] ').fadeOut(),t.push(d(this).val())}),i.find(".youzify-list-item").each(function(e,i){-1!==jQuery.inArray(d(this).attr("data-user-id"),t)&&d(this).find(".youzify-wall-tag-user").hide()})),n.find(".youzify-tagusers-form").fadeIn(200,function(){o.attr("class",s),n.find(".youzify-tagusers-search-input").focus(),n.find(".youzify-wall-tagusers-list").html(i)})}}))}),d(document).on("click",".youzify-checkin-tool",function(){var e=d(this).closest("form");e.find(".youzify-feeling-form,.youzify-tagusers-form").fadeOut(),e.find(".youzify-checkin-form").fadeToggle(),e.find(".youzify-checkin-search-input").focus(),i||"object"!=typeof google||"object"!=typeof google.maps||(d("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-checkin.min.js"}).appendTo("head"),i=!0)}),d(document).on("keyup",".youzify-list-search-input",function(){var e=d(this).closest(".youzify-wall-list"),i=this.value.toLowerCase().trim();e.find(".youzify-wall-list-items .youzify-list-item").show().filter(function(){return-1==d(this).find(".youzify-item-title, .youzify-item-description").text().toLowerCase().trim().indexOf(i)}).hide()}),d(document).on("click",".youzify-user-mood-tool",function(){var i,t,a,o=d(this).closest("form");o.find(".youzify-tagusers-form,.youzify-checkin-form").fadeOut(),d(this).hasClass("loaded")?(o.find(".youzify-feeling-form").fadeToggle(),o.find(".youzify-feeling-search-input").focus()):(o.find(".youzify-feeling-form").attr("data-placeholder",o.find(".youzify-feeling-search-input").attr("placeholder")),i=d(this),t=i.find("i"),a=t.attr("class"),t.attr("class","fas fa-spinner fa-spin"),d.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"youzify_feeling_activity_get_categories"},success:function(e){i.addClass("loaded"),o.find(".youzify-feeling-form").fadeIn(200,function(){t.attr("class",a),o.find(".youzify-feeling-search-input").focus(),o.find(".youzify-wall-feeling-list").html(e.data)})}}))}),d(document).on("click",".youzify-feeling-item",function(e){e.preventDefault();var e=d(this),i=e.closest(".youzify-wall-feeling");d(this).parent().hasClass("youzify-list-category-items")?d.youzify_select_mood_emojis(i,e.attr("data-emoji"),e.attr("data-category-title"),e.find(".youzify-item-img").css("background-image")):(i.find(".youzify-list-items-title").text(e.attr("data-category-title")),i.find('input[name="mood_type"]').val(e.attr("data-category")),i.find(".youzify-list-categories").fadeOut(),i.find(".youzify-feeling-close-icon").addClass("youzify-feeling-go-back"),i.find(".youzify-feeling-close-icon i").attr("class","far fa-arrow-alt-circle-left"),i.find('input[name="mood_search"]').val("").attr("placeholder",e.find(".youzify-item-description").text()),i.find(".youzify-list-search-icon i").attr("class",e.find(".youzify-item-icon i").attr("class")),(1==(e=i.find('.youzify-list-category-items[data-category="'+d(this).attr("data-category")+'"]')).length?e:i.find(".youzify-list-submit-button")).fadeIn())}),d(document).on("click",".youzify-feeling-close-icon",function(){var e=d(this),i=e.closest(".youzify-wall-feeling");i.find(".youzify-feeling-submit-button").fadeOut(),i.find(".youzify-feeling-search-input").val(""),i.find(".youzify-feeling-search-input").attr("placeholder",i.find(".youzify-feeling-form").attr("data-placeholder")),i.find(".youzify-feeling-search-icon i").attr("class","fas fa-search"),e.hasClass("youzify-feeling-go-back")?(e.find("i").attr("class","fas fa-times"),i.find(".youzify-list-categories, .youzify-list-item").fadeIn(),i.find(".youzify-list-category-items").fadeOut(),e.removeClass("youzify-feeling-go-back")):e.closest(".youzify-feeling-form").fadeOut()}),d(document).on("click",".youzify-wall-feeling .youzify-list-edit-item",function(){var e=d(this),i=e.closest(".youzify-wall-feeling"),t=i.find(".youzify-list-selected-items");t.fadeOut(200,function(){i.find(".youzify-feeling-search-input").val(t.find(".youzify-item-title").text()),e.closest(".youzify-selected-item").fadeOut(200,function(){d(this).remove()}),i.find(".youzify-feeling-form").fadeIn(),i.removeClass("youzify-activity-feeling-selected")})}),d(document).on("click",".youzify-wall-feeling .youzify-list-delete-item",function(){var e=d(this),i=e.closest(".youzify-wall-feeling"),t=i.find(".youzify-list-selected-items");t.fadeOut(200,function(){t.find(".youzify-item-title").text(""),e.closest(".youzify-selected-item").fadeOut(200,function(){d(this).remove()}),i.find(".youzify-feeling-close-icon").trigger("click"),i.removeClass("youzify-activity-feeling-selected")})}),d(document).on("click",".youzify-feeling-submit-button",function(){var e=d(this).closest(".youzify-wall-feeling"),i=e.find(".youzify-feeling-search-input").val();""!=i.trim()&&d.youzify_select_mood_emojis(e,i,i)}),d(document).on("keypress",".youzify-feeling-search-input",function(e){13==e.keyCode&&(e.preventDefault(),"none"!=(e=d(this).next(".youzify-feeling-submit-button")).css("display"))&&e.click()}),d.youzify_select_mood_emojis=function(e,i,t,a){e.hasClass("youzify-activity-feeling-selected")&&e.find(".youzify-selected-item").remove(),e.addClass("youzify-activity-feeling-selected"),e.find(".youzify-feeling-form").fadeOut(0,function(){e.find(".youzify-feeling-selected-items").fadeIn()});var o=null==a?"":"<div class='youzify-item-img' style='background-image: "+a+";'></div>",a=null==a?" youzify-selected-item-no-image":"";e.find(".youzify-list-selected-items").append('<div class="youzify-selected-item youzify-feeling-selected-item'+a+'">'+o+'<div class="youzify-item-title">'+t+'</div><i class="fas fa-pencil-alt youzify-selected-item-tool youzify-list-edit-item"></i><i class="fas fa-trash-alt youzify-selected-item-tool youzify-list-delete-item"></i><input type="hidden" name="mood_value" value="'+i+'"></div>').fadeIn(),e.find(".youzify-feeling-search-input").val("")},d(document).on("click",".youzify-wall-tag-user",function(){var i,t=d(this);t.hasClass("youzify-selected")||(t.addClass("youzify-selected"),i=t.closest(".youzify-list-item"),d(this).fadeOut(200,function(){var e="<div class=\"youzify-selected-item youzify-tagged-user\"><div class='youzify-item-img' style='background-image: "+i.find(".youzify-item-img").css("background-image")+';\'></div><div class="youzify-item-title">'+i.find(".youzify-item-title").text()+'</div><i class="fas fa-trash-alt youzify-selected-item-tool youzify-list-delete-item youzify-tagusers-delete-user" data-user-id="'+i.attr("data-user-id")+'"></i><input type="hidden" name="tagged_users[]" value="'+i.attr("data-user-id")+'"></div>',e=(i.closest(".youzify-wall-tagusers").find(".youzify-tagged-users").append(e),t.closest(".youzify-wall-tagusers").find(".youzify-tagged-user").length,t.closest(".youzify-wall-tagusers"));1==e.find(".youzify-tagged-user").length&&e.find(".youzify-tagged-users").fadeIn()}))}),d(document).on("click",".youzify-list-close-icon.youzify-tagusers-close-icon",function(){d(this).closest(".youzify-tagusers-form").fadeOut()}),d(document).on("click",".youzify-tagusers-delete-user",function(){d(this).parent();var e=d(this).closest(".youzify-wall-tagusers"),i=d(this).closest(".youzify-tagged-users");e.find(".youzify-list-item[data-user-id="+d(this).attr("data-user-id")+"] .youzify-wall-tag-user").removeClass("youzify-selected").fadeIn(),d(this).parent().fadeOut(200,function(){d(this).remove(),0==i.find(".youzify-tagged-user").length&&i.fadeOut()})}),d(document).on("change","#whats-new-post-in",function(e){0!=d(this).val()?d(this).closest(".youzify-wall-actions").find("div.youzify-activity-privacy").fadeOut():d(this).closest(".youzify-wall-actions").find("div.youzify-activity-privacy").fadeIn()}),d(document).on("click",".youzify-send-comment",function(e){var a,o,s,n,i,t,l,f,y;if(e.preventDefault(),!d(this).hasClass("loading"))return a=d(this),y=a.closest(".activity"),a.addClass("loading"),f=a.find("i").attr("class"),a.find("i").attr("class","fas fa-spinner fa-spin"),e=(o=a.parents("form")).parent(),n=o.attr("id").split("-"),e=e.hasClass("activity-comments")?n[2]:e.attr("id").split("-")[1],s=y.find("#"+o.attr("id")+" textarea"),y.find("#"+o.attr("id")+" div.error").hide(),a.addClass("loading").prop("disabled",!0),s.addClass("loading").prop("disabled",!0),i={action:"new_activity_comment",cookie:u(),_wpnonce_new_activity_comment:d("#_wpnonce_new_activity_comment").val(),comment_id:e,form_id:n[2],post_type:"activity_comment",content:s.val()},(t=d("#_bp_as_nonce_"+e).val())&&(i["_bp_as_nonce_"+e]=t),d.post(ajaxurl,i,function(i){var t,e;a.removeClass("loading"),s.removeClass("loading"),a.find("i").attr("class",f),i[0]+i[1]==="-1"?o.append(d(i.substr(2,i.length)).hide().fadeIn(200)):(t=o.parent(),o.fadeOut(200,function(){0===t.children("ul").length&&(t.hasClass("activity-comments")?t.prepend("<ul></ul>"):t.append("<ul></ul>"));var e=d.trim(i);t.children("ul").append(d(e).hide().fadeIn(200)),o.children("textarea").val(""),t.parent().addClass("has-comments")}),y.find("#"+o.attr("id")+" textarea").val(""),l=Number(d("#activity-"+n[2]+" a.acomment-reply span").html())+1,d("#activity-"+n[2]+" a.acomment-reply span").html(l),(l=t.closest(".activity-comments").find(".show-all a"))&&(e=l.text().match(/\((.*)\)/))&&l.html(BP_DTheme.show_x_comments.replace("%d",Number(e[1])+1))),d(a).prop("disabled",!1),d(s).prop("disabled",!1)}),!1}),d(document).on("keypress",".ac-form textarea",function(e){13!=e.which||e.shiftKey||(e.preventDefault(),d(this).closest("form").find(".youzify-send-comment").click())}),d.youzify_isPostType=function(e,i){return i==e.find('input:radio[name="post_type"]:checked').val()},d(document).on("click",".share-activity",function(e){var o,s;e.preventDefault(),d(".share-activity.loading")[0]||(e=(o=d(this)).parents("li").attr("id").split("-")[1],o.attr("data-activity-type"),s=!0,o.hasClass("loading"))||(o.addClass("loading"),n=o,d("#youzify-edit-activity-wrapper"),e={action:"youzify_get_share_activity_form",youzify_share_activity_nonce:Youzify.security_nonce,activity_id:e},d.post(Youzify.ajax_url,e,function(e){var i,t,a;0==e.success?(n.remove(),d.youzify_DialogMsg("error",e.error)):(i=d(e.data.form),d("body").append(i.hide()),t=d(e.data.preview),t.insertAfter(i.find("textarea#whats-new")),jQuery.isFunction(d.fn.niceSelect)&&i.find('select:not([multiple="multiple"])').niceSelect(),150<t.height()&&(t.find(".youzify-shared-wrapper-container").addClass("youzify-collapsed-preview"),i.find(".youzify-shared-wrapper").append(e.data.show_all)),i.find("form").append('<input type="hidden" value="activity_share" name="post_type" />'),i.find("form").append('<input type="hidden" value="'+e.data.activity_id+'" name="secondary_item_id" />'),i.find(".youzify-wall-options").remove(),"on"==e.posts_emojis&&(s=!1,jQuery().Youzify_emojioneArea?i.find(".youzify-wall-textarea").Youzify_emojioneArea({pickerPosition:"bottom",autocomplete:!0,saveEmojisAs:"image",events:{ready:function(){this.editor.textcomplete([{id:"youzify_mentions",match:/\B@([\-\d\w]*)$/,search:function(i,e){var t=bp.mentions.users;e(d.map(t,function(e){return 0===e.ID.indexOf(i)||0===e.name.indexOf(i)?e:null}))},template:function(e){return'<img src="'+e.image+'" /><span class="username">@'+e.ID+"</span><small>"+e.name+"</small>"},replace:function(e){return"@"+e.ID+"&nbsp;"},cache:!0,index:1}])}}}):(d("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-emojionearea.min.js"}).appendTo("head"),d("<link/>",{rel:"stylesheet",href:Youzify.assets+"css/youzify-emojionearea.min.css"}).appendTo("head"))),i.find(".youzify-wall-upload-btn").remove(),a=setInterval(function(){(1==s||0==s&&i.find(".youzify-emojionearea").get(0))&&(clearInterval(a),o.attr("data-loaded","true"),o.removeClass("loading"),d.youzify_show_modal(i))},100))}).fail(function(e,i,t){return o.removeClass("loading"),d.youzify_DialogMsg("error",Youzify.unknown_error),!1}))}),d(document).on("click",".youzify-show-all-less div",function(){var e=d(this).parent();e.hasClass("active")?(e.removeClass("active"),e.prev(".youzify-shared-wrapper-container").addClass("youzify-collapsed-preview")):(e.addClass("active"),e.prev(".youzify-shared-wrapper-container").removeClass("youzify-collapsed-preview"))}),d(document).on("click",".youzify-wall-item-upload",function(e){youzify_load_attachments||(d("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-attachments.min.js"}).appendTo("head"),d("<link/>",{rel:"stylesheet",href:Youzify.assets+"css/youzify-attachments.min.css"}).appendTo("head"),youzify_load_attachments=!0);var i=d(this).closest(".youzify-attachments");if(i.find(".youzify-attachment-item")[0])return!1;i.find(".youzify-upload-attachments").click(),e.preventDefault()})})}(jQuery);