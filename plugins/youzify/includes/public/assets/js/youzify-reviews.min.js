!function(s){"use strict";s(document).ready(function(){var o;s(document).on("click","#youzify-add-review",function(e){e.preventDefault();var t=s("#youzify-review-form").serialize()+"&action=youzify_handle_user_reviews&operation="+s(this).attr("data-action")+"&security="+Youzify.security_nonce,i=s(this);i.text();i.attr("disabled","disabled"),i.addClass("loading"),s.post(ajaxurl,t,function(e){i.removeClass("loading");var t=s.parseJSON(e);return t.error?(s.youzify_DialogMsg("error",t.error),i.attr("disabled",!1)):(i.closest("#youzify-modal").find(".youzify-modal-close-icon").trigger("click"),"youzify-item-tools"!=o.parent().attr("class")&&o.find(".youzify-tool-name").text(t.edit_review),"edit"==t.action?(yyz,modalz_review_button.attr("data-review-id",t.review_id),o.attr("data-action","edit"),o.find(".youzify-tool-name").text(t.button_title),o.find(".youzify-tool-icon i").removeClass().addClass("fas fa-edit"),void 0!==o.attr("data-youzify-tooltip")&&o.attr("data-youzify-tooltip",t.button_title)):"delete_button"==t.action&&o.remove(),s.youzify_DialogMsg("success",t.msg)),!1}).fail(function(e,t,a){return i.attr("disabled","disabled"),s.youzify_DialogMsg("error",Youzify.unknown_error),!1})}),s(document).on("click",".youzify-review-btn, .youzify-review-tool.youzify-edit-tool",function(e){e.preventDefault(),o=s(this);var t,i=s(this),a=null;if(o.hasClass("youzify-review-btn")?(a=s(this).attr("data-review-id"),t=s(this).parent(".youzify-tools").data("user-id")):(a=s(this).parent(".youzify-item-tools").data("review-id"),t=s(this).parent(".youzify-item-tools").data("user-id")),s(this).hasClass("loading"))return!1;i.addClass("loading");var r={user_id:t,review_id:a,security:Youzify.security_nonce,action:"youzify_get_user_review_form",operation:s(this).attr("data-action")};s.post(Youzify.ajax_url,r,function(e){if(s.youzify_isJSON(e)){var t=s.parseJSON(e);return i.removeClass("loading"),s.youzify_DialogMsg("error",t.error),!1}i.attr("data-loaded","true"),i.removeClass("loading");var a=s(e);s.youzify_show_modal(a)}).fail(function(e,t,a){return i.removeClass("loading"),s.youzify_DialogMsg("error",Youzify.unknown_error),!1})}),s(document).on("click","#youzify-delete-review, .youzify-review-tool.youzify-delete-tool",function(e){e.preventDefault();var t,a=s(this);a.text();a.attr("disabled","disabled"),a.addClass("loading");var i=new FormData;t=a.hasClass("youzify-delete-tool")?s(this).parent(".youzify-item-tools").data("review-id"):a.closest(".youzify-modal").find('input[name="review_id"]').val(),i.append("review_id",t),i.append("action","youzify_delete_user_review"),i.append("security",Youzify.security_nonce),s.ajax({type:"POST",data:i,url:Youzify.ajax_url,contentType:!1,processData:!1,success:function(e){a.removeClass("loading"),a.attr("disabled",!1);var t=s.parseJSON(e);return t.error?(s.youzify_DialogMsg("error",t.error),a.attr("disabled",!1)):(a.hasClass("youzify-delete-tool")?a.closest(".youzify-review-item").fadeOut(300,function(){s(this).remove()}):(a.closest("#youzify-modal").find(".youzify-modal-close-icon").trigger("click"),o.find(".youzify-tool-name").text(t.edit_review),o.remove()),s.youzify_DialogMsg("success",t.msg)),!1}})})})}(jQuery);