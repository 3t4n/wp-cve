!function(n){"use strict";n(document).ready(function(){n(".youzify-selected-giphy-item");var a=!1,t=null;n(document).on("click",".youzify-giphy-item img",function(i){if(!0!==a){a=!0;var t=n(this).attr("data-original"),o=n(this).closest("form"),e=o.find(".youzify-selected-giphy-item");o.find(".youzify-wall-giphy-form .youzify-wall-cf-item").fadeOut(400,function(){o.find(".youzify-giphy-loading-preview").fadeIn(),e.find("input").val(t);var i=n("<img>").attr({src:t});e.prepend(i),n(i).on("load",function(i){o.find(".youzify-giphy-loading-preview").fadeOut(100,function(){e.fadeIn().css("display","inline-block"),a=!1})})})}}),n(document).on("click",".youzify-load-more-giphys",function(i){var t=n(this).closest("form");t.find(".youzify-load-more-giphys").addClass("loading");var o=parseInt(n(this).attr("data-page")),e={q:n(this).attr("data-query"),offset:o*Youzify_Wall.giphy_limit-2};n.youzify_LoadGiphyItems(t,e),n(this).attr("data-page",o+1)}),n(document).on("click",".youzify-comment-giphy-form .youzify-giphy-item",function(i){var t=n(this).closest("form");t.find("textarea").val('<img src="'+n(this).find("img").attr("src")+'" class="youzify-comment-gif" alt="">'),t.find(".youzify-send-comment").trigger("click"),t.find("textarea").val(""),n(".youzify-comment-giphy-form").fadeOut()}),n(document).on("click",".youzify-wall-add-activity_giphy",function(i){var t=n(this).closest("form");if("activity_giphy"==t.find('input:radio[name="post_type"]:checked').val())return!0;t.find(".youzify-giphy-item").remove(),n.youzify_LoadGiphyItems(t,{url:"https://api.giphy.com/v1/gifs/trending?"})}),n(document).on("click",".youzify-wall-add-gif > i",function(i){i.stopImmediatePropagation();var t=n(this).parent().find(".youzify-comment-giphy-form");"block"!=t.css("display")?(t.find(".youzify-giphy-item").remove(),t.fadeIn().find(".youzify-giphy-search-input").focus(),n.youzify_LoadGiphyItems(t,{url:"https://api.giphy.com/v1/gifs/trending?"})):t.fadeOut()}),n(document).on("keydown",".youzify-giphy-search-input",function(i){if(13!=i.keyCode){var o=n(this);clearTimeout(t),t=setTimeout(function(){var i=o.closest(".youzify-wall-giphy-form"),t=o.val();i.find(".youzify-load-more-giphys").fadeOut(1).attr({"data-query":t,"data-page":2}),i.find(".youzify-giphy-item").remove(),""!=t?n.youzify_LoadGiphyItems(i,{q:t}):n.youzify_LoadGiphyItems(i,{url:"https://api.giphy.com/v1/gifs/trending?"})},1e3)}else i.preventDefault()}),n(document).on("click",".youzify-delete-giphy-item",function(){var i=n(this).closest("form");i.find(".youzify-selected-giphy-item").fadeOut(400,function(){n(this).find("img").remove(),n(this).find("input").val(""),i.find(".youzify-wall-giphy-form .youzify-wall-cf-item").fadeIn()})}),n(document).mouseup(function(i){var t=n(".youzify-comment-giphy-form");t.is(i.target)||0!==t.has(i.target).length||t.fadeOut()}),n.youzify_LoadGiphyItems=function(o,i){o.find(".youzify-no-gifs-found").fadeOut();var e,a=n.extend({url:"https://api.giphy.com/v1/gifs/search?",api_key:"aFFKTuSMjd6j0wwjpFCPXZipQbcnw3vB",limit:Youzify_Wall.giphy_limit,fmt:"json",rating:"g"},i),y="";n.ajax({url:a.url+n.param(a),method:"GET",success:function(i){if(0!==i.data.length){for(e=0;e<a.limit;e++){var t=i.data[e].images;y+='<div class="youzify-giphy-item"><img src="'+t.fixed_height.url+'" data-original="'+t.original.url+'"></div>'}i.pagination.total_count>a.limit,n(n(y)).insertBefore(o.find(".youzify-load-more-giphys")),o.find(".youzify-load-more-giphys").removeClass("loading"),o.find(".youzify-load-more-giphys").fadeIn().css("display","inline-block"),n(".youzify-giphy-items-content").on("scroll",function(i){var t;n(this).parent().hasClass("youzify-wall-cf-item")?n(this).scrollLeft()+n(this).innerWidth()>=n(this)[0].scrollWidth&&((t=n(this).find(".youzify-load-more-giphys")).hasClass("loading")||t.trigger("click")):n(this).scrollTop()+n(this).innerHeight()>=n(this)[0].scrollHeight&&((t=n(this).find(".youzify-load-more-giphys")).hasClass("loading")||t.trigger("click"))})}else a.q&&""!=a.q?o.find(".youzify-no-gifs-found").fadeIn():o.find(".youzify-load-more-giphys").fadeOut()}})}})}(jQuery);