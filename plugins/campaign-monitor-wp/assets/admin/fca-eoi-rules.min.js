function add_delete_handlers(){var e=jQuery;e(".fca_eoi_delete_condition").unbind("click"),e(".fca_eoi_delete_condition").click(function(){e(this).closest("tr").remove(),e("#fca_eoi_add_rule").show(),set_available_conditions()})}function set_available_conditions(){var e=jQuery,a=[];e(".fca_eoi_condition_select").each(function(){a.push(e(this).val())}),e(".fca_eoi_condition_select").children().show(),e.each(a,function(a,i){e(".fca_eoi_condition_select").children('[value="'+i+'"]').hide()})}function add_condition_select_handlers(){var e=jQuery;e(".fca_eoi_condition_select").unbind("change"),e(".fca_eoi_condition_select").change(function(){$targetTd=e(this).closest("th").next();var a=!1;switch(set_available_conditions(),e(this).siblings(".fca_eoi_at_least").hide(),e(this).val()){case"scrolled_percent":a=fcaEoiRuleTableHtml.dataScroll,e(this).siblings(".fca_eoi_at_least").show();break;case"pageviews":a=fcaEoiRuleTableHtml.dataPageviews,e(this).siblings(".fca_eoi_at_least").show();break;case"time_on_page":a=fcaEoiRuleTableHtml.dataTime,e(this).siblings(".fca_eoi_at_least").show();break;case"include":a=fcaEoiRuleTableHtml.dataInclude;break;case"exclude":a=fcaEoiRuleTableHtml.dataExclude;break;case"exit_intervention":a=fcaEoiRuleTableHtml.dataExit}a&&($targetTd.html(a),$targetTd.find(".select2").select2())})}jQuery(document).ready(function(e){e("#fca_eoi_add_rule").click(function(a){a.preventDefault(),jQuery("#fca_eoi_primary_rules_table").append(fcaEoiRuleTableHtml.rowNew),add_condition_select_handlers(),set_available_conditions(),add_delete_handlers(),e(this).blur(),(1===e(".fca_eoi_condition_select").length&&"free"===fcaEoiDistro||6===e(".fca_eoi_condition_select").length)&&e(this).hide()}),function(){var a=[];if(e.isArray(fcaEoiRules))a=fcaEoiRules.filter(function(e){return"devices"!==e.parameter&&"show_every"!==e.parameter&&"live"!==e.parameter});else{for(el in fcaEoiRules){var i=fcaEoiRules[el];"devices"!==i.parameter&&"show_every"!==i.parameter&&"live"!==i.parameter&&a.push({parameter:i.parameter,value:i.value})}"premium"===fcaEoiDistro?e('[name="fca_eoi[publish_lightbox][devices]"]').val("all"):e('[name="fca_eoi[publish_lightbox][devices]"]').val("desktop"),"never"===e('[name="fca_eoi[publish_lightbox][show_every]"]').val()?e('[name="fca_eoi[publish_lightbox][live]"]').prop("checked",!1):e('[name="fca_eoi[publish_lightbox][live]"]').prop("checked",!0)}e.each(a,function(a,i){e("#fca_eoi_add_rule").click(),e(".fca_eoi_condition_select").last().val(i.parameter).change(),"exit_intervention"===i.parameter?e(".fca_eoi_condition_select").last().closest("th").next().find("input, select").prop("checked","checked").change():e(".fca_eoi_condition_select").last().closest("th").next().find("input, select").val(i.value).change()})}()});