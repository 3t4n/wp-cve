(()=>{"use strict";function n(n,t){return n&&t?`\n        ${n}: ${t.top} ${t.right} ${t.bottom} ${t.left};\n    `:""}let t=class extends HTMLElement{constructor(){super(),Object.defineProperty(this,"scope",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"wrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new window.XCurrencyEventManager}),Object.defineProperty(this,"position",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:window.x_currency_data.selectedCurrency||"USD"}),Object.defineProperty(this,"isOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.scope=this.attachShadow({mode:"open"}),this.position="open-bottom",this.events.addScope(this.scope)}disconnectedCallback(){this.events.stopListening()}connectedCallback(){window.addEventListener("x-currency-switcher-loaded",(()=>{this.render(),this.selectors(),this.eventManager(),window.addEventListener("x_currency/update_switcher",(n=>{n.detail==this.id&&(this.events.stopListening(),this.render(),this.selectors(),this.events.refresh(),this.events.startListening(),this.isOpen||this.events.stopListening(["click/outside-click"]))}))}),{once:!0})}eventManager(){const n=this;n.events.addEvent("click/switcher-button",{selector:".switch",callback(t){t.preventDefault(),t.stopPropagation(),n.toggleDropdown()}}),n.events.addEvent("click/list-element",{selector:"li",callback(t){t.preventDefault(),t.stopPropagation();const e=t.target.closest("li");n.changeSiteCurrency(e)}}),n.events.addEvent("click/outside-click",{selector:window,callback(){n.toggleDropdown()}}),n.events.startListening(),n.events.stopListening(["click/outside-click"])}selectors(){this.wrapper=this.scope.querySelector(".wrapper")}toggleDropdown(){if(!this.wrapper)return;const n=this.wrapper.classList.contains("xc-open");this.wrapper.classList.toggle("xc-open",!n),this.isOpen=!n;const t=this.scope.querySelector(".currency-wrap").getBoundingClientRect();innerHeight-(t.top+t.height/2)<15?(this.position="open-top",this.wrapper.setAttribute("id","open-top")):(this.position="open-bottom",this.wrapper.setAttribute("id","open-bottom")),n?this.events.stopListening(["click/outside-click"]):this.events.startListening(["click/outside-click"])}changeSiteCurrency(n){var t;n&&n.dataset.code&&(null===(t=this.scope.querySelector(".active"))||void 0===t||t.classList.remove("active"),n.classList.add("active"),this.value=n.dataset.code,this.isOpen=!1,this.events.stopListening(),this.render(),this.selectors(),this.events.refresh(),this.events.startListening(),this.events.stopListening(["click/outside-click"]),window.dispatchEvent(new CustomEvent("x_currency/change_site_currency",{detail:n.dataset.code})))}getContent(n){const{template:t}=window.x_currency_data[this.id],e={1:t.ct_dropdown_show_flag?`<img loading="lazy" class="dropdown-flag" src="${n.flag_url}" alt="${n.name}"/>`:"",2:t.ct_dropdown_show_symbol?`<span class='symbol'>(${n.symbol})</span>`:"",3:t.ct_dropdown_show_code?`<span class='code'>${n.code}</span>`:"",4:t.ct_dropdown_show_name?`<span class='name'>${n.name}</span>`:""};return t.ct_dropdown_sort_el.map((n=>e[n])).join("")}switcherButton(){const n=window.x_currency_data.currencies.find((n=>n.code===this.value)),{template:t}=window.x_currency_data[this.id],e={1:t.button_show_flag?`<img class="dropdown-flag" loading="lazy" src="${n.flag_url}" alt="${n.name}"/>`:"",2:t.button_show_symbol?`<span class="symbol">(${n.symbol})</span>`:"",3:t.button_show_code?`<span class="code">${n.code}</span>`:"",4:t.button_show_name?`<span class="name">${n.name}</span>`:""};return t.button_sort_el.map((n=>e[n])).join("")}liElement(n){if(!n.active)return"";const{template:t}=window.x_currency_data[this.id];return`\n            <li\n                data-code=${n.code}\n\t\t\t\tclass="dropdown-li ${this.value===n.code?"active":""}"\n            >\n\t\t\t\t${"RadioDropdown"===t.content_switcher_style?'<span class="radio"></span>':""}\n\t\t\t\t<div>${this.getContent(n)}</div>\n            </li>\n        `}render(){const{currencies:t}=window.x_currency_data,{template:e}=window.x_currency_data[this.id],r=function(t){const{mode:e,isPro:r}=window.x_currency_data,{template:o,customCSS:i}=window.x_currency_data[t],s=function(){const n=new window.XcurrencyCSSOMLite;return n.addDevice("mobile",400),n.addDevice("tablet",620),n}();return s.addCSS(`\n        * {\n            font-family: arial;\n            box-sizing: border-box;\n        }\n\n        .currency-wrap {\n            width: ${o.st_currency_list_full_width?"100%":o.st_currency_list_wrap_width+"px"};\n            max-height: ${o.st_currency_list_wrap_height+"px"};\n            overflow-y: auto;\n            overflow-x: hidden;\n            overscroll-behavior-y: contain;\n        }\n\n        .currency-wrap::-webkit-scrollbar{\n            width: 3px;\n            background-color: transparent;\n        }\n\n        .currency-wrap:hover:-webkit-scrollbar {\n            width: 10px;\n        }\n\n        .currency-wrap::-webkit-scrollbar-thumb {\n            background-color: #dddddd8c;\n            border-radius: 50px;\n            border: 1px solid transparent;\n        }\n\n        .xc-element-${t} {\n            position: relative;\n        }\n\n        ul, ol {\n            list-style-type: none;\n            margin: 0;\n            padding: 0;\n        }\n\n        button, span, label, input, a, img {\n            display: inline-block\n        }\n\n        .arrow-element {\n            margin-left: 5px;\n        }\n\n        .dropdown-arrow {\n            display:none;\n            position: absolute;\n        }\n\n        .switch {\n            cursor:pointer;\n            width: ${o.switcher_full_width?"100%":o.switcher_width+"px"};\n            color: ${o.switcher_text_color};\n            ${n("padding",o.switcher_padding)}\n            ${n("margin",o.switcher_margin)}\n            font-size: ${o.switcher_font_size}px;\n            border-radius: ${o.switcher_border_radius}px;\n            border: 1px solid ${o.switcher_border_color};\n            background-color: ${o.switcher_bg_color};\n            transition: .2s;\n            display: flex;\n            align-items: center;\n            overflow: hidden;\n        }\n\n        .switch .switch-elements {\n            display: flex;\n            width: 100%;\n            align-items: center;\n            column-gap: ${o.switcher_item_gap}px;\n            justify-content: ${o.button_alignment};\n        }\n\n        .xc-open .switch {\n            box-shadow: ${o.switcher_shadow_active.x}px ${o.switcher_shadow_active.y}px ${o.switcher_shadow_active.spread}px ${o.switcher_shadow_active.color};\n            color: ${o.switcher_text_color_hover};\n            border-color: ${o.switcher_border_color_hover};\n            background-color: ${o.switcher_bg_color_hover};\n        }\n\n        .dropdown-li > div {\n            display: flex;\n            align-items: center;\n            column-gap: ${o.st_currency_list_horizontal_gap}px;\n        }\n\n        .xc-open .currency-wrap {\n            display: block;\n        }\n\n        .dropdown-ul {\n            display: grid;\n            grid-gap: ${o.st_currency_list_item_gap}px;\n        }\n\n        .dropdown-li {\n            ${n("padding",o.st_currency_list_item_padding)}\n            cursor: pointer;\n            transition: all linear .3s;\n            color: ${o.st_currency_list_item_text_color};\n            display: flex;\n            justify-content: ${o.ct_dropdown_alignment};\n            align-items: center;\n            line-height: 1;\n        }\n\n        .dropdown-li  > * {\n            user-select: none;\n            pointer-events: none;\n            font-size: ${o.st_currency_list_item_font_size}px;\n        }\n\n        .dropdown-li.active {\n            pointer-events: none;\n            background: ${o.st_currency_list_item_bg_hover_color};\n            color: ${o.st_currency_list_item_text_hover_color};\n        }\n\n        .dropdown-li:hover {\n            background: ${o.st_currency_list_item_bg_hover_color};\n            color: ${o.st_currency_list_item_text_hover_color};\n        }\n\n        .dropdown-flag {\n            height: ${o.flag_height}px;\n            width: ${o.flag_width}px;\n            ${n("margin",o.flag_margin)}\n            border: 1px solid #eeeeee94;\n            object-fit: cover;\n        }\n\n        .currency-wrap {\n            position: absolute;\n            border: 1px solid ${o.st_currency_list_wrap_border_color};\n            ${n("padding",o.st_currency_list_wrap_padding)}\n            ${n("border-radius",o.st_currency_list_wrap_radius)}\n            background-color:  ${o.st_currency_list_wrap_bg_color};\n            left: ${o.st_currency_list_wrap_hr_position}px;\n        }\n\n        .wrapper:not(.xc-open) .currency-wrap {\n            display: none;\n        }\n\n        .xc-open .currency-wrap {\n            display: block;\n        }\n\n        #open-bottom .currency-wrap{\n            top: ${o.st_currency_list_wrap_gap_from_button}px;\n        }\n\n        #open-top .currency-wrap {\n            bottom: ${o.st_currency_list_wrap_gap_from_button}px;\n        }\n    `),o.ct_dropdown_show_arrow&&s.addCSS(`\n            .xc-open .dropdown-arrow {\n                display: inline-block;\n            }\n\n            .dropdown-arrow {\n                width: ${o.drop_arrow_size}px;\n                height: ${o.drop_arrow_size}px;;\n                background: ${o.drop_arrow_color};\n                transform: rotate(45deg);\n                left: ${o.drop_arrow_horizontial}px;\n            }\n\n            #open-bottom .dropdown-arrow  {\n                top: ${o.drop_arrow_vertical}px;\n            }\n\n            #open-top .dropdown-arrow  {\n                bottom: ${o.drop_arrow_vertical}px;\n            }\n        `),"Default"===o.content_switcher_style&&s.addCSS(`\n            .dropdown-li.active {\n                border-left: 2px solid ${o.switcher_bg_color_hover};\n            }\n        `),"RadioDropdown"===o.content_switcher_style&&s.addCSS(`\n            .dropdown-li .radio {\n                --size: ${o.st_currency_list_item_font_size}px;\n                --color: ${o.st_currency_list_wrap_border_color};\n                min-width: var(--size);\n                min-height: var(--size);\n                width: var(--size);\n                height: var(--size);\n                display: inline-block;\n                border-radius: 50%;\n                border: 1px solid var(--color);\n                margin-right: ${o.st_currency_list_horizontal_gap}px;\n                position: relative;\n            }\n\n            .dropdown-li .radio::before {\n                width: 70%;\n                height: 70%;\n                border-radius: 50%;\n                display: inline-block;\n                content: '';\n                background-color: var(--color);\n                position: absolute;\n                left: 50%;\n                top: 50%;\n                transform: translate(-50%, -50%);\n            }\n\n            .dropdown-li.active .radio {\n                --color: ${o.switcher_bg_color_hover};\n            }\n        `),"string"==typeof i&&i.trim().length>3&&("preview"===e?s.addCSS(atob(i)):s.addCSS(i)),s.output()}(this.id);this.scope.innerHTML=`\n            <style>${r}</style>\n            <div class="wrapper xc-element-${this.id} ${this.isOpen?"xc-open":""}" id="${this.position}">\n                <button\n                    class="switch"\n                >\n                    <div class="switch-elements">${this.switcherButton()}</div>\n                    ${e.button_show_arrow?`<div class="arrow-element">\n                            <svg\n                                width="${e.switcher_font_size}"\n                                height="${e.switcher_font_size}"\n                                x="0"\n                                y="0"\n                                viewBox="0 0 36.678 36.678"\n                            >\n                                <path\n                                    fill="currentColor"\n                                    d="M29.696 20.076c.088.16.08.354-.021.51l-10.28 15.863a.502.502 0 01-.407.229h-.015a.5.5 0 01-.403-.205L6.998 20.609a.5.5 0 01.403-.793h21.855a.49.49 0 01.44.26zM7.401 16.865h21.876a.501.501 0 00.316-.888L18.086.205A.534.534 0 0017.668 0a.502.502 0 00-.406.229L6.982 16.094a.507.507 0 00-.021.512.505.505 0 00.44.259z"\n                                ></path>\n                            </svg>\n                        </div>`:""}\n                </button>\n\t\t\t\t${e.ct_dropdown_show_arrow?'<span class="dropdown-arrow"></span>':""}\n\t\t\t\t<div class="currency-wrap">\n\t\t\t\t\t<ul class="dropdown-ul">\n\t\t\t\t\t\t${t.map(this.liElement.bind(this)).join("")}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n            </div>\n        `}};var e;t=function(n,t,e,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(s=(i<3?o(s):i>3?o(t,e,s):o(t,e))||s);return i>3&&s&&Object.defineProperty(t,e,s),s}([(e="xc-shortcode-default",n=>{customElements.get(e)||customElements.define(e,n)})],t)})();