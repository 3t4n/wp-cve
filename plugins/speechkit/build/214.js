"use strict";(self.webpackChunkbeyondwords_wordpress_plugin=self.webpackChunkbeyondwords_wordpress_plugin||[]).push([[214],{786:function(t,e,a){a.d(e,{a:function(){return c},c:function(){return o},w:function(){return p}});var s=a(5756);const n="#f23869",r="#fab500",o={[s.g.error]:n,[s.g.unprocessed]:r,[s.g.processing]:r,[s.g.scheduled]:r,[s.g.skipped]:n},p={short:3e4,long:6e4},c="retryRequest"},2333:function(t,e,a){a.d(e,{a:function(){return r},e:function(){return n},g:function(){return o}});var s=a(5756);const n=(0,s.e)(s.g.processed),r=(0,s.e)(s.g.processing),o=t=>t?new Date(t).valueOf():0},1214:function(t,e,a){a.r(e),a.d(e,{getMiddleware:function(){return o}});var s=a(5756),n=(a(1978),a(786)),r=a(2333);const o=({appReady:t,setParams:e,updatePlaylist:a,appOnUnmount:o})=>{let p;const c=()=>{p&&(clearTimeout(p),p=null)},i=async(t,o,{getState:i,dispatch:d})=>{const{app:{apiKey:u,skBackend:g,skBackendApi:l,useStatusBox:f,initParams:k}}=i();if(!u)return;const{processingTime:m,stateApi:y,stateCf:B,dataFromOpenApi:w,dataFromCF:S}=await(async t=>{const{apiKey:e,skBackend:a,skBackendApi:n,initParams:o}=t,{projectId:p,podcastId:c,externalId:i}=o,[{data:d},{data:u}]=await Promise.all([(0,s.q)({skBackend:a,projectId:p,podcastId:c||i}),(0,s.k)({apiKey:e,skBackendApi:n,projectId:p,podcastId:c||i})]),{state:g,processing_at:l}=u,{podcast:{state:f,processing_at:k}}=d;return{processingTime:{cf:(0,r.g)(k),api:(0,r.g)(l)},stateApi:g,stateCf:f,dataFromOpenApi:u,dataFromCF:d}})({apiKey:u,skBackend:g,skBackendApi:l,initParams:k}),x=m.cf-m.api;if(x<=0){if((0,r.e)(y)||x>=0&&(0,r.e)(B)){const t=(0,s.l)(x>0,S.podcast,w);return d(a([{...(0,s.o)(["media"],S.podcast||{}),media:t.media,state:y,processing_at:t.processing_at}])),void d(e({useStatusBox:!1,podcastState:B}))}return d(e({useStatusBox:!0,podcastState:y})),void(p=setTimeout((()=>{c(),d({type:n.a})}),(0,s.l)((0,r.a)(y),n.w.short,n.w.long)))}f&&d(e({useStatusBox:!1,podcastState:y}))};return(0,s.a)({[n.a]:async(...t)=>(c(),i.apply(null,t)),[t]:i,[e]:async(t,e,a,n)=>{if((0,s.f)("useStatusBox",t)&&t.useStatusBox){if(n.app.useStatusBox)return;return i.apply(null,[{...t,podcastState:s.g.processing},e,a,n])}},[o]:()=>{c()}})}}}]);