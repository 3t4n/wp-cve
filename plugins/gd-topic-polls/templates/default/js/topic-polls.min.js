!function(p,e,t){e.wp=e.wp||{},e.wp.gdpol=e.wp.gdpol||{},e.wp.gdpol.form={base:"#gdpol-form-",run:function(e){var t=wp.gdpol.form.base+e,o=JSON.parse(p(".gdpol-poll-settings",p(t)).html());p("form",p(t)).data("gdpol",o),"single"!==o.choice&&0<o.limit&&p("input[type=checkbox]",p(t)).change(function(){p("input[type=checkbox]:checked",p(t)).length>=o.limit?p("input[type=checkbox]:not(:checked)").prop("disabled",!0):p("input[type=checkbox]").prop("disabled",!1)}),p("form",p(t)).submit(function(){var e=!1;return 1===p("button",p(t)).length&&("single"===o.choice?1===p("input[type=radio]:checked",p(t)).length&&(e=!0):0<p("input[type=checkbox]:checked",p(t)).length&&(e=!0)),e})}},e.wp.gdpol.edit={id:1,seq:1,tpl:"",run:function(e,t){wp.gdpol.edit.seq=e,wp.gdpol.edit.id=t,wp.gdpol.edit.controls(),wp.gdpol.edit.responses(),wp.gdpol.edit.validate()},controls:function(){p(t).on("change",".gdpol-field-extra-select",function(){var e=p(this).data("field"),t=p(this).val();p("."+e+"-field:not(."+e+"-"+t).slideUp("fast"),p("."+e+"-"+t).slideDown("slow")}),p(t).on("change",".gdpol-poll-status",function(){p(this).is(":checked")?p(".gdpol-fields-wrapper").slideDown("slow"):p(".gdpol-fields-wrapper").slideUp("fast")})},responses:function(){wp.gdpol.edit.tpl=p("#gdpol-response-item-template").html(),p(t).on("click",".gdpol-responses-list ._minus button",function(e){e.preventDefault(),p(this).closest("li").fadeOut("slow",function(){p(this).remove(),p(".gdpol-responses-list li").length<2&&wp.gdpol.edit.add_response()})}),p(t).on("click",".gdpol-responses-list ._down button",function(e){e.preventDefault();e=p(this).closest("li");e.insertAfter(e.next())}),p(t).on("click",".gdpol-responses-list ._up button",function(e){e.preventDefault();e=p(this).closest("li");e.insertBefore(e.prev())}),p(t).on("click",".gdpol-new-response",function(e){e.preventDefault(),wp.gdpol.edit.add_response()})},add_response:function(){wp.gdpol.edit.id++,wp.gdpol.edit.seq++;var e="<li>"+wp.gdpol.edit.tpl+"</li>";e=(e=(e=e.replace(/{{SEQID}}/gi,wp.gdpol.edit.seq)).replace(/{{RESID}}/gi,wp.gdpol.edit.id)).replace(/{{RESPONSE}}/gi,""),p(".gdpol-field-responses ul").append(e)},validate:function(){p("#new-post").submit(wp.gdpol.edit.check)},check:function(){var e,t=!0;return p(".gdpol-poll-status").is(":checked")&&(""===p(".gdpol-poll-question").val()?(t=!1,alert(gdpol_polls_data.error_question)):(e=0,p(".gdpol-responses-list ._label input").each(function(){""!==p(this).val()&&e++}),e<2&&(t=!1,alert(gdpol_polls_data.error_responses)))),t}}}(jQuery,window,document);