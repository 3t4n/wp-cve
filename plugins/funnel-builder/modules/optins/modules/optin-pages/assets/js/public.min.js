"use strict";function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}!function(i){({init:function(){var n=this;i(document).ready(function(){n.renderForm(),n.handleSubmit(),n.renderPBPopUps(),n.attachCloseBtn(),n.initPhoneFlag()}),i(document).on("wffn_reload_popups",function(){n.renderPBPopUps()}),i(document).on("wffn_reload_phone_field",function(){n.initPhoneFlag()})},initPhoneFlag:function(){var n={initialCountry:window.wffnfunnelVars.op_flag_country,separateDialCode:!0,geoIpLookup:function(e){i.get("https://ipinfo.io",function(){},"jsonp").always(function(n){n=n&&n.country?n.country:"us";e(n)})}};void 0!==window.wffnfunnelVars.onlyCountries&&0<window.wffnfunnelVars.onlyCountries.length&&(n.onlyCountries=window.wffnfunnelVars.onlyCountries);var e,t=document.querySelectorAll(".phone_flag_code input[type='tel']");for(e in t)"object"===_typeof(t[e])&&void 0!==window.intlTelInput&&window.intlTelInput(t[e],n)},attachCloseBtn:function(){jQuery(document).on("click",".bwf_pp_close",function(n){n.preventDefault(),jQuery(".bwf_pp_overlay").removeClass("show_popup_form"),jQuery("body").css("overflow","")})},renderPBPopUps:function(){jQuery(".wfop_pb_widget_wrap").each(function(){var e=this;jQuery(this).find(".bwf-custom-button a").click(function(n){n.preventDefault(),jQuery(e).find(".bwf_pp_overlay").addClass("show_popup_form"),jQuery("body").css("overflow","hidden")})})},renderForm:function(){0<jQuery(".bwf_pp_overlay").length&&jQuery('a[href*="wfop-popup=yes"]').on("click",function(n){n.preventDefault(),jQuery(".bwf_pp_overlay").addClass("show_popup_form")})},DoValidation:function(r){var f=!0;return jQuery(r).find(".wfop_required").each(function(){console.log(window.wffnfunnelVars);var n,e=jQuery(this),t=null,o=window.wffnfunnelVars.op_valid_text,a=window.wffnfunnelVars.op_valid_email;""===jQuery.trim(e.val())?t=o:"checkbox"===e.attr("type")?e.prop("checked")||(t=o):"radio"===e.attr("type")&&(n=e.attr("name"),0===jQuery(r).find("input:radio[name="+n+"]:checked").length&&(t=o));o=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);""!==jQuery.trim(e.val())&&"wfop_optin_email"===e.attr("name")&&(jQuery.trim(e.val()).match(o)||(t=a)),null!==t&&(e.parents(".bwfac_form_sec").addClass("bwfac_error"),0===e.parents(".bwfac_form_sec").find(".error").length&&e.parents(".bwfac_form_sec").append('<span class="error">'+t+"</span>"),f=!1)}),jQuery(r).find(".wfop_phone_validation .wffn-optin-input").each(function(){var n,e=jQuery(this),t=null,o=window.wffnfunnelVars.op_valid_phone;""!==jQuery.trim(e.val())&&"wfop_optin_phone"===e.attr("name")&&void 0!==window.intlTelInputGlobals&&((n=window.intlTelInputGlobals.getInstance(e.get(0))).isValidNumber()||(t=Array.isArray(o)?o[n.getValidationError()]:o)),null!==t&&(e.parents(".bwfac_form_sec").addClass("bwfac_error"),0===e.parents(".bwfac_form_sec").find(".error").length&&e.parents(".bwfac_form_sec").append('<span class="error">'+t+"</span>"),f=!1)}),f},setUpClick:function(f){var i=this;jQuery(f).find("#wffn_custom_optin_submit").on("click",function(n){var e=!0;jQuery(this).removeAttr("disabled");var t=jQuery(this),o=f;jQuery(o).find(".bwfac_form_sec").removeClass("bwfac_error"),jQuery(o).find(".bwfac_form_sec .error").remove();var a=jQuery(o).find("input[name=optin_is_admin]").val(),r=jQuery(o).find("input[name=optin_is_ajax]").val(),o=jQuery(o).find("input[name=optin_is_preview]").val();(a||r||o)&&(e=!1),e=i.DoValidation(f),n.preventDefault(),e?(jQuery(this).attr("disabled","disabled"),e=jQuery(this).attr("data-subitting-text"),jQuery(f).find("button.wfop_submit_btn .bwf_heading").html(e),void 0!==window.intlTelInputGlobals&&void 0!==jQuery(f).find('input[name="wfop_optin_phone"]').get(0)&&(e=window.intlTelInputGlobals.getInstance(jQuery(f).find('input[name="wfop_optin_phone"]').get(0)).getSelectedCountryData(),jQuery(f).find('input[name="wfop_optin_phone_dialcode"]').eq(0).val("+"+e.dialCode),jQuery(f).find('input[name="wfop_optin_phone_countrycode"]').eq(0).val(e.iso2)),t.parents(".wffn-custom-optin-from").addClass("wffn-form-overlay"),i.handleLeadEvent(),jQuery.ajax({url:window.wffnfunnelVars.ajaxUrl+"?action=wffn_submit_custom_optin_form&lead_event_id="+wffnfunnelVars.op_lead_tracking.fb.event_ID,data:jQuery(f).serialize(),dataType:"json",type:"post"}).always(function(n){if(t.parents(".wffn-custom-optin-from").addClass("wffn-form-overlay"),Object.prototype.hasOwnProperty.call(n,"mapped")){for(var e in n.mapped)jQuery(".wfop_integration_form input[name='"+e+"']").val(n.mapped[e]);jQuery(".wfop_integration_form").trigger("submit")}else Object.prototype.hasOwnProperty.call(n,"next_url")&&""!==n.next_url&&(window.location.href=n.next_url)})):console.log("form validation failed")})},handleSubmit:function(){var n=this;jQuery("form.wffn-custom-optin-from").each(function(){n.setUpClick(this)})},handleLeadEvent:function(){var n,e,t,o,a,r,f;1==wffnfunnelVars.op_should_render&&("object"===_typeof(wffnfunnelVars.op_lead_tracking.fb.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.fb.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.fb.fb_pixels&&("undefined"==typeof fbq&&(n=window,e=document,n.fbq||(t=n.fbq=function(){t.callMethod?t.callMethod.apply(t,arguments):t.queue.push(arguments)},n._fbq||(n._fbq=t),(t.push=t).loaded=!0,t.version="2.0",t.queue=[],(o=e.createElement("script")).async=!0,o.src="https://connect.facebook.net/en_US/fbevents.js",(f=e.getElementsByTagName("script")[0]).parentNode.insertBefore(o,f)),o=wffnfunnelVars.op_lead_tracking.fb.fb_pixels.split(","),i(o).each(function(n,e){fbq("init",e)})),f="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{},fbq("track","Lead",f,{eventID:wffnfunnelVars.op_lead_tracking.fb.event_ID})),"object"===_typeof(wffnfunnelVars.op_lead_tracking.pint.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.pint.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.pint.pixels&&(window.pintrk||(window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))},(a=window.pintrk).queue=[],a.version="3.0",(o=document.createElement("script")).async=!0,o.src="https://s.pinimg.com/ct/core.js",(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,a)),a=wffnfunnelVars.op_lead_tracking.pint.pixels.split(","),i(a).each(function(n,e){pintrk("load",e,{np:"woofunnels"})}),f="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{},pintrk("track","Lead",f)),"object"===_typeof(wffnfunnelVars.op_lead_tracking.ga.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.ga.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.ga.ids&&(r=wffnfunnelVars.op_lead_tracking.ga.ids.split(","),(f="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{}).send_to=r[0],gtag("event","Lead",f)),"object"===_typeof(wffnfunnelVars.op_lead_tracking.gad.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.gad.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.gad.ids&&(r=wffnfunnelVars.op_lead_tracking.gad.ids.split(","),(f="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{}).send_to=r[0],gtag("event","Lead",f)))}}).init()}(jQuery);