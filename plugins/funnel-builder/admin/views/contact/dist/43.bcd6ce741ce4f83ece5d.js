(window.webpackJsonp=window.webpackJsonp||[]).push([[43,3,9,16],{1110:function(e,t,n){},1111:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(119),c=n(319),l=n(368),o=n(348),i=n(14),u=n(1),s=n(2),f=n(7),b=n.n(f),d=n(13),m=n.n(d),p=n(9),O=n(4),v=n(247),j=n(244),y=n(250),h=n(310),_=n(245),g=(n(413),n(253)),w=n(591),E=n(296),S=n(321);n(1110);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=function(e){var t,n=e.options,a=e.label,c=Object(r.useRef)(),l=N(Object(r.useState)(!1),2),o=l[0],i=l[1],s=N(Object(r.useState)([]),2),f=s[0],b=s[1],d=N(Object(r.useState)([]),2),m=d[0],p=d[1],v=N(Object(r.useState)(""),2),j=v[0],y=v[1],h=N(Object(r.useState)(n),2),_=h[0],g=(h[1],N(Object(r.useState)({}),2)),w=(g[0],g[1],N(Object(r.useState)(0),2)),E=w[0],S=w[1];return Object(O.hb)(c,(function(){return i(!1)})),Object(r.createElement)("div",{className:"components-base-control bwf-single-select-control"},Object(r.createElement)("div",{className:"components-base-control__field"},Object(r.createElement)("label",{className:"components-base-control__label"},a),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("div",{className:"multiselect ".concat(o&&"multiselect--active"," "),style:{width:"30%"},tabindex:"-1",onClick:function(){return i(!0)},ref:c},Object(r.createElement)("div",{className:"multiselect__select"}),Object(r.createElement)("div",{className:"bwf-badge"},Object(r.createElement)("div",{className:"multiselect__spinner",style:{display:"none"}}),o&&Object(r.createElement)("input",{type:"text",autoComplete:"off",autoFocus:!0,onChange:function(e){return y(e.target.value)},ref:function(e){e&&e.style.setProperty("margin-left","unset","important")},className:"bwf__multiselect__input",onKeyDown:function(e){38===e.keyCode&&E>0?S(E-1):40===e.keyCode&&E<_.length-1&&S(E+1)},onKeyPress:function(e){if("Enter"===e.key){var t,n,r;if(e.preventDefault(),!m.includes(null===(t=_[E])||void 0===t?void 0:t.value))b([_[E]]),p([null===(r=_[E])||void 0===r?void 0:r.value]);if(m.includes(null===(n=_[E])||void 0===n?void 0:n.value)){var a=f.filter((function(e){var t;return e.value!==(null===(t=_[E])||void 0===t?void 0:t.value)}));b(a);var c=a.map((function(e){return e.value}));p(c)}setTimeout((function(){i(!1)})),y("")}},placeholder:"Select option",value:j||""}),!o&&0!=f.length&&Object(r.createElement)("span",{className:"multiselect__single"},null===(t=f[0])||void 0===t?void 0:t.label),!o&&0==f.length&&Object(r.createElement)("span",{className:"multiselect__single"},"Select Option")),Object(r.createElement)("div",{className:" ".concat(o?"multiselect__content-wrapper":"bwf-hide"," ")},Object(r.createElement)("ul",{className:"multiselect__content",style:{display:"inline-block"}},_.filter((function(e){return""==j||e.label.toLowerCase().includes(j.toLowerCase())?e:void 0})).map((function(e,t){return Object(r.createElement)("li",{className:"multiselect__element_value",key:t,onClick:function(){if(m.includes(e.value)||(b([e]),p([e.value])),m.includes(e.value)){var t=f.filter((function(t){return t.value!==e.value}));b(t);var n=t.map((function(e){return e.value}));p(n)}setTimeout((function(){i(!1)})),y("")},onMouseOver:function(){return S(t)},id:"customSelect",tabIndex:"0"},e&&"no-data-found"!==e.value&&Object(r.createElement)("span",{"data-select":Object(u.__)("Press enter to select","funnel-builder"),"data-selected":Object(u.__)("Selected","funnel-builder"),"data-deselect":Object(u.__)("Press enter to remove","funnel-builder"),className:" multiselect__option  ".concat(m.includes(e.value)&&"multiselect__option--selected","  ").concat(E===t?"multi-select-active":null)},Object(r.createElement)("span",null,null==e?void 0:e.label)),e&&"no-data-found"==e.value&&Object(r.createElement)("span",{className:" multiselect__option "},null==e?void 0:e.label))}))))))))},P=n(252),x=n(20),T=n(21),A=n(12),I=n.n(A),D=n(284);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function q(e){var t=function(e,t){if("object"!==F(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===F(t)?t:String(t)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V={checkbox:p.CheckboxControl,radio:_.a,radios:_.a,select:j.b,textarea:p.TextareaControl,text:p.TextControl,input:function(e){var t=e.value,n=e.onChange,a=e.errors,c=e.placeholder,l=e.label,o=e.required,i=e.hint;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{id:o?"required":""},l),Object(r.createElement)("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)},className:o&&a.optimizationError&&0===Object(s.size)(t)?"bwf-error-border":"",placeholder:c}),o&&0===Object(s.size)(t)&&Object(s.size)(a)?Object(r.createElement)("div",{className:"bwf-error-text"},a.optimizationError):"",Object(r.createElement)("div",{className:"hint ".concat(o&&0===Object(s.size)(t)&&Object(s.size)(a)?"bwf-validation-hint":""),dangerouslySetInnerHTML:{__html:i}}))},license:h.a,color:y.a,"text-editor":g.a,input_button:w.a,"custom-select":E.a,"multi-select":S.a,"single-select":C,checklist:P.a,date:function(e){var t=e.value,n=e.onChange,a=e.errors,c=(e.placeholder,e.label),l=e.required,o=e.hint;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{id:l?"required":""},c),Object(r.createElement)("div",{className:"bwf-ml-320 bwf-h-36\n\t\t\t\t\t\t\t\t".concat(l&&a.optimizationError&&0===Object(s.size)(t)?"bwf-date-error":"","\n\t\t\t\t\t\t\t")},Object(r.createElement)(D.b,{date:Object(s.isEmpty)(t)?"":I()(t).format(O.c),text:Object(s.isEmpty)(t)?"":I()(t).format(O.c),onUpdate:function(e){return n(I()(e.text).format(O.c))},dateFormat:O.c,position:"bottom right"})),l&&0===Object(s.size)(t)&&Object(s.size)(a)?Object(r.createElement)("div",{className:"bwf-error-text"},a.optimizationError):"",Object(r.createElement)("div",{className:"hint ".concat(l&&0===Object(s.size)(t)&&Object(s.size)(a)?"bwf-validation-hint":""),dangerouslySetInnerHTML:{__html:o}}))}},K=function(e){var t,n,c,l,o=Object(a.useParams)().stepId,i=z(Object(r.useState)(!1),2),f=i[0],d=i[1],p=Object(T.b)().showSnackbar,j=e.tabID,y=e.errorNotice,h=e.fields,_=e.disabled,g=e.OptimizationError,w=e.setOptimizationError,E=e.saveOptmizations,S=z(Object(r.useState)(""),2),N=S[0],k=S[1],C=!1;h&&h[j]&&(t=Object.assign({},h[j]),l=h),c=null!=t&&t.fields?t.fields:[],n=null!=t&&t.values?t.values:{};var P=z(Object(r.useState)(n),2),A=P[0],I=P[1];Object(r.useEffect)((function(){I(n)}),[n]);var D=z(Object(r.useState)(c),2),R=D[0],L=D[1];Object(r.useEffect)((function(){N&&(p(N),d(!1),k(""))}),[N]),Object(r.useEffect)((function(){L([]);var e=setTimeout((function(){return L(c)}));return function(){clearTimeout(e)}}),[c]);var U=function(e){if(e.hasOwnProperty("show_on_next_step")){var t,n,r=null==h||null===(t=h.multistep_field_preview)||void 0===t||null===(n=t.fields[0])||void 0===n?void 0:n.values.map((function(e){return e.value})),a=e.show_on_next_step.sort((function(e,t){return r.indexOf(e)-r.indexOf(t)}));e.show_on_next_step=a}var c,i,s,f=(c=e,(i=l)[j],s=M(i,[j].map(q)),Object.values(s).forEach((function(e){var t=e.values;c=B(B({},t),c)})),c);d(!0),k(""),y("",!1);try{m()({path:Object(O.q)("/funnel-checkout/".concat(o,"/optimizations")),method:"POST",data:f}).then((function(t){t.success?(k(Object(u.__)("Changes Saved","funnel-builder")),l[j].values=e,E(l)):k(t.msg)})).catch((function(e){console.log(e),k(e.message)}))}catch(e){console.log(e),k(Object(u.__)("There are some technical difficulties while updating settings. Contact Support","funnel-builder"))}},K=function(e,t,n,a,c){e.type=e.inputType?e.inputType:e.type,e.type=Array.isArray(e.styleClasses)&&e.styleClasses.includes("wp-color-picker")?"color":e.type;var l=e.type.toLowerCase()in V?V[e.type.toLowerCase()]:V.text;return _&&(t.disabled=!0),Object(r.createElement)("div",{className:b()("form-group",e.class||e.styleClasses,{"checkbox-control-wrap":"checkbox"===e.type},{"inline-group":!e.label},{"checklist-field":"checklist"===e.type},{"checkbox-field":"checkbox"===e.type})},Object(r.createElement)(l,B(B({label:e.label},function(e,t,n,r){var a=Object.assign({},e.props);return e.type.toLowerCase()in V||(a.type=e.type.toLowerCase()),a.placeholder=e.placeholder,"custom-select"===e.type&&(a.apiEndPoint=e.apiEndPoint,a.hintLabel=e.hintLabel),a.data={notify_subject:t.lead_notification_subject,notify_body:t.lead_notification_body,notify_email:t.test_email},Array.isArray(e.values)&&e.values&&e.values.map((function(e){e.name&&(e.label=e.name,delete e.name),e.id&&(e.value=e.id)})),a.options=e.options||e.values,e.type,a.content=e.content,"select"===e.type&&(a.excludeSelectedOptions=!1,a.options&&(a.options=a.options.map((function(e){return"object"!==F(e.value)&&(e.key="object"!==F(e.value)?e.value:e.key,e.value={id:"object"!==F(e.value)?e.value:e.key}),e}))),e.multiple&&(a.excludeSelectedOptions=!0,a.inlineTags=!0)),"license"===e.type&&(a=B(B({},e),{setSettingFieldSchema:L})),a.touched=r,a.required=e.required,a.errors=n,a.hint=e.hint,a.className=e.className,a.showtooltip=e.showTooltip,a.tooltipmsg=e.tooltipMsg,a}(e,n,a,c)),t)),e.hint&&"date"!==e.type&&"input"!==e.type&&Object(r.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:e.hint}}))},H=function(e){return Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e}})},$=function(e,t,n,a){return c.map((function(c,l){return Object(r.createElement)(r.Fragment,{key:l},c.type&&"label"!==c.type||c.inputType?Object(r.createElement)("div",{className:"bwf-optimization-body"},"radio"!==c.type&&"radios"!==c.type||"boolean"!=typeof c.values[0].value?"":t[c.key]="true"===t[c.key]||"false"!==t[c.key]&&t[c.key],C=!0,(!c.toggler||function(e,t){if(_)return!1;try{var n,r=!1;if(!e[t.key])return r;if(n=e[t.key],Array.isArray(t.value)&&Array.isArray(n)){for(var a=0;a<n.length;a++)if(t.value.indexOf(n[a])>-1){r=!0;break}}else Array.isArray(t.value)?t.value.includes(n)&&(r=!0):n==t.value&&(r=!0)}catch(e){console.log(e),r=!1}return r}(t,c.toggler))&&K(c,e(c.key),t,n,a)):"label"===c.type&&c.hint?Object(r.createElement)("div",{className:b()("form-group component-label-description",c.styleClasses)},Object(r.createElement)("div",{className:"components-base-control__field"},Object(r.createElement)("label",null,c.label),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:c.hint}}))):c.hint||c.desc||c.label?Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:c.hint||c.desc||c.label},className:b()(c.styleClasses,{"field-label":c.label})}):null)}))},J=Object(r.createRef)();return Object(r.createElement)(r.Fragment,null,R&&Array.isArray(R)&&R.length?Object(r.createElement)(v.a,{ref:J,onSubmitCallback:function(e){U(e)},initialValues:A,validate:function(e){var t={};return void 0!==e.coupons&&0===e.coupons.length&&"true"===e.enable_coupon||void 0!==e.total_purchased_allowed&&0===e.total_purchased_allowed.length&&"true"===e.close_after_x_purchase||void 0!==e.total_purchased_redirect_url&&0===e.total_purchased_redirect_url.length&&"true"===e.close_after_x_purchase||void 0!==e.close_checkout_on&&0===e.close_checkout_on.length&&"true"===e.close_checkout_after_date||void 0!==e.close_checkout_redirect_url&&0===e.close_checkout_redirect_url.length&&"true"===e.close_checkout_after_date?(t.optimizationError="This Field is required!",w("This Field is required!")):w(""),t},onChange:function(e,t,n,r){!function(e){if("auto_fill_url"===j){var t=e.auto_fill_url_product_qty_url,n=[],r=null==e?void 0:e.auto_fill_url_product_ids,a=null==e?void 0:e.auto_fill_url_product_qty,l=null==e?void 0:e.auto_fill_url_coupon;if(Object(s.isEmpty)(r)||n.push("aero-add-to-checkout=".concat(r)),Object(s.isEmpty)(a)||n.push("aero-qty=".concat(a)),Object(s.isEmpty)(l)||n.push("aero-coupons=".concat(l)),e.hasOwnProperty("auto_fill_url_autoresponder")&&e.hasOwnProperty("auto_fill_url_fields_options")){var o=c.find((function(e){return"auto_fill_url_autoresponder"===e.key}));if(o&&o.values){var i=o.values.find((function(t){return t.key===e.auto_fill_url_autoresponder})),u=null==i?void 0:i.merge_tags,f=e.auto_fill_url_fields_options;u&&f&&f.forEach((function(e){var t=u[e];void 0!==t&&n.push("".concat(e,"=").concat(t))}))}}Object(s.isEmpty)(n)?J.current.setState({values:B(B({},e),{},{auto_fill_text_area:""})}):J.current.setState({values:B(B({},e),{},{auto_fill_text_area:t+n.join("&")})})}}(t)}},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,c=e.touched,l=e.handleSubmit;return Object(r.createElement)("div",{className:"wtfb-tab-form"},function(e,t,n,r){return"is_pro_active"in t?"is_plugin_active"in t?null!=t&&t.is_plugin_active?$(e,t,n,r):H(t.plugin_inactive_hint):"is_pro_active"in t?null!=t&&t.is_pro_active?$(e,t,n,r):H(t.pro_inactive_label):void 0:$(e,t,n,r)}(t,n,a,c),C&&Object(r.createElement)("div",{className:"bwf-settings-action-wrap"},Object(r.createElement)(x.a,{isPrimary:!0,onClick:function(){_||(0===g.length?l():k("Please Validate Fields"))},disabled:_||f,isBusy:f,className:_?"bwf-no-ripple":""},Object(u.__)("Save","funnel-builder"))))})):null)},H=n(260),$=n(26),J=n(262);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y=function(e){var t=Object(T.a)("ck").isProFeatureLocked,n=e.tabs,a=void 0===n?[]:n,c=e.getdata,l=e.saveOptimizations,o=W(Object(r.useState)(!1),2),i=o[0],f=o[1],b=W(Object(r.useState)(""),2),d=b[0],m=b[1],p=Object(O.L)(),v=Object(s.get)(p,"0.modal",{}).primary_action,j=W(Object(r.useState)(""),2),y=j[0],h=j[1],_=function(e,t){var n="";f(t),Array.isArray(e)?e.forEach((function(e){n+="<p>"+e+"</p>"})):"object"===G(e)?Object.values(e).forEach((function(e){n+="<p>"+e+"</p>"})):n+="<p>"+e+"</p>",m(n)};return Object(r.createElement)(r.Fragment,null,i&&Object(r.createElement)(J.a,{status:"error",className:"bwf_settings_error_wrap",isDismissible:!1,onRemove:function(e){f(!1),m("")}},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:d}})),a.length&&Object(r.createElement)("div",{className:"bwf-tabs-accordian-wrap"},Object(r.createElement)(H.a,{items:a.map((function(e){return{key:e.key,label:Object(r.createElement)(r.Fragment,null,e.label,t&&e.pro?Object(r.createElement)($.a,null):e.enabled&&"true"===e.enabled&&Object(r.createElement)("span",{className:"bwf-accordioan-heading-badge is-green"},Object(u.__)("ENABLED","funnel-builder"))),hint:e.hint?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"hint"},Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:e.hint}}),t&&e.pro?Object(r.createElement)("a",{href:Object(O.K)(["Checkout","Optimizations","Upgrade","Link"]),target:"_blank",className:"bwf-upgrade-pro-text",rel:"noreferrer"},v):null)):null,display:Object(r.createElement)(K,{tabID:e.key,errorNotice:_,fields:c,disabled:t&&e.pro,OptimizationError:y,setOptimizationError:function(e){h(e)},saveOptmizations:l})}})),className:"bwf-accordion"})))},Z=(n(1111),n(275)),X=n(40),ee=n(55),te=n(107),ne=n(30),re=function(e){var t=e.type,n=void 0===t?"":t,c=e.funnelID,l=void 0===c?"":c,o=Object(a.useParams)(),i=o.stepId,u=o.offerId,f=Object(r.useRef)(new AbortController),b=Object(ee.a)(),d=b.fetchStep,m=b.setFunnelId,p=b.setTabData,O=Object(te.a)(),v=O.getStep,j=O.getStepHeaderData,y=O.getFunnelData,h=Object(X.a)(),_=h.setStepData,g=h.setLoading,w=h.setStepFunnelData,E=h.setIsFormLoading,S=j(n,i,"optimizations",u),N=y(),k=ne.a.getFunnelTitle();Object(r.useEffect)((function(){E(!1),!Object(s.isEmpty)(N)&&Object(s.isEmpty)(k)&&w(N),Object(s.isEmpty)(S)||(_(S),g(!1))}),[S,N]);var C=v(n,i,"optimizations",u),P=C.data,x=void 0===P?{}:P,T=C.loading,A=void 0===T||T,I=x.optimizations,D=void 0===I?{}:I;if(Object(r.useEffect)((function(){return Object(s.isEmpty)(x)&&d(n,i,"optimizations",u,f.current.signal),m(l),function(){f.current.abort()}}),[]),!A&&Object(s.size)(D)>0){var F=[],R=function(e){var t=Object.keys(D[e].values).find((function(t){return t.includes("enable")||D[e].hasOwnProperty("enable_on_arr_val")&&t.includes(D[e].enable_on_arr_val)&&!Object(s.isEmpty)(D[e].enable_on_arr_val)})),n={key:e,label:D[e].title,heading:D[e].heading,priority:D[e].priority,hint:D[e].hint,pro:D[e].pro};if("time_checkout_expiry"===D[e].slug){var r,a,c=null===(r=D[e].values)||void 0===r?void 0:r.close_after_x_purchase,l=null===(a=D[e].values)||void 0===a?void 0:a.close_checkout_after_date;n.enabled="false"===c&&"false"===l?"false":"true"}t&&(n.enabled=Object(s.isArray)(D[e].values[t])&&!Object(s.isEmpty)(D[e].values[t])?"true":D[e].values[t]),F.push(n)};for(var B in D)R(B);F.length&&F.sort((function(e,t){return e.priority-t.priority}))}return Object(r.createElement)(r.Fragment,null,A?Object(r.createElement)(Z.a,null):Object(r.createElement)(Y,{tabs:F,getdata:D,saveOptimizations:function(e){p(n,i,"optimizations",u,{optimizations:e})}}))},ae=n(466),ce=n(124),le=n(22);function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ie=function(e,t,n){return decodeURIComponent(Object(i.f)(e,t,n))};t.default=function(e){var t=e.type,n=void 0===t?"checkout":t,s=Object(a.useParams)(),f=s.stepId,b=s.stepType,d=void 0===b?"design":b,m=Object(i.i)().funnel_id,p=Object(le.a)().getStoreCheckoutId(),v=Object(O.Z)()?p:m,j=function(e,t){return{design:{name:Object(u.__)("Design","funnel-builder"),link:ie({},"".concat(t,"checkout/").concat(e,"/design"))},products:{name:Object(u.__)("Products","funnel-builder"),link:ie({},"".concat(t,"checkout/").concat(e,"/products"))},optimizations:{name:Object(u.__)("Optimizations","funnel-builder"),link:ie({},"".concat(t,"checkout/").concat(e,"/optimizations"))},settings:{name:Object(u.__)("Settings","funnel-builder"),link:ie({},"".concat(t,"checkout/").concat(e,"/settings"))}}}(f,Object(O.Z)()?"/store-checkout/":"/funnel-");return Object(c.a)({selected:d,headerData:j,funnelID:v,stepId:f,type:n}),Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(r.Fragment,null)},Object(r.createElement)(a.Switch,null,Object(r.createElement)(a.Route,{path:["/funnel-checkout/:stepId/design","/store-checkout/checkout/:stepId/design"],render:function(e){return Object(r.createElement)(l.a,oe({type:n,funnelID:v},e))}}),Object(r.createElement)(a.Route,{path:["/funnel-checkout/:stepId/products","/store-checkout/checkout/:stepId/products"],render:function(e){return Object(r.createElement)(ae.a,oe({type:n,funnelID:v},e))}}),Object(r.createElement)(a.Route,{path:["/funnel-checkout/:stepId/optimizations","/store-checkout/checkout/:stepId/optimizations"],render:function(e){return Object(r.createElement)(re,oe({type:n,funnelID:v},e))}}),Object(r.createElement)(a.Route,{path:["/funnel-checkout/:stepId/settings","/store-checkout/checkout/:stepId/settings"],render:function(e){return Object(r.createElement)(o.a,oe({type:n,funnelID:v},e))}}),Object(r.createElement)(a.Route,{component:ce.a})))}},245:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(0),a=n(2),c=n(7),l=n.n(c),o=n(51),i=n(9),u=(n(271),n(26)),s=["label","className","selected","help","onChange","hideLabelFromVision","options","disabled"];function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function b(e){var t=e.label,n=e.className,c=e.selected,d=e.help,m=e.onChange,p=e.hideLabelFromVision,O=e.options,v=void 0===O?[]:O,j=e.disabled,y=void 0!==j&&j,h=(f(e,s),Object(o.useInstanceId)(b)),_="inspector-radio-control-".concat(h),g=function(e){return m(e.target.value)};return!Object(a.isEmpty)(v)&&Object(r.createElement)(i.BaseControl,{label:t,id:_,hideLabelFromVision:p,help:d,className:l()(n,"components-radio-control bwf-components-radio-control")},Object(r.createElement)("div",{className:"bwf-radio-control-inner"},v.map((function(e,t){return Object(r.createElement)("div",{key:"".concat(_,"-").concat(t),className:"components-radio-control__option"},Object(r.createElement)("input",{id:"".concat(_,"-").concat(t),className:"components-radio-control__input",type:"radio",name:_,value:e.value,onChange:g,checked:e.value===c,disabled:y||e.disabled||e.isPro,"aria-describedby":d?"".concat(_,"__help"):void 0}),e.isPro&&Object(r.createElement)(u.a,null),Object(r.createElement)("label",{htmlFor:"".concat(_,"-").concat(t)},e.label))}))))}},247:function(e,t,n){"use strict";var r=n(0),a=n(2),c=n(17),l=n.n(c);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){f(c,r,a,l,o,"next",e)}function o(e){f(c,r,a,l,o,"throw",e)}l(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var a=j(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,n,a,c,l,o=p(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).state={values:e.initialValues,errors:e.errors,touched:e.touched},t.getInputProps=t.getInputProps.bind(v(t)),t.handleSubmit=t.handleSubmit.bind(v(t)),t.setTouched=t.setTouched.bind(v(t)),t.setValue=t.setValue.bind(v(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.validate()}},{key:"componentWillUnmount",value:function(){this.validate((function(){}))}},{key:"componentDidUpdate",value:function(e,t){this.props.initialValues&&this.props.initialValues!==e.initialValues&&this.setState({values:this.props.initialValues})}},{key:"isValidForm",value:(l=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.validate();case 2:return e.abrupt("return",!Object.keys(this.state.errors).length);case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"validate",value:function(){var e=this.state.values,t=this.props.validate(e);this.setState({errors:t})}},{key:"setFormValue",value:function(e){console.log(this),this.setState({values:e})}},{key:"setValue",value:function(e,t){var n=this;this.setState((function(n){return{values:u(u({},n.values),{},s({},e,t))}}),(function(){var r=n.props,a=r.onChange;r.onChangeCallback,a({name:e,value:t},n.state.values,!Object.keys(n.state.errors||{}).length,n.setFormValue),n.validate((function(){}))}))}},{key:"setTouched",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState((function(n){return{touched:u(u({},n.touched),{},s({},e,t))}}))}},{key:"handleChange",value:function(e,t){var n=this.state.values;t.target?"checkbox"===t.target.type?this.setValue(e,!n[e]):this.setValue(e,t.target.value):this.setValue(e,t)}},{key:"handleBlur",value:function(e){this.setTouched(e)}},{key:"handleSubmit",value:(c=b(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.values,n={},Object.keys(t).map((function(e){return n[e]=!0})),this.setState({touched:n}),e.next=6,this.isValidForm();case 6:if(!e.sent){e.next=8;break}this.props.onSubmitCallback(t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getInputProps",value:function(e){var t=this,n=this.state,r=n.errors,a=n.touched,c=n.values;return u(u({value:c[e],checked:Boolean(c[e]),selected:c[e],onChange:function(n){return t.handleChange(e,n)},onBlur:function(){return t.handleBlur(e)}},a[e]&&r[e]&&{className:"has-error"}),{},{help:a[e]?r[e]:null})}},{key:"getStateAndHelpers",value:function(){var e=this.state,t=e.values,n=e.errors;return{values:t,errors:n,touched:e.touched,setTouched:this.setTouched,setValue:this.setValue,handleSubmit:this.handleSubmit,getInputProps:this.getInputProps,isValidForm:!Object.keys(n).length}}},{key:"render",value:function(){var e=this.props.children(this.getStateAndHelpers());return Object(r.cloneElement)(e)}}])&&d(t.prototype,n),a&&d(t,a),i}(r.Component);y.propTypes={children:l.a.any,errors:l.a.object,initialValues:l.a.object.isRequired,onSubmitCallback:l.a.func,validate:l.a.func},y.defaultProps={errors:{},initialValues:{},onSubmitCallback:a.noop,touched:{},validate:a.noop,onChange:function(){}},t.a=y},248:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),a=n(7),c=n.n(a),l=(n(261),["className","onChange","label","color","disabled"]);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function f(e){var t=e.className,n=e.onChange,a=e.label,u=e.color,f=e.disabled,b=s(e,l),d=i(Object(r.useState)(!0),2),m=d[0],p=d[1],O=Object(r.useRef)();return Object(r.createElement)("div",{className:c()("bwf-checkbox-control bwf-checkbox",t)},Object(r.createElement)("span",{className:"bwf-checkbox-control-inner"},Object(r.createElement)("input",o({type:"checkbox"},b,{onChange:function(e){f||(n(e.target.checked),p(!1))},ref:O,className:c()({"bwf-no-animation":m,"bwf-disable":f}),style:{"--current-checkbox-color":u}}))),a&&Object(r.createElement)("label",{className:"bwf-checkbox-control__label ".concat(f?"bwf-disable":""),onClick:function(){return O.current.click()}},a))}},249:function(e,t,n){"use strict";var r=n(24),a=["getStateProp"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("templates"),t=e.getStateProp;return l(l({},i(e,a)),{},{getTemplates:function(){return t("templates")},getBuilders:function(){return t("builders")},getFilters:function(){return t("filters")},templateLoading:function(){return t("isLoading")},getDefaultBuilder:function(){return t("default_builder")},getActiveBuilder:function(){return t("active_builder")},getActiveGroup:function(){return t("active_group")},getCurrentTemplate:function(){return t("current_template")},getActiveStep:function(){return t("active_step")},getActiveSubFilter:function(){return t("active_sub_filter")},getPageBuildersTexts:function(){return t("page_builders_texts")},getPageBuildersOptions:function(){return t("page_builders_options")},getImportBtnLabel:function(){return t("import_btn_label")},getScratchTemplateType:function(){return t("scratch_template_type")},getImportOffer:function(){return t("import_offer")}})}},250:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(2),c=n(7),l=n.n(c),o=n(51),i=n(9),u=(n(4),n(1)),s=n(61);n(278);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t=e.label,n=void 0===t?"":t,c=e.id,b=void 0===c?"":c,d=e.value,m=e.onChange,p=void 0===m?a.noop:m,O=e.className,v=e.style,j=void 0===v?{}:v,y=e.isHover,h=e.hoverVal,_=void 0===h?"":h,g="inspector-color-".concat(Object(o.useInstanceId)(i.ColorPicker)),w=f(Object(r.useState)(!1),2),E=w[0],S=w[1],N=f(Object(r.useState)(),2),k=N[0],C=N[1],P=f(Object(r.useState)(0),2),x=P[0],T=P[1],A=y?Object(a.isArray)(d)?d:[d,_]:d,I=function(e){if(y){var t=A;return t[x]=e.hex,void p(t,{id:b})}p(e.hex,{id:b})},D=y?A[x]:A;return Object(r.createElement)("div",{className:l()("components-color-field",O),style:j},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:g},n),y&&Object(r.createElement)(i.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(i.Button,{className:l()("is-secondary-gray is-small",{"is-selected":0===x}),onClick:function(){return T(0)}},Object(u.__)("Default","funnel-builder")),Object(r.createElement)(i.Button,{className:l()("is-secondary-gray is-small",{"is-selected":1===x}),onClick:function(){return T(1)}},Object(u.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(i.ColorIndicator,{colorValue:D,ref:C,className:l()({"is-empty":Object(a.isEmpty)(D)})}),Object(r.createElement)("span",{className:"indicator-text"},D||"Select")),E&&Object(r.createElement)(s.a,{position:"top right",onClose:function(){return S(!1)},anchor:k},Object(r.createElement)(i.ColorPicker,{color:D,onChangeComplete:I}),Object(r.createElement)(i.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return I({hex:""})}},Object(u.__)("Reset","funnel-builder")))))}},251:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return O}));var r=n(0),a=n(9),c=n(1),l=n(14),o=n(4);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){return"yes"===e.pro?wffn.i18n.ribbons.pro:wffn.i18n.ribbons.lite},b=function(e){var t=e.FB_PRO_STATUS,n=e.funnelId,a=e.importType,i=e.activeTemplateGroup;return u(u({title:!1===t?Object(c.__)("Templates are a PRO Feature","funnel-builder"):Object(c.__)("Unable to Import Template","funnel-builder"),content:!1===t?Object(r.createElement)(r.Fragment,null,Object(c.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(c.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(c.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(c.__)("inactive or has expired.","funnel-builder")),Object(c.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==t&&{action:function(){return Object(l.k)({},"/settings/")}}),{},{proLink:Object(o.K)([0===n||"funnel"===a?"Template":"Step",i,"Build","From","Scratch","Upgrade","Modal"])})},d=function(e){var t=e.templateName,n=e.FB_PRO_STATUS,a=e.funnelId,i=e.activeGroup,s=e.activeStep;return u(u({title:!1===n?Object(r.createElement)(r.Fragment,null,t,Object(c.__)(" is a PRO template","funnel-builder")):Object(c.__)("Unable to Import Template","funnel-builder"),content:!1===n?Object(r.createElement)(r.Fragment,null,Object(c.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(c.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(c.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(c.__)("inactive or has expired.","funnel-builder")),Object(c.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==n&&{action:function(){return Object(l.k)({},"/settings/")}}),{},{proLink:Object(o.K)([a?"Step":"Template",a?i:"upsell"===i?"upsell":s,t,"Upgrade","Modal"])})},m=function(e){var t=e.showSnackbar,n=e.hideSnackbar,l=e.builder,o=e.defaultBuilder,i=e.onConfirm,u=e.defaultEditorLoading;o===l||u||t(Object(r.createElement)("div",null,Object(c.__)("Want to make this default page builder?","funnel-builder")," ",Object(r.createElement)(a.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){i(l),n()}},Object(c.__)("Yes","funnel-builder")),Object(r.createElement)(a.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){return n()}},Object(c.__)("No","funnel-builder"))),!1)},p=function(e,t){var n=e;return"upsell"===t&&"wp_editor"===e?n="custom":"wc_checkout"===t&&"wp_editor"===e?n="embed_forms":"wc_checkout"===t&&"customizer"===e&&(n="pre_built"),n},O={optin:{inline:Object(c.__)("Inline","funnel-builder"),popup:Object(c.__)("Popup","funnel-builder")},wc_checkout:{1:Object(c.__)("One","funnel-builder"),2:Object(c.__)("Two","funnel-builder"),3:Object(c.__)("Three","funnel-builder")}}},252:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(0),a=n(9),c=n(51),l=n(2),o=n(7),i=n.n(o),u=(n(287),n(75)),s=n(26);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=e.label,n=e.className,o=e.value,m=e.help,p=e.options,v=void 0===p?[]:p,j=e.onBlur,y=(void 0===j&&l.noop,e.onChange),h=void 0===y?l.noop:y,_=e.onFocus,g=(void 0===_&&l.noop,e.disabled),w=e.showtooltip,E=void 0!==w&&w,S=e.tooltipmsg,N=void 0===S?"":S,k=d(Object(r.useState)(!0),2),C=k[0],P=k[1],x=Object(c.useInstanceId)(O);if(Object(l.isEmpty)(v))return null;var T="inspector-checklist-".concat(x);o=null!=o&&o?o:[];var A=i()("components-checklist",n),I=function(e){var t=b(o);!0===e.target.checked?o.includes(e.target.value)||t.push(e.target.value):t=o.filter((function(t){return t!==e.target.value})),h(t,{event:e}),P(!1)};return Object(r.createElement)(a.BaseControl,{label:t,id:T,help:m},Object(r.createElement)("div",{className:"component-checklist-option-wrap ".concat(A)},v.map((function(e,t){return Object(r.createElement)(u.a,{toolTipText:e.disable&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},N),visible:E&&e.disable||!1,size:280,iconSize:"auto",key:"".concat(T,"-").concat(t),position:"bottom right"},Object(r.createElement)("div",{key:"".concat(T,"-").concat(t),className:i()("bwf-checkbox-control")},Object(r.createElement)("span",{className:i()("bwf-checkbox-control-inner",{"bwf-checkbox-disabled":e.disable})},Object(r.createElement)("input",f({id:"".concat(T,"-").concat(t),type:"checkbox",value:e.value,onChange:e.disable?function(){}:I,checked:(n=o,a=e.value,!!Array.isArray(n)&&n.includes(a)),className:i()({"bwf-no-animation":C}),"aria-describedby":m?"".concat(T,"__help"):void 0},(g||e.isPro)&&{disabled:!0}))),e.isPro&&Object(r.createElement)(s.a,null),Object(r.createElement)("label",{htmlFor:"".concat(T,"-").concat(t)},e.label)));var n,a}))))}},253:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(56),l=n(2),o=n(9);n(7),n(264);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.value,n=void 0===t?"":t,o=e.onChange,i=e.keyid,s=e.openMergeTagModal,b=e.customSettings,d=void 0===b?{}:b,m=e.toolbar,p=e.quicktags,O=void 0!==p&&p,v=Object(r.useRef)(!1),j=Object(r.useRef)(n);return Object(r.useEffect)((function(){if(v.current){var e=window.tinymce.get("editor-bwf"+i);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),j.current=n||"")}}),[n]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,a=["lists","link"];Object(l.isEmpty)(r)||(a=[].concat(f(Object(l.isArray)(r)?r:r.split(",")),f(a))),wp.editor.initialize("editor-bwf"+i,{tinymce:u(u({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:m||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:f(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+i,plugins:a},d),quicktags:!!O&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(l.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,o(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){c.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==c.BACKSPACE&&t.keyCode!==c.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===c.F10&&t.stopPropagation()})),s&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(a.__)("Merge Tags","funnel-builder"),tooltip:Object(a.__)("Merge Tags","funnel-builder"),onclick:function(){s(!0)}}),e.on("init",(function(){null==e||e.setContent(j.current),o(j.current)}))}function n(){"complete"===document.readyState&&e()}return v.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",n),function(){document.removeEventListener("readystatechange",n),wp.oldEditor.remove("editor-bwf"+i)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+i,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){o(e.target.value)},onBlur:function(e){o(e.target.value)}}))};function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,a=m(Object(r.useState)("visual"),2),c=a[0],l=(a[1],m(Object(r.useState)(),2)),i=l[0],u=l[1];return Object(r.useEffect)((function(){u(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===c&&Object(r.createElement)(d,e),n&&"text"==c&&Object(r.createElement)(o.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:i,onChange:function(t){null!=e&&e.onChange(t)}}))))}},254:function(e,t,n){"use strict";var r=n(0),a=n(7),c=n.n(a),l=n(2),o=n(9),i=n(41),u=(n(266),n(8));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,a=e.className,b=e.center,d=void 0!==b&&b,m=e.isDismissive,p=void 0!==m&&m,O=e.onDismisal,v=void 0===O?function(){}:O,j=e.isProFeatureLocked;if(Object(l.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:c()("bwf-zero-state",a,{"bwf-block-t-center":d})},p&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return v()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(u.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(i.a,{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(i.a,{key:"layout-block-"+t,className:c()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(i.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(i.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),j&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(i.a,{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(o.Button,f({isPrimary:!0,key:t,onClick:e.onClick,className:"".concat(e.className," bwf-no-ripple")},e.props),!1!==e.proCheck&&j&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},255:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n(0),a=n(17),c=n.n(a),l=["component","children"];function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=Object(r.createContext)(2);function u(e){return Object(r.createElement)(i.Consumer,null,(function(t){var n="h"+Math.min(t,6);return Object(r.createElement)(n,e)}))}function s(e){var t=e.component,n=e.children,a=o(e,l),c=t||"div";return Object(r.createElement)(i.Consumer,null,(function(e){return Object(r.createElement)(i.Provider,{value:e+1},!1===t?n:Object(r.createElement)(c,a,n))}))}s.propTypes={component:c.a.oneOfType([c.a.func,c.a.string,c.a.bool]),children:c.a.node}},260:function(e,t,n){"use strict";var r=n(0),a=n(3),c=n.n(a),l=(n(257),n(267)),o=(n(9),n(8)),i=n(1),u=n(2);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t=e.groupID,n=e.items,a=e.className,s=void 0===a?"":a,b=e.sortable,p=e.groupData,O=e.handleClick,v=e.actions,j=e.handleIcons,y=e.openedTabs,h=(void 0===y&&u.noop,e.openedKeys),_=e.setOpenedKeys,g=e.returnProps,w=void 0!==g&&g,E=m(Object(r.useState)(h||[0]),2),S=E[0],N=E[1],k={};n.forEach((function(e){k[e.key]=Object(r.createRef)()})),Object(r.useEffect)((function(){void 0!==h&&N(h)}),[h]),Object(r.useEffect)((function(){void 0!==_&&_(S)}),[S]),Object(r.useEffect)((function(){var e=Object.keys(k)[0],t=function(t){jQuery(k[t].current).on("click",(function(n){var r=Object(u.isString)(n.target.className)&&n.target.className.split(" ");if(r&&!r.includes("components-form-toggle__input")&&!r.includes("components-toggle-control__label")){var a=jQuery(this).parents(".bwf-c-s-collapsible");t!==e||a.hasClass("bwf-accordion-closed")?t===e&&a.hasClass("bwf-accordion-closed")?(a.find(".bwf-c-s-full").stop().slideDown(400),a.removeClass("bwf-accordion-closed")):a.hasClass("bwf-accordion-closed")?(a.find(".bwf-c-s-full").stop().slideUp(400),a.removeClass("bwf-accordion-closed")):(a.find(".bwf-c-s-full").stop().slideDown(400),a.addClass("bwf-accordion-closed")):(a.find(".bwf-c-s-full").stop().slideUp(400),a.addClass("bwf-accordion-closed"))}}))};for(var n in k)t(n)}),[]);var C=Object(l.e)((function(){return Object(r.createElement)(o.a,{icon:"menu"})}));return Object(r.createElement)("div",{className:"bwf-accordian-list"},n&&n.map((function(e,n){return e.hasOwnProperty("key")?Object(r.createElement)("div",{key:e.key,"data-accordion":n,className:s+" bwf-c-s-collapsible"},Object(r.createElement)("div",{className:"bwf-c-s-heading",ref:k[e.key],onClick:function(e){-1===S.indexOf(n)?N((function(e){return[].concat(d(e),[n])})):setTimeout((function(){N((function(e){return e.filter((function(e){return e!==n}))}))}),400)}},b&&Object(r.createElement)(C,null),Object(r.createElement)("div",{className:"bwf-accordion-label-elm"},e.label),v&&v.map((function(e){return e.hasOwnProperty("key")?Object(r.createElement)("a",{onClick:function(n){n.preventDefault(),O(e.key,t,"group",0,p)},href:"",key:e.key,className:"bwf-accordion-"+e.class},Object(i.__)(null==e?void 0:e.label,"funnel-builder")):null})),Object(r.createElement)("div",{className:"bwf-c-s-icon"},"plus-minus"===j?Object(r.createElement)(o.a,{icon:S.includes(n)?"minus":"plus-3"}):Object(r.createElement)(o.a,{icon:S.includes(n)?"angle-up":"angle-down",width:"16",height:"18"}))),Object(r.createElement)("div",{className:"bwf-c-s-full bwf-c-s-allow-edit bwf-accordion bwf-hide",style:f({},S.includes(n)&&{display:"block"})},e.hint,c.a.isValidElement(e.display)?c.a.cloneElement(e.display,w?{isOpened:S.includes(n)}:{}):e.display)):null})))};v.defaultProps={items:[{key:"",label:"",display:Object(r.createElement)("p",null)}]},t.a=v},261:function(e,t,n){},262:function(e,t,n){"use strict";var r=n(0),a=(n(274),n(8));function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.children,n=e.status,l=void 0===n?"error":n,o=(e.onRemove,e.isDismissible,e.className),i=void 0===o?"":o,u=c(Object(r.useState)(!1),2),s=u[0];u[1];return!s&&Object(r.createElement)("section",{className:"bwf-custom-notice ".concat(l," ").concat(i)},Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start"},Object(r.createElement)(a.a,{icon:"info",color:"success"===l?"#09B29C":"warning"===l?"#FFC65C":"info"===l?"#353030":"#E15334"}),Object(r.createElement)("div",{className:"bwf--align-center"},t)))}},264:function(e,t,n){},266:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){"use strict";var r=n(24),a=["getStateProp"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("settings"),t=e.getStateProp;return l(l({},i(e,a)),{},{data:t("data"),tabs:t("tabs"),isLoading:t("isLoading")})}},273:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(8);n(293);t.a=function(e){var t=e.onClose,n=e.title,l=e.isDismissible,o=void 0===l||l;return Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},n),o&&Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(a.__)("Close","funnel-builder"),onClick:function(){return t()}},Object(r.createElement)(c.a,{icon:"close",size:20})))}},274:function(e,t,n){},275:function(e,t,n){"use strict";var r=n(0);n(257);function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.count,n=void 0===t?10:t,c=e.className,l=void 0===c?"":c;return Object(r.createElement)("div",{className:"bwf-accordion-placeholder ".concat(l)},a(Array(n)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-mb-16 bwf-c-s-collapsible",key:"bwf-accordion-placeholder__".concat(t),"data-accordion":t},Object(r.createElement)("div",{className:"bwf-placeholder-temp"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp"}))})))}},277:function(e,t,n){"use strict";var r=n(0),a=(n(9),n(7)),c=n.n(a),l=n(2),o=n(17),i=n.n(o),u=n(8),s=n(61),f=(n(255),function(e){var t=e.disabled,n=e.value,a=e.onChange,o=e.dateFormat,i=e.label,f=e.describedBy,b=e.error,d=e.onFocus,m=e.onKeyDown,p=e.errorPosition,O=e.placeHolder,v=c()("bwf-calendar-input",{"is-empty":0===n.length,"is-error":b}),j=Object(l.uniqueId)("_woo-dates-input"),y=Object(r.useRef)(null);return Object(r.createElement)("div",{className:v},Object(r.createElement)("input",{type:"text",ref:y,className:"bwf-calendar-input-text",value:n,onChange:a,"aria-label":i,id:j,"aria-describedby":"".concat(j,"-message"),placeholder:Object(l.isEmpty)(O)?o.toLowerCase():O,onFocus:d,onKeyDown:m,disabled:t}),b&&Object(r.createElement)(s.a,{className:"bwf-calendar-input-error",focusOnMount:!1,position:p},b),Object(r.createElement)("span",{className:"bwf-calender-custom-icon",onClick:function(){d(),y.current&&y.current.focus()}},Object(r.createElement)(u.a,{icon:"calender"})),Object(r.createElement)("p",{className:"screen-reader-text",id:"".concat(j,"-message")},b||f))});f.propTypes={disabled:i.a.bool,value:i.a.string,onChange:i.a.func.isRequired,dateFormat:i.a.string.isRequired,label:i.a.string.isRequired,describedBy:i.a.string.isRequired,error:i.a.string,errorPosition:i.a.string,onFocus:i.a.func,onKeyDown:i.a.func},f.defaultProps={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:l.noop},t.a=f},278:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){"use strict";var r=n(9),a=n(0),c=n(7),l=n.n(c),o=n(252),i=n(248),u=n(244),s=n(2),f=n(283),b=["ajax_cb","options"];function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=n(253),j=["value","onChange","id","label","className"];function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,c=e.id,o=e.label,i=e.className,u=h(e,j);function s(e){r(e,c)}return Object(a.createElement)("div",{className:l()("components-richeditor",i)},o&&Object(a.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:c},o),Object(a.createElement)(v.a,y({content:n,value:n,setContent:s,onChange:s,keyid:c},u)))},g=n(8),w=function(e){var t=e.label,n=e.copy_text;return Object(a.createElement)("div",{className:l()("components-copier")},t&&Object(a.createElement)("label",{className:"components-label"},t),n&&Object(a.createElement)("div",{className:"bwf-display-flex"},Object(a.createElement)("span",{className:"bwf-copier-text"},n," "),Object(a.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(a.createElement)(g.a,{icon:"duplicate",size:20}),"Copy")))},E=n(245),S=n(250),N=n(1),k=(n(288),n(4));function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t){var n;if(Object(s.isObject)(e))return e;if(Object(s.isString)(e)){var r,a=e.split(" ");return A(r={},t.attrTop,Object(s.isEmpty)(a[0])?"0":a[0]),A(r,t.attrRight,Object(s.isEmpty)(a[1])?"0":a[1]),A(r,t.attrBottom,Object(s.isEmpty)(a[2])?"0":a[2]),A(r,t.attrLeft,Object(s.isEmpty)(a[3])?"0":a[3]),r}return A(n={},t.attrTop,"0"),A(n,t.attrRight,"0"),A(n,t.attrBottom,"0"),A(n,t.attrLeft,"0"),n},D=function(e){var t,n=e.value,c=void 0===n?{}:n,o=e.label,i=e.type,u=e.onChange,f=void 0===u?s.noop:u,b=(e.defaultSync,I(c,e)),d="",m=x(Object(a.useState)(!Object(k.h)(Object.values(b))),2),p=m[0],O=m[1],v=x(Object(a.useState)(Object(s.cloneDeep)(Object(s.defaultsDeep)(b,(A(t={},e.attrTop,"0"),A(t,e.attrRight,"0"),A(t,e.attrBottom,"0"),A(t,e.attrLeft,"0"),t)))),2),j=v[0],y=v[1];d=j&&j[e.attrUnit]?j[e.attrUnit]:"px",Object(a.useEffect)((function(){y(P(P({},j),I(c,e)))}),[c]),Object(a.useEffect)((function(){var t;y(Object(s.cloneDeep)(Object(s.defaultsDeep)(b,(A(t={},e.attrTop,"0"),A(t,e.attrRight,"0"),A(t,e.attrBottom,"0"),A(t,e.attrLeft,"0"),t)))),d=j&&j[e.attrUnit]?j[e.attrUnit]:"px"}),[]);var h=function(t,n){var r=t.target.value;if(p)!function(t){"padding"===i&&(t=t.toString().replace(/-/g,""));var n=P({},j);if(n[e.attrTop]=t,n[e.attrRight]=t,n[e.attrBottom]=t,n[e.attrLeft]=t,Object(s.isString)(c)){var r="".concat(n[e.attrTop]," ").concat(n[e.attrRight]," ").concat(n[e.attrBottom]," ").concat(n[e.attrLeft]);f(r)}else f(n)}(r);else{"padding"===i&&(r=r.toString().replace(/-/g,""));var a=P({},j);if(a[n]=r,Object(s.isString)(c)){var l="".concat(a[e.attrTop]," ").concat(a[e.attrRight]," ").concat(a[e.attrBottom]," ").concat(a[e.attrLeft]);f(l)}else f(a)}};return Object(a.createElement)("div",{className:"bwf-dimensions-control-component"},o&&Object(a.createElement)("label",{className:"components-base-control__label"},o),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return h(t,e.attrTop)},"aria-label":Object(N.sprintf)(Object(N.__)("%s Top","funnel-builder"),o),value:j&&j[e.attrTop],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return h(t,e.attrRight)},"aria-label":Object(N.sprintf)(Object(N.__)("%s Top","funnel-builder"),o),value:j&&j[e.attrRight],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return h(t,e.attrBottom)},"aria-label":Object(N.sprintf)(Object(N.__)("%s Top","funnel-builder"),o),value:j&&j[e.attrBottom],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return h(t,e.attrLeft)},"aria-label":Object(N.sprintf)(Object(N.__)("%s Top","funnel-builder"),o),value:j&&j[e.attrLeft],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":i}),Object(a.createElement)(r.Button,{className:l()("components-bwf-dimensions-control_reset",{"is-lock":p}),label:Object(N.__)("Reset","funnel-builder"),onClick:function(){return O((function(e){return!e}))},isSmall:!0},Object(a.createElement)(g.a,{icon:p?"lock":"unlock",size:"16"}))),Object(a.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))};D.defaultProps={label:Object(N.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(N.__)("Top","funnel-builder"),labelRight:Object(N.__)("Right","funnel-builder"),labelBottom:Object(N.__)("Bottom","funnel-builder"),labelLeft:Object(N.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"};var F=D,R=n(51);n(289);function B(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=[{id:"h-offset",selectindex:0,label:Object(N.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(N.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(N.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(N.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(N.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(N.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],q=function e(t){var n=t.typography,r=t.setTypography,c=t.settingOptions,l=t.label,o=Object(R.useInstanceId)(e,"bwf-field-item");return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-box-shadow-control-component ",id:o},l&&Object(a.createElement)("label",{className:"components-base-control__label"},l),Object(a.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},c.map((function(e){return e.type?"color"===e.type?"":void 0:Object(a.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(a.createElement)("input",{type:"number",value:n[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(t){var a=t.target.value;a=e.hasOwnProperty("allownegative")&&e.allownegative?t.target.value:a<0?0:a;var c=B(n);c[e.selectindex]=a,r(c)}}),Object(a.createElement)("label",{htmlFor:e.id},e.label))})))),Object(a.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"}," ",Object(a.createElement)("label",{className:"components-base-control__label"},Object(N.__)("Shadow Color","funnel-builder")),Object(a.createElement)(S.a,{value:n[4],onChange:function(e){var t=B(n);t[4]=e,r(t)}})))},z=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,c=n.h_offset,l=void 0===c?"":c,o=n.v_offset,i=void 0===o?"":o,u=n.blur,s=void 0===u?"":u,f=n.spread,b=void 0===f?"":f,d=n.color,m=void 0===d?"":d,p=n.inset,O=[l,i,s,b,m,void 0===p?"":p];return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(q,{typography:O,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:M,label:r}))};n(290);function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=e.value,n=e.onChange,c=e.label,l=e.defaultCustomValue,o=V(Object(a.useState)(""),2),i=o[0],f=o[1],b=V(Object(a.useState)(""),2),d=b[0],m=b[1];return Object(a.useEffect)((function(){Object(s.isEmpty)(d)&&(Object(s.isEmpty)(null==t?void 0:t.toString())?(m("auto"),f("100%")):(m("custom"),f(t)))}),[t]),Object(a.createElement)(a.Fragment,null,c&&Object(a.createElement)("label",{className:"components-base-control__label"},c),Object(a.createElement)("div",{className:"bwf-width-control"},Object(a.createElement)(r.TextControl,U({value:i,onChange:function(e){n(e),f(e)},disabled:"auto"===d},"custom"===d&&{type:"number",min:"0"})),Object(a.createElement)(u.a,{options:[{key:"auto",label:Object(N.__)("Auto","funnel-builder")},{key:"custom",label:Object(N.__)("Custom","funnel-builder")}],selected:d,onChange:function(e){m(e),"auto"===e?(n(""),f("100%")):(n(Object(s.isEmpty)(null==t?void 0:t.toString())?l:t),f(l))}})))},$=n(75),J=["label","tooltip"];function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ee={checkbox:i.a,radio:E.a,select:u.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:o.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,c=O(e,b),l=m(Object(a.useState)(r),2),o=l[0],i=l[1],u=m(Object(a.useState)(!1),2),p=u[0],v=u[1];Object(a.useEffect)((function(){Object(s.isEmpty)(o)&&j()}),[o]);var j=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),i(t),v(!0)}})}))};return Object(a.createElement)(a.Fragment,null,p?Object(a.createElement)(f.a,d({options:o},c)):Object(a.createElement)("div",{className:"setting-form-field"},Object(a.createElement)("div",{className:"is-placeholder long"})))},richeditor:_,richtext:_,copier:w,color:S.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,c=X(e,J);return Object(a.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},Object(a.createElement)("label",null,t),!Object(s.isEmpty)(n)&&Object(a.createElement)($.a,{toolTipText:n,size:280,position:"bottom right"},Object(a.createElement)(g.a,{icon:"info",size:16}))),Object(a.createElement)(r.ToggleControl,Z({},c,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":F,"box-shadow":z,"bwf-label":function(e){var t=e.label,n=e.class;return Object(a.createElement)("span",{className:l()("bwf_label",n)},t)},width:H};t.a=function(e){var t=e.input,n=e.formProps,c=e.values,o=e.customMapField,i=void 0===o?{}:o,u=Q(Q({},ee),i),f=u.text;if(t.type.toLowerCase()in u&&(f=u[t.type.toLowerCase()]),t.ajax_cb&&(f=u.ajax),"select"===t.type&&t.multiple&&!Object(s.isEmpty)(c)){var b=c[t.id];if(Object(s.isEmpty)(b))c[t.id]=[];else if(!Object(s.isEmpty)(t.options)&&"string"==typeof b[0]){var d=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&b.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},d.push(t)}else if("string"==typeof e.value.id&&b.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},d.push(n)}})),c[t.id]=d}}var m,p;return Object(a.createElement)("div",{className:l()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(a.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(a.createElement)(f,Q(Q({label:t.label},(m=t,p=Object.assign({},m.props),m.type.toLowerCase()in u||(p.type=m.type.toLowerCase()),p.placeholder=m.placeholder,p.options=m.options,m.checkboxlabel&&(p.checkboxlabel=m.checkboxlabel),m.multiple&&(p.multiple=m.multiple),m.ajax_cb&&(p.ajax_cb=m.ajax_cb),"copier"===m.type&&(p=m),"width"===m.type&&(p=m),"color"===m.type&&(p=m,m.isHover&&m.hoverKey&&(p.hoverVal=c[m.hoverKey])),"richeditor"!==m.type&&"richtext"!==m.type&&"textarea"!==m.type||(p=m),"number"===m.type&&(p.min=m.min,p.max=m.max),"select"===m.type&&(p.excludeSelectedOptions=!1,p.options&&(p.options=p.options.map((function(e){return"object"!==G(e.value)&&(e.key="object"!==G(e.value)?e.value:e.key,e.value={id:e.value}),e}))),m.multiple&&(p.excludeSelectedOptions=!0,p.inlineTags=!0)),"richeditor"===m.type&&(p.id=m.id),"bwf-toggle"===m.type&&(p.tooltip=m.tooltip),"input"!==m.type&&"text"!==m.type&&"textarea"!==m.type||(p.placeholder=Object(N.__)("Type here…","funnel-builder")),"text"===m.type&&m.disabled&&(p.disabled=m.disabled),"toggle"===m.type&&(p.className="bwf-tooglecontrol-advance",p.tooltip=m.tooltip,p.label=m.label),p.keyid=m.key,p)),n)),t.hint&&Object(a.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},283:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(7),l=n.n(c),o=n(2),i=n(17),u=n.n(i),s=n(9),f=n(51),b=n(56);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,a,c=v(i);function i(){var e;return m(this,i),(e=c.apply(this,arguments)).handleKeyDown=e.handleKeyDown.bind(y(e)),e.select=e.select.bind(y(e)),e.optionRefs={},e.listbox=Object(r.createRef)(),e}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,r=t.selectedIndex;Object(o.isEqual)(n,e.options)||(this.optionRefs={}),r!==e.selectedIndex&&this.scrollToOption(r)}},{key:"getOptionRef",value:function(e){return this.optionRefs.hasOwnProperty(e)||(this.optionRefs[e]=Object(r.createRef)()),this.optionRefs[e]}},{key:"select",value:function(e){var t=this.props.onSelect;e.isDisabled||t(e)}},{key:"scrollToOption",value:function(e){var t=this.listbox.current;if(!(t.scrollHeight<=t.clientHeight)&&this.optionRefs[e]){var n=this.optionRefs[e].current,r=t.clientHeight+t.scrollTop,a=n.offsetTop+n.offsetHeight;a>r?t.scrollTop=a-t.clientHeight:n.offsetTop<t.scrollTop&&(t.scrollTop=n.offsetTop)}}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,a=t.options,c=t.onSearch,l=t.selectedIndex,o=t.setExpanded;if(0!==a.length)switch(e.keyCode){case b.UP:n(),e.preventDefault(),e.stopPropagation();break;case b.DOWN:r(),e.preventDefault(),e.stopPropagation();break;case b.ENTER:this.select(a[l]),e.preventDefault(),e.stopPropagation();break;case b.LEFT:case b.RIGHT:o(!1);break;case b.ESCAPE:return o(!1),void c(null);case b.TAB:this.select(a[l]),o(!1),c(null)}}},{key:"toggleKeyEvents",value:function(e){this.props.node[e?"addEventListener":"removeEventListener"]("keydown",this.handleKeyDown,!0)}},{key:"componentDidMount",value:function(){this.toggleKeyEvents(!0)}},{key:"componentWillUnmount",value:function(){this.toggleKeyEvents(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,a=t.listboxId,c=t.options,o=t.selectedIndex,i=t.staticList,u=l()("bwf-select-control-listbox",{"is-static":i});return Object(r.createElement)("div",{ref:this.listbox,id:a,role:"listbox",className:u,tabIndex:"-1"},c.map((function(t,a){return Object(r.createElement)(s.Button,{ref:e.getOptionRef(a),key:t.key,id:"bwf-select-control-option-".concat(n,"-").concat(t.key),role:"option","aria-selected":a===o,disabled:t.isDisabled,className:l()("bwf-select-control-option",{"is-selected":a===o}),onClick:function(){return e.select(t)},tabIndex:"-1"},t.label)})))}}])&&p(t.prototype,n),a&&p(t,a),i}(r.Component);_.propTypes={instanceId:u.a.number,listboxId:u.a.string,node:u.a.instanceOf(Element).isRequired,onSelect:u.a.func,options:u.a.arrayOf(u.a.shape({isDisabled:u.a.bool,key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,keywords:u.a.arrayOf(u.a.oneOfType([u.a.string,u.a.number])),label:u.a.oneOfType([u.a.string,u.a.object]),value:u.a.any})).isRequired,selectedIndex:u.a.number,staticList:u.a.bool};var g=_,w=n(327);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(i,e);var t,n,c,l=P(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).removeAll=t.removeAll.bind(T(t)),t.removeResult=t.removeResult.bind(T(t)),t}return t=i,(n=[{key:"removeAll",value:function(){(0,this.props.onChange)([])}},{key:"removeResult",value:function(e){var t=this;return function(){var n=t.props,r=n.selected,a=n.onChange,c=Object(o.findIndex)(r,{key:e});a([].concat(S(r.slice(0,c)),S(r.slice(c+1))))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selected,c=t.showClearButton;return n.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-select-control-tags"},n.map((function(t,c){if(!t.label)return null;var l=Object(a.sprintf)(Object(a.__)("%1$s (%2$s of %3$s)","funnel-builder"),t.label,c+1,n.length);return Object(r.createElement)(w.a,{key:t.key,id:t.key,label:t.label,remove:e.removeResult,screenReaderLabel:l})}))),c&&Object(r.createElement)(s.Button,{className:"bwf-select-control-clear",isLink:!0,onClick:this.removeAll},Object(r.createElement)(s.Icon,{icon:"dismiss"}),Object(r.createElement)("span",{className:"screen-reader-text"},Object(a.__)("Clear all","funnel-builder")))):null}}])&&k(t.prototype,n),c&&k(t,c),i}(r.Component);I.propTypes={onChange:u.a.func,onSelect:u.a.func,selected:u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string})),showClearButton:u.a.bool};var D=I,F=n(8);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K(e);if(t){var a=K(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(i,e);var t,n,c,o=z(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={isActive:!1},t.input=Object(r.createRef)(),t.updateSearch=t.updateSearch.bind(V(t)),t.onFocus=t.onFocus.bind(V(t)),t.onBlur=t.onBlur.bind(V(t)),t.onKeyDown=t.onKeyDown.bind(V(t)),t}return t=i,(n=[{key:"updateSearch",value:function(e){var t=this;return function(n){t.isBWFMaintainSingleTerm()||e(n.target.value)}}},{key:"onFocus",value:function(e){var t=this,n=this.props,r=n.isSearchable,a=n.setExpanded,c=n.showAllOnFocus,l=n.updateFilteredOptions;return function(n){t.setState({isActive:!0}),r&&c?(n.target.select(),l("")):r?e(n.target.value):a(!0)}}},{key:"onBlur",value:function(){var e=this.props.onBlur;"function"==typeof e&&e(),this.setState({isActive:!1})}},{key:"onKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,a=t.selected,c=t.onChange,l=t.query,o=t.setExpanded;b.BACKSPACE===e.keyCode&&!l&&a.length&&c(B(a.slice(0,-1))),b.DOWN===e.keyCode&&(r(),o(!0),e.preventDefault(),e.stopPropagation()),b.UP===e.keyCode&&(n(),o(!0),e.preventDefault(),e.stopPropagation())}},{key:"renderButton",value:function(){var e=this.props,t=e.multiple,n=e.selected;return t||!n.length?null:Object(r.createElement)("div",{className:"bwf-select-control-control-value"},n[0].label)}},{key:"renderInput",value:function(){var e=this.props,t=e.activeId,n=e.hasTags,a=e.inlineTags,c=e.instanceId,l=e.isExpanded,o=e.isSearchable,i=e.listboxId,u=e.onSearch,s=e.placeholder,f=e.searchInputType,b=this.state.isActive,d=this.isBWFMaintainSingleTerm();return Object(r.createElement)("input",{autoComplete:"off",className:"bwf-select-control-control-input",id:"bwf-select-control-".concat(c,"-control-input"),ref:this.input,type:o?f:"button",value:this.getInputValue(),placeholder:b&&!d?s:"",onChange:this.updateSearch(u),onFocus:this.onFocus(u),onBlur:this.onBlur,onKeyDown:this.onKeyDown,role:"combobox","aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":"true","aria-owns":i,"aria-controls":i,"aria-activedescendant":t,"aria-describedby":n&&a?"search-inline-input-".concat(c):null})}},{key:"isBWFMaintainSingleTerm",value:function(){var e=this.props,t=e.selected;return!!e.bwfMaintainSingleTerm&&t.length>0}},{key:"getInputValue",value:function(){var e=this.props,t=e.isFocused,n=e.isSearchable,r=e.multiple,a=e.query,c=e.selected,l=c.length?c[0].label:"";return r||t?this.isBWFMaintainSingleTerm()?"":n&&t&&a?a:"":l}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,c=t.hasTags,o=t.help,i=t.inlineTags,u=t.instanceId,s=t.isSearchable,f=t.label,b=t.query,d=this.state.isActive;return Object(r.createElement)("div",{className:l()("components-base-control","bwf-select-control-control",n,{empty:!b||0===b.length,"is-active":d,"has-tags":i&&c,"with-value":this.getInputValue().length,"has-error":!!o}),onClick:function(){e.input.current.focus()}},s&&Object(r.createElement)(F.a,{icon:"search",size:18}),i&&Object(r.createElement)(D,this.props),Object(r.createElement)("div",{className:"components-base-control__field"},!!f&&Object(r.createElement)("label",{htmlFor:"bwf-select-control-".concat(u,"-control-input"),className:"components-base-control__label"},f),this.renderInput(),i&&Object(r.createElement)("span",{id:"search-inline-input-".concat(u),className:"screen-reader-text"},Object(a.__)("Move backward for selected items","funnel-builder")),!!o&&Object(r.createElement)("p",{id:"bwf-select-control-".concat(u,"__help"),className:"components-base-control__help"},o)))}}])&&M(t.prototype,n),c&&M(t,c),i}(r.Component);H.propTypes={hasTags:u.a.bool,help:u.a.oneOfType([u.a.string,u.a.node]),inlineTags:u.a.bool,isSearchable:u.a.bool,instanceId:u.a.number,label:u.a.string,listboxId:u.a.string,onBlur:u.a.func,onChange:u.a.func,onSearch:u.a.func,placeholder:u.a.string,query:u.a.string,selected:u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string})),showAllOnFocus:u.a.bool,bwfMaintainSingleTerm:u.a.bool};var $=H;n(343);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function W(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var a=ae(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(u,e);var t,n,c,i=te(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),ce(re(t=i.call(this,e)),"mounted",!0),t.state=Z(Z({},t.constructor.getInitialState()),{},{filteredOptions:[],selectedIndex:0}),t.bindNode=t.bindNode.bind(re(t)),t.decrementSelectedIndex=t.decrementSelectedIndex.bind(re(t)),t.incrementSelectedIndex=t.incrementSelectedIndex.bind(re(t)),t.onAutofillChange=t.onAutofillChange.bind(re(t)),t.updateFilteredOptions=Object(o.debounce)(t.updateFilteredOptions.bind(re(t)),e.searchDebounceTime),t.search=t.search.bind(re(t)),t.selectOption=t.selectOption.bind(re(t)),t.setExpanded=t.setExpanded.bind(re(t)),t}return t=u,c=[{key:"getInitialState",value:function(){return{isExpanded:!1,isFocused:!1,query:""}}}],(n=[{key:"bindNode",value:function(e){this.node=e}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelected(),t=this.props.multiple,n=this.constructor.getInitialState();!t&&e.length&&e[0].label&&(n.query=e[0].label),this.setState(n)}},{key:"handleFocusOutside",value:function(){this.reset()}},{key:"hasTags",value:function(){var e=this.props,t=e.multiple,n=e.selected;return!!t&&n.some((function(e){return Boolean(e.label)}))}},{key:"getSelected",value:function(){var e=this.props,t=e.multiple,n=e.options,r=e.selected;if(t||Array.isArray(r))return r;var a=n.find((function(e){return e.key===r}));return a?[a]:[]}},{key:"selectOption",value:function(e){var t=this.props,n=t.multiple,r=t.onChange,a=t.selected,c=this.state.query,l=n?[].concat(W(a),[e]):[e];this.reset(l),Array.isArray(a)?-1===Object(o.findIndex)(a,{key:e.key})&&r(l,c):a!==e.key&&r(e.key,c)}},{key:"decrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(0===e?t.length:e)-1:t.length-1;this.setState({selectedIndex:n})}},{key:"incrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(e+1)%t.length:0;this.setState({selectedIndex:n})}},{key:"announce",value:function(e){var t=this.props.debouncedSpeak;t&&(e.length?t(Object(a.sprintf)(Object(a._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"funnel-builder"),e.length),"assertive"):t(Object(a.__)("No results.","funnel-builder"),"assertive"))}},{key:"getOptions",value:function(){var e=this.props,t=e.isSearchable,n=e.options,r=this.state.filteredOptions;return t?r:n}},{key:"getFilteredOptions",value:function(e,t){for(var n=this.props,r=n.excludeSelectedOptions,a=n.getSearchExpression,c=n.maxResults,l=n.onFilter,i=this.getSelected().map((function(e){return e.key})),u=[],s=a(Object(o.escapeRegExp)(t?t.trim():"")),f=s?new RegExp(s,"i"):/^$/,b=0;b<e.length;b++){var d=e[b];if(!r||!i.includes(d.key)){var m=d.keywords,p=void 0===m?[]:m;if("string"==typeof d.label&&(p=[].concat(W(p),[d.label])),p.some((function(e){return f.test(e)}))&&(u.push(d),c&&u.length===c))break}}return l(u,t)}},{key:"setExpanded",value:function(e){this.setState({isExpanded:e})}},{key:"search",value:function(e){this.setState({query:e,isFocused:!0}),this.updateFilteredOptions(e)}},{key:"updateFilteredOptions",value:function(e){var t=this,n=this.props,r=n.hideBeforeSearch,a=n.options,c=n.onSearch,l=this.activePromise=Promise.resolve(c(a,e)).then((function(n){if(l===t.activePromise&&t.mounted){var a=null===e||e.length||r?t.getFilteredOptions(n,e):n;t.setState({selectedIndex:0,filteredOptions:a,isExpanded:Boolean(a.length)},(function(){return t.announce(a)}))}}))}},{key:"onAutofillChange",value:function(e){var t=this.props.options,n=this.getFilteredOptions(t,e.target.value);1===n.length&&this.selectOption(n[0])}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.autofill,n=e.children,a=e.className,c=e.controlClassName,o=e.inlineTags,i=e.instanceId,u=e.isSearchable,s=e.options,f=this.state,b=f.isExpanded,d=f.isFocused,m=f.selectedIndex,p=this.hasTags(),O=(s[m]||{}).key,v=void 0===O?"":O,j=b?"bwf-select-control-listbox-".concat(i):null,y=b?"bwf-select-control-option-".concat(i,"-").concat(v):null;return Object(r.createElement)("div",{className:l()("bwf-select-control bwf-select-control-1",a,{"has-inline-tags":p&&o,"is-focused":d,"is-searchable":u}),ref:this.bindNode},t&&Object(r.createElement)("input",{onChange:this.onAutofillChange,name:t,type:"text",className:"bwf-select-control-autofill-input",tabIndex:"-1"}),n,Object(r.createElement)($,G({},this.props,this.state,{activeId:y,className:c,hasTags:p,isExpanded:b,listboxId:j,onSearch:this.search,selected:this.getSelected(),setExpanded:this.setExpanded,updateFilteredOptions:this.updateFilteredOptions,decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm})),!o&&p&&Object(r.createElement)(D,G({},this.props,{selected:this.getSelected()})),b&&Object(r.createElement)(g,G({},this.props,this.state,{activeId:y,listboxId:j,node:this.node,onSelect:this.selectOption,onSearch:this.search,options:this.getOptions(),decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,setExpanded:this.setExpanded})))}}])&&X(t.prototype,n),c&&X(t,c),u}(r.Component);le.propTypes={autofill:u.a.string,children:u.a.node,className:u.a.string,controlClassName:u.a.string,excludeSelectedOptions:u.a.bool,onFilter:u.a.func,getSearchExpression:u.a.func,help:u.a.oneOfType([u.a.string,u.a.node]),inlineTags:u.a.bool,isSearchable:u.a.bool,label:u.a.string,onChange:u.a.func,onSearch:u.a.func,options:u.a.arrayOf(u.a.shape({isDisabled:u.a.bool,key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,keywords:u.a.arrayOf(u.a.oneOfType([u.a.string,u.a.number])),label:u.a.oneOfType([u.a.string,u.a.object]),value:u.a.any})).isRequired,placeholder:u.a.string,searchDebounceTime:u.a.number,selected:u.a.oneOfType([u.a.string,u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string}))]),maxResults:u.a.number,multiple:u.a.bool,showClearButton:u.a.bool,searchInputType:u.a.oneOf(["text","search","number","email","tel","url"]),hideBeforeSearch:u.a.bool,showAllOnFocus:u.a.bool,staticList:u.a.bool,bwfMaintainSingleTerm:u.a.bool},le.defaultProps={autofill:null,excludeSelectedOptions:!0,getSearchExpression:o.identity,inlineTags:!1,isSearchable:!1,onChange:o.noop,onFilter:o.identity,onSearch:function(e){return Promise.resolve(e)},maxResults:0,multiple:!1,searchDebounceTime:0,searchInputType:"search",selected:[],showAllOnFocus:!1,showClearButton:!1,hideBeforeSearch:!1,staticList:!1,bwfMaintainSingleTerm:!1};t.a=Object(f.compose)([s.withSpokenMessages,f.withInstanceId,s.withFocusOutside])(le)},284:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(0),a=(n(298),n(299),n(1)),c=n(9),l=n(2),o=n(56),i=n(12),u=n.n(i),s=n(17),f=n.n(s),b=n(78),d=n(7),m=n.n(d),p=(n(255),n(277)),O=n(259),v=n(4),j=n(120);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(s,e);var t,n,c,i=g(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).onDateChange=t.onDateChange.bind(E(t)),t.onInputChange=t.onInputChange.bind(E(t)),t}return t=s,(n=[{key:"handleKeyDown",value:function(e,t,n){var r=n.keyCode;o.TAB===r&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var n=this.props,r=n.onUpdate,a=n.dateFormat,c=u()(t);r({date:c,text:t?c.format(a):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,n=this.props.dateFormat,r=Object(b.i)(n,t),a=r?null:b.b.invalid;this.props.onUpdate({date:r,text:t,error:t.length>0?a:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.date,c=t.disabled,o=t.text,i=t.dateFormat,u=t.error,s=t.isInvalidDate,f=t.placeHolder,b=t.position,d=void 0===b?"bottom center":b,O=t.hasValue,v=void 0!==O&&O,y=t.className;return Object(r.createElement)("div",{className:m()("bwf-specific-date",{"bwf-has-value":v})},Object(r.createElement)(j.a,{position:d,focusOnMount:!1,contentClassName:"bwf-filters-date-content ".concat(y),renderToggle:function(t){var n=t.isOpen,s=t.onToggle;return Object(r.createElement)(p.a,{disabled:!!n&&c,value:o,onChange:e.onInputChange,dateFormat:i,label:Object(a.__)("Choose a date","funnel-builder"),error:u,describedBy:Object(a.sprintf)(Object(a.__)("Date input describing a selected date in format %s","funnel-builder"),i),onFocus:Object(l.partial)(e.handleFocus,n,s),"aria-expanded":n,focusOnMount:!1,onKeyDown:Object(l.partial)(e.handleKeyDown,n,s),errorPosition:"top center",placeHolder:f})},renderContent:function(t){var a=t.onToggle;return Object(r.createElement)(k,{onToggle:a,date:n,isInvalidDate:s,onDateChange:e.onDateChange})}}))}}])&&h(t.prototype,n),c&&h(t,c),s}(r.Component),k=function(e){var t=e.onToggle,n=e.date,a=e.onDateChange,o=e.isInvalidDate,i=Object(r.useRef)();return Object(v.hb)(i,(function(){return t()})),Object(r.createElement)("div",{ref:i},Object(r.createElement)(O.b,{component:!1},Object(r.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(r.createElement)(c.DatePicker,{currentDate:n,onChange:Object(l.partial)(a,t),isInvalidDate:o}))))};N.propTypes={date:f.a.oneOfType([f.a.string,f.a.object]),disabled:f.a.bool,text:f.a.string,error:f.a.string,onUpdate:f.a.func.isRequired,dateFormat:f.a.string.isRequired,isInvalidDate:f.a.func},t.b=N},285:function(e,t,n){"use strict";var r=n(0),a=n(9),c=n(2),l=n(1),o=(n(314),n(17)),i=n.n(o),u=n(7),s=n.n(u),f=n(8),b=n(32);n(50);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t=e.onSearch,n=e.isLoading,o=e.items,i=e.onItemClick,u=e.error,m=e.blurText,p=e.placeholder,O=void 0===p?Object(l.__)("Type to search","funnel-builder"):p,v=e.helpText,j=e.multiGroup,y=void 0!==j&&j,h=e.stepTitle,_=void 0===h?Object(l.__)("details","funnel-builder"):h,g=d(Object(r.useState)(""),2),w=g[0],E=g[1],S=d(Object(r.useState)(!1),2),N=S[0],k=S[1],C=Object(r.useRef)(null),P=function(e,t){i(e),k(!1),t.preventDefault()},x=m||"",T=Object(r.useRef)();return Object(r.useEffect)((function(){return jQuery("body").on("click",(function(e){jQuery(T.current).find(e.target).length>0?k(!0):k(!1)})),function(){jQuery("body").off("click")}}),[]),Object(r.createElement)("div",{className:s()("bwf-select-auto-box",{"has-help-text":v}),ref:T},Object(r.createElement)("span",{className:"bwf-select-auto-box__search-icon"},Object(r.createElement)(f.a,{icon:"search",height:"16",width:"16",color:b.TEXT_COLOR_3})),Object(r.createElement)("span",{className:"bwf-select-auto__angle-icon"},Object(r.createElement)(f.a,{icon:Object(c.isArray)(o)&&o.length>0&&N?"angle-up":"angle-down",height:"12",width:"12",color:b.TEXT_COLOR_2})),Object(r.createElement)(a.TextControl,{autoComplete:"off",value:N?w:x,onChange:function(e){return E(n=e),C.current&&clearTimeout(C.current),void(C.current=setTimeout((function(){return t(n)}),500));var n},placeholder:O}),(!Object(c.isArray)(o)||!!u)&&N&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},u),Object(c.isArray)(o)&&N&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},n?Object(r.createElement)("div",null,Object(l.__)("Fetching ".concat(_,"…"),"funnel-builder")):Object(r.createElement)("ul",null,y?o.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-suggestion-panel-".concat(t)},Object(r.createElement)("li",{className:"bwf-suggestion-panel__group"},e.name),e.steps.map((function(e){return Object(r.createElement)("li",{key:e.id,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,e.name))})))})):o.map((function(e){return Object(r.createElement)("li",{key:e.key,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,Object(l.__)(e.value,"funnel-builder")))}))))),v&&Object(r.createElement)("span",{className:"bwf-select-auto-box__helpText"},v))};p.defaultProps={onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null},p.propTypes={onSearch:i.a.func,isLoading:i.a.bool,items:i.a.oneOfType([i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,value:i.a.string.isRequired})),i.a.array]),onItemClick:i.a.func,onChange:i.a.func,error:i.a.any},t.a=p},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){"use strict";var r=n(0),a=n(7),c=n.n(a),l=(n(342),n(1));t.a=function(e){var t=e.className,n=e.type;return Object(r.createElement)("div",{className:c()("bwf-other-builder-notice",t)},Object(r.createElement)("h3",null,Object(l.__)("How it works","funnel-builder")),Object(r.createElement)("span",null,Object(l.__)("This builder is designed to work with shortcodes. To use the shortcodes in our builder, simply follow these steps:","funnel-builder")),Object(r.createElement)("ol",null,"landing"!==n&&Object(r.createElement)("li",null,Object(l.__)("Copy the shortcodes from the source document or website.","funnel-builder")),Object(r.createElement)("li",null,Object(l.__)("Open the WordPress editor.","funnel-builder")),Object(r.createElement)("li",null,Object(l.__)("Launch your page builder.","funnel-builder")),"landing"!==n&&Object(r.createElement)("li",null,Object(l.__)("Find the area on the page where you want to use the shortcode, and paste it in.","funnel-builder"))))}},296:function(e,t,n){"use strict";var r=n(0),a=(n(320),n(13)),c=n.n(a),l=n(4),o=n(1),i=n(8),u=n(2),s=(n(50),n(7)),f=n.n(s);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=null;t.a=function(e){e.emptyOption;var t=e.onChange,n=e.value,a=e.apiEndPoint,s=(e.hintLabel,e.label),d=void 0===s?Object(o.__)("Select Page","funnel-builder"):s,p=e.error,O=Object(r.useRef)(),v=b(Object(r.useState)(""),2),j=v[0],y=v[1],h=b(Object(r.useState)(n),2),_=h[0],g=h[1],w=b(Object(r.useState)(),2),E=w[0],S=w[1],N=b(Object(r.useState)(!1),2),k=N[0],C=N[1],P=b(Object(r.useState)(""),2),x=P[0],T=P[1],A=b(Object(r.useState)(0),2),I=A[0],D=A[1];Object(l.hb)(O,(function(){k||y("")}));var F=function(e){g(e),y("")};Object(r.useEffect)((function(){j&&D(0)}),[j]);var R=function(e){t(e)};return Object(r.useEffect)((function(){if(j.length>=3){C(!0);try{if(clearTimeout(m),j!==x)m=setTimeout((function(){T(j);var e=a.includes("?")?"".concat(a,"&term=").concat(j):"".concat(a,"?term=").concat(j);c()({path:Object(l.q)(e)}).then((function(e){C(!1),e.success?S(e.data.pages||e.data.products):S([{ID:"no-data-found",name:"No result found"}])}))}),600);else{var e=JSON.parse(JSON.stringify(E));S(e),C(!1)}}catch(e){}}else clearTimeout(m),C(!1)}),[j]),Object(r.createElement)("div",{className:f()("bwf-custom-select",{"is-selected":!Object(u.isEmpty)(_)})},Object(r.createElement)("div",{className:"form-group required wffn_field_space bwf-display-flex"},Object(r.createElement)("label",{className:"bwf-custom-select-label"},d),Object(r.createElement)("div",{className:"field-wrap",ref:O},Object(r.createElement)("div",{className:" multiselect multiselect--above"},Object(r.createElement)("div",{className:"multiselect__tags"},Object(r.createElement)("input",{type:"text",autoFocus:!0,value:j,onChange:function(e){return y(e.target.value)},autoComplete:"off",placeholder:"".concat(0==_.length?"Search..":""),className:f()("multiselect__input",{"bwf-error-border":0===j.length&&p}),style:Object(u.isEmpty)(_)?{}:{display:"none"},disabled:!Object(u.isEmpty)(_),onKeyDown:function(e){38===e.keyCode&&I>0?D(I-1):40===e.keyCode&&I<E.length-1&&D(I+1)},onKeyPress:function(e){var t,n;"Enter"===e.key&&"no-data-found"!==(null===(t=E[I])||void 0===t?void 0:t.ID)&&(e.preventDefault(),F(null===(n=E[I])||void 0===n?void 0:n.name),R(E[I]))}}),!Object(u.isEmpty)(_)&&Object(r.createElement)("span",{className:"bwf-selected-item"},"string"==typeof _?_:_.name),""!=_&&Object(r.createElement)("div",{className:"bwf-custom-select-clear",onClick:function(){g(""),R("")}},Object(r.createElement)(i.a,{icon:"dismiss-circle",size:"16"}))),Object(r.createElement)("div",{className:" ".concat(j&&3<=j.length?"multiselect__content-wrapper":"bwf-hide"," ")},k?Object(r.createElement)("div",{className:"multiselect__option"},Object(o.__)("Fetching Details…","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("ul",{className:"multiselect__content",style:{display:"inline-block"}},null==E?void 0:E.map((function(e,t){return Object(r.createElement)("li",{className:"bwf_multiselect__element",onMouseOver:function(){return D(t)},onClick:function(){"no-data-found"!==e.ID&&(F(null==e?void 0:e.name),R(e))},key:"multiselect__content--key-".concat(t)},e&&"no-data-found"!==e.ID&&Object(r.createElement)("span",{"data-select":Object(o.__)("Press enter to select","funnel-builder"),"data-selected":Object(o.__)("Selected","funnel-builder"),"data-deselect":Object(o.__)("Press enter to remove","funnel-builder"),className:" multiselect__option ".concat(I===t?"multi-select-active":null)},Object(r.createElement)("span",null,null==e?void 0:e.name)),e&&"no-data-found"==e.ID&&Object(r.createElement)("span",{className:" multiselect__option "},null==e?void 0:e.name))})))))),0!==j.length?Object(r.createElement)("div",{className:"bwf-field-hints",style:{fontSize:"12px",margin:"2px",color:"#3c434a"}},Object(o.__)("Enter minimum 3 letters","funnel-builder")):p&&Object(r.createElement)("div",{className:"bwf-error-text"},p))))}},300:function(e,t,n){"use strict";var r=n(0),a=n(2),c=n(9),l=n(1),o=n(13),i=n.n(o),u=n(37),s=n(4),f=n(285);function b(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=t.type,o=t.title,p=t.is_substep,O=void 0!==p&&p,v=e.onStepSelected,j=e.label,y=void 0===j?Object(l.__)(["offer","wc_order_bump"].includes(n)?"Select ".concat("offer"===n?"Offer":"Order Bump"):"Select Step","funnel-builder"):j,h=e.showCheckbox,_=void 0!==h&&h,g=m(Object(r.useState)(!_),2),w=g[0],E=(g[1],m(Object(r.useState)(!1),2)),S=E[0],N=E[1],k=m(Object(r.useState)(null),2),C=k[0],P=k[1],x=m(Object(r.useState)(!1),2),T=x[0],A=x[1],I=m(Object(r.useState)(null),2),D=I[0],F=I[1],R=Object(r.useRef)(new AbortController),B=T&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(c.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(l.__)("".concat(o," not found"),"funnel-builder")))),L=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,r=O&&!0===O?"&is_substep=true":"",e.next=5,i()({path:Object(s.q)("/funnels/step/search/?s=".concat(t,"&type=").concat(n).concat(r)),signal:R.current.signal});case 5:c=e.sent,P(c||null),Object(a.isEmpty)(c.steps)&&Object(a.isEmpty)(c.pages)?A(!0):A(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"AbortError"===e.t0.name?console.log(e.t0):(P(null),A(!0));case 13:N(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){d(c,r,a,l,o,"next",e)}function o(e){d(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){return L(""),function(){R.current.abort()}}),[]);var M=Object(a.isObject)(C)&&!Object(a.isNull)(C)?b(Object(a.isEmpty)(C)?[]:C):Object(a.isArray)(C)&&!Object(a.isEmpty)(C)?C.map((function(e){return{key:e.id,value:e.name}})):[],q=D&&D.hasOwnProperty("name")?Object(u.decodeEntities)(D.name):"";return Object(r.createElement)(r.Fragment,null,w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-label"},y),Object(r.createElement)(f.a,{onSearch:function(e){return L(e)},isLoading:S,items:M,multiGroup:Object(a.isObject)(C),error:B,onItemClick:function(e){F(e),v({step:e,copyFrom:w})},blurText:q,placeholder:Object(l.__)("Search…","funnel-builder"),stepTitle:o,helpText:["offer","wc_order_bump"].includes(n)?null:Object(l.__)("You can search and select all the step/pages in your Wordpress","funnel-builder")})))}},301:function(e,t,n){"use strict";var r=n(0),a=n(4),c=n(8),l=n(1),o=(n(306),n(50),n(2)),i=n(37),u=(n(7),n(61));function s(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t,n=e.conditionLabel,b=e.options,d=e.values,m=e.selectedValue,p=e.searchedValue,O=e.onChangeValue,v=e.onChangeData,j=e.className,y=e.isLoading,h=e.defaultOptions,_=e.placeholder,g=e.showInitialList,w=void 0!==g&&g,E=e.multiGroup,S=void 0!==E&&E,N=(e.hasDefaultOption,e.abortController),k=(e.isFirstLoading,Object(r.useRef)()),C=Object(r.useRef)(),P=Object(r.useRef)(),x=f(Object(r.useState)(w),2),T=x[0],A=x[1],I=f(Object(r.useState)([]),2),D=I[0],F=I[1],R=f(Object(r.useState)(""),2),B=R[0],L=R[1],M=f(Object(r.useState)([]),2),q=M[0],z=M[1],U=f(Object(r.useState)(""),2),V=U[0],K=U[1],H=f(Object(r.useState)(0),2),$=H[0],J=H[1],G=f(Object(r.useState)(0),2),W=G[0],Q=G[1],Y=f(Object(r.useState)(),2),Z=Y[0],X=Y[1],ee=f(Object(r.useState)({}),2),te=ee[0],ne=ee[1],re=f(Object(r.useState)(!1),2),ae=(re[0],re[1]);Object(r.useEffect)((function(){if(Object(o.size)(D)>1&&void 0!==D){var e,t=null==D?void 0:D.filter((function(e){var t;if(!B.includes(null==e||null===(t=e.id)||void 0===t?void 0:t.toString()))return e}));Q(null===(e=t[0])||void 0===e?void 0:e.id),D.forEach((function(e,n){var r;e.id==(null===(r=t[0])||void 0===r?void 0:r.id)&&J(n)}))}}),[D,B,q]),Object(r.useEffect)((function(){Object(o.size)(D)>1&&void 0!==D&&D.forEach((function(e,t){e.id==W&&J(t)}))}),[T]),Object(r.useEffect)((function(){if(Object(o.size)(D)>1&&void 0!==D){var e=D.filter((function(e,t){var n;if(null==B||!B.includes(null==e||null===(n=e.id)||void 0===n?void 0:n.toString()))return e}));ne(e)}}),[B]),Object(r.useEffect)((function(){Object(o.size)(D)>1&&void 0!==D&&D.forEach((function(e,t){t==$&&X(null==e?void 0:e.id)}))}),[$,T]),Object(r.useEffect)((function(){Object(o.size)(D)>1&&void 0!==D&&D.forEach((function(e,t){(null==e?void 0:e.id)==(null==Z?void 0:Z.id)&&J(t)}))}),[Z]),Object(r.useEffect)((function(){var e;((null==b?void 0:b.length)>0||(null==h?void 0:h.length)>0)&&(""==V&&"no-result"===(null===(e=b[0])||void 0===e?void 0:e.id)&&Object(o.isEmpty)(h)?F([{id:"no-result",name:"No data available"}]):""==V||0===(null==b?void 0:b.length)?F(h):F(b),L(d),z(m))}),[b,h,B]),Object(a.hb)(k,(function(){return A(!1)}));var ce=function(e){O(e)},le=function(e){v(e)};Object(r.useEffect)((function(){""==V&&F(h),oe()}),[V]),Object(r.useEffect)((function(){T?P.current.focus():P.current.blur()}),[T]);var oe=function(){if(P.current){var e=P.current.parentElement;if(""===V)return e.style.width="70px",!0;var t=.75*(V.length+1)+"em";e.style.width=t}};Object(r.useEffect)((function(){var e=h.reduce((function(e,t){return e.concat(t.steps)}),[]);Object(o.size)(S?e:h)===Object(o.size)(B)&&F([{id:"no-result",name:"No data available"}])}),[h,B]),Object(r.useEffect)((function(){D.every((function(e){return B.includes(e.id)}))&&(Object(o.isEmpty)(V)?F([{id:"no-result",name:"No data available"}]):F([{id:"no-result",name:'No result found for "'.concat(V,'"')}]))}),[D,B]);return Object(r.createElement)(r.Fragment,null,n?Object(r.createElement)("span",null,n):null,Object(r.createElement)("div",{className:"chosen-container chosen-container-multi ".concat(T&&"chosen-container-active chosen-with-drop"),onClick:function(){return A(!0)},ref:k},Object(r.createElement)("ul",{className:"chosen-choices bwf-select-container bwf-rule-input-conatiner ".concat(j)},null===(t=Object(o.isEmpty)(q)?h:q)||void 0===t?void 0:t.map((function(e,t){var n;if(null!=B&&B.includes(null==e||null===(n=e.id)||void 0===n?void 0:n.toString()))return Object(r.createElement)("li",{className:"bwf-select-choice",key:t},Object(r.createElement)("span",{className:"bwf-selected-label"},e.labelText?e.labelText:null!=e&&e.label?Object(i.decodeEntities)(null==e?void 0:e.label):Object(i.decodeEntities)(null==e?void 0:e.name)),Object(r.createElement)("span",{className:"search-choice-close bwf-cursor-pointer",onClick:function(){var t=q.filter((function(t){return t.id!==e.id})),n=JSON.parse(JSON.stringify(t));z(n),le(n);var r=n.map((function(e){var t;return null==e||null===(t=e.id)||void 0===t?void 0:t.toString()}));L(r),ce(r),A(!1)}},Object(r.createElement)(c.a,{icon:"cross-circle",height:"16",width:"16"})))})),Object(r.createElement)("li",{className:"search-fiesetConditionValueld"},Object(r.createElement)("input",{ref:P,className:"bwf-condition-input bwf_w_full",type:"text",autoComplete:"off",onChange:function(e){var t;N&&(null===(t=N.current)||void 0===t||t.abort());K(e.target.value),C.current&&clearTimeout(C.current),C.current=setTimeout((function(){Object(o.isEmpty)(e.target.value),p(e.target.value),K(e.target.value)}),600)},onFocus:function(){ae(!0)},onBlur:function(){ae(!1)},value:V||"",onKeyDown:function(e){38===e.keyCode&&$>0&&!S?te.map((function(e,t){e.id==Z&&X(te[t-1])})):40===e.keyCode&&$<(null==D?void 0:D.length)-1&&!S&&te.map((function(e,t){e.id==Z&&X(te[t+1])}))},onKeyPress:function(e){var t,n,r,a,c,l,o,i,u=null===(t=D[$])||void 0===t||null===(n=t.id)||void 0===n?void 0:n.toString();"Enter"!==e.key||!T||S||"no-result"===u||y?"Enter"===e.key&&"no-result"===u&&P.current.focus():(e.preventDefault(),null!=B&&B.includes(null===(r=D[$])||void 0===r||null===(a=r.id)||void 0===a?void 0:a.toString())||(z([].concat(s(q),[D[$]])),le([].concat(s(q),[D[$]])),L([].concat(s(B),[null===(c=D[$])||void 0===c||null===(l=c.id)||void 0===l?void 0:l.toString()])),ce([].concat(s(B),[null===(o=D[$])||void 0===o||null===(i=o.id)||void 0===i?void 0:i.toString()])),p(""),K(""),setTimeout((function(){A(!1)}))))}}),Object(r.createElement)("div",{className:"bwf-chosen-select-placeholder",placeholdervalue:0===V.length?_:""},Object(r.createElement)(c.a,{icon:"search",color:"red",size:15})))),Object(r.createElement)(u.a,{focusOnMount:!1,position:"bottom",className:"chosen-drop ".concat(Object(o.isEmpty)(D)&&!y?"bwf-no-data":"")},Object(r.createElement)("ul",{className:" ".concat(T?"chosen-results":"bwf-hide")},y?Object(r.createElement)("li",{className:"active-result"},Object(r.createElement)("span",{className:"bwf-no-data-found bwf-select-option"},Object(l.__)("Fetching details…","funnel-builder"))):null==D?void 0:D.map((function(e,t){var n,a,c,l=null==e||null===(n=e.steps)||void 0===n?void 0:n.every((function(e){var t;return null==B?void 0:B.includes(null==e||null===(t=e.id)||void 0===t?void 0:t.toString())}));return S?Object(r.createElement)("div",{key:"bwf-suggestion-panel-".concat(t)},l?null:Object(r.createElement)("div",{className:"bwf-list-heading"},e.name),null==e||null===(c=e.steps)||void 0===c?void 0:c.map((function(e){var t;return Object(r.createElement)("div",{key:e.id,className:"bwf-list-name ".concat(null!=B&&B.includes(null==e||null===(t=e.id)||void 0===t?void 0:t.toString())?"result-selected":"active-result"," "),onClick:function(){var t,n,r;"no-result"===e.id||null!=B&&B.includes(null==e||null===(t=e.id)||void 0===t?void 0:t.toString())?"no-result"===e.id&&P.current.focus():(z([].concat(s(q),[e])),le([].concat(s(q),[e])),L([].concat(s(B),[null==e||null===(n=e.id)||void 0===n?void 0:n.toString()])),ce([].concat(s(B),[null==e||null===(r=e.id)||void 0===r?void 0:r.toString()])),p("",!1,!1),K(""),setTimeout((function(){A(!1)})))}},Object(r.createElement)("div",null,e.name))}))):Object(r.createElement)("li",{key:t,className:"".concat(null!=B&&B.includes(null==e||null===(a=e.id)||void 0===a?void 0:a.toString())?"result-selected":"active-result ".concat($===t&&"no-result"!==e.id?"bwf-select-active":null)," "),onMouseOver:function(){var n;return!(null!=B&&B.includes(null==e||null===(n=e.id)||void 0===n?void 0:n.toString()))&&J(t)},onClick:function(){var t,n,r;"no-result"===e.id||null!=B&&B.includes(null==e||null===(t=e.id)||void 0===t?void 0:t.toString())?"no-result"===e.id&&P.current.focus():(z([].concat(s(q),[e])),le([].concat(s(q),[e])),L([].concat(s(B),[null==e||null===(n=e.id)||void 0===n?void 0:n.toString()])),ce([].concat(s(B),[null==e||null===(r=e.id)||void 0===r?void 0:r.toString()])),p("",!1,!1),K(""),setTimeout((function(){A(!1)})))}}," ",e.labelText?e.labelText:null!=e&&e.label?Object(i.decodeEntities)(null==e?void 0:e.label):Object(i.decodeEntities)(null==e?void 0:e.name))}))))))}},304:function(e,t,n){"use strict";var r=n(0),a=n(119),c=n(2),l=n(1),o=n(322),i=n(249),u=n(76),s=n(251);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=Object(i.a)(),n=t.getTemplates,b=t.getBuilders,d=t.getDefaultBuilder,p=t.templateLoading,O=t.getActiveBuilder,v=t.getActiveGroup,j=t.getCurrentTemplate,y=t.getActiveStep,h=t.getActiveSubFilter,_=e.onImportComplete,g=e.isStoreCheckout,w=e.storeCheckoutId,E=(e.hasCheckoutStep,e.urlDependency),S=void 0===E||E,N=e.stepId,k=e.funnelId,C=Object(u.a)(),P=C.setActiveGroup,x=(C.setActiveSubFilter,C.setActiveBuilder),T=C.setCurrentTemplate,A=m(m({wc_checkout:Object(l.__)("Checkout","funnel-builder")},!g&&{landing:Object(l.__)("Sales","funnel-builder")}),{},{upsell:Object(l.__)("One Click Upsell Offers","funnel-builder"),wc_thankyou:Object(l.__)("Thank You","funnel-builder")},!g&&{optin:Object(l.__)("Optin","funnel-builder"),optin_ty:Object(l.__)("Optin Confirmation","funnel-builder")}),I=Object(a.useParams)(),D=I.id,F=I.filter,R=I.builder,B=I.templateId,L=f(Object(r.useState)(!1),2),M=L[0],q=L[1],z=n();Object(r.useEffect)((function(){return R&&(P(F),x(R),T({id:B})),function(){P("funnel")}}),[]);var U=function(e){return!(!e||!e.group_type)&&Object.keys(e.group_type)[0]};Object(r.useEffect)((function(){if(!Object(c.isEmpty)(z)&&!M&&R){var e=z[F][R][B];T({id:B,template:e}),q(!0)}}),[z]);var V=b(),K=d(),H=O(),$=p(),J=v(),G=j(),W=(y(),h()),Q=function(){var e=K;return Object(c.isEmpty)(H)||(e=H),V&&V[J]&&!V[J][e]&&(e=V[J][K]?K:"elementor"),e},Y=function(e,t,n){return("wc_checkout"===t||"optin"===t)&&W&&H?z[t][H][e].group_type[n||W]:e},Z=function(e){return"wc_checkout"===J?W===e.no_steps:"optin"!==J||e.group.includes(W)},X=function(e,t,n){var r="";return"landing"===J?r="sp":"optin"===J?r="op":"optin_ty"===J?r="op-confirmed":"wc_checkout"===J?r="checkouts":"upsell"===J?r="offer":"wc_thankyou"===J&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===J&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},ee=g?"/store-checkout":0===D?"/templates":"/funnels/".concat(D);return Object(r.createElement)(o.a,{filters:s.e,templates:z,activeBuilder:Q(),templateCards:function(){if(Object(c.isEmpty)(z)||Object(c.isEmpty)([J]))return{};var e=Q(),t={};return z[J]&&z[J][e]&&(t=z[J][e]),t}(),editors:V,defaultBuilder:K,isTemplateLoading:$,activeTemplateGroup:J,templateGroup:A,previewData:function(){if(Object(c.isEmpty)(z)||"funnel"===J)return{};var e={},t=[],n=[];try{!function(){var r=Q();for(var a in t=[],z[J][r]){var c=z[J][r][a];if(!c.build_from_scratch&&Z(c)){var l={};if(l.id=a,l.funnel=c.group_type?c.group_type[Object.keys(c.group_type)[0]]:a,l.slug=a,l.name=c.name,l.thumbnail=c.thumbnail,l.template=null==G?void 0:G.id,l.pro=c.pro,l.group_type=c.group_type,l.type=J,l.preview=null==c?void 0:c.prevslug,t.push(l),c.group_type)Object.values(c.group_type).forEach((function(e){var t=z[J][r][e];n.push({id:null==t?void 0:t.prevslug,preview:X(0,t,r)})}));else n.push({id:null==c?void 0:c.prevslug,preview:X(0,c,r)})}}var o=z[J][r][Y(null==G?void 0:G.id,J)];e.activeTemplate={thumbnail:Y(null==G?void 0:G.id,J),preview:X(null==G||G.id,o,r),slug:Y(null==G?void 0:G.id,J),name:null!=G&&G.id?z[J][r][null==G?void 0:G.id].name:"",pro:null!=G&&G.id?z[J][r][null==G?void 0:G.id].pro:"",tempPro:null!=G&&G.id?z[J][r][Y(null==G?void 0:G.id,J,!("wc_checkout"!==J&&"optin"!==J||!U(G.template))&&U(G.template))].pro:"",group:J,filters:!!o.group_type&&Object.keys(o.group_type),type:J,funnelGroup:[J],prevId:o.prevslug},e.thumbnails=t,e.previews=n}()}catch(e){console.log("Failed to prepare template preview data:",e)}return e},funnelId:N&&k?k:g&&w?w:D,onImportComplete:_,templateFilterCheck:function(e,t){return"wc_checkout"===J?t===e.no_steps:"optin"!==J||(null===(n=e.group)||void 0===n?void 0:n.includes(t));var n},activeFilter:W,showDefaultEditorNotice:!1,isStoreCheckout:g,parentRoute:ee,showTemplatesNav:!(N||g&&0===D),urlDependency:S,stepId:N,importApiPrefix:g?"store-checkout":"funnels"})}},306:function(e,t,n){},310:function(e,t,n){"use strict";var r=n(0),a=n(7),c=n.n(a),l=n(4),o=n(1),i=n(9),u=n(13),s=n.n(u),f=n(2),b=n(74),d=n(312),m=n(62),p=n(272),O=n(20),v=n(8),j=(n(346),n(50)),y=n(32);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=[Object(o.__)("New Features","funnel-builder"),Object(o.__)("New Add-ons & Integrations","funnel-builder"),Object(o.__)("World Class Support","funnel-builder"),Object(o.__)("Security Improvements","funnel-builder"),Object(o.__)("Wordpress Compatibility","funnel-builder"),Object(o.__)("Marketing & Payment Compatibility","funnel-builder")],E=function(e){var t=e.onclose,n=e.onAction,a=e.isLoading,c=void 0!==a&&a;return Object(r.createElement)(i.Modal,{className:"bwf-c-s-delete-model bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header bwf-alert-modal bwf-deactivate-modal",isDismissible:!1,onRequestClose:t},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(o.__)("Deactivating License","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(o.__)("Close"),onClick:function(){return t()}},Object(r.createElement)(v.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-content bwf-mt-16"},Object(r.createElement)("span",null,Object(o.__)("You will lose access to the following active license benefits:","funnel-builder")),Object(r.createElement)("br",null),Object(r.createElement)("ul",null,w.map((function(e,t){return Object(r.createElement)("li",{key:"feature-".concat(t)},Object(r.createElement)(v.a,{icon:"cross-circle",color:y.DANGER_COLOR,size:"20"}),e)})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-mt-24"},Object(r.createElement)(i.Button,{className:"bwf-modal-cancel-btn bwf-strong ".concat(c?"bwf-is-active":""),onClick:function(){c||n()}},Object(r.createElement)("span",{style:_({},c&&{visibility:"hidden"})},Object(o.__)("Deactivate","funnel-builder")),c&&Object(r.createElement)(j.a,{color:"#0073aa",style:{position:"absolute"}})),Object(r.createElement)(i.Button,{isPrimary:!0,className:"bwf-btn-medium",onClick:function(){return t()},disabled:c},Object(o.__)("Cancel","funnel-builder")))))},S=n(12),N=n.n(S),k=n(28);function C(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.id,n=e.label,a=e.license,u=void 0===a?"":a,j=e.setSettingFieldSchema,y=e.is_manually_deactivated,h=e.activated,_=e.expired,g=function(){return Object(f.isEmpty)(u)||h||_||y?Object(f.isEmpty)(u)||!_||y?!h||Object(f.isEmpty)(u)||y?y?"deactivated":"empty":"activated":"expired":"invalid"},w=function(e){var t=e||g();switch(t){case"activated":case"expired":case"invalid":return u.licence?"xxxxxxxxxxxxxxxxxxxxxxxxxx"+u.licence.substring(26):Object(f.isEmpty)(u.api_key)||"activated"!==t?"":u.api_key;default:return""}},S=Object(k.a)().setProData,x=Object(m.a)().setLiteBar,T=Object(d.a)().updateLicense,A=P(Object(r.useState)((function(){return w()})),2),I=A[0],D=A[1],F=P(Object(r.useState)({loading:!1,status:!1}),2),R=F[0],B=F[1],L=P(Object(r.useState)(""),2),M=L[0],q=L[1],z=P(Object(r.useState)(!1),2),U=z[0],V=z[1],K=P(Object(r.useState)(!1),2),H=K[0],$=K[1],J=P(Object(r.useState)(!1),2),G=J[0],W=J[1],Q=Object(p.a)().data;Object(r.useEffect)((function(){Object(f.size)(I)?(q(""),W(!0)):G&&!Object(f.size)(I)&&q(Object(o.__)("Please enter licence key","funnel-builder"))}),[I]);var Y=function(){var e,n=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),e.prev=1,e.next=4,s()({path:Object(l.q)("/license/"),method:"POST",data:{name:t,action:"activated"!==g()?"activate":"deactivate",key:I}}).then((function(e){if(200===e.code){var t,n,a=e.name,c=e.license_data,l=void 0!==c&&c,i=e.license_exist,u=void 0===i?{}:i;e.pro_status,Object(f.isEmpty)(u)||(wffn_contacts_data.license_exist=u),S(e.lev),"activated"!==g()?(x(2),wffn_contacts_data.is_pro=1):(x(1),wffn_contacts_data.is_pro=0);var s=(null===(t=Q.woofunnels_general_settings[0])||void 0===t||null===(n=t.tabs)||void 0===n?void 0:n.general).fields.map((function(e){return a===e.id&&(e.license=l,"activated"!==g()?(e.is_manually_deactivated=0,e.expired=0,e.activated=1,wffn_contacts_data.is_pro=1):(e.activated=0,e.is_manually_deactivated=1,wffn_contacts_data.is_pro=0)),e}));j(s),T(s),B({status:!0,loading:!1,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-mt-8"},Object(r.createElement)(v.a,{icon:"check-circle",size:"72"})),Object(r.createElement)("div",{className:"bwf-licence-status"},"activated"!==g()?Object(o.__)("License Activated","funnel-builder"):Object(o.__)("Successfully Deactivated","funnel-builder")))}),$(!1),V(!1)}else 400===e.code&&($(!1),B({status:!0,error:e.error,hide:8e3}))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),$(!1),B({status:!0,error:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){C(c,r,a,l,o,"next",e)}function o(e){C(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}(),Z=function(){switch(g()){case"activated":return!0;default:return!1}};Object(r.useEffect)((function(){"deactivated"===g()?D(w("deactivated")):"activated"===g()&&D(w("activated"))}),[g()]);var X=w()===I&&Object(f.isEmpty)(M)&&Object(r.createElement)("p",{className:"hint"},Object(r.createElement)("span",{className:"bwfan-error"},e.activated?Object(o.__)("License expired on ","funnel-builder")+N()(null==u?void 0:u.expires).format(Object(l.P)()):Object(o.__)("You have consumed the limit of license usage","funnel-builder"),". "),Object(r.createElement)("span",{className:"is-reset-text"},Object(o.__)("Got New License? ","funnel-builder"),Object(r.createElement)("span",{className:"is-link",onClick:function(){return D("")}},Object(o.__)("Reset","funnel-builder"))));return Object(r.createElement)("div",{className:c()("bwf-components-licence")},n&&Object(r.createElement)("label",{className:"components-label"},n),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g16"},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf-flex-column"},Object(r.createElement)(i.TextControl,{className:c()("bwf-license-text-input",{"bwf-error-border":Object(f.size)(M)||"expired"===g()&&w()===I}),placeholder:Object(o.__)("Enter license key here","funnel-builder"),disabled:Z(),value:I,autoComplete:"off",onChange:function(e){return D(e)}}),Object(f.size)(M)?Object(r.createElement)("div",{className:"bwf-error-text"},M):null),Object(r.createElement)(O.a,{isSecondary:"empty"===g()||"deactivated"===g()||"expired"===g()||"invalid"===g(),isBusy:"activated"!==g()&&H,disabled:H,className:c()("bwf-ripple bwf-license-action-btn",{"is-inactive":"activated"===g()}),onClick:function(){return function(){if(Object(f.isEmpty)(I))return W(!0),void q(Object(o.__)("Please enter licence key","funnel-builder"));"activated"===g()?(W(!1),V(!0)):Y()}(u,y)}},function(){switch(g()){case"activated":return Object(o.__)("Deactivate","funnel-builder");default:return Object(o.__)("Activate","funnel-builder")}}())),function(){switch(g()){case"activated":return Object(r.createElement)("p",{className:"hint"},u.expires?Object(r.createElement)(r.Fragment,null,Object(o.__)("License Expires on ","funnel-builder"),N()(null==u?void 0:u.expires).format("MMMM D, YYYY")):Object(o.__)("Lifetime license","funnel-builder"));case"empty":case"deactivated":return Object(r.createElement)("div",{className:"hint bwf-content"},Object(o.__)("Already Purchased? Access your license key in your account. ","funnel-builder"),Object(r.createElement)("a",{href:"https://myaccount.funnelkit.com/",target:"_blank",rel:"noreferrer"},Object(o.__)("Login to your FunnelKit Account","funnel-builder")));case"expired":case"invalid":return X}}()),Object(r.createElement)(b.a,{confirmText:R.confirmText,confirmButtonText:R.buttonConfirm,cancelButtonText:R.buttonCancel,onConfirm:R.onConfirm,isLoading:R.loading,successMessage:R.success,errorMessage:R.error,content:R.content,onRequestClose:function(){return B({status:!1})},isOpen:R.status,autoHide:R.hide,closeIcon:!0}),U&&Object(r.createElement)(E,{isLoading:H,onAction:function(){Y()},onclose:function(){return V(!1)}}))}},312:function(e,t,n){"use strict";var r=n(2),a=n(19),c=n(4),l=n(272),o=["fetch","setStateProp"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(a.a)("settings"),t=e.fetch,n=e.setStateProp,i=f(e,o),s=Object(l.a)().data,b=void 0===s?{}:s,d=(b.woofunnels_general_settings&&b.woofunnels_general_settings.general||{}).fields,m=void 0===d?[]:d;return u(u({},i),{},{fetch:function(){t("GET",Object(c.q)("/funnels/global-settings/"))},setSettingsData:function(e){return n("data",e)},updateLicense:function(e){m&&Object(r.isArray)(m)&&m.length&&(b.woofunnels_general_settings.general.fields=e,n("data",b))}})}},313:function(e,t,n){},314:function(e,t,n){},315:function(e,t,n){"use strict";var r=n(0),a=n(1),c=(n(313),n(9)),l=n(8),o=n(21);t.a=function(e){var t=e.onFileSelected,n=(e.htmlData,e.filetypeArray),i=(e.btnLabel,e.dropZoneContent),u=Object(o.b)().showSnackbar,s=function(e){e&&e[0]&&"type"in e[0]?n.includes(e[0].type)?t(e[0]):u(Object(a.__)("Uploaded file is not valid.","funnel-builder")):u(Object(a.__)("Uploaded file not found","funnel-builder"))},f=n&&n[0]?n[0]:"application/json";return Object(r.createElement)("div",{className:"bwf-component-import-wrapper"},Object(r.createElement)(c.DropZoneProvider,null,Object(r.createElement)("div",{className:"bwf-import-area-wrapper"},Object(r.createElement)(c.FormFileUpload,{isSecondary:!0,accept:f,onChange:function(e){return s(e.target.files)},render:function(e){var t=e.openFileDialog;return Object(r.createElement)("div",{className:"bwf-import-area",onClick:t},i||null,"application/json"===f&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.a,{icon:"import-file",size:56}),Object(r.createElement)("div",{className:"bwf-drop-import-heading"},Object(a.__)("Drag or browse a JSON file to import funnel","funnel-builder")),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(a.__)("(Maximum file size allowed 10 MB)","funnnel-builder"))))}}),Object(r.createElement)(c.DropZone,{onFilesDrop:s,onHTMLDrop:s,onDrop:s}))))}},319:function(e,t,n){"use strict";var r=n(0),a=n(2),c=n(110),l=n(30),o=n(4),i=n(39),u=n(62),s=n(29),f=n(40),b=n(14),d=["funnel_id"];function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(e){var t,n,p,O,v,j=e.selected,y=e.headerData,h=e.funnelID,_=e.stepId,g=e.type,w=e.checkoutId,E=e.offerId,S=e.editor,N=Object(s.a)(),k=N.setFunnelTitle,C=N.setFunnelData,P=Object(i.a)(),x=P.getFunnelData,T=P.getLoading,A=P.getPreviousStep,I=P.getStepId,D=Object(f.a)(),F=D.setStepFunnelData,R=(D.setStepData,x()),B=T(),L=A(),M=I(),q=Object(b.i)(),z=q.funnel_id,U=(m(q,d),l.a.getSteps().filter((function(e){return"wfob"===g?e.id===w:e.id===_}))),V=null===(t=U[0])||void 0===t||null===(n=t.substeps)||void 0===n?void 0:n.wc_order_bump,K=null==V?void 0:V.filter((function(e){return e.id==_})),H=null===(p=U[0])||void 0===p||null===(O=p.substeps)||void 0===O?void 0:O.offer,$=null==H?void 0:H.filter((function(e){return e.id==E})),J="";if("wfob"===g)void 0!==K&&(J=null===(v=K[0])||void 0===v?void 0:v._data.title);else if("offer"===g){var G;if(void 0!==$)J=null===(G=$[0])||void 0===G?void 0:G._data.title}else{var W;J=null===(W=U[0])||void 0===W?void 0:W._data.title}var Q=Object(a.size)(y),Y=Object(u.a)(),Z=Y.setActiveMultiple,X=(Y.resetHeaderMenu,Y.setL2NavType),ee=Y.setL2Nav,te=Y.setStepHeader,ne=Y.setPageBackLink,re=Y.setIsStepNavActive;Y.setL2PostTitle;Object(r.useEffect)((function(){var e;te(""),X("menu"),ee(y),Z({leftNav:Object(o.Z)()?"store-checkout":"funnels",rightNav:j}),re(!0),ne((e="admin.php?page=bwf&path=","experiment"===L?"".concat(e).concat(Object(o.Z)()?"/store-checkout":"/funnels/".concat(h),"/experiments/").concat(M):"canvas"===L?"".concat(e).concat(Object(o.Z)()?"/store-checkout":"/funnels/".concat(h),"/canvas"):"".concat(e).concat(Object(o.Z)()?"/store-checkout/steps":"/funnels/".concat(h,"/steps")))),te(Object(r.createElement)(c.a,{stepId:_,modalTitle:J,type:g,offerId:E,checkoutId:w,disabled:Q?[]:["preview"]}))}),[j,h,_,J,g,S,E,w,Q]);var ae=R.title,ce=void 0===ae?"":ae,le=R.status,oe=void 0===le?"":le,ie=R.id;return Object(r.useEffect)((function(){Object(a.size)(R)>0&&(B||""===ce||(k(ce),C("status",oe)),Object(o.Z)()||!ie||z||Object(b.k)({funnel_id:ie}))}),[B,R,ie,z]),Object(r.useEffect)((function(){return function(){re(!1),ee({}),ne(""),F({})}}),[]),!0}},320:function(e,t,n){},321:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(4),l=(n(347),n(8)),o=n(2),i=["options","label","selected","onChange","disabled"];function u(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(e){var t=e.options,n=e.label,f=e.selected,b=e.onChange,m=e.disabled,p=void 0!==m&&m,O=(d(e,i),Object(r.useRef)()),v=s(Object(r.useState)(!1),2),j=v[0],y=v[1],h=s(Object(r.useState)([]),2),_=h[0],g=h[1],w=s(Object(r.useState)([]),2),E=w[0],S=w[1],N=s(Object(r.useState)(""),2),k=N[0],C=N[1],P=s(Object(r.useState)(t),2),x=P[0],T=P[1],A=s(Object(r.useState)(0),2),I=A[0],D=A[1],F=s(Object(r.useState)({}),2),R=F[0],B=F[1],L=s(Object(r.useState)(),2),M=L[0],q=L[1];Object(c.hb)(O,(function(){return y(!1)})),Object(r.useEffect)((function(){if(Array.isArray(f)&&f.length>0){g(f);var e=null==f?void 0:f.map((function(e){return e.value}));S(e)}}),[]),Object(r.useEffect)((function(){D(0)}),[j]),Object(r.useEffect)((function(){Object(o.size)(x)>1&&void 0!==x&&x.forEach((function(e,t){t===I&&q(null==e?void 0:e.value)}))}),[I,j]),Object(r.useEffect)((function(){Object(o.size)(x)>1&&void 0!==x&&x.forEach((function(e,t){(null==e?void 0:e.value)==(null==M?void 0:M.value)&&D(t)}))}),[M]);return Object(r.useEffect)((function(){if(Object(o.size)(x)>1&&void 0!==x){var e=x.filter((function(e,t){var n;if(null==E||!E.includes(null==e||null===(n=e.value)||void 0===n?void 0:n.toString()))return e}));B(e)}}),[E]),Object(r.useEffect)((function(){b(_)}),[_,E]),Object(r.useEffect)((function(){var e=null==t?void 0:t.filter((function(e){return""==k||e.label.toLowerCase().includes(k.toLowerCase())?e:void 0}));Object(o.isEmpty)(e)?T([{value:"no-data-found",label:"No Data Found"}]):T(e)}),[k]),Object(r.createElement)("div",{className:"bwf-multi-select components-base-control bwf-multiselect-control ".concat(p?"is-disabled":"")},Object(r.createElement)("div",{className:"components-base-control__field"},Object(r.createElement)("label",{className:"components-base-control__label"},n),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("div",{className:"multiselect ".concat(j&&"multiselect--active"," "),style:{width:"30%"},tabIndex:"-1",onClick:function(){return y((function(e){return!e}))},ref:O},Object(r.createElement)("div",{className:"multiselect__select"}),Object(r.createElement)("div",{className:"multiselect__tags"},Object(r.createElement)("div",{className:"multiselect__tags-wrap"},null==_?void 0:_.map((function(e,t){return Object(r.createElement)("span",{className:"multiselect__tag bwf-badge",key:t},Object(r.createElement)("span",null,e.label," "),Object(r.createElement)("span",{onClick:function(){var t=_.filter((function(t){return t.value!==e.value}));g(t);var n=t.map((function(e){return e.value}));S(n),y(!1)}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:12,height:12})))}))),Object(r.createElement)("div",{className:"multiselect__spinner",style:{display:"none"}}),0==_.length&&Object(r.createElement)("span",null,Object(r.createElement)("span",{className:"multiselect__single"},"Select option"))),Object(r.createElement)("div",{className:"".concat(j?"multiselect__content-wrapper":"bwf-hide")},Object(r.createElement)("ul",{className:"multiselect__content",style:{display:"inline-block"}},Object(r.createElement)("li",null,j&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("input",{type:"text",autoComplete:"off",autoFocus:!0,onChange:function(e){return C(e.target.value)},ref:function(e){e&&e.style.setProperty("margin-left","unset","important")},className:"bwf__multiselect__input",onKeyDown:function(e){38===e.keyCode&&I>0?R.map((function(e,t){e.value==M&&q(R[t-1])})):40===e.keyCode&&I<(null==x?void 0:x.length)-1&&R.map((function(e,t){e.value==M&&q(R[t+1])}))},onKeyPress:function(e){if("Enter"===e.key){var t,n,r;if(e.preventDefault(),!E.includes(null===(t=x[I])||void 0===t?void 0:t.value))g([].concat(u(_),[x[I]])),S([].concat(u(E),[null===(r=x[I])||void 0===r?void 0:r.value]));if(E.includes(null===(n=x[I])||void 0===n?void 0:n.value)){var a=_.filter((function(e){var t;return e.value!==(null===(t=x[I])||void 0===t?void 0:t.value)}));g(a);var c=a.map((function(e){return e.value}));S(c)}setTimeout((function(){y(!1)})),C("")}},placeholder:Object(a.__)("Search...","funnel-builder"),value:k||""}),Object(r.createElement)("span",{className:"bwf_multiselect_input_icon"},Object(r.createElement)(l.a,{icon:"search",width:16,height:16})))),x.map((function(e,t){return Object(r.createElement)("li",{className:"multiselect__element_value",key:t,onClick:function(){if("no-data-found"!==e.value){if(E.includes(e.value)||(g([].concat(u(_),[e])),S([].concat(u(E),[e.value]))),E.includes(e.value)){var t=_.filter((function(t){return t.value!==e.value}));g(t);var n=t.map((function(e){return e.value}));S(n)}setTimeout((function(){y(!1)})),C("")}},onMouseOver:function(){return D(t)},id:"customSelect",tabIndex:"0"},e&&"no-data-found"!==e.value&&Object(r.createElement)("span",{"data-select":Object(a.__)("Press enter to select","funnel-builder"),"data-selected":Object(a.__)("Select to remove","funnel-builder"),"data-deselect":Object(a.__)("Press enter to remove","funnel-builder"),className:" multiselect__option  ".concat(E.includes(e.value)&&"multiselect__option--selected","  ").concat(I===t?"multi-select-active":null," ").concat(I===t?"multi-select-selected-data":null," ")},Object(r.createElement)("span",null,null==e?void 0:e.label)),e&&"no-data-found"==e.value&&Object(r.createElement)("span",{className:" multiselect__option "},null==e?void 0:e.label))}))))))))}},322:function(e,t,n){"use strict";n.d(t,"a",(function(){return lt}));var r=n(0),a=n(2),c=n(17),l=n.n(c),o=n(119),i=n(13),u=n.n(i),s=n(1),f=n(14),b=n(7),d=n.n(b),m=n(9),p=(n(338),n(50));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(o,e);var t,n,c,l=g(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=l.call(this,e)).state={isLoading:!0},t.iframeRef=Object(r.createRef)(),t.setLoaded=t.setLoaded.bind(E(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.iframeRef.current.addEventListener("load",this.setLoaded)}},{key:"setLoaded",value:function(){var e=this.props.src;this.setState({isLoading:!1}),this.props.onLoad(!!e)}},{key:"componentDidUpdate",value:function(e,t){this.props.src&&this.props.src!==e.src&&this.setState({isLoading:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.loadingContent,c=e.src,l=e.title,o=this.state.isLoading,i=d()("wffn-web-preview",t,{"is-loading":o});return Object(r.createElement)("div",{className:i},(o||Object(a.isEmpty)(c))&&n,Object(r.createElement)("div",{className:"wffn-web-preview__iframe-wrapper",style:j({},Object(a.isEmpty)(c)&&{width:0})},Object(r.createElement)("iframe",{ref:this.iframeRef,title:l,src:c})))}}])&&h(t.prototype,n),c&&h(t,c),o}(r.Component);N.propTypes={className:l.a.string,loadingContent:l.a.node,onLoad:l.a.func,src:l.a.string.isRequired,title:l.a.string.isRequired},N.defaultProps={loadingContent:Object(r.createElement)(p.a,{size:"xl"}),onLoad:a.noop};var k=N,C=n(8),P=n(273),x=n(80),T=n(4);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=function(e){var t={title:Object(s.__)("This is a PRO Feature!","funnel-builder"),feature:"",content:Object(s.__)("We're sorry, the {{feature_name}} is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),demoLabel:!1,proLabel:Object(s.__)("Upgrade to PRO Now","funnel-builder"),proLink:T.cb,action:!1},n=e.onRequestClose,a=e.isOpen,c=e.children,l=void 0===c?null:c,o=e.className,i=e.module,u=(e.isTemplate,e.modalContent?I(I({},t),e.modalContent):t);return a?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:d()("bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",o),isDismissible:!1,onRequestClose:function(){return n()},overlayClassName:"bwf-pro-modal__overlay"},Object(r.createElement)(P.a,{title:Object(r.createElement)(r.Fragment,null,u.title),onClose:n}),Object(r.createElement)("div",{className:"bwf-modal-content"},"string"==typeof u.content?u.content.replace("{{feature_name}}",u.feature):u.content),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},u.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},u.demoLabel),!u.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},Object(s.__)("Cancel")),Object(r.createElement)(x.a,{module:i,isPrimary:!0,isTemplate:!0})),l)):null};F.defaultProps={isOpen:!1,onRequestClose:function(){}};var R=F,B=n(74),L=n(249),M=(n(339),n(76)),q=n(30),z=n(251),U=(n(340),["src","onLoaded"]);function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var J=function(e){var t=e.src,n=e.onLoaded,c=void 0===n?a.noop:n,l=$(e,U),o=K(Object(r.useState)(!1),2),i=o[0],u=o[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){u(!0),c(t)},function(){e.onload=function(){}}}),[]),Object(r.createElement)(r.Fragment,null,i?Object(r.createElement)("img",V({src:t},l)):Object(r.createElement)("div",{className:"bwf-image-loader"}))},G=n(51),W=n(61),Q=n(315);function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t=e.label,n=void 0===t?"":t,c=e.id,l=void 0===c?"":c,o=e.value,i=e.onChange,u=void 0===i?a.noop:i,s=e.className,f="inspector-color-".concat(Object(G.useInstanceId)(m.ColorPicker)),b=Y(Object(r.useState)(!1),2),p=b[0],O=b[1];return Object(r.createElement)("div",{className:d()("components-color-field",s)},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:f},n),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return O(!0)}},Object(r.createElement)(m.ColorIndicator,{colorValue:o})),Object(r.createElement)(m.TextControl,{value:o||"#ffffff",className:"indicator-text"}),p&&Object(r.createElement)(W.a,{position:"top left",onClose:function(){return O(!1)}},Object(r.createElement)(m.ColorPicker,{color:o,onChangeComplete:function(e){u(e.hex,{id:l})},disableAlpha:!0}))))},ee=function(e){var t=e.setCustomizeVisible,n=Y(Object(r.useState)(!1),2),a=n[0],c=n[1],l=Y(Object(r.useState)(""),2),o=l[0],i=l[1];return Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize"},Object(r.createElement)("div",{className:"bwf-flex bwf-template-preview-sidebar__customize-heading"},Object(r.createElement)(m.Button,{onClick:function(){return t(!1)}},Object(r.createElement)(C.a,{icon:"arrow-left",size:16})),Object(s.__)("Customize","funnel-builder")),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-subheading"},Object(s.__)("Lets customize your store checkout with your logo and brand color","funnel-builder")),a?Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-logo"},Object(r.createElement)("div",null,Object(r.createElement)("img",{src:a,alt:"logo"}),Object(r.createElement)(m.Button,{className:"bwf-delete-btn",onClick:function(){return c(!1)}},Object(r.createElement)(C.a,{icon:"trash",size:20})))):Object(r.createElement)(Q.a,{onFileSelected:function(e){c(URL.createObjectURL(e))},filetypeArray:["image/png"],dropZoneContent:Object(r.createElement)(r.Fragment,null,Object(r.createElement)(C.a,{icon:"add-image",size:40}),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(s.__)("Try to use png image","funnel-builder")))}),Object(r.createElement)(X,{label:Object(s.__)("Color","funnel-builder"),value:o,onChange:function(e){return i(e)}}),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-actions"},Object(r.createElement)(m.Button,{isPrimary:!0},Object(s.__)("Save","funnel-builder")),Object(r.createElement)(m.Button,null,Object(s.__)("Reset","funnel-builder"))))},te=n(21),ne=n(26);function re(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe=function(e){var t=e.thumbnailsData,n=e.hasPlaceholder,c=e.funnelId,l=e.onClick,o=e.activeThumbnail,i=e.previewCustomizeEnabled,u=e.tempPro,f=e.importType,b=Object(te.a)().isProTemplatesLocked,p=Object(te.a)("ck").isProTemplatesLocked,O=Object(te.a)("ul").isProTemplatesLocked,v=ae(Object(r.useState)(!1),2),j=v[0],y=v[1];return Object(a.isEmpty)(t)||n?Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},re(new Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_template_page_options",key:"bwf-place-preview-sidebar-".concat(t)},Object(r.createElement)("div",{className:"bwf-placeholder-temp wffn_preview_thumbnail"}),Object(r.createElement)("div",{className:"bwf-flex bwf--center wffn_template_name"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-12 "})))}))):Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},j?Object(r.createElement)(ee,{setCustomizeVisible:y}):t&&t.map((function(e,t){return Object(r.createElement)("label",{key:t,className:d()("wffn_template_page_options",{active_preview:e.id==o}),onClick:function(){return l(e)}},Object(r.createElement)("div",{className:"wffn_preview_thumbnail"},c?Object(r.createElement)(J,{alt:"thumbnail",src:e.thumbnail}):Object(r.createElement)("img",{alt:"thumbnail",src:e.thumbnail})),Object(r.createElement)("div",{className:"wffn_template_name"},e.name),"yes"===e.pro&&(["wc_checkout","wc_thankyou"].includes("step"===f?null==e?void 0:e.type:null==e?void 0:e.step)?p:!["upsell"].includes("step"===f?null==e?void 0:e.type:null==e?void 0:e.step)||"yes"===u&&"step"!==f?b:O)&&Object(r.createElement)(ne.a,null))})),i&&!j&&Object(r.createElement)(m.Button,{isPrimary:!0,className:"bwf-template-preview-sidebar__customize-btn",onClick:function(){return y(!0)}},Object(r.createElement)(C.a,{icon:"edit",size:20,color:"#ffffff"}),Object(s.__)("Customize","funnel-builder")))},ie=function(e){var t=e.type,n=e.filters,c=e.FB_PRO_STATUS,l=e.activeSubFilter,o=e.onClick,i=e.activeTemplateFilters,u=e.tempPro,f=e.templateType,b=e.funnelId,m=e.funnelGroup,p=e.hasPRO,O=e.importType,v=Object(te.a)("ck").isProTemplatesLocked;if(!t)return null;var j=n[t];if(void 0===j||Object(a.isEmpty)(j))return null;if("wc_checkout"!==t&&"optin"!==t)return null;var y=[],h=function(e){i.includes(e)&&y.push(Object(r.createElement)("div",{className:d()("template-filter",{"active-filter":l==e}),onClick:function(){return o(e)},key:e,role:"button",tabIndex:"-1","aria-hidden":"true"},Object(r.createElement)("div",null,j[e]),!("wc_checkout"===f&&!v&&(!b||"step"!==O)&&m.includes("wc_checkout"))&&(p(u||"no")||["2","3"].includes(e)&&!0!==c||"popup"===e&&!0!==c)&&Object(r.createElement)(ne.a,null)))};for(var _ in j)h(_);return Object(r.createElement)("div",{className:"wffn_template_filer"},Object(r.createElement)("div",{className:"wffn_template_filter_container"},Object(r.createElement)("span",{className:"template-filter template-filter-head"},"wc_checkout"===t?Object(s.__)("Checkout Steps","funnel-builder"):"optin"===t?Object(s.__)("Optin Form","funnel-builder"):Object(s.__)("Type","funnel-builder"),":"),y))},ue=n(65),se=function(e){var t=e.funnelId,n=e.activeGroup,a=e.activeSubFilter,c=e.activeStep,l=e.templateName,o=e.isTemplatePro,i=e.funnelGroup,u=e.hasPRO,f=e.importType,b=Object(te.a)("ck").isProTemplatesLocked,d=Object(te.a)("ul").isProTemplatesLocked,m=Object(te.a)().isProTemplatesLocked,p=u("status");if("upsell"===n&&!0!==p)return d&&Object(r.createElement)(ue.a,{dismissable:!1,proLink:Object(T.K)([t?"Step":"Template","upsell",l,"Notice","Bar"]),isTemplate:!0});switch(t&&"step"===f?n:c){case"upsell":if(!0!==p)return d&&Object(r.createElement)(ue.a,{dismissable:!1,proLink:Object(T.K)([t?"Step":"Template","upsell",l,"Notice","Bar"]),isTemplate:!0});break;case"wc_checkout":if((b||t&&"step"===f||!i.includes("wc_checkout"))&&(u(o)||["2","3"].includes(a)&&!0!==p)){Object(s.__)("This template is part of the pro plan. To access it, consider upgrading.","funnel-builder");return"2"===a?Object(s.__)("Two-Step Checkout is a pro feature. To access it, consider upgrading.","funnel-builder"):"3"===a&&Object(s.__)("Three-Step Checkout is a pro feature. To access it, consider upgrading.","funnel-builder"),Object(r.createElement)(ue.a,{dismissable:!1,module:(null==i?void 0:i.includes("wc_checkout"))&&"ck",proLink:Object(T.K)([t?"Step":"Template","upsell",l,"Notice","Bar"]),isTemplate:!0})}break;case"optin":if(u(o||"no")||"popup"===a&&!0!==p){Object(s.__)("This template is part of the pro plan. To access it, consider upgrading.","funnel-builder");return"popup"==a&&Object(r.createElement)(r.Fragment,null,Object(s.__)("Optin ","funnel-builder"),Object(r.createElement)("span",{style:{textTransform:"capitalize"}},a),Object(s.__)(" is a pro feature. To access it, consider upgrading.","funnel-builder")),Object(r.createElement)(ue.a,{dismissable:!1,proLink:Object(T.K)([t?"Step":"Template","upsell",l,"Notice","Bar"]),isTemplate:!0})}}var O=t&&"step"===f?n:c;return"yes"===o&&("wc_checkout"===O||"wc_thankyou"===O?b:"upsell"===O?d:m)?Object(r.createElement)(ue.a,{dismissable:!1,module:(null==i?void 0:i.includes("wc_checkout"))&&("wc_checkout"===O||"wc_thankyou"===O)&&"ck",proLink:Object(T.K)([t?"Step":"Template","upsell",l,"Notice","Bar"]),isTemplate:!0}):""},fe=n(20),be=wffn_contacts_data&&wffn_contacts_data.header_data?wffn_contacts_data.header_data:{},de=be.logo?be.logo:"",me=function(e){var t=e.viewport,n=e.setviewport,c=e.templateName,l=e.isTemplatePro,o=e.onRequestClose,i=e.importing,u=e.onClick,f=e.onClickPro,b=e.activeGroup,m=e.isCheckoutPro,p=e.isOptinPro,O=e.activeStep,v=e.funnelId,j=e.importType,y=e.templateGroup,h=e.hasPRO,_=e.stepId,g=Object(te.a)("ck").isProTemplatesLocked,w=Object(L.a)().getImportBtnLabel(),E=Object(a.isEmpty)(w)?"upsell"===b||v&&"step"===j?Object(s.__)("Import This Template","funnel-builder"):Object(s.__)("Import This Funnel","funnel-builder"):w,S=h("status");return Object(r.createElement)("div",{className:"wffn_template_preview_header"},Object(r.createElement)("div",{className:"bwf_template_logo_title"},Object(r.createElement)("img",{src:de,alt:"Funnel Builder for WordPress",width:148,className:"bwf-brand-logo-only"}),Object(r.createElement)("div",{className:"bwf_preview_template_title"},c)),Object(r.createElement)("div",{className:"wffn_template_viewport"},Object(r.createElement)("div",{className:"wffn_template_viewport_inner"},Object(r.createElement)("span",{className:d()("wffn_viewport_icons",{active:"desktop"===t}),onClick:function(){return n("desktop")},title:"Desktop Viewport"},Object(r.createElement)(C.a,{icon:"desktop",color:"desktop"===t&&"#fff"})),Object(r.createElement)("span",{className:d()("wffn_viewport_icons",{active:"tablet"===t}),onClick:function(){return n("tablet")},title:"Tablet Viewport"},Object(r.createElement)(C.a,{icon:"tablet",color:"tablet"===t&&"#fff"})),Object(r.createElement)("span",{className:d()("wffn_viewport_icons",{active:"mobile"===t}),onClick:function(){return n("mobile")},title:"Mobile Viewport"},Object(r.createElement)(C.a,{icon:"mobile",color:"mobile"===t&&"#fff"})))),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(r.Fragment,null,(h(l||"no")||!0!==S&&(m||p||"upsell"===O))&&(Object(a.isEmpty)(y)||!y.includes("wc_checkout")||g)?Object(r.createElement)(fe.a,{isPrimary:!0,onClick:f},E):Object(r.createElement)(fe.a,{isPrimary:!0,onClick:u,disabled:i&&i.group===b,isBusy:(!!_||"funnel"===j)&&v&&i&&i.group===b},E))),Object(r.createElement)("div",{className:"wffn_template_preview_close"},Object(r.createElement)(fe.a,{onClick:o},Object(r.createElement)(C.a,{icon:"close",size:"24"}))))};n(36);function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function je(e){var t=e.isOpen,n=e.onRequestClose,c=e.activeGroup,l=e.activeEditor,i=e.importing,u=e.filters,b=e.hasPRO,p=e.checkEditor,O=e.previewData,v=e.isTemplateLoading,j=e.activeFilter,y=e.setPreviewErr,h=e.parentRoute,_=e.funnelId,g=e.importType,w=e.updateQueryString,E=e.previewCustomizeEnabled,S=e.urlDependency,N=e.stepId,C=Object(f.i)(),P=O(),A=P.thumbnails,I=P.activeTemplate,D=P.previews,F=void 0===D?[]:D,U=Object(o.useParams)().step,V=q.a.getFunnel(),K=!(!I||!I.type)&&I.type,H=S?U:null==I?void 0:I.type;Object(r.useEffect)((function(){_||(P.success?y(!1):!1===P.success&&y(!0))}),[P.success]),Object(r.useEffect)((function(){if(K)if("wc_checkout"===K||"optin"===K){var e=!(!I||!I.filters)&&I.filters[0];C.group&&("wc_checkout"===K&&["1","2","3"].includes(C.group)||"optin"===K&&["inline","popup"].includes(C.group))?J(C.group):(J(e),w({group:e}))}else C.group&&(delete C.group,w({},Object(f.g)(),C))}),[C.group,K]),Object(r.useEffect)((function(){!Object(a.isEmpty)(null==V?void 0:V.steps)&&"funnel"===g&&_&&w({},"/funnels/".concat(V.id))}),[V]);var $=Object(M.a)(),J=$.setActiveSubFilter,G=$.setCurrentTemplate,W=(0,Object(L.a)().getCurrentTemplate)(),Q=Oe(Object(r.useState)(!1),2),Y=(Q[0],Q[1]),Z=b("status"),X=Oe(Object(r.useState)("desktop"),2),ee=X[0],te=X[1],ne=Oe(Object(r.useState)(!1),2),re=ne[0],ae=ne[1],ce=Oe(Object(r.useState)(!1),2),le=ce[0],ue=ce[1],fe=Oe(Object(r.useState)(!_),2),be=fe[0],de=fe[1],ve=Oe(Object(r.useState)([]),2),je=ve[0],ye=ve[1];Object(r.useEffect)((function(){if(Y(!1),I&&!je.includes(I.prevId)){var e=JSON.parse(JSON.stringify(je));e.push(I.prevId),ye(e)}}),[null==I?void 0:I.preview]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".wffn_template_page_options.active_preview");e&&e.scrollIntoView()}),100)}),[t]),Object(r.useEffect)((function(){if(A&&!_&&be){var e=A||[],t=e.length,n=0;e.forEach((function(e){var r=new Image;r.src=e.thumbnail,r.onload=function(){++n===t&&de(!1)}}))}}),[A]);var he,_e=("wc_checkout"===c||H&&"wc_checkout"===H)&&"1"!==j,ge=("optin"===c||H&&"optin"===H)&&"inline"!==j;return P?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:"bwf-admin-modal bwf-admin-modal-full-screen wffn_template_preview_modal",onRequestClose:function(){return n(!1)},overlayClassName:"wffn_template_preview_overlay",isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"wffn_template_preview_wrap"},Object(r.createElement)(me,(pe(he={viewport:ee,setviewport:te,onRequestClose:n,importing:i,activeGroup:c,isCheckoutPro:_e,isOptinPro:ge,activeStep:H,funnelId:_,importType:g,hasPRO:b,stepId:N,onClickPro:function(){!1===Z&&"yes"!==(null==I?void 0:I.tempPro)&&(_e||ge||"upsell"===H)?ue(!0):ae(!0)},onClick:function(){return p()}},"onRequestClose",(function(){_?w({},"".concat(h)):(w({},"".concat(h,"/").concat(c)),J(!1)),n()})),pe(he,"templateName",null==I?void 0:I.name),pe(he,"isTemplatePro",null==I?void 0:I.tempPro),pe(he,"templateGroup",null==I?void 0:I.funnelGroup),he)),Object(r.createElement)("div",{className:"wffn_template_preview_content"},Object(r.createElement)("div",{className:d()("wffn_template_preview_inner wffn_funnel_preview")},Object(r.createElement)(ie,{type:null==I?void 0:I.type,filters:u,FB_PRO_STATUS:Z,activeSubFilter:j,onClick:function(e){if(J(e),w({group:e}),_){var t=W.template,n=(t=void 0===t?{}:t).group_type;Object(a.isEmpty)(n)||G({id:n[e],template:{group_type:n},steps:A.map((function(e){return{type:e.step,slug:e.lug}}))})}},activeTemplateFilters:null==I?void 0:I.filters,hasPRO:b,tempPro:null==I?void 0:I.tempPro,templateType:null==I?void 0:I.type,funnelId:_,funnelGroup:null==I?void 0:I.funnelGroup,importType:g}),!v&&Object(r.createElement)(se,{funnelId:_,activeGroup:c,activeSubFilter:j,activeStep:H,hasPRO:b,templateName:null==I?void 0:I.name,isTemplatePro:null==I?void 0:I.pro,funnelGroup:null==I?void 0:I.funnelGroup,importType:g}),Object(a.isEmpty)(F)||Object(a.isEmpty)(je)?"":F.map((function(e,t){var n=(null==e?void 0:e.preview)||"",a=(null==e?void 0:e.id)||"";return Object(r.createElement)(k,{key:t,className:d()("wffn_template_preview_frame",ee,{"hide-preview":e.id!==I.prevId}),title:"Funnel Template",src:je.includes(a)?n:"",onLoad:function(e){if(Y(!0),e&&F[t+1]){var n=JSON.parse(JSON.stringify(je));n.push(F[t+1].id),ye(n)}}})}))),Object(r.createElement)(oe,{thumbnailsData:A,hasPlaceholder:be,funnelId:_,previewCustomizeEnabled:E,importType:g,tempPro:null==I?void 0:I.tempPro,onClick:function(e){G({id:e.funnel,template:e,activeStep:e.step,steps:A.map((function(e){return{type:e.step,slug:e.lug}}))}),w({},_&&"step"===g?"".concat(h,"/templates/").concat(c,"/").concat(l,"/preview/").concat(e.funnel):_&&"funnel"===g?"".concat(h,"/templates/").concat(c,"/").concat(l,"/preview/").concat(e.funnel,"/").concat(e.step):"upsell"===c?"".concat(h,"/").concat(c,"/").concat(l,"/preview/").concat(e.funnel):"".concat(h,"/").concat(c,"/").concat(l,"/preview/").concat(e.funnel,"/").concat(e.step))},activeThumbnail:null==I?void 0:I.thumbnail})))),Object(r.createElement)(R,{isOpen:re,onRequestClose:function(){return ae(!1)},modalContent:Object(z.c)({templateName:null==I?void 0:I.name,FB_PRO_STATUS:Z,funnelId:_,activeGroup:c,activeStep:H}),module:["wc_checkout","wc_thankyou"].includes(c)&&"ck",className:"bwf-templates-pro-modal",isTemplate:!0}),(b((null==I?void 0:I.pro)||"no")||"yes"!==(null==I?void 0:I.pro)&&(_e||ge||"upsell"===H))&&Object(r.createElement)(B.a,{className:"bwf-admin-modal-squeezy bwf-template-preview-pro-modal",modalTitle:Object(s.__)("Confirmation","funnel-builder"),content:Object(r.createElement)("div",{className:"bwf-template-preview-pro-modal__content"},Object(s.sprintf)(Object(s.__)("Yor are using %s Funnel. In this funnel there are some pro features like ","funnel-builder"),null==I?void 0:I.name),Object(r.createElement)("mark",null,Object(s.__)("Two Step","funnel-builder")),Object(s.__)(" and","funnel-builder")," ",Object(r.createElement)("mark",null,Object(s.__)("Three Step Checkout","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("One Click Upsell","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("Optin Popup","funnel-builder")),"."),confirmButton:Object(r.createElement)(x.a,{module:["wc_checkout","wc_thankyou"].includes(c)&&"ck",isPrimary:!0}),cancelButtonText:Object(s.__)("Use Free Version","funnel-builder"),onConfirm:function(){"deactiavted"===Z?w({},"/settings/"):window.open(Object(T.K)([_?"Step":"Template",_?c:"upsell"===c?"upsell":H,null==I?void 0:I.name,"Upgrade","Modal"]),"_blank")},onCancel:function(){N||"funnel"===g||p();var e="1";if("optin"===c||"optin"===H?(J("inline"),w({group:"inline"}),e="inline"):(J("1"),w({group:"1"})),_){var t=W.template,n=(t=void 0===t?{}:t).group_type;Object(a.isEmpty)(n)||G({id:n[e],template:{group_type:n},steps:A.map((function(e){return{type:e.step,slug:e.lug}}))})}},onRequestClose:function(){ue(!1)},isOpen:le,confirmDescription:Object(s.__)("This action is irreversible","funnel-builder"),closeIcon:!0})):""}n(294);var ye=n(29),he=n(55),_e=n(329),ge=n(37),we=n(300),Ee=n(244),Se=n(245),Ne=(n(32),n(77));function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ae=function(e){var t,n,c,l=e.onCloseModal,o=e.onComplete,i=e.isWorking,u=e.activeTemplateGroup,f=(e.showCloneOption,e.templateGroup),b=xe(Object(r.useState)(""),2),d=b[0],p=b[1],O=xe(Object(r.useState)({}),2),v=(O[0],O[1]),j=xe(Object(r.useState)(""),2),y=j[0],h=j[1],_=xe(Object(r.useState)(null),2),g=_[0],w=_[1],E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return U((function(r){return n?(delete r[t],r):Ce(Ce({},r),{},Pe({},e,t))}))},S=xe(Object(r.useState)((function(){return u})),2),N=S[0],k=(S[1],q.a.getSteps()),C=Object(L.a)(),P=C.getScratchTemplateType,x=C.getCurrentTemplate,A=C.getImportOffer,I=P(),D=x(),F=A();Object(r.useEffect)((function(){v({})}),[]);var R=function(){var e;p(""),o("upsell"===N?z:"new"===I?{title:y}:{title:"".concat(null==g||null===(e=g.step)||void 0===e?void 0:e.name," Copy")},N,!(!g||!g.copyFrom)&&g.step)},B=(Object(r.useMemo)((function(){return Object.keys(f).map((function(e){return{key:e,label:f[e]}}))}),[f]),function(){return k.filter((function(e){return"wc_upsells"===e.type})).map((function(e){var t;return{key:e.id,label:Object(ge.decodeEntities)(null==e||null===(t=e._data)||void 0===t?void 0:t.title)}}))}),M=xe(Object(r.useState)(Ce({type:0===B().length?"new":"existing"},!Object(a.isNull)(F)&&{title:F.parent_title,insert_into:F.parent_id})),2),z=M[0],U=M[1],V=function(){if("upsell"===N){var e,t,n,r,c,l;if("new"===I)return"existing"===z.type?Object(a.isEmpty)(null===(n=z.offer_title)||void 0===n?void 0:n.trim())||!z.insert_into:Object(a.isEmpty)(null===(e=z.title)||void 0===e?void 0:e.trim())||Object(a.isEmpty)(null===(t=z.offer_title)||void 0===t?void 0:t.trim());if("existing"===I)return"existing"===z.type?!z.insert_into||Object(a.isNull)(g):Object(a.isEmpty)(null===(r=z.title)||void 0===r?void 0:r.trim())||Object(a.isNull)(g);if(!D.isBuildFromScratch)return Object(a.isEmpty)(null===(c=z.title)||void 0===c?void 0:c.trim())||Object(a.isEmpty)(null===(l=z.offer_title)||void 0===l?void 0:l.trim())}return"new"!==I&&D.isBuildFromScratch?"existing"===I?Object(a.isNull)(g):void 0:Object(a.isEmpty)(y.trim())},K=("new"===z.type||!Object(a.isNull)(F))&&Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Type here…","funnel-builder"),label:Object(s.__)("Upsell Name","funnel-builder"),value:null!==(t=Object(ge.decodeEntities)(z.title))&&void 0!==t?t:"",onChange:function(e){return E("title",e)},disabled:!Object(a.isNull)(F)||i});return Object(r.useEffect)((function(){1===B().length&&E("insert_into",B()[0].key)}),[]),Object(r.createElement)(m.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(s.__)("Add New Step ","funnel-builder"),Object(r.createElement)("span",{className:"bwf-list-count bwf-ml-4"},"(",T.gb[N],")")),className:"bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal bwf-modal-overflow-visible",onRequestClose:function(){return l()},isDismissible:!0,shouldCloseOnClickOutside:!i,overlayClassName:"bwf-create-funnel-modal__overlay"},d&&Object(r.createElement)(Ne.a,{errorMessage:d}),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"!==e.key||V()||i||R()},role:"main"},"upsell"===N&&"new"!==z.type&&!Object(a.isNull)(F)&&K,"existing"===I&&D.isBuildFromScratch&&Object(r.createElement)(we.a,{step:{type:"upsell"===N?"offer":N,title:f[N],is_substep:"upsell"===N},onStepSelected:function(e){w(e)},key:"bwf-clone-step-".concat(N)}),"upsell"===N?Object(r.createElement)(r.Fragment,null,!Object(a.isEmpty)(B())&&Object(a.isNull)(F)&&Object(r.createElement)("div",null,Object(r.createElement)("label",null,Object(s.__)("Add Offers","funnel-builder")),Object(r.createElement)(Se.a,{options:[{value:"existing",label:Object(s.__)("To Existing Upsell","funnel-builder"),disabled:0===B().length},{value:"new",label:Object(s.__)("To New Upsell","funnel-builder")}],className:"",selected:null!==(n=z.type)&&void 0!==n?n:0===B().length?"new":"existing",onChange:function(e){E("inherit_from","",!0),E("type",e)}})),"existing"===z.type&&Object(a.isNull)(F)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ee.b,{label:Object(s.__)("Select Upsell","funnel-builder"),options:B(),selected:1===B().length?B()[0].key:z.insert_into,onChange:function(e){E("insert_into",e)}})),"new"===z.type&&Object(a.isNull)(F)&&K,"new"===I&&Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Type here…","funnel-builder"),label:Object(s.__)("Offer Name","funnel-builder"),value:null!==(c=z.offer_title)&&void 0!==c?c:"",onChange:function(e){return E("offer_title",e)},disabled:i})):"new"===I?Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Enter step name","funnel-builder"),label:Object(s.__)("Step Name","funnel-builder"),value:null!=y?y:"",onChange:function(e){return h(e)},disabled:i}):null,Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(fe.a,{onClick:l,className:"bwf-modal-cancel-btn"},Object(s.__)("Cancel","funnel-builder")),Object(r.createElement)(fe.a,{isPrimary:!0,disabled:V()||i,isBusy:i,onClick:R,className:V()?"bwf-no-ripple":"",name:"add-funnel"},Object(s.__)("Add","funnel-builder")))))},Ie=n(41);n(341);function De(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Re=function(e){var t=e.showTemplatesNav,n=void 0===t||t,a=e.showEditors,c=void 0===a||a;return Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-templates-placeholder"},Object(r.createElement)("div",{className:"bwf-template-list-header"},n&&Object(r.createElement)(Ie.a,{gap:6,justify:"flex-start",className:"bwf-templ-nav-placeholder"},De(Array(5)).map((function(e,t){return Object(r.createElement)(Ie.c,{key:"bwf-templ-placeholder-nav-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder nav-placeholder-item"}))}))),c&&Object(r.createElement)(Ie.a,{gap:6,justify:"flex-start"},De(Array(5)).map((function(e,t){return Object(r.createElement)(Ie.c,{key:"bwf-templ-placeholder-editor-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder editor-placeholder-item"}))})))),Object(r.createElement)("div",{id:"wffn_tab_container"},Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:"wffn_pick_template"},De(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_temp_card",key:"bwf-templ-placeholder-".concat(t)},Object(r.createElement)("div",{className:"wffn_template_sec"},Object(r.createElement)("div",{className:"wffn_template_sec_design wffn-is-placeholder"})))})))))))},Be=n(52),Le=(n(35),function(e){var t=e.editorList,n=e.activeEditor,a=e.onChange;return Object(r.createElement)(Ie.a,{justify:"flex-start",gap:6,className:"wffn_template_editor_selector"},Object(r.createElement)(Se.a,{options:Object.keys(t).map((function(e){return{value:e,label:t[e]}})),selected:n,onChange:function(e){return a(e)}}))}),Me=n(25),qe=n(75),ze=n(18),Ue=["edit"];function Ve(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ke=function(e){var t=e.funnelId,n=e.disabledNavs,a=e.activeTemplateGroup,c=e.templateGroup,l=e.onClick,i=e.urlDependency,u=Object(te.a)("ul").isProTemplatesLocked,s=Object(o.useParams)().importType,b={},m=window.location&&window.location.search?Object(Me.parse)(window.location.search.substring(1)):{},p=(m.edit,Ve(m,Ue));for(var O in c)"funnel"===s&&"upsell"===O||(b[O]={},b[O].name=c[O],b[O].isExclusive="upsell"===O,b[O].link=decodeURIComponent(Object(f.f)({},"/templates/".concat(O),p)));return Object(r.createElement)("div",{className:"bwf-tempaltes-nav"},Object(r.createElement)(Ie.a,{justify:"flex-start",gap:3,className:"bwf-flex-wrap"},Object.keys(b).map((function(e,c){var o=e===a,s=n.find((function(t){return t.key===e}));return Object(r.createElement)(Ie.c,{key:"bwf-temp-nav-".concat(c)},0===t&&i?Object(r.createElement)(ze.a,{className:d()("bwf-template-nav-item",{"is-selected":m.path==="/templates/"+e||"/templates"===m.path&&"funnel"===e}),href:b[e].link},b[e].name,b[e].isExclusive&&Object(r.createElement)(ne.a,null)):Object(r.createElement)(qe.a,{toolTipText:s&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},s.message),visible:s||!1,size:366},Object(r.createElement)("div",{className:d()("bwf-template-nav-item",{"is-selected":o&&!s},{"is-disabled":s}),onClick:function(){s||l(e)},tabIndex:"-1",role:"button"},Object(r.createElement)("div",null,b[e].name),u&&b[e].isExclusive&&Object(r.createElement)(ne.a,null))))}))))},He=n(60);function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e){var t=e.importBuildFromScratch,n=(e.getRibbonName,e.activeTemplateGroup),a=e.templateID,c=void 0===a?"scratch":a,l=e.importType,o=e.stepId,i=e.importing,u=e.allowNew,f=void 0===u||u,b=$e(Object(r.useState)({status:!1}),2),d=b[0],m=b[1],p=Object(te.a)().isProFeatureLocked,O=Object(te.a)("ul").isProFeatureLocked,v=Object(M.a)().setScratchTemplateType;return Object(r.useEffect)((function(){return function(){v("new")}}),[]),Object(r.createElement)("div",{className:"wffn_template_sec wffn_build_from_scratch"},Object(r.createElement)("div",{className:"wffn_template_sec_design"},Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_add_tmp_se"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(C.a,{icon:"add-page",width:"72",height:"72",color:"#82838E"})),Object(r.createElement)("div",{className:"wffn_import_template wffn_p"},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wffn_import_description"},"step"===l?Object(s.__)("You can quickly add step","funnel-builder"):Object(s.__)("You can design the funnel from blank","funnel-builder")),f&&Object(r.createElement)(fe.a,{isGray:!0,onClick:function(e){O&&"upsell"===n?m(Qe):(v("new"),t(c,e))},isBusy:!!o&&i},Object(s.__)("Start from Blank","funnel-builder"),O&&"upsell"===n&&Object(r.createElement)(ne.a,null)),!o&&Object(r.createElement)(fe.a,{isGray:!0,onClick:function(e){p?m(We):(v("existing"),t(c,e))}},Object(s.__)("Clone","funnel-builder"),p&&Object(r.createElement)(ne.a,null)))))))),Object(r.createElement)(He.a,{isOpen:!!d.status,onRequestClose:function(){return m({status:!1})},modalContent:d,type:2}))}var We={status:!0,feature:Object(s.__)("Cloning","funnel-builder"),proLink:Object(T.K)(["Funnel","Duplicate","Upgrade","Modal"])},Qe={status:!0,feature:Object(s.__)("One Click Upsell Offer","funnel-builder"),proLink:Object(T.K)(["Upsell","Templates","Upgrade","Modal"])},Ye=n(295),Ze={optin:"Lead Generation",sales:"Sales",wc_checkout:"Checkout"},Xe=function(e){var t=e.templateFilterCheck,n=e.templateCards,c=e.showBuildFromScratch,l=e.importBuildFromScratch,o=e.activeTemplateGroup,i=e.activeEditor,u=e.onPreview,f=e.funnelId,b=e.importType,p=e.stepId,O=e.importing,v=Object(te.a)("ul").isProTemplatesLocked,j=Object(te.a)().isProTemplatesLocked,y=Object(te.a)("ck").isProTemplatesLocked,h=Object(M.a)().setScratchTemplateType,_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scratch",t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)(Ge,{importBuildFromScratch:l,getRibbonName:z.b,activeTemplateGroup:o,templateID:e,importType:b,stepId:p,importing:O,allowNew:t})},g=[],w=function(e){var a,l,i=n[e];!t(i,!!i.group_type&&Object.keys(i.group_type)[0])||i.build_from_scratch&&p&&!i.allow_new||(!c&&i.build_from_scratch||g.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:e},i.build_from_scratch?_(i.slug?i.slug:e,i.allow_new):Object(r.createElement)("div",{className:"wffn_template_sec"},"yes"===i.pro&&(["wc_checkout","wc_thankyou"].includes(o)||null!=i&&null!==(a=i.group)&&void 0!==a&&a.some((function(e){return["wc_checkout","wc_thankyou"].includes(e)}))?y:["upsell"].includes(o)||null!=i&&null!==(l=i.group)&&void 0!==l&&l.some((function(e){return["upsell"].includes(e)}))?v:j)?Object(r.createElement)(ne.a,null):"",Object(r.createElement)("div",{className:i.is_pro?"wffn_template_sec_design_pro":"wffn_template_sec_design"},i.thumbnail&&Object(r.createElement)(J,{src:i.thumbnail,className:"wffn_img_temp",alt:"thumbnail"}),Object(r.createElement)("div",{className:"wffn_temp_overlay"})),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn_pro_template"},Object(r.createElement)(m.Button,{onClick:function(t){h("new"),u(t,e,i)},isPrimary:!0,role:"button",tabIndex:"-1","aria-hidden":"true",className:"bwf-template-action-btn bwf-no-ripple"},Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"wffn_template_meta_left"},Object(r.createElement)("div",{className:"wffn_template_sec_meta_name"},i.name),"funnel"===o&&Object(r.createElement)("div",{className:"wffn_template_sec_meta_group"},Ze[null==i?void 0:i.group[0]]&&Ze[null==i?void 0:i.group[0]]," ","Funnel")),Object(r.createElement)("div",{className:"wffn_template_meta_right"},i.steps?Object(r.createElement)(r.Fragment,null,Object(s.sprintf)(Object(s._n)("%s step","%s steps",i.steps.length,"funel-builder"),i.steps.length)):null))))))};for(var E in n)w(E);return"wp_editor"===i&&Object(a.isEmpty)(g)&&g.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:"custom-wp_editor"},_("upsell"===o?"wfocu-custom-empty":"wp_editor_1"))),"wp_editor"===i&&g.push(Object(r.createElement)(Ye.a,{key:"other-builder-notice",type:o})),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:d()("wffn_pick_template",{wffn_fullscreen_pich_templates:!!f})},g))};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct=function(e){var t=e.activeFilter,n=e.defaultBuilder,c=e.filters,l=e.editors,i=e.templates,b=e.isTemplateLoading,d=e.activeBuilder,m=e.activeTemplateGroup,p=e.templateGroup,O=void 0===p?[]:p,v=e.funnelId,j=void 0===v?0:v,y=e.showDefaultEditorNotice,h=void 0===y||y,_=e.templateCards,g=void 0===_?{}:_,w=e.previewData,E=e.onImportComplete,S=e.templateFilterCheck,N=e.showTemplatesNav,k=e.parentRoute,C=e.disabledNavs,P=void 0===C?[]:C,x=e.showBuildFromScratch,A=void 0===x||x,I=e.funnelTitleModalData,D=void 0===I?{}:I,F=e.scratchConfirmModalData,U=e.importApiPrefix,V=void 0===U?"funnels":U,K=e.templateListNotice,H=e.showImportNotice,$=void 0===H?"":H,J=e.urlDependency,G=void 0===J||J,W=e.showEditors,Q=void 0===W||W,Y=e.previewCustomizeEnabled,Z=void 0!==Y&&Y,X=e.listRef,ee=e.stepId,ne=Object(f.i)(),re=Object(te.a)("ck").isProTemplatesLocked,ae=Object(te.a)("ul").isProTemplatesLocked,ce=Object(te.a)().isProTemplatesLocked,le=Object(Be.a)().updateStatus,oe=j,ie=Object(te.b)(),ue=ie.showSnackbar,se=ie.hideSnackbar,fe=rt(Object(r.useState)(!1),2),be=fe[0],de=fe[1],me=rt(Object(r.useState)(!1),2),pe=me[0],Oe=me[1],ve=function(){if(G)return f.k.apply(void 0,arguments)},ge=Object(he.a)().unsetTabData,we=(0,q.a.getFunnel)(),Ee=Object(M.a)(),Se=Ee.fetch,Ne=Ee.makeDefaultEditor,ke=Ee.setActiveBuilder,Ce=Ee.setActiveGroup,Pe=Ee.setCurrentTemplate,xe=Ee.setActiveStep,Te=Ee.setPageBuildersOptions,Ie=Ee.setActiveSubFilter,De=Ee.setImportOffer,Fe=Object(L.a)(),Me=Fe.getCurrentTemplate,qe=Fe.getPageBuildersOptions,ze=Fe.getPageBuildersTexts,Ue=Me(),Ve=qe(),He=ze(),$e=Object(o.useParams)(),Je=$e.builder,Ge=$e.templateId,We=$e.filter,Qe=void 0===We?m:We,Ye=Object(f.i)().importType,Ze=ee?"step":"wc_checkout"===Ye?"funnel":Ye,et=Object(ye.a)().setIsFunnelEmpty;Object(r.useEffect)((function(){return Object(a.isEmpty)(g)&&Se(),function(){De(null),se()}}),[]),Object(r.useEffect)((function(){var e,t;Je&&!b&&Ge&&g[Ge]&&Pe({id:Ge,template:g[Ge],steps:g[Ge].steps,activeStep:null!==(e=g[Ge])&&void 0!==e&&e.steps?null===(t=g[Ge])||void 0===t?void 0:t.steps[0].type:""})}),[Je,Ge,b]),Object(T.i)(Object(s.__)("Import Funnel","funnel-builder"));var at=rt(Object(r.useState)(!1),2),ct=at[0],lt=at[1],ot=rt(Object(r.useState)(!1),2),it=ot[0],ut=ot[1],st=rt(Object(r.useState)(!1),2),ft=st[0],bt=st[1],dt=rt(Object(r.useState)({}),2),mt=dt[0],pt=dt[1],Ot=rt(Object(r.useState)(!1),2),vt=Ot[0],jt=Ot[1];Object(r.useEffect)((function(){})),Object(r.useEffect)((function(){ke(d)}),[m,c,l]),Object(r.useEffect)((function(){return Ge&&Pe({id:Ge,template:{}}),function(){ke("")}}),[]),Object(r.useEffect)((function(){pe&&(ve({},"/templates"),ue(Object(s.__)("Template not found for requested URL. Please select from the list.")))}),[pe]);var yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"activate",r=arguments.length>3?arguments[3]:void 0;try{pt((function(e){return tt(tt({},e),{},{disableConfirm:!0,confirmButtonText:"Activating",cancelButtonText:"",shouldCloseOnClickOutside:!1})})),u()({path:Object(T.q)("/funnels/activate-plugin/?slug=".concat(e,"&init=").concat(t,"&status=").concat(n)),method:"POST"}).then((function(e){!0===e.success&&("funnel"===Ze&&j||ee?_t(r||Ue.id):de(!0),pt({status:!1}),Te(tt(tt({},Ve),{},nt({},d,tt(tt({},Ve[d]),{},{"plugin-status":"activated"})))))})).catch((function(e){pt({status:!0,error:e.message||e.msg}),console.log("catch",e)}))}catch(e){console.log(e)}},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,a=Ve[d];if("wp_editor"!==d&&"customizer"!==d&&a["plugin-status"]&&"activated"!==a["plugin-status"]||t){var c=He[d],l=c.text;"gutenberg"===d&&e&&(l=Object(s.__)("To have the best experience in Block editor, FunnelKit has built a minimalist block plugin ","funnel-builder")+"<strong>SlingBlocks.</strong>");var o={status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:l}}),closeIcon:!0};o.confirmButtonText=c.ButtonText,"yes"===c.show_cancel_btn&&(o.cancelButtonText="Cancel"),"gutenberg"===d&&e&&(o.cancelButtonText=Object(s.__)("No thanks","funnel-builder")),pt(tt(tt({},o),{},{onConfirm:function(){if(c.builder_link&&"install"===a["plugin-status"]&&"yes"===c.noInstall)return window.open(c.builder_link,"_blank"),void pt({status:!1});"yes"!==c.show_cancel_btn&&pt({status:!1}),yt(a.plugins[0].slug,a.plugins[0].init,a["plugin-status"],n)},onCancel:function(){"gutenberg"===d&&e&&de(!0),pt({status:!1})}})),ut(!1)}else ee||"funnel"===Ze&&j&&!e?_t(n||Ue.id):de(!0)},_t=function(e,n,r,c){var l=r||m;ut({id:e,group:l,filter:t});var o=!0;try{if(ee)return void function(e){var t=Object(z.a)(d,m),n="/funnel-offer/".concat(ee,'/design?design={"builder":"').concat(t,'","template":"').concat(e,'"}'),r="/funnel-".concat(m,"/").concat(ee,'/design?design={"builder":"').concat(t,'","template":"').concat(e,'"}');u()({path:Object(T.q)("".concat("upsell"===m?n:r)),method:"POST"}).then((function(e){if(!e.success)throw pt({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),ut(!1),e;E()})).catch((function(e){throw e}))}(e);var i=Object.create({});i.template=e,i.builder=Object(z.a)(d,l);var f=Object.create({});Object.create({});if(oe&&"step"===Ze){var b=c&&c.hasOwnProperty("id")?c.id:0;c?(i.title=n.title,i.inherit_from=b,i.type=l,delete i.template,delete i.builder):(i.funnel_id=oe,i.type=l,i.title=n.title,i.template_type=t),"upsell"===l&&("new"===n.type?(delete i.inherit_from,c&&(i.offer_inherit=b),Object(a.size)(n.offer_title)?i.offer_title=n.offer_title:i.offer_title=c.name):Object(a.size)(n.offer_title)?i.title=n.offer_title:i.title="".concat(c.name," Copy")),i.insert_into=n.insert_into}else{w().thumbnails.forEach((function(e){f["upsell"===e.step?"wc_upsells":e.step]=e.slug})),i.steps=JSON.stringify(f),oe&&"funnel"===Ze?i.funnel_id=Number(oe):i.title=n.title}var p=0!==oe&&"step"===Ze?"upsell"===l&&"existing"===n.type?Object(T.q)("/funnel-upsell/".concat(n.insert_into,"/offers")):Object(T.q)("/funnels/".concat(oe,"/steps")):Object(T.q)("/".concat(V,"/import_template"));u()({method:"POST",data:i,path:p}).then((function(e){if(e.hasOwnProperty("builders_options"))ht(!1,!0);else if(e.status&&!0===e.status){if(e.setup&&le(e.setup),o=!1,oe||(e.funnel_id?gt(e.funnel_id):pt({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:Object(s.__)("Unable to import template. Contact Support.","funnel-builder")})),0!==oe&&E){if("funnel"===Ze&&et(!1),"upsell"===l&&n.hasOwnProperty("insert_into")&&""!==n.insert_into&&we.steps){var t=we.steps.findIndex((function(e){return parseInt(e.id)===parseInt(n.insert_into)})),r=we.steps[t].substeps;r.hasOwnProperty("offer")&&r.offer.length>0&&r.offer.map((function(e){ge("offer",e.id,"products",e.id)}))}E(e)}}else pt({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),de(!1)})).catch((function(e){pt({status:!0,error:e.message||e.msg}),de(!1)})).finally((function(){o&&ut(!1)}))}catch(e){ut(!1)}},gt=function e(t){try{u()({path:Object(T.q)("/funnels/".concat(t,"/import-status"))}).then((function(n){!0===n.status?E?(lt(!1),E({funnel_id:t})):(delete ne.group,ve({},"/funnels/".concat(t),ne)):!1===n.status&&setTimeout((function(){e(t)}),2e3)}))}catch(e){}},wt=function(e){var t=!1,n=!Qe||"wc_checkout"!==Qe&&"wc_thankyou"!==Qe?"upsell"===Qe?!ae:!ce:!re;return"yes"===e&&!0!==n?t=!0:"status"===e&&(t=n),t},Et=wt("status");return Object(r.createElement)(r.Fragment,null,b?Object(r.createElement)(Re,{showEditors:Q,showTemplatesNav:Q}):Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-template-list-header"},N&&Object(r.createElement)(Ke,{funnelId:j,disabledNavs:P,activeTemplateGroup:m,templateGroup:O,onClick:function(e){return Ce(e)},urlDependency:G}),Q&&Object(r.createElement)(Le,{editorList:l[m],onChange:function(e){ke(e),h&&Object(z.f)({showSnackbar:ue,hideSnackbar:se,builder:e,defaultBuilder:n,onConfirm:function(){!function(e){if(n!==e){jt(!0);try{u()({path:Object(T.q)('/funnels/general-settings/update-default-builder?settings={"default_selected_builder": "'.concat(e,'"}')),method:"POST"}).then((function(t){t.success?Ne(e):console.log("Something went wrong with saving default editor")})).catch((function(e){console.log(e)})).finally((function(){jt(!1)}))}catch(e){console.log(e),jt(!1)}}}(e)},defaultEditorLoading:vt})},activeEditor:d})),Object(r.createElement)("div",{id:"wffn_design_container",ref:X},Object(r.createElement)("div",{className:"wffn_tab_container"},K,Object(r.createElement)(Xe,{templateFilterCheck:S,templateCards:g,showBuildFromScratch:A,importBuildFromScratch:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(F&&!r)pt(tt(tt({},F),{},{onConfirm:function(){return e(t,n,!0)},onCancel:function(){return pt({status:!1})}}));else{if(it)return!1;"upsell"===m&&wt()?bt(!0):(Pe({id:t,isBuildFromScratch:!0,template:{name:O[m]}}),$?$():ht(!0,!1,t),oe||et(!0))}},activeTemplateGroup:m,activeEditor:d,onPreview:function(e,t,n){e.preventDefault(),n.group_type?Ie(Object.keys(n.group_type)[0]):0!==j&&"funnel"!==Ze||"optin"!==m&&"wc_checkout"!==m||Ie("optin"===m?"inline":"wc_checkout"===m&&"1"),Pe({id:t,template:n,steps:n.steps,activeStep:n.steps?n.steps[0].type:""}),lt(!0),"upsell"===m&&0===j?ve({},"".concat(k,"/").concat(m,"/").concat(d,"/preview/").concat(t)):0===j?ve({},"".concat(k,"/").concat(m,"/").concat(d,"/preview/").concat(t,"/").concat(n.steps[0].type)):n.steps?("funnel"===Ze&&ve({},"".concat(k,"/templates/").concat(m,"/").concat(d,"/preview/").concat(t,"/").concat(n.steps[0].type)),xe(n.steps[0].type)):ve({},"".concat(k,"/templates/").concat(m,"/").concat(d,"/preview/").concat(t))},funnelId:j,importType:Ze,stepId:ee,importing:it}))),Object(r.createElement)(B.a,{className:"bwf-admin-modal-squeezy "+mt.className,isLoading:mt.loading,successMessage:mt.success,errorMessage:mt.error,isOpen:mt.status,autoHide:8e3,content:mt.content,confirmText:mt.confirmText,confirmButtonText:mt.confirmButtonText,cancelButtonText:mt.cancelButtonText,onConfirm:mt.onConfirm,onCancel:mt.onCancel,modalTitle:mt.modalTitle,disableConfirm:mt.disableConfirm,closeIcon:mt.closeIcon,onRequestClose:function(){return pt({status:!1})}}),Object(r.createElement)(R,{isOpen:ft,onRequestClose:function(){return bt(!1)},modalContent:Object(z.d)({FB_PRO_STATUS:Et,funnelId:j,importType:Ze,activeTemplateGroup:m}),className:"bwf-templates-pro-modal"}),be&&(0===j?Object(r.createElement)(_e.a,{onCloseModal:function(){de(!1)},isWorking:it,onComplete:function(e,n,r){Ue.isBuildFromScratch?function(e,n,r){if(ut({id:"scratch",group:m,filter:t}),r)u()({path:Object(T.q)("".concat("wc_checkout"===m?"/store-checkout":"/funnels","/duplicate/").concat(r)),method:"wc_checkout"===m?"POST":"GET"}).then((function(e){e.status&&(Object(T.Z)()||e.funnel_id)?E?E({funnel_id:e.funnel_id}):ve({},"/funnels/".concat(e.funnel_id),ne):pt({status:!0,modalTitle:Object(s.__)("Clone Funnel"),error:e.message||e.msg||Object(s.__)("Unable to clone funnel. Contact Support.","funnel-builder"),content:e.error}),ut(!1)})).catch((function(e){ut(!1),console.log(e)}));else{var c={funnel_name:e,template:"scratch"};r&&(c.inherit_from=r),n&&!Object(a.isEmpty)(n)&&(c.funnel_steps=n.join(",")),c.builder=d,"wc_checkout"===m&&(c.default_step="yes",c.template=null==Ue?void 0:Ue.id);try{u()({method:"POST",data:c,path:Object(T.q)("/".concat(V))}).then((function(e){if(!0===e.status&&e.hasOwnProperty("funnel")){var t=e.funnel.id;e.setup&&le(e.setup),"funnels"===V?(delete ne.group,Object(f.k)({},"/funnels/".concat(t),ne)):E({funnel_id:e.funnel.id})}else!1===e.status&&(pt({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),de(!1),ut(!1))}))}catch(e){console.log(e),ut(!1)}}}(e,n,r):_t(Ue.id,{title:e})},modalTitle:D.title}):Object(r.createElement)(Ae,{onCloseModal:function(){de(!1)},isWorking:it,activeTemplateGroup:m,templateGroup:O,showCloneOption:Ue.isBuildFromScratch,onComplete:function(e,t,n){var r=Ue.id;if(t!==m){var c=Object(a.get)(i,"".concat(t,".").concat(d)),l=c&&Object.keys(c).find((function(e){var t;return!0===(null===(t=c[e])||void 0===t?void 0:t.build_from_scratch)}));l&&(r=c[l].slug)}_t(r,e,t,n)}}))),(Je||ct)&&Object(r.createElement)(je,{isOpen:ct||Je,onRequestClose:function(){lt(!1),Ie(!1),ne.group&&(delete ne.group,ve({},Object(f.g)(),ne))},importTemplate:_t,templateGroup:O,activeGroup:m,templateID:Ue.id,template:Ue.template,activeEditor:d,importing:it,templateList:i,filters:c,templates:i,hasPRO:wt,checkEditor:$||ht,previewData:w,isTemplateLoading:b,activeFilter:t,setPreviewErr:Oe,parentRoute:k,funnelId:j,importType:Ze,updateQueryString:ve,previewCustomizeEnabled:Z,urlDependency:G,stepId:ee}))};ct.prototype={filters:l.a.object.isRequired,templates:l.a.object.isRequired,editors:l.a.object.isRequired,defaultBuilder:l.a.object.isRequired,templateLoading:l.a.func.isRequired,activeTemplateGroup:l.a.string.isRequired,templateGroup:l.a.object.isRequired};var lt=ct},329:function(e,t,n){"use strict";var r=n(0),a=n(2),c=n(9),l=n(1),o=n(13),i=n.n(o),u=n(20),s=n(252),f=n(4),b=n(285),d=n(26),m=n(77),p=n(249),O=n(21),v=n(251);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t,n=e.onCloseModal,o=e.onComplete,i=e.isWorking,b=g(Object(r.useState)(""),2),j=b[0],y=b[1],h=g(Object(r.useState)(""),2),w=h[0],S=h[1],N=g(Object(r.useState)([]),2),k=N[0],C=N[1],P=g(Object(r.useState)(!1),2),x=P[0],T=P[1],A=Object(O.a)("ul").isProFeatureLocked,I=Object(p.a)(),D=I.getCurrentTemplate,F=I.getScratchTemplateType,R=I.getActiveGroup,B=I.getActiveSubFilter,L=D(),M=F(),q=R(),z=B(),U=Object(r.createElement)(r.Fragment,null,"wc_checkout"===q?Object(l.__)("Create Store Checkout","funnel-builder"):Object(l.__)("Create Funnel","funnel-builder")),V=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==M&&L.isBuildFromScratch||w){e.next=3;break}return y("Funnel title is required field"),e.abrupt("return");case 3:y(""),o&&o(w,k,L.isBuildFromScratch&&"new"!==M&&x);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){_(c,r,a,l,o,"next",e)}function o(e){_(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}(),K=function(){return L.isBuildFromScratch?"new"===M?Object(a.isEmpty)(w.trim())||!1===q&&Object(a.isEmpty)(k):Object(a.isEmpty)(x):Object(a.isEmpty)(w.trim())},H=function(e){return"wc_checkout"===e.type&&z&&v.e.hasOwnProperty(e.type)&&v.e[e.type].hasOwnProperty(z)?" - ".concat(v.e[e.type][z]," ")+Object(l.__)("Step","funnel-builder"):""};return Object(r.createElement)(c.Modal,{title:U,className:"bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!i,overlayClassName:"bwf-create-funnel-modal__overlay"},j&&Object(r.createElement)(m.a,{errorMessage:j}),(!L.isBuildFromScratch||"existing"!==M)&&Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&(K()||V())}},Object(r.createElement)(c.TextControl,{placeholder:Object(l.__)("Enter funnel name","funnel-builder"),label:Object(l.__)("Name","funnel-builder"),value:w,onChange:function(e){return S(e)},disabled:i})),L.isBuildFromScratch&&("new"===M?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-create-new-funnel__add-step-wrap"},"wc_checkout"===q?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(l.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-mb-12 bwf-flex bwf--g8"},Object(r.createElement)(d.b,{content:Object(l.__)("Checkout","funnel-builder"),border:!0}),Object(r.createElement)(d.b,{content:Object(l.__)("Thank You","funnel-builder"),border:!0})),Object(r.createElement)("span",{className:"help-text"},Object(l.__)("Note: You have to custom build and design the above steps","funnel-builder"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,Object(l.__)("Add following steps to funnel","funnel-builder")),Object(r.createElement)(s.a,{value:k,onChange:function(e){C(e)},options:Object.keys(f.gb).map((function(e){return{value:e,label:f.gb[e],isPro:A&&"upsell"===e}})),disabled:i})))):Object(r.createElement)(E,{onSelect:function(e){return T(e)},activeGroup:q})),!L.isBuildFromScratch&&L.steps&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(l.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-mb-12 bwf-flex-wrap"},null===(t=L.steps)||void 0===t?void 0:t.filter((function(e){return!A||"upsell"!==e.type})).map((function(e,t){return Object(r.createElement)(d.b,{content:f.gb[e.type]+H(e),border:!0,key:"step-type-".concat(t)})})))),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.a,{onClick:n,className:"bwf-modal-cancel-btn",disabled:i},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(u.a,{isPrimary:!0,disabled:K()||i,isBusy:i,onClick:V,className:K()?"bwf-no-ripple":"",name:"add-funnel"},Object(l.__)("Done","funnel-builder"))))};var E=function(e){var t=e.onSelect,n=e.activeGroup,c=g(Object(r.useState)([]),2),o=c[0],u=c[1],s=g(Object(r.useState)(""),2),m=s[0],p=s[1],O=g(Object(r.useState)({}),2),v=O[0],j=O[1],h=g(Object(r.useState)([]),2),_=h[0],w=h[1],E=g(Object(r.useState)(!0),2),S=E[0],N=E[1],k=function(e){N(!0),i()({path:Object(f.q)("/funnels".concat(Object(f.p)(y({},e))))}).then((function(e){e.status?(u(e.items),Object(a.size)(e.items)?w(e.items.map((function(e){return{key:e.id,value:e.title}}))):w([{key:"no-data",value:"No Data Found"}])):e.items||w([]),N(!1)})).catch((function(e){console.log(e),N(!1)}))};Object(r.useEffect)((function(){Object(a.isEmpty)(m)?k({limit:10,need_steps_data:!0}):k({limit:10,s:m,need_steps_data:!0})}),[m]);var C=Object(r.useMemo)((function(){var e;if(Object(a.isEmpty)(o))return[];var t=null===(e=o.find((function(e){return e.id===v.key})))||void 0===e?void 0:e.steps_data,r=[];return t.forEach((function(e){r.push(e.type),"wc_checkout"===e.type&&e.substeps&&!Object(a.isEmpty)(e.substeps)&&r.push("wc_order_bump")})),r.filter((function(e){return"wc_checkout"!==n||["wc_checkout","wc_thankyou","wc_upsells"].includes(e)})).filter((function(e,t,n){return n.indexOf(e)===t}))}),[v]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,Object(l.__)("Funnel","funnel-builder")),Object(r.createElement)(b.a,{onSearch:function(e){return p(e)},isLoading:S,items:_,multiGroup:!1,error:"",onItemClick:function(e){t(e.key),j(e)},blurText:v.value,placeholder:Object(l.__)("Search…","funnel-builder")}),!Object(a.isEmpty)(v)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(l.__)("The following steps have been added to the funnel","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf-flex-wrap bwf--g8 bwf-mb-16"},Object(a.isEmpty)(C)?Object(r.createElement)(d.b,{content:Object(l.__)("No Steps","funnel-builder"),border:!0}):C.map((function(e,t){return Object(r.createElement)(d.b,{content:Object(f.fb)(e),border:!0,key:"steps-".concat(t)})})))))}},331:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},343:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},348:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(119),l=n(7),o=n.n(l),i=(n(331),n(13)),u=n.n(i),s=n(9),f=n(4),b=n(247),d=n(244),m=n(252),p=n(250),O=n(310),v=n(245),j=n(296),y=function(e){var t=e.onCloseModal;e.link;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Modal,{onRequestClose:function(){t()},title:Object(a.__)("Add Product","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-large bwf-modal-edit-page"}))},h=n(14),_=n(20),g=n(21),w=n(2),E=n(55),S=n(107),N=n(321);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function A(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F={checkbox:s.CheckboxControl,radio:v.a,radios:v.a,select:d.b,textarea:s.TextareaControl,"custom-select":j.a,text:s.TextControl,input:s.TextControl,checklist:m.a,license:O.a,color:p.a,"bwf-label":function(e){var t=e.label;return Object(r.createElement)("span",{className:"bwf_label"},t)},number:function(e){var t=e.value,n=e.onChange,a=(e.errors,e.placeholder),c=e.label,l=e.required;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{id:l?"required":""},c),Object(r.createElement)("input",{type:"number",value:t,onChange:function(e){return n(e.target.value)},placeholder:a}))},"multi-select":N.a},R=function(e){var t,n,l,i,s=Object(c.useParams)(),d=s.stepId,m=s.offerId,p=Object(h.i)().funnel_id,O=I(Object(r.useState)(!1),2),v=O[0],j=O[1],N=Object(g.b)().showSnackbar,C=Object(E.a)().setTabData,x=Object(S.a)().getStep,D=e.tabID,R=e.errorNotice,B=e.type,L=e.fields,M=e.disabled,q=e.saveSettings,z=x(B,d,"products",m).data,U=void 0===z?{}:z,V=I(Object(r.useState)(""),2),K=V[0],H=V[1],$=I(Object(r.useState)(!1),2),J=$[0],G=$[1],W=I(Object(r.useState)(""),2),Q=W[0];W[1];L&&L[D]&&(t=Object.assign({},L[D]),i=L),l=null!=t&&t.fields?t.fields:[],n=null!=t&&t.values?t.values:{};var Y=I(Object(r.useState)(l),2),Z=Y[0],X=Y[1];Object(r.useEffect)((function(){return K&&(N(K),j(!1)),function(){H("")}}),[K]),Object(r.useEffect)((function(){X([]);var e=setTimeout((function(){return X(l)}));return function(){clearTimeout(e)}}),[l]);var ee=function(e){var t,n,r,c=(t=e,(n=i)[D],r=T(n,[D].map(A)),Object.values(r).forEach((function(e){var n=e.values;t=P(P({},n),t)})),t);j(!0),H(""),R("",!1);try{u()({path:Object(f.q)("/funnel-".concat(B,"/").concat("offer"===B?m:d,"/settings?funnel_id=").concat(p)),method:"POST",data:{settings:JSON.stringify(c)}}).then((function(t){if(t.success){if(t.hasOwnProperty("data")&&t.data.hasOwnProperty("ship_dynamic")&&!Object(w.isEmpty)(U)){var n=Object(w.cloneDeep)(U);n=P(P({},n),{},{ship_dynamic:t.data.ship_dynamic}),C(B,d,"products",m,n)}H(Object(a.__)("Setting Saved","funnel-builder")),i[D].values=e,q(i)}else H(t.msg)})).catch((function(e){console.log(e),H(e.message)}))}catch(e){console.log(e),H(Object(a.__)("There are some technical difficulties while updating settings. Contact Support","funnel-builder"))}},te=function(e,t,n){e.type=e.inputType?e.inputType:e.type,e.type=Array.isArray(e.styleClasses)&&e.styleClasses.includes("wp-color-picker")?"color":e.type;var a=e.type.toLowerCase()in F?F[e.type.toLowerCase()]:F.text;return M&&(t.disabled=!0),Object(r.createElement)("div",{className:o()("form-group",e.class||e.styleClasses,{"checkbox-control-wrap":"checkbox"===e.type},{"inline-group":!e.label},{"checklist-field":"checklist"===e.type},{"checkbox-field":"checkbox"===e.type})},Object(r.createElement)(a,P(P({label:e.label},function(e,t){var n,r=Object.assign({},e.props);return e.type.toLowerCase()in F||(r.type=e.type.toLowerCase()),r.placeholder=e.placeholder,r.options=e.options,Array.isArray(e.values)&&e.values&&e.values.map((function(e){e.name&&(e.label=e.name,delete e.name),e.id&&(e.value=e.id)})),r.options=e.options||e.values,e.checkboxlabel&&(r.checkboxlabel=e.checkboxlabel),e.multiple&&(r.multiple=e.multiple),e.ajax_cb&&(r.ajax_cb=e.ajax_cb),"copier"!==e.type&&"custom-select"!==e.type||(r=e),"select"===e.type&&(r.excludeSelectedOptions=!1,r.options&&(r.options=r.options.map((function(e){return"object"!==k(e.value)&&(e.key="object"!==k(e.value)?e.value:e.key,e.value={id:e.value}),e}))),e.multiple&&(r.excludeSelectedOptions=!0,r.inlineTags=!0)),"richeditor"===e.type&&(r.id=e.id),"textarea"===(null===(n=e.type)||void 0===n?void 0:n.toLowerCase())&&(r=e),"text"===e.type&&e.disabled&&(r.disabled=e.disabled),r.required=e.required,r.error=t.hasOwnProperty(e.key)&&t[e.key],r}(e,n)),t)),e.hint&&Object(r.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:e.hint}}))},ne=function(e,t){if(M)return!1;try{var n,r=!1;if(n=e[t.key],Array.isArray(t))t.every((function(t){return"true"==e[t.key]}))&&(r=!0);else if(Array.isArray(t.value)&&Array.isArray(n)){for(var a=0;a<n.length;a++)if(t.value.indexOf(n[a])>-1){r=!0;break}}else n==t.value&&(r=!0)}catch(e){console.log(e),r=!1}return r};return Object(r.createElement)(r.Fragment,null,Z&&Array.isArray(Z)&&Z.length?Object(r.createElement)(b.a,{onSubmitCallback:function(e){ee(e)},initialValues:n,validate:function(e){var t={};return["landing_page_base","checkout_page_base","optin_page_base","optin_ty_page_base","wfocu_page_base","ty_page_base"].forEach((function(n){e.hasOwnProperty(n)&&!e[n]&&"/%postname%/"!==bwfAdminGen.permalink_structure&&(t[n]=bwfAdminGen.errors.empty_base)})),void 0!==e.checkout_page_base&&e.checkout_page_base&&bwfAdminGen.checkout_page_slug===e.checkout_page_base&&(t.checkout_page_base=bwfAdminGen.errors.checkout_slug),Object(w.isArray)(Z)&&Z.forEach((function(n){n.toggler&&!ne(e,n.toggler)||!n.required||!Object(w.isEmpty)(e[n.key])&&!Object(w.isNull)(e[n.key])||(t[n.key]=Object(a.__)("This Field is required!","funnel-builder"))})),t}},(function(e){var t=e.getInputProps,n=e.values,c=e.errors,i=e.handleSubmit,u=!1;return Object(r.createElement)("div",{className:"wtfb-tab-form"},l.map((function(e,a){return Object(r.createElement)(r.Fragment,{key:a},e.type&&"label"!==e.type||e.inputType?Object(r.createElement)(r.Fragment,null,"radio"!==e.type&&"radios"!==e.type||"boolean"!=typeof e.values[0].value?"":n[e.key]="true"===n[e.key]||"false"!==n[e.key]&&n[e.key],u=!0,(!e.toggler||ne(n,e.toggler))&&te(e,t(e.key),c)):"label"===e.type&&e.hint?Object(r.createElement)("div",{className:o()("form-group component-label-description",e.styleClasses)},Object(r.createElement)("div",{className:"components-base-control__field"},Object(r.createElement)("label",null,e.label),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.hint}}))):e.hint||e.desc||e.label?Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.hint||e.desc||e.label},className:o()(e.styleClasses,{"field-label":e.label})}):null)})),u&&Object(r.createElement)("div",{className:"bwf-settings-action-wrap"},Object(r.createElement)(_.a,{isPrimary:!0,onClick:function(){M||(Object.keys(c).length?N(Object(a.__)("Please Validate Fields.","funnel-builder")):i())},disabled:M||v,isBusy:v,className:M?"bwf-no-ripple":""},Object(a.__)("Save","funnel-builder"))))})):null,J&&Object(r.createElement)(y,{onCloseModal:function(){G(!1)},link:Q}))},B=n(260);n(3);var L=function(e){var t=e.onCloseModal,n=e.modalData;return Object(r.createElement)(s.Modal,{onRequestClose:function(){t()},title:Object(a.__)("Offer Success/Failure Messages Help","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-xl bwf-modal-edit-page bwf-fields-update-field-modal bwf-section-modal"},Object(r.createElement)("img",{src:n,alt:"settings"}))},M=n(37),q=n(26);n(18);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=function(e){var t=Object(g.a)("ck").isProFeatureLocked,n=e.tabs,a=void 0===n?[]:n,c=e.type,l=e.getdata,o=e.saveSettings,i=U(Object(r.useState)(!1),2),u=(i[0],i[1]),s=U(Object(r.useState)(""),2),b=(s[0],s[1]),d=U(Object(r.useState)(a[0].key),2),m=(d[0],d[1]),p=U(Object(r.useState)(!1),2),O=p[0],v=p[1],j=U(Object(r.useState)(""),2),y=j[0],h=j[1],_=Object(f.L)(),E=Object(w.get)(_,"0.modal",{}).primary_action;Object(r.useEffect)((function(){m(a[0].key)}),[a[0].key]);var S=function(e,t){var n="";u(t),Array.isArray(e)?e.forEach((function(e){n+="<p>"+e+"</p>"})):"object"===z(e)?Object.values(e).forEach((function(e){n+="<p>"+e+"</p>"})):n+="<p>"+e+"</p>",b(n)};return Object(r.createElement)(r.Fragment,null,a.length&&Object(r.createElement)("div",{className:"bwf-tabs-accordian-wrap"},Object(r.createElement)(B.a,{items:a.map((function(e){return{key:e.key,label:Object(r.createElement)(r.Fragment,null,e.label," ","checkout"===c&&t&&"tracking_analysis"===e.key&&Object(r.createElement)(q.a,null)),hint:e.hintLink?Object(r.createElement)("div",{className:"hint"},Object(M.decodeEntities)(e.hint)," ",Object(r.createElement)("a",{onClick:function(t){var n;t.stopPropagation(),n=e.hintLink,v(!0),h(n)}},e.hintLinkText)," "):Object(w.size)(e.hint)?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:e.hint}}),"checkout"===c&&t&&"tracking_analysis"===e.key&&Object(r.createElement)("a",{href:Object(f.K)(["Tracking","Id","Setting","Upgrade","Link"]),target:"_blank",className:"bwf-upgrade-pro-text",rel:"noreferrer"},E)):null,display:Object(r.createElement)(R,{tabID:e.key,errorNotice:S,type:c,fields:l,saveSettings:o,disabled:"checkout"===c&&t&&"tracking_analysis"===e.key})}})),className:"bwf-accordion",openedTabs:function(e){var t;m(null===(t=a[e])||void 0===t?void 0:t.key)}})),O&&Object(r.createElement)(L,{onCloseModal:function(){v(!1)},modalData:y}))},H=n(275),$=n(40),J=n(30);t.a=function(e){var t=e.type,n=void 0===t?"":t,a=e.funnelID,l=void 0===a?"":a,o=Object(c.useParams)(),i=o.stepId,u=o.offerId,s=Object(r.useRef)(new AbortController),f=Object(E.a)(),b=f.fetchStep,d=f.setFunnelId,m=f.setTabData,p=Object(S.a)(),O=p.getStep,v=p.getStepHeaderData,j=p.getFunnelData,y=Object($.a)(),h=y.setStepData,_=y.setLoading,g=y.setStepFunnelData,N=y.setIsFormLoading,k=v(n,i,"design",u),C=j(),P=J.a.getFunnelTitle();Object(r.useEffect)((function(){N(!1),!Object(w.isEmpty)(C)&&Object(w.isEmpty)(P)&&g(C),Object(w.isEmpty)(k)||(h(k),_(!1))}),[k,C]);var x=O(n,i,"settings",u),T=x.data,A=void 0===T?{}:T,I=x.loading,D=void 0===I||I,F=A.settings,R=void 0===F?{}:F;if(Object(r.useEffect)((function(){return Object(w.isEmpty)(A)&&b(n,i,"settings",u,s.current.signal),d(l),function(){s.current.abort()}}),[]),!D&&Object(w.size)(R)>0){var B=[];for(var L in R){var M={key:L,label:R[L].title,heading:R[L].heading,priority:R[L].priority,hint:R[L].hint,hintLink:R[L].hint_link,hintLinkText:R[L].hint_link_text};R[L]&&R[L].fields&&Object(w.isArray)(R[L].fields)&&R[L].fields.length>0&&B.push(M)}B.length&&B.sort((function(e,t){return e.priority-t.priority}))}return Object(r.createElement)(r.Fragment,null,D?Object(r.createElement)(H.a,null):Object(r.createElement)(K,{tabs:B,type:n,getdata:R,saveSettings:function(e){m(n,i,"settings",u,{settings:e})}}))}},349:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return v}));var r=n(0);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e){var t=o(Object(r.useState)({}),2),n=t[0],a=t[1],i=Object.keys(n).length>0&&Object.keys(n).reduce((function(e,t){return e&&n[t]}),!0);Object(r.useEffect)((function(){var t={};if(e)for(var n in e)t[n]=!1;a(t)}),[e]);var u=Object(r.useCallback)((function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=c(c({},n),{},l({},e,t));a(r)}}),[n]),s=Object(r.useMemo)((function(){var e={};for(var t in n){var r={selected:n[t],checked:n[t],onChange:u(t)};e[t]=r}return e}),[n]),f=Object(r.useCallback)((function(){var e={};for(var t in n)e[t]=!i;a(e)}),[n,i]);return{singleSelectProps:s,selectAllProps:{selected:i,checked:i,onChange:f},floatingBarProps:{items:e,selected:n},resetSelection:Object(r.useCallback)((function(){var e={};for(var t in n)e[t]=!1;a(e)}),[n])}},s=n(9),f=n(1),b=n(8),d=(n(382),n(383),function(e){var t=e.number,n=void 0===t?0:t;return Object(r.createElement)("span",{className:"bwf-count-badge"},n)}),m=n(62);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t=e.selected,n=void 0===t?{}:t,a=e.items,c=void 0===a?{}:a,l=e.actions,o=void 0===l?[]:l,i=e.onAction,u=p(Object(r.useState)(!1),2),O=u[0],v=u[1],j=function(e){return e.length>0?{gridTemplateColumns:e.reduce((function(e){return"".concat(e," auto")}),"")}:{}}(o),y=Object(m.a)().setModalData,h=Object.keys(n).reduce((function(e,t){return n[t]?e+1:e}),0);Object(r.useEffect)((function(){v(h>0)}),[h]);var _=Object.keys(c).filter((function(e){return n[e]})).map((function(e){return c[e]})),g=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d,{number:h}),Object(r.createElement)("b",{style:{marginLeft:"5px"}},Object(f.__)("Items Selected","funnel-builder")));return O&&Object(r.createElement)("div",{className:"bwf-floating-action-bar-outer"},Object(r.createElement)("div",{className:"bwf-floating-action-bar"},Object(r.createElement)("div",{className:"bwf-floating-action-bar-wrapper"},Object(r.createElement)("span",{className:"bwf-floating-action-bar-count"},g),Object(r.createElement)("div",{className:"bwf-floating-action-bar-actions",style:j},o.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)("span",{key:"bulk-action-".concat(t),title:e.hint?e.hint:"",onClick:function(){if(i){if("delete"===e.id){var t=_.length,n=1===_.length?_[0].title:"";y({title:n,count:t})}i(e.id,_)}}},Object(r.createElement)(b.a,{icon:e.icon}))}))),Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(){return v(!1)}},Object(f.__)("Close","funnel-builder")))))}},366:function(e,t,n){},367:function(e,t,n){},368:function(e,t,n){"use strict";var r=n(0),a=(n(279),n(119)),c=n(1),l=n(8),o=n(75),i=n(21);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=e.additionalTabs,n=u(Object(r.useState)([]),2),a=n[0],s=n[1],f=Object(i.b)().showSnackbar;Object(r.useEffect)((function(){s(null==t?void 0:t.fields)}),[t]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-additional-heading"},null==t?void 0:t.heading),Object(r.createElement)("div",{className:"bwf-shortcodes"},null==a?void 0:a.map((function(e,t){return e.heading?Object(r.createElement)("div",{className:"bwf-additional-sub-heading",key:t},e.heading):Object(r.createElement)("div",{key:t,className:"bwf-additional-container"},Object(r.createElement)("div",{className:"bwf-additional-title"},e.label),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==e?void 0:e.value),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(o.a,{toolTipText:Object(c.__)("Copy","funnel-builder")},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return null==e||e.id,t=e.label+" shortcode",n=e.value,(r=document.createElement("textarea")).value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),f(t+" "+Object(c.__)("copied","funnel-builder")),void f(t+" copied");var t,n,r}},Object(r.createElement)(l.a,{icon:"duplicate",width:20,height:20,color:"#82838E"}))))),e.hint&&Object(r.createElement)("span",{className:"bwf-code-copy__hint",dangerouslySetInnerHTML:{__html:e.hint}}))}))))},b=n(13),d=n.n(b),m=n(74),p=n(2),O=n(9),v=n(4),j=n(20),y=n(55),h=n(40),_=n(29),g=n(107),w=n(39),E=n(262);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.pageUrl,n=void 0===t?"":t,a=e.onRequestClose,l=e.stepId,o=e.type,u=e.stepTitle,s=e.urlSlug,f=e.stepDescription,b=e.offerId,m=(0,Object(w.a)().getStepsData)(),N=S(Object(r.useState)(!1),2),k=N[0],C=N[1],P=S(Object(r.useState)(""),2),x=P[0],T=P[1],A=S(Object(r.useState)(f),2),I=A[0],D=(A[1],S(Object(r.useState)(u),2)),F=D[0],R=(D[1],S(Object(r.useState)(""),2)),B=R[0],L=R[1],M=S(Object(r.useState)(),2),q=M[0],z=M[1],U=Object(r.useRef)(),V=Object(r.useRef)(),K=Object(h.a)().setStepData,H=Object(_.a)().setSingleStepData,$=Object(g.a)().getStep,J=Object(y.a)(),G=J.setStepHeaderData,W=J.setTabData,Q=$(o,l,"design",b).data,Y=void 0===Q?{}:Q,Z=Object(i.b)().showSnackbar;Object(r.useEffect)((function(){var e;null===(e=V.current)||void 0===e||e.focus()}),[]),Object(r.useEffect)((function(){var e=n.split("/");U.current=e.slice(0,Object(p.isEmpty)(e[e.length-1])?-2:-1).join("/"),L(n)}),[n]),Object(r.useEffect)((function(){T(s)}),[s]);var X=function(){var e={},t=F.replace(/\s/g,"");Object(p.isEmpty)(t)&&(e.heading=Object(c.__)("Title: This field is required","funnel-builder"));var n=x.replace(/\s/g,"");if(Object(p.isEmpty)(n)&&(e.title=Object(c.__)("Page Url Slug: This field is required","funnel-builder")),0===Object(p.size)(e)){C(!0);var r='{"title":"'.concat(null==m?void 0:m.title,'","slug":"').concat(x,'","description":"').concat(I,'"}');d()({path:Object(v.q)("/funnel-".concat(o,"/save-state/").concat(l)),method:"POST",data:JSON.parse(r)}).then((function(e){if(e.success){if(C(!1),e.hasOwnProperty("step_data")){K(e.step_data),G(o,l,b,e.step_data);var t=Object(p.cloneDeep)(Y);t.step.post_name=x,t.step.view_link=e.step_data.view_link,W(o,l,"design",b,t)}e.hasOwnProperty("step_list")&&H(e.step_list.id,e.step_list),a(),Z(Object(c.__)("Changes Saved","funnel-builder"))}})).catch((function(e){return console.log(e)}))}else z(e)};return Object(r.createElement)(O.Modal,{title:Object(c.__)("Edit Page URL","funnel-builder"),onRequestClose:a,className:"bwf-admin-modal bwf-modal-edit-page bwf-edit-page"},q&&Object(p.size)(q)>0&&Object(r.createElement)(E.a,{status:"error",isDismissible:!0,onRemove:function(){return z({})}},Object(r.createElement)("ul",null,Object.keys(q).map((function(e){return Object(r.createElement)("li",{key:e},q[e])})))),Object(r.createElement)("label",{id:"required"},Object(c.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(O.TextControl,{value:x,onChange:function(e){T(e.replace(/\s+/g,"-").toLocaleLowerCase()),L(U.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},onKeyPress:function(e){"Enter"===e.key&&X()},className:Object(p.size)(x.trim())?"":"bwf-error-border",ref:V,required:!0}),Object(p.size)(x.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(c.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url bwf-mt-16"},Object(r.createElement)("div",{className:"bwf-url-title"},Object(c.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},B))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(j.a,{onClick:a,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(j.a,{isPrimary:!0,disabled:!Object(p.size)(x.trim()),className:Object(p.size)(x.trim())?"":"bwf-no-ripple",isBusy:k,onClick:X},Object(c.__)("Update","funnel-builder"))))},C=(n(366),n(122)),P=n(282),x=n(260),T=n(50);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B=function(e){var t=e.activeTab,n=void 0===t?"content":t,a=e.formFields,l=e.activeProduct,o=e.initialValues,u=void 0===o?{}:o,s=e.styleRef,f=e.type,b=e.stepId,m=e.offerId,j=e.addTabIndex,h=Object(y.a)().setTabData,_=(0,Object(g.a)().getStep)(f,b,"design",m).data,w=void 0===_?{}:_,E=F(Object(r.useState)({}),2),S=E[0],N=E[1],k=F(Object(r.useState)({}),2),A=k[0],D=k[1],R=F(Object(r.useState)(!1),2),B=R[0],L=R[1],M=F(Object(r.useState)(""),2),q=M[0],z=M[1],U=F(Object(r.useState)([0]),2),V=U[0],K=U[1],H=F(Object(r.useState)([0]),2),$=H[0],J=H[1],G=Object(i.b)().showSnackbar;Object(r.useEffect)((function(){q&&(G(q),z(""))}),[q]),Object(r.useEffect)((function(){Y()}),[l]),Object(r.useEffect)((function(){W()}),[A,S]);var W=function(){if(S){var e=[];for(var t in A){var n,r;if(S.hasOwnProperty(t)){var a=S[t];null!=a&&a.toggler&&(null==a||null===(n=a.toggler)||void 0===n?void 0:n.value)!=A[null==a||null===(r=a.toggler)||void 0===r?void 0:r.key]||e.push(I(I({},a),{},{value:A[t]}))}}Q(e)}},Q=function(e){var t="";e.forEach((function(e){switch(e.type){case"text":e.contentClass&&jQuery(e.contentClass).text(e.value);break;case"richtext":case"richeditor":case"textarea":e.contentClass&&jQuery(e.contentClass).html(e.value);break;case"label":break;case"toggle":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;0==e.value?jQuery(n).hide():jQuery(n).show()}break;case"image":if(e.selectors){var r,a,c,l=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type)if(jQuery(l+" img").length)jQuery(l+" img").attr("src",null==e||null===(a=e.value)||void 0===a?void 0:a.image_url);else jQuery(l).find("svg").remove(),jQuery(l).append('<img src="'+(null==e||null===(c=e.value)||void 0===c?void 0:c.image_url)+'" alt="order bump" />');else if(Object(p.isEmpty)(null==e||null===(r=e.value)||void 0===r?void 0:r.custom_url))jQuery(l+" img").attr("src","").attr("srcset","");else{var o,i;if(jQuery(l+" img").length)jQuery(l+" img").attr("src",null==e||null===(o=e.value)||void 0===o?void 0:o.custom_url).attr("srcset","");else jQuery(l).find("svg").remove(),jQuery(l).append('<img src="'+(null==e||null===(i=e.value)||void 0===i?void 0:i.custom_url)+'" alt="order bump" />').attr("srcset","")}}break;default:if(e.selectors&&e.stylekey){var u,s=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,f="".concat(e.stylekey,":").concat(e.value).concat(null!==(u=null==e?void 0:e.styleUnit)&&void 0!==u?u:"",";");-1!==t.search("".concat(s,"{"))?t=t.replace("".concat(s,"{"),"".concat(s,"{").concat(f)):t+="".concat(s,"{").concat(f,"}")}}})),null!=s&&s.current&&(s.current.innerHTML=t)},Y=function(){var e;if(!Object(p.isEmpty)(a)&&!Object(p.isEmpty)(l)){var t,n={};if(null!=a&&null!==(e=a.content)&&void 0!==e&&e[l])(null==a||null===(t=a.content)||void 0===t?void 0:t[l]).forEach((function(e){var t=(null==e?void 0:e.key)||(null==e?void 0:e.id);n[t]=e}));if(null!=a&&a.design)(null==a?void 0:a.design).forEach((function(e){((null==e?void 0:e.fields)||[]).forEach((function(e){var t=(null==e?void 0:e.key)||(null==e?void 0:e.id);n[t]=e}))}));N(n),console.log("fields",n)}},Z=function(e,t,n){return e.map((function(e,a){return Object(r.createElement)(r.Fragment,{key:a},(Object(p.isEmpty)(e.toggler)||X(t,e.toggler,e))&&Object(r.createElement)(P.a,{input:e,formProps:n(e.key),values:t}))}))},X=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var a=0;a<r.length;a++)if(t.value.indexOf(r[a])>-1){n=!0;break}}else r==t.value&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(C.a,{onSubmitCallback:function(e){L(!0);try{d()({path:Object(v.q)("/funnel-".concat(f,"/").concat(b,"/design/save-settings")),method:"POST",data:e}).then((function(t){if(t.success){var n=Object(p.cloneDeep)(w);n.step.additional_tabs[j].values=e,h(f,b,"design",m,n),z(Object(c.__)("Changes Saved","funnel-builder")),L(!1)}else L(!1),z(t.msg)}))}catch(e){console.log(e),L(!1),z(e.message)}},initialValues:u,validate:function(){return{}},onChange:function(e,t){D(t)}},(function(e){var t=e.getInputProps,o=e.values,i=(e.errors,e.handleSubmit);return Object(r.createElement)(r.Fragment,null,function(e,t){var c;if("content"===n){var o,i=null==a||null===(o=a.content)||void 0===o?void 0:o[l];return Object(r.createElement)("div",{style:{padding:"16px 16px 0"}},Z(i,t,e))}var u=null!==(c=a[n])&&void 0!==c?c:[],s=null==u?void 0:u.map((function(n,a){var c;return{label:null==n?void 0:n.label,key:null!==(c=null==n?void 0:n.key)&&void 0!==c?c:a,display:Object(r.createElement)("div",{className:"bwf-form-fields-wrapper"},Z(null==n?void 0:n.fields,t,e))}}));return"tab_form_style"===n?Object(r.createElement)(x.a,{items:s,className:"bwf-accordion bwf-c-s-collapsible__md bwf-step-shortcode-form",handleIcons:"up-down",openedKeys:V,setOpenedKeys:function(e){K(e)}}):Object(r.createElement)(x.a,{items:s,className:"bwf-accordion bwf-c-s-collapsible__md bwf-step-shortcode-form",handleIcons:"up-down",openedKeys:$,setOpenedKeys:function(e){J(e)}})}(t,o),Object(r.createElement)(O.Button,{isPrimary:!0,onClick:i,isBusy:B,disabled:B,className:"bwf-mt-24"},Object(r.createElement)("span",{style:I({},B&&{visibility:"hidden"})},Object(c.__)("Save","funnel-builder")),B&&Object(r.createElement)(T.a,{color:"#ffffff",style:{position:"absolute"}})))})))};function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q=function(e){var t,n=e.additionalTabs,a=e.type,u=e.stepId,s=e.offerId,f=e.addTabIndex,b=L(Object(r.useState)(null),2),d=b[0],m=b[1],O=L(Object(r.useState)(null==n?void 0:n.tabs[0]),2),v=O[0],j=O[1],y=L(Object(r.useState)(!1),2),h=y[0],_=y[1],g=Object(i.b)().showSnackbar;Object(r.useEffect)((function(){"shortcode"===n.content[v.id].type?(m(n.content[v.id].fields),_(!1)):_(!0)}),[v]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-additional-heading"},null==n?void 0:n.heading),n&&n.hasOwnProperty("tabs")&&Object(r.createElement)("div",{className:"bwf-tabs-list"},null==n||null===(t=n.tabs)||void 0===t?void 0:t.map((function(e,t){return Object(r.createElement)("button",{key:t,className:"bwf-tabs-list-button ".concat((null==v?void 0:v.id)===e.id?"active-btn":""),onClick:function(){j(e),"tab_custom_shortcode"===e.id?_(!1):_(!0)}},null==e?void 0:e.name)}))),Object(r.createElement)("div",{className:"bwf-shortcodes"},!h&&Object(p.size)(d)>0&&(null==d?void 0:d.map((function(e,t){return e.heading?Object(r.createElement)("div",{className:"bwf-additional-sub-heading bwf-grid-full",key:t},e.heading):Object(r.createElement)("div",{key:t},Object(r.createElement)("div",{className:"bwf-additional-title bwf-setting-title"},e.label),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==e?void 0:e.value),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(o.a,{toolTipText:Object(c.__)("Copy","funnel-builder")},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return null==e||e.id,t=e.label+" shortcode",n=e.value,(r=document.createElement("textarea")).value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),g(t+" "+Object(c.__)("copied","funnel-builder")),void g(t+" copied");var t,n,r}},Object(r.createElement)(l.a,{icon:"duplicate",width:20,height:20,color:"#82838E"}))))),e.hint&&Object(r.createElement)("span",{className:"bwf-code-copy__hint",dangerouslySetInnerHTML:{__html:e.hint}}))})))),h&&Object(r.createElement)(B,{activeTab:v.id,formFields:null==n?void 0:n.content,initialValues:null==n?void 0:n.values,type:a,stepId:u,offerId:s,addTabIndex:f}))},z=(n(258),n(247)),U=n(244);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=function(e){var t=e.onCloseModal,n=e.onSuccess,l=e.SnackBarMsg,o=Object(a.useParams)().stepId,i=J(Object(r.useState)(!1),2),u=i[0],s=i[1],f=J(Object(r.useState)("text"),2),b=f[0],m=f[1],p=J(Object(r.useState)({label:"",placeholder:"",name:"",cssready:"",field_type:"text",section_type:"advanced",options:"",default:"",enable_time:!1,preferred_time_format:"12",allow_delete:!1,show_custom_field_at_thankyou:!1,show_custom_field_at_email:!1,required:!0,multiselect_maximum:"",multiselect_maximum_error:"You can only select {maximum_number} items"}),2),j=p[0],y=p[1],h=function(){t()};Object(r.useEffect)((function(){j.field_type=b,j.default="checkbox"===b?"1":"";var e=JSON.parse(JSON.stringify(j));y(e)}),[b]);var _=j,g=[{label:"Single Line Text",value:"text",key:"text"},{label:"Checkbox",value:"checkbox",key:"checkbox"},{label:"Radio",value:"wfacp_radio",key:"wfacp_radio"},{label:"HTML",value:"wfacp_wysiwyg",key:"wfacp_wysiwyg"},{label:"Dropdown",value:"select",key:"select"},{label:"Select2",value:"select2",key:"select2"},{label:"Multi Select",value:"multiselect",key:"multiselect"},{label:"Paragraph Text",value:"textarea",key:"textarea"},{label:"Number",value:"number",key:"number"},{label:"Tel",value:"tel",key:"tel"},{label:"Hidden",value:"hidden",key:"hidden"},{label:"Password",value:"password",key:"password"},{label:"Email",value:"email",key:"email"}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:h,title:Object(c.__)("Add New Field","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-field-modal bwf-section-modal"},Object(r.createElement)(z.a,{validate:function(e){var t={};return""!==e.label.trim()&&e.label||(t.label=Object(c.__)("Label is required","funnel-builder")),["text","wfacp_radio","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email"].includes(e.field_type)&&!e.name&&(t.name="Field ID is required"),["wfacp_radio","select","select2","multiselect"].includes(e.field_type)&&!e.options&&(t.options="Options are required"),e.name&&["billing","shipping"].includes(e.name.trim().toLowerCase())&&(t.name=Object(c.sprintf)(Object(c.__)("Field ID contains a reserved term '%s'","funnel-builder"),e.name.trim().toLowerCase())),t},onSubmitCallback:function(e){s(!0),d()({path:Object(v.q)("/funnel-checkout/".concat(o,"/form_fields/add_field")),method:"POST",data:e}).then((function(e){e.success?(s(!1),n(e.data)):(s(!1),l(e.msg||e.message))})).catch((function(e){s(!1),l(e.msg||e.message)}))},initialValues:_,onChange:function(e,t){m(t.field_type)}},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,l=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Field Type","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(U.b,$({},t("field_type"),{options:g})))),["text","wfacp_radio","wfacp_wysiwyg","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(l.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("label",{id:"required"},Object(c.__)("Label","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("label"),{placeholder:Object(c.__)("Type here...","funnel-builder"),autoComplete:"off",required:!0}))),l.label&&a.label&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder"))),["text","wfacp_radio","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(l.name&&a.name?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(c.__)("Field ID (Order Meta Key)","funnel-builder")),Object(r.createElement)(O.TextControl,$({},t("name"),{placeholder:Object(c.__)("Type here...","funnel-builder")}))),l.name&&a.name&&Object(r.createElement)("div",{className:"bwf-error-text"},a.name),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(c.__)("Field ID (Order Meta Key) where value of this field gets stored. Use '_' to seperate in case of multiple words.Example: date_of_birth","funnel-builder"))),["wfacp_radio","select","select2","multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(l.options&&a.options?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(c.__)("Options (|) separated","funnel-builder")),Object(r.createElement)(O.TextControl,$({},t("options"),{placeholder:Object(c.__)("Type here...","funnel-builder")}))),l.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field")),["multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("multiselect_maximum"),{label:Object(c.__)("Max number of selection","funnel-builder"),placeholder:Object(c.__)("Type here...","funnel-builder")})))),["multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("multiselect_maximum_error"),{label:Object(c.__)("Error Message","funnel-builder"),placeholder:Object(c.__)("Type here...","funnel-builder")})))),["text","wfacp_radio","select","textarea","hidden","select2","multiselect","number","tel","password","email"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("default"),{label:Object(c.__)("Default","funnel-builder"),placeholder:Object(c.__)("Type here...","funnel-builder")})))),["text","textarea","select2","number","tel","password","email"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("placeholder"),{label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here...","funnel-builder")})))),["checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(U.b,$({options:[{label:"True",value:"1",key:"1"},{label:"False",value:"0",key:"0"}]},t("default"))))),["text","wfacp_radio","select","textarea","checkbox","wfacp_wysiwyg","select2","multiselect","number","tel","hidden","password","email"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,$({},t("show_custom_field_at_thankyou"),{label:Object(c.__)("Show On Thank You Page","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),["text","wfacp_radio","select","textarea","checkbox","wfacp_wysiwyg","select2","multiselect","number","tel","hidden","password","email"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,$({},t("show_custom_field_at_email"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Show In Order Email","funnel-builder")})))),["text","wfacp_radio","select","textarea","checkbox","select2","multiselect","number","tel","password","email"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,$({},t("required"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Required","funnel-builder")})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.Button,{onClick:h,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(O.Button,{isPrimary:!0,onClick:o,isBusy:u,disabled:u},Object(r.createElement)("span",{style:K({},u&&{visibility:"hidden"})},Object(c.__)("Add","funnel-builder")),u&&Object(r.createElement)(T.a,{color:"#ffffff",style:{position:"absolute"}}))))}))))};function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t=e.onCloseModal,n=e.addedSection,a=Object(r.useRef)(),l=Y(Object(r.useState)(!1),2),o=l[0],i=l[1],u=function(){t()};return Object(r.useEffect)((function(){a.current.focus()}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:u,title:Object(c.__)("Add New Section","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-section-modal"},Object(r.createElement)(z.a,{validate:function(){return{}},onSubmitCallback:function(e){i(!0);var t=e.name.replace(/\s+/g,"-").toLowerCase(),r=t+"".concat(Object(p.size)(t)>0?"-":"")+Math.floor(1e3*Math.random());e.id=r,n(e)},initialValues:{name:"",sub_heading:"",class:"",fields:[],id:""}},(function(e){var t=e.getInputProps,n=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,Q({},t("name"),{label:Object(c.__)("Name","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),autoFocus:!0,autoComplete:"off",ref:a,onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,Q({},t("sub_heading"),{label:Object(c.__)("Sub Heading","funnel-builder"),autoComplete:"off",placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,Q({},t("class"),{label:Object(c.__)("Classes","funnel-builder"),autoComplete:"off",placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons bwf-mt-40"},Object(r.createElement)(O.Button,{onClick:u,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(j.a,{isPrimary:!0,onClick:n,isBusy:o},Object(c.__)("Add","funnel-builder"))))}))))},ee=n(253);function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe=function(e){var t=e.onCloseModal,n=e.updatedField,o=e.fields,i=e.updated,u=e.updatedSectionId,s=e.activeStep,f=e.SnackBarMsg,b=Object(a.useParams)().stepId,m=Object(r.useRef)(),p=ce(Object(r.useState)(!1),2),y=p[0],h=p[1],_=ce(Object(r.useState)(n),2),g=_[0],w=_[1],E=function(){t()};Object(r.useEffect)((function(){var e;null===(e=m.current)||void 0===e||e.focus()}),[]),Object(r.useEffect)((function(){"1"===g.allow_delete||"true"===g.allow_delete?w((function(e){return re(re({},e),{},{allow_delete:!0})})):"0"===g.allow_delete||"false"===g.allow_delete?w((function(e){return re(re({},e),{},{allow_delete:!1})})):"1"===g.coupon_style||"true"===g.coupon_style?w((function(e){return re(re({},e),{},{coupon_style:!0})})):"0"===g.coupon_style||"false"===g.coupon_style?w((function(e){return re(re({},e),{},{coupon_style:!1})})):"1"===g.show_custom_field_at_thankyou||"true"===g.show_custom_field_at_thankyou?w((function(e){return re(re({},e),{},{show_custom_field_at_thankyou:!0})})):"0"===g.show_custom_field_at_thankyou||"false"===g.show_custom_field_at_thankyou?w((function(e){return re(re({},e),{},{show_custom_field_at_thankyou:!1})})):"1"===g.show_custom_field_at_email||"true"===g.show_custom_field_at_email?w((function(e){return re(re({},e),{},{show_custom_field_at_email:!0})})):"0"===g.show_custom_field_at_email||"false"===g.show_custom_field_at_email?w((function(e){return re(re({},e),{},{show_custom_field_at_email:!1})})):"1"===g.required||"true"===g.required?w((function(e){return re(re({},e),{},{required:!0})})):"0"!==g.required&&"false"!==g.required||w((function(e){return re(re({},e),{},{required:!1})}))}),[g]);var S=g,N=function(e){var t,n;h(!0),o.fieldsets[s][u].fields=null===(t=o.fieldsets[s][u])||void 0===t||null===(n=t.fields)||void 0===n?void 0:n.map((function(t){return t.id===e.id?e:t}));try{d()({path:Object(v.q)("/funnel-checkout/".concat(b,"/form_fields")),method:"POST",data:o}).then((function(e){e.success?i(o):f(Object(c.__)("Something went wrong, Please contact to support team","funnel-builder"))}))}catch(e){f(e.message||e.msg)}};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:E,shouldCloseOnClickOutside:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-modal-edit-page bwf-fields-update-field-modal bwf-section-modal bwf-admin-modal-no-header",isDismissible:!1},Object(r.createElement)(z.a,{validate:function(e){var t={};return["radios","select","select2","multiselect","wfacp_radio"].includes(e.type)&&!e.options&&(t.options=Object(c.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){N(e)},initialValues:S},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,o=e.touched,i=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(c.__)("Field","funnel-builder")," -"," ","wfop_wysiwyg"!==n.type&&"html"!==n.type&&"wfacp_wysiwyg"!==n.type?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.data_label," "),Object(r.createElement)("span",null,"(",Object(c.__)("Field ID : ","funnel-builder")," ",n.id,")")):Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.data_label," ")),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(c.__)("Close","funnel-builder"),onClick:E},Object(r.createElement)(l.a,{icon:"close",size:20}))),(["text","radios","wfacp_radio","html","select","textarea","checkbox","hidden","email","wfop_wysiwyg","tel","select2","multiselect","number","password","wfacp_wysiwyg","wfacp_html"].includes(n.type)||["shipping_calculator","order_coupon","order_summary","order_total","_bwf_dob"].includes(n.id))&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(o.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({},t("label"),{label:Object(c.__)("Label","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)},placeholder:Object(c.__)("Type here…","funnel-builder"),autoFocus:!0,autoComplete:"off",ref:m})),("wfop_wysiwyg"===n.type||"html"===n.type||"wfacp_wysiwyg"===n.type||"_bwf_dob"===n.id)&&Object(r.createElement)("small",null,Object(r.createElement)("strong",null,Object(r.createElement)("i",null,Object(c.__)("This label is for admin purpose only, won't appear on the checkout form.","funnel-builder")))))),"_bwf_dob"===n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({},t("_bwf_dob"),{label:Object(c.__)("Minimum Age","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["radios","wfacp_radio","select","select2","multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(o.options&&a.options?"bwf-validation":"")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(c.__)("Options (|) separated","funnel-builder")),Object(r.createElement)(O.TextControl,te({placeholder:Object(c.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"))),o.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["order_coupon"].includes(n.id)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({label:Object(c.__)("Success message","funnel-builder")},t("coupon_success_message_heading"),{placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})),"order_coupon"===n.id&&Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(c.__)("Use merge tags to display Coupon Code: {{coupon_code}} & Coupon Value: {{coupon_value}} in success message","funnel-builder")))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("coupon_style"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Make coupon field a clickable link","funnel-builder")}))))),(["text","textarea","email","tel","select2","number","password"].includes(n.type)||["shipping_calculator"].includes(n.id))&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({},t("placeholder"),{label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})),"shipping_calculator"===n.id&&Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(c.__)("Enter the default text for shipping method","funnel-builder")))),["multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({},t("multiselect_maximum"),{label:Object(c.__)("Max number of selection","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder")})))),["multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({},t("multiselect_maximum_error"),{label:Object(c.__)("Error Message","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder")})))),["radios","wfacp_radio","select","textarea","hidden","select2","text","multiselect","number","tel","password","email"].includes(n.type)&&!["billing_first_name","billing_last_name","billing_phone","shipping_phone","billing_email"].includes(n.id)&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({label:Object(c.__)("Default","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder")},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["checkbox"].includes(n.type)&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(U.b,te({options:[{label:Object(c.__)("True","funnel-builder"),value:"1",key:"1"},{label:Object(c.__)("False","funnel-builder"),value:"0",key:"0"}]},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),"shipping_calculator"===n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder")},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["wfop_wysiwyg","html","wfacp_wysiwyg"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(ee.a,te({},t("default"),{toolbar:"bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",quicktags:!0})))),["order_summary"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("allow_delete"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Enable Product Deletion","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(c.__)("Enable this to show delete icon below item subtotal","funnel-builder")))),["order_total"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("default"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Detailed Summary","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(c.__)("Enable this to show detailed summary including Subtotal, Coupon, Fees, Shipping and Taxes whichever are applicable.","funnel-builder")))),n.is_wfacp_field&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("show_custom_field_at_thankyou"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Show On Thank You Page","funnel-builder")})))),n.is_wfacp_field&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("show_custom_field_at_email"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Show In Order Email","funnel-builder")})))),["text","radios","wfacp_radio","select","textarea","checkbox","email","tel","select2","multiselect","number","password"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("required"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Required","funnel-builder")})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.Button,{onClick:E,className:"bwf-modal-cancel-btn",disabled:y},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(j.a,{isPrimary:!0,disabled:y,isBusy:y,onClick:i},Object(c.__)("Update","funnel-builder"))))}))))},ie=(n(280),n(14)),ue=n(25),se=n(77),fe=n(248),be=n(84),de=n(37),me=n(7),pe=n.n(me);function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ve(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){if(e){if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _e=function(e){var t=Object(a.useParams)(),n=t.stepId,o=(t.id,window.location&&window.location.search?Object(ue.parse)(window.location.search.substring(1)):{}),i=e.onCloseModal,u=e.productData,s=e.onChange,f=e.addToCartSettings,b=je(Object(r.useState)("general"),2),d=b[0],m=b[1],y=je(Object(r.useState)([]),2),h=y[0],_=y[1],g=je(Object(r.useState)(""),2),w=g[0],E=g[1],S=je(Object(r.useState)(""),2),N=S[0],k=S[1],P=je(Object(r.useState)(""),2),x=P[0],T=P[1],A=je(Object(r.useState)(""),2),I=A[0],D=A[1],F=je(Object(r.useState)(""),2),R=F[0],B=F[1],L=je(Object(r.useState)(""),2),M=L[0],q=L[1],z=je(Object(r.useState)(""),2),V=z[0],K=z[1],H=je(Object(r.useState)(""),2),$=H[0],J=H[1],G=je(Object(r.useState)(""),2),W=G[0],Q=G[1],Y=je(Object(r.useState)(""),2),Z=Y[0],X=Y[1],te=je(Object(r.useState)([]),2),ne=te[0],re=te[1],ae=je(Object(r.useState)({}),2),ce=ae[0],le=ae[1],oe=je(Object(r.useState)(""),2),me=oe[0],ye=oe[1],he=je(Object(r.useState)([]),2),_e=he[0],we=he[1],Ee=je(Object(r.useState)(""),2),Se=Ee[0],Ne=Ee[1],ke=je(Object(r.useState)(!1),2),Ce=ke[0],Pe=ke[1],xe=function(){i()};Object(r.useEffect)((function(){0!==u.products.length&&(_(u.default_products),re(null==u?void 0:u.products),le(null==u?void 0:u.settings),E(u.settings.enable_delete_item),k(u.settings.enable_custom_name_in_order_summary),T(u.settings.is_hide_additional_information),D(u.settings.additional_information_title),B(u.settings.hide_best_value),q(u.settings.hide_quantity_switcher),K(u.settings.hide_quick_view),J(u.settings.hide_product_image),Q(u.settings.best_value_text),X(u.settings.best_value_position),Ne(u.settings.best_value_product))}),[u]),Object(r.useEffect)((function(){if(Object(p.size)(ne)>0){var e=ne.map((function(e){return{label:e.title,value:e.key,key:e.key}}));we([].concat([{label:"Select Product",value:"",key:""}],ve(e)))}}),[ne]);var Te={label:u.label},Ae=Object(be.a)({containerClass:"#product_switching .bwf-step-menu-header .bwfan_navigation",selectedClass:".bwfan_navigation_active",orientation:"horizontal"}).switchTab,Ie=[{type:"general",id:"general",label:Object(c.__)("General","funnel-builder")},{type:"description",id:"description",label:Object(c.__)("Description","funnel-builder")},{type:"advanced",id:"advanced",label:Object(c.__)("Advanced","funnel-builder")}];return Object(r.useEffect)((function(){var e,t;Ae((e=d,t=0,Ie.map((function(n,r){n.id===e&&(t=r)})),t))}),[d]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-xl bwf-modal-edit-page  bwf-edit-product-modal"},Object(r.createElement)("div",{className:"sections bwf-product-field"},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(c.__)("Edit Field","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(c.__)("Close","funnel-builder"),onClick:function(){return xe()}},Object(r.createElement)(l.a,{icon:"close",size:20})))),Object(r.createElement)("div",{className:"wfacp_product_swicther_field_wrap"},Object(r.createElement)("div",{id:"product_switching"},Object(r.createElement)("div",{className:"wfacp_tabs"},0===u.products.length&&Object(r.createElement)("div",{className:"bwf-welcome-card"},Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"wfacp_welc_icon"},Object(r.createElement)("span",{className:"bwf-product-h"}," ",Object(c.__)("Oops! no products found","funnel-builder")," ")),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"bwf-product-p"},Object(c.__)("To edit this field please add atleast one product","funnel-builder")," "),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"wfacp_btns_welcome_card"},Object(r.createElement)(O.Button,{isPrimary:!0,onClick:function(){return Object(ie.k)({},"".concat(Object(v.Z)()?"/store-checkout/checkout":"/funnel-checkout","/").concat(n,"/products"),o)}},Object(c.__)(" Add Product ","funnel-builder")),Object(r.createElement)("div",{className:"wfacp_clear_20"}),Object(r.createElement)("div",{className:"wfacp_clear_20"}))),0!==u.products.length&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwfan_header bwfan__step-header"},Object(r.createElement)("div",{className:"bwfan_header_l2 bwf-step-menu-header"},Object(r.createElement)("div",{className:"bwfan_header_l"},Object(r.createElement)("div",{className:"bwfan_navigation"},Ie.map((function(e,t){return Object(r.createElement)("a",{className:pe()("bwf-cursor-pointer",{bwfan_navigation_active:d===e.id}),onClick:function(){"general"===e.id&&m("general"),"description"===e.id&&m("description"),"advanced"===e.id&&m("advanced")},key:t},e.label)})),Object(r.createElement)("div",{className:"bwf-nav-indicator"}))))),Object(r.createElement)(C.a,{validate:function(e){var t={};return ye(""),""===e.label.trim()&&(t.label="",ye("Label is required")),e.label||(t.label="",ye("Label is required")),t},onSubmitCallback:function(e){!function(e){Pe(!0),ce.enable_delete_item=w,ce.enable_custom_name_in_order_summary=N,ce.enable_custom_name_in_order_summary=N,ce.is_hide_additional_information=x,ce.additional_information_title=I,ce.additional_information_title=I,ce.hide_best_value=R,ce.hide_quantity_switcher=M,ce.hide_quick_view=V,ce.hide_product_image=$,ce.best_value_text=W,ce.best_value_position=Z,ce.best_value_product=Se,le(ce);var t={default_products:h,settings:ce,products:ne,label:e.label};s(t)}(e)},initialValues:Te},(function(e){var t=e.getInputProps,n=e.values,a=(e.errors,e.touched),l=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,me&&a.label&&Object(r.createElement)("div",{className:"bwf-validate-product"},Object(r.createElement)(se.a,{errorMessage:me}),Object(r.createElement)("div",{className:"bwf_clear_10"})),"general"===d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field bwf-mt-16"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(c.__)("Label","funnel-builder")),Object(r.createElement)(O.TextControl,Oe({},t("label"),{onKeyPress:function(e){"Enter"===e.key&&l(n)},placeholder:Object(c.__)("Label","funnel-builder"),className:"bwf-product-validation-text",autoComplete:"off"})))),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-general-product bwf-product-header bwf-mt-24 ".concat("1"!==f?"":"bwf-no-value")},"1"!==f&&Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Title","funnel-builder")))),null==ne?void 0:ne.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-general-product bwf-product-end ".concat("1"!==f?"":"bwf-no-value"),key:t},"2"===f&&Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("input",{type:"radio",value:e.key,checked:h.includes(e.key),onChange:function(e){return _([e.target.value])},className:"components-radio-control__input ".concat(h===e.key?"active":"")})),"3"===f&&Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)(fe.a,{checked:h.includes(e.key),onChange:function(t){return function(e,t){if(e)_([].concat(ve(h),[t]));else{var n=h.filter((function(e){return e!==t}));_(n)}}(t,e.key)}})),Object(r.createElement)("div",{className:"bwf-flex"},Object(de.decodeEntities)(e.old_title)),Object(r.createElement)("div",{className:"bwf-product-title"},Object(r.createElement)("input",{type:"text",defaultValue:e.title,placeholder:"Title",onChange:function(t){return function(e,t){ne.map((function(n){n.key===e&&(n.title=t.target.value)}));var n=JSON.parse(JSON.stringify(ne));re(n)}(e.key,t)},className:"bwf-h-36"}),Object(r.createElement)("input",{type:"text",defaultValue:e.you_save_text,placeholder:"You Save Text",onChange:function(t){return function(e,t){ne.map((function(n){n.key===e&&(n.you_save_text=t.target.value)}));var n=JSON.parse(JSON.stringify(ne));re(n)}(e.key,t)},className:"bwf-h-36"})))})),Object(r.createElement)("div",{className:"bwf-product-desc field-wrap"},Object(r.createElement)("label",{type:"description"},Object(c.__)("Merge Tags","funnel-builder")+": {{quantity}}, {{saving_value}}, {{saving_percentage}} and {{unit_price}}")),Object(r.createElement)("div",{className:"wfacp_ps_conditional_wrap bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:w,onChange:function(){return E(!w)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Enable Product Deletion","funnel-builder")})),Object(r.createElement)("div",{className:"wfacp_product_switcher_delete_options bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:N,onChange:function(){return k(!N)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Enable Custom Product Name In Order Details","funnel-builder")})),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"description"},Object(c.__)("This option will allow you to view the product custom name on Thank you page, Customer Email & Admin Order Detail page","funnel-builder"))))))),"description"===d&&Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-display-flex_column bwf-mt-16"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"description"},Object(c.__)("Use this section to show per product custom description when the product is selected.","funnel-builder"),Object(r.createElement)("br",null),Object(c.__)("Note: This feature will work if you are using product specific order forms.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-product-form-field bwf-mt-24"},Object(r.createElement)(O.ToggleControl,{checked:x,onChange:function(){return T(!x)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Hide Custom Product Description","funnel-builder")})),Object(r.createElement)("div",{className:"form-group bwf-display-flex_column field-wrap"},Object(r.createElement)("label",{type:"text"},Object(c.__)("Title","funnel-builder")),Object(r.createElement)("input",{type:"text",value:I,className:"bwf-h-36",onChange:function(e){return D(e.target.value)}}))),Object(r.createElement)("div",{className:"bwf-product-textarea bwf-product-header bwf-mt-24"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Custom Details","funnel-builder")))),null==ne?void 0:ne.map((function(e,t){return Object(r.createElement)("div",{key:t},Object(r.createElement)("div",{className:"bwf-product-textarea"},Object(r.createElement)("div",{className:"bwf-flex"},null==e?void 0:e.title),Object(r.createElement)("div",{className:"form-group bwf_w_full"},Object(r.createElement)(ee.a,{keyid:"".concat(e.key).concat(Math.floor(100*Math.random())),content:e.whats_included,value:e.whats_included,onChange:function(t){return function(e,t){ne.map((function(n){n.key===e&&(n.whats_included=t)}));var n=JSON.parse(JSON.stringify(ne));re(n)}(e.key,t)},toolbar:"bold,italic, underline,bullist,numlist,link",quicktags:!0}))))}))),"advanced"===d&&Object(r.createElement)("div",{className:"bwf-display-flex_column bwf-mt-16"},Object(r.createElement)("div",{className:"pro_mb"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Best Value Tag","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:R,onChange:function(){return B(!R)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Hide Best Value Tag","funnel-builder")}))),!R&&Object(r.createElement)("div",{className:"bwf-product-advanced"},Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(c.__)("Apply on Product","funnel-builder")),Object(r.createElement)(U.b,{options:_e,selected:Se,onChange:function(e){Ne(e)}})),Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(c.__)("Label","funnel-builder")),Object(r.createElement)("input",{type:"text",placeholder:"Best Value Product",className:"bwf-h-36",value:W,onChange:function(e){return Q(e.target.value)}})),Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(c.__)("Position","funnel-builder")),Object(r.createElement)(U.b,{options:ge,selected:Z,onChange:function(e){X(e)}}))),Object(r.createElement)("div",{className:"pro_checkbox_wrap pro_mb bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Other","funnel-builder"))),Object(r.createElement)("div",{className:"form-group bwf-section-field bwf-products-other-detail"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:M,onChange:function(){return q(!M)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Hide Quantity Incrementor","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:V,onChange:function(){return K(!V)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Hide Quick View","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:$,onChange:function(){return J(!$)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Hide Product Image","funnel-builder")}))))),Object(r.createElement)("div",{className:"bwf-product-modal-footer"},Object(r.createElement)(O.Button,{onClick:xe,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(j.a,{isPrimary:!0,isBusy:Ce,onClick:l},Object(c.__)("Update","funnel-builder"))))})))))))))},ge=[{label:"Default",value:"",key:""},{label:"Above product title",value:"above",key:"above"},{label:"Below product title",value:"below",key:"below"},{label:"Top left corner",value:"top_left_corner",key:"top_left_corner"},{label:"Top Right corner",value:"top_right_corner",key:"top_right_corner"}],we=n(267),Ee=n(273);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){if(e){if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ae=Object(we.c)((function(){return Object(r.createElement)("span",{title:"Click here and start drag and drop",style:{cursor:"move"}},Object(r.createElement)(l.a,{icon:"ul",size:"20"}))})),Ie=function(e){var t=e.index,n=e.data,a=e.setFieldId,o=e.setShowContent,i=e.changeVisibility,u=e.fieldId,s=e.showContent,f=e.changePlaceholder,b=e.changeLabel,d=e.changeRequired,m=e.sortable,v=void 0===m||m;return Object(r.createElement)("div",{key:t,"data-key":"first_name",className:"bwf_address_field bwf_sortable_address_field"},Object(r.createElement)("div",{className:pe()("bwf_billing_accordion_inner",{"is-opened":u===n.key&&s}),onClick:function(){a(n.key),n.key===u?o(!s):(a(n.key),o(!0))}},Object(r.createElement)("div",{className:"accordion_left"},v&&Object(r.createElement)(Ae,null),Object(r.createElement)("div",{className:"accordion_heading"},n.data_label),n.key.includes("same_as")?null:Object(r.createElement)("div",{className:"bwf_hint_small"},"(",Object(c.__)("Field ID: ","funnel-builder"),n.key,")")),Object(r.createElement)("div",{className:"accordion_right"},Object(r.createElement)("span",{onClick:function(e){e.stopPropagation(),i(n.key)}},Object(r.createElement)(l.a,{icon:null!=n&&n.status?"eye":"eye-close",size:24})),Object(r.createElement)(l.a,{icon:"angle-down",size:24})),Object(r.createElement)("div",{className:"bwf_billing_clear"}),!Object(p.isEmpty)(n.configuration_message)&&Object(r.createElement)("div",{className:"bwf_misconfiguration_field"},n.configuration_message)),Object(r.createElement)("div",{className:pe()("bwf_billing_accordion_content form-group",{"bwf-display-block":u===n.key&&s})},Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"bwf_billing_right"},Object(r.createElement)(O.TextControl,{label:Object(c.__)("Label","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),className:"form-control bwf_label",value:n.label||"",onChange:function(e){return b(n.key,e)}}))),!n.key.includes("same_as")&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"bwf_billing_right"},Object(r.createElement)(O.TextControl,{label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),className:"form-control bwf_placeholder",value:n.placeholder||"",onChange:function(e){return f(n.key,e)}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,{checked:!!n.required,onChange:function(){return d(n.key)},type:"checkbox",className:"bwf-tooglecontrol-advance",label:Object(c.__)("Required","funnel-builder")}))))))},De=Object(we.b)(Ie),Fe=Object(we.a)((function(e){var t=e.onChange,n=e.address,a=e.setAddress,l=e.onPopupClose,o=e.lastItems,i=e.setLastItems,u=Pe(Object(r.useState)(""),2),s=u[0],f=u[1],b=Pe(Object(r.useState)(!1),2),d=b[0],m=b[1],p=Pe(Object(r.useState)(!1),2),v=p[0],y=p[1],h=function(e,t){a((function(n){return n.map((function(n){return n.key===e?Ne(Ne({},n),{},{label:t}):n}))}))},_=function(e,t){a((function(n){return n.map((function(n){return n.key===e?Ne(Ne({},n),{},{placeholder:t}):n}))}))},g=function(e){"billing_same_as_shipping"===e||"shipping_same_as_billing"===e?i((function(t){return t.map((function(t){return t.key===e?Ne(Ne({},t),{},{status:!t.status}):t}))})):a((function(t){return t.map((function(t){return t.key===e?Ne(Ne({},t),{},{status:!t.status}):t}))}))},w=function(e){a((function(t){return t.map((function(t){return t.key===e?Ne(Ne({},t),{},{required:!t.required}):t}))}))};return Object(r.createElement)("div",{id:"bwf_address_field_address","data-address-type":"address",className:"bwf_accordion bwf_address_sortable_area ui-sortable"},n.map((function(e,t){return Object(r.createElement)(De,{key:"bwf-address-field-sort-".concat(t),data:e,index:t,setFieldId:f,setShowContent:m,changeVisibility:g,fieldId:s,showContent:d,changePlaceholder:_,changeLabel:h,changeRequired:w})})),o&&o.map((function(e,t){return Object(r.createElement)(Ie,{key:"bwf-address-field-".concat(t),data:e,index:t,setFieldId:f,setShowContent:m,changeVisibility:g,fieldId:s,showContent:d,changePlaceholder:_,changeLabel:h,changeRequired:w,sortable:!1})})),Object(r.createElement)("div",{className:"bwf-admin-modal-footer wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.Button,{onClick:l,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(j.a,{isPrimary:!0,isBusy:v,onClick:function(){y(!0),t([].concat(Ce(n),Ce(o)))}},Object(c.__)("Update","funnel-builder"))))})),Re=function(e){var t=e.onCloseModal,n=e.addressType,a=e.addressData,l=e.onChange,o=Pe(Object(r.useState)([]),2),i=o[0],u=o[1],s=Pe(Object(r.useState)([]),2),f=s[0],b=s[1],d=function(){t()};Object(r.useEffect)((function(){u(a.filter((function(e){return"billing_same_as_shipping"!==e.key&&"shipping_same_as_billing"!==e.key}))),b(a.filter((function(e){return"billing_same_as_shipping"===e.key||"shipping_same_as_billing"===e.key})))}),[]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:d,shouldCloseOnClickOutside:!1,isDismissible:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-modal-edit-page bwf-fields-edit-field-modal bwf-section-modal bwf-admin-modal-no-header"},Object(r.createElement)(Ee.a,{title:Object(r.createElement)(r.Fragment,null,Object(c.__)("Field","funnel-builder")," -"," ","".concat(n," Address")),onClose:d}),Object(r.createElement)("div",{className:"sections"},Object(r.createElement)("div",{className:"bwf_vue_forms"},Object(r.createElement)("div",{className:"bwf_without_form_generator "},Object(r.createElement)("div",{className:"bwf_billing"},Object(r.createElement)(Fe,{onPopupClose:d,addressData:a,onChange:l,helperClass:"bwf-address-item__helper-class",useDragHandle:!0,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;u((function(e){return Object(we.d)(e,t,n)}))},address:i,setAddress:u,setLastItems:b,lastItems:f})))))))},Be=(n(367),function(e){var t=e.onRequestClose,n=e.desc,a=void 0===n?"":n;return Object(r.createElement)(O.Modal,{title:Object(c.__)("Alert!","funnel-builder"),className:"bwf-validation-modal bwf-admin-modal bwf-admin-modal-small bwf-c-s-delete-model",onRequestClose:t},Object(r.createElement)("div",{className:"bwf-validation-desc bwf-modal-error bwf-modal-content"},a),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(j.a,{isPrimary:!0,onClick:t},Object(c.__)("Close","funnel-builder"))))}),Le=n(263);function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var qe=function(e){var t=e.list,n=e.fieldIndex,a=e.sectionIndex,o=e.editField,i=e.onDeleteField;return Object(r.createElement)(Le.b,{draggableId:t.id?JSON.stringify(t.id):"field-list-".concat(n),key:t.id,index:n},(function(e){return Object(r.createElement)("div",Me({ref:e.innerRef,key:t.id},e.draggableProps,e.dragHandleProps,{className:"bwf_save_btn_style bwf_item_drag ui - sortable - handle bwf - width - auto",onClick:function(){return o(t,a)}}),Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==t?void 0:t.data_label),t.hasOwnProperty("id")&&"billing_email"!==t.id?Object(r.createElement)("span",{className:"bwf_remove_fields",onClick:function(e){i(t,a),e.stopPropagation()}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:16,height:16})):Object(r.createElement)("span",{className:"bwf-ml-4"}),Object(r.createElement)("span",{className:"bwf_tooltip"},Object(c.__)("Click to edit. Drag to re-order.","funnel-builder")))}))};var ze=function(e){var t=e.data,n=e.sectionIndex,a=e.editField,l=e.onDeleteField;return Object(r.createElement)(Le.c,{droppableId:"droppableVM-".concat(t.id),type:"droppableVM",direction:"horizontal"},(function(e){return Object(r.createElement)("div",null,Object(r.createElement)("div",{ref:e.innerRef,className:"bwf_template_field_container single_step ui-sortable"},t.hasOwnProperty("fields")&&Object(p.isArray)(t.fields)&&t.fields.length>0?null==t?void 0:t.fields.map((function(e,t){return Object(r.createElement)(qe,{list:e,fieldIndex:t,sectionIndex:n,editField:a,onDeleteField:l,key:t})})):Object(r.createElement)("span",null,Object(c.__)("Drag new fields here to populate the section","funnel-builder"))),e.placeholder)}))};function Ue(){return(Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ge=function(e){var t=e.data,n=e.index,a=e.editSection,o=e.deleteSection,i=e.editField,u=e.onDeleteField,s=e.onDropFields,f=$e(Object(r.useState)(),2),b=f[0],d=f[1],O=$e(Object(r.useState)({}),2),v=O[0],j=O[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Le.b,{draggableId:(null==t?void 0:t.id)||"section-".concat(n),key:null==t?void 0:t.id,index:n},(function(e){return Object(r.createElement)("div",{key:null==t?void 0:t.id},Object(r.createElement)("div",Ue({ref:e.innerRef},e.draggableProps,{key:n,className:"bwf_field_container ui-sortable-handle",onDrop:function(e){s(e,b)},onDragEnter:function(e){d(n)},onDragOver:function(e){e.preventDefault()}}),Object(r.createElement)("div",{className:"bwf_fields_border_div"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("span",e.dragHandleProps,Object(r.createElement)("span",{title:"Click here and start drag and drop",className:"bwf-cursor-move"},Object(r.createElement)(l.a,{icon:"ul",size:"16"}))),Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("span",{className:"bwf-section-name"},null==t?void 0:t.name),Object(r.createElement)("span",{className:"bwf-section-heading ".concat(Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"bwf-section-dash")},Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"-"),Object(r.createElement)("span",{className:"bwf-section-heading ".concat(Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"bwf-section-dash")},null==t?void 0:t.sub_heading)),Object(r.createElement)("span",{className:"bwf-cursor-pointer",onClick:function(){return a(t,n)}},Object(r.createElement)(l.a,{icon:"edit",color:"#82838E",size:16}))),Object(r.createElement)("div",{className:"bwf_field_container_action"},Object(r.createElement)("span",{className:"bwf-cursor-pointer",onClick:function(){var e,a,l;e=null==t?void 0:t.name,a=n,l={modalTitle:Object(c.__)("Remove Section","funnel-builder"),content:Object(r.createElement)(r.Fragment,null,Object(c.__)("You are about to remove ","funnel-builder"),Object(r.createElement)("b",null,e),Object(c.__)(". This action cannot be undone. Cancel to stop, Remove to proceed.","funnel-builder")),cancelButtonText:Object(c.__)("Cancel","funnel-builder"),confirmButtonText:Object(c.__)("Remove","funnel-builder"),confirmButtonClass:"is-danger",status:!0},j(Ke(Ke({},l),{},{onConfirm:function(){o(a),j({status:!1})}}))}},Object(r.createElement)(l.a,{icon:"trash",color:"#82838E",size:18})))),Object(r.createElement)(ze,{data:t,sectionIndex:n,editField:i,onDeleteField:u}))))})),Object(r.createElement)(m.a,{isLoading:v.loading,successMessage:v.success,errorMessage:v.error,isOpen:v.status,autoHide:8e3,closeIcon:!0,content:v.content,confirmText:v.confirmText,confirmButtonText:v.confirmButtonText,confirmButtonClass:v.confirmButtonClass,cancelButtonText:v.cancelButtonText,onConfirm:v.onConfirm,onCancel:v.onCancel,modalTitle:v.modalTitle,disableConfirm:v.disableConfirm,onRequestClose:function(){return j({status:!1})}}))};function We(){return(We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qe(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){if(e){if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rt=function(e,t,n){var r=Array.from(e),a=et(r.splice(t,1),1)[0];return r.splice(n,0,a),r},at=function(e){var t=e.step,n=e.fieldsStep,a=e.setIsAddSection,l=e.onDeleteField,o=e.deleteSection,i=e.editSection,u=e.editField,s=e.updateStepField,f=e.onDropFields,b=e.activeStep,d=n[Object(p.size)(n)-1];return Object(r.createElement)("div",{"data-slug":"third_step",className:"single_step_template"},Object(r.createElement)("div",{className:"bwf_sections_holder third_step ui-sortable"},Object(r.createElement)(Le.a,{onDragEnd:function(e){var n=e.source,r=e.destination;if(e.destination)if("droppableStep"===e.type){var a=rt(t,e.source.index,e.destination.index);s(a)}else if("droppableVM"===e.type){var c,l=n.droppableId.substring(n.droppableId.indexOf("-")+1),o=r.droppableId.substring(r.droppableId.indexOf("-")+1),i=t.filter((function(e){return e.id===l})),u=t.filter((function(e){return e.id===o})),f=rt(null===(c=i[0])||void 0===c?void 0:c.fields,e.source.index,e.destination.index);if(l===o){var b=t.map((function(e){return e.id===l?Ze(Ze({},e),{},{fields:f}):e}));s(b)}else{var d,m,p=Qe(null===(d=i[0])||void 0===d?void 0:d.fields),O=Qe(null===(m=u[0])||void 0===m?void 0:m.fields),v=et(p.splice(e.source.index,1),1)[0];O.splice(e.destination.index,0,v);var j=t.map((function(e){return e.id===l?Ze(Ze({},e),{},{fields:p}):e.id===o?Ze(Ze({},e),{},{fields:O}):e}));s(j)}}}},Object(r.createElement)(Le.c,{droppableId:"droppable",type:"droppableStep"},(function(e){return Object(r.createElement)("div",null,Object(r.createElement)("div",We({ref:e.innerRef},e.droppableProps),t.map((function(e,t){return Object(r.createElement)(Ge,{data:e,key:t,index:t,editSection:i,deleteSection:o,editField:u,onDeleteField:l,onDropFields:f})}))),e.placeholder)})))),d===b&&Object(r.createElement)("div",{className:"bwf_form_note_sec bwf_field_container bwf-mb-16"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("h4",{className:"bwf-form-field-heading"},Object(c.__)("Payment Gateways","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_template_field_container"},Object(r.createElement)("span",null,Object(c.__)("Note: Payment Information containing gateways will be automatically added to the end of order form.","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_input_fields_btn"},Object(r.createElement)(O.Button,{isSecondary:!0,onClick:function(){return a(!0)}},Object(c.__)("Add New Section","funnel-builder"))))};function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var it=function(e){var t=e.onCloseModal,n=e.editData,a=e.editId,l=e.editSection,o=lt(Object(r.useState)({name:"",sub_heading:"",class:"",fields:[],id:""}),2),i=o[0],u=o[1],s=Object(r.useRef)(),f=lt(Object(r.useState)(!1),2),b=f[0],d=f[1];Object(r.useEffect)((function(){u(n)}),[n]);var m=function(){t()};Object(r.useEffect)((function(){s.current.focus()}),[]);var p=i;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:m,title:Object(c.__)("Edit Section","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-section-modal"},Object(r.createElement)(z.a,{validate:function(){return{}},onSubmitCallback:function(e){d(!0),l(e,a)},initialValues:p},(function(e){var t=e.getInputProps,n=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,ct({},t("name"),{label:Object(c.__)("Name","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()},ref:s}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,ct({},t("sub_heading"),{label:Object(c.__)("Sub Heading","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,ct({},t("class"),{label:Object(c.__)("Classes","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons bwf-mt-40"},Object(r.createElement)(O.Button,{onClick:m,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(j.a,{isPrimary:!0,isBusy:b,onClick:n},Object(c.__)("Update","funnel-builder"))))}))))},ut=n(60);function st(e){return function(e){if(Array.isArray(e))return ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bt=function(e){var t=e.selectors,n=void 0===t?[7,1,5]:t,a=e.sectionCount,c=void 0===a?3:a,l=e.staticSection,o=void 0===l||l,i=e.addSection,u=void 0===i||i,s=e.steps,f=void 0===s||s;return Object(r.createElement)("div",{className:"bwf-design-form"},Object(r.createElement)("div",{className:"bwf-form-title bwf-placeholder-temp bwf-h-28 bwf-w-180 bwf_display_block"}),Object(r.createElement)("div",{className:"bwf-form-description bwf-placeholder-temp bwf-h-20 bwf-w-400 bwf-mt-8"}),Object(r.createElement)("div",{id:"bwf_fields_layout_container"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},f?Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("div",{className:"bwf_template_tabs_container"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-240 bwf-h-30 bwf-rounded-3 bwf-border-1"}))):Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-20"}))),Object(r.createElement)("div",{className:"single_step_template"},st(Array(c)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf_field_container",key:"bwf_field_container__placeholder-".concat(t)},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20 "})),Object(r.createElement)("div",{className:"bwf_field_container_action"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 "}))),Object(r.createElement)("div",{className:"bwf_template_field_container"},st(Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-rounded-3 bwf-border-1",key:"bwf-drag-item-".concat(t)})}))))})),o&&Object(r.createElement)("div",{className:"bwf_field_container"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20 "}))),Object(r.createElement)("div",{className:"bwf_template_field_container"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-400 bwf-h-16 "}))),u&&Object(r.createElement)("div",{className:"bwf_input_fields_btn"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-36 bwf-rounded-3 bwf-border-1"})))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in bwf-h-30"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-40 bwf-h-18 "}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-18 "}))),n.map((function(e,t){return Object(r.createElement)("div",{className:"bwf_input_fields",key:"bwf_input_fields__placeholder-".concat(t)},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-18 "}),Object(r.createElement)("div",{className:"bwf_input_fields_list"},st(Array(e)).map((function(e,n){return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-30 bwf-rounded-3 bwf-border-1",key:"bwf-selector-drag-item__placeholder-".concat(t,"-").concat(n)})})))))}))))),Object(r.createElement)("div",{className:"bwf_form_submit bwf-mt-24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-36 bwf-rounded-3 bwf-border-1"})))},dt=n(26),mt=n(32);function pt(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function Ot(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){pt(c,r,a,l,o,"next",e)}function o(e){pt(c,r,a,l,o,"throw",e)}l(void 0)}))}}function vt(e){return function(e){if(Array.isArray(e))return wt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||gt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){if(e){if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Et=function(e){var t=e.type,n=e.stepId,a=e.tab,o=e.offerId,u=Object(i.a)("ck").isProFeatureLocked,s=Object(i.b)().showSnackbar,f=_t(Object(r.useState)(),2),b=f[0],O=f[1],h=_t(Object(r.useState)(),2),_=h[0],w=h[1],E=_t(Object(r.useState)(),2),S=E[0],N=E[1],k=_t(Object(r.useState)(!1),2),C=k[0],P=k[1],x=_t(Object(r.useState)(!1),2),T=x[0],A=x[1],I=_t(Object(r.useState)(!1),2),D=I[0],F=I[1],R=_t(Object(r.useState)(!1),2),B=R[0],L=R[1],M=_t(Object(r.useState)(""),2),q=M[0],z=M[1],U=_t(Object(r.useState)(!1),2),V=U[0],K=U[1],H=_t(Object(r.useState)({}),2),$=H[0],J=H[1],G=_t(Object(r.useState)({}),2),Q=G[0],Y=G[1],Z=_t(Object(r.useState)(""),2),ee=Z[0],te=Z[1],ne=_t(Object(r.useState)(["single_step"]),2),re=ne[0],ae=ne[1],ce=_t(Object(r.useState)("single_step"),2),le=ce[0],ie=ce[1],ue=_t(Object(r.useState)([]),2),se=ue[0],fe=ue[1],be=_t(Object(r.useState)([]),2),de=be[0],me=be[1],pe=_t(Object(r.useState)([]),2),Oe=pe[0],ve=pe[1],je=_t(Object(r.useState)({}),2),ye=je[0],he=je[1],ge=_t(Object(r.useState)(""),2),Ee=ge[0],Se=ge[1],Ne=_t(Object(r.useState)(""),2),ke=Ne[0],Ce=Ne[1],Pe=_t(Object(r.useState)([]),2),xe=Pe[0],Te=Pe[1],Ae=_t(Object(r.useState)([]),2),Ie=Ae[0],De=Ae[1],Fe=_t(Object(r.useState)([]),2),Le=Fe[0],Me=Fe[1],qe=_t(Object(r.useState)(!1),2),ze=qe[0],Ue=qe[1],Ve=_t(Object(r.useState)(),2),Ke=Ve[0],He=Ve[1],$e=_t(Object(r.useState)(""),2),Je=$e[0],Ge=$e[1],We=_t(Object(r.useState)({status:!1}),2),Qe=We[0],Ye=We[1],Ze=_t(Object(r.useState)(!1),2),Xe=Ze[0],et=Ze[1],tt=_t(Object(r.useState)(!1),2),nt=tt[0],rt=tt[1],ct=_t(Object(r.useState)([]),2),lt=ct[0],ot=ct[1],st=_t(Object(r.useState)(!1),2),ft=st[0],pt=st[1],jt=Object(r.useRef)(new AbortController),ht=Object(r.useRef)(!0),gt=Object(g.a)(),wt=gt.getFormLoading,Et=gt.getFormData,St=gt.getStep,Nt=Object(y.a)(),kt=Nt.fetchStepFields,Ct=Nt.setFormFieldData,Pt=Nt.setSaveDataValue,xt=Nt.fetchStep,Tt=wt(),At=Et(t,n,a,o),It=St(t,n,a,o).unSavedData,Dt=void 0!==It&&It;Object(r.useEffect)((function(){ee&&(s(ee),te(""))}),[ee]);var Ft=At.dependency_messages,Rt=void 0===Ft?[]:Ft,Bt=At.fields,Lt=void 0===Bt?[]:Bt,Mt=At.fields_data,qt=void 0===Mt?{}:Mt,zt=Lt.active_fields,Ut=void 0===zt?[]:zt,Vt=Lt.steps,Kt=void 0===Vt?{}:Vt,Ht=Lt.product_fields,$t=void 0===Ht?{}:Ht,Jt=qt.basic,Gt=qt.advanced,Wt=qt.product,Qt=qt.address_order,Yt=void 0===Qt?{}:Qt,Zt=Yt.address,Xt=void 0===Zt?[]:Zt,en=Yt.shipping_address,tn=void 0===en?[]:en,nn=$t.products,rn=void 0===nn?[]:nn,an=$t.default_products,cn=void 0===an?"":an,ln=$t.settings,on=void 0===ln?{}:ln,un=$t.add_to_cart_setting,sn=void 0===un?"":un,fn=Lt.fieldsets,bn=void 0===fn?{}:fn;Object(r.useEffect)((function(){if(!Object(p.isEmpty)(bn)){if(bn.hasOwnProperty("single_step")&&bn.single_step){var e=bn.single_step;fe(e),Te(e)}bn.hasOwnProperty("two_step")&&bn.two_step?(me(bn.two_step),De(bn.two_step)):(me([]),De([])),bn.hasOwnProperty("third_step")&&bn.third_step?(ve(bn.third_step),Me(bn.third_step)):(ve([]),Me([]))}}),[bn]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(Rt)){var e=Rt.map((function(e){return yt(yt({},e),{},{showDependency:!1})}));ot(e)}}),[Rt]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(bn)){var e=Object(p.cloneDeep)(At);e.fields.active_fields=dn(bn),Ct(t,n,a,o,e,{})}}),[Tt]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(Kt)){var e=["single_step"];Kt.hasOwnProperty("two_step")&&"yes"===Kt.two_step.active&&e.push("two_step"),e.includes("two_step")&&Kt.hasOwnProperty("third_step")&&"yes"===Kt.third_step.active&&e.push("third_step"),ae(e)}}),[Kt]),Object(r.useEffect)((function(){return(Object(p.isEmpty)(At)||Tt||Dt)&&kt(t,n,a,o,jt.current.signal),function(){ht.current=!1,jt.current.abort()}}),[]);var dn=function(e){var t=[];e.hasOwnProperty("single_step")&&e.single_step.length>0&&e.single_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,vt(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))})),e.hasOwnProperty("two_step")&&e.two_step.length>0&&e.two_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,vt(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))})),e.hasOwnProperty("third_step")&&e.third_step.length>0&&e.third_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,vt(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))}));var n=[].concat(t);return vt(new Set(n))},mn=function(e){var r=Gt.filter((function(t){return t.id!==e})),c=Object(p.cloneDeep)(At);c.fields_data.advanced=r,Ct(t,n,a,o,c)},pn=function(e){var t=0,n=0,r="";r=0===Object(p.size)(re)||1==Object(p.size)(re)?"single_step":2===Object(p.size)(re)?"two_step":"third_step";var a=!1;return Object.values(e).every((function(e){return e.every((function(e){return e.fields.every((function(e){return"address"===e.id?(n=1,t=2,a=!0):"shipping_address"===e.id&&(t=1,n=2,a=!0),!0!==a})),!0!==a})),!0!==a})),{current_step:r,have_billing_address:Ut.includes("address")?"true":"false",have_shipping_address:Ut.includes("shipping_address")?"true":"false",have_coupon_field:Ut.includes("order_coupon")?"true":"false",have_shipping_method:Ut.includes("shipping_calculator")?"true":"false",enabled_product_switching:Ut.includes("product_switching")?"yes":"no",have_billing_address_index:n,have_shipping_address_index:t}},On=function(){var e=Ot(regeneratorRuntime.mark((function e(){var r,l,i,u,s,f,b,m,O,j,y,h,_,g,w,E=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=E.length>0&&void 0!==E[0]?E[0]:{},l=E.length>1?E[1]:void 0,i=E.length>2?E[2]:void 0,u=pn(r.hasOwnProperty("fieldsets")?r.fieldsets:bn),s={steps:Kt,fieldsets:r.hasOwnProperty("fieldsets")?r.fieldsets:bn,products:rn,address_order:r.hasOwnProperty("address_order")?r.address_order:Yt,default_products:cn,product_settings:on,product_fields:r.hasOwnProperty("product_fields")?r.product_fields:$t,current_step:u.current_step,have_billing_address:u.have_billing_address,have_shipping_address:u.have_shipping_address,have_coupon_field:u.have_coupon_field,have_shipping_method:u.have_shipping_method,enabled_product_switching:u.enabled_product_switching,have_billing_address_index:u.have_billing_address_index,have_shipping_address_index:u.have_shipping_address_index,active_fields:Ut},f=!1,b=!1,re.includes("third_step")&&(j=0,null===(m=r.hasOwnProperty("fieldsets")?r.fieldsets:bn)||void 0===m||null===(O=m.two_step)||void 0===O||O.map((function(e){0===Object(p.size)(e.fields)&&0===j?f=!0:j+=1})),0===Object(p.size)(null==bn?void 0:bn.two_step)&&(f=!0)),re.includes("two_step")&&(g=0,null===(y=r.hasOwnProperty("fieldsets")?r.fieldsets:bn)||void 0===y||null===(h=y.single_step)||void 0===h||h.map((function(e){0===Object(p.size)(e.fields)&&0===g?b=!0:g+=1})),0===Object(p.size)(null===(_=r.hasOwnProperty("fieldsets")?r.fieldsets:bn)||void 0===_?void 0:_.single_step)&&(b=!0)),w=!1,Ut.includes("billing_email")&&(w=!0),w){e.next=15;break}Ue(!0),e.next=32;break;case 15:if(!b){e.next=19;break}rt(!0),e.next=32;break;case 19:if(!f){e.next=23;break}et(!0),e.next=32;break;case 23:return e.prev=23,e.next=26,d()({path:Object(v.q)("/funnel-checkout/".concat(n,"/form_fields")),method:"POST",data:s}).then((function(e){e.success?(Pt(!1),l?(mn(i),J({loading:!1,status:!1})):Ct(t,n,a,o,{},{unSavedData:!1}),"checkout"===t&&xt(t,n,"optimizations",o),te(Object(c.__)("Changes Saved","funnel-builder"))):te(e.msg||e.message)}));case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(23),console.log(e.t0),te(e.t0.message);case 32:pt(!1);case 33:case"end":return e.stop()}}),e,null,[[23,28]])})));return function(){return e.apply(this,arguments)}}(),vn=function(e){var r=Object(p.cloneDeep)(At);switch(e){case"third_step":r.fields.current_step="two_step";break;case"two_step":r.fields.current_step="single_step"}r.fields.steps[e].active="no",delete r.fields.fieldsets[e],r.fields.active_fields=dn(r.fields.fieldsets),Ct(t,n,a,o,r,{unSavedData:!0})},jn=function(e){var r=Object(p.cloneDeep)(At);r.fields.current_step=e,r.fields.steps[e].active="yes",Ct(t,n,a,o,r,{unSavedData:!0}),setTimeout((function(){return ie(e)}),100)},yn=function(e,t){var n=[];return e.map((function(e,r){r===t&&e.fields.map((function(e){return n.push(e.id)}))})),Ut.filter((function(e){return!n.includes(e)}))},hn={wfacp_duplicate_billing_first_and_last_name:function(){return!!["billing_first_name","billing_last_name"].map((function(e){var t=!1;return Ut.includes(e)&&Xt.filter((function(t){if(t.key===e)return t})).map((function(e){return!!e.status})).includes(!0)&&(t=!0),t})).includes(!0)}};Object(r.useEffect)((function(){if(lt.length>0){var e=Object(p.cloneDeep)(lt);e=e.map((function(e){return e.hasOwnProperty("isRemoved")&&e.isRemoved?(e.showDependency=!1,e):e.hasOwnProperty("ids")&&Array.isArray(e.ids)?(Ut.filter((function(t){return e.ids.includes(t)})).length>0?e.showDependency=!1:e.showDependency=!0,e):e.hasOwnProperty("reverse_check")&&e.reverse_check&&e.hasOwnProperty("id")&&""!==e.id?(Ut.includes(e.id)?e.showDependency=!0:e.showDependency=!1,e):e.hasOwnProperty("call_back")&&hn.hasOwnProperty(e.call_back)?(hn[e.call_back]()?e.showDependency=!0:e.showDependency=!1,e):(e.hasOwnProperty("show")&&e.show&&(e.showDependency=!0),e)})),ot(e)}}),[Ut,Xt,Kt,Tt,re]);var _n=function(){var e=Ot(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},t.hasOwnProperty("message_id")&&(r.message_id=t.message_id),r.message_type=t.hasOwnProperty("is_global")&&!0===t.is_global?"global":"self";try{d()({path:Object(v.q)("/funnel-checkout/".concat(n,"/form_fields/hide-message")),method:"POST",data:r}).then((function(e){if(e.success){if(r.hasOwnProperty("message_id")){var t=Object(p.cloneDeep)(lt);t=t.map((function(e){return e.hasOwnProperty("message_id")&&r.message_id===e.message_id&&(e.showDependency=!1,e.isRemoved=!0),e})),ot(t)}}else te(e.msg||e.message)}))}catch(e){console.log(e.message)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Tt?Object(r.createElement)(bt,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-title"},Object(c.__)("Checkout Form Fields","funnel-builder")),Object(r.createElement)("style",null,".bwfan__step-header .bwf-step-menu-header{\n\t\tmargin-bottom: 12px !important;\n\t   }"),Object(r.createElement)("div",{className:" bwf_w_full"},lt.map((function(e,t){if(e.showDependency)return Object(r.createElement)("div",{key:t,className:"bwf-form-field-warning ".concat(e.dismissible?"":"bwf-remove-icon")},Object(r.createElement)("div",{className:"bwf-warning-text"},Object(r.createElement)("div",{className:"bwf-warning-icon"},Object(r.createElement)(l.a,{icon:"info",width:20,height:20})),Object(r.createElement)("div",{className:"bwf-warning-content",dangerouslySetInnerHTML:{__html:e.message}}),e.dismissible&&Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){_n(e)}},Object(r.createElement)(l.a,{icon:"close",width:16,height:16}))))}))),Object(r.createElement)("div",{id:"bwf_fields_layout_container"},Object(r.createElement)("div",{className:"bwf_form_field_header"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("div",{className:"bwf_template_tabs_container"},Object(r.createElement)("div",{className:"bwf_step_actions"},Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){return ie("single_step")}},Object(r.createElement)("div",{"data-slug":"single_step",className:"bwf_template_tabs ".concat("single_step"===le&&"bwf_active_tabs"," ")},Object(r.createElement)("span",null,Object(c.__)("Step 1","funnel-builder")))),(null==re?void 0:re.length)>1&&Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){return ie("two_step")}},Object(r.createElement)("div",{"data-slug":"two_step",className:"bwf_template_tabs ".concat("two_step"===le&&"bwf_active_tabs"," ")},Object(r.createElement)("span",null,Object(c.__)("Step 2","funnel-builder")),2===(null==re?void 0:re.length)&&Object(r.createElement)("span",{className:"bwf-svg-icon",onClick:function(e){e.stopPropagation(),vn("two_step"),setTimeout((function(){ie("single_step")}),100)}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:16,height:16})))),(null==re?void 0:re.length)>2&&Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){return ie("third_step")}},Object(r.createElement)("div",{"data-slug":"third_step",className:"bwf_template_tabs ".concat("third_step"===le&&"bwf_active_tabs"," ")},Object(r.createElement)("span",null,Object(c.__)("Step 3","funnel-builder")),Object(r.createElement)("span",{className:"bwf-svg-icon",onClick:function(e){e.stopPropagation(),vn("third_step"),setTimeout((function(){ie("two_step")}),100)}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:16,height:16}))))),(null==re?void 0:re.length)<3&&Object(r.createElement)("div",{className:"bwf_add_new_step"},Object(r.createElement)("div",{className:"bwf_step bwf_modal_open bwf_step_add_step_btn",onClick:function(){u?Ye({status:!0,feature:Object(c.__)("Multistep Checkout","funnel-builder"),proLink:Object(v.K)(["Form","Field","New","Step","Upgrade","Modal"])}):1==re.length?jn("two_step"):2==re.length&&jn("third_step")}},u&&Object(r.createElement)(dt.a,{className:"si"})," ",Object(r.createElement)("span",null,!u&&"+"," ",Object(c.__)("Add New Step","funnel-builder")))))),Object(r.createElement)(j.a,{isPrimary:!0,onClick:function(){pt(!0),On()},isBusy:ft,disabled:ft},Object(c.__)("Save","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_p20_noside bwf_box_size"},Object(r.createElement)("div",{className:"bwf_wrap_inner bwf_wrap_inner_offers bwf_wrap_inner_fields bwf-ml-0"},Object(r.createElement)("div",{className:"bwf_wrap_r"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container bwf-position-relative"},Object(r.createElement)("div",null,Object(r.createElement)(at,{activeStep:le,step:"single_step"==le?se:"two_step"==le?de:Oe,fields:"single_step"==le?xe:"two_step"==le?Ie:Le,fieldsStep:re,setIsAddSection:A,helperClass:"bwf-section-item__helper-class",useDragHandle:!0,onSortEnd:function(e){var r=e.oldIndex,c=e.newIndex;"single_step"==le?(fe((function(e){return Object(we.d)(e,r,c)})),Te((function(e){return Object(we.d)(e,r,c)}))):"two_step"==le?(me((function(e){return Object(we.d)(e,r,c)})),De((function(e){return Object(we.d)(e,r,c)}))):(ve((function(e){return Object(we.d)(e,r,c)})),Me((function(e){return Object(we.d)(e,r,c)})));var l=Object(p.cloneDeep)(At);"single_step"===le?l.fields.fieldsets.single_step=Object(we.d)(l.fields.fieldsets.single_step,r,c):"two_step"===le?l.fields.fieldsets.two_step=Object(we.d)(l.fields.fieldsets.two_step,r,c):"third_step"===le&&(l.fields.fieldsets.third_step=Object(we.d)(l.fields.fieldsets.third_step,r,c)),l.fields.active_fields=dn(l.fields.fieldsets),Ct(t,n,a,o,l,{unSavedData:!0})},onDeleteField:function(e,r){var c,l,i=Object(p.cloneDeep)(At);if(i.fields.active_fields=i.fields.active_fields.filter((function(t){if(t!=e.id)return t})),"single_step"==le)xe[r].fields=null===(c=xe[r])||void 0===c||null===(l=c.fields)||void 0===l?void 0:l.filter((function(t){return t.id!=e.id})),i.fields.fieldsets.single_step=JSON.parse(JSON.stringify(xe));else if("two_step"==le){var u,s;Ie[r].fields=null===(u=Ie[r])||void 0===u||null===(s=u.fields)||void 0===s?void 0:s.filter((function(t){return t.id!=e.id})),i.fields.fieldsets.two_step=JSON.parse(JSON.stringify(Ie))}else if("third_step"==le){var f,b;Le[r].fields=null===(f=Le[r])||void 0===f||null===(b=f.fields)||void 0===b?void 0:b.filter((function(t){return t.id!=e.id})),i.fields.fieldsets.third_step=JSON.parse(JSON.stringify(Le))}Ct(t,n,a,o,i,{unSavedData:!0})},deleteSection:function(e){var r=Object(p.cloneDeep)(At),c=[];if("single_step"==le){var l=se.filter((function(t,n){return n!==e}));r.fields.fieldsets.single_step=JSON.parse(JSON.stringify(l)),c=yn(se,e)}else if("two_step"==le){var i=de.filter((function(t,n){return n!==e}));r.fields.fieldsets.two_step=JSON.parse(JSON.stringify(i)),c=yn(de,e)}else{var u=Oe.filter((function(t,n){return n!==e}));r.fields.fieldsets.third_step=JSON.parse(JSON.stringify(u)),c=yn(Oe,e)}r.fields.active_fields=c,Ct(t,n,a,o,r,{unSavedData:!0})},editSection:function(e,t){he(e),Ge(!0),Se(t)},editField:function(e,t){Y(e),"product_switching"===e.id?L(!0):"address"===e.id?(z("Billing"),K(!0)):"shipping_address"===e.id?(z("Shipping"),K(!0)):"product_switching"!==e.id&&(F(!0),He(t))},updateStepField:function(e){var r=Object(p.cloneDeep)(At);"single_step"===le?(r.fields.fieldsets.single_step=e,fe(e),Te(e)):"two_step"===le?(r.fields.fieldsets.two_step=e,me(e),De(e)):"third_step"===le&&(r.fields.fieldsets.third_step=e,ve(e),Me(e)),r.fields.active_fields=dn(r.fields.fieldsets),Ct(t,n,a,o,r)},onDropFields:function(e,r){var c=Object(p.cloneDeep)(At);if("single_step"===le){var l;if("product"===ke)null===(l=se[r])||void 0===l||l.fields.push(S);else if("advance"===ke){var i;null===(i=se[r])||void 0===i||i.fields.push(b)}else if("basic"===ke){var u;null===(u=se[r])||void 0===u||u.fields.push(_)}c.fields.fieldsets.single_step=JSON.parse(JSON.stringify(se))}else if("two_step"===le){var s;if("product"==ke)null===(s=de[r])||void 0===s||s.fields.push(S);else if("advance"===ke){var f;null===(f=de[r])||void 0===f||f.fields.push(b)}else if("basic"===ke){var d;null===(d=de[r])||void 0===d||d.fields.push(_)}c.fields.fieldsets.two_step=JSON.parse(JSON.stringify(de))}else if("third_step"===le){var m;if("product"==ke)null===(m=Oe[r])||void 0===m||m.fields.push(S);else if("advance"===ke){var O;null===(O=Oe[r])||void 0===O||O.fields.push(b)}else if("basic"===ke){var v;null===(v=Oe[r])||void 0===v||v.fields.push(_)}c.fields.fieldsets.third_step=JSON.parse(JSON.stringify(Oe))}c.fields.active_fields=dn(c.fields.fieldsets),Ct(t,n,a,o,c,{unSavedData:!0})}}))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("span",{className:"bwf-form-field-name"},Object(c.__)("Fields","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf_input_fields_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(c.__)("Basic","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(t){var n=Jt[t];null!=Ut&&Ut.includes(n.id)?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{onDragStart:function(e){return t=n,Ce("basic"),void w(t);var t},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label)))))};for(var n in Jt)t(n);return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(c.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(t){var n=Wt[t];null!=Ut&&Ut.includes(n.id)||u&&"yes"===n.is_locked?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},u&&"yes"===n.is_locked&&Object(r.createElement)(dt.a,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{onDragStart:function(e){return t=n,Ce("product"),void N(t);var t},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label)))))};for(var n in Wt)t(n);return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(c.__)("Advanced","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t={a:0,b:0},a=function(a){var o=Gt[a];Object(p.isEmpty)(o.label)||(null!=Ut&&Ut.includes(o.id.toString())||u&&"yes"===o.is_locked?(e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:o.id+t.a.toString()},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},u&&"yes"===o.is_locked&&Object(r.createElement)(dt.a,{className:"size-16"}),Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==o?void 0:o.label))))),t.a++):(e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:o.id+t.b.toString()},Object(r.createElement)("div",{onDragStart:function(e){return t=o,Ce("advance"),void O(t);var t},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",{className:"bwf-advance-field-text bwf-white-break-space"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==o?void 0:o.label)),o.allow_delete&&Object(r.createElement)("span",{className:"bwf_remove_fields bwf-remove-advance-field",onClick:function(){var e={modalTitle:Object(c.__)("Delete Field","funnel-builder"),content:Object(c.sprintf)(Object(c.__)("You are about to delete field %s. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),o.label),cancelButtonText:Object(c.__)("Cancel","funnel-builder"),confirmButtonText:Object(c.__)("Delete","funnel-builder"),confirmButtonClass:"is-danger",status:!0};J(yt(yt({},e),{},{onConfirm:function(){!function(e,t){J(yt(yt({},t),{},{disableConfirm:!0}));try{d()({path:Object(v.q)("/funnel-checkout/".concat(n,"/form_fields/remove_field")),method:"DELETE",data:{section:"advanced",index:e}}).then((function(t){t.success?(mn(e),On({},!0,e)):te(t.msg||t.message)}))}catch(e){J({status:!0,error:e.message||e.msg})}}(o.id,e)}}))}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:16,height:16}))))),t.b++))};for(var o in Gt)a(o);return e}()))),Object(r.createElement)("div",{className:"bwf_fsetting_table_footer"},Object(r.createElement)(j.a,{isSmall:!0,isSecondary:!0,onClick:function(){u?Ye({status:!0,feature:Object(c.__)("Adding Field","funnel-builder"),content:{},proLink:Object(v.K)(["Form","Field","New","Field","Upgrade","Modal"])}):P(!0)}},u?Object(r.createElement)(l.a,{icon:"king",size:"20",color:mt.BLUE_BASE}):""," ",Object(c.__)("Add New Field","funnel-builder"))))))))),C&&Object(r.createElement)(W,{onCloseModal:function(){P(!1)},onSuccess:function(e){P(!1);var r=Object(p.cloneDeep)(At);r.fields_data.advanced=[].concat(vt(Gt),[e]),Ct(t,n,a,o,r)},SnackBarMsg:function(e){te(e)}}),T&&Object(r.createElement)(X,{onCloseModal:function(){A(!1)},addedSection:function(){var e=Ot(regeneratorRuntime.mark((function e(r){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(p.cloneDeep)(At),"single_step"===le?c.fields.fieldsets.single_step=[].concat(vt(se),[r]):"two_step"===le?c.fields.fieldsets.two_step=[].concat(vt(de),[r]):"third_step"===le&&(c.fields.fieldsets.third_step=[].concat(vt(Oe),[r])),Ct(t,n,a,o,c,{unSavedData:!0}),A(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Je&&Object(r.createElement)(it,{onCloseModal:function(){Ge(!1)},editId:Ee,editData:ye,editSection:function(){var e=Ot(regeneratorRuntime.mark((function e(r,c){var l,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=Object(p.cloneDeep)(At),"single_step"===le?(i=se.map((function(e,t){return t==c?r:e})),l.fields.fieldsets.single_step=JSON.parse(JSON.stringify(i))):"two_step"===le?(u=de.map((function(e,t){return t===c?r:e})),l.fields.fieldsets.two_step=JSON.parse(JSON.stringify(u))):"third_step"===le&&(s=Oe.map((function(e,t){return t==c?r:e})),l.fields.fieldsets.third_step=JSON.parse(JSON.stringify(s))),Ct(t,n,a,o,l,{unSavedData:!0}),Ge(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),D&&Object(r.createElement)(oe,{onCloseModal:function(){F(!1)},updated:function(e){var r=Object(p.cloneDeep)(At);r.fields=e,Ct(t,n,a,o,r),F(!1),te(Object(c.__)("Changes Saved","funnel-builder"))},updatedField:Q,fields:Lt,activeStep:le,updatedSectionId:Ke,SnackBarMsg:function(e){te(e)}}),B&&Object(r.createElement)(_e,{onCloseModal:function(){L(!1)},productData:$t,addToCartSettings:sn,onChange:function(){var e=Ot(regeneratorRuntime.mark((function e(r){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=Object(p.cloneDeep)(At)).fields.product_fields=yt(yt({},c.fields.product_fields),r),Ct(t,n,a,o,c,{unSavedData:!0}),e.next=5,On({product_fields:c.fields.product_fields});case 5:L(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),V&&Object(r.createElement)(Re,{onCloseModal:function(){K(!1)},addressType:q,addressData:"Billing"===q?Xt:tn,onChange:function(){var e=Ot(regeneratorRuntime.mark((function e(r){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(p.cloneDeep)(At),"Billing"===q?c.fields_data.address_order.address=JSON.parse(JSON.stringify(r)):c.fields_data.address_order.shipping_address=JSON.parse(JSON.stringify(r)),Ct(t,n,a,o,c),e.next=5,On({address_order:c.fields_data.address_order});case 5:K(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-squeezy",isLoading:$.loading,successMessage:$.success,errorMessage:$.error,isOpen:$.status,autoHide:8e3,closeIcon:!0,content:$.content,confirmText:$.confirmText,confirmButtonText:$.confirmButtonText,confirmButtonClass:$.confirmButtonClass,cancelButtonText:$.cancelButtonText,onConfirm:$.onConfirm,onCancel:$.onCancel,modalTitle:$.modalTitle,disableConfirm:$.disableConfirm,onRequestClose:function(){return J({status:!1})}}),ze&&Object(r.createElement)(Be,{desc:Object(c.__)("Billing Email is required for processing payment","funnel-builder"),onRequestClose:function(){Ue(!1),Pt(!1)}}),Xe&&Object(r.createElement)(Be,{desc:Object(c.__)("Step 2 can't be blank. Add a few fields or remove the step and save again.","funnel-builder"),onRequestClose:function(){et(!1),Pt(!1)}}),nt&&Object(r.createElement)(Be,{desc:Object(c.__)("Step 1 can't be blank. Add a few fields and save again.","funnel-builder"),onRequestClose:function(){rt(!1),Pt(!1)}}),Qe.status&&Object(r.createElement)(ut.a,{isOpen:Qe.status,onRequestClose:function(){return Ye({status:!1})},modalContent:Qe,type:2})))},St=(n(281),n(245));function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){Pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var At=function(e){var t=e.onCloseModal,n=e.onSuccess,a=e.SnackBarMsg,l=e.stepId,o=xt(Object(r.useState)(!1),2),i=o[0],u=o[1],s=xt(Object(r.useState)("text"),2),f=s[0],b=s[1],m=function(){t()},p=xt(Object(r.useState)({field_type:"text",label:"",placeholder:"",default:"",required:!1,options:"",radio_alignment:"horizontal",section_type:"advanced",enable_time:"false",preferred_time_format:"",show_custom_field_at_thankyou:"false",show_custom_field_at_email:"false",width:""}),2),y=p[0],h=p[1];Object(r.useEffect)((function(){h((function(e){return Ct(Ct({},e),{},{field_type:f,default:"checkbox"===f?"1":""})}))}),[f]);var _=y;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:m,title:Object(c.__)("Add Field","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-field-modal bwf-optin-form-modal"},Object(r.createElement)(z.a,{validate:function(e){var t={};return""===e.label.trim()&&(t.label=Object(c.__)("Label is required","funnel-builder")),e.label||(t.label=Object(c.__)("Label is required","funnel-builder")),["radio","select"].includes(e.field_type)&&!e.options&&(t.options=Object(c.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){u(!0);try{var t='{"section":"advanced","fields":'.concat(JSON.stringify(e),"}");d()({path:Object(v.q)("/funnel-optin/".concat(l,"/form_fields/add_field")),method:"POST",data:JSON.parse(t)}).then((function(e){e.success?(u(!1),n(e.data)):(u(!1),a(Object(c.__)("Something went wrong, Please contact to support team","funnel-builder")))}))}catch(e){u(!1),a(e.msg||e.message)}},initialValues:_,onChange:function(e,t){b(t.field_type)}},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,l=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Field Type","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(U.b,Nt({},t("field_type"),{options:[{label:Object(c.__)("Text","funnel-builder"),value:"text",key:"text"},{label:Object(c.__)("Radio","funnel-builder"),value:"radio",key:"radio"},{label:Object(c.__)("HTML","funnel-builder"),value:"wfop_wysiwyg",key:"wfop_wysiwyg"},{label:Object(c.__)("Select","funnel-builder"),value:"select",key:"select"},{label:Object(c.__)("Textarea","funnel-builder"),value:"textarea",key:"textarea"},{label:Object(c.__)("Checkbox","funnel-builder"),value:"checkbox",key:"checkbox"},{label:Object(c.__)("Hidden","funnel-builder"),value:"hidden",key:"hidden"}]})))),["text","radio","wfop_wysiwyg","select","textarea","checkbox","hidden"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(l.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("label",{id:"required"},Object(c.__)("Label","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Nt({},t("label"),{placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&o()}})),l.label&&a.label&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["text","select","textarea"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Nt({},t("placeholder"),{label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&o()}})))),["text","radio","select","textarea","hidden"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Nt({},t("default"),{label:Object(c.__)("Default","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&o()}})))),["checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(U.b,Nt({options:[{label:Object(c.__)("Checked","funnel-builder"),value:"1",key:"1"},{label:Object(c.__)("Un-checked","funnel-builder"),value:"0",key:"0"}]},t("default"),{onKeyPress:function(e){"Enter"===e.key&&o()}})))),["radio","select"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(l.options&&a.options?"bwf-validation":"")},Object(r.createElement)("label",{id:"required"},Object(c.__)("Options","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Nt({placeholder:Object(c.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"),{onKeyPress:function(e){"Enter"===e.key&&o()}})),l.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder")))),["radio"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Alignment","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap bwf-modal-radio"},Object(r.createElement)(St.a,Nt({options:[{label:Object(c.__)("Horizontal","funnel-builder"),value:"horizontal"},{label:Object(c.__)("Vertical","funnel-builder"),value:"vertical"}]},t("radio_alignment"))))),["text","radio","select","textarea","checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,Nt({},t("required"),{label:Object(c.__)("Required","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(j.a,{onClick:m,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(j.a,{isPrimary:!0,onClick:o,isBusy:i,disabled:i},Object(c.__)("Add","funnel-builder"))))}))))};function It(){return(It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mt=function(e){var t=e.onCloseModal,n=e.updatedField,a=e.fields,o=e.updated,i=e.SnackBarMsg,u=e.stepId,s=Bt(Object(r.useState)(!1),2),f=s[0],b=s[1],m=Bt(Object(r.useState)(n),2),p=m[0],y=m[1],h=function(){t()};Object(r.useEffect)((function(){switch(p.required){case"1":case"true":y((function(e){return Ft(Ft({},e),{},{required:!0})}));break;case"0":case"false":y((function(e){return Ft(Ft({},e),{},{required:!1})}))}switch(p.phone_validation){case"1":case"true":y((function(e){return Ft(Ft({},e),{},{phone_validation:!0})}));break;case"0":case"false":y((function(e){return Ft(Ft({},e),{},{phone_validation:!1})}))}}),[p]);var _=p;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:h,isDismissible:!1,className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-update-field-modal bwf-optin-form-modal bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1},Object(r.createElement)(z.a,{validate:function(e){var t={};return["radios","radio","select"].includes(e.field_type)&&!e.options&&(t.options=Object(c.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){!function(e){b(!0);var t=a.map((function(t){return t.id===e.id?e:t}));try{d()({path:Object(v.q)("/funnel-optin/".concat(u,"/form_fields")),method:"POST",data:t}).then((function(e){e.success?(b(!1),o(t)):i(Object(c.__)("Something went wrong, Please contact to support team","funnel-builder"))}))}catch(e){i(e.message||e.msg)}}(e)},initialValues:_},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,o=e.touched,i=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(c.__)("Field","funnel-builder")," -"," ","wfop_wysiwyg"!==n.type&&"html"!==n.type?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.label),Object(r.createElement)("span",null,"(",Object(c.__)("Field Type : ","funnel-builder")," ",null==n?void 0:n.type,")")):Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.label)),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(c.__)("Close","funnel-builder"),onClick:h},Object(r.createElement)(l.a,{icon:"close",size:20}))),["text","radios","radio","html","select","textarea","checkbox","hidden","email","wfop_wysiwyg","tel"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(o.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,It({},t("label"),{label:Object(c.__)("Label","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})),("wfop_wysiwyg"===n.type||"html"===n.type)&&Object(r.createElement)("small",null,Object(r.createElement)("strong",null,Object(r.createElement)("i",null,Object(c.__)("This label is for admin purpose only, won't appear on the optin form.","funnel-builder")))))),["text","select","textarea","email","tel"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,It({label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder")},t("placeholder"),{onKeyPress:function(e){"Enter"===e.key&&i()}})))),["text","radios","radio","select","textarea","hidden","email","tel"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,It({},t("default"),{label:Object(c.__)("Default","funnel-builder"),placeholder:Object(c.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})))),["checkbox"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(U.b,It({},t("default"),{options:[{label:Object(c.__)("Checked","funnel-builder"),value:"1",key:"1"},{label:Object(c.__)("Un-checked","funnel-builder"),value:"0",key:"0"}]})))),["radios","select","radio"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(o.options&&a.options?"bwf-validation":"")},Object(r.createElement)("label",{id:"required"},Object(c.__)("Options","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,It({placeholder:Object(c.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"),{onKeyPress:function(e){"Enter"===e.key&&i()}})),o.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["radios","radio"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Alignment","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap bwf-form-radio"},Object(r.createElement)(St.a,It({options:[{label:Object(c.__)("Horizontal","funnel-builder"),value:"horizontal"},{label:Object(c.__)("Vertical","funnel-builder"),value:"vertical"}]},t("radio_alignment"))))),["wfop_wysiwyg","html"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field field-input"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(ee.a,It({},t("default"),{toolbar:"bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,forecolor,fontsizeselect,mergetagmodal",quicktags:!0})))),["text","radios","radio","select","textarea","checkbox","email","tel"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,It({},t("required"),{label:Object(c.__)("Required","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),["tel"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,It({},t("phone_validation"),{label:Object(c.__)("Enable Validation","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),Object(r.createElement)("div",{className:pe()("bwf-form-buttons",{wf_funnel_right_align:!Object(c.isRTL)(),wf_funnel_left_align:Object(c.isRTL)()})},Object(r.createElement)(j.a,{onClick:h,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(j.a,{isPrimary:!0,onClick:i,isBusy:f,disabled:f},Object(c.__)("Update","funnel-builder"))))}))))};function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){Vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e){return function(e){if(Array.isArray(e))return Jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||$t(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gt=function(e){var t=e.type,n=e.stepId,a=e.tab,o=e.offerId,u=Object(i.a)().isProFeatureLocked,s=Object(i.b)().showSnackbar,f=Ht(Object(r.useState)([]),2),b=f[0],h=f[1],_=Ht(Object(r.useState)(),2),w=_[0],E=_[1],S=Ht(Object(r.useState)(!1),2),N=S[0],k=S[1],C=Ht(Object(r.useState)(!1),2),P=C[0],x=C[1],T=Ht(Object(r.useState)({}),2),A=T[0],I=T[1],D=Ht(Object(r.useState)({}),2),F=D[0],R=D[1],B=Ht(Object(r.useState)(""),2),L=B[0],M=B[1],q=Ht(Object(r.useState)(!1),2),z=q[0],U=q[1],V=Ht(Object(r.useState)(!1),2),K=V[0],H=V[1],$=Ht(Object(r.useState)({status:!1}),2),J=$[0],G=$[1],W=Object(g.a)(),Q=W.getLoading,Y=W.getFormLoading,Z=W.getFormData,X=W.getStep,ee=Object(y.a)(),te=ee.fetchStepFields,ne=ee.setFormFieldData,re=ee.setSaveDataValue,ae=Q(),ce=Y(),le=Z(t,n,a,o),oe=X(t,n,a,o).unSavedData,ie=void 0!==oe&&oe,ue=le.fields,se=void 0===ue?[]:ue,fe=le.fields_data,be=void 0===fe?{}:fe,de=be.basic,me=void 0===de?[]:de,pe=be.advanced,Oe=void 0===pe?[]:pe,ve=Oe.length>0;Object(r.useEffect)((function(){if(!Object(p.isEmpty)(se)&&se.hasOwnProperty("single_step")&&se.single_step){var e=se.single_step[0].fields;h(e)}}),[se]),Object(r.useEffect)((function(){L&&(s(L),M(""))}),[L]);var je=Object(r.useRef)(new AbortController),ye=function(e){E(e)};Object(r.useEffect)((function(){return(Object(p.isEmpty)(le)&&!ae||ie)&&te(t,n,a,o,je.current.signal),function(){je.current.abort()}}),[]);var he=null==b?void 0:b.map((function(e){return null==e?void 0:e.id})),_e=function(e){var r=Oe.filter((function(t){return t.id!==e})),c=Object(p.cloneDeep)(le);c.fields_data.advanced=r,ne(t,n,a,o,c)},ge=function(e,r,l){var i=!1;if(b.map((function(e){"wfop_optin_email"===e.id&&(i=!0)})),!i&&l)U(!0),H(!1);else try{d()({path:Object(v.q)("/funnel-optin/".concat(n,"/form_fields")),method:"POST",data:b}).then((function(l){if(l.success){if(re(!1),e)_e(r),I({loading:!1,status:!1});else{var i=Object(p.cloneDeep)(le);ne(t,n,a,o,i,{unSavedData:!1})}M(Object(c.__)("Changes Saved","funnel-builder")),H(!1)}else M(l.msg||l.message)}))}catch(e){console.log(e),M(e.message)}};return ce?Object(r.createElement)(bt,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-header"},Object(r.createElement)("span",{className:"bwf-form-title "},Object(c.__)("Optin Form Fields","funnel-builder")),Object(r.createElement)(j.a,{isPrimary:!0,onClick:function(){H(!0),ge("","",!0)},isBusy:K,disabled:K},Object(c.__)("Save","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_layout_container"},Object(r.createElement)("div",{className:"bwf_box_size"},Object(r.createElement)("div",{className:"bwf_wrap_inner bwf_wrap_inner_offers bwf-ml-0"},Object(r.createElement)("div",{className:"bwf_wrap_r"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container"},Object(r.createElement)("div",{"data-slug":"single_step",className:"single_step_template"},Object(r.createElement)("div",{className:"bwf_sections_holder single_step"},Object(r.createElement)("div",{className:"bwf_field_container","step-name":"single_step"},Object(r.createElement)("div",{className:"bwf_fields_border_div"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("h4",{className:"bwf-form-field-heading"},Object(c.__)("Fields","funnel-builder"))),Object(r.createElement)("div",null)),Object(r.createElement)(Le.a,{onDragEnd:function(e){var r=e.source,c=e.destination;if(e.destination){var l=function(e,t,n){var r=Array.from(e),a=Ht(r.splice(t,1),1)[0];return r.splice(n,0,a),r}(b,r.index,c.index),i=Object(p.cloneDeep)(le);i.fields.single_step[0].fields=l,ne(t,n,a,o,i)}}},Object(r.createElement)(Le.c,{droppableId:"droppable",direction:"horizontal"},(function(e){return Object(r.createElement)("div",qt({ref:e.innerRef},e.droppableProps,{className:"bwf_template_field_container single_step ui-sortable",onDrop:function(e){!function(e){e.preventDefault();var r=Object(p.cloneDeep)(le);r.fields.single_step[0].fields=Object(p.cloneDeep)([].concat(Kt(b),[w])),ne(t,n,a,o,r,{unSavedData:!0})}(e)},onDragOver:function(e){e.preventDefault()}}),null==b?void 0:b.map((function(e,i){return Object(r.createElement)(Le.b,{key:e.id,draggableId:e.id||"field-".concat(i),index:i},(function(i,u){return Object(r.createElement)("div",qt({ref:i.innerRef},i.draggableProps,i.dragHandleProps,{className:"bwf_save_btn_style bwf_item_drag ui-sortable-handle",onClick:function(){R(e),x(!0)}}),Object(r.createElement)("span",{className:"bwf_tooltip"},Object(c.__)("Click to edit. Drag to re-order.","funnel-builder")),Object(r.createElement)("span",null,Object(c.__)(null==e?void 0:e.label,"funnel-builder")),Object(r.createElement)("span",{className:"bwf_remove_fields",onClick:function(r){!function(e){var r=Object(p.cloneDeep)(le),c=b.filter((function(t){return t.label!==e.label}));r.fields.single_step[0].fields=Object(p.cloneDeep)(c),ne(t,n,a,o,r,{unSavedData:!0})}(e),r.stopPropagation()}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:12,height:12})))}))})),e.placeholder)})))))))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in"},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("span",{className:"bwf-form-field-name"},Object(c.__)("Fields","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf_input_fields_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(c.__)("Basic","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(t){var n=me[t];he.includes(n.id)||u&&"yes"===n.is_locked?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf-cursor-pointer bwf_input_field_place_holder"},u&&"yes"===n.is_locked&&Object(r.createElement)(dt.a,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{onDragStart:function(){return ye(n)},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style bwf-cursor-pointer"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label)))))};for(var n in me)t(n);return e}()))),ve&&Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(c.__)("Advanced","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_advanced_container"},function(){var e=[],t=function(t){var a=Oe[t];he.includes(a.id)?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:a.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder bwf-cursor-pointer"},Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==a?void 0:a.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:a.id},Object(r.createElement)("div",{onDragStart:function(){return ye(a)},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize bwf-white-break-space"},null==a?void 0:a.label)),Object(r.createElement)("span",{className:"bwf_remove_fields bwf-remove-advance-field",onClick:function(){var e={modalTitle:Object(c.__)("Delete Field","funnel-builder"),content:Object(c.sprintf)(Object(c.__)("You are about to delete field %s. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),a.label),cancelButtonText:Object(c.__)("Cancel","funnel-builder"),confirmButtonText:Object(c.__)("Delete","funnel-builder"),confirmButtonClass:"is-danger",status:!0};I(Ut(Ut({},e),{},{onConfirm:function(){!function(e,t){try{I(Ut(Ut({},t),{},{disableConfirm:!0,confirmButtonText:Object(c.__)("Deleting")}));var r='{"section":"advanced","index":"'.concat(e,'"}');d()({path:Object(v.q)("/funnel-optin/".concat(n,"/form_fields/remove_field")),method:"DELETE",data:JSON.parse(r)}).then((function(t){t.success?(_e(e),ge(!0,e)):M(t.msg||t.message)}))}catch(e){I({status:!0,error:e.message||e.msg})}}(a.id,e)}}))}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:16,height:16})))))};for(var a in Oe)t(a);return e}())))),Object(r.createElement)("div",{className:"bwf_fsetting_table_footer"},Object(r.createElement)(O.Button,{isSecondary:!0,isSmall:!0,onClick:function(){u?G({status:!0,title:Object(c.__)("Add New Form Field is a Pro Feature","funnel-builder"),content:Object(c.__)("We're sorry, the Add New Form Field is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),feature:Object(c.__)("Adding Field","funnel-builder"),proLabel:Object(c.__)("Upgrade to PRO Now","funnel-builder"),proLink:Object(v.K)([t,"Form","New","Field","Upgrade","Modal"])}):k(!0)}},u?Object(r.createElement)(l.a,{icon:"king",size:16,color:"#0073aa"}):""," ",Object(c.__)("Add New Field","funnel-builder")))))))),N&&Object(r.createElement)(At,{onCloseModal:function(){k(!1)},onSuccess:function(e){k(!1);var r=Object(p.cloneDeep)(le);r.fields_data.advanced=[].concat(Kt(Oe),[e]),ne(t,n,a,o,r),M(Object(c.__)("Changes Saved","funnel-builder"))},SnackBarMsg:function(e){M(e)},stepId:n}),P&&Object(r.createElement)(Mt,{onCloseModal:function(){x(!1)},updated:function(e){var r=Object(p.cloneDeep)(le);r.fields.single_step[0].fields=e,ne(t,n,a,o,r),x(!1),M(Object(c.__)("Changes Saved","funnel-builder"))},updatedField:F,fields:b,SnackBarMsg:function(e){M(e)},stepId:n}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-squeezy",isLoading:A.loading,successMessage:A.success,errorMessage:A.error,isOpen:A.status,autoHide:8e3,closeIcon:!0,content:A.content,confirmText:A.confirmText,confirmButtonText:A.confirmButtonText,confirmButtonClass:A.confirmButtonClass,cancelButtonText:A.cancelButtonText,onConfirm:A.onConfirm,onCancel:A.onCancel,modalTitle:A.modalTitle,disableConfirm:A.disableConfirm,onRequestClose:function(){return I({status:!1})}}),z&&Object(r.createElement)(Be,{desc:Object(c.__)("Optin Email is required for optin form","funnel-builder"),onRequestClose:function(){return U(!1)}}),J.status&&Object(r.createElement)(ut.a,{isOpen:J.status,onRequestClose:function(){return G({status:!1})},modalContent:J})))},Wt=n(295);function Qt(e){return function(e){if(Array.isArray(e))return nn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){Xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||tn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){if(e){if("string"==typeof e)return nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rn=function(e){switch(e){case"1":case 1:return Object(c.__)("One Step","funnel-builder");case"2":case 2:return Object(c.__)("Two Step","funnel-builder");case"3":case 3:return Object(c.__)("Three Step","funnel-builder");case"inline":return Object(c.__)("Inline","funnel-builder");case"popup":return Object(c.__)("Popup","funnel-builder");default:return""}},an=function(e){var t=e.onDelete,n=e.type,a=e.stepId,u=e.offerId,s=e.tab,b=e.isLoading,O=e.fetchStep,j=e.additionalTabs,y=void 0===j?[]:j,_=e.design,g=e.postData,S=e.template,N=e.stepData,C=en(Object(r.useState)({}),2),P=C[0],x=C[1],T=en(Object(r.useState)(!0),2),A=T[0],I=T[1],D=en(Object(r.useState)(!1),2),F=D[0],R=D[1],B=Object(i.b)().showSnackbar,L=Object(w.a)().isFetchCompleted,M=Object(h.a)().setIsFormLoading,z=(N||{}).other_builder;Object(r.useEffect)((function(){b&&I(!0),["checkout","optin"].includes(n)&&!1===b&&null===L&&I(!0),["checkout","optin"].includes(n)&&!1===b&&!0===L&&(I(!1),M(!0)),!1===b&&void 0!==S&&I(!1)}),[b,L]);var U=function(){var e={modalTitle:Object(c.__)("Remove Template","funnel-builder"),content:Object(c.__)("You are about to remove this template. Any changes done to the current template will be lost. Cancel to stop, Remove to proceed.","funnel-builder"),cancelButtonText:Object(c.__)("Cancel","funnel-builder"),confirmButtonText:Object(c.__)("Remove","funnel-builder"),confirmButtonClass:"is-danger",status:!0};x(Zt(Zt({},e),{},{onConfirm:function(){!function(e){x(Zt(Zt({},e),{},{disableConfirm:!0}));try{var r="/funnel-".concat(n,"/").concat(u,"/design"),c="/funnel-".concat(n,"/").concat(a,"/design");d()({path:Object(v.q)("".concat("offer"===n?r:c)),method:"DELETE"}).then((function(e){e.success?(x({loading:!1,status:!1}),t()):x({status:!0,error:e.msg||e.message})}))}catch(e){x({status:!0,error:e.message||e.msg})}}(e)}}))};return Object(r.createElement)(r.Fragment,null,A&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-selected-template bwf-selected-template__placeholder"},Object(r.createElement)("div",{className:"bwf-mb-16 bwf-mt-8"},Object(r.createElement)("div",{className:"bwf-template-name"},Object(r.createElement)("span",{className:"bwf-template-title bwf-placeholder-temp bwf-h-28 bwf-w-400"}),Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-90"}),Object(r.createElement)("span",{className:"bwf-template-last-edited bwf-placeholder-temp bwf-h-20 bwf-w-150"})),Object(r.createElement)("div",{className:"bwf-title-info bwf-mt-4 bwf-placeholder-temp bwf-h-24 bwf-w-270"})),Object(r.createElement)("div",{className:"bwf-template"},Object(r.createElement)("div",{className:"bwf-template-image"},Object(r.createElement)("div",{className:"bwf-selected-designed bwf-placeholder-temp bwf-flex"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-25 bwf-w-150 bwf-mt-10"})),Object(r.createElement)("div",{className:"bwf-template-info"},Object(r.createElement)("div",{className:"bwf-action-btn"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-210 bwf-border-1 bwf-rounded-3 bwf-mr-16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-210 bwf-border-1 bwf-rounded-3"}),Object(r.createElement)("div",{className:"bwf-mt-16"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-16 bwf-w-100"}),Object(r.createElement)("div",{className:"bwf-h-36 bwf-w-full bwf-border-1 bwf-rounded-3 bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-16 bwf-w-200 bwf-ml-5 bwf-mt-10"})))))),Object(r.createElement)("div",{className:"bwf-additional-details"},Object(r.createElement)("div",{className:"bwf-settings"},Object(r.createElement)("div",{className:"bwf-additional-heading bwf-placeholder-temp bwf-h-28 bwf-w-210 bwf_display_block"}),Object(r.createElement)("div",{className:"bwf-additional-tab-hint bwf-mt-4 bwf-placeholder-temp bwf-h-20 bwf-w-300"}),Object(r.createElement)("div",{className:"bwf-shortcodes"},Qt(Array(3)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-additional-container",key:t},Object(r.createElement)("div",{className:"bwf-additional-title bwf-placeholder-temp bwf-h-16 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-copy-link bwf-placeholder bwf-placeholder-temp bwf-h-36"}))})))),["checkout","optin"].includes(n)&&Object(r.createElement)(bt,null))))),Object(r.createElement)("div",{className:"bwf-selected-template"},!A&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mb-16 bwf-mt-8"},Object(r.createElement)("div",{className:"bwf-template-name"},Object(r.createElement)("span",{className:"bwf-template-title"},Object(c.__)("Template: ","funnel-builder"),null!=S&&S.build_from_scratch?Object(c.__)("Start from scratch","funnel-builder"):null==S?void 0:S.name),S&&S.group&&Object(p.isArray)(S.group)&&S.group[0]&&Object(r.createElement)(dt.b,{content:rn(S.group[0])}),Object(r.createElement)("span",{className:"bwf-template-last-edited"},Object(c.__)("Last Edited","funnel-builder"),":"," ",null==g?void 0:g.post_modified_date))),Object(r.createElement)("div",{className:"bwf-template"},Object(r.createElement)("div",{className:"bwf-template-image"},Object(p.isEmpty)(null==S?void 0:S.thumbnail)?Object(r.createElement)("div",{className:"bwf-selected-designed is-build-from-scratch"},Object(r.createElement)("div",{className:"bwf-funnel-overlay"},Object(r.createElement)("div",{className:"bwf-middle-align"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(l.a,{icon:"default-template",width:"60",height:"60",color:"#82838E"}))))):Object(r.createElement)("div",{className:"bwf-selected-designed"},Object(r.createElement)("img",{src:null==S?void 0:S.thumbnail,alt:"thumbnail"})),Object(r.createElement)("div",{className:"bwf-delete-template bwf-cursor-pointer",onClick:function(){return U()}},Object(r.createElement)("span",null,Object(r.createElement)(l.a,{icon:"trash",color:"#82838E"})),Object(r.createElement)("span",{className:"bwf-delete-text"},Object(c.__)("Delete","funnel-builder")))),Object(r.createElement)("div",{className:"bwf-template-info bwf-additional-settings"},Object(r.createElement)("div",{className:"bwf-action-btn"},(!(null!=y&&y.some((function(e){return e.hasOwnProperty("tabs")})))||z&&z.page_builder&&"Other Page Builder"!==z.page_builder)&&Object(r.createElement)(r.Fragment,null,z&&z.page_builder?Object(r.createElement)("a",{className:"bwf-edit-template-btn components-button is-primary",href:null==z?void 0:z.url},Object(c.sprintf)(
/* translators: %s: Builder Name. */
Object(c.__)("Edit %s Template","funnel-builder"),z.page_builder)):Object(r.createElement)("a",{className:"bwf-edit-template-btn components-button is-primary",href:null==g?void 0:g.edit_link},Object(c.__)("Edit ","funnel-builder"),"embed_forms"===(null==_?void 0:_.builder_name)?Object(c.__)("Form","funnel-builder"):"pre_built"===(null==_?void 0:_.builder_name)?Object(c.__)("Customizer Template","funnel-builder"):(null==_?void 0:_.builder_name)+Object(c.__)(" Template","funnel-builder"))),"gutenberg"!==(null==_?void 0:_.selected_type)&&Object(r.createElement)("a",{className:"bwf-switch-editor-btn components-button is-secondary",href:null==g?void 0:g.post_edit_link},Object(c.__)("Switch to WordPress Editor","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-page-url bwf-mt-16"},"offer"!==n||"custom_page"!==(null==_?void 0:_.selected_type)?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-url-title"},Object(c.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==g?void 0:g.view_link),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(o.a,{toolTipText:Object(c.__)("Edit","funnel-builder"),size:50},Object(r.createElement)("div",{className:"bwf-edit-icon",onClick:function(){return R(!0)}},Object(r.createElement)(l.a,{icon:"edit",width:20,height:20,color:"#82838E"}))),Object(r.createElement)(o.a,{toolTipText:Object(c.__)("Copy","funnel-builder"),size:50},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return e="Page URL",(t=document.createElement("textarea")).value=null==g?void 0:g.view_link,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),B(e+" "+Object(c.__)("copied","funnel-builder")),void B(e+" copied");var e,t}},Object(r.createElement)(l.a,{icon:"duplicate",width:20,height:20,color:"#82838E"})))))):Object(r.createElement)(E.a,{status:"info"},Object(r.createElement)("strong",null,Object(c.__)("Information: ","funnel-builder")),Object(c.__)('Creating offers using WordPress custom pages is a legacy feature. We recommend using the "Start From Blank" option to create templates using your preferred page builder.',"funnel-builder")))),["wp_editor","embed_forms","custom"].includes(null==_?void 0:_.selected_type)&&Object(r.createElement)(Wt.a,{type:n}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-small",isLoading:P.loading,successMessage:P.success,errorMessage:P.error,isOpen:P.status,autoHide:8e3,closeIcon:!0,content:P.content,confirmText:P.confirmText,confirmButtonText:P.confirmButtonText,confirmButtonClass:P.confirmButtonClass,cancelButtonText:P.cancelButtonText,onConfirm:P.onConfirm,onCancel:P.onCancel,modalTitle:P.modalTitle,disableConfirm:P.disableConfirm,onRequestClose:function(){return x({status:!1})}}),F&&Object(r.createElement)(k,{pageUrl:null==g?void 0:g.view_link,urlSlug:null==g?void 0:g.post_name,toggleState:null==g?void 0:g.status,onRequestClose:function(){return R(!1)},stepId:"offer"===n?u:a,offerId:u,onComplete:O,type:n,stepTitle:null==g?void 0:g.post_title,stepDescription:null==g?void 0:g.post_description})),Object(r.createElement)("div",{className:"bwf-additional-details bwf-additional-settings"},Object(r.createElement)("div",{className:"bwf-settings"},y.map((function(e,t){return e&&e.hasOwnProperty("tabs")?Object(r.createElement)(q,{additionalTabs:e,key:"bwf-additional-tab-".concat(t),type:n,stepId:a,offerId:u,addTabIndex:t}):Object(r.createElement)(f,{additionalTabs:e,key:"bwf-additional-tab-".concat(t)})}))))),!b&&Object(r.createElement)("div",{className:"bwf-design-form"},"checkout"===n&&Object(r.createElement)(Et,{type:n,stepId:a,tab:s,offerId:u}),"optin"===n&&Object(r.createElement)(Gt,{type:n,stepId:a,tab:s,offerId:u}))))},cn=(n(294),n(304)),ln=n(76),on=n(30),un=["template","additional_tabs","design"];function sn(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function fn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.type,n=e.funnelID,c=Object(a.useParams)(),l=c.stepId,o=c.offerId,i=void 0===o?"":o,u=Object(r.useRef)(new AbortController),s=bn(Object(r.useState)(""),2),f=s[0],b=s[1],d=bn(Object(r.useState)([]),2),m=d[0],O=(d[1],bn(Object(r.useState)({}),2)),v=O[0],j=O[1],_=Object(y.a)(),w=_.fetchStep,E=_.setFunnelId,S=_.fetchStepFields,N=Object(g.a)(),k=N.getStep,C=N.getStepHeaderData,P=N.getFunnelData,x=Object(h.a)(),T=x.setStepData,A=x.setLoading,I=x.setStepFunnelData,D=x.setIsFormLoading,F=C(t,l,"design",i),R=P(),B=k(t,l,"design",i),L=B.data,M=void 0===L?{}:L,q=B.loading,z=void 0===q||q,U=M.step,V=void 0===U?{}:U,K=M.step_data,H=void 0===K?{}:K,$=on.a.getFunnelTitle(),J=V.template,G=void 0===J?{}:J,W=V.additional_tabs,Q=void 0===W?[]:W,Y=V.design,Z=void 0===Y?{}:Y,X=fn(V,un),ee=Object(ln.a)().setActiveGroup;Object(r.useEffect)((function(){D(!1),!Object(p.isEmpty)(R)&&Object(p.isEmpty)($)&&I(R),Object(p.isEmpty)(F)||(T(F),A(!1))}),[F,R,z]),Object(r.useEffect)((function(){f&&!z&&null===Q&&ee(f)}),[z,Q,f]),Object(r.useEffect)((function(){b("offer"===t?"upsell":"thankyou"===t?"wc_thankyou":"optin-confirmation"===t?"optin_ty":"checkout"===t?"wc_checkout":t)}),[t]);var te=function(){w(t,l,"design",i,u.current.signal)};Object(r.useEffect)((function(){"offer"===t&&Object.keys(v).length&&te()}),[v]),Object(r.useEffect)((function(){return Object(p.isEmpty)(M)&&te(),E(n),function(){u.current.abort()}}),[]);var ne=function(){var e,n=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te(),["optin","checkout"].includes(t)){e.next=3;break}return e.abrupt("return");case 3:setTimeout((function(){S(t,l,"design",i)}),100);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){sn(c,r,a,l,o,"next",e)}function o(e){sn(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-template-design"},"upsell"==f&&Object(r.createElement)("div",{className:"wfocu_secondary_top_bar"},Object(r.createElement)("div",{className:"wfocu_steps"},Object(r.createElement)("div",{className:"wfocu_steps_sortable ui-sortable"},null==m?void 0:m.map((function(e,t){return Object(r.createElement)("div",{key:e.id,className:"wfocu_step_container ui-sortable-handle "},Object(r.createElement)("a",{className:"wfocu_step ".concat(v.id==e.id?"current_offer":""),onClick:function(){j(e)}},Object(r.createElement)("span",{className:"step_name"},e.name)))}))))),z||null!==Q?Object(r.createElement)(an,{onDelete:function(){te()},isLoading:z,template:G,fetchStep:te,additionalTabs:Q,design:Z,postData:X,stepData:H,type:t,stepId:l,tab:"design",offerId:i}):Object(r.createElement)(cn.a,{onImportComplete:ne,urlDependency:!1,stepId:"offer"===t?i:l,funnelId:n})))}},373:function(e,t,n){"use strict";var r=n(0),a=n(2),c=n(7),l=n.n(c),o=n(1),i=n(13),u=n.n(i),s=n(9),f=n(4),b=(n(461),n(8)),d=n(248),m=n(77),p=n(20);function O(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=null;t.a=function(e){var t=e.onCloseModal,n=e.saveProduct,c=e.type,i=Object(r.useRef)(),v=h(Object(r.useState)(!1),2),y=v[0],_=v[1],g=h(Object(r.useState)([]),2),E=g[0],S=g[1],N=h(Object(r.useState)([]),2),k=N[0],C=N[1],P=h(Object(r.useState)(""),2),x=P[0],T=P[1],A=h(Object(r.useState)([]),2),I=A[0],D=A[1],F=h(Object(r.useState)(!1),2),R=F[0],B=F[1],L=h(Object(r.useState)(!1),2),M=L[0],q=L[1],z=h(Object(r.useState)(!1),2),U=z[0],V=z[1],K=h(Object(r.useState)(0),2),H=K[0],$=K[1],J=h(Object(r.useState)(""),2),G=J[0],W=J[1],Q=function(){t()};Object(f.hb)(i,(function(){_(!1),B(!1),T("")})),Object(r.useEffect)((function(){return x.length>0?(clearTimeout(w),w=setTimeout((function(){B(!0),u()({path:Object(f.q)("/funnels/products/search_variant?term=".concat(x,"&variations=").concat(U,"&type=").concat(c))}).then((function(e){if(B(!1),e.success){_(!0);var t=e.data.products.map((function(e){return j(j({},e),{},{uniqueKey:e.id+"bwf"+Math.floor(1e3*Math.random())})}));D(t)}else _(!0),D([{id:"no-data-found",product:Object(o.__)("Oops! No products found. Consider changing the search query.","funnel-builder"),noResult:!0}])}))}),750)):(clearTimeout(w),D([])),function(){B(!1)}}),[x]);var Y=function(){k.length?(W(""),q(!0),n(k)):W(Object(o.__)("Please add atleast one product","funnel-builder"))};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-large bwf-admin-modal-no-header bwf-modal-overflow-visible",isDismissible:!1},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(o.__)("Add Product","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(o.__)("Close"),onClick:function(){return Q()}},Object(r.createElement)(b.a,{icon:"close",size:20})))),G&&Object(r.createElement)("div",{className:"bwf-mt-16"},Object(r.createElement)(m.a,{errorMessage:G})),Object(r.createElement)("div",{className:"bwf-search-list-components bwf-product-search-list",ref:i},Object(r.createElement)("div",{className:"bwf-conatiner-heading bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-title"},Object(o.__)("Select Product","funnel-builder")),Object(r.createElement)("div",{className:"bwf-product-variant"},Object(r.createElement)(d.a,{checked:U,onChange:function(){return V(!U)},label:Object(o.__)("Include Variant","funnel-builder")}))),Object(r.createElement)("div",{className:"bwf-input-container"},Object(r.createElement)("input",{type:"text",autoComplete:"off",onChange:function(e){return T(e.target.value)},className:"bwf-input",placeholder:0==x.length?Object(o.__)("Search product to add","funnel-builder"):"",value:x||"",onKeyDown:function(e){38===e.keyCode&&H>0?$(H-1):40===e.keyCode&&H<I.length-1&&$(H+1)},onKeyPress:function(e){"Enter"===e.key&&Object(a.size)(I)>0&&(e.preventDefault(),"no-data-found"!==I[0].id&&(S([].concat(O(E),[I[H]])),C([].concat(O(k),[I[H].id])),setTimeout((function(){_(!1)})),T(""),$(0),D([]))),"Enter"===e.key&&0==Object(a.size)(I)&&Object(a.size)(E)>0&&Y()}}),Object(r.createElement)("div",{className:"bwf-placeholder"},Object(r.createElement)(b.a,{icon:"search",size:15})),Object(r.createElement)("div",{className:"bwf-product-arrow"},Object(r.createElement)(b.a,{icon:"angle-down",height:12,width:12}))),Object(r.createElement)("div",{className:" ".concat(y||R?"bwf-options bwf-custom-search-list-popover":"bwf-hide"," ")},R?Object(r.createElement)("ul",{className:"multiselect__content bwf-inline-block bwf-w-full bwf-m-0"},Object(r.createElement)("li",{className:"bwf-text",id:"customSelect"},Object(r.createElement)("span",{className:"bwf-no-data-found bwf-select-option"},Object(o.__)("Fetching Products…","funnel-builder")))):Object(r.createElement)("ul",{className:"multiselect__content bwf-inline-block bwf-w-full bwf-m-0"},null==I?void 0:I.map((function(e,t){var n=e.product_stock_status?"bwf-tag-green":"bwf-tag-red";return Object(r.createElement)("li",{onMouseOver:function(){"no-data-found"!==I[0].id&&$(t)},className:"bwf-text ".concat("active-result ".concat(H!==t||e.hasOwnProperty("noResult")?"":"bwf-select-active")," "),key:t,onClick:function(t){"no-data-found"!==I[0].id&&(S([].concat(O(E),[e])),C([].concat(O(k),[e.id])),setTimeout((function(){_(!1)})),T(""),$(0),D([]))},id:"customSelect",tabIndex:"0"},e&&"no-data-found"!==e.id&&Object(r.createElement)("div",{className:"bwf-options-data"},Object(r.createElement)("span",{className:" bwf-select-option"},Object(r.createElement)("span",null,null==e?void 0:e.product," ","(#".concat(e.id,")")," ",Object(r.createElement)("span",{className:l()("bwf-tags",n)},e.product_stock))),Object(r.createElement)("span",{className:"bwf-flex"},null==e?void 0:e.product_attribute),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:Object(a.isEmpty)(null==e?void 0:e.product_price)?"0":"".concat(null==e?void 0:e.product_price)},className:"bwf-flex",style:{padding:"0 12px"}})),e&&"no-data-found"==e.id&&Object(r.createElement)("span",{className:" bwf-select-option bwf-no-data-found"},null==e?void 0:e.product))}))))),Object(r.createElement)("div",{className:" ".concat(E.length>0?"bwf-selected-data":"")},null==E?void 0:E.map((function(e,t){return Object(r.createElement)("div",{key:t,className:"bwf-prd-list-wrap"},Object(r.createElement)("div",{className:"bwf-product-image"},Object(r.createElement)("img",{src:e.product_image,alt:Object(o.__)("Product")})),Object(r.createElement)("div",{className:"bwf-selected-text"},null==e?void 0:e.product," ",Object(r.createElement)("span",{className:l()("bwf-tags",{"bwf-tag-green":null==e?void 0:e.product_stock_status},{"bwf-tag-red":!(null!=e&&e.product_stock_status)})},null==e?void 0:e.product_stock)),Object(r.createElement)("div",{className:"bwf-selected-text bwf-lh-16"},null==e?void 0:e.product_attribute),Object(r.createElement)("div",{className:"bwf-selected-text bwf-lh-16"},null==e?void 0:e.product_price),Object(r.createElement)("div",{onClick:function(){var t=E.filter((function(t){if(t.uniqueKey!=e.uniqueKey)return t}));S(t);var n=t.map((function(e){return e.id}));C(n)},className:"bwf-delete-product"},Object(r.createElement)(b.a,{icon:"delete"})))}))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons bwf-mt-24 bwf-mr-2"},Object(r.createElement)(p.a,{onClick:function(){return Q()},className:"bwf-modal-cancel-btn"},Object(o.__)("Cancel","funnel-builder")),Object(r.createElement)(p.a,{isPrimary:!0,disabled:!k.length||M,className:k.length?"":"bwf-no-ripple",isBusy:M,onClick:Y},Object(o.__)("Add","funnel-builder")))))}},382:function(e,t,n){},383:function(e,t,n){},413:function(e,t,n){},459:function(e,t,n){},460:function(e,t,n){},461:function(e,t,n){},462:function(e,t,n){},463:function(e,t,n){},464:function(e,t,n){},466:function(t,n,r){"use strict";var a=r(0),c=r(254),l=r(8),o=r(1),i=(r(459),r(9)),u=r(50);r(460);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.onCloseModal,n=e.source,r=s(Object(a.useState)(!1),2),c=r[0],f=r[1],b=function(){t()};return Object(a.useEffect)((function(){document.getElementById("createProduct").addEventListener("load",(function(){f(!0)}))}),[]),Object(a.createElement)(i.Modal,{onRequestClose:function(){return b},className:"bwf-admin-modal bwf-create-product-modal bwf-modal-no-header",isDismissible:!1,focusOnMount:!1},!c&&Object(a.createElement)(u.a,{size:"xl",className:"bwf-iframe-loader"}),Object(a.createElement)("div",{className:"bwf-custom-modal-header"},Object(a.createElement)("div",{className:"bwf-frame-modal-close bwf-cursor-pointer",title:Object(o.__)("Close"),onClick:function(){return b()}},Object(a.createElement)(l.a,{icon:"close",width:"13",height:"13"}))),Object(a.createElement)("div",{className:"bwf-create-product-frame"},Object(a.createElement)("iframe",{id:"createProduct",src:n,className:"".concat(c?"":"bwf-hide")})))},d=r(373),m=r(13),p=r.n(m),O=r(4),v=r(40),j=r(55),y=r(29);function h(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=e.productAdded,n=e.type,r=e.stepId,i=e.offerId,u=e.showError,s=_(Object(a.useState)(!1),2),f=s[0],m=s[1],g=_(Object(a.useState)(!1),2),w=g[0],E=g[1],S=Object(v.a)().setStepData,N=Object(j.a)().setStepHeaderData,k=Object(y.a)().setSingleStepData,C=[{type:"icon",data:{class:"bwf-pb-gap",content:"bump"===n||"checkout"===n?Object(a.createElement)(l.a,{icon:"zero-checkout"}):Object(a.createElement)(l.a,{icon:"zero-offer"})}},{type:"content",data:{class:"bwf-zero-heading",content:"bump"===n?Object(o.__)("Add a product as order bump","funnel-builder"):"checkout"===n?Object(o.__)("Add a product to Checkout","funnel-builder"):Object(o.__)("Add a product to this offer","funnel-builder")}},{type:"content",data:{class:"bwf-zero-content",content:"bump"===n?Object(o.__)("Choose a complimentary product to increase the uptake rate","funnel-builder"):"checkout"===n?Object(o.__)("Sell one or multiple products. No limitations. Skip this in case of store checkout","funnel-builder"):Object(o.__)("Add a product that perfectly complements your customer's main purchase","funnel-builder")}},{type:"buttons",data:{buttons:[{text:Object(o.__)("Add Product","funnel-builder"),onClick:function(){m(!0)},proCheck:!1},{text:Object(o.__)("Create Product","funnel-builder"),onClick:function(){E(!0)},proCheck:!1}],class:"bwf-zero-btn"}}],P=function(){var e,a=(e=regeneratorRuntime.mark((function e(a){var c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="/funnel-".concat(n,"/").concat("offer"===n?i:r,"/products"),e.prev=1,l='{"products":['.concat(a,"]}"),e.next=5,p()({path:Object(O.q)(c),method:"POST",data:JSON.parse(l)}).then((function(e){e.success?(e.hasOwnProperty("step_data")&&(S(e.step_data),N(n,r,i,e.step_data)),e.hasOwnProperty("step_list")&&k(e.step_list.id,e.step_list),t(),m(!1)):u(e.msg||e.message)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),u(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){h(c,r,a,l,o,"next",e)}function o(e){h(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(e){return a.apply(this,arguments)}}();return Object(a.createElement)("div",{className:"wfacp_product_container"},Object(a.createElement)("div",{className:"wfacp_welcome_card"},Object(a.createElement)(c.a,{data:C})),f&&Object(a.createElement)(d.a,{onCloseModal:function(){m(!1)},productAdded:function(){return t()},type:n,saveProduct:function(e){P(e)}}),w&&Object(a.createElement)(b,{source:wffn_contacts_data.wc_add_product_url,onCloseModal:function(){return E(!1)}}))},E=r(244),S=r(247),N=r(2),k=r(7),C=r.n(k),P=r(51),x=(r(462),r(26)),T=["label","className","selected","help","onChange","hideLabelFromVision","options","radio_alignment"];function A(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function I(e){var t=e.label,n=e.className,r=e.selected,c=e.help,l=e.onChange,o=e.hideLabelFromVision,u=e.options,s=void 0===u?[]:u,f=e.radio_alignment,b=void 0===f?"vertical":f,d=(A(e,T),Object(P.useInstanceId)(I)),m="inspector-radio-control-".concat(d),p=function(e){return l(e.target.value)};return Object(a.createElement)("div",{className:"bwf-radio-control"},Object(a.createElement)("style",null,".components-radio-control .components-base-control__field {display:grid; ".concat("horizontal"==b&&"grid-template-columns: 80px 1fr;"," }")),!Object(N.isEmpty)(s)&&Object(a.createElement)("div",{className:"".concat(t?"bwf-radio-container":"")},t&&Object(a.createElement)("label",null,t),Object(a.createElement)(i.BaseControl,{id:"".concat(m),hideLabelFromVision:o,help:c,className:C()(n,"components-radio-control")},s.map((function(e,t){return Object(a.createElement)("div",{key:"".concat(m,"-").concat(t),className:"components-radio-control__option bwf-radio-option","radio-align":b,onClick:function(){e.is_locked&&e.lockAction&&e.lockAction(e.label)}},e.is_locked?Object(a.createElement)(x.a,null):Object(a.createElement)("input",{id:"".concat(m,"-").concat(t),className:"components-radio-control__input ".concat(e.value===r?"active":""),type:"radio",name:m,value:e.value,onChange:p,checked:e.value===r,"aria-describedby":c?"".concat(m,"__help"):void 0}),Object(a.createElement)("label",{htmlFor:"".concat(m,"-").concat(t),className:"".concat(e.value===r?"selectedOption":"unselectedOption")},e.label))})))))}var D=r(296),F=(r(463),r(252)),R=r(37),B=r(79),L=r(108),M=r(349);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z=[{id:"delete",icon:"trash",hint:Object(o.__)("Delete Funnels","funnel-builder")}],U=function(e){var t=e.floatingBarProps,n=void 0===t?{}:t,r=(e.resetSelection,e.selectedProduct),c=Object(a.useCallback)((function(e,t){var n=null==t?void 0:t.map((function(e){return e.id}));r(n)}),[]);return Object(a.createElement)(M.a,q({actions:z,onAction:c},n))},V=r(248);function K(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){return[{label:"",width:"1%"},{label:"Name",width:"25%",class:"bwf-pl-50"},{label:"Type",width:"10%"},{label:"Discount",width:"25%"}].concat(K("offer"===e?[{label:"Flat Shipping",width:"10%"}]:[]),[{label:"Quantity",width:"10%"},{label:"Status",width:"offer"===e?"15%":"10%"}])},J=[{label:Object(o.__)("Percentage % on Sale Price","funnel-builder"),value:"percent_discount_sale",key:"percent_discount_sale"},{label:Object(o.__)("Percentage % on Regular Price","funnel-builder"),value:"percent_discount_reg",key:"percent_discount_reg"},{label:Object(o.__)("Fixed Amount on Sale Price","funnel-builder"),value:"fixed_discount_sale",key:"fixed_discount_sale"},{label:Object(o.__)("Fixed Amount on Regular Price","funnel-builder"),value:"fixed_discount_reg",key:"fixed_discount_reg"}],G=[{label:Object(o.__)("Percentage % on Sale Price","funnel-builder"),value:"percentage_on_sale",key:"percentage_on_sale"},{label:Object(o.__)("Percentage % on Regular Price","funnel-builder"),value:"percentage_on_reg",key:"percentage_on_reg"},{label:Object(o.__)("Fixed Amount on Sale Price","funnel-builder"),value:"fixed_on_sale",key:"fixed_on_sale"},{label:Object(o.__)("Fixed Amount on Regular Price","funnel-builder"),value:"fixed_on_reg",key:"fixed_on_reg"}],W=r(75),Q=function(e){return Object(a.createElement)("div",{className:"bwf-flex bwf--g8"},Object(a.createElement)(x.b,{content:e.product_stock,type:!1===e.product_stock_status?"danger":"success",className:"bwf-mt-4"}),e.hasOwnProperty("product_status")&&["draft","trash","private"].includes(e.product_status)?Object(a.createElement)(W.a,{toolTipText:Object(o.sprintf)(
/* translators: %s: Step Count. */
Object(o.__)("This product is in the %s in WooCommerce and will not appear on your checkout page.","funnel-builder"),e.product_status),size:280,position:"bottom right",iconSize:"unset"},Object(a.createElement)("div",{className:"bwf-tags bwf-tag-red bwf-flex bwf--g2 bwf-mt-4 bwf-text-capitalize"},e.product_status,Object(a.createElement)(l.a,{icon:"info",color:"red",height:"12",width:"12"}))):null)},Y=function(e,t,n,r){n[t].discount_amount=e,r(JSON.parse(JSON.stringify(n)))},Z=function(e){return("one_time"===e.value||!e.isChecked)&&"readOnly"};function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e){var t=e.productData,n=e.newProductValue,r=e.productKey,c=e.getDiscountPrice,u=e.getDiscountToolTip,s=ne(Object(a.useState)([]),2),f=s[0],b=s[1],d=ne(Object(a.useState)(!1),2),m=d[0],p=d[1],v=Object(O.s)(),j=null!=t&&t.currency_symbol?Object(R.decodeEntities)(null==t?void 0:t.currency_symbol):"$";Object(a.useEffect)((function(){var e=(null==t?void 0:t.variations.map((function(e){return t.checkVarient.includes(e.id)?ee(ee({},e),{},{isChecked:!0}):e}))).map((function(e){return t.radioVarient==e.id?ee(ee({},e),{},{isSelected:t.radioVarient}):e}));b(e)}),[t]),Object(a.useEffect)((function(){var e,t=f.filter((function(e){return e.isChecked})).map((function(e){return e.id})),a=null===(e=f.filter((function(e){return"number"==typeof e.isSelected}))[0])||void 0===e?void 0:e.id;null!=a&&null!=t&&n({checkedVariant:t,selectedVariantId:a,products:f,productKey:r})}),[f]);var y=function(e,t){var n=f.map((function(n){return"all"===e||n.id===e?ee(ee({},n),{},{isChecked:t}):n}));b(n)};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-toggle-variant ".concat(m?"bwf-hide-variant":""),onClick:function(){p(!m)}},Object(a.createElement)("div",{className:"bwf-have-variation"},"".concat(m?"Hide":"View"," All ").concat(Object(N.size)(t.variations)," Variants")),Object(a.createElement)("div",{className:"bwf-toggle-icon"},m?Object(a.createElement)(l.a,{icon:"angle-up",color:"#0073AA",size:14}):Object(a.createElement)(l.a,{icon:"angle-down",color:"#0073AA",size:14}))),m&&Object(a.createElement)("table",{className:"bwf-w-full"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,function(e,t){return[{content:Object(a.createElement)(V.a,{checked:!e.some((function(e){return!0!==(null==e?void 0:e.isChecked)})),onChange:function(e){return t("all",e)}})},{content:Object(o.__)("Default","funnel-builder")},{content:Object(o.__)("Attributes","funnel-builder")},{content:Object(o.__)("Regular Price","funnel-builder")},{content:Object(o.__)("Sale Price","funnel-builder")},{content:Object(o.__)("Discounted Price","funnel-builder")},{content:Object(o.__)("Discount","funnel-builder")},{content:Object(o.__)("Status","funnel-builder")}]}(f,y).map((function(e,t){return Object(a.createElement)("th",{key:t,className:"bwf-table-header"},e.content)})))),Object(a.createElement)("tbody",null,null==f?void 0:f.map((function(e,n){return Object(a.createElement)("tr",{className:"product_variation_row",key:n},Object(a.createElement)("td",{className:"bwf-table-item bwf-checkbox-column"},Object(a.createElement)("div",{className:"form-check",key:n},Object(a.createElement)("span",{className:"components-checklist__input-container"},Object(a.createElement)(V.a,{checked:(null==e?void 0:e.isChecked)||!1,onChange:function(t){return y(e.id,t)}})))),Object(a.createElement)("td",{className:"bwf-table-item"},Object(a.createElement)(i.RadioControl,{selected:null==e?void 0:e.isSelected,options:[{label:"",value:e.id}],onChange:function(e){return function(e){var t=f.map((function(t){return t.id.toString()===e?ee(ee({},t),{},{isSelected:parseInt(e)}):ee(ee({},t),{},{isSelected:!1})}));b(t)}(e)}})),Object(a.createElement)("td",{className:"bwf-table-item"},e.attributes.map((function(e){return e}))),Object(a.createElement)("td",{className:"bwf-table-item bwf-product-price",style:{color:"var(--wffn-primary-text)"}},v.formatAmount(null==e?void 0:e.regular_price)),Object(a.createElement)("td",{className:"bwf-table-item"},null!=e&&e.is_on_sale?v.formatAmount(null==e?void 0:e.sale_price):"-"),Object(a.createElement)("td",{className:"bwf-table-item"},function(e,t){var n,r=e.regular_price,l=e.sale_price,o=e.is_on_sale,i=t.shipping_cost_flat,s=void 0===i?0:i,f=t.discount_type,b=void 0===f?"":f,d=t.quantity,m=null!==(n=null==e?void 0:e.discount_amount)&&void 0!==n?n:0,p=c(r,l,o,b,m,s,d),O=p.offerPrice,y=p.discount,h=u(r,l,y,s,O,j,o,d);return Object(a.createElement)("div",{className:"bwf-product-price",style:{color:"var(--wffn-primary-text)"}},v.formatAmount(O),h)}(e,t)),Object(a.createElement)("td",{className:"bwf-table-item"},function(e,t){return Object(a.createElement)("div",{className:"bwf-number-control"},Object(a.createElement)("input",{type:"number",value:e.discount_amount,onChange:function(e){return Y(Math.abs(e.target.value),t,f,b)},readOnly:!e.isChecked&&"readOnly",className:"discount_number bwf-product-number",max:"100",min:"0",step:"0.01"}))}(e,n)),Object(a.createElement)("td",{className:"bwf-table-item"},Q(e)))})))))},ce=r(74),le=r(263),oe=r(21);function ie(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var de=function(e){var t=e.offerId,n=e.stepId,r=e.type,a=e.products,c=e.setProducts,l=e.onChange,i=e.setFieldsToShow,u=e.setModelData,s=e.saveChanges,f=e.setIsOpen,b=Object(v.a)().setStepData,d=Object(j.a)().setStepHeaderData,m=Object(y.a)().setSingleStepData,h=Object(oe.b)().showSnackbar;return{deleteProduct:function(e){u({modalTitle:Object(o.__)("Remove Product","funnel-builder"),content:Object(o.__)("You are about to remove this product. This action cannot be undone. Cancel to stop, Remove to proceed.","funnel-builder"),cancelButtonText:Object(o.__)("Cancel","funnel-builder"),confirmButtonText:Object(o.__)("Remove","funnel-builder"),confirmButtonClass:"is-danger",status:!0,onConfirm:function(){!function(e){try{u((function(e){return fe(fe({},e),{},{disableConfirm:!0,cancelButtonText:Object(o.__)("Cancel","funnel-builder"),shouldCloseOnClickOutside:!1})}));var s="/funnel-".concat(r,"/").concat("offer"===r?t:n,"/products"),f='{"product_key":'.concat(JSON.stringify(e),"}");p()({path:Object(O.q)(s),data:JSON.parse(f),method:"DELETE"}).then((function(s){if(s.success){s.hasOwnProperty("step_data")&&(b(s.step_data),d(r,n,t,s.step_data)),s.hasOwnProperty("step_list")&&m(s.step_list.id,s.step_list),u({loading:!1,status:!1});var f=a.filter((function(t){if(t.id!==e)return t}));c(f);var p=s.hasOwnProperty("fields_to_show")?s.fields_to_show:[];l(f,p),Object(N.isEmpty)(p)||i(p),h(Object(o.__)("Successfully product deleted","funnel-builder"))}else u({status:!0,error:s.msg||s.message}),h(s.msg||s.message)}))}catch(e){u({status:!0,error:e.message||e.msg}),h(e.msg||e.message)}}(e)}})},addProduct:function(e){var o="/funnel-".concat(r,"/").concat("offer"===r?t:n,"/products");try{var v='{"products":['.concat(e,"]}");p()({path:Object(O.q)(o),method:"POST",data:JSON.parse(v)}).then((function(e){if(e.success){e.hasOwnProperty("step_data")&&(b(e.step_data),d(r,n,t,e.step_data)),e.hasOwnProperty("step_list")&&m(e.step_list.id,e.step_list),c([].concat(ie(a),ie(e.data.products)));var o=e.hasOwnProperty("fields_to_show")?e.fields_to_show:[];s([].concat(ie(a),ie(e.data.products)),o),l([].concat(ie(a),ie(e.data.products)),o),Object(N.isEmpty)(o)||i(o),f(!1)}else u({status:!0,error:e.msg||e.message})}))}catch(e){u({status:!0,error:e.message||e.msg})}}}};function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ye=function(e){var t=e.productData,n=e.newProductValue,r=e.productKey,c=e.getDiscountPrice,u=ve(Object(a.useState)([]),2),s=u[0],f=u[1],b=ve(Object(a.useState)(!1),2),d=b[0],m=b[1];Object(a.useEffect)((function(){var e=(null==t?void 0:t.schemes.map((function(e){return t.checkVarient.includes(e.value)?pe(pe({},e),{},{isChecked:!0}):e}))).map((function(e){return t.radioVarient==e.value?pe(pe({},e),{},{isSelected:t.radioVarient}):e}));f(e)}),[t]),Object(a.useEffect)((function(){var e,t=s.filter((function(e){return e.isChecked})).map((function(e){return e.value})),a=null===(e=s.filter((function(e){return"string"==typeof e.isSelected}))[0])||void 0===e?void 0:e.value;null!=a&&null!=t&&n({checkedVariant:t,selectedVariantId:a,products:s,productKey:r})}),[s]);var p=function(e,t){var n=s.map((function(n){return"all"===e||n.value===e?pe(pe({},n),{},{isChecked:t}):n}));f(n)},v=function(e,t,n){var r,l=t.regular_price,o=t.sale_price,i=t.is_on_sale,u=t.shipping_cost_flat,s=void 0===u?0:u,f=t.discount_type,b=void 0===f?"":f,d=t.quantity,m=null!==(r=null==e?void 0:e.discount_amount)&&void 0!==r?r:0;return function(e,t,n,r,c){if("one_time"===e.value)return e.value;var l=Object(O.s)();if(["percentage_on_sale","fixed_on_sale"].includes(n))return Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},Object(a.createElement)("abbr",{className:Number(t)?"bwf-line-through":""},l.formatAmount(r)),Number(t)?Object(a.createElement)("abbr",{className:"bwf-underline"},l.formatAmount(t)):null,Object(a.createElement)("abbr",{dangerouslySetInnerHTML:{__html:e.description_text}}));if(["percentage_on_reg","fixed_on_reg"].includes(n)){var o=Number(t)>Number(c);return Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},o&&Number(t)!==Number(c)?Object(a.createElement)("abbr",{className:"bwf-line-through"},l.formatAmount(t)):null,Object(a.createElement)("abbr",{className:"bwf-underline"},l.formatAmount(o?c:t)),Object(a.createElement)("abbr",{dangerouslySetInnerHTML:{__html:e.description_text}}))}}(e,c(l,o,i,b,m,s,d).offerPrice,b,l,o)};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-toggle-variant ".concat(d?"bwf-hide-variant":""),onClick:function(){m(!d)}},Object(a.createElement)("div",{className:"bwf-have-variation"},"".concat(d?"Hide":"View"," All ").concat(Object(N.size)(null==t?void 0:t.schemes)," Schemes")),Object(a.createElement)("div",{className:"bwf-toggle-icon"},d?Object(a.createElement)(l.a,{icon:"angle-up",color:"#0073AA",size:14}):Object(a.createElement)(l.a,{icon:"angle-down",color:"#0073AA",size:14}))),d&&Object(a.createElement)("table",{className:"bwf-w-full"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,function(e,t){return[{content:Object(a.createElement)(V.a,{checked:!e.some((function(e){return!0!==(null==e?void 0:e.isChecked)})),onChange:function(e){return t("all",e)}})},{content:Object(o.__)("Default","funnel-builder")},{content:Object(o.__)("Attributes","funnel-builder")},{content:Object(o.__)("Price","funnel-builder")},{content:Object(o.__)("Discount","funnel-builder")}]}(s,p).map((function(e,t){return Object(a.createElement)("th",{key:t,className:"bwf-table-header"},e.content)})))),Object(a.createElement)("tbody",null,null==s?void 0:s.map((function(e,n){var r;return Object(a.createElement)("tr",{className:"product_variation_row",key:n},Object(a.createElement)("td",{className:"bwf-table-item bwf-checkbox-column"},Object(a.createElement)("div",{className:"form-check",key:n},Object(a.createElement)("span",{className:"components-checklist__input-container"},Object(a.createElement)(V.a,{checked:(null==e?void 0:e.isChecked)||!1,onChange:function(t){return p(e.value,t)}})))),Object(a.createElement)("td",{className:"bwf-table-item"},Object(a.createElement)(i.RadioControl,{selected:null==e?void 0:e.isSelected,options:[{label:"",value:e.value}],onChange:function(e){return function(e){var t=s.map((function(t){return t.value.toString()===e?pe(pe({},t),{},{isSelected:e}):pe(pe({},t),{},{isSelected:!1})}));f(t)}(e)}})),Object(a.createElement)("td",{className:"bwf-table-item"},null===(r=Object.keys(null==e?void 0:e.attributes))||void 0===r?void 0:r.map((function(t,n){return Object(a.createElement)("div",{key:n},"".concat(t,": ").concat(null==e?void 0:e.attributes[t]))}))),Object(a.createElement)("td",{className:"bwf-table-item"},v(e,t)),Object(a.createElement)("td",{className:"bwf-number-control"},function(e,t){return Object(a.createElement)("input",{type:"number",value:e.discount_amount,onChange:function(e){return Y(e.target.value,t,s,f)},readOnly:Z(e),className:"discount_number bwf-product-number",max:"100",min:"0",step:"0.01"})}(e,n)))})))))};function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||Ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ne=function(e){var t=e.productData,n=e.type,r=e.onChange,c=e.stepId,u=e.offerId,s=e.onSorting,f=e.isDynamicShipping,m=void 0!==f&&f,p=e.saveChanges,v=e.setFieldsToShow,j=we(Object(a.useState)({}),2),y=j[0],h=j[1],_=we(Object(a.useState)([]),2),g=_[0],w=_[1],S=we(Object(a.useState)(!1),2),k=S[0],P=S[1],x=we(Object(a.useState)(!1),2),T=x[0],A=x[1],I=we(Object(a.useState)(""),2),D=I[0],F=I[1],q=Object(O.s)(),z=de({offerId:u,stepId:c,type:n,products:g,setProducts:w,onChange:r,setFieldsToShow:v,setModelData:h,saveChanges:p,setIsOpen:P}),V=z.deleteProduct,K=z.addProduct;Object(a.useEffect)((function(){w(t)}),[t]);var H=Object(a.useMemo)((function(){var e={};if(Array.isArray(g)){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ee(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,c=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw c}}}}(g);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[g]),Y=Object(M.b)(H),Z=Y.floatingBarProps,X=Y.resetSelection,ee=function(e,t){var a=JSON.parse(JSON.stringify(g));("percent_discount_sale"===a[t].discount_type||"percent_discount_reg"===a[t].discount_type)&&e>100?a[t].discount_amount=100:a[t].discount_amount=e,function(e,t,r,a){if("offer"===n&&!Object(N.isEmpty)(e[t][a])){var c=e[t][a].map((function(e){return e.discount_amount=r,e}));e[t][a]=c}}(a,t,e,"variable"===a[t].product_type?"variations":"schemes"),w(a),r(a)},te=function(e,t){("percent_discount_sale"===e||"percent_discount_reg"===e)&&g[t].discount_amount>100&&(g[t].discount_amount=100),g[t].discount_type=e;var n=JSON.parse(JSON.stringify(g));w(n),r(n)},ne=function(e,t){g[t].quantity=e;var n=JSON.parse(JSON.stringify(g));w(n),r(n)},re=function(e,t){g[t].shipping_cost_flat=e;var n=JSON.parse(JSON.stringify(g));w(n),r(n)},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6?arguments[6]:void 0,i=0,u=r?["percentage_on_reg","fixed_on_reg","percent_discount_reg","fixed_discount_reg"].includes(a)?e*o:t*o:e*o,s=Number(c),f=u;if(["fixed_discount_reg","fixed_on_reg","fixed_discount_sale","fixed_on_sale"].includes(a)?i=s*o:["percent_discount_sale","percentage_on_sale"].includes(a)?i=s/100*u:"percent_discount_reg"!==a&&"percentage_on_reg"!==a||(i=s/100*u),["fixed_discount_reg","fixed_on_reg","percent_discount_reg","percentage_on_reg"].includes(a)){var b="offer"===n?Number(u)+(m?0:Number(l)):u;f=Math.max(b-i,0)}else{var d="offer"===n?Number(u)+(m?0:Number(l)):u;f=Math.max(d-i,0)}return{offerPrice:Number(f).toFixed(2),discount:Number(i).toFixed(2),fixedDiscount:a.includes("fixed")}},ie=function(e,t,r,c,i,u,s,f,b){return Object(a.createElement)("div",{className:"bwf-flatship-tooltip-wrap"},Object(a.createElement)(W.a,{position:"bottom right",toolTipText:Object(a.createElement)("div",{className:"bwf-flatship-tooltip"},Object(a.createElement)("table",null,Object(a.createElement)("tbody",null,Object(a.createElement)("tr",null,Object(a.createElement)("td",null,Object(o.__)("Regular Price x ","funnel-builder")+f),Object(a.createElement)("td",{align:"right"},s?["percentage_on_reg","fixed_on_reg","percent_discount_reg","fixed_discount_reg"].includes(b)?q.formatAmount(e*f):q.formatAmount(t*f):q.formatAmount(e*f))),"offer"===n&&Object(a.createElement)("tr",null,Object(a.createElement)("td",null,Object(o.__)("Flat Shipping","funnel-builder")),Object(a.createElement)("td",{align:"right"},"+",q.formatAmount(m?0:Number(c)))),Object(a.createElement)("tr",null,Object(a.createElement)("td",null,Object(o.__)("Discount","funnel-builder")),Object(a.createElement)("td",{align:"right"},"-",q.formatAmount(r))),Object(a.createElement)("tr",null,Object(a.createElement)("td",null,Object(o.__)("Total","funnel-builder")),Object(a.createElement)("td",{align:"right"},q.formatAmount(i)))))),visible:!0,size:180},Object(a.createElement)(l.a,{icon:"help-circle",size:16})))},ue=function(e){var t,r=e.discount_type,c=void 0===r?"":r,i=e.shipping_cost_flat,u=void 0===i?0:i,s=e.regular_price,f=e.sale_price,b=e.is_on_sale,d=e.product_type,m=e.price_range,p=e.quantity,v=(null!=e&&e.currency_symbol&&Object(R.decodeEntities)(null==e?void 0:e.currency_symbol),null!==(t=null==e?void 0:e.discount_amount)&&void 0!==t?t:0),j=oe(s,f,b,c,v,u,p),y=j.offerPrice,h=j.discount,_=ie(s,f,h,u,y,0,b,p,c);return Object(a.createElement)("div",{className:"bwf-product-info-container","data-product-id":null==e?void 0:e.key},Object(a.createElement)("div",null,function(e){return Object(a.createElement)("div",{className:"bwf-product-table-icon"},Object(a.createElement)(L.a,{menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(B.a,{isClickable:!0,onInvoke:function(){n(),V(e.id)}},Object(o.__)("Delete","funnel-builder")))}}))}(e)),Object(a.createElement)("div",{className:"bwf-product-image bwf-mt-3"},Object(a.createElement)("img",{src:null==e?void 0:e.product_image,alt:""})),"offer"!==n||"variable"!==(null==e?void 0:e.product_type)?Object(a.createElement)("div",{className:"bwf-product-info bwf-mt-3","data-product-id":null==e?void 0:e.key},Object(a.createElement)("a",{href:Object(O.N)("variation"===(null==e?void 0:e.product_type)&&null!=e&&e.parent_product_id?e.parent_product_id:null==e?void 0:e.key),className:"bwf-product-name",target:"__blank"},Object(R.decodeEntities)(null==e?void 0:e.title),Object(a.createElement)(l.a,{icon:"external-link",size:"16"})),Object(a.createElement)("div",{className:"bwf-product-price-wrap"},"variable"!==d&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-product-price"},Object(o.__)(" Regular Price: ","funnel-builder"),q.formatAmount(s),b&&","),b&&Object(a.createElement)("div",{className:"bwf-product-price"},Object(o.__)(" Sale Price: ","funnel-builder"),q.formatAmount(f)))),"variable"===d&&Object(a.createElement)("div",{className:"bwf-product-price"},"Price: ".concat(m)),Object(a.createElement)("div",{className:"bwf-product-price"},Object(o.__)("Offer Price: ","funnel-builder"),q.formatAmount(y),_)):Object(a.createElement)("div",{className:"bwf-pt-6"},Object(a.createElement)("a",{href:Object(O.N)(null==e?void 0:e.key),className:"bwf-product-name",target:"__blank"},Object(R.decodeEntities)(null==e?void 0:e.title),Object(a.createElement)(l.a,{icon:"external-link",size:"16"}))))},se=function(e,t){"variant"===t&&(g[e.productKey].variations=e.products),"schemes"===t&&(g[e.productKey].schemes=e.products),g[e.productKey].checkVarient=e.checkedVariant,g[e.productKey].radioVarient=e.selectedVariantId,r(g)},fe=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({background:e?"#F9F9FF":"white",boxShadow:e?"0px 1px 12px #DEDFEA":"none"},t)},be=Object(N.size)($(n).filter((function(e){return null!==e})));return Object(a.createElement)("div",{className:"bwf-product-table"},Object(a.createElement)(le.a,{onDragEnd:function(e){var t=e.source,n=e.destination;if(F(""),e.destination){var r,a,c,l,o,i=(r=g,a=t.index,c=n.index,l=Array.from(r),o=we(l.splice(a,1),1)[0],l.splice(c,0,o),l);parseInt(t.index)!==parseInt(n.index)&&(w(i),s(i))}},onDragStart:function(e){F(e.draggableId)}},Object(a.createElement)("table",{width:"100%"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,$(n).map((function(e,t){return null!==e.label&&Object(a.createElement)("th",{key:t,className:C()("bwf-table-header",e.class),width:e.width},e.label)})))),Object(a.createElement)(le.c,{droppableId:"droppable"},(function(e){return Object(a.createElement)("tbody",he({},e.droppableProps,{ref:e.innerRef}),null==g?void 0:g.map((function(e,t){return Object(a.createElement)(le.b,{key:e.id,draggableId:e.id||"product-".concat(t),index:t},(function(r,c){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("tr",he({ref:r.innerRef},r.draggableProps,r.dragHandleProps,{style:fe(c.isDragging,r.draggableProps.style),className:0===Object(N.size)(e.variations)&&0===Object(N.size)(e.schemes)?"bwf-table-spacer":null}),Object(a.createElement)("td",he({className:" bwf-product-action",width:"1%"},r.dragHandleProps),Object(a.createElement)("span",{className:"bwf-product-table-icon bwf-cursor-move",title:Object(o.__)("Click here and start drag and drop","funnel-builder")},Object(a.createElement)(l.a,{icon:"ul",size:"20"}))),Object(a.createElement)("td",{width:"25%"},ue(e)),Object(a.createElement)("td",{width:"10%"},Object(a.createElement)("div",{className:"bwf-mt-6"},null==e?void 0:e.product_type)),Object(a.createElement)("td",{width:"25%"},function(e,t){return Object(a.createElement)("div",{className:"bwf-number-control"},Object(a.createElement)("input",{type:"number",className:"discount_number bwf-product-number",value:e.discount_amount,onChange:function(e){return ee(Math.abs(e.target.value),t)},step:"0.1",max:"percent_discount_sale"===e.discount_type||"percent_discount_reg"===e.discount_type?"100":"",min:"0"}),Object(a.createElement)(E.b,{options:"offer"===n?G:J,selected:e.discount_type,onChange:function(e){te(e,t)}}))}(e,t)),"offer"===n&&Object(a.createElement)("td",{width:"10%"},function(e,t){var n;return Object(a.createElement)("div",{className:"bwf-number-control"},Object(a.createElement)("div",{className:"bwf-flat-ship-inp-wrap"},Object(a.createElement)("input",{type:"number",className:"discount_number bwf-w-40 bwf-product-number ".concat(m?"bwf-disable-input":""),value:null!==(n=null==e?void 0:e.shipping_cost_flat)&&void 0!==n?n:0,onChange:function(e){return re(e.target.value,t)},disabled:m,step:"0.01",min:"0"})))}(e,t)),Object(a.createElement)("td",{width:"10%"},function(e,t){return Object(a.createElement)("div",{className:"bwf-number-control"},Object(a.createElement)("input",{type:"number",className:"discount_number bwf-product-number",value:e.quantity,onChange:function(e){return ne(Math.abs(e.target.value)>1?Math.abs(e.target.value):1,t)},min:"1"}))}(e,t)),Object(a.createElement)("td",{width:"offer"===n?"15%":"10%"},Q(e))),Object(a.createElement)("tr",null,Object(N.size)(e.variations)>0&&!Object(N.size)(D)&&Object(a.createElement)("td",{colSpan:be},Object(a.createElement)(ae,{productData:e,newProductValue:function(e){return se(e,"variant")},productKey:t,getDiscountPrice:oe,getDiscountToolTip:ie}))),Object(a.createElement)("tr",null,Object(N.size)(e.schemes)>0&&!Object(N.size)(D)&&Object(a.createElement)("td",{colSpan:be},Object(a.createElement)(ye,{productData:e,newProductValue:function(e){return se(e,"schemes")},productKey:t,getDiscountPrice:oe,getDiscountToolTip:ie}))))}))})),e.placeholder)})))),Object(a.createElement)("div",{className:"bwf-mt-16 bwf-product-btn-container"},Object(a.createElement)(i.Button,{className:"bwf-product-btn bwf-no-ripple",isPrimary:!0,"btn-type":"add",onClick:function(){return P(!0)}},Object(o.__)("Add Product","funnel-builder")),Object(a.createElement)(i.Button,{className:"bwf-product-btn","btn-type":"create",onClick:function(){return A(!0)}},Object(o.__)("Create Product","funnel-builder"))),k&&Object(a.createElement)(d.a,{onCloseModal:function(){P(!1)},type:n,saveProduct:function(e){K(e)}}),T&&Object(a.createElement)(b,{source:wffn_contacts_data.wc_add_product_url,onCloseModal:function(){return A(!1)}}),Object(a.createElement)(ce.a,{className:"bwf-admin-modal-squeezy",isLoading:y.loading,successMessage:y.success,errorMessage:y.error,isOpen:y.status,autoHide:8e3,closeIcon:!0,content:y.content,confirmText:y.confirmText,confirmButtonText:y.confirmButtonText,confirmButtonClass:y.confirmButtonClass,cancelButtonText:y.cancelButtonText,onConfirm:y.onConfirm,onCancel:y.onCancel,modalTitle:y.modalTitle,disableConfirm:y.disableConfirm,onRequestClose:function(){return h({status:!1})}}),Object(a.createElement)(U,{floatingBarProps:Z,resetSelection:X,selectedProduct:function(e){return V(e)}}))},ke=r(301),Ce=r(20),Pe=r(60);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||Re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){if(e){if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Le={radio:I,radios:I,"custom-select":D.a,select:E.b,checklist:F.a,"offer-select":E.b,input:i.TextControl,number:function(e){var t=e.value,n=e.onChange,r=e.placeholder,c=e.label,l=e.required;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("label",{id:l?"required":""},c),Object(a.createElement)("input",{type:"number",className:"bwf-h-36 bwf-number-container",value:t,onChange:function(e){return n(e.target.value)},placeholder:r}))},"custom-html":function(e){var t=e.label;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-custom-html",dangerouslySetInnerHTML:{__html:t}}))},"chosen-select":function(e){var t=e.apiEndPoint,n=e.options,r=e.onChange,c=e.value,l=Fe(Object(a.useState)([]),2),i=l[0],u=l[1],s=Fe(Object(a.useState)(n),2),f=s[0],b=s[1],d=Fe(Object(a.useState)(c),2),m=d[0],v=d[1],j=Fe(Object(a.useState)(!1),2),y=j[0],h=j[1];Object(a.useEffect)((function(){r(m)}),[m]);var _=function(e){Object(N.size)(e)?h(!0):h(!1);var n=t.includes("?")?"".concat(t,"&term=").concat(e):"".concat(t,"?term=").concat(e);p()({path:Object(O.q)(n)}).then((function(t){t&&Object(N.size)(e)&&Object(N.isArray)(t.data.products)&&!Object(N.isEmpty)(t.data.products)?(u(t.data.products),b(t.data.products)):u([{id:"no-result",name:'No result match "'.concat(e,'"')}]),h(!1)})).catch((function(e){h(!1),console.log(e)}))};Object(a.useEffect)((function(){_("")}),[]);var g=Object(N.isArray)(m)?m.map((function(e){return e.id.toString()})):[];return Object(a.createElement)(ke.a,{values:g,searchedValue:function(e){_(e)},selectedValue:m,onChangeValue:function(){},hasDefaultOption:f,onChangeData:function(e){var t=e.map((function(e){var t;return{id:null==e||null===(t=e.id)||void 0===t?void 0:t.toString(),label:e.label||e.name}}));v(De(t))},options:De(i.filter((function(e){return g.findIndex((function(t){return t.id===e.id}))<0}))),defaultOptions:f,isLoading:y,placeholder:Object(o.__)("Search…","funnel-builder")})}},Me=function(t){var n=t.productData,r=t.stepId,c=t.setting,l=t.type,i=t.offerId,u=t.updateProduct,s=t.updateSettings,f=t.extraData,b=void 0===f?{}:f,d=Object(oe.a)().isProFeatureLocked,m=Object(oe.b)().showSnackbar,h=Fe(Object(a.useState)([]),2),_=h[0],g=h[1],w=Fe(Object(a.useState)([]),2),E=w[0],k=w[1],P=Fe(Object(a.useState)({}),2),x=P[0],T=P[1],A=Fe(Object(a.useState)(""),2),I=A[0],D=A[1],F=Fe(Object(a.useState)(""),2),R=F[0],B=F[1],L=Fe(Object(a.useState)(!1),2),M=L[0],q=L[1],z=Fe(Object(a.useState)(!1),2),U=z[0],V=z[1],K=Fe(Object(a.useState)(""),2),H=K[0],$=K[1],J=Fe(Object(a.useState)([]),2),G=J[0],W=J[1],Q=Fe(Object(a.useState)(!0),2),Y=Q[0],Z=Q[1],X=Object(v.a)().setStepData,ee=Object(j.a)().setStepHeaderData,te=Object(y.a)().setSingleStepData;Object(a.useEffect)((function(){k(null==c?void 0:c.fields),T(null==c?void 0:c.values),D(null==c?void 0:c.settingName),W(null==c?void 0:c.fields_to_show)}),[c]),Object(a.useEffect)((function(){R&&(m(R),B(""))}),[R]);var ne=x;Object(a.useEffect)((function(){g(n)}),[n]);var re=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];f&&q(!0);try{var b={products:t||_,settings:x},d="/funnel-".concat(l,"/").concat("offer"===l?i:r,"/products/save-layout");p()({path:Object(O.q)(d),method:"POST",data:b}).then((function(e){if(e.success&&f){e.hasOwnProperty("step_data")&&(X(e.step_data),ee(l,r,i,e.step_data)),e.hasOwnProperty("step_list")&&te(e.step_list.id,e.step_list);var b=Object(N.cloneDeep)(c),d={products:t||_,settings:Ae(Ae({},b),{},{values:Ae(Ae({},b.values),x)})};Object(N.isEmpty)(n)||(d.settings.fields_to_show=n),s(d),a&&u(t||_),B(Object(o.__)("Changes Saved","funnel-builder")),q(!1)}else f&&(q(!1),B(e.msg))}))}catch(t){console.log(e),q(!1),B(e.message)}};Object(a.useEffect)((function(){Y&&Z(!1)}),[]),Object(a.useEffect)((function(){U?(re(!1,!1,!0),V(!1)):Y||re(!1,!1,!1,!1)}),[_]);var ae=function(e){var t=Object.assign({},e.props);return e.type.toLowerCase()in Le||(t.type=e.type.toLowerCase()),t.placeholder=e.placeholder,t.selected=e.default,Array.isArray(e.values)&&e.values&&e.values.map((function(e){e.name&&(e.label=e.name,delete e.name),e.id&&(e.value=e.id)})),t.options=e.options||e.values,t.radio_alignment=e.radio_alignment,e.checkboxlabel&&(t.checkboxlabel=e.checkboxlabel),e.multiple&&(t.multiple=e.multiple),e.ajax_cb&&(t.ajax_cb=e.ajax_cb),"copier"!==e.type&&"custom-select"!==e.type||(t=e),"select"===e.type&&(t.excludeSelectedOptions=!1,t.options&&(t.options=t.options.map((function(e){return"object"!==xe(e.value)&&(e.key="object"!==xe(e.value)?e.value:e.key,e.value={id:e.value}),e}))),e.multiple&&(t.excludeSelectedOptions=!0,t.inlineTags=!0)),"richeditor"===e.type&&(t.id=e.id),"text"===e.type&&e.disabled&&(t.disabled=e.disabled),"chosen-select"===e.type&&(t.apiEndPoint=e.apiEndPoint,t.options=e.options),"radios"!==e.type&&"radio"!==e.type||(t.options=t.options.map((function(e){return Ae(Ae({},e),d&&e.is_pro&&{lockAction:function(){return $(e.label?e.label.split("(")[0]:"")},is_locked:!0})}))),t};return Object(a.createElement)("div",{className:"bwf-step-product"},Object(a.createElement)("div",{className:"bwf_products_container"},Object(a.createElement)("div",{className:"bwf-flex bwf--space-between bwf-step-sticky bwf-mb-12"},Object(a.createElement)("div",{className:"bwf-total-product"},Object(a.createElement)("span",{className:"bwf-mr-4"},Object(o.__)("All Products","funnel-builder")),"(",null==_?void 0:_.length,")"),Object(a.createElement)("div",null,Object(a.createElement)(Ce.a,{isPrimary:!0,isBusy:M,disabled:M,onClick:function(){return re()}},Object(o.__)("Save","funnel-builder")))),Object(a.createElement)("div",{className:"wfacp_product_list_wrap wfacp_bg_table bwf-product-table-container"},Object(a.createElement)(Ne,{productData:_,type:l,stepId:r,offerId:i,onChange:function(e,t){return u(e,t)},onSorting:function(e){g(e),V(!0)},isDynamicShipping:null==b?void 0:b.ship_dynamic,saveChanges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(N.cloneDeep)(c),r={products:e||_,settings:Ae(Ae({},n),{},{values:Ae(Ae({},n.values),x)})};Object(N.isEmpty)(t)||(r.settings.fields_to_show=t),s(r)},setFieldsToShow:function(e){W(e)}}),Object(a.createElement)("div",{className:"bwf_clear"})),Object(a.createElement)("div",{className:"product_settings_wrap"},Object(a.createElement)("div",{className:"product_settings_inner_container"},Object(a.createElement)("div",{className:"product_settings bwf-product-body"},Object(a.createElement)("div",{className:"product_settings_title bwf-product-setting"},I),Object(a.createElement)("div",null,Object(a.createElement)("div",{className:"bwf_product"},Object(a.createElement)(S.a,{validate:function(){return{}},initialValues:ne,onChange:function(e,t,n){T(t)}},(function(e){var t=e.getInputProps,n=(e.onChange,e.values);return Object(a.createElement)(a.Fragment,null,null==E?void 0:E.map((function(e,r){return Object(a.createElement)(a.Fragment,{key:r},(!e.toggler||function e(t,n){var r=!0;try{var a,c,l=!1;if(!t[n.key])return l;if(c=t[n.key],Array.isArray(n.value)&&Array.isArray(c)){for(var o=0;o<c.length;o++)if(n.value.indexOf(c[o])>-1){l=!0;break}}else Array.isArray(n.value)?n.value.includes(c)&&(l=!0):c==n.value&&(l=!0);var i=E&&(null===(a=E.find((function(e){return e.key===n.key})))||void 0===a?void 0:a.toggler);i&&(r=e(t,i))}catch(e){console.log(e),l=!1}return l&&r}(n,e.toggler))&&("offer"!==l||(null==G?void 0:G.includes(e.key)))&&function(e,t){e.type=e.inputType?e.inputType:e.type;var n=e.type.toLowerCase()in Le?Le[e.type.toLowerCase()]:Le.text;return Object(a.createElement)("div",{className:C()("form-group",{"bwf-product-label":e.label},{"bwf-product-no-label":!e.label},{"bwf-product-no-label":"custom-html"===e.type},{"bwf-radio-settings":"radios"==e.type||"radio"==e.type},{"bwf-offer-select":"offer-select"==e.type||"select"==e.type||"checklist"==e.type},{"bwf-custom-select":"custom-select"==e.type},{"bwf-offer-number":"number"==e.type},{"bwf-clear":"checkbox"==e.type})},e.label&&Object(a.createElement)(n,Ae(Ae({label:e.label},ae(e)),t)),!e.label&&Object(a.createElement)(n,Ae(Ae({},ae(e)),t)))}(e,t(e.key)))})))})),Object(a.createElement)("div",null))))))),!Object(N.isEmpty)(H)&&Object(a.createElement)(Pe.a,{isOpen:!Object(N.isEmpty)(H),onRequestClose:function(){$(!1)},modalContent:{proLink:Object(O.K)(["Product","Switcher","Upgrade","Modal"])}}))},qe=r(119);r(464);function ze(e){return function(e){if(Array.isArray(e))return Ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ve=function(){return Object(a.createElement)("div",null,Object(a.createElement)("div",{className:"bwf-flex bwf--space-between bwf-mb-12"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-18 "}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-36 "})),Object(a.createElement)("div",{className:"bwf-mb-24"},Object(a.createElement)("div",{className:"bwf-mb-24 bwf-overflow-hide"},ze(Array(4)).map((function(e,t){return Object(a.createElement)("div",{className:"bwf-product-container",key:t},Object(a.createElement)("div",{className:"bwf-product-shimmer"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-25 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-16"})))}))),Object(a.createElement)("div",null,Object(a.createElement)("div",{className:"bwf-product-btn-container"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-36"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-36"})))),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-180 bwf-h-24 bwf-mb-8"}),ze(Array(4)).map((function(e,t){return Object(a.createElement)("div",{key:t},Object(a.createElement)("div",{className:"bwf-mt-24 bwf-flex"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-110 bwf-mr-46"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-500"})))})))},Ke=r(107),He=r(30),$e=["products","settings","InitialValue"];function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){We(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.a=function(e){var t=e.type,n=void 0===t?"":t,r=e.funnelID,c=void 0===r?"":r,l=Object(qe.useParams)(),o=l.stepId,i=l.offerId,u=Object(oe.b)().showSnackbar,s=Ye(Object(a.useState)(""),2),f=s[0],b=s[1],d=Object(a.useRef)(new AbortController),m=Object(v.a)(),p=m.setStepFunnelData,O=m.setStepData,y=m.setStepsError,h=m.setLoading,_=Object(j.a)(),g=_.fetchStep,E=_.fetchStepFields,S=_.setFunnelId,k=_.setTabData,C=(_.unsetTabData,Object(Ke.a)()),P=C.getStep,x=C.getStepHeaderData,T=C.getFunnelData,A=x(n,o,"design",i),I=T(),D=He.a.getFunnelTitle();Object(a.useEffect)((function(){!Object(N.isEmpty)(I)&&Object(N.isEmpty)(D)&&p(I),Object(N.isEmpty)(A)||(O(A),h(!1))}),[A,I]);var F=P(n,o,"products",i),R=F.data,B=void 0===R?{}:R,L=F.loading,M=void 0===L||L,q=B.products,z=void 0===q?[]:q,U=B.settings,V=void 0===U?{}:U,K=B.InitialValue,H=void 0===K?{}:K,$=Qe(B,$e);Object(a.useEffect)((function(){f&&(u(f),b(""))}),[f]);var J=function(){g(n,o,"products",i,d.current.signal)};Object(a.useEffect)((function(){return S(c),function(){d.current.abort()}}),[]),Object(a.useEffect)((function(){Object(N.isEmpty)(B)&&J()}),[]);var G=function(){"checkout"===n&&E(n,o,"design",i),"bump"!==n&&"offer"!==n||g(n,o,"design",i)},W=Object(a.useRef)();return Object(a.createElement)(a.Fragment,null,M?Object(a.createElement)(Ve,null):Object(a.createElement)("div",{className:"wfacp_funnels",id:"wfacp_control","data-id":"144","data-template-set":"yes"},Object(a.createElement)("div",{className:"wfacp_inside"},Object(a.createElement)("div",{className:"wfacp_wrap wfacp_box_size product"},Object(a.createElement)("div",{className:"wfacp_loader bwf-hide"},Object(a.createElement)("span",{className:"spinner"})),null==z||0==z.length?Object(a.createElement)(w,{productAdded:function(){J(),G()},type:n,stepId:o,offerId:i,showError:function(e){y(e)}}):Object(a.createElement)(Me,{productData:z,stepId:o,setting:V,updateProduct:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(N.cloneDeep)(B);r.products=e,Object(N.isEmpty)(t)||(r.settings.fields_to_show=t),k(n,o,"products",i,r);var a=e.map((function(e){return e.key}));Object(N.isEqual)(a,W.current)||(G(),W.current=a)},InitialValue:H,type:n,offerId:i,showError:function(e){y(e)},updateSettings:function(e){var t=Object(N.cloneDeep)(B);t=Ge(Ge({},t),e),k(n,o,"products",i,t),G()},extraData:$})))))}},591:function(e,t,n){"use strict";var r=n(0),a=n(13),c=n.n(a),l=n(4),o=(n(592),n(21)),i=n(20);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.label,n=e.apiEndPoint,a=e.data,s=u(Object(r.useState)(!1),2),f=s[0],b=s[1],d=Object(o.b)().showSnackbar;return Object(r.createElement)(i.a,{isPrimary:!0,isBusy:f,disabled:f,onClick:function(){return b(!0),void c()({path:Object(l.q)("".concat(n)),method:"POST",data:{options:JSON.stringify(a)}}).then((function(e){e.msg?(d(e.msg),b(!1)):(b(!1),d(e.msg))})).catch((function(e){console.log(e),b(!1),d(e.message)}))},style:{marginLeft:"320px"},className:"bwf-test-email-button"},t)}},592:function(e,t,n){}}]);