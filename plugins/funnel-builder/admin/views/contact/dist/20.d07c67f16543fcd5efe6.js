(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1156:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(25),c=n(1),a=n(13),l=n.n(a),i=n(309),u=(n(313),n(9)),s=n(21),f=function(e){var t=e.onFileSelected,n=e.htmlData,o=e.filetypeArray,a=e.btnLabel,l=Object(s.b)().showSnackbar,i=function(e){e&&e[0]&&"type"in e[0]?o.includes(e[0].type)?t(e[0]):l(Object(c.__)("Uploaded file is not valid.","funnel-builder")):l(Object(c.__)("Uploaded file not found","funnel-builder"))};return Object(r.createElement)("div",{className:"bwf-c-import-page-wrapper"},Object(r.createElement)(u.DropZoneProvider,null,Object(r.createElement)("div",null,Object(r.createElement)(u.Placeholder,{className:"bwf-import-dropzone-wrap",label:Object(r.createElement)(r.Fragment,null,n&&Object(r.createElement)(r.Fragment,null,n),Object(r.createElement)("div",{className:""},Object(r.createElement)("span",{className:"bwf-mr-15"},a||Object(c.__)("Drop you file OR","funnel-builder"))),Object(r.createElement)("div",null,Object(r.createElement)(u.FormFileUpload,{isSecondary:!0,accept:"application/json",onChange:function(e){return i(e.target.files)}},Object(c.__)("Click here to upload","funnel-builder"))))}),Object(r.createElement)(u.DropZone,{onFilesDrop:i,onHTMLDrop:i,onDrop:i}))),Object(r.createElement)("div",{className:"bwf_clear_20"}))},b=n(74),p=n(154),m=n(4),d=n(14);function y(e,t,n,r,o,c,a){try{var l=e[c](a),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,o)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,c=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=location&&location.search?Object(o.parse)(location.search.substring(1)):{};Object(p.a)("import",Object(c.__)("Import Funnel","funnel-builder"),0,!0);var n=O(Object(r.useState)({status:!1,loading:!0}),2),a=n[0],u=n[1],v=O(Object(r.useState)(null),2),j=v[0],h=v[1];Object(m.i)(Object(c.__)("Import","funnel-builder"));var w=Object(s.b)().showSnackbar,_=Object(r.createElement)("div",{className:"bwf_display_block"},Object(r.createElement)("div",{className:"bwf-p-15 bwf_display_block"},Object(r.createElement)("div",{className:"bwf_clear_15"}),Object(r.createElement)("div",{className:""},Object(c.__)("Import Funnels","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2 bwf-pt-15"},Object(c.__)("This tool allows you to import the funnels from the JSON file.","funnel-builder")))),E=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"}," ",Object(c.__)("Please waitâ€¦","funnel-builder")),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"}," ",Object(c.__)("We are importing funnel.","funnel-builder")))}),e.prev=1,(n=new FormData).append("files",j),e.next=6,l()({method:"POST",body:n,path:Object(m.q)("/funnels/import")}).then((function(e){1==e.status?(u({status:!1}),Object(d.k)({},"/funnels",t)):(w(e.message),u({status:!1}),h(null))})).catch((function(e){u({status:!0,error:e.message})}));case 6:e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),h(null),u({status:!0,error:Object(c.__)("Unable to import Funnel.","funnel-builder")});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function a(e){y(c,r,o,a,l,"next",e)}function l(e){y(c,r,o,a,l,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){j&&E()}),[j]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(i.a,null),Object(r.createElement)("div",{className:"bwfcrm-overview-wrap"},Object(r.createElement)(f,{onFileSelected:function(e){return h(e)},htmlData:_,filetypeArray:["application/json"],btnLabel:Object(c.__)("Drop your JSON file here OR","funnel-builder")})),Object(r.createElement)(b.a,{isLoading:a.loading,successMessage:a.success,errorMessage:a.error,isOpen:a.status,content:a.content,onRequestClose:function(){return u({status:!1})}}))}},309:function(e,t,n){"use strict";var r=n(0),o=n(17),c=n.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,e);var t,n,o,c=u(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=c.call(this,e)).scrollTo=t.scrollTo.bind(f(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){setTimeout(this.scrollTo,250)}},{key:"scrollTo",value:function(){var e=this.props.offset;this.ref.current?window.scrollTo(0,parseInt(e,10)):setTimeout(this.scrollTo,250)}},{key:"render",value:function(){var e=this.props.children;return this.ref=Object(r.createRef)(),Object(r.createElement)("div",{ref:this.ref},e)}}])&&l(t.prototype,n),o&&l(t,o),a}(r.Component);p.propTypes={offset:c.a.string},p.defaultProps={offset:"0"},t.a=p},313:function(e,t,n){}}]);