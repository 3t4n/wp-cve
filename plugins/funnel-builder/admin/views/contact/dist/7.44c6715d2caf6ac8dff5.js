(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{245:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),c=n(2),l=n(7),a=n.n(l),o=n(51),i=n(9),u=(n(271),n(26)),s=["label","className","selected","help","onChange","hideLabelFromVision","options","disabled"];function p(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function f(e){var t=e.label,n=e.className,l=e.selected,b=e.help,m=e.onChange,d=e.hideLabelFromVision,O=e.options,j=void 0===O?[]:O,v=e.disabled,y=void 0!==v&&v,_=(p(e,s),Object(o.useInstanceId)(f)),h="inspector-radio-control-".concat(_),w=function(e){return m(e.target.value)};return!Object(c.isEmpty)(j)&&Object(r.createElement)(i.BaseControl,{label:t,id:h,hideLabelFromVision:d,help:b,className:a()(n,"components-radio-control bwf-components-radio-control")},Object(r.createElement)("div",{className:"bwf-radio-control-inner"},j.map((function(e,t){return Object(r.createElement)("div",{key:"".concat(h,"-").concat(t),className:"components-radio-control__option"},Object(r.createElement)("input",{id:"".concat(h,"-").concat(t),className:"components-radio-control__input",type:"radio",name:h,value:e.value,onChange:w,checked:e.value===l,disabled:y||e.disabled||e.isPro,"aria-describedby":b?"".concat(h,"__help"):void 0}),e.isPro&&Object(r.createElement)(u.a,null),Object(r.createElement)("label",{htmlFor:"".concat(h,"-").concat(t)},e.label))}))))}},249:function(e,t,n){"use strict";var r=n(24),c=["getStateProp"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}t.a=function(){var e=Object(r.a)("templates"),t=e.getStateProp;return a(a({},i(e,c)),{},{getTemplates:function(){return t("templates")},getBuilders:function(){return t("builders")},getFilters:function(){return t("filters")},templateLoading:function(){return t("isLoading")},getDefaultBuilder:function(){return t("default_builder")},getActiveBuilder:function(){return t("active_builder")},getActiveGroup:function(){return t("active_group")},getCurrentTemplate:function(){return t("current_template")},getActiveStep:function(){return t("active_step")},getActiveSubFilter:function(){return t("active_sub_filter")},getPageBuildersTexts:function(){return t("page_builders_texts")},getPageBuildersOptions:function(){return t("page_builders_options")},getImportBtnLabel:function(){return t("import_btn_label")},getScratchTemplateType:function(){return t("scratch_template_type")},getImportOffer:function(){return t("import_offer")}})}},251:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return O}));var r=n(0),c=n(9),l=n(1),a=n(14),o=n(4);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){return"yes"===e.pro?wffn.i18n.ribbons.pro:wffn.i18n.ribbons.lite},f=function(e){var t=e.FB_PRO_STATUS,n=e.funnelId,c=e.importType,i=e.activeTemplateGroup;return u(u({title:!1===t?Object(l.__)("Templates are a PRO Feature","funnel-builder"):Object(l.__)("Unable to Import Template","funnel-builder"),content:!1===t?Object(r.createElement)(r.Fragment,null,Object(l.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(l.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(l.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(l.__)("inactive or has expired.","funnel-builder")),Object(l.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==t&&{action:function(){return Object(a.k)({},"/settings/")}}),{},{proLink:Object(o.K)([0===n||"funnel"===c?"Template":"Step",i,"Build","From","Scratch","Upgrade","Modal"])})},b=function(e){var t=e.templateName,n=e.FB_PRO_STATUS,c=e.funnelId,i=e.activeGroup,s=e.activeStep;return u(u({title:!1===n?Object(r.createElement)(r.Fragment,null,t,Object(l.__)(" is a PRO template","funnel-builder")):Object(l.__)("Unable to Import Template","funnel-builder"),content:!1===n?Object(r.createElement)(r.Fragment,null,Object(l.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(l.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(l.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(l.__)("inactive or has expired.","funnel-builder")),Object(l.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==n&&{action:function(){return Object(a.k)({},"/settings/")}}),{},{proLink:Object(o.K)([c?"Step":"Template",c?i:"upsell"===i?"upsell":s,t,"Upgrade","Modal"])})},m=function(e){var t=e.showSnackbar,n=e.hideSnackbar,a=e.builder,o=e.defaultBuilder,i=e.onConfirm,u=e.defaultEditorLoading;o===a||u||t(Object(r.createElement)("div",null,Object(l.__)("Want to make this default page builder?","funnel-builder"),"Â ",Object(r.createElement)(c.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){i(a),n()}},Object(l.__)("Yes","funnel-builder")),Object(r.createElement)(c.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){return n()}},Object(l.__)("No","funnel-builder"))),!1)},d=function(e,t){var n=e;return"upsell"===t&&"wp_editor"===e?n="custom":"wc_checkout"===t&&"wp_editor"===e?n="embed_forms":"wc_checkout"===t&&"customizer"===e&&(n="pre_built"),n},O={optin:{inline:Object(l.__)("Inline","funnel-builder"),popup:Object(l.__)("Popup","funnel-builder")},wc_checkout:{1:Object(l.__)("One","funnel-builder"),2:Object(l.__)("Two","funnel-builder"),3:Object(l.__)("Three","funnel-builder")}}},252:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(0),c=n(9),l=n(51),a=n(2),o=n(7),i=n.n(o),u=(n(287),n(75)),s=n(26);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=e.label,n=e.className,o=e.value,m=e.help,d=e.options,j=void 0===d?[]:d,v=e.onBlur,y=(void 0===v&&a.noop,e.onChange),_=void 0===y?a.noop:y,h=e.onFocus,w=(void 0===h&&a.noop,e.disabled),g=e.showtooltip,E=void 0!==g&&g,k=e.tooltipmsg,S=void 0===k?"":k,T=b(Object(r.useState)(!0),2),C=T[0],P=T[1],N=Object(l.useInstanceId)(O);if(Object(a.isEmpty)(j))return null;var I="inspector-checklist-".concat(N);o=null!=o&&o?o:[];var A=i()("components-checklist",n),F=function(e){var t=f(o);!0===e.target.checked?o.includes(e.target.value)||t.push(e.target.value):t=o.filter((function(t){return t!==e.target.value})),_(t,{event:e}),P(!1)};return Object(r.createElement)(c.BaseControl,{label:t,id:I,help:m},Object(r.createElement)("div",{className:"component-checklist-option-wrap ".concat(A)},j.map((function(e,t){return Object(r.createElement)(u.a,{toolTipText:e.disable&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},S),visible:E&&e.disable||!1,size:280,iconSize:"auto",key:"".concat(I,"-").concat(t),position:"bottom right"},Object(r.createElement)("div",{key:"".concat(I,"-").concat(t),className:i()("bwf-checkbox-control")},Object(r.createElement)("span",{className:i()("bwf-checkbox-control-inner",{"bwf-checkbox-disabled":e.disable})},Object(r.createElement)("input",p({id:"".concat(I,"-").concat(t),type:"checkbox",value:e.value,onChange:e.disable?function(){}:F,checked:(n=o,c=e.value,!!Array.isArray(n)&&n.includes(c)),className:i()({"bwf-no-animation":C}),"aria-describedby":m?"".concat(I,"__help"):void 0},(w||e.isPro)&&{disabled:!0}))),e.isPro&&Object(r.createElement)(s.a,null),Object(r.createElement)("label",{htmlFor:"".concat(I,"-").concat(t)},e.label)));var n,c}))))}},271:function(e,t,n){},273:function(e,t,n){"use strict";var r=n(0),c=n(1),l=n(8);n(293);t.a=function(e){var t=e.onClose,n=e.title,a=e.isDismissible,o=void 0===a||a;return Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},n),o&&Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(c.__)("Close","funnel-builder"),onClick:function(){return t()}},Object(r.createElement)(l.a,{icon:"close",size:20})))}},285:function(e,t,n){"use strict";var r=n(0),c=n(9),l=n(2),a=n(1),o=(n(314),n(17)),i=n.n(o),u=n(7),s=n.n(u),p=n(8),f=n(32);n(50);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.onSearch,n=e.isLoading,o=e.items,i=e.onItemClick,u=e.error,m=e.blurText,d=e.placeholder,O=void 0===d?Object(a.__)("Type to search","funnel-builder"):d,j=e.helpText,v=e.multiGroup,y=void 0!==v&&v,_=e.stepTitle,h=void 0===_?Object(a.__)("details","funnel-builder"):_,w=b(Object(r.useState)(""),2),g=w[0],E=w[1],k=b(Object(r.useState)(!1),2),S=k[0],T=k[1],C=Object(r.useRef)(null),P=function(e,t){i(e),T(!1),t.preventDefault()},N=m||"",I=Object(r.useRef)();return Object(r.useEffect)((function(){return jQuery("body").on("click",(function(e){jQuery(I.current).find(e.target).length>0?T(!0):T(!1)})),function(){jQuery("body").off("click")}}),[]),Object(r.createElement)("div",{className:s()("bwf-select-auto-box",{"has-help-text":j}),ref:I},Object(r.createElement)("span",{className:"bwf-select-auto-box__search-icon"},Object(r.createElement)(p.a,{icon:"search",height:"16",width:"16",color:f.TEXT_COLOR_3})),Object(r.createElement)("span",{className:"bwf-select-auto__angle-icon"},Object(r.createElement)(p.a,{icon:Object(l.isArray)(o)&&o.length>0&&S?"angle-up":"angle-down",height:"12",width:"12",color:f.TEXT_COLOR_2})),Object(r.createElement)(c.TextControl,{autoComplete:"off",value:S?g:N,onChange:function(e){return E(n=e),C.current&&clearTimeout(C.current),void(C.current=setTimeout((function(){return t(n)}),500));var n},placeholder:O}),(!Object(l.isArray)(o)||!!u)&&S&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},u),Object(l.isArray)(o)&&S&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},n?Object(r.createElement)("div",null,Object(a.__)("Fetching ".concat(h,"â¦"),"funnel-builder")):Object(r.createElement)("ul",null,y?o.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-suggestion-panel-".concat(t)},Object(r.createElement)("li",{className:"bwf-suggestion-panel__group"},e.name),e.steps.map((function(e){return Object(r.createElement)("li",{key:e.id,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,e.name))})))})):o.map((function(e){return Object(r.createElement)("li",{key:e.key,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,Object(a.__)(e.value,"funnel-builder")))}))))),j&&Object(r.createElement)("span",{className:"bwf-select-auto-box__helpText"},j))};d.defaultProps={onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null},d.propTypes={onSearch:i.a.func,isLoading:i.a.bool,items:i.a.oneOfType([i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,value:i.a.string.isRequired})),i.a.array]),onItemClick:i.a.func,onChange:i.a.func,error:i.a.any},t.a=d},287:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){"use strict";var r=n(0),c=n(7),l=n.n(c),a=(n(342),n(1));t.a=function(e){var t=e.className,n=e.type;return Object(r.createElement)("div",{className:l()("bwf-other-builder-notice",t)},Object(r.createElement)("h3",null,Object(a.__)("How it works","funnel-builder")),Object(r.createElement)("span",null,Object(a.__)("This builder is designed to work with shortcodes. To use the shortcodes in our builder, simply follow these steps:","funnel-builder")),Object(r.createElement)("ol",null,"landing"!==n&&Object(r.createElement)("li",null,Object(a.__)("Copy the shortcodes from the source document or website.","funnel-builder")),Object(r.createElement)("li",null,Object(a.__)("Open the WordPress editor.","funnel-builder")),Object(r.createElement)("li",null,Object(a.__)("Launch your page builder.","funnel-builder")),"landing"!==n&&Object(r.createElement)("li",null,Object(a.__)("Find the area on the page where you want to use the shortcode, and paste it in.","funnel-builder"))))}},300:function(e,t,n){"use strict";var r=n(0),c=n(2),l=n(9),a=n(1),o=n(13),i=n.n(o),u=n(37),s=n(4),p=n(285);function f(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t,n,r,c,l,a){try{var o=e[l](a),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,c)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=t.type,o=t.title,d=t.is_substep,O=void 0!==d&&d,j=e.onStepSelected,v=e.label,y=void 0===v?Object(a.__)(["offer","wc_order_bump"].includes(n)?"Select ".concat("offer"===n?"Offer":"Order Bump"):"Select Step","funnel-builder"):v,_=e.showCheckbox,h=void 0!==_&&_,w=m(Object(r.useState)(!h),2),g=w[0],E=(w[1],m(Object(r.useState)(!1),2)),k=E[0],S=E[1],T=m(Object(r.useState)(null),2),C=T[0],P=T[1],N=m(Object(r.useState)(!1),2),I=N[0],A=N[1],F=m(Object(r.useState)(null),2),x=F[0],B=F[1],L=Object(r.useRef)(new AbortController),R=I&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(l.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(a.__)("".concat(o," not found"),"funnel-builder")))),D=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,r=O&&!0===O?"&is_substep=true":"",e.next=5,i()({path:Object(s.q)("/funnels/step/search/?s=".concat(t,"&type=").concat(n).concat(r)),signal:L.current.signal});case 5:l=e.sent,P(l||null),Object(c.isEmpty)(l.steps)&&Object(c.isEmpty)(l.pages)?A(!0):A(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"AbortError"===e.t0.name?console.log(e.t0):(P(null),A(!0));case 13:S(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var l=e.apply(t,n);function a(e){b(l,r,c,a,o,"next",e)}function o(e){b(l,r,c,a,o,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){return D(""),function(){L.current.abort()}}),[]);var G=Object(c.isObject)(C)&&!Object(c.isNull)(C)?f(Object(c.isEmpty)(C)?[]:C):Object(c.isArray)(C)&&!Object(c.isEmpty)(C)?C.map((function(e){return{key:e.id,value:e.name}})):[],U=x&&x.hasOwnProperty("name")?Object(u.decodeEntities)(x.name):"";return Object(r.createElement)(r.Fragment,null,g&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-label"},y),Object(r.createElement)(p.a,{onSearch:function(e){return D(e)},isLoading:k,items:G,multiGroup:Object(c.isObject)(C),error:R,onItemClick:function(e){B(e),j({step:e,copyFrom:g})},blurText:U,placeholder:Object(a.__)("Searchâ¦","funnel-builder"),stepTitle:o,helpText:["offer","wc_order_bump"].includes(n)?null:Object(a.__)("You can search and select all the step/pages in your Wordpress","funnel-builder")})))}},313:function(e,t,n){},314:function(e,t,n){},315:function(e,t,n){"use strict";var r=n(0),c=n(1),l=(n(313),n(9)),a=n(8),o=n(21);t.a=function(e){var t=e.onFileSelected,n=(e.htmlData,e.filetypeArray),i=(e.btnLabel,e.dropZoneContent),u=Object(o.b)().showSnackbar,s=function(e){e&&e[0]&&"type"in e[0]?n.includes(e[0].type)?t(e[0]):u(Object(c.__)("Uploaded file is not valid.","funnel-builder")):u(Object(c.__)("Uploaded file not found","funnel-builder"))},p=n&&n[0]?n[0]:"application/json";return Object(r.createElement)("div",{className:"bwf-component-import-wrapper"},Object(r.createElement)(l.DropZoneProvider,null,Object(r.createElement)("div",{className:"bwf-import-area-wrapper"},Object(r.createElement)(l.FormFileUpload,{isSecondary:!0,accept:p,onChange:function(e){return s(e.target.files)},render:function(e){var t=e.openFileDialog;return Object(r.createElement)("div",{className:"bwf-import-area",onClick:t},i||null,"application/json"===p&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.a,{icon:"import-file",size:56}),Object(r.createElement)("div",{className:"bwf-drop-import-heading"},Object(c.__)("Drag or browse a JSON file to import funnel","funnel-builder")),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(c.__)("(Maximum file size allowed 10 MB)","funnnel-builder"))))}}),Object(r.createElement)(l.DropZone,{onFilesDrop:s,onHTMLDrop:s,onDrop:s}))))}},322:function(e,t,n){"use strict";n.d(t,"a",(function(){return at}));var r=n(0),c=n(2),l=n(17),a=n.n(l),o=n(119),i=n(13),u=n.n(i),s=n(1),p=n(14),f=n(7),b=n.n(f),m=n(9),d=(n(338),n(50));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var c=k(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,e);var t,n,l,a=w(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={isLoading:!0},t.iframeRef=Object(r.createRef)(),t.setLoaded=t.setLoaded.bind(E(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.iframeRef.current.addEventListener("load",this.setLoaded)}},{key:"setLoaded",value:function(){var e=this.props.src;this.setState({isLoading:!1}),this.props.onLoad(!!e)}},{key:"componentDidUpdate",value:function(e,t){this.props.src&&this.props.src!==e.src&&this.setState({isLoading:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.loadingContent,l=e.src,a=e.title,o=this.state.isLoading,i=b()("wffn-web-preview",t,{"is-loading":o});return Object(r.createElement)("div",{className:i},(o||Object(c.isEmpty)(l))&&n,Object(r.createElement)("div",{className:"wffn-web-preview__iframe-wrapper",style:v({},Object(c.isEmpty)(l)&&{width:0})},Object(r.createElement)("iframe",{ref:this.iframeRef,title:a,src:l})))}}])&&_(t.prototype,n),l&&_(t,l),o}(r.Component);S.propTypes={className:a.a.string,loadingContent:a.a.node,onLoad:a.a.func,src:a.a.string.isRequired,title:a.a.string.isRequired},S.defaultProps={loadingContent:Object(r.createElement)(d.a,{size:"xl"}),onLoad:c.noop};var T=S,C=n(8),P=n(273),N=n(80),I=n(4);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){var t={title:Object(s.__)("This is a PRO Feature!","funnel-builder"),feature:"",content:Object(s.__)("We're sorry, the {{feature_name}} is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),demoLabel:!1,proLabel:Object(s.__)("Upgrade to PRO Now","funnel-builder"),proLink:I.cb,action:!1},n=e.onRequestClose,c=e.isOpen,l=e.children,a=void 0===l?null:l,o=e.className,i=e.module,u=(e.isTemplate,e.modalContent?F(F({},t),e.modalContent):t);return c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:b()("bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",o),isDismissible:!1,onRequestClose:function(){return n()},overlayClassName:"bwf-pro-modal__overlay"},Object(r.createElement)(P.a,{title:Object(r.createElement)(r.Fragment,null,u.title),onClose:n}),Object(r.createElement)("div",{className:"bwf-modal-content"},"string"==typeof u.content?u.content.replace("{{feature_name}}",u.feature):u.content),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},u.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},u.demoLabel),!u.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},Object(s.__)("Cancel")),Object(r.createElement)(N.a,{module:i,isPrimary:!0,isTemplate:!0})),a)):null};B.defaultProps={isOpen:!1,onRequestClose:function(){}};var L=B,R=n(74),D=n(249),G=(n(339),n(76)),U=n(30),q=n(251),z=(n(340),["src","onLoaded"]);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var V=function(e){var t=e.src,n=e.onLoaded,l=void 0===n?c.noop:n,a=$(e,z),o=K(Object(r.useState)(!1),2),i=o[0],u=o[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){u(!0),l(t)},function(){e.onload=function(){}}}),[]),Object(r.createElement)(r.Fragment,null,i?Object(r.createElement)("img",M({src:t},a)):Object(r.createElement)("div",{className:"bwf-image-loader"}))},J=n(51),Y=n(61),Z=n(315);function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t=e.label,n=void 0===t?"":t,l=e.id,a=void 0===l?"":l,o=e.value,i=e.onChange,u=void 0===i?c.noop:i,s=e.className,p="inspector-color-".concat(Object(J.useInstanceId)(m.ColorPicker)),f=Q(Object(r.useState)(!1),2),d=f[0],O=f[1];return Object(r.createElement)("div",{className:b()("components-color-field",s)},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:p},n),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return O(!0)}},Object(r.createElement)(m.ColorIndicator,{colorValue:o})),Object(r.createElement)(m.TextControl,{value:o||"#ffffff",className:"indicator-text"}),d&&Object(r.createElement)(Y.a,{position:"top left",onClose:function(){return O(!1)}},Object(r.createElement)(m.ColorPicker,{color:o,onChangeComplete:function(e){u(e.hex,{id:a})},disableAlpha:!0}))))},ee=function(e){var t=e.setCustomizeVisible,n=Q(Object(r.useState)(!1),2),c=n[0],l=n[1],a=Q(Object(r.useState)(""),2),o=a[0],i=a[1];return Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize"},Object(r.createElement)("div",{className:"bwf-flex bwf-template-preview-sidebar__customize-heading"},Object(r.createElement)(m.Button,{onClick:function(){return t(!1)}},Object(r.createElement)(C.a,{icon:"arrow-left",size:16})),Object(s.__)("Customize","funnel-builder")),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-subheading"},Object(s.__)("Lets customize your store checkout with your logo and brand color","funnel-builder")),c?Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-logo"},Object(r.createElement)("div",null,Object(r.createElement)("img",{src:c,alt:"logo"}),Object(r.createElement)(m.Button,{className:"bwf-delete-btn",onClick:function(){return l(!1)}},Object(r.createElement)(C.a,{icon:"trash",size:20})))):Object(r.createElement)(Z.a,{onFileSelected:function(e){l(URL.createObjectURL(e))},filetypeArray:["image/png"],dropZoneContent:Object(r.createElement)(r.Fragment,null,Object(r.createElement)(C.a,{icon:"add-image",size:40}),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(s.__)("Try to use png image","funnel-builder")))}),Object(r.createElement)(X,{label:Object(s.__)("Color","funnel-builder"),value:o,onChange:function(e){return i(e)}}),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-actions"},Object(r.createElement)(m.Button,{isPrimary:!0},Object(s.__)("Save","funnel-builder")),Object(r.createElement)(m.Button,null,Object(s.__)("Reset","funnel-builder"))))},te=n(21),ne=n(26);function re(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe=function(e){var t=e.thumbnailsData,n=e.hasPlaceholder,l=e.funnelId,a=e.onClick,o=e.activeThumbnail,i=e.previewCustomizeEnabled,u=e.tempPro,p=e.importType,f=Object(te.a)().isProTemplatesLocked,d=Object(te.a)("ck").isProTemplatesLocked,O=Object(te.a)("ul").isProTemplatesLocked,j=ce(Object(r.useState)(!1),2),v=j[0],y=j[1];return Object(c.isEmpty)(t)||n?Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},re(new Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_template_page_options",key:"bwf-place-preview-sidebar-".concat(t)},Object(r.createElement)("div",{className:"bwf-placeholder-temp wffn_preview_thumbnail"}),Object(r.createElement)("div",{className:"bwf-flex bwf--center wffn_template_name"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-12 "})))}))):Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},v?Object(r.createElement)(ee,{setCustomizeVisible:y}):t&&t.map((function(e,t){return Object(r.createElement)("label",{key:t,className:b()("wffn_template_page_options",{active_preview:e.id==o}),onClick:function(){return a(e)}},Object(r.createElement)("div",{className:"wffn_preview_thumbnail"},l?Object(r.createElement)(V,{alt:"thumbnail",src:e.thumbnail}):Object(r.createElement)("img",{alt:"thumbnail",src:e.thumbnail})),Object(r.createElement)("div",{className:"wffn_template_name"},e.name),"yes"===e.pro&&(["wc_checkout","wc_thankyou"].includes("step"===p?null==e?void 0:e.type:null==e?void 0:e.step)?d:!["upsell"].includes("step"===p?null==e?void 0:e.type:null==e?void 0:e.step)||"yes"===u&&"step"!==p?f:O)&&Object(r.createElement)(ne.a,null))})),i&&!v&&Object(r.createElement)(m.Button,{isPrimary:!0,className:"bwf-template-preview-sidebar__customize-btn",onClick:function(){return y(!0)}},Object(r.createElement)(C.a,{icon:"edit",size:20,color:"#ffffff"}),Object(s.__)("Customize","funnel-builder")))},ie=function(e){var t=e.type,n=e.filters,l=e.FB_PRO_STATUS,a=e.activeSubFilter,o=e.onClick,i=e.activeTemplateFilters,u=e.tempPro,p=e.templateType,f=e.funnelId,m=e.funnelGroup,d=e.hasPRO,O=e.importType,j=Object(te.a)("ck").isProTemplatesLocked;if(!t)return null;var v=n[t];if(void 0===v||Object(c.isEmpty)(v))return null;if("wc_checkout"!==t&&"optin"!==t)return null;var y=[],_=function(e){i.includes(e)&&y.push(Object(r.createElement)("div",{className:b()("template-filter",{"active-filter":a==e}),onClick:function(){return o(e)},key:e,role:"button",tabIndex:"-1","aria-hidden":"true"},Object(r.createElement)("div",null,v[e]),!("wc_checkout"===p&&!j&&(!f||"step"!==O)&&m.includes("wc_checkout"))&&(d(u||"no")||["2","3"].includes(e)&&!0!==l||"popup"===e&&!0!==l)&&Object(r.createElement)(ne.a,null)))};for(var h in v)_(h);return Object(r.createElement)("div",{className:"wffn_template_filer"},Object(r.createElement)("div",{className:"wffn_template_filter_container"},Object(r.createElement)("span",{className:"template-filter template-filter-head"},"wc_checkout"===t?Object(s.__)("Checkout Steps","funnel-builder"):"optin"===t?Object(s.__)("Optin Form","funnel-builder"):Object(s.__)("Type","funnel-builder"),":"),y))},ue=n(65),se=function(e){var t=e.funnelId,n=e.activeGroup,c=e.activeSubFilter,l=e.activeStep,a=e.templateName,o=e.isTemplatePro,i=e.funnelGroup,u=e.hasPRO,p=e.importType,f=Object(te.a)("ck").isProTemplatesLocked,b=Object(te.a)("ul").isProTemplatesLocked,m=Object(te.a)().isProTemplatesLocked,d=u("status");if("upsell"===n&&!0!==d)return b&&Object(r.createElement)(ue.a,{dismissable:!1,proLink:Object(I.K)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0});switch(t&&"step"===p?n:l){case"upsell":if(!0!==d)return b&&Object(r.createElement)(ue.a,{dismissable:!1,proLink:Object(I.K)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0});break;case"wc_checkout":if((f||t&&"step"===p||!i.includes("wc_checkout"))&&(u(o)||["2","3"].includes(c)&&!0!==d)){Object(s.__)("This template is part of the pro plan. To access it, consider upgrading.","funnel-builder");return"2"===c?Object(s.__)("Two-Step Checkout is a pro feature. To access it, consider upgrading.","funnel-builder"):"3"===c&&Object(s.__)("Three-Step Checkout is a pro feature. To access it, consider upgrading.","funnel-builder"),Object(r.createElement)(ue.a,{dismissable:!1,module:(null==i?void 0:i.includes("wc_checkout"))&&"ck",proLink:Object(I.K)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0})}break;case"optin":if(u(o||"no")||"popup"===c&&!0!==d){Object(s.__)("This template is part of the pro plan. To access it, consider upgrading.","funnel-builder");return"popup"==c&&Object(r.createElement)(r.Fragment,null,Object(s.__)("Optin ","funnel-builder"),Object(r.createElement)("span",{style:{textTransform:"capitalize"}},c),Object(s.__)(" is a pro feature. To access it, consider upgrading.","funnel-builder")),Object(r.createElement)(ue.a,{dismissable:!1,proLink:Object(I.K)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0})}}var O=t&&"step"===p?n:l;return"yes"===o&&("wc_checkout"===O||"wc_thankyou"===O?f:"upsell"===O?b:m)?Object(r.createElement)(ue.a,{dismissable:!1,module:(null==i?void 0:i.includes("wc_checkout"))&&("wc_checkout"===O||"wc_thankyou"===O)&&"ck",proLink:Object(I.K)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0}):""},pe=n(20),fe=wffn_contacts_data&&wffn_contacts_data.header_data?wffn_contacts_data.header_data:{},be=fe.logo?fe.logo:"",me=function(e){var t=e.viewport,n=e.setviewport,l=e.templateName,a=e.isTemplatePro,o=e.onRequestClose,i=e.importing,u=e.onClick,p=e.onClickPro,f=e.activeGroup,m=e.isCheckoutPro,d=e.isOptinPro,O=e.activeStep,j=e.funnelId,v=e.importType,y=e.templateGroup,_=e.hasPRO,h=e.stepId,w=Object(te.a)("ck").isProTemplatesLocked,g=Object(D.a)().getImportBtnLabel(),E=Object(c.isEmpty)(g)?"upsell"===f||j&&"step"===v?Object(s.__)("Import This Template","funnel-builder"):Object(s.__)("Import This Funnel","funnel-builder"):g,k=_("status");return Object(r.createElement)("div",{className:"wffn_template_preview_header"},Object(r.createElement)("div",{className:"bwf_template_logo_title"},Object(r.createElement)("img",{src:be,alt:"Funnel Builder for WordPress",width:148,className:"bwf-brand-logo-only"}),Object(r.createElement)("div",{className:"bwf_preview_template_title"},l)),Object(r.createElement)("div",{className:"wffn_template_viewport"},Object(r.createElement)("div",{className:"wffn_template_viewport_inner"},Object(r.createElement)("span",{className:b()("wffn_viewport_icons",{active:"desktop"===t}),onClick:function(){return n("desktop")},title:"Desktop Viewport"},Object(r.createElement)(C.a,{icon:"desktop",color:"desktop"===t&&"#fff"})),Object(r.createElement)("span",{className:b()("wffn_viewport_icons",{active:"tablet"===t}),onClick:function(){return n("tablet")},title:"Tablet Viewport"},Object(r.createElement)(C.a,{icon:"tablet",color:"tablet"===t&&"#fff"})),Object(r.createElement)("span",{className:b()("wffn_viewport_icons",{active:"mobile"===t}),onClick:function(){return n("mobile")},title:"Mobile Viewport"},Object(r.createElement)(C.a,{icon:"mobile",color:"mobile"===t&&"#fff"})))),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(r.Fragment,null,(_(a||"no")||!0!==k&&(m||d||"upsell"===O))&&(Object(c.isEmpty)(y)||!y.includes("wc_checkout")||w)?Object(r.createElement)(pe.a,{isPrimary:!0,onClick:p},E):Object(r.createElement)(pe.a,{isPrimary:!0,onClick:u,disabled:i&&i.group===f,isBusy:(!!h||"funnel"===v)&&j&&i&&i.group===f},E))),Object(r.createElement)("div",{className:"wffn_template_preview_close"},Object(r.createElement)(pe.a,{onClick:o},Object(r.createElement)(C.a,{icon:"close",size:"24"}))))};n(36);function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e){var t=e.isOpen,n=e.onRequestClose,l=e.activeGroup,a=e.activeEditor,i=e.importing,u=e.filters,f=e.hasPRO,d=e.checkEditor,O=e.previewData,j=e.isTemplateLoading,v=e.activeFilter,y=e.setPreviewErr,_=e.parentRoute,h=e.funnelId,w=e.importType,g=e.updateQueryString,E=e.previewCustomizeEnabled,k=e.urlDependency,S=e.stepId,C=Object(p.i)(),P=O(),A=P.thumbnails,F=P.activeTemplate,x=P.previews,B=void 0===x?[]:x,z=Object(o.useParams)().step,M=U.a.getFunnel(),K=!(!F||!F.type)&&F.type,W=k?z:null==F?void 0:F.type;Object(r.useEffect)((function(){h||(P.success?y(!1):!1===P.success&&y(!0))}),[P.success]),Object(r.useEffect)((function(){if(K)if("wc_checkout"===K||"optin"===K){var e=!(!F||!F.filters)&&F.filters[0];C.group&&("wc_checkout"===K&&["1","2","3"].includes(C.group)||"optin"===K&&["inline","popup"].includes(C.group))?V(C.group):(V(e),g({group:e}))}else C.group&&(delete C.group,g({},Object(p.g)(),C))}),[C.group,K]),Object(r.useEffect)((function(){!Object(c.isEmpty)(null==M?void 0:M.steps)&&"funnel"===w&&h&&g({},"/funnels/".concat(M.id))}),[M]);var $=Object(G.a)(),V=$.setActiveSubFilter,J=$.setCurrentTemplate,Y=(0,Object(D.a)().getCurrentTemplate)(),Z=Oe(Object(r.useState)(!1),2),Q=(Z[0],Z[1]),H=f("status"),X=Oe(Object(r.useState)("desktop"),2),ee=X[0],te=X[1],ne=Oe(Object(r.useState)(!1),2),re=ne[0],ce=ne[1],le=Oe(Object(r.useState)(!1),2),ae=le[0],ue=le[1],pe=Oe(Object(r.useState)(!h),2),fe=pe[0],be=pe[1],je=Oe(Object(r.useState)([]),2),ve=je[0],ye=je[1];Object(r.useEffect)((function(){if(Q(!1),F&&!ve.includes(F.prevId)){var e=JSON.parse(JSON.stringify(ve));e.push(F.prevId),ye(e)}}),[null==F?void 0:F.preview]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".wffn_template_page_options.active_preview");e&&e.scrollIntoView()}),100)}),[t]),Object(r.useEffect)((function(){if(A&&!h&&fe){var e=A||[],t=e.length,n=0;e.forEach((function(e){var r=new Image;r.src=e.thumbnail,r.onload=function(){++n===t&&be(!1)}}))}}),[A]);var _e,he=("wc_checkout"===l||W&&"wc_checkout"===W)&&"1"!==v,we=("optin"===l||W&&"optin"===W)&&"inline"!==v;return P?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:"bwf-admin-modal bwf-admin-modal-full-screen wffn_template_preview_modal",onRequestClose:function(){return n(!1)},overlayClassName:"wffn_template_preview_overlay",isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"wffn_template_preview_wrap"},Object(r.createElement)(me,(de(_e={viewport:ee,setviewport:te,onRequestClose:n,importing:i,activeGroup:l,isCheckoutPro:he,isOptinPro:we,activeStep:W,funnelId:h,importType:w,hasPRO:f,stepId:S,onClickPro:function(){!1===H&&"yes"!==(null==F?void 0:F.tempPro)&&(he||we||"upsell"===W)?ue(!0):ce(!0)},onClick:function(){return d()}},"onRequestClose",(function(){h?g({},"".concat(_)):(g({},"".concat(_,"/").concat(l)),V(!1)),n()})),de(_e,"templateName",null==F?void 0:F.name),de(_e,"isTemplatePro",null==F?void 0:F.tempPro),de(_e,"templateGroup",null==F?void 0:F.funnelGroup),_e)),Object(r.createElement)("div",{className:"wffn_template_preview_content"},Object(r.createElement)("div",{className:b()("wffn_template_preview_inner wffn_funnel_preview")},Object(r.createElement)(ie,{type:null==F?void 0:F.type,filters:u,FB_PRO_STATUS:H,activeSubFilter:v,onClick:function(e){if(V(e),g({group:e}),h){var t=Y.template,n=(t=void 0===t?{}:t).group_type;Object(c.isEmpty)(n)||J({id:n[e],template:{group_type:n},steps:A.map((function(e){return{type:e.step,slug:e.lug}}))})}},activeTemplateFilters:null==F?void 0:F.filters,hasPRO:f,tempPro:null==F?void 0:F.tempPro,templateType:null==F?void 0:F.type,funnelId:h,funnelGroup:null==F?void 0:F.funnelGroup,importType:w}),!j&&Object(r.createElement)(se,{funnelId:h,activeGroup:l,activeSubFilter:v,activeStep:W,hasPRO:f,templateName:null==F?void 0:F.name,isTemplatePro:null==F?void 0:F.pro,funnelGroup:null==F?void 0:F.funnelGroup,importType:w}),Object(c.isEmpty)(B)||Object(c.isEmpty)(ve)?"":B.map((function(e,t){var n=(null==e?void 0:e.preview)||"",c=(null==e?void 0:e.id)||"";return Object(r.createElement)(T,{key:t,className:b()("wffn_template_preview_frame",ee,{"hide-preview":e.id!==F.prevId}),title:"Funnel Template",src:ve.includes(c)?n:"",onLoad:function(e){if(Q(!0),e&&B[t+1]){var n=JSON.parse(JSON.stringify(ve));n.push(B[t+1].id),ye(n)}}})}))),Object(r.createElement)(oe,{thumbnailsData:A,hasPlaceholder:fe,funnelId:h,previewCustomizeEnabled:E,importType:w,tempPro:null==F?void 0:F.tempPro,onClick:function(e){J({id:e.funnel,template:e,activeStep:e.step,steps:A.map((function(e){return{type:e.step,slug:e.lug}}))}),g({},h&&"step"===w?"".concat(_,"/templates/").concat(l,"/").concat(a,"/preview/").concat(e.funnel):h&&"funnel"===w?"".concat(_,"/templates/").concat(l,"/").concat(a,"/preview/").concat(e.funnel,"/").concat(e.step):"upsell"===l?"".concat(_,"/").concat(l,"/").concat(a,"/preview/").concat(e.funnel):"".concat(_,"/").concat(l,"/").concat(a,"/preview/").concat(e.funnel,"/").concat(e.step))},activeThumbnail:null==F?void 0:F.thumbnail})))),Object(r.createElement)(L,{isOpen:re,onRequestClose:function(){return ce(!1)},modalContent:Object(q.c)({templateName:null==F?void 0:F.name,FB_PRO_STATUS:H,funnelId:h,activeGroup:l,activeStep:W}),module:["wc_checkout","wc_thankyou"].includes(l)&&"ck",className:"bwf-templates-pro-modal",isTemplate:!0}),(f((null==F?void 0:F.pro)||"no")||"yes"!==(null==F?void 0:F.pro)&&(he||we||"upsell"===W))&&Object(r.createElement)(R.a,{className:"bwf-admin-modal-squeezy bwf-template-preview-pro-modal",modalTitle:Object(s.__)("Confirmation","funnel-builder"),content:Object(r.createElement)("div",{className:"bwf-template-preview-pro-modal__content"},Object(s.sprintf)(Object(s.__)("Yor are using %s Funnel. In this funnel there are some pro features like ","funnel-builder"),null==F?void 0:F.name),Object(r.createElement)("mark",null,Object(s.__)("Two Step","funnel-builder")),Object(s.__)(" and","funnel-builder")," ",Object(r.createElement)("mark",null,Object(s.__)("Three Step Checkout","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("One Click Upsell","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("Optin Popup","funnel-builder")),"."),confirmButton:Object(r.createElement)(N.a,{module:["wc_checkout","wc_thankyou"].includes(l)&&"ck",isPrimary:!0}),cancelButtonText:Object(s.__)("Use Free Version","funnel-builder"),onConfirm:function(){"deactiavted"===H?g({},"/settings/"):window.open(Object(I.K)([h?"Step":"Template",h?l:"upsell"===l?"upsell":W,null==F?void 0:F.name,"Upgrade","Modal"]),"_blank")},onCancel:function(){S||"funnel"===w||d();var e="1";if("optin"===l||"optin"===W?(V("inline"),g({group:"inline"}),e="inline"):(V("1"),g({group:"1"})),h){var t=Y.template,n=(t=void 0===t?{}:t).group_type;Object(c.isEmpty)(n)||J({id:n[e],template:{group_type:n},steps:A.map((function(e){return{type:e.step,slug:e.lug}}))})}},onRequestClose:function(){ue(!1)},isOpen:ae,confirmDescription:Object(s.__)("This action is irreversible","funnel-builder"),closeIcon:!0})):""}n(294);var ye=n(29),_e=n(55),he=n(329),we=n(37),ge=n(300),Ee=n(244),ke=n(245),Se=(n(32),n(77));function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ae=function(e){var t,n,l,a=e.onCloseModal,o=e.onComplete,i=e.isWorking,u=e.activeTemplateGroup,p=(e.showCloneOption,e.templateGroup),f=Ne(Object(r.useState)(""),2),b=f[0],d=f[1],O=Ne(Object(r.useState)({}),2),j=(O[0],O[1]),v=Ne(Object(r.useState)(""),2),y=v[0],_=v[1],h=Ne(Object(r.useState)(null),2),w=h[0],g=h[1],E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return z((function(r){return n?(delete r[t],r):Ce(Ce({},r),{},Pe({},e,t))}))},k=Ne(Object(r.useState)((function(){return u})),2),S=k[0],T=(k[1],U.a.getSteps()),C=Object(D.a)(),P=C.getScratchTemplateType,N=C.getCurrentTemplate,A=C.getImportOffer,F=P(),x=N(),B=A();Object(r.useEffect)((function(){j({})}),[]);var L=function(){var e;d(""),o("upsell"===S?q:"new"===F?{title:y}:{title:"".concat(null==w||null===(e=w.step)||void 0===e?void 0:e.name," Copy")},S,!(!w||!w.copyFrom)&&w.step)},R=(Object(r.useMemo)((function(){return Object.keys(p).map((function(e){return{key:e,label:p[e]}}))}),[p]),function(){return T.filter((function(e){return"wc_upsells"===e.type})).map((function(e){var t;return{key:e.id,label:Object(we.decodeEntities)(null==e||null===(t=e._data)||void 0===t?void 0:t.title)}}))}),G=Ne(Object(r.useState)(Ce({type:0===R().length?"new":"existing"},!Object(c.isNull)(B)&&{title:B.parent_title,insert_into:B.parent_id})),2),q=G[0],z=G[1],M=function(){if("upsell"===S){var e,t,n,r,l,a;if("new"===F)return"existing"===q.type?Object(c.isEmpty)(null===(n=q.offer_title)||void 0===n?void 0:n.trim())||!q.insert_into:Object(c.isEmpty)(null===(e=q.title)||void 0===e?void 0:e.trim())||Object(c.isEmpty)(null===(t=q.offer_title)||void 0===t?void 0:t.trim());if("existing"===F)return"existing"===q.type?!q.insert_into||Object(c.isNull)(w):Object(c.isEmpty)(null===(r=q.title)||void 0===r?void 0:r.trim())||Object(c.isNull)(w);if(!x.isBuildFromScratch)return Object(c.isEmpty)(null===(l=q.title)||void 0===l?void 0:l.trim())||Object(c.isEmpty)(null===(a=q.offer_title)||void 0===a?void 0:a.trim())}return"new"!==F&&x.isBuildFromScratch?"existing"===F?Object(c.isNull)(w):void 0:Object(c.isEmpty)(y.trim())},K=("new"===q.type||!Object(c.isNull)(B))&&Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Type hereâ¦","funnel-builder"),label:Object(s.__)("Upsell Name","funnel-builder"),value:null!==(t=Object(we.decodeEntities)(q.title))&&void 0!==t?t:"",onChange:function(e){return E("title",e)},disabled:!Object(c.isNull)(B)||i});return Object(r.useEffect)((function(){1===R().length&&E("insert_into",R()[0].key)}),[]),Object(r.createElement)(m.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(s.__)("Add New Step ","funnel-builder"),Object(r.createElement)("span",{className:"bwf-list-count bwf-ml-4"},"(",I.gb[S],")")),className:"bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal bwf-modal-overflow-visible",onRequestClose:function(){return a()},isDismissible:!0,shouldCloseOnClickOutside:!i,overlayClassName:"bwf-create-funnel-modal__overlay"},b&&Object(r.createElement)(Se.a,{errorMessage:b}),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"!==e.key||M()||i||L()},role:"main"},"upsell"===S&&"new"!==q.type&&!Object(c.isNull)(B)&&K,"existing"===F&&x.isBuildFromScratch&&Object(r.createElement)(ge.a,{step:{type:"upsell"===S?"offer":S,title:p[S],is_substep:"upsell"===S},onStepSelected:function(e){g(e)},key:"bwf-clone-step-".concat(S)}),"upsell"===S?Object(r.createElement)(r.Fragment,null,!Object(c.isEmpty)(R())&&Object(c.isNull)(B)&&Object(r.createElement)("div",null,Object(r.createElement)("label",null,Object(s.__)("Add Offers","funnel-builder")),Object(r.createElement)(ke.a,{options:[{value:"existing",label:Object(s.__)("To Existing Upsell","funnel-builder"),disabled:0===R().length},{value:"new",label:Object(s.__)("To New Upsell","funnel-builder")}],className:"",selected:null!==(n=q.type)&&void 0!==n?n:0===R().length?"new":"existing",onChange:function(e){E("inherit_from","",!0),E("type",e)}})),"existing"===q.type&&Object(c.isNull)(B)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ee.b,{label:Object(s.__)("Select Upsell","funnel-builder"),options:R(),selected:1===R().length?R()[0].key:q.insert_into,onChange:function(e){E("insert_into",e)}})),"new"===q.type&&Object(c.isNull)(B)&&K,"new"===F&&Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Type hereâ¦","funnel-builder"),label:Object(s.__)("Offer Name","funnel-builder"),value:null!==(l=q.offer_title)&&void 0!==l?l:"",onChange:function(e){return E("offer_title",e)},disabled:i})):"new"===F?Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Enter step name","funnel-builder"),label:Object(s.__)("Step Name","funnel-builder"),value:null!=y?y:"",onChange:function(e){return _(e)},disabled:i}):null,Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(pe.a,{onClick:a,className:"bwf-modal-cancel-btn"},Object(s.__)("Cancel","funnel-builder")),Object(r.createElement)(pe.a,{isPrimary:!0,disabled:M()||i,isBusy:i,onClick:L,className:M()?"bwf-no-ripple":"",name:"add-funnel"},Object(s.__)("Add","funnel-builder")))))},Fe=n(41);n(341);function xe(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Be(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Le=function(e){var t=e.showTemplatesNav,n=void 0===t||t,c=e.showEditors,l=void 0===c||c;return Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-templates-placeholder"},Object(r.createElement)("div",{className:"bwf-template-list-header"},n&&Object(r.createElement)(Fe.a,{gap:6,justify:"flex-start",className:"bwf-templ-nav-placeholder"},xe(Array(5)).map((function(e,t){return Object(r.createElement)(Fe.c,{key:"bwf-templ-placeholder-nav-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder nav-placeholder-item"}))}))),l&&Object(r.createElement)(Fe.a,{gap:6,justify:"flex-start"},xe(Array(5)).map((function(e,t){return Object(r.createElement)(Fe.c,{key:"bwf-templ-placeholder-editor-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder editor-placeholder-item"}))})))),Object(r.createElement)("div",{id:"wffn_tab_container"},Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:"wffn_pick_template"},xe(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_temp_card",key:"bwf-templ-placeholder-".concat(t)},Object(r.createElement)("div",{className:"wffn_template_sec"},Object(r.createElement)("div",{className:"wffn_template_sec_design wffn-is-placeholder"})))})))))))},Re=n(52),De=(n(35),function(e){var t=e.editorList,n=e.activeEditor,c=e.onChange;return Object(r.createElement)(Fe.a,{justify:"flex-start",gap:6,className:"wffn_template_editor_selector"},Object(r.createElement)(ke.a,{options:Object.keys(t).map((function(e){return{value:e,label:t[e]}})),selected:n,onChange:function(e){return c(e)}}))}),Ge=n(25),Ue=n(75),qe=n(18),ze=["edit"];function Me(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var Ke=function(e){var t=e.funnelId,n=e.disabledNavs,c=e.activeTemplateGroup,l=e.templateGroup,a=e.onClick,i=e.urlDependency,u=Object(te.a)("ul").isProTemplatesLocked,s=Object(o.useParams)().importType,f={},m=window.location&&window.location.search?Object(Ge.parse)(window.location.search.substring(1)):{},d=(m.edit,Me(m,ze));for(var O in l)"funnel"===s&&"upsell"===O||(f[O]={},f[O].name=l[O],f[O].isExclusive="upsell"===O,f[O].link=decodeURIComponent(Object(p.f)({},"/templates/".concat(O),d)));return Object(r.createElement)("div",{className:"bwf-tempaltes-nav"},Object(r.createElement)(Fe.a,{justify:"flex-start",gap:3,className:"bwf-flex-wrap"},Object.keys(f).map((function(e,l){var o=e===c,s=n.find((function(t){return t.key===e}));return Object(r.createElement)(Fe.c,{key:"bwf-temp-nav-".concat(l)},0===t&&i?Object(r.createElement)(qe.a,{className:b()("bwf-template-nav-item",{"is-selected":m.path==="/templates/"+e||"/templates"===m.path&&"funnel"===e}),href:f[e].link},f[e].name,f[e].isExclusive&&Object(r.createElement)(ne.a,null)):Object(r.createElement)(Ue.a,{toolTipText:s&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},s.message),visible:s||!1,size:366},Object(r.createElement)("div",{className:b()("bwf-template-nav-item",{"is-selected":o&&!s},{"is-disabled":s}),onClick:function(){s||a(e)},tabIndex:"-1",role:"button"},Object(r.createElement)("div",null,f[e].name),u&&f[e].isExclusive&&Object(r.createElement)(ne.a,null))))}))))},We=n(60);function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Je(e){var t=e.importBuildFromScratch,n=(e.getRibbonName,e.activeTemplateGroup),c=e.templateID,l=void 0===c?"scratch":c,a=e.importType,o=e.stepId,i=e.importing,u=e.allowNew,p=void 0===u||u,f=$e(Object(r.useState)({status:!1}),2),b=f[0],m=f[1],d=Object(te.a)().isProFeatureLocked,O=Object(te.a)("ul").isProFeatureLocked,j=Object(G.a)().setScratchTemplateType;return Object(r.useEffect)((function(){return function(){j("new")}}),[]),Object(r.createElement)("div",{className:"wffn_template_sec wffn_build_from_scratch"},Object(r.createElement)("div",{className:"wffn_template_sec_design"},Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_add_tmp_se"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(C.a,{icon:"add-page",width:"72",height:"72",color:"#82838E"})),Object(r.createElement)("div",{className:"wffn_import_template wffn_p"},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wffn_import_description"},"step"===a?Object(s.__)("You can quickly add step","funnel-builder"):Object(s.__)("You can design the funnel from blank","funnel-builder")),p&&Object(r.createElement)(pe.a,{isGray:!0,onClick:function(e){O&&"upsell"===n?m(Ze):(j("new"),t(l,e))},isBusy:!!o&&i},Object(s.__)("Start from Blank","funnel-builder"),O&&"upsell"===n&&Object(r.createElement)(ne.a,null)),!o&&Object(r.createElement)(pe.a,{isGray:!0,onClick:function(e){d?m(Ye):(j("existing"),t(l,e))}},Object(s.__)("Clone","funnel-builder"),d&&Object(r.createElement)(ne.a,null)))))))),Object(r.createElement)(We.a,{isOpen:!!b.status,onRequestClose:function(){return m({status:!1})},modalContent:b,type:2}))}var Ye={status:!0,feature:Object(s.__)("Cloning","funnel-builder"),proLink:Object(I.K)(["Funnel","Duplicate","Upgrade","Modal"])},Ze={status:!0,feature:Object(s.__)("One Click Upsell Offer","funnel-builder"),proLink:Object(I.K)(["Upsell","Templates","Upgrade","Modal"])},Qe=n(295),He={optin:"Lead Generation",sales:"Sales",wc_checkout:"Checkout"},Xe=function(e){var t=e.templateFilterCheck,n=e.templateCards,l=e.showBuildFromScratch,a=e.importBuildFromScratch,o=e.activeTemplateGroup,i=e.activeEditor,u=e.onPreview,p=e.funnelId,f=e.importType,d=e.stepId,O=e.importing,j=Object(te.a)("ul").isProTemplatesLocked,v=Object(te.a)().isProTemplatesLocked,y=Object(te.a)("ck").isProTemplatesLocked,_=Object(G.a)().setScratchTemplateType,h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scratch",t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)(Je,{importBuildFromScratch:a,getRibbonName:q.b,activeTemplateGroup:o,templateID:e,importType:f,stepId:d,importing:O,allowNew:t})},w=[],g=function(e){var c,a,i=n[e];!t(i,!!i.group_type&&Object.keys(i.group_type)[0])||i.build_from_scratch&&d&&!i.allow_new||(!l&&i.build_from_scratch||w.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:e},i.build_from_scratch?h(i.slug?i.slug:e,i.allow_new):Object(r.createElement)("div",{className:"wffn_template_sec"},"yes"===i.pro&&(["wc_checkout","wc_thankyou"].includes(o)||null!=i&&null!==(c=i.group)&&void 0!==c&&c.some((function(e){return["wc_checkout","wc_thankyou"].includes(e)}))?y:["upsell"].includes(o)||null!=i&&null!==(a=i.group)&&void 0!==a&&a.some((function(e){return["upsell"].includes(e)}))?j:v)?Object(r.createElement)(ne.a,null):"",Object(r.createElement)("div",{className:i.is_pro?"wffn_template_sec_design_pro":"wffn_template_sec_design"},i.thumbnail&&Object(r.createElement)(V,{src:i.thumbnail,className:"wffn_img_temp",alt:"thumbnail"}),Object(r.createElement)("div",{className:"wffn_temp_overlay"})),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn_pro_template"},Object(r.createElement)(m.Button,{onClick:function(t){_("new"),u(t,e,i)},isPrimary:!0,role:"button",tabIndex:"-1","aria-hidden":"true",className:"bwf-template-action-btn bwf-no-ripple"},Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"wffn_template_meta_left"},Object(r.createElement)("div",{className:"wffn_template_sec_meta_name"},i.name),"funnel"===o&&Object(r.createElement)("div",{className:"wffn_template_sec_meta_group"},He[null==i?void 0:i.group[0]]&&He[null==i?void 0:i.group[0]]," ","Funnel")),Object(r.createElement)("div",{className:"wffn_template_meta_right"},i.steps?Object(r.createElement)(r.Fragment,null,Object(s.sprintf)(Object(s._n)("%s step","%s steps",i.steps.length,"funel-builder"),i.steps.length)):null))))))};for(var E in n)g(E);return"wp_editor"===i&&Object(c.isEmpty)(w)&&w.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:"custom-wp_editor"},h("upsell"===o?"wfocu-custom-empty":"wp_editor_1"))),"wp_editor"===i&&w.push(Object(r.createElement)(Qe.a,{key:"other-builder-notice",type:o})),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:b()("wffn_pick_template",{wffn_fullscreen_pich_templates:!!p})},w))};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lt=function(e){var t=e.activeFilter,n=e.defaultBuilder,l=e.filters,a=e.editors,i=e.templates,f=e.isTemplateLoading,b=e.activeBuilder,m=e.activeTemplateGroup,d=e.templateGroup,O=void 0===d?[]:d,j=e.funnelId,v=void 0===j?0:j,y=e.showDefaultEditorNotice,_=void 0===y||y,h=e.templateCards,w=void 0===h?{}:h,g=e.previewData,E=e.onImportComplete,k=e.templateFilterCheck,S=e.showTemplatesNav,T=e.parentRoute,C=e.disabledNavs,P=void 0===C?[]:C,N=e.showBuildFromScratch,A=void 0===N||N,F=e.funnelTitleModalData,x=void 0===F?{}:F,B=e.scratchConfirmModalData,z=e.importApiPrefix,M=void 0===z?"funnels":z,K=e.templateListNotice,W=e.showImportNotice,$=void 0===W?"":W,V=e.urlDependency,J=void 0===V||V,Y=e.showEditors,Z=void 0===Y||Y,Q=e.previewCustomizeEnabled,H=void 0!==Q&&Q,X=e.listRef,ee=e.stepId,ne=Object(p.i)(),re=Object(te.a)("ck").isProTemplatesLocked,ce=Object(te.a)("ul").isProTemplatesLocked,le=Object(te.a)().isProTemplatesLocked,ae=Object(Re.a)().updateStatus,oe=v,ie=Object(te.b)(),ue=ie.showSnackbar,se=ie.hideSnackbar,pe=rt(Object(r.useState)(!1),2),fe=pe[0],be=pe[1],me=rt(Object(r.useState)(!1),2),de=me[0],Oe=me[1],je=function(){if(J)return p.k.apply(void 0,arguments)},we=Object(_e.a)().unsetTabData,ge=(0,U.a.getFunnel)(),Ee=Object(G.a)(),ke=Ee.fetch,Se=Ee.makeDefaultEditor,Te=Ee.setActiveBuilder,Ce=Ee.setActiveGroup,Pe=Ee.setCurrentTemplate,Ne=Ee.setActiveStep,Ie=Ee.setPageBuildersOptions,Fe=Ee.setActiveSubFilter,xe=Ee.setImportOffer,Be=Object(D.a)(),Ge=Be.getCurrentTemplate,Ue=Be.getPageBuildersOptions,qe=Be.getPageBuildersTexts,ze=Ge(),Me=Ue(),We=qe(),$e=Object(o.useParams)(),Ve=$e.builder,Je=$e.templateId,Ye=$e.filter,Ze=void 0===Ye?m:Ye,Qe=Object(p.i)().importType,He=ee?"step":"wc_checkout"===Qe?"funnel":Qe,et=Object(ye.a)().setIsFunnelEmpty;Object(r.useEffect)((function(){return Object(c.isEmpty)(w)&&ke(),function(){xe(null),se()}}),[]),Object(r.useEffect)((function(){var e,t;Ve&&!f&&Je&&w[Je]&&Pe({id:Je,template:w[Je],steps:w[Je].steps,activeStep:null!==(e=w[Je])&&void 0!==e&&e.steps?null===(t=w[Je])||void 0===t?void 0:t.steps[0].type:""})}),[Ve,Je,f]),Object(I.i)(Object(s.__)("Import Funnel","funnel-builder"));var ct=rt(Object(r.useState)(!1),2),lt=ct[0],at=ct[1],ot=rt(Object(r.useState)(!1),2),it=ot[0],ut=ot[1],st=rt(Object(r.useState)(!1),2),pt=st[0],ft=st[1],bt=rt(Object(r.useState)({}),2),mt=bt[0],dt=bt[1],Ot=rt(Object(r.useState)(!1),2),jt=Ot[0],vt=Ot[1];Object(r.useEffect)((function(){})),Object(r.useEffect)((function(){Te(b)}),[m,l,a]),Object(r.useEffect)((function(){return Je&&Pe({id:Je,template:{}}),function(){Te("")}}),[]),Object(r.useEffect)((function(){de&&(je({},"/templates"),ue(Object(s.__)("Template not found for requested URL. Please select from the list.")))}),[de]);var yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"activate",r=arguments.length>3?arguments[3]:void 0;try{dt((function(e){return tt(tt({},e),{},{disableConfirm:!0,confirmButtonText:"Activating",cancelButtonText:"",shouldCloseOnClickOutside:!1})})),u()({path:Object(I.q)("/funnels/activate-plugin/?slug=".concat(e,"&init=").concat(t,"&status=").concat(n)),method:"POST"}).then((function(e){!0===e.success&&("funnel"===He&&v||ee?ht(r||ze.id):be(!0),dt({status:!1}),Ie(tt(tt({},Me),{},nt({},b,tt(tt({},Me[b]),{},{"plugin-status":"activated"})))))})).catch((function(e){dt({status:!0,error:e.message||e.msg}),console.log("catch",e)}))}catch(e){console.log(e)}},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,c=Me[b];if("wp_editor"!==b&&"customizer"!==b&&c["plugin-status"]&&"activated"!==c["plugin-status"]||t){var l=We[b],a=l.text;"gutenberg"===b&&e&&(a=Object(s.__)("To have the best experience in Block editor, FunnelKit has built a minimalist block plugin ","funnel-builder")+"<strong>SlingBlocks.</strong>");var o={status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:a}}),closeIcon:!0};o.confirmButtonText=l.ButtonText,"yes"===l.show_cancel_btn&&(o.cancelButtonText="Cancel"),"gutenberg"===b&&e&&(o.cancelButtonText=Object(s.__)("No thanks","funnel-builder")),dt(tt(tt({},o),{},{onConfirm:function(){if(l.builder_link&&"install"===c["plugin-status"]&&"yes"===l.noInstall)return window.open(l.builder_link,"_blank"),void dt({status:!1});"yes"!==l.show_cancel_btn&&dt({status:!1}),yt(c.plugins[0].slug,c.plugins[0].init,c["plugin-status"],n)},onCancel:function(){"gutenberg"===b&&e&&be(!0),dt({status:!1})}})),ut(!1)}else ee||"funnel"===He&&v&&!e?ht(n||ze.id):be(!0)},ht=function(e,n,r,l){var a=r||m;ut({id:e,group:a,filter:t});var o=!0;try{if(ee)return void function(e){var t=Object(q.a)(b,m),n="/funnel-offer/".concat(ee,'/design?design={"builder":"').concat(t,'","template":"').concat(e,'"}'),r="/funnel-".concat(m,"/").concat(ee,'/design?design={"builder":"').concat(t,'","template":"').concat(e,'"}');u()({path:Object(I.q)("".concat("upsell"===m?n:r)),method:"POST"}).then((function(e){if(!e.success)throw dt({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),ut(!1),e;E()})).catch((function(e){throw e}))}(e);var i=Object.create({});i.template=e,i.builder=Object(q.a)(b,a);var p=Object.create({});Object.create({});if(oe&&"step"===He){var f=l&&l.hasOwnProperty("id")?l.id:0;l?(i.title=n.title,i.inherit_from=f,i.type=a,delete i.template,delete i.builder):(i.funnel_id=oe,i.type=a,i.title=n.title,i.template_type=t),"upsell"===a&&("new"===n.type?(delete i.inherit_from,l&&(i.offer_inherit=f),Object(c.size)(n.offer_title)?i.offer_title=n.offer_title:i.offer_title=l.name):Object(c.size)(n.offer_title)?i.title=n.offer_title:i.title="".concat(l.name," Copy")),i.insert_into=n.insert_into}else{g().thumbnails.forEach((function(e){p["upsell"===e.step?"wc_upsells":e.step]=e.slug})),i.steps=JSON.stringify(p),oe&&"funnel"===He?i.funnel_id=Number(oe):i.title=n.title}var d=0!==oe&&"step"===He?"upsell"===a&&"existing"===n.type?Object(I.q)("/funnel-upsell/".concat(n.insert_into,"/offers")):Object(I.q)("/funnels/".concat(oe,"/steps")):Object(I.q)("/".concat(M,"/import_template"));u()({method:"POST",data:i,path:d}).then((function(e){if(e.hasOwnProperty("builders_options"))_t(!1,!0);else if(e.status&&!0===e.status){if(e.setup&&ae(e.setup),o=!1,oe||(e.funnel_id?wt(e.funnel_id):dt({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:Object(s.__)("Unable to import template. Contact Support.","funnel-builder")})),0!==oe&&E){if("funnel"===He&&et(!1),"upsell"===a&&n.hasOwnProperty("insert_into")&&""!==n.insert_into&&ge.steps){var t=ge.steps.findIndex((function(e){return parseInt(e.id)===parseInt(n.insert_into)})),r=ge.steps[t].substeps;r.hasOwnProperty("offer")&&r.offer.length>0&&r.offer.map((function(e){we("offer",e.id,"products",e.id)}))}E(e)}}else dt({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),be(!1)})).catch((function(e){dt({status:!0,error:e.message||e.msg}),be(!1)})).finally((function(){o&&ut(!1)}))}catch(e){ut(!1)}},wt=function e(t){try{u()({path:Object(I.q)("/funnels/".concat(t,"/import-status"))}).then((function(n){!0===n.status?E?(at(!1),E({funnel_id:t})):(delete ne.group,je({},"/funnels/".concat(t),ne)):!1===n.status&&setTimeout((function(){e(t)}),2e3)}))}catch(e){}},gt=function(e){var t=!1,n=!Ze||"wc_checkout"!==Ze&&"wc_thankyou"!==Ze?"upsell"===Ze?!ce:!le:!re;return"yes"===e&&!0!==n?t=!0:"status"===e&&(t=n),t},Et=gt("status");return Object(r.createElement)(r.Fragment,null,f?Object(r.createElement)(Le,{showEditors:Z,showTemplatesNav:Z}):Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-template-list-header"},S&&Object(r.createElement)(Ke,{funnelId:v,disabledNavs:P,activeTemplateGroup:m,templateGroup:O,onClick:function(e){return Ce(e)},urlDependency:J}),Z&&Object(r.createElement)(De,{editorList:a[m],onChange:function(e){Te(e),_&&Object(q.f)({showSnackbar:ue,hideSnackbar:se,builder:e,defaultBuilder:n,onConfirm:function(){!function(e){if(n!==e){vt(!0);try{u()({path:Object(I.q)('/funnels/general-settings/update-default-builder?settings={"default_selected_builder": "'.concat(e,'"}')),method:"POST"}).then((function(t){t.success?Se(e):console.log("Something went wrong with saving default editor")})).catch((function(e){console.log(e)})).finally((function(){vt(!1)}))}catch(e){console.log(e),vt(!1)}}}(e)},defaultEditorLoading:jt})},activeEditor:b})),Object(r.createElement)("div",{id:"wffn_design_container",ref:X},Object(r.createElement)("div",{className:"wffn_tab_container"},K,Object(r.createElement)(Xe,{templateFilterCheck:k,templateCards:w,showBuildFromScratch:A,importBuildFromScratch:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(B&&!r)dt(tt(tt({},B),{},{onConfirm:function(){return e(t,n,!0)},onCancel:function(){return dt({status:!1})}}));else{if(it)return!1;"upsell"===m&&gt()?ft(!0):(Pe({id:t,isBuildFromScratch:!0,template:{name:O[m]}}),$?$():_t(!0,!1,t),oe||et(!0))}},activeTemplateGroup:m,activeEditor:b,onPreview:function(e,t,n){e.preventDefault(),n.group_type?Fe(Object.keys(n.group_type)[0]):0!==v&&"funnel"!==He||"optin"!==m&&"wc_checkout"!==m||Fe("optin"===m?"inline":"wc_checkout"===m&&"1"),Pe({id:t,template:n,steps:n.steps,activeStep:n.steps?n.steps[0].type:""}),at(!0),"upsell"===m&&0===v?je({},"".concat(T,"/").concat(m,"/").concat(b,"/preview/").concat(t)):0===v?je({},"".concat(T,"/").concat(m,"/").concat(b,"/preview/").concat(t,"/").concat(n.steps[0].type)):n.steps?("funnel"===He&&je({},"".concat(T,"/templates/").concat(m,"/").concat(b,"/preview/").concat(t,"/").concat(n.steps[0].type)),Ne(n.steps[0].type)):je({},"".concat(T,"/templates/").concat(m,"/").concat(b,"/preview/").concat(t))},funnelId:v,importType:He,stepId:ee,importing:it}))),Object(r.createElement)(R.a,{className:"bwf-admin-modal-squeezy "+mt.className,isLoading:mt.loading,successMessage:mt.success,errorMessage:mt.error,isOpen:mt.status,autoHide:8e3,content:mt.content,confirmText:mt.confirmText,confirmButtonText:mt.confirmButtonText,cancelButtonText:mt.cancelButtonText,onConfirm:mt.onConfirm,onCancel:mt.onCancel,modalTitle:mt.modalTitle,disableConfirm:mt.disableConfirm,closeIcon:mt.closeIcon,onRequestClose:function(){return dt({status:!1})}}),Object(r.createElement)(L,{isOpen:pt,onRequestClose:function(){return ft(!1)},modalContent:Object(q.d)({FB_PRO_STATUS:Et,funnelId:v,importType:He,activeTemplateGroup:m}),className:"bwf-templates-pro-modal"}),fe&&(0===v?Object(r.createElement)(he.a,{onCloseModal:function(){be(!1)},isWorking:it,onComplete:function(e,n,r){ze.isBuildFromScratch?function(e,n,r){if(ut({id:"scratch",group:m,filter:t}),r)u()({path:Object(I.q)("".concat("wc_checkout"===m?"/store-checkout":"/funnels","/duplicate/").concat(r)),method:"wc_checkout"===m?"POST":"GET"}).then((function(e){e.status&&(Object(I.Z)()||e.funnel_id)?E?E({funnel_id:e.funnel_id}):je({},"/funnels/".concat(e.funnel_id),ne):dt({status:!0,modalTitle:Object(s.__)("Clone Funnel"),error:e.message||e.msg||Object(s.__)("Unable to clone funnel. Contact Support.","funnel-builder"),content:e.error}),ut(!1)})).catch((function(e){ut(!1),console.log(e)}));else{var l={funnel_name:e,template:"scratch"};r&&(l.inherit_from=r),n&&!Object(c.isEmpty)(n)&&(l.funnel_steps=n.join(",")),l.builder=b,"wc_checkout"===m&&(l.default_step="yes",l.template=null==ze?void 0:ze.id);try{u()({method:"POST",data:l,path:Object(I.q)("/".concat(M))}).then((function(e){if(!0===e.status&&e.hasOwnProperty("funnel")){var t=e.funnel.id;e.setup&&ae(e.setup),"funnels"===M?(delete ne.group,Object(p.k)({},"/funnels/".concat(t),ne)):E({funnel_id:e.funnel.id})}else!1===e.status&&(dt({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),be(!1),ut(!1))}))}catch(e){console.log(e),ut(!1)}}}(e,n,r):ht(ze.id,{title:e})},modalTitle:x.title}):Object(r.createElement)(Ae,{onCloseModal:function(){be(!1)},isWorking:it,activeTemplateGroup:m,templateGroup:O,showCloneOption:ze.isBuildFromScratch,onComplete:function(e,t,n){var r=ze.id;if(t!==m){var l=Object(c.get)(i,"".concat(t,".").concat(b)),a=l&&Object.keys(l).find((function(e){var t;return!0===(null===(t=l[e])||void 0===t?void 0:t.build_from_scratch)}));a&&(r=l[a].slug)}ht(r,e,t,n)}}))),(Ve||lt)&&Object(r.createElement)(ve,{isOpen:lt||Ve,onRequestClose:function(){at(!1),Fe(!1),ne.group&&(delete ne.group,je({},Object(p.g)(),ne))},importTemplate:ht,templateGroup:O,activeGroup:m,templateID:ze.id,template:ze.template,activeEditor:b,importing:it,templateList:i,filters:l,templates:i,hasPRO:gt,checkEditor:$||_t,previewData:g,isTemplateLoading:f,activeFilter:t,setPreviewErr:Oe,parentRoute:T,funnelId:v,importType:He,updateQueryString:je,previewCustomizeEnabled:H,urlDependency:J,stepId:ee}))};lt.prototype={filters:a.a.object.isRequired,templates:a.a.object.isRequired,editors:a.a.object.isRequired,defaultBuilder:a.a.object.isRequired,templateLoading:a.a.func.isRequired,activeTemplateGroup:a.a.string.isRequired,templateGroup:a.a.object.isRequired};var at=lt},329:function(e,t,n){"use strict";var r=n(0),c=n(2),l=n(9),a=n(1),o=n(13),i=n.n(o),u=n(20),s=n(252),p=n(4),f=n(285),b=n(26),m=n(77),d=n(249),O=n(21),j=n(251);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n,r,c,l,a){try{var o=e[l](a),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,c)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,l=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){o=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw c}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t,n=e.onCloseModal,o=e.onComplete,i=e.isWorking,f=w(Object(r.useState)(""),2),v=f[0],y=f[1],_=w(Object(r.useState)(""),2),g=_[0],k=_[1],S=w(Object(r.useState)([]),2),T=S[0],C=S[1],P=w(Object(r.useState)(!1),2),N=P[0],I=P[1],A=Object(O.a)("ul").isProFeatureLocked,F=Object(d.a)(),x=F.getCurrentTemplate,B=F.getScratchTemplateType,L=F.getActiveGroup,R=F.getActiveSubFilter,D=x(),G=B(),U=L(),q=R(),z=Object(r.createElement)(r.Fragment,null,"wc_checkout"===U?Object(a.__)("Create Store Checkout","funnel-builder"):Object(a.__)("Create Funnel","funnel-builder")),M=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==G&&D.isBuildFromScratch||g){e.next=3;break}return y("Funnel title is required field"),e.abrupt("return");case 3:y(""),o&&o(g,T,D.isBuildFromScratch&&"new"!==G&&N);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,c){var l=e.apply(t,n);function a(e){h(l,r,c,a,o,"next",e)}function o(e){h(l,r,c,a,o,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),K=function(){return D.isBuildFromScratch?"new"===G?Object(c.isEmpty)(g.trim())||!1===U&&Object(c.isEmpty)(T):Object(c.isEmpty)(N):Object(c.isEmpty)(g.trim())},W=function(e){return"wc_checkout"===e.type&&q&&j.e.hasOwnProperty(e.type)&&j.e[e.type].hasOwnProperty(q)?" - ".concat(j.e[e.type][q]," ")+Object(a.__)("Step","funnel-builder"):""};return Object(r.createElement)(l.Modal,{title:z,className:"bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!i,overlayClassName:"bwf-create-funnel-modal__overlay"},v&&Object(r.createElement)(m.a,{errorMessage:v}),(!D.isBuildFromScratch||"existing"!==G)&&Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&(K()||M())}},Object(r.createElement)(l.TextControl,{placeholder:Object(a.__)("Enter funnel name","funnel-builder"),label:Object(a.__)("Name","funnel-builder"),value:g,onChange:function(e){return k(e)},disabled:i})),D.isBuildFromScratch&&("new"===G?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-create-new-funnel__add-step-wrap"},"wc_checkout"===U?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(a.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-mb-12 bwf-flex bwf--g8"},Object(r.createElement)(b.b,{content:Object(a.__)("Checkout","funnel-builder"),border:!0}),Object(r.createElement)(b.b,{content:Object(a.__)("Thank You","funnel-builder"),border:!0})),Object(r.createElement)("span",{className:"help-text"},Object(a.__)("Note: You have to custom build and design the above steps","funnel-builder"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,Object(a.__)("Add following steps to funnel","funnel-builder")),Object(r.createElement)(s.a,{value:T,onChange:function(e){C(e)},options:Object.keys(p.gb).map((function(e){return{value:e,label:p.gb[e],isPro:A&&"upsell"===e}})),disabled:i})))):Object(r.createElement)(E,{onSelect:function(e){return I(e)},activeGroup:U})),!D.isBuildFromScratch&&D.steps&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(a.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-mb-12 bwf-flex-wrap"},null===(t=D.steps)||void 0===t?void 0:t.filter((function(e){return!A||"upsell"!==e.type})).map((function(e,t){return Object(r.createElement)(b.b,{content:p.gb[e.type]+W(e),border:!0,key:"step-type-".concat(t)})})))),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.a,{onClick:n,className:"bwf-modal-cancel-btn",disabled:i},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(u.a,{isPrimary:!0,disabled:K()||i,isBusy:i,onClick:M,className:K()?"bwf-no-ripple":"",name:"add-funnel"},Object(a.__)("Done","funnel-builder"))))};var E=function(e){var t=e.onSelect,n=e.activeGroup,l=w(Object(r.useState)([]),2),o=l[0],u=l[1],s=w(Object(r.useState)(""),2),m=s[0],d=s[1],O=w(Object(r.useState)({}),2),j=O[0],v=O[1],_=w(Object(r.useState)([]),2),h=_[0],g=_[1],E=w(Object(r.useState)(!0),2),k=E[0],S=E[1],T=function(e){S(!0),i()({path:Object(p.q)("/funnels".concat(Object(p.p)(y({},e))))}).then((function(e){e.status?(u(e.items),Object(c.size)(e.items)?g(e.items.map((function(e){return{key:e.id,value:e.title}}))):g([{key:"no-data",value:"No Data Found"}])):e.items||g([]),S(!1)})).catch((function(e){console.log(e),S(!1)}))};Object(r.useEffect)((function(){Object(c.isEmpty)(m)?T({limit:10,need_steps_data:!0}):T({limit:10,s:m,need_steps_data:!0})}),[m]);var C=Object(r.useMemo)((function(){var e;if(Object(c.isEmpty)(o))return[];var t=null===(e=o.find((function(e){return e.id===j.key})))||void 0===e?void 0:e.steps_data,r=[];return t.forEach((function(e){r.push(e.type),"wc_checkout"===e.type&&e.substeps&&!Object(c.isEmpty)(e.substeps)&&r.push("wc_order_bump")})),r.filter((function(e){return"wc_checkout"!==n||["wc_checkout","wc_thankyou","wc_upsells"].includes(e)})).filter((function(e,t,n){return n.indexOf(e)===t}))}),[j]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,Object(a.__)("Funnel","funnel-builder")),Object(r.createElement)(f.a,{onSearch:function(e){return d(e)},isLoading:k,items:h,multiGroup:!1,error:"",onItemClick:function(e){t(e.key),v(e)},blurText:j.value,placeholder:Object(a.__)("Searchâ¦","funnel-builder")}),!Object(c.isEmpty)(j)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(a.__)("The following steps have been added to the funnel","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf-flex-wrap bwf--g8 bwf-mb-16"},Object(c.isEmpty)(C)?Object(r.createElement)(b.b,{content:Object(a.__)("No Steps","funnel-builder"),border:!0}):C.map((function(e,t){return Object(r.createElement)(b.b,{content:Object(p.fb)(e),border:!0,key:"steps-".concat(t)})})))))}},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},436:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(119),l=n(2),a=n(1),o=n(322),i=n(249),u=n(76),s=n(4),p=n(14),f=function(e){var t=Object(r.useRef)(!0),n=Object(i.a)(),c=n.getTemplates,a=n.getActiveBuilder,o=n.getActiveGroup,u=Object(l.isEmpty)(c()),s=o(),p=a();Object(r.useEffect)((function(){var n,r;t.current||!e.current||u||(r=null===(n=e.current)||void 0===n?void 0:n.getClientRects()[0].top)&&e.current&&r<252.86&&window.scrollTo(0,60)}),[u,s,p]),Object(r.useEffect)((function(){t.current&&!Object(l.isEmpty)(p)&&(window.scrollTo(0,0),t.current=!1)}),[p])},b=n(21),m=n(251);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=Object(b.a)("ul").isProFeatureLocked,n=Object(i.a)(),d=n.getTemplates,j=n.getBuilders,v=(n.getFilters,n.getDefaultBuilder),y=n.templateLoading,_=n.getActiveBuilder,h=n.getActiveSubFilter,w=n.getActiveGroup,g=n.getCurrentTemplate,E=Object(u.a)().setActiveGroup,k=e.onImportComplete,S=e.isStoreCheckout,T=void 0!==S&&S,C=e.scratchConfirmModalData,P=e.storeCheckoutId,N=e.isStoreChekoutExists,I=void 0!==N&&N,A=e.templateListNotice,F=e.showImportNotice,x=e.urlDependency,B=void 0===x||x,L=e.showEditors,R=void 0===L||L,D=e.showTemplatesNav,G=void 0===D||D,U=e.showBuildFromScratch,q=void 0===U||U,z=e.showSelectedTemplates,M=void 0!==z&&z,K=e.previewCustomizeEnabled,W=void 0!==K&&K,$=e.hideTabs,V=void 0===$?[]:$,J=Object(p.i)().importType,Y=d(),Z=j(),Q=JSON.parse(JSON.stringify(Z)),H=v(),X=_(),ee=y(),te=h(),ne=g(),re=Object(c.useParams)(),ce=re.id,le=void 0===ce?0:ce,ae=re.filter,oe=void 0===ae?"funnel":ae,ie=re.builder,ue=re.templateId,se=re.step,pe=Object(r.useRef)();f(!Object(s.Z)()&&pe);var fe,be=B?ue:ne.id,me=B?se:ne.activeStep,de=T&&P?P:le,Oe=w(),je=de||T||!B?Oe:oe,ve={funnel:Object(a.__)("All","funnel-builder"),wc_checkout:Object(a.__)("Checkout","funnel-builder"),landing:Object(a.__)("Sales Funnels","funnel-builder"),optin:Object(a.__)("Lead Funnels","funnel-builder")};((de||I||V.includes("wc_checkout"))&&delete ve.wc_checkout,I&&(ve.upsell&&delete ve.upsell,de||(ve.wc_checkout=Object(a.__)("Checkout","funnel-builder"))),!t||de||V.includes("upsell")||(ve.upsell=Object(a.__)("One Click Upsell","funnel-builder")),Q&&Q.wc_checkout&&Q.wc_checkout.customizer&&delete Q.wc_checkout.customizer,"funnel"===J)&&(null===(fe=Q[je])||void 0===fe||delete fe.wp_editor);Object(r.useEffect)((function(){return function(){E("funnel")}}),[]);var ye=function(){var e=ie||H;return Object(l.isEmpty)(X)||(e=X),Q&&Q[je]&&!Q[je][e]&&(e=Q[je][H]?H:"elementor"),e},_e=["1","2","3","inline","popup"],he=function(e,t){return("wc_checkout"===t||"optin"===t)&&te&&_e.includes(te)?Y[t][X][e].group_type[te]:e},we={landing:"sp",optin:"op",optin_ty:"op-confirmed",wc_checkout:"checkouts",upsell:"offer",wc_thankyou:"order-confirmed"},ge=function(e,t,n){var r=we.hasOwnProperty(e)?we[e]:"";return"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},Ee=Object(s.Z)()?"/store-checkout":de?"/funnels/".concat(de):"/templates";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.a,{filters:m.e,templates:Y,activeBuilder:ye(),templateCards:function(){if(Object(l.isEmpty)(Y)||Object(l.isEmpty)([je]))return{};var e,t=ye(),n={};if("upsell"===je)n=null===(e=Y[je])||void 0===e?void 0:e[t];else if("funnel"===je){var r=Y[je][t];for(var c in r){var a,o=r[c];if(r[c].hasOwnProperty("group")||M&&!M.includes(o.name))if(!(o.group.includes("sales")||o.group.includes("optin")||null!==(a=r[c])&&void 0!==a&&a.build_from_scratch))continue;n[c]=r[c]}}else for(var i in Y.funnel[t]){var u=Y.funnel[t][i];(!M||M&&M.includes(u.name))&&("landing"===je&&u.group.includes("sales")||"optin"===je&&u.group.includes("optin")||"wc_checkout"===je&&u.group.includes("wc_checkout"))&&(n[i]=u)}return n}(),editors:Q,defaultBuilder:H,isTemplateLoading:ee,activeTemplateGroup:je,templateGroup:ve,previewData:function(){if(Object(l.isEmpty)(Y)||!be)return{};var e={success:!0},t=[],n=[];try{var r=ye();if("upsell"===je){t=[];var c=r;for(var o in"oxy"===c&&(c="oxygen"),"customizer"===c&&(c="elementor"),Y[je][r]){var i=Y[je][r][o];if(!i.build_from_scratch){var u={};u.id=o,u.funnel=o,u.slug=o,u.name=i.name,u.thumbnail=i.thumbnail,u.template=be,u.pro=i.pro,u.preview="https://templates-".concat(c,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/"),u.group_type={},u.type="upsell",t.push(u),n.push({id:o,preview:"https://templates-".concat(c,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/")})}}e.activeTemplate={id:be,thumbnail:be,preview:"https://templates-".concat(c,".funnelswp.com/offer/").concat(Y[je][r][be].prevslug,"/"),slug:be,prevId:be,name:Y[je][r][be].name,pro:Y[je][r][be].pro,tempPro:Y[je][r][be].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(je){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var p=Y.funnel[r][be];t=p.steps?p.steps.map((function(e){var t=Y[e.type][r][he(e.slug,e.type)],c="";switch(e.type){case"landing":c=Object(a.__)("Sales Page","funnel-builder");break;case"wc_checkout":c=Object(a.__)("Checkout Page","funnel-builder");break;case"upsell":c=Object(a.__)("One Click Upsell","funnel-builder");break;case"wc_thankyou":c=Object(a.__)("Thank You Page","funnel-builder");break;case"optin":c=Object(a.__)("Optin Page","funnel-builder");break;case"optin_ty":c=Object(a.__)("Optin Confirmation Page","funnel-builder")}t.group_type?Object.values(t.group_type).forEach((function(t){var c=Y[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(c.prevslug),preview:ge(e.type,c,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:ge(e.type,t,r)});return{id:"".concat(e.type,"-").concat(be),slug:he(e.slug,e.type),funnel:be,step:e.type,name:c,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:ge(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var f=p?p.steps.filter((function(e){return e.type===me})):[],b=Y[f[0].type][r][he(f[0].slug,f[0].type)];e.activeTemplate={thumbnail:"".concat(me,"-").concat(be),prevId:"".concat(me,"-").concat(b.prevslug),preview:ge(f[0].type,b,r),slug:be,name:Y.funnel[r][be].name,pro:Y.funnel[r][be].pro,tempPro:Y.funnel[r][be].pro,group:"funnel",filters:!!b.group_type&&Object.keys(b.group_type),type:me,funnelGroup:p.group,filter:"wc_checkout"===me?b.no_steps:b.group?b.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:de,onImportComplete:k,templateFilterCheck:function(e){return!de||"funnel"===J||!1===te||!1===te||!(!de||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===te?"optin":te):te===e.group)},activeFilter:te,isStoreCheckout:T,parentRoute:Ee,showTemplatesNav:G,showBuildFromScratch:!!q&&("funnel"!==J||T&&!de),funnelTitleModalData:O({},T&&{title:Object(a.__)("Store Checkout","funnel-builder")}),scratchConfirmModalData:C,importApiPrefix:T?"store-checkout":"funnels",templateListNotice:A,showImportNotice:F,urlDependency:B,showEditors:R,previewCustomizeEnabled:W,listRef:pe}))}}}]);