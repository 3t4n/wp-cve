(window.webpackJsonp=window.webpackJsonp||[]).push([[40,3,6,9],{1128:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(256),o=n(119),i=n(2),c=n(7),l=n.n(c),u=n(1),s=n(9),f=n(4),b=n(24),p=["getStateProp"];function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var g=function(){var e=Object(b.a)("funnelCanvas"),t=e.getStateProp;return h(h({},O(e,p)),{},{nodeElements:t("nodes"),isLoading:t("isLoading"),getNodeById:function(e){var n,r={},a=d(t("nodes"));try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.id==e){r=o;break}}}catch(e){a.e(e)}finally{a.f()}return r},getSteps:function(){return t("nodes")},getNodeElements:function(){return t("nodes")},getFunnelId:function(){return t("funnelId")},getStepsList:function(){return t("stepsList")},getFunnelData:function(){return t("funnelData")},isLoadingAnalytics:t("analyticsLoading"),isAnalyticsLoaded:t("analyticsLoaded")})},j=n(82),w=n(50),E=n(60),_=n(37),S=n(8),k=n(13),x=n.n(k),P=n(40),C=n(29),N=n(14),T=n(20),R=function(e){var t=e.isSuccess,n=void 0===t||t,a=e.onRequestClose,o=e.stepName,i=e.onConfirm,c=e.isLoading,f=e.error,b=e.modalTitle,p=void 0===b?"":b,d=e.isParentOffer,m=void 0!==d&&d;return Object(r.createElement)(s.Modal,{isDismissible:!0,title:!1===n?Object(u.__)("Failed","funnel-builder"):""!==p?p:Object(u.__)("Delete Step","funnel-builder"),onRequestClose:function(){c||a()},className:"bwf-admin-modal bwf-admin-modal-small",shouldCloseOnClickOutside:!c},n?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},m?Object(r.createElement)(r.Fragment,null,o?Object(r.createElement)(r.Fragment,null,Object(u.__)("You are about to delete parent offer ","funnel-builder"),Object(r.createElement)("strong",null,o),Object(u.__)(". The path of dependent offers would need an update.","funnel-builder")):Object(u.__)("You are about to delete step. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")):Object(r.createElement)(r.Fragment,null,o?Object(r.createElement)(r.Fragment,null,Object(u.__)("You are about to delete ","funnel-builder"),Object(r.createElement)("strong",null,Object(_.decodeEntities)(o)),Object(u.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")):Object(u.__)("You are about to delete step. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(T.a,{onClick:function(){c||a()},className:"bwf-modal-cancel-btn",disabled:c},Object(u.__)("Cancel","funnel-builder")),Object(r.createElement)(T.a,{isBusy:c,disabled:c,onClick:i,className:l()({"is-danger":!m,"is-primary":m})},m?Object(u.__)("Update Path to Delete","funnel-builder"):Object(u.__)("Delete","funnel-builder")))):!c&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},f?f.hasOwnProperty("message")?f.message:f:"")),!c&&!1===n&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-modal-action".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(T.a,{className:"bwf-modal-confirm-btn",isPrimary:!0,onClick:a},Object(u.__)("OK","funnel-builder")))))},A=n(316),I=n(75),F=n(21),D=n(317);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K={landing:Object(u.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(u.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(u.__)("Add Upsell Page","funnel-builder"),optin:Object(u.__)("Add Optin Page","funnel-builder"),optin_ty:Object(u.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(u.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(u.__)("Add Order Bump","funnel-builder"),offer:Object(u.__)("Add Offer","funnel-builder")},H=function(e){e.title;var t=e.type,n=e.funnelId,a=e.stepID,o=e.parent_id,c=e.mainIndex,l=e.stepIndex,b=e.subIndex,p=Object(F.a)().isProFeatureLocked,d=Object(F.a)("ul").isProFeatureLocked,m=U(Object(r.useState)(!1),2),y=m[0],h=m[1],v=U(Object(r.useState)(!1),2),O=v[0],w=v[1],_=U(Object(r.useState)({}),2),k=_[0],P=_[1],C=g().getStepsList,N=Object(j.a)(),T=N.setStepList,R=N.duplicateStepNode,q=C(),M=Object(f.Z)(),V=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,u,s,p,d,m,y,v,O=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=O.length>0&&void 0!==O[0]?O[0]:{},u=r.copyFrom,s=void 0===u?{}:u,p=r.title,d=void 0===p?"":p,(m=s&&s.hasOwnProperty("key")?s.key:0)<1&&(m=s&&s.hasOwnProperty("id")?s.id:0),y="",v={inherit_from:m,title:d,type:t,canvas:{mode:"sibling",insert_after:a}},e.t0=t,e.next="wc_order_bump"===e.t0?9:11;break;case 9:return y=M?Object(f.q)("/store-checkout/".concat(n,"/step/").concat(o,"/substeps/")):Object(f.q)("/funnels/".concat(n,"/steps/").concat(o,"/substeps/")),e.abrupt("break",13);case 11:return y=Object(f.q)("/funnels/".concat(n,"/steps")),e.abrupt("break",13);case 13:return e.prev=13,w(!0),e.next=17,x()({method:"POST",path:y,data:v}).then((function(e){if(e.hasOwnProperty("status")&&e.status&&e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)){var n=Object(i.cloneDeep)(q),r=e.data,a=r.groups,o=void 0===a?[]:a,u=r.steps_list,s=void 0===u?{}:u;n=B(B({},n),s),T(n),R(t,c,l,b,o[0]),h(!1),w(!1)}}));case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(13),console.log(e.t1),w(!1);case 23:case"end":return e.stop()}}),e,null,[[13,19]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){L(o,r,a,i,c,"next",e)}function c(e){L(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-add-horizontal-wrap",onClick:function(){"wc_order_bump"===t&&p?P({bump:!0}):"wc_upsells"!==t&&"offer"!==t||!d?h(!0):P({status:!0})}},Object(r.createElement)(I.a,{toolTipText:K.hasOwnProperty(t)?K[t]:Object(u.__)("Add Step","funnel-builder")},Object(r.createElement)(S.a,{icon:"dashed-plus"}))),y&&Object(r.createElement)(s.Modal,{title:K.hasOwnProperty(t)?K[t]:Object(u.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return h(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(A.a,{step:{type:t,parent_id:o,title:Object(f.fb)(t),is_substep:["wc_order_bump","offer"].includes(t)},requestCreateStep:V,onRequestClose:function(){return h(!1)},isBusy:O})),k.status&&Object(r.createElement)(E.a,{isOpen:k.status,onRequestClose:function(){return P({status:!1})},modalContent:k,type:k.type}),k.bump&&Object(r.createElement)(D.a,{isOpen:k.bump,onRequestClose:function(){return P({status:!1})}}))},z=n(170),Y=n(359),$=n(79),Q=n(41),W=n(108),G=n(244);function X(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe=function(e){var t=e.setIsOpen,n=void 0===t?function(){}:t,a=e.offerId,o=void 0===a?"":a,c=e.stepGroupData,l=void 0===c?{}:c,b=e.stepList,p=void 0===b?{}:b,d=e.onUpdateDynamicOffer,m=void 0===d?function(){}:d,y=e.orphanNode,h=void 0!==y&&y,v=ne(Object(r.useState)(!1),2),O=v[0],g=v[1],j=ne(Object(r.useState)(""),2),E=j[0],k=j[1],P=l.id,C=l.substeps,N=void 0===C?[]:C,T=ne(Object(r.useState)({}),2),R=T[0],A=T[1],I=Object(r.useMemo)((function(){var e=[];return N.forEach((function(t){var n=t.id,r=void 0===n?"":n;if(""!==r&&p.hasOwnProperty(r)){var a=p[r].title,o=void 0===a?"":a;e.push({key:parseInt(r)>0?parseInt(r):r,label:o})}})),e}),[N]),F=Object(r.useMemo)((function(){var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=re(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(N);try{for(n.s();!(e=n.n()).done;){var r=e.value.id,a=void 0===r?"":r;""!==a&&p.hasOwnProperty(a)&&t.push(parseInt(a))}}catch(e){n.e(e)}finally{n.f()}return t.push(0),t}),[N]);Object(r.useEffect)((function(){var e;e={},N.forEach((function(t,n){var r=t.id,a=void 0===r?"":r;if(""!==a&&a!=o){var i=p[a],c=i.accept,l=void 0===c?"":c,u=i.reject,s=void 0===u?"":u;e[a]={accept:""===l||""!==o&&parseInt(l)==o||!F.includes(parseInt(l))?"":parseInt(l),reject:""===s||""!==o&&parseInt(s)==o||!F.includes(parseInt(s))?"":parseInt(s)}}})),A(e)}),[N]);var D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],a=[];return I.map((function(n,o){o>t&&n.key!=e&&(n.label=Object(_.decodeEntities)(n.label),r.push(n),a.push(n.key))})),n?a:r},q=function(){var e=[];if(Object.keys(R).map((function(t){""!==R[t].accept&&""!==R[t].reject||e.push(t)})),e.length>0){var t=e.map((function(e){if(p.hasOwnProperty(e)&&p[e].hasOwnProperty("title"))return p[e].title}));return k(Object(u.__)("Please set the path of following offer:","funnel-builder")+" "+t.join(", ")),!1}return k(""),!0},B=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==q()){e.next=2;break}return e.abrupt("return");case 2:return g(!0),t={path:R},o&&!h&&(t=J(J({},t),{},{delete:!0,offer_id:o})),e.prev=5,e.next=8,x()({path:Object(f.q)("/funnel-upsell/".concat(P,"/dynamic-path")),method:"POST",data:t}).then((function(e){e.hasOwnProperty("success")&&e.success&&e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)?m(e.data):k(Object(u.__)("Unable to update the offer path.","funnel-builder")),g(!1)}));case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(5),k(Object(u.__)("Error encountered while making API call.","funnel-builder")),g(!1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){te(o,r,a,i,c,"next",e)}function c(e){te(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-medium bwf-dynamic-offer-path-modal bwf-admin-modal-no-header",onRequestClose:function(){return n(!1)},isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(u.__)("Dynamic Offer Path","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-btn-small is-primary components-button",onClick:function(){return B()}},Object(r.createElement)("span",{style:J({},O&&{visibility:"hidden"})},o&&!h?Object(u.__)("Update & Delete","funnel-builder"):Object(u.__)("Update","funnel-builder")),O&&Object(r.createElement)(w.a,{color:"#ffffff",style:{position:"absolute"}})),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(u.__)("Close","funnel-builder"),onClick:function(){return n(!1)}},Object(r.createElement)(S.a,{icon:"close",height:24,width:24})))),Object(r.createElement)("div",{className:"bwf-dynamic-path-modal-content"},E?Object(r.createElement)("div",{className:"bwf-dynamic-error"},E):Object(r.createElement)("div",{className:"bwf-desc"},Object(u.__)("You can set the offer path and redirect users to the acceptance/rejection of an offer","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-wrapper"},N.map((function(e,t){var n=e.id,a=void 0===n?"":n;if(""!==a&&a!=o){var c=p[a].title,l=void 0===c?"":c;return Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item",key:t},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-header"},Object(_.decodeEntities)(l)),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-wrap"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-label"},Object(u.__)("On Acceptance","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-val"},Object(r.createElement)(G.b,{options:[{key:"",label:Object(u.__)("Select","funnel-builder"),getOptionList:D}].concat(X(D(a,t-1)),[{key:0,label:Object(u.__)("Thankyou Page","funnel-builder")}]),selected:R.hasOwnProperty(a)?R[a].accept:"",onChange:function(e){var t=Object(i.cloneDeep)(R);t[a].accept=e,A(t)},className:R.hasOwnProperty(a)&&""!==R[a].accept?"":"rule-error"}))),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-label"},Object(u.__)("On Reject","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-val"},Object(r.createElement)(G.b,{options:[{key:"",label:Object(u.__)("Select","funnel-builder")}].concat(X(D(a,t-1)),[{key:0,label:Object(u.__)("Thankyou Page","funnel-builder")}]),selected:R.hasOwnProperty(a)?R[a].reject:"",onChange:function(e){var t=Object(i.cloneDeep)(R);t[a].reject=e,A(t)},className:R.hasOwnProperty(a)&&""!==R[a].reject?"":"rule-error"})))))}})))))},ie=n(81),ce=n(125),le={1:Object(u.__)("A/B Test Draft","funnel-builder"),2:Object(u.__)("A/B Test Running","funnel-builder"),3:Object(u.__)("A/B Test Paused","funnel-builder")},ue={1:"warning",2:"success",3:"default"},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?ue[e]:le[e]},fe=n(26),be=n(127),pe=n(74),de=n(126),me=n(123),ye=n(61);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ee={status:!0,feature:Object(u.__)("One Click Upsell","funnel-builder"),proLink:Object(f.K)(["Canvas","One","Click","Upsell","Upgrade","Modal"])},_e=function(e){var t=e.setIsOpenModal,n=e.allowedSteps,a=void 0===n?[]:n,o=e.defaultType,c=void 0===o?"":o,b=(e.parentStep,e.mainIndex),p=void 0===b?"":b,d=e.addNodeData,m=void 0===d?{}:d,y=e.newStep,h=void 0!==y&&y,v=e.replaceCurrentStep,O=void 0!==v&&v,w=e.currentParentType,_=e.hasCheckout,k=Object(F.a)("ul").isProFeatureLocked,P=je(Object(r.useState)(c),2),C=P[0],N=P[1],R=je(Object(r.useState)(!1),2),D=R[0],q=R[1],B=je(Object(r.useState)(null),2),M=B[0],L=B[1],U=g(),V=U.getFunnelId,K=U.getStepsList,H=Object(j.a)(),z=H.addNewStepGroup,Y=H.setStepList,$=H.replaceCurrentStepData,Q=H.replaceCurrentSubStepData,W=H.setUpsellStepNode,G=V(),X=K(),Z=Object(f.Z)(),J=je(Object(r.useState)({}),2),ee=J[0],te=J[1],ne=m.prevFirstParent,re=void 0===ne?"":ne,ae=m.lastIteratedStep,oe=void 0===ae?"":ae,ie=m.mainIndex,ce=void 0===ie?"":ie,le=m.stepIndex,ue=void 0===le?"":le,se=(m.newUpsell,m.upsellEndAddLast),be=void 0!==se&&se;Object(r.useLayoutEffect)((function(){var e=""==c&&1==a.length?a[0]:c;return"offer"!==e&&"wc_order_bump"!==e||N(e),function(){N("")}}),[]);var pe={landing:Object(u.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(u.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(u.__)("Add Upsell Page","funnel-builder"),optin:Object(u.__)("Add Optin Page","funnel-builder"),optin_ty:Object(u.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(u.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(u.__)("Add Order Bump","funnel-builder"),offer:Object(u.__)("Add Offer","funnel-builder")},de=[{key:"landing",label:Object(u.__)("Sales","funnel-builder")},{key:"wc_checkout",label:Object(u.__)("Checkout","funnel-builder")},{key:"wc_upsells",label:Object(u.__)("One Click Upsell Offer","funnel-builder")},{key:"wc_thankyou",label:Object(u.__)("Thankyou","funnel-builder")},{key:"optin",label:Object(u.__)("Optin","funnel-builder")},{key:"optin_ty",label:Object(u.__)("Optin Confirmation","funnel-builder")}],me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];switch(C){case"optin":t={type:"optin",steps:[e]};break;case"optin_ty":t={type:"optin_ty",steps:[e]};break;case"wc_thankyou":t={type:"wc_thankyou",steps:[e]};break;case"landing":t={type:"landing",steps:[e]};break;case"wc_checkout":t=O?e:{type:"wc_checkout",steps:[e]};break;case"wc_order_bump":t=e;break;case"wc_upsells":t={type:"wc_upsells",steps:[e]}}return t},he=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,r,a,o,c,l,u,s,b,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.length>0&&void 0!==d[0]?d[0]:{},r=n.copyFrom,a=void 0===r?{}:r,o=n.title,c=void 0===o?"":o,(l=a&&a.hasOwnProperty("key")?a.key:0)<1&&(l=a&&a.hasOwnProperty("id")?a.id:0),u={inherit_from:l,title:c,type:C,funnel_id:G,canvas:{mode:"start_group",insert_after:oe}},"offer"===C&&(u.canvas={empty:!1,position:be?"end":""}),"wc_order_bump"===C&&(u.canvas.mode="sibling"),h&&(u.canvas.insert_after=""),s="",e.t0=C,e.next="wc_order_bump"===e.t0?12:"offer"===e.t0?14:16;break;case 12:return s=Z?Object(f.q)("/store-checkout/".concat(G,"/step/").concat(re,"/substeps/")):Object(f.q)("/funnels/".concat(G,"/steps/").concat(re,"/substeps/")),e.abrupt("break",18);case 14:return s=Object(f.q)("/funnel-upsell/".concat(re,"/offers/")),e.abrupt("break",18);case 16:return s=Object(f.q)("/funnels/".concat(G,"/steps/")),e.abrupt("break",18);case 18:return e.prev=18,q(!0),e.next=22,x()({method:"POST",path:s,data:u}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)){var n,r=Object(i.cloneDeep)(X),a=e.data,o=a.groups,c=void 0===o?[]:o,l=a.steps_list,u=void 0===l?{}:l;r=ve(ve({},r),u),n=c[0],Y(r),"offer"===C?W(ce,ue,n):"wc_order_bump"===C?Q(ce,ue,0,n):O?$(ce,ue,C,n):z(p,me(n)),t(!1)}t(!1)}else{var s;L({add_err:null!==(s=null==e?void 0:e.msg)&&void 0!==s?s:null==e?void 0:e.message})}q(!1)}));case 22:e.next=29;break;case 24:e.prev=24,e.t1=e.catch(18),console.log(e.t1),q(!1),L({add_err:null!==(b=null===e.t1||void 0===e.t1?void 0:e.t1.msg)&&void 0!==b?b:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 29:case"end":return e.stop()}}),e,null,[[18,24]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ge(o,r,a,i,c,"next",e)}function c(e){ge(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),Oe=function(e,t){var n=!(Object(i.isEmpty)(a)||a.includes(e.key)||"wc_upsells"===e.key&&k);return Object(r.createElement)("div",{key:t},Object(r.createElement)(T.a,{isSecondary:!0,style:{width:"100%"},onClick:function(){n||("wc_upsells"===e.key&&k?te(Ee):N(e.key))},className:l()({disabled:n})},Object(r.createElement)("span",{className:"bwf-type-select-icons",key:"bwf-icon"+e.key+"-"+t,"data-type":e.key},Object(r.createElement)(S.a,{icon:"".concat(e.key,"-flow")})),Object(r.createElement)("span",{className:"bwf-type-select-label",key:"bwf-label"+e.key+"-"+t},e.label),"wc_upsells"===e.key&&k&&Object(r.createElement)(fe.a,null)))},we=function(e){var t,n,r;if(Object(f.Z)()&&["landing","optin","optin_ty"].includes(e))return Object(u.sprintf)(Object(u.__)("%s Page is not available in Store Checkout","funnel-builder"),null===(r=de.find((function(t){return t.key===e})))||void 0===r?void 0:r.label);switch(e){case"landing":case"optin":return Object(u.sprintf)(Object(u.__)("%s Page is not available after %s Step","funnel-builder"),null===(t=de.find((function(t){return t.key===e})))||void 0===t?void 0:t.label,null===(n=de.find((function(e){return e.key===w})))||void 0===n?void 0:n.label);case"wc_checkout":return _?Object(u.__)("A Checkout Step is already created, click plus icon next to checkout","funnel-builder"):Object(u.__)("Checkout will be available after Sales Step","funnel-builder");case"wc_upsells":return Object(u.__)("One Click Upsell will be available after Checkout Step","funnel-builder");case"optin_ty":return Object(u.__)("Optin Confirmation will be available after Optin Step","funnel-builder");case"wc_thankyou":return Object(u.__)("Thank you will be available after One Click Upsell or Checkout Step","funnel-builder")}};return Object(r.createElement)(r.Fragment,null," ",""===C?Object(r.createElement)(r.Fragment,null,ee.status?Object(r.createElement)(E.a,{isOpen:ee.status,onRequestClose:function(){return te({status:!1})},modalContent:ee,type:ee.type}):Object(r.createElement)(ye.a,{onFocusOutside:function(){return t(!1)},position:"bottom center",placement:"bottom-start",className:"bwf-step-type-select-modal",onClick:function(e){return e.stopPropagation()}},Object(r.createElement)("div",{className:"bwf-title-wrap",key:"bwf-step-header-1"},Object(r.createElement)("div",{className:"bwf-title bwf_w_full"},Object(u.__)("Add Step","funnel-builder")),Object(r.createElement)("div",{className:"bwf-cross bwf-cursor-pointer",onClick:function(){return t(!1)}},Object(r.createElement)(S.a,{icon:"cross",size:20})," ")),Object(r.createElement)("div",{className:"bwf-step-type-wrapper",key:"bwf-step-wrap-2"},de.map((function(e,t){return Object(i.isEmpty)(a)||a.includes(e.key)||"wc_upsells"===e.key&&k?Oe(e,t):Object(r.createElement)(I.a,{key:t,toolTipText:we(e.key),noInlineStyle:!0,size:150},Oe(e,t))}))))):Object(r.createElement)(s.Modal,{title:pe.hasOwnProperty(C)?pe[C]:Object(u.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){t(!1),L(null)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(A.a,{step:{type:C,title:Object(f.fb)(C),parent_id:re,is_substep:["wc_order_bump","offer"].includes(C)},requestCreateStep:he,onRequestClose:function(){return t(!1)},isBusy:D,errors:M})))},Se=n(55),ke=n(42);function xe(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Re(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Te(o,r,a,i,c,"next",e)}function c(e){Te(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var De=window.wffn.is_ab_experiment,qe={status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(f.J)()+"AB-testing.png",proLink:Object(f.K)(["Canvas","AB_Test","Upgrade","Modal"])},Be=function(e){var t,n,o,c=Object(F.a)("ul").isProFeatureLocked,b=Object(F.a)().isProFeatureLocked,p=Object(N.i)(),d=Object(F.b)().showSnackbar,m=e.data,y=void 0===m?{}:m,h=e.id,v=void 0===h?"":h,O=y.id,w=y.sub_title,k=y.stats,T=y.type,q=void 0===T?"":T,B=(y.tabs,y.control),M=void 0===B?null:B,L=y.edit_link,U=void 0===L?"":L,V=y.parent_id,K=void 0===V?"":V,G=y.links,X=void 0===G?[]:G,Z=y.tags,J=void 0===Z?["has_rules","end","draft","ab_test"]:Z,ee=y.mainIndex,te=void 0===ee?"":ee,ne=y.stepIndex,re=void 0===ne?"":ne,ae=y.subIndex,le=void 0===ae?"":ae,ue=y.upsellEnd,ye=void 0!==ue&&ue,he=y._data,ve=void 0===he?{}:he,Oe=y.bwfSourceEdgeType,ge=void 0===Oe?[]:Oe,je=y.upsellId,we=void 0===je?"":je,Ee=y.orphanNode,Pe=void 0!==Ee&&Ee,Ne=y.experiment_status,Te=g().isLoadingAnalytics,Ie=Ae(Object(r.useState)(!1),2),Fe=Ie[0],Be=Ie[1],Me=Ae(Object(r.useState)(!1),2),Le=Me[0],Ue=Me[1],Ve=Ae(Object(r.useState)(!1),2),Ke=Ve[0],He=Ve[1],ze=Ae(Object(r.useState)(!1),2),Ye=ze[0],$e=ze[1],Qe=Ae(Object(r.useState)({}),2),We=Qe[0],Ge=Qe[1],Xe=Ae(Object(r.useState)(!1),2),Ze=Xe[0],Je=Xe[1],et=Ae(Object(r.useState)({}),2),tt=et[0],nt=et[1],rt=ve.title,at=void 0===rt?"":rt,ot=ve.status,it=void 0===ot?0:ot,ct=ve.view_link,lt=Ae(Object(r.useState)(!1),2),ut=lt[0],st=lt[1],ft=Ae(Object(r.useState)(!1),2),bt=ft[0],pt=ft[1],dt=g(),mt=dt.getFunnelId,yt=dt.getStepsList,ht=dt.getNodeElements,vt=Object(P.a)().setPreviousStep,Ot=Ae(Object(r.useState)(!1),2),gt=Ot[0],jt=Ot[1],wt=Ae(Object(r.useState)(!1),2),Et=wt[0],_t=wt[1],St=Ae(Object(r.useState)(""),2),kt=St[0],xt=St[1],Pt=Ae(Object(r.useState)(!1),2),Ct=Pt[0],Nt=Pt[1],Tt=Ae(Object(r.useState)(!1),2),Rt=Tt[0],At=Tt[1],It=Ae(Object(r.useState)(!1),2),Ft=It[0],Dt=It[1],qt=Ae(Object(r.useState)(!1),2),Bt=qt[0],Mt=qt[1],Lt=Ae(Object(r.useState)(!1),2),Ut=Lt[0],Vt=Lt[1],Kt=Object(j.a)(),Ht=Kt.deleteStepNode,zt=Kt.updateStepTitle,Yt=Kt.setStepList,$t=Kt.setUpsellStepNode,Qt=Kt.setCanvasSingleStepListData,Wt=Object(f.Z)(),Gt=mt(),Xt=yt(),Zt=ht(),Jt=Object(C.a)().setStepTitle,en=Object(ie.a)().setExperimentStatus,tn=Object(Se.a)().setStepHeaderData,nn=function(e,t){if(He(!0),(e=e.trim())===at&&(null==ve?void 0:ve.post_name)===t)Ue(!1),He(!1);else{var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');x()({path:Object(f.q)("/funnel-".concat(q,"/save-state/").concat(O,"?funnel_id=").concat(Gt)),data:JSON.parse(n),method:"POST"}).then((function(n){if(!n.success)throw new Error(n.msg);zt(O,e,t),Ue(!1),He(!1)})).catch((function(e){console.log(e.message?e.message:e)}))}},rn=function(){var e=Re(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_t(!0),t="",e.t0=q,e.next="wc_order_bump"===e.t0?5:"offer"===e.t0?7:9;break;case 5:return t=Wt?Object(f.q)("/store-checkout/".concat(Gt,"/step/").concat(K,"/substeps/").concat(O)):Object(f.q)("/funnels/".concat(Gt,"/steps/").concat(K,"/substeps/").concat(O)),e.abrupt("break",11);case 7:return t=Object(f.q)("/funnel-upsell/".concat(O,"/offers")),e.abrupt("break",11);case 9:return t=Wt?Object(f.q)("/store-checkout/".concat(Gt,"/step/").concat(O)):Object(f.q)("/funnels/".concat(Gt,"/steps/").concat(O)),e.abrupt("break",11);case 11:return e.prev=11,e.next=14,x()({path:t,method:"DELETE",data:{type:q,parent_id:K}}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if("offer"===q){var t=Object(i.cloneDeep)(Xt),n=e.data,r=n.groups,a=void 0===r?[]:r,o=n.steps_list,c=void 0===o?{}:o;t=Ce(Ce({},t),c),Yt(t),$t(te,re,a[0])}else if(Object(f.Z)()&&e.hasOwnProperty("groups")&&!Object(i.isEmpty)(e.groups)&&e.hasOwnProperty("steps_list")&&!Object(i.isEmpty)(e.steps_list)){var l=Object(i.cloneDeep)(Xt),u=e.groups,s=void 0===u?[]:u,b=e.steps_list,p=void 0===b?{}:b;l=Ce(Ce({},l),p),Yt(l),$t(te,re,s[0],"wc_native")}else Ht(te,re,le);jt(!1)}else xt(e);_t(!1)}));case 14:e.sent,e.next=22;break;case 17:e.prev=17,e.t1=e.catch(11),xt(e.t1),_t(!1),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(){return e.apply(this,arguments)}}(),an=Object(f.s)(),on=function(){return Object(f.Q)(Gt,q,O,O,!0)},cn=function(){var e=Re(regeneratorRuntime.mark((function e(){var t,n,r,a,o,c,l,u,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.copyFrom,r=void 0===n?{}:n,a=t.title,o=void 0===a?"":a,(c=r&&r.hasOwnProperty("key")?r.key:0)<1&&(c=r&&r.hasOwnProperty("id")?r.id:0),l={inherit_from:c,title:o,type:"offer",funnel_id:Gt,canvas:{empty:!1,position:"before",offer_id:O}},u=Object(f.q)("/funnel-upsell/".concat(we,"/offers/")),e.prev=6,$e(!0),e.next=10,x()({method:"POST",path:u,data:l}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)){var t=Object(i.cloneDeep)(Xt),n=e.data,r=n.groups,a=void 0===r?[]:r,o=n.steps_list,c=void 0===o?{}:o;t=Ce(Ce({},t),c),Yt(t),$t(te,re,a[0]),st(!1)}st(!1)}$e(!1)}));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0),$e(!1);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(){return e.apply(this,arguments)}}(),ln=Object(r.useMemo)((function(){return!!("offer"!==q||O&&Xt.hasOwnProperty(O))}),[Xt]),un=Object(r.useCallback)((function(){return Zt[te].steps[re]}),[Zt]),sn=Object(r.useMemo)((function(){var e=0;return"offer"===q&&Zt.hasOwnProperty(te)&&Zt[te].hasOwnProperty("steps")&&Zt[te].steps.hasOwnProperty(re)&&Zt[te].steps[re].hasOwnProperty("substeps")&&!Object(i.isEmpty)(Zt[te].steps[re].substeps)&&(e=Zt[te].steps[re].substeps.length),e}),[Zt]),fn=function(){return Object(r.createElement)("div",{className:"bwf-node-not-exists-wrap"},Object(r.createElement)("div",{className:"bwf-node-not-exists-header"},Object(u.__)("This offer is not visible to the customers","funnel-builder")),Object(r.createElement)("div",{className:"bwf-node-not-exists-content"},Object(u.__)("Because it's tied to the rejection of another offer that you've deleted. To display this offer, set its dynamic offer path.","funnel-builder")),Object(r.createElement)("div",{className:"bwf-node-not-exists-btn",onClick:function(){return pt(!0)}},Object(r.createElement)(S.a,{icon:"dynamic-offer-path",width:25,height:24}),Object(r.createElement)("span",{className:"bwf-node-not-exists-btn-text"},Object(u.__)("Set Dynamic Offer Path","funnel-builder"))))},bn=function(){v&&(De&&!b?(en(Ne),Jt(Object(_.decodeEntities)(at)+Object(u.__)(" A/B Test","funnel-builder")),vt("canvas"),Object(N.k)({},Object(f.Z)()?"/store-checkout/experiments/".concat(O):"/funnels/".concat(Gt,"/experiments/").concat(O))):nt(qe))},pn="wc_upsells"!==q?[{title:Object(u.__)("A/B Test","funnel-builder"),type:"ab_test",link:Object(f.Z)()?Object(f.D)("/store-checkout/experiments/".concat(O)):Object(f.D)("/funnels/".concat(Gt,"/experiments/").concat(O))}]:[],dn=function(e){Nt(!0);var t="";switch(q){case"wc_bump":t="/funnel-bump/save-state/".concat(O,"?funnel_id=").concat(Gt);break;case"offer":t="/funnel-offer/save-state/".concat(O,"?funnel_id=").concat(Gt);break;default:t="/funnel-".concat(q,"/save-state/").concat(O,"?funnel_id=").concat(Gt)}x()({path:Object(f.q)(t),method:"POST",data:{status:!Number(it),canvas:!0}}).then((function(e){e.success?(Qt(O,e.step_list),Nt(!1),Je(!1),At(!1),Ge({}),d(Object(u.__)("Changes Saved","funnel-builder"))):(Nt(!1),At(!1),Je(!1))})).catch((function(e){console.log(e),d("Status Updation Failed")}))},mn=Object(r.createElement)(ke.a,{h:18,w:36}),yn=Object(r.useMemo)((function(){return"offer"===q&&(Pe||ge.includes("bwf-orphan"))}),[ge,Pe]);return Object(r.createElement)("div",{className:l()("bwf-node-wrapper"),"step-id":v},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1,className:"bwf-target",style:"offer"===q&&!ge.includes("bwf-default")&&ln?{opacity:0}:{}}),ln?Object(r.createElement)("div",{className:l()("bwf-inner-wrapper "+"node-type-".concat(q),{"is-orphan":!1}),onClick:function(){yn&&Vt(!Ut)},onMouseEnter:function(e){e.currentTarget.classList.contains("bwf-inner-wrapper")&&!e.target.closest(".bwf-add-horizontal-wrap")&&Be(!0)},onMouseLeave:function(e){var t;null===(t=e.target.querySelector(".bwf-ellipsis-menu__toggle.is-opened"))||void 0===t||t.click(),Be(!1)}},"offer"===q&&!Pe&&(!ge.includes("bwf-default")||!ge.includes("bwf-orphan"))&&Object(r.createElement)("div",{className:"bwf-offer-add",onClick:function(){c?nt({status:!0}):st(!0)}},Object(r.createElement)(S.a,{icon:"plus-circle",size:24,color:"#fff"})),ye?"":Object(r.createElement)("div",{className:"bwf-node-hover","data-status":Fe?"hover":"notHover"},Object(r.createElement)("span",{className:"bwf-options"},!Object(i.isEmpty)(X)&&[].concat(xe(X),pn).map((function(e,t){var n=e.link,a=e.type;return["edit_link","preview","ab_test"].includes(a)?Object(r.createElement)(I.a,{toolTipText:"edit_link"===a?Object(u.__)("Edit","funnel-builder"):"ab_test"===a?Object(u.__)("A/B Test","funnel-builder"):Object(u.__)("Preview","funnel-builder"),key:t,iconSize:24,position:"bottom center",size:"auto"},Object(r.createElement)("a",{href:"edit_link"===a?on():Object(_.decodeEntities)(n),onClick:function(e){e.preventDefault(),vt("canvas"),"edit_link"===a?(tn(Object(f.R)(q),O,"offer"===q?O:"",{title:at,view_link:ct,status:1===Number(it)}),Object(N.d)().push(on())):"ab_test"===a?bn():window.open(Object(_.decodeEntities)(n),"_blank","noreferrer")}},Object(r.createElement)(S.a,{icon:"edit_link"===a?"edit":"ab_test"===a?"a/b":"view",size:"24"}))):null})),Object(r.createElement)(W.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)($.a,{isClickable:!0,onInvoke:function(){t(),Ue(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Rename","funnel-builder")))),"wc_upsells"===q&&Object(r.createElement)($.a,{isClickable:!0,onInvoke:function(){t(),pt(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Dynamic Offer Path","funnel-builder")))),!(it&&1===parseInt(it))&&Object(r.createElement)($.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Ge({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object(_.decodeEntities)(at)),"funnel-builder")))}),dn()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(it)&&Object(r.createElement)($.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(Ne)?At(!0):Je(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Draft","funnel-builder")))),Object(r.createElement)($.a,{isClickable:!0,onInvoke:function(){t(),jt(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:"bwf-node-brick is-step-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(S.a,{size:36,icon:q?"".concat(q,"-flow"):"optin-flow"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("span",null,"wc_upsells"===q?Object(u.__)("One Click Upsell","funnel-builder"):Object(f.fb)(q)),Object(r.createElement)("span",null,Object(_.decodeEntities)(w)),Object(r.createElement)("span",{title:Object(_.decodeEntities)(at)},Object(_.decodeEntities)(at))),Object(r.createElement)("div",{className:"bwf-node-action"},null!==M&&Object(r.createElement)("span",{className:"bwf-variant-tag","data-tag":!0===M?"original":""},!0===M?Object(u.__)("Original","funnel-builder"):Object(u.__)("Variant","funnel-builder")),""!==U&&Object(r.createElement)("div",{onClick:function(){return window.open(on(),"_blank","noreferrer")}},Object(r.createElement)(S.a,{icon:"edit"})))),"offer"!==q&&!ye&&Object(r.createElement)(H,{type:q,title:at,mainIndex:te,stepIndex:re,subIndex:le,funnelId:Gt,stepID:O,parent_id:K}),(Object(i.size)(J)>0||yn||!(it&&1===parseInt(it))||!Object(i.isEmpty)(Ne)&&"4"!==Ne)&&Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g8 bwf-flex-wrap"},Object.keys(J).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_bump"===e?b?Mt(!0):Dt(!0):(vt("canvas"),Object(N.k)({},J[e].edit,p))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+J[e].label_class},J[e].label))})),yn&&Object(r.createElement)("div",{className:"bwf-st-c-badge-small bwf-st-c-badge-red bwf-display-flex bwf-cursor-pointer",style:{position:"relative"},onClick:function(){return Vt((function(e){return!e}))}},Object(r.createElement)(S.a,{icon:"step-warning",size:12,color:"#E15334"}),Object(u.__)("Not Visible","funnel-builder"),Ut&&Object(r.createElement)("div",{className:"bwf-orphan-offer-wrap"},fn())),!ye&&!Object(i.isEmpty)(Ne)&&"4"!==Ne&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){bn()}},Object(r.createElement)(fe.b,{content:(t=Ne,o="warning"===(n=se(t,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ce.a,{fill:o}),Object(r.createElement)("span",{className:"".concat(void 0!==o?"bwf-mr-4":"")},se(t)))),type:se(Ne,!0)})),!ye&&!(it&&1===parseInt(it))&&Object(r.createElement)("div",{className:"bwf--tag bwf-cursor-default is-warning"},Object(u.__)("Draft","funnel-builder"))),!Object(i.isEmpty)(k)&&"wc_upsells"!==q&&Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf_w_full bwf-position-relative"},Object(r.createElement)("div",{className:"bwf-node-data-desc"},Te?mn:Object(r.createElement)("span",null,!b&&k.hasOwnProperty("views")&&null!=k.views?k.views:"0"),Object(r.createElement)("span",null,Object(u.__)("Views","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-node-data-desc"},Te?mn:Object(r.createElement)("span",null,!b&&k.hasOwnProperty("conversion_rate")&&null!=k.conversion_rate?"".concat(k.conversion_rate.toFixed(2),"%"):"-"),Object(r.createElement)("span",null,Object(u.__)("Conversion","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-node-data-desc"},Te?mn:Object(r.createElement)("span",null,!b&&k.hasOwnProperty("revenue")&&null!=k.revenue?an.formatAmount(k.revenue):"-"),Object(r.createElement)("span",null,Object(u.__)("Revenue","funnel-builder"))),b&&Object(r.createElement)(me.b,{hideContent:!0,modalContent:{feature:Object(u.__)("Step Analytics","funnel-builder")}}))):Object(r.createElement)("div",{className:"bwf-inner-wrapper bwf-offer-node-not-exists"},fn()),ut&&Object(r.createElement)(s.Modal,{title:Object(u.__)("Add Offer","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return st(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(A.a,{step:{type:"offer",upsellId:we,is_substep:!0},requestCreateStep:cn,onRequestClose:function(){return st(!1)},isBusy:Ye})),Le&&("wc_upsells"==q?Object(r.createElement)(z.a,{renameTitle:"Edit Details",title:Object(_.decodeEntities)(at),onclose:function(){return Ue(!1)},updateTitle:function(e){return nn(e)},isLoading:Ke}):Object(r.createElement)(Y.a,{pageUrl:null==ve?void 0:ve.view_link,pageUrlSlug:null==ve?void 0:ve.post_name,renameTitle:"Step",title:Object(_.decodeEntities)(at),onclose:function(){return Ue(!1)},updateDetail:function(e,t){return nn(e,t)},isLoading:Ke})),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source"}),gt&&Object(r.createElement)(R,{onRequestClose:function(){xt(""),jt(!1)},onConfirm:function(){"offer"===q&&sn>1?pt(!0):rn()},isLoading:Et,stepName:at,isSuccess:!kt,modalTitle:"offer"===q?Object(u.__)("Delete Offer?","funnel-builder"):"",isParentOffer:"offer"===q&&sn>1}),bt&&Object(r.createElement)(oe,{setIsOpen:pt,offerId:"offer"===q&&!Pe&&O?O:"",stepData:y,stepList:Xt,stepGroupData:un(),onUpdateDynamicOffer:function(e){var t=e.groups,n=void 0===t?[]:t,r=e.steps_list,a=void 0===r?{}:r,o=Object(i.cloneDeep)(Xt);o=Ce(Ce({},o),a),Yt(o),$t(te,re,n[0]),pt(!1)},orphanNode:Pe}),Rt&&Object(r.createElement)(be.a,{isPublishLoading:Ct,onAction:function(){dn()},onclose:function(){return At(!1)}}),Ze&&Object(r.createElement)(de.a,{isPublishLoading:Ct,onAction:function(){return dn()},onclose:function(){return Je(!1)}}),Object(r.createElement)(pe.a,{className:l()("bwf-admin-modal-squeezy",We.className),confirmText:We.confirmText,confirmButtonText:We.buttonConfirm,cancelButtonText:We.buttonCancel,onConfirm:We.onConfirm,isLoading:We.loading,successMessage:We.success,errorMessage:We.error,content:We.content,onRequestClose:function(){return Ge({status:!1})},modalTitle:We.modalTitle,isOpen:We.status,closeIcon:We.closeIcon}),tt.status&&Object(r.createElement)(E.a,{isOpen:tt.status,onRequestClose:function(){return nt({status:!1})},modalContent:tt,type:tt.type}),Ft&&Object(r.createElement)(_e,{setIsOpenModal:function(){return Dt(!1)},defaultType:"wc_order_bump",parentStep:v,addNodeData:y}),Bt&&Object(r.createElement)(D.a,{isOpen:Bt,onRequestClose:function(){return Mt(!1)}}))},Me=function(e){e.data,e.selected;return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-end"},Object(r.createElement)(a.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1,className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-content-item"},"End")))},Le=function(){return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-start"},Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-content-item"},Object(u.__)("Funnel Start","funnel-builder"))),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source",style:{opacity:0}}))},Ue=function(e){var t=e.id;return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-merger-node","step-id":t},Object(r.createElement)(a.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)(a.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};n(3);function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var He=function(e){var t=Object(F.a)("ul").isProFeatureLocked,n=e.data,o=void 0===n?{}:n,i=e.id,c=void 0===i?"":i,l=Ve(Object(r.useState)(!1),2),s=l[0],f=l[1],b=Ve(Object(r.useState)(!1),2),p=b[0],d=b[1],m=o.allowedSteps,y=void 0===m?[]:m,h=o.mainIndex,v=void 0===h?"":h,O=o.currentParentType,g=o.hasCheckout,j=1===(null==y?void 0:y.length)&&y[0];return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-add-node"},Object(r.createElement)(a.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-add-node-content",onClick:function(){"offer"===j&&t?d({status:!0}):f(!0)}},Object(r.createElement)(I.a,{toolTipText:Object(u.__)("Add Step","funnel-builder")},Object(r.createElement)(S.a,{icon:"plus-circle",size:24,color:"#fff"})))),Object(r.createElement)(a.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}),s&&Object(r.createElement)("div",{className:"bwf-step-select-wrap"},Object(r.createElement)(_e,{setIsOpenModal:f,allowedSteps:y,parentStep:c,mainIndex:v,addNodeData:o,currentParentType:O,hasCheckout:g})),p.status&&Object(r.createElement)(E.a,{isOpen:p.status,onRequestClose:function(){return d({status:!1})},modalContent:p,type:p.type}))},ze=n(32);function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ze={landing:Object(u.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(u.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(u.__)("Add Upsell Page","funnel-builder"),optin:Object(u.__)("Add Optin Page","funnel-builder"),optin_ty:Object(u.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(u.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(u.__)("Add Order Bump","funnel-builder"),offer:Object(u.__)("Add Offer","funnel-builder")},Je={status:!0,title:Object(u.__)("Add Offer","funnel-builder"),proLink:Object(f.K)(["Canvas","Add","Offer","Upgrade","Modal"])},et=function(e){var t=e.data,n=void 0===t?{}:t,o=(e.id,n.title),c=void 0===o?"Add":o,l=n.type,b=void 0===l?"":l,p=n.icon,d=void 0===p?"":p,m=n.prevFirstParent,y=void 0===m?"":m,h=n.mainIndex,v=void 0===h?"":h,O=n.stepIndex,w=void 0===O?"":O,k=Object(F.a)().isProFeatureLocked,P=Object(F.a)("ul").isProFeatureLocked,C=Ge(Object(r.useState)(!1),2),N=C[0],T=C[1],R=Ge(Object(r.useState)(!1),2),I=R[0],q=R[1],B=g(),M=B.getStepsList,L=B.getFunnelId,U=M(),V=Object(f.Z)(),K=L(),H=Ge(Object(r.useState)({}),2),z=H[0],Y=H[1],$=Object(j.a)(),Q=$.setStepList,W=$.replaceCurrentSubStepData,G=$.setUpsellStepNode,X=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,r,a,o,c,l,u,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.copyFrom,r=void 0===n?{}:n,a=t.title,o=void 0===a?"":a,(c=r&&r.hasOwnProperty("key")?r.key:0)<1&&(c=r&&r.hasOwnProperty("id")?r.id:0),l={inherit_from:c,title:o,type:b,funnel_id:K,canvas:{mode:"start_group",insert_after:y}},"offer"===b&&(l.canvas={empty:!0,position:"",upsell:y}),"wc_order_bump"===b&&(l.canvas.mode="sibling"),u="",e.t0=b,e.next="wc_order_bump"===e.t0?11:"offer"===e.t0?13:15;break;case 11:return u=V?Object(f.q)("/store-checkout/".concat(K,"/step/").concat(y,"/substeps/")):Object(f.q)("/funnels/".concat(K,"/steps/").concat(y,"/substeps/")),e.abrupt("break",17);case 13:return u=Object(f.q)("/funnel-upsell/".concat(y,"/offers/")),e.abrupt("break",17);case 15:return u=Object(f.q)("/funnels/".concat(K,"/steps/")),e.abrupt("break",17);case 17:return e.prev=17,q(!0),e.next=21,x()({method:"POST",path:u,data:l}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)){var t=Object(i.cloneDeep)(U),n=e.data,r=n.groups,a=void 0===r?[]:r,o=n.steps_list,c=void 0===o?{}:o;switch(t=$e($e({},t),c),Q(t),b){case"wc_order_bump":W(v,w,0,a[0]);break;case"offer":G(v,w,a[0])}T(!1)}T(!1)}q(!1)}));case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(17),console.log(e.t1),q(!1);case 27:case"end":return e.stop()}}),e,null,[[17,23]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){We(o,r,a,i,c,"next",e)}function c(e){We(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-button-node"},Object(r.createElement)(a.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-btn-node-content",onClick:function(){"wc_order_bump"===b&&k?Y({bump:!0}):"offer"===b&&P?Y(Je):T(!0)}},d&&Object(r.createElement)(S.a,{icon:d,size:"24",color:ze.TEXT_COLOR_2}),Object(_.decodeEntities)(c),"wc_order_bump"===b&&k&&Object(r.createElement)(fe.a,null))),N&&Object(r.createElement)(s.Modal,{title:Ze.hasOwnProperty(b)?Ze[b]:Object(u.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return T(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(A.a,{step:{type:b,prevFirstParent:y,is_substep:["wc_order_bump","offer"].includes(b)},requestCreateStep:X,onRequestClose:function(){return T(!1)},isBusy:I})),Object(r.createElement)(a.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}),z.bump&&Object(r.createElement)(D.a,{isOpen:z.bump,onRequestClose:function(){return Y({status:!1})}}),z.status&&Object(r.createElement)(E.a,{isOpen:z.status,onRequestClose:function(){return Y({status:!1})},modalContent:z,type:z.type}))};function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(!1),n=tt(t,2),o=n[0],i=n[1],c=e.data||{},s=c.emptyNodeLabel,f=void 0===s?Object(u.__)("Create New Step","funnel-builder"):s,b=c.allowedSteps,p=void 0===b?["optin","landing","wc_checkout"]:b,d=c.replaceCurrentStep,m=void 0!==d&&d;return Object(r.createElement)("div",{className:l()("bwf-node-wrapper is-empty-node-wrapper")},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1,style:{opacity:0},className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-inner-wrapper",onClick:function(){return i(!0)}},Object(r.createElement)("div",{className:"bwf-node-brick is-empty-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(S.a,{icon:"page",size:"24"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-label"},f)))),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0},className:"bwf-source"}),o&&Object(r.createElement)("div",{className:"bwf-step-select-wrap"},Object(r.createElement)(_e,{setIsOpenModal:i,allowedSteps:p,replaceCurrentStep:m,addNodeData:c})))},at=function(e){var t=e.data,n=void 0===t?{}:t,o=(e.selected,n.title),i=(n.sub_title,n.type);return Object(r.createElement)("div",{className:l()("bwf-node-wrapper bwf-condition",["bwf-condition-".concat(i)])},Object(r.createElement)(a.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:l()("bwf-node-content")},Object(_.decodeEntities)(o)),Object(r.createElement)(a.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ft={status:!0,title:Object(u.__)("Add Offer","funnel-builder"),proLink:Object(f.K)(["Canvas","Add","Offer","Upgrade","Modal"])},bt=function(e){var t=Object(F.a)("ul").isExpired,n=e.id,o=e.sourceX,c=e.sourceY,l=e.targetX,b=e.targetY,p=e.sourcePosition,d=e.targetPosition,m=e.style,y=void 0===m?{}:m,h=e.data,v=void 0===h?{}:h,O=e.arrowHeadType,w=e.markerEndId,_=Object(a.g)({sourceX:o,sourceY:c,sourcePosition:p,targetX:l,targetY:b,targetPosition:d}),k=Object(a.i)(O,w),P=ut(Object(a.h)({sourceX:o,sourceY:c,targetX:l,targetY:b}),2),C=P[0],N=P[1],T=Object(j.a)(),R=T.setStepList,D=T.setUpsellStepNode,q=ut(Object(r.useState)(!1),2),B=q[0],M=q[1],L=ut(Object(r.useState)({}),2),U=L[0],V=L[1],K=v.offer,H=void 0===K?"":K,z=v.branch,Y=void 0===z?"":z,$=v.upsellId,Q=void 0===$?"":$,W=v.mainIndex,G=void 0===W?"":W,X=v.stepIndex,Z=void 0===X?"":X,J=g(),ee=J.getFunnelId,te=J.getStepsList,ne=ut(Object(r.useState)(!1),2),re=ne[0],ae=ne[1],oe=ee(),ie=te(),ce=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,r,a,o,c,l,u,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.copyFrom,r=void 0===n?{}:n,a=t.title,o=void 0===a?"":a,(c=r&&r.hasOwnProperty("key")?r.key:0)<1&&(c=r&&r.hasOwnProperty("id")?r.id:0),l={inherit_from:c,title:o,type:"offer",funnel_id:oe,canvas:{empty:!1,position:Y,offer_id:H}},u=Object(f.q)("/funnel-upsell/".concat(Q,"/offers/")),e.prev=6,M(!0),e.next=10,x()({method:"POST",path:u,data:l}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)){var t=Object(i.cloneDeep)(ie),n=e.data,r=n.groups,a=void 0===r?[]:r,o=n.steps_list,c=void 0===o?{}:o;t=it(it({},t),c),R(t),D(G,Z,a[0]),ae(!1)}ae(!1)}M(!1)}));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0),M(!1);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){lt(o,r,a,i,c,"next",e)}function c(e){lt(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("path",{id:n,style:y,className:"react-flow__edge-path",d:_,markerEnd:k}),Object(r.createElement)("foreignObject",{width:24,height:24,style:{borderRadius:"50%",overflow:"visible",position:"relative"},x:C-12,y:N-12,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml"},Object(r.createElement)("div",{className:"wffn-node-add",onClick:function(){t?V(ft):ae(!0)}},Object(r.createElement)(I.a,{toolTipText:Object(u.__)("Add Offer","funnel-builder")},Object(r.createElement)(S.a,{icon:"dashed-plus",size:28})))),re&&Object(r.createElement)(s.Modal,{title:Object(u.__)("Add Offer","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return ae(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(A.a,{step:{type:"offer",upsellId:Q,is_substep:!0},requestCreateStep:ce,onRequestClose:function(){return ae(!1)},isBusy:B})),U.status&&Object(r.createElement)(E.a,{isOpen:U.status,onRequestClose:function(){return V({status:!1})},modalContent:U,type:U.type}))},pt=function(e){var t=e.id,n=e.sourceX,o=e.sourceY,i=e.targetX,c=e.targetY,l=e.sourcePosition,u=e.targetPosition,s=e.style,f=void 0===s?{}:s,b=e.arrowHeadType,p=e.markerEndId,d=Object(a.g)({sourceX:n,sourceY:o,sourcePosition:l,targetX:i,targetY:c,targetPosition:u}),m=Object(a.i)(b,p);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("path",{id:t,style:f,className:"react-flow__edge-path",d:d,markerEnd:m}))};n(556),n(557);var dt=n(78),mt=n(12),yt=n.n(mt),ht=(n(399),n(558),n(17)),vt=n.n(ht),Ot=n(131),gt=n.n(Ot),jt=n(428),wt=n.n(jt),Et=n(291),_t=n.n(Et),St=n(120),kt=n(323),xt=n(18);function Pt(e){var t="";return function e(n){if(Object(i.isString)(n)||Object(i.isNumber)(n))t+=n;else if(Object(i.isArray)(n))n.forEach(e);else if(n&&n.props){var r=n.props.children;Object(i.isArray)(r)?r.forEach(e):e(r)}}(e),t}function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dt(e);if(t){var a=Dt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return It(this,n)}}function It(e,t){if(t&&("object"===Ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ft(e)}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(c,e);var t,n,a,o=At(c);function c(e){var t,n=e.filter,r=e.config,a=e.onFilterChange;Nt(this,c),t=o.apply(this,arguments);var i=r.input.options;return t.state={options:i},t.updateOptions=t.updateOptions.bind(Ft(t)),!i&&r.input.getOptions&&r.input.getOptions().then(t.updateOptions).then((function(e){if(!n.value){var t=Object(N.c)(r,e);a(n.key,"value",t)}})),t}return t=c,(n=[{key:"updateOptions",value:function(e){return this.setState({options:e}),e}},{key:"getScreenReaderText",value:function(e,t){if(""===e.value)return"";var n=Object(i.find)(t.rules,{value:e.rule})||{},a=Object(i.find)(t.input.options,{value:e.value})||{};return Pt(_t()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,a.label),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,a=e.filter,o=e.onFilterChange,c=e.isEnglish,u=this.state.options,f=a.key,b=a.rule,p=a.value,d=n.labels,m=n.rules,y=_t()({mixedString:d.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(s.SelectControl,{className:l()(t,"bwf-filters-advanced-rule"),options:m,value:b,onChange:Object(i.partial)(o,f,"rule"),"aria-label":d.rule}),filter:u?Object(r.createElement)(s.SelectControl,{className:l()(t,"bwf-filters-advanced-input"),options:u,value:p,onChange:Object(i.partial)(o,a.key,"value"),"aria-label":d.filter}):Object(r.createElement)(w.a,{size:"xl"})}}),h=this.getScreenReaderText(a,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},d.add||""),Object(r.createElement)("div",{className:l()("bwf-filters-advanced-fieldset",{"is-english":c})},y),h&&Object(r.createElement)("span",{className:"screen-reader-text"},h))}}])&&Tt(t.prototype,n),a&&Tt(t,a),c}(r.Component);qt.propTypes={config:vt.a.shape({labels:vt.a.shape({rule:vt.a.string,title:vt.a.string,filter:vt.a.string}),rules:vt.a.arrayOf(vt.a.object),input:vt.a.object}).isRequired,filter:vt.a.shape({key:vt.a.string,rule:vt.a.string,value:vt.a.string}).isRequired,onFilterChange:vt.a.func.isRequired};var Bt=qt,Mt=n(385);function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){Kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gt(e);if(t){var a=Gt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Qt(this,n)}}function Qt(e,t){if(t&&("object"===Lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wt(e)}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(c,e);var t,n,a,o=$t(c);function c(e){var t,n=e.filter,r=e.config,a=e.query;return Ht(this,c),(t=o.apply(this,arguments)).onSearchChange=t.onSearchChange.bind(Wt(t)),t.state={selected:[]},t.updateLabels=t.updateLabels.bind(Wt(t)),n.value.length&&r.input.getLabels(n.value,a).then((function(e){var n=e.map((function(e){return Vt({key:e.id},e)}));t.updateLabels(n)})),t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.filter,a=t.query,o=e.filter;if(r.value.length&&!Object(i.isEqual)(o,r)){var c=this.state.selected.map((function(e){return e.key}));Object(N.e)(r.value).every((function(e){return!c.includes(e)}))&&n.input.getLabels(r.value,a).then(this.updateLabels)}}},{key:"updateLabels",value:function(e){var t=this.state.selected.map((function(e){return e.key})),n=e.map((function(e){return e.key}));Object(i.isEqual)(n.sort(),t.sort())||this.setState({selected:e})}},{key:"onSearchChange",value:function(e){this.setState({selected:e});var t=this.props,n=t.filter,r=t.onFilterChange,a=e.map((function(e){return e.key})).join(",");r(n.key,"value",a)}},{key:"getScreenReaderText",value:function(e,t){var n=this.state.selected;if(0===n.length)return"";var a=Object(i.find)(t.rules,{value:e.rule})||{},o=n.map((function(e){return e.label})).join(", ");return Pt(_t()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,o),rule:Object(r.createElement)(r.Fragment,null,a.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,a=e.filter,o=e.onFilterChange,c=e.isEnglish,u=this.state.selected,f=a.key,b=a.rule,p=n.input,d=n.labels,m=n.rules,y=_t()({mixedString:d.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(s.SelectControl,{className:l()(t,"bwf-filters-advanced-rule"),options:m,value:b,onChange:Object(i.partial)(o,f,"rule"),"aria-label":d.rule}),filter:Object(r.createElement)(Mt.a,{className:l()(t,"bwf-filters-advanced-input"),onChange:this.onSearchChange,type:p.type,placeholder:d.placeholder,selected:u,inlineTags:!0,"aria-label":d.filter})}}),h=this.getScreenReaderText(a,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},d.add||""),Object(r.createElement)("div",{className:l()("bwf-filters-advanced-fieldset",{"is-english":c})},y),h&&Object(r.createElement)("span",{className:"screen-reader-text"},h))}}])&&zt(t.prototype,n),a&&zt(t,a),c}(r.Component);Xt.propTypes={config:vt.a.shape({labels:vt.a.shape({placeholder:vt.a.string,rule:vt.a.string,title:vt.a.string}),rules:vt.a.arrayOf(vt.a.object),input:vt.a.object}).isRequired,filter:vt.a.shape({key:vt.a.string,rule:vt.a.string,value:vt.a.string}).isRequired,onFilterChange:vt.a.func.isRequired,query:vt.a.object};var Zt=Xt,Jt=n(449);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=un(e);if(t){var a=un(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ln(this,n)}}function ln(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(c,e);var t,n,a,o=cn(c);function c(){return rn(this,c),o.apply(this,arguments)}return t=c,(n=[{key:"getBetweenString",value:function(){return Object(u._x)("{{rangeStart /}}{{span}} and {{/span}}{{rangeEnd /}}","Numerical range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var n=this.props.currency,a=Object(i.find)(t.rules,{value:e.rule})||{},o=tn(Object(i.isArray)(e.value)?e.value:[e.value],2),c=o[0],l=o[1];if(!c||"between"===a.value&&!l)return"";if("currency"===Object(i.get)(t,["input","type"],"number")){var u=gt()(n).formatAmount;c=u(c),l=u(l)}var s=c;return"between"===a.value&&(s=_t()({mixedString:this.getBetweenString(),components:{rangeStart:Object(r.createElement)(r.Fragment,null,c),rangeEnd:Object(r.createElement)(r.Fragment,null,l),span:Object(r.createElement)(r.Fragment,null)}})),Pt(_t()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,s),rule:Object(r.createElement)(r.Fragment,null,a.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"getFormControl",value:function(e){var t=e.type,n=e.value,a=e.label,o=e.onChange,i=e.currencySymbol,c=e.symbolPosition;return"currency"===t?0===c.indexOf("right")?Object(r.createElement)(Jt.a,{suffix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":a,onChange:o}):Object(r.createElement)(Jt.a,{prefix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":a,onChange:o}):Object(r.createElement)(s.TextControl,{className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":a,onChange:o})}},{key:"getFilterInputs",value:function(){var e=this.props,t=e.config,n=e.filter,r=e.onFilterChange,a=e.currency,o=a.symbol,c=a.symbolPosition;if("between"===n.rule)return this.getRangeInput();var l=Object(i.get)(t,["input","type"],"number"),s=tn(Object(i.isArray)(n.value)?n.value:[n.value],2),f=s[0],b=s[1];Boolean(b)&&r(n.key,"value",f||b);var p="";
/* translators: Sentence fragment, "maximum amount" refers to a numeric value the field must be less than. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
return p="lessthan"===n.rule?Object(u._x)("%(field)s maximum amount","maximum value input","funnel-builder"):Object(u._x)("%(field)s minimum amount","minimum value input","funnel-builder"),this.getFormControl({type:l,value:f||b,label:Object(u.sprintf)(p,{field:Object(i.get)(t,["labels","add"])}),onChange:Object(i.partial)(r,n.key,"value"),currencySymbol:o,symbolPosition:c})}},{key:"getRangeInput",value:function(){var e=this.props,t=e.config,n=e.filter,a=e.onFilterChange,o=e.currency,c=o.symbol,l=o.symbolPosition,s=Object(i.get)(t,["input","type"],"number"),f=tn(Object(i.isArray)(n.value)?n.value:[n.value],2),b=f[0],p=f[1];return _t()({mixedString:this.getBetweenString(),components:{rangeStart:this.getFormControl({type:s,value:b||"",label:Object(u.sprintf)(
/* translators: Sentence fragment, "range start" refers to the first of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(u.__)("%(field)s range start","funnel-builder"),{field:Object(i.get)(t,["labels","add"])}),onChange:function(e){a(n.key,"value",[e,p])},currencySymbol:c,symbolPosition:l}),rangeEnd:this.getFormControl({type:s,value:p||"",label:Object(u.sprintf)(
/* translators: Sentence fragment, "range end" refers to the second of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(u.__)("%(field)s range end","funnel-builder"),{field:Object(i.get)(t,["labels","add"])}),onChange:function(e){a(n.key,"value",[b,e])},currencySymbol:c,symbolPosition:l}),span:Object(r.createElement)("span",{className:"separator"})}})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,a=e.filter,o=e.onFilterChange,c=e.isEnglish,u=a.key,f=a.rule,b=n.labels,p=n.rules,d=_t()({mixedString:b.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(s.SelectControl,{className:l()(t,"bwf-filters-advanced-rule"),options:p,value:f,onChange:Object(i.partial)(o,u,"rule"),"aria-label":b.rule}),filter:Object(r.createElement)("div",{className:l()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===f})},this.getFilterInputs())}}),m=this.getScreenReaderText(a,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},b.add||""),Object(r.createElement)("div",{className:l()("bwf-filters-advanced-fieldset",{"is-english":c})},d),m&&Object(r.createElement)("span",{className:"screen-reader-text"},m))}}])&&an(t.prototype,n),a&&an(t,a),c}(r.Component),fn=n(284);function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e,t){return(vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn(e);if(t){var a=wn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return gn(this,n)}}function gn(e,t){if(t&&("object"===bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jn(e)}function jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var En=Object(u.__)("MMM D, YYYY","funnel-builder"),_n=Object(u.__)("MM/DD/YYYY","funnel-builder"),Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vn(e,t)}(c,e);var t,n,a,o=On(c);function c(e){var t,n=e.filter;yn(this,c),t=o.apply(this,arguments);var r=Array.isArray(n.value)?n.value:[null,n.value],a=dn(r,2),i=a[0],l=a[1],u=i?Object(dt.i)(dt.h,i):null,s=l?Object(dt.i)(dt.h,l):null;return t.state={before:s,beforeText:s?s.format(_n):"",beforeError:null,after:u,afterText:u?u.format(_n):"",afterError:null},t.onSingleDateChange=t.onSingleDateChange.bind(jn(t)),t.onRangeDateChange=t.onRangeDateChange.bind(jn(t)),t.onRuleChange=t.onRuleChange.bind(jn(t)),t}return t=c,(n=[{key:"getBetweenString",value:function(){return Object(u._x)("{{after /}}{{span}} and {{/span}}{{before /}}","Date range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var n=Object(i.find)(t.rules,{value:e.rule})||{},a=this.state,o=a.before,c=a.after;if(!o||"between"===n.value&&!c)return"";var l=o.format(En);return"between"===n.value&&(l=_t()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(r.Fragment,null,c.format(En)),before:Object(r.createElement)(r.Fragment,null,o.format(En)),span:Object(r.createElement)(r.Fragment,null)}})),Pt(_t()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,l),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"onSingleDateChange",value:function(e){var t=e.date,n=e.text,r=e.error,a=this.props,o=a.filter,i=a.onFilterChange;this.setState({before:t,beforeText:n,beforeError:r}),t&&i(o.key,"value",t.format(dt.h))}},{key:"onRangeDateChange",value:function(e,t){var n,r=t.date,a=t.text,o=t.error,i=this.props,c=i.filter,l=i.onFilterChange;if(this.setState((pn(n={},e,r),pn(n,e+"Text",a),pn(n,e+"Error",o),n)),r){var u=this.state,s=u.before,f=u.after,b=null,p=null;"after"===e&&(b=r.format(dt.h),p=s?s.format(dt.h):null),"before"===e&&(b=f?f.format(dt.h):null,p=r.format(dt.h)),b&&p&&l(c.key,"value",[b,p])}}},{key:"isFutureDate",value:function(e){return yt()().isBefore(yt()(e),"day")}},{key:"getFilterInputs",value:function(){var e=this.props.filter,t=this.state,n=t.before,a=t.beforeText,o=t.beforeError,c=t.after,l=t.afterText,u=t.afterError;return"between"===e.rule?_t()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(fn.b,{date:c,text:l,error:u,onUpdate:Object(i.partial)(this.onRangeDateChange,"after"),dateFormat:_n,isInvalidDate:this.isFutureDate}),before:Object(r.createElement)(fn.b,{date:n,text:a,error:o,onUpdate:Object(i.partial)(this.onRangeDateChange,"before"),dateFormat:_n,isInvalidDate:this.isFutureDate}),span:Object(r.createElement)("span",{className:"separator"})}}):Object(r.createElement)(fn.b,{date:n,text:a,error:o,onUpdate:this.onSingleDateChange,dateFormat:_n,isInvalidDate:this.isFutureDate})}},{key:"onRuleChange",value:function(e){var t=this.props,n=t.onFilterChange,r=t.filter,a=t.updateFilter,o=this.state.before;"between"===r.rule&&"between"!==e?a({key:r.key,rule:e,value:o?o.format(dt.h):void 0}):n(r.key,"rule",e)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,a=e.filter,o=e.isEnglish,i=a.rule,c=n.labels,u=n.rules,f=this.getScreenReaderText(a,n),b=_t()({mixedString:c.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(s.SelectControl,{className:l()(t,"bwf-filters-advanced-rule"),options:u,value:i,onChange:this.onRuleChange,"aria-label":c.rule}),filter:Object(r.createElement)("div",{className:l()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===i})},this.getFilterInputs())}});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},c.add||""),Object(r.createElement)("div",{className:l()("bwf-filters-advanced-fieldset",{"is-english":o})},b),f&&Object(r.createElement)("span",{className:"screen-reader-text"},f))}}])&&hn(t.prototype,n),a&&hn(t,a),c}(r.Component),kn=n(283);function xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cn=function(e){var t=e.className,n=e.config,a=e.filter,o=e.isEnglish,c=e.onFilterChange,f=a.key,b=a.rule,p=a.value,d=n.labels,m=n.rules,y=xn(Object(r.useState)([]),2),h=y[0],v=y[1];Object(r.useEffect)((function(){x()({path:"/wc/v3/products/attributes"}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(v)}),[]);var O=xn(Object(r.useState)(Array.isArray(p)?p[0]:""),2),g=O[0],j=O[1];Object(r.useEffect)((function(){Array.isArray(p)&&j(p[0])}),[p]);var E=xn(Object(r.useState)([]),2),_=E[0],S=E[1];Object(r.useEffect)((function(){g&&(S([]),x()({path:"/wc/v3/products/attributes/".concat(g,"/terms")}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(S))}),[g]);var k=xn(Object(r.useState)(Array.isArray(p)&&p[1]||""),2),P=k[0],C=k[1],N=function(e){var t=e.attributes,n=e.attributeTerms,a=e.config,o=e.filter,i=e.selectedAttribute,c=e.selectedAttributeTerm;if(0===t.length||0===n.length||""===i||""===c)return"";var l=Array.isArray(a.rules)&&a.rules.find((function(e){return e.value===o.rule}))||{},s=t.find((function(e){return e.key===i})).label,f=n.find((function(e){return e.key===c})).label,b=_t()({
/* translators: Sentence fragment describing a product attribute match. Example: "Color Is Not Blue" - attribute = Color, equals = Is Not, value = Blue */
mixedString:Object(u.__)("{{attribute /}} {{equals /}} {{value /}}","funnel-builder"),components:{attribute:Object(r.createElement)(r.Fragment,null,s),equals:Object(r.createElement)(r.Fragment,null,l.label),value:Object(r.createElement)(r.Fragment,null,f)}});return Pt(_t()({mixedString:a.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,b),rule:Object(r.createElement)(r.Fragment,null),title:Object(r.createElement)(r.Fragment,null)}}))}({attributes:h,attributeTerms:_,config:n,filter:a,selectedAttribute:g,selectedAttributeTerm:P});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},d.add||""),Object(r.createElement)("div",{className:l()("bwf-filters-advanced-fieldset",{"is-english":o})},_t()({mixedString:d.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(s.SelectControl,{className:l()(t,"bwf-filters-advanced-rule"),options:m,value:b,onChange:Object(i.partial)(c,f,"rule"),"aria-label":d.rule}),filter:Object(r.createElement)("div",{className:l()(t,"bwf-filters-advanced-attribute-fieldset")},h.length>0?Object(r.createElement)(kn.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(u.__)("Attribute name","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:h,selected:g,onChange:function(e){"string"!=typeof e&&(e=""),j(e),C(""),c(f,"value",[e])}}):Object(r.createElement)(w.a,{size:"xl"}),h.length>0&&""!==g&&(_.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"bwf-filters-advanced-attribute-field-separator"},"="),Object(r.createElement)(kn.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(u.__)("Attribute value","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:_,selected:P,onChange:function(e){"string"!=typeof e&&(e=""),C(e),c(f,"value",[g,e])}})):Object(r.createElement)(w.a,{size:"xl"})))}})),N&&Object(r.createElement)("span",{className:"screen-reader-text"},N))};Cn.propTypes={config:vt.a.shape({labels:vt.a.shape({rule:vt.a.string,title:vt.a.string,filter:vt.a.string}),rules:vt.a.arrayOf(vt.a.object),input:vt.a.object}).isRequired,filter:vt.a.shape({key:vt.a.string,rule:vt.a.string,value:vt.a.arrayOf(vt.a.oneOfType([vt.a.string,vt.a.number]))}).isRequired,onFilterChange:vt.a.func.isRequired};var Nn=Cn;n(559);function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){Dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function In(e){return function(e){if(Array.isArray(e))return Fn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kn(e);if(t){var a=Kn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Un(this,n)}}function Un(e,t){if(t&&("object"===Tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vn(e)}function Vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hn=[{value:"all",label:Object(u.__)("All","funnel-builder")},{value:"any",label:Object(u.__)("Any","funnel-builder")}],zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(c,e);var t,n,a,o=Ln(c);function c(e){var t,n=e.query,a=e.config;return qn(this,c),(t=o.apply(this,arguments)).state={match:n.match||"all",activeFilters:Object(N.b)(n,a.filters)},t.filterListRef=Object(r.createRef)(),t.onMatchChange=t.onMatchChange.bind(Vn(t)),t.onFilterChange=t.onFilterChange.bind(Vn(t)),t.getAvailableFilterKeys=t.getAvailableFilterKeys.bind(Vn(t)),t.addFilter=t.addFilter.bind(Vn(t)),t.removeFilter=t.removeFilter.bind(Vn(t)),t.clearFilters=t.clearFilters.bind(Vn(t)),t.getUpdateHref=t.getUpdateHref.bind(Vn(t)),t.updateFilter=t.updateFilter.bind(Vn(t)),t.onFilter=t.onFilter.bind(Vn(t)),t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.query,a=e.query;Object(i.isEqual)(a,r)||this.setState({activeFilters:Object(N.b)(r,n.filters)})}},{key:"onMatchChange",value:function(e){var t=this.props.onAdvancedFilterAction;this.setState({match:e}),t("match",{match:e})}},{key:"onFilterChange",value:function(e,t,n){var r=this.state.activeFilters.map((function(r){return e===r.key?Object.assign({},r,Dn({},t,n)):r}));this.setState({activeFilters:r})}},{key:"updateFilter",value:function(e){var t=this.state.activeFilters.map((function(t){return e.key===t.key?e:t}));this.setState({activeFilters:t})}},{key:"removeFilter",value:function(e){var t=this.props.onAdvancedFilterAction,n=In(this.state.activeFilters),r=Object(i.findIndex)(n,(function(t){return t.key===e}));t("remove",n[r]),n.splice(r,1),this.setState({activeFilters:n}),0===n.length&&Object(N.d)().push(this.getUpdateHref([]))}},{key:"getTitle",value:function(){var e=this.state.match,t=this.props.config;return _t()({mixedString:t.title,components:{select:Object(r.createElement)(s.SelectControl,{className:"bwf-filters-advanced-title-select",options:Hn,value:e,onChange:this.onMatchChange,"aria-label":Object(u.__)("Choose to apply any or all filters","funnel-builder")})}})}},{key:"getAvailableFilterKeys",value:function(){var e=this.props.config,t=this.state.activeFilters.map((function(e){return e.key}));return Object(i.difference)(Object.keys(e.filters),t)}},{key:"addFilter",value:function(e,t){var n=this,r=this.props,a=r.onAdvancedFilterAction,o=r.config.filters[e],i={key:e};Array.isArray(o.rules)&&o.rules.length&&(i.rule=o.rules[0].value),o.input&&o.input.options&&(i.value=Object(N.c)(o,o.input.options)),o.input&&"Search"===o.input.component&&(i.value=""),this.setState((function(e){return{activeFilters:[].concat(In(e.activeFilters),[i])}})),a("add",i),t(),setTimeout((function(){n.filterListRef.current.querySelector("li:last-of-type fieldset").focus()}))}},{key:"clearFilters",value:function(){(0,this.props.onAdvancedFilterAction)("clear_all"),this.setState({activeFilters:[],match:"all"})}},{key:"getUpdateHref",value:function(e,t){var n=this.props,r=n.path,a=n.query,o=n.config,i=Object(N.j)(e,a,o.filters),c="all"===t?void 0:t;return Object(N.f)(An(An({},i),{},{match:c}),r,a)}},{key:"isEnglish",value:function(){return/en[-|_]/.test(this.props.siteLocale)}},{key:"onFilter",value:function(){var e=this.props,t=e.onAdvancedFilterAction,n=e.query,r=e.config,a=this.state,o=a.activeFilters,i=a.match;t("filter",An(An({},Object(N.j)(o,n,r.filters)),{},{match:i}))}},{key:"orderFilters",value:function(e,t){var n=window.location.search,r=n.indexOf(e.key),a=n.indexOf(t.key);return-1===r||-1===a?0:r-a}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,a=t.query,o=t.currency,c=this.state,f=c.activeFilters,b=c.match,p=this.getAvailableFilterKeys(),d=this.getUpdateHref(f,b),m="admin.php"+window.location.search===d||0===f.length,y=this.isEnglish();return Object(r.createElement)(kt.a,{className:"bwf-filters-advanced bwf-analytics-card",title:this.getTitle()},Object(r.createElement)("ul",{className:"bwf-filters-advanced-list",ref:this.filterListRef},f.sort(this.orderFilters).map((function(t){var c=t.key,u=n.filters[c],f=u.input,b=u.labels;return Object(r.createElement)("li",{className:"bwf-filters-advanced-list-item",key:c},"SelectControl"===f.component&&Object(r.createElement)(Bt,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[c],onFilterChange:e.onFilterChange,isEnglish:y}),"Search"===f.component&&Object(r.createElement)(Zt,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[c],onFilterChange:e.onFilterChange,isEnglish:y,query:a}),"Number"===f.component&&Object(r.createElement)(sn,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[c],onFilterChange:e.onFilterChange,isEnglish:y,query:a,currency:o}),"Currency"===f.component&&Object(r.createElement)(sn,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:An(An({},n.filters[c]),{input:{type:"currency",component:"Currency"}}),onFilterChange:e.onFilterChange,isEnglish:y,query:a,currency:o}),"Date"===f.component&&Object(r.createElement)(Sn,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[c],onFilterChange:e.onFilterChange,isEnglish:y,query:a,updateFilter:e.updateFilter}),"ProductAttribute"===f.component&&Object(r.createElement)(Nn,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[c],onFilterChange:e.onFilterChange,isEnglish:y,query:a,updateFilter:e.updateFilter}),Object(r.createElement)(s.Button,{className:l()("bwf-filters-advanced-line-item","bwf-filters-advanced-remove"),label:b.remove,onClick:Object(i.partial)(e.removeFilter,c)},Object(r.createElement)(wt.a,{icon:"cross-small"})))}))),p.length>0&&Object(r.createElement)("div",{className:"bwf-filters-advanced-add-filter"},Object(r.createElement)(St.a,{className:"bwf-filters-advanced-add-filter-dropdown",position:"bottom center",renderToggle:function(e){var t=e.isOpen,n=e.onToggle;return Object(r.createElement)(s.Button,{className:"bwf-filters-advanced-add-button",onClick:n,"aria-expanded":t},Object(r.createElement)(wt.a,{icon:"add-outline"}),Object(u.__)("Add a Filter","funnel-builder"))},renderContent:function(t){var a=t.onClose;return Object(r.createElement)("ul",{className:"bwf-filters-advanced-add-dropdown"},p.map((function(t){return Object(r.createElement)("li",{key:t},Object(r.createElement)(s.Button,{onClick:Object(i.partial)(e.addFilter,t,a)},n.filters[t].labels.add))})))}})),Object(r.createElement)("div",{className:"bwf-filters-advanced-controls"},m&&Object(r.createElement)(s.Button,{isPrimary:!0,disabled:!0,className:"bwf-no-ripple"},Object(u.__)("Filter","funnel-builder")),!m&&Object(r.createElement)(xt.a,{className:"components-button is-primary is-button",type:"bwf-crm",href:d,onClick:this.onFilter},Object(u.__)("Filter","funnel-builder")),f.length>0&&Object(r.createElement)(xt.a,{type:"bwf-crm",href:this.getUpdateHref([]),onClick:this.clearFilters},Object(u.__)("Clear all filters","funnel-builder"))))}}])&&Bn(t.prototype,n),a&&Bn(t,a),c}(r.Component);zn.propTypes={config:vt.a.shape({title:vt.a.string,filters:vt.a.objectOf(vt.a.shape({labels:vt.a.shape({add:vt.a.string,remove:vt.a.string,rule:vt.a.string,title:vt.a.string,filter:vt.a.string}),rules:vt.a.arrayOf(vt.a.object),input:vt.a.object}))}).isRequired,path:vt.a.string.isRequired,query:vt.a.object,onAdvancedFilterAction:vt.a.func,siteLocale:vt.a.string,currency:vt.a.object.isRequired},zn.defaultProps={query:{},onAdvancedFilterAction:function(){},siteLocale:"en_US"};var Yn=zn,$n=function(e){var t=e.className,n=e.count,a=e.children,o=e.disabled,i=e.helpText,c=e.onClick;return!o&&n<2?Object(r.createElement)(s.Tooltip,{text:i},Object(r.createElement)("span",{className:t},Object(r.createElement)(s.Button,{className:"bwf-compare-button",disabled:!0,isSecondary:!0},a))):Object(r.createElement)(s.Button,{className:l()("bwf-compare-button",t),onClick:c,disabled:o,isSecondary:!0},a)};$n.propTypes={className:vt.a.string,count:vt.a.number.isRequired,children:vt.a.node.isRequired,helpText:vt.a.string.isRequired,onClick:vt.a.func.isRequired,disabled:vt.a.bool};var Qn=$n;function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rr(e);if(t){var a=rr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tr(this,n)}}function tr(e,t){if(t&&("object"===Wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nr(e)}function nr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rr(e){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(c,e);var t,n,a,o=er(c);function c(e){var t,n=e.getLabels,r=e.param,a=e.query;return Xn(this,c),(t=o.apply(this,arguments)).state={selected:[]},t.clearQuery=t.clearQuery.bind(nr(t)),t.updateQuery=t.updateQuery.bind(nr(t)),t.updateLabels=t.updateLabels.bind(nr(t)),a[r]&&n(a[r],a).then(t.updateLabels),t}return t=c,(n=[{key:"componentDidUpdate",value:function(e,t){var n=e.param,r=e.query,a=t.selected,o=this.props,c=o.getLabels,l=o.param,u=o.query,s=this.state.selected;if(n!==l||a.length>0&&0===s.length)this.clearQuery();else{var f=Object(N.e)(r[l]),b=Object(N.e)(u[l]);Object(i.isEqual)(f.sort(),b.sort())||c(u[l],u).then(this.updateLabels)}}},{key:"clearQuery",value:function(){var e=this.props,t=e.param,n=e.path,r=e.query;this.setState({selected:[]}),Object(N.k)(Gn({},t,void 0),n,r)}},{key:"updateLabels",value:function(e){this.setState({selected:e})}},{key:"updateQuery",value:function(){var e=this.props,t=e.param,n=e.path,r=e.query,a=this.state.selected.map((function(e){return e.key}));Object(N.k)(Gn({},t,a.join(",")),n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.labels,a=t.type,o=this.state.selected;return Object(r.createElement)(kt.a,{title:n.title,className:"bwf-filters-compare bwf-analytics-card"},Object(r.createElement)("div",{className:"bwf-filters-compare-body"},Object(r.createElement)(Mt.a,{type:a,selected:o,placeholder:n.placeholder,onChange:function(t){e.setState({selected:t})}})),Object(r.createElement)("div",{className:"bwf-filters-compare-footer"},Object(r.createElement)(Qn,{count:o.length,helpText:n.helpText,onClick:this.updateQuery},n.update),o.length>0&&Object(r.createElement)(s.Button,{isLink:!0,onClick:this.clearQuery},Object(u.__)("Clear all","funnel-builder"))))}}])&&Zn(t.prototype,n),a&&Zn(t,a),c}(r.Component);ar.propTypes={getLabels:vt.a.func.isRequired,labels:vt.a.shape({placeholder:vt.a.string,title:vt.a.string,update:vt.a.string}),param:vt.a.string.isRequired,path:vt.a.string.isRequired,query:vt.a.object,type:vt.a.string.isRequired},ar.defaultProps={labels:{},query:{}};n(369),n(560);function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ur(e,t){return(ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=br(e);if(t){var a=br(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return fr(this,n)}}function fr(e,t){if(t&&("object"===or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ur(e,t)}(c,e);var t,n,a,o=sr(c);function c(){return cr(this,c),o.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.options,a=e.selected,o=e.onSelect,c=e.name,u=e.legend;return Object(r.createElement)("fieldset",{className:"bwf-segment-selection"},Object(r.createElement)("legend",{className:"screen-reader-text"},u),Object(r.createElement)("div",{className:l()(t,"bwf-segment-selection-container")},n.map((function(e){var t=e.value,n=e.label;if(!t||!n)return null;var l=Object(i.uniqueId)("".concat(t,"_"));return Object(r.createElement)("div",{className:"bwf-segment-selection-item",key:t},Object(r.createElement)("input",{className:"bwf-segment-selection-input",type:"radio",name:c,id:l,checked:a===t,onChange:Object(i.partial)(o,ir({},c,t))}),Object(r.createElement)("label",{htmlFor:l},Object(r.createElement)("span",{className:"bwf-segment-selection-label"},n)))}))))}}])&&lr(t.prototype,n),a&&lr(t,a),c}(r.Component);pr.propTypes={className:vt.a.string,options:vt.a.arrayOf(vt.a.shape({value:vt.a.string.isRequired,label:vt.a.string.isRequired})).isRequired,selected:vt.a.string,onSelect:vt.a.func.isRequired,name:vt.a.string.isRequired,legend:vt.a.string.isRequired};var dr=pr;function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vr(e,t){return(vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Or(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jr(e);if(t){var a=jr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return gr(this,n)}}function gr(e,t){if(t&&("object"===mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function jr(e){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}(i,e);var t,n,a,o=Or(i);function i(){return yr(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.compare;return Object(r.createElement)(dr,{options:_r,selected:n,onSelect:t,name:"compare",legend:Object(u.__)("compare to","funnel-builder")})}}])&&hr(t.prototype,n),a&&hr(t,a),i}(r.Component);wr.propTypes={onSelect:vt.a.func.isRequired,compare:vt.a.string};var Er=wr,_r=[{value:"previous_period",label:Object(u.__)("Previous Period","funnel-builder")},{value:"previous_year",label:Object(u.__)("Previous Year","funnel-builder")}],Sr=(Object(u.__)("Invalid date","funnel-builder"),Object(u.__)("Select a date in the past","funnel-builder"),Object(u.__)("Start date must be before end date","funnel-builder"),Object(u.__)("Start date must be before end date","funnel-builder"),n(298),n(299),n(406)),kr=n(166),xr=(n(255),n(277)),Pr=n(335);function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rr(e,t){return(Rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dr(e);if(t){var a=Dr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ir(this,n)}}function Ir(e,t){if(t&&("object"===Cr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fr(e)}function Fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qr=function(){return"rtl"===document.documentElement.dir},Br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rr(e,t)}(c,e);var t,n,a,o=Ar(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).onDatesChange=t.onDatesChange.bind(Fr(t)),t.onFocusChange=t.onFocusChange.bind(Fr(t)),t.onInputChange=t.onInputChange.bind(Fr(t)),t.nodeRef=Object(r.createRef)(),t.keepFocusInside=t.keepFocusInside.bind(Fr(t)),t}return t=c,(n=[{key:"keepFocusInside",value:function(e,t){if(this.nodeRef.current){var n=this.props.losesFocusTo;if("container"!==e||!t.target||!t.target.classList.contains("DayPickerNavigation_button")&&!t.target.classList.contains("CalendarDay")||t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay"))){if("onPrevMonthClick"===e||"onNextMonthClick"===e){var r=this.nodeRef.current.querySelector(".DayPickerNavigation_button");r&&r.focus()}}else{if(t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay")))return;if(t.relatedTarget&&n&&n.contains(t.relatedTarget))return;var a=this.nodeRef.current.querySelector(".DayPicker_focusRegion");a&&a.focus()}}}},{key:"onDatesChange",value:function(e){var t=e.startDate,n=e.endDate,r=this.props,a=r.onUpdate,o=r.shortDateFormat;a({after:t,before:n,afterText:t?t.format(o):"",beforeText:n?n.format(o):"",afterError:null,beforeError:null})}},{key:"onFocusChange",value:function(e){this.props.onUpdate({focusedInput:e||"startDate"})}},{key:"onInputChange",value:function(e,t){var n,r=t.target.value,a=this.props,o=a.after,i=a.before,c=a.shortDateFormat,l=Object(dt.j)(e,r,i,o,c),u=l.date,s=l.error;this.props.onUpdate((Nr(n={},e,u),Nr(n,e+"Text",r),Nr(n,e+"Error",r.length>0?s:null),n))}},{key:"setTnitialVisibleMonth",value:function(e,t){return function(){var n=t||yt()();return e?n.clone().subtract(1,"month"):n}}},{key:"render",value:function(){var e=this,t=this.props,n=t.after,a=t.before,o=t.focusedInput,c=t.afterText,s=t.beforeText,f=t.afterError,b=t.beforeError,p=t.shortDateFormat,d=t.isViewportMobile,m=t.isViewportSmall,y=t.isInvalidDate,h=d&&!m;return Object(r.createElement)("div",{className:l()("bwf-calendar",{"is-mobile":d})},Object(r.createElement)("div",{className:"bwf-calendar-inputs"},Object(r.createElement)(xr.a,{value:c,onChange:Object(i.partial)(this.onInputChange,"after"),dateFormat:p,label:Object(u.__)("Start Date","funnel-builder"),error:f,describedBy:Object(u.sprintf)(Object(u.__)("Date input describing a selected date range's start date in format %s","funnel-builder"),p),onFocus:function(){return e.onFocusChange("startDate")}}),Object(r.createElement)("div",{className:"bwf-calendar-inputs-to"},Object(u.__)("to","funnel-builder")),Object(r.createElement)(xr.a,{value:s,onChange:Object(i.partial)(this.onInputChange,"before"),dateFormat:p,label:Object(u.__)("End Date","funnel-builder"),error:b,describedBy:Object(u.sprintf)(Object(u.__)("Date input describing a selected date range's end date in format %s","funnel-builder"),p),onFocus:function(){return e.onFocusChange("endDate")}})),Object(r.createElement)("div",{className:"bwf-calendar-react-dates",ref:this.nodeRef,onBlur:Object(i.partial)(this.keepFocusInside,"container"),tabIndex:-1},Object(r.createElement)(Sr.DayPickerRangeController,{onNextMonthClick:Object(i.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(i.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:o,startDate:n,endDate:a,orientation:"horizontal",numberOfMonths:h?2:1,isOutsideRange:function(e){return y&&y(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:qr(),initialVisibleMonth:this.setTnitialVisibleMonth(h,a),phrases:Pr.a}),Object(r.createElement)(Sr.DayPickerRangeController,{onNextMonthClick:Object(i.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(i.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:o,startDate:n,endDate:a,orientation:"horizontal",numberOfMonths:h?2:1,isOutsideRange:function(e){return y&&y(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:qr(),initialVisibleMonth:this.setTnitialVisibleMonth(h,a),phrases:Pr.a})))}}])&&Tr(t.prototype,n),a&&Tr(t,a),c}(r.Component);Br.propTypes={after:vt.a.object,afterError:vt.a.string,afterText:vt.a.string,before:vt.a.object,beforeError:vt.a.string,beforeText:vt.a.string,focusedInput:vt.a.string,isInvalidDate:vt.a.func,onUpdate:vt.a.func.isRequired,shortDateFormat:vt.a.string.isRequired,losesFocusTo:vt.a.instanceOf(Element)};var Mr=Object(kr.withViewportMatch)({isViewportMobile:"< medium",isViewportSmall:"< small"})(Br),Lr=n(259);function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hr(e,t){return(Hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$r(e);if(t){var a=$r(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Yr(this,n)}}function Yr(e,t){if(t&&("object"===Ur(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $r(e){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hr(e,t)}(c,e);var t,n,a,o=zr(c);function c(){return Vr(this,c),o.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.period;return Object(r.createElement)(dr,{options:Object(i.filter)(Gr,(function(e){return"custom"!==e.value})),selected:n,onSelect:t,name:"period",legend:Object(u.__)("select a preset period","funnel-builder")})}}])&&Kr(t.prototype,n),a&&Kr(t,a),c}(r.Component);Qr.propTypes={onSelect:vt.a.func.isRequired,period:vt.a.string};var Wr=Qr,Gr=[{value:"today",label:Object(u.__)("Today","funnel-builder")},{value:"yesterday",label:Object(u.__)("Yesterday","funnel-builder")},{value:"week",label:Object(u.__)("Week to Date","funnel-builder")},{value:"last_week",label:Object(u.__)("Last Week","funnel-builder")},{value:"month",label:Object(u.__)("Month to Date","funnel-builder")},{value:"last_month",label:Object(u.__)("Last Month","funnel-builder")},{value:"quarter",label:Object(u.__)("Quarter to Date","funnel-builder")},{value:"last_quarter",label:Object(u.__)("Last Quarter","funnel-builder")},{value:"year",label:Object(u.__)("Year to Date","funnel-builder")},{value:"last_year",label:Object(u.__)("Last Year","funnel-builder")},{value:"custom",label:Object(u.__)("Custom","funnel-builder")}];function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jr(e,t){return(Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ra(e);if(t){var a=ra(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ta(this,n)}}function ta(e,t){if(t&&("object"===Xr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return na(e)}function na(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jr(e,t)}(i,e);var t,n,a,o=ea(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).onTabSelect=e.onTabSelect.bind(na(e)),e.controlsRef=Object(r.createRef)(),e}return t=i,(n=[{key:"onTabSelect",value:function(e){var t=this.props,n=t.onUpdate,r=t.period;"period"===e&&"custom"===r&&n({period:"today"})}},{key:"isFutureDate",value:function(e){return yt()().isBefore(yt()(e),"day")}},{key:"render",value:function(){var e=this,t=this.props,n=t.period,a=t.compare,o=t.hideCompare,i=t.after,c=t.before,f=t.onUpdate,b=t.onClose,p=t.onSelect,d=t.isValidSelection,m=t.resetCustomValues,y=t.focusedInput,h=t.afterText,v=t.beforeText,O=t.afterError,g=t.beforeError,j=t.shortDateFormat,w=t.disablePresets;return Object(r.createElement)("div",null,Object(r.createElement)(Lr.a,{className:"screen-reader-text",tabIndex:"0"},Object(u.__)("Select date range and comparison","funnel-builder")),Object(r.createElement)(Lr.b,{component:!1},Object(r.createElement)(Lr.a,{className:"bwf-filters-date-text"},Object(u.__)("select a date range","funnel-builder")),Object(r.createElement)(s.TabPanel,{tabs:[{name:"period",title:Object(u.__)("Presets","funnel-builder"),className:"bwf-filters-date-tab"},{name:"custom",title:Object(u.__)("Custom","funnel-builder"),className:"bwf-filters-date-tab"}],className:"bwf-filters-date-tabs",activeClass:"is-active",initialTabName:"custom"===n||w?"custom":"period",onSelect:this.onTabSelect},(function(t){return Object(r.createElement)(r.Fragment,null,"period"===t.name&&Object(r.createElement)(Wr,{onSelect:f,period:n}),"custom"===t.name&&Object(r.createElement)(Mr,{after:i,before:c,onUpdate:f,isInvalidDate:e.isFutureDate,focusedInput:y,afterText:h,beforeText:v,afterError:O,beforeError:g,shortDateFormat:j,losesFocusTo:e.controlsRef.current}),Object(r.createElement)("div",{className:l()("bwf-filters-date-content-controls",{"is-custom":"custom"===t.name}),ref:e.controlsRef},!o&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Lr.a,{className:"bwf-filters-date-text"},Object(u.__)("compare to","funnel-builder")),Object(r.createElement)(Er,{onSelect:f,compare:a})),Object(r.createElement)("div",{className:l()("bwf-filters-date-button-group",{"bwf-has-reset-filter":"custom"===t.name})},"custom"===t.name&&Object(r.createElement)(s.Button,{className:"bwf-filters-date-button bwf-modal-cancel-btn bwf-no-ripple",onClick:m,disabled:!(i||c)},Object(u.__)("Reset","funnel-builder")),d(t.name)?Object(r.createElement)(s.Button,{className:"bwf-filters-date-button",onClick:p(t.name,b),isPrimary:!0},Object(u.__)("Update","funnel-builder")):Object(r.createElement)(s.Button,{className:"bwf-filters-date-button bwf-no-ripple",isPrimary:!0,disabled:!0},Object(u.__)("Update","funnel-builder")))))}))))}}])&&Zr(t.prototype,n),a&&Zr(t,a),i}(r.Component);aa.propTypes={period:vt.a.string.isRequired,compare:vt.a.string.isRequired,onUpdate:vt.a.func.isRequired,onClose:vt.a.func.isRequired,onSelect:vt.a.func.isRequired,resetCustomValues:vt.a.func.isRequired,focusedInput:vt.a.string,afterText:vt.a.string,beforeText:vt.a.string,afterError:vt.a.string,beforeError:vt.a.string,shortDateFormat:vt.a.string.isRequired};var oa=aa,ia=n(345);n(561);function ca(e){return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function la(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pa(e);if(t){var a=pa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return fa(this,n)}}function fa(e,t){if(t&&("object"===ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ba(e)}function ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pa(e){return(pa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var da=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(i,e);var t,n,a,o=sa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state=t.getResetState(),t.update=t.update.bind(ba(t)),t.onSelect=t.onSelect.bind(ba(t)),t.isValidSelection=t.isValidSelection.bind(ba(t)),t.resetCustomValues=t.resetCustomValues.bind(ba(t)),t}return t=i,(n=[{key:"formatDate",value:function(e,t){return e&&e._isAMomentObject&&"function"==typeof e.format?e.format(t):""}},{key:"getResetState",value:function(){var e=this.props.dateQuery,t=e.period,n=e.compare,r=e.before,a=e.after;return{period:t,compare:n,before:r,after:a,focusedInput:"startDate",afterText:this.formatDate(a,Object(f.P)()),beforeText:this.formatDate(r,Object(f.P)()),afterError:null,beforeError:null}}},{key:"update",value:function(e){this.setState(e)}},{key:"onSelect",value:function(e,t){var n=this,r=this.props,a=r.isoDateFormat,o=r.onRangeSelect;return function(r){var i=n.state,c=i.period,l=i.compare,u=i.after,s=i.before,f={period:"custom"===e?"custom":c,compare:l};"custom"===e?(f.after=n.formatDate(u,a),f.before=n.formatDate(s,a)):(f.after=void 0,f.before=void 0),o(f),t(r)}}},{key:"getButtonLabel",value:function(){var e=this.props.dateQuery,t=e.primaryDate,n=e.secondaryDate,r=["".concat(t.label," (").concat(t.range,")")];return this.props.hideCompare||r.push("".concat(Object(u.__)("vs.","funnel-builder")," ").concat(n.label," (").concat(n.range,")")),r}},{key:"isValidSelection",value:function(e){var t=this.state,n=t.compare,r=t.after,a=t.before;return"custom"!==e||n&&r&&a}},{key:"resetCustomValues",value:function(){this.setState({after:null,before:null,focusedInput:"startDate",afterText:"",beforeText:"",afterError:null,beforeError:null})}},{key:"render",value:function(){var e=this,t=this.state,n=t.period,a=t.compare,o=t.after,i=t.before,c=t.focusedInput,u=t.afterText,s=t.beforeText,b=t.afterError,p=t.beforeError,d=this.props.disablePresets;return Object(r.createElement)("div",{className:l()("bwf-filters-filter",{"bwf-presets-disable":d})},Object(r.createElement)(St.a,{contentClassName:"bwf-filters-date-content",position:"bottom",expandOnMobile:!0,renderToggle:function(t){var n=t.isOpen,a=t.onToggle;return Object(r.createElement)(ia.a,{onClick:a,isOpen:n,labels:e.getButtonLabel()})},renderContent:function(t){var l=t.onClose;return Object(r.createElement)(oa,{period:n,compare:a,hideCompare:e.props.hideCompare,after:o,before:i,onUpdate:e.update,onClose:l,onSelect:e.onSelect,isValidSelection:e.isValidSelection,resetCustomValues:e.resetCustomValues,focusedInput:c,afterText:u,beforeText:s,afterError:b,beforeError:p,shortDateFormat:f.c,disablePresets:d})}}))}}])&&la(t.prototype,n),a&&la(t,a),i}(r.Component);da.propTypes={onRangeSelect:vt.a.func.isRequired,dateQuery:vt.a.shape({period:vt.a.string.isRequired,compare:vt.a.string.isRequired,before:vt.a.object,after:vt.a.object,primaryDate:vt.a.shape({label:vt.a.string.isRequired,range:vt.a.string.isRequired}).isRequired,secondaryDate:vt.a.shape({label:vt.a.string.isRequired,range:vt.a.string.isRequired}).isRequired}).isRequired},da.defaultProps={disablePresets:!1};var ma=da,ya=n(232),ha=n(547),va=n(47),Oa=Object(r.createElement)(va.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(r.createElement)(va.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),ga=n(243),ja=n(162);n(562);function wa(e){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ea(){return(Ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sa(e,t){return(Sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ka(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ca(e);if(t){var a=Ca(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return xa(this,n)}}function xa(e,t){if(t&&("object"===wa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pa(e)}function Pa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ca(e){return(Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sa(e,t)}(i,e);var t,n,a,o=ka(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).state={animate:null},e.container=Object(r.createRef)(),e.onExited=e.onExited.bind(Pa(e)),e}return t=i,(n=[{key:"onExited",value:function(){var e=this.props.onExited;e&&e(this.container.current)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.animationKey,a=e.animate,o=l()("bwf-slide-animation",a&&"animate-".concat(a));return Object(r.createElement)("div",{className:o,ref:this.container},Object(r.createElement)(ga.a,null,Object(r.createElement)(ja.a,Ea({timeout:200,classNames:"slide",key:n},this.props,{onExited:this.onExited}),(function(e){return t({status:e})}))))}}])&&_a(t.prototype,n),a&&_a(t,a),i}(r.Component);Na.propTypes={children:vt.a.func.isRequired,animationKey:vt.a.any.isRequired,animate:vt.a.oneOf([null,"left","right"]),onExited:vt.a.func};var Ta=Na;n(563);function Ra(e){return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aa(Object(n),!0).forEach((function(t){Fa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Da(e){return function(e){if(Array.isArray(e))return qa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ma(e,t){return(Ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function La(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ka(e);if(t){var a=Ka(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ua(this,n)}}function Ua(e,t){if(t&&("object"===Ra(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Va(e)}function Va(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ka(e){return(Ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ha=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ma(e,t)}(c,e);var t,n,a,o=La(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=(t=o.call(this,e)).getFilter();if(t.state={nav:n.path||[],animate:null,selectedTag:null},t.selectSubFilter=t.selectSubFilter.bind(Va(t)),t.getVisibleFilters=t.getVisibleFilters.bind(Va(t)),t.updateSelectedTag=t.updateSelectedTag.bind(Va(t)),t.onTagChange=t.onTagChange.bind(Va(t)),t.onContentMount=t.onContentMount.bind(Va(t)),t.goBack=t.goBack.bind(Va(t)),n.settings&&n.settings.getLabels){var r=t.props.query,a=n.settings,i=a.param;(0,a.getLabels)(r[i],r).then(t.updateSelectedTag)}return t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){var t=e.query,n=this.props,r=n.query,a=n.config;if(t[a.param]!==r[[a.param]]){var o=this.getFilter();if(o&&"Search"===o.component){this.setState({nav:o.path||[]});var i=o.settings,c=i.param;(0,i.getLabels)(r[c],r).then(this.updateSelectedTag)}}}},{key:"updateSelectedTag",value:function(e){this.setState({selectedTag:e[0]})}},{key:"getFilter",value:function(e){var t=this.props,n=t.config,r=t.query,a=Object(N.a)(n.filters);return e=e||r[n.param]||n.defaultValue||"all",Object(i.find)(a,{value:e})||{}}},{key:"getButtonLabel",value:function(e){if("Search"===e.component){var t=this.state.selectedTag;return[t&&t.label,Object(i.get)(e,"settings.labels.button")]}return e?[e.label]:[]}},{key:"getVisibleFilters",value:function(e,t){if(0===t.length)return e;var n=t[0],r=Object(i.find)(e,{value:n});return this.getVisibleFilters(r&&r.subFilters,t.slice(1))}},{key:"selectSubFilter",value:function(e){this.setState((function(t){return{nav:[].concat(Da(t.nav),[e]),animate:"left"}}))}},{key:"goBack",value:function(){this.setState((function(e){return{nav:e.nav.slice(0,-1),animate:"right"}}))}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props,r=n.path,a=n.query,o=n.config,i=n.onFilterSelect,c=Object(N.h)(a),l=Ia(Fa({},o.param,(o.defaultValue||"all")===e?void 0:e),t);o.staticParams.forEach((function(e){l[e]=a[e]})),Object(N.k)(l,r,c),i(l)}},{key:"onTagChange",value:function(e,t,n,r){var a=Object(i.last)(r),o=e.value,c=e.settings.param;a?(this.update(o,Fa({},c,a.key)),t()):this.update(n.defaultValue||"all"),this.updateSelectedTag([a])}},{key:"renderButton",value:function(e,t,n){var a=this;if(e.component){var o=e.settings,c=o.type,l=o.labels,u=this.getFilter().value===e.value?this.state.selectedTag:null;return Object(r.createElement)(Mt.a,{className:"bwf-filters-filter-search",type:c,placeholder:l.placeholder,selected:u?[u]:[],onChange:Object(i.partial)(this.onTagChange,e,t,n),inlineTags:!0,staticResults:!0})}var f=Object(i.partial)(this.selectSubFilter,e.value),b=this.getFilter(),p=b.value===e.value||b.path&&Object(i.includes)(b.path,e.value);return Object(r.createElement)(s.Button,{className:"bwf-filters-filter-button",onClick:function(n){p?t(n):e.subFilters?f(n):function(n){t(n),a.update(e.value,e.query||{}),a.setState({selectedTag:null})}(n)}},e.label)}},{key:"onContentMount",value:function(e){var t=this.state.nav,n=t.length&&this.getFilter(t[t.length-1])?1:0,r=ya.focus.tabbable.find(e)[n];setTimeout((function(){r.focus()}),0)}},{key:"render",value:function(){var e=this,t=this.props.config,n=this.state,a=n.nav,o=n.animate,c=this.getVisibleFilters(t.filters,a),f=!!a.length&&this.getFilter(a[a.length-1]),b=this.getFilter();return Object(r.createElement)("div",{className:"bwf-filters-filter"},t.label&&Object(r.createElement)("span",{className:"bwf-filters-label"},t.label,":"),Object(r.createElement)(St.a,{contentClassName:"bwf-filters-filter-content",position:"bottom",expandOnMobile:!0,headerTitle:Object(u.__)("filter report to show:","funnel-builder"),renderToggle:function(t){var n=t.isOpen,a=t.onToggle;return Object(r.createElement)(ia.a,{onClick:a,isOpen:n,labels:e.getButtonLabel(b)})},renderContent:function(n){var u=n.onClose;return Object(r.createElement)(Ta,{animationKey:a,animate:o,onExited:e.onContentMount},(function(){return Object(r.createElement)("ul",{className:"bwf-filters-filter-content-list"},f&&Object(r.createElement)("li",{className:"bwf-filters-filter-content-list-item"},Object(r.createElement)(s.Button,{className:"bwf-filters-filter-button",onClick:e.goBack},Object(r.createElement)(ha.a,{icon:Oa}),f.label)),c.map((function(n){return Object(r.createElement)("li",{key:n.value,className:l()("bwf-filters-filter-content-list-item",{"is-selected":b.value===n.value||b.path&&Object(i.includes)(b.path,n.value)})},e.renderButton(n,u,t))})))}))}}))}}])&&Ba(t.prototype,n),a&&Ba(t,a),c}(r.Component);Ha.propTypes={config:vt.a.shape({label:vt.a.string,staticParams:vt.a.array.isRequired,param:vt.a.string.isRequired,defaultValue:vt.a.string,showFilters:vt.a.func.isRequired,filters:vt.a.arrayOf(vt.a.shape({chartMode:vt.a.oneOf(["item-comparison","time-comparison"]),component:vt.a.string,label:vt.a.string,path:vt.a.string,subFilters:vt.a.array,value:vt.a.string.isRequired}))}).isRequired,path:vt.a.string.isRequired,query:vt.a.object,onFilterSelect:vt.a.func},Ha.defaultProps={query:{},onFilterSelect:function(){}};var za=Ha;n(564);function Ya(e){return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $a(){return($a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wa(e,t){return(Wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ja(e);if(t){var a=Ja(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xa(this,n)}}function Xa(e,t){if(t&&("object"===Ya(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Za(e)}function Za(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ja(e){return(Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wa(e,t)}(c,e);var t,n,a,o=Ga(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=o.call(this)).renderCard=e.renderCard.bind(Za(e)),e.onRangeSelect=e.onRangeSelect.bind(Za(e)),e}return t=c,(n=[{key:"renderCard",value:function(e){var t=this.props,n=t.siteLocale,a=t.advancedFilters,o=t.query,c=t.path,l=t.onAdvancedFilterAction,u=t.currency,s=e.filters,f=e.param;if(!o[f])return null;if(0===o[f].indexOf("compare")){var b=Object(i.find)(s,{value:o[f]});if(!b)return null;var p=b.settings,d=void 0===p?{}:p;return Object(r.createElement)("div",{key:f,className:"bwf-filters-advanced-filters"},Object(r.createElement)(ar,$a({path:c,query:o},d)))}return"advanced"===o[f]?Object(r.createElement)("div",{key:f,className:"bwf-filters-advanced-filters"},Object(r.createElement)(Yn,{siteLocale:n,currency:u,config:a,path:c,query:o,onAdvancedFilterAction:l})):void 0}},{key:"onRangeSelect",value:function(e){var t=this.props,n=t.query,r=t.path,a=t.onDateSelect,o=t.updateQuery,i=void 0===o||o;e.after&&(e.after=yt()(Object(dt.a)(yt()(e.after),"start")).format("YYYY-MM-DD HH:mm:ss")),e.before&&(yt()(yt()().format("YYYY-MM-DD")).isSame(e.before)?e.before=yt()(Object(dt.a)(yt()(e.before),"now")).format("YYYY-MM-DD HH:mm:ss"):e.before=yt()(Object(dt.a)(yt()(e.before),"end")).format("YYYY-MM-DD HH:mm:ss")),i&&Object(N.k)(e,r,n),a(e)}},{key:"getDateQuery",value:function(e){var t=Object(dt.e)(e),n=t.period,r=t.compare,a=t.before,o=t.after,i=Object(dt.d)(e);return{period:n,compare:r,before:a,after:o,primaryDate:i.primary,secondaryDate:i.secondary}}},{key:"render",value:function(){var e=this.props,t=e.dateQuery,n=e.filters,a=e.query,o=e.path,i=e.showDatePicker,c=e.onFilterSelect,l=e.isoDateFormat,s=e.hideCompare;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Lr.a,{className:"screen-reader-text"},Object(u.__)("Filters","funnel-builder")),Object(r.createElement)(Lr.b,{component:"div",className:"bwf-filters"},Object(r.createElement)("div",{className:"bwf-filters-basic-filters"},i&&Object(r.createElement)(ma,{key:JSON.stringify(a),dateQuery:t||this.getDateQuery(a),onRangeSelect:this.onRangeSelect,isoDateFormat:l,hideCompare:s}),n.map((function(e){return e.showFilters(a)?Object(r.createElement)(za,{key:e.param,config:e,query:a,path:o,onFilterSelect:c}):null}))),n.map(this.renderCard)))}}])&&Qa(t.prototype,n),a&&Qa(t,a),c}(r.Component);eo.propTypes={siteLocale:vt.a.string,advancedFilters:vt.a.object,filters:vt.a.array,path:vt.a.string.isRequired,query:vt.a.object,showDatePicker:vt.a.bool,onDateSelect:vt.a.func,onFilterSelect:vt.a.func,onAdvancedFilterAction:vt.a.func,currency:vt.a.object,dateQuery:vt.a.shape({period:vt.a.string.isRequired,compare:vt.a.string.isRequired,before:vt.a.object,after:vt.a.object,primaryDate:vt.a.shape({label:vt.a.string.isRequired,range:vt.a.string.isRequired}).isRequired,secondaryDate:vt.a.shape({label:vt.a.string.isRequired,range:vt.a.string.isRequired})}),hideCompare:vt.a.bool,isoDateFormat:vt.a.string},eo.defaultProps={siteLocale:"en_US",advancedFilters:{},filters:[],query:{},showDatePicker:!0,onDateSelect:function(){},currency:gt()().getCurrencyConfig(),hideCompare:!1};n(25);n(297),n(565);n(254);n(566);n(567);n(568);var to=function(e){var t=e.data,n=void 0===t?{}:t,o=(e.selected,n.title),i=n.sub_title,c=n.type,u=void 0===c?"":c;return Object(r.createElement)("div",{className:l()("bwf-node-wrapper bwf-section-node")},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1,className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-brick is-section-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(S.a,{size:36,icon:u.includes("landing")?"landing-flow":u.includes("bump")?"wc_order_bump-flow":u.includes("checkout")?"wc_checkout-flow":u.includes("offer")?"offer-flow":u.includes("upsell")?"upsells-flow":u.includes("wc_thankyou")?"wc_thankyou-flow":u.includes("optin_ty")?"optin_ty-flow":"optin-flow"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(_.decodeEntities)(i)),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(_.decodeEntities)(o))))),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source"}))},no=n(569),ro=n.n(no),ao=["sourceEdgeType"];function oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(n),!0).forEach((function(t){co(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function uo(e){return function(e){if(Array.isArray(e))return so(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return so(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return so(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.id,a=void 0===r?"":r,o=e.data,c=void 0===o?{}:o,l=n.hasOwnProperty("maparr")&&n.maparr.hasOwnProperty(a)?n.maparr[a]:[],u=1==l.length?l[0]:0,s=0!=u&&n.hasOwnProperty("source")&&n.source.hasOwnProperty(u)?n.source[u]:[],f=c.type,b=void 0===f?"":f,p=0;switch(e.type){case"step":p=122;var d=c._data,m=void 0===d?{}:d,y=c.tags,h=void 0===y?[]:y,v=c.experiment_status,O=void 0===v?"":v,g=m.status,j=void 0===g?"":g;Object(i.isEmpty)(h)&&j&&1===parseInt(j)&&(Object(i.isEmpty)(O)||"4"===O)||(p+=42),["wc_upsells"].includes(b)&&(p-=58);break;case"rule":p=110;break;case"condition":p=115;break;case"conditional-alter":var w=Object(i.flatten)(e.data.sidebarValues).length,E=w-1;p=w?32*w+29*E+100:150;break;case"addNode":p=24;break;case"btnNode":p=45;break;case"sectionNode":p=90;break;case"start":p=30;break;case"end":p=25;break;case"merger":p=0;break;default:p=95}return l.length>2&&(p+=10*l.length),s.length>2&&(p+=20*s.length),p+t},bo=function(e){if(!e||!e.type)return 325;switch(e.type){case"rule":return 75;case"step":default:return 325}},po=function(e){var t=new ro.a.graphlib.Graph;t.setDefaultEdgeLabel((function(){return{}})),t.setGraph({rankdir:"TB",ranksep:80,nodesep:100});var n=function(e){var t=[],n=[],r=[];return e.map((function(e){if(e.hasOwnProperty("source")&&e.hasOwnProperty("target")){t.hasOwnProperty(e.source)?t[e.source].includes(e.target)||(t[e.source]=[e.target].concat(uo(t[e.source]))):t[e.source]=[e.target],n.hasOwnProperty(e.target)?n[e.target].includes(e.source)||(n[e.target]=[e.source].concat(uo(n[e.target]))):n[e.target]=[e.source];var a=e.type?e.type:"default";r.hasOwnProperty(e.target)?r[e.target].includes(e.type)||(r[e.target]=[a].concat(uo(r[e.target]))):r[e.target]=[a]}})),{source:n,maparr:t,sourceEdgeType:r}}(e),r=n.sourceEdgeType,o=void 0===r?{}:r,i=lo(n,ao);return e.forEach((function(e){Object(a.j)(e)?t.setNode(e.id,{width:325,height:fo(e,0,i)}):t.setEdge(e.source,e.target)})),ro.a.layout(t),e.map((function(e){if(Object(a.j)(e)){var n=t.node(e.id);e.targetPosition="top",e.sourcePosition="bottom";var r=fo(e,"condition"===e.type?50:100);e.position={x:n.x-bo(e)/2+Math.random()/1e3,y:n.y-r/2};var i={};i=o.hasOwnProperty(e.id)?{bwfSourceEdgeType:o[e.id],orphanNode:!1}:{orphanNode:!0},e.data=io(io({},e.data),i)}else e.type;return e}))};function mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||vo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=vo(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ho(e){return function(e){if(Array.isArray(e))return Oo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(e,t){if(e){if("string"==typeof e)return Oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oo(e,t):void 0}}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?go(Object(n),!0).forEach((function(t){wo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eo(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function _o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Eo(o,r,a,i,c,"next",e)}function c(e){Eo(o,r,a,i,c,"throw",e)}i(void 0)}))}}var So={expired:{label:Object(u.__)("License Expired","funnel-builder"),label_class:"bwf-st-c-badge-red"}},ko=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a={},o={},c=function e(n,c,l,u,s,f){var b=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";return new Promise(function(){var m=_o(regeneratorRuntime.mark((function m(y){var h,v,O,g,j,w,E,_,S,k,x,P,C,N,T,R,A,I,F,D,q,B,M,L,U,V,K,H,z,Y,$;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(h=[],O="node-".concat(v=c,"-offer-").concat(n),++v,o[O]=d,g="node-".concat(n,"-accept"),j="node-".concat(n,"-reject"),h.push({type:"step",id:O,data:jo(jo({},t[n]),{},{type:"offer",upsellId:p,mainIndex:u,stepIndex:s},r&&{tags:jo({},So)})},{type:"condition",id:g,data:{type:"success",title:"Accept"}},{id:"edge-id-".concat(n,"-accept-").concat(u,"-").concat(s,"-").concat(f),source:O,target:g},{type:"condition",id:j,data:{type:"error",title:"Reject"}},{id:"edge-id-".concat(n,"-reject-").concat(u,"-").concat(s,"-").concat(f),source:O,target:j}),w=t&&t[n]&&t[n].hasOwnProperty("accept")&&!["","automatic","terminate"].includes(t[n].accept)&&parseInt(t[n].accept)!==parseInt(n)?t[n].accept:"",E=t&&t[n]&&t[n].hasOwnProperty("reject")&&!["","automatic","terminate"].includes(t[n].reject)&&parseInt(t[n].reject)!==parseInt(n)?t[n].reject:"",""!==w||""!==E){m.next=16;break}_=l,h.push({id:"edge-id-".concat(n,"-afteraccept-").concat(u,"-").concat(s,"-").concat(f),source:"node-".concat(n,"-accept"),type:"bwf-default",target:_,data:{offer:n,branch:"accept",upsellId:p,mainIndex:u,stepIndex:s}}),h.push({id:"edge-id-".concat(n,"-afterreject-").concat(u,"-").concat(s,"-").concat(f),source:"node-".concat(n,"-reject"),type:"bwf-default",target:_,data:{offer:n,branch:"reject",upsellId:p,mainIndex:u,stepIndex:s}}),m.next=87;break;case 16:if(""===w||""===E||w!=E||0==w){m.next=42;break}if(S="node-offer-".concat(n,"-merger"),h.push({type:"merger",id:S,data:{offerCommon:!0,offerId:n,upsellId:p,mainIndex:u,stepIndex:s}}),h.push({id:"edge-id-".concat(n,"-afteraccept-").concat(u,"-").concat(s,"-").concat(f),source:"node-".concat(n,"-accept"),type:"bwf-default",target:S,data:{offer:n,branch:"accept",upsellId:p,mainIndex:u,stepIndex:s}}),h.push({id:"edge-id-".concat(n,"-afterreject-").concat(u,"-").concat(s,"-").concat(f),source:"node-".concat(n,"-reject"),type:"bwf-default",target:S,data:{offer:n,branch:"reject",upsellId:p,mainIndex:u,stepIndex:s}}),!a||!a.hasOwnProperty(w)){m.next=26;break}h.push({id:"edge-".concat(g,"-").concat(a[w],"-offeredge"),source:S,target:a[w]}),o.hasOwnProperty(a[w])&&delete o[a[w]],m.next=40;break;case 26:return m.next=28,e(parseInt(t[n].accept),v,l,u,s,f,b,p,d);case 28:k=m.sent,x=k.offerNode,P=void 0===x?[]:x,C=k.newNodeCount,N=void 0===C?0:C,T=k.offerSource,R=void 0===T?"":T,Object(i.isEmpty)(P)||h.push.apply(h,ho(Object(i.cloneDeep)(P))),a[n]=O,h.push({id:"edge-id-".concat(n,"-after-accept-").concat(t[n].accept,"-").concat(u,"-").concat(s,"-").concat(f),source:S,target:R}),o.hasOwnProperty(R)&&delete o[R],N>0&&(v=N);case 40:m.next=87;break;case 42:if(A=l,""!=w&&0!=w){m.next=47;break}h.push({id:"edge-id-".concat(n,"-afteraccept-").concat(u,"-").concat(s,"-").concat(f),source:"node-".concat(n,"-accept"),type:"bwf-default",target:b,data:{offer:n,branch:"accept",upsellId:p,mainIndex:u,stepIndex:s}}),m.next=65;break;case 47:if(!a||!a.hasOwnProperty(t[n].accept)){m.next=52;break}h.push({id:"edge-".concat(g,"-").concat(a[t[n].accept],"-offeredge"),source:g,target:a[t[n].accept],type:"bwf-default",data:{offer:n,branch:"accept",upsellId:p,mainIndex:u,stepIndex:s}}),o.hasOwnProperty(a[t[n].accept])&&delete o[a[t[n].accept]],m.next=65;break;case 52:return m.next=54,e(parseInt(t[n].accept),v,A,u,s,f,b,p,d);case 54:I=m.sent,F=I.offerNode,D=void 0===F?[]:F,q=I.newNodeCount,B=void 0===q?0:q,M=I.offerSource,L=void 0===M?"":M,Object(i.isEmpty)(D)||h.push.apply(h,ho(Object(i.cloneDeep)(D))),h.push({id:"edge-id-".concat(n,"-after-accept-").concat(t[n].accept,"-").concat(u,"-").concat(s,"-").concat(f),source:g,target:L,type:"bwf-default",data:{offer:n,branch:"accept",upsellId:p,mainIndex:u,stepIndex:s}}),o.hasOwnProperty(L)&&delete o[L],B>0&&(v=B);case 65:if(""!=E&&0!=E){m.next=69;break}h.push({id:"edge-id-".concat(n,"-afterreject-").concat(u,"-").concat(s,"-").concat(f),source:"node-".concat(n,"-reject"),type:"bwf-default",target:b,data:{offer:n,branch:"reject",upsellId:p,mainIndex:u,stepIndex:s}}),m.next=87;break;case 69:if(!a.hasOwnProperty(t[n].reject)){m.next=74;break}h.push({id:"edge-".concat(j,"-").concat(a[t[n].reject],"-offeredge"),source:j,target:a[t[n].reject],type:"bwf-default",data:{offer:n,branch:"reject",upsellId:p,mainIndex:u,stepIndex:s}}),o.hasOwnProperty(a[t[n].reject])&&delete o[a[t[n].reject]],m.next=87;break;case 74:return m.next=76,e(parseInt(t[n].reject),v,A,u,s,f,b,p,d);case 76:U=m.sent,V=U.offerNode,K=void 0===V?[]:V,H=U.newNodeCount,z=void 0===H?0:H,Y=U.offerSource,$=void 0===Y?"":Y,Object(i.isEmpty)(K)||h.push.apply(h,ho(Object(i.cloneDeep)(K))),h.push({id:"edge-id-".concat(n,"-after-reject-").concat(t[n].reject,"-").concat(u,"-").concat(s,"-").concat(f),source:j,target:$,type:"bwf-default",data:{offer:n,branch:"reject",upsellId:p,mainIndex:u,stepIndex:s}}),o.hasOwnProperty($)&&delete o[$],z>0&&(v=z);case 87:a[n]=O,y({offerNode:h,newNodeCount:v,offerSource:O});case 89:case"end":return m.stop()}}),m)})));return function(e){return m.apply(this,arguments)}}())},l=function(){var e=_o(regeneratorRuntime.mark((function e(l){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=[],!Object(i.isEmpty)(l)){e.next=5;break}s=[{type:"start",id:"start"},{type:"emptyNode",id:"fb-empty"},{id:"edge-id-2",source:"start",target:"fb-empty"},{id:"edge-id-1",source:"fb-empty",target:"end"},{type:"end",id:"end"}],e.next=6;break;case 5:return e.delegateYield(regeneratorRuntime.mark((function e(){var b,p,d,m,y,h,v,O,g,j,w,E,_,S,k,x,P,C,N;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b="start",p=1,d=!1,s=[{type:"start",id:"start"}],m=Object(f.Z)()?"start":"node-".concat(p),b=m,++p,y=!1,h=!1,v=!1,O=yo(l);try{for(O.s();!(g=O.n()).done;)"wc_upsells"===(j=g.value).type&&(y=!0),"wc_checkout"===j.type&&(h=!0),"wc_thankyou"===j.type&&(v=!0)}catch(e){O.e(e)}finally{O.f()}w=yo(l.entries()),e.prev=13,_=regeneratorRuntime.mark((function e(){var l,f,m,O,g,j,w,_,S,k,x,P,C,N,T,R,A,I,F,D,q,B,M,L,U,V,K,H,z,Y,$,Q,W,G,X,Z,J,ee,te,ne,re,ae,oe,ie,ce,le,ue,se,fe,be,pe,de,me,ye,he,ve;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=mo(E.value,2),f=l[0],m=l[1],O=m.type,g=void 0===O?"":O,j=m.steps,w=void 0===j?[]:j,_="start",e.t0=g,e.next="optin"===e.t0||"optin_ty"===e.t0||"wc_thankyou"===e.t0||"landing"===e.t0?6:"wc_native"===e.t0||"wc_checkout"===e.t0?8:"wc_upsells"===e.t0?10:88;break;case 6:if(!Object(i.isEmpty)(w)){S="node-".concat(p),"wc_thankyou"===g?(d=!0,S="end"):++p,k="",x="",P=yo(w.entries());try{for(P.s();!(C=P.n()).done;)N=mo(C.value,2),T=N[0],R=N[1],A=R.id,k=I=void 0===A?"":A,_=I,0==T&&(x=I),F="node-".concat(p),s.push({type:"step",id:F,data:jo(jo({},t[I]),{},{mainIndex:f,stepIndex:T,subIndex:""})},{id:"edge-".concat(b,"-").concat(F),source:b,target:F},{id:"edge-".concat(F,"-").concat(S),source:F,target:S}),++p}catch(e){P.e(e)}finally{P.f()}"wc_thankyou"!==g&&(D=["optin","landing"],"optin"===g&&D.push("optin_ty"),h||D.push("wc_checkout"),s.push({type:"addNode",id:S,data:{mainIndex:f,lastParentId:k,prevFirstParent:x,currentParentType:g,lastIteratedStep:_,allowedSteps:D,hasCheckout:h}})),b=S}return e.abrupt("break",88);case 8:return Object(i.isEmpty)(w)||(q="node-".concat(p),B="",++p,M="",w.map((function(e,r){var a=e.id,o=void 0===a?"":a,c=e.substeps,l=void 0===c?[]:c;B=o,_=o,0===r&&(M=o);var d="node-".concat(p);++p,Object(i.isEmpty)(l)?(t[o].tags.hasOwnProperty("no_bump")||(t[o].tags.no_bump={label:Object(u.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}),s.push({type:"wc_native"===g?"emptyNode":"step",id:d,data:jo(jo({},t[o]),{},{mainIndex:f,stepIndex:r,subIndex:"",emptyNodeLabel:"wc_native"===g?"Add Checkout":"",allowedSteps:"wc_native"===g?["wc_checkout"]:[],replaceCurrentStep:!0,prevFirstParent:B,type:g})},{id:"edge-".concat(b,"-").concat(d),source:b,target:d},{type:"btnNode",id:"bump-".concat(d),data:{title:"Add Order Bump",type:"wc_order_bump",icon:"order-bump",prevFirstParent:B,mainIndex:f,stepIndex:r}},{id:"edge-".concat(d,"-bump-").concat(d),source:d,target:"bump-".concat(d)},{id:"edge-bump-".concat(d,"-").concat(q),source:"bump-".concat(d),target:q})):(delete t[o].tags.no_bump,s.push({type:"wc_native"===g?"emptyNode":"step",id:d,data:jo(jo({},t[o]),{},{mainIndex:f,stepIndex:r,prevFirstParent:B,emptyNodeLabel:"wc_native"===g?"Add Checkout":"",allowedSteps:"wc_native"===g?["wc_checkout"]:[],replaceCurrentStep:!0})},{id:"edge-".concat(b,"-").concat(d),source:b,target:d}),l.map((function(e,a){var o=e.id,i=void 0===o?"":o,c=(e.tags,"node-".concat(p));++p,s.push({type:"step",id:c,data:jo(jo({},t[i]),{},{mainIndex:f,stepIndex:r,subIndex:a,parent_id:B},n&&{tags:jo({},So)})},{id:"edge-".concat(d,"-").concat(c),source:d,target:c},{id:"edge-".concat(c,"-").concat(q),source:c,target:q})})))})),L=[],y||L.push("wc_upsells"),y||v||L.push("wc_thankyou"),s.push({type:0===L.length?"merger":"addNode",id:q,data:{mainIndex:f,lastParentId:B,currentParentType:g,prevFirstParent:M,lastIteratedStep:_,allowedSteps:L,newUpsell:!0}}),b=q),e.abrupt("break",88);case 10:if(Object(i.isEmpty)(w)){e.next=87;break}U="",V="node-".concat(p),++p,K=yo(w.entries()),e.prev=15,K.s();case 17:if((H=K.n()).done){e.next=77;break}if(z=mo(H.value,2),Y=z[0],$=z[1],Q=$.id,W=void 0===Q?"":Q,G=$.substeps,X=void 0===G?[]:G,U=parseInt(W),_=W,Z="node-".concat(p,"-upsell-start-").concat(Y),++p,J=jo({},t[parseInt(W)]),(J=jo(jo({},J),{},{mainIndex:f,stepIndex:Y})).hasOwnProperty("tags")?J.tags=jo(jo({start:{label:Object(u.__)("Start","funnel-builder"),label_class:"bwf-st-c-badge-green"}},r&&So),J.tags):J.tags=jo({start:{label:Object(u.__)("Start","funnel-builder"),label_class:"bwf-st-c-badge-green"}},r&&So),s.push({type:"step",id:Z,data:jo({},J)},{id:"edge-".concat(b,"-").concat(Z),source:b,target:Z}),++p,ee="node-".concat(p,"-upsell-end-").concat(Y),++p,!Object(i.isEmpty)(X)){e.next=38;break}te="node-".concat(p),++p,s.push({type:"btnNode",id:te,data:{title:"Add Offer",type:"offer",mainIndex:f,stepIndex:0,icon:"offer-flow",prevFirstParent:U}},{id:"edge-".concat(Z,"-").concat(te),source:Z,target:te},{id:"edge-".concat(te,"-").concat(ee),source:te,target:ee}),s.push({type:"step",id:ee,data:jo(jo({},t[parseInt(W)]),{},{upsellEnd:!0,mainIndex:f,tags:jo({end:{label:"End",label_class:"bwf-st-c-badge-red"}},r&&So)})},{id:"edge-".concat(ee,"-").concat(V),source:ee,target:V}),e.next=75;break;case 38:ne=yo(X.entries()),e.prev=39,ne.s();case 41:if((re=ne.n()).done){e.next=64;break}if(ae=mo(re.value,2),oe=ae[0],ie=ae[1],ce=ie.id,le=void 0===ce?"":ce,ue="",!a||!a.hasOwnProperty(parseInt(le))){e.next=49;break}ue=a[parseInt(le)],e.next=61;break;case 49:return e.next=51,c(parseInt(le),p,ee,f,Y,oe,ee,U,Z);case 51:se=e.sent,fe=se.offerNode,be=void 0===fe?[]:fe,pe=se.newNodeCount,de=void 0===pe?0:pe,me=se.offerSource,ye=void 0===me?"":me,Object(i.isEmpty)(be)||(he=s).push.apply(he,ho(Object(i.cloneDeep)(be))),de>0&&(p=de),0==parseInt(oe)&&(ue=ye);case 61:0==parseInt(oe)&&""!=ue&&(s.push({id:"edge-".concat(Z,"-").concat(ue,"-offeredge"),source:Z,target:ue}),o.hasOwnProperty(ue)&&delete o[ue]);case 62:e.next=41;break;case 64:e.next=69;break;case 66:e.prev=66,e.t1=e.catch(39),ne.e(e.t1);case 69:return e.prev=69,ne.f(),e.finish(69);case 72:ve="node-".concat(p,"-upsell-end-node-").concat(Y),p++,s.push({type:"addNode",id:ee,data:{upsellAfterId:parseInt(W),upsellEndAddLast:!0,mainIndex:f,stepIndex:Y,prevFirstParent:U,allowedSteps:["offer"]}},{id:"edge-".concat(ve,"-").concat(V),source:ee,target:ve},{type:"step",id:ve,data:jo(jo({},t[parseInt(W)]),{},{upsellEnd:!0,mainIndex:f,tags:jo({end:{label:"End",label_class:"bwf-st-c-badge-red"}},r&&So)})},{id:"edge-".concat(ve,"-").concat(V,"-2"),source:ve,target:V});case 75:e.next=17;break;case 77:e.next=82;break;case 79:e.prev=79,e.t2=e.catch(15),K.e(e.t2);case 82:return e.prev=82,K.f(),e.finish(82);case 85:s.push({type:v?"merger":"addNode",id:V,data:{mainIndex:f,lastParentId:U,currentParentType:g,allowedSteps:["wc_thankyou"],lastIteratedStep:_}}),b=V;case 87:return e.abrupt("break",88);case 88:case"end":return e.stop()}}),e,null,[[15,79,82,85],[39,66,69,72]])})),w.s();case 16:if((E=w.n()).done){e.next=20;break}return e.delegateYield(_(),"t0",18);case 18:e.next=16;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(13),w.e(e.t1);case 25:return e.prev=25,w.f(),e.finish(25);case 28:if(b==m?(s.push({type:"emptyNode",id:"fb-empty"},{id:"edge-id-2",source:"start",target:"fb-empty"}),b="fb-empty"):Object(f.Z)()?s.push({id:"edge-start-node-".concat(p),source:"start",target:m}):(S=["optin","landing"],h||S.push("wc_checkout"),s.push({type:"addNode",id:m,data:{mainIndex:"start",allowedSteps:S,prevFirstParent:"start",lastIteratedStep:"start"}},{id:"edge-start-node-".concat(p),source:"start",target:m})),d?s.push({type:"end",id:"end"}):s.push({id:"edge-".concat(b,"-end"),source:b,target:"end"},{type:"end",id:"end"}),!Object(i.isEmpty)(o))for(k=Object.keys(o),x=0,P=k;x<P.length;x++)C=P[x],N=o[C],s.push({id:"edge-orphan-node-".concat(p),source:N,target:C,animated:!0,type:"bwf-orphan",data:{bwfSourceEdgeType:"yes"}}),p++;case 31:case"end":return e.stop()}}),e,null,[[13,22,25,28]])}))(),"t0",6);case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l(e)};function xo(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Po(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Co(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var No=function(e){var t=e.fullScreen,n=e.setCanvasFullScreen,o=(e.showExperiment,e.funnelId,Object(a.m)().setCenter),c=Object(a.k)(),l=g(),u=l.isLoading,s=l.getNodeElements,f=void 0===s?[]:s,b=l.getStepsList,p=Po(Object(r.useState)([]),2),d=p[0],m=p[1],y=Po(Object(r.useState)(!1),2),h=y[0],v=y[1],O=Object(r.useRef)(),j=Po(Object(r.useState)(!1),2),w=j[0],E=j[1],_=f(),S=b(),k=Object(F.a)().isExpired,x=Object(F.a)("ul").isExpired,P=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ko(t,S,k,x);case 2:n=e.sent,m(po(n));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xo(o,r,a,i,c,"next",e)}function c(e){xo(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),N=Object(C.a)().resetFunnel;Object(r.useEffect)((function(){u||(P(_),E(!0)),w&&N()}),[_,S]);var T=Object(a.l)((function(e){return e.setSelectedElements})),R={"bwf-default":bt,"bwf-orphan":pt},A={start:Le,step:Be,end:Me,emptyNode:rt,btnNode:et,addNode:He,sectionNode:to,merger:Ue,condition:at};return Object(r.useEffect)((function(){Object(i.isNull)(document.querySelector("#bwf-funnel-canvas-wrap"))||(O.current=document.querySelector("#bwf-funnel-canvas-wrap").getBoundingClientRect())})),Object(r.useEffect)((function(){if(!h){var e=0,t=0,n=c.getState().nodes;if(n.length&&O.current){var r=n[0];r.hasOwnProperty("__rf")?(e=r.__rf.position.x+140,t=r.__rf.position.y):(e=r.position.x+140,t=r.position.y),t=parseFloat(t)+.4*parseFloat(O.current.height),v(!0),o(e,t,1)}}}),[d,h]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.f,{defaultZoom:1,minZoom:.5,maxZoom:4,nodeTypes:A,nodesConnectable:!1,nodesDraggable:!1,elements:d,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,edgeTypes:R},Object(r.createElement)(a.c,{showInteractive:!1},Object(r.createElement)(a.b,{onClick:function(){n(!t),document.body.style.overflow=t?"":"hidden",T([])}},t?Object(r.createElement)("span",{style:{fontSize:"15px",marginTop:"6px"},className:"dashicons dashicons-fullscreen-exit-alt"}):Object(r.createElement)("span",{style:{fontSize:"15px",marginTop:"6px"},className:"dashicons dashicons-fullscreen-alt"}))),Object(r.createElement)(a.a,null)))};function To(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ro(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ro(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(o.useParams)().id,n=e.funnelId,c=void 0===n?t:n,s=e.funnelTitle,b=g(),p=b.isLoading,d=b.getNodeElements,m=b.getFunnelId,y=b.getFunnelData,h=b.isAnalyticsLoaded,v=Object(j.a)(),O=v.fetchNodes,_=v.setLoading,S=v.fetchAnalytics,k=Object(C.a)(),x=k.setFunnelTitle,P=k.setFunnelLoading,N=To(Object(r.useState)(!1),2),T=N[0],R=(N[1],To(Object(r.useState)(!1),2)),A=R[0],I=R[1],F=To(Object(r.useState)(!1),2),D=F[0],q=F[1],B=m(),M=d(),L=y();Object(f.i)(Object(u.__)("Funnel Canvas #","funnel-builder")+c),Object(r.useEffect)((function(){!p&&L.hasOwnProperty("title")&&(x(L.title),P(!1),h||Object(i.isEmpty)(M)||S(c))}),[p]),Object(r.useEffect)((function(){return(parseInt(B)!==parseInt(c)||Object(i.isEmpty)(M))&&(_(!0),O(c,T)),function(){document.body.style.overflow=""}}),[T]);return Object(r.createElement)("div",{id:"bwf-funnel-canvas-wrap",className:l()({"full-screen":D})},D&&Object(r.createElement)("div",{className:"bwf-flow-header-wrap"},Object(r.createElement)("div",{className:"bwf-funnel-flow-header"},Object(f.Z)()&&Object(r.createElement)("div",{className:"bwf-canvas-funnel-title"},s),!Object(i.isEmpty)(M)&&!1)),p?Object(r.createElement)(w.a,{size:"xxl",style:{margin:"100px auto"}}):Object(r.createElement)(a.e,null,Object(r.createElement)(No,{setCanvasFullScreen:function(){q(!D)},fullScreen:D,showExperiment:T,funnelId:c})),!Object(f.Y)()&&Object(r.createElement)(E.a,{isOpen:A,onRequestClose:function(){return I(!1)},modalContent:{title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},proLink:Object(f.K)(["Canvas","Experiment"])}}))}},248:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),a=n(7),o=n.n(a),i=(n(261),["className","onChange","label","color","disabled"]);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function f(e){var t=e.className,n=e.onChange,a=e.label,u=e.color,f=e.disabled,b=s(e,i),p=l(Object(r.useState)(!0),2),d=p[0],m=p[1],y=Object(r.useRef)();return Object(r.createElement)("div",{className:o()("bwf-checkbox-control bwf-checkbox",t)},Object(r.createElement)("span",{className:"bwf-checkbox-control-inner"},Object(r.createElement)("input",c({type:"checkbox"},b,{onChange:function(e){f||(n(e.target.checked),m(!1))},ref:y,className:o()({"bwf-no-animation":d,"bwf-disable":f}),style:{"--current-checkbox-color":u}}))),a&&Object(r.createElement)("label",{className:"bwf-checkbox-control__label ".concat(f?"bwf-disable":""),onClick:function(){return y.current.click()}},a))}},250:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),a=n(2),o=n(7),i=n.n(o),c=n(51),l=n(9),u=(n(4),n(1)),s=n(61);n(278);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e.label,n=void 0===t?"":t,o=e.id,b=void 0===o?"":o,p=e.value,d=e.onChange,m=void 0===d?a.noop:d,y=e.className,h=e.style,v=void 0===h?{}:h,O=e.isHover,g=e.hoverVal,j=void 0===g?"":g,w="inspector-color-".concat(Object(c.useInstanceId)(l.ColorPicker)),E=f(Object(r.useState)(!1),2),_=E[0],S=E[1],k=f(Object(r.useState)(),2),x=k[0],P=k[1],C=f(Object(r.useState)(0),2),N=C[0],T=C[1],R=O?Object(a.isArray)(p)?p:[p,j]:p,A=function(e){if(O){var t=R;return t[N]=e.hex,void m(t,{id:b})}m(e.hex,{id:b})},I=O?R[N]:R;return Object(r.createElement)("div",{className:i()("components-color-field",y),style:v},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:w},n),O&&Object(r.createElement)(l.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(l.Button,{className:i()("is-secondary-gray is-small",{"is-selected":0===N}),onClick:function(){return T(0)}},Object(u.__)("Default","funnel-builder")),Object(r.createElement)(l.Button,{className:i()("is-secondary-gray is-small",{"is-selected":1===N}),onClick:function(){return T(1)}},Object(u.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(l.ColorIndicator,{colorValue:I,ref:P,className:i()({"is-empty":Object(a.isEmpty)(I)})}),Object(r.createElement)("span",{className:"indicator-text"},I||"Select")),_&&Object(r.createElement)(s.a,{position:"top right",onClose:function(){return S(!1)},anchor:x},Object(r.createElement)(l.ColorPicker,{color:I,onChangeComplete:A}),Object(r.createElement)(l.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return A({hex:""})}},Object(u.__)("Reset","funnel-builder")))))}},253:function(e,t,n){"use strict";var r=n(0),a=n(1),o=n(56),i=n(2),c=n(9);n(7),n(264);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t=e.value,n=void 0===t?"":t,c=e.onChange,l=e.keyid,s=e.openMergeTagModal,b=e.customSettings,p=void 0===b?{}:b,d=e.toolbar,m=e.quicktags,y=void 0!==m&&m,h=Object(r.useRef)(!1),v=Object(r.useRef)(n);return Object(r.useEffect)((function(){if(h.current){var e=window.tinymce.get("editor-bwf"+l);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),v.current=n||"")}}),[n]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,a=["lists","link"];Object(i.isEmpty)(r)||(a=[].concat(f(Object(i.isArray)(r)?r:r.split(",")),f(a))),wp.editor.initialize("editor-bwf"+l,{tinymce:u(u({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:d||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:f(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+l,plugins:a},p),quicktags:!!y&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(i.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,c(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){o.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==o.BACKSPACE&&t.keyCode!==o.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===o.F10&&t.stopPropagation()})),s&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(a.__)("Merge Tags","funnel-builder"),tooltip:Object(a.__)("Merge Tags","funnel-builder"),onclick:function(){s(!0)}}),e.on("init",(function(){null==e||e.setContent(v.current),c(v.current)}))}function n(){"complete"===document.readyState&&e()}return h.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",n),function(){document.removeEventListener("readystatechange",n),wp.oldEditor.remove("editor-bwf"+l)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+l,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){c(e.target.value)},onBlur:function(e){c(e.target.value)}}))};function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,a=d(Object(r.useState)("visual"),2),o=a[0],i=(a[1],d(Object(r.useState)(),2)),l=i[0],u=i[1];return Object(r.useEffect)((function(){u(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===o&&Object(r.createElement)(p,e),n&&"text"==o&&Object(r.createElement)(c.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:l,onChange:function(t){null!=e&&e.onChange(t)}}))))}},254:function(e,t,n){"use strict";var r=n(0),a=n(7),o=n.n(a),i=n(2),c=n(9),l=n(41),u=(n(266),n(8));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,a=e.className,b=e.center,p=void 0!==b&&b,d=e.isDismissive,m=void 0!==d&&d,y=e.onDismisal,h=void 0===y?function(){}:y,v=e.isProFeatureLocked;if(Object(i.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:o()("bwf-zero-state",a,{"bwf-block-t-center":p})},m&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return h()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(u.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:o()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(l.a,{className:o()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(l.a,{key:"layout-block-"+t,className:o()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(l.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(l.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),v&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(l.a,{className:o()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(c.Button,f({isPrimary:!0,key:t,onClick:e.onClick,className:"".concat(e.className," bwf-no-ripple")},e.props),!1!==e.proCheck&&v&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:o()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},255:function(e,t,n){},259:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n(0),a=n(17),o=n.n(a),i=["component","children"];function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=Object(r.createContext)(2);function u(e){return Object(r.createElement)(l.Consumer,null,(function(t){var n="h"+Math.min(t,6);return Object(r.createElement)(n,e)}))}function s(e){var t=e.component,n=e.children,a=c(e,i),o=t||"div";return Object(r.createElement)(l.Consumer,null,(function(e){return Object(r.createElement)(l.Provider,{value:e+1},!1===t?n:Object(r.createElement)(o,a,n))}))}s.propTypes={component:o.a.oneOfType([o.a.func,o.a.string,o.a.bool]),children:o.a.node}},261:function(e,t,n){},262:function(e,t,n){"use strict";var r=n(0),a=(n(274),n(8));function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.children,n=e.status,i=void 0===n?"error":n,c=(e.onRemove,e.isDismissible,e.className),l=void 0===c?"":c,u=o(Object(r.useState)(!1),2),s=u[0];u[1];return!s&&Object(r.createElement)("section",{className:"bwf-custom-notice ".concat(i," ").concat(l)},Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start"},Object(r.createElement)(a.a,{icon:"info",color:"success"===i?"#09B29C":"warning"===i?"#FFC65C":"info"===i?"#353030":"#E15334"}),Object(r.createElement)("div",{className:"bwf--align-center"},t)))}},264:function(e,t,n){},266:function(e,t,n){},274:function(e,t,n){},277:function(e,t,n){"use strict";var r=n(0),a=(n(9),n(7)),o=n.n(a),i=n(2),c=n(17),l=n.n(c),u=n(8),s=n(61),f=(n(255),function(e){var t=e.disabled,n=e.value,a=e.onChange,c=e.dateFormat,l=e.label,f=e.describedBy,b=e.error,p=e.onFocus,d=e.onKeyDown,m=e.errorPosition,y=e.placeHolder,h=o()("bwf-calendar-input",{"is-empty":0===n.length,"is-error":b}),v=Object(i.uniqueId)("_woo-dates-input"),O=Object(r.useRef)(null);return Object(r.createElement)("div",{className:h},Object(r.createElement)("input",{type:"text",ref:O,className:"bwf-calendar-input-text",value:n,onChange:a,"aria-label":l,id:v,"aria-describedby":"".concat(v,"-message"),placeholder:Object(i.isEmpty)(y)?c.toLowerCase():y,onFocus:p,onKeyDown:d,disabled:t}),b&&Object(r.createElement)(s.a,{className:"bwf-calendar-input-error",focusOnMount:!1,position:m},b),Object(r.createElement)("span",{className:"bwf-calender-custom-icon",onClick:function(){p(),O.current&&O.current.focus()}},Object(r.createElement)(u.a,{icon:"calender"})),Object(r.createElement)("p",{className:"screen-reader-text",id:"".concat(v,"-message")},b||f))});f.propTypes={disabled:l.a.bool,value:l.a.string,onChange:l.a.func.isRequired,dateFormat:l.a.string.isRequired,label:l.a.string.isRequired,describedBy:l.a.string.isRequired,error:l.a.string,errorPosition:l.a.string,onFocus:l.a.func,onKeyDown:l.a.func},f.defaultProps={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:i.noop},t.a=f},278:function(e,t,n){},282:function(e,t,n){"use strict";var r=n(9),a=n(0),o=n(7),i=n.n(o),c=n(252),l=n(248),u=n(244),s=n(2),f=n(283),b=["ajax_cb","options"];function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var h=n(253),v=["value","onChange","id","label","className"];function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var j=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,o=e.id,c=e.label,l=e.className,u=g(e,v);function s(e){r(e,o)}return Object(a.createElement)("div",{className:i()("components-richeditor",l)},c&&Object(a.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:o},c),Object(a.createElement)(h.a,O({content:n,value:n,setContent:s,onChange:s,keyid:o},u)))},w=n(8),E=function(e){var t=e.label,n=e.copy_text;return Object(a.createElement)("div",{className:i()("components-copier")},t&&Object(a.createElement)("label",{className:"components-label"},t),n&&Object(a.createElement)("div",{className:"bwf-display-flex"},Object(a.createElement)("span",{className:"bwf-copier-text"},n," "),Object(a.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(a.createElement)(w.a,{icon:"duplicate",size:20}),"Copy")))},_=n(245),S=n(250),k=n(1),x=(n(288),n(4));function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e,t){var n;if(Object(s.isObject)(e))return e;if(Object(s.isString)(e)){var r,a=e.split(" ");return R(r={},t.attrTop,Object(s.isEmpty)(a[0])?"0":a[0]),R(r,t.attrRight,Object(s.isEmpty)(a[1])?"0":a[1]),R(r,t.attrBottom,Object(s.isEmpty)(a[2])?"0":a[2]),R(r,t.attrLeft,Object(s.isEmpty)(a[3])?"0":a[3]),r}return R(n={},t.attrTop,"0"),R(n,t.attrRight,"0"),R(n,t.attrBottom,"0"),R(n,t.attrLeft,"0"),n},I=function(e){var t,n=e.value,o=void 0===n?{}:n,c=e.label,l=e.type,u=e.onChange,f=void 0===u?s.noop:u,b=(e.defaultSync,A(o,e)),p="",d=N(Object(a.useState)(!Object(x.h)(Object.values(b))),2),m=d[0],y=d[1],h=N(Object(a.useState)(Object(s.cloneDeep)(Object(s.defaultsDeep)(b,(R(t={},e.attrTop,"0"),R(t,e.attrRight,"0"),R(t,e.attrBottom,"0"),R(t,e.attrLeft,"0"),t)))),2),v=h[0],O=h[1];p=v&&v[e.attrUnit]?v[e.attrUnit]:"px",Object(a.useEffect)((function(){O(C(C({},v),A(o,e)))}),[o]),Object(a.useEffect)((function(){var t;O(Object(s.cloneDeep)(Object(s.defaultsDeep)(b,(R(t={},e.attrTop,"0"),R(t,e.attrRight,"0"),R(t,e.attrBottom,"0"),R(t,e.attrLeft,"0"),t)))),p=v&&v[e.attrUnit]?v[e.attrUnit]:"px"}),[]);var g=function(t,n){var r=t.target.value;if(m)!function(t){"padding"===l&&(t=t.toString().replace(/-/g,""));var n=C({},v);if(n[e.attrTop]=t,n[e.attrRight]=t,n[e.attrBottom]=t,n[e.attrLeft]=t,Object(s.isString)(o)){var r="".concat(n[e.attrTop]," ").concat(n[e.attrRight]," ").concat(n[e.attrBottom]," ").concat(n[e.attrLeft]);f(r)}else f(n)}(r);else{"padding"===l&&(r=r.toString().replace(/-/g,""));var a=C({},v);if(a[n]=r,Object(s.isString)(o)){var i="".concat(a[e.attrTop]," ").concat(a[e.attrRight]," ").concat(a[e.attrBottom]," ").concat(a[e.attrLeft]);f(i)}else f(a)}};return Object(a.createElement)("div",{className:"bwf-dimensions-control-component"},c&&Object(a.createElement)("label",{className:"components-base-control__label"},c),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrTop)},"aria-label":Object(k.sprintf)(Object(k.__)("%s Top","funnel-builder"),c),value:v&&v[e.attrTop],min:"padding"===e.type?0:"%"===p?-100:e.min,max:"%"===p?100:e.max,"data-attribute":l}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrRight)},"aria-label":Object(k.sprintf)(Object(k.__)("%s Top","funnel-builder"),c),value:v&&v[e.attrRight],min:"padding"===e.type?0:"%"===p?-100:e.min,max:"%"===p?100:e.max,"data-attribute":l}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrBottom)},"aria-label":Object(k.sprintf)(Object(k.__)("%s Top","funnel-builder"),c),value:v&&v[e.attrBottom],min:"padding"===e.type?0:"%"===p?-100:e.min,max:"%"===p?100:e.max,"data-attribute":l}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrLeft)},"aria-label":Object(k.sprintf)(Object(k.__)("%s Top","funnel-builder"),c),value:v&&v[e.attrLeft],min:"padding"===e.type?0:"%"===p?-100:e.min,max:"%"===p?100:e.max,"data-attribute":l}),Object(a.createElement)(r.Button,{className:i()("components-bwf-dimensions-control_reset",{"is-lock":m}),label:Object(k.__)("Reset","funnel-builder"),onClick:function(){return y((function(e){return!e}))},isSmall:!0},Object(a.createElement)(w.a,{icon:m?"lock":"unlock",size:"16"}))),Object(a.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))};I.defaultProps={label:Object(k.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(k.__)("Top","funnel-builder"),labelRight:Object(k.__)("Right","funnel-builder"),labelBottom:Object(k.__)("Bottom","funnel-builder"),labelLeft:Object(k.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"};var F=I,D=n(51);n(289);function q(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=[{id:"h-offset",selectindex:0,label:Object(k.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(k.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(k.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(k.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(k.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(k.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],L=function e(t){var n=t.typography,r=t.setTypography,o=t.settingOptions,i=t.label,c=Object(D.useInstanceId)(e,"bwf-field-item");return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-box-shadow-control-component ",id:c},i&&Object(a.createElement)("label",{className:"components-base-control__label"},i),Object(a.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},o.map((function(e){return e.type?"color"===e.type?"":void 0:Object(a.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(a.createElement)("input",{type:"number",value:n[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(t){var a=t.target.value;a=e.hasOwnProperty("allownegative")&&e.allownegative?t.target.value:a<0?0:a;var o=q(n);o[e.selectindex]=a,r(o)}}),Object(a.createElement)("label",{htmlFor:e.id},e.label))})))),Object(a.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"},"",Object(a.createElement)("label",{className:"components-base-control__label"},Object(k.__)("Shadow Color","funnel-builder")),Object(a.createElement)(S.a,{value:n[4],onChange:function(e){var t=q(n);t[4]=e,r(t)}})))},U=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,o=n.h_offset,i=void 0===o?"":o,c=n.v_offset,l=void 0===c?"":c,u=n.blur,s=void 0===u?"":u,f=n.spread,b=void 0===f?"":f,p=n.color,d=void 0===p?"":p,m=n.inset,y=[i,l,s,b,d,void 0===m?"":m];return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(L,{typography:y,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:M,label:r}))};n(290);function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=function(e){var t=e.value,n=e.onChange,o=e.label,i=e.defaultCustomValue,c=K(Object(a.useState)(""),2),l=c[0],f=c[1],b=K(Object(a.useState)(""),2),p=b[0],d=b[1];return Object(a.useEffect)((function(){Object(s.isEmpty)(p)&&(Object(s.isEmpty)(null==t?void 0:t.toString())?(d("auto"),f("100%")):(d("custom"),f(t)))}),[t]),Object(a.createElement)(a.Fragment,null,o&&Object(a.createElement)("label",{className:"components-base-control__label"},o),Object(a.createElement)("div",{className:"bwf-width-control"},Object(a.createElement)(r.TextControl,V({value:l,onChange:function(e){n(e),f(e)},disabled:"auto"===p},"custom"===p&&{type:"number",min:"0"})),Object(a.createElement)(u.a,{options:[{key:"auto",label:Object(k.__)("Auto","funnel-builder")},{key:"custom",label:Object(k.__)("Custom","funnel-builder")}],selected:p,onChange:function(e){d(e),"auto"===e?(n(""),f("100%")):(n(Object(s.isEmpty)(null==t?void 0:t.toString())?i:t),f(i))}})))},Y=n(75),$=["label","tooltip"];function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ee={checkbox:l.a,radio:_.a,select:u.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:c.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,o=y(e,b),i=d(Object(a.useState)(r),2),c=i[0],l=i[1],u=d(Object(a.useState)(!1),2),m=u[0],h=u[1];Object(a.useEffect)((function(){Object(s.isEmpty)(c)&&v()}),[c]);var v=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),l(t),h(!0)}})}))};return Object(a.createElement)(a.Fragment,null,m?Object(a.createElement)(f.a,p({options:c},o)):Object(a.createElement)("div",{className:"setting-form-field"},Object(a.createElement)("div",{className:"is-placeholder long"})))},richeditor:j,richtext:j,copier:E,color:S.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,o=J(e,$);return Object(a.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},Object(a.createElement)("label",null,t),!Object(s.isEmpty)(n)&&Object(a.createElement)(Y.a,{toolTipText:n,size:280,position:"bottom right"},Object(a.createElement)(w.a,{icon:"info",size:16}))),Object(a.createElement)(r.ToggleControl,Z({},o,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":F,"box-shadow":U,"bwf-label":function(e){var t=e.label,n=e.class;return Object(a.createElement)("span",{className:i()("bwf_label",n)},t)},width:z};t.a=function(e){var t=e.input,n=e.formProps,o=e.values,c=e.customMapField,l=void 0===c?{}:c,u=G(G({},ee),l),f=u.text;if(t.type.toLowerCase()in u&&(f=u[t.type.toLowerCase()]),t.ajax_cb&&(f=u.ajax),"select"===t.type&&t.multiple&&!Object(s.isEmpty)(o)){var b=o[t.id];if(Object(s.isEmpty)(b))o[t.id]=[];else if(!Object(s.isEmpty)(t.options)&&"string"==typeof b[0]){var p=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&b.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},p.push(t)}else if("string"==typeof e.value.id&&b.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},p.push(n)}})),o[t.id]=p}}var d,m;return Object(a.createElement)("div",{className:i()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(a.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(a.createElement)(f,G(G({label:t.label},(d=t,m=Object.assign({},d.props),d.type.toLowerCase()in u||(m.type=d.type.toLowerCase()),m.placeholder=d.placeholder,m.options=d.options,d.checkboxlabel&&(m.checkboxlabel=d.checkboxlabel),d.multiple&&(m.multiple=d.multiple),d.ajax_cb&&(m.ajax_cb=d.ajax_cb),"copier"===d.type&&(m=d),"width"===d.type&&(m=d),"color"===d.type&&(m=d,d.isHover&&d.hoverKey&&(m.hoverVal=o[d.hoverKey])),"richeditor"!==d.type&&"richtext"!==d.type&&"textarea"!==d.type||(m=d),"number"===d.type&&(m.min=d.min,m.max=d.max),"select"===d.type&&(m.excludeSelectedOptions=!1,m.options&&(m.options=m.options.map((function(e){return"object"!==Q(e.value)&&(e.key="object"!==Q(e.value)?e.value:e.key,e.value={id:e.value}),e}))),d.multiple&&(m.excludeSelectedOptions=!0,m.inlineTags=!0)),"richeditor"===d.type&&(m.id=d.id),"bwf-toggle"===d.type&&(m.tooltip=d.tooltip),"input"!==d.type&&"text"!==d.type&&"textarea"!==d.type||(m.placeholder=Object(k.__)("Type here","funnel-builder")),"text"===d.type&&d.disabled&&(m.disabled=d.disabled),"toggle"===d.type&&(m.className="bwf-tooglecontrol-advance",m.tooltip=d.tooltip,m.label=d.label),m.keyid=d.key,m)),n)),t.hint&&Object(a.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},283:function(e,t,n){"use strict";var r=n(0),a=n(1),o=n(7),i=n.n(o),c=n(2),l=n(17),u=n.n(l),s=n(9),f=n(51),b=n(56);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,e);var t,n,a,o=h(l);function l(){var e;return d(this,l),(e=o.apply(this,arguments)).handleKeyDown=e.handleKeyDown.bind(O(e)),e.select=e.select.bind(O(e)),e.optionRefs={},e.listbox=Object(r.createRef)(),e}return t=l,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,r=t.selectedIndex;Object(c.isEqual)(n,e.options)||(this.optionRefs={}),r!==e.selectedIndex&&this.scrollToOption(r)}},{key:"getOptionRef",value:function(e){return this.optionRefs.hasOwnProperty(e)||(this.optionRefs[e]=Object(r.createRef)()),this.optionRefs[e]}},{key:"select",value:function(e){var t=this.props.onSelect;e.isDisabled||t(e)}},{key:"scrollToOption",value:function(e){var t=this.listbox.current;if(!(t.scrollHeight<=t.clientHeight)&&this.optionRefs[e]){var n=this.optionRefs[e].current,r=t.clientHeight+t.scrollTop,a=n.offsetTop+n.offsetHeight;a>r?t.scrollTop=a-t.clientHeight:n.offsetTop<t.scrollTop&&(t.scrollTop=n.offsetTop)}}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,a=t.options,o=t.onSearch,i=t.selectedIndex,c=t.setExpanded;if(0!==a.length)switch(e.keyCode){case b.UP:n(),e.preventDefault(),e.stopPropagation();break;case b.DOWN:r(),e.preventDefault(),e.stopPropagation();break;case b.ENTER:this.select(a[i]),e.preventDefault(),e.stopPropagation();break;case b.LEFT:case b.RIGHT:c(!1);break;case b.ESCAPE:return c(!1),void o(null);case b.TAB:this.select(a[i]),c(!1),o(null)}}},{key:"toggleKeyEvents",value:function(e){this.props.node[e?"addEventListener":"removeEventListener"]("keydown",this.handleKeyDown,!0)}},{key:"componentDidMount",value:function(){this.toggleKeyEvents(!0)}},{key:"componentWillUnmount",value:function(){this.toggleKeyEvents(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,a=t.listboxId,o=t.options,c=t.selectedIndex,l=t.staticList,u=i()("bwf-select-control-listbox",{"is-static":l});return Object(r.createElement)("div",{ref:this.listbox,id:a,role:"listbox",className:u,tabIndex:"-1"},o.map((function(t,a){return Object(r.createElement)(s.Button,{ref:e.getOptionRef(a),key:t.key,id:"bwf-select-control-option-".concat(n,"-").concat(t.key),role:"option","aria-selected":a===c,disabled:t.isDisabled,className:i()("bwf-select-control-option",{"is-selected":a===c}),onClick:function(){return e.select(t)},tabIndex:"-1"},t.label)})))}}])&&m(t.prototype,n),a&&m(t,a),l}(r.Component);j.propTypes={instanceId:u.a.number,listboxId:u.a.string,node:u.a.instanceOf(Element).isRequired,onSelect:u.a.func,options:u.a.arrayOf(u.a.shape({isDisabled:u.a.bool,key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,keywords:u.a.arrayOf(u.a.oneOfType([u.a.string,u.a.number])),label:u.a.oneOfType([u.a.string,u.a.object]),value:u.a.any})).isRequired,selectedIndex:u.a.number,staticList:u.a.bool};var w=j,E=n(327);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var a=R(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(l,e);var t,n,o,i=C(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).removeAll=t.removeAll.bind(T(t)),t.removeResult=t.removeResult.bind(T(t)),t}return t=l,(n=[{key:"removeAll",value:function(){(0,this.props.onChange)([])}},{key:"removeResult",value:function(e){var t=this;return function(){var n=t.props,r=n.selected,a=n.onChange,o=Object(c.findIndex)(r,{key:e});a([].concat(S(r.slice(0,o)),S(r.slice(o+1))))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selected,o=t.showClearButton;return n.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-select-control-tags"},n.map((function(t,o){if(!t.label)return null;var i=Object(a.sprintf)(Object(a.__)("%1$s (%2$s of %3$s)","funnel-builder"),t.label,o+1,n.length);return Object(r.createElement)(E.a,{key:t.key,id:t.key,label:t.label,remove:e.removeResult,screenReaderLabel:i})}))),o&&Object(r.createElement)(s.Button,{className:"bwf-select-control-clear",isLink:!0,onClick:this.removeAll},Object(r.createElement)(s.Icon,{icon:"dismiss"}),Object(r.createElement)("span",{className:"screen-reader-text"},Object(a.__)("Clear all","funnel-builder")))):null}}])&&x(t.prototype,n),o&&x(t,o),l}(r.Component);A.propTypes={onChange:u.a.func,onSelect:u.a.func,selected:u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string})),showClearButton:u.a.bool};var I=A,F=n(8);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var a=H(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return V(this,n)}}function V(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(l,e);var t,n,o,c=U(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={isActive:!1},t.input=Object(r.createRef)(),t.updateSearch=t.updateSearch.bind(K(t)),t.onFocus=t.onFocus.bind(K(t)),t.onBlur=t.onBlur.bind(K(t)),t.onKeyDown=t.onKeyDown.bind(K(t)),t}return t=l,(n=[{key:"updateSearch",value:function(e){var t=this;return function(n){t.isBWFMaintainSingleTerm()||e(n.target.value)}}},{key:"onFocus",value:function(e){var t=this,n=this.props,r=n.isSearchable,a=n.setExpanded,o=n.showAllOnFocus,i=n.updateFilteredOptions;return function(n){t.setState({isActive:!0}),r&&o?(n.target.select(),i("")):r?e(n.target.value):a(!0)}}},{key:"onBlur",value:function(){var e=this.props.onBlur;"function"==typeof e&&e(),this.setState({isActive:!1})}},{key:"onKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,a=t.selected,o=t.onChange,i=t.query,c=t.setExpanded;b.BACKSPACE===e.keyCode&&!i&&a.length&&o(q(a.slice(0,-1))),b.DOWN===e.keyCode&&(r(),c(!0),e.preventDefault(),e.stopPropagation()),b.UP===e.keyCode&&(n(),c(!0),e.preventDefault(),e.stopPropagation())}},{key:"renderButton",value:function(){var e=this.props,t=e.multiple,n=e.selected;return t||!n.length?null:Object(r.createElement)("div",{className:"bwf-select-control-control-value"},n[0].label)}},{key:"renderInput",value:function(){var e=this.props,t=e.activeId,n=e.hasTags,a=e.inlineTags,o=e.instanceId,i=e.isExpanded,c=e.isSearchable,l=e.listboxId,u=e.onSearch,s=e.placeholder,f=e.searchInputType,b=this.state.isActive,p=this.isBWFMaintainSingleTerm();return Object(r.createElement)("input",{autoComplete:"off",className:"bwf-select-control-control-input",id:"bwf-select-control-".concat(o,"-control-input"),ref:this.input,type:c?f:"button",value:this.getInputValue(),placeholder:b&&!p?s:"",onChange:this.updateSearch(u),onFocus:this.onFocus(u),onBlur:this.onBlur,onKeyDown:this.onKeyDown,role:"combobox","aria-autocomplete":"list","aria-expanded":i,"aria-haspopup":"true","aria-owns":l,"aria-controls":l,"aria-activedescendant":t,"aria-describedby":n&&a?"search-inline-input-".concat(o):null})}},{key:"isBWFMaintainSingleTerm",value:function(){var e=this.props,t=e.selected;return!!e.bwfMaintainSingleTerm&&t.length>0}},{key:"getInputValue",value:function(){var e=this.props,t=e.isFocused,n=e.isSearchable,r=e.multiple,a=e.query,o=e.selected,i=o.length?o[0].label:"";return r||t?this.isBWFMaintainSingleTerm()?"":n&&t&&a?a:"":i}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.hasTags,c=t.help,l=t.inlineTags,u=t.instanceId,s=t.isSearchable,f=t.label,b=t.query,p=this.state.isActive;return Object(r.createElement)("div",{className:i()("components-base-control","bwf-select-control-control",n,{empty:!b||0===b.length,"is-active":p,"has-tags":l&&o,"with-value":this.getInputValue().length,"has-error":!!c}),onClick:function(){e.input.current.focus()}},s&&Object(r.createElement)(F.a,{icon:"search",size:18}),l&&Object(r.createElement)(I,this.props),Object(r.createElement)("div",{className:"components-base-control__field"},!!f&&Object(r.createElement)("label",{htmlFor:"bwf-select-control-".concat(u,"-control-input"),className:"components-base-control__label"},f),this.renderInput(),l&&Object(r.createElement)("span",{id:"search-inline-input-".concat(u),className:"screen-reader-text"},Object(a.__)("Move backward for selected items","funnel-builder")),!!c&&Object(r.createElement)("p",{id:"bwf-select-control-".concat(u,"__help"),className:"components-base-control__help"},c)))}}])&&M(t.prototype,n),o&&M(t,o),l}(r.Component);z.propTypes={hasTags:u.a.bool,help:u.a.oneOfType([u.a.string,u.a.node]),inlineTags:u.a.bool,isSearchable:u.a.bool,instanceId:u.a.number,label:u.a.string,listboxId:u.a.string,onBlur:u.a.func,onChange:u.a.func,onSearch:u.a.func,placeholder:u.a.string,query:u.a.string,selected:u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string})),showAllOnFocus:u.a.bool,bwfMaintainSingleTerm:u.a.bool};var Y=z;n(343);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function W(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var a=ae(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(u,e);var t,n,o,l=te(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),oe(re(t=l.call(this,e)),"mounted",!0),t.state=Z(Z({},t.constructor.getInitialState()),{},{filteredOptions:[],selectedIndex:0}),t.bindNode=t.bindNode.bind(re(t)),t.decrementSelectedIndex=t.decrementSelectedIndex.bind(re(t)),t.incrementSelectedIndex=t.incrementSelectedIndex.bind(re(t)),t.onAutofillChange=t.onAutofillChange.bind(re(t)),t.updateFilteredOptions=Object(c.debounce)(t.updateFilteredOptions.bind(re(t)),e.searchDebounceTime),t.search=t.search.bind(re(t)),t.selectOption=t.selectOption.bind(re(t)),t.setExpanded=t.setExpanded.bind(re(t)),t}return t=u,o=[{key:"getInitialState",value:function(){return{isExpanded:!1,isFocused:!1,query:""}}}],(n=[{key:"bindNode",value:function(e){this.node=e}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelected(),t=this.props.multiple,n=this.constructor.getInitialState();!t&&e.length&&e[0].label&&(n.query=e[0].label),this.setState(n)}},{key:"handleFocusOutside",value:function(){this.reset()}},{key:"hasTags",value:function(){var e=this.props,t=e.multiple,n=e.selected;return!!t&&n.some((function(e){return Boolean(e.label)}))}},{key:"getSelected",value:function(){var e=this.props,t=e.multiple,n=e.options,r=e.selected;if(t||Array.isArray(r))return r;var a=n.find((function(e){return e.key===r}));return a?[a]:[]}},{key:"selectOption",value:function(e){var t=this.props,n=t.multiple,r=t.onChange,a=t.selected,o=this.state.query,i=n?[].concat(W(a),[e]):[e];this.reset(i),Array.isArray(a)?-1===Object(c.findIndex)(a,{key:e.key})&&r(i,o):a!==e.key&&r(e.key,o)}},{key:"decrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(0===e?t.length:e)-1:t.length-1;this.setState({selectedIndex:n})}},{key:"incrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(e+1)%t.length:0;this.setState({selectedIndex:n})}},{key:"announce",value:function(e){var t=this.props.debouncedSpeak;t&&(e.length?t(Object(a.sprintf)(Object(a._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"funnel-builder"),e.length),"assertive"):t(Object(a.__)("No results.","funnel-builder"),"assertive"))}},{key:"getOptions",value:function(){var e=this.props,t=e.isSearchable,n=e.options,r=this.state.filteredOptions;return t?r:n}},{key:"getFilteredOptions",value:function(e,t){for(var n=this.props,r=n.excludeSelectedOptions,a=n.getSearchExpression,o=n.maxResults,i=n.onFilter,l=this.getSelected().map((function(e){return e.key})),u=[],s=a(Object(c.escapeRegExp)(t?t.trim():"")),f=s?new RegExp(s,"i"):/^$/,b=0;b<e.length;b++){var p=e[b];if(!r||!l.includes(p.key)){var d=p.keywords,m=void 0===d?[]:d;if("string"==typeof p.label&&(m=[].concat(W(m),[p.label])),m.some((function(e){return f.test(e)}))&&(u.push(p),o&&u.length===o))break}}return i(u,t)}},{key:"setExpanded",value:function(e){this.setState({isExpanded:e})}},{key:"search",value:function(e){this.setState({query:e,isFocused:!0}),this.updateFilteredOptions(e)}},{key:"updateFilteredOptions",value:function(e){var t=this,n=this.props,r=n.hideBeforeSearch,a=n.options,o=n.onSearch,i=this.activePromise=Promise.resolve(o(a,e)).then((function(n){if(i===t.activePromise&&t.mounted){var a=null===e||e.length||r?t.getFilteredOptions(n,e):n;t.setState({selectedIndex:0,filteredOptions:a,isExpanded:Boolean(a.length)},(function(){return t.announce(a)}))}}))}},{key:"onAutofillChange",value:function(e){var t=this.props.options,n=this.getFilteredOptions(t,e.target.value);1===n.length&&this.selectOption(n[0])}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.autofill,n=e.children,a=e.className,o=e.controlClassName,c=e.inlineTags,l=e.instanceId,u=e.isSearchable,s=e.options,f=this.state,b=f.isExpanded,p=f.isFocused,d=f.selectedIndex,m=this.hasTags(),y=(s[d]||{}).key,h=void 0===y?"":y,v=b?"bwf-select-control-listbox-".concat(l):null,O=b?"bwf-select-control-option-".concat(l,"-").concat(h):null;return Object(r.createElement)("div",{className:i()("bwf-select-control bwf-select-control-1",a,{"has-inline-tags":m&&c,"is-focused":p,"is-searchable":u}),ref:this.bindNode},t&&Object(r.createElement)("input",{onChange:this.onAutofillChange,name:t,type:"text",className:"bwf-select-control-autofill-input",tabIndex:"-1"}),n,Object(r.createElement)(Y,Q({},this.props,this.state,{activeId:O,className:o,hasTags:m,isExpanded:b,listboxId:v,onSearch:this.search,selected:this.getSelected(),setExpanded:this.setExpanded,updateFilteredOptions:this.updateFilteredOptions,decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm})),!c&&m&&Object(r.createElement)(I,Q({},this.props,{selected:this.getSelected()})),b&&Object(r.createElement)(w,Q({},this.props,this.state,{activeId:O,listboxId:v,node:this.node,onSelect:this.selectOption,onSearch:this.search,options:this.getOptions(),decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,setExpanded:this.setExpanded})))}}])&&J(t.prototype,n),o&&J(t,o),u}(r.Component);ie.propTypes={autofill:u.a.string,children:u.a.node,className:u.a.string,controlClassName:u.a.string,excludeSelectedOptions:u.a.bool,onFilter:u.a.func,getSearchExpression:u.a.func,help:u.a.oneOfType([u.a.string,u.a.node]),inlineTags:u.a.bool,isSearchable:u.a.bool,label:u.a.string,onChange:u.a.func,onSearch:u.a.func,options:u.a.arrayOf(u.a.shape({isDisabled:u.a.bool,key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,keywords:u.a.arrayOf(u.a.oneOfType([u.a.string,u.a.number])),label:u.a.oneOfType([u.a.string,u.a.object]),value:u.a.any})).isRequired,placeholder:u.a.string,searchDebounceTime:u.a.number,selected:u.a.oneOfType([u.a.string,u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string}))]),maxResults:u.a.number,multiple:u.a.bool,showClearButton:u.a.bool,searchInputType:u.a.oneOf(["text","search","number","email","tel","url"]),hideBeforeSearch:u.a.bool,showAllOnFocus:u.a.bool,staticList:u.a.bool,bwfMaintainSingleTerm:u.a.bool},ie.defaultProps={autofill:null,excludeSelectedOptions:!0,getSearchExpression:c.identity,inlineTags:!1,isSearchable:!1,onChange:c.noop,onFilter:c.identity,onSearch:function(e){return Promise.resolve(e)},maxResults:0,multiple:!1,searchDebounceTime:0,searchInputType:"search",selected:[],showAllOnFocus:!1,showClearButton:!1,hideBeforeSearch:!1,staticList:!1,bwfMaintainSingleTerm:!1};t.a=Object(f.compose)([s.withSpokenMessages,f.withInstanceId,s.withFocusOutside])(ie)},284:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(0),a=(n(298),n(299),n(1)),o=n(9),i=n(2),c=n(56),l=n(12),u=n.n(l),s=n(17),f=n.n(s),b=n(78),p=n(7),d=n.n(p),m=(n(255),n(277)),y=n(259),h=n(4),v=n(120);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(s,e);var t,n,o,l=w(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).onDateChange=t.onDateChange.bind(_(t)),t.onInputChange=t.onInputChange.bind(_(t)),t}return t=s,(n=[{key:"handleKeyDown",value:function(e,t,n){var r=n.keyCode;c.TAB===r&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var n=this.props,r=n.onUpdate,a=n.dateFormat,o=u()(t);r({date:o,text:t?o.format(a):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,n=this.props.dateFormat,r=Object(b.i)(n,t),a=r?null:b.b.invalid;this.props.onUpdate({date:r,text:t,error:t.length>0?a:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.date,o=t.disabled,c=t.text,l=t.dateFormat,u=t.error,s=t.isInvalidDate,f=t.placeHolder,b=t.position,p=void 0===b?"bottom center":b,y=t.hasValue,h=void 0!==y&&y,O=t.className;return Object(r.createElement)("div",{className:d()("bwf-specific-date",{"bwf-has-value":h})},Object(r.createElement)(v.a,{position:p,focusOnMount:!1,contentClassName:"bwf-filters-date-content ".concat(O),renderToggle:function(t){var n=t.isOpen,s=t.onToggle;return Object(r.createElement)(m.a,{disabled:!!n&&o,value:c,onChange:e.onInputChange,dateFormat:l,label:Object(a.__)("Choose a date","funnel-builder"),error:u,describedBy:Object(a.sprintf)(Object(a.__)("Date input describing a selected date in format %s","funnel-builder"),l),onFocus:Object(i.partial)(e.handleFocus,n,s),"aria-expanded":n,focusOnMount:!1,onKeyDown:Object(i.partial)(e.handleKeyDown,n,s),errorPosition:"top center",placeHolder:f})},renderContent:function(t){var a=t.onToggle;return Object(r.createElement)(x,{onToggle:a,date:n,isInvalidDate:s,onDateChange:e.onDateChange})}}))}}])&&g(t.prototype,n),o&&g(t,o),s}(r.Component),x=function(e){var t=e.onToggle,n=e.date,a=e.onDateChange,c=e.isInvalidDate,l=Object(r.useRef)();return Object(h.hb)(l,(function(){return t()})),Object(r.createElement)("div",{ref:l},Object(r.createElement)(y.b,{component:!1},Object(r.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(r.createElement)(o.DatePicker,{currentDate:n,onChange:Object(i.partial)(a,t),isInvalidDate:c}))))};k.propTypes={date:f.a.oneOfType([f.a.string,f.a.object]),disabled:f.a.bool,text:f.a.string,error:f.a.string,onUpdate:f.a.func.isRequired,dateFormat:f.a.string.isRequired,isInvalidDate:f.a.func},t.b=k},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=c(n(3)),o=c(n(360)),i=c(n(363));function c(e){return e&&e.__esModule?e:{default:e}}var l=void 0;function u(e,t){var n,i,c,s,f,b,p,d,m=[],y={};for(b=0;b<e.length;b++)if("string"!==(f=e[b]).type){if(!t.hasOwnProperty(f.value)||void 0===t[f.value])throw new Error("Invalid interpolation, missing component node: `"+f.value+"`");if("object"!==r(t[f.value]))throw new Error("Invalid interpolation, component node must be a ReactElement or null: `"+f.value+"`","\n> "+l);if("componentClose"===f.type)throw new Error("Missing opening component token: `"+f.value+"`");if("componentOpen"===f.type){n=t[f.value],c=b;break}m.push(t[f.value])}else m.push(f.value);return n&&(s=function(e,t){var n,r,a=t[e],o=0;for(r=e+1;r<t.length;r++)if((n=t[r]).value===a.value){if("componentOpen"===n.type){o++;continue}if("componentClose"===n.type){if(0===o)return r;o--}}throw new Error("Missing closing component token `"+a.value+"`")}(c,e),p=u(e.slice(c+1,s),t),i=a.default.cloneElement(n,{},p),m.push(i),s<e.length-1&&(d=u(e.slice(s+1),t),m=m.concat(d))),1===m.length?m[0]:(m.forEach((function(e,t){e&&(y["interpolation-child-"+t]=e)})),(0,o.default)(y))}t.default=function(e){var t=e.mixedString,n=e.components,a=e.throwErrors;if(l=t,!n)return t;if("object"!==(void 0===n?"undefined":r(n))){if(a)throw new Error("Interpolation Error: unable to process `"+t+"` because components is not an object");return t}var o=(0,i.default)(t);try{return u(o,n)}catch(e){if(a)throw new Error("Interpolation Error: unable to process `"+t+"` because of error `"+e.message+"`");return t}}},297:function(e,t,n){"use strict";var r=n(0),a=n(1),o=n(7),i=n.n(o),c=n(2),l=n(17),u=n.n(l),s=n(323),f=n(108),b=n(79),p=function(e){var t=e.children;return Object(r.createElement)("div",{className:"bwf-ellipsis-menu__title"},t)};p.propTypes={children:u.a.node};var d=p,m=n(336),y=n(303),h=n(353),v=function(e){var t=e.data;return Object(r.createElement)("ul",{className:"bwf-table-summary bwf-display-flex"},t.map((function(e,t){var n=e.label,a=e.value;return Object(r.createElement)("li",{className:"bwf-table-summary-item",key:t},Object(r.createElement)("span",{className:"bwf-table-summary-value"},a),Object(r.createElement)("span",{className:"bwf-table-summary-label"},n))})))};v.propTypes={data:u.a.array};var O=v;n(357);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var a=P(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(u,e);var t,n,o,l=S(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=(t=l.call(this,e)).getShowCols(e.headers);return t.state={showCols:n},t.onColumnToggle=t.onColumnToggle.bind(x(t)),t.onPageChange=t.onPageChange.bind(x(t)),t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){var t=e.headers,n=e.query,r=this.props,a=r.headers,o=r.onColumnsChange,i=r.query,l=this.state.showCols;if(Object(c.isEqual)(a,t)||this.setState({showCols:this.getShowCols(a)}),i.orderby!==n.orderby&&!l.includes(i.orderby)){var u=l.concat(i.orderby);this.setState({showCols:u}),o(u)}}},{key:"getShowCols",value:function(e){return e.map((function(e){var t=e.key,n=e.visible;return!(void 0!==n&&!n)&&t})).filter(Boolean)}},{key:"getVisibleHeaders",value:function(){var e=this.props.headers,t=this.state.showCols;return e.filter((function(e){var n=e.key;return t.includes(n)}))}},{key:"getVisibleRows",value:function(){var e=this.props,t=e.headers,n=e.rows,r=this.state.showCols;return n.map((function(e){return t.map((function(t,n){var a=t.key;return r.includes(a)&&e[n]})).filter(Boolean)}))}},{key:"onColumnToggle",value:function(e){var t=this,n=this.props,r=n.headers,a=n.query,o=n.onQueryChange,i=n.onColumnsChange;return function(){t.setState((function(t){if(t.showCols.includes(e)){if(a.orderby===e){var n=Object(c.find)(r,{defaultSort:!0})||Object(c.first)(r)||{};o("sort")(n.key,"desc")}var l=Object(c.without)(t.showCols,e);return i(l,e),{showCols:l}}var u=[].concat(j(t.showCols),[e]);return i(u,e),{showCols:u}}))}}},{key:"onPageChange",value:function(){var e=this.props,t=e.onPageChange,n=e.onQueryChange;t&&t.apply(void 0,arguments),n&&n("paged").apply(void 0,arguments)}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,o=t.className,c=t.isLoading,l=t.onQueryChange,u=t.onSort,p=t.query,v=t.rowHeader,g=t.rowsPerPage,j=t.showMenu,w=t.summary,E=t.title,_=t.totalRows,S=t.rowClasses,k=t.emptyMessage,x=t.filterColumnIcon,P=void 0===x?"":x,C=t.extraSectionBeforefilterCol,N=t.hideHeader,T=t.footer,R=t.showPagination,A=void 0===R||R,I=this.state.showCols,F=this.props.headers,D=this.getVisibleHeaders(),q=this.getVisibleRows(),B=i()("bwf-table","bwf-analytics-card",o,{"bwf-table-placeholder":c});return Object(r.createElement)(s.a,{className:B,title:E,action:n,hideHeader:N&&"yes"==N?"yes":"no",footer:T,menu:!(!C&&!j)&&Object(r.createElement)("div",null,C,j&&Object(r.createElement)(f.a,{label:Object(a.__)("Choose which values to display","funnel-builder"),buttonIcon:P,renderContent:function(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d,null,Object(a.__)("Columns:","funnel-builder")),F.map((function(t){var n=t.key,a=t.label;return t.required?null:Object(r.createElement)(b.a,{checked:I.includes(n),isCheckbox:!0,isClickable:!0,key:n,onInvoke:e.onColumnToggle(n)},a)})))}})),belowHeader:!!this.props.beforeTable&&this.props.beforeTable},c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},Object(a.__)("Your requested data is loading","funnel-builder")),Object(r.createElement)(h.a,{numberOfRows:g,headers:D,rowHeader:v,caption:E,query:p})):Object(r.createElement)(y.a,{rows:q,headers:D,rowHeader:v,caption:E,query:p,emptyMessage:k,onSort:u||l("sort"),rowClasses:S}),A&&!c&&Object(r.createElement)(m.a,{key:parseInt(p.paged,10)||1,page:parseInt(p.paged,10)||1,perPage:g,total:_,onPageChange:this.onPageChange,onPerPageChange:l("per_page")}),w&&Object(r.createElement)(O,{data:w}))}}])&&E(t.prototype,n),o&&E(t,o),u}(r.Component);C.propTypes={headers:u.a.arrayOf(u.a.shape({hiddenByDefault:u.a.bool,defaultSort:u.a.bool,isSortable:u.a.bool,key:u.a.string,label:u.a.oneOfType([u.a.string,u.a.node]),required:u.a.bool})),ids:u.a.arrayOf(u.a.number),isLoading:u.a.bool,onQueryChange:u.a.func,onColumnsChange:u.a.func,onSort:u.a.func,query:u.a.object,rowHeader:u.a.oneOfType([u.a.number,u.a.bool]),rows:u.a.arrayOf(u.a.arrayOf(u.a.shape({display:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number,u.a.bool])}))).isRequired,rowsPerPage:u.a.number.isRequired,showMenu:u.a.bool,summary:u.a.arrayOf(u.a.shape({label:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number])})),totalRows:u.a.number.isRequired,rowClasses:u.a.arrayOf(u.a.string),showPagination:u.a.bool},C.defaultProps={isLoading:!1,onQueryChange:function(){return function(){}},onColumnsChange:function(){},onSort:void 0,query:{},rowHeader:0,rows:[],showMenu:!0,rowClasses:[],showPagination:!0};t.a=C},303:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(7),i=n.n(o),c=n(17),l=n.n(c),u=n(1),s=n(9),f=n(51),b=n(547),p=n(548),d=n(549),m=n(8),y=n(26);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(l,e);var t,n,o,c=j(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={tabIndex:null,isScrollableRight:!1,isScrollableLeft:!1},t.container=Object(r.createRef)(),t.sortBy=t.sortBy.bind(E(t)),t.updateTableShadow=t.updateTableShadow.bind(E(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.container.current,t=e.scrollWidth>e.clientWidth;this.setState({tabIndex:t?"0":null}),this.updateTableShadow(),window.addEventListener("resize",this.updateTableShadow)}},{key:"componentDidUpdate",value:function(){this.updateTableShadow()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateTableShadow)}},{key:"sortBy",value:function(e){var t=this,n=this.props,r=n.headers,o=n.query;return function(){var n=o.orderby||Object(a.get)(Object(a.find)(r,{defaultSort:!0}),"key",!1),i=o.order||Object(a.get)(Object(a.find)(r,{key:n}),"defaultOrder","desc"),c="desc";e===n&&(c="desc"===i?"asc":"desc"),t.props.onSort(e,c)}}},{key:"updateTableShadow",value:function(){var e=this.container.current,t=this.state,n=t.isScrollableRight,r=t.isScrollableLeft,a=e.scrollWidth-e.scrollLeft<=e.offsetWidth;a&&n?this.setState({isScrollableRight:!1}):a||this.state.isScrollableRight||this.setState({isScrollableRight:!0});var o=e.scrollLeft<=0;o&&r?this.setState({isScrollableLeft:!1}):o||r||this.setState({isScrollableLeft:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.ariaHidden,o=t.caption,c=t.classNames,l=t.headers,f=t.instanceId,h=t.query,O=t.rowHeader,g=t.rows,j=t.rowClasses,w=t.emptyMessage,E=this.state,_=E.isScrollableRight,S=E.isScrollableLeft,k=E.tabIndex,x=i()("bwf-table-table",c,{"is-scrollable-right":_,"is-scrollable-left":S,"is-empty-data":!N}),P=h.orderby||Object(a.get)(Object(a.find)(l,{defaultSort:!0}),"key",!1),C=h.order||Object(a.get)(Object(a.find)(l,{key:P}),"defaultOrder","desc"),N=!!g.length;return Object(r.createElement)("div",{className:x,ref:this.container,tabIndex:k,"aria-hidden":n,"aria-labelledby":"caption-".concat(f),role:"group",onScroll:this.updateTableShadow},Object(r.createElement)("table",{width:"100%"},Object(r.createElement)("caption",{id:"caption-".concat(f),className:"bwf-table-caption screen-reader-text"},o,"0"===k&&Object(r.createElement)("small",null,Object(u.__)("(scroll to see more)","funnel-builder"))),Object(r.createElement)("tbody",null,Object(r.createElement)("tr",null,l.map((function(t,n){var o=t.cellClassName,c=t.isSortable,l=t.isNumeric,m=t.key,h=t.label,O=t.screenReaderLabel,g=t.isPro,j="header-".concat(f,"-").concat(n),w={className:i()("bwf-table-header",o,{"is-sortable":c,"is-sorted":P===m,"is-numeric":l})};c&&(w["aria-sort"]="none",P===m&&(w["aria-sort"]="asc"===C?"ascending":"descending"));var E=P===m&&"asc"!==C?Object(u.sprintf)(Object(u.__)("Sort by %s in ascending order","funnel-builder"),O):Object(u.sprintf)(Object(u.__)("Sort by %s in descending order","funnel-builder"),O),_=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{"aria-hidden":Boolean(O)},h),g&&Object(r.createElement)(y.a,null),O&&Object(r.createElement)("span",{className:"screen-reader-text"},O));return Object(r.createElement)("th",v({role:"columnheader",scope:"col",key:n},w),c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Button,{"aria-describedby":j,onClick:N?e.sortBy(m):a.noop},_,P===m&&"asc"===C?Object(r.createElement)(b.a,{icon:p.a}):Object(r.createElement)(b.a,{icon:d.a})),Object(r.createElement)("span",{className:"screen-reader-text",id:j},E)):_)}))),N?g.map((function(e,t){return Object(r.createElement)("tr",{key:t,className:j[t]},e.map((function(e,t){var a=l[t],o=a.cellClassName,c=(a.isLeftAligned,a.isNumeric),u=a.isPro,s=O===t,f=s?"th":"td",b=i()("bwf-table-item",o,{"is-conversion":"conversion"===l[t].key,"is-numeric":c,"is-sorted":P===l[t].key});return Object(r.createElement)(f,{scope:s?"row":null,key:t,className:b},u&&!n?"-":function(e){return e.display||null}(e))})))})):Object(r.createElement)("tr",{className:"bwf-table-empty"},Object(r.createElement)("td",{className:"bwf-table-empty-item",colSpan:l.length},Object(r.createElement)(m.a,{icon:"no-data",height:"82",width:"112"}),Object(r.createElement)("div",{className:"bwf-no-data"},Object(u.__)("No Data Available","funnel-builder")),w?Object(r.createElement)("div",{className:"bwf-info"},w):null)))))}}])&&O(t.prototype,n),o&&O(t,o),l}(r.Component);S.propTypes={ariaHidden:l.a.bool,className:l.a.string,headers:l.a.arrayOf(l.a.shape({defaultSort:l.a.bool,defaultOrder:l.a.string,isLeftAligned:l.a.bool,isNumeric:l.a.bool,isSortable:l.a.bool,key:l.a.string,label:l.a.node,required:l.a.bool,screenReaderLabel:l.a.string})),onSort:l.a.func,query:l.a.object,rows:l.a.arrayOf(l.a.arrayOf(l.a.shape({display:l.a.node,value:l.a.oneOfType([l.a.string,l.a.number,l.a.bool])}))).isRequired,rowHeader:l.a.oneOfType([l.a.number,l.a.bool]),rowClasses:l.a.arrayOf(l.a.string)},S.defaultProps={ariaHidden:!1,headers:[],onSort:a.noop,query:{},rowHeader:0,rowClasses:[]},t.a=Object(f.withInstanceId)(S)},305:function(e,t,n){"use strict";function r(e){return function(){return e}}var a=function(){};a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},e.exports=a},316:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(1),i=n(9),c=n(300),l=n(20),u=n(245),s=n(262),f=n(21);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=e.requestCreateStep,p=e.onRequestClose,d=e.onCreationScreen,m=e.creationSuccess,y=e.clearAndCloseEverything,h=e.isBusy,v=e.errors,O=Object(f.a)().isProFeatureLocked,g=b(Object(r.useState)(""),2),j=g[0],w=g[1],E=b(Object(r.useState)(""),2),_=E[0],S=E[1],k=b(Object(r.useState)(null),2),x=k[0],P=k[1],C=b(Object(r.useState)(null!=v?v:{}),2),N=C[0],T=C[1],R=b(Object(r.useState)("new"),2),A=R[0],I=R[1],F=b(Object(r.useState)(!1),2),D=F[0],q=F[1];Object(r.useEffect)((function(){T(v)}),[v]),Object(r.useEffect)((function(){var e;S(null==x||null===(e=x.step)||void 0===e?void 0:e.name),"new"===A&&Object(a.isEmpty)(j.trim())||"existing"===A&&Object(a.isEmpty)(_)?q(!0):q(!1)}),[A,x,j,_]);var B=function(){if(!D){var t=e.errors;x&&x.copyFrom&&!x.step&&(t.copyFrom=Object(o.__)("Copy From: This field is required","funnel-builder")),0===Object(a.size)(t)?n({copyFrom:x&&x.hasOwnProperty("step")?x.step:null,title:"existing"===A?"".concat(_," Copy"):j}):T(t)}};return Object(r.createElement)(r.Fragment,null,N&&Object(a.size)(N)>0&&Object(r.createElement)(s.a,{status:"error",isDismissible:!0,onRemove:function(){return T({})}},Object(r.createElement)("ul",{className:"bwf-m-0"},Object.keys(N).map((function(e){return Object(r.createElement)("li",{className:"bwf-m-0",key:e},N[e])})))),h||!d||m?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("form",{method:"post",action:"",className:"bwf-funnel-add-step",onSubmit:function(e){B(),e.preventDefault()}},Object(r.createElement)(u.a,{options:[{value:"new",label:Object(o.__)("Create New","funnel-builder")},{value:"existing",label:Object(o.__)("Clone Existing","funnel-builder"),isPro:O}],selected:A,onChange:function(e){I(e)},className:"bwf-add-bump_radio-items"}),"new"===A?Object(r.createElement)(i.TextControl,{label:Object(o.__)("Name","funnel-builder"),placeholder:Object(o.__)("Enter Name","funnel-builder"),value:j,onChange:function(e){return w(e)}}):null,"existing"===A?Object(r.createElement)(c.a,{step:t,onStepSelected:function(e){return P(e)},showCheckbox:!1}):null,Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(l.a,{className:"bwf-modal-cancel-btn",onClick:p},Object(o.__)("Cancel","funnel-builder")),Object(r.createElement)(l.a,{isPrimary:!0,onClick:B,disabled:D,isBusy:h,className:D?"bwf-no-ripple":""},Object(o.__)("Add","funnel-builder"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{marginTop:"-16px"}},Object(o.__)("Something went wrong, Pleas contact to support team","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(l.a,{isPrimary:!0,onClick:function(){p(),y()}},Object(o.__)("OK","funnel-builder")))))}},317:function(e,t,n){"use strict";var r=n(0),a=n(9),o=n(1),i=n(4),c=n(7),l=n.n(c),u=n(8),s=n(13),f=n.n(s),b=n(344),p=n(80);function d(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isOpen,n=e.onRequestClose,c=m(Object(r.useState)({default_css:"",skin_all:{}}),2),s=c[0],y=c[1],h=m(Object(r.useState)(!0),2),v=h[0],O=h[1];return Object(r.useEffect)((function(){f()({path:Object(i.q)("/funnel-bump/skins/preview/")}).then((function(e){e.success&&y({skin_all:e.skin_all,default_css:e.default_css}),O(!1)})).catch((function(e){O(!1),console.log(e)}))}),[]),t&&Object(r.createElement)("div",{className:"bwf-order-bum-pro-modal"},Object(r.createElement)(a.Modal,{className:"bwf-admin-modal bwf-ob-pro-modal bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()}},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-modal-custom-header"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-modal-title"},Object(o.__)("Order Bump Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(p.a,{isPrimary:!0,proLink:Object(i.K)(["Order","Bump","Template","Modal"])}),Object(r.createElement)("button",{className:"bwf-no-style-button",onClick:n},Object(r.createElement)(u.a,{icon:"cross",size:"24"})))),Object(r.createElement)("div",{className:l()("bwf-ob-pro-modal-content",{"is-placeholder":v}),style:{paddingTop:"1px"}},v?Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap"},d(new Array(8)).map((function(e,t){return Object(r.createElement)(b.a,{index:t,key:"ob-place-".concat(t)})}))):Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap",id:"wfob_wrap"},Object(r.createElement)("style",null,s.default_css),Object.keys(s.skin_all).map((function(e){var t=s.skin_all[e];return Object(r.createElement)("div",{className:"bwf_bump_skin_preview",key:e},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.dynamic_inline_css}}),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.html}}))}))," "))))}},323:function(e,t,n){"use strict";var r=n(0),a=n(7),o=n.n(a),i=n(17),c=n.n(i),l=(n(108),n(259));n(356);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(c,e);var t,n,a,i=p(c);function c(){return s(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.action,n=e.children,a=e.description,i=e.isInactive,c=e.menu,u=e.title,s=e.hideHeader,f=e.footer,b=o()("bwf-card",this.props.className,{"has-menu":!!c,"has-action":!!t,"is-inactive":!!i});return Object(r.createElement)("div",{className:b},s&&"no"==s&&(!!u||t||c)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-card-header"},!!u&&Object(r.createElement)("div",{className:"bwf-card-title-wrapper"},Object(r.createElement)("div",{className:"bwf-card-title bwf-card-header-item"},u),a&&Object(r.createElement)("div",{className:"bwf-card-description bwf-card-header-item"},a)),t&&Object(r.createElement)("div",{className:"bwf-card-action bwf-card-header-item"},t),c&&Object(r.createElement)("div",{className:"bwf-card-menu bwf-card-header-item"},c))),Object(r.createElement)(l.b,{className:"bwf-card-body"},n),f&&Object(r.createElement)("div",{className:"bwf-card-footer"},f))}}])&&f(t.prototype,n),a&&f(t,a),c}(r.Component);y.propTypes={action:c.a.node,className:c.a.string,description:c.a.oneOfType([c.a.string,c.a.node]),isInactive:c.a.bool,title:c.a.oneOfType([c.a.string,c.a.node])};t.a=y},335:function(e,t,n){"use strict";var r=n(1);t.a={calendarLabel:Object(r.__)("Calendar","funnel-builder"),closeDatePicker:Object(r.__)("Close","funnel-builder"),focusStartDate:Object(r.__)("Interact with the calendar and select start and end dates.","funnel-builder"),clearDate:Object(r.__)("Clear Date","funnel-builder"),clearDates:Object(r.__)("Clear Dates","funnel-builder"),jumpToPrevMonth:Object(r.__)("Move backward to switch to the previous month.","funnel-builder"),jumpToNextMonth:Object(r.__)("Move forward to switch to the next month.","funnel-builder"),enterKey:Object(r.__)("Enter key","funnel-builder"),leftArrowRightArrow:Object(r.__)("Right and left arrow keys","funnel-builder"),upArrowDownArrow:Object(r.__)("up and down arrow keys","funnel-builder"),pageUpPageDown:Object(r.__)("page up and page down keys","funnel-builder"),homeEnd:Object(r.__)("Home and end keys","funnel-builder"),escape:Object(r.__)("Escape key","funnel-builder"),questionMark:Object(r.__)("Question mark","funnel-builder"),selectFocusedDate:Object(r.__)("Select the date in focus.","funnel-builder"),moveFocusByOneDay:Object(r.__)("Move backward (left) and forward (right) by one day.","funnel-builder"),moveFocusByOneWeek:Object(r.__)("Move backward (up) and forward (down) by one week.","funnel-builder"),moveFocusByOneMonth:Object(r.__)("Switch months.","funnel-builder"),moveFocustoStartAndEndOfWeek:Object(r.__)("Go to the first or last day of a week.","funnel-builder"),returnFocusToInput:Object(r.__)("Return to the date input field.","funnel-builder"),keyboardNavigationInstructions:Object(r.__)("Press the down arrow key to interact with the calendar and select a date.","funnel-builder"),chooseAvailableStartDate:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Select %s as a start date.","funnel-builder"),t)},chooseAvailableEndDate:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Select %s as an end date.","funnel-builder"),t)},chooseAvailableDate:function(e){return e.date},dateIsUnavailable:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("%s is not selectable.","funnel-builder"),t)},dateIsSelected:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Selected. %s","funnel-builder"),t)}}},336:function(e,t,n){"use strict";var r=n(0),a=n(1),o=n(9),i=n(7),c=n.n(i),l=n(17),u=n.n(l),s=n(2),f=(n(337),n(8)),b=n(244);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=[10,25,50,75,100],j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,i,l=y(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={inputValue:t.props.page},t.previousPage=t.previousPage.bind(v(t)),t.nextPage=t.nextPage.bind(v(t)),t.onInputChange=t.onInputChange.bind(v(t)),t.onInputBlur=t.onInputBlur.bind(v(t)),t.perPageChange=t.perPageChange.bind(v(t)),t.selectInputValue=t.selectInputValue.bind(v(t)),t}return t=u,(n=[{key:"previousPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n-1<1||r(n-1,"previous")}},{key:"nextPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n+1>this.pageCount||r(n+1,"next")}},{key:"perPageChange",value:function(e){var t=this.props,n=t.onPerPageChange,r=t.onPageChange,a=t.total,o=t.page;n(parseInt(e,10));var i=Math.ceil(a/parseInt(e,10));o>i&&r(i)}},{key:"onInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"onInputBlur",value:function(e){var t=this.props,n=t.onPageChange,r=t.page,a=parseInt(e.target.value,10);a!==r&&Number.isFinite(a)&&a>0&&this.pageCount&&this.pageCount>=a&&n(a,"goto")}},{key:"selectInputValue",value:function(e){e.target.select()}},{key:"renderPageArrows",value:function(){var e=this.props,t=e.page,n=e.showPageArrowsLabel;if(this.pageCount<=1)return null;var i=c()("bwf-pagination-link",{"is-active":t>1}),l=c()("bwf-pagination-link",{"is-active":t<this.pageCount});return Object(r.createElement)("div",{className:"bwf-pagination-page-arrows"},n&&Object(r.createElement)("span",{className:"bwf-pagination-page-arrows-label",role:"status","aria-live":"polite"},Object(a.sprintf)(Object(a.__)("Page %d of %d","funnel-builder"),t,this.pageCount)),Object(r.createElement)("div",{className:"bwf-pagination-page-arrows-buttons"},Object(r.createElement)(o.Button,{className:i,disabled:!(t>1),onClick:this.previousPage,label:Object(a.__)("Previous Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-left",width:16})),Object(r.createElement)(o.Button,{className:l,disabled:!(t<this.pageCount),onClick:this.nextPage,label:Object(a.__)("Next Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-right",width:16,color:"#0073AA"}))))}},{key:"renderPerPagePicker",value:function(){var e,t=g.map((function(e){return{key:e.toString(),label:e.toString()}}));return Object(r.createElement)("div",{className:"bwf-pagination-per-page-picker"},Object(r.createElement)(b.b,{selected:null===(e=this.props.perPage)||void 0===e?void 0:e.toString(),onChange:this.perPageChange,options:t,labelPosition:"side"}),Object(r.createElement)("label",{className:"bwf-pagination-per-page-picker__label"},Object(a.__)("Per Page","funnel-builder")))}},{key:"render",value:function(){var e=this.props,t=e.total,n=e.perPage,a=e.className,o=e.showPerPagePicker;this.pageCount=Math.ceil(t/n);var i=c()("bwf-pagination",a);return this.pageCount<=1?t>g[0]&&Object(r.createElement)("div",{className:i},this.renderPerPagePicker())||null:Object(r.createElement)("div",{className:i},this.renderPageArrows(),o&&this.renderPerPagePicker())}}])&&d(t.prototype,n),i&&d(t,i),u}(r.Component);j.propTypes={page:u.a.number.isRequired,onPageChange:u.a.func,perPage:u.a.number.isRequired,onPerPageChange:u.a.func,total:u.a.number.isRequired,className:u.a.string,showPagePicker:u.a.bool,showPerPagePicker:u.a.bool,showPageArrowsLabel:u.a.bool},j.defaultProps={onPageChange:s.noop,onPerPageChange:s.noop,showPagePicker:!1,showPerPagePicker:!0,showPageArrowsLabel:!0},t.a=j},337:function(e,t,n){},343:function(e,t,n){},344:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m}));var r=n(0),a=n(282),o=n(4),i=n(2),c=n(371),l=n(7),u=n.n(l),s={image:c.a},f=function(e,t,n,o){return e.map((function(e,c){return"richeditor"===e.type&&(e.openMergeTagModal=o,e.id="richeditor-".concat(c),e.toolbar="bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",e.quicktags=!0),Object(r.createElement)(r.Fragment,{key:c},(Object(i.isEmpty)(e.toggler)||b(t,e.toggler,e))&&Object(r.createElement)(a.a,{input:e,formProps:n(e.key),values:t,customMapField:s}))}))},b=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var a=0;a<r.length;a++)if(t.value.indexOf(r[a])>-1){n=!0;break}}else Object(o.r)(r)==Object(o.r)(t.value)&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n},p=function(e,t){if(e.selectors&&e.stylekey&&!Object(i.isEmpty)(e.value)){var n,r=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,a="".concat(e.stylekey,":").concat(e.value).concat(null!==(n=null==e?void 0:e.styleUnit)&&void 0!==n?n:"",";");-1!==t.search("".concat(r,"{"))?t=t.replace("".concat(r,"{"),"".concat(r,"{").concat(a)):t+="".concat(r,"{").concat(a,"}")}return t},d=function(e){return new Promise((function(t,n){var r="";e.forEach((function(e){switch(e.type){case"text":if(e.selectors){var t=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(t).html(e.value)}break;case"richtext":case"richeditor":case"textarea":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(n).html(e.value)}break;case"label":break;case"toggle":case"checkbox":if(e.selectors){var a=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;1==e.value||"true"==e.value?e.contentClass?jQuery(a).addClass(e.contentClass):jQuery(a).show():e.contentClass?jQuery(a).removeClass(e.contentClass):jQuery(a).hide()}break;case"select":if(e.selectors){var o=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;e.value&&Object(i.isArray)(e.allClasses)?(jQuery(o).removeClass(e.allClasses),jQuery(o).addClass(e.value)):r=p(e,r)}break;case"color":if(e.selectors){var c=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,l="".concat(e.stylekey,":").concat(e.value,";");r+="".concat(c,"{").concat(l,"}")}if(e.isHover&&e.hoverSelectors){var u=Array.isArray(e.hoverSelectors)?e.hoverSelectors.toString():e.hoverSelectors,s="".concat(e.stylekey,":").concat(e.hoverVal,";");r+="".concat(u,"{").concat(s,"}")}break;case"dimension-control":if(e.selectors){var f=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,b="".concat(e.stylekey,":").concat(e.value.toString().replace(/ /g,"px ")).concat(null==e?void 0:e.styleUnit,";");r+="".concat(f,"{").concat(b,"}"),r+="".concat(f,"{").concat(b,"}")}break;case"box-shadow":if(e.selectors){var d=e.value,m=d.h_offset,y=d.v_offset,h=d.blur,v=d.spread,O=d.color,g=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(!(Object(i.isEmpty)(m)||Object(i.isEmpty)(y)||Object(i.isEmpty)(h)||Object(i.isEmpty)(v)||Object(i.isEmpty)(O))){var j="".concat(e.stylekey,":").concat(m,"px ").concat(y,"px ").concat(h,"px ").concat(v,"px ").concat(O,";");r+="".concat(g,"{").concat(j,"}")}}break;case"image":if(e.selectors){var w,E,_,S,k,x,P=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type||"custom"===e.value.type&&Object(i.isEmpty)(null==e||null===(w=e.value)||void 0===w?void 0:w.custom_url))if(jQuery(P+" img").length)jQuery(P+" img").attr("src",null==e||null===(k=e.value)||void 0===k?void 0:k.image_url);else jQuery(P).find("svg").remove(),jQuery(P).append('<img src="'+(null==e||null===(x=e.value)||void 0===x?void 0:x.image_url)+'" alt="order bump" />');else if(Object(i.isEmpty)(null==e||null===(E=e.value)||void 0===E?void 0:E.custom_url))jQuery(P+" img").attr("src","").attr("srcset","");else{var C,N;if(jQuery(P+" img").length)jQuery(P+" img").attr("src",null==e||null===(C=e.value)||void 0===C?void 0:C.custom_url).attr("srcset","");else jQuery(P).find("svg").remove(),jQuery(P).append('<img src="'+(null==e||null===(N=e.value)||void 0===N?void 0:N.custom_url)+'" alt="order bump" />').attr("srcset","")}if(e.alignmentSelectors){var T,R,A=Array.isArray(e.alignmentSelectors)?e.alignmentSelectors.toString():e.alignmentSelectors,I=null!==(T=null==e||null===(R=e.value)||void 0===R?void 0:R.position)&&void 0!==T?T:"left";if(null!=e&&e.alignmentClassList){var F=Object.values(null==e?void 0:e.alignmentClassList),D=null==e?void 0:e.alignmentClassList[I];jQuery(A).removeClass(F).addClass(D)}}var q=null!==(_=null==e||null===(S=e.value)||void 0===S?void 0:S.width)&&void 0!==_?_:"100";q&&(r+="".concat(P,"{max-width: ").concat(q,"px;}"))}break;default:r=p(e,r)}})),t(r)}))},m=function(e){var t=e.index,n=void 0===t?0:t;return Object(r.createElement)("div",{className:u()("bwf-p-20 bwf-border-1 bwf-rounded-6",{"bwf-mt-16":0!==n||1!==n})},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-100 "}),Object(r.createElement)("div",{className:"bwf-flex bwf--column bwf--align-start",style:{width:"100%"}},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15 bwf-mb-10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-12 bwf-mb-5"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-mt-20"})))}},345:function(e,t,n){"use strict";var r=n(0),a=n(9),o=n(37),i=n(17),c=n.n(i),l=n(7),u=n.n(l),s=(n(364),n(8)),f=["labels","isOpen","showIcon","hasValue"];function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=function(e){var t=e.labels,n=e.isOpen,i=e.showIcon,c=e.hasValue,l=p(e,f),d=u()("bwf-dropdown-button",{"is-open":n,"is-multi-line":t.length>1,"has-value":c});return Object(r.createElement)(a.Button,b({className:d,"aria-expanded":n},l),Object(r.createElement)("div",{className:"bwf-dropdown-button-labels"},t.map((function(e,t){return Object(r.createElement)("span",{key:t},Object(o.decodeEntities)(e))})),i&&Object(r.createElement)(s.a,{icon:"calender"})))};d.propTypes={labels:c.a.array.isRequired,isOpen:c.a.bool},t.a=d},353:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(17),i=n.n(o),c=n(303);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=["numberOfRows"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,e);var t,n,o,i=v(l);function l(){return m(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.numberOfRows,o=d(t,u),i=Object(a.range)(n).map((function(){return e.props.headers.map((function(){return{display:Object(r.createElement)("span",{className:"is-placeholder"})}}))})),l=this.props.headers.map((function(e){return b(b({},e),{},{label:Object(r.createElement)("span",{className:"is-placeholder"})})}));return Object(r.createElement)(c.a,s({ariaHidden:!0,classNames:"is-loading",rows:i},o,{headers:l}))}}])&&y(t.prototype,n),o&&y(t,o),l}(r.Component);j.propTypes={query:i.a.object,headers:i.a.arrayOf(i.a.shape({hiddenByDefault:i.a.bool,defaultSort:i.a.bool,isSortable:i.a.bool,key:i.a.string,label:i.a.node,required:i.a.bool})),numberOfRows:i.a.number},j.defaultProps={numberOfRows:5},t.a=j},356:function(e,t,n){},357:function(e,t,n){},359:function(e,t,n){"use strict";var r=n(0),a=n(9),o=n(1),i=n(2),c=(n(414),n(20));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.pageUrl,n=e.onclose,u=e.title,s=e.updateDetail,f=e.isLoading,b=e.pageUrlSlug,p=l(Object(r.useState)(u),2),d=p[0],m=p[1],y=l(Object(r.useState)(b),2),h=y[0],v=y[1],O=l(Object(r.useState)(""),2),g=O[0],j=O[1],w=Object(i.isEmpty)(null==d?void 0:d.trim())||Object(i.isEmpty)(null==h?void 0:h.trim()),E=Object(r.useRef)();return Object(r.useEffect)((function(){var e=null==t?void 0:t.split("/");E.current=e.slice(0,Object(i.isEmpty)(e[e.length-1])?-2:-1).join("/"),j(t)}),[t]),Object(r.createElement)(a.Modal,{title:Object(o.__)("Edit Details","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-edit-detail-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(o.__)("Name","funnel-builder")),Object(r.createElement)(a.TextControl,{value:d,onChange:function(e){m(e)},className:Object(i.size)(null==d?void 0:d.trim())?"":"bwf-error-border",onKeyDown:function(e){if("Enter"===e.key){if(w)return;s(d,h)}}}),Object(i.size)(null==d?void 0:d.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(o.__)("Name is required","funnel-builder")),Object(r.createElement)("label",{id:"required",className:"bwf-mt-16"},Object(o.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(a.TextControl,{value:h,onChange:function(e){v(e.replace(/\s+/g,"-").toLocaleLowerCase()),j(E.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},className:Object(i.size)(null==h?void 0:h.trim())?"":"bwf-error-border"}),Object(i.size)(null==h?void 0:h.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(o.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url"},Object(r.createElement)("label",{className:"bwf-url-title bwf-mt-16"},Object(o.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},g))),Object(r.createElement)("div",{className:"bwf-edit-detail-modal__actions"},Object(r.createElement)(c.a,{className:"bwf-modal-cancel-btn",onClick:n},Object(o.__)("Cancel","funnel-builder")),Object(r.createElement)(c.a,{isPrimary:!0,onClick:function(){return s(d,h)},disabled:w,isBusy:f,className:w?"bwf-no-ripple":""},Object(o.__)("Update","funnel-builder"))))}},360:function(e,t,n){"use strict";var r=n(3),a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,o=n(305),i=n(361),c=n(362),l="function"==typeof Symbol&&Symbol.iterator;function u(e,t){return e&&"object"==typeof e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function s(e,t,n,r){var o,c=typeof e;if("undefined"!==c&&"boolean"!==c||(e=null),null===e||"string"===c||"number"===c||"object"===c&&e.$$typeof===a)return n(r,e,""===t?"."+u(e,0):t),1;var f=0,b=""===t?".":t+":";if(Array.isArray(e))for(var p=0;p<e.length;p++)f+=s(o=e[p],b+u(o,p),n,r);else{var d=function(e){var t=e&&(l&&e[l]||e["@@iterator"]);if("function"==typeof t)return t}(e);if(d){0;for(var m,y=d.call(e),h=0;!(m=y.next()).done;)f+=s(o=m.value,b+u(o,h++),n,r)}else if("object"===c){0;var v=""+e;i(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===v?"object with keys {"+Object.keys(e).join(", ")+"}":v,"")}}return f}var f=/\/+/g;function b(e){return(""+e).replace(f,"$&/")}var p,d,m=y,y=function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)},h=function(e){i(e instanceof this,"Trying to release an instance into a pool of a different type."),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)};function v(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function O(e,t,n){var a,i,c=e.result,l=e.keyPrefix,u=e.func,s=e.context,f=u.call(s,t,e.count++);Array.isArray(f)?g(f,c,n,o.thatReturnsArgument):null!=f&&(r.isValidElement(f)&&(a=f,i=l+(!f.key||t&&t.key===f.key?"":b(f.key)+"/")+n,f=r.cloneElement(a,{key:i},void 0!==a.props?a.props.children:void 0)),c.push(f))}function g(e,t,n,r,a){var o="";null!=n&&(o=b(n)+"/");var i=v.getPooled(t,o,r,a);!function(e,t,n){null==e||s(e,"",t,n)}(e,O,i),v.release(i)}v.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},p=function(e,t,n,r){if(this.instancePool.length){var a=this.instancePool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)},(d=v).instancePool=[],d.getPooled=p||m,d.poolSize||(d.poolSize=10),d.release=h;e.exports=function(e){if("object"!=typeof e||!e||Array.isArray(e))return c(!1,"React.addons.createFragment only accepts a single object. Got: %s",e),e;if(r.isValidElement(e))return c(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;i(1!==e.nodeType,"React.addons.createFragment(...): Encountered an invalid child; DOM elements are not valid children of React components.");var t=[];for(var n in e)g(e[n],t,n,o.thatReturnsArgument);return t}},361:function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,o,i,c){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,o,i,c],s=0;(l=new Error(t.replace(/%s/g,(function(){return u[s++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},362:function(e,t,n){"use strict";var r=n(305);e.exports=r},363:function(e,t,n){"use strict";function r(e){return e.match(/^\{\{\//)?{type:"componentClose",value:e.replace(/\W/g,"")}:e.match(/\/\}\}$/)?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.match(/^\{\{/)?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}e.exports=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(r)}},364:function(e,t,n){},371:function(e,t,n){"use strict";var r=n(0),a=n(7),o=n.n(a),i=n(2),c=n(9),l=n(51),u=n(1),s=n(244),f=(n(386),n(8));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=[{label:Object(u.__)("Product","funnel-builder"),value:"product"},{label:Object(u.__)("Custom","funnel-builder"),value:"custom"}];t.a=function e(t){var n,a=t.onChange,b=t.value,d=t.label,y=t.className,v=Object(l.useInstanceId)(e),O="inspector-bump-image-".concat(v),g=o()("components-bump-image",y),j=m(Object(r.useState)(b.type),2),w=j[0],E=j[1],_=m(Object(r.useState)(b.custom_url),2),S=_[0],k=_[1],x=function(e){a(e)},P=function(e,t){e.preventDefault(),n||(n=wp.media({title:"Media",library:{uploadedTo:console.log(wp.media.view.settings.post.id),type:"image"},button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=n.state().get("selection").first().toJSON();x(p(p({},b),{},{custom_url:e.url,type:"custom"})),k(e.url)})),n.open()};return Object(r.createElement)(c.BaseControl,{label:d,className:g,id:O},Object(r.createElement)("div",{className:"component-bump-image-wrap"},!Object(i.isEmpty)(h)&&Object(r.createElement)(c.ButtonGroup,{className:"bwf-button-group bwf-group-tab"},h.map((function(e,t){return Object(r.createElement)(c.Button,{key:t,variant:e.value===w?"primary":"",onClick:function(){E(e.value),"product"===e.value?(delete b.custom_url,x(p(p({},b),{},{type:e.value}))):Object(i.isEmpty)(S)||x(p(p({},b),{},{type:e.value,custom_url:S}))}},e.label)}))),Object(r.createElement)("div",{className:"bwf-bump-image-field"},Object(r.createElement)("div",{className:"bwf-bump-img-field-container"},"product"===w?Object(r.createElement)("img",{src:null==b?void 0:b.image_url,alt:"Product Image"}):Object(r.createElement)("div",{className:"bwf-bump-custom-img"},S?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{src:S,alt:"Product Image"}),Object(r.createElement)("div",{className:"bwf-media-actions"},Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-delete",onClick:function(){k(""),x(p(p({},b),{},{type:"product",custom_url:""}))}},Object(r.createElement)(f.a,{icon:"delete",size:"16"})),Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-edit",onClick:P},Object(r.createElement)(f.a,{icon:"edit",size:"16"})))):Object(r.createElement)("div",{className:"bwf-media-uploader-wrap",onClick:P},Object(r.createElement)(f.a,{icon:"add-image",size:48}),Object(r.createElement)("div",null,Object(u.__)("Add Image","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-bump-image-attr"},Object(r.createElement)(c.TextControl,{type:"number",label:Object(u.__)("Width (px)","funnel-builder"),max:400,value:null==b?void 0:b.width,onChange:function(e){x(p(p({},b),{},{width:e}))}}),Object(r.createElement)(s.b,{label:Object(u.__)("Image Position","funnel-builder"),options:[{label:Object(u.__)("Left","funnel-builder"),key:"left",value:"left"},{label:Object(u.__)("Right","funnel-builder"),key:"right",value:"right"},{label:Object(u.__)("Top","funnel-builder"),key:"top",value:"top"}],selected:null==b?void 0:b.position,onChange:function(e){x(p(p({},b),{},{position:e}))}})))))}},385:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(17),i=n.n(o),c=n(7),l=n.n(c),u=(n(448),n(283)),s=n(1);function f(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t,n,a,o=h(i);function i(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),n=O(t),a=!0,(r="mounted")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={options:[]},t.appendFreeTextSearch=t.appendFreeTextSearch.bind(O(t)),t.fetchOptions=t.fetchOptions.bind(O(t)),t.updateSelected=t.updateSelected.bind(O(t)),t}return t=i,(n=[{key:"getAutocompleter",value:function(){return this.props.autocompleter&&"object"===d(this.props.autocompleter)?this.props.autocompleter:{}}},{key:"getFormattedOptions",value:function(e,t){var n=this.getAutocompleter(),r=[];return e.forEach((function(e){var a={key:n.getOptionIdentifier(e),label:n.getOptionLabel(e,t),keywords:n.getOptionKeywords(e).filter(Boolean),value:e};r.push(a)})),r}},{key:"fetchOptions",value:function(e,t){var n=this;return t?this.getAutocompleter().options(t,this.props.searchHelper).then(function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.mounted){e.next=4;break}return a=n.getFormattedOptions(r,t),n.setState({options:a}),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,c,"next",e)}function c(e){p(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}()):[]}},{key:"updateSelected",value:function(e){var t=this.props.onChange,n=this.getAutocompleter();t(e.map((function(e){return e.value?n.getOptionCompletion(e.value):e})))}},{key:"appendFreeTextSearch",value:function(e,t){var n=this.props,r=n.allowFreeTextSearch,a=n.emptySearchText,o=void 0===a?Object(s.__)("Not Found","funnel-builder"):a;if(!t||!t.length)return[];if(!r)return e.length>0?e:[{label:o,key:"",notFound:!0}];if(!r)return e;var i=this.getAutocompleter();return[].concat(f(i.getFreeTextOptions(t,e)),f(e))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.getAutocompleter(),t=this.props,n=t.className,a=t.inlineTags,o=t.placeholder,i=t.selected,c=t.showClearButton,s=t.staticResults,f=t.disabled,b=(t.multiple,this.state.options),p=e.inputType?e.inputType:"text";return Object(r.createElement)("div",null,Object(r.createElement)(u.a,{className:l()("bwf-search",n,{"is-static-results":s}),disabled:f,hideBeforeSearch:!0,inlineTags:a,isSearchable:!0,label:o,getSearchExpression:e.getSearchExpression,multiple:!0,placeholder:o,onChange:this.updateSelected,onFilter:this.appendFreeTextSearch,onSearch:this.fetchOptions,options:b,remove:this.props.onRemoveTag,searchDebounceTime:500,searchInputType:p,selected:i,showClearButton:c,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm}))}}])&&m(t.prototype,n),a&&m(t,a),i}(r.Component);j.propTypes={allowFreeTextSearch:i.a.bool,className:i.a.string,onChange:i.a.func,autocompleter:i.a.object,placeholder:i.a.string,selected:i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,label:i.a.string})),inlineTags:i.a.bool,showClearButton:i.a.bool,staticResults:i.a.bool,disabled:i.a.bool,bwfMaintainSingleTerm:i.a.bool,searchHelper:i.a.object},j.defaultProps={allowFreeTextSearch:!1,onChange:a.noop,selected:[],inlineTags:!1,showClearButton:!1,staticResults:!1,disabled:!1,bwfMaintainSingleTerm:!1,searchHelper:{}},t.a=j},386:function(e,t,n){},399:function(e,t,n){"use strict";var r=n(0),a=n(1),o=n(7),i=n.n(o),c=n(1143),l=n(2),u=n(428),s=n.n(u),f=n(9),b=n(1157),p=n(429),d=n(17),m=n.n(d),y=n(166),h=n(14),v=n(50);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(i,e);var t,n,a,o=E(i);function i(){return g(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.height;return Object(r.createElement)("div",{"aria-hidden":"true",className:"bwf-chart-placeholder",style:{height:e}},Object(r.createElement)(v.a,{size:"xl"}))}}])&&j(t.prototype,n),a&&j(t,a),i}(r.Component);k.propTypes={height:m.a.number},k.defaultProps={height:0};var x=k,P=n(259),C=(n(410),n(1155)),N=n(1138);n(411);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var a=D(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return F(this,n)}}function F(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(c,e);var t,n,a,o=I(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).chartRef=Object(r.createRef)(),t}return t=c,(n=[{key:"componentDidMount",value:function(){this.drawUpdatedChart()}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||!Object(l.isEqual)(this.props.data,e.data)||!Object(l.isEqual)(this.props.orderedKeys,e.orderedKeys)||this.props.drawChart!==e.drawChart||this.props.height!==e.height||this.props.chartType!==e.chartType||this.props.width!==e.width||this.props.chartMeta!==e.chartMeta}},{key:"componentDidUpdate",value:function(){this.drawUpdatedChart()}},{key:"componentWillUnmount",value:function(){this.deleteChart()}},{key:"delayedScroll",value:function(){var e=this.props.tooltip;return Object(l.throttle)((function(){e&&e.hide()}),300)}},{key:"deleteChart",value:function(){Object(N.a)(this.chartRef.current).selectAll("svg").remove()}},{key:"drawUpdatedChart",value:function(){(0,this.props.drawChart)(this.getContainer())}},{key:"getContainer",value:function(){var e=this.props,t=e.className,n=e.height,r=e.width;this.deleteChart();var a=Object(N.a)(this.chartRef.current).append("svg").attr("viewBox","0 0 ".concat(r," ").concat(n)).attr("height",n).attr("width",r).attr("preserveAspectRatio","xMidYMid meet");return t&&a.attr("class","".concat(t,"__viewbox")),a.append("g")}},{key:"render",value:function(){var e=this.props.className;return Object(r.createElement)("div",{className:i()("d3-base",e),ref:this.chartRef,onScroll:this.delayedScroll()})}}])&&R(t.prototype,n),a&&R(t,a),c}(r.Component);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}q.propTypes={className:m.a.string,data:m.a.array,orderedKeys:m.a.array,tooltip:m.a.object,chartType:m.a.string};var V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.b;return"function"==typeof e?e:t(e)},K=function(e){return M(new Set(e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]))).filter((function(e){return"date"!==e}))},H=n(1158),z=n(1141),Y=n(1148),$=n(12),Q=n.n($);function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(H.a)().domain(e.filter((function(e){return e.visible})).map((function(e){return e.key}))).rangeRound([0,t.bandwidth()]).padding(n?0:.07)},Z=function(e,t){return Object(z.a)().domain([Q()(e[0],"YYYY-MM-DD HH:mm").toDate(),Q()(e[e.length-1],"YYYY-MM-DD HH:mm").toDate()]).rangeRound([0,t])},J=function(e){var t=function(e){var t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return e.forEach((function(e){for(var r=0,a=Object.entries(e);r<a.length;r++){var o=W(a[r],2),i=o[0],c=o[1];"date"!==i&&Number.isFinite(c.value)&&c.value>t&&(t=c.value),"date"!==i&&Number.isFinite(c.value)&&c.value<n&&(n=c.value)}})),{upper:t,lower:n}}(e),n=t.lower,r=t.upper,a=function(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return 1;if(0===t&&0===e)return 1/3;var n=Math.max(-e,t),r=3*Math.pow(10,(Math.log(n)*Math.LOG10E+1|0)-2),a=Math.ceil(n/r)*r/3;return t<1&&e>-1?Math.round(4*a)/4:Math.ceil(a)}(n,r),o={lower:0,upper:0,step:a};return(Number.isFinite(n)||n<0)&&(o.lower=Math.floor(n/a)*a,o.lower===n&&0!==n&&(o.lower-=a)),(Number.isFinite(r)||r>0)&&(o.upper=a<=1?4:4*a,o.upper===r&&0!==r&&(o.upper+=a)),o},ee=n(1151),te=function(e){for(var t=[],n=1;n<=Math.floor(Math.sqrt(e));n++)e%n==0&&(t.push(n),e/n!==n&&t.push(e/n));return t.sort((function(e,t){return e-t})),t},ne=function(e,t,n,r){var a,o=function(e,t){if(e<783)return 7;if(e>=783&&e<=1130)return 12;if(e>1130&&e<=1365){if("time-comparison"===t)return 16;if("item-comparison"===t)return 12}else if(e>1365){if("time-comparison"===t)return 31;if("item-comparison"===t)return 16}return 16}(t,n);return(e.length>=63&&"day"===r||e.length>=9&&"week"===r)&&(e=(a=e).filter((function(e,t){return 0===t||Q()(e).toDate().getMonth()!==Q()(a[t-1]).toDate().getMonth()}))),e.length<=o||"hour"===r&&function(e){var t=Q()(e[0]).toDate(),n=Q()(e[e.length-1]).toDate();return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}(e)&&t>783?e:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e[r]);return n[0]!==e[0]&&n.unshift(e[0]),n}(e,function(e,t){for(var n=[],r=1;n.length<=3;)n=te(e.length-r),r+=1;return n.find((function(n){return e.length/n<t}))}(e,o))},re=function(e,t,n,r){var a=Q()(e).toDate(),o=0!==t?n[t-1]:n[t];return o=o instanceof Date?o:Q()(o).toDate(),0===t?r(a):function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new RegExp([" |,"],"g"),r=e.split(n),a=t.split(n),o=new Array,i=e.length>t.length?r:a,c=0;c<i.length;c++)r[c]!==a[c]&&o.push(a[c]);return o}(r(o),r(a)).join(" ")},ae=n(4);function oe(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e,t,n){for(var r=[],a=0;a<e;a++){var o=(a+1)/e*t,i=n?Math.round(o):o;r[r.length-1]!==i&&r.push(i)}return r},le=function(e,t,n){return[0].concat(oe(function(e,t){if(e>=0)return[];var n=Math.ceil(-e/t);return ce(n,e,e<-1)}(e,n)),oe(function(e,t){if(e<=0)return[];var n=Math.ceil(e/t);return ce(n,e,e>1)}(t,n)))},ue=function(e,t,n,r,a,o){Object(ae.s)();var i=le(t.yScale.domain()[0],t.yScale.domain()[1],t.step),c=t.xScale.range()[1],l=a?c+r.left+r.right+35:-r.left/2-15,u=t.yMin>=0||t.yMax>0?" with-positive-ticks":"";e.append("g").attr("class","grid"+u).attr("transform","translate(0, 0)").call(Object(ee.b)(t.yScale).tickValues(i).tickSize(-c-r.left-r.right).tickFormat("")),e.append("g").attr("class","axis y-axis").attr("aria-hidden","true").attr("transform","translate("+l+", 0)").attr("text-anchor","start").call(Object(ee.b)(t.yScale).tickValues(0===t.yMax&&0===t.yMin?[i[0]]:i).tickFormat((function(e){return e>-1&&e<1&&n.yBelow1Format?n.yBelow1Format(e):o&&!o.isCurrency?n.yFormat(e):(t=n.yFormat(e),"left"===(null==(a=null!==(r=wffn_contacts_data.currency)&&void 0!==r?r:{symbol:""})?void 0:a.symbolPosition)?(null==a?void 0:a.symbol)+t:t+(null==a?void 0:a.symbol));var t,r,a})))},se=function(e,t,n,r,a,o,i){!function(e,t,n,r){var a=n.yScale.range()[0],o=ne(t.uniqueDates,n.xScale.range()[1],t.mode,t.interval);"line"!==t.chartType&&"curve-line"!==t.chartType||(o=o.map((function(e){return Q()(e).toDate()}))),e.append("g").attr("class","axis").attr("aria-hidden","true").attr("transform","translate(0, ".concat(a+10,")")).call(Object(ee.a)(n.xScale).tickValues(o).tickFormat((function(e,n){return"hour"===t.interval?r.xFormat(e instanceof Date?e:Q()(e).toDate()):re(e,n,o,r.xFormat)}))),"day"===t.interval&&e.append("g").attr("class","axis axis-month").attr("aria-hidden","true").attr("transform","translate(0, ".concat(a+("day"===t.interval?30:0),")")).call(Object(ee.a)(n.xScale).tickValues(o).tickFormat((function(e,t){return re(e,t,o,r.x2Format)}))),e.append("g").attr("class","pipes").attr("transform","translate(0, ".concat(a,")")).call(Object(ee.a)(n.xScale).tickValues(o).tickSize(5).tickFormat(""))}(e,t,n,r),ue(e,n,r,a,o,i),e.selectAll(".domain").remove(),e.selectAll(".axis .tick line").remove()},fe=n(918),be=n(1150);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye=function(e,t,n,r,a,o){var i,c,u=r.yScale.range()[0],s=r.xScale.range()[1],f=(i=r.xScale,c=r.yScale,Object(be.a)().x((function(e){return i(Q()(e.date).toDate())})).y((function(e){return c(e.value)}))),b=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,n.visibleKeys),p=e.append("g").attr("class","lines").selectAll(".line-g").data(b.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),d=function(e,t,n,r,a){var o=n.slice().reverse();return t.map((function(n,i){var c=Object(l.first)(e.filter((function(e){return e.date===n}))),u=a(Q()(n).toDate()),s=a(i>=1?Q()(t[i-1]).toDate():Q()(t[0]).toDate()),f=i<t.length-1?a(Q()(t[i+1]).toDate()):a(Q()(t[t.length-1]).toDate()),b=0===i?f-u:u-s,p=0===i?0:u-b/2;return b=0===i||i===t.length-1?b/2:b,{date:n,start:t.length>1?p:0,width:t.length>1?b:r,values:o.map((function(e){var t=e.key,r=c[t];return r?{key:t,value:r.value,date:n}:null})).filter(Boolean)}}))}(t,n.uniqueDates,n.visibleKeys,s,r.xScale),m=s<=1365||n.uniqueDates.length>50?2:3;m=s<=783?1.25:m;var y=s<=1365?4:6;n.uniqueDates.length>1&&p.append("path").attr("fill","none").attr("stroke-width",m).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",(function(e){return n.getColor(e.key)})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",(function(e){return f(e.values)}));s/n.uniqueDates.length>36&&p.selectAll("circle").data((function(e,t){return e.values.map((function(n){return de(de({},n),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",y).attr("fill",(function(e){return n.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",m+1).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("cx",(function(e){return r.xScale(Q()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=a.screenReaderFormat(e.date instanceof Date?e.date:Q()(e.date).toDate());return"".concat(t," ").concat(o.valueFormat(e.value))})).on("focus",(function(e,n,r){o.show(t.find((function(t){return t.date===e.date})),r[n].parentNode,fe.b.target)})).on("blur",(function(){return o.hide()}));var h=e.append("g").attr("class","focusspaces").selectAll(".focus").data(d).enter().append("g").attr("class","focus"),v=h.append("g").attr("class","focus-grid").attr("opacity","0");v.append("line").attr("x1",(function(e){return r.xScale(Q()(e.date).toDate())})).attr("y1",0).attr("x2",(function(e){return r.xScale(Q()(e.date).toDate())})).attr("y2",u),v.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",y+2).attr("fill",(function(e){return n.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",m+2).attr("cx",(function(e){return r.xScale(Q()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})),h.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",u).attr("opacity",0).on("mouseover",(function(e,r,a){var i=(0===r||r===d.length-1)&&n.uniqueDates.length>1?0:.5;o.show(t.find((function(t){return t.date===e.date})),fe.b.target,a[r].parentNode,i)})).on("mouseout",(function(){return o.hide()}))},he=[[],[.5],[.333,.667],[.2,.5,.8],[.12,.375,.625,.88],[0,.25,.5,.75,1]],ve=function(e,t){return function(n){var r=e.length>5?5:e.length,a=Object(l.findIndex)(e,(function(e){return e.key===n})),o=a<=4?he[r][a]:0;return t(o)}};function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=null,this.chart=null,this.position="",this.title="",this.labelFormat="",this.valueFormat="",this.visibleKeys="",this.getColor=null,this.interval="",this.margin=24,this.chartMeta={},this.type="old",this.isProFeatureLocked=!1}var t,n,r;return t=e,(n=[{key:"calculateXPosition",value:function(e,t,n){var r=this.ref.getBoundingClientRect(),a=this.ref.parentNode.querySelector(".d3-base").getBoundingClientRect(),o=Math.max(a.left,t.left);if("below"===this.position)return Math.max(this.margin,Math.min(e.left+.5*e.width-r.width/2-o,a.width-r.width-this.margin));var i=e.left+e.width*n+this.margin-o;return i+r.width+this.margin>a.width?Math.max(this.margin,e.left+e.width*(1-n)-r.width-this.margin-o):i}},{key:"calculateYPosition",value:function(e,t){if("below"===this.position)return t.height;var n=this.ref.getBoundingClientRect(),r=e.top+this.margin-t.top;return r+n.height+this.margin>t.height?Math.max(0,e.top-n.height-this.margin-t.top):r}},{key:"calculatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=e.getBoundingClientRect(),o=this.chart.getBoundingClientRect(),i=this.ref.getBoundingClientRect();return"below"===this.position&&(t=0),{x:n<50||n>o.width-220?this.calculateXPosition(a,o,t):n-i.width/4,y:r-("new"===this.type?.65*i.height:i.height)}}},{key:"hide",value:function(){Object(N.a)(this.chart).selectAll(".barfocus, .focus-grid").attr("opacity","0"),Object(N.a)(this.ref).style("visibility","hidden")}},{key:"getTooltipRowLabel",value:function(e,t){return e[t.key].labelDate?this.labelFormat(Q()(e[t.key].labelDate).toDate()):t.label||t.key}},{key:"show",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;if(this.visibleKeys.length){Object(N.a)(n).select(".focus-grid, .barfocus").attr("opacity","1");var c=this.calculatePosition(t,a,o,i),l=(this.visibleKeys.map((function(t){return'\n\t\t\t\t\t<li class="key-row">\n\t\t\t\t\t\t<div class="key-container">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="key-color"\n\t\t\t\t\t\t\t\tstyle="background-color: '.concat(r.getColor(t.key),'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="key-key">').concat(r.getTooltipRowLabel(e,t),'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="key-value">').concat(r.valueFormat(e[t.key].value),"</span>\n\t\t\t\t\t</li>\n\t\t\t\t")})),this.title?this.title:this.labelFormat(Q()(e.date).toDate()),Object(ae.s)()),u=function(e){return"year"===r.interval?Q()(e).year():Q()(e).format("month"===r.interval?"MMM YYYY":Object(ae.P)())},s=function(t){var n,a,o,i,c,s,f,b,p,d,m,y=r.visibleKeys[0].key;switch(t){case"old":return 1===r.visibleKeys.length?'\n\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-value">\n\t\t\t\t\t\t\t\t'.concat(r.chartMeta&&!r.chartMeta.isCurrency?e[y].value:l.formatAmount(e[y].value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t<div>').concat(r.chartMeta.title,"</div>\n\t\t\t\t\t\t\t<div>").concat(u(null===(n=e[y])||void 0===n?void 0:n.labelDate),"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"):'\n\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val bwf-mb-16">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="color" style="background: #0073AA;"></div>\n\t\t\t\t\t\t\t\t<div class="label">'.concat(u(null===(a=e.primary)||void 0===a?void 0:a.labelDate),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t').concat(r.chartMeta&&!r.chartMeta.isCurrency?e.primary.value:l.formatAmount(e.primary.value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="color" style="background: #F5C452;"></div>\n\t\t\t\t\t\t\t\t<div class="label">').concat(u(null===(o=e.secondary)||void 0===o?void 0:o.labelDate),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t').concat(r.chartMeta&&!r.chartMeta.isCurrency?e.secondary.value:l.formatAmount(e.secondary.value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t<div>').concat(r.chartMeta.title,"</div>\n\t\t\t\t\t\t<div>").concat(u(null===(i=e.primary)||void 0===i?void 0:i.labelDate),"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t");case"new":return 1===r.visibleKeys.length?'\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-value">\n\t\t\t\t\t\t\t\t\t\t'.concat(l.formatAmount(e[y].value),'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-sec-values">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Checkout</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(l.formatAmount(null===(c=e[y].data)||void 0===c?void 0:c.checkout),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Order Bump</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(r.isProFeatureLocked?"-":l.formatAmount(null===(s=e[y].data)||void 0===s?void 0:s.orderBump),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Upsell</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(r.isProFeatureLocked?"-":l.formatAmount(null===(f=e[y].data)||void 0===f?void 0:f.upsell),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t\t<div>').concat(null===(b=e[y].data)||void 0===b?void 0:b.orders," Orders</div>\n\t\t\t\t\t\t\t\t\t<div>").concat(u(e.date),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"):'\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val bwf-mb-16">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="color" style="background: #0073AA;"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label" >'.concat(u(null===(p=e.primary)||void 0===p?void 0:p.labelDate),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t\t\t\t').concat(l.formatAmount(e.primary.value),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="color" style="background: #F5C452;"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">').concat(u(null===(d=e.secondary)||void 0===d?void 0:d.labelDate),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t\t\t\t').concat(l.formatAmount(e.secondary.value),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t<div>').concat(u(null===(m=e.primary)||void 0===m?void 0:m.labelDate),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t")}};Object(N.a)(this.ref).style("left",c.x+"px").style("top",c.y+"px").style("visibility","visible").html(s(this.type))}}}])&&Oe(t.prototype,n),r&&Oe(t,r),e}(),je=n(1134),we=n(32);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(e,t,n,r,a,o){var i,c,u=r.yScale.range()[0],s=r.xScale.range()[1],f=(i=r.xScale,c=r.yScale,Object(be.a)().curve(je.a).x((function(e){return i(Q()(e.date).toDate())})).y((function(e){return c(e.value)}))),b=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,n.visibleKeys),p=e.append("g").attr("class","lines").selectAll(".line-g").data(b.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),d=function(e,t,n,r,a){var o=n.slice().reverse();return t.map((function(n,i){var c=Object(l.first)(e.filter((function(e){return e.date===n}))),u=a(Q()(n).toDate()),s=a(i>=1?Q()(t[i-1]).toDate():Q()(t[0]).toDate()),f=i<t.length-1?a(Q()(t[i+1]).toDate()):a(Q()(t[t.length-1]).toDate()),b=0===i?f-u:u-s,p=0===i?0:u-b/2;return b=0===i||i===t.length-1?b/2:b,{date:n,start:t.length>1?p:0,width:t.length>1?b:r,values:o.map((function(e){var t=e.key,r=c[t];return r?{key:t,value:r.value,date:n}:null})).filter(Boolean)}}))}(t,n.uniqueDates,n.visibleKeys,s,r.xScale),m=p.append("defs"),y=m.append("linearGradient").attr("id","grad").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%"),h=[["rgba(0,115,170, 0.2)","1"],["rgba(0,115,170, 0.1)","0"]];y.selectAll("stop").data(h).enter().append("stop").style("stop-color",(function(e){return e[0]})).style("stop-opacity",(function(e){return e[1]})).attr("offset",(function(e,t){return t/(h.length-1)*100+"%"}));m.append("linearGradient").attr("id","grad2").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").selectAll("stop").data([["rgba(245,196,82, 0.2)","1"],["rgba(245,245,82, 0.1)","0"]]).enter().append("stop").style("stop-color",(function(e){return e[0]})).style("stop-opacity",(function(e){return e[1]})).attr("offset",(function(e,t){return t/(h.length-1)*100+"%"}));var v=2;v=s<=783?2:v;var O=s<=1365?4:6,g=m.append("filter").attr("id","glow");g.append("feGaussianBlur").attr("stdDeviation","1.5").attr("result","coloredBlur");var j=g.append("feMerge");j.append("feMergeNode").attr("in","coloredBlur"),j.append("feMergeNode").attr("in","SourceGraphic"),n.uniqueDates.length>1&&p.append("path").attr("fill","none").attr("stroke-width",v).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",(function(e){return"primary"===e.key?we.BLUE_BASE:we.NOTICE_YELLOW})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",(function(e){return f(e.values)})).attr("fill",(function(e){return"primary"===e.key?"url(#grad)":"url(#grad2)"}));s/n.uniqueDates.length>36&&p.selectAll("circle").data((function(e,t){return e.values.map((function(n){return _e(_e({},n),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",O).attr("fill",(function(e){return"#0073aa"})).attr("stroke","#fff").attr("stroke-width","4px").style("opacity",(function(e){e.focus;return 0})).attr("cx",(function(e){return r.xScale(Q()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=a.screenReaderFormat(e.date instanceof Date?e.date:Q()(e.date).toDate());return"".concat(t," ").concat(o.valueFormat(e.value))})).on("focus",(function(e,t,n){})).on("blur",(function(){return o.hide()}));var w=e.append("g").attr("class","focusspaces").selectAll(".focus").data(d).enter().append("g").attr("class","focus"),E=w.append("g").attr("class","focus-grid").attr("opacity","0");E.selectAll(null).data((function(e){return e.values})).enter().append("line").attr("x1",(function(e){return r.xScale(Q()(e.date).toDate())})).attr("y1",(function(e){return r.yScale(e.value)})).attr("x2",(function(e){return r.xScale(Q()(e.date).toDate())})).attr("y2",u),E.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",O+2).attr("fill",(function(e){return"primary"===e.key?we.BLUE_BASE:we.NOTICE_YELLOW})).attr("stroke","#fff").style("filter","url(#glow)").attr("stroke-width",v).attr("cx",(function(e){return r.xScale(Q()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})),w.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",u).attr("opacity",0).on("mouseover",(function(e,a,i){var c,l,u,s,f=(0===a||a===d.length-1)&&n.uniqueDates.length>1?0:.5,b=null!==(c=null===(l=e.values[0])||void 0===l?void 0:l.value)&&void 0!==c?c:0,p=null!==(u=null===(s=e.values[1])||void 0===s?void 0:s.value)&&void 0!==u?u:0;o.show(t.find((function(t){return t.date===e.date})),fe.b.target,i[a].parentNode,f,r.xScale(Q()(e.date).toDate()),r.yScale(Math.max(b,p)))})).on("mouseout",(function(){return o.hide()}))},xe=n(1152),Pe=n(1135),Ce=n(926);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=De(e);if(t){var a=De(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fe(e)}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(){return"rtl"===document.documentElement.dir},Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(c,e);var t,n,a,o=Ae(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).drawChart=t.drawChart.bind(Fe(t)),t.getParams=t.getParams.bind(Fe(t)),t.tooltipRef=Object(r.createRef)(),t}return t=c,(n=[{key:"getFormatParams",value:function(){var e=this.props,t=e.screenReaderFormat,n=e.xFormat,r=e.x2Format,a=e.yFormat,o=e.yBelow1Format;return{screenReaderFormat:V(t,C.a),xFormat:V(n,C.a),x2Format:V(r,C.a),yBelow1Format:V(o),yFormat:V(a)}}},{key:"getScaleParams",value:function(e){var t=this.props,n=t.data,r=t.height,a=t.orderedKeys,o=t.chartType,i=this.getMargin(),c=r-i.top-i.bottom,l=this.getWidth()-i.left-i.right,u=J(n),s=u.upper,f=u.lower,b=u.step,p=function(e,t,n){return Object(Y.a)().domain([Math.min(t,0),0===n&&0===t?1:Math.max(n,0)]).rangeRound([e,0])}(c,f,s);if("line"===o||"curve-line"===o)return{step:b,xScale:Z(e,l),yMax:s,yMin:f,yScale:p};var d=this.shouldBeCompact(),m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(H.a)().domain(e).range([0,t]).paddingInner(n?0:.1)}(e,l,d);return{step:b,xGroupScale:X(a,m,d),xScale:m,yMax:s,yMin:f,yScale:p}}},{key:"getParams",value:function(e){var t=this.props,n=t.chartType,r=t.colorScheme,a=t.data,o=t.interval,i=t.mode,c=t.orderedKeys||function(e){return K(e).map((function(t){return{key:t,focus:!0,total:e.reduce((function(e,n){return e+n[t].value}),0),visible:!0}})).sort((function(e,t){return t.total-e.total}))}(a),l=c.filter((function(e){return e.visible})),u=c.length>5?l:c;return{getColor:ve(u,r),interval:o,mode:i,chartType:n,uniqueDates:e,visibleKeys:l}}},{key:"createTooltip",value:function(e,t,n){var r=this.props,a=r.tooltipLabelFormat,o=r.tooltipPosition,i=r.tooltipTitle,c=r.tooltipValueFormat,l=r.interval,u=r.chartMeta,s=new ge;s.ref=this.tooltipRef.current,s.type=u?"old":"new",s.chart=e,s.position=o,s.title=i,s.labelFormat=V(a,C.a),s.valueFormat=V(c),s.visibleKeys=n,s.getColor=t,s.interval=l,s.chartMeta=u,s.isProFeatureLocked=this.props.isProFeatureLocked,this.tooltip=s}},{key:"drawChart",value:function(e){var t,n=this.props,r=n.data,a=n.dateParser,o=n.chartType,i=n.emptyText,c=n.chartMeta,u=n.chartId,s=this.getMargin(),f=e.attr("id","chart").append("g").attr("transform","translate(".concat(s.left,", ").concat(s.top,")"));if("donut"===o)return null===(t=Object(N.a)("#".concat(u," .d3-donut-tip")).node())||void 0===t||t.remove(),void function(e,t,n){var r=n.width,a=void 0===r?640:r,o=n.height,i=void 0===o?400:o,c=(n.margin,n.emptyText),u=void 0===c?"":c,s=(n.chartId,n.donutTip),f=Math.min(a,i)/2+35,b=t.reduce((function(e,t){return e+(t.value||0)}),0),p=b?t:[{key:"dummy",value:100,color:["#DEDFEA","#DEDFEA"]}],d=Object(Ce.a)().domain(p.map((function(e){return e.key}))).range(p.map((function(e){return e.color&&Object(l.isArray)(e.color)?e.color[0]:we.TEXT_COLOR_3}))),m=Object(xe.a)().sort(null).value((function(e){return e.value}))(p),y=Object(Pe.a)().innerRadius(.52*f).outerRadius(.8*f),h=Object(Pe.a)().innerRadius(.52*(f+2)).outerRadius(.8*(f+8));Object(Pe.a)().innerRadius(.9*f).outerRadius(.9*f),e.attr("transform","translate("+a/2+","+i/2+")");var v=e.append("defs").append("filter").attr("id","drop-shadow").attr("height","130%");v.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),v.append("feFlood").attr("flood-color","#323247").attr("flood-opacity","0.5").attr("result","offsetColor"),v.append("feOffset").attr("in","blur").attr("dx",1).attr("dy",1).attr("result","offsetBlur"),v.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("result","offsetBlur").attr("operator","in");var O=v.append("feMerge");O.append("feMergeNode").attr("in","offsetBlur"),O.append("feMergeNode").attr("in","SourceGraphic");var g=function(e){if(b){Object(N.a)("#slice-"+e.data.key).attr("d",h).attr("filter","url(#drop-shadow");var t=e.data.tooltip;Object(N.a)(".d3-donut-tip").style("opacity",1),s.html(t).style("opacity",1).style("left",fe.b.layerX-50+"px").style("top",fe.b.layerY+35+"px")}},j=function(e){Object(N.a)("#slice-"+e.data.key).attr("d",y).attr("filter",""),Object(N.a)(".d3-donut-tip").style("opacity",0)};e.selectAll("allSlices").data(m).enter().append("path").attr("id",(function(e){return"slice-"+e.data.key})).attr("d",y).attr("fill",(function(e){return d(e.data.key)})).style("stroke-width","0").on("mousemove",g).on("mouseleave",j),e.selectAll("allValues").data(m).enter().append("text").text((function(e){return e.data.value>4?e.data.value<10&&e.data.value%1?Math.floor(e.data.value)+"%":e.data.value+"%":""})).attr("id",(function(e){return"value-"+e.data.key})).attr("class","slice-value").attr("transform",(function(e){return"translate("+y.centroid(e)+")"})).style("text-anchor","middle").style("fill",(function(e){return e.data.color&&Object(l.isArray)(e.data.color)?e.data.color[1]:"#ffffff"})).on("mousemove",g).on("mouseleave",j),b||e.append("text").attr("class","name-text").text(u).attr("text-anchor","middle").attr("x","0").attr("y","0").attr("width","100").style("fill",we.TEXT_COLOR_3).call((function(e){e.each((function(){for(var e=Object(N.a)(this),t=e.text().split(/\s+/).reverse(),n=parseFloat(e.attr("width")),r=parseFloat(e.attr("y")),a=e.attr("x"),o=e.attr("text-anchor"),i=e.text(null).append("tspan").attr("x",a).attr("y",r).attr("text-anchor",o),c=0,l=[],u=t.pop();u;)l.push(u),i.text(l.join(" ")),i.node().getComputedTextLength()>n&&(c+=1,l.pop(),i.text(l.join(" ")),l=[u],i=e.append("tspan").attr("x",a).attr("y",r+20*c).attr("anchor",o).text(u)),u=t.pop()}))}))}(f,r,{height:280,width:280,emptyText:i,chartId:u,donutTip:Object(N.a)("#"+u).append("div").style("opacity",0).attr("class","d3-donut-tip")});var b=function(e,t){var n=Object(C.b)(t);return M(new Set(e.map((function(e){return e.date})))).sort((function(e,t){return n(e)-n(t)}))}(r,a),p=this.getFormatParams(),d=this.getParams(b),m=this.getScaleParams(b);this.createTooltip(f.node(),d.getColor,d.visibleKeys),se(f,d,m,p,s,qe(),c),"curve-line"!==o?("line"===o&&ye(f,r,d,m,p,this.tooltip),"bar"===o&&function(e,t,n,r,a,o){var i=r.yScale.range()[0],c=e.append("g").attr("class","bars").selectAll("g").data(t).enter().append("g").attr("transform",(function(e){return"translate(".concat(r.xScale(e.date),", 0)")})).attr("class","bargroup").attr("role","region").attr("aria-label",(function(e){return"item-comparison"===n.mode?a.screenReaderFormat(e.date instanceof Date?e.date:Q()(e.date).toDate()):null}));c.append("rect").attr("class","barfocus").attr("x",0).attr("y",0).attr("width",r.xGroupScale.range()[1]).attr("height",i).attr("opacity","0").on("mouseover",(function(e,n,r){o.show(t.find((function(t){return t.date===e.date})),fe.b.target,r[n].parentNode)})).on("mouseout",(function(){return o.hide()}));var l=r.yScale(0);c.selectAll(".bar").data((function(e){return n.visibleKeys.map((function(t){return{key:t.key,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,label:t.label,visible:t.visible,date:e.date}}))})).enter().append("rect").attr("class","bar").attr("x",(function(e){return r.xGroupScale(e.key)})).attr("y",(function(e){return Math.min(l,r.yScale(e.value))})).attr("width",r.xGroupScale.bandwidth()).attr("height",(function(e){return Math.abs(l-r.yScale(e.value))})).attr("fill",(function(e){return n.getColor(e.key)})).attr("pointer-events","none").attr("tabindex","0").attr("aria-label",(function(e){var r=e.label||e.key;if("time-comparison"===n.mode){var i=t.find((function(t){return t.date===e.date}));r=a.screenReaderFormat(Q()(i[e.key].labelDate).toDate())}return"".concat(r," ").concat(o.valueFormat(e.value))})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).on("focus",(function(e,n,r){var a=e.value>0?fe.b.target:fe.b.target.parentNode;o.show(t.find((function(t){return t.date===e.date})),a,r[n].parentNode)})).on("blur",(function(){return o.hide()}))}(f,r,d,m,p,this.tooltip)):ke(f,r,d,m,p,this.tooltip)}},{key:"shouldBeCompact",value:function(){var e=this.props,t=e.data,n=e.chartType,r=e.width;if("bar"!==n)return!1;var a=this.getMargin(),o=r-a.left-a.right,i=t&&t.length?Object.keys(t[0]).length-1:0;return o<t.length*(i+1)}},{key:"getMargin",value:function(){var e=this.props.margin;return qe()?{bottom:e.bottom,left:-30,right:e.left,top:e.top}:e}},{key:"getWidth",value:function(){var e=this.props,t=e.data,n=e.chartType,r=e.width;if("bar"!==n)return r;var a=this.getMargin(),o=t&&t.length?Object.keys(t[0]).length-1:0,i=this.shouldBeCompact()?t.length*o:t.length*(o+1);return Math.max(r,i+a.left+a.right)}},{key:"getEmptyMessage",value:function(){var e=this.props,t=e.baseValue,n=e.data,a=e.emptyMessage;if(a&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<e.length;n++)for(var r=0,a=Object.entries(e[n]);r<a.length;r++){var o=B(a[r],2),i=o[0],c=o[1];if("date"!==i&&!Object(l.isNil)(c.value)&&c.value!==t)return!1}return!0}(n,t))return Object(r.createElement)("div",{className:"d3-chart__empty-message"},a)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.data,a=e.height,o=e.orderedKeys,c=e.chartType,l=e.chartMeta,u=this.getWidth();return Object(r.createElement)("div",{className:i()("d3-chart__container",t)},this.getEmptyMessage(),Object(r.createElement)("div",{className:"d3-chart__tooltip",ref:this.tooltipRef}),Object(r.createElement)(q,{className:i()(t),data:n,drawChart:this.drawChart,chartMeta:l,height:a,orderedKeys:o,tooltip:this.tooltip,chartType:c,width:u}))}}])&&Te(t.prototype,n),a&&Te(t,a),c}(r.Component);Be.propTypes={baseValue:m.a.number,className:m.a.string,colorScheme:m.a.func,data:m.a.array.isRequired,dateParser:m.a.string.isRequired,emptyMessage:m.a.string,height:m.a.number,interval:m.a.oneOf(["hour","day","week","month","quarter","year",""]),margin:m.a.shape({bottom:m.a.number,left:m.a.number,right:m.a.number,top:m.a.number}),mode:m.a.oneOf(["item-comparison","time-comparison"]),screenReaderFormat:m.a.oneOfType([m.a.string,m.a.func]),orderedKeys:m.a.array,tooltipLabelFormat:m.a.oneOfType([m.a.string,m.a.func]),tooltipValueFormat:m.a.oneOfType([m.a.string,m.a.func]),tooltipPosition:m.a.oneOf(["below","over"]),tooltipTitle:m.a.string,chartType:m.a.oneOf(["bar","line","curve-line","donut"]),width:m.a.number,xFormat:m.a.oneOfType([m.a.string,m.a.func]),x2Format:m.a.oneOfType([m.a.string,m.a.func]),yBelow1Format:m.a.oneOfType([m.a.string,m.a.func]),yFormat:m.a.oneOfType([m.a.string,m.a.func])},Be.defaultProps={baseValue:0,data:[],dateParser:"%Y-%m-%dT%H:%M:%S",height:200,margin:{bottom:30,left:40,right:0,top:20},mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",tooltipPosition:"over",tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",chartType:"line",width:600,xFormat:"%Y-%m-%d",x2Format:"",yBelow1Format:".3~f",yFormat:".3~s"};var Me=Be,Le=n(51),Ue=n(248);function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$e(e);if(t){var a=$e(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ye(this,n)}}function Ye(e,t){if(t&&("object"===Ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(l,e);var t,n,o,c=ze(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this)).listRef=Object(r.createRef)(),e.state={isScrollable:!1},e}return t=l,(n=[{key:"componentDidMount",value:function(){this.updateListScroll(),window.addEventListener("resize",this.updateListScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateListScroll)}},{key:"updateListScroll",value:function(){if(this&&this.listRef){var e=this.listRef.current,t=e.scrollHeight-e.scrollTop<=e.offsetHeight;this.setState({isScrollable:!t})}}},{key:"render",value:function(){var e=this.props,t=(e.colorScheme,e.data),n=e.handleLegendHover,o=e.handleLegendToggle,c=e.interactive,l=e.legendDirection,u=(e.legendValueFormat,e.instanceId),s=e.totalLabel,f=this.state.isScrollable,b=t.filter((function(e){return e.visible})),p=b.length,d="column"===l&&t.length>5&&s;return t.length,Object(r.createElement)("div",{className:i()("bwf-legend","bwf-legend-direction-".concat(l),{"has-total":d,"is-scrollable":f},this.props.className)},Object(r.createElement)("ul",{className:"bwf-legend-list",ref:this.listRef,onScroll:d?this.updateListScroll:null},t.map((function(e,t){return Object(r.createElement)("li",{className:i()("bwf-legend-item",{"bwf-legend-item-checked":e.visible}),key:e.key,id:"bwf-legend-".concat(u,"__item__").concat(e.key),onMouseEnter:n,onMouseLeave:n,onBlur:n,onFocus:n},Object(r.createElement)("button",{onClick:o,id:"bwf-legend-".concat(u,"__item-button__").concat(e.key),disabled:e.visible&&p<=1||!e.visible&&p>=5||!c,title:p>=5?Object(a.sprintf)(Object(a.__)("You may select up to %d items.","funnel-builder"),5):""},Object(r.createElement)("div",{className:"bwf-legend-item-container"},Object(r.createElement)(Ue.a,{checked:e.visible,onChange:function(){},color:1===t?we.NOTICE_YELLOW:we.BLUE_BASE}),Object(r.createElement)("span",{className:"bwf-legend-item-title"},e.label))))}))),d&&Object(r.createElement)("div",{className:"bwf-legend-total"},s))}}])&&Ke(t.prototype,n),o&&Ke(t,o),l}(r.Component);Qe.propTypes={className:m.a.string,colorScheme:m.a.func,data:m.a.array.isRequired,handleLegendToggle:m.a.func,handleLegendHover:m.a.func,interactive:m.a.bool,legendDirection:m.a.oneOf(["row","column"]),legendValueFormat:m.a.oneOfType([m.a.string,m.a.func]),totalLabel:m.a.string,instanceId:m.a.number},Qe.defaultProps={interactive:!0,legendDirection:"row",legendValueFormat:","};var We=Object(Le.withInstanceId)(Qe);n(412);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ot(e);if(t){var a=ot(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return at(e)}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){switch(t){case"left_space":return[e+" ",""];case"right":return["",e];case"right_space":return[""," "+e];case"left":default:return[e,""]}}var ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(d,e);var t,n,o,u=nt(d);function d(e){var t,n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),t=u.call(this,e),n=at(t),o=function(){return Object(r.createElement)("div",{className:"bwf-chart__donut-legends"},t.props.data.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-chart__donut-legend",key:"bwf-chart__donut-legend-".concat(t)},Object(r.createElement)("div",{className:"bwf-chart__donut-legend-color",style:{backgroundColor:e.color[0]}}),e.title)})))},(a="getDonutLegends")in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o,t.chartBodyRef=Object(r.createRef)();var i=t.getDataKeys();return t.state={focusedKeys:[],visibleKeys:i.slice(0,5),width:0},t.prevDataKeys=i.sort(),t.handleTypeToggle=t.handleTypeToggle.bind(at(t)),t.handleLegendToggle=t.handleLegendToggle.bind(at(t)),t.handleLegendHover=t.handleLegendHover.bind(at(t)),t.updateDimensions=t.updateDimensions.bind(at(t)),t.getVisibleData=Object(p.a)(t.getVisibleData),t.getOrderedKeys=Object(p.a)(t.getOrderedKeys),t.setInterval=t.setInterval.bind(at(t)),t}return t=d,(n=[{key:"getDataKeys",value:function(){var e=this.props,t=e.data,n=e.filterParam,r=e.mode,a=e.query;if("item-comparison"===r){var o=n?Object(h.e)(a[n]):[];return this.getOrderedKeys([],[],o).map((function(e){return e.key}))}return K(t)}},{key:"componentDidUpdate",value:function(){var e=this.props.data;if(e&&e.length){var t=K(e).sort();if(!Object(l.isEqual)(t,this.prevDataKeys)){var n=this.getDataKeys();this.prevDataKeys=t,this.setState({visibleKeys:n.slice(0,5)})}}}},{key:"componentDidMount",value:function(){this.updateDimensions(),this.setD3DefaultFormat(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"setD3DefaultFormat",value:function(){var e=this.props.currency,t=e.symbol,n=e.symbolPosition,r=e.decimalSeparator,a=e.thousandSeparator;Object(c.a)({decimal:r,thousands:a,grouping:[3],currency:it(t,n)})}},{key:"getOrderedKeys",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.props,a=r.data,o=r.legendTotals,i=r.mode;if(!a||0===a.length)return[];var c=a.reduce((function(e,t){return Object.entries(t).forEach((function(t){var n=Ze(t,2),r=n[0],a=n[1];"date"===r||e[r]||(e[r]=a.label)})),e}),{}),l=Object.entries(c).map((function(n){var r=Ze(n,2),i=r[0],c=r[1];return{focus:0===e.length||e.includes(i),key:i,label:c,total:o&&void 0!==o[i]?o[i]:"conversion_rate"!==i?a.reduce((function(e,t){return e+t[i].value}),0):0!==a.reduce((function(e,t){return e+t.conversion.value}),0)?a.reduce((function(e,t){return e+t.conversion.value}),0)/a.reduce((function(e,t){return e+t.view.value}),0)*100:0,visible:t.includes(i)}}));return"item-comparison"===i?l.sort((function(e,t){return t.total-e.total})).filter((function(e){return e.total>0||n.includes(parseInt(e.key,10))})):l}},{key:"handleTypeToggle",value:function(e){if(this.props.chartType!==e){var t=this.props,n=t.path,r=t.query,a=t.onChartChange,o=void 0===a?l.noop:a,i=t.updateQuery;(void 0===i||i)&&Object(h.k)({chartType:e},n,r),o(e)}}},{key:"handleLegendToggle",value:function(e){if(this.props.interactiveLegend){var t=e.currentTarget.id.split("_").pop(),n=this.state,r=n.focusedKeys,a=n.visibleKeys;a.includes(t)?this.setState({focusedKeys:Object(l.without)(r,t),visibleKeys:Object(l.without)(a,t)}):this.setState({focusedKeys:r.concat([t]),visibleKeys:a.concat([t])})}}},{key:"handleLegendHover",value:function(e){if("mouseleave"===e.type||"blur"===e.type)this.setState({focusedKeys:[]});else if("mouseenter"===e.type||"focus"===e.type){var t=e.currentTarget.id.split("__").pop();this.setState({focusedKeys:[t]})}}},{key:"updateDimensions",value:function(){this.setState({width:this.props.width?this.props.width:this.chartBodyRef.current.offsetWidth})}},{key:"getVisibleData",value:function(e,t){var n=t.filter((function(e){return e.visible}));return Object(l.isEmpty)(n)?[]:e.map((function(e){var t={date:e.date};return n.forEach((function(n){t[n.key]=e[n.key]})),t}))}},{key:"setInterval",value:function(e){var t=this.props,n=t.path,r=t.query,a=t.onIntervalChange,o=void 0===a?l.noop:a,i=t.updateQuery;(void 0===i||i)&&Object(h.k)({interval:e},n,r),o(e)}},{key:"renderIntervalSelector",value:function(){var e=this.props,t=e.interval,n=e.allowedIntervals;if(!n||n.length<1)return null;!0===n.includes("quarter")&&n.splice(n.indexOf("quarter"),1);var o={hour:Object(a.__)("By hour","funnel-builder"),day:Object(a.__)("By day","funnel-builder"),week:Object(a.__)("By week","funnel-builder"),month:Object(a.__)("By month","funnel-builder"),quarter:Object(a.__)("By quarter","funnel-builder"),year:Object(a.__)("By year","funnel-builder")};return Object(r.createElement)(f.SelectControl,{value:t,options:n.map((function(e){return{value:e,label:o[e]}})),onChange:this.setInterval})}},{key:"getChartHeight",value:function(){var e=this.props,t=e.isViewportLarge;return e.isViewportMobile?180:t?300:220}},{key:"getLegendPosition",value:function(){var e=this.props,t=e.legendPosition,n=e.mode,r=e.isViewportWide;return t||(r&&"time-comparison"===n?"top":r&&"item-comparison"===n?"side":"bottom")}},{key:"render",value:function(){var e=this.state,t=e.focusedKeys,n=e.visibleKeys,o=e.width,c=this.props,u=c.baseValue,p=c.chartType,d=c.data,m=c.dateParser,y=c.emptyMessage,v=c.filterParam,O=c.interactiveLegend,g=c.interval,j=c.isRequesting,w=c.isViewportLarge,E=c.itemsLabel,_=c.mode,S=c.query,k=c.screenReaderFormat,C=c.showHeaderControls,N=c.title,T=c.tooltipLabelFormat,R=c.tooltipValueFormat,A=c.tooltipTitle,I=c.valueType,F=c.xFormat,D=c.x2Format,q=c.yBelow1Format,B=c.yFormat,M=c.hideTypeSelect,L=c.className,U=c.customHeaderItem,V=c.showLegend,K=c.height,H=c.emptyText,z=c.chartMeta,Y=c.chartId,$=c.customFooter,Q=c.isProFeatureLocked,W=v?Object(h.e)(S[v]):[],G=this.getOrderedKeys(t,n,W),X=j||Object(l.isEmpty)(d)?null:this.getVisibleData(d,G),Z=this.getLegendPosition(),J="top"===Z?"row":"column",ee="side"===Z?"row":"column",te=K||this.getChartHeight(),ne=j||!V?null:"donut"===p?this.getDonutLegends():Object(r.createElement)(We,{colorScheme:b.a,data:G,handleLegendHover:this.handleLegendHover,handleLegendToggle:this.handleLegendToggle,interactive:O,legendDirection:J,legendValueFormat:R,totalLabel:Object(a.sprintf)(E,G.length)}),re=B,ae=q;if(!B)switch(I){case"average":re=",.0f";break;case"currency":re="$.3~s",ae="$.3~f";break;case"number":re=",.0f"}return Object(r.createElement)("div",Xe({className:i()("bwf-chart",L)},Y&&{id:Y}),C&&Object(r.createElement)("div",{className:"bwf-chart-header"},Object(r.createElement)("div",{className:"bwf-chart-title"},N),"top"===Z&&ne,U,this.renderIntervalSelector(),!M&&Object(r.createElement)(f.NavigableMenu,{className:"bwf-chart-types",orientation:"horizontal",role:"menubar"},Object(r.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"line"===p}),title:Object(a.__)("Line chart","funnel-builder"),"aria-checked":"line"===p,role:"menuitemradio",tabIndex:"line"===p?0:-1,onClick:Object(l.partial)(this.handleTypeToggle,"line")},Object(r.createElement)(s.a,{icon:"line-graph"})),Object(r.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"bar"===p}),title:Object(a.__)("Bar chart","funnel-builder"),"aria-checked":"bar"===p,role:"menuitemradio",tabIndex:"bar"===p?0:-1,onClick:Object(l.partial)(this.handleTypeToggle,"bar")},Object(r.createElement)(s.a,{icon:"stats-alt"})))),Object(r.createElement)(P.b,{component:!1},Object(r.createElement)("div",{className:i()("bwf-chart-body","bwf-chart-body-".concat(ee)),ref:this.chartBodyRef},"side"===Z&&ne,j&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},Object(a.__)("Your requested data is loading","funnel-builder")),Object(r.createElement)(x,{height:te})),!j&&!Object(l.isEmpty)(X)&&o>0&&Object(r.createElement)(Me,{baseValue:u,chartType:p,colorScheme:b.a,data:X,dateParser:m,height:te,emptyMessage:y,interval:g,margin:{bottom:50,left:50,right:30,top:0},mode:_,orderedKeys:G,screenReaderFormat:k,tooltipLabelFormat:T,tooltipValueFormat:R,tooltipPosition:w?"over":"below",tooltipTitle:A,valueType:I,width:"row"===ee?o-320:o,xFormat:F,x2Format:D,yBelow1Format:ae,yFormat:re,emptyText:H,chartMeta:z,chartId:Y,isProFeatureLocked:Q})),"bottom"===Z&&Object(r.createElement)("div",{className:"bwf-chart-footer"},ne)),$)}}])&&et(t.prototype,n),o&&et(t,o),d}(r.Component);ct.propTypes={allowedIntervals:m.a.array,baseValue:m.a.number,chartType:m.a.oneOf(["bar","line","curve-line","donut"]),data:m.a.array.isRequired,dateParser:m.a.string.isRequired,emptyMessage:m.a.string,filterParam:m.a.string,itemsLabel:m.a.string,mode:m.a.oneOf(["item-comparison","time-comparison"]),path:m.a.string,query:m.a.object,interactiveLegend:m.a.bool,interval:m.a.oneOf(["hour","day","week","month","quarter","year",""]),intervalData:m.a.object,isRequesting:m.a.bool,legendPosition:m.a.oneOf(["bottom","side","top"]),legendTotals:m.a.object,screenReaderFormat:m.a.oneOfType([m.a.string,m.a.func]),showHeaderControls:m.a.bool,title:m.a.oneOfType([m.a.string,m.a.object]),tooltipLabelFormat:m.a.oneOfType([m.a.string,m.a.func]),tooltipValueFormat:m.a.oneOfType([m.a.string,m.a.func]),tooltipTitle:m.a.string,valueType:m.a.string,xFormat:m.a.string,x2Format:m.a.string,yBelow1Format:m.a.string,yFormat:m.a.string,currency:m.a.object,showLegend:m.a.bool,isProFeatureLocked:m.a.bool},ct.defaultProps={baseValue:0,chartType:"line",data:[],dateParser:"%Y-%m-%dT%H:%M:%S",interactiveLegend:!0,interval:"day",isRequesting:!1,mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",showHeaderControls:!0,tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",xFormat:"%d",x2Format:"%b %Y",currency:{symbol:"$",symbolPosition:"left",decimalSeparator:".",thousandSeparator:","},className:"",showLegend:!0};t.a=Object(y.withViewportMatch)({isViewportMobile:"< medium",isViewportLarge:">= large",isViewportWide:">= wide"})(ct)},404:function(e,t){},410:function(e,t,n){},411:function(e,t,n){},412:function(e,t,n){},414:function(e,t,n){},448:function(e,t,n){},449:function(e,t,n){"use strict";var r=n(0),a=n(51),o=n(17),i=n.n(o),c=n(9),l=n(7),u=n.n(l);n(450);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=["label","value","help","className","instanceId","onChange","onClick","prefix","suffix","type","disabled","trafficError"];function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,n,a,o=y(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={isFocused:!1},t}return t=i,(n=[{key:"handleFocusOutside",value:function(){this.setState({isFocused:!1})}},{key:"handleOnClick",value:function(e,t){this.setState({isFocused:!0}),"function"==typeof t&&t(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.value,o=t.help,i=t.className,l=t.instanceId,s=t.onChange,d=t.onClick,m=t.prefix,y=t.suffix,h=t.type,v=t.disabled,O=t.trafficError,g=void 0!==O&&O,j=p(t,f),w=(this.state.isFocused,"inspector-text-control-with-affixes-".concat(l)),E=[];o&&E.push("".concat(w,"__help")),m&&E.push("".concat(w,"__prefix")),y&&E.push("".concat(w,"__suffix"));var _=u()(i,{"with-value":""!==a,empty:""===a}),S=u()("text-control-with-affixes",{"text-control-with-prefix":m,"text-control-with-suffix":y,disabled:v});return Object(r.createElement)(c.BaseControl,{label:n,id:w,help:o,className:_,onClick:function(t){return e.handleOnClick(t,d)}},Object(r.createElement)("div",{className:S},m&&Object(r.createElement)("span",{id:"".concat(w,"__prefix"),className:"text-control-with-affixes__prefix"},m),Object(r.createElement)("input",b({className:"components-text-control__input ".concat(g?"bwf-error":""),type:h,id:w,value:a,onChange:function(e){return s(e.target.value)},"aria-describedby":E.join(" "),disabled:v,onFocus:function(){return e.setState({isFocused:!0})}},j)),y&&Object(r.createElement)("span",{id:"".concat(w,"__suffix"),className:"text-control-with-affixes__suffix"},y)))}}])&&d(t.prototype,n),a&&d(t,a),i}(r.Component);O.defaultProps={type:"text"},O.propTypes={label:i.a.string,help:i.a.string,type:i.a.string,value:i.a.string.isRequired,className:i.a.string,onChange:i.a.func.isRequired,prefix:i.a.node,suffix:i.a.node,disabled:i.a.bool},t.a=Object(a.compose)([a.withInstanceId,c.withFocusOutside])(O)},450:function(e,t,n){},556:function(e,t,n){},557:function(e,t,n){},558:function(e,t,n){},559:function(e,t,n){},560:function(e,t,n){},561:function(e,t,n){},562:function(e,t,n){},563:function(e,t,n){},564:function(e,t,n){},565:function(e,t,n){},566:function(e,t,n){},567:function(e,t,n){},568:function(e,t,n){}}]);