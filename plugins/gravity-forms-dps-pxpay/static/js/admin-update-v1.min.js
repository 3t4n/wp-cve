!function(s){var p=!1,e=[],d=0;function r(){var p=gfdpspxpay_updatev1[d];"end"===p?(s("#gfdpspxpay-upgrade").replaceWith("<strong>Done.</strong>"),s("#gfdpspxpay-updatev1-progress").hide()):(s("#gfdpspxpay-upgrade").text("Processing "+p+"..."),s("#gfdpspxpay-updatev1-progress").show(),s.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:p+"_list"},a))}function a(p){p&&p.success&&(e=p.data.ids,g(0,p.data.step))}function g(p,a){p<e.length&&s.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:a,id:e[p],next:p+1},t)}function t(p){var a,t;p&&p.success?((t=p.data.next)<e.length?(a=Math.floor(t/e.length*100)+"%",g(t,p.data.step)):(a="100%",d++,r()),s("#gfdpspxpay-updatev1-progress > div").css({width:a}).text(a)):(t=p.data.error||"ERROR",s("#gfdpspxpay-updatev1-progress > div").css({width:"100%",backgroundColor:"transparent"}).text(t))}s("#gfdpspxpay-upgrade").on("click",function(){p||(p=!0,r())})}(jQuery);