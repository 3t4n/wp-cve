"use strict";var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(){function i(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")}var r,n;function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.customer_selected=e.customer_selected.bind(e),e.edit_address_button=e.edit_address_button.bind(e),e}r=null!=r?r:jQuery,n=window.PayPal_Here_Meta_Box_Order_Data=(_inherits(t,window.PayPal_Here_Meta_Box),_createClass(t,[{key:"initialize",value:function(){if(r("meta[name=viewport]").attr("content","width=device-width,initial-scale=1.0,user-scalable=no"),""!==r("input#_billing_first_name").val()&&r(".edit-address-button.more-details-button").hide(),""===r("input#_billing_first_name").val())return r(".edit-address-button.heading-button.billing").hide()}},{key:"bind_event_listeners",value:function(){var t=this;return r("#customer-selection").on("select2:select",function(e){return t.customer_selected(e)}),r(document.body).on("click","a.edit-address-button",function(e){return t.edit_address_button(e)})}},{key:"customer_selected",value:function(){var e,t=this;return i(this,n),e=r("#customer-selection").val(),this.block_ui(),e={paypal_here:1,user_id:e,action:"woocommerce_get_customer_details",security:this.paypal_here.get_customer_details_nonce},r.ajax({url:this.paypal_here.ajax_url,data:e,type:"POST",success:function(e){return e&&e.billing&&t.import_address("billing",e.billing,e.billing_formatted),e&&e.shipping&&t.import_address("shipping",e.shipping,e.shipping_formatted),e.billing_phone_formatted&&r("<p><strong>"+t.paypal_here.i18n.phone_number+"</strong>"+e.billing_phone_formatted+"</p>").appendTo(r(".address-column.billing .address")),e.billing_email_formatted&&r("<p><strong>"+t.paypal_here.i18n.email_address+"</strong>"+e.billing_email_formatted+"</p>").appendTo(r(".address-column.billing .address")),t.view_all(),t.unblock_ui()}})}},{key:"import_address",value:function(e,t,i){var n,s;for(s in t)n=t[s],r(":input#_"+e+"_"+s).val(n).change();if(i)return r(".address-column."+e+" .address").html("<p>"+i+"</p>")}},{key:"edit_address_button",value:function(e){return i(this,n),(e=r(e.target)).hasClass("billing")&&this.edit_billing(),e.hasClass("shipping")&&this.edit_shipping(),!1}},{key:"set_address_view",value:function(e,t){var i;if(-1<["all","billing","shipping"].indexOf(e)&&-1<["edit","view"].indexOf(t))return i=".address-column",i=r(i="all"!==e?i+"."+e:i),"edit"===t&&(i.find(".address").hide(),i.find(".edit-address-button").hide(),i.find(".edit_address").show(),i.find(".edit_address_above").show(),i.find(".show-on-edit").show()),"view"===t?(i.find(".address").show(),i.find(".edit-address-button").show(),i.find(".edit-address-button.more-details-button").hide(),i.find(".edit_address").hide(),i.find(".edit_address_above").hide(),i.find(".show-on-edit").hide()):void 0}},{key:"edit_all",value:function(){return this.set_address_view("all","edit")}},{key:"view_all",value:function(){return this.set_address_view("all","view")}},{key:"edit_billing",value:function(){return this.set_address_view("billing","edit")}},{key:"view_billing",value:function(){return this.set_address_view("billing","view")}},{key:"edit_shipping",value:function(){return this.set_address_view("shipping","edit")}},{key:"view_shipping",value:function(){return this.set_address_view("shipping","view")}}]),t)}.call(void 0);