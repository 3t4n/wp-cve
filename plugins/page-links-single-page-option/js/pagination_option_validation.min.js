function findTags(e){openingTags=e("#before-content").val(),tempElement=document.createElement("div"),e(tempElement).append(openingTags),e(tempElement).html().indexOf(openingTags)>-1&&(closingTags=e(tempElement).html().replace(openingTags,""),e("#after-content").val(closingTags))}function processChanges(e){var a="",n=e("#seperator").val(),s=e("#wrapper-tag").val();""!=s&&(a+="<"+e("#wrapper-tag").val()+' class="'+e("#wrapper-class").val()+'" id="'+e("#wrapper-id").val()+'">\n\t'),a+=e("#before-content").val(),a+="\n\t "+processChangesAddLink('<a href="#" class="'+e("#firstpageclass").val()+'">'+e("#firstpage").val()+"</a>")+" "+n,a+="\n\t "+processChangesAddLink('<a href="#" class="'+e("#previouspageclass").val()+'">'+e("#link-before").val()+e("#previouspagelink").val()+e("#link-after").val()+"</a>")+" "+n,a+="\n\t "+e("#elipsis").val()+" "+n,e("#pages-to-scroll-count").length>0?numbers=e("#pages-to-scroll-count").val():numbers=3;for(var t=1;t<=numbers;t++)a+="\n\t "+processChangesAddLink(processChangesAddNumber(t))+" "+n;a+="\n\t "+e("#elipsis").val()+" "+n,a+="\n\t "+processChangesAddLink('<a href="#" class="'+e("#nextpageclass").val()+'">'+e("#link-before").val()+e("#nextpagelink").val()+e("#link-after").val()+"</a>")+" "+n,a+="\n\t "+processChangesAddLink('<a href="#" class="'+e("#lastpageclass").val()+'">'+e("#lastpage").val()+"</a>")+" ",e("#view-single-link").is(":checked")&&(a+=n+"\n\t "+processChangesAddLink('<a href="#">'+e("#text-single-link").val()+"</a>")),a+="\n\t "+e("#after-content").val(),""!=s&&(a+="\n</"+e("#wrapper-tag").val()+">\n"),a="<strong>Browser</strong><BR />"+a.replace("\n","")+'<BR /><BR /><strong>HTML</strong><BR /><xmp style="width: 50%;">'+a+"</xmp>",e("div.anatomy_holder").html(a)}function processChangesAddLink(e){var a="",n=jQuery("#link-wrapper-outter").val(),s=jQuery("#link-wrapper").val();return""!=s&&(e=e.replace(">","><"+s+' class="'+jQuery("#link-wrapper-class").val()+'">')),""!=s&&(e=e.replace("</a>","</"+s+"></a>")),""!=n&&(a+="<"+n+' class="'+jQuery("#link-wrapper-outter-class").val()+'">'),a+=e,""!=n&&(a+="</"+n+">"),a}function processChangesAddNumber(e){var a=jQuery("#pagelink").val();return'<a href="#">'+(a=(a=a.replace("%page%",e)).replace("%title%","Title"))+"</a>"}jQuery(document).ready(function(e){e("#before-content").on("keyup",function(){e(this).val().indexOf("script")>-1&&e(this).val(e(this).val().replace("script","span")),findTags(e)}).on("keydown",function(a){8==a.keyCode&&(e(this).val().indexOf("script")>-1&&e(this).val(e(this).val().replace("script","span")),findTags(e))}),e("#wrapper-tag").on("keyup",function(){e(this).val().indexOf("script")>-1&&e(this).val(e(this).val().replace("script","span"))}).on("keydown",function(a){8==a.keyCode&&e(this).val().indexOf("script")>-1&&e(this).val(e(this).val().replace("script","span"))}),e("#link-wrapper").on("keyup",function(){e(this).val().indexOf("script")>-1&&e(this).val(e(this).val().replace("script","span"))}).on("keydown",function(a){8==a.keyCode&&e(this).val().indexOf("script")>-1&&e(this).val(e(this).val().replace("script","span"))}),e("#wrapper-id").keydown(function(a){if(32==a.keyCode)return e(this).val(e(this).val()+"-"),!1}).change(function(a){e(this).val(function(e,a){return a.replace(" ","-")})}),e("#sh_pagelinks_options_form input").blur(function(){processChanges(e)}),processChanges(e)});