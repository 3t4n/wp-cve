!function($){"use strict";$("body"),$(document),$("#page"),$("html");var HesterCoreAdminWidgets={init:function(){$(document).ready(HesterCoreAdminWidgets.ready),$(window).on("load",HesterCoreAdminWidgets.load),HesterCoreAdminWidgets.bindUIActions(),$(document).trigger("hesterCoreWidgetsReady")},ready:function(){HesterCoreAdminWidgets.initRepeatableSortable()},load:function(){},bindUIActions:function(){var $this,template,$widget,index=0;$(document).on("click",".hester-repeatable-widget .add-new-item",function(e){e.preventDefault(),$this=$(this),index=parseInt($this.attr("data-index")),template=wp.template("hester-core-repeatable-item");var data={index:index,name:$this.attr("data-widget-name"),id:$this.attr("data-widget-id")};index++,$this.attr("data-index",index),$(template(data)).insertBefore($this.closest(".hester-repeatable-footer")),$this.closest(".widget-inside").trigger("change"),update_widget_repeatable_class($this)}),$(document).on("click",".hester-repeatable-widget .remove-repeatable-item",function(e){e.preventDefault(),$this=$(this),$widget=$this.closest(".hester-repeatable-container"),$this.closest(".widget-inside").trigger("change"),$this.closest(".hester-repeatable-item").remove(),update_widget_repeatable_class($widget)}),$(document).on("click",".hester-repeatable-widget .hester-repeatable-item-title",function(){$(this).closest(".hester-repeatable-item").toggleClass("open")});var update_widget_repeatable_class=function($target){var $widget=$target.closest(".hester-repeatable-container");$widget.find(".hester-repeatable-item").length?$widget.removeClass("empty"):$widget.addClass("empty")};$(document).on("widget-updated widget-added",function(e,widget){widget.find(".hester-repeatable-container").length&&HesterCoreAdminWidgets.initRepeatableSortable()})},initRepeatableSortable:function(){$(".hester-repeatable-container").sortable({handle:".hester-repeatable-item-title",accent:".hester-repeatable-item",containment:"parent",tolerance:"pointer",change:function(event,ui){$(this).closest(".widget-inside").trigger("change")}})}};HesterCoreAdminWidgets.init(),window.HesterCoreAdminWidgets=HesterCoreAdminWidgets}(jQuery);