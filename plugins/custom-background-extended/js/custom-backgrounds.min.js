jQuery(document).ready(function($){$('.cbe-wp-color-picker').wpColorPicker();$('label[for="cbe-background-color"]').hide();if($('.cbe-background-image-url').attr('src')){$('.cbe-background-image-url').show()}else{$('.cbe-background-image-url').hide()}if($('input#cbe-background-image').val()){$('.cbe-add-media-text').hide();$('.cbe-remove-media, .cbe-background-image-options, .cbe-background-image-url').show()}else{$('.cbe-add-media-text').show();$('.cbe-remove-media, .cbe-background-image-options, .cbe-background-image-url').hide()}$('.cbe-remove-media').click(function(j){j.preventDefault();$('#cbe-background-image').val('');$('.cbe-add-media-text').show();$('.cbe-remove-media, .cbe-background-image-url, .cbe-background-image-options').hide()});var cbe_custom_backgrounds_frame;$('.cbe-add-media').click(function(j){j.preventDefault();if(cbe_custom_backgrounds_frame){cbe_custom_backgrounds_frame.open();return}cbe_custom_backgrounds_frame=wp.media.frames.cbe_custom_backgrounds_frame=wp.media({className:'media-frame cbe-custom-background-extended-frame',frame:'select',multiple:false,title:cbe_custom_backgrounds.title,library:{type:'image'},button:{text:cbe_custom_backgrounds.button}});cbe_custom_backgrounds_frame.on('select',function(){var media_attachment=cbe_custom_backgrounds_frame.state().get('selection').first().toJSON();$('#cbe-background-image').val(media_attachment.id);$('.cbe-background-image-url').attr('src',media_attachment.url);$('.cbe-add-media-text').hide();$('.cbe-background-image-url, .cbe-remove-media, .cbe-background-image-options').show()});cbe_custom_backgrounds_frame.open()})});