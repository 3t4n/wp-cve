!function(){"use strict";var e=window.React,t=window.wp.blocks,l=window.wp.blockEditor,n=window.wp.components,r=window.wp.element,o=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"dotdigital-for-wordpress/signup-form","title":"Dotdigital Signup Form","category":"widgets","description":"Add a signup form.","supports":{"html":true,"anchor":true},"textdomain":"dotdigital-for-wordpress","editorScript":"file:./index.js","editorStyle":"file:./index.css","render":"file:./render.php","attributes":{"showtitle":{"type":"boolean","default":true},"showdesc":{"type":"boolean","default":true},"redirecturl":{"type":"string"},"is_ajax":{"type":"boolean","default":false}},"keywords":["form"]}');(0,t.registerBlockType)(o,{edit:function({attributes:t,setAttributes:o}){const{showtitle:a,showdesc:i,redirecturl:c,is_ajax:s}=t,d=(0,l.useBlockProps)(),[p,u]=(0,r.useState)(""),[m,w]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=new URLSearchParams;e.append("showtitle",a?1:0),e.append("showdesc",i?1:0),e.append("redirection",null!=c?c:""),e.append("is_ajax",s?1:0),w(!0),fetch(`//${window.location.host}?rest_route=/dotdigital/v1/signup-widget&${e.toString()}`).then((e=>e.json())).then((e=>{u(e)})).finally((()=>w(!1)))}),[t]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(n.Panel,null,(0,e.createElement)(n.PanelBody,{title:"Configuration",initialOpen:!0},(0,e.createElement)(n.PanelRow,null,(0,e.createElement)(n.CheckboxControl,{label:"Show title",checked:a,onChange:e=>{o({showtitle:e})}})),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)(n.CheckboxControl,{label:"Show description",checked:i,onChange:e=>{o({showdesc:e})}})),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)(n.CheckboxControl,{label:"Submit forms without reloading page (AJAX)",checked:s,onChange:e=>{o({is_ajax:e})}})),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{className:"url-button-wrapper"},(0,e.createElement)(l.URLInputButton,{__nextHasNoMarginBottom:!0,label:"Redirect Url",url:c,onChange:e=>{o({redirecturl:e})}}))),(0,e.createElement)(n.PanelRow,null,c?(0,e.createElement)("p",null,(0,e.createElement)("a",{target:"_blank",rel:"noreferrer",href:c},c)):(0,e.createElement)("p",{className:"components-checkbox-control__label"},"Select redirect URL"))))),(0,e.createElement)("div",{...d,style:{backgroundColor:"#f6f7f7",padding:"20px"}},p?(0,e.createElement)("div",{dangerouslySetInnerHTML:{__html:p}}):"",(0,e.createElement)("div",{className:"dd-widget-block-overlay",style:{display:m?"block":"none"}}),(0,e.createElement)(n.Spinner,{style:{display:m?"block":"none"},className:"dd-widget-block-loader"})))},icon:(0,e.createElement)((function(){return(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},(0,e.createElement)("path",{d:"M16,2.78A13.22,13.22,0,1,1,2.78,16,13.23,13.23,0,0,1,16,2.78M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z",fill:"#000"}),(0,e.createElement)("path",{d:"M16,8.29A7.74,7.74,0,1,1,8.26,16,7.75,7.75,0,0,1,16,8.29m0-2.78A10.52,10.52,0,1,0,26.52,16,10.52,10.52,0,0,0,16,5.51Z",fill:"#000"}),(0,e.createElement)("path",{d:"M16,13.77A2.26,2.26,0,1,1,13.75,16,2.26,2.26,0,0,1,16,13.77M16,11a5,5,0,1,0,5,5,5,5,0,0,0-5-5Z",fill:"#000"}))}),null)})}();