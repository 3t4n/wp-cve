var global=(jQuery,{debounce:function(i,e,r){var p;return function(){var a=this,s=arguments,t=r&&!p;clearTimeout(p),p=setTimeout(function(){p=null,r||i.apply(a,s)},e),t&&i.apply(a,s)}}}),example=(jQuery,{}),mCard=function(h){h(".wpgr-m_card");var a=h(".wpgr-m_card--content"),s=(h(".wpgr-m_card__toggle"),h(".wpgr-m_btn__open")),m=h(".wpgr-o_popup"),w=(h(".wpgr-m_card__desc"),h("body"));s.on("click",function(a){a.stopPropagation(),function(a){var s=h(a.target).closest(".wpgr-m_card"),t=s.data("wish-id"),i=s.closest(".wpgr-wishlist").data("id"),n=parseInt(s.data("parts")),o=parseInt(s.data("parts-given")),_=parseFloat(s.data("price-per-part")),e=s.data("parts-string"),r=s.data("part-string"),l=s.data("currency"),d=s.data("currency-placement");if(m.data("wish-id",t),m.data("wishlist-id",i),m.data("has-parts",1<n),m.data("parts",n),m.data("parts-given",o),m.addClass("is-active"),w.addClass("no-scroll"),s.hasClass("wpgr-m_card--single")||s.hasClass("wpgr-m_card--parts")){if((f=m.find("#wpgr_popup_name")).addClass("is-active"),1<n){m.find(".wpgr-o_popup__parts").show(),$r=h(".wpgr-o_popup__rangeslider");var u=h(".wpgr-o_popup__rangeslider-result"),c=h(".wpgr-o_popup__rangeslider-val"),g=h(".wpgr-o_popup__rangeslider-total"),v=h(".wpgr-o_popup__rangeslider-parts"),p={min:o,max:n,step:1,value:o+1};$r.attr(p),v.data("parts",e),v.data("part",r),$r.rangeslider({polyfill:!1,onInit:function(){var a=this.$range;if(""!=_){var s=a.find(".rangeslider__handle"),t=(this.value-o)*_;t=t%1==0?t:parseFloat(t).toFixed(2);var i='<div class="rangeslider__handle__value">'+("before"===d?l+t:t+l)+"</div>";s.append(i)}else m.find(".wpgr-o_popup__rangeslider-wrapper").addClass("no-price");c.html(this.max);var e=u.css("width");if(u.css("flex-basis",e),c.html(this.value),g.html(n),0<this.min){var r=this.min/this.max*100;h('<div class="rangeslider__min" />').insertBefore(this.$range).width(r+"%")}v.html("<span>"+parseInt(this.max-this.min)+"</span> "+v.data("parts"));var p=v.css("width");v.css("flex-basis",p),1<this.value-this.min||this.value-this.min==0?v.html("<span>"+parseInt(this.value-this.min)+"</span> "+v.data("parts")):v.html("<span>"+parseInt(this.value-this.min)+"</span> "+v.data("part")),this.rangeDimension=this.$range.width(),this.maxHandlePos=this.$range.width()-this.handleDimension},onSlide:function(a,s){var t=this.$range.find(".rangeslider__handle__value"),i=(this.value-o)*_;i=i%1==0?i:parseFloat(i).toFixed(2),t.text("before"===d?l+i:i+l),c.html(s),1<this.value-this.min||this.value-this.min==0?v.html("<span>"+parseInt(this.value-this.min)+"</span> "+v.data("parts")):v.html("<span>"+parseInt(this.value-this.min)+"</span> "+v.data("part"))}}).on("input",function(){c[0].textContent=this.value}),$r.change()}}else{var f=m.find("#wpgr_popup_parts");m.find("#wpgr_popup_buyer");f.addClass("is-active")}}(a)}),a.on("click",function(a){var s=h(a.target),t=s.closest(".wpgr-m_card"),i=s.closest(".wpgr-m_card").find(".wpgr-m_card__content"),e=s.closest(".wpgr-m_card").find(".wpgr-m_card__toggle");if(!s.hasClass("wpgr-m_card__figure"))if(i.hasClass("is-active")){if(!(i.hasClass("is-active")&&s.hasClass("wpgr-m_card__toggle-icon")||s.hasClass("wpgr-m_card__toggle")))return;r()}else r();function r(){i.slideToggle("fast"),t.toggleClass("is-open"),i.toggleClass("is-active"),e.toggleClass("is-active")}})}(jQuery),mPopup=function(d){var t=d(".wpgr-o_popup"),a=d(".wpgr-o_popup__step"),s=a.find(".wpgr-o_popup__btn-prev"),i=a.find(".wpgr-o_popup__btn-next"),e=(a.find(".wpgr-o_popup__btn-save"),a.find(".wpgr-o_popup__btn-close")),r=a.find(".wpgr-o_popup__list-item-01"),p=a.find(".wpgr-o_popup__list-item-02"),n=d(".wpgr-o_popup__input-wrapper input"),o=d(".wpgr-o_popup__input-textarea"),_=(d(".wpgr-o_popup__input-label"),d("#buyer_yes")),l=d("#buyer_no"),u=d(".wpgr-m_btn__buyer-content"),c=d("body");function g(){var a=d(this);a.prev().removeClass("is-done"),a.prev().addClass("is-active")}function v(){var a=d(this);a.val().length&&a.prev().addClass("is-done"),a.prev().removeClass("is-active")}function f(){a.removeClass("is-active"),t.removeClass("is-active"),c.removeClass("no-scroll"),t.find("#your_name2").val(""),t.find("#your_email").val(""),t.find("#your_message").val(""),t.find(".wpgr-o_popup__parts").hide(),t.find(".wpgr-o_popup__rangeslider").val(""),t.find(".wpgr-o_popup__rangeslider").rangeslider("destroy"),t.find(".rangeslider").remove(),t.find(".rangeslider__min").remove(),t.find(".wpgr-o_popup__rangeslider-parts").empty(),t.find(".wpgr-o_popup__rangeslider-wrapper").removeClass("no-price"),t.removeAttr("data-wish-id"),t.removeAttr("data-wishlist-id")}c.on("mousedown",function(a){!function(a){var s=d(a.target);if(s.hasClass("wpgr-m_btn__open"))return;if(!t.hasClass("is-active"))return;if(s.closest(".wpgr-o_popup__step").length&&(!s.hasClass("wpgr-o_popup__btn-close")||!s.hasClass("wpgr-o_popup__btn-save")))return;f()}(a)}),c.on("keyup",function(a){27==a.which&&f()}),i.on("click",function(a){var s;a.preventDefault(),(s=d(a.target).closest(".wpgr-o_popup__step")).removeClass("is-active"),s.next("#wpgr_popup_buyer").addClass("is-active")}),r.on("click",function(){$this=d(this),$this.closest(".wpgr-o_popup__step").removeClass("is-active"),d("#wpgr_popup_parts").addClass("is-active")}),p.on("click",function(){$this=d(this),$this.closest(".wpgr-o_popup__step").removeClass("is-active"),d("#wpgr_popup_buyer").addClass("is-active")}),t.on("submit",function(a){var s,t,i,e,r,p,n,o,_,l;a.preventDefault(),s=d(a.target).closest(".wpgr-o_popup"),t=s.data("wish-id"),i=s.data("wishlist-id"),e=s.data("has-parts"),r=s.find("#no_of_parts").val(),p=e?r-s.data("parts-given"):1,n=s.data("parts"),o=s.find("#your_name2").val(),_=s.find("#your_email").val(),l=s.find("#your_message").val(),d.ajax({url:variables.ajaxurl,type:"POST",dataType:"json",data:{action:"update_gift_availability",nonce:variables.update_gift_availabilty_nonce,version:"new",wishlist_id:i,gift_id:t,gift_availability:"false",gift_has_parts:e,gift_parts_reserved:p,gift_reserver:o,gift_reserver_email:_,gift_reserver_message:l}}).done(function(a){e&&(d('.wpgr-m_card[data-wish-id="'+t+'"]').find(".wpgr-m_card__progress span").width(r/n*100+"%"),d('.wpgr-m_card[data-wish-id="'+t+'"]').find(".wpgr-m_card__progress-wrapper > span").text(r),d('.wpgr-m_card[data-wish-id="'+t+'"]').data("parts-given",r)),r!=n&&e||d('.wpgr-m_card[data-wish-id="'+t+'"]').addClass("wpgr-m_card--bought")}).fail(function(){}),f()}),t.find("#your_name2").on("keypress",function(a){13==a.which&&(a.preventDefault(),t.submit())}),e.on("click",function(a){a.preventDefault(),f()}),s.on("click",function(a){a.preventDefault(),f()}),n.on("focusin",g),o.on("focusin",g),n.on("focusout",v),o.on("focusout",v),_.on("click",function(){if(u.hasClass("is-active"))return;u.addClass("is-active")}),l.on("click",function(){if(!u.hasClass("is-active"))return;u.removeClass("is-active")})}(jQuery);