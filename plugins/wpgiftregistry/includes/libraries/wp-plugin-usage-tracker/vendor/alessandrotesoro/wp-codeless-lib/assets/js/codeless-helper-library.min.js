!function(codelessUi){function _init(){null===_html&&(_doc=jQuery(document),_html=jQuery("html"),_body=jQuery("body"))}function _make_modal(){null===_modal_overlay&&(_modal_overlay=jQuery("<div></div>").addClass("codelessui-overlay").appendTo(_body)),_body.addClass("codelessui-has-overlay"),_html.addClass("codelessui-no-scroll")}function _close_modal(){_body.removeClass("codelessui-has-overlay"),_html.removeClass("codelessui-no-scroll")}var _doc=null,_html=null,_body=null,_modal_overlay=null;codelessUi.popup=function(){return _init(),new codelessUiWindow},jQuery(function(){_init()});var codelessUiWindow=function(){function _init(){_wnd=jQuery('<div class="codelessui-wnd"></div>'),_el_title=jQuery('<div class="codelessui-wnd-title"><span class="the-title"></span></div>'),_btn_close=jQuery('<a href="#" class="codelessui-wnd-close"><i class="dashicons dashicons-no-alt"></i></a>'),_el_content=jQuery('<div class="codelessui-wnd-content"></div>'),_el_title.appendTo(_wnd),_el_content.appendTo(_wnd),_btn_close.appendTo(_el_title),_wnd.appendTo(_body).hide(),_hook(),_visible=!1,_update_window()}function _hook(){_wnd&&(_wnd.on("click",".codelessui-wnd-close",_me.close),jQuery(window).on("resize",_check_size))}function _unhook(){_wnd&&(_wnd.off("click",".codelessui-wnd-close",_me.close),jQuery(window).off("resize",_check_size))}function _update_window(width,height){if(!_wnd)return!1;width=width||_width,height=height||_height;var styles={width:width,height:height,"margin-left":-1*(width/2),"margin-top":-1*(height/2)};if(_el_title.find(".the-title").text(_title),_content_changed){_wnd.find(".buttons").remove(),_wnd.removeClass(),_wnd.addClass("codelessui-wnd no-buttons"),_content instanceof jQuery?_el_content.html(_content.html()):_el_content.html(jQuery(_content).html());var buttons=_el_content.find(".buttons");buttons.length&&(buttons.appendTo(_wnd),_wnd.removeClass("no-buttons")),_wnd.addClass(_classes),_content_changed=!1}_wnd.is(":visible")?_wnd.animate(styles,200):_wnd.css(styles),_modal_overlay instanceof jQuery&&_modal_overlay.off("click",_modal_close),_visible?(_wnd.show(),_modal&&_make_modal(),_modal_overlay.on("click",_modal_close),_need_check_size&&(_need_check_size=!1,_check_size())):(_wnd.hide(),_close_modal())}function _modal_close(){return!!_wnd&&(!(!_modal_overlay instanceof jQuery)&&(_modal_overlay.off("click",_modal_close),void _me.close()))}function _check_size(){if(!_wnd)return!1;var me=jQuery(this),window_width=me.innerWidth(),window_height=me.innerHeight(),real_width=_width,real_height=_height;window_width<_width&&(real_width=window_width),window_height<_height&&(real_height=window_height),_update_window(real_width,real_height)}var _me=this,_visible=!1,_modal=!1,_width=740,_height=400,_title="Window",_content="",_classes="",_content_changed=!1,_need_check_size=!1,_onshow=null,_onhide=null,_onclose=null,_wnd=null,_el_title=null,_btn_close=null,_el_content=null,_status="hidden";this.modal=function(state){return _modal=!!state,_update_window(),_me},this.size=function(width,height){var new_width=Math.abs(parseFloat(width)),new_height=Math.abs(parseFloat(height));return isNaN(new_width)||(_width=new_width),isNaN(new_height)||(_height=new_height),_need_check_size=!0,_update_window(),_me},this.title=function(new_title){return _title=new_title,_update_window(),_me},this.content=function(data){return _content=data,_need_check_size=!0,_content_changed=!0,_update_window(),_me},this.set_class=function(class_names){return _classes=class_names,_content_changed=!0,_update_window(),_me},this.onshow=function(callback){return _onshow=callback,_me},this.onhide=function(callback){return _onhide=callback,_me},this.onclose=function(callback){return _onclose=callback,_me},this.loading=function(state){return state?_wnd.addClass("codelessui-loading"):_wnd.removeClass("codelessui-loading"),_me},this.confirm=function(args){return"visible"!==_status?_me:!args instanceof Object?_me:(args.layout="absolute",args.parent=_wnd,codelessui.confirm(args),_me)},this.show=function(){return _visible=!0,_need_check_size=!0,_status="visible",_update_window(),"function"==typeof _onshow&&_onshow.apply(_me,[_me.$()]),_me},this.hide=function(){return _visible=!1,_status="hidden",_update_window(),"function"==typeof _onhide&&_onhide.apply(_me,[_me.$()]),_me},this.close=function(){"closing"!==_status&&(_me.hide(),_status="closing","function"==typeof _onclose&&_onclose.apply(_me,[_me.$()]),_unhook(),_wnd.remove(),_wnd=null)},this.destroy=function(){var orig_onhide=_onhide;"closing"!==_status&&(_onhide=function(){"function"==typeof orig_onhide&&orig_onhide.apply(_me,[_me.$()]),_status="closing","function"==typeof _onclose&&_onclose.apply(_me,[_me.$()]),_wnd.remove(),_wnd=null,_popup=null,_me=null},_me.hide())},this.on=function(event,selector,callback){return _wnd.on(event,selector,callback),_wnd.filter(selector).length&&_wnd.on(event,callback),_me},this.off=function(event,selector,callback){return _wnd.off(event,selector,callback),_wnd.filter(selector).length&&_wnd.off(event,callback),_me},this.$=function(selector){return selector?_wnd.find(selector):_wnd},_me=this,_init()}}(window.codelessUi=window.codelessUi||{});