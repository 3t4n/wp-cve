!function(e){"use strict";function t(e,t,a){var o;(o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==o.readyState&&200==o.status&&o.responseText){var r=function e(t){var a=t.replace(/\r+/g,""),o=(a=a.replace(/^\s+|\s+$/g,"")).split("\n\n"),r="";if(o.length>0){r+="WEBVTT\n\n";for(var s=0;s<o.length;s++)r+=n(o[s])}return r}(o.responseText);if(r){var s=new Blob([r],{type:"text/vtt"}),i={kind:"subtitles",src:URL.createObjectURL(s),label:t.label,srclang:t.srclang};a&&(i.mode=a),e.addRemoteTextTrack(i,!0)}}},o.open("GET",t.src,!0),o.send()}function n(e){for(var t="",n=e.split(/\n/);n.length>3;){for(var a=3;a<n.length;a++)n[2]+="\n"+n[a];n.splice(3,n.length-3)}var o=0;if(!n[0].match(/\d+:\d+:\d+/)&&n[1].match(/\d+:\d+:\d+/)&&(t+=n[0].match(/\w+/)+"\n",o+=1),!n[o].match(/\d+:\d+:\d+/))return"";var r=n[1].match(/(\d+):(\d+):(\d+)(?:,(\d+))?\s*--?>\s*(\d+):(\d+):(\d+)(?:,(\d+))?/);return r?(t+=r[1]+":"+r[2]+":"+r[3]+"."+r[4]+" --> "+r[5]+":"+r[6]+":"+r[7]+"."+r[8]+"\n",n[o+=1]&&(t+=n[o]+"\n\n"),t):""}function a(t){if("aiovg_videos"!==t.post_type)return!1;var n={action:"aiovg_update_views_count",post_id:t.post_id,security:aiovg_player.ajax_nonce};e.post(aiovg_player.ajax_url,n,function(e){})}window.onmessage=function(t){"aiovg-cookie-consent"==t.data&&e(".aiovg-player-iframe iframe").each(function(){var t=e(this).attr("src");if(-1==t.indexOf("refresh=1")){var n=t.indexOf("?")>-1?"&":"?";e(this).attr("src",t+n+"refresh=1")}})},e(function(){e(".aiovg-player-raw").each(function(){var t;a(e(this).data("params"))}),e(".aiovg-player-standard").each(function(){var n,o,r,s;o=(n=e(this)).data("id"),r=n.data("params"),s=function(){r.player.html5={vhs:{overrideNative:!videojs.browser.IS_ANY_SAFARI}};var s=videojs(o,r.player),i=[],l=!1,c={id:o,player_id:o,config:r,settings:r,player:s};if(n.trigger("player.init",c),s.ready(function(){n.removeClass("vjs-waiting"),n.find(".vjs-big-play-button").one("click",function(){l||n.addClass("vjs-waiting")})}),s.one("loadedmetadata",function(){if(n.find(".vjs-quality-selector .vjs-menu-item").each(function(){var t=e(this),n=t.find(".vjs-menu-item-text").html().replace(/\D/g,"");n>=2160?t.append('<span class="vjs-quality-menu-item-sub-label">4K</span>'):n>=720&&t.append('<span class="vjs-quality-menu-item-sub-label">HD</span>')}),r.hasOwnProperty("tracks"))for(var a=0,o=r.tracks.length;a<o;a++){var i=r.tracks[a],l="";if(0==a&&1==r.cc_load_policy&&(l="showing"),/srt/.test(i.src.toLowerCase()))t(s,i,l);else{var c={kind:"subtitles",src:i.src,label:i.label,srclang:i.srclang};l&&(c.mode=l),s.addRemoteTextTrack(c,!0)}}r.hasOwnProperty("chapters")&&function e(t,n){var a=t.duration(),o=document.querySelector(".vjs-progress-control .vjs-progress-holder");if(null!==o)for(var r=0;r<n.length;r++){var s=document.createElement("div");s.className="vjs-marker",s.style.left=n[r].time/a*100+"%",o.appendChild(s)}}(s,r.chapters)}),r.hasOwnProperty("chapters"))try{s.getDescendant(["controlBar","progressControl","seekBar","mouseTimeDisplay","timeTooltip",]).update=function(e,t,n){var a=r.chapters,o=a.findIndex(({time:e})=>{var t,a,o;return e==(t=n,a=t.split(":"),o=+a.pop(),a.reduce((e,t,n,a)=>2===a.length&&1===n?e+3600*+t:e+60*+t,o))});if(o>-1){var s,i,l=a[o].label;return videojs.dom.emptyEl(this.el()),videojs.dom.appendContent(this.el(),[(s=l,videojs.dom.createEl("strong",void 0,void 0,s)),(i=n,videojs.dom.createEl("span",void 0,void 0,"("+i+")"))]),!1}this.write(n)}}catch(d){}s.one("play",function(t){l=!0,n.removeClass("vjs-waiting"),a(r),e(".aiovg-player-standard").trigger("playRequested",{playerId:o})}),n.on("playRequested",function(e,t){o!=t.playerId&&s.pause()}),s.on("playing",function(){s.trigger("controlsshown")}),s.on("ended",function(){s.trigger("controlshidden")}),s.on("qualitySelected",function(e,t){var n=t.label.replace(/\D/g,"");s.removeClass("vjs-4k"),s.removeClass("vjs-hd"),n>=2160?s.addClass("vjs-4k"):n>=720&&s.addClass("vjs-hd")});var p=s.src();(/.m3u8/.test(p)||/.mpd/.test(p))&&-1!==r.player.controlBar.children.indexOf("qualitySelector")&&s.qualityMenu();var v={};if(r.hasOwnProperty("start")&&(v.start=r.start),r.hasOwnProperty("end")&&(v.end=r.end),Object.keys(v).length>1&&(v.restart_beginning=!1,s.offset(v)),(r.hasOwnProperty("share")||r.hasOwnProperty("embed"))&&i.push({content:'<button type="button" class="vjs-share-embed-button" title="Share"><span class="vjs-icon-share" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Share</span></button>',class:"vjs-share",align:"top-right",start:"controlsshown",end:"controlshidden",showBackground:!1}),r.hasOwnProperty("download")){var g="vjs-download";(r.hasOwnProperty("share")||r.hasOwnProperty("embed"))&&(g+=" vjs-has-share"),i.push({content:'<a href="'+r.download.url+'" class="vjs-download-button" title="Download" target="_blank" style="text-decoration:none;"><span class="aiovg-icon-download" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Download</span></a>',class:g,align:"top-right",start:"controlsshown",end:"controlshidden",showBackground:!1})}if(r.hasOwnProperty("logo")){var h=[];h.src=r.logo.image,r.logo.margin&&(r.logo.margin=r.logo.margin-5);var u="bottom-left";switch(h.style="margin: "+r.logo.margin+"px;",r.logo.position){case"topleft":u="top-left",h.style="margin: "+r.logo.margin+"px;";break;case"topright":u="top-right",h.style="margin: "+r.logo.margin+"px;";break;case"bottomright":u="bottom-right",h.style="margin: "+r.logo.margin+"px;"}var f="<img "+function e(t){var n="";for(var a in t)n+=a+'="'+t[a]+'" ';return n}(h)+' alt="" />';r.logo.link&&(f='<a href="'+r.logo.link+'" style="text-decoration:none;">'+f+"</a>"),i.push({content:f,class:"vjs-logo",align:u,start:"controlsshown",end:"controlshidden",showBackground:!1})}if(i.length>0){if(s.overlay({content:"",overlays:i}),r.hasOwnProperty("share")||r.hasOwnProperty("embed")){var c={};c.content=n.find(".vjs-share-embed").get(0),c.temporary=!1;var m=new(videojs.getComponent("ModalDialog"))(s,c);m.addClass("vjs-modal-dialog-share-embed"),s.addChild(m);var y=!0;n.find(".vjs-share-embed-button").on("click",function(){y=!s.paused,m.open()}),m.on("modalclose",function(){y&&s.play()})}r.hasOwnProperty("embed")&&n.find(".vjs-copy-embed-code").on("focus",function(){e(this).select(),document.execCommand("copy")})}if(r.hotkeys&&s.hotkeys(),r.hasOwnProperty("contextmenu")){e("#aiovg-contextmenu").length||e("body").append('<div id="aiovg-contextmenu" style="display: none;"><div class="aiovg-contextmenu-content">'+r.contextmenu.content+"</div></div>");var w=document.getElementById("aiovg-contextmenu"),b="";e("#"+o).on("contextmenu",function(e){if(3==e.keyCode||3==e.which){e.preventDefault(),e.stopPropagation();var t=w.offsetWidth,n=w.offsetHeight,a=e.pageX,o=e.pageY,r=document.documentElement,s=(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0),i=(window.pageYOffset||r.scrollTop)-(r.clientTop||0),l=a+t>window.innerWidth+s?a-t:a,c=o+n>window.innerHeight+i?o-n:o;w.style.display="",w.style.left=l+"px",w.style.top=c+"px",clearTimeout(b),b=setTimeout(function(){w.style.display="none"},1500)}}),document.addEventListener("click",function(){w.style.display="none"})}},r.cookie_consent?(n.find(".aiovg-privacy-consent-button").on("click",function(){var t;e(this).html("..."),r.player.autoplay=!0,t={action:"aiovg_set_cookie",security:aiovg_player.ajax_nonce},e.post(aiovg_player.ajax_url,t,function(e){}),s(),n.find(".aiovg-privacy-wrapper").remove(),e(".aiovg-player-standard").trigger("cookieConsent"),e(".aiovg-player-element").removeAttr("cookieconsent")}),n.on("cookieConsent",function(e,t){n.find(".aiovg-privacy-wrapper").length>0&&(s(),n.find(".aiovg-privacy-wrapper").remove())})):s()}),"undefined"!=typeof videojs&&videojs.hook("beforeerror",function(e,t){if(null==t)return e.error();if(2==t.code||4==t.code){var n=e.src();if(/.m3u8/.test(n)||/.mpd/.test(n))return{code:t.code,message:aiovg_player.i18n.stream_not_found}}return t})})}(jQuery);