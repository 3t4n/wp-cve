!function(e){"use strict";var t=window.aiovg_autocomplete||window.aiovg_public;e(function(){e(".aiovg-autocomplete").each(function(){var a=e(this).data("uid"),o=[];e("option","#aiovg-autocomplete-select-"+a).each(function(){o.push({value:e(this).val(),label:e(this).text()})}),0==o.length&&o.push({value:0,label:t.i18n.no_tags_found});var i,n,l,u,c,r,v,s,g,d,p=function(t,o){if(0!=(t=parseInt(t))){var i=e("#aiovg-autocomplete-tags-"+a);if(0==i.find(".aiovg-tag-item-"+t).length){var n='<span class="aiovg-tag-item aiovg-tag-item-'+t+'">';n+='<a href="javascript:void(0);">',n+='<svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="aiovg-flex-shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>',n+=o,n+="</a>",n+='<input type="hidden" name="ta[]" value="'+t+'" />',n+="</span>",i.append(n)}}};i=a,n=o,l=p,u=document.querySelector("#aiovg-autocomplete-input-"+i),c=document.querySelector("#aiovg-autocomplete-tags-"+i),r=-1,v=function(){var e=[];r=-1,s();var a=document.createElement("div");a.setAttribute("id","aiovg-autocomplete-items-"+i),a.setAttribute("class","aiovg-autocomplete-items"),u.parentNode.appendChild(a),n.forEach((o,i)=>{var r=o.value,v=o.label,g=!1;if(u.value?-1!==v.toLowerCase().indexOf(u.value.toLowerCase())&&(g=!0):g=!0,g||i!=n.length-1||0!=e.length||(r=0,v=t.i18n.no_tags_found,g=!0),g){var d=document.createElement("div");d.innerHTML=v,0==r&&(d.className="aiovg-text-muted"),null!==c.querySelector(".aiovg-tag-item-"+r)&&d.setAttribute("class","aiovg-autocomplete-selected"),d.addEventListener("click",function(){u.value="",l(r,v),s()}),a.appendChild(d),e.push(d)}})},s=function(e=null){var t=0;e&&e.id&&(t=e.id.replace("aiovg-autocomplete-input-","")),document.querySelectorAll(".aiovg-autocomplete-items").forEach(e=>{e.getAttribute("id")!="aiovg-autocomplete-items-"+t&&e.remove()})},g=function(e){d(e),r>=e.length&&(r=0),r<0&&(r=e.length-1),e[r].classList.add("aiovg-autocomplete-active")},d=function(e){e.forEach(e=>{e.classList.remove("aiovg-autocomplete-active")})},u.addEventListener("focus",function(e){""==e.target.value&&v()}),u.addEventListener("input",function(){v()}),u.addEventListener("keydown",function(e){var t=document.querySelector("#aiovg-autocomplete-items-"+i);if(t&&(t=t.querySelectorAll("div")),!t)return!1;40==e.keyCode?(r++,g(t)):38==e.keyCode?(r--,g(t)):13==e.keyCode&&(e.preventDefault(),r>-1&&t[r].click())}),t.hasOwnProperty("autocomplete")||(t.autocomplete=!0,document.addEventListener("click",function(e){s(e.target)}))}),e(document).on("click",".aiovg-tag-item a",function(t){t.preventDefault(),e(this).parent().remove()})})}(jQuery);