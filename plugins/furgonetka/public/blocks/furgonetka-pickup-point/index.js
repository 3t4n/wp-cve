(()=>{"use strict";const e=window.React,{__}=window.wp.i18n,{registerPlugin:t}=window.wp.plugins,{ExperimentalOrderShippingPackages:n,extensionCartUpdate:c}=window.wc.blocksCheckout,{Button:i}=window.wc.blocksCheckout,{getSetting:o}=window.wc.wcSettings,{useSelect:a}=window.wp.data,{PAYMENT_STORE_KEY:r}=window.wc.wcBlocksData,s="furgonetka-pickup-point",p=({cart:t,extensions:n})=>{const p=(o(s+"_data")||{}).furgonetka_service_by_shipping_rate_id||{},l="cod"===a((e=>e(r).getActivePaymentMethod())),d=function(e){const t=e&&e.shippingRates&&e.shippingRates[0]&&e.shippingRates[0].shipping_rates;if(!t)return;const n=t.find((e=>e.selected));if(!n)return;const c=n.rate_id;return p[c]}(t);function u(e){if(e&&e.city&&e.address_1)return{city:e.city,street:e.address_1}}if(!t.cartNeedsShipping||!d)return null;const w=l?n.furgonetka.selected_point_cod:n.furgonetka.selected_point,g=Boolean(w.code);return(0,e.createElement)("div",{className:"furgonetka-wc-blocks-pickup-point-block-container"},(0,e.createElement)("p",{className:"furgonetka-wc-blocks-pickup-point-block-button-container"},(0,e.createElement)(i,{onClick:function(){"function"!=typeof window.Furgonetka.Map&&alert(__("There was a problem loading the map. Please try again.","furgonetka"));let e=u(t.shippingAddress)||u(t.billingAddress)||{},n={courierServices:[d],pointTypesFilter:[]};l&&n.pointTypesFilter.push("cod"),new window.Furgonetka.Map({...n,...e,callback:e=>c({namespace:"furgonetka",data:{service:d,code:e.code,name:e.name,cod:l}})}).view()}},__(g?"Change point":"Select point","furgonetka"))),g?(0,e.createElement)("p",{className:"furgonetka-wc-blocks-pickup-point-block-label"},w.name," (",w.code,")"):null)};t(s,{render:()=>(0,e.createElement)(n,null,(0,e.createElement)(p,null)),scope:"woocommerce-checkout"})})();