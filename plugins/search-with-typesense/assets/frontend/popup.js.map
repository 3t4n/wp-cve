{"version":3,"file":"popup.js","mappings":"mBAoGAA,SAASC,iBAAiB,oBAAoB,KApGzBC,MACnB,IAAIC,EAAUH,SAASI,cAAc,6BACjCC,GAAgB,EAGpB,MAAMC,EAAYA,KAChBH,EAAQI,UAAUC,IAAI,oCAEtBL,EAAQC,cAAc,wBAAwBK,QAE9CJ,GAAgB,CAAI,EAIhBK,EAAaA,KACjBL,GAAgB,EAChBF,EAAQI,UAAUI,OAAO,mCAAmC,EAI9D,IAAIC,EAAgBZ,SAASa,iBAAiB,yCAC1CD,EAAcE,OAAS,GACzBF,EAAcG,SAASC,IAEA,OAAjBA,GACFA,EAAaf,iBAAiB,SAAUgB,IACtCA,EAAEC,iBACFZ,GAAW,GAEf,IAKJ,IAAIa,EAAyBnB,SAASa,iBAAiB,oBACnDM,EAAuBL,OAAS,GAClCK,EAAuBJ,SAASK,IAC9B,IAAIC,EAAcD,EAAsBhB,cAAc,2BAEtDgB,EAAsBnB,iBAAiB,SAAUgB,IAC/CA,EAAEC,iBACFZ,GAAW,IAIbe,EAAYpB,iBAAiB,SAAUgB,IACrCX,GAAW,GACX,IAKN,IAAIgB,EAAyBtB,SAASa,iBAAiB,gBACnDS,EAAuBR,OAAS,GAClCQ,EAAuBP,SAASQ,IAC9BA,EAAsBtB,iBAAiB,SAAUgB,IAC/CA,EAAEC,iBACFZ,GAAW,GACX,IAIU,OAAZH,IAEFqB,OAAOvB,iBAAiB,WAAYwB,IAC9BA,EAAMC,MAAMC,gBACdrB,KACyC,IAAhCmB,EAAMC,MAAMC,iBACrBjB,GACF,IAIFV,SAASC,iBAAiB,WAAYgB,IACrB,YAAXA,EAAEW,MAAoC,KAAdX,EAAEY,SAAkBxB,GAC9CK,GACF,IAIFP,EAAQF,iBAAiB,SAAUgB,IAC7BA,EAAEa,SAAW3B,GAAWE,GAC1BK,GACF,IAIiBV,SAASI,cAAc,wCAC7BH,iBAAiB,SAAUgB,IACtCA,EAAEC,iBAEGb,GAGLK,GAAY,IAEhB,EAKAR,EAAO,G","sources":["webpack://search-with-typesense/./src/frontend/popup.js"],"sourcesContent":["export const popup = () => {\n  let popupEl = document.querySelector('.cmswt-InstantSearchPopup')\n  let isPopupActive = false\n\n  //open popup\n  const openPopup = () => {\n    popupEl.classList.add('cmswt-InstantSearchPopup--active')\n    //trigger focus for input\n    popupEl.querySelector('.ais-SearchBox-input').focus()\n\n    isPopupActive = true\n  }\n\n  //close popup\n  const closePopup = () => {\n    isPopupActive = false\n    popupEl.classList.remove('cmswt-InstantSearchPopup--active')\n  }\n\n  //this is for popup icon / custom triggers\n  let popupTriggers = document.querySelectorAll('.cm-swt-instant-search-popup--trigger')\n  if (popupTriggers.length > 0) {\n    popupTriggers.forEach((popupTrigger) => {\n      //trigger popup\n      if (popupTrigger !== null) {\n        popupTrigger.addEventListener('click', (e) => {\n          e.preventDefault()\n          openPopup()\n        })\n      }\n    })\n  }\n\n  //this is when WordPress search forms are clicked or typed into\n  let blockWidgetSearchForms = document.querySelectorAll('.wp-block-search')\n  if (blockWidgetSearchForms.length > 0) {\n    blockWidgetSearchForms.forEach((blockWidgetSearchForm) => {\n      let searchInput = blockWidgetSearchForm.querySelector('.wp-block-search__input')\n      //on submit\n      blockWidgetSearchForm.addEventListener('click', (e) => {\n        e.preventDefault()\n        openPopup()\n      })\n\n      //on click on search input\n      searchInput.addEventListener('click', (e) => {\n        openPopup()\n      })\n    })\n  }\n\n  //this is for old school forms\n  let traditionalSearchForms = document.querySelectorAll('.search-form')\n  if (traditionalSearchForms.length > 0) {\n    traditionalSearchForms.forEach((traditionalSearchForm) => {\n      traditionalSearchForm.addEventListener('click', (e) => {\n        e.preventDefault()\n        openPopup()\n      })\n    })\n  }\n\n  if (popupEl !== null) {\n    //trigger popup for customizer\n    window.addEventListener('message', (event) => {\n      if (event.data?.cmswtOpenSearch) {\n        openPopup()\n      } else if (event.data?.cmswtOpenSearch === false) {\n        closePopup()\n      }\n    })\n\n    //on press of escape key\n    document.addEventListener('keydown', (e) => {\n      if (e.type === 'keydown' && e.keyCode === 27 && isPopupActive) {\n        closePopup()\n      }\n    })\n\n    //on click of overlay\n    popupEl.addEventListener('click', (e) => {\n      if (e.target === popupEl && isPopupActive) {\n        closePopup()\n      }\n    })\n\n    //on click close button\n    let popupCloseEl = document.querySelector('.cmswt-InstantSearchPopup--closeIcon')\n    popupCloseEl.addEventListener('click', (e) => {\n      e.preventDefault()\n\n      if (!isPopupActive)\n        return\n\n      closePopup()\n    })\n  }\n\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  popup()\n})"],"names":["document","addEventListener","popup","popupEl","querySelector","isPopupActive","openPopup","classList","add","focus","closePopup","remove","popupTriggers","querySelectorAll","length","forEach","popupTrigger","e","preventDefault","blockWidgetSearchForms","blockWidgetSearchForm","searchInput","traditionalSearchForms","traditionalSearchForm","window","event","data","cmswtOpenSearch","type","keyCode","target"],"sourceRoot":""}