!function(e){"use strict";var n=!0,t=yith_paypal_ec_frontend.label,a="yes"==yith_paypal_ec_frontend.fundingicons,o="";function r(e){return n?e.enable():e.disable()}function c(){e(document).find(".paypal-button").each((function(){var n=e(this);n.hide(),""===n.html()?paypal.Button.render({env:yith_paypal_ec_frontend.env,commit:!0,locale:yith_paypal_ec_frontend.locale,style:{label:t,branding:o,fundingicons:a,size:yith_paypal_ec_frontend.size,shape:yith_paypal_ec_frontend.style,color:yith_paypal_ec_frontend.color,tagline:!1},payment:function(n,t){var a=!1;if(e(document).find("form.cart").length){var o=e("form.cart"),r=new FormData,c=!1;return e.each(o.find("input[type='file']"),(function(n,t){e.each(e(t)[0].files,(function(e,n){r.append(t.name,n)}))})),n=o.serializeArray(),e.each(n,(function(e,n){"add-to-cart"==n.name&&(c=!0),r.append(n.name,n.value)})),r.append("context","frontend"),r.append("action","yith_paypal_ec_add_to_cart"),c||r.append("add-to-cart",o.find('button[name="add-to-cart"]').val()),e.ajax({url:yith_paypal_ec_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_paypal_ec_add_to_cart"),data:r,contentType:!1,processData:!1,dataType:"json",type:"POST",async:!1,success:function(e){"success"==e.result&&(a=paypal.request.post(yith_paypal_ec_frontend.set_express_checkout_url).then((function(e){if("success"==e.result)return e.token;alert(e.error)})))}}),a}var i=yith_paypal_ec_frontend.set_express_checkout_url;return e(document.body).hasClass("woocommerce-order-pay")&&(i=i+"&woocommerce-order-pay="+new URLSearchParams(window.location.search).get("key")),paypal.request.post(i).then((function(e){if("success"==e.result)return e.token;alert(e.error)}))},onAuthorize:function(n,t){if(e(document.body).hasClass("woocommerce-order-pay")){var a=new URLSearchParams(window.location.search);n.returnUrl=n.returnUrl+"&yith_paypal_ec_back=1&order_key="+a.get("key")}return t.redirect()},validate:function(n){var t;r(n),t=function(){r(n)},e("form.variations_form").on("show_variation",t),e("form.variations_form").on("hide_variation",t)},onCancel:function(n,t){e.post(yith_paypal_ec_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_paypal_ec_cancelled_payment"))},onError:function(e){alert(e)}},".paypal-button").then((function(){n.show()})):n.show()}))}"buynow-branded"==t&&(t="buynow",o=!0),e("form.variations_form").on("show_variation",(function(e,t,a){n=a})),e("form.variations_form").on("hide_variation",(function(e,t,a){n=!1})),c(),e(document.body).on("updated_cart_totals",(function(){c()})),e(document.body).on("updated_checkout",(function(){c()}));var i=yith_paypal_ec_frontend.confirm_checkout,d=yith_paypal_ec_frontend.needs_shipping;function p(){var n=yith_paypal_ec_frontend.confirm_checkout,t=e(document).find(".woocommerce-checkout #paypal-button"),a=e(document).find("#payment_method_yith-paypal-ec").is(":checked");void 0!==t&&0!=t.length&&("yes"!=n&&a?void 0!==t&&a&&e(document).find("#place_order").attr("disabled",!0):e(document).find("#place_order").attr("disabled",!1))}"yes"==i&&"yes"==d&&e("#ship-to-different-address-checkbox").attr("checked","checked"),e("body").on("change",'input[name="payment_method"]',p),p()}(jQuery);