"use strict";function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=_superPropBase(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}jQuery(function(a){var o=fkwcs_data.common_style,i=a("form.woocommerce-checkout"),c=fkwcs_data.get_home_url,r=fkwcs_data.stripe_localized;function l(e,t){return null!==r[e]&&void 0!==r[e]?r[e]:t}var e=function(){function r(e,t){_classCallCheck(this,r),this.gateway_id=t,this.error_container=".fkwcs-credit-card-error",this.gateway_container="",this.stripe=e,this.mode="test",this.setup_ready=!1,this.elements=this.stripe.elements(),this.setupGateway(),this.wc_events()}return _createClass(r,[{key:"wc_events",value:function(){var e=this,t=a("input[name='wc-".concat(e.gateway_id,"-payment-token']:checked")),r=a("form#add_payment_method");a("form.checkout").on("checkout_place_order_"+this.gateway_id,this.processingSubmit.bind(this)),0<a("form#order_review").length&&(a("form#order_review").on("submit",this.processOrderReview.bind(this)),i=a("form#order_review")),0<r.length&&(r.on("submit",this.add_payment_method.bind(this)),i=r),a("#createaccount").on("change",function(){a(this).is(":checked")?a("#fkwcs-save-cc-fieldset").show():a("#fkwcs-save-cc-fieldset").hide()}),a(document.body).on("change",'input[name="payment_method"]',function(){e.showError(),e.gateway_id===a(this).val()&&e.resetGateway()}),a(document.body).on("updated_checkout",function(){e.gateway_id===e.selectedGateway()&&(t.trigger("change"),e.mountGateway())}),"complete"===document.readyState||"loading"===document.readyState?a(document).ready(function(){e.gateway_id===e.selectedGateway()&&e.mountGateway()}):a(window).on("load",function(){e.gateway_id===e.selectedGateway()&&e.mountGateway()}),a(window).on("fkwcs_on_hash_change",this.onHashChange.bind(this)),a(document.body).on("change","input[name='wc-".concat(this.gateway_id,"-payment-token']"),function(){"new"!==a(this).val()?e.hideGatewayContainer():e.showGatewayContainer()}),t.trigger("change"),a(document).on("checkout_error",function(){var e=a(".fkwcs_source");0<e.length&&e.remove()})}},{key:"setupGateway",value:function(){}},{key:"resetGateway",value:function(){}},{key:"mountGateway",value:function(){}},{key:"createSource",value:function(){}},{key:"processingSubmit",value:function(e){}},{key:"processOrderReview",value:function(e){}},{key:"add_payment_method",value:function(e){}},{key:"hideGatewayContainer",value:function(){0<a(this.gateway_container).length&&a(this.gateway_container).hide()}},{key:"showGatewayContainer",value:function(){0<a(this.gateway_container).length&&a(this.gateway_container).show()}},{key:"appendMethodId",value:function(e){var t=a(".fkwcs_source");0<t.length&&t.remove(),i.append("<input type='hidden' name='fkwcs_source' class='fkwcs_source' value='".concat(e,"'>"))}},{key:"getAddress",value:function(){var e=document.getElementById("billing_country"),t=document.getElementById("billing_postcode"),r=document.getElementById("billing_city"),n=document.getElementById("billing_state"),s=document.getElementById("billing_address_1"),o=document.getElementById("billing_address_2");return{country:null!==e?e.value:void 0,city:null!==r?r.value:void 0,postal_code:null!==t?t.value:void 0,state:null!==n?n.value:void 0,line1:null!==s?s.value:void 0,line2:null!==o?o.value:void 0}}},{key:"getBillingAddress",value:function(e){var t,r,n;return 0<a("form#order_review").length?fkwcs_data.current_user_billing:void 0!==_typeof(e)&&"add_payment"===e?{}:(e=document.getElementById("billing_first_name"),t=document.getElementById("billing_last_name"),r=document.getElementById("billing_email"),n=document.getElementById("billing_phone"),{name:(null!==e?e.value:void 0)+" "+(null!==t?t.value:void 0),email:null!==r?r.value:void 0,phone:null!==n?n.value:void 0,address:this.getAddress()})}},{key:"selectedGateway",value:function(){var e=a('input[name="payment_method"]:checked');return 0<e.length?e.val():""}},{key:"confirmStripePayment",value:function(e,t,r){console.log("Please override in child class")}},{key:"onHashChange",value:function(e,t){var r=t[1],n=t[2],s=decodeURIComponent(t[3]),o=decodeURIComponent(t[4]),t=decodeURIComponent(t[5]);this.gateway_id===t&&this.confirmStripePayment(n,s,r,o)}},{key:"showError",value:function(e){i.removeClass("processing"),this.unblockElement(),e?a(this.error_container).html(e.message):a(this.error_container).html("")}},{key:"showNotice",value:function(e){if("object"===_typeof(e)){if("validation_error"===e.type)return void this.unblockElement();e=e.message}a(".woocommerce-error").remove(),a(".woocommerce-notices-wrapper").eq(0).html('<div class="woocommerce-error fkwcs-errors">'+e+"</div>").show(),this.unblockElement(),e=".woocommerce-notices-wrapper",0!==jQuery(e).length&&jQuery("html, body").animate({scrollTop:jQuery(e).offset().top},500)}},{key:"unblockElement",value:function(){a("form.woocommerce-checkout").unblock(),a("form#order_review").unblock(),a("form#add_payment_method").unblock()}},{key:"logError",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=a("body");a.ajax({type:"POST",url:fkwcs_data.admin_ajax,data:{action:"fkwcs_js_errors",_security:fkwcs_data.js_nonce,order_id:t,error:e},beforeSend:function(){r.css("cursor","progress")},success:function(e){if(!1===e.success)return e.message;r.css("cursor","default")},error:function(){r.css("cursor","default")}})}}]),r}(),t=function(){_inherits(s,e);var r=_createSuper(s);function s(e,t){return _classCallCheck(this,s),(e=r.call(this,e,t)).error_container=".fkwcs-credit-card-error",e}return _createClass(s,[{key:"setupGateway",value:function(){this.gateway_container=".fkwcs-stripe-elements-form",this.isInlineGateway()?this.inLineFields():this.separateFields()}},{key:"isInlineGateway",value:function(){return"yes"===fkwcs_data.inline_cc}},{key:"inLineFields",value:function(){var r=this;this.card=this.elements.create("card",{style:fkwcs_data.inline_style,hidePostalCode:!0,iconStyle:"solid"}),this.card.on("change",function(e){var t=e.brand,e=e.error;r.showError(),e?r.showError(e):t&&(r.isAllowedBrand(t)?r.showError():"unknown"===t?(a(r.error_cotainer).html(""),r.showError()):r.showError({error:fkwcs_data.default_cards[t]+" "+fkwcs_data.not_allowed_string}))})}},{key:"separateFields",value:function(){var s=this,e=JSON.stringify(o),e=JSON.parse(e);delete e.base.padding,this.cardNumber=this.elements.create("cardNumber",{style:e}),this.cardExpiry=this.elements.create("cardExpiry",{style:e}),this.cardCvc=this.elements.create("cardCvc",{style:e}),this.cardNumber.on("change",function(e){var t=e.brand,e=e.error,r=a("#fkwcs-stripe-elements-wrapper .fkwcs-credit-card-number"),n=a(".fkwcs-stripe-elements-field");s.showError(),e?(r.addClass("haserror"),s.showError(e)):(r.removeClass("haserror"),e=fkwcs_data.assets_url+"/icons/card.svg","unknown"===t?(n.removeClass("fkwcs_brand"),r.css("background-image","url("+e+")")):t&&(s.isAllowedBrand(t)?0<r.length&&(e=fkwcs_data.assets_url+"/icons/"+t+".svg",n.addClass("fkwcs_brand"),r.css("background-image","url("+e+")")):"unknown"===t?(n.removeClass("fkwcs_brand"),r.css("background-image","url("+e+")")):a(".fkwcs-credit-card-error").html(fkwcs_data.default_cards[t]+" "+fkwcs_data.not_allowed_string)))}),this.cardExpiry.on("change",function(e){e=e.error;e?(a(".fkwcs-credit-expiry").addClass("haserror"),a(".fkwcs-credit-expiry-error").html(e.message)):a(".fkwcs-credit-expiry-error").html("").removeClass("haserror")}),this.cardCvc.on("change",function(e){e=e.error;e?(a(".fkwcs-credit-cvc-error").html(e.message),a(".fkwcs-credit-cvc").addClass("haserror")):a(".fkwcs-credit-cvc-error").html("").removeClass("haserror")})}},{key:"resetGateway",value:function(){this.isInlineGateway()?null!==this.card&&this.card.unmount():null!==this.cardNumber&&(console.trace(),this.cardNumber.unmount(),this.cardExpiry.unmount(),this.cardCvc.unmount()),this.mountGateway()}},{key:"mountGateway",value:function(){this.mountCard()}},{key:"mountCard",value:function(){a(".fkwcs-stripe-elements-wrapper").show(),this.isInlineGateway()?a(".fkwcs-stripe-elements-wrapper .fkwcs-credit-card-field").html()||null===this.card||this.card.mount(".fkwcs-stripe-elements-wrapper .fkwcs-credit-card-field"):this.isInlineGateway()||null===this.cardNumber||(this.cardNumber.mount(".fkwcs-stripe-elements-wrapper .fkwcs-credit-card-number"),this.cardExpiry.mount(".fkwcs-stripe-elements-wrapper .fkwcs-credit-expiry"),this.cardCvc.mount(".fkwcs-stripe-elements-wrapper .fkwcs-credit-cvc"))}},{key:"getCardElement",value:function(){return this.isInlineGateway()?this.card:this.cardNumber}},{key:"createSource",value:function(e){var t=this;i.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),this.stripe.createPaymentMethod({type:"card",card:this.getCardElement(),billing_details:this.getBillingAddress(e)}).then(function(e){t.handleSourceResponse(e)})}},{key:"handleSourceResponse",value:function(e){e.error?this.showNotice(e.error):e.paymentMethod&&(this.appendMethodId(e.paymentMethod.id),a("form#order_review").length&&"yes"===fkwcs_data.is_change_payment_page?this.create_setup_intent(e.paymentMethod.id,a("form#order_review")):a("form#add_payment_method").length?this.create_setup_intent(e.paymentMethod.id,a("form#add_payment_method")):(0<a("form#order_review").length?a("form#order_review"):a("form.checkout")).trigger("submit"))}},{key:"create_setup_intent",value:function(r,n){var s=this,e={action:"fkwcs_create_setup_intent",fkwcs_nonce:fkwcs_data.fkwcs_nonce,fkwcs_source:r};a.ajax({type:"POST",dataType:"json",url:fkwcs_data.admin_ajax,data:e,beforeSend:function(){a("body").css("cursor","progress")},success:function(e){if("success"===e.status){var t=e.data.client_secret,t=s.stripe.confirmCardSetup(t,{payment_method:r});t.then(function(e){e.hasOwnProperty("error")?(n.unblock(),s.showNotice(e.error)):n.trigger("submit")}),t.catch(function(e){n.unblock(),console.log("error",e)})}else if(!1===e.status)return!1;a("body").css("cursor","default")},error:function(){a("body").css("cursor","default"),alert("Something went wrong!")}})}},{key:"confirmStripePayment",value:function(e,r,n){var s=this,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3];("si"==n?this.stripe.handleCardSetup(e,{}):this.stripe.confirmCardPayment(e,{})).then(function(e){var t;e.error?(s.showNotice(e.error),0<(t=a(".fkwcs_source")).length&&t.remove(),e.error.hasOwnProperty("type")&&"api_connection_error"===e.error.type||s.logError(e.error,o)):"requires_capture"!==(t=e["si"===n?"setupIntent":"paymentIntent"]).status&&"succeeded"!==t.status||(window.location=r)}).catch(function(e){a.get(r+"&is_ajax")})}},{key:"hasSource",value:function(){var e=a('input[name="wc-fkwcs_stripe-payment-token"]:checked');return 0<e.length&&"new"!==e.val()||0<(e=a(".fkwcs_source")).length?e.val():""}},{key:"processingSubmit",value:function(e){if(""===this.hasSource())return this.createSource("submit"),e.preventDefault(),!1}},{key:"processOrderReview",value:function(e){if(this.gateway_id===this.selectedGateway()&&""===this.hasSource())return this.createSource("order_review"),e.preventDefault(),!1}},{key:"add_payment_method",value:function(e){if(""===this.hasSource())return this.createSource("add_payment"),e.preventDefault(),!1}},{key:"onEarlyRenewalSubmit",value:function(e){var t=this;return e.preventDefault(),a.ajax({url:a("#early_renewal_modal_submit").attr("href"),method:"get",success:function(e){e=JSON.parse(e);e.fkwcs_stripe_sca_required?t.confirmStripePayment(e.intent_secret,e.redirect_url):window.location=e.redirect_url}}),!1}},{key:"isAllowedBrand",value:function(e){return 0!==fkwcs_data.allowed_cards.length&&-1!==a.inArray(e,fkwcs_data.allowed_cards)}},{key:"wc_events",value:function(){var e,t,r,n;_get(_getPrototypeOf(s.prototype),"wc_events",this).call(this),("yes"===fkwcs_data.is_change_payment_page||"yes"===fkwcs_data.is_pay_for_order_page)&&(a(document.body).trigger("wc-credit-card-form-init"),n=null==(n=window.location.hash.match(/^#?fkwcs-confirm-(pi|si)-([^:]+):(.+):(.+)$/))?window.location.hash.match(/^#?fkwcs-confirm-(pi|si)-([^:]+):(.+)$/):n)&&(e=n[1],t=n[2],r=decodeURIComponent(n[3]),n=decodeURIComponent(n[4]),this.confirmStripePayment(t,r,e,n)),(a("#early_renewal_modal_submit[data-payment-method]").length?a("#early_renewal_modal_submit[data-payment-method=fkwcs_stripe]"):a("#early_renewal_modal_submit")).on("click",this.onEarlyRenewalSubmit.bind(this)),a(document.body).on("change",".woocommerce-SavedPaymentMethods-tokenInput",function(){var e=a(this).attr("name"),t=a(".fkwcs-stripe-elements-wrapper");"wc-fkwcs_stripe-payment-token"!=e||"new"==a(this).val()?t.show():t.hide()})}}]),s}(),n=function(){_inherits(n,e);var r=_createSuper(n);function n(e,t){return _classCallCheck(this,n),(e=r.call(this,e,t)).selectedP24Bank="",e.error_container=".fkwcs_stripe_p24_error",e}return _createClass(n,[{key:"setupGateway",value:function(){var t=this;this.p24=this.elements.create("p24Bank",{style:o}),this.p24.on("change",function(e){t.selectedP24Bank=e.value,t.showError()})}},{key:"resetGateway",value:function(){this.p24.unmount(),this.mountGateway()}},{key:"mountGateway",value:function(){var e=a(".fkwcs_stripe_p24_form");0!==e.length&&(e.show(),this.p24.mount(e=".fkwcs_stripe_p24_form .fkwcs_stripe_p24_select"),a(e).css({backgroundColor:"#fff"}))}},{key:"processingSubmit",value:function(e){if(""===this.selectedP24Bank)return this.showError({error:fkwcs_data.empty_bank_message}),this.showNotice(fkwcs_data.empty_bank_message),!1;this.showError("")}},{key:"confirmStripePayment",value:function(e,t,r){this.gateway_id===this.selectedGateway()&&this.stripe.confirmP24Payment(e,{payment_method:{billing_details:this.getBillingAddress()},return_url:c+t})}}]),n}(),s=function(){_inherits(n,e);var r=_createSuper(n);function n(e,t){return _classCallCheck(this,n),(e=r.call(this,e,t)).error_container=".fkwcs_stripe_sepa_error",e.sepaIBAN=!1,e.paymentMethod="",e.emptySepaIBANMessage=fkwcs_data.empty_sepa_iban_message,e}return _createClass(n,[{key:"setupGateway",value:function(){var t=this,r=this,e=(this.gateway_container=".fkwcs_stripe_sepa_payment_form",Object.keys(fkwcs_data.sepa_options).length?fkwcs_data.sepa_options:{});this.sepa=this.elements.create("iban",e),this.sepa.on("change",function(e){e=e.error;if(t.isSepaSaveCardChosen())return!0;e?(r.sepaIBAN=!1,r.emptySepaIBANMessage=e.message,r.showError(e),r.logError(e)):(t.sepaIBAN=!0,r.showError(""))}),this.setup_ready=!0}},{key:"resetGateway",value:function(){this.sepa.unmount(),this.mountGateway()}},{key:"mountGateway",value:function(){if(!1!==this.setup_ready){if(0===a(".payment_method_fkwcs_stripe_sepa").length)return!1;this.sepa.mount(".fkwcs_stripe_sepa_iban_element_field"),a(".fkwcs_stripe_sepa_payment_form .fkwcs_stripe_sepa_iban_element_field").css({backgroundColor:"#fff",borderRadius:"3px"})}}},{key:"isSepaSaveCardChosen",value:function(){return a("#payment_method_fkwcs_stripe_sepa").is(":checked")&&a('input[name="wc-fkwcs_stripe_sepa-payment-token"]').is(":checked")&&"new"!==a('input[name="wc-fkwcs_stripe_sepa-payment-token"]:checked').val()}},{key:"processingSubmit",value:function(e){if(""===this.paymentMethod&&!this.isSepaSaveCardChosen())return!1===this.sepaIBAN?this.showError(this.emptySepaIBANMessage):this.createPaymentMethod(),!1}},{key:"processOrderReview",value:function(e){if(this.gateway_id===this.selectedGateway()&&""===this.paymentMethod&&!this.isSepaSaveCardChosen())return this.createPaymentMethod(),!1}},{key:"createPaymentMethod",value:function(){var t=this;this.stripe.createPaymentMethod({type:"sepa_debit",sepa_debit:this.sepa,billing_details:this.getBillingAddress()}).then(function(e){e.error?(t.logError(e.error),t.showNotice(l(e.error.code,e.error.message))):e.paymentMethod&&(i.find(".fkwcs_payment_method").remove(),t.paymentMethod=e.paymentMethod.id,t.appendMethodId(t.paymentMethod),i.trigger("submit"))})}},{key:"confirmStripePayment",value:function(e,t,r){var n=this,s=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=4<arguments.length&&void 0!==arguments[4]&&arguments[4];this.gateway_id===this.selectedGateway()&&("si"===r?this.isSepaSaveCardChosen()||s?this.stripe.confirmSepaDebitSetup(e,{}).then(function(e){e.error?(n.logError(e.error,o),n.showNotice(l(e.error.code,e.error.message))):"succeeded"!==e.setupIntent.status&&"processing"!==e.setupIntent.status||(a(".woocommerce-error").remove(),window.location=t)}):this.stripe.confirmSepaDebitSetup(e,{payment_method:{sepa_debit:this.sepa,billing_details:this.getBillingAddress()}}).then(function(e){e.error?(n.logError(e.error),n.showNotice(l(e.error.code,e.error.message))):"succeeded"!==e.setupIntent.status&&"processing"!==e.setupIntent.status||(a(".woocommerce-error").remove(),window.location=t)}):this.isSepaSaveCardChosen()||s?this.stripe.confirmSepaDebitPayment(e,{}).then(function(e){e.error?(n.logError(e.error,o),n.showNotice(l(e.error.code,e.error.message))):"succeeded"!==e.paymentIntent.status&&"processing"!==e.paymentIntent.status||(a(".woocommerce-error").remove(),window.location=t)}):this.stripe.confirmSepaDebitPayment(e,{payment_method:{sepa_debit:this.sepa,billing_details:this.getBillingAddress()}}).then(function(e){e.error?(n.logError(e.error),n.showNotice(l(e.error.code,e.error.message))):"succeeded"!==e.paymentIntent.status&&"processing"!==e.paymentIntent.status||(a(".woocommerce-error").remove(),window.location=t)}))}}]),n}(),u=function(){_inherits(n,e);var r=_createSuper(n);function n(e,t){return _classCallCheck(this,n),(e=r.call(this,e,t)).selectedIdealBank="",e.error_cotainer=".fkwcs_stripe_ideal_error",e}return _createClass(n,[{key:"setupGateway",value:function(){var t=this;this.ideal=this.elements.create("idealBank",{style:o}),this.ideal.on("change",function(e){t.selectedIdealBank=e.value,t.showError()})}},{key:"resetGateway",value:function(){this.ideal.unmount(".fkwcs_stripe_ideal_form .fkwcs_stripe_ideal_select"),this.mountGateway()}},{key:"mountGateway",value:function(){var e=a(".fkwcs_stripe_ideal_form");0!==e.length&&(e.show(),this.ideal.mount(".fkwcs_stripe_ideal_form .fkwcs_stripe_ideal_select"),a(".fkwcs_stripe_ideal_form .fkwcs_stripe_ideal_select").css({backgroundColor:"#fff"}))}},{key:"processingSubmit",value:function(e){if(""===this.selectedIdealBank)return this.showError({error:fkwcs_data.empty_bank_message}),this.showNotice(fkwcs_data.empty_bank_message),!1;this.showError()}},{key:"confirmStripePayment",value:function(e,t,r){var n,s=this,o=4<arguments.length&&void 0!==arguments[4]&&arguments[4];this.gateway_id===this.selectedGateway()&&(n=this.ideal,this.stripe.confirmIdealPayment(e,{payment_method:{ideal:n,billing_details:this.getBillingAddress()},return_url:c+t}).then(function(e){e.error&&(s.logError(e.error,o),s.showNotice(l(e.error.code,e.error.message)))}))}}]),n}(),d=function(){_inherits(n,e);var r=_createSuper(n);function n(e,t){return _classCallCheck(this,n),(e=r.call(this,e,t)).error_container=".fkwcs_stripe_bancontact_error",e}return _createClass(n,[{key:"confirmStripePayment",value:function(e,t,r){var n=this,s=4<arguments.length&&void 0!==arguments[4]&&arguments[4];this.gateway_id===this.selectedGateway()&&this.stripe.confirmBancontactPayment(e,{payment_method:{billing_details:this.getBillingAddress()},return_url:c+t}).then(function(e){e=e.error;e&&(n.showError(e),n.logError(e,s),n.showNotice(l(e.code,e.message)))})}}]),n}();var h=fkwcs_data.pub_key,f=fkwcs_data.mode;if(""===h||"live"===f&&!fkwcs_data.is_ssl)console.log("Live Payment Mode only work only https protocol ");else{try{var p=Stripe(h,{locale:fkwcs_data.locale});new t(p,"fkwcs_stripe"),new n(p,"fkwcs_stripe_p24"),new s(p,"fkwcs_stripe_sepa"),new u(p,"fkwcs_stripe_ideal"),new d(p,"fkwcs_stripe_bancontact")}catch(e){console.log(e)}window.addEventListener("hashchange",function(){var e=window.location.hash.match(/^#?fkwcs-confirm-(pi|si)-([^:]+):(.+):(.+):(.+)$/);!(e=null==e?window.location.hash.match(/^#?fkwcs-confirm-(pi|si)-([^:]+):(.+)$/):e)||e.length<4||(history.pushState({},"",window.location.pathname),a(window).trigger("fkwcs_on_hash_change",[e]))})}});