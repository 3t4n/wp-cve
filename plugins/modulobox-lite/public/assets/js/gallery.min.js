/**
 * ModuloBox Gallery PACKAGED v1.0.0
 * A simple justified layout
 *
 * @author Themeone [https://theme-one.com/]
 * Copyright Â© 2016 All Rights Reserved.
 */
(function(f,d){"function"===typeof define&&define.amd?define(d):"object"===typeof exports&&module.exports?module.exports=d():f.ModuloBox_Gallery=d()})(window,function(){function f(a,c){"string"===typeof a&&(a=document.querySelector(a));if(!a)return!1;if(a&&a.GUID)return h[a.GUID];this.element=a;this.options=this.extend(k,c);var b=parseInt(this.options.spacing,10);this.element.style.margin=0<b?"0 "+-b/2+"px":"";b=this.guid=++d;this.element.GUID=b;h[b]=this;this.init()}var d=0,h={},k={rowHeight:220,spacing:4},g=f.prototype;g.init=function(){this.getGalleryWidth();this.getItems();this.layout();window.addEventListener("resize",this.resize.bind(this),!0);window.addEventListener("load",this.resize.bind(this),!1)};g.extend=function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a};g.getGalleryWidth=function(){this.width=parseInt(getComputedStyle(this.element,null).width,10)};g.getItems=function(){this.items=[];for(var a=this.element.querySelectorAll("img"),c=0,b=a.length;c<b;c++){for(var e=this.items[c]={},d=a[c].parentNode;"FIGURE"!==d.tagName;)d=d.parentNode;e.holder=d;e.height=a[c].getAttribute("height");e.width=a[c].getAttribute("width");e.width*=this.options.rowHeight/e.height}};g.setItemSize=function(a){a.holder.style.width=a.width+"px";a.holder.style.height=a.height+"px";a.holder.style.margin=this.options.spacing/2+"px"};g.layout=function(){for(var a=0,c=1,b=[],e=0,d=this.items.length;e<d;e++)if(b.push({holder:this.items[e].holder,height:this.items[e].height,width:this.items[e].width}),a+=this.items[e].width+this.options.spacing,a>=this.width){for(var f=0,c=b.length*this.options.spacing,c=(this.width-c)/(a-c),a=0,g=b.length;a<g;a++)b[a].height=Math.ceil(this.options.rowHeight*c),b[a].width=Math.ceil(b[a].width*c),f+=b[a].width+this.options.spacing,f>this.width&&(b[a].width-=f>this.width?f-this.width:0),this.setItemSize(b[a]);b=[];a=0}e=0;for(d=b.length;e<d;e++)b[e].width=Math.floor(b[e].width*c),b[e].height=Math.floor(this.options.rowHeight*c),this.setItemSize(b[e]);this.resize()};g.resize=function(a,c){var b=this.width;this.getGalleryWidth();b!==this.width&&this.layout()};return f});(function(){for(var f=document.querySelectorAll(".mobx-gallery"),d=0,h=f.length;d<h;d++){var k=JSON.parse(f[d].getAttribute("data-settings"));f[d].removeAttribute("data-settings");new ModuloBox_Gallery(f[d],k)}})();