"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[4248,3035],{24248:function(t,e,o){o.r(e);var n=o(69307),a=(o(99196),o(65736)),r=o(47561),l=o(46006),i=o(13035),s=o(27119),c=o(69663),u=o(19848);e.default=function(t){var e=t.blockName,o=t.onChangeInline,p=t.onChange,m=t.breakpoint,d=t.clientId,f=t.isList,v=t.textLevel,h=t.styleCard,b=t.isCaptionToolbar,y=void 0!==b&&b,_=t.disableCustomFormats;if("maxi-blocks/text-maxi"!==e&&!y)return null;var k=(0,n.useContext)(s.HP),x=k.formatValue,C=k.onChangeTextFormat,g=Object.assign({},(0,c.t5)(t,"typography")),E=(0,s.M)({typography:g,formatValue:x,prop:"color",breakpoint:m,textLevel:v,styleCard:h}),L=(0,s.M)({typography:g,formatValue:x,prop:"palette-status",breakpoint:m,textLevel:v,styleCard:h}),O=(0,s.M)({typography:g,formatValue:x,prop:"palette-sc-status",breakpoint:m,textLevel:v,styleCard:h}),Z=(0,s.M)({typography:g,formatValue:x,prop:"palette-color",breakpoint:m,textLevel:v,styleCard:h}),P=(0,s.M)({typography:g,formatValue:x,prop:"palette-opacity",breakpoint:m,textLevel:v,styleCard:h}),S=(0,n.useRef)();return(0,n.createElement)(i.default,{className:"toolbar-item__text-options toolbar-item__text-color",tooltip:(0,a.__)("Text Colour","maxi-blocks"),icon:(0,n.createElement)("div",{className:"toolbar-item__text-options__icon",ref:S,style:{background:L?(0,c.zL)({firstVar:"color-".concat(Z),opacity:P,blockStyle:(0,c.RK)(d)}):E}},(0,n.createElement)(l.default,{className:"toolbar-item__text-options__inner-icon",icon:u.DZl}))},(0,n.createElement)("div",{className:"toolbar-item__text-color__popover"},(0,n.createElement)(r.default,{label:(0,a.__)("Text","maxi-blocks"),color:E,paletteColor:Z,paletteStatus:L,paletteSCStatus:O,paletteOpacity:P,onChangeInline:function(t){var e=t.color;o({color:e}),S.current.style.background=e},onChange:function(t){var e,o,n,a=t.color,r=t.paletteColor,l=t.paletteStatus,i=t.paletteSCStatus,c=t.paletteOpacity;return e={color:a,"palette-color":r,"palette-status":l,"palette-sc-status":i,"palette-opacity":c},o=(0,s.IX)({formatValue:x,isList:f,typography:g,value:e,breakpoint:m,textLevel:v,returnFormatValue:!0,disableCustomFormats:_}),n=Object.assign({},o.formatValue),null==o||delete o.formatValue,C(n),void p(o)},globalProps:{target:"",type:v},textLevel:v})))}},13035:function(t,e,o){o.r(e);var n=o(15671),a=o(43144),r=o(97326),l=o(60136),i=o(82963),s=o(61120),c=o(4942),u=o(69307),p=(o(99196),o(65736)),m=o(55609),d=o(9818),f=o(94184),v=o.n(f),h=o(92819),b=o(40684),y=o(88442),_=o(19848),k=o(19693);var x=(0,b.ZP)((function(){return Promise.resolve().then(o.bind(o,87570))})),C=(0,b.ZP)((function(){return Promise.resolve().then(o.bind(o,46006))})),g=(0,b.ZP)((function(){return Promise.resolve().then(o.bind(o,39909))})),E=function(t){(0,l.Z)(b,t);var e,o,f=(e=b,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(o){var a=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.Z)(this,t)});function b(){var t;(0,n.Z)(this,b);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=f.call.apply(f,[this].concat(o)),(0,c.Z)((0,r.Z)(t),"state",{isOpen:!1,onClose:function(){t.setState({isOpen:!1})}}),t.ref=(0,u.createRef)(),t}return(0,a.Z)(b,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onClickOutside",value:function(t){var e,o,n=t.path||t.composedPath&&t.composedPath();this.mounted&&((null===(e=this.ref.current)||void 0===e?void 0:e.ownerDocument.querySelectorAll(".toolbar-item__popover").length)>=2||n&&!n.includes(null===(o=this.ref.current)||void 0===o?void 0:o.ownerDocument.querySelector(".toolbar-item__popover"))&&!n.includes(this.ref.current))&&this.state.onClose()}},{key:"onToggle",value:function(){var t=this.state.isOpen,e=this.ref.current.ownerDocument.defaultView;t?e.removeEventListener("click",this.onClickOutside.bind(this),!1):e.addEventListener("click",this.onClickOutside.bind(this),!1),this.setState({isOpen:!t})}},{key:"render",value:function(){var t,e,o=this,n=this.props,a=n.text,r=n.className,l=n.tooltip,i=n.icon,s=n.children,c=n.advancedOptions,f=void 0!==c&&c,b=n.tab,E=void 0===b?0:b,L=n.position,O=void 0===L?"top center":L,Z=n.disabled,P=void 0!==Z&&Z,S=this.state,V=S.isOpen,N=S.onClose,w=v()("toolbar-item","toolbar-item__button",r),R=(0,(0,d.select)("maxiBlocks").receiveMaxiSettings)().hide_tooltips,M=!(0,h.isEmpty)(R)&&R,T=function(){return(0,u.createElement)(x,{className:w,onClick:function(){return o.onToggle()},"aria-expanded":V,action:"popup",disabled:P},(0,u.createElement)(C,{className:"toolbar-item__icon",icon:i}),(0,p.__)(a,"maxi-blocks"))};return(0,u.createElement)("div",{ref:this.ref},(0,u.createElement)(k.Z.Provider,{value:this.state},!M&&(0,u.createElement)(m.Tooltip,{text:l,placement:"top"},T()),M&&T(),V&&s&&(0,u.createElement)(g,{anchor:null===(t=this.ref)||void 0===t||null===(e=t.current)||void 0===e?void 0:e.closest(".toolbar-wrapper"),className:"toolbar-item__popover",onClose:N,position:O,useAnimationFrame:!0,useFlip:!0,useShift:!0,shiftPadding:!!f&&{right:20},shiftLimit:{mainAxis:!1},isAlternate:!0,noArrow:!0},(0,u.createElement)("div",null,s),!!f&&(0,u.createElement)(x,{className:"toolbar-item__popover__advanced-button",icon:_.vV$,onClick:function(){(0,y.RB)(E,f)}}))))}}]),b}(u.Component);e.default=E},19693:function(t,e,o){var n=(0,o(69307).createContext)();e.Z=n}}]);