"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[835,3035],{40835:function(e,t,o){o.r(t);var n=o(69307),r=(o(99196),o(65736)),i=o(13035),a=o(93064),c=o(52412),l=o(38207),s=o(92819),u=o(12916),d=o(19848),m=["maxi-blocks/container-maxi","maxi-blocks/row-maxi","maxi-blocks/column-maxi","maxi-blocks/group-maxi","maxi-blocks/slide-maxi","maxi-blocks/slider-maxi"];t.default=function(e){var t=e.blockName,o=e.onChangeInline,f=e.onChange,p=e.breakpoint,b=e["background-layers"],v=void 0===b?[]:b;if(!m.includes(t))return null;var h=v&&v.filter((function(e){return"color"===e.type})),k=h?h[h.length-1]:null,_=!(0,s.isEmpty)(k);return(0,n.createElement)(i.default,{className:"toolbar-item__background",advancedOptions:"background layer",tooltip:_?(0,r.__)("Background colour","maxi-blocks"):(0,r.__)("Background colour disabled","maxi-blocks"),icon:d.Czw},(0,n.createElement)("div",{className:"toolbar-item__background__popover"},(0,n.createElement)(l.default,{label:(0,r.__)("Enable background colour","maxi-blocks"),selected:_,onChange:function(e){if(e)f({"background-layers":[].concat(v,[Object.assign({},(0,u.vM)({layer:c.colorOptions,breakpoint:"general"}),{order:v&&!(0,s.isEmpty)(v)?v.reduce((function(e,t){return e.order>t.order?e:t})).order+1:1})])});else{var t=v.filter((function(e){return e.order!==k.order}));f({"background-layers":t})}}}),_&&(0,n.createElement)(a.Z,{disableClipPath:!0,key:"background-color-layer--".concat(k.order),colorOptions:k,onChangeInline:function(e){return o(e,".maxi-background-displayer__".concat(k.order))},onChange:function(e){var t=Object.assign({},k,e),o=(0,s.cloneDeep)(v);v.forEach((function(e,n){if(e.order===t.order){var r=(0,s.findIndex)(o,{order:t.order});o[r]=t}})),(0,s.isEqual)(o,v)||f({"background-layers":o},".maxi-background-displayer__".concat(k.order))},breakpoint:p,isToolbar:!0,disableResponsiveTabs:!0})))}},13035:function(e,t,o){o.r(t);var n=o(15671),r=o(43144),i=o(97326),a=o(60136),c=o(82963),l=o(61120),s=o(4942),u=o(69307),d=(o(99196),o(65736)),m=o(55609),f=o(9818),p=o(94184),b=o.n(p),v=o(92819),h=o(40684),k=o(88442),_=o(19848),g=o(19693);var x=(0,h.ZP)((function(){return Promise.resolve().then(o.bind(o,87570))})),y=(0,h.ZP)((function(){return Promise.resolve().then(o.bind(o,46006))})),C=(0,h.ZP)((function(){return Promise.resolve().then(o.bind(o,39909))})),E=function(e){(0,a.Z)(h,e);var t,o,p=(t=h,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(o){var r=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function h(){var e;(0,n.Z)(this,h);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return e=p.call.apply(p,[this].concat(o)),(0,s.Z)((0,i.Z)(e),"state",{isOpen:!1,onClose:function(){e.setState({isOpen:!1})}}),e.ref=(0,u.createRef)(),e}return(0,r.Z)(h,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onClickOutside",value:function(e){var t,o,n=e.path||e.composedPath&&e.composedPath();this.mounted&&((null===(t=this.ref.current)||void 0===t?void 0:t.ownerDocument.querySelectorAll(".toolbar-item__popover").length)>=2||n&&!n.includes(null===(o=this.ref.current)||void 0===o?void 0:o.ownerDocument.querySelector(".toolbar-item__popover"))&&!n.includes(this.ref.current))&&this.state.onClose()}},{key:"onToggle",value:function(){var e=this.state.isOpen,t=this.ref.current.ownerDocument.defaultView;e?t.removeEventListener("click",this.onClickOutside.bind(this),!1):t.addEventListener("click",this.onClickOutside.bind(this),!1),this.setState({isOpen:!e})}},{key:"render",value:function(){var e,t,o=this,n=this.props,r=n.text,i=n.className,a=n.tooltip,c=n.icon,l=n.children,s=n.advancedOptions,p=void 0!==s&&s,h=n.tab,E=void 0===h?0:h,O=n.position,Z=void 0===O?"top center":O,P=n.disabled,w=void 0!==P&&P,N=this.state,R=N.isOpen,A=N.onClose,B=b()("toolbar-item","toolbar-item__button",i),S=(0,(0,f.select)("maxiBlocks").receiveMaxiSettings)().hide_tooltips,D=!(0,v.isEmpty)(S)&&S,T=function(){return(0,u.createElement)(x,{className:B,onClick:function(){return o.onToggle()},"aria-expanded":R,action:"popup",disabled:w},(0,u.createElement)(y,{className:"toolbar-item__icon",icon:c}),(0,d.__)(r,"maxi-blocks"))};return(0,u.createElement)("div",{ref:this.ref},(0,u.createElement)(g.Z.Provider,{value:this.state},!D&&(0,u.createElement)(m.Tooltip,{text:a,placement:"top"},T()),D&&T(),R&&l&&(0,u.createElement)(C,{anchor:null===(e=this.ref)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.closest(".toolbar-wrapper"),className:"toolbar-item__popover",onClose:A,position:Z,useAnimationFrame:!0,useFlip:!0,useShift:!0,shiftPadding:!!p&&{right:20},shiftLimit:{mainAxis:!1},isAlternate:!0,noArrow:!0},(0,u.createElement)("div",null,l),!!p&&(0,u.createElement)(x,{className:"toolbar-item__popover__advanced-button",icon:_.vV$,onClick:function(){(0,k.RB)(E,p)}}))))}}]),h}(u.Component);t.default=E},19693:function(e,t,o){var n=(0,o(69307).createContext)();t.Z=n}}]);