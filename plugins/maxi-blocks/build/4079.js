"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[4079,3946,3035,2432],{62432:function(e,t,n){n.r(t);var o=n(4942),r=n(70885),i=n(69307),a=(n(99196),n(65736)),l=n(94333),c=n(9818),s=n(92819),u=n(94184),m=n.n(u),p=n(40684),f=n(62522),d=n(69663),v=n(10138),h=n(5931),b=(0,p.ZP)((function(){return Promise.resolve().then(n.bind(n,59017))})),k=(0,p.ZP)((function(){return Promise.resolve().then(n.bind(n,87570))})),_=(0,p.ZP)((function(){return Promise.resolve().then(n.bind(n,46006))}));t.default=function e(t){var n=t.clientId,u=t.onChange,p=t.breakpoint,g=t.repeaterStatus,E=t.repeaterRowClientId,w=t.getInnerBlocksPositions,C=t.toolbar,N=void 0!==C&&C,x=(0,i.useState)((0,s.isNil)(t["row-pattern-general"])?1:(0,f.o8)(t["row-pattern-general"])),y=(0,r.Z)(x,2),P=y[0],Z=y[1],I=(0,i.useState)([]),R=(0,r.Z)(I,2),S=R[0],O=R[1],B=(0,l.useInstanceId)(e);(0,i.useEffect)((function(){var e=g&&n===E;O(N?(0,f.uR)(e):(0,f.uR)(e,p,P))}),[p,P]),(0,i.useEffect)((function(){t["row-pattern-general"]&&Z((0,f.o8)(t["row-pattern-general"]))}),[p,t["row-pattern-general"]]);var T=m()("components-column-pattern__template-button",N&&"components-column-pattern__template-button--toolbar");return(0,i.createElement)("div",{className:"components-column-pattern"},!N&&"general"===p&&(0,i.createElement)(b,{label:(0,a.__)("Number of columns","maxi-blocks"),value:P,defaultValue:P,onChangeValue:function(e){return Z(e)},min:1,maxRange:8,disableReset:!0}),(0,i.createElement)("div",{className:"components-column-pattern__templates"},S.map((function(e){return e.isMoreThanEightColumns&&"general"!==p?null:(0,i.createElement)(k,{key:(0,s.uniqueId)("components-column-pattern--".concat(B,"--")),className:T+(e.isMoreThanEightColumns?" components-column-pattern-apply_settings":""),"aria-pressed":(0,s.isEqual)((m=[],(0,(0,c.select)("core/block-editor").getBlock)(n).innerBlocks.forEach((function(e){m.push((0,d.OR)({target:"column-size",breakpoint:p,attributes:e.attributes}))})),m),(e.isMoreThanEightColumns?Array(P).fill(100/P):(r=e.sizes,a=[],l=function(e){var t=[],n=0,o=0,r=1;return e.forEach((function(e){n+=e,o+=1,t.push({rowNumber:r}),Math.round(100*n+Number.EPSILON)/100==1&&(t.forEach((function(e){e.columnsNumber||(e.columnsNumber=o)})),r+=1,n=0,o=0)})),t}(r),r.forEach((function(e,t){l[t].columnsNumber>1&&a.push(100*r[t]),1===l[t].columnsNumber&&a.push(100)})),a)).map((function(e){return(0,s.floor)(e,2)}))),onClick:function(){(0,f.Hu)(e.name,n,p,P,g);var r=(0,d.kD)({target:"row-pattern",props:t,breakpoint:p}),i=e.isMoreThanEightColumns?P.toString():e.name;if(g){var a,l,s,m,b=w();(null!==(a=null===(l=(0,f.yf)(r))||void 0===l?void 0:l.sizes.length)&&void 0!==a?a:Number(r))<(null!==(s=null===(m=(0,f.yf)(i))||void 0===m?void 0:m.sizes.length)&&void 0!==s?s:Number(i))&&n===E?(0,v.z6)(E,b):n!==E&&(b[(0,h.TF)(n,b)].forEach((function(e){e!==n&&(0,f.Hu)(i,e,p,P,g,g)})),(0,(0,c.dispatch)("core/block-editor").__unstableMarkNextChangeAsNotPersistent)())}u((0,o.Z)({},(0,d.m2)("row-pattern",!1,null,p),i))}},e.isMoreThanEightColumns?"Apply Setting":(0,i.createElement)(_,{className:"components-column-pattern__icon",icon:e.icon}));var r,a,l,m}))))}},33946:function(e,t,n){n.r(t);var o=n(69307),r=(n(99196),n(65736)),i=n(9818),a=n(34261),l=n(5931),c=n(62522),s=n(27191),u=n(92819);t.default=function(e){var t=e.clientId,n=e.maxiSetAttributes,m=e.deviceType,p=e.repeaterStatus,f=e.repeaterRowClientId,d=e.getInnerBlocksPositions,v=(0,i.useDispatch)("core/block-editor").selectBlock;return(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{className:"maxi-row-block__title"},(0,o.createElement)("span",null,(0,r.__)("Column picker","maxi-blocks"))),(0,o.createElement)("div",{className:"maxi-row-block__template",onClick:function(){return v(t)},key:"maxi-row-block--".concat(t)},(0,c.uR)(p).map((function(e){return(0,o.createElement)(a.zx,{key:(0,u.uniqueId)("maxi-row-block--".concat(t,"--")),className:"maxi-row-block__template__button",onClick:function(){if(n({"row-pattern-general":e.name,"row-pattern-m":e.responsiveLayout}),(0,s.Z)(e.name,t,m),p&&t!==f){var o=d();o[(0,l.TF)(t,o)].forEach((function(n){n!==t&&(0,s.Z)(e.name,n,m)}))}}},(0,o.createElement)(a.JO,{className:"maxi-row-block__template__icon",icon:e.icon,avoidSize:!0}))}))))}},44079:function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var o=n(69307),r=(n(99196),n(65736)),i=n(13035),a=n(62432),l=(n(33946),n(69663)),c=n(19848),s=function(e){var t=e.clientId,n=e.blockName,s=e.onChange,u=e.breakpoint,m=e.repeaterStatus,p=e.repeaterRowClientId,f=e.getInnerBlocksPositions;return"maxi-blocks/row-maxi"===n&&e["row-pattern-general"]?(0,o.createElement)(i.default,{className:"toolbar-item__column-pattern",icon:c.kog,tooltip:(0,r.__)("Column picker","maxi-blocks")},(0,o.createElement)("div",{className:"toolbar-item__column-pattern__popover"},(0,o.createElement)(a.default,Object.assign({clientId:t},(0,l.t5)(e,"rowPattern"),{onChange:function(e){s(e)},breakpoint:u,repeaterStatus:m,repeaterRowClientId:p,getInnerBlocksPositions:f,toolbar:!0})))):null}},13035:function(e,t,n){n.r(t);var o=n(15671),r=n(43144),i=n(97326),a=n(60136),l=n(82963),c=n(61120),s=n(4942),u=n(69307),m=(n(99196),n(65736)),p=n(55609),f=n(9818),d=n(94184),v=n.n(d),h=n(92819),b=n(40684),k=n(88442),_=n(19848),g=n(19693);var E=(0,b.ZP)((function(){return Promise.resolve().then(n.bind(n,87570))})),w=(0,b.ZP)((function(){return Promise.resolve().then(n.bind(n,46006))})),C=(0,b.ZP)((function(){return Promise.resolve().then(n.bind(n,39909))})),N=function(e){(0,a.Z)(b,e);var t,n,d=(t=b,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,l.Z)(this,e)});function b(){var e;(0,o.Z)(this,b);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=d.call.apply(d,[this].concat(n)),(0,s.Z)((0,i.Z)(e),"state",{isOpen:!1,onClose:function(){e.setState({isOpen:!1})}}),e.ref=(0,u.createRef)(),e}return(0,r.Z)(b,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onClickOutside",value:function(e){var t,n,o=e.path||e.composedPath&&e.composedPath();this.mounted&&((null===(t=this.ref.current)||void 0===t?void 0:t.ownerDocument.querySelectorAll(".toolbar-item__popover").length)>=2||o&&!o.includes(null===(n=this.ref.current)||void 0===n?void 0:n.ownerDocument.querySelector(".toolbar-item__popover"))&&!o.includes(this.ref.current))&&this.state.onClose()}},{key:"onToggle",value:function(){var e=this.state.isOpen,t=this.ref.current.ownerDocument.defaultView;e?t.removeEventListener("click",this.onClickOutside.bind(this),!1):t.addEventListener("click",this.onClickOutside.bind(this),!1),this.setState({isOpen:!e})}},{key:"render",value:function(){var e,t,n=this,o=this.props,r=o.text,i=o.className,a=o.tooltip,l=o.icon,c=o.children,s=o.advancedOptions,d=void 0!==s&&s,b=o.tab,N=void 0===b?0:b,x=o.position,y=void 0===x?"top center":x,P=o.disabled,Z=void 0!==P&&P,I=this.state,R=I.isOpen,S=I.onClose,O=v()("toolbar-item","toolbar-item__button",i),B=(0,(0,f.select)("maxiBlocks").receiveMaxiSettings)().hide_tooltips,T=!(0,h.isEmpty)(B)&&B,A=function(){return(0,u.createElement)(E,{className:O,onClick:function(){return n.onToggle()},"aria-expanded":R,action:"popup",disabled:Z},(0,u.createElement)(w,{className:"toolbar-item__icon",icon:l}),(0,m.__)(r,"maxi-blocks"))};return(0,u.createElement)("div",{ref:this.ref},(0,u.createElement)(g.Z.Provider,{value:this.state},!T&&(0,u.createElement)(p.Tooltip,{text:a,placement:"top"},A()),T&&A(),R&&c&&(0,u.createElement)(C,{anchor:null===(e=this.ref)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.closest(".toolbar-wrapper"),className:"toolbar-item__popover",onClose:S,position:y,useAnimationFrame:!0,useFlip:!0,useShift:!0,shiftPadding:!!d&&{right:20},shiftLimit:{mainAxis:!1},isAlternate:!0,noArrow:!0},(0,u.createElement)("div",null,c),!!d&&(0,u.createElement)(E,{className:"toolbar-item__popover__advanced-button",icon:_.vV$,onClick:function(){(0,k.RB)(N,d)}}))))}}]),b}(u.Component);t.default=N},19693:function(e,t,n){var o=(0,n(69307).createContext)();t.Z=o}}]);