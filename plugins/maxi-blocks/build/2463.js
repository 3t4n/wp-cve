"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[2463],{32463:function(e,t,o){o.r(t);var i=o(69307),n=(o(99196),o(65736)),r=o(9818),a=o(4981),c=o(92819),s=o(94184),l=o.n(s),u=o(40684),m=o(34261),p=o(69663),d=o(49759),b=o(40771),v=o(49369),k=o(19848),x=(0,u.ZP)((function(){return o.e(9820).then(o.bind(o,99820))})),f=function(e){var t=e.baseBreakpoint,o=e.icon,r=e.tooltipValue,a=e.breakpoint,c=e.target,s=t===c,u=l()("maxi-responsive-selector__button-wrapper",s&&"maxi-responsive-selector__base");return(0,i.createElement)("div",{className:u},(0,i.createElement)(m.zx,{className:"maxi-responsive-selector__button-item",onClick:function(){return(0,p.nH)(s?"general":c)},"aria-pressed":"general"===a?t===c:a===c},(0,i.createElement)("div",null,r&&(0,i.createElement)("div",{className:"responsive-button-tooltip"},r),o,s&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)("svg",{className:"maxi-tabs-control__notification",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 9 9"},(0,i.createElement)("path",{fill:"#ff4a17",d:"M4.5 0H9v4.5A4.5 4.5 0 0 1 4.5 9 4.5 4.5 0 0 1 0 4.5 4.5 4.5 0 0 1 4.5 0Z"})),(0,i.createElement)("div",{className:"maxi-responsive-selector__button-current-size"},(0,n.__)("Your size","maxi-blocks"))))))};t.default=function(e){var t=e.className,o=e.isOpen,s=e.onClose,u=(0,i.useRef)(null),p=(0,r.useDispatch)("core/block-editor").insertBlock,y=(0,r.useDispatch)("maxiBlocks").setMaxiDeviceType,_=(0,r.useSelect)((function(e){var t=e("maxiBlocks"),o=t.receiveMaxiDeviceType,i=t.receiveMaxiBreakpoints,n=t.receiveBaseBreakpoint,r=e("core/edit-post")||e("core/edit-site"),a=r.isListViewOpened,c=r.isInserterOpened,s=n();return{deviceType:o(),breakpoints:i(),baseBreakpoint:s,isListViewOpened:a(),isInserterOpened:c()}})),E=_.deviceType,h=_.breakpoints,g=_.baseBreakpoint,w=_.isListViewOpened,S=_.isInserterOpened;(0,i.useEffect)((function(){var e=document.querySelector(".interface-interface-skeleton__secondary-sidebar");return e&&o&&(e.style.marginTop="41px"),function(){e&&(e.style.marginTop="0")}}),[w,S,o]),(0,i.useEffect)((function(){[document.querySelector(".edit-post-visual-editor")||document.querySelector(".edit-site-visual-editor"),(0,d.db)()].forEach((function(e){e&&!e.getAttributeNames().includes("maxi-blocks-responsive")&&e.setAttribute("maxi-blocks-responsive",g)}))})),(0,i.useEffect)((function(){var e=document.querySelector(".is-tablet-preview"),t=document.querySelector(".is-mobile-preview");if(e||t){var o=null!=e?e:t,i=o.querySelector('iframe[name="editor-canvas"]'),n=i.contentDocument,r=n.body,a=o.closest(".edit-post-visual-editor"),s=a.getAttribute("maxi-blocks-responsive-width");if(a.getAttribute("is-maxi-preview")&&(o.style.width="".concat(s,"px"),o.style.boxSizing="content-box"),r&&i&&!n.body.classList.contains("maxi-blocks--active")){var l;n.body.classList.add("maxi-blocks--active"),r.setAttribute("maxi-blocks-responsive",e?"s":"xs"),n.documentElement.style.scrollbarWidth="none",(0,v.hR)((0,v.oU)(),!0,n);var u=Array.from(document.querySelectorAll("div.maxi-blocks__styles"));(0,c.isEmpty)(u)||u.forEach((function(e){var t,o=e.cloneNode(!0),r=o.id;null===(t=n.querySelector("#".concat(r)))||void 0===t||t.remove(),o.children[0].innerText=o.children[0].innerText.replaceAll(" .edit-post-visual-editor",".editor-styles-wrapper"),i.contentDocument.head.appendChild(o)}));var m,p=null===(l=document.querySelector("#maxi-blocks-sc-vars-inline-css"))||void 0===l?void 0:l.cloneNode(!0);p&&(null===(m=n.querySelector("#maxi-blocks-sc-vars-inline-css"))||void 0===m||m.remove(),i.contentDocument.head.appendChild(p));var d=n.querySelector("#maxi-blocks-block-editor-css"),b=n.querySelector("#maxi-blocks-block-css");if(!d){var k=document.querySelector("#maxi-blocks-block-editor-css");i.contentDocument.head.appendChild(k.cloneNode(!0))}if(!b){var x=document.querySelector("#maxi-blocks-block-css");i.contentDocument.head.appendChild(x.cloneNode(!0))}}}}));var q=(0,i.useCallback)((function(e){e.addEventListener("click",(function(e){var t=e.target.innerText,o=("Desktop"===t?"general":"Tablet"===t&&"s")||"Mobile"===t&&"xs",i=document.querySelector(".edit-post-visual-editor")||document.querySelector(".edit-site-visual-editor");i.setAttribute("maxi-blocks-responsive",o),i.removeAttribute("maxi-blocks-responsive-width"),"Desktop"===t&&(i.style.width=""),y({deviceType:o,isGutenbergButton:!0})}))}));(0,i.useEffect)((function(){var e=document.querySelector(".block-editor-post-preview__button-toggle");if(e){var t=new MutationObserver((function(e){e.forEach((function(e){if("attributes"===e.type&&"aria-expanded"===e.attributeName){var t=document.querySelector(".block-editor-post-preview__dropdown-content"),o=document.querySelector("#maxi-blocks__responsive-toolbar");t&&!o&&Array.from(t.querySelectorAll(".block-editor-post-preview__button-resize")).forEach(q)}}))}));return t.observe(e,{attributes:!0,childList:!1,subtree:!1}),function(){return t.disconnect()}}return function(){}}));var B=l()("maxi-responsive-selector",t);return(0,i.createElement)("div",{className:B,style:{display:o?"flex":"none"},ref:u},(0,i.createElement)("span",{className:"maxi-responsive-selector__close",onClick:s},(0,i.createElement)(m.JO,{icon:k.UFW})),(0,i.createElement)(f,{icon:k.AC2,target:"xxl",breakpoint:E,baseBreakpoint:g,breakpoints:h,tooltipValue:">".concat(h.xl)}),(0,i.createElement)(f,{icon:k.uKo,target:"xl",breakpoint:E,baseBreakpoint:g,breakpoints:h,tooltipValue:h.xl}),(0,i.createElement)(f,{icon:k.dT7,target:"l",breakpoint:E,baseBreakpoint:g,breakpoints:h,tooltipValue:h.l}),(0,i.createElement)(f,{icon:k.ly8,target:"m",breakpoint:E,baseBreakpoint:g,breakpoints:h,tooltipValue:h.m}),(0,i.createElement)(f,{icon:k.wwI,target:"s",breakpoint:E,baseBreakpoint:g,breakpoints:h,tooltipValue:h.s}),(0,i.createElement)(f,{icon:k.IUW,target:"xs",breakpoint:E,baseBreakpoint:g,breakpoints:h,tooltipValue:h.xs}),(0,i.createElement)("div",{className:"action-buttons"},(0,i.createElement)(m.zx,{className:"action-buttons__button","aria-label":(0,n.__)("Template library","maxi-blocks"),onClick:function(){return function(){var e;if((0,d.Yp)()){var t=(0,r.select)("core/edit-site").getEditedPostId(),o=(0,r.select)("core/edit-site").getEditedPostType();(t.includes("single")||t.includes("blank")||t.includes("page"))&&"wp_template"===o&&p((0,a.createBlock)("maxi-blocks/maxi-cloud")),o&&t&&(0,b.Ac)((function(t){return"core/post-content"===t.name&&(e=t.clientId,!0)}))}p((0,a.createBlock)("maxi-blocks/maxi-cloud"),void 0,e)}()}},(0,i.createElement)(m.JO,{className:"template-library-cloud-icon",icon:k.nyz}),(0,i.createElement)("span",null,(0,n.__)("Template library","maxi-blocks")))),(0,i.createElement)(x,{ref:u}),(0,i.createElement)("a",{href:"https://maxiblocks.com/go/help-center",target:"_blank",rel:"noopener noreferrer",className:"maxi-components-button components-button action-buttons__button"},(0,i.createElement)(m.JO,{className:"toolbar-item__icon",icon:k.mvP})," ",(0,n.__)("Help","maxi-blocks")))}}}]);