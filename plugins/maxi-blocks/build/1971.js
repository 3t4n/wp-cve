"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[1971,3035],{1971:function(e,t,n){n.r(t);var i=n(15861),o=n(69307),r=(n(99196),n(11284)),l=n.n(r),a=n(65736),c=n(9818),s=n(35674),u=n(38207),d=n(19693),m=n(13035),f=n(69663),v=n(66545),p=n(12394),h=n(92819),k=n(19848),b=n(14412),x=n(54635);t.default=function(e){var t,n=e.blockName,r=e.onChange,_=e.linkSettings,g=e.clientId,y=e.disableCustomFormats,C=void 0!==y&&y,E=e["dc-status"],Z=e["dc-link-status"],O=e["dc-link-target"],w=e["dc-type"],N=(null!==(t=(0,o.useContext)(v.HW))&&void 0!==t?t:{}).contextLoop,P=null!=N?N:{},L=P["cl-status"],S=P["cl-type"],A=L&&p.Z.includes(n),R=E||A,B=null!=w?w:S;if(("maxi-blocks/divider-maxi"===n||"maxi-blocks/accordion-maxi"===n||"maxi-blocks/text-maxi"===n||"maxi-blocks/slider-maxi"===n)&&!C)return null;var D=!1;if(null!=_&&_.disabled)D=!0;else{var j=(0,c.select)("core/block-editor").getClientIdsOfDescendants([g]);null!=j&&j.length&&j.forEach((function(e){var t,n,i=(0,c.select)("core/block-editor").getBlockAttributes(e);(!(0,h.isEmpty)(null===(t=i.linkSettings)||void 0===t?void 0:t.url)||"maxi-blocks/text-maxi"===(0,c.select)("core/block-editor").getBlockName(e)&&(i.content.includes("<a ")||null!==(n=i["dc-content"])&&void 0!==n&&n.includes("<a ")))&&(D=!0)}))}return(0,o.createElement)("div",{className:"toolbar-item toolbar-item__link"},(0,o.createElement)(m.default,{icon:k._qv,tooltip:(0,a.__)("Link","maxi-blocks"),className:(!(0,h.isNil)(_)&&!(0,h.isEmpty)(_.url)||Z)&&"toolbar-item__link--active",disabled:D},!D&&(0,o.createElement)("div",{className:"toolbar-item__link-popover"},R&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(u.default,{label:(0,a.__)("Use dynamic content link","maxi-blocks"),selected:Z,onChange:function(){var t=(0,i.Z)(l().mark((function t(n){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,(0,v.vp)((0,v.bp)((0,f.t5)(e,"dynamicContent")),g);case 4:t.t0=t.sent;case 5:i=t.t0,r(n?Object.assign({},_,{url:i,title:i}):Object.assign({},_,{url:null,title:null}),Object.assign({"dc-link-status":n},A&&{"dc-status":n}));case 7:case"end":return t.stop()}}),t)})));return function(_x){return t.apply(this,arguments)}}()}),b.gl.includes(B)&&Z&&(0,o.createElement)(x.default,{label:(0,a.__)("Link target","maxi-blocks"),value:O,options:b.Nz[B],newStyle:!0,onChange:function(){var t=(0,i.Z)(l().mark((function t(n){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,(0,v.vp)((0,v.bp)((0,f.t5)(Object.assign({},e,{"dc-link-target":n}),"dynamicContent")),g);case 4:t.t0=t.sent;case 5:i=t.t0,r(Object.assign({},_,{url:i,title:i}),{"dc-link-target":n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,o.createElement)(d.Z.Consumer,null,(function(e){return(0,o.createElement)(s.Z,{linkValue:_,isDCLinkActive:R&&Z,onChangeLink:r,onRemoveLink:function(){r({url:""}),e.onClose()}})})))))}},13035:function(e,t,n){n.r(t);var i=n(15671),o=n(43144),r=n(97326),l=n(60136),a=n(82963),c=n(61120),s=n(4942),u=n(69307),d=(n(99196),n(65736)),m=n(55609),f=n(9818),v=n(94184),p=n.n(v),h=n(92819),k=n(40684),b=n(88442),x=n(19848),_=n(19693);var g=(0,k.ZP)((function(){return Promise.resolve().then(n.bind(n,87570))})),y=(0,k.ZP)((function(){return Promise.resolve().then(n.bind(n,46006))})),C=(0,k.ZP)((function(){return Promise.resolve().then(n.bind(n,39909))})),E=function(e){(0,l.Z)(k,e);var t,n,v=(t=k,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,c.Z)(t);if(n){var o=(0,c.Z)(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return(0,a.Z)(this,e)});function k(){var e;(0,i.Z)(this,k);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=v.call.apply(v,[this].concat(n)),(0,s.Z)((0,r.Z)(e),"state",{isOpen:!1,onClose:function(){e.setState({isOpen:!1})}}),e.ref=(0,u.createRef)(),e}return(0,o.Z)(k,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onClickOutside",value:function(e){var t,n,i=e.path||e.composedPath&&e.composedPath();this.mounted&&((null===(t=this.ref.current)||void 0===t?void 0:t.ownerDocument.querySelectorAll(".toolbar-item__popover").length)>=2||i&&!i.includes(null===(n=this.ref.current)||void 0===n?void 0:n.ownerDocument.querySelector(".toolbar-item__popover"))&&!i.includes(this.ref.current))&&this.state.onClose()}},{key:"onToggle",value:function(){var e=this.state.isOpen,t=this.ref.current.ownerDocument.defaultView;e?t.removeEventListener("click",this.onClickOutside.bind(this),!1):t.addEventListener("click",this.onClickOutside.bind(this),!1),this.setState({isOpen:!e})}},{key:"render",value:function(){var e,t,n=this,i=this.props,o=i.text,r=i.className,l=i.tooltip,a=i.icon,c=i.children,s=i.advancedOptions,v=void 0!==s&&s,k=i.tab,E=void 0===k?0:k,Z=i.position,O=void 0===Z?"top center":Z,w=i.disabled,N=void 0!==w&&w,P=this.state,L=P.isOpen,S=P.onClose,A=p()("toolbar-item","toolbar-item__button",r),R=(0,(0,f.select)("maxiBlocks").receiveMaxiSettings)().hide_tooltips,B=!(0,h.isEmpty)(R)&&R,D=function(){return(0,u.createElement)(g,{className:A,onClick:function(){return n.onToggle()},"aria-expanded":L,action:"popup",disabled:N},(0,u.createElement)(y,{className:"toolbar-item__icon",icon:a}),(0,d.__)(o,"maxi-blocks"))};return(0,u.createElement)("div",{ref:this.ref},(0,u.createElement)(_.Z.Provider,{value:this.state},!B&&(0,u.createElement)(m.Tooltip,{text:l,placement:"top"},D()),B&&D(),L&&c&&(0,u.createElement)(C,{anchor:null===(e=this.ref)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.closest(".toolbar-wrapper"),className:"toolbar-item__popover",onClose:S,position:O,useAnimationFrame:!0,useFlip:!0,useShift:!0,shiftPadding:!!v&&{right:20},shiftLimit:{mainAxis:!1},isAlternate:!0,noArrow:!0},(0,u.createElement)("div",null,c),!!v&&(0,u.createElement)(g,{className:"toolbar-item__popover__advanced-button",icon:x.vV$,onClick:function(){(0,b.RB)(E,v)}}))))}}]),k}(u.Component);t.default=E},19693:function(e,t,n){var i=(0,n(69307).createContext)();t.Z=i}}]);