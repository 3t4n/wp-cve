"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[2766],{42766:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var a=n(69307),o=(n(99196),n(65736)),c=n(55609),r=n(9818),l=n(87570),i=n(46006),s=n(12804),u=n(4942),m=n(70885),p=n(34261),b=n(71002),_=n(92819),d=function(e){var t=e.tab,n=e.label,o=e.organizedAttributes,c=e.currentOrganizedAttributes,r=e.specialPaste,l=e.handleSpecialPaste,i=(0,a.useState)(!1),s=(0,m.Z)(i,2),u=s[0],p=s[1],d=(0,_.kebabCase)(n);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"toolbar-item__copy-paste__popover__item toolbar-item__copy-paste__popover__item__group",onClick:function(e){"INPUT"!==e.target.nodeName&&p(!u)}},(0,a.createElement)("input",{type:"checkbox",name:d,id:d,checked:function(e,t,n){var a=Object.keys(t).length-1;return e.filter((function(e){return Object.keys(e).includes(n)})).length===a}(r[t],o[t][n],n),onChange:function(e){return function(e,t,n){l({attr:Object.keys((0,_.omit)(o[t][e],"group")),tab:t,group:e,checked:n})}(n,t,e.target.checked)}}),(0,a.createElement)("span",{onClick:function(e){return e.preventDefault()}},(0,a.createElement)("label",{htmlFor:d},n)),(0,a.createElement)("span",{onClick:function(e){return p(!u)},"aria-expanded":u,className:"copy-paste__group-icon"})),u&&Object.keys(o[t][n]).map((function(e){var i=(0,_.kebabCase)(e===n?"".concat(n,"-nested"):e);return!(0,_.isEqual)(c[t][n][e],o[t][n][e])&&(0,a.createElement)("div",{className:"toolbar-item__copy-paste__popover__item",key:"copy-paste-".concat(t,"-").concat(i),"data-copy_paste_group":(0,_.kebabCase)(n)},(0,a.createElement)("label",{htmlFor:i,className:"maxi-axis-control__content__item__checkbox"},(0,a.createElement)("input",{type:"checkbox",name:i,id:i,checked:!(0,_.isEmpty)(r[t].filter((function(t){return"object"===(0,b.Z)(t)&&Object.values(t).includes(e)}))),onChange:function(a){return l({attr:e,tab:t,checked:a.target.checked,group:n})}}),(0,a.createElement)("span",null,e)))})))},k=n(40771),g=n(57850),f=n(62522),x=n(10221),v=n(10138),h=n(5931),E=n(45772),y=["maxi-blocks/container-maxi","maxi-blocks/row-maxi","maxi-blocks/column-maxi","maxi-blocks/group-maxi"],C=function(e){var t=e.blockName,n=e.clientId,c=e.closeMoreSettings,i=e.copyPasteMapping,b=(0,a.useContext)(E.Z),C=(0,r.useSelect)((function(e){var t=e("maxiBlocks"),a=t.receiveCopiedStyles,o=t.receiveCopiedBlocks,c=e("core/block-editor").getBlock,r=a(),l=o(),s=r&&(0,g.Q9)(r,i)||{},u=c(n),m=u.attributes,p=u.innerBlocks,b=(0,g.Q9)(m,i,!0);return{attributes:m,blockAttributes:b,organizedAttributes:s,currentOrganizedAttributes:(0,g.Q9)(b,i),copiedStyles:r,copiedBlocks:l,innerBlocks:p,hasInnerBlocks:!(0,_.isEmpty)(p)}})),N=C.attributes,O=C.blockAttributes,S=C.organizedAttributes,B=C.currentOrganizedAttributes,A=C.copiedStyles,j=C.copiedBlocks,I=C.innerBlocks,P=C.hasInnerBlocks,T=function(e){return Object.keys(e).reduce((function(e,t){return e[t]=[],e}),{})},w=(0,a.useState)(T(S)),Z=(0,m.Z)(w,2),R=Z[0],z=Z[1],D=(0,r.useDispatch)("maxiBlocks"),M=D.copyStyles,q=D.copyNestedBlocks,F=(0,r.useDispatch)("core/block-editor"),H=F.updateBlockAttributes,V=F.replaceInnerBlocks,Q=function(e){if("maxi-blocks/row-maxi"===t&&Object.entries(e).forEach((function(e){var t=(0,m.Z)(e,2),a=t[0],o=t[1];a.includes("row-pattern-")&&o!==N[a]&&(0,f.Hu)(o,n,a.replace("row-pattern-",""))})),e["background-layers"]){var a=(0,x.Zg)(e["background-layers"],N.uniqueID);a&&(e["background-layers"]=a)}},W=function(){if(null!=b&&b.repeaterStatus){var e=(0,r.select)("core/block-editor").getBlock,t=null==b?void 0:b.getInnerBlocksPositions(),a=(0,h.Vs)(n,(0,h.AT)(n,t[[-1]])),o=t[a].findIndex((function(e){return e===n}));t[a].forEach((function(n){return(0,v.jg)(e(n),(0,h.AT)(n,t[[-1]]),t,o)}))}},G=function(e){var t=e.attr,n=e.tab,a=e.checked,o=e.group,c=Object.assign({},R);(0,_.isArray)(t)?(c[n]=c[n].filter((function(e){return!(0,_.isObject)(e)||(0,_.isObject)(e)&&!Object.keys(e).includes(o)})),t.forEach((function(e){a&&(c[n]=[].concat(c[n],[(0,u.Z)({},o,e)]))}))):c[n]=o?a?[].concat(c[n],[(0,u.Z)({},o,t)]):c[n].filter((function(e){return!(0,_.isObject)(e)||(0,_.isObject)(e)&&!Object.values(e).includes(t)})):R[n].includes(t)?c[n].filter((function(e){return e!==t})):[].concat(c[n],[t]),z(c)},L=function(){var e={};Object.entries(R).forEach((function(t){var n=(0,m.Z)(t,2),a=n[0];n[1].forEach((function(t){e=Object.assign({},e,(0,_.isString)(t)?S[a][t]:S[a][Object.keys(t)[0]][Object.values(t)[0]])}))})),z(T(S)),c(),Q(e),H(n,e),W()};return(0,a.createElement)("div",{className:"toolbar-item__copy-paste__popover"},(0,a.createElement)(l.default,{className:"toolbar-item__copy-paste__popover__button",onClick:function(){c(),M(O)}},(0,o.__)("Copy styles - all","maxi-blocks")),(0,a.createElement)(l.default,{className:"toolbar-item__copy-paste__popover__button",onClick:function(){var e=(0,g.xc)(A,N,i);c(),Q(e),H(n,e),W()},disabled:(0,_.isEmpty)(A)},(0,o.__)("Paste styles - all","maxi-blocks")),!(0,_.isEmpty)(A)&&!(0,_.isEqual)(B,S)&&(0,a.createElement)(s.default,{className:"maxi-copypaste__copy-selector",contentClassName:"maxi-more-settings__popover maxi-dropdown__child-content maxi-copy-paste__popover",position:"right bottom",renderToggle:function(e){var t=e.onToggle;return(0,a.createElement)(l.default,{className:"toolbar-item__copy-paste__popover__button",onClick:t},(0,o.__)("Paste special - select","maxi-blocks"))},renderContent:function(){return(0,a.createElement)("form",null,(0,a.createElement)(p.nS,{target:"sidebar-settings-tabs",disablePadding:!0,items:(e=[],Object.entries(S).forEach((function(t){var n=(0,m.Z)(t,2),c=n[0],r=n[1],l={label:(0,o.__)((0,_.capitalize)(c),"maxi-blocks"),content:!(0,_.isEmpty)(S[c])&&!(0,_.isEqual)(B[c],r)&&Object.entries(r).map((function(e){var t=(0,m.Z)(e,2),n=t[0],o=t[1],r=(0,_.kebabCase)(n);return o.group||(0,_.isEqual)(B[c][n],o)?!(0,_.isEqual)(B[c][n],o)&&(0,a.createElement)(d,{key:"copy-paste-group-".concat(c,"-").concat(n),tab:c,label:n,organizedAttributes:S,currentOrganizedAttributes:B,specialPaste:R,handleSpecialPaste:G}):(0,a.createElement)("div",{className:"toolbar-item__copy-paste__popover__item",key:"copy-paste-".concat(c,"-").concat(r)},(0,a.createElement)("label",{htmlFor:r,className:"maxi-axis-control__content__item__checkbox"},(0,a.createElement)("input",{type:"checkbox",name:r,id:r,checked:R[c].includes(n),onChange:function(){return G({attr:n,tab:c})}}),(0,a.createElement)("span",null,n)))}))};l.content&&e.push(l)})),e)}),(0,a.createElement)(l.default,{className:"toolbar-item__copy-paste__popover__button toolbar-item__copy-paste__popover__button--special",onClick:L},(0,o.__)("Paste special style","maxi-blocks")));var e}}),P&&(0,a.createElement)(l.default,{className:"toolbar-item__copy-paste__popover__button toolbar-item__copy-nested-block__popover__button",onClick:function(){q(I),c()}},(0,o.__)("Copy nested blocks","maxi-blocks")),y.includes(t)&&(0,a.createElement)(l.default,{className:"toolbar-item__copy-paste__popover__button",onClick:function(){var e=(0,g.al)(j);if(null!=b&&b.repeaterStatus||V(n,e),null!=b&&b.repeaterStatus){var a={name:t,clientId:n,innerBlocks:I},o=Object.assign({},a,{innerBlocks:e});(0,k.Ac)((function(e){var t=(0,h.Vs)(e.clientId,a),n=(0,h.P4)(t,o);n&&e.name===n.name&&(n.clientId=e.clientId)}),!1,I),V(n,e);var r=null==b?void 0:b.getInnerBlocksPositions();(0,v.z6)(null==b?void 0:b.repeaterRowClientId,r,null,(0,h.AT)(n,r[[-1]]).clientId)}c()},disabled:(0,_.isEmpty)(j)},(0,o.__)("Paste nested blocks","maxi-blocks")))},N=n(15861),O=n(11284),S=n.n(O),B=n(74284),A=n(63480),j=function(e){var t=e.clientId,n=(0,a.useState)(""),c=(0,m.Z)(n,2),i=c[0],u=c[1],p=(0,r.useDispatch)(B.store).__experimentalConvertBlocksToReusable,b=(0,a.useCallback)(function(){var e=(0,N.Z)(S().mark((function e(n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(t,n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(_x){return e.apply(this,arguments)}}(),[t]);return(0,a.createElement)(s.default,{className:"maxi-reusableblocks__blocks-selector",contentClassName:"maxi-more-settings__popover maxi-dropdown__child-content maxi-dropdown__reusable-content",position:"right top",renderToggle:function(e){e.isOpen;var t=e.onToggle;return(0,a.createElement)(l.default,{onClick:t,text:"Copy"},(0,o.__)("Add to reusable blocks","maxi-blocks"))},renderContent:function(){return(0,a.createElement)("form",{onSubmit:function(e){e.preventDefault(),b(i),u("")}},(0,a.createElement)(A.default,{placeholder:(0,o.__)("Reusable block name","maxi-blocks"),label:(0,o.__)("Create reusable block","maxi-blocks"),value:i,onChange:u}),(0,a.createElement)(l.default,{type:"submit"},(0,o.__)("Save","maxi-blocks")))}})},I=n(4823),P=function(e){var t=e.clientId,n=e.blockName,i=e.tooltipsHide;if("maxi-blocks/column-maxi"===n)return null;var s=(0,(0,r.select)("core/block-editor").getBlock)(t),u=s.innerBlocks,m=s.attributes.uniqueID,p=(0,r.useDispatch)("core/block-editor").removeBlock,b=function(){return(0,a.createElement)("div",{className:"toolbar-item toolbar-item__delete"},(0,a.createElement)(l.default,{onClick:function(){p(t),(0,I.Z)(m,u)}},(0,o.__)("Remove block","maxi-blocks"),(0,a.createElement)("span",null,"Shift+Alt+Z")))};return i?b():(0,a.createElement)(c.Tooltip,{text:(0,o.__)("Delete","maxi-blocks"),placement:"top"},b())},T=n(21464),w=n(69663),Z=n(19848),R=["maxi-blocks/button-maxi","maxi-blocks/svg-icon-maxi","maxi-blocks/image-maxi"],z=["maxi-blocks/text-maxi"],D=function(e){var t=e.blockName,n=e.onChange,c=e.breakpoint,r=e.isCaptionToolbar,u=void 0!==r&&r;if(!R.includes(t)&&!u)return null;var m=z.includes(t)||u;return(0,a.createElement)(s.default,{className:"toolbar-item__alignment",contentClassName:"maxi-dropdown__child-content maxi-dropdown__alignment-content",position:"bottom right",renderToggle:function(e){e.isOpen;var t=e.onToggle;return(0,a.createElement)(l.default,{onClick:t,text:"Copy"},m?(0,a.createElement)(i.default,{className:"toolbar-item__icon toolbar-item__icon__alignment",icon:Z.A8I}):(0,a.createElement)(a.Fragment,null,(0,o.__)("Align","maxi-blocks")))},renderContent:function(){return(0,a.createElement)(T.default,Object.assign({},(0,w.t5)(e,m?"textAlignment":"alignment"),{onChange:n,disableJustify:!m,disableIcon:!0,disableRTC:!0,breakpoint:c,type:m&&"text"}))}})},M=n(59017),q=n(27119),F=n(80261),H=function(e){var t=e.onChange,n=e.closeMoreSettings,c=(0,a.useContext)(q.HP).content,r=(0,a.useState)(10),i=(0,m.Z)(r,2),u=i[0],p=i[1],b=(0,a.useState)(15),_=(0,m.Z)(b,2),d=_[0],k=_[1];return(0,a.createElement)(s.default,{className:"maxi-text-generator__generator",contentClassName:"maxi-more-settings__popover maxi-dropdown__child-content maxi-dropdown__text-generator-child-content",position:"right top",renderToggle:function(e){e.isOpen;var t=e.onToggle;return(0,a.createElement)(l.default,{onClick:t,text:"Copy"},(0,o.__)("Placeholder text generator","maxi-blocks"))},renderContent:function(){return(0,a.createElement)("div",{className:"toolbar-item__text-generator-blocks__popover"},(0,a.createElement)(M.default,{disableRange:!0,disableReset:!0,label:(0,o.__)("Words per sentence","maxi-blocks"),value:d,onChangeValue:function(e){k(e)},min:0,max:100}),(0,a.createElement)(M.default,{disableRange:!0,disableReset:!0,label:(0,o.__)("Sentences","maxi-blocks"),value:u,onChangeValue:function(e){p(e)},min:0,max:20}),(0,a.createElement)(l.default,{type:"button",onClick:function(){var e,a,o,r;e=u,a=d,o=(0,F.Ap)({p:1,avgWordsPerSentence:a,avgSentencesPerParagraph:e}).map((function(e){return e})),(r="".concat(c).concat(o[0].props.children)).length,r.length,t({isList:!1,content:r}),n()}},(0,o.__)("Add","maxi-blocks")),(0,a.createElement)(l.default,{type:"button",onClick:function(){return e=u,a=d,(c=(o=(0,F.Ap)({p:1,avgWordsPerSentence:a,avgSentencesPerParagraph:e}).map((function(e){return e})))[0].props.children).length,c.length,t({isList:!1,content:o[0].props.children}),void n();var e,a,o,c}},(0,o.__)("Replace","maxi-blocks")))}})},V=n(88442),Q=function(e){var t=e.clientId,n=e.blockName,u=e.onChange,m=e.copyPasteMapping,p=e.tooltipsHide,b=(0,r.useSelect)((function(e){return{breakpoint:(0,e("maxiBlocks").receiveMaxiDeviceType)()}})).breakpoint,_=(0,a.createElement)("div",{className:"toolbar-item toolbar-item__more-settings"},(0,a.createElement)(s.default,{className:"maxi-more-settings__settings-selector",contentClassName:"maxi-more-settings__popover",position:"right bottom",popoverProps:{useShift:!0},renderToggle:function(e){var t=e.onToggle;return(0,a.createElement)(l.default,{onClick:t},(0,a.createElement)(i.default,{className:"toolbar-item__icon",icon:Z.B2u}))},renderContent:function(c){return(0,a.createElement)("div",null,(0,a.createElement)(C,{blockName:n,clientId:t,closeMoreSettings:c.onClose,copyPasteMapping:m}),"maxi-blocks/text-maxi"===n&&(0,a.createElement)(H,{onChange:u,closeMoreSettings:c.onClose}),"maxi-blocks/button-maxi"===n&&(0,a.createElement)("div",null,(0,a.createElement)(l.default,{onClick:function(){(0,V.RB)(0,"height width")}},(0,o.__)("Button width","maxi-blocks")),(0,a.createElement)(l.default,{onClick:function(){(0,V.RB)(0,"margin padding")}},(0,o.__)("Button padding/margin","maxi-blocks")),(0,a.createElement)(D,Object.assign({clientId:t,blockName:n,getGroupAttributes:!0},(0,w.t5)(e,["alignment","textAlignment"]),{onChange:u,breakpoint:b}))),"maxi-blocks/image-maxi"===n&&(0,a.createElement)(l.default,{onClick:function(){(0,V.RB)(0,"caption")}},(0,o.__)("Caption","maxi-blocks")),("maxi-blocks/svg-icon-maxi"===n||"maxi-blocks/image-maxi"===n)&&(0,a.createElement)(D,Object.assign({clientId:t,blockName:n,getGroupAttributes:!0},(0,w.t5)(e,["alignment","textAlignment"]),{onChange:u,breakpoint:b})),(0,a.createElement)(j,{clientId:t,blockName:n}),(0,a.createElement)(P,{clientId:t,blockName:n}))}}));return p?_:(0,a.createElement)(c.Tooltip,{text:(0,o.__)("More","maxi-blocks"),placement:"top"},_)}}}]);