document.addEventListener("DOMContentLoaded",(function(){var e=window.location.href,t=new URL(e).searchParams.get("panel"),n=document.getElementById(t);n&&(n.checked=!0);var a=document.getElementById("maxi-dashboard_main-content_pro");a&&(a.style.display="none");var o=document.getElementById("maxi-dashboard_main-content_not-pro");o&&(o.style.display="block",document.getElementById("maxi-dashboard_main-content_pro-not-pro").style.display="block");var r=document.getElementsByClassName("maxi-dashboard_main-content_accordion-item-input"),i=document.getElementById("maxi-breakpoints");if(r&&i){var l,c=null==i?void 0:i.value,d=JSON.parse(c);null===(l=Array.from(r))||void 0===l||l.forEach((function(e){var t=e.id.replace("maxi-breakpoint-","");e.addEventListener("input",(function(){var n=e.value;d[t]=parseInt(n),i.value=JSON.stringify(d)}))}))}var s=document.getElementById("maxi-versions"),m=document.getElementById("maxi-rollback-version");null==s||s.addEventListener("change",(function(){var e=s.value;m.value=e}));var u=document.querySelectorAll(".maxi-dashboard_main-content_accordion-item-content-switcher__dropdown select");u&&Array.from(u).forEach((function(e){var t=document.querySelector("input#".concat(e.id));t.value=e.value,e.addEventListener("change",(function(){t.value=e.value}))}));var p=function(){var e={lat:-25.344,lng:131.031},t=new google.maps.Map(document.getElementById("maxi-api-test"),{zoom:4,center:e});new google.maps.Marker({position:e,map:t})},v=function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"api-validation-loading",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"api-error",i=t(),l="",c=window.localization;if("validating"===e)l=c.loading_status_message,a.classList.add(o),a.classList.remove(r);else if(a.classList.remove(o),""===i||"EmptyKeyError"===e)n.value="",a.classList.add(r),l=c.please_add_api_key;else switch(a.classList.add(r),e){case"InvalidKeyError":l=c.invalid_api_key;break;case"RefererNotAllowedError":l=c.referer_not_allowed;break;case"InvalidCharactersError":l=c.invalid_characters;break;case"ServerError":l=c.server_error;break;case!0:n.value=i,a.classList.remove(r)}a.innerHTML=l},y=function(e){e&&(e.addEventListener("focus",(function(){e.type="text"})),e.addEventListener("blur",(function(){e.type="password"})))},g=document.querySelector(".google-api-key-option-visible-input"),f=document.getElementById("google_api_key_option"),h=document.getElementById("maxi-api-test__validation-message");y(g);var E=document.getElementsByTagName("head")[0],_=function(){return g.value},k=function(e){v(e,_,f,h)};null==g||g.addEventListener("input",(function(){!function(){var e=_();if(function(e){return!e.match(/^[a-zA-Z0-9_$.[\]]+$/)}(e))k("InvalidCharactersError");else{var t=document.getElementById("maxi-test-google-map-script");t&&E.removeChild(t);var n=document.createElement("script");n.src="https://maps.googleapis.com/maps/api/js?key=".concat(e,"&callback=initMap"),n.id="maxi-test-google-map-script",n.defer=!0,n.async=!0,E.appendChild(n),window.initMap=p,h.innerHTML="",h.classList.remove("api-error")}}(),function(){var e,t,n=window.console;n&&(t=n[e=["error"]],n[e]=function(){arguments[0]&&(arguments[0].includes("InvalidKeyMapError")||arguments[0].includes("API multiple times")?k("InvalidKeyError"):arguments[0].includes("RefererNotAllowedMapError")?k("RefererNotAllowedError"):arguments[0].includes("API without a key")?k("EmptyKeyError"):k(!0)),t.apply&&t.apply(n,arguments)})}()}));var w=document.querySelector(".openai-api-key-option-visible-input"),I=document.getElementById("openai_api_key_option"),b=document.getElementById("maxi-api-test__validation-message");y(w);var x=function(){return w.value},L=function(e){v(e,x,I,b)};function B(e){e.style.height="auto",e.scrollHeight>300?(e.style.height="".concat(300,"px"),e.style.overflowY="scroll"):(e.style.height="".concat(e.scrollHeight,"px"),e.style.overflowY="hidden")}null==w||w.addEventListener("input",(function(){var e;""!==(e=x())?(L("validating"),fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({messages:[{role:"user",content:"Hello"}],model:"gpt-3.5-turbo",max_tokens:1})}).then((function(e){e.ok?L(!0):L("InvalidKeyError")})).catch((function(e){console.error(e),L("ServerError")}))):L("")}));var A=document.querySelectorAll("textarea.maxi-dashboard_main-content_accordion-item-input");Array.from(A).forEach((function(e){B(e),e.addEventListener("input",(function(){B(e)}))}))}));