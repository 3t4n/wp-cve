"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[538],{12177:function(e,t,n){var o=n(70885),s=n(69307),a=(n(99196),n(65736)),i=n(92819),l=n(40684),c=n(21278),r=(0,l.ZP)((function(){return n.e(1943).then(n.bind(n,1943))})),u=(0,l.ZP)((function(){return Promise.resolve().then(n.bind(n,87570))}));t.Z=function(e){var t=e.results,n=e.content,l=e.modifyOption,d=e.formatValue,m=e.selectedResultId,f=e.customValue,b=e.AISettingsLanguage,p=e.isSelectedText,h=e.setResults,x=e.setSelectedResultId,y=e.setSelectedResult,_=e.setModifyOption,C=e.setCustomValue,T=e.onContentChange,g=e.onChangeTextFormat,S=e.onModifyContent,v=e.updateSettings,E=e.switchToGenerateTab,k=e.switchToModifyTab,I=e.isModifyTab,N=void 0!==I&&I,R=(0,s.useState)(c.K2),M=(0,o.Z)(R,2),w=M[0],O=M[1];(0,s.useEffect)((function(){var e=m&&t.findIndex((function(e){return e.id===m}));e>=w&&O(e+1)}),[w,t,m]);var V="maxi-prompt-control-results";return!(0,i.isEmpty)(t)||m&&("selectedText"!==m||N)?(0,s.createElement)("div",{className:V},t.slice(0,w).map((function(e,o){var a=e.refId&&t.findIndex((function(t){return t.id===e.refId}));return(0,s.createElement)(r,{key:e.id,index:o+1,result:e,isSelectedText:p,isSelected:e.id===m,modifyOption:l,customValue:f,AISettingsLanguage:b,isRefExist:a&&a>=0,isModifyTab:N,setModifyOption:_,setCustomValue:C,onModifyContent:S,onInsert:function(){var t=d.start,o=d.end,s=n.slice(0,t),a=n.slice(o),i=s+e.content+a;t!==o&&g(Object.assign({},d,{end:t+e.content.length})),T(i)},onSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.id;return x(t)},onUseSettings:function(){if(e.refId)return k(),_(e.modificationType),C(e.customValue),a>=w&&O(a+1),void x(e.refId);e.settings&&(v(e.settings),E())},onModify:function(){x(e.id),k()},onDelete:function(){if(N)return y(null),void(e.id===m&&x(null));h((function(t){var n=[].concat(t).filter((function(t){return t.id!==e.id}));return(0,i.isEmpty)(n)&&E(),n})),m===e.id&&x(null)}})})),t.length>w&&(0,s.createElement)("div",{className:"".concat(V,"__load-more")},(0,s.createElement)(u,{className:"maxi-prompt-control-modify-tab__button",onClick:function(){return O(w+c.K2)}},(0,a.__)("Load more","maxi-blocks")))):(0,s.createElement)("div",{className:V},(0,s.createElement)("h4",{className:"".concat(V,"__no-results")},(0,a.__)(N?"Select text or result from history to modify":"History is empty","maxi-blocks")))}},20538:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var o=n(69307),s=(n(99196),n(65736)),a=n(34261),i=n(52175),l=n(87570),c=n(26141),r=n(86434),u=n(94184),d=n.n(u),m=n(92819),f=function(e){var t=e.className,n=e.buttonClassName,a=e.results,u=e.setResults,f=e.setSelectedResultId,b=e.switchToGenerateTab,p=d()("maxi-prompt-control-history-buttons",t),h=d()("maxi-prompt-control-history-buttons__button",n);return(0,o.createElement)("div",{className:p},(0,o.createElement)(i.MediaUploadCheck,null,(0,o.createElement)(i.MediaUpload,{onSelect:function(e){fetch(e.url).then((function(e){return e.json()})).then((function(e){return JSON.parse(e)})).then((function(e){u(e),f(e[0].id)})).catch((function(e){console.error(e)}))},allowedTypes:"text",render:function(e){var t=e.open;return(0,o.createElement)(l.default,{className:h,onClick:t},(0,s.__)("Import","maxi-blocks"))}})),(0,o.createElement)(l.default,{className:h,onClick:function(){(0,r.WH)(a,"history.txt")}},(0,s.__)("Export","maxi-blocks")),!(0,m.isEmpty)(a)&&(0,o.createElement)(c.default,{message:(0,s.__)("Are you sure you want to clean the history?","maxi-blocks"),cancelLabel:(0,s.__)("Cancel","maxi-blocks"),confirmLabel:(0,s.__)("Clean","maxi-blocks"),onConfirm:function(){u([]),b()},buttonClassName:h,buttonChildren:(0,s.__)("Clean","maxi-blocks")}))},b=n(12177),p=function(e){var t=e.results,n=e.content,i=e.modifyOption,l=e.formatValue,c=e.selectedResultId,r=e.isSelectedText,u=e.isGenerating,d=e.setResults,m=e.setModifyOption,p=e.setCustomValue,h=e.setSelectedResultId,x=e.onContentChange,y=e.onChangeTextFormat,_=e.onAbort,C=e.updateSettings,T=e.switchToGenerateTab,g=e.switchToModifyTab,S="maxi-prompt-control-history-tab";return(0,o.createElement)("div",{className:S},(0,o.createElement)(f,{className:"maxi-prompt-control__buttons",buttonClassName:"maxi-prompt-control__button",results:t,setResults:d,setSelectedResultId:h,switchToGenerateTab:T}),(0,o.createElement)(b.Z,{results:t,content:n,modifyOption:i,formatValue:l,selectedResultId:c,isSelectedText:r,setResults:d,setSelectedResultId:h,setModifyOption:m,setCustomValue:p,onContentChange:x,onChangeTextFormat:y,updateSettings:C,switchToGenerateTab:T,switchToModifyTab:g}),u&&(0,o.createElement)(a.zx,{className:"".concat(S,"__abort"),onClick:_},(0,s.__)("Stop","maxi-blocks")))}}}]);