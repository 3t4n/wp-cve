!function(){function e(e){const o=e.querySelector(".maxi-video-block__popup-wrapper").cloneNode(!0),i=e.id,t=document.getElementById("maxi-popup-slot"),n=()=>{const e=document.createElement("div");return e.id=`popup-${i}`,e.appendChild(o),e};if(t)t.appendChild(n());else{const e=document.createElement("div");e.id="maxi-popup-slot",e.style.zIndex="999999",e.appendChild(n()),document.querySelector("body").appendChild(e)}return o}function o(e,o,i,t=null){const n=e.querySelector(".maxi-video-block__overlay"),d=o.querySelector(".maxi-video-block__video-player"),r=e=>{e.target.classList.contains("maxi-video-block__video-player")||(o.style.display="none",t?t():d.src="")};document.addEventListener("keydown",(e=>{"flex"===o.style.display&&"Escape"===e.key&&r(e)})),n.addEventListener("click",(()=>{o.style.display="flex",t||(d.src=i)})),o.addEventListener("click",r)}function i(e){return-1!==Array.from(window.document.scripts).findIndex((o=>o.getAttribute("id")===e))}window.onYouTubeIframeAPIReady=()=>{document.querySelectorAll(".maxi-video-block--youtube").forEach((i=>{const t=i.id;let n;if("string"==typeof maxiVideo[0][t])try{n=JSON.parse(maxiVideo[0][t])}catch(e){console.error("Invalid JSON string",e),n=null}else n="object"==typeof maxiVideo[0][t]&&null!==maxiVideo[0][t]?maxiVideo[0][t]:null;const d="popup"===n.playerType&&e(i),r="popup"===n.playerType?d.querySelector("iframe"):i.querySelector("iframe");r.id=`${t}-iframe`,r.src=n.embedUrl;const l=new window.YT.Player(r,{events:{onStateChange:function(e){const{isLoop:o,startTime:i}=n;e.data===window.YT.PlayerState.ENDED&&o&&l.seekTo(i||0)}}});"popup"===n.playerType&&o(i,d,"",(()=>l.pauseVideo()))}))},window.addEventListener("load",(()=>{document.querySelectorAll(".maxi-video-block").forEach((t=>{if(t.classList.contains("maxi-video-block--youtube"))return void(i("maxi-youtube-sdk")||function(){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",e.id="maxi-youtube-sdk",document.body.appendChild(e)}());const n=t?.id;let d;if("string"==typeof maxiVideo[0][n])try{d=JSON.parse(maxiVideo[0][n])}catch(e){console.error("Invalid JSON string",e),d=null}else d="object"==typeof maxiVideo[0][n]&&null!==maxiVideo[0][n]?maxiVideo[0][n]:null;const{videoType:r}=d,l=d.endTime;if("vimeo"===r&&l){if(!i("maxi-vimeo-sdk")){const i=document.createElement("script");i.src="https://player.vimeo.com/api/player.js",i.id="maxi-vimeo-sdk",i.async=!0,i.onload=()=>{i.onload=null,document.querySelectorAll(".maxi-video-block--vimeo").forEach((i=>{const t=i.id;let n;if("string"==typeof maxiVideo[0][t])try{n=JSON.parse(maxiVideo[0][t])}catch(e){console.error("Invalid JSON string",e),n=null}else n="object"==typeof maxiVideo[0][t]&&null!==maxiVideo[0][t]?maxiVideo[0][t]:null;const d="popup"===n.playerType&&e(i),r="popup"===n.playerType?d.querySelector("iframe"):i.querySelector("iframe");r.src=n.embedUrl;const l=new window.Vimeo.Player(r),{endTime:a}=n,{startTime:c}=n,{isLoop:p}=n;l.on("timeupdate",(e=>{e.seconds>+a&&(p?l.setCurrentTime(c||"0"):l.pause())})),"popup"===n.playerType&&o(i,d,"",(()=>l.pause()))}))},document.body.appendChild(i)}return}const{embedUrl:a}=d;"popup"===d.playerType&&o(t,e(t),a)}))}))}();