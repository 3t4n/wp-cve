window.onload=()=>{const t=maxiMap[1],e=[];for(const t in maxiMap[0])if(Object.prototype.hasOwnProperty.call(maxiMap[0],t)){let o;if("string"==typeof maxiMap[0][t])try{o=JSON.parse(maxiMap[0][t])}catch(t){console.error("Invalid JSON string",t)}else"object"==typeof maxiMap[0][t]&&null!==maxiMap[0][t]?o=maxiMap[0][t]:console.error("The value is neither an object nor a string",maxiMap[0][t]);o&&(o.id=t,e.push(o))}else console.warn("Skipping prototype property",t);const o=e.some((t=>"googlemaps"===t["map-provider"]))&&t;((t,a)=>{const p=t.map((t=>{if(!t)return;const e=t.elementName??"script";return new Promise((o=>{((t,e,o)=>{const a=document.createElement(t);e&&Object.keys(e).forEach((t=>{a[t]=e[t]})),a.onload=o,document.body.appendChild(a)})(e,t.properties,o)}))}));Promise.all(p).then((()=>{e.map((t=>{const{id:e,"map-dragging":a,"map-touch-zoom":p,"map-double-click-zoom":i,"map-scroll-wheel-zoom":n,"map-latitude":r,"map-longitude":s,"map-zoom":l,"map-markers":c,"map-marker-icon":m,"map-marker-heading-level":d}=t,g=L.map(`maxi-map-block__container-${e}`,{dragging:a,touchZoom:p,doubleClickZoom:i,scrollWheelZoom:n}).setView([r,s],l);o?L.gridLayer.googleMutant({type:"roadmap"}).addTo(g):L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(g);const u=L.divIcon({html:m,iconSize:[null,null]});c?.map((t=>{const{latitude:e,longitude:o,heading:a,description:p}=t,i=`\n\t\t\t\t\t<div class='maxi-map-block__popup'>\n\t\t\t\t\t\t<div class='maxi-map-block__popup__content'>\n\t\t\t\t\t\t${a&&`<${d} class='maxi-map-block__popup__content__title'>${a}</${d}>`}\n\t\t\t\t\t\t${p&&`<p class='maxi-map-block__popup__content__description'>${p}</p>`}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t`;""===a&&""===p?L.marker([e,o],{icon:u}).addTo(g):L.marker([e,o],{icon:u}).addTo(g).bindPopup(i).openPopup()}))}))})).catch((t=>{console.log(t)}))})([o&&{properties:{src:`https://maps.googleapis.com/maps/api/js?key=${t}&callback=Function.prototype`,async:!0,defer:!0}},{elementName:"link",properties:{href:"https://unpkg.com/leaflet@1.8.0/dist/leaflet.css",rel:"stylesheet",integrity:"sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==",crossOrigin:""}},{properties:{src:"https://unpkg.com/leaflet@1.8.0/dist/leaflet.js",integrity:"sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==",crossOrigin:""}},o&&{properties:{src:"https://unpkg.com/leaflet.gridlayer.googlemutant@latest/dist/Leaflet.GoogleMutant.js"}}])};