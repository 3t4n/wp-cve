!function e(t,a,n){function i(c,o){if(!a[c]){if(!t[c]){var l="function"==typeof require&&require;if(!o&&l)return l(c,!0);if(r)return r(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var s=a[c]={exports:{}};t[c][0].call(s.exports,(function(e){return i(t[c][1][e]||e)}),s,s.exports,e,t,a,n)}return a[c].exports}for(var r="function"==typeof require&&require,c=0;c<n.length;c++)i(n[c]);return i}({1:[function(e,t,a){"use strict";jQuery((function(e){e("#j-panel-form").on("click",".upload-btn",(function(t){t.preventDefault();let a,n=e(this).attr("id");a||(a=wp.media.frames.file_frame=wp.media({title:"\u9009\u62e9\u6587\u4ef6",button:{text:"\u9009\u62e9\u6587\u4ef6"},multiple:!1}),a.on("select",(function(){let t=a.state().get("selection").first().toJSON(),i=n.replace(/_upload/i,"");e("#"+i).val(t.url)}))),a.open()})).on("click",".input-img-add",(function(t){t.preventDefault();const a=this;let n;n||(n=wp.media.frames.file_frame=wp.media({title:"\u9009\u62e9\u6587\u4ef6",button:{text:"\u9009\u62e9\u6587\u4ef6"},multiple:!1}),n.on("select",(function(){const t=e(a).closest(".input-img-wrap");let i=n.state().get("selection").first().toJSON();t.find('input[type="hidden"]').val(i.id),t.find(".input-img img").attr("src",i.url),t.find(".input-img").show()}))),n.open()})).on("click",".input-img-close",(function(){const t=e(this).closest(".input-img-wrap");t.find('input[type="hidden"]').val(""),t.find(".input-img").hide()})).on("click",".toggle",(function(){const t=e(this);t.hasClass("active")?(t.removeClass("active"),t.next().val(0)):(t.addClass("active"),t.next().val(1)),t.next().trigger("change")})).on("click",".wpcom-panel-nav li",(function(){var t=e(this),a=e(".wpcom-panel-item");e(".wpcom-panel-nav li").removeClass("active"),t.addClass("active"),a.removeClass("active"),a.eq(t.index()).addClass("active");var n=new Date;n.setTime(n.getTime()+31536e6);let i=e("#j-panel-form").data("slug");document.cookie=i+"_nav="+t.index()+";expires="+n.toGMTString()+";path=/",t.hasClass("more-themes")||t.hasClass("theme-active")?e(".wpcom-panel-submit").hide():e(".wpcom-panel-submit").show()})).on("change",".toggle-wrap input",(function(){const t=e(this);1==t.val()?t.parent().find(".toggle").addClass("active"):t.parent().find(".toggle").removeClass("active")})).find(".color-picker").wpColorPicker(),e("#j-panel-form .wpcom-panel-nav li.active").trigger("click");const t=e("#wpcom-panel-form");t.on("click",".j-repeat-add",(function(){const t=e(this).parent().prev(),a=t.closest(".wpcom-panel-repeat");let n=t.html(),i=parseInt(t.data("id"))+1;n=n.replace(/for="wpcom_(\S+)_(\d+)"/gim,'for="wpcom_$1_'+i+'"'),n=n.replace(/id="wpcom_(\S+)_(\d+)"/gim,'id="wpcom_$1_'+i+'"'),n=n.replace(/id="wpcom_(\S+)_(\d+)_upload"/gim,'id="wpcom_$1_'+i+'_upload"'),n=n.replace(/name="(\S+)\[(\d+)\](\[\])?"/gim,'name="$1['+i+']$3"'),0==t.find(".repeat-action").length?e('<div class="repeat-wrap" data-id="'+i+'">'+n+'<div class="repeat-action"><div class="repeat-item repeat-up j-repeat-up"><i class="dashicons dashicons-arrow-up-alt"></i></div><div class="repeat-item repeat-down j-repeat-down"><i class="dashicons dashicons-arrow-down-alt"></i></div><div class="repeat-item repeat-del j-repeat-del"><i class="dashicons dashicons-no-alt"></i></div></div></div>').insertAfter(t):e('<div class="repeat-wrap" data-id="'+i+'">'+n+"</div>").insertAfter(t);const r=a.find('[data-id="'+i+'"]');r.find("input[type=text]").val(""),r.find("textarea").val("");const c=r.find(".wp-picker-container");if(c.length)for(let t=0;t<c.length;t++)e(c[t]).replaceWith(e(c[t]).find(".color-picker"));r.find(".color-picker").wpColorPicker()})).on("click",".j-repeat-del",(function(){e(this).closest(".repeat-wrap").remove()})).on("click",".j-repeat-up,.j-repeat-down",(function(){var t=e(this),a=t.closest(".repeat-wrap"),n=a.prev(),i=n.data("id"),r=a.data("id");if(t.hasClass("j-repeat-down")){if(!(n=a.next()).hasClass("repeat-wrap"))return;i=n.data("id")}var c={};n.find("input,textarea,select").each((function(t,n){var o=e(n);if("checkbox"!=o.attr("type")&&"radio"!=o.attr("type")){var l=o.attr("name");if(l){var p=l.replace("["+i+"]","["+r+"]");c[p]=o.val(),o.val(a.find('[name="'+p+'"]').val()).trigger("change")}}})),n.find("input:checkbox:checked,input:radio:checked").each((function(t,a){var n=e(a),o=n.attr("name");if(o){var l=o.replace("["+i+"]","["+r+"]");c[l]=c[l]?c[l]:[],c[l].push(n.val())}}));var o=[];a.find("input:checkbox:checked,input:radio:checked").each((function(t,a){var n=e(a),c=n.attr("name");if(c){var l=c.replace("["+r+"]","["+i+"]");o[l]=o[l]?o[l]:[],o[l].push(n.val())}})),n.find("input:checkbox,input:radio").each((function(t,a){var n=e(a),i=n.attr("name");i&&(n.prop("checked",!1),e.inArray(n.val(),o[i])>=0&&n.prop("checked",!0).trigger("change"))})),a.find("input, textarea, select").each((function(t,a){var n=e(a);"checkbox"!=n.attr("type")&&"radio"!=n.attr("type")&&n.val(c[n.attr("name")]).trigger("change")})),a.find("input:checkbox,input:radio").each((function(t,a){var n=e(a),i=n.attr("name");i&&(n.prop("checked",!1),e.inArray(n.val(),c[i])>=0&&n.prop("checked",!0).trigger("change"))}))})).on("change","input, textarea, select",(function(){const t=e(this);let a=t.attr("name");if(a){a=a.replace(/\[[^\[\]]\]/,"");const e=t.closest(".wpcom-panel-item,.wpcom-panel-wrapper,.repeat-wrap").find('[filter*="'+a+':"]');if(e&&e.length){e.hide();let n=t.val();"checkbox"!=t.attr("type")&&"radio"!=t.attr("type")||(n=t.closest(".form-input").find("input:checkbox:checked,input:radio:checked").val());let i=e.closest('[filter*="'+a+":"+n+',"],[filter$="'+a+":"+n+'"]');if(i.length&&(i.show(),i.closest(".wpcom-panel-item,.wpcom-panel-wrapper,.repeat-wrap").find("input, textarea, select").not('[name*="'+a+'"]').trigger("change")),n&&""!==n){let t=e.closest('[filter*="'+a+":"+n+'!!!"]');t.show(),t.closest(".wpcom-panel-item,.wpcom-panel-wrapper,.repeat-wrap").find("input, textarea, select").not('[name*="'+a+'"]').trigger("change")}}}})),t.find("input, textarea, select").trigger("change"),e("#j-check-version").on("click",(function(){var t=e(this);let a=t.data("action");a&&(t.html("\u68c0\u67e5\u4e2d..."),e.getJSON(ajaxurl,{action:a},(function(e){var a='<span class="check-version">\u6700\u65b0\u7248\u672c\uff1a<span style="color: green;">'+e.version+'</span>\uff0c<a href="https://www.wpcom.cn/help/62.html" target="_blank">\u67e5\u770b\u4e3b\u9898\u5728\u7ebf\u66f4\u65b0\u6559\u7a0b</a></span>';e.version==e.current&&(a='<span class="check-version">\u6700\u65b0\u7248\u672c\uff1a<span style="color: green;">'+e.version+"</span>"),t.parent().append(a),t.hide()})))}));const a=e(".j-cat-sort");let n={};if(a.length)for(let t=0;t<a.length;t++){let i=e(a[t]).data("name");n[i]={},n[i].y=[],n[i].n=[],e(a[t]).find("label").each((function(t,a){e(a).find("input").is(":checked")?n[i].y.push({id:e(a).find("input").val(),name:e.trim(e(a).text())}):n[i].n.push({id:e(a).find("input").val(),name:e.trim(e(a).text())})}))}function i(t){for(var a in t){for(var n=e('[data-name="'+a+'"]'),i="",r=0;r<t[a].y.length;r++)t[a].y[r]&&t[a].y[r].name&&(i+='<label class="checkbox-inline"><input name="'+a+'[]" checked type="checkbox" value="'+t[a].y[r].id+'"> '+t[a].y[r].name+"</label>");for(var c=0;c<t[a].n.length;c++)t[a].n[c]&&t[a].n[c].name&&(i+='<label class="checkbox-inline"><input name="'+a+'[]" type="checkbox" value="'+t[a].n[c].id+'"> '+t[a].n[c].name+"</label>");n.html(i)}}i(n),a.on("change","input",(function(){for(var t=e(this),a=t.closest(".j-cat-sort").data("name"),r=t.is(":checked"),c=0;c<n[a][r?"n":"y"].length;c++)n[a][r?"n":"y"][c]&&n[a][r?"n":"y"][c].id==t.val()&&delete n[a][r?"n":"y"][c];n[a][r?"y":"n"].push({id:t.val(),name:e.trim(t.parent().text())}),i(n)}))}))},{}]},{},[1]);