var bricksableVideoFn = new BricksFunction({ parentNode: document, selector: ".brxe-ba-sticky-video", eachElement: function (e) { bricksIsFrontend && e.addEventListener("click", function () { var i = e.querySelector(".bricks-video-overlay"), t = e.querySelector(".bricks-video-overlay-icon"); i && i.remove(), t && t.remove() }); var i = e.querySelector("video") ? e.querySelector("video") : e.querySelector("iframe"); if (i) { if (window.hasOwnProperty("Plyr")) { var t, a = e.dataset.scriptId, r = e.querySelector(".bricks-plyr"), o = (null === (t = window.bricksableStickyVideoData) || void 0 === t || null === (t = t.StickyVideoInstances) || void 0 === t ? void 0 : t[a]) || void 0; o && o.destroy(), r && (o = new Plyr(r)), window.bricksableStickyVideoData.StickyVideoInstances[a] = o } i.setAttribute("playsinline", !0) } } }), bricksableVideoOverlayClickDetectorFn = new BricksFunction({ parentNode: document, selector: ".bricks-video-overlay, .bricks-video-overlay-icon, .bricks-video-preview-image", subscribeEvents: ["bricks/ajax/pagination/completed", "bricks/ajax/load_page/completed"], frontEndOnly: !0, eachElement: function (e) { e.addEventListener("click", function (e) { var i = e.target.closest(".brxe-ba-sticky-video"); if (i) { var t = i.querySelector(".bricks-video-preview-image"); if (t) { var a = document.createElement("iframe"); _toConsumableArray(t.attributes).forEach(function (e) { "class" !== e.name && "style" !== e.name && ("data-iframe-src" !== e.name ? a.setAttribute(e.name, e.value) : a.setAttribute("src", e.value)) }), t.replaceWith(a) } var r = i.querySelector("iframe"); r && r.getAttribute("src") && (r.src += "&autoplay=1"); var o = i.querySelector("video"); o && o.play(), bricksableVideoSticky() } }) } }); function bricksableVideoSticky() { bricksQuerySelectorAll(document, ".brxe-ba-sticky-video").forEach(function (e) { try { y = JSON.parse(e.dataset.baBricksStickyVideoOptions) } catch (i) { return !1 } var t = "ba-sticky-video-" + e.dataset.scriptId, a = e.offsetTop, r = e.querySelector(".ba-sticky-video-wrapper"), o = e.querySelector("#" + t), c = e.querySelector(".ba-sticky-video-close-icon"), n = !1; e.querySelector("iframe") ? e.querySelector("iframe") : e.querySelector("video"); var s = Math.floor(a + e.clientHeight / 2), l = y.stickyOnPlay, d = !0; if ("vimeo" === y.videoType) { if (!document.querySelector('script[src="https://player.vimeo.com/api/player.js"]')) { var y, u, v = document.createElement("script"); v.src = "https://player.vimeo.com/api/player.js"; var b = document.getElementsByTagName("script")[0]; b.parentNode.insertBefore(v, b) } u = setInterval(function () { if (clearInterval(u), !e.querySelector(".bricks-video-preview-image") && window.Vimeo && Vimeo.Player) { let i = new Vimeo.Player(t); i.ready().then(function () { d = !0, i.on("play", function () { d = !1, y.stickyClosePauseVideo && (n = !1) }), i.on("pause", function () { d = !0 }) }) } }, 180) } if ("youtube" === y.videoType) { if (!document.querySelector('script[src="https://www.youtube.com/iframe_api"]')) { var m, p, f = document.createElement("script"); f.src = "https://www.youtube.com/iframe_api"; var k = document.getElementsByTagName("script")[0]; k.parentNode.insertBefore(f, k) } function S(e) { console.log(e) } function q(e) { var i = 1 === e.data, t = 2 === e.data; e.data, i && (d = !1, y.stickyClosePauseVideo && (n = !1)), t && (d = !0) } e.querySelector(".bricks-video-preview-image") || (p = setInterval(function () { clearInterval(p), window.YT.ready(function () { window.YT && YT.Player && (d = !0, m = new YT.Player(t, { events: { onStateChange: q } })) }) }, 180)) } c.addEventListener("click", function (e) { if (n = !0, y.stickyClosePauseVideo) { if ("youtube" === y.videoType) m && m.pauseVideo(); else if ("vimeo" === y.videoType) { let i = new Vimeo.Player(t); i && i.pause() } else o.pause() } r.classList.remove("ba-video-is-sticky", "brx-animate-" + y.animationIn) }), window.addEventListener("load", function () { }), window.addEventListener("resize", function () { }), window.addEventListener("scroll", function (i) { var a = window.scrollY || window.pageYOffset || document.body.scrollTop + (document.documentElement && document.documentElement.scrollTop || 0); "youtube" !== y.videoType && "vimeo" !== y.videoType && (d = e.querySelector("#" + t).paused), a > s ? l && !d ? n || (r.classList.add("ba-video-is-sticky", "brx-animated", "brx-animate-" + y.animationIn), "" !== y.animationDuration && r.classList.add(y.animationDuration)) : l || d && !d || n || (r.classList.add("ba-video-is-sticky", "brx-animated", "brx-animate-" + y.animationIn), "" !== y.animationDuration && r.classList.add(y.animationDuration), "" !== y.animationDuration && r.classList.add(y.animationDuration)) : r.classList.remove("ba-video-is-sticky", "brx-animate-" + y.animationIn) }) }) } function youTube(e, i) { i.dataset.scriptId } function bricksableStickyVideo() { bricksableVideoFn.run(), bricksableVideoOverlayClickDetectorFn.run(), bricksableVideoSticky() } document.addEventListener("DOMContentLoaded", function (e) { bricksIsFrontend && bricksableStickyVideo() });