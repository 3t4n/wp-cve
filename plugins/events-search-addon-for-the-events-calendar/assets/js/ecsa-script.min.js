jQuery(document).ready(function(e){function a(){var a=e(".typeahead").siblings(".tt-menu").find(".tt-selectable a");a.length>0&&(window.location=e(a[0]).attr("href"))}e("#ecsa-search").on("keyup",function(t){13===t.which&&(t.preventDefault(),a(),e(".typeahead").typeahead("close"))}),e(".ecsa-search-icon").on("click",function(t){t.preventDefault(),a(),e(".typeahead").typeahead("close")}),e(".ecsa-search-field").each(function(){var a=e(this),t=a.data("disable-past"),n=a.data("no-up-result"),i=a.data("no-past-result"),s=a.data("show-events"),c=a.data("up-ev-heading"),h=a.data("past-ev-heading"),r=a.data("style-full"),d=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(e){return e.name},prefetch:{url:ecsaSearch.prefetchUpcomingUrl,cache:!1}});d.initialize();var l,o=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(e){return e.name},prefetch:{url:ecsaSearch.prefetchPastUrl,cache:!1}});o.initialize().done(function(){e(".ecsa-search-box-skelton").hide(),e(".ecsa-search-load").show()});var p=['<div class="empty-message">',i,"</div>"].join("\n");!0===t&&(p="");var u="basic"===r?"ecsa-search_temp_short":"ecsa-search_temp_full";a.find(".typeahead").typeahead({minLength:0,highlight:!0},{name:"matched-links",displayKey:"name",limit:s,source:function e(a,t){void 0!==d.index.datums&&(""===a?t(d.all()):d.search(a,t))},async:!0,templates:{header:'<h3 class="ecsa-heading">'+c+"</h3>",empty:['<div class="empty-message">',n,"</div>"].join("\n"),suggestion:Handlebars.compile(document.getElementById(u).innerHTML)}},{name:"matched-links",displayKey:"name",limit:s,source:function e(a,n){var i=o.index.datums;!0!==t&&void 0!==i&&(""===a?n(o.all()):o.search(a,n))},async:!0,templates:{header:'<h3 class="ecsa-heading">'+h+"</h3>",empty:p,suggestion:Handlebars.compile(document.getElementById(u).innerHTML)}})})});