(()=>{var e,t,a,n,i,r,o,c,s,u,d,l,y,p,f={};
/*!*******************************************!*\
  !*** ./assets/js/admin/src/shortcodes.js ***!
  \*******************************************/e=ywcas_admin_params.shortcodeNonce,t=[],a=[],n=function(){jQuery(document).find("[data-ywcas-deps]").each((function(){var e=jQuery(this);r(e)}))},i=function(e){var t=jQuery(e.target),a=e.target.value,n=t.parents(".ywcas-shortcode__options__form").find(".yith-plugin-fw__tabs").find("li.submit-button");"classic"!==a?n.hide():n.show()},r=function(e){var n=e.closest(".yith-plugin-fw__panel__option__content"),i=e.data("ywcas-deps"),r=!0;jQuery.each(i,(function(e,n){var i,o=jQuery("#"+n.id),c=void 0===n.compare?"==":n.compare;if(void 0!==n.property&&n.property,o.hasClass("yith-plugin-fw-radio"))i=o.find('input[type="radio"]').filter(":checked").val();else if(o.hasClass("yith-plugin-fw-checkbox-array")){var s=o.find('input[type="checkbox"]').filter(":checked"),u=[];jQuery.each(s,(function(e,t){u.push(jQuery(t).val())})),i=u}else i=o.hasClass("yith-plugin-fw-select")||o.hasClass("yith-post-search")||o.hasClass("wc-enhanced-select")?o.val():o.hasClass("yith-plugin-fw-onoff-container")?o.find('input[type="checkbox"]').is(":checked")?"yes":"no":o.is(":checked")?"yes":"no";if(a.indexOf(n.id)<0&&(t.push(o),a.push(n.id)),r){var d=n.value.split(","),l=Array.isArray(i);switch(c){case"==":case"===":if(l){var y=d.filter((function(e){return i.includes(e)}));r=y.length>0}else r=d.indexOf(i)>=0;break;case"!=":case"!==":if(l){var p=d.filter((function(e){return i.includes(e)}));r=0===p.length}else r=d.indexOf(i)<0}}})),r?n.show():n.hide()},o=function(){jQuery.each(t,(function(e,t){t.on("change",(function(){n()}))}))},c=function(e){e.preventDefault();var t=jQuery(e.target).parents(".ywcas-row"),a=t.find(".ywcas-edit");t.is(".ywcas-row-opened")?(t.removeClass("ywcas-row-opened"),a.slideUp()):(t.addClass("ywcas-row-opened"),a.slideDown())},s=function(){var e=document.querySelectorAll(".ywcas-edit"),t="",a=1,n=!0;do{t="presets-"+(e.length+a++),n=u(t)}while(n);return t},u=function(e){var t=document.querySelectorAll(".ywcas-edit"),a=!1;return t.forEach((function(t){t.dataset.target!==e||(a=!0)})),a},d=function(i){i.preventDefault(),i.stopPropagation();var r=jQuery(i.target.closest("form")),c=r.data("preset"),s=new FormData,u={message:null,overlayCSS:{background:"#fff",opacity:.6},ignoreIfBlocked:!0};jQuery.each(r.serializeArray(),(function(e,t){s.append(t.name,t.value)})),s.append("slug",c),s.append("security",e),s.append("action","yith_wcas_save_shortcode"),jQuery.ajax({url:ywcas_admin_params.ajaxurl,data:s,dataType:"json",contentType:!1,processData:!1,type:"POST",beforeSend:function(){r.block(u)},success:function(e){var i;null!=e&&null!==(i=e.data)&&void 0!==i&&i.content&&(jQuery(document).find(".ywcas-shortcodes-list").replaceWith(jQuery(e.data.content)),jQuery(document).trigger("yith-plugin-fw-tabs-init"),jQuery(document).trigger("yith_fields_init"),jQuery(document).trigger("yith-add-box-button-toggle"),jQuery(document).trigger("yith-plugin-fw-panel-init-deps"),a=[],t=[],n(),o(),window.onbeforeunload=null),r.unblock()}})},l=function(t){t.preventDefault(),t.stopPropagation();var a=s();jQuery.ajax({url:ywcas_admin_params.ajaxurl,data:{security:e,action:"yith_wcas_add_new_shortcode",slug:a},type:"POST",success:function(e){e.data.content&&(jQuery(document).find(".ywcas-body").append(e.data.content),jQuery(document).trigger("yith-plugin-fw-tabs-init"),jQuery(document).trigger("yith_fields_init"),jQuery(document).trigger("yith-plugin-fw-panel-init-deps"),n(),o())}})},y=function(t){t.preventDefault(),t.stopPropagation();var a=t.target.closest(".ywcas-row"),n=jQuery(a).find("form").data("preset");yith.ui.confirm({title:ywcas_admin_params.shortcode_message_alert.title,message:ywcas_admin_params.shortcode_message_alert.desc,confirmButton:ywcas_admin_params.shortcode_message_alert.confirmButton,closeAfterConfirm:!0,classes:{wrap:"ywcas-warning-popup"},onConfirm:function(){jQuery.ajax({url:ywcas_admin_params.ajaxurl,data:{action:"yith_wcas_delete_shortcode",security:e,slug:n},type:"POST",success:function(e){null!=e&&e.success&&a.remove()}})}})},p=function(t){t.preventDefault(),t.stopImmediatePropagation();var a=t.target.closest(".ywcas-row"),i=jQuery(a).find("form").data("preset"),r=s();jQuery.ajax({url:ywcas_admin_params.ajaxurl,data:{security:e,action:"yith_wcas_clone_shortcode",newSlug:r,slug:i},type:"POST",success:function(e){if(e.data.content){var t=jQuery(e.data.content).find(".ywcas-edit").data("target");jQuery(document).find(".ywcas-body").append(e.data.content),document.querySelector("#"+t).scrollIntoView({behavior:"smooth"}),jQuery(document).trigger("yith-plugin-fw-tabs-init"),jQuery(document).trigger("yith_fields_init"),jQuery(document).trigger("yith-plugin-fw-panel-init-deps"),n(),o()}}})},jQuery(document).on("click",".yith-plugin-fw__action-button--edit-action",c),jQuery(document).on("click",".ywcas-save-shortcode",d),jQuery(document).on("click",".ywcas-add-shortcode",l),jQuery(document).on("click",".yith-plugin-fw__action-button--trash-action",y),jQuery(document).on("click",".yith-plugin-fw__action-button--duplicate-action",p),jQuery(document).on("change",".ywcas-shortcode-field",i),n(),o();var h=window;for(var w in f)h[w]=f[w];f.__esModule&&Object.defineProperty(h,"__esModule",{value:!0})})();