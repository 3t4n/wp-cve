{"version":3,"file":"indexing.js","mappings":";;;;;AAAA,IAAMA,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA,EAAS;EAE/B,IAAMC,WAAW,GAAGC,QAAQ,CAACC,aAAa,CAAC,sBAAsB,CAAC;EAClE,IAAMC,WAAW,GAAGH,WAAW,CAACI,OAAO,CAAC,yCAAyC,CAAC;EAClF,IAAMC,cAAc,GAAGJ,QAAQ,CAACC,aAAa,CAAC,4BAA4B,CAAC;EAC3E,IAAMI,cAAc,GAAGL,QAAQ,CAACC,aAAa,CAAC,4BAA4B,CAAC;EAC3E,IAAIK,cAAc,GAAG,KAAK;EAE1B,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,CAAC,EAAK;IAC3BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBL,cAAc,CAACM,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC;IACpCN,cAAc,CAACK,SAAS,CAACE,MAAM,CAAC,MAAM,CAAC;IACvC,IAAMC,YAAY,GAAGC,MAAM,CAACC,IAAI,CAAC;MAC/BC,GAAG,EAAEC,kBAAkB,CAACC,OAAO;MAC/BC,IAAI,EAAE;QACJC,QAAQ,EAAEH,kBAAkB,CAACI,UAAU;QACvCC,MAAM,EAAE,uBAAuB;QAC/BC,IAAI,EAAET,MAAM,CAAC,eAAe,CAAC,CAACU,SAAS,CAAC;MAC1C,CAAC;MACDC,IAAI,EAAE,MAAM;MACZC,QAAQ,EAAE,MAAM;MAChBC,OAAO,EAAE,SAASA,OAAOA,CAACC,QAAQ,EAAE;QAClCC,UAAU,CAACD,QAAQ,CAAC;QACpBtB,cAAc,GAAGwB,WAAW,CAACC,WAAW,EAAE,IAAI,CAAC;MACjD;IACF,CAAC,CAAC;EACJ,CAAC;EAED,IAAMA,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;IAExB,IAAMC,WAAW,GAAGlB,MAAM,CAACC,IAAI,CAAC;MAC9BC,GAAG,EAAEC,kBAAkB,CAACC,OAAO;MAC/BC,IAAI,EAAE;QACJC,QAAQ,EAAEH,kBAAkB,CAACI,UAAU;QACvCC,MAAM,EAAE;MACV,CAAC;MACDG,IAAI,EAAE,MAAM;MACZC,QAAQ,EAAE,MAAM;MAChBC,OAAO,EAAE,SAASA,OAAOA,CAACC,QAAQ,EAAE;QAClCC,UAAU,CAACD,QAAQ,CAAC;MACtB;IACF,CAAC,CAAC;IACF;EACF,CAAC;EAED,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAID,QAAQ,EAAK;IAC/B,IAAIA,QAAQ,CAACT,IAAI,CAACc,OAAO,EAAE;MACzB/B,WAAW,CAACgC,SAAS,GAAGN,QAAQ,CAACT,IAAI,CAACc,OAAO;MAC7CjC,QAAQ,CAACC,aAAa,CAAC,4BAA4B,CAAC,CAACS,SAAS,CAACE,MAAM,CAAC,MAAM,CAAC;MAC7EuB,UAAU,GAAGnC,QAAQ,CAACC,aAAa,CAAC,qBAAqB,CAAC,CAACmC,KAAK;MAChE,IAAIC,QAAQ,CAACF,UAAU,CAAC,KAAK,GAAG,EAAE;QAChCG,aAAa,CAAChC,cAAc,CAAC;QAC7BN,QAAQ,CAACC,aAAa,CAAC,4BAA4B,CAAC,CAACS,SAAS,CAACE,MAAM,CAAC,MAAM,CAAC;QAC7EZ,QAAQ,CAACC,aAAa,CAAC,4BAA4B,CAAC,CAACS,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC;MAC5E;IACF;EACF,CAAC;EAED,IAAM4B,IAAI,GAAG,SAAPA,IAAIA,CAAA,EAAS;IACjBzB,MAAM,CAACd,QAAQ,CAAC,CAACwC,EAAE,CAAC,OAAO,EAAE,sBAAsB,EAAEjC,aAAa,CAAC;EACrE,CAAC;EACDgC,IAAI,CAAC,CAAC;AACR,CAAC;AAEDzC,kBAAkB,CAAC,CAAC,C","sources":["webpack://yith-woocommerce-ajax-search/./assets/js/admin/src/indexing.js"],"sourcesContent":["const YITH_WCAS_Indexing = () => {\n\n  const indexButton = document.querySelector('.ywcas-rebuild-index');\n  const infoWrapper = indexButton.closest('.yith-plugin-fw__panel__option__content');\n  const successMessage = document.querySelector('.yith-wcas-success-message');\n  const waitingMessage = document.querySelector('.yith-wcas-waiting-message');\n  let checkForUpdate = false;\n\n  const handleRebuild = (e) => {\n    e.preventDefault();\n    successMessage.classList.add('hide');\n    waitingMessage.classList.remove('hide');\n    const indexRequest = jQuery.ajax({\n      url: ywcas_admin_params.ajaxurl,\n      data: {\n        security: ywcas_admin_params.indexNonce,\n        action: 'yith_wcas_start_index',\n        form: jQuery('#plugin-fw-wc').serialize(),\n      },\n      type: 'POST',\n      dataType: 'json',\n      success: function success(response) {\n        updateInfo(response);\n        checkForUpdate = setInterval(checkUpdate, 2000);\n      },\n    });\n  };\n\n  const checkUpdate = () => {\n\n    const indexUpdate = jQuery.ajax({\n      url: ywcas_admin_params.ajaxurl,\n      data: {\n        security: ywcas_admin_params.indexNonce,\n        action: 'yith_wcas_update_index',\n      },\n      type: 'POST',\n      dataType: 'json',\n      success: function success(response) {\n        updateInfo(response);\n      },\n    });\n    //clearInterval(myTimer);\n  };\n\n  const updateInfo = (response) => {\n    if (response.data.content) {\n      infoWrapper.innerHTML = response.data.content;\n      document.querySelector('.yith-wcas-waiting-message').classList.remove('hide');\n      percentage = document.querySelector('#process_percentage').value;\n      if (parseInt(percentage) === 100) {\n        clearInterval(checkForUpdate);\n        document.querySelector('.yith-wcas-success-message').classList.remove('hide');\n        document.querySelector('.yith-wcas-waiting-message').classList.add('hide');\n      }\n    }\n  };\n\n  const init = () => {\n    jQuery(document).on('click', '.ywcas-rebuild-index', handleRebuild);\n  };\n  init();\n};\n\nYITH_WCAS_Indexing();"],"names":["YITH_WCAS_Indexing","indexButton","document","querySelector","infoWrapper","closest","successMessage","waitingMessage","checkForUpdate","handleRebuild","e","preventDefault","classList","add","remove","indexRequest","jQuery","ajax","url","ywcas_admin_params","ajaxurl","data","security","indexNonce","action","form","serialize","type","dataType","success","response","updateInfo","setInterval","checkUpdate","indexUpdate","content","innerHTML","percentage","value","parseInt","clearInterval","init","on"],"sourceRoot":""}