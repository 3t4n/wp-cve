{"version":3,"file":"statistic.js","mappings":"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","sources":["webpack://yith-woocommerce-ajax-search/./assets/js/admin/src/statistic.js"],"sourcesContent":["/* global ywcas_admin_params */\nconst YWCAS_Admin_Statistic = () => {\n\n  let fromDate = document.querySelector('#ywcas_statistic_from');\n  let toDate = document.querySelector('#ywcas_statistic_to');\n  let filterButton = document.querySelector('#post-query-submit');\n  let resetButton = document.querySelector('#post-query-reset');\n  let container = document.querySelector('.ywcas-statistic-wrapper');\n  let requestAjax = false;\n  let showReset = fromDate.value.length > 0 && toDate.value.length > 0;\n  !showReset && jQuery( resetButton ).hide();\n  var blockParams = {\n    message: null,\n    overlayCSS: {background: '#fff', opacity: 0.7},\n    ignoreIfBlocked: true,\n  };\n\n  const init = () => {\n    container = document.querySelector('.ywcas-statistic-wrapper');\n    window.onbeforeunload = null;\n    jQuery(document).on('change', fromDate, changeToDate);\n    jQuery(document).on('change', toDate, changeFromDate);\n    jQuery(document).on('click', '#post-query-submit', filterByDate);\n    jQuery(document).on('click', '#post-query-reset', resetDate);\n    checkFilterButton();\n  };\n\n  const initFilter = () => {\n    fromDate = document.querySelector('#ywcas_statistic_from');\n    toDate = document.querySelector('#ywcas_statistic_to');\n    filterButton = document.querySelector('#post-query-submit');\n    resetButton = document.querySelector('#post-query-reset');\n  };\n\n  const resetDate = (e) => {\n    e.preventDefault();\n    jQuery(toDate).datepicker('setDate', null);\n    jQuery(fromDate).datepicker('setDate', null);\n    filterButton.click();\n  };\n\n  const changeToDate = () => {\n    jQuery(toDate).datepicker('option', 'minDate', new Date(fromDate.value));\n    checkFilterButton();\n  };\n\n  const changeFromDate = () => {\n    jQuery(fromDate).datepicker('option', 'maxDate', new Date(toDate.value));\n    checkFilterButton();\n  };\n\n  const checkFilterButton = () => {\n    initFilter();\n    const emptyState = fromDate.value == '' && toDate.value == '';\n    filterButton.disabled = emptyState;\n    if( !showReset ) {\n      jQuery(resetButton).hide();\n    }else{\n      jQuery(resetButton).show();\n    }\n  };\n\n  const filterByDate = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    showReset = true;\n    if (requestAjax) {\n      requestAjax.abort();\n    }\n\n    const form = jQuery(e.target.closest('form'));\n    const parentForm = form.closest('.ywcas-statistic-filter');\n    const isDetail = typeof jQuery(parentForm).data('type') !== 'undefined';\n\n    const formData = new FormData();\n    jQuery.each(form.serializeArray(), function(i, field) {\n      formData.append(field.name, field.value);\n    });\n    formData.append('isDetail', isDetail);\n    isDetail && formData.append('view_all', jQuery(parentForm).data('type'));\n    formData.append('security', ywcas_admin_params.statisticNonce);\n    formData.append('action', 'yith_wcas_filter_statistic');\n\n    jQuery(container).block(blockParams);\n    requestAjax = jQuery.ajax({\n      url: ywcas_admin_params.ajaxurl,\n      data: formData,\n      dataType: 'json',\n      contentType: false,\n      processData: false,\n      type: 'POST',\n      success: function(response) {\n        if (response?.data?.content) {\n          jQuery(document).find('#yith-plugin-fw-panel-custom-tab-statistic.yith-plugin-fw-panel-custom-tab-container').html(jQuery(response.data.content));\n          jQuery(document).trigger('yith-plugin-fw-tabs-init');\n          jQuery(document).trigger('yith_fields_init');\n          window.onbeforeunload = null;\n          init();\n        }\n\n      },\n      complete: function() {\n        jQuery(container).unblock();\n      },\n    });\n\n    return false;\n\n  };\n\n  init();\n};\n\nYWCAS_Admin_Statistic();"],"names":["YWCAS_Admin_Statistic","fromDate","document","querySelector","toDate","filterButton","resetButton","container","requestAjax","showReset","value","length","jQuery","hide","blockParams","message","overlayCSS","background","opacity","ignoreIfBlocked","init","window","onbeforeunload","on","changeToDate","changeFromDate","filterByDate","resetDate","checkFilterButton","initFilter","e","preventDefault","datepicker","click","Date","emptyState","disabled","show","stopPropagation","abort","form","target","closest","parentForm","isDetail","data","formData","FormData","each","serializeArray","i","field","append","name","ywcas_admin_params","statisticNonce","block","ajax","url","ajaxurl","dataType","contentType","processData","type","success","response","_response$data","content","find","html","trigger","complete","unblock"],"sourceRoot":""}