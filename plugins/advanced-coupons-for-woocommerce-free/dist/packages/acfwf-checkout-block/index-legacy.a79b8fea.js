!function(){function e(e,c){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var c=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=c){var n,r,o,a,i=[],l=!0,s=!1;try{if(o=(c=c.call(e)).next,0===t){if(Object(c)!==c)return;l=!1}else for(;!(l=(n=o.call(c)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=c.return&&(a=c.return(),Object(a)!==a))return}finally{if(s)throw r}}return i}}(e,c)||function(e,c){if(!e)return;if("string"==typeof e)return t(e,c);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,c)}(e,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,n=new Array(t);c<t;c++)n[c]=e[c];return n}System.register(["../../common/NoticesPlugin-legacy.72a84dde.js","../../common/index-legacy.1e4d52e6.js"],(function(t,c){"use strict";var n,r,o,a,i,l;return{setters:[function(e){n=e.g,r=e.s,o=e.c,a=e.i,i=e.r,l=e.a},null],execute:function(){var t=document.createElement("style");function c(){var e=acfwfObj.components.OrderSummarySubtotalBlock,t=n(o.integration).store_credits.pay_with_store_credits_text,c=r.getCartData().extensions.acfwf_block;if(c&&c.store_credits&&c.store_credits.amount){var a=c.store_credits.amount_text;return React.createElement(e,{label:t,value:a})}return null}t.textContent='.acfw-checkout-form-button-field{margin:0}.acfw-checkout-form-button-field:after{content:"";display:table;clear:both}.acfw-checkout-form-button-field .form-row-last label{display:none}.acfw-checkout-form-button-field .form-row-last .button{width:100%}.acfwf-components .acfw-accordion:last-child{border-bottom:0}.acfwf-components .acfw-accordion h3{padding:.7em 1.2em;margin:0;background:#f5f5f5;font-size:1em;font-weight:400;cursor:pointer}.acfwf-components .acfw-accordion h3 .caret{position:relative;top:-2px;margin-left:5px}.acfwf-components .acfw-accordion h3 .caret img{display:inline-block;transition:transform .5s ease;transform:rotate(-90deg)}.acfwf-components .acfw-accordion .acfw-accordion-inner{overflow:hidden;background:#fcfcfc;max-height:0;transition:max-height .5s ease}.acfwf-components .acfw-accordion .acfw-accordion-inner .acfw-accordion-content{padding:1em 1.2em}.acfwf-components .acfw-accordion.show h3 .caret img{transform:rotate(0)}.acfwf-components .acfw-accordion .acfw-accordion-content{font-size:.9em}.acfwf-components .acfw-accordion .acfw-accordion-content p{margin-bottom:.5em}.acfwf-components .acfw-accordion .acfw-accordion-content p.acfw-store-credit-instructions{margin-bottom:.2em}\n',document.head.appendChild(t);var s=function(e){var t=acfwfObj.adminAjaxUrl,c=acfwfObj.wc.dummyUpdateCart,n=e.setButtonDisabled,r=e.amount,o=e.setAmount,a=e.redeem_nonce,i=wp.data.dispatch;n(!0),jQuery.post(t,{action:"acfwf_redeem_store_credits",amount:r,wpnonce:a,is_cart_checkout_block:!0},(function(e){c(),o(""),i("core/notices").createNotice(e.status,e.message,{type:"snackbar",context:"wc/checkout"}),setTimeout((function(){n(!1)}),200)}))};function f(){var t=acfwfObj.components.Accordion,c=wp.element.useState,a=n(o.integration),i=a.caret_img_src,l=a.store_credits,f=l.button_text,m=l.redeem_nonce,u=l.hide_store_credits_on_zero_balance,d=l.labels,w=d.balance_text,p=d.instructions,b=d.placeholder,_=l.labels.toggle_text,h=e(c(""),2),g=h[0],y=h[1],v=e(c(!1),2),k=v[0],x=v[1],E=r.getCartData().extensions.acfwf_block;if(!E||!E.store_credits)return null;var R=E.store_credits,j=R.balance,N=R.balance_text;return j||"yes"!==u?React.createElement("div",{className:"acfwf-components acfw-checkout-ui-block"},React.createElement(t,{title:_,caret_img_src:i},React.createElement("div",null,React.createElement("p",{className:"acfw-store-credit-user-balance"},React.createElement("div",{dangerouslySetInnerHTML:{__html:w.replace("%s","<strong>".concat(N,"</strong>"))}})),React.createElement("p",{className:"acfw-store-credit-instructions"},p),React.createElement("div",{id:"acfw_redeem_store_credit",className:"acfw-redeem-store-credit-form-field acfw-checkout-form-button-field "},React.createElement("p",{className:"form-row form-row-first acfw-form-control-wrapper acfw-col-left-half wfacp-input-form"},React.createElement("label",{htmlFor:"coupon_code"}),React.createElement("input",{type:"text",className:"input-text wc_input_price ",value:g,placeholder:b,onChange:function(e){y(e.target.value)}})),React.createElement("p",{className:"form-row form-row-last acfw-col-left-half acfw_coupon_btn_wrap"},React.createElement("label",{className:"acfw-form-control-label"},"Â "),React.createElement("button",{type:"button",className:"button alt",onClick:function(){return s({setButtonDisabled:x,amount:g,setAmount:y,redeem_nonce:m})},disabled:k},f)))))):null}var m,u,d,w,p,b,_;a(),i(),l(),m=wc.blocksCheckout,u=m.ExperimentalDiscountsMeta,d=m.ExperimentalOrderMeta,w=wp.plugins.registerPlugin,p=n(o.integration).store_credits,b=p.apply_type,_=p.display_store_credits_redeem_form,p.store_credits_module&&"yes"===_&&(w("acfw-store-credit-discount-form",{render:function(){return React.createElement(d,null,React.createElement(f,null))},scope:"woocommerce-checkout"}),"coupon"!==b&&w("acfw-store-credit-discount-row",{render:function(){return React.createElement(u,null,React.createElement(c,null))},scope:"woocommerce-checkout"}))}}}))}();
