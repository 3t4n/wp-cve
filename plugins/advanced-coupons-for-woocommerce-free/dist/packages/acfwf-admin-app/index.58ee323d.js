import{g as na,e as ra,r as p,u as X,j as oe,R as l,L as yt,d as $e,B as ke,k as Me,l as sa}from"../../common/reactLib.deb836f9.js";import{f as Ct,t as ca,d as oa,s as la,e as ia,m as ua,g as U,p as B,h as bt,i as wt,j as At,k as vt,l as Ot,n as k,o as M,P as xe}from"../../common/redux.cb701b1a.js";import{aa as ma,ab as da,ac as Nt,ad as Le,ae as Pt,af as pa,ag as Ea,ah as fa,ai as Dt,aj as _a,ak as ga,al as ha,am as Ra,an as Sa,ao as Ta,ap as Be,aq as It,ar as $t,as as kt,at as ya,au as Ca,av as ba,aw as wa,ax as P,ay as V,n as Mt,az as ne,aA as Ue,F as Aa,aB as me,aC as K,aD as je,aE as z,X as Fe,aF as _e,aG as H,aH as O,aI as Ge,aJ as Ee,aK as Q,aL as Y,V as va,aM as He,aN as ce,aO as Oe,aP as xt,aQ as at,aR as ge,aS as Oa,aT as Ve,aU as pe,R as nt,aV as Lt,aW as Na,aX as Pa,aY as Da,aZ as Ia}from"../../common/antd.25e006f0.js";import{T as Bt,R as $a,S as Ut,C as ka,I as Ma,W as xa,A as jt,G as La,a as Ba,b as Ua,M as ja,D as Fa,L as Ga,U as Ha,c as Va,d as qa,e as Ya,f as za,g as Ka,B as Wa,h as Qa}from"../../common/antdIcons.4686d04e.js";function Iu(){import.meta.url,import("_").catch(()=>1);async function*e(){}}var rt=function(t){return{done:!0,value:t}},Ne={};function Ja(e){return oa(e)?"channel":la(e)?String(e):ia(e)?e.name:String(e)}function Xa(e,t,a){var r,n,s,c=t;function o(d,i){if(c===Ne)return rt(d);if(i&&!n)throw c=Ne,i;r&&r(d);var u=i?e[n](i):e[c]();return c=u.nextState,s=u.effect,r=u.stateUpdater,n=u.errorState,c===Ne?rt(d):s}return ua(o,function(d){return o(null,d)},a)}function Za(e,t){for(var a=arguments.length,r=new Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];var s={done:!1,value:ca(e)},c=function(u){return{done:!1,value:Ct.apply(void 0,[t].concat(r,[u]))}},o,d=function(u){return o=u};return Xa({q1:function(){return{nextState:"q2",effect:s,stateUpdater:d}},q2:function(){return{nextState:"q1",effect:c(o)}}},"q1","takeEvery("+Ja(e)+", "+t.name+")")}function L(e,t){for(var a=arguments.length,r=new Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return Ct.apply(void 0,[Za,e,t].concat(r))}function en(e,t){for(var a=-1,r=e==null?0:e.length;++a<r&&t(e[a],a,e)!==!1;);return e}var tn=en,an=ma,nn=function(){try{var e=an(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),rn=nn,st=rn;function sn(e,t,a){t=="__proto__"&&st?st(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}var Ft=sn,cn=Ft,on=da,ln=Object.prototype,un=ln.hasOwnProperty;function mn(e,t,a){var r=e[t];(!(un.call(e,t)&&on(r,a))||a===void 0&&!(t in e))&&cn(e,t,a)}var Gt=mn,dn=Gt,pn=Ft;function En(e,t,a,r){var n=!a;a||(a={});for(var s=-1,c=t.length;++s<c;){var o=t[s],d=r?r(a[o],e[o],o,a,e):void 0;d===void 0&&(d=e[o]),n?pn(a,o,d):dn(a,o,d)}return a}var Ce=En,fn=Ce,_n=Nt;function gn(e,t){return e&&fn(t,_n(t),e)}var hn=gn;function Rn(e){var t=[];if(e!=null)for(var a in Object(e))t.push(a);return t}var Sn=Rn,Tn=Le,yn=Pt,Cn=Sn,bn=Object.prototype,wn=bn.hasOwnProperty;function An(e){if(!Tn(e))return Cn(e);var t=yn(e),a=[];for(var r in e)r=="constructor"&&(t||!wn.call(e,r))||a.push(r);return a}var vn=An,On=pa,Nn=vn,Pn=Ea;function Dn(e){return Pn(e)?On(e,!0):Nn(e)}var qe=Dn,In=Ce,$n=qe;function kn(e,t){return e&&In(t,$n(t),e)}var Mn=kn,Se={exports:{}};Se.exports;(function(e,t){var a=fa,r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,s=n&&n.exports===r,c=s?a.Buffer:void 0,o=c?c.allocUnsafe:void 0;function d(i,u){if(u)return i.slice();var f=i.length,_=o?o(f):new i.constructor(f);return i.copy(_),_}e.exports=d})(Se,Se.exports);var xn=Se.exports;function Ln(e,t){var a=-1,r=e.length;for(t||(t=Array(r));++a<r;)t[a]=e[a];return t}var Bn=Ln,Un=Ce,jn=Dt;function Fn(e,t){return Un(e,jn(e),t)}var Gn=Fn,Hn=_a,Vn=Hn(Object.getPrototypeOf,Object),Ht=Vn,qn=ga,Yn=Ht,zn=Dt,Kn=ha,Wn=Object.getOwnPropertySymbols,Qn=Wn?function(e){for(var t=[];e;)qn(t,zn(e)),e=Yn(e);return t}:Kn,Vt=Qn,Jn=Ce,Xn=Vt;function Zn(e,t){return Jn(e,Xn(e),t)}var er=Zn,tr=Ra,ar=Vt,nr=qe;function rr(e){return tr(e,nr,ar)}var sr=rr,cr=Object.prototype,or=cr.hasOwnProperty;function lr(e){var t=e.length,a=new e.constructor(t);return t&&typeof e[0]=="string"&&or.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var ir=lr,ct=Sa;function ur(e){var t=new e.constructor(e.byteLength);return new ct(t).set(new ct(e)),t}var Ye=ur,mr=Ye;function dr(e,t){var a=t?mr(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var pr=dr,Er=/\w*$/;function fr(e){var t=new e.constructor(e.source,Er.exec(e));return t.lastIndex=e.lastIndex,t}var _r=fr,ot=Ta,lt=ot?ot.prototype:void 0,it=lt?lt.valueOf:void 0;function gr(e){return it?Object(it.call(e)):{}}var hr=gr,Rr=Ye;function Sr(e,t){var a=t?Rr(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var Tr=Sr,yr=Ye,Cr=pr,br=_r,wr=hr,Ar=Tr,vr="[object Boolean]",Or="[object Date]",Nr="[object Map]",Pr="[object Number]",Dr="[object RegExp]",Ir="[object Set]",$r="[object String]",kr="[object Symbol]",Mr="[object ArrayBuffer]",xr="[object DataView]",Lr="[object Float32Array]",Br="[object Float64Array]",Ur="[object Int8Array]",jr="[object Int16Array]",Fr="[object Int32Array]",Gr="[object Uint8Array]",Hr="[object Uint8ClampedArray]",Vr="[object Uint16Array]",qr="[object Uint32Array]";function Yr(e,t,a){var r=e.constructor;switch(t){case Mr:return yr(e);case vr:case Or:return new r(+e);case xr:return Cr(e,a);case Lr:case Br:case Ur:case jr:case Fr:case Gr:case Hr:case Vr:case qr:return Ar(e,a);case Nr:return new r;case Pr:case $r:return new r(e);case Dr:return br(e);case Ir:return new r;case kr:return wr(e)}}var zr=Yr,Kr=Le,ut=Object.create,Wr=function(){function e(){}return function(t){if(!Kr(t))return{};if(ut)return ut(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}(),Qr=Wr,Jr=Qr,Xr=Ht,Zr=Pt;function es(e){return typeof e.constructor=="function"&&!Zr(e)?Jr(Xr(e)):{}}var ts=es,as=Be,ns=It,rs="[object Map]";function ss(e){return ns(e)&&as(e)==rs}var cs=ss,os=cs,ls=kt,mt=$t,dt=mt&&mt.isMap,is=dt?ls(dt):os,us=is,ms=Be,ds=It,ps="[object Set]";function Es(e){return ds(e)&&ms(e)==ps}var fs=Es,_s=fs,gs=kt,pt=$t,Et=pt&&pt.isSet,hs=Et?gs(Et):_s,Rs=hs,Ss=ya,Ts=tn,ys=Gt,Cs=hn,bs=Mn,ws=xn,As=Bn,vs=Gn,Os=er,Ns=ba,Ps=sr,Ds=Be,Is=ir,$s=zr,ks=ts,Ms=wa,xs=Ca,Ls=us,Bs=Le,Us=Rs,js=Nt,Fs=qe,Gs=1,Hs=2,Vs=4,qt="[object Arguments]",qs="[object Array]",Ys="[object Boolean]",zs="[object Date]",Ks="[object Error]",Yt="[object Function]",Ws="[object GeneratorFunction]",Qs="[object Map]",Js="[object Number]",zt="[object Object]",Xs="[object RegExp]",Zs="[object Set]",ec="[object String]",tc="[object Symbol]",ac="[object WeakMap]",nc="[object ArrayBuffer]",rc="[object DataView]",sc="[object Float32Array]",cc="[object Float64Array]",oc="[object Int8Array]",lc="[object Int16Array]",ic="[object Int32Array]",uc="[object Uint8Array]",mc="[object Uint8ClampedArray]",dc="[object Uint16Array]",pc="[object Uint32Array]",$={};$[qt]=$[qs]=$[nc]=$[rc]=$[Ys]=$[zs]=$[sc]=$[cc]=$[oc]=$[lc]=$[ic]=$[Qs]=$[Js]=$[zt]=$[Xs]=$[Zs]=$[ec]=$[tc]=$[uc]=$[mc]=$[dc]=$[pc]=!0;$[Ks]=$[Yt]=$[ac]=!1;function he(e,t,a,r,n,s){var c,o=t&Gs,d=t&Hs,i=t&Vs;if(a&&(c=n?a(e,r,n,s):a(e)),c!==void 0)return c;if(!Bs(e))return e;var u=Ms(e);if(u){if(c=Is(e),!o)return As(e,c)}else{var f=Ds(e),_=f==Yt||f==Ws;if(xs(e))return ws(e,o);if(f==zt||f==qt||_&&!n){if(c=d||_?{}:ks(e),!o)return d?Os(e,bs(c,e)):vs(e,Cs(c,e))}else{if(!$[f])return n?e:{};c=$s(e,f,o)}}s||(s=new Ss);var g=s.get(e);if(g)return g;s.set(e,c),Us(e)?e.forEach(function(S){c.add(he(S,t,a,S,e,s))}):Ls(e)&&e.forEach(function(S,v){c.set(v,he(S,t,a,v,e,s))});var C=i?d?Ps:Ns:d?Fs:js,R=u?void 0:C(e);return Ts(R||e,function(S,v){R&&(v=S,S=e[v]),ys(c,v,he(S,t,a,v,e,s))}),c}var Ec=he,fc=Ec,_c=1,gc=4;function hc(e){return fc(e,_c|gc)}var Rc=hc;const Te=na(Rc);var ue=(e=>(e.READ_SECTIONS="READ_SECTIONS",e.READ_SECTION="READ_SECTION",e.SET_STORE_SECTIONS="SET_STORE_SECTIONS",e.SET_STORE_SECTION="SET_STORE_SECTION",e.TOGGLE_MODULE_SECTION="TOGGLE_MODULE_SECTION",e))(ue||{});const be={readSections:e=>({type:"READ_SECTIONS",payload:e}),readSection:e=>({type:"READ_SECTION",payload:e}),setStoreSectionItems:e=>({type:"SET_STORE_SECTIONS",payload:e}),setStoreSectionItem:e=>({type:"SET_STORE_SECTION",payload:e}),toggleModuleSection:e=>({type:"TOGGLE_MODULE_SECTION",payload:e})},Sc=(e=[],t)=>{switch(t.type){case ue.SET_STORE_SECTIONS:{const{data:a}=t.payload;return a}case ue.SET_STORE_SECTION:{const{data:a}=t.payload,r=e.findIndex(s=>s.id===a.id);if(r<0)return e;const n=Te(e);return n[r]={...n[r],...a},n}case ue.TOGGLE_MODULE_SECTION:{const{module:a,show:r}=t.payload,n=e.findIndex(c=>c.module&&c.module===a);if(n<0)return e;const s=Te(e);return s[n].show=r,s}default:return e}};var ee=(e=>(e.CREATE_SETTING="CREATE_SETTING",e.UPDATE_SETTING="UPDATE_SETTING",e.DELETE_SETTING="DELETE_SETTING",e.READ_SETTINGS="READ_SETTINGS",e.REHYDRATE_STORE_SETTINGS="REHYDRATE_STORE_SETTINGS",e.REHYDRATE_STORE_SETTING="REHYDRATE_STORE_SETTING",e.SET_STORE_SETTINGS="SET_STORE_SETTINGS",e.SET_STORE_SETTING="SET_STORE_SETTING",e))(ee||{});const J={createSetting:e=>({type:"CREATE_SETTING",payload:e}),updateSetting:e=>({type:"UPDATE_SETTING",payload:e}),deleteSetting:e=>({type:"DELETE_SETTING",payload:e}),readSettings:e=>({type:"READ_SETTINGS",payload:e}),rehydrateStoreSettings:e=>({type:"REHYDRATE_STORE_SETTINGS",payload:e}),rehydrateStoreSetting:e=>({type:"REHYDRATE_STORE_SETTING",payload:e}),setStoreSettingItems:e=>({type:"SET_STORE_SETTINGS",payload:e}),setStoreSettingItem:e=>({type:"SET_STORE_SETTING",payload:e})},Tc=(e=[],t)=>{switch(t.type){case ee.SET_STORE_SETTINGS:{const{data:a}=t.payload;let r=Te(e);for(const n of a){let s=e.findIndex(c=>c.id===n.id);r[s]?r[s]=n:r.push(n)}return r}case ee.SET_STORE_SETTING:{const{data:a}=t.payload,r=e.findIndex(s=>s.id===a.id);if(r<0)return e;const n=Te(e);return n[r]={...n[r],...a},n}default:return e}};var Kt=(e=>(e.SET_STORE_PAGE="SET_STORE_PAGE",e))(Kt||{});const le={setStorePage:e=>({type:"SET_STORE_PAGE",payload:e})},yc=(e="",t)=>{switch(t.type){case Kt.SET_STORE_PAGE:{const{data:a}=t.payload;return a}default:return e}};var ze=(e=>(e.READ_STORE_CREDITS_DASHBOARD_DATA="READ_STORE_CREDITS_DASHBOARD_DATA",e.SET_STORE_CREDITS_DASHBOARD_DATA="SET_STORE_CREDITS_DASHBOARD_DATA",e))(ze||{});const Wt={readStoreCreditsDashboardData:e=>({type:"READ_STORE_CREDITS_DASHBOARD_DATA",payload:e}),setStoreCreditsDashboardData:e=>({type:"SET_STORE_CREDITS_DASHBOARD_DATA",payload:e})},Cc=(e=null,t)=>{switch(t.type){case ze.SET_STORE_CREDITS_DASHBOARD_DATA:{const{status:a}=t.payload;return a}default:return e}};var re=(e=>(e.READ_STORE_CREDITS_CUSTOMERS="READ_STORE_CREDITS_CUSTOMERS",e.READ_STORE_CREDITS_CUSTOMER_STATUS="READ_STORE_CREDITS_CUSTOMER_STATUS",e.READ_STORE_CREDITS_CUSTOMER_ENTRIES="READ_STORE_CREDITS_CUSTOMER_ENTRIES",e.ADJUST_CUSTOMER_STORE_CREDITS="ADJUST_CUSTOMER_STORE_CREDITS",e.SET_STORE_CREDITS_CUSTOMERS="SET_STORE_CREDITS_CUSTOMERS",e.SET_STORE_CREDITS_CUSTOMER_STATUS="SET_STORE_CREDITS_CUSTOMER_STATUS",e.SET_STORE_CREDITS_CUSTOMER_BALANCE="SET_STORE_CREDITS_CUSTOMER_BALANCE",e))(re||{});const fe={readStoreCreditsCustomers:e=>({type:"READ_STORE_CREDITS_CUSTOMERS",payload:e}),readStoreCreditsCustomerStatus:e=>({type:"READ_STORE_CREDITS_CUSTOMER_STATUS",payload:e}),readStoreCreditsCustomerEntries:e=>({type:"READ_STORE_CREDITS_CUSTOMER_ENTRIES",payload:e}),adjustCustomerStoreCredits:e=>({type:"ADJUST_CUSTOMER_STORE_CREDITS",payload:e}),setStoreCreditsCustomers:e=>({type:"SET_STORE_CREDITS_CUSTOMERS",payload:e}),setStoreCreditsCustomerStatus:e=>({type:"SET_STORE_CREDITS_CUSTOMER_STATUS",payload:e}),setStoreCreditsCustomerBalance:e=>({type:"SET_STORE_CREDITS_CUSTOMER_BALANCE",payload:e})},bc=(e=[],t)=>{let a;switch(t.type){case re.SET_STORE_CREDITS_CUSTOMERS:const{data:r}=t.payload;return r;case re.SET_STORE_CREDITS_CUSTOMER_STATUS:const{id:n,status:s,sources:c}=t.payload;return a=e.findIndex(i=>i.id===n),e[a]={...e[a],status:s,sources:c},[...e];case re.SET_STORE_CREDITS_CUSTOMER_BALANCE:const{balance:o,balance_raw:d}=t.payload;return a=e.findIndex(i=>i.id===t.payload.id),e[a]={...e[a],balance:o,balance_raw:d,status:[],sources:[]},[...e];default:return e}};var Ke=(e=>(e.READ_DASHBOARD_WIDGETS_DATA="READ_DASHBOARD_WIDGETS_DATA",e.SET_DASHBOARD_WIDGETS_DATA="SET_DASHBOARD_WIDGETS_DATA",e))(Ke||{});const Qt={readDashboardWidgetsData:e=>({type:"READ_DASHBOARD_WIDGETS_DATA",payload:e}),setDashboardWidgetsData:e=>({type:"SET_DASHBOARD_WIDGETS_DATA",payload:e})},wc=(e=null,t)=>{switch(t.type){case Ke.SET_DASHBOARD_WIDGETS_DATA:{const{widgets:a}=t.payload;return a}default:return e}};var ye=(e=>(e.READ_ADMIN_NOTICES="READ_ADMIN_NOTICES",e.SET_ADMIN_NOTICES="SET_ADMIN_NOTICES",e.DISMISS_ADMIN_NOTICE="DISMISS_ADMIN_NOTICE",e))(ye||{});const We={readAdminNotices:e=>({type:"READ_ADMIN_NOTICES",payload:e}),setAdminNotices:e=>({type:"SET_ADMIN_NOTICES",payload:e}),dismissAdminNotice:e=>({type:"DISMISS_ADMIN_NOTICE",payload:e})},Ac=(e=[],t)=>{switch(t.type){case ye.SET_ADMIN_NOTICES:{const{notices:a}=t.payload;return a}case ye.DISMISS_ADMIN_NOTICE:{const{slug:a}=t.payload;return e.filter(n=>n.slug!==a)}default:return e}};var F=(e=>(e.READ_COUPON_TEMPLATES="READ_COUPON_TEMPLATES",e.READ_COUPON_TEMPLATE="READ_COUPON_TEMPLATE",e.READ_RECENT_COUPON_TEMPLATES="READ_RECENT_COUPON_TEMPLATES",e.READ_COUPON_TEMPLATE_CATEGORIES="READ_COUPON_TEMPLATE_CATEGORIES",e.READ_COUPON_TEMPLATE_CATEGORY="READ_COUPON_TEMPLATE_CATEGORY",e.CREATE_COUPON_FROM_TEMPLATE="CREATE_COUPON_FROM_TEMPLATE",e.DELETE_RECENT_COUPON_TEMPLATE="DELETE_RECENT_COUPON_TEMPLATE",e.SET_COUPON_TEMPLATES="SET_COUPON_TEMPLATES",e.SET_COUPON_TEMPLATE_CATEGORIES="SET_COUPON_TEMPLATE_CATEGORIES",e.UNSET_RECENT_COUPON_TEMPLATE="UNSET_RECENT_COUPON_TEMPLATE",e.SET_COUPON_TEMPLATES_LOADING="SET_COUPON_TEMPLATES_LOADING",e.SET_EDIT_COUPON_TEMPLATE="SET_EDIT_COUPON_TEMPLATE",e.SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE="SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE",e.VALIDATE_EDIT_COUPON_TEMPLATE_DATA="VALIDATE_EDIT_COUPON_TEMPLATE_DATA",e.SET_COUPON_CREATED_RESPONSE_DATA="SET_COUPON_CREATED_RESPONSE_DATA",e.CLEAR_COUPON_CREATED_RESPONSE_DATA="CLEAR_COUPON_CREATED_RESPONSE_DATA",e.TOGGLE_PREMIUM_MODAL="TOGGLE_PREMIUM_MODAL",e))(F||{});const q={readCouponTemplates:e=>({type:"READ_COUPON_TEMPLATES",payload:e}),readCouponTemplate:e=>({type:"READ_COUPON_TEMPLATE",payload:e}),readRecentCouponTemplates:e=>({type:"READ_RECENT_COUPON_TEMPLATES",payload:e}),readCouponTemplateCategories:e=>({type:"READ_COUPON_TEMPLATE_CATEGORIES",payload:e}),readCouponTemplateCategory:e=>({type:"READ_COUPON_TEMPLATE_CATEGORY",payload:e}),createCouponFromTemplate:e=>({type:"CREATE_COUPON_FROM_TEMPLATE",payload:e}),deleteRecentCouponTemplate:e=>({type:"DELETE_RECENT_COUPON_TEMPLATE",payload:e}),setCouponTemplates:e=>({type:"SET_COUPON_TEMPLATES",payload:e}),setCouponTemplateCategories:e=>({type:"SET_COUPON_TEMPLATE_CATEGORIES",payload:e}),unsetRecentCouponTemplate:e=>({type:"UNSET_RECENT_COUPON_TEMPLATE",payload:e}),setCouponTemplatesLoading:e=>({type:"SET_COUPON_TEMPLATES_LOADING",payload:e}),setEditCouponTemplate:e=>({type:"SET_EDIT_COUPON_TEMPLATE",payload:e}),setEditCouponTemplateFieldValue:e=>({type:"SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE",payload:e}),validateEditCouponTemplateData:()=>({type:"VALIDATE_EDIT_COUPON_TEMPLATE_DATA"}),setCreatedCouponResponseData:e=>({type:"SET_COUPON_CREATED_RESPONSE_DATA",payload:e}),clearCreatedCouponResponseData:()=>({type:"CLEAR_COUPON_CREATED_RESPONSE_DATA"}),togglePremiumModal:e=>({type:"TOGGLE_PREMIUM_MODAL",payload:e})},vc=(e={loading:!1,templates:[],recent:[],review:[],edit:null,categories:[],formResponse:null,premiumModal:!1},t)=>{let a;switch(t.type){case F.SET_COUPON_TEMPLATES:{const{data:r,type:n="main"}=t.payload;switch(n){case"main":return{...e,templates:r};case"recent":return{...e,recent:r};case"review":return{...e,review:r}}}case F.SET_COUPON_TEMPLATE_CATEGORIES:{const{data:r}=t.payload;return{...e,categories:r}}case F.UNSET_RECENT_COUPON_TEMPLATE:{const{id:r}=t.payload,n=[...e.recent];return a=n.findIndex(s=>s.id===r),n.splice(a,1),{...e,recent:n}}case F.SET_COUPON_TEMPLATES_LOADING:{const{loading:r}=t.payload;return{...e,loading:r}}case F.SET_EDIT_COUPON_TEMPLATE:{const{data:r}=t.payload;return{...e,edit:r}}case F.SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE:{const{field:r,value:n}=t.payload,s={...e.edit};if(!s||!s.fields)return e;const c=s.fields.findIndex(o=>o.field===r);return c>-1&&(s.fields[c].value=n),{...e,edit:{...s}}}case F.VALIDATE_EDIT_COUPON_TEMPLATE_DATA:{const r={...e.edit};if(!r||!r.fields)return e;const n=r.fields.map(s=>(s.is_required&&!s.value?s.error="This field is required":s.error=void 0,s));return{...e,edit:{...r,fields:n}}}case F.SET_COUPON_CREATED_RESPONSE_DATA:{const{data:r}=t.payload;return{...e,formResponse:r}}case F.CLEAR_COUPON_CREATED_RESPONSE_DATA:{const r={...e.edit};return r.fields=r.fields.map(n=>{var s;return n.value=(s=n.pre_filled_value)!=null?s:"",n}),{...e,formResponse:null,edit:{...r}}}case F.TOGGLE_PREMIUM_MODAL:{const{show:r}=t.payload;return{...e,premiumModal:r}}}return e};(function(){(function(e){(function(t){var a={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(m){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function r(m){return m&&DataView.prototype.isPrototypeOf(m)}if(a.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(m){return m&&n.indexOf(Object.prototype.toString.call(m))>-1};function c(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(m))throw new TypeError("Invalid character in header field name");return m.toLowerCase()}function o(m){return typeof m!="string"&&(m=String(m)),m}function d(m){var E={next:function(){var h=m.shift();return{done:h===void 0,value:h}}};return a.iterable&&(E[Symbol.iterator]=function(){return E}),E}function i(m){this.map={},m instanceof i?m.forEach(function(E,h){this.append(h,E)},this):Array.isArray(m)?m.forEach(function(E){this.append(E[0],E[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(E){this.append(E,m[E])},this)}i.prototype.append=function(m,E){m=c(m),E=o(E);var h=this.map[m];this.map[m]=h?h+", "+E:E},i.prototype.delete=function(m){delete this.map[c(m)]},i.prototype.get=function(m){return m=c(m),this.has(m)?this.map[m]:null},i.prototype.has=function(m){return this.map.hasOwnProperty(c(m))},i.prototype.set=function(m,E){this.map[c(m)]=o(E)},i.prototype.forEach=function(m,E){for(var h in this.map)this.map.hasOwnProperty(h)&&m.call(E,this.map[h],h,this)},i.prototype.keys=function(){var m=[];return this.forEach(function(E,h){m.push(h)}),d(m)},i.prototype.values=function(){var m=[];return this.forEach(function(E){m.push(E)}),d(m)},i.prototype.entries=function(){var m=[];return this.forEach(function(E,h){m.push([h,E])}),d(m)},a.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);function u(m){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}function f(m){return new Promise(function(E,h){m.onload=function(){E(m.result)},m.onerror=function(){h(m.error)}})}function _(m){var E=new FileReader,h=f(E);return E.readAsArrayBuffer(m),h}function g(m){var E=new FileReader,h=f(E);return E.readAsText(m),h}function C(m){for(var E=new Uint8Array(m),h=new Array(E.length),N=0;N<E.length;N++)h[N]=String.fromCharCode(E[N]);return h.join("")}function R(m){if(m.slice)return m.slice(0);var E=new Uint8Array(m.byteLength);return E.set(new Uint8Array(m)),E.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(m){this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:a.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:a.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():a.arrayBuffer&&a.blob&&r(m)?(this._bodyArrayBuffer=R(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||s(m))?this._bodyArrayBuffer=R(m):this._bodyText=m=Object.prototype.toString.call(m):this._bodyText="",this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var m=u(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(_)}),this.text=function(){var m=u(this);if(m)return m;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function D(m){var E=m.toUpperCase();return v.indexOf(E)>-1?E:m}function A(m,E){E=E||{};var h=E.body;if(m instanceof A){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,E.headers||(this.headers=new i(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!h&&m._bodyInit!=null&&(h=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new i(E.headers)),this.method=D(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&h)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(h)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function y(m){var E=new FormData;return m.trim().split("&").forEach(function(h){if(h){var N=h.split("="),j=N.shift().replace(/\+/g," "),b=N.join("=").replace(/\+/g," ");E.append(decodeURIComponent(j),decodeURIComponent(b))}}),E}function w(m){var E=new i,h=m.replace(/\r?\n[\t ]+/g," ");return h.split(/\r?\n/).forEach(function(N){var j=N.split(":"),b=j.shift().trim();if(b){var ie=j.join(":").trim();E.append(b,ie)}}),E}S.call(A.prototype);function T(m,E){E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new i(E.headers),this.url=E.url||"",this._initBody(m)}S.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},T.error=function(){var m=new T(null,{status:0,statusText:""});return m.type="error",m};var I=[301,302,303,307,308];T.redirect=function(m,E){if(I.indexOf(E)===-1)throw new RangeError("Invalid status code");return new T(null,{status:E,headers:{location:m}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(m){t.DOMException=function(E,h){this.message=E,this.name=h;var N=Error(E);this.stack=N.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function G(m,E){return new Promise(function(h,N){var j=new A(m,E);if(j.signal&&j.signal.aborted)return N(new t.DOMException("Aborted","AbortError"));var b=new XMLHttpRequest;function ie(){b.abort()}b.onload=function(){var Z={status:b.status,statusText:b.statusText,headers:w(b.getAllResponseHeaders()||"")};Z.url="responseURL"in b?b.responseURL:Z.headers.get("X-Request-URL");var ve="response"in b?b.response:b.responseText;h(new T(ve,Z))},b.onerror=function(){N(new TypeError("Network request failed"))},b.ontimeout=function(){N(new TypeError("Network request failed"))},b.onabort=function(){N(new t.DOMException("Aborted","AbortError"))},b.open(j.method,j.url,!0),j.credentials==="include"?b.withCredentials=!0:j.credentials==="omit"&&(b.withCredentials=!1),"responseType"in b&&a.blob&&(b.responseType="blob"),j.headers.forEach(function(Z,ve){b.setRequestHeader(ve,Z)}),j.signal&&(j.signal.addEventListener("abort",ie),b.onreadystatechange=function(){b.readyState===4&&j.signal.removeEventListener("abort",ie)}),b.send(typeof j._bodyInit>"u"?null:j._bodyInit)})}return G.polyfill=!0,e.fetch||(e.fetch=G,e.Headers=i,e.Request=A,e.Response=T),t.Headers=i,t.Request=A,t.Response=T,t.fetch=G,Object.defineProperty(t,"__esModule",{value:!0}),t})({})})(typeof self<"u"?self:ra)})();const Oc=axios.CancelToken,x=axios.create({baseURL:wpApiSettings.root,timeout:0,headers:{"X-WP-Nonce":wpApiSettings.nonce,"X-ACFW-Context":"admin"}}),Pe=new Map,we=e=>{const t=Pe.get(e);t&&(t(),Pe.delete(e))},W=e=>new Oc(t=>Pe.set(e,t));function*Nc(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload,s=t||"general_section";try{typeof a=="function"&&a();const c=yield U(()=>x.get("coupons/v1/settings/sections",{headers:{section:s}}));if(c&&c.data){const o=s?c.data.findIndex(d=>d.id===s):0;yield B(J.rehydrateStoreSettings({data:c.data[o]})),yield B(be.setStoreSectionItems({data:c.data})),typeof r=="function"&&r(c)}}catch(c){typeof n=="function"&&n({error:c})}}function*Pc(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=t||"general_section",c=yield U(()=>x.get("coupons/v1/settings/sections/".concat(s)));c&&c.data&&(yield B(J.rehydrateStoreSettings({data:c.data})),yield B(be.setStoreSectionItem({data:c.data})),typeof r=="function"&&r(c))}catch(s){typeof n=="function"&&n({error:s})}}const Dc=[L(ue.READ_SECTIONS,Nc),L(ue.READ_SECTION,Pc)];function*Ic(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.post("coupons/v1/setting/sections",t));s&&s.data&&(yield B(J.rehydrateStoreSettings({})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s,payload:t})}}function*$c(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{if(typeof a=="function"&&a(),!t.id)throw new Error("Can not update survey. No survey id provided.");const s=yield U(()=>{const{id:c,...o}=t;return x.put("coupons/v1/settings/".concat(c),o)});s&&s.data&&(yield B(J.rehydrateStoreSetting({id:s.data.id,data:s.data})),t.type==="module"&&(yield B(be.toggleModuleSection({module:t.id,show:t.value==="yes"}))),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s,payload:t})}}function*kc(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.delete("coupons/v1/settings/".concat(t)));s&&s.data&&(yield B(J.rehydrateStoreSettings({})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*Mc(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/settings/"));n&&n.data&&(yield B(J.rehydrateStoreSettings({data:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*xc(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{if(typeof a=="function"&&a(),t){let s=t.fields.filter(c=>c.type!=="title"&&c.type!=="sectionend");s=s.map(c=>({id:c.id,value:c.value})),yield B(J.setStoreSettingItems({data:s})),typeof r=="function"&&r(s)}}catch(s){typeof n=="function"&&n({error:s})}}function*Lc(e){const{id:t,data:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{if(typeof r=="function"&&r(),a)yield B(J.setStoreSettingItem({data:a})),typeof n=="function"&&n(a);else{const c=yield U(()=>x.get("coupons/v1/settings/".concat(t)));c&&c.data&&(yield B(J.setStoreSettingItem({data:c.data})),typeof n=="function"&&n(c))}}catch(c){typeof s=="function"&&s({error:c})}}const Bc=[L(ee.CREATE_SETTING,Ic),L(ee.UPDATE_SETTING,$c),L(ee.DELETE_SETTING,kc),L(ee.READ_SETTINGS,Mc),L(ee.REHYDRATE_STORE_SETTINGS,xc),L(ee.REHYDRATE_STORE_SETTING,Lc)];function*Uc(e){const{startPeriod:t,endPeriod:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{typeof r=="function"&&r();const c=yield U(()=>x.get("store-credits/v1/customers/status",{params:{startPeriod:t,endPeriod:a},cancelToken:W("scdashboard")}));c&&c.data&&(yield B(Wt.setStoreCreditsDashboardData({status:c.data})),typeof n=="function"&&n(c))}catch(c){typeof s=="function"&&s({error:c})}}const jc=[L(ze.READ_STORE_CREDITS_DASHBOARD_DATA,Uc)];function*Fc(e){const{params:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.get("store-credits/v1/customers",{params:t,cancelToken:W("customer_search")}));s&&s.data&&(yield B(fe.setStoreCreditsCustomers({data:s.data})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*Gc(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{if(typeof a=="function"&&a(),!t)throw new Error("Can't fetch data. No customer ID was provided.");const s=yield U(()=>x.get("store-credits/v1/customers/".concat(t)));s&&s.data&&(yield B(fe.setStoreCreditsCustomerStatus({id:t,status:s.data.status,sources:s.data.sources})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*Hc(e){const{id:t,page:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{if(typeof r=="function"&&r(),!t)throw new Error("Can't fetch data. No customer ID was provided.");const c=yield U(()=>x.get("store-credits/v1/entries",{params:{user_id:t,page:a!=null?a:1,is_admin:!0}}));c&&c.data&&typeof n=="function"&&n(c)}catch(c){typeof s=="function"&&s({error:c})}}function*Vc(e){const{id:t,type:a,amount:r,processingCB:n,successCB:s,failCB:c}=e.payload;try{if(typeof n=="function"&&n(),!t)throw new Error("Can't adjust store credits. No customer ID was provided.");const o=yield U(()=>x.post("store-credits/v1/entries",{user_id:t,type:a,amount:r,action:"admin_".concat(a)}));o&&o.data&&typeof s=="function"&&s(o)}catch(o){typeof c=="function"&&c({error:o})}}const qc=[L(re.READ_STORE_CREDITS_CUSTOMERS,Fc),L(re.READ_STORE_CREDITS_CUSTOMER_STATUS,Gc),L(re.READ_STORE_CREDITS_CUSTOMER_ENTRIES,Hc),L(re.ADJUST_CUSTOMER_STORE_CREDITS,Vc)];function*Yc(e){const{startPeriod:t,endPeriod:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{typeof r=="function"&&r();const c=yield U(()=>x.get("coupons/v1/reports",{params:{startPeriod:t,endPeriod:a},cancelToken:W("dashboardwidgets")}));c&&c.data&&(yield B(Qt.setDashboardWidgetsData({widgets:c.data})),typeof n=="function"&&n(c))}catch(c){typeof s=="function"&&s({error:c})}}const zc=[L(Ke.READ_DASHBOARD_WIDGETS_DATA,Yc)];function*Kc(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/reports/notices"));n&&n.data&&(yield B(We.setAdminNotices({notices:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}const Wc=[L(ye.READ_ADMIN_NOTICES,Kc)];function*Qc(e){const{isReview:t=!1,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.get("coupons/v1/templates",{cancelToken:W("coupon_templates"),params:t?{is_review:1}:{}}));s&&s.data&&(yield B(q.setCouponTemplates({data:s.data,type:t?"review":"main"})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*Jc(e){const{id:t,isReview:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{typeof r=="function"&&r();const c=yield U(()=>x.get("coupons/v1/templates/".concat(t),{cancelToken:W("coupon_template"),params:a?{is_review:1}:{}}));c&&c.data&&(c.data.fields=c.data.fields.map(o=>{var d;return o.value=(d=o.pre_filled_value)!=null?d:"",o}),typeof n=="function"&&n(c))}catch(c){typeof s=="function"&&s({error:c})}}function*Xc(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/templates/recent",{cancelToken:W("recent_coupon_templates")}));n&&n.data&&(yield B(q.setCouponTemplates({data:n.data,type:"recent"})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*Zc(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/templates/categories",{cancelToken:W("coupon_template_categories")}));n&&n.data&&(yield B(q.setCouponTemplateCategories({data:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*eo(e){const{slug:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.get("coupons/v1/templates/categories/".concat(t),{cancelToken:W("coupon_template_category")}));s&&s.data&&(yield B(q.setCouponTemplates({data:s.data})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*to(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.post("coupons/v1/templates",t,{cancelToken:W("coupon_template_create")}));s&&s.data&&typeof r=="function"&&r(s)}catch(s){typeof n=="function"&&n({error:s})}}function*ao(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.delete("coupons/v1/templates/recent/".concat(t),{cancelToken:W("coupon_template_delete")}));typeof r=="function"&&r(s)}catch(s){typeof n=="function"&&n({error:s})}}const no=[L(F.READ_COUPON_TEMPLATES,Qc),L(F.READ_COUPON_TEMPLATE,Jc),L(F.READ_RECENT_COUPON_TEMPLATES,Xc),L(F.READ_COUPON_TEMPLATE_CATEGORIES,Zc),L(F.READ_COUPON_TEMPLATE_CATEGORY,eo),L(F.CREATE_COUPON_FROM_TEMPLATE,to),L(F.DELETE_RECENT_COUPON_TEMPLATE,ao)];function*ro(){yield bt([...Dc,...Bc,...qc,...jc,...zc,...Wc,...no])}const so=e=>Ot(...e);function co(e=void 0){const t=wt(),a=At(vt({sections:Sc,settingValues:Tc,page:yc,storeCreditsDashboard:Cc,storeCreditsCustomers:bc,dashboardWidgets:wc,adminNotices:Ac,couponTemplates:vc}),e,so([t]));return t.run(ro),a}const Qe=e=>{const{hideUpgrade:t}=e,{app_pages:a,premium_page:r}=acfwAdminApp,[n]=a.filter(s=>s.slug==="acfw-premium");return React.createElement("div",{className:"acfw-logo-div"},n?React.createElement(React.Fragment,null,React.createElement("a",{href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=logo",target:"_blank",rel:"noreferrer"},React.createElement("img",{className:"acfw-logo",src:acfwAdminApp.logo,alt:"acfw logo"})),!t&&React.createElement("a",{className:"acfw-header-upgrade-btn",href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=upgrade",target:"_blank",rel:"noreferrer"},r.upgrade)):React.createElement("img",{className:"acfw-logo",src:acfwAdminApp.logo,alt:"acfw logo"}))},se=e=>{var n;const{title:t,className:a,description:r}=e;return(n=e.hideUpgrade)!=null,React.createElement("div",{className:"page-header ".concat(a!=null?a:"")},React.createElement(Qe,{hideUpgrade:!0}),!!t&&React.createElement("h1",null,t),!!r&&React.createElement("p",null,r))},oo=()=>{const{admin_url:e,dashboard_page:{create_coupon:t}}=acfwAdminApp;return React.createElement("div",{className:"quick-create-coupon"},React.createElement("span",{className:"label"},"".concat(t.label,":")),React.createElement(P,{type:"primary",href:"".concat(e,"post-new.php?post_type=shop_coupon&type=percent"),target:"_blank",size:"small",ghost:!0},t.percentage),React.createElement(P,{type:"primary",href:"".concat(e,"post-new.php?post_type=shop_coupon&type=fixed_cart"),target:"_blank",size:"small",ghost:!0},t.fixed),React.createElement(P,{type:"primary",href:"".concat(e,"post-new.php?post_type=shop_coupon&type=acfw_bogo"),target:"_blank",size:"small",ghost:!0},t.bogo))},lo=e=>{const{notice:{slug:t,content:a,type:r,nonce:n,actions:s,is_dismissable:c},onDismiss:o}=e,{dashboard_page:{labels:d}}=acfwAdminApp;return React.createElement(V,{className:"single-notice notice-".concat(r," ").concat(t,"-notice")},React.createElement("div",{className:"notice-content"},a.map((i,u)=>React.createElement("p",{key:u,dangerouslySetInnerHTML:{__html:i}}))),React.createElement("div",{className:"notice-actions"},s.map((i,u)=>React.createElement(P,{key:i.key,type:u===0?"primary":"default",href:i.link?i.link.replace(/&amp;/g,"&"):void 0,target:i!=null&&i.is_external?"_blank":void 0,onClick:i!=null&&i.response?()=>o(t,n,i.response):void 0},i.text)),c&&t!=="review_request"&&React.createElement(P,{onClick:()=>o(t,n)},d.dismiss)),c&&React.createElement(P,{className:"dismiss-notice-icon",icon:React.createElement(Mt,null),size:"small",type:"text",shape:"circle",onClick:()=>o(t,n,t==="review_request"?"snooze":"dismissed")}))};const{dismissAdminNotice:io}=We,uo=e=>{const{notices:t,actions:a}=e,[r,n]=p.useState(1),[s,c]=p.useState(0),o=p.useRef(null),{dashboard_page:{labels:d}}=acfwAdminApp,i=(u,f,_="yes")=>{a.dismissAdminNotice({slug:u}),jQuery.ajax({method:"post",url:ajaxurl,data:{action:"acfw_dismiss_admin_notice",notice:u,nonce:f,response:_},dataType:"json"})};return p.useEffect(()=>{t.length&&!window.lodash.isNull(o)&&c(o.current.clientHeight)}),0>=t.length?null:React.createElement("div",{className:"dashboard-notices"},React.createElement("h2",null,d.notices),React.createElement("div",{className:"list-overflow",style:{height:0<s?s+5:"auto"}},React.createElement("div",{className:"notices-list",ref:o},t.slice(0,r).map(u=>React.createElement(lo,{key:u.slug,notice:u,onDismiss:i})))),1<t.length&&React.createElement(ne,null,React.createElement(P,{className:"toggle-view-all",size:"small",type:"primary",onClick:()=>n(1>=r?t.length:1),ghost:!0},1>=r?d.view_all:d.hide)))},mo=e=>({notices:e.adminNotices}),po=e=>({actions:M({dismissAdminNotice:io},e)}),Eo=k(mo,po)(uo),Jt=()=>React.createElement("svg",{width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{clipPath:"url(#clip0_559_38)"},React.createElement("path",{d:"M7.5 1.875C7.5 1.35732 7.91895 0.9375 8.4375 0.9375H12.1611C12.3135 0.9375 12.4365 0.962695 12.5449 1.00869C12.6299 1.0541 12.7588 1.12119 12.8496 1.20996C12.8496 1.21143 12.8496 1.21289 12.8525 1.21406C13.0342 1.39629 13.0986 1.63418 13.125 1.87207C13.125 1.87324 13.125 1.87412 13.125 1.875V5.625C13.125 6.14355 12.7061 6.5625 12.1875 6.5625C11.6689 6.5625 11.25 6.14355 11.25 5.625V4.13965L6.28711 9.09961C5.9209 9.46582 5.3291 9.46582 4.96289 9.09961C4.59668 8.7334 4.59668 8.1416 4.96289 7.77539L9.92285 2.8125H8.4375C7.91895 2.8125 7.5 2.39268 7.5 1.875ZM0 3.75C0 2.71436 0.839356 1.875 1.875 1.875H4.6875C5.20605 1.875 5.625 2.29482 5.625 2.8125C5.625 3.33105 5.20605 3.75 4.6875 3.75H1.875V12.1875H10.3125V9.375C10.3125 8.85645 10.7314 8.4375 11.25 8.4375C11.7686 8.4375 12.1875 8.85645 12.1875 9.375V12.1875C12.1875 13.2217 11.3467 14.0625 10.3125 14.0625H1.875C0.839356 14.0625 0 13.2217 0 12.1875V3.75Z",fill:"#4A86FB"})),React.createElement("defs",null,React.createElement("clipPath",{id:"clip0_559_38"},React.createElement("rect",{width:"13.125",height:"15",fill:"white"})))),Xt=e=>{const{content:t}=e;return React.createElement("span",{className:"tooltip"},React.createElement(Ue,{overlayClassName:"dashboard-tooltip",placement:"top",content:React.createElement("span",{dangerouslySetInnerHTML:{__html:t}}),trigger:"click"},React.createElement(Aa,null)))},fo=e=>{var n;const{widget:t,onClickLink:a}=e,r=(n=t.page_link)!=null?n:!1;return React.createElement(V,{className:"widget big-number-widget"},React.createElement("p",{className:"title"},React.createElement("span",{className:"widget-value",dangerouslySetInnerHTML:{__html:t.title_html}}),t!=null&&t.tooltip_html?React.createElement(Xt,{content:t.tooltip_html}):null),React.createElement("p",{className:"description"},React.createElement("span",{className:"widget-name",dangerouslySetInnerHTML:{__html:t.description_html}}),r?React.createElement("a",{onClick:()=>a(r),href:"javascript:void(0);"},React.createElement(Jt,null)):null))},_o=e=>{const{widget:t}=e,{dashboard_page:{labels:a,coupons_list_link:r},admin_url:n}=acfwAdminApp,s=[{title:a.coupon,dataIndex:"coupon",key:"coupon",render:(c,o)=>React.createElement("a",{href:"".concat(n,"post.php?post=").concat(o.id,"&action=edit"),target:"_blank",rel:"noreferrer"},c)},{title:a.uses,dataIndex:"usage_total",key:"usage_total"},{title:React.createElement(React.Fragment,null,React.createElement("span",{className:"discounted-label"},a.discounted),t!=null&&t.tooltip_html?React.createElement(Xt,{content:t.tooltip_html}):null),dataIndex:"discount_total",key:"discount_total"}];return React.createElement("div",{className:"widget coupon-table-widget"},React.createElement("div",{className:"widget-header"},React.createElement("h3",{className:"widget-name",dangerouslySetInnerHTML:{__html:t.title_html}}),React.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},React.createElement(Jt,null))),t.table_data&&React.createElement(me,{bordered:!0,dataSource:t.table_data,columns:s,pagination:!1}))},go=e=>{const{widget:t}=e;return React.createElement(V,{className:"widget upsell-widget"},React.createElement("p",{className:"title widget-name",dangerouslySetInnerHTML:{__html:t.title_html}}),React.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:t.description_html}}))},te=function(){return acfwAdminApp.admin_url.replace(location.origin,"")},Zt=e=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e),ho=e=>{let t=window.moment().startOf("month"),a=window.moment().startOf("day");switch(e){case"week_to_date":t=window.moment().startOf("week"),a=window.moment().startOf("day");break;case"month_to_date":t=window.moment().startOf("month"),a=window.moment().startOf("day");break;case"quarter_to_date":t=window.moment().startOf("quarter"),a=window.moment().startOf("day");break;case"year_to_date":t=window.moment().startOf("year"),a=window.moment().startOf("day");break;case"last_week":t=window.moment().subtract(1,"weeks").startOf("week"),a=window.moment().subtract(1,"weeks").endOf("week");break;case"last_month":t=window.moment().subtract(1,"months").startOf("month"),a=window.moment().subtract(1,"months").endOf("month");break;case"last_quarter":t=window.moment().subtract(1,"quarters").startOf("quarter"),a=window.moment().subtract(1,"quarters").endOf("quarter");break;case"last_year":t=window.moment().subtract(1,"years").startOf("year"),a=window.moment().subtract(1,"years").endOf("year");break}return[t,a]};function Ro(e){return e.type==="increase"?"+":"-"}const{setStorePage:So}=le,To=e=>{const{widgets:t,actions:a}=e,r=X(),n=s=>{r.push("".concat(te(),"admin.php?page=").concat(s)),a.setStorePage({data:s})};return t?React.createElement("div",{className:"report-widgets"},t.map(s=>{switch(s.type){case"big_number":return React.createElement(fo,{key:s.key,widget:s,onClickLink:n});case"table":return React.createElement(_o,{key:s.key,widget:s});case"upsell":return React.createElement(go,{key:s.key,widget:s});case"section_title":return React.createElement("h2",{key:s.key,className:"section-title"},s.title_html)}return null})):null},yo=e=>({actions:M({setStorePage:So},e)}),Co=k(null,yo)(To),bo=e=>{const{store_credits_page:{labels:t,period_options:a}}=acfwAdminApp,{className:r,periodValue:n,startPeriod:s,endPeriod:c,onPeriodChange:o,onCustomDateRange:d}=e;return React.createElement("div",{className:"report-date-range-picker ".concat(r)},React.createElement(K,{value:n,onSelect:o},a.map((i,u)=>React.createElement(K.Option,{key:u,value:i.value},i.label))),React.createElement(je.RangePicker,{value:[s,c],onChange:d}))},wo=()=>React.createElement("div",{className:"report-widgets"},[...Array(8)].map((e,t)=>React.createElement(V,{key:t,className:"widget widget-skeleton"},React.createElement(z,{active:!0})))),De=e=>{const{iconKey:t}=e;return t==="getting_started"?React.createElement(Bt,null):t==="documentation"?React.createElement($a,null):t==="settings"?React.createElement(Ut,null):t==="support"?React.createElement(Fe,null):t==="active"?React.createElement(ka,null):t==="inactive"?React.createElement(Ma,null):t==="expired"?React.createElement(xa,null):t==="learn_more"?React.createElement(jt,null):null},Ao=e=>{const{slug:t,label:a,link:r,onClick:n}=e;return r.includes("http")?React.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},React.createElement(De,{iconKey:t}),a):React.createElement("a",{onClick:()=>n&&n(r),href:"javascript:void(0);"},React.createElement(De,{iconKey:t}),a)},vo=e=>{const{name:t,campaign:a,status:r}=e,{dashboard_page:{labels:n}}=acfwAdminApp;let s;if(r==="learn_more"){const c="https://advancedcouponsplugin.com/pricing/?tab=premium&utm_source=acfwf&utm_medium=dashboard&utm_campaign=".concat(a);s='<a class="'.concat(r,'" href="').concat(c,'" target="_blank" href="javascript:void(0);">').concat(n[r],"</a>")}else s='<span class="plugin-status '.concat(r,'">').concat(n[r],"</span>");return React.createElement(React.Fragment,null,React.createElement(De,{iconKey:r}),React.createElement("span",{className:"plugin-name",dangerouslySetInnerHTML:{__html:"".concat(t," (").concat(s,")")}}))},{setStorePage:Oo}=le,No=te(),Po=e=>{const{actions:t}=e,a=X(),[r,n]=p.useState([]),[s,c]=p.useState(!0),{dashboard_page:{labels:o,resources_links:d}}=acfwAdminApp;p.useEffect(()=>{x.get("coupons/v1/reports/license").then(u=>{n(u.data),c(!1)})},[]);const i=u=>{a.push("".concat(No,"admin.php?page=").concat(u)),t.setStorePage({data:u})};return React.createElement("div",{className:"sidebar-inner"},React.createElement(_e,{className:"resources-section sidebar-section",header:React.createElement("h2",null,"".concat(o.helpful_resources,":")),dataSource:d,renderItem:u=>React.createElement(_e.Item,{key:u.key},React.createElement(Ao,{...u,onClick:i}))}),React.createElement(_e,{className:"plugins-section sidebar-section",header:React.createElement("h2",null,"".concat(o.license_activation_status,":")),loading:s,dataSource:r,renderItem:u=>React.createElement(_e.Item,{key:u.key},React.createElement(vo,{...u}))}),React.createElement("p",{className:"view-licenses"},React.createElement("a",{onClick:()=>i("acfw-license")},o.view_licenses)))},Do=e=>({actions:M({setStorePage:Oo},e)}),Io=k(null,Do)(Po);const{readDashboardWidgetsData:$o}=Qt,ko=e=>{const{widgets:t,actions:a}=e,[r,n]=p.useState("month_to_date"),[s,c]=p.useState(window.moment().startOf("month")),[o,d]=p.useState(window.moment().startOf("day")),[i,u]=p.useState(!1),{dashboard_page:{title:f}}=acfwAdminApp;p.useEffect(()=>{u(!0),we("dashboardwidgets"),a.readDashboardWidgetsData({startPeriod:s.format("YYYY-MM-DD"),endPeriod:o.format("YYYY-MM-DD"),successCB:()=>u(!1)})},[s,o]);const _=C=>{if(C===r)return;const[R,S]=ho(C);n(C),c(R),d(S)},g=C=>{var R,S;C&&(c((R=C[0])!=null?R:""),d((S=C[1])!=null?S:""),n("custom"))};return React.createElement("div",{className:"dashboard-page"},React.createElement(se,{title:f,className:"dashboard-header"}),React.createElement(H,{gutter:16},React.createElement(O,{className:"dashboard-content",span:18},React.createElement(Eo,null),React.createElement(oo,null),React.createElement(bo,{periodValue:r,startPeriod:s,endPeriod:o,onPeriodChange:_,onCustomDateRange:g}),i?React.createElement(wo,null):React.createElement(Co,{widgets:t})),React.createElement(O,{className:"dashboard-sidebar",span:6},React.createElement(Io,null))))},Mo=e=>({widgets:e.dashboardWidgets}),xo=e=>({actions:M({readDashboardWidgetsData:$o},e)}),Lo=k(Mo,xo)(ko);const{readStoreCreditsDashboardData:Bo}=Wt,Uo=e=>{const{status:t,actions:a}=e,{store_credits_page:{labels:r,period_options:n}}=acfwAdminApp,[s,c]=p.useState(!1),[o,d]=p.useState("month_to_date"),[i,u]=p.useState(window.moment().startOf("month")),[f,_]=p.useState(window.moment().startOf("day")),g=[{title:r.statistics,dataIndex:"label",key:"label"},{title:r.amount,dataIndex:"amount",key:"amount"}];p.useEffect(()=>{c(!0),we("scdashboard"),a.readDashboardData({startPeriod:i.format("YYYY-MM-DD"),endPeriod:f.format("YYYY-MM-DD"),successCB:()=>c(!1)})},[i,f]);const C=S=>{switch(d(S),S){case"week_to_date":u(window.moment().startOf("week")),_(window.moment().startOf("day"));break;case"month_to_date":u(window.moment().startOf("month")),_(window.moment().startOf("day"));break;case"quarter_to_date":u(window.moment().startOf("quarter")),_(window.moment().startOf("day"));break;case"year_to_date":u(window.moment().startOf("year")),_(window.moment().startOf("day"));break;case"last_week":u(window.moment().subtract(1,"weeks").startOf("week")),_(window.moment().subtract(1,"weeks").endOf("week"));break;case"last_month":u(window.moment().subtract(1,"months").startOf("month")),_(window.moment().subtract(1,"months").endOf("month"));break;case"last_quarter":u(window.moment().subtract(1,"quarters").startOf("quarter")),_(window.moment().subtract(1,"quarters").endOf("quarter"));break;case"last_year":u(window.moment().subtract(1,"years").startOf("year")),_(window.moment().subtract(1,"years").endOf("year"));break}},R=S=>{u(S[0]),_(S[1]),d("custom")};return React.createElement(React.Fragment,null,React.createElement("div",{className:"store-credits-period-selector"},React.createElement(K,{value:o,onSelect:C},n.map(S=>React.createElement(K.Option,{value:S.value},S.label))),React.createElement(je.RangePicker,{value:[i,f],onChange:R})),React.createElement(V,{title:r.status},React.createElement(me,{loading:s,pagination:!1,dataSource:t,columns:g})))},jo=e=>({status:e.storeCreditsDashboard}),Fo=e=>({actions:M({readDashboardData:Bo},e)}),Go=k(jo,Fo)(Uo),Ho=(e,t)=>{switch(t.type){case"SET_PAGE":return{...e,page:t.value};case"SET_PER_PAGE":return{...e,per_page:t.value};case"SET_SEARCH":return{...e,search:t.value,page:1};case"SET_SORT_BY":return{...e,sort_by:t.value};case"SET_SORT_ORDER":return{...e,sort_order:t.value};case"SET_META_KEY":return{...e,meta_key:t.value};case"SET_QUERY":return t.value}return e},ea=p.createContext({params:{page:1},dispatchParams:e=>{}}),Vo=({children:e})=>{const t={page:1},[a,r]=p.useReducer(Ho,t);return React.createElement(ea.Provider,{value:{params:a,dispatchParams:r}},e)},qo=e=>{const{status:t}=e,[a,r]=p.useState(!0),{store_credits_page:{labels:n}}=acfwAdminApp,s=[{title:n.statistics,dataIndex:"label",key:"label"},{title:n.amount,dataIndex:"amount",key:"amount"}];return p.useEffect(()=>{t&&t.length?r(!1):r(!0)},[t,r]),React.createElement(V,{className:"customer-status",title:n.status},React.createElement(me,{loading:a,pagination:!1,dataSource:t,columns:s}))},Yo=e=>{const{sources:t}=e,{store_credits_page:{labels:a}}=acfwAdminApp,r=[{title:a.source,dataIndex:"label",key:"label"},{title:a.amount,dataIndex:"amount",key:"amount"}];return React.createElement(V,{className:"customer-sources",title:a.sources},React.createElement(me,{loading:!t||!t.length,pagination:!1,dataSource:t,columns:r}))},zo=e=>{const{entries:t,total:a,loadEntries:r,loaded:n}=e,{store_credits_page:{labels:s}}=acfwAdminApp,[c,o]=p.useState(1),d=[{title:s.date,dataIndex:"date",key:"date"},{title:s.activity,dataIndex:"activity",key:"activity"},{title:s.amount,dataIndex:"amount",key:"amount",render:(u,f)=>"".concat(Ro(f)).concat(u)},{title:s.related,dataIndex:"rel_label",key:"rel_label",render:(u,f)=>f.rel_link?React.createElement("a",{href:f.rel_link,target:"_blank"},u):u}],i=u=>{o(u),r(u)};return React.createElement(V,{className:"customer-entries",title:s.history},React.createElement(me,{loading:!n,columns:d,dataSource:t,pagination:!1}),0<a&&React.createElement(Ge,{defaultCurrent:c,current:c,hideOnSinglePage:!0,disabled:!t||!t.length,total:a,pageSize:10,showSizeChanger:!1,onChange:i}))},{readStoreCreditsCustomerStatus:Ko,readStoreCreditsCustomerEntries:Wo}=fe,Qo=e=>{var S,v;const{customer:t,setCustomer:a,actions:r}=e,[n,s]=p.useState((S=t==null?void 0:t.status)!=null?S:[]),[c,o]=p.useState((v=t==null?void 0:t.sources)!=null?v:[]),[d,i]=p.useState([]),[u,f]=p.useState(0),[_,g]=p.useState(!1),C=(D=1)=>{t!=null&&t.id&&(g(!1),r.readStoreCreditsCustomerEntries({id:t==null?void 0:t.id,page:D,successCB:A=>{i(A.data),f(A.headers["x-total"]),g(!0)}}))},R=()=>{a(null),o([]),i([])};return p.useEffect(()=>{if(!(t!=null&&t.id)){s([]),o([]),i([]),f(0);return}r.readStoreCreditsCustomerStatus({id:t==null?void 0:t.id,successCB:D=>{s(D.data.status),o(D.data.sources)}}),C()},[t]),t?React.createElement(Ee,{width:1100,visible:!window.lodash.isNull(t),footer:!1,onCancel:()=>R(),onOk:()=>R()},React.createElement("h2",null,"".concat(t.first_name," ").concat(t.last_name," Stats")),React.createElement(H,{gutter:16},React.createElement(O,{span:12},React.createElement(qo,{status:n})),React.createElement(O,{span:12},React.createElement(Yo,{sources:c}))),React.createElement(ne,null),React.createElement(zo,{entries:d,total:u,loadEntries:C,loaded:_})):null},Jo=e=>({actions:M({readStoreCreditsCustomerStatus:Ko,readStoreCreditsCustomerEntries:Wo},e)}),Xo=k(null,Jo)(Qo);function Zo({precision:e=null,decimalSeparator:t=".",thousandSeparator:a=","},r){if(window.lodash.isNull(e)){const[,d]=r.toString().split(".");e=d?d.length:0}let n=r.toFixed(e),[s,c]=n.split(".");const o=/(\d+)(\d{3})/;for(;o.test(s);)s=s.replace(o,"$1"+a+"$2");return"".concat(s).concat(t).concat(c)}function el(e,t=!1){const{currency:a}=acfwAdminApp.store_credits_page,r={precision:a.decimals,decimalSeparator:a.decimal_separator,thousandSeparator:a.thousand_separator},n=Zo(r,e);return n===""?n:"".concat(a.symbol).concat(n)}function tl(e){const{currency:t}=acfwAdminApp.store_credits_page,a=new RegExp("[^-0-9%\\".concat(t.decimal_separator,"]+"),"gi"),r=new RegExp("[^\\".concat(t.decimal_separator,'"]'),"gi");let n=e.replace(a,"");1<n.replace(r,"").length&&(n=n.replace(r,""));const s=parseFloat(n.replace(t.decimal_separator,"."));return e===n&&s>0}function Re(e){const{currency:t}=acfwAdminApp.store_credits_page;return parseFloat(e.replace(t.decimal_separator,"."))}const{adjustCustomerStoreCredits:al,setStoreCreditsCustomerBalance:nl}=fe,rl=e=>{const{customer:t,setAdjustCustomer:a,actions:r}=e,{adjust_modal:n,currency:s}=acfwAdminApp.store_credits_page,[c,o]=p.useState(!1),[d,i]=p.useState("increase"),[u,f]=p.useState(""),[_,g]=p.useState(""),C=()=>{if(t){if(!tl(u)){Y.error(n.invalid_price);return}o(!0),r.adjustCustomerStoreCredits({id:t==null?void 0:t.id,type:d,amount:Re(u),successCB:R=>{o(!1),Y.success(R.data.message),r.setStoreCreditsCustomerBalance({id:t==null?void 0:t.id,balance:R.data.balance,balance_raw:R.data.balance_raw}),a(null),f(""),i("increase")},failCB:({error:R})=>{o(!1),Y.error(R.response.data.message)}})}};return p.useEffect(()=>{if(!t||!u){g("");return}const R=d==="increase"?t.balance_raw+Re(u):t.balance_raw-Re(u);g(el(Math.max(0,R)))},[t,u,d]),t?React.createElement("div",{className:"adjust-store-credits"},React.createElement("h2",null,n.title),React.createElement("p",{className:"description"},n.description),React.createElement("h3",{className:"current-balance"},n.current_balance.replace("{balance}",t.balance)),React.createElement("div",{className:"adjust-store-credits-form"},React.createElement(K,{value:d,onSelect:R=>i(R)},React.createElement(K.Option,{value:"increase"},n.increase),React.createElement(K.Option,{value:"decrease"},n.decrease)),React.createElement(Q,{value:u,onChange:R=>f(R.target.value),addonBefore:s.symbol,allowClear:!0})),_?React.createElement("h3",{className:"new-balance",dangerouslySetInnerHTML:{__html:n.new_balance.replace("{balance}","<span>".concat(_,"</span>"))}}):null,React.createElement(P,{className:"make-adjustment-btn",type:"primary",size:"large",loading:c,onClick:C},n.make_adjustment)):null},sl=e=>({actions:M({adjustCustomerStoreCredits:al,setStoreCreditsCustomerBalance:nl},e)}),cl=k(null,sl)(rl),ol=e=>{var S,v,D,A,y,w;const{store_credits_page:{rest_url:t,labels:a,nonce:r}}=acfwAdminApp,{customer:n}=e,[s,c]=p.useState(!1),[o,d]=p.useState(!1),[i,u]=Y.useMessage(),f=()=>{c(!0)},_=()=>{let T="".concat(acfwAdminApp.admin_url,"admin-ajax.php?action=acfwp_store_credit_reminder_preview_email");return T+=n!=null&&n.first_name&&(n!=null&&n.last_name)?"&args[name]=".concat(n==null?void 0:n.first_name," ").concat(n==null?void 0:n.last_name):"",T+=n!=null&&n.email?"&args[email]=".concat(n==null?void 0:n.email):"",T+=n!=null&&n.id?"&args[user_id]=".concat(n==null?void 0:n.id):"",T+="&_wpnonce=".concat(r==null?void 0:r.preview),T},g=()=>{c(!1)},C=()=>{c(!1),window.open(_())},R=()=>{d(!0);const T=()=>{d(!1),c(!1)};jQuery.ajax({type:"GET",url:t,data:{user_id:n==null?void 0:n.id},success:function(I){var G,m,E,h;!I.status||I.status==="error"?i.open({type:"error",content:"".concat((m=(G=a==null?void 0:a.modal)==null?void 0:G.error)==null?void 0:m.heading,": ").concat(I==null?void 0:I.message)}):i.open({type:"success",content:React.createElement(React.Fragment,null,(h=(E=a==null?void 0:a.modal)==null?void 0:E.success)==null?void 0:h.text,n!=null&&n.email?" <".concat(n==null?void 0:n.email,">."):"")}),T()},error:function(I,G,m){var E,h,N;(E=I==null?void 0:I.responseJSON)!=null&&E.message&&(m=I.responseJSON.message),i.open({type:"error",content:"".concat((N=(h=a==null?void 0:a.modal)==null?void 0:h.error)==null?void 0:N.heading,": ").concat(m)}),T()}})};return a!=null&&a.remind?React.createElement(React.Fragment,null,u,React.createElement(P,{onClick:f},a.remind),React.createElement(Ee,{title:(S=a==null?void 0:a.modal)==null?void 0:S.heading,className:"acfw-modal send-a-reminder-modal",width:500,open:s,onCancel:g,footer:[React.createElement(P,{key:"preview",className:"action-preview",onClick:C,"data-url":_()},(D=(v=a==null?void 0:a.modal)==null?void 0:v.button)==null?void 0:D.preview),React.createElement(P,{key:"send",className:"action-send",type:"primary",onClick:R,disabled:o},o?"".concat(a==null?void 0:a.loading,"..."):(y=(A=a==null?void 0:a.modal)==null?void 0:A.button)==null?void 0:y.send)]},React.createElement("p",null,(w=a==null?void 0:a.modal)==null?void 0:w.text),React.createElement("p",null,n==null?void 0:n.first_name," ",n==null?void 0:n.last_name,n!=null&&n.email?" <".concat(n==null?void 0:n.email,">"):""))):null};const{readStoreCreditsCustomers:ll,adjustCustomerStoreCredits:il}=fe,ul=e=>{var T;const{customers:t,actions:a}=e,{store_credits_page:{labels:r}}=acfwAdminApp,{params:n,dispatchParams:s}=p.useContext(ea),[c,o]=p.useState(!1),[d,i]=p.useState(0),[u,f]=p.useState(n.search),[_,g]=p.useState(null),[C,R]=p.useState(null),[S,v]=p.useState(null),D=[{title:r.customer_name,dataIndex:"first_name",key:"first_name",sorter:!0,render:(I,G)=>"".concat(G.first_name," ").concat(G.last_name)},{title:r.email,dataIndex:"email",key:"email",sorter:!0},{title:r.balance,dataIndex:"balance",key:"balance",sorter:!0},{title:"",dataIndex:"id",key:"id",render:(I,G)=>React.createElement(React.Fragment,null,React.createElement(P,{onClick:()=>R(G)},r.view_stats),React.createElement(P,{onClick:()=>v(G)},r.adjust),React.createElement(ol,{customer:G}))}],A=I=>{f(I),_&&(we("customer_search"),clearTimeout(_)),g(setTimeout(()=>s({type:"SET_SEARCH",value:I}),1e3))},y=I=>{s({type:"SET_PAGE",value:I})},w=(I,G,m)=>{if(m.columnKey){switch(m.columnKey){case"first_name":s({type:"SET_META_KEY",value:"billing_first_name"}),s({type:"SET_SORT_BY",value:"meta_value"});break;case"balance":s({type:"SET_META_KEY",value:"acfw_store_credit_balance"}),s({type:"SET_SORT_BY",value:"meta_value_num"});break;default:s({type:"SET_SORT_BY",value:m.columnKey});break}s({type:"SET_SORT_ORDER",value:m.order==="descend"?"desc":"asc"})}};return p.useEffect(()=>{o(!0),a.readCustomers({params:n,successCB:I=>{i(I.headers["x-total"]),o(!1)}})},[n]),React.createElement(React.Fragment,null,React.createElement(V,{title:r.customers_list},React.createElement("div",{className:"customer-search"},React.createElement("label",null,r.search_label),React.createElement(Q.Search,{allowClear:!0,value:u,onChange:I=>A(I.target.value)})),React.createElement(me,{className:"customers-list-table",loading:c,pagination:!1,dataSource:t,columns:D,onChange:w}),0<d&&React.createElement(Ge,{className:"customers-list-pagination",defaultCurrent:n.page,current:n.page,hideOnSinglePage:!0,disabled:c,total:d,pageSize:(T=n.per_page)!=null?T:10,showSizeChanger:!1,onChange:y})),React.createElement(Xo,{customer:C,setCustomer:R}),React.createElement(Ee,{width:500,visible:!window.lodash.isNull(S),footer:!1,onCancel:()=>v(null),onOk:()=>v(null)},React.createElement(cl,{customer:S,setAdjustCustomer:v})))},ml=e=>({customers:e.storeCreditsCustomers}),dl=e=>({actions:M({readCustomers:ll,adjustCustomerStoreCredits:il},e)}),pl=k(ml,dl)(ul),El=e=>{const{slug:t}=e,{img_path:a}=acfwAdminApp.uncanny_automator;let r,n="";switch(t){case"woocommerce":r="woo-logo.png",n="WooCommerce";break;case"twilio":r="twilio-logo.png",n="Twilio";break;case"google_sheets":r="gsheets-logo.png",n="Google Sheets";break;default:r="Advanced-Coupons-Icon-WC-Marketing.png",n="Advanced Coupon";break}return React.createElement("div",{className:"icon-text ".concat(t)},React.createElement("img",{src:"".concat(a).concat(r)}),React.createElement("span",null,n))},ta=e=>{const{pluginSlug:t,className:a,type:r,size:n,text:s,successMessage:c,nonce:o,afterInstall:d}=e,[i,u]=p.useState(!1),f=()=>{u(!0),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"acfw_install_activate_plugin",plugin_slug:t,nonce:o}}).done(_=>{u(!1),_!=null&&_.success&&!_.success?Y.error(_.data):(typeof d=="function"&&d(),Y.success(c))}).fail(_=>{Y.error(_.responseJSON.data)})};return React.createElement(P,{className:a,type:r,size:n,loading:i,onClick:f},s)};const fl=()=>{const{logo:e,main_content:t,action_text:a,action_url:r,is_plugin_active:n,nonce:s,labels:c,triggers_actions:o,sample_automations:d}=acfwAdminApp.uncanny_automator,[i,u]=p.useState(!!n);return React.createElement("div",{className:"store-credit-automations"},React.createElement("div",{className:"store-credit-automations__inner"},React.createElement("div",{className:"store-credit-automations__header"},React.createElement("img",{src:e}),React.createElement("p",{dangerouslySetInnerHTML:{__html:t}}),i?React.createElement(P,{className:"main-cta-btn",type:"primary",size:"large",href:r,icon:React.createElement(va,null)},c.add_new_recipe):React.createElement(ta,{pluginSlug:"uncanny-automator",className:"main-cta-btn",type:"primary",size:"large",text:a,nonce:s,successMessage:c.success_message,afterInstall:()=>u(!0)})),React.createElement("div",{className:"triggers-actions"},React.createElement(H,{gutter:16},o.map((f,_)=>React.createElement(O,{key:_,span:12},React.createElement(V,null,React.createElement("span",{className:"trigger-action__type"},f.type," ",f.is_pro&&React.createElement(He,{color:"#1393A6"},c.pro)),React.createElement("span",{className:"trigger-action__desc"},f.desc)))))),React.createElement(ne,null),React.createElement("div",{className:"sample-automations"},React.createElement("p",null,c.sample_automations),React.createElement(H,{gutter:16},d.map((f,_)=>React.createElement(O,{key:_,span:8},React.createElement(V,{bordered:!1},React.createElement("h3",null,f.title),React.createElement("p",null,c.requires),React.createElement("ul",null,f.requires.map((g,C)=>React.createElement("li",{key:C},React.createElement(El,{slug:g})))))))))))};const _l=e=>{const{tabKey:t}=e;switch(t){case"dashboard":return React.createElement(Go,null);case"customers":return React.createElement(Vo,null,React.createElement(pl,null));case"automations":return React.createElement(fl,null)}return null},gl=()=>{var c;const{store_credits_page:{title:e,tabs:t}}=acfwAdminApp,a=X(),n=(c=new URLSearchParams(oe().search).get("tab"))!=null?c:"dashboard",s=o=>{a.push("".concat(te(),"admin.php?page=acfw-store-credits&tab=").concat(o))};return React.createElement("div",{className:"store-credits-page"},React.createElement(se,{title:e,className:"store-credits-header"}),React.createElement(ce,{defaultActiveKey:n,onTabClick:s},t.map(o=>React.createElement(ce.TabPane,{tab:o.label,key:o.key},React.createElement(_l,{tabKey:o.key})))))};const ft=e=>{const{section:t}=e;switch(t){case"modules_section":return React.createElement(za,null);case"general_section":return React.createElement(Ut,null);case"checkout_section":return React.createElement(Ya,null);case"bogo_deals_section":return React.createElement(qa,null);case"scheduler_section":return React.createElement(Va,null);case"role_restrictions_section":return React.createElement(Ha,null);case"url_coupons_section":return React.createElement(Ga,null);case"store_credits_section":return React.createElement(Fa,null);case"advanced_section":return React.createElement(Bt,null);case"help_page":return React.createElement(ja,null);case"license_page":return React.createElement(jt,null);case"premium_upgrade":return React.createElement(Ua,null);case"loyalty_program_section":case"loyalty_program":return React.createElement(Ba,null);case"advanced_gift_cards":return React.createElement(La,null)}return null},{setStorePage:hl}=le,_t=te(),Rl=e=>{const{sections:t,currentSection:a,actions:r}=e,{app_pages:n}=acfwAdminApp,s=a||"general_section",c=X();if(t.length<1)return l.createElement("div",{className:"settings-nav-skeleton"},l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}));const o=u=>{c.push("".concat(_t,"admin.php?page=").concat(u)),r.setStorePage({data:u})},d=t.filter(({show:u})=>u),i=["acfw-settings","acfw-about","acfw-store-credits"];return l.createElement(Oe,{className:"acfw-settings-nav",defaultSelectedKeys:[s]},d.map(({id:u,title:f})=>l.createElement(Oe.Item,{key:u},l.createElement(yt,{to:"".concat(_t,"admin.php?page=acfw-settings&section=").concat(u)},l.createElement(ft,{section:u}),f))),n.filter(({slug:u})=>!i.includes(u)).map(({slug:u,label:f,page:_})=>l.createElement(Oe.Item,{key:_,className:_},l.createElement("button",{className:"buttonlink",onClick:()=>o(u)},l.createElement(ft,{section:_}),f))))},Sl=e=>({sections:e.sections}),Tl=e=>({actions:M({setStorePage:hl},e)}),yl=k(Sl,Tl)(Rl),Cl=e=>{const{classname:t,title:a,description:r,button_text:n,image:s,nonce:c,success_message:o}=e.noticeData;return React.createElement("p",{className:"acfw-dyk-notice acfw-funnelkit-upsell-notice ".concat(t)},!!s&&React.createElement("img",{src:s}),React.createElement("span",{className:"title"},a),React.createElement("br",null),React.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:r}}),React.createElement("span",{className:"button-wrap"},React.createElement(ta,{pluginSlug:"funnel-builder",className:"install-funnelkit-btn",type:"primary",size:"middle",text:n,nonce:c,successMessage:o,afterInstall:()=>window.location.href="".concat(acfwAdminApp.admin_url,"admin.php?page=bwf")})))};const aa=p.createContext({showModal:!1,setShowModal:e=>{}}),bl=e=>{const{data:{title:t,content:a,buttonTxt:r},showModal:n,setShowModal:s}=e,c=X(),o=te(),d=()=>{c.push("".concat(o,"admin.php?page=acfw-premium"))};return l.createElement(Ee,{className:"acfw-upsell-modal",centered:!0,width:600,visible:n,onCancel:()=>s(!1),footer:null},l.createElement(Ka,null),l.createElement("h2",null,t),a.map(i=>l.createElement("p",null,i)),l.createElement(P,{type:"primary",onClick:d},r))},wl=e=>{const{children:t}=e,[a,r]=p.useState(!1);return l.createElement(aa.Provider,{value:{showModal:a,setShowModal:r}},t,acfwAdminApp!=null&&acfwAdminApp.upsellModal?l.createElement(bl,{data:acfwAdminApp==null?void 0:acfwAdminApp.upsellModal,showModal:a,setShowModal:r}):null)},Al=e=>{const{id:t}=e.field,a=p.useContext(aa);return l.createElement(xt,{key:t,checked:!1,defaultChecked:!1,onChange:()=>a.setShowModal(!0)})},{updateSetting:vl,setStoreSettingItem:Ol}=J,{action_notices:gt}=acfwAdminApp,Nl=e=>{const{field:t,setShowSpinner:a,validateInput:r,value:n,actions:s,order:c}=e,{id:o,title:d,type:i,placeholder:u,default:f,suffix:_,format:g,min:C,max:R}=t,[S,v]=p.useState(null),D=n!==void 0&&n!==!1?n:f,A=(y,w=!1)=>{const T=()=>{r(y)&&(s.setStoreSettingItem({data:{id:o,value:y}}),s.updateSetting({data:{id:o,value:y,type:i},processingCB:()=>a(!0),successCB:()=>{Y.success(l.createElement(l.Fragment,null,l.createElement("strong",null,t.title)," ",gt.success)),a(!1)},failCB:()=>{Y.error(l.createElement(l.Fragment,null,l.createElement("strong",null,t.title)," ",gt.fail)),a(!1)}}))};w?(S&&(clearTimeout(S),v(null)),v(setTimeout(T,1e3))):T()};if(i==="checkbox"||i==="module")return l.createElement(xt,{key:o,checked:D==="yes",defaultChecked:D==="yes",onChange:y=>A(y?"yes":"")});if(i==="premiummodule")return l.createElement(Al,{field:t});if(i==="textarea")return l.createElement(Q.TextArea,{key:o,rows:3,placeholder:u,defaultValue:D,onChange:y=>A(y.target.value,!0)});if(i==="radio"){const{options:y}=t;return l.createElement(at.Group,{onChange:w=>A(w.target.value),value:D},l.createElement(ge,{direction:"vertical"},(y==null?void 0:y.length)&&y.map(({key:w,label:T})=>l.createElement(at,{key:w.toString(),value:w.toString()},T))))}if(i==="select"){let{options:y}=t,w=y||[];return w=w.map(T=>T.label.label?T.label:{value:T.key,label:T.label}),l.createElement(K,{key:o,defaultValue:D.toString(),style:{width:"50%"},placeholder:u,options:w,onSelect:T=>A(T)})}if(i==="timepicker"){let y=g||"HH:mm:ss",w=D||t.default;return w=w||"00:00:00",w=window.moment(w,y),l.createElement(Oa,{key:o,defaultValue:w,format:y,onChange:T=>A(T.format("HH:mm:ss"))})}if(["text","url","permalink","customurl"].indexOf(i)>-1){let y=["permalink","customurl"];return l.createElement(Q,{key:o,type:y.indexOf(i)>-1?"text":i,name:o,placeholder:u,defaultValue:D,onChange:w=>A(w.target.value,!0),suffix:_})}if(i==="number")return console.log(C,R),l.createElement(Ve,{key:o,name:o,placeholder:u,defaultValue:D,onChange:y=>A(y,!0),min:C!=null?C:void 0,max:R!=null?R:void 0});if(i==="price")return l.createElement(Q,{type:"text",className:"wc_input_price",name:o,placeholder:u,defaultValue:D,onChange:y=>A(y.target.value,!0)});if(i==="acfwflicense"){const{licenseContent:y}=t;return l.createElement("div",{className:"acfw-license-field"},y==null?void 0:y.map(w=>l.createElement("p",{dangerouslySetInnerHTML:{__html:w}})))}return i==="subtitle"?l.createElement("div",{className:"form-heading ".concat(c>0?"spacer":"")},l.createElement("h3",null,d)):null},Pl=(e,t)=>{const{id:a}=t.field,r=e.settingValues.findIndex(s=>s.id===a);return{value:r>-1?e.settingValues[r].value:""}},Dl=e=>({actions:M({updateSetting:vl,setStoreSettingItem:Ol},e)}),ht=k(Pl,Dl)(Nl),{Text:Rt}=Lt,Il=e=>{const{field:t}=e,{id:a,title:r,type:n,desc:s,desc_tip:c}=t,{validation:o}=acfwAdminApp,[d,i]=p.useState(!1),[u,f]=p.useState(!1),_=c?l.createElement("div",{className:"setting-tooltip-content"},c):null;if(n==="title")return l.createElement("div",{className:"form-heading"},l.createElement("h1",null,r),l.createElement("p",null,s));if(n==="notice"&&(t!=null&&t.noticeData)){const{classname:S,title:v,description:D,button_text:A,button_link:y,button_class:w,image:T}=t==null?void 0:t.noticeData;return l.createElement("p",{className:"acfw-dyk-notice ".concat(S)},!!T&&l.createElement("img",{src:T}),l.createElement("span",{className:"title"},v),l.createElement("br",null),l.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:D}}),A&&y?l.createElement("a",{className:"acfw-button ".concat(w),href:y,rel:"noreferrer noopener",target:"_blank"},A):null)}if(n==="funnelkit_upsell"&&(t!=null&&t.noticeData))return l.createElement(Cl,{noticeData:t==null?void 0:t.noticeData});if(n==="sectionend")return null;const g=S=>S&&n==="url"&&!Zt(S+"")?(f(!0),!1):(f(!1),!0),C=()=>l.createElement(l.Fragment,null,l.createElement(O,{span:8,className:"setting-title-column"},l.createElement("label",null,l.createElement("strong",null,r),n==="premiummodule"?l.createElement(l.Fragment,null,l.createElement("br",null),l.createElement(He,{className:"premium-tag"},"Premium")):null),c?l.createElement(Ue,{placement:"right",content:_,trigger:"click"},l.createElement(Fe,{className:"setting-tooltip-icon"})):null),l.createElement(O,{className:"setting-field-column",span:16},l.createElement(ht,{field:t,setShowSpinner:i,validateInput:g}),d?l.createElement(pe,{indicator:l.createElement(nt,{style:{fontSize:24},spin:!0})}):null,l.createElement("div",{className:"invalid-input".concat(u?" show":"")},u?l.createElement(Rt,{type:"danger"},o[n]?o[n]:o.default):null),s?l.createElement("p",{dangerouslySetInnerHTML:{__html:s}}):null)),R=()=>l.createElement(l.Fragment,null,l.createElement(O,{className:"setting-field-column"},l.createElement(ht,{field:t,setShowSpinner:i,validateInput:g}),d?l.createElement(pe,{indicator:l.createElement(nt,{style:{fontSize:24},spin:!0})}):null,l.createElement("div",{className:"invalid-input".concat(u?" show":"")},u?l.createElement(Rt,{type:"danger"},o[n]?o[n]:o.default):null),s?l.createElement("p",{dangerouslySetInnerHTML:{__html:s}}):null));return l.createElement(H,{gutter:16,className:"form-control",id:"".concat(a,"_field"),key:a},l.createElement(ne,null),n==="subtitle"?l.createElement(R,null):l.createElement(C,null))};const Je=e=>{var E,h;const{className:t,showSubtitle:a,showTag:r}=e,{free_guide:{show:n,tag:s,title:c,subtitle:o,content:d,image:i,button:u,list:f,field_values:_,placeholders:g,form_nonce:C,missing_form_fields:R,failed_form_error:S}}=acfwAdminApp,[v,D]=p.useState((E=_.name)!=null?E:""),[A,y]=p.useState((h=_.email)!=null?h:""),[w,T]=p.useState(!1),[I,G]=p.useState(n),m=async N=>{if(N.preventDefault(),!v||!A){Y.error(R);return}T(!0);const j=new Date,b=new FormData;b.append("action","acfwf_get_free_training_guide"),b.append("name",v),b.append("email",A),b.append("title",document.title),b.append("url",window.location.href),b.append("referrer",document.referrer),b.append("timestamp",j.getTime().toString()),b.append("nonce",C);try{const Z=await(await fetch(ajaxurl,{method:"post",body:b})).json();Z.status==="success"?(Y.success(Z.message),acfwAdminApp.free_guide.show=!1,G(!1)):Y.error(Z.error_msg)}catch(ie){Y.error(S)}T(!1)};return I?l.createElement("div",{className:"coupons-free-guide ".concat(t)},l.createElement("div",{className:"inner"},l.createElement("form",{onSubmit:m},r?l.createElement(He,{color:"#1693A7"},s):null,l.createElement("h2",null,c),l.createElement("img",{src:i,alt:c}),a?l.createElement("h3",null,o):null,l.createElement("p",{dangerouslySetInnerHTML:{__html:d}}),l.createElement("ul",null,f.map((N,j)=>l.createElement("li",{key:j},l.createElement(Wa,null),N))),l.createElement("p",{className:"form-fields"},l.createElement(Q,{value:v,onChange:N=>D(N.target.value),placeholder:g.name}),l.createElement(Q,{value:A,type:"email",onChange:N=>y(N.target.value),placeholder:g.email})),l.createElement("p",{className:"form-actions"},l.createElement(P,{type:"link",htmlType:"submit",className:"cta",size:"large",loading:w},u.text))))):null};Je.defaultProps={className:"",showSubtitle:!1,showTag:!0};const $l=e=>{const{sections:t,settingValues:a,currentSection:r}=e,n=r?t.findIndex(o=>o.id===r):0,s=t.length?t[n].id:"",c=t.length?t[n].fields:[];return c.length<1||a.length<1?l.createElement(l.Fragment,null,l.createElement(z,{loading:!0,active:!0,paragraph:{rows:1}}),l.createElement(ne,null),l.createElement(z,{loading:!0,active:!0,paragraph:{rows:2},title:!1}),l.createElement(ne,null),l.createElement(z,{loading:!0,active:!0,paragraph:{rows:2},title:!1}),l.createElement(ne,null),l.createElement(z,{loading:!0,active:!0,paragraph:{rows:2},title:!1})):l.createElement(wl,null,l.createElement("div",{className:"settings-form ".concat(s,"-form")},c.map(o=>l.createElement(Il,{key:o.id,field:o})),!r||r==="general_section"?l.createElement(l.Fragment,null,l.createElement(ne,null),l.createElement(Je,null)):null))},kl=e=>({sections:e.sections,settingValues:e.settingValues}),Ml=e=>({actions:M({},e)}),xl=k(kl,Ml)($l),{readSections:Ll,readSection:Bl}=be,Ul=e=>{const{sections:t,actions:a}=e,n=new URLSearchParams(oe().search).get("section");return p.useEffect(()=>{t.length>0||a.readSections({id:n})},[a]),p.useEffect(()=>{if(t.length<1)return;const s=n?t.findIndex(c=>c.id===n):0;t[s].fields.length<1&&a.readSection({id:n})},[t,a,n]),l.createElement(l.Fragment,null,l.createElement(se,{title:acfwAdminApp.title,description:acfwAdminApp.desc,className:"settings-header"}),l.createElement(H,{className:"settings-content"},l.createElement(O,{span:6},l.createElement(yl,{currentSection:n})),l.createElement(O,{span:18,className:"content-column"},l.createElement(xl,{currentSection:n}))))},jl=e=>({sections:e.sections}),Fl=e=>({actions:M({readSections:Ll,readSection:Bl},e)}),Gl=k(jl,Fl)(Ul),{LicensePremium:Hl}=acfwpElements,Vl=parseInt(acfwpElements.is_acfwp_active),ql=()=>{const{license_page:{title:e,desc:t,feature_comparison:a,license_status:r,content:n,specs:s}}=acfwAdminApp;return Vl?l.createElement(Hl,null):l.createElement("div",{className:"acfw-license-box"},l.createElement("div",{className:"overview"},l.createElement("h1",null,e),l.createElement("p",null,t),l.createElement("a",{className:"action-button feature-comparison",href:a.link,target:"_blank",rel:"noopener noreferrer"},a.text)),l.createElement("div",{className:"license-info"},l.createElement("div",{className:"heading"},l.createElement("div",{className:"left"},l.createElement("span",null,r.label)),l.createElement("div",{className:"right"},l.createElement("a",{className:"action-button upgrade-premium",href:r.link,target:"_blank",rel:"noopener noreferrer"},r.text))),l.createElement("div",{className:"content"},l.createElement("h2",null,n.title),l.createElement("p",null,n.text),l.createElement("table",{className:"license-specs"},l.createElement("thead",null,l.createElement("tr",null,s.map(c=>l.createElement("th",{key:c.label},c.label)))),l.createElement("tbody",null,l.createElement("tr",null,s.map(c=>l.createElement("td",{key:c.value},c.value))))))))};const{setStorePage:Yl}=le,zl=e=>{var i;const{actions:t}=e,a=X(),n=(i=new URLSearchParams(oe().search).get("tab"))!=null?i:"ACFW",[s,c]=l.useState(n),{license_tabs:o}=acfwAdminApp,d=u=>{a.push("".concat(te(),"admin.php?page=acfw-license&tab=").concat(u)),c(u),t.setStorePage({data:"acfw-license/".concat(u)})};return p.useEffect(()=>{n!=="ACFW"&&t.setStorePage({data:"acfw-license/".concat(n)})},[]),l.createElement("div",{className:"license-page"},l.createElement(se,{className:"license-header",hideUpgrade:!0}),l.createElement(ce,{defaultActiveKey:n,items:o,onTabClick:d}),s==="ACFW"&&l.createElement(ql,null))},Kl=e=>({actions:M({setStorePage:Yl},e)}),Wl=k(null,Kl)(zl);const Ql=()=>{const{about_page:{title:e,desc:t,main_card:a,cards:r,status:n,status_texts:s,button_texts:c}}=acfwAdminApp;return l.createElement("div",{className:"about-page"},l.createElement(se,{title:e,description:t,className:"about-header",hideUpgrade:!0}),l.createElement(H,{className:"about-rymera-team"},l.createElement(O,{className:"content",span:12},l.createElement("div",{className:"inner"},l.createElement("h2",null,a.title),a.content.map((o,d)=>l.createElement("p",{key:d},o)))),l.createElement(O,{className:"photo",span:12},l.createElement("img",{src:a.image,alt:"Rymera Team"}))),l.createElement(H,{className:"plugin-cards",gutter:10},r.map((o,d)=>l.createElement(O,{key:d,span:12},l.createElement(V,{actions:[l.createElement(l.Fragment,null,l.createElement("strong",null,n,": "),l.createElement("span",null,s[o.action.status])),o.action.link?l.createElement(P,{type:"primary",href:o.action.link,target:o.action.external?"_blank":void 0},c[o.action.status]):null]},l.createElement(V.Meta,{avatar:l.createElement(Na,{src:o.icon}),title:o.title,description:o.content}))))))};const{Text:ae,Link:St}=Lt,Jl=()=>{const{premium_page:{image:e,title:t,desc:a,header:r,rows:n,action:s},logo_alt:c}=acfwAdminApp;return React.createElement("div",{id:"acfw-premium",className:"acfwf-upgrade-settings-block"},React.createElement("p",null,React.createElement("a",{href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=logo",target:"_blank",rel:"noreferrer"},React.createElement("img",{className:"logo",src:e,alt:c}))),React.createElement("h2",{dangerouslySetInnerHTML:{__html:t}}),React.createElement("p",null,React.createElement(St,{className:"acfw-upgrade-button",href:s.btn_link,target:"_blank"},s.btn_text)),React.createElement("p",null,React.createElement(ae,null,a)),React.createElement("div",{className:"responsive-table"},React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"feature"},React.createElement(ae,null,r.feature)),React.createElement("th",{className:"free"},React.createElement(ae,null,r.free)),React.createElement("th",{className:"premium"},React.createElement(ae,null,r.premium)))),React.createElement("tbody",null,n.map(({feature:o,free:d,premium:i},u)=>React.createElement("tr",{key:u},React.createElement("td",{className:"feature"},React.createElement(ae,null,o)),React.createElement("td",{className:"free dashicons-before dashicons-no"},React.createElement(ae,null,d)),React.createElement("td",{className:"premium dashicons-before dashicons-yes-alt"},React.createElement(ae,null,i))))))),React.createElement("div",{className:"cta-block"},React.createElement("h3",null,React.createElement(ae,null,s.title)),React.createElement("p",null,React.createElement(St,{className:"acfw-upgrade-button",href:s.btn_link,target:"_blank"},s.btn_text))))};const Xl=()=>{const{help_page:{title:e,desc:t,cards:a}}=acfwAdminApp,{HelpPremium:r}=acfwpElements;return l.createElement("div",{className:"help-page"},l.createElement(se,{title:e,description:t,className:"help-header"}),l.createElement(H,{gutter:10},a.map((n,s)=>l.createElement(O,{key:s,className:"acfw-border-box",span:12},l.createElement(V,null,l.createElement("h2",null,n.title),l.createElement("p",null,n.content),l.createElement(P,{type:"primary",href:n.action.link,size:"large",target:"_blank"},n.action.text))))),l.createElement(H,{gutter:10},l.createElement(O,{className:"acfw-border-box",span:24},l.createElement(Je,{className:"help-guide",showSubtitle:!0,showTag:!1}))),r?l.createElement(r,null):null)};const Zl=e=>{const{step_count:t,title:a,description:r,is_active:n,action_text:s,link:c,is_external:o}=e;return React.createElement("div",{className:"plugin-step ".concat(n?"":"blocked")},React.createElement("div",{className:"step-count"},React.createElement("span",null,t)),React.createElement("div",{className:"inner-content"},React.createElement("p",{className:"title"},a),React.createElement("p",{className:"description"},r),React.createElement("p",{className:"actions"},React.createElement(P,{href:c,target:o?"_blank":""},s))))},ei=()=>{const{loyalty_program:{title:e,description:t,plugin_image:a,features_list:r,steps_list:n}}=acfwAdminApp;return React.createElement("div",{className:"loyalty-program-page-upsell"},React.createElement(se,{title:e,className:"loyalty-program-header",description:t,hideUpgrade:!0}),React.createElement(H,{className:"features-list",gutter:60},React.createElement(O,{span:12,className:"image"},React.createElement("img",{src:a.src,alt:a.alt})),React.createElement(O,{span:12,className:"content"},React.createElement("ul",null,r.map((s,c)=>React.createElement("li",{key:c},s))))),React.createElement("div",{className:"action-steps"},n.map((s,c)=>React.createElement(Zl,{key:c,...s}))))};const ti=e=>{const{step_count:t,title:a,description:r,is_active:n,action_text:s,link:c,is_external:o}=e;return React.createElement("div",{className:"plugin-step ".concat(n?"":"blocked")},React.createElement("div",{className:"step-count"},React.createElement("span",null,t)),React.createElement("div",{className:"inner-content"},React.createElement("p",{className:"title"},a),React.createElement("p",{className:"description"},r),React.createElement("p",{className:"actions"},React.createElement(P,{href:c,target:o?"_blank":""},s))))},ai=()=>{const{advanced_gift_cards:{title:e,description:t,plugin_image:a,features_list:r,steps_list:n}}=acfwAdminApp;return React.createElement("div",{className:"advanced-gift-cards-page-upsell"},React.createElement("div",{className:"page-header advanced-gift-cards-header"},React.createElement(Qe,{hideUpgrade:!0}),React.createElement("h1",null,e),React.createElement("p",null,t)),React.createElement(H,{className:"features-list",gutter:60},React.createElement(O,{span:12,className:"image"},React.createElement("img",{src:a.src,alt:a.alt})),React.createElement(O,{span:12,className:"content"},React.createElement("ul",null,r.map((s,c)=>React.createElement("li",{key:c},s))))),React.createElement("div",{className:"action-steps"},n.map((s,c)=>React.createElement(ti,{key:c,...s}))))},Xe=e=>{const{className:t}=e,a={rows:2,width:100};return React.createElement("div",{className:"coupon-templates-list ".concat(t)},[...Array(9)].map((r,n)=>React.createElement("div",{key:n,className:"coupon-template-card"},React.createElement("div",{className:"template-image"}),React.createElement("div",{className:"template-content"},React.createElement(z,{active:!0,paragraph:a})))))},{togglePremiumModal:ni,deleteRecentCouponTemplate:ri,unsetRecentCouponTemplate:si}=q,ci=e=>{const{labels:t}=acfwAdminApp.coupon_templates_page,a=X(),{template:r,isReview:n,showClose:s,actions:c}=e,o=()=>{if(r.license_type==="premium"&&!parseInt(acfwpElements.is_acfwp_active)){c.togglePremiumModal({show:!0});return}const i=n?"id=".concat(r.id,"&is_review=true"):"id=".concat(r.id);a.push("".concat(te(),"admin.php?page=acfw-coupon-templates&").concat(i))},d=()=>{c.deleteRecentCouponTemplate({id:r.id}),c.unsetRecentCouponTemplate({id:r.id})};return React.createElement("div",{className:"coupon-template-card"},React.createElement("div",{className:"template-image",style:{backgroundColor:r.image_bg_color}},s&&React.createElement("span",{className:"close-icon",onClick:d},React.createElement(Mt,null)),React.createElement("span",{className:"image-svg",onClick:o,dangerouslySetInnerHTML:{__html:r.image_svg}}),r.license_type==="premium"&&React.createElement("span",{className:"premium-badge"},t.premium)),React.createElement("div",{className:"template-content"},React.createElement("h3",{onClick:o},r.title),React.createElement("p",null,r.description)))},oi=e=>({actions:M({togglePremiumModal:ni,deleteRecentCouponTemplate:ri,unsetRecentCouponTemplate:si},e)}),li=k(null,oi)(ci),Ze=e=>{const{templates:t,isReview:a,showClose:r}=e,{labels:n}=acfwAdminApp.coupon_templates_page,[s,c]=p.useState(1),o=9,d=p.useMemo(()=>t.slice((s-1)*o,s*o),[t,s]);return p.useEffect(()=>{c(1)},[t]),t.length?React.createElement(React.Fragment,null,React.createElement("div",{className:"queried-templates-list coupon-templates-list"},d.map(i=>React.createElement(li,{key:i.id,template:i,isReview:a,showClose:r}))),React.createElement("div",{className:"templates-list-pagination"},React.createElement(Ge,{defaultCurrent:1,pageSize:o,current:s,total:t.length,onChange:i=>c(i),hideOnSinglePage:!0}))):React.createElement("div",{className:"no-templates-message"},n.no_templates_found)},ii=e=>{const{templates:t,actions:a}=e,[r,n]=p.useState(!1);return p.useEffect(()=>{n(!0),a.readRecentCouponTemplates({successCB:()=>n(!1)})},[]),r?React.createElement(Xe,{className:"coupon-templates-list"}):React.createElement(Ze,{templates:t,showClose:!0})},ui=e=>{var t,a;return{templates:(a=(t=e.couponTemplates)==null?void 0:t.recent)!=null?a:[]}},mi=e=>({actions:M({...q},e)}),di=k(ui,mi)(ii),pi=e=>{const{templates:t,loading:a,actions:r}=e;return p.useEffect(()=>{r.setCouponTemplatesLoading({loading:!0}),r.readCouponTemplates({successCB:()=>r.setCouponTemplatesLoading({loading:!1})})},[]),a?React.createElement(Xe,{className:"queried-templates-list"}):React.createElement(Ze,{templates:t})},Ei=e=>{var t,a,r,n;return{templates:(a=(t=e.couponTemplates)==null?void 0:t.templates)!=null?a:[],loading:(n=(r=e.couponTemplates)==null?void 0:r.loading)!=null?n:!1}},fi=e=>({actions:M({...q},e)}),_i=k(Ei,fi)(pi),gi=e=>{const{templates:t,loading:a,actions:r}=e;return p.useEffect(()=>{r.setCouponTemplatesLoading({loading:!0}),r.readCouponTemplates({isReview:!0,successCB:()=>r.setCouponTemplatesLoading({loading:!1})})},[]),a?React.createElement(Xe,{className:"queried-templates-list"}):React.createElement(Ze,{templates:t,isReview:!0})},hi=e=>{var t,a,r,n;return{templates:(a=(t=e.couponTemplates)==null?void 0:t.review)!=null?a:[],loading:(n=(r=e.couponTemplates)==null?void 0:r.loading)!=null?n:!1}},Ri=e=>({actions:M({...q},e)}),Si=k(hi,Ri)(gi),{readCouponTemplateCategories:Ti,readCouponTemplateCategory:yi,setCouponTemplatesLoading:de,readCouponTemplates:Ci}=q,bi=e=>{const{categories:t,actions:a}=e,{labels:r}=acfwAdminApp.coupon_templates_page,[n,s]=p.useState(!1),[c,o]=p.useState("all"),d=i=>{if(i!==c){if(o(i),i==="all"){a.readCouponTemplates({processingCB:()=>de({loading:!0}),successCB:()=>de({loading:!1})});return}a.readCouponTemplateCategory({slug:i,processingCB:()=>de({loading:!0}),successCB:()=>de({loading:!1})})}};return p.useEffect(()=>{s(!0),a.readCouponTemplateCategories({successCB:()=>s(!1)})},[]),React.createElement("div",{className:"coupon-templates-sidebar"},React.createElement("div",{className:"sidebar-inner"},React.createElement("h3",null,r.categories),React.createElement("ul",{className:"categories-list"},n?React.createElement(pe,null):React.createElement(React.Fragment,null,React.createElement("li",{className:c==="all"?"current":"",onClick:()=>d("all")},React.createElement("span",null,r.all_templates)),t.map(i=>React.createElement("li",{className:c===i.slug?"current":"",key:i.slug,onClick:()=>d(i.slug)},React.createElement("span",null,i.name)))))))},wi=e=>{var t,a;return{categories:(a=(t=e.couponTemplates)==null?void 0:t.categories)!=null?a:[]}},Ai=e=>({actions:M({readCouponTemplateCategories:Ti,readCouponTemplateCategory:yi,setCouponTemplatesLoading:de,readCouponTemplates:Ci},e)}),vi=k(wi,Ai)(bi),Oi=e=>{const{defaultValue:t,onChange:a}=e,[r,n]=p.useState(t!=null?t:""),s=o=>{n(o.target.value),a(o.target.value)},c=()=>{const o="ABCDEFGHJKMNPQRSTUVWXYZ123456789";let i="";for(let u=0;u<10;u++)i+=o.charAt(Math.floor(Math.random()*o.length));n(i),a(i)};return React.createElement(ge,{direction:"horizontal",size:"middle"},React.createElement(ge.Compact,null,React.createElement(Q,{allowClear:!0,value:r,onChange:s})),React.createElement(ge.Compact,null,React.createElement(P,{onClick:()=>c()},"Generate")))},Ni=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e;return React.createElement(Ve,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,min:r==null?void 0:r.min,max:r==null?void 0:r.max,step:r==null?void 0:r.step,onChange:n})},Pi=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e;return React.createElement("div",null,React.createElement(Q,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,onChange:s=>n(s.target.value)}))},Di=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,{currency:s}=acfwAdminApp.store_credits_page;return React.createElement("div",null,React.createElement(Ve,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,decimalSeparator:s.decimal_separator,parser:c=>Re(c!=null?c:"").toString(),onChange:n}))},Ii=e=>{var c;const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,s=Object.keys((c=r==null?void 0:r.options)!=null?c:{}).map(o=>({value:o,label:r!=null&&r.options?r==null?void 0:r.options[o]:""}));return React.createElement("div",null,React.createElement(K,{placeholder:r==null?void 0:r.placeholder,disabled:!a,defaultValue:t,options:s,onChange:n}))},$i=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e;return React.createElement("div",null,React.createElement(Q.TextArea,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,onChange:s=>n(s.target.value)}))},ki=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,[s,c]=p.useState(t==="yes");return React.createElement("div",null,React.createElement(Pa,{checked:s,disabled:!a,onChange:o=>{c(o.target.checked),n(o.target.checked?"yes":"no")}}),React.createElement("span",null,r.description))},Mi=()=>{var s;const[e,t]=p.useState(!1),[a,r]=p.useState((s=acfwAdminApp.user_role_options)!=null?s:[]),n=async()=>{try{t(!0);const c=await x.get("coupons/v1/templates/options",{params:{type:"user_role"},cancelToken:W("fetch_user_roles")});c&&c.data&&(acfwAdminApp.user_role_options=c.data,r(c.data)),t(!1)}catch(c){console.log(c)}};return p.useEffect(()=>(acfwAdminApp.user_role_options||n(),()=>we("fetch_user_roles")),[]),{options:a,loading:e}},xi=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,{options:s,loading:c}=Mi();return React.createElement("div",null,React.createElement(K,{mode:"multiple",placeholder:r==null?void 0:r.placeholder,disabled:!a,defaultValue:t.length?t:void 0,options:s,loading:c,onChange:o=>n(o)}))},Ae=({fetchOptions:e,optionMapper:t,debounceTimeout:a=800,...r})=>{const[n,s]=p.useState(!1),[c,o]=p.useState([]),d=p.useRef(0),i=p.useMemo(()=>Da(f=>{d.current+=1;const _=d.current;o([]),s(!0),e(f).then(g=>{_===d.current&&(o(g),s(!1))})},a),[e,a]);return React.createElement(K,{labelInValue:!0,filterOption:!1,onSearch:i,notFoundContent:n?React.createElement(pe,{size:"small"}):null,...r,options:c})},Li=e=>{const{fixtures:t,onChange:a}=e,[r,n]=p.useState([]),s=async o=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_products_and_variations",term:o,security:acfwAdminApp.nonces.search_products,exclude:r.map(u=>u.value)}});return Object.keys(d).map(u=>({label:d[u],value:u}))},c=o=>{n(o),a(o)};return React.createElement(Ae,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"}})},Bi=e=>{const{fixtures:t,onChange:a}=e,[r,n]=p.useState([]),s=async o=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_taxonomy_terms",term:o,taxonomy:"product_cat",security:acfwAdminApp.nonces.search_taxonomy_terms,exclude:r.map(u=>u.value)}});return Object.keys(d).map(u=>({label:d[u].name,value:d[u].term_id}))},c=o=>{n(o),a(o)};return React.createElement(Ae,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"}})},Ui=e=>{const{defaultValue:t,editable:a,onChange:r}=e,n=window.moment(t!=null?t:""),s=c=>{var o;r((o=c==null?void 0:c.format("YYYY-MM-DD HH:mm:ss"))!=null?o:"")};return React.createElement(je,{showTime:!0,defaultValue:n,disabled:!a,onChange:s})},ji=e=>{const{fixtures:t,onChange:a}=e,[r,n]=p.useState([]),s=async o=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"acfw_search_coupons",term:o,security:acfwAdminApp.nonces.search_products,include:!0,exclude:r.map(u=>u.value)}});return Object.keys(d).map(u=>({label:d[u],value:u}))},c=o=>{n(o),a(o)};return React.createElement(Ae,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"},value:r})},Fi=e=>{const{fixtures:t,onChange:a}=e,[r,n]=p.useState([]),s=async o=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_customers",term:o,security:acfwAdminApp.nonces.search_customers,exclude:r.map(u=>u.value)}});return Object.keys(d).map(u=>({label:d[u].replace("&ndash;","–"),value:u}))},c=o=>{n(o),a(o)};return React.createElement(Ae,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"},value:r})},Tt={coupon_code:Oi,number:Ni,text:Pi,price:Di,select:Ii,textarea:$i,checkbox:ki,user_roles:xi,products:Li,product_categories:Bi,date:Ui,coupons:ji,customers:Fi};function Gi(e){return Tt[e]?Tt[e]:()=>l.createElement("div",null,"Field type not found")}const{setEditCouponTemplateFieldValue:Hi}=q,Vi=e=>{const{templateField:t,actions:a}=e,{field:r,value:n,field_value:s,fixtures:c}=t,o="input-field-".concat(r),d=Gi(c.type),i=u=>{a.setFieldValue({field:t.field,value:u})};return React.createElement("div",{className:"template-field"},React.createElement("div",{className:"template-field-inner"},React.createElement("label",{htmlFor:o},c.label),React.createElement("div",{className:"field-input-wrap"},React.createElement(d,{defaultValue:n,editable:s!=="readonly",fixtures:c,onChange:i}),c.tooltip&&React.createElement(Ue,{className:"acfw-field-tooltip",placement:"right",content:c.tooltip,trigger:"click"},React.createElement(Fe,null))),!!(t!=null&&t.error)&&React.createElement("div",{className:"field-error"},t.error)))},qi=e=>({actions:M({setFieldValue:Hi},e)}),Yi=k(null,qi)(Vi),Ie=e=>{const{text:t,size:a,onClick:r}=e,n=X(),s=()=>{typeof r=="function"&&r(),n.goBack()};return React.createElement(P,{onClick:s,size:a},t)},{validateEditCouponTemplateData:zi,createCouponFromTemplate:Ki,setCreatedCouponResponseData:Wi}=q,Qi=e=>{const{template:t,text:a,size:r,actions:n}=e,[s,c]=p.useState(!1),o=()=>{var u;n.validateEditCouponTemplateData();const d=(u=t==null?void 0:t.fields)==null?void 0:u.filter(f=>f.error);if(!t||d!=null&&d.length)return;const i={id:t.id,fields:t.fields.map(f=>({key:f.field,value:f.value,type:f.fixtures.type}))};c(!0),n.createCouponFromTemplate({data:i,successCB:f=>{c(!1),n.setCreatedCouponResponseData({data:f.data})}})};return React.createElement(P,{loading:s,type:"primary",onClick:o,size:r},a)},Ji=e=>{var t,a,r,n;return{template:(a=(t=e.couponTemplates)==null?void 0:t.edit)!=null?a:null,formResponse:(n=(r=e.couponTemplates)==null?void 0:r.formResponse)!=null?n:null}},Xi=e=>({actions:M({validateEditCouponTemplateData:zi,createCouponFromTemplate:Ki,setCreatedCouponResponseData:Wi},e)}),Zi=k(Ji,Xi)(Qi);const{clearCreatedCouponResponseData:eu}=q,tu=e=>{const{formResponse:t,actions:a}=e,{labels:r}=acfwAdminApp.coupon_templates_page;if(t){const{message:n,coupon_edit_url:s}=t;return React.createElement("div",{className:"coupon-template-success-page"},React.createElement("div",{className:"inner"},React.createElement("div",{className:"content-box"},React.createElement("h2",null,n),React.createElement("p",null,r.success_page_desc),React.createElement("ul",null,t.fields.map(c=>React.createElement("li",{key:c.label},React.createElement("strong",null,c.label,": "),c.value)))),React.createElement("div",{className:"actions-box"},React.createElement(P,{className:"create-another-btn",type:"primary",size:"large",onClick:()=>a.clearCreatedCouponResponseData()},React.createElement("span",null,r.create_another_coupon),React.createElement("em",null,r.using_the_same_template)),React.createElement(P,{href:s,size:"large"},r.edit_coupon),React.createElement(Ie,{text:r.view_templates_list,size:"large",onClick:()=>a.clearCreatedCouponResponseData()}))))}return null},au=e=>{var t,a;return{formResponse:(a=(t=e.couponTemplates)==null?void 0:t.formResponse)!=null?a:null}},nu=e=>({actions:M({clearCreatedCouponResponseData:eu},e)}),ru=k(au,nu)(tu);const{readCouponTemplate:su,setEditCouponTemplate:cu,validateEditCouponTemplateData:ou,setCreatedCouponResponseData:lu}=q,iu=e=>{var f,_;const{template:t,formResponse:a,actions:r}=e,[n,s]=p.useState(!0),{labels:c}=acfwAdminApp.coupon_templates_page,o=new URLSearchParams(oe().search),d=(f=o.get("id"))!=null?f:"0",i=(_=o.get("is_review"))!=null?_:!1,u={rows:2,width:100};return p.useEffect(()=>{t&&(t!=null&&t.fields)||r.readCouponTemplate({id:parseInt(d),isReview:!!i,successCB:g=>{s(!1),r.setEditCouponTemplate({data:g.data})},failCB:()=>s(!1)})},[]),t!=null&&t.fields?a?React.createElement(ru,null):React.createElement("div",{className:"acfw-coupon-template-form"},React.createElement(H,{gutter:16},React.createElement(O,{span:18},React.createElement("div",{className:"template-form-main"},t?React.createElement(React.Fragment,null,React.createElement("div",{className:"template-heading"},React.createElement("h2",null,t.title),React.createElement("p",null,t.description)),React.createElement("div",{className:"form-instruction"},React.createElement("em",null,c.form_instruction))):React.createElement(z,{active:!0,paragraph:u}),React.createElement("div",{className:"template-fields"},t.fields.map((g,C)=>{var R;return React.createElement(Yi,{key:"".concat(g.field,"-").concat((R=g==null?void 0:g.error)!=null?R:""),templateField:g})})))),React.createElement(O,{span:6},React.createElement("div",{className:"template-actions"},React.createElement(Zi,{text:c.create_coupon,size:"large"}),React.createElement(Ie,{text:c.cancel,onClick:()=>r.setEditCouponTemplate({data:null}),size:"large"}))))):React.createElement("div",{className:"acfw-coupon-template-form"},React.createElement(H,{gutter:16},React.createElement(O,{span:18},React.createElement("div",{className:"template-form-main template-loading"},n?React.createElement(pe,null):React.createElement("p",{className:"template-not-found"},c.template_not_found))),React.createElement(O,{span:6},React.createElement("div",{className:"template-actions"},React.createElement(Ie,{text:c.go_back,onClick:()=>r.setEditCouponTemplate({data:null}),size:"large"})))))},uu=e=>{var t,a,r,n;return{template:(a=(t=e.couponTemplates)==null?void 0:t.edit)!=null?a:null,formResponse:(n=(r=e.couponTemplates)==null?void 0:r.formResponse)!=null?n:null}},mu=e=>({actions:M({readCouponTemplate:su,setEditCouponTemplate:cu,validateEditCouponTemplateData:ou,setCreatedCouponResponseData:lu},e)}),du=k(uu,mu)(iu);const{togglePremiumModal:pu}=q,Eu=e=>{var d;const{showModal:t,actions:a}=e,{title:r,labels:n,enable_review_tab:s}=acfwAdminApp.coupon_templates_page,o=(d=new URLSearchParams(oe().search).get("id"))!=null?d:null;return React.createElement("div",{className:"coupon-templates-page"},React.createElement(se,{title:r,className:"coupon-templates-header"}),o?React.createElement(du,null):React.createElement(ce,{defaultActiveKey:"2",className:"coupon-templates-tabs"},React.createElement(ce.TabPane,{tab:n.recently_used_templates,key:"1"},React.createElement(H,{gutter:16},React.createElement(O,{span:18},React.createElement(di,null)))),React.createElement(ce.TabPane,{tab:n.available_templates,key:"2"},React.createElement(H,{gutter:16},React.createElement(O,{span:18},React.createElement(_i,null)),React.createElement(O,{span:6},React.createElement(vi,null)))),s&&React.createElement(ce.TabPane,{tab:n.review_templates,key:"3"},React.createElement(H,{gutter:16},React.createElement(O,{span:18},React.createElement(Si,null))))),React.createElement(Ee,{className:"coupon-templates-premium-modal",open:t,centered:!0,onCancel:()=>a.togglePremiumModal({show:!1}),footer:null},React.createElement(Qe,{hideUpgrade:!0}),React.createElement("p",null,n.premium_modal_text),React.createElement(P,{type:"primary",href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=coupontemplates",size:"large",target:"_blank"},n.premium_modal_btn)))},fu=e=>{var t,a;return{showModal:(a=(t=e.couponTemplates)==null?void 0:t.premiumModal)!=null?a:!1}},_u=e=>({actions:M({togglePremiumModal:pu},e)}),gu=k(fu,_u)(Eu),hu=parseInt(acfwpElements.is_lpfw_active),Ru=parseInt(acfwpElements.is_agc_active),{setStorePage:Su}=le,{readAdminNotices:Tu}=We;acfwpElements.axiosInstance=x;const yu=e=>{const{page:t,actions:a}=e,n=new URLSearchParams(oe().search).get("page");return acfwpElements.appPage=n,p.useEffect(()=>{a.setStorePage({data:n||""})},[n,a]),p.useEffect(()=>{a.readAdminNotices({})},[]),l.createElement("div",{className:"app"},t==="acfw-dashboard"?l.createElement(Lo,null):null,t==="acfw-store-credits"?l.createElement(gl,null):null,t==="acfw-coupon-templates"?l.createElement(gu,null):null,t==="acfw-settings"?l.createElement(Gl,null):null,t.includes("acfw-license")?l.createElement(Wl,null):null,t==="acfw-premium"?l.createElement(Jl,null):null,t==="acfw-help"?l.createElement(Xl,null):null,t==="acfw-about"?l.createElement(Ql,null):null,t==="acfw-loyalty-program"&&!hu?l.createElement(ei,null):null,t==="acfw-advanced-gift-cards"&&!Ru?l.createElement(ai,null):null)},Cu=e=>({page:e.page}),bu=e=>({actions:M({setStorePage:Su,readAdminNotices:Tu},e)}),wu=k(Cu,bu)(yu);const{setStorePage:Au}=le,vu=e=>{const{page:t,notices:a,actions:r}=e,[n,s]=p.useState(""),c=X(),o=te(),{coupon_nav:{toplevel:d,dashboard:i,links:u},app_pages:f}=acfwAdminApp,_=g=>{c.push("".concat(o,"admin.php?page=").concat(g)),r.setStorePage({data:g})};return p.useEffect(()=>{document.body.classList.add(t),n&&document.body.classList.remove(n),s(t)},[t]),React.createElement(React.Fragment,null,React.createElement("a",{href:"".concat(o,"edit.php?post_type=shop_coupon"),className:"wp-has-submenu wp-has-current-submenu wp-menu-open menu-top toplevel_page_acfw-admin"},React.createElement("div",{className:"wp-menu-arrow"},React.createElement("div",null)),React.createElement("div",{className:"wp-menu-image dashicons-before dashicons-tickets-alt"},React.createElement("br",null)),React.createElement("div",{className:"wp-menu-name"},d,0<a.length&&React.createElement(React.Fragment,null," ",React.createElement("span",{className:"update-plugins count-".concat(a.length)},React.createElement("span",{className:"notices-count"},a.length))))),React.createElement("ul",{className:"wp-submenu wp-submenu-wrap"},React.createElement("li",{className:"wp-submenu-head","aria-hidden":"true"},d),React.createElement("li",{key:"acfw-dashboard",className:"wp-first-item ".concat(t==="acfw-dashboard"?"current":"")},React.createElement("button",{className:"buttonlink dashboard-link",onClick:()=>_("acfw-dashboard")},i)),u.map(({link:g,text:C},R)=>React.createElement("li",{key:R},React.createElement("a",{href:g},C))),f.map(({slug:g,label:C})=>React.createElement("li",{key:g,className:g===t?"current":""},React.createElement("button",{className:"buttonlink ".concat(g,"-link"),onClick:()=>_(g)},C)))))},Ou=e=>({page:e.page,notices:e.adminNotices}),Nu=e=>({actions:M({setStorePage:Au},e)}),Pu=k(Ou,Nu)(vu),et=te(),tt=co(),Du={element:l,dom:$e,router:{BrowserRouter:ke,Route:Me,useLocation:oe,useHistory:X,Link:yt,Redirect:sa},redux:{bindActionCreators:M,createStore:At,combineReducers:vt,applyMiddleware:Ot,createSagaMiddleware:wt,connect:k,sagaEffects:{all:bt,put:B,call:U,takeEvery:L}},lodash:window.lodash,antd:Ia,antdIcons:Qa,moment:window.moment,pathPrefix:et,validateURL:Zt,appStore:{Provider:xe,store:tt,storeActions:{...le}}};acfwpElements={...acfwpElements,...Du};document.querySelectorAll("#acfw_admin_app").forEach(e=>{$e.render(l.createElement(xe,{store:tt},l.createElement(ke,null,l.createElement(Me,{path:"".concat(et,"admin.php"),component:wu}))),e)});document.querySelectorAll("#toplevel_page_acfw-admin").forEach(e=>{$e.render(l.createElement(xe,{store:tt},l.createElement(ke,null,l.createElement(Me,{path:"".concat(et,"admin.php"),component:Pu}))),e)});export{Iu as __vite_legacy_guard};
